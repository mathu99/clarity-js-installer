Komodo.Application.ClientTrackerController=Komodo.UI.Controller.extend({_list:[],_filteredList:[],_fullList:[],_noRecords:!1,_filterDate:void 0,_machineName:void 0,_version:void 0,_noMatches:!1,init:function(){this._super(),this.requiresDependency("_localizationService",{singleton:Komodo.Services.localizationService}),this.requiresDependency("_eventAggregator",{singleton:Komodo.Services.eventAggregator}),this.requiresDependency("_systemService",{singleton:Komodo.Services.systemService}),this.requiresDependency("_cachedDataService",{singleton:Komodo.Services.cachedDataService}),this.requiresDependency("_communicationService",{singleton:Komodo.Services.communicationService}),this.requiresDependency("_uiService",{singleton:Komodo.Services.UIService}),this.getEventAggregator().subscribe("filterList",this,this.resetData)},start:function(){this._super(),KomodoConfiguration.overrideEmber||(this.set("_filterDate",this.get("model").dateUpdated),this.set("_machineName",this.get("model").machineName),this.set("_version",this.get("model").version),this.loadData())},resetData:function(e){this.set("model.dateUpdated",e.dateUpdated),this.set("model.machineName",e.machineName),this.set("model.version",e.version),this.set("model.type",e.type)},loadData:function(){var e=this;e.set("_fulllist",[]),e.set("_filteredList",[]),this.getCommunicationService().getResource("/connectedusers?countrycode="+this.getUIService().getController("application").get("_selectedCountryId")).done(function(t){t.forEach(function(t){var s={countryCode:t.countryCode,dateLastUpdated:moment(t.dateLastUpdated).format(KomodoConfiguration.dateTimeFormat),ipAddress:t.ipAddress,machineName:t.machineName,version:t.version};e.get("_fullList").push(s),e.set("_noRecords",!1)}),e.set("_filteredList",e.get("_fullList"))}).fail(function(t){e.set("_noRecords",!0),Komodo.log(t)})},getLocalizationService:function(){return this.get("_localizationService")},getUIService:function(){return this.get("_uiService")},getSystemService:function(){return this.get("_systemService")},getCachedDataService:function(){return this.get("_cachedDataService")},getCommunicationService:function(){return this.get("_communicationService")},getEventAggregator:function(){return this.get("_eventAggregator")},actions:{filterList:function(){var e=[],t=this;return this.get("_filteredList").forEach(function(s){(void 0!==t.get("_filterDate")&&s.dateLastUpdated.includes(moment(t.get("_filterDate")).format(KomodoConfiguration.dateFormat))||s.machineName.includes(t.get("_machineName"))||s.version.includes(t.get("_version")))&&e.push(s)}),this.set("_filteredList",e),0===this.get("_filteredList").length&&this.set("_noMatches",!0),this.get("_filteredList")},clearFilters:function(){this.set("_filteredList",this.get("_fullList")),this.set("_filterDate",void 0),this.set("_machineName",void 0),this.set("_version",void 0),this.set("_noMatches",!1)},refresh:function(){this.get("_filteredList").clear(),this.get("_fullList").clear(),this.loadData(),this.set("_filterDate",void 0),this.set("_machineName",void 0),this.set("_version",void 0),this.set("_noMatches",!1)}},stop:function(){this.get("_filteredList").clear(),this.get("_fullList").clear(),this.set("_filterDate",void 0),this.set("_machineName",void 0),this.set("_version",void 0),this.set("_noMatches",!1),this._super()}}),Komodo.Models.ClientTrackerModel=Ember.Object.extend({init:function(){this.dateUpdated=void 0,this.machineName=void 0,this.version=void 0,this._super()}}),Komodo.Application.ClientTrackerRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"clientTracker",renderTemplate:function(){KomodoConfiguration.overrideEmber?this.render("clientTrackerComponent"):this.render("clientTracker",{controller:"clientTracker"})},init:function(){this.useCaseDisplayName=kl.value("locale.clientTracker:clientTracker"),this._super()},model:function(e){return e.queryParams}}),Komodo.UI.Route.registerRoutes(function(){this.resource("clientTracker"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.Utilities,routeName:"clientTracker",title:kl.value("locale.clientTracker:clientTracker"),desiredLocation:13,type:Komodo.NavigationTypes.HomeTileSubLink})}),Ember.TEMPLATES.ClientTrackerComponentView=Ember.Handlebars.template(function(e,t,s,a,r){this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),r=r||{};var n=this.escapeExpression;return r.buffer.push("<div class='no-banner-padding'>\r\n    <connected-clients-filter-component id=\"connectedClientsFilterComponent\" "),r.buffer.push(n(s["bind-attr"].call(t,{hash:{"filter-date":"model.dateUpdated","filter-machine-name":"model.machineName","filter-version":"model.version"},hashTypes:{"filter-date":"ID","filter-machine-name":"ID","filter-version":"ID"},hashContexts:{"filter-date":t,"filter-machine-name":t,"filter-version":t},contexts:[],types:[],data:r}))),r.buffer.push('></connected-clients-filter-component>\r\n    <connected-clients-list-component id="connectedClientsListComponent" '),r.buffer.push(n(s["bind-attr"].call(t,{hash:{"filter-date":"model.dateUpdated","filter-machine-name":"model.machineName","filter-version":"model.version"},hashTypes:{"filter-date":"ID","filter-machine-name":"ID","filter-version":"ID"},hashContexts:{"filter-date":t,"filter-machine-name":t,"filter-version":t},contexts:[],types:[],data:r}))),r.buffer.push("></connected-clients-list-component>\r\n</div>"),""}),Ember.TEMPLATES.ClientTrackerView=Ember.Handlebars.template(function(e,t,s,a,r){function n(e,t){var a,r;return t.buffer.push('\r\n        <p class="sub-heading">'),t.buffer.push(I((a=s.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},a?a.call(e,"locale.clientTracker:noRecords",r):_.call(e,"loc","locale.clientTracker:noRecords",r)))),t.buffer.push("</p>\r\n    "),""}function o(e,t){var a;return t.buffer.push("\r\n   \r\n        "),a=s.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:S.noop,fn:S.program(4,i,t),contexts:[e],types:["ID"],data:t}),(a||0===a)&&t.buffer.push(a),t.buffer.push("\r\n        "),a=s.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:S.noop,fn:S.program(7,l,t),contexts:[e],types:["ID"],data:t}),(a||0===a)&&t.buffer.push(a),t.buffer.push("\r\n        <br/>\r\n        <hr/>\r\n    <br/>\r\n  \r\n        "),a=s.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:S.noop,fn:S.program(19,v,t),contexts:[e],types:["ID"],data:t}),(a||0===a)&&t.buffer.push(a),t.buffer.push("\r\n    "),""}function i(e,t){var a;return t.buffer.push("\r\n        "),a=s.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:S.noop,fn:S.program(5,c,t),contexts:[e],types:["ID"],data:t}),(a||0===a)&&t.buffer.push(a),t.buffer.push("\r\n        "),""}function c(e,t){var a,r;return t.buffer.push('\r\n        <p class="sub-heading">'),t.buffer.push(I((a=s.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},a?a.call(e,"locale.clientTracker:filterListBy",r):_.call(e,"loc","locale.clientTracker:filterListBy",r)))),t.buffer.push("</p>\r\n        "),""}function l(e,t){var a;return t.buffer.push("\r\n        "),a=s.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-4"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:S.noop,fn:S.program(8,h,t),contexts:[e],types:["ID"],data:t}),(a||0===a)&&t.buffer.push(a),t.buffer.push("\r\n        "),a=s.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-4"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:S.noop,fn:S.program(10,u,t),contexts:[e],types:["ID"],data:t}),(a||0===a)&&t.buffer.push(a),t.buffer.push("\r\n        "),a=s.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-4"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:S.noop,fn:S.program(12,f,t),contexts:[e],types:["ID"],data:t}),(a||0===a)&&t.buffer.push(a),t.buffer.push("\r\n        "),""}function h(e,t){return t.buffer.push("\r\n        "),t.buffer.push(I(s.view.call(e,"Komodo.Controls.DatePicker",{hash:{valueBinding:"_filterDate",label:"~locale.clientTracker:dateUpdated~"},hashTypes:{valueBinding:"STRING",label:"STRING"},hashContexts:{valueBinding:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),""}function u(e,t){return t.buffer.push("\r\n        "),t.buffer.push(I(s.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"_machineName",label:"~locale.clientTracker:machineName~"},hashTypes:{valueBinding:"STRING",label:"STRING"},hashContexts:{valueBinding:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),""}function f(e,t){var a;return t.buffer.push("\r\n        "),t.buffer.push(I(s.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"_version",label:"~locale.clientTracker:version~"},hashTypes:{valueBinding:"STRING",label:"STRING"},hashContexts:{valueBinding:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        <br/>\r\n        <div class="float-right">\r\n            '),a=s.view.call(e,"Komodo.Controls.Button",{hash:{action:"filterList"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:S.noop,fn:S.program(13,d,t),contexts:[e],types:["ID"],data:t}),(a||0===a)&&t.buffer.push(a),t.buffer.push("\r\n            "),a=s.view.call(e,"Komodo.Controls.Button",{hash:{action:"clearFilters",type:"inverse"},hashTypes:{action:"STRING",type:"STRING"},hashContexts:{action:e,type:e},inverse:S.noop,fn:S.program(15,p,t),contexts:[e],types:["ID"],data:t}),(a||0===a)&&t.buffer.push(a),t.buffer.push("\r\n            "),a=s.view.call(e,"Komodo.Controls.Button",{hash:{action:"refresh",type:"success"},hashTypes:{action:"STRING",type:"STRING"},hashContexts:{action:e,type:e},inverse:S.noop,fn:S.program(17,m,t),contexts:[e],types:["ID"],data:t}),(a||0===a)&&t.buffer.push(a),t.buffer.push("\r\n        </div>\r\n        "),""}function d(e,t){var a,r,n;r=s.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},a=r?r.call(e,"locale.clientTracker:search",n):_.call(e,"loc","locale.clientTracker:search",n),a||0===a?t.buffer.push(a):t.buffer.push("")}function p(e,t){var a,r,n;r=s.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},a=r?r.call(e,"locale.clientTracker:clear",n):_.call(e,"loc","locale.clientTracker:clear",n),a||0===a?t.buffer.push(a):t.buffer.push("")}function m(e,t){var a,r,n;r=s.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},a=r?r.call(e,"locale.clientTracker:refresh",n):_.call(e,"loc","locale.clientTracker:refresh",n),a||0===a?t.buffer.push(a):t.buffer.push("")}function v(e,t){var a;return t.buffer.push("\r\n        "),a=s.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:S.noop,fn:S.program(20,b,t),contexts:[e],types:["ID"],data:t}),(a||0===a)&&t.buffer.push(a),t.buffer.push("\r\n        "),""}function b(e,t){var a,r,n;return t.buffer.push("\r\n        "),a=s.if.call(e,"_noMatches",{hash:{},hashTypes:{},hashContexts:{},inverse:S.noop,fn:S.program(21,T,t),contexts:[e],types:["ID"],data:t}),(a||0===a)&&t.buffer.push(a),t.buffer.push('\r\n        <table class="table table-bordered komodo-datagrid">\r\n            <thead>\r\n            <tr>\r\n                <th>'),t.buffer.push(I((r=s.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},r?r.call(e,"locale.clientTracker:machineName",n):_.call(e,"loc","locale.clientTracker:machineName",n)))),t.buffer.push("</th>\r\n                <th>"),t.buffer.push(I((r=s.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},r?r.call(e,"locale.clientTracker:ipAddress",n):_.call(e,"loc","locale.clientTracker:ipAddress",n)))),t.buffer.push("</th>\r\n                <th>"),t.buffer.push(I((r=s.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},r?r.call(e,"locale.clientTracker:dateUpdated",n):_.call(e,"loc","locale.clientTracker:dateUpdated",n)))),t.buffer.push("</th>\r\n                <th>"),t.buffer.push(I((r=s.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},r?r.call(e,"locale.clientTracker:version",n):_.call(e,"loc","locale.clientTracker:version",n)))),t.buffer.push("</th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            "),a=s.each.call(e,"item","in","_filteredList",{hash:{},hashTypes:{},hashContexts:{},inverse:S.noop,fn:S.program(23,g,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(a||0===a)&&t.buffer.push(a),t.buffer.push("\r\n            </tbody>\r\n        </table>\r\n        "),""}function T(e,t){var a,r;return t.buffer.push('\r\n        <p class="sub-heading">'),t.buffer.push(I((a=s.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},a?a.call(e,"locale.clientTracker:noMatches",r):_.call(e,"loc","locale.clientTracker:noMatches",r)))),t.buffer.push("</p>"),""}function g(e,t){var a;return t.buffer.push("\r\n            <tr>\r\n                <td>"),a=s._triageMustache.call(e,"item.machineName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(a||0===a)&&t.buffer.push(a),t.buffer.push("</td>\r\n                <td>"),a=s._triageMustache.call(e,"item.ipAddress",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(a||0===a)&&t.buffer.push(a),t.buffer.push("</td>\r\n                <td>"),a=s._triageMustache.call(e,"item.dateLastUpdated",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(a||0===a)&&t.buffer.push(a),t.buffer.push("</td>\r\n                <td>"),a=s._triageMustache.call(e,"item.version",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(a||0===a)&&t.buffer.push(a),t.buffer.push("</td>\r\n            </tr>\r\n            "),""}this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),r=r||{};var y,C,x,_=s.helperMissing,I=this.escapeExpression,S=this;return r.buffer.push("<div class='no-banner-padding'>\r\n    <div>\r\n            <span class=\"komodo-heading\">"),r.buffer.push(I((C=s.loc||t&&t.loc,x={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:r},C?C.call(t,"locale.clientTracker:clientTracker",x):_.call(t,"loc","locale.clientTracker:clientTracker",x)))),r.buffer.push('</span>\r\n            <span class="float-right">\r\n                <b>\r\n                    <a href="#/home">&lt;'),r.buffer.push(I((C=s.loc||t&&t.loc,x={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:r},C?C.call(t,"locale.clientTracker:back",x):_.call(t,"loc","locale.clientTracker:back",x)))),r.buffer.push("</a>\r\n                </b>\r\n            </span>\r\n        </div>\r\n    <hr/>\r\n    "),y=s.if.call(t,"_noRecords",{hash:{},hashTypes:{},hashContexts:{},inverse:S.program(3,o,r),fn:S.program(1,n,r),contexts:[t],types:["ID"],data:r}),(y||0===y)&&r.buffer.push(y),r.buffer.push("\r\n</div>"),""}),Komodo.Application.ClientTrackerComponentView=Komodo.UI.View.extend({viewKey:"ClientTrackerComponentView"}),Komodo.Application.ClientTrackerView=Komodo.UI.View.extend({viewKey:"ClientTrackerView"}),Komodo.Services.localizationService.registerNamespace("locale.clientTracker");