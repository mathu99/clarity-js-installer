Ember.TEMPLATES.ShiftDetailsView=Ember.Handlebars.template(function(e,t,a,n,s){function i(e,t){var n,s;return t.buffer.push("\r\n  "),t.buffer.push(y((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.offlinePayment:customer.search",s):b.call(e,"loc","locale.offlinePayment:customer.search",s)))),t.buffer.push("\r\n  "),""}function o(e,t){var n;return t.buffer.push("\r\n      "),n=a.each.call(e,"item","in","row.SplitPayments",{hash:{},hashTypes:{},hashContexts:{},inverse:x.noop,fn:x.program(4,r,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(n||0===n)&&t.buffer.push(n),t.buffer.push("\r\n      "),""}function r(e,t){var n;return t.buffer.push("\r\n      <tr>\r\n        <td>\r\n          "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"item.CustomerID"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"item.AccountType.description"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n\r\n        <td>\r\n          "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"row.MethodOfPayment"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"row.PaymentDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"row.isCancelled"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n        <td class="text-right">\r\n          '),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"row.Amount.Value"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),n=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"reprintReceipt",size:"xs"},hashTypes:{action:"STRING",size:"STRING"},hashContexts:{action:e,size:e},inverse:x.noop,fn:x.program(5,l,t),contexts:[e],types:["ID"],data:t}),(n||0===n)&&t.buffer.push(n),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),n=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"cancelPayment",size:"xs",disabledBinding:"row.disableCancel"},hashTypes:{action:"STRING",size:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,size:e,disabledBinding:e},inverse:x.noop,fn:x.program(7,h,t),contexts:[e],types:["ID"],data:t}),(n||0===n)&&t.buffer.push(n),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n      "),""}function l(e,t){var n,s;return t.buffer.push("\r\n          "),t.buffer.push(y((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.offlinePayment:shift.reprint",s):b.call(e,"loc","locale.offlinePayment:shift.reprint",s)))),t.buffer.push("\r\n          "),""}function h(e,t){var n,s;return t.buffer.push("\r\n          "),t.buffer.push(y((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.offlinePayment:shift.cancel",s):b.call(e,"loc","locale.offlinePayment:shift.cancel",s)))),t.buffer.push("\r\n          "),""}function d(e,t){var n,s;return t.buffer.push("\r\n    "),t.buffer.push(y((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.offlinePayment:shift.previous",s):b.call(e,"loc","locale.offlinePayment:shift.previous",s)))),t.buffer.push("\r\n    "),""}function f(e,t){var n,s;return t.buffer.push("\r\n    "),t.buffer.push(y((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.offlinePayment:shift.next",s):b.call(e,"loc","locale.offlinePayment:shift.next",s)))),t.buffer.push("\r\n    "),""}function u(e,t){var n,s;return t.buffer.push("\r\n    "),t.buffer.push(y((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.offlinePayment:shift.close",s):b.call(e,"loc","locale.offlinePayment:shift.close",s)))),t.buffer.push("\r\n    "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var c,p,m,b=a.helperMissing,y=this.escapeExpression,x=this;return s.buffer.push('<div class="modal-max-size">\r\n  '),s.buffer.push(y(a.view.call(t,"Komodo.Controls.CoreTextField",{hash:{tabindex:"1",placeholderBinding:"data.searchTextPlaceholder",valueBinding:"view.context.searchText"},hashTypes:{tabindex:"STRING",placeholderBinding:"STRING",valueBinding:"STRING"},hashContexts:{tabindex:t,placeholderBinding:t,valueBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("&nbsp;\r\n  "),c=a.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"2",action:"searchReceipt",class:"button-no-margin"},hashTypes:{tabindex:"STRING",action:"STRING",class:"STRING"},hashContexts:{tabindex:t,action:t,class:t},inverse:x.noop,fn:x.program(1,i,s),contexts:[t],types:["ID"],data:s}),(c||0===c)&&s.buffer.push(c),s.buffer.push('\r\n  <br/><br/>\r\n  <div style="height:425px; overflow-x: auto; overflow-y: auto;">\r\n    <table '),s.buffer.push(y(a["bind-attr"].call(t,{hash:{class:":table :table-bordered :komodo-datagrid :print-table :text-nowrap"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push(">\r\n      <tr>\r\n        <th>"),s.buffer.push(y((p=a.loc||t&&t.loc,m={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},p?p.call(t,"locale.offlinePayment:customer.customerNumber",m):b.call(t,"loc","locale.offlinePayment:customer.customerNumber",m)))),s.buffer.push("</th>\r\n        <th>"),s.buffer.push(y((p=a.loc||t&&t.loc,m={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},p?p.call(t,"locale.offlinePayment:shift.accountType",m):b.call(t,"loc","locale.offlinePayment:shift.accountType",m)))),s.buffer.push("</th>\r\n        <th>"),s.buffer.push(y((p=a.loc||t&&t.loc,m={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},p?p.call(t,"locale.offlinePayment:shift.paymentType",m):b.call(t,"loc","locale.offlinePayment:shift.paymentType",m)))),s.buffer.push("</th>\r\n        <th>"),s.buffer.push(y((p=a.loc||t&&t.loc,m={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},p?p.call(t,"locale.offlinePayment:shift.date",m):b.call(t,"loc","locale.offlinePayment:shift.date",m)))),s.buffer.push("</th>\r\n        <th>"),s.buffer.push(y((p=a.loc||t&&t.loc,m={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},p?p.call(t,"locale.offlinePayment:shift.isCancel",m):b.call(t,"loc","locale.offlinePayment:shift.isCancel",m)))),s.buffer.push("</th>\r\n        <th>"),s.buffer.push(y((p=a.loc||t&&t.loc,m={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},p?p.call(t,"locale.offlinePayment:shift.paymentAmount",m):b.call(t,"loc","locale.offlinePayment:shift.paymentAmount",m)))),s.buffer.push("</th>\r\n        <th></th>\r\n        <th></th>\r\n      </tr>\r\n      "),c=a.each.call(t,"row","in","data",{hash:{},hashTypes:{},hashContexts:{},inverse:x.noop,fn:x.program(3,o,s),contexts:[t,t,t],types:["ID","ID","ID"],data:s}),(c||0===c)&&s.buffer.push(c),s.buffer.push('\r\n    </table>\r\n  </div>\r\n  <div style="float:right; width:60%;">\r\n    '),c=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"previousPage",id:"btnPreviousbottom",disabledBinding:"view.context.isPreviousDisable.value"},hashTypes:{action:"STRING",id:"STRING",disabledBinding:"STRING"},hashContexts:{action:t,id:t,disabledBinding:t},inverse:x.noop,fn:x.program(9,d,s),contexts:[t],types:["ID"],data:s}),(c||0===c)&&s.buffer.push(c),s.buffer.push("\r\n\r\n    "),c=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"nextPage",id:"btnNextbottom",disabledBinding:"view.context.isNextDisable.value"},hashTypes:{action:"STRING",id:"STRING",disabledBinding:"STRING"},hashContexts:{action:t,id:t,disabledBinding:t},inverse:x.noop,fn:x.program(11,f,s),contexts:[t],types:["ID"],data:s}),(c||0===c)&&s.buffer.push(c),s.buffer.push('\r\n  </div>\r\n  <br/><br/>\r\n  <div style="float:right;">\r\n    '),c=a.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"3",action:"cancel"},hashTypes:{tabindex:"STRING",action:"STRING"},hashContexts:{tabindex:t,action:t},inverse:x.noop,fn:x.program(13,u,s),contexts:[t],types:["ID"],data:s}),(c||0===c)&&s.buffer.push(c),s.buffer.push("\r\n  </div>\r\n</div>"),""}),Komodo.Application.OfflinePaymentRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"offlinePayment",useCaseDisplayName:kl.value("locale.offlinePayment:home.customerPayment"),renderTemplate:function(){this.render("offlineShiftDetailsContainer",{outlet:"summaryDetails",controller:"offlinePayment"}),this.render("offlinePayment",{controller:"offlinePayment"})},init:function(){this._super()}}),Komodo.UI.Route.registerRoutes(function(){!1!==Komodo.Services.offlineService.workingOffline()&&(this.resource("offlinePayment"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.OnlineTill,routeName:"offlinePayment",type:Komodo.NavigationTypes.HomeTile,title:kl.value("locale.offlinePayment:home.title"),imageurl:"Content/Images/Home/onlineTill.svg",desiredLocation:2,conditionalCallback:function(e){return Komodo.Services.eventAggregator.publish("PublishOfflinePayment",{value:"Offline Payment"}),!0}}),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.OnlineTill,routeName:"offlinePayment",type:Komodo.NavigationTypes.HomeTileSubLink,title:kl.value("locale.offlinePayment:home.customerPayment"),desiredLocation:1,conditionalCallback:function(e){return Komodo.Services.eventAggregator.publish("PublishOfflinePayment",{value:"Offline Payment"}),!0}}))}),Komodo.Models.OfflinePayments=Ember.Namespace.createWithMixins(LoggingMixin,{name:"Komodo.Models.OfflinePayments"}),"undefined"==typeof TrimPath&&(TrimPath={}),function(){null==TrimPath.evalEx&&(TrimPath.evalEx=function(src){return eval(src)});var UNDEFINED;null==Array.prototype.pop&&(Array.prototype.pop=function(){return 0===this.length?UNDEFINED:this[--this.length]}),null==Array.prototype.push&&(Array.prototype.push=function(){for(var e=0;e<arguments.length;++e)this[this.length]=arguments[e];return this.length}),TrimPath.parseTemplate=function(e,t,a){null==a&&(a=TrimPath.parseTemplate_etc);var n=parse(e,t,a),s=TrimPath.evalEx(n,t,1);return null!=s?new a.Template(t,e,n,s,a):null};var exceptionDetails=function(e){return e.toString()+";\n "+e.message+";\n "+e.name+";\n "+(e.stack||"no stack trace")+";\n "+(e.description||"no further description")+";\n "+(e.fileName||"no file name")+";\n "+(e.lineNumber||"no line number")};try{String.prototype.process=function(e,t){var a=TrimPath.parseTemplate(this,null);return null!=a?a.process(e,t):this}}catch(e){}TrimPath.parseTemplate_etc={},TrimPath.parseTemplate_etc.statementTag="forelse|for|if|elseif|else|var|macro",TrimPath.parseTemplate_etc.statementDef={if:{delta:1,prefix:"if (",suffix:") {",paramMin:1},else:{delta:0,prefix:"} else {"},elseif:{delta:0,prefix:"} else if (",suffix:") {",paramDefault:"true"},"/if":{delta:-1,prefix:"}"},for:{delta:1,paramMin:3,prefixFunc:function(e,t,a,n){if("in"!=e[2])throw new n.ParseError(a,t.line,"bad for loop statement: "+e.join(" "));var s=e[1],i="__LIST__"+s;return["var ",i," = ",e[3],";","var __LENGTH_STACK__;","if (typeof(__LENGTH_STACK__) == 'undefined' || !__LENGTH_STACK__.length) __LENGTH_STACK__ = new Array();","__LENGTH_STACK__[__LENGTH_STACK__.length] = 0;","if ((",i,") != null) { ","var ",s,"_ct = 0;","for (var ",s,"_index = 0; ",s,"_index < ",i,".length; ",s,"_index++) { ",s,"_ct++;","if (typeof(",i,"[",s,"_index]) == 'function') {continue;}","__LENGTH_STACK__[__LENGTH_STACK__.length - 1]++;","var ",s," = ",i,"[",s,"_index];"].join("")}},forelse:{delta:0,prefix:"} } if (__LENGTH_STACK__[__LENGTH_STACK__.length - 1] == 0) { if (",suffix:") {",paramDefault:"true"},"/for":{delta:-1,prefix:"} }; delete __LENGTH_STACK__[__LENGTH_STACK__.length - 1];"},var:{delta:0,prefix:"var ",suffix:";"},macro:{delta:1,prefixFunc:function(e,t,a,n){var s=e[1].split("(")[0];return["var ",s," = function",e.slice(1).join(" ").substring(s.length),"{ var _OUT_arr = []; var _OUT = { write: function(m) { if (m) _OUT_arr.push(m); } }; "].join("")}},"/macro":{delta:-1,prefix:" return _OUT_arr.join(''); };"}},TrimPath.parseTemplate_etc.modifierDef={eat:function(e){return""},escape:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},capitalize:function(e){return String(e).toUpperCase()},default:function(e,t){return null!=e?e:t}},TrimPath.parseTemplate_etc.modifierDef.h=TrimPath.parseTemplate_etc.modifierDef.escape,TrimPath.parseTemplate_etc.Template=function(e,t,a,n,s){this.process=function(e,t){null==e&&(e={}),null==e._MODIFIERS&&(e._MODIFIERS={}),null==e.defined&&(e.defined=function(t){return void 0!=e[t]});for(var a in s.modifierDef)null==e._MODIFIERS[a]&&(e._MODIFIERS[a]=s.modifierDef[a]);null==t&&(t={});var i=[],o={write:function(e){i.push(e)}};try{n(o,e,t)}catch(e){if(1==t.throwExceptions)throw e;var r=new String(i.join("")+"[ERROR: template: <pre>"+exceptionDetails(e)+"</pre>]");return r.exception=e,r}return i.join("")},this.name=e,this.source=t,this.sourceFunc=a,this.toString=function(){return"TrimPath.Template ["+e+"]"}},TrimPath.parseTemplate_etc.ParseError=function(e,t,a){this.name=e,this.line=t,this.message=a},TrimPath.parseTemplate_etc.ParseError.prototype.toString=function(){return"TrimPath template ParseError in "+this.name+": line "+this.line+", "+this.message};var parse=function(e,t,a){e=cleanWhiteSpace(e);for(var n=["var TrimPath_Template_TEMP = function(_OUT, _CONTEXT, _FLAGS) { with (_CONTEXT) {"],s={stack:[],line:1},i=-1;i+1<e.length;){var o=i;for(o=e.indexOf("{",o+1);o>=0;){var r=e.indexOf("}",o+1),l=e.substring(o,r),h=l.match(/^\{(cdata|minify|eval)/);if(h){var d=h[1],f=o+d.length+1,u=e.indexOf("}",f);if(u>=0){var c;c=u-f<=0?"{/"+d+"}":e.substring(f+1,u);var p=e.indexOf(c,u+1);if(p>=0){emitSectionText(e.substring(i+1,o),n);var m=e.substring(u+1,p);"cdata"==d?emitText(m,n):"minify"==d?emitText(scrubWhiteSpace(m),n):"eval"==d&&null!=m&&m.length>0&&n.push("_OUT.write( (function() { "+m+" })() );"),o=i=p+c.length-1}}}else if("$"!=e.charAt(o-1)&&"\\"!=e.charAt(o-1)){var b="/"==e.charAt(o+1)?2:1;if(0==e.substring(o+b,o+10+b).search(TrimPath.parseTemplate_etc.statementTag))break}o=e.indexOf("{",o+1)}if(o<0)break;var r=e.indexOf("}",o+1);if(r<0)break;emitSectionText(e.substring(i+1,o),n),emitStatement(e.substring(o,r+1),s,n,t,a),i=r}if(emitSectionText(e.substring(i+1),n),0!=s.stack.length)throw new a.ParseError(t,s.line,"unclosed, unmatched statement(s): "+s.stack.join(","));return n.push("}}; TrimPath_Template_TEMP"),n.join("")},emitStatement=function(e,t,a,n,s){var i=e.slice(1,-1).split(" "),o=s.statementDef[i[0]];if(null==o)return void emitSectionText(e,a);if(o.delta<0){if(t.stack.length<=0)throw new s.ParseError(n,t.line,"close tag does not match any previous statement: "+e);t.stack.pop()}if(o.delta>0&&t.stack.push(e),null!=o.paramMin&&o.paramMin>=i.length)throw new s.ParseError(n,t.line,"statement needs more parameters: "+e);if(null!=o.prefixFunc?a.push(o.prefixFunc(i,t,n,s)):a.push(o.prefix),null!=o.suffix){if(i.length<=1)null!=o.paramDefault&&a.push(o.paramDefault);else for(var r=1;r<i.length;r++)r>1&&a.push(" "),a.push(i[r]);a.push(o.suffix)}},emitSectionText=function(e,t){if(!(e.length<=0)){for(var a=0,n=e.length-1;a<e.length&&"\n"==e.charAt(a);)a++;for(;n>=0&&(" "==e.charAt(n)||"\t"==e.charAt(n));)n--;if(n<a&&(n=a),a>0){t.push('if (_FLAGS.keepWhitespace == true) _OUT.write("');var s=e.substring(0,a).replace("\n","\\n");"\n"==s.charAt(s.length-1)&&(s=s.substring(0,s.length-1)),t.push(s),t.push('");')}for(var i=e.substring(a,n+1).split("\n"),o=0;o<i.length;o++)emitSectionTextLine(i[o],t),o<i.length-1&&t.push('_OUT.write("\\n");\n');if(n+1<e.length){t.push('if (_FLAGS.keepWhitespace == true) _OUT.write("');var s=e.substring(n+1).replace("\n","\\n");"\n"==s.charAt(s.length-1)&&(s=s.substring(0,s.length-1)),t.push(s),t.push('");')}}},emitSectionTextLine=function(e,t){for(var a="}",n=-1;n+a.length<e.length;){var s="${",i="}",o=e.indexOf(s,n+a.length);if(o<0)break;"%"==e.charAt(o+2)&&(s="${%",i="%}");var r=e.indexOf(i,o+s.length);if(r<0)break;emitText(e.substring(n+a.length,o),t);var l=e.substring(o+s.length,r).replace(/\|\|/g,"#@@#").split("|");for(var h in l)void 0!==l[h]&&l[h].replace&&(l[h]=l[h].replace(/#@@#/g,"||"));t.push("_OUT.write("),emitExpression(l,l.length-1,t),t.push(");"),n=r,a=i}emitText(e.substring(n+a.length),t)},emitText=function(e,t){null==e||e.length<=0||(e=e.replace(/\\/g,"\\\\"),e=e.replace(/\n/g,"\\n"),e=e.replace(/"/g,'\\"'),t.push('_OUT.write("'),t.push(e),t.push('");'))},emitExpression=function(e,t,a){var n=e[t];if(t<=0)return void a.push(n);var s=n.split(":");a.push('_MODIFIERS["'),a.push(s[0]),a.push('"]('),emitExpression(e,t-1,a),s.length>1&&(a.push(","),a.push(s[1])),a.push(")")},cleanWhiteSpace=function(e){return e=e.replace(/\t/g,"    "),e=e.replace(/\r\n/g,"\n"),e=e.replace(/\r/g,"\n"),e=e.replace(/^(\s*\S*(\s+\S+)*)\s*$/,"$1")},scrubWhiteSpace=function(e){return e=e.replace(/^\s+/g,""),e=e.replace(/\s+$/g,""),e=e.replace(/\s+/g," "),e=e.replace(/^(\s*\S*(\s+\S+)*)\s*$/,"$1")};TrimPath.parseDOMTemplate=function(e,t,a){null==t&&(t=document);var n=t.getElementById(e),s=n.value;return null==s&&(s=n.innerHTML),s=s.replace(/&lt;/g,"<").replace(/&gt;/g,">"),TrimPath.parseTemplate(s,e,a)},TrimPath.parseDOMTemplate=function(e,t,a,n){null==a&&(a=document);var s=a.getElementById(e);return null==t&&(t=s.innerHTML),t=t.replace(/&lt;/g,"<").replace(/&gt;/g,">"),TrimPath.parseTemplate(t,e,n)},TrimPath.processDOMTemplate=function(e,t,a,n,s){return TrimPath.parseDOMTemplate(e,n,s).process(t,a)}}(),Ember.TEMPLATES.InterimShiftReportView=Ember.Handlebars.template(function(e,t,a,n,s){function i(e,t){var n;return t.buffer.push("\r\n      "),n=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(2,o,t),contexts:[e],types:["ID"],data:t}),(n||0===n)&&t.buffer.push(n),t.buffer.push("\r\n      "),n=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(5,l,t),contexts:[e],types:["ID"],data:t}),(n||0===n)&&t.buffer.push(n),t.buffer.push("\r\n      "),""}function o(e,t){var n;return t.buffer.push("\r\n      <strong>"),t.buffer.push(b(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.offlinePayment:shift.company~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</strong> : "),n=a._triageMustache.call(e,"view.context.data.country",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(n||0===n)&&t.buffer.push(n),t.buffer.push(" <br/>\r\n      <strong>"),t.buffer.push(b(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.offlinePayment:shift.shift~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</strong> : <strong>"),n=a._triageMustache.call(e,"view.context.data.status",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(n||0===n)&&t.buffer.push(n),t.buffer.push("</strong> "),n=a._triageMustache.call(e,"view.context.data.shiftNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(n||0===n)&&t.buffer.push(n),t.buffer.push(" \r\n      <strong>"),t.buffer.push(b(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.offlinePayment:shift.on~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</strong> "),n=a._triageMustache.call(e,"view.context.data.date",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(n||0===n)&&t.buffer.push(n),t.buffer.push(" <strong>"),t.buffer.push(b(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.offlinePayment:shift.online~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</strong> <br/>\r\n      <strong>"),t.buffer.push(b(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.offlinePayment:shift.userName~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</strong> : "),n=a._triageMustache.call(e,"view.context.data.userName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(n||0===n)&&t.buffer.push(n),t.buffer.push(" <br/>\r\n      "),n=a.if.call(e,"view.context.data.isBankDepositNumberVisible",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(3,r,t),contexts:[e],types:["ID"],data:t}),(n||0===n)&&t.buffer.push(n),t.buffer.push("\r\n      "),""}function r(e,t){return t.buffer.push("\r\n      <strong>"),t.buffer.push(b(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.offlinePayment:shift.stockHandler~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</strong> : "),t.buffer.push(b(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.stockHandlerDescription"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" <br />\r\n      "),""}function l(e,t){var n;return t.buffer.push("\r\n      <strong>"),t.buffer.push(b(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.offlinePayment:shift.date~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</strong> : "),n=a._triageMustache.call(e,"view.context.data.date",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(n||0===n)&&t.buffer.push(n),t.buffer.push(" <br/>\r\n      <strong>"),t.buffer.push(b(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.offlinePayment:shift.time~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</strong> : "),n=a._triageMustache.call(e,"view.context.data.time",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(n||0===n)&&t.buffer.push(n),t.buffer.push(" <br/>\r\n      "),n=a.if.call(e,"view.context.data.isBankDepositNumberVisible",{hash:{},hashTypes:{},hashContexts:{},inverse:y.program(3,r,t),fn:y.program(6,h,t),contexts:[e],types:["ID"],data:t}),(n||0===n)&&t.buffer.push(n),t.buffer.push("\r\n      "),""}function h(e,t){return t.buffer.push("\r\n      <strong>"),t.buffer.push(b(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.offlinePayment:shift.bankDepositNumber~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</strong> : "),t.buffer.push(b(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.bankDepositNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" <br />\r\n      "),""}function d(e,t){return t.buffer.push("\r\n          <tr>\r\n            <td>\r\n              "),t.buffer.push(b(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"row.paymentType"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            </td>\r\n            <td>\r\n              "),t.buffer.push(b(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"row.count"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n            </td>\r\n            <td class="text-right">\r\n              '),t.buffer.push(b(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"row.amount"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            </td>\r\n          </tr>\r\n          "),""}function f(e,t){var n;return t.buffer.push("\r\n          "),n=a.each.call(e,"item","in","row.SplitPayments",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(11,u,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(n||0===n)&&t.buffer.push(n),t.buffer.push("\r\n          "),""}function u(e,t){return t.buffer.push("\r\n          <tr>           \r\n            <td>\r\n              "),t.buffer.push(b(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"0"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            </td>\r\n            <td>\r\n              "),t.buffer.push(b(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"item.CustomerID"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            </td>\r\n            <td>\r\n              "),t.buffer.push(b(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"item.AccountType.description"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n            </td>\r\n            <td class="top">\r\n              '),t.buffer.push(b(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"row.wasOffline"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n            </td>\r\n            <td class="top">\r\n              '),t.buffer.push(b(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"row.MethodOfPayment"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            </td>\r\n            <td>\r\n              "),t.buffer.push(b(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"row.isCancelled"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n            </td>\r\n            <td class="top text-right">\r\n              '),t.buffer.push(b(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"row.Amount.Value"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n            </td>\r\n            <td class="top text-right">\r\n              '),t.buffer.push(b(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"row.Amount.Value"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            </td>\r\n          </tr>\r\n          "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var c,p,m,b=this.escapeExpression,y=this,x=a.helperMissing;return s.buffer.push('<div class="modal-max-size">\r\n  <div class="print-button">\r\n    <a '),s.buffer.push(b(a.action.call(t,"printReport",{hash:{target:"view.context"},hashTypes:{target:"STRING"},hashContexts:{target:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push('>\r\n      <img name="print_01" alt="print" src="./Content/Images/report_print.gif" />'),s.buffer.push(b((p=a.loc||t&&t.loc,m={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},p?p.call(t,"locale.offlinePayment:shift.print",m):x.call(t,"loc","locale.offlinePayment:shift.print",m)))),s.buffer.push('\r\n    </a>\r\n  </div>\r\n  <div class="panel panel-default printing">\r\n    <div class="panel-body" id="reportView">\r\n      <h5 class="text-center"><img src="Content/Images/main_logo.svg" /></h5>\r\n      <h5 class="text-center">'),c=a._triageMustache.call(t,"view.context.data.country",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:s}),(c||0===c)&&s.buffer.push(c),s.buffer.push('</h5>\r\n      <h5 class="text-center">'),c=a._triageMustache.call(t,"view.context.data.header",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:s}),(c||0===c)&&s.buffer.push(c),s.buffer.push(" "),s.buffer.push(b((p=a.loc||t&&t.loc,m={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},p?p.call(t,"locale.offlinePayment:shift.summaryReport",m):x.call(t,"loc","locale.offlinePayment:shift.summaryReport",m)))),s.buffer.push("</h5>\r\n      <br/>\r\n      "),c=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(1,i,s),contexts:[t],types:["ID"],data:s}),(c||0===c)&&s.buffer.push(c),s.buffer.push("\r\n      <br/>\r\n      <table "),s.buffer.push(b(a["bind-attr"].call(t,{hash:{class:":table :table-bordered :komodo-datagrid :table-condensed :table-responsive :print-table"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push(">\r\n        <thead>\r\n          <tr>\r\n            <th>"),s.buffer.push(b(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.offlinePayment:shift.paymentType~"},hashTypes:{text:"STRING"},hashContexts:{text:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("</th>\r\n            <th>"),s.buffer.push(b(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.offlinePayment:shift.transactionCount~"},hashTypes:{text:"STRING"},hashContexts:{text:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("</th>\r\n            <th>"),s.buffer.push(b(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.offlinePayment:shift.totalAmount~"},hashTypes:{text:"STRING"},hashContexts:{text:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          "),c=a.each.call(t,"row","in","view.context.data.summaryGridData",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(8,d,s),contexts:[t,t,t],types:["ID","ID","ID"],data:s}),(c||0===c)&&s.buffer.push(c),s.buffer.push('\r\n        </tbody>\r\n      </table>\r\n      <hr/>\r\n      <h5 class="text-center"><img src="Content/Images/main_logo.svg" /></h5>\r\n      <h5 class="text-center">'),c=a._triageMustache.call(t,"view.context.data.country",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:s}),(c||0===c)&&s.buffer.push(c),s.buffer.push('</h5>\r\n      <h5 class="text-center">'),c=a._triageMustache.call(t,"view.context.data.header",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:s}),(c||0===c)&&s.buffer.push(c),s.buffer.push(" "),s.buffer.push(b((p=a.loc||t&&t.loc,m={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},p?p.call(t,"locale.offlinePayment:shift.detailsReport",m):x.call(t,"loc","locale.offlinePayment:shift.detailsReport",m)))),s.buffer.push("</h5>\r\n      <br/>\r\n      "),c=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(1,i,s),contexts:[t],types:["ID"],data:s}),(c||0===c)&&s.buffer.push(c),s.buffer.push("\r\n      <br/>\r\n      <table "),s.buffer.push(b(a["bind-attr"].call(t,{hash:{class:":table :table-bordered :komodo-datagrid :table-condensed :print-table"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push(">\r\n        <thead>\r\n          <tr>\r\n            <th>"),s.buffer.push(b(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.offlinePayment:shift.receiptNumber~"},hashTypes:{text:"STRING"},hashContexts:{text:t},
contexts:[t],types:["ID"],data:s}))),s.buffer.push("</th>\r\n            <th>"),s.buffer.push(b(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.offlinePayment:customer.customerNumber~"},hashTypes:{text:"STRING"},hashContexts:{text:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("</th>\r\n            <th>"),s.buffer.push(b(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.offlinePayment:shift.accountNumber~"},hashTypes:{text:"STRING"},hashContexts:{text:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("</th>\r\n            <th>"),s.buffer.push(b(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.offlinePayment:shift.offline~"},hashTypes:{text:"STRING"},hashContexts:{text:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("</th>\r\n            <th>"),s.buffer.push(b(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.offlinePayment:shift.methodOfPayment~"},hashTypes:{text:"STRING"},hashContexts:{text:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("</th>\r\n            <th>"),s.buffer.push(b(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.offlinePayment:shift.isCancel~"},hashTypes:{text:"STRING"},hashContexts:{text:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("</th>\r\n            <th>"),s.buffer.push(b(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.offlinePayment:shift.payAmount~"},hashTypes:{text:"STRING"},hashContexts:{text:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("</th>\r\n            <th>"),s.buffer.push(b(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.offlinePayment:shift.baseAmount~"},hashTypes:{text:"STRING"},hashContexts:{text:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          "),c=a.each.call(t,"row","in","view.context.data.detailGridData",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(10,f,s),contexts:[t,t,t],types:["ID","ID","ID"],data:s}),(c||0===c)&&s.buffer.push(c),s.buffer.push("\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  </div>\r\n</div>"),""}),Ember.TEMPLATES.OfflinePaymentView=Ember.Handlebars.template(function(e,t,a,n,s){function i(e,t){return t.buffer.push('\r\n<table width="100%">\r\n    <tr>\r\n    <td width="50%">\r\n        <table>\r\n        <tr>\r\n            <td>\r\n            '),t.buffer.push(l(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"1",valueBinding:"data.paymentType",contentBinding:"data.paymentTypes",optionLabelPath:"content",optionValuePath:"content",label:"~locale.offlinePayment:shift.paymentType~",disabled:"true"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",label:"STRING",disabled:"STRING"},hashContexts:{tabindex:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,label:e,disabled:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            </td>\r\n\r\n            <td>\r\n            "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"data.customerNumber",tabindex:"2",label:"~locale.offlinePayment:customer.customerNumber~",validatorBinding:"validators.customerNumberValidator"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,tabindex:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n            </td>\r\n        </tr>\r\n        </table>\r\n    </td>\r\n    <td width="50%">\r\n        '),t.buffer.push(l(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"3",valueBinding:"data.accountType",contentBinding:"data.accountTypes",optionLabelPath:"content.description",optionValuePath:"content",label:"~locale.offlinePayment:shift.accountType~"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",label:"STRING"},hashContexts:{tabindex:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    </td>\r\n    </tr>\r\n    <tr>\r\n    <td>\r\n        <table>\r\n        <tr>\r\n            <td>\r\n            "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"4",valueBinding:"data.methodOfPayment",contentBinding:"data.methodOfPayments",optionLabelPath:"content",optionValuePath:"content",label:"~locale.offlinePayment:shift.methodOfPayment~"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",label:"STRING"},hashContexts:{tabindex:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            </td>\r\n            <td>\r\n            "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"5",valueBinding:"data.selectedCurrency",contentBinding:"data.allowedCurrencies",optionLabelPath:"content.value",optionValuePath:"content",label:"~locale.offlinePayment:shift.currency~",disabledBinding:"data.noCurrencies"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",label:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,label:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            </td>\r\n        </tr>\r\n        </table>\r\n          \r\n    </td>\r\n    <td>\r\n        "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"data.baseAmount",tabindex:"2",label:"~locale.offlinePayment:shift.baseAmount~",disabled:"true"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",label:"STRING",disabled:"STRING"},hashContexts:{valueBinding:e,tabindex:e,label:e,disabled:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    </td>\r\n    </tr>\r\n    <tr>\r\n    <td>\r\n        <table>\r\n        <tr>\r\n            <td>\r\n            "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"6",valueBinding:"data.paymentAmount",label:"~locale.offlinePayment:shift.paymentAmount~",validatorBinding:"validators.paymentAmountValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            </td>\r\n            <td>\r\n            "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"7",valueBinding:"data.amountTendered",label:"~locale.offlinePayment:shift.amountTendered~",validatorBinding:"validators.amountTenderedValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            </td>\r\n        </tr>\r\n        </table>\r\n    </td>\r\n    <td>\r\n        "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"data.changeOwed",tabindex:"2",label:"~locale.offlinePayment:shift.changeOwed~",disabled:"true"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",label:"STRING",disabled:"STRING"},hashContexts:{valueBinding:e,tabindex:e,label:e,disabled:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    </td>\r\n    </tr>\r\n    <tr>\r\n    <td>\r\n        <table>\r\n        <tr>\r\n            <td>\r\n            "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"8",valueBinding:"data.drawerName",visibleBinding:"data.isPaymentTypeCheque",label:"~locale.offlinePayment:shift.drawerName~",validatorBinding:"validators.drawerNameValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",visibleBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,visibleBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"9",valueBinding:"data.cardType",contentBinding:"data.methodOfPaymentSubs",optionLabelPath:"content.key",optionValuePath:"content",visibleBinding:"data.isPaymentTypeCard",label:"~locale.offlinePayment:shift.cardType~",validationBinding:"validators.cardTypeValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",visibleBinding:"STRING",label:"STRING",validationBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,visibleBinding:e,label:e,validationBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n \r\n            </td>\r\n            <td>\r\n            "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"10",valueBinding:"data.chequeNumber",visibleBinding:"data.isPaymentTypeCheque",label:"~locale.offlinePayment:shift.chequeNumber~",validatorBinding:"validators.chequeNumberValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",visibleBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,visibleBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"11",valueBinding:"data.cardHolder",visibleBinding:"data.isPaymentTypeCard",label:"~locale.offlinePayment:shift.cardHolder~",validatorBinding:"validators.cardHolderValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",visibleBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,visibleBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            </td>\r\n        </tr>\r\n        </table>\r\n    </td>\r\n    <td>\r\n        "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{tabindex:"12",valueBinding:"data.chequeDate",visibleBinding:"data.isPaymentTypeCheque",label:"~locale.offlinePayment:shift.chequeDate~",validatorBinding:"validators.chequeDateValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",visibleBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,visibleBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    </td>\r\n    </tr>\r\n    <tr>\r\n    <td>\r\n        <table>\r\n        <tr>\r\n            <td>\r\n            "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"13",valueBinding:"data.bank",visibleBinding:"data.isPaymentTypeCheque",label:"~locale.offlinePayment:shift.bank~",validatorBinding:"validators.bankValidator",contentBinding:"data.banks",optionLabelPath:"content.CanonicalValue",optionValuePath:"content",prompt:"~locale.offlinePayment:shift.bankPrompt~"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",visibleBinding:"STRING",label:"STRING",validatorBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING"},hashContexts:{tabindex:e,valueBinding:e,visibleBinding:e,label:e,validatorBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            </td>\r\n            <td>\r\n            "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"14",valueBinding:"data.branch",visibleBinding:"data.isPaymentTypeCheque",label:"~locale.offlinePayment:shift.branch~",validatorBinding:"validators.branchValidator",contentBinding:"data.branches",optionLabelPath:"content.CanonicalValue",optionValuePath:"content",prompt:"~locale.offlinePayment:shift.branchNamePrompt~"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",visibleBinding:"STRING",label:"STRING",validatorBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING"},hashContexts:{tabindex:e,valueBinding:e,visibleBinding:e,label:e,validatorBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            </td>\r\n        </tr>\r\n        </table>\r\n    </td>\r\n    <td>\r\n        "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"15",valueBinding:"data.branchCode",visibleBinding:"data.isPaymentTypeCheque",label:"~locale.offlinePayment:shift.branchCode~",validatorBinding:"validators.branchCodeValidator",disabled:"true"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",visibleBinding:"STRING",label:"STRING",validatorBinding:"STRING",disabled:"STRING"},hashContexts:{tabindex:e,valueBinding:e,visibleBinding:e,label:e,validatorBinding:e,disabled:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    </td>\r\n    </tr>\r\n\r\n    <tr>\r\n    <td>\r\n        "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.offlinePayment:shift.autoReconnectProducts~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:":"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{tabindex:"16",checkedBinding:"data.autoReconnectProducts"},hashTypes:{tabindex:"STRING",checkedBinding:"STRING"},hashContexts:{tabindex:e,checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    </td>\r\n    </tr>\r\n</table>\r\n"),""}function o(e,t){var n,s;return t.buffer.push("\r\n    "),t.buffer.push(l((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.offlinePayment:shift.makePayment",s):h.call(e,"loc","locale.offlinePayment:shift.makePayment",s)))),t.buffer.push("\r\n    "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var r,l=this.escapeExpression,h=a.helperMissing,d=this;return s.buffer.push('<div id="komodo-shift-page" class="no-banner-padding">\r\n<table width="100%">\r\n    <tr>\r\n    <td>\r\n        <p class="komodo-heading">'),r=a._triageMustache.call(t,"data.paymentType",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:s}),(r||0===r)&&s.buffer.push(r),s.buffer.push('</p>\r\n    </td>\r\n    <td align="right">\r\n        '),s.buffer.push(l(a.view.call(t,"Komodo.Controls.Link",{hash:{tabindex:"28",text:"~locale.offlinePayment:home.back~",href:"#/home"},hashTypes:{tabindex:"STRING",text:"STRING",href:"STRING"},hashContexts:{tabindex:t,text:t,href:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n    </td>\r\n    </tr>\r\n</table>\r\n<hr />\r\n"),r=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.offlinePayment:customer.paymentDetails~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:d.noop,fn:d.program(1,i,s),contexts:[t],types:["ID"],data:s}),(r||0===r)&&s.buffer.push(r),s.buffer.push('\r\n<br />\r\n<div class="float-right">\r\n    '),r=a.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"17",action:"makePayment",disabledBinding:"data.enableMakePayment"},hashTypes:{tabindex:"STRING",action:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:t,action:t,disabledBinding:t},inverse:d.noop,fn:d.program(3,o,s),contexts:[t],types:["ID"],data:s}),(r||0===r)&&s.buffer.push(r),s.buffer.push("\r\n</div>\r\n<br />\r\n</div>\r\n"),""}),Ember.TEMPLATES.OfflineShiftDetailsContainerView=Ember.Handlebars.template(function(e,t,a,n,s){function i(e,t){var n,s;return t.buffer.push("\r\n                "),t.buffer.push(u((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.offlinePayment:shift.shiftDetails",s):f.call(e,"loc","locale.offlinePayment:shift.shiftDetails",s)))),t.buffer.push("\r\n                "),""}function o(e,t){var n,s;return t.buffer.push("\r\n                "),t.buffer.push(u((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.offlinePayment:shift.interimShiftReport",s):f.call(e,"loc","locale.offlinePayment:shift.interimShiftReport",s)))),t.buffer.push("\r\n                "),""}function r(e,t){var n,s;return t.buffer.push("\r\n                "),t.buffer.push(u((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.offlinePayment:shift.closeShift",s):f.call(e,"loc","locale.offlinePayment:shift.closeShift",s)))),t.buffer.push("\r\n                "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var l,h,d,f=a.helperMissing,u=this.escapeExpression,c=this;return s.buffer.push('<div id="shift-banner">\r\n    <div class="shift-details inline margin-top">\r\n        <div class="shift-3-col">'),s.buffer.push(u((h=a.loc||t&&t.loc,d={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},h?h.call(t,"locale.offlinePayment:shift.cashier",d):f.call(t,"loc","locale.offlinePayment:shift.cashier",d)))),s.buffer.push(" : "),l=a._triageMustache.call(t,"data.cashierName",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:s}),(l||0===l)&&s.buffer.push(l),s.buffer.push('</div>\r\n        <div class="shift-3-col">'),s.buffer.push(u((h=a.loc||t&&t.loc,d={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},h?h.call(t,"locale.offlinePayment:shift.shiftNumber",d):f.call(t,"loc","locale.offlinePayment:shift.shiftNumber",d)))),s.buffer.push(" : "),l=a._triageMustache.call(t,"data.shiftNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:s}),(l||0===l)&&s.buffer.push(l),s.buffer.push('</div>\r\n        <div class="shift-3-col">'),s.buffer.push(u((h=a.loc||t&&t.loc,d={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},h?h.call(t,"locale.offlinePayment:shift.generalLedger",d):f.call(t,"loc","locale.offlinePayment:shift.generalLedger",d)))),s.buffer.push(" : "),l=a._triageMustache.call(t,"data.generalLedger",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:s}),(l||0===l)&&s.buffer.push(l),s.buffer.push('</div>\r\n        <div class="shift-3-col">\r\n            '),s.buffer.push(u((h=a.loc||t&&t.loc,d={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},h?h.call(t,"locale.offlinePayment:shift.stockHandler",d):f.call(t,"loc","locale.offlinePayment:shift.stockHandler",d)))),s.buffer.push(" : "),s.buffer.push(u(a.view.call(t,"Komodo.Controls.CoreSelect",{hash:{valueBinding:"data.stockHandlerId",contentBinding:"data.stockHandlers",optionLabelPath:"content.Name",optionValuePath:"content.Id",disableBinding:"data.isOffLine"},hashTypes:{valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",disableBinding:"STRING"},hashContexts:{valueBinding:t,contentBinding:t,optionLabelPath:t,optionValuePath:t,disableBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push('\r\n        </div>\r\n        <div class="shift-3-col">'),s.buffer.push(u((h=a.loc||t&&t.loc,d={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},h?h.call(t,"locale.offlinePayment:shift.baseCurrency",d):f.call(t,"loc","locale.offlinePayment:shift.baseCurrency",d)))),s.buffer.push(" : "),l=a._triageMustache.call(t,"data.baseCurrency",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:s}),(l||0===l)&&s.buffer.push(l),s.buffer.push('</div>\r\n        <ul class="shift-3-col">\r\n            <li>\r\n                '),l=a.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"17",action:"shiftDetails",type:"banner",disableBinding:"data.isOffLine"},hashTypes:{tabindex:"STRING",action:"STRING",type:"STRING",disableBinding:"STRING"},hashContexts:{tabindex:t,action:t,type:t,disableBinding:t},inverse:c.noop,fn:c.program(1,i,s),contexts:[t],types:["ID"],data:s}),(l||0===l)&&s.buffer.push(l),s.buffer.push("\r\n            </li>\r\n            <li>\r\n                "),l=a.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"17",action:"interimShiftReport",type:"banner"},hashTypes:{tabindex:"STRING",action:"STRING",type:"STRING"},hashContexts:{tabindex:t,action:t,type:t},inverse:c.noop,fn:c.program(3,o,s),contexts:[t],types:["ID"],data:s}),(l||0===l)&&s.buffer.push(l),s.buffer.push("\r\n            </li>\r\n            <li>\r\n                "),l=a.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"17",action:"closeShift",type:"banner",disableBinding:"data.isOffLine"},hashTypes:{tabindex:"STRING",action:"STRING",type:"STRING",disableBinding:"STRING"},hashContexts:{tabindex:t,action:t,type:t,disableBinding:t},inverse:c.noop,fn:c.program(5,r,s),contexts:[t],types:["ID"],data:s}),(l||0===l)&&s.buffer.push(l),s.buffer.push('\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    <div class="shift-payment-details inline">\r\n        <ul class="amounts-list">\r\n            <li>'),s.buffer.push(u((h=a.loc||t&&t.loc,d={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},h?h.call(t,"locale.offlinePayment:shift.totalPayments",d):f.call(t,"loc","locale.offlinePayment:shift.totalPayments",d)))),s.buffer.push("</li>\r\n            <li>"),s.buffer.push(u((h=a.loc||t&&t.loc,d={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},h?h.call(t,"locale.offlinePayment:shift.totalCash",d):f.call(t,"loc","locale.offlinePayment:shift.totalCash",d)))),s.buffer.push(" : "),l=a._triageMustache.call(t,"data.totalCash",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:s}),(l||0===l)&&s.buffer.push(l),s.buffer.push("</li>\r\n            <li>"),s.buffer.push(u((h=a.loc||t&&t.loc,d={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},h?h.call(t,"locale.offlinePayment:shift.totalOther",d):f.call(t,"loc","locale.offlinePayment:shift.totalOther",d)))),s.buffer.push(" : "),l=a._triageMustache.call(t,"data.totalOther",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:s}),(l||0===l)&&s.buffer.push(l),s.buffer.push("</li>\r\n            <li>"),s.buffer.push(u((h=a.loc||t&&t.loc,d={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},h?h.call(t,"locale.offlinePayment:shift.totalAmountInShift",d):f.call(t,"loc","locale.offlinePayment:shift.totalAmountInShift",d)))),s.buffer.push(" : "),l=a._triageMustache.call(t,"data.totalAmountInShift",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["ID"],data:s}),(l||0===l)&&s.buffer.push(l),s.buffer.push("</li>\r\n        </ul>\r\n    </div>\r\n\r\n    \r\n</div>"),""}),Ember.TEMPLATES.PrintReceiptView=Ember.Handlebars.template(function(e,t,a,n,s){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var i,o,r=this.escapeExpression,l=a.helperMissing;return s.buffer.push('<div>\r\n    <div class="print-button">\r\n        '),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreSelect",{hash:{valueBinding:"data.printer",contentBinding:"data.printers",tabindex:"1",optionLabelPath:"content.value",optionValuePath:"content"},hashTypes:{valueBinding:"STRING",contentBinding:"STRING",tabindex:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{valueBinding:t,contentBinding:t,tabindex:t,optionLabelPath:t,optionValuePath:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n        <a "),s.buffer.push(r(a.action.call(t,"printReceipt",{hash:{target:"view.context"},hashTypes:{target:"STRING"},hashContexts:{target:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push('>\r\n            <img name="print_01" alt="print" src="./Content/Images/report_print.gif" style="border:0px; padding-right:5px; width: 25px; height: 20px;" />'),s.buffer.push(r((i=a.loc||t&&t.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},i?i.call(t,"locale.offlinePayment:shift.print",o):l.call(t,"loc","locale.offlinePayment:shift.print",o)))),s.buffer.push('\r\n        </a>\r\n    </div>\r\n    <div style="display: none" id="print">\r\n    </div>\r\n    <div class="receipt" id="printPreview">\r\n    </div>\r\n</div>\r\n'),""}),Komodo.Models.OfflinePayments=Ember.Namespace.createWithMixins(LoggingMixin,{name:"Komodo.Models.OfflinePayments"}),Komodo.Models.OfflinePayments.ReceiptModel=Ember.Object.extend({init:function(){this.ReceiptDate=void 0,this.CashierName=void 0,this.ReceiptNumber=void 0,this.CustomerID=void 0,this.AccountID=void 0,this.CustomerName=void 0,this.Address=void 0,this.CellNumber=void 0,this.SmartcardNumber=void 0,this.Package=void 0,this.Discount=void 0,this.Hardware=void 0,this.Insurance=void 0,this.ViewingPeriod=void 0,this.NextPaymentDate=void 0,this.MethodOfPayment=void 0,this.Currency=void 0,this.TotalAmountExclTax=void 0,this.Tax=void 0,this.TotalAmountInclTax=void 0,this.Amount=void 0,this.Change=void 0,this.BusinessUnit=void 0,this.IsReprint=void 0,this.IsCancelled=void 0,this.IsOffline=void 0,this._super()}}),Komodo.Models.OfflinePayments.OfflinePaymentModel=Ember.Object.extend({init:function(){this.isOffLine=!1,this.country=void 0,this.countryId=void 0,this.language=void 0,this.shiftNumber="<default>",this.shiftStatuses=[],this.shiftTypes=[],this.quoteStatuses=[],this.rdChequeStatuses=[],this.rdChequeStatusReasons=[],this.generalLedger="<default>",this.cashierName="",this.stockHandlerId="<default>",this.stockHandlers=[],this.noStockHandlers=!0,this.bankDepositNumber="",this.totalCash=0,this.totalOther=0,this.totalAmountInShift=0,this.paymentType="Customer Payment",this.paymentTypes=["Customer Payment","Cash Sales","Split Payment","Batch Payment"],this.customerNumber="",this.methodOfPayment=void 0,this.methodOfPayments=["Cash","Cheque","Card"],this.accountTypes=[{key:"3",value:"DStvRes",description:"DStv Residential"},{key:"11",value:"DStvComm",description:"DStv Commercial"},{key:"9",value:"BoxOffice",description:"Box Office"},{key:"10",value:"DDCC",description:"DDCC"}],this.accountType=this.accountTypes[0],this.selectedCurrency="",this.allowedCurrencies=[],this.currencies=[],this.baseCurrency="<default>",this.noCurrencies=!0,this.baseAmount="",this.paymentAmount="",this.amountTendered="",this.changeOwed="",this.isPaymentTypeCheque=!1,this.drawerName="",this.chequeNumber="",this.chequeDate="",this.bank="",this.banks=[],this.branch="",this.branches=[],this.branchCode="",this.isPaymentTypeCard=!1,this.methodOfPaymentSubs=[{key:"Visa Credit",value:"1"},{key:"Visa Debit",value:"2"},{key:"Mastercard Credit",value:"3"},{key:"Mastercard Debit",value:"4"},{key:"Maestro Debit",value:"5"}],this.cardType=this.methodOfPaymentSubs[0],this.cardHolder="",this.autoReconnectProducts=!0,this.printers=[],this.isBankDepositNumberVisible=void 0}}),Komodo.Models.OfflinePayments.ShiftDetailModel=Ember.Object.extend({init:function(){this.paymentId="",this.amount="",this.baseCurrencyAmount="",this.currency="",this.currencyRate="",this.date="",this.paymentType="",this.isCancelled="",this.isSplit="",this.isOffline="No",this.sortId="",this.SplitPayments=[],this._super()},disableCancel:function(){return"Yes"===this.isCancelled}.property("this.isCancelled")}),Komodo.Models.OfflinePayments.SplitPaymentModel=Ember.Object.extend({init:function(){this.isFirst="",this.receiptNumber="",this.customerNumber="",this.accountNumber="",this.quoteId="",this.financialTransactionId="",this.amount="",this.currency="",this._super()}}),Komodo.Models.OfflinePayments.ShiftSummaryModel=Ember.Object.extend({init:function(){this.currency="",this.paymentType="",this.count=0,this.cancelledCount=0,this.amount=0,this._super()}}),Komodo.Models.OfflinePayments.ShiftDetailsReportModel=Ember.Object.extend({init:function(){this.header="",this.country="",this.shiftNumber="",this.date="",this.time="",this.userName="",this.status="",this.bankDepositNumber="",this.currency="",this.spooling=!0,this.spoolingPercentage="0%",this.summaryGridData=[],this.detailGridData=[],this._super()},isBankDepositNumberVisible:function(){return null!==this.bankDepositNumber&&void 0!==this.bankDepositNumber&&""!==this.bankDepositNumber&&"object"!=typeof this.bankDepositNumber}.property("this.bankDepositNumber")}),Komodo.Application.OfflinePaymentView=Komodo.UI.View.extend({viewKey:"OfflinePaymentView",templateName:"OfflinePaymentView"}),Komodo.Application.ShiftDetailsView=Komodo.UI.View.extend({viewKey:"ShiftDetailsView"}),Komodo.Application.OfflineShiftDetailsContainerView=Komodo.UI.View.extend({viewKey:"OfflineShiftDetailsContainerView"}),Komodo.Application.InterimShiftReportView=Komodo.UI.View.extend({viewKey:"InterimShiftReportView"}),Komodo.Application.PrintReceiptView=Komodo.UI.View.extend({viewKey:"PrintReceiptView"}),Komodo.Models.OfflinePayments.PrintReceiptModel=Ember.Object.extend({init:function(){this._super()},printer:void 0,receiptData:void 0,printers:void 0,printerChanged:function(){var e=this,t=e.receiptData;void 0==t.length?(payloadArray=new Array,payloadArray[0]=t):payloadArray=t;var a="";void 0!==e.printer&&(a=e.printer.layout);var n="";try{var s=JSON.parse('{"root": {"Payload": {"ListOfPayments":'+JSON.stringify(payloadArray)+"} } }");n=TrimPath.parseDOMTemplate("printPreview",a).process(s)}catch(e){console.log("Error while parsing printer template: "+e)}$("#printPreview").html(n)}.observes("printer")}),Komodo.Application.OfflinePaymentController=Komodo.UI.Controller.extend({me:void 0,data:void 0,shiftBannerVisible:!1,localeBase:"locale.offlinePayment:",offlineUsershiftDetails:void 0,init:function(){me=this,Komodo.log("Constructing Offline Payment controller"),me.set("processVersion","v1.1"),me.set("processName","Offline Payment process"),me.requiresDependency("_offlineService",{singleton:Komodo.Services.offlineService}),me.requiresDependency("_securityService",{singleton:Komodo.Services.securityService}),me.requiresDependency("_cacheRepository",{singleton:Komodo.Repositories.cacheRepository}),me.requiresDependency("_uiService",{singleton:Komodo.Services.uiService}),me._super()},start:function(){me.registerModel("data",Komodo.Models.OfflinePayments.OfflinePaymentModel),me.data=me.get("data"),me.data.set("isOffLine",me.getConnectionState()),me.getCacheData(),me.canCapturePayment(),me.applyValidators(),me.offlineUsershiftDetails&&me.loadShiftDetails(),me._super()},stop:function(){me._super()},getOfflineService:function(){return me.get("_offlineService")},getSecurityService:function(){return this.get("_securityService")},getUIService:function(){return this.get("_uiService")},getCacheRepository:function(){return this.get("_cacheRepository")},countryCode:function(){return this.get("data").get("countryId")},getConnectionState:function(){return!1!==me.getOfflineService().workingOffline()},canCapturePayment:function(){var e=me.getOfflineState();if(e)if(me.offlineUsershiftDetails=me.getOfflineUserShiftDetails(),me.offlineUsershiftDetails){if(e.offlineActivationDate)if(me.offlineUsershiftDetails.ShiftDetail){var t=me.getOfflinePayments(me.offlineUsershiftDetails.ShiftDetail.Payments),a=void 0;if(t&&t.length)for(var n=0;n<t.length;n++)t[n].Synced&&"No"===t[n].Synced&&(void 0===a&&(a=new moment(t[n].PaymentDate,KomodoConfiguration.dateTimeFormat)),new moment(t[n],KomodoConfiguration.dateTimeFormat)>a&&(a=new moment(t[n].PaymentDate,KomodoConfiguration.dateTimeFormat)));var s=new moment(new moment,KomodoConfiguration.dateTimeFormat),i=new moment(e.offlineActivationDate)
;(s.date()!==i.date()||a&&s.date()!==a.date())&&(Komodo.Controls.MessageBoxController.show(kl.value(me.localeBase+"home.title"),kl.value(me.localeBase+"shift.workOnline"),Komodo.Controls.MessageBoxOkButtons,me,"modelPayment","danger").response=function(e){me.getUIService().getController("application").redirectReturn("home")},me.getUIService().getController("application").redirectReturn("home"))}else Komodo.Controls.MessageBoxController.show(kl.value(me.localeBase+"home.title"),kl.value(me.localeBase+"shift.neverLoggedIn"),Komodo.Controls.MessageBoxOkButtons,me,"modelPayment","danger").response=function(e){me.getUIService().getController("application").redirectReturn("home")}}else Komodo.Controls.MessageBoxController.show(kl.value(me.localeBase+"home.title"),kl.value(me.localeBase+"shift.neverLoggedIn"),Komodo.Controls.MessageBoxOkButtons,me,"modelPayment","danger").response=function(e){me.getUIService().getController("application").redirectReturn("home")}},getOfflineUserShiftDetails:function(){var e=void 0;return me.getCacheRepository().fetch(me.countryCode()+".ShiftDetails."+me.userName()).done(function(t){e=t.data}),e},getOfflineState:function(){var e=void 0;return this.getCacheRepository().fetch(Komodo.CacheKeys.offlineState).done(function(t){e=t.data}),e},getOfflinePayments:function(e){return e?$.grep(e,function(e){if(1===e.WasOffline||e.Synced&&"No"===e.Synced)return e}):e},getCacheData:function(){var e=$.Deferred(),t=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),a=Komodo.Services.uiService.getController("application").get("_selectedCountryDescription"),n=Komodo.Services.localizationService.getCurrentLanguage();return me.data.set("country",{countryDescription:a,countryId:t}),me.data.set("countryId",t),me.data.set("language",n),Komodo.Services.cachedDataService.fetch("ShiftStatus",{domain:t,qualifier:n}).done(function(t){me.data.set("shiftStatuses",t),e.resolve(t)}).fail(function(){Komodo.log("[ERROR] : could not retrieve ShiftStatus domain = "+t+"/ qualifier = "+n)}),Komodo.Services.cachedDataService.fetch("ShiftType",{domain:t,qualifier:n}).done(function(t){me.data.set("shiftTypes",t),e.resolve(t)}).fail(function(){Komodo.log("[ERROR] : could not retrieve ShiftType domain = "+t+"/ qualifier = "+n)}),Komodo.Services.cachedDataService.fetch("Currency",{domain:t,qualifier:n}).done(function(t){me.data.set("currencies",t),e.resolve(t)}).fail(function(){Komodo.log("[ERROR] : could not retrieve Currency domain = "+t+"/ qualifier = "+n)}),Komodo.Services.cachedDataService.fetch("BankDetail",{domain:t,qualifier:n}).done(function(t){var a=JSON.parse(t);me.data.set("banks",[]),$.each($.makeArray(a.Banks.Bank),function(e,t){me.data.banks.addObject(t)}),e.resolve(t)}).fail(function(){Komodo.log("[ERROR] : could not retrieve BankDetail domain = "+t+"/ qualifier = "+n)}),e},applyValidators:function(){me.registerValidator(me.data,"customerNumber",{isRequired:!0,type:"string",minLength:1,maxLength:50,regExPattern:"^[0-9.]*$"}),me.registerValidator(me.data,"paymentAmount",{isRequired:!0,type:"string",minLength:1,maxLength:50,regExPattern:"^[0-9]{1,15}(.([0-9])([0-9]){0,1}?)?$"}),me.registerValidator(me.data,"amountTendered",{isRequired:!0,type:"string",minLength:1,maxLength:50,regExPattern:"^[0-9]{1,15}(.([0-9])([0-9]){0,1}?)?$"})},removeValidator:function(e){void 0!==me.get("validators."+e)&&(me.get("validators."+e).functions.clear(),me.get("validators."+e).validate())},loadShiftDetails:function(){if(me.offlineUsershiftDetails){me.data.set("cashierName",me.userName());var e=me.offlineUsershiftDetails.ShiftDetail;if(e&&!1===$.isEmptyObject(e)){var t=e.StockHandlers;if(void 0===t||$.isEmptyObject(t)||void 0===t.length||t.length<1){var a={Id:"<default>",Name:"<default>",IsDefault:!0};t=[],t.pushObject(a)}var n=e.AllowedCurrencies;if(void 0===n||$.isEmptyObject(n)||void 0===n.length||n.length<1){var s={key:"-1",value:"<default>",rate:1};n=[],n.pushObject(s),me.data.set("noCurrencies",!0)}else me.data.set("noCurrencies",!1);me.data.set("noCurrencies",!0),me.data.set("stockHandlers",t),me.data.set("allowedCurrencies",n),me.data.set("printers",e.Printers);var i=new moment,o=i.year().toString()+i.month().toString()+i.date().toString()+i.hour().toString()+i.second().toString(),r=me.userName()+me.data.country.countryId+o;me.data.set("bankDepositNumber",r);var l=me.offlineUsershiftDetails.ShiftDetail.Shift;if(l&&!1===$.isEmptyObject(l)){me.data.set("shiftNumber",l.UID),me.data.set("generalLedger",l.GLNumber),me.data.set("stockHandlerId",l.StockHandlerAccountID),me.data.set("bankDepositNumber",l.BankDepositNumber),me.data.set("baseCurrency",l.Currency.value),me.data.set("selectedCurrency",n[0].value);for(var h=0;h<n.length;h++)if(n[h].key===l.Currency.key){me.data.set("selectedCurrency",n[h]);break}var d=0,f=0;me.offlineUsershiftDetails.ShiftDetail.Payments&&me.offlineUsershiftDetails.ShiftDetail.Payments.length&&me.offlineUsershiftDetails.ShiftDetail.Payments.length>0&&$(me.offlineUsershiftDetails.ShiftDetail.Payments).each(function(e,t){0===t.IsCancelled&&("Cash"===t.MethodOfPayment||"cash"===t.MethodOfPayment?d=parseFloat(d)+parseFloat(t.Amount.Value):f=parseFloat(f)+parseFloat(t.Amount.Value))}),me.data.set("totalCash",d.toFixed(2)),me.data.set("totalOther",f.toFixed(2)),me.data.set("totalAmountInShift",(parseFloat(d)+parseFloat(f)).toFixed(2))}me.data.set("isBankDepositNumberVisible",!!me.data.get("bankDepositNumber"))}}},syncOfflinePayments:function(){var e=$.Deferred();if(me.offlineUsershiftDetails=me.getOfflineUserShiftDetails(),me.offlineUsershiftDetails&&me.offlineUsershiftDetails.ShiftDetail){var t=me.getOfflinePayments(me.offlineUsershiftDetails.ShiftDetail.Payments);t&&t.length&&t.length>0&&e.resolve(t.length+" payments submitted successfully.")}return e},makePayment:function(){if(!1!==me.canSubmitData(me.data,kl.value(me.localeBase+"home.title"),{showInModal:!0})){var e=!0,t="";if(void 0===me.data.paymentAmount||""===me.data.paymentAmount||isNaN(me.data.paymentAmount)||parseFloat(me.data.paymentAmount)<=0?(e=!1,t=kl.value(me.localeBase+"shift.messagePaymentAmountValidate")):parseFloat(me.data.amountTendered)<parseFloat(me.data.paymentAmount)&&(e=!1,t=kl.value(me.localeBase+"shift.messageAmountTenderedValidate")),e){var a=Komodo.Models.Payment.create();a.set("MethodOfPayment",me.data.methodOfPayment),a.set("PaymentDate",(new moment).format(KomodoConfiguration.dateTimeFormat)),a.set("ShiftID",me.data.shiftNumber),a.set("StockHandlerID",me.data.stockHandlerId),a.set("ShiftType","Cashier");var n="<default>";me.data.selectedCurrency&&"-1"!==me.data.selectedCurrency.key&&(n=me.data.selectedCurrency.key);var s=Komodo.Models.Price.create();s.set("CurrencyCode",n),s.set("Value",me.data.amountTendered),a.set("AmountTendered",s);var i=Komodo.Models.Price.create();i.set("CurrencyCode",n),i.set("Value",me.data.paymentAmount),a.set("Amount",i),a.set("IsCancelled",0),a.set("IsSplit",0),a.set("IsCashSale",0),a.set("IsAutoReconnectRequired",!0===me.data.autoReconnectProducts?1:0),"Cheque"===me.data.methodOfPayment?(a.set("AccountHolderName",me.data.drawerName),a.set("BankName",{CanonicalKey:me.data.bank.CanonicalKey,CanonicalValue:me.data.bank.CanonicalValue}),a.set("BranchName",me.data.branch),a.set("BranchCode",me.data.branchCode),a.set("ChequeDate",me.data.chequeDate),a.set("ChequeNumber",me.data.chequeNumber)):"Card"===me.data.methodOfPayment&&(a.set("AccountHolderName",me.data.cardHolder),a.set("MethodOfPaymentSub",me.data.cardType.value));var o=[],r=Komodo.Models.SplitPayment.create();r.set("Amount",i),r.set("CustomerID",me.data.customerNumber),r.set("QuotationID",0),r.set("AccountType",me.data.accountType),o.push(r),a.set("SplitPayments",o),a.set("WasOffline",1),me.showReceipt(a),me.updateUser(a)}else Komodo.Controls.MessageBoxController.show(kl.value(me.localeBase+"home.title"),t,Komodo.Controls.MessageBoxOkButtons,me,"modelPayment","danger")}},updateUser:function(e,t){var a=Komodo.Models.Shift.create();if(a.set("UID",me.data.shiftNumber),a.set("GLNumber",me.data.generalLedger),a.set("Type","Cashier"),a.set("Cash",parseFloat(me.data.totalCash).toFixed(2)),a.set("Other",parseFloat(me.data.totalOther).toFixed(2)),a.set("Balance",parseFloat(me.data.totalAmountInShift).toFixed(2)),a.set("StockHandlerAccountID",me.data.stockHandlerId),a.set("BankDepositNumber",me.data.bankDepositNumber),a.set("Currency",me.data.selectedCurrency),me.offlineUsershiftDetails&&void 0===me.offlineUsershiftDetails.ShiftDetail&&(me.offlineUsershiftDetails.ShiftDetail=Komodo.Models.ShiftDetails.create()),me.offlineUsershiftDetails.ShiftDetail.Shift=a,me.offlineUsershiftDetails.ShiftDetail.StockHandlers=me.data.stockHandlers,me.offlineUsershiftDetails.ShiftDetail.AllowedCurrencies=me.data.allowedCurrencies,me.offlineUsershiftDetails.ShiftDetail.Printers=me.data.printers,void 0===me.offlineUsershiftDetails.ShiftDetail.Payments&&(me.offlineUsershiftDetails.ShiftDetail.Payments=[]),t)for(var n=0;n<me.offlineUsershiftDetails.ShiftDetail.Payments.length;n++)e.PaymentDate===me.offlineUsershiftDetails.ShiftDetail.Payments[n].PaymentDate&&(me.offlineUsershiftDetails.ShiftDetail.Payments[n].isCancelled="Yes",me.offlineUsershiftDetails.ShiftDetail.Payments[n].IsCancelled=1);else e.isCancelled="No",me.offlineUsershiftDetails.ShiftDetail.Payments.pushObject(e);me.getCacheRepository().save(me.countryCode()+".ShiftDetails."+me.userName(),me.offlineUsershiftDetails)},showReceipt:function(e){var t=this,a=Komodo.Models.OfflinePayments.ShiftDetailModel.create();a.set("paymentId",0),a.set("date",new moment(e.ReceiptDate).format("DD/MM/YYYY h:mm")),a.set("paymentType",e.MethodOfPayment),a.set("amount",parseFloat(e.Amount.Value).toFixed(2)),a.set("isSplit","true"===e.IsSplit?"Yes":"No"),a.set("isCancelled","true"===e.IsCancelled?"Yes":"No"),a.set("currency",me.data.currencies.find(function(t){return t.key===e.Amount.CurrencyCode})),a.set("baseCurrencyAmount",parseFloat(me.data.baseAmount).toFixed(2)),a.set("isOffline","Yes");var n=[],s=0;"Cash"===e.MethodOfPayment?(s=parseFloat(me.data.totalCash)+parseFloat(e.Amount.Value),me.data.set("totalCash",parseFloat(s).toFixed(2))):(s=parseFloat(me.data.totalOther)+parseFloat(e.Amount.Value),me.data.set("totalOther",parseFloat(s).toFixed(2))),s=parseFloat(me.data.totalAmountInShift)+parseFloat(e.Amount.Value),me.data.set("totalAmountInShift",parseFloat(s).toFixed(2));var i=Komodo.Models.OfflinePayments.SplitPaymentModel.create();i.set("receiptNumber",0),i.set("customerNumber",e.CustomerID),i.set("accountNumber",0),i.set("quoteId",0),i.set("financialTransactionId",0),i.set("amount",parseFloat(e.Amount.Value).toFixed(2)),i.set("currency",e.Amount.CurrencyCode),i.set("isFirst",!0),i.set("baseCurrencyAmount",parseFloat(me.data.baseAmount).toFixed(2)),n.pushObject(i),a.set("SplitPayments",n);var o=[];me.data.printers&&$(me.data.printers).each(function(e,t){!0===t.isActive&&o.pushObject({key:t.printerName,value:t.printerName,printerType:t.printerType,ipAddress:t.ipAddress,layout:unescape(t.printerLayout)})});var r=Komodo.Models.OfflinePayments.PrintReceiptModel.create();r.printers=o,r.receiptData=me.populateReceiptModel(),me.data.set("customerNumber",""),me.data.set("amountTendered",parseFloat("0").toFixed(2)),me.data.set("paymentAmount",parseFloat("0").toFixed(2)),me.data.set("changeOwed",parseFloat("0").toFixed(2));var l=Komodo.Application.ModalPaneController.create();l.popup(kl.value(me.localeBase+"shift.printReceiptTitle"),"printReceipt",{context:{data:r,previewReceipt:function(){var e=window.open();e.document.write($("#printPreview").html()),e.print(),e.close()},printReceipt:function(){var e=this,a=$("#printPreview").children("table"),n="";$(a).each(function(e,t){n+=$(t).html()}),t.printReceipt({receiptText:n,printer:e.data.printer.key,printerType:e.data.printer.printerType,ipAddress:e.data.printer.ipAddress})},cancel:function(){l.close()}}})},showCanelReceipt:function(e){"Cash"===e.MethodOfPayment?(newTotal=parseFloat(me.data.totalCash)-parseFloat(e.Amount.Value),me.data.set("totalCash",parseFloat(newTotal).toFixed(2))):(newTotal=parseFloat(me.data.totalOther)-parseFloat(e.Amount.Value),me.data.set("totalOther",parseFloat(newTotal).toFixed(2))),newTotal=parseFloat(me.data.totalAmountInShift)-parseFloat(e.Amount.Value),me.data.set("totalAmountInShift",parseFloat(newTotal).toFixed(2));var t=[];me.data.printers&&$(me.data.printers).each(function(e,a){!0===a.isActive&&t.pushObject({key:a.printerName,value:a.printerName,printerType:a.printerType,ipAddress:a.ipAddress,layout:unescape(a.printerLayout)})});var a=[],n=Komodo.Models.OfflinePayments.ReceiptModel.create();n.IsReprint=0,n.IsCancelled=1,n.IsRefund=0,n.IsOffline=1,n.ReceiptDate=(new moment).format("DD/MM/YYYY h:mm"),n.CashierName=me.userName(),n.ReceiptNumber="0",n.CustomerID=e.SplitPayments[0].CustomerID,n.MethodOfPayment=e.MethodOfPayment,n.PaymentAmount=parseFloat(e.Amount.Value).toFixed(2),n.Amount=parseFloat(e.AmountTendered.Value).toFixed(2),n.Change=(parseFloat(e.AmountTendered.Value)-parseFloat(e.Amount.Value)).toFixed(2),n.TotalAmountExclTax="0.00",n.TotalAmountInclTax="0.00",n.Tax=0;var s=me.data.allowedCurrencies.find(function(e){return e.key===me.data.selectedCurrency.key});n.Currency=void 0!==s&&null!==s?s.value:"",n.ExchangeRate=void 0!==s&&null!==s?s.rate:"",n.AccountID="",n.CustomerName="",n.Address="",n.CellNumber="",n.Package="",n.ViewingPeriod="",n.Hardware="",n.Insurance="",n.SmartcardNumber="",n.NextPaymentDate="",a.push(n);var i=Komodo.Models.OfflinePayments.PrintReceiptModel.create();i.printers=t,i.receiptData=a;var o=Komodo.Application.ModalPaneController.create();o.popup(kl.value(me.localeBase+"shift.printReceiptTitle"),"printReceipt",{context:{data:i,previewReceipt:function(){var e=window.open();e.document.write($("#printPreview").html()),e.print(),e.close()},printReceipt:function(){var e=this,t=$("#printPreview").children("table"),a="";$(t).each(function(e,t){a+=$(t).html()}),controller.printReceipt({receiptText:a,printer:e.data.printer.key,printerType:e.data.printer.printerType,ipAddress:e.data.printer.ipAddress})},cancel:function(){o.close()}}})},userName:function(){return Komodo.Services.securityService.get("domainUserName").substring(3)},populateReceiptModel:function(){var e=[],t=Komodo.Models.OfflinePayments.ReceiptModel.create();t.IsReprint=0,t.IsCancelled=0,t.IsRefund=0,t.IsOffline=1,t.ReceiptDate=(new moment).format("DD/MM/YYYY h:mm"),t.CashierName=me.userName(),t.ReceiptNumber="0",t.CustomerID=me.data.customerNumber,t.MethodOfPayment=me.data.methodOfPayment,t.PaymentAmount=parseFloat(me.data.paymentAmount).toFixed(2),t.Amount=parseFloat(me.data.amountTendered).toFixed(2),t.TotalAmountExclTax="0.00",t.TotalAmountInclTax="0.00",t.Tax=0;var a=me.data.allowedCurrencies.find(function(e){return e.key===me.data.selectedCurrency.key});return t.Currency=void 0!==a&&null!==a?a.value:"",t.ExchangeRate=void 0!==a&&null!==a?a.rate:"",t.AccountID="",t.CustomerName="",t.Address="",t.CellNumber="",t.Change=parseFloat(me.data.get("changeOwed")).toFixed(2),t.Package="",t.ViewingPeriod="",t.Hardware="",t.Insurance="",t.SmartcardNumber="",t.NextPaymentDate="",e.push(t),e},populateReprintReceiptModel:function(e){var t=[];return $(e.SplitPayments).each(function(a,n){var s=Komodo.Models.OfflinePayments.ReceiptModel.create();s.IsReprint=1,s.IsCancelled=0,s.IsOffline=1,s.ReceiptDate=e.PaymentDate,s.CashierName=me.userName(),s.ReceiptNumber="0",s.CustomerID=n.CustomerID,s.MethodOfPayment=e.MethodOfPayment,s.Amount=parseFloat(n.Amount.Value).toFixed(2),s.TotalAmountExclTax="0.00",s.TotalAmountInclTax="0.00",s.Tax=0;var i=me.data.allowedCurrencies.find(function(e){return e.key===n.Amount.CurrencyCode});s.Currency=void 0!==i&&null!==i?i.value:"",s.ExchangeRate=void 0!==i&&null!==i?i.rate:"",s.AccountID="",s.CustomerName="",s.Address="",s.CellNumber="",s.Change="0.00",s.Package="",s.ViewingPeriod="",s.Hardware="",s.Insurance="",s.SmartcardNumber="",s.NextPaymentDate="",t.push(s)}),t},printReceipt:function(e){var t=this,a={async:!1,type:"POST",cache:!1,url:KomodoConfiguration.localStorageApiUrl+"/printReceipt",dataType:"json",contentType:"application/json",data:JSON.stringify(e)};jQuery.ajax(a).done(function(){}).fail(function(e,a,n){var s=kl.value(t._localeBase+"shift.technicalError");void 0!==e&&(void 0!==e.responseJSON?s=e.responseJSON.message:void 0!==e.statusText&&""!==e.statusText&&(s=e.statusText)),alert(s)})},interimShiftReport:function(){if(me.offlineUsershiftDetails&&me.offlineUsershiftDetails.ShiftDetail&&me.offlineUsershiftDetails.ShiftDetail.Shift){var e=Komodo.Models.OfflinePayments.ShiftDetailsReportModel.create();if(e.userName=me.userName(),e.country=me.data.country.countryDescription,e.header="Interim Shift",e.shiftNumber=me.offlineUsershiftDetails.ShiftDetail.Shift.UID,e.date=(new moment).format(KomodoConfiguration.dateFormat),e.time=(new moment).format(KomodoConfiguration.timeFormat),e.bankDepositNumber=me.offlineUsershiftDetails.ShiftDetail.Shift.BankDepositNumber,e.currency=me.offlineUsershiftDetails.ShiftDetail.Shift.Currency.value,me.offlineUsershiftDetails.ShiftDetail.StockHandlers){var t=$.grep($.makeArray(me.offlineUsershiftDetails.ShiftDetail.StockHandlers),function(e){return e.Id===me.offlineUsershiftDetails.ShiftDetail.Shift.StockHandlerAccountID});t&&t.length>0&&(e.stockHandlerDescription=t[0].Name)}var a=me.offlineUsershiftDetails.ShiftDetail;a.summaryGridData=[Komodo.Models.OfflinePayments.ShiftSummaryModel.create(),Komodo.Models.OfflinePayments.ShiftSummaryModel.create(),Komodo.Models.OfflinePayments.ShiftSummaryModel.create()],a.summaryGridData[0].set("paymentType","Cash"),a.summaryGridData[1].set("paymentType","Card"),a.summaryGridData[2].set("paymentType","Cheque"),$(me.offlineUsershiftDetails.ShiftDetail.Payments).each(function(e,t){if(1===t.WasOffline?t.wasOffline="Yes":t.wasOffline="No",t.MethodOfPayment){var n=-1;"Cash"===t.MethodOfPayment?n=0:"Card"===t.MethodOfPayment?n=1:"Cheque"===t.MethodOfPayment&&(n=2),n>-1&&(void 0===t.IsCancelled||0===t.IsCancelled)&&(a.summaryGridData[n].set("count",a.summaryGridData[n].count+1),a.summaryGridData[n].set("amount",(parseFloat(a.summaryGridData[n].amount)+parseFloat(t.Amount.Value)).toFixed(2)))}}),e.summaryGridData=a.summaryGridData,e.detailGridData=me.offlineUsershiftDetails.ShiftDetail.Payments;var n=Komodo.Application.ModalPaneController.create();n.popup(kl.value(me.localeBase+"shift.interimShiftReport"),"interimShiftReport",{context:{data:e,printReport:function(e){var t=window.open();t.document.write("<html><head><title>"+title+"</title>"),t.document.write('<link rel="stylesheet" href="'+me.getPath()+'Content/bootstrap.css" type="text/css" />'),t.document.write('<link rel="stylesheet" href="'+me.getPath()+'Content/komodo-default.css" type="text/css" />'),t.document.write('<link rel="stylesheet" href="'+me.getPath()+'Content/modules.css" type="text/css" />'),t.document.write('<link rel="stylesheet" href="'+me.getPath()+'Content/komodo-default.min.css" type="text/css" />'),t.document.write("</head><body>"),t.document.write($("#reportView").html()),t.document.write("<script>window.print(); setTimeout(function () { window.close() }, 100);<\/script></body></html>")},cancel:function(){n.close()}}})}else Komodo.Controls.MessageBoxController.show(kl.value(me.localeBase+"home.title"),kl.value(me.localeBase+"shift.noShiftDetails"),Komodo.Controls.MessageBoxOkButtons,me,"modelPayment","danger")},shiftDetails:function(){if(me.offlineUsershiftDetails){var e=me.offlineUsershiftDetails.ShiftDetail.Payments;$.each(e,function(e,t){"Yes"===t.isCancelled||"Yes"==t.Synced?t.disableCancel=!0:t.disableCancel=!1});var t=Komodo.Application.ModalPaneController.create(),a=Ember.Object.create({type:"boolean"}),n=Ember.Object.create({type:"boolean"});a.value=!0,n.value=!(e.length>10),t.popup("Shift Details","shiftDetails",{context:{data:e.slice(0,10),isPreviousDisable:a,isNextDisable:n,page:0,searchText:"",cancel:function(){t.close()},cancelPayment:function(e){var a=e._parentView._parentView._parentView.get("content");t.close(),Komodo.Controls.MessageBoxController.show(kl.value(me.localeBase+"home.title"),kl.value(me.localeBase+"shift.cancelPayment"),Komodo.Controls.MessageBoxYesNoButtons,me,"id5446673","alert").response=function(e){"yes"===e&&(me.updateUser(a,!0),me.showCanelReceipt(a))}},searchReceipt:function(){var e=this,t=e.searchResult(),a=Math.ceil(t.length/10);t.length>0?(e.data.clear(),e.data.pushObjects(t.slice(0,10)),e.page=0):(e.data.clear(),e.page=0,alert("No results found.")),e.setButtons(a)},previousPage:function(){var e=this,t=e.searchResult(),a=Math.ceil(t.length/10);if(e.page>0){e.page=e.page-1;var n=0===e.page?1:e.page+1;e.data.clear(),e.data.pushObjects(t.slice(10*e.page,10*n))}e.setButtons(a)},nextPage:function(){var e=this,t=e.searchResult(),a=Math.ceil(t.length/10);if(t.length>10){e.page=e.page+1;var n=e.page+1;e.data.clear(),e.data.pushObjects(t.slice(10*e.page,10*n))}e.setButtons(a)},searchResult:function(){var t=this,a=t.searchText,n=[];return""===a||void 0===a?e:($(e).each(function(e,t){found=t.SplitPayments.find(function(e){return e.CustomerID.toString()===a}),found&&n.pushObject(t)}),n)},setButtons:function(e){var t=this;0===e||t.page===e-1?t.isNextDisable.set("value",!0):t.isNextDisable.set("value",!1),0===t.page?t.isPreviousDisable.set("value",!0):t.isPreviousDisable.set("value",!1)},reprintReceipt:function(e){var a=e._parentView._parentView._parentView.get("content");t.close(),me.reprintReceipt(a)}}})}else Komodo.Controls.MessageBoxController.show(kl.value(me.localeBase+"home.title"),kl.value(me.localeBase+"shift.missingUser"),Komodo.Controls.MessageBoxOkButtons,me,"modelPayment","danger")},reprintReceipt:function(e){if(void 0!==e){var t=this,a=[];me.data.printers&&$(me.data.printers).each(function(e,t){!0===t.isActive&&a.pushObject({key:t.printerName,value:t.printerName,printerType:t.printerType,ipAddress:t.ipAddress,layout:unescape(t.printerLayout)})});var n=Komodo.Models.OfflinePayments.PrintReceiptModel.create();n.printers=a,n.receiptData=me.populateReprintReceiptModel(e);var s=Komodo.Application.ModalPaneController.create();s.popup(kl.value(me.localeBase+"shift.reprintReceiptTitle"),"printReceipt",{context:{data:n,previewReceipt:function(){var e=window.open();e.document.write($("#printPreview").html()),e.print(),e.close()},printReceipt:function(){var e=this,a=$("#printPreview").children("table"),n="";$(a).each(function(e,t){n+=$(t).html()}),t.printReceipt({receiptText:n,printer:e.data.printer.key,printerType:e.data.printer.printerType,ipAddress:e.data.printer.ipAddress})},cancel:function(){s.close()}}})}},getPath:function(){var e=window.location.href;return e=e.substring(0,e.lastIndexOf("/"))+"/",e.replace("#/","")},paymentMethodChanged:function(){me.removeValidator("cardTypeValidator"),me.removeValidator("cardHolderValidator"),me.removeValidator("cardNumberValidator"),me.removeValidator("drawerNameValidator"),me.removeValidator("chequeBankValidator"),me.removeValidator("chequeBranchValidator"),me.removeValidator("chequeBranchCodeValidator"),me.removeValidator("chequeNumberValidator"),me.removeValidator("chequeDateValidator"),me.data.set("isPaymentTypeCheque",!1),me.data.set("isPaymentTypeCard",!1),"Cheque"===me.data.methodOfPayment?(me.data.set("isPaymentTypeCheque",!0),me.data.set("chequeDate",(new moment).format(KomodoConfiguration.dateFormat)),me.registerValidator(me.data,"drawerName",{isRequired:!0,type:"string",minLength:2,maxLength:50,regExPattern:"^[0-9a-zA-Z ]*$"}),me.registerValidator(me.data,"bank",{isRequired:!0,type:"string"}),me.registerValidator(me.data,"branch",{isRequired:!0,type:"string"}),me.registerValidator(me.data,"branchCode",{isRequired:!0,type:"string",minLength:1,maxLength:50,regExPattern:"^[0-9a-zA-Z]*$"}),me.registerValidator(me.data,"chequeNumber",{isRequired:!0,type:"string",minLength:2,maxLength:50,regExPattern:"^[0-9a-zA-Z]*$"}),me.registerValidator(me.data,"chequeDate",{isRequired:!0,minDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),functions:Komodo.UI.Validators.DatePickerValidator})):"Card"===me.data.methodOfPayment&&(me.data.set("isPaymentTypeCard",!0),me.registerValidator(me.data,"cardType",{isRequired:!0,type:"string"}),me.registerValidator(me.data,"cardHolder",{isRequired:!0,type:"string",minLength:2,maxLength:50,regExPattern:"^[0-9a-zA-Z ]*$"}))}.observes("data.methodOfPayment"),bankChanged:function(){if(me.data.set("branches",[]),me.data.get("bank")){var e=me.data.get("bank").CanonicalKey;$.each(me.data.get("banks"),function(t,a){a.CanonicalKey===e&&a.Branches&&a.Branches.Branch&&($.isArray(a.Branches.Branch)?$.each(a.Branches.Branch,function(e,t){me.data.get("branches").addObject(t)}):me.data.get("branches").addObject(a.Branches.Branch),me.data.set("chequeBranchCode",""))})}}.observes("data.bank"),branchChanged:function(){me.data.get("branch")&&me.data.set("branchCode",me.data.get("branch").BranchCode)}.observes("data.branch"),paymentAmountChanged:function(){me.data.set("amountTendered",me.data.paymentAmount)}.observes("data.paymentAmount"),amountTenderedChanged:function(){me.data.set("baseAmount",me.data.amountTendered);var e=0,t=0;me.data.paymentAmount&&!1===isNaN(me.data.paymentAmount)&&(e=parseFloat(me.data.paymentAmount)),me.data.amountTendered&&!1===isNaN(me.data.amountTendered)&&(t=parseFloat(me.data.amountTendered)),me.data.set("changeOwed",parseFloat(t-e).toFixed(2))}.observes("data.amountTendered"),actions:{interimShiftReport:function(){this.interimShiftReport()},showHideShiftDetails:function(){me.shiftBannerVisible?($("#komodo-shift-details").addClass("komodo-hidden"),$("#komodo-shift-details").slideUp(),$("#komodo-shift-page").removeClass("shift-page-padding"),$("#komodo-shift-page").addClass("no-banner-padding"),me.set("shiftBannerVisible",!1)):($("#komodo-shift-details").removeClass("komodo-hidden"),$("#komodo-shift-details").slideDown(),$("#komodo-shift-page").addClass("shift-page-padding"),$("#komodo-shift-page").removeClass("no-banner-padding"),me.set("shiftBannerVisible",!0))},shiftDetails:function(){this.shiftDetails()},makePayment:function(){me.makePayment()}}}),Komodo.Services.localizationService.registerNamespace("locale.offlinePayment");