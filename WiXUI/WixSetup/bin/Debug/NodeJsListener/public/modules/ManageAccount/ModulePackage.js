Ember.TEMPLATES.AccountView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o,n,s;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:S.noop,fn:S.program(2,r,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n  <hr/>\r\n  <table id="tblfinancialAccounts" class="table table-bordered komodo-datagrid">\r\n    <tr>\r\n      <th style="width:70px;">'),t.buffer.push(x((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:manageAccount.accountNumber",s):P.call(e,"loc","locale.manageaccount:manageAccount.accountNumber",s)))),t.buffer.push('</th>\r\n      <th style="width:70px;">'),t.buffer.push(x((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:manageAccount.accountDescription",s):P.call(e,"loc","locale.manageaccount:manageAccount.accountDescription",s)))),t.buffer.push("</th>\r\n      "),o=a.if.call(e,"showPaymentGroup",{hash:{},hashTypes:{},hashContexts:{},inverse:S.noop,fn:S.program(10,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),o=a.if.call(e,"isShowSmartcardColumn",{hash:{},hashTypes:{},hashContexts:{},inverse:S.noop,fn:S.program(12,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n      <th style="width:70px;">'),t.buffer.push(x((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:manageAccount.status",s):P.call(e,"loc","locale.manageaccount:manageAccount.status",s)))),t.buffer.push('</th>\r\n      <th style="width:70px;">'),t.buffer.push(x((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:manageAccount.methodOfPayment",s):P.call(e,"loc","locale.manageaccount:manageAccount.methodOfPayment",s)))),t.buffer.push('</th>\r\n      <th style="width:70px;">'),t.buffer.push(x((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:manageAccount.accountBalance",s):P.call(e,"loc","locale.manageaccount:manageAccount.accountBalance",s)))),t.buffer.push('</th>\r\n      <th style="width:70px;">'),t.buffer.push(x((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:manageAccount.actionView",s):P.call(e,"loc","locale.manageaccount:manageAccount.actionView",s)))),t.buffer.push("</th>\r\n    </tr>\r\n    "),o=a.if.call(e,"showAccountsData",{hash:{},hashTypes:{},hashContexts:{},inverse:S.noop,fn:S.program(14,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  </table>\r\n\r\n  "),o=a.if.call(e,"showAccountsData",{hash:{},hashTypes:{},hashContexts:{},inverse:S.noop,fn:S.program(25,D,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),""}function r(e,t){var o;return t.buffer.push("\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:accountInformationTab.filterList~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width",class:"four-columns"},hashTypes:{class:"STRING",class:"STRING"},hashContexts:{class:e,class:e},inverse:S.noop,fn:S.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width",class:"four-columns"},hashTypes:{class:"STRING",class:"STRING"},hashContexts:{class:e,class:e},inverse:S.noop,fn:S.program(5,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width",class:"four-columns"},hashTypes:{class:"STRING",class:"STRING"},hashContexts:{class:e,class:e},inverse:S.noop,fn:S.program(7,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function i(e,t){return t.buffer.push("\r\n\r\n  \x3c!--Drop down List for Account Description--\x3e\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"1",label:"~locale.manageaccount:accountInformationTab.accountDescription~",prompt:"~locale.manageaccount:accountInformationTab.accountDescriptionPrompt~",valueBinding:"manageAccountModel.accountDescription",contentBinding:"accountDescriptionlst",validatorBinding:"validators.accountDescriptionValidator",optionLabelPath:"content.AccountTypeDescription",optionValuePath:"content.CanonicalKey",class:"info-heading"},hashTypes:{tabindex:"STRING",label:"STRING",prompt:"STRING",valueBinding:"STRING",contentBinding:"STRING",validatorBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",class:"STRING"},hashContexts:{tabindex:e,label:e,prompt:e,valueBinding:e,contentBinding:e,validatorBinding:e,optionLabelPath:e,optionValuePath:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  "),""}function l(e,t){return t.buffer.push("\r\n\r\n  \x3c!--Drop down List for Account Status--\x3e\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"2",label:"~locale.manageaccount:accountInformationTab.status~",prompt:"~locale.manageaccount:accountInformationTab.statusPrompt~",valueBinding:"manageAccountModel.status",contentBinding:"statuslst",validatorBinding:"validators.statusValidator",optionLabelPath:"content.value",optionValuePath:"content.key",class:"info-heading"},hashTypes:{tabindex:"STRING",label:"STRING",prompt:"STRING",valueBinding:"STRING",contentBinding:"STRING",validatorBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",class:"STRING"},hashContexts:{tabindex:e,label:e,prompt:e,valueBinding:e,contentBinding:e,validatorBinding:e,optionLabelPath:e,optionValuePath:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  "),""}function c(e,t){var o;return t.buffer.push("\r\n  <br/>\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{size:"large",action:"actionSearchForAccounts",disableBinding:"isSearchInProgress"},hashTypes:{size:"STRING",action:"STRING",disableBinding:"STRING"},hashContexts:{size:e,action:e,disableBinding:e},inverse:S.noop,fn:S.program(8,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function u(e,t){var o,n;t.buffer.push(x((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageCase:customerInteractionHistory.search",n):P.call(e,"loc","locale.manageCase:customerInteractionHistory.search",n))))}function d(e,t){var o,n;return t.buffer.push('\r\n      <th style="width:70px;">'),t.buffer.push(x((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:manageAccount.paymentGroup",n):P.call(e,"loc","locale.manageaccount:manageAccount.paymentGroup",n)))),t.buffer.push("</th>\r\n      "),""}function h(e,t){var o,n;return t.buffer.push('\r\n      <th style="width:70px;">'),t.buffer.push(x((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:manageAccount.smartCardDeviceNumber",n):P.call(e,"loc","locale.manageaccount:manageAccount.smartCardDeviceNumber",n)))),t.buffer.push("</th>\r\n      "),""}function m(e,t){var o;return t.buffer.push("\r\n    "),o=a.each.call(e,"item","in","customerProfileModel.accountsGrid",{hash:{},hashTypes:{},hashContexts:{},inverse:S.noop,fn:S.program(15,p,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function p(e,t){var o;return t.buffer.push("\r\n    <tr>\r\n      <td>"),o=a._triageMustache.call(e,"item.accountNo",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n      <td>"),o=a._triageMustache.call(e,"item.accountDescription",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n      "),o=a.if.call(e,"showPaymentGroup",{hash:{},hashTypes:{},hashContexts:{},inverse:S.noop,fn:S.program(16,f,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),o=a.if.call(e,"isShowSmartcardColumn",{hash:{},hashTypes:{},hashContexts:{},inverse:S.noop,fn:S.program(18,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      <td>"),o=a._triageMustache.call(e,"item.status",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n      <td>"),o=a._triageMustache.call(e,"item.methodofpayment",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n      <td align="right">'),o=a._triageMustache.call(e,"item.overdue",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n      <td>\r\n        "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{size:"xs",action:"ViewFinancialAccountInformation",contentBinding:"item",tabindex:"3"},hashTypes:{size:"STRING",action:"STRING",contentBinding:"STRING",tabindex:"STRING"},hashContexts:{size:e,action:e,contentBinding:e,tabindex:e},inverse:S.noop,fn:S.program(20,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),o=a.if.call(e,"enableRefunds",{hash:{},hashTypes:{},hashContexts:{},inverse:S.noop,fn:S.program(22,y,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td>\r\n    </tr>\r\n    "),""}function f(e,t){var o;return t.buffer.push("\r\n      <td>"),o=a._triageMustache.call(e,"item.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n      "),""}function g(e,t){var o;return t.buffer.push('\r\n      <td>\r\n        <div class="scroll-list" style="border-color:white;">'),o=a._triageMustache.call(e,"item.smartcardno",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n      </td>\r\n      "),""}function v(e,t){var o,n;t.buffer.push(x((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:manageAccount.view",n):P.call(e,"loc","locale.manageaccount:manageAccount.view",n))))}function y(e,t){var o;return t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{size:"xs",action:"refund",type:"danger",contentBinding:"item",isVisibleBinding:"item.isVisible",disableBinding:"item.disableRefundButton",tabindex:"4"},hashTypes:{size:"STRING",action:"STRING",type:"STRING",contentBinding:"STRING",isVisibleBinding:"STRING",disableBinding:"STRING",tabindex:"STRING"},hashContexts:{size:e,action:e,type:e,contentBinding:e,isVisibleBinding:e,disableBinding:e,tabindex:e},inverse:S.noop,fn:S.program(23,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function b(e,t){var o,n;t.buffer.push(x((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:manageAccount.refund",n):P.call(e,"loc","locale.manageaccount:manageAccount.refund",n))))}function D(e,t){return t.buffer.push("\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.Pager",{hash:{mode:"virtual",contentLengthBinding:"totalAccounts",pageSelectedAction:"pageNavigate",itemsPerPage:"10",visiblePageCount:"10"},hashTypes:{mode:"STRING",contentLengthBinding:"STRING",pageSelectedAction:"STRING",itemsPerPage:"STRING",visiblePageCount:"STRING"},hashContexts:{mode:e,contentLengthBinding:e,pageSelectedAction:e,itemsPerPage:e,visiblePageCount:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var T,C,I,x=this.escapeExpression,P=a.helperMissing,S=this;return n.buffer.push("<div "),n.buffer.push(x(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:n}))),n.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),n.buffer.push(x((C=a.loc||t&&t.loc,I={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},C?C.call(t,"locale.manageaccount:general.manageAccountTitle",I):P.call(t,"loc","locale.manageaccount:general.manageAccountTitle",I)))),n.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/customerProfile">&lt;'),n.buffer.push(x((C=a.loc||t&&t.loc,I={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},C?C.call(t,"locale.manageaccount:general.Back",I):P.call(t,"loc","locale.manageaccount:general.Back",I)))),n.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n\r\n  "),T=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageaccount:accountInformationTab.title~"},hashTypes:{title:"STRING"},hashContexts:{title:t},inverse:S.noop,fn:S.program(1,s,n),contexts:[t],types:["ID"],data:n}),(T||0===T)&&n.buffer.push(T),n.buffer.push("\r\n\r\n</div>"),""}),Ember.TEMPLATES.WriteOffView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageaccount:writeOffFunds.collapsibleHeading~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:e,isCollapsed:e},inverse:I.noop,fn:I.program(2,r,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageaccount:writeOffFunds.collapsibleHeadingWriteOffFunds~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:e,isCollapsed:e},inverse:I.noop,fn:I.program(8,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function r(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:I.noop,fn:I.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function i(e,t){var o;return t.buffer.push('\r\n    <table style="width:100%">\r\n            '),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:I.noop,fn:I.program(4,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:I.noop,fn:I.program(6,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </table>\r\n    "),""}function l(e,t){return t.buffer.push('\r\n            <tr>\r\n                <td width="25%">\r\n                    '),t.buffer.push(C(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"1",label:"~locale.manageaccount:accountInformationTab.accountNumber~",valueBinding:"writeOffModel.accountNumber",contentBinding:"writeOffModel.accountNumberList",optionLabelPath:"content.Key",optionValuePath:"content.Value",class:"info-heading"},hashTypes:{tabindex:"STRING",label:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",class:"STRING"},hashContexts:{tabindex:e,label:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                </td>\r\n                <td width="25%">\r\n                    '),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:accountInformationTab.accountDescription~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                    <br />\r\n                    "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"writeOffModel.accountDesc"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                </td>\r\n            </tr>\r\n            "),""}function c(e,t){return t.buffer.push('\r\n            <tr>\r\n                <td width="25%">\r\n                    '),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:viewAccountInformation.status~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                    <br />\r\n                    "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"writeOffModel.accountStatus"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                </td>\r\n                <td width="25%">\r\n                    '),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:accountInformationTab.accountBalance~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                    <br />\r\n                    "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"writeOffModel.accountBalance"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                </td>\r\n            </tr>\r\n            "),""}function u(e,t){var o;return t.buffer.push("\r\n\r\n    "),o=a.if.call(e,"writeOffModel.commercial",{hash:{},hashTypes:{},hashContexts:{},inverse:I.noop,fn:I.program(9,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    \r\n    "),o=a.if.call(e,"writeOffModel.residential",{hash:{},hashTypes:{},hashContexts:{},inverse:I.noop,fn:I.program(13,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n   \r\n    "),o=a.if.call(e,"writeOffModel.enableInvoices",{hash:{},hashTypes:{},hashContexts:{},inverse:I.noop,fn:I.program(17,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),""}function d(e,t){var o,n,s;return t.buffer.push("\r\n    "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:writeOffFunds.listOfInvoices~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n    <br /><br />\r\n    <table width="100%" class="table table-bordered komodo-datagrid" id="tblInvoices">\r\n            <tr>\r\n                <th width="10%">'),t.buffer.push(C((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"locale.manageaccount:writeOffFunds.invoiceNumber",s):x.call(e,"loc","locale.manageaccount:writeOffFunds.invoiceNumber",s)))),t.buffer.push('</th>\r\n                <th width="10%">'),t.buffer.push(C((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"locale.manageaccount:writeOffFunds.disputeStatus",s):x.call(e,"loc","locale.manageaccount:writeOffFunds.disputeStatus",s)))),t.buffer.push('</th>\r\n                <th width="10%">'),t.buffer.push(C((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"locale.manageaccount:writeOffFunds.invoiceDate",s):x.call(e,"loc","locale.manageaccount:writeOffFunds.invoiceDate",s)))),t.buffer.push('</th>\r\n                <th width="10%">'),t.buffer.push(C((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"locale.manageaccount:writeOffFunds.dueDate",s):x.call(e,"loc","locale.manageaccount:writeOffFunds.dueDate",s)))),t.buffer.push('</th>\r\n                <th width="10%">'),t.buffer.push(C((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"locale.manageaccount:writeOffFunds.accountNumber",s):x.call(e,"loc","locale.manageaccount:writeOffFunds.accountNumber",s)))),t.buffer.push('</th>\r\n                <th width="10%">'),t.buffer.push(C((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"locale.manageaccount:writeOffFunds.methodOfPayment",s):x.call(e,"loc","locale.manageaccount:writeOffFunds.methodOfPayment",s)))),t.buffer.push('</th>\r\n                <th width="10%">'),t.buffer.push(C((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"locale.manageaccount:writeOffFunds.balanceBroughtForward",s):x.call(e,"loc","locale.manageaccount:writeOffFunds.balanceBroughtForward",s)))),t.buffer.push('</th>\r\n                <th width="10%">'),t.buffer.push(C((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"locale.manageaccount:writeOffFunds.totalAmount",s):x.call(e,"loc","locale.manageaccount:writeOffFunds.totalAmount",s)))),t.buffer.push('</th>\r\n                <th width="10%">'),t.buffer.push(C((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"locale.manageaccount:writeOffFunds.balance",s):x.call(e,"loc","locale.manageaccount:writeOffFunds.balance",s)))),t.buffer.push('</th>\r\n                <th width="10%">'),t.buffer.push(C((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},n?n.call(e,"locale.manageaccount:writeOffFunds.select",s):x.call(e,"loc","locale.manageaccount:writeOffFunds.select",s)))),t.buffer.push("</th>\r\n            </tr>\r\n        "),o=a.each.call(e,"item","in","gridDataPaging",{hash:{},hashTypes:{},hashContexts:{},inverse:I.noop,fn:I.program(10,h,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n    </table>\r\n    <div align="left">\r\n        '),t.buffer.push(C(a.view.call(e,"Komodo.Controls.Pager",{hash:{mode:"content",contentBinding:"writeOffModel.invoicesGrid",pageContentBinding:"gridDataPaging",itemsPerPage:"5",visiblePageCount:"3"},hashTypes:{mode:"STRING",contentBinding:"STRING",pageContentBinding:"STRING",itemsPerPage:"STRING",visiblePageCount:"STRING"},hashContexts:{mode:e,contentBinding:e,pageContentBinding:e,itemsPerPage:e,visiblePageCount:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    </div>\r\n    <br />\r\n\r\n    "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:writeOffFunds.writeOffAmount~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"writeOffModel.amount",class:"sub-heading"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br /><br />\r\n    "),""}function h(e,t){var o;return t.buffer.push("\r\n            <tr>\r\n                <td>\r\n                    "),o=a._triageMustache.call(e,"item.invoiceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                <td>\r\n                    "),o=a._triageMustache.call(e,"item.disputeStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                <td>\r\n                    "),o=a._triageMustache.call(e,"item.invoiceDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                <td>\r\n                    "),o=a._triageMustache.call(e,"item.dueDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                <td>\r\n                    "),o=a._triageMustache.call(e,"item.accountNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                <td>\r\n                    "),o=a._triageMustache.call(e,"item.methodOfPayment",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                <td>\r\n                    "),o=a._triageMustache.call(e,"item.balanceBroughtForward",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                <td>\r\n                    "),o=a._triageMustache.call(e,"item.totalAmount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                <td>\r\n                    "),o=a._triageMustache.call(e,"item.balance",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                <td>\r\n                    "),o=a.view.call(e,"Komodo.Controls.ActionView",{hash:{contentBinding:"item",action:"invoiceSelected"},hashTypes:{contentBinding:"STRING",action:"STRING"},hashContexts:{contentBinding:e,action:e},inverse:I.noop,fn:I.program(11,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n            </tr>\r\n        "),""}function m(e,t){return t.buffer.push("\r\n                    "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreRadioButton",{hash:{name:"invoicesSelected",valueBinding:"item"},hashTypes:{name:"STRING",valueBinding:"STRING"},hashContexts:{name:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                    "),""}function p(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:I.noop,fn:I.program(14,f,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function f(e,t){var o;return t.buffer.push('\r\n    <table style="width:100%">\r\n        '),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:I.noop,fn:I.program(15,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("    \r\n    </table>\r\n    "),""}function g(e,t){return t.buffer.push('\r\n        <tr>\r\n            <td valign="top">\r\n                '),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:writeOffFunds.amount~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                <br />\r\n                "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{tabindex:"2",valueBinding:"writeOffModel.amount",validatorBinding:"validators.amountValidator",disabledBinding:"disableAmountField"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n            </td>\r\n            <td align="left">\r\n                '),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:writeOffFunds.comment~",class:"info-heading",validatorBinding:"validators.commentValidator"},hashTypes:{text:"STRING",class:"STRING",validatorBinding:"STRING"},hashContexts:{text:e,class:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                <br />\r\n                "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextArea",{hash:{rows:"5",valueBinding:"writeOffModel.comment",validatorBinding:"validators.commentValidator"},hashTypes:{rows:"STRING",valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{rows:e,valueBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                <br />\r\n                "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.commentValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            </td>\r\n        <tr>\r\n        "),""}function v(e,t){return t.buffer.push("\r\n    "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"writeOffModel.displayMessage"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function y(e,t){var o,n;t.buffer.push(C((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t},o?o.call(e,"locale.manageaccount:writeOffFunds.writeOffFunds",n):x.call(e,"loc","locale.manageaccount:writeOffFunds.writeOffFunds",n))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var b,D,T,C=this.escapeExpression,I=this,x=a.helperMissing;return n.buffer.push("<div "),n.buffer.push(C(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:n}))),n.buffer.push('>\r\n    <div width="90%">\r\n        <span class="komodo-heading">'),n.buffer.push(C((D=a.loc||t&&t.loc,T={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},D?D.call(t,"locale.manageaccount:writeOffFunds.title",T):x.call(t,"loc","locale.manageaccount:writeOffFunds.title",T)))),n.buffer.push('</span>\r\n        <span class="float-right">\r\n            <b>\r\n                <a href="#/account">&lt;'),n.buffer.push(C((D=a.loc||t&&t.loc,T={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},D?D.call(t,"locale.manageaccount:general.Back",T):x.call(t,"loc","locale.manageaccount:general.Back",T)))),n.buffer.push("</a>\r\n            </b>\r\n        </span>\r\n    </div>\r\n    <hr />\r\n\r\n    "),b=a.if.call(t,"writeOffModel.enableWriteOff",{hash:{},hashTypes:{},hashContexts:{},inverse:I.program(17,v,n),fn:I.program(1,s,n),contexts:[t],types:["ID"],data:n}),(b||0===b)&&n.buffer.push(b),n.buffer.push('\r\n\r\n    <br />\r\n    <div style="float:right;">\r\n        '),b=a.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"4",action:"writeOff",visibleBinding:"writeOffModel.hideWriteOffButton",disabledBinding:"writeOffModel.disableForViewOnlyUser"},hashTypes:{tabindex:"STRING",action:"STRING",visibleBinding:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:t,action:t,visibleBinding:t,disabledBinding:t},inverse:I.noop,fn:I.program(19,y,n),
contexts:[t],types:["ID"],data:n}),(b||0===b)&&n.buffer.push(b),n.buffer.push("\r\n    </div>\r\n    <br />\r\n    <br />\r\n</div>"),""}),Ember.TEMPLATES.ViewAccountInformationView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:S.noop,fn:S.program(2,r,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function r(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:S.noop,fn:S.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:S.noop,fn:S.program(10,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function i(e,t){var o;return t.buffer.push("\r\n\r\n  \x3c!--Account Number Dropdown--\x3e\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"1",label:"~locale.manageaccount:viewAccountInformation.accountNumber~",valueBinding:"viewAccountInformationModel.selectedAcccountId",contentBinding:"allAccounts",validatorBinding:"validators.paymentTypeValidator",optionLabelPath:"content",optionValuePath:"content",class:"info-heading"},hashTypes:{tabindex:"STRING",label:"STRING",valueBinding:"STRING",contentBinding:"STRING",validatorBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",class:"STRING"},hashContexts:{tabindex:e,label:e,valueBinding:e,contentBinding:e,validatorBinding:e,optionLabelPath:e,optionValuePath:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  \x3c!--Status Text Label--\x3e\r\n  "),o=a.if.call(e,"viewAccountInformationModel.statusOfAccount",{hash:{},hashTypes:{},hashContexts:{},inverse:S.program(6,c,t),fn:S.program(4,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n \r\n    \x3c!--Debit Order Day TextLabel--\x3e\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"debitOrderDayLabel",class:"info-heading"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewAccountInformationModel.debitOrderDay"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  \x3c!--Anneversary Month Drop Down TextLabel--\x3e\r\n  <table>\r\n    <tr>\r\n      <td>"),t.buffer.push(x(a.view.call(e,"Komodo.Controls.Select",{hash:{label:"~locale.manageaccount:viewAccountInformation.anniversaryMonth~",valueBinding:"viewAccountInformationModel.selectedAnniversaryMonth",contentBinding:"anniversaryMonthsList",validatorBinding:"validators.paymentTypeValidator",optionLabelPath:"content.value",optionValuePath:"content.key",class:"info-heading",disableBinding:"disableAnniversaryMonth"},hashTypes:{label:"STRING",valueBinding:"STRING",contentBinding:"STRING",validatorBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",class:"STRING",disableBinding:"STRING"},hashContexts:{label:e,valueBinding:e,contentBinding:e,validatorBinding:e,optionLabelPath:e,optionValuePath:e,class:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n      <td>"),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"updateAnniversaryMonth",visibleBinding:"isAnniversaryMonth",disableBinding:"disableAnniversaryMonth"},hashTypes:{action:"STRING",visibleBinding:"STRING",disableBinding:"STRING"},hashContexts:{action:e,visibleBinding:e,disableBinding:e},inverse:S.noop,fn:S.program(8,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n    </tr>\r\n  </table>\r\n  <br/><br/>\r\n  "),""}function l(e,t){return t.buffer.push("\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:viewAccountInformation.status~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewAccountInformationModel.status"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),""}function c(e,t){return t.buffer.push("\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"1",label:"~locale.manageaccount:viewAccountInformation.status~",valueBinding:"viewAccountInformationModel.selectedAcccountStatus",contentBinding:"accountStatus",optionLabelPath:"content.value",optionValuePath:"content.key",class:"info-heading"},hashTypes:{tabindex:"STRING",label:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",class:"STRING"},hashContexts:{tabindex:e,label:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function u(e,t){var o,n;t.buffer.push(x((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:viewAccountInformation.saveAnniversary",n):P.call(e,"loc","locale.manageaccount:viewAccountInformation.saveAnniversary",n))))}function d(e,t){return t.buffer.push("\r\n\r\n  \x3c!--Account Description TextLabel--\x3e\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:viewAccountInformation.accountDescription~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewAccountInformationModel.accountDescription"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n\r\n  \x3c!--Method of Payment Text Label--\x3e\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:viewAccountInformation.methodOfPayment~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewAccountInformationModel.methodOfPayment"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n\r\n \r\n  \r\n "),""}function h(e,t){return t.buffer.push('\r\n  <table width="100%">\r\n    \x3c!--Price Currency TextLabel--\x3e\r\n    <tr>\r\n      <td width="20%" align="right">\r\n        '),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:viewAccountInformation.priceCurrency~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        <br></br>\r\n      </td>\r\n      <td width="10%">\r\n        <br></br>\r\n      </td>\r\n      <td width="20%">\r\n        '),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewAccountInformationModel.priceCurrency"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        <br></br>\r\n      </td>\r\n      <td width="25%">\r\n        <br></br>\r\n      </td>\r\n      <td width="25%">\r\n        <br></br>\r\n      </td>\r\n    </tr>\r\n\r\n    <tr>\r\n      <td width="20%" align="right">\r\n        '),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:viewAccountInformation.ageing1to30~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n      <td width="10%"></td>\r\n      <td width="20%">\r\n        '),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewAccountInformationModel.days1To30"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n      <td width="25%"></td>\r\n      <td width="25%"></td>\r\n    </tr>\r\n\r\n    <tr>\r\n      <td width="20%" align="right">\r\n        '),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:viewAccountInformation.ageing31to60~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n      <td width="10%"></td>\r\n      <td width="20%">\r\n        '),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewAccountInformationModel.days31To60"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n      <td width="25%"></td>\r\n      <td width="25%"></td>\r\n    </tr>\r\n\r\n    <tr>\r\n      <td width="20%" align="right">\r\n        '),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:viewAccountInformation.ageing61to90~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n      <td width="10%"></td>\r\n      <td width="20%">\r\n        '),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewAccountInformationModel.days61To90"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n      <td width="25%"></td>\r\n      <td width="25%"></td>\r\n    </tr>\r\n\r\n    <tr>\r\n      <td width="20%" align="right">\r\n        '),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:viewAccountInformation.ageing91to120~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n      <td width="10%"></td>\r\n      <td width="20%">\r\n        '),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewAccountInformationModel.days91To120"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n      <td width="25%"></td>\r\n      <td width="25%"></td>\r\n    </tr>\r\n\r\n    <tr>\r\n      <td width="20%" align="right">\r\n        '),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:viewAccountInformation.ageing121to150~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n      <td width="10%"></td>\r\n      <td width="20%">\r\n        '),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewAccountInformationModel.days121To150"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n      <td width="25%"></td>\r\n      <td width="25%"></td>\r\n    </tr>\r\n\r\n    <tr>\r\n      <td width="20%" align="right">\r\n        '),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:viewAccountInformation.ageing151to180~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n      <td width="10%"></td>\r\n      <td width="20%">\r\n        '),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewAccountInformationModel.days151To180"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n      <td width="25%"></td>\r\n      <td width="25%"></td>\r\n    </tr>\r\n\r\n    <tr>\r\n      <td width="20%" align="right">\r\n        '),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:viewAccountInformation.ageing180Plus~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n      <td width="10%"></td>\r\n      <td width="20%">\r\n        '),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewAccountInformationModel.over180Days"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n      <td width="25%"></td>\r\n      <td width="25%"></td>\r\n    </tr>\r\n\r\n    \x3c!--Total Amount Overdue TextLabel--\x3e\r\n    <tr>\r\n      <td width="20%"></td>\r\n      <td width="10%"></td>\r\n      <td width="20%"></td>\r\n      <td width="25%">\r\n        <h6>'),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:viewAccountInformation.totalAmountOverdue~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</h6>\r\n      </td>\r\n      <td width="25%">\r\n        <h6>'),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewAccountInformationModel.totalAmountOverdue"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</h6>\r\n      </td>\r\n    </tr>\r\n  </table>\r\n  <hr></hr>\r\n  <table width="100%">\r\n    \x3c!--Not Yet Due TextLabel--\x3e\r\n    <tr>\r\n      <td width="20%" align="right">\r\n        '),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:viewAccountInformation.notYetDue~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n      <td width="10%"></td>\r\n      <td width="20%">\r\n        '),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewAccountInformationModel.notYetDue"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n      <td width="25%"></td>\r\n      <td width="25%"></td>\r\n    </tr>\r\n\r\n    \x3c!--Currently Due TextLabel--\x3e\r\n    <tr>\r\n      <td width="20%" align="right">\r\n        '),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:viewAccountInformation.currentlyDue~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n      <td width="10%"></td>\r\n      <td width="20%">\r\n        '),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewAccountInformationModel.currentlyDue"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n      <td width="25%"></td>\r\n      <td width="25%"></td>\r\n    </tr>\r\n\r\n    \x3c!--Total Amount Due TextLabel--\x3e\r\n    <tr>\r\n      <td width="20%"></td>\r\n      <td width="10%"></td>\r\n      <td width="20%"></td>\r\n      <td width="25%">\r\n        <h6>'),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:viewAccountInformation.totalAmountDue~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</h6>\r\n      </td>\r\n      <td width="25%">\r\n        <h6>'),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewAccountInformationModel.totalAmountDue"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</h6>\r\n      </td>\r\n    </tr>\r\n  </table>\r\n  <br/>\r\n  <div class="float-right">\r\n      \x3c!--Payment plan button should go here--\x3e\r\n  </div>\r\n  <br/>\r\n  '),""}function m(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:S.noop,fn:S.program(15,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function p(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:S.noop,fn:S.program(16,f,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:S.noop,fn:S.program(18,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function f(e,t){return t.buffer.push("\r\n\r\n  \x3c!--Account Holders Name and Surname TextLabel--\x3e\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:viewAccountInformation.accountHoldersName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewAccountInformationModel.accountHoldersName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n\r\n  \x3c!--Bank Text Label--\x3e\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:viewAccountInformation.bank~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewAccountInformationModel.bank"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n\r\n  \x3c!--Payment Account Number TextLabel--\x3e\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:viewAccountInformation.paymentAccountNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewAccountInformationModel.maskedBankAccountnumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n\r\n  \x3c!--Branch Code TextLabel--\x3e\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:viewAccountInformation.branchCode~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewAccountInformationModel.branchCode"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),""}function g(e,t){return t.buffer.push("\r\n  \x3c!--Account Holders Id TextLabel--\x3e\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:viewAccountInformation.accountHoldersId~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewAccountInformationModel.accountHoldersId"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n\r\n  \x3c!--Account Type Text Label--\x3e\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:viewAccountInformation.accountType~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewAccountInformationModel.accountType"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n\r\n  \x3c!--Branch Name TextLabel--\x3e\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:viewAccountInformation.branchName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewAccountInformationModel.branchName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),""}function v(e,t){t.buffer.push("\r\n  ")}function y(e,t){var o;return t.buffer.push('\r\n  <br/>\r\n  <div style="float:right;">\r\n    '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"saveAccountStatus",visibleBinding:"isAccountDataAvailable"},hashTypes:{action:"STRING",visibleBinding:"STRING"},hashContexts:{action:e,visibleBinding:e},inverse:S.noop,fn:S.program(23,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"cancelAction",class:"btn-inverse",visibleBinding:"isAccountDataAvailable"},hashTypes:{action:"STRING",class:"STRING",visibleBinding:"STRING"},hashContexts:{action:e,class:e,visibleBinding:e},inverse:S.noop,fn:S.program(25,D,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  </div>\r\n  "),""}function b(e,t){var o,n;t.buffer.push(x((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:viewAccountInformation.save",n):P.call(e,"loc","locale.manageaccount:viewAccountInformation.save",n))))}function D(e,t){var o,n;t.buffer.push(x((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:viewAccountInformation.cancel",n):P.call(e,"loc","locale.manageaccount:viewAccountInformation.cancel",n))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var T,C,I,x=this.escapeExpression,P=a.helperMissing,S=this;return n.buffer.push("<div "),n.buffer.push(x(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:n}))),n.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),n.buffer.push(x((C=a.loc||t&&t.loc,I={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},C?C.call(t,"locale.manageaccount:viewAccountInformation.viewAccountInformationTitle",I):P.call(t,"loc","locale.manageaccount:viewAccountInformation.viewAccountInformationTitle",I)))),n.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/account">&lt;'),n.buffer.push(x((C=a.loc||t&&t.loc,I={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},C?C.call(t,"locale.manageaccount:viewAccountInformation.back",I):P.call(t,"loc","locale.manageaccount:viewAccountInformation.back",I)))),n.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n\r\n  \x3c!--This is Account Information panel--\x3e\r\n  "),T=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageaccount:viewAccountInformation.accountInformation~",isCollapsed:!1,visibleBinding:"isAccountDataAvailable"},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN",visibleBinding:"STRING"},hashContexts:{title:t,isCollapsed:t,visibleBinding:t},inverse:S.noop,fn:S.program(1,s,n),contexts:[t],types:["ID"],data:n}),(T||0===T)&&n.buffer.push(T),n.buffer.push("\r\n\r\n  \x3c!--This is Ageing Information panel--\x3e\r\n  "),T=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageaccount:viewAccountInformation.ageingInformation~",isCollapsed:!1,visibleBinding:"isAccountDataAvailable"},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN",visibleBinding:"STRING"},hashContexts:{title:t,isCollapsed:t,visibleBinding:t},inverse:S.noop,fn:S.program(12,h,n),contexts:[t],types:["ID"],data:n}),(T||0===T)&&n.buffer.push(T),n.buffer.push("\r\n\r\n  \x3c!--This is Payment Details panel--\x3e\r\n  "),T=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageaccount:viewAccountInformation.paymentDetails~",isCollapsedBinding:"viewAccountInformationModel.isPaymentDetails",linksBinding:"collapsibleEditLinks",visibleBinding:"isAccountDataAvailable"},hashTypes:{title:"STRING",isCollapsedBinding:"STRING",linksBinding:"STRING",visibleBinding:"STRING"},hashContexts:{title:t,isCollapsedBinding:t,linksBinding:t,visibleBinding:t},inverse:S.noop,fn:S.program(14,m,n),contexts:[t],types:["ID"],data:n}),(T||0===T)&&n.buffer.push(T),n.buffer.push("\r\n\r\n  "),T=a.if.call(t,"viewAccountInformationModel.statusOfAccount",{hash:{},hashTypes:{},hashContexts:{},inverse:S.program(22,y,n),fn:S.program(20,v,n),contexts:[t],types:["ID"],data:n}),(T||0===T)&&n.buffer.push(T),n.buffer.push("\r\n  "),n.buffer.push(x(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:accountInformationTab.serviceNoDataMessage~",visibleBinding:"noAccountExist"},hashTypes:{text:"STRING",visibleBinding:"STRING"},hashContexts:{text:t,visibleBinding:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push("\r\n</div>"),""}),Ember.TEMPLATES.UpdateFinancialTransactionStatusView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(2,r,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function r(e,t){var o;return t.buffer.push("\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(5,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function i(e,t){var o;return t.buffer.push("\r\n\r\n    "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.managePayments:aprvFinTrans.journalid~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n    "),o=a._triageMustache.call(e,"journalDetailsModel.journalID",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("<br /><br />\r\n\r\n    "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.managePayments:aprvFinTrans.customernumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n    "),o=a._triageMustache.call(e,"journalDetailsModel.customerNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("<br /><br />\r\n\r\n    "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.managePayments:aprvFinTrans.createdate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n    "),o=a._triageMustache.call(e,"journalDetailsModel.createDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("<br /><br />\r\n\r\n    "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.managePayments:aprvFinTrans.amountpaid~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n    "),o=a._triageMustache.call(e,"journalDetailsModel.amountPaid",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("<br /><br />\r\n\r\n    "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.managePayments:aprvFinTrans.ledgeraccount~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n    "),o=a._triageMustache.call(e,"journalDetailsModel.ledgerAccount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("<br /><br />\r\n\r\n    "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.managePayments:aprvFinTrans.comment~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n    "),o=a._triageMustache.call(e,"journalDetailsModel.requestComment",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("<br /><br />\r\n    "),""}function l(e,t){var o;return t.buffer.push("\r\n    "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.managePayments:aprvFinTrans.accountnumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n    "),o=a._triageMustache.call(e,"journalDetailsModel.accountNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("<br /><br />\r\n\r\n    "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.managePayments:aprvFinTrans.requestby~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n    "),o=a._triageMustache.call(e,"journalDetailsModel.requestedBy",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("<br /><br />\r\n\r\n    "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.managePayments:aprvFinTrans.transactiontype~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},
hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n    "),o=a._triageMustache.call(e,"journalDetailsModel.transactionType",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("<br /><br />\r\n\r\n    "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.managePayments:aprvFinTrans.reversedtransaction~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n    "),o=a._triageMustache.call(e,"journalDetailsModel.reversedTransaction",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("<br /><br />\r\n\r\n    "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.managePayments:aprvFinTrans.requeststatus~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n    "),o=a._triageMustache.call(e,"journalDetailsModel.transactionStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("<br /><br />\r\n    "),""}function c(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(8,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function u(e,t){var o;return t.buffer.push("\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(9,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(11,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function d(e,t){var o;return t.buffer.push("\r\n    "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.managePayments:aprvFinTrans.PayerName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n    "),o=a._triageMustache.call(e,"journalDetailsModel.PayerName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("<br /><br />\r\n\r\n    "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.managePayments:aprvFinTrans.BankName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n    "),o=a._triageMustache.call(e,"journalDetailsModel.BankName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("<br /><br />\r\n\r\n    "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.managePayments:aprvFinTrans.BankAccountNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n    "),o=a._triageMustache.call(e,"journalDetailsModel.BankAccountNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("<br /><br />\r\n\r\n    "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.managePayments:aprvFinTrans.BankBranchId~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n    "),o=a._triageMustache.call(e,"journalDetailsModel.BankBranchId",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("<br /><br />\r\n    "),""}function h(e,t){var o;return t.buffer.push("\r\n    "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.managePayments:aprvFinTrans.PayerIdNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n    "),o=a._triageMustache.call(e,"journalDetailsModel.PayerIdNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("<br /><br />\r\n\r\n    "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.managePayments:aprvFinTrans.BankAccountTypeDescription~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n    "),o=a._triageMustache.call(e,"journalDetailsModel.BankAccountTypeDescription",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("<br /><br />\r\n\r\n    "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.managePayments:aprvFinTrans.BankBranchName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n    "),o=a._triageMustache.call(e,"journalDetailsModel.BankBranchName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("<br /><br />\r\n\r\n    "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.managePayments:aprvFinTrans.AHVStatus~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n    "),o=a._triageMustache.call(e,"journalDetailsModel.AHVStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("<br /><br />\r\n    "),""}function m(e,t){var o,n,s;return t.buffer.push('\r\n    <div class="table-responsive">\r\n        <table width="100%" class="table table-bordered komodo-datagrid">\r\n            <thead>\r\n                <tr>\r\n                    <th width="40%">'),t.buffer.push(T((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.managePayments:aprvFinTrans.document",s):I.call(e,"loc","locale.managePayments:aprvFinTrans.document",s)))),t.buffer.push('</th>\r\n                    <th width="15%">'),t.buffer.push(T((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.managePayments:aprvFinTrans.documentType",s):I.call(e,"loc","locale.managePayments:aprvFinTrans.documentType",s)))),t.buffer.push('</th>\r\n                    <th width="10%">'),t.buffer.push(T((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.managePayments:aprvFinTrans.documentNumber",s):I.call(e,"loc","locale.managePayments:aprvFinTrans.documentNumber",s)))),t.buffer.push('</th>\r\n                    <th width="10%">'),t.buffer.push(T((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.managePayments:aprvFinTrans.reference",s):I.call(e,"loc","locale.managePayments:aprvFinTrans.reference",s)))),t.buffer.push('</th>\r\n                    <th width="10%">'),t.buffer.push(T((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.managePayments:aprvFinTrans.referenceNumber",s):I.call(e,"loc","locale.managePayments:aprvFinTrans.referenceNumber",s)))),t.buffer.push('</th>\r\n                    <th width="10%">'),t.buffer.push(T((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.managePayments:aprvFinTrans.action",s):I.call(e,"loc","locale.managePayments:aprvFinTrans.action",s)))),t.buffer.push("</th>\r\n                </tr>\r\n            </thead>\r\n            "),o=a.each.call(e,"item","in","supportDocument.UploadedDocumentsDataGrid",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(14,p,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </table>\r\n    </div>\r\n    "),""}function p(e,t){var o;return t.buffer.push("\r\n            <tbody>\r\n                <tr>\r\n                    <td>\r\n                        "),o=a._triageMustache.call(e,"item.Actions",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </td>\r\n                    <td>\r\n                        "),o=a._triageMustache.call(e,"item.DocumentType",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </td>\r\n                    <td>\r\n                        "),o=a._triageMustache.call(e,"item.DocumentNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </td>\r\n                    <td>\r\n                        "),o=a._triageMustache.call(e,"item.Reference",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </td>\r\n                    <td>\r\n                        "),o=a._triageMustache.call(e,"item.ReferenceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </td>\r\n                    <td>\r\n                        "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{tabindex:"1",contentBinding:"item",action:"viewDocs",size:"xs",type:"success"},hashTypes:{tabindex:"STRING",contentBinding:"STRING",action:"STRING",size:"STRING",type:"STRING"},hashContexts:{tabindex:e,contentBinding:e,action:e,size:e,type:e},inverse:C.noop,fn:C.program(15,f,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n            "),""}function f(e,t){var o,n;t.buffer.push(T((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.managePayments:aprvFinTrans.view",n):I.call(e,"loc","locale.managePayments:aprvFinTrans.view",n))))}function g(e,t){var o,n;t.buffer.push(T((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.managePayments:aprvFinTrans.approve",n):I.call(e,"loc","locale.managePayments:aprvFinTrans.approve",n))))}function v(e,t){var o,n;t.buffer.push(T((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.managePayments:aprvFinTrans.reject",n):I.call(e,"loc","locale.managePayments:aprvFinTrans.reject",n))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var y,b,D,T=this.escapeExpression,C=this,I=a.helperMissing;return n.buffer.push('<div class="no-banner-padding">\r\n    <div style="width:100%;">\r\n        <span class="komodo-heading">'),n.buffer.push(T((b=a.loc||t&&t.loc,D={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},b?b.call(t,"locale.managePayments:aprvFinTrans.heading",D):I.call(t,"loc","locale.managePayments:aprvFinTrans.heading",D)))),n.buffer.push('</span>\r\n        <span class="float-right">\r\n            <b>\r\n                '),n.buffer.push(T(a.view.call(t,"Komodo.Controls.Link",{hash:{action:"transitionBack",tabindex:"18",text:"<BACK",href:"#/pendingJournals"},hashTypes:{action:"STRING",tabindex:"STRING",text:"STRING",href:"STRING"},hashContexts:{action:t,tabindex:t,text:t,href:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push("\r\n            </b>\r\n        </span>\r\n    </div>\r\n    <hr />\r\n    "),y=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.managePayments:aprvFinTrans.heading~",isCollapsedBinding:"false"},hashTypes:{title:"STRING",isCollapsedBinding:"STRING"},hashContexts:{title:t,isCollapsedBinding:t},inverse:C.noop,fn:C.program(1,s,n),contexts:[t],types:["ID"],data:n}),(y||0===y)&&n.buffer.push(y),n.buffer.push("\r\n\r\n    "),y=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"Banking Details",isCollapsedBinding:"false"},hashTypes:{title:"STRING",isCollapsedBinding:"STRING"},hashContexts:{title:t,isCollapsedBinding:t},inverse:C.noop,fn:C.program(7,c,n),contexts:[t],types:["ID"],data:n}),(y||0===y)&&n.buffer.push(y),n.buffer.push("\r\n\r\n    "),y=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"Supporting Documents",isCollapsedBinding:"false"},hashTypes:{title:"STRING",isCollapsedBinding:"STRING"},hashContexts:{title:t,isCollapsedBinding:t},inverse:C.noop,fn:C.program(13,m,n),contexts:[t],types:["ID"],data:n}),(y||0===y)&&n.buffer.push(y),n.buffer.push('\r\n    <br />\r\n    <div style="float:right;">\r\n        '),y=a.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"2",action:"approve",visibleBinding:"approveFinancialTransaction.disableForViewOnlyUser"},hashTypes:{tabindex:"STRING",action:"STRING",visibleBinding:"STRING"},hashContexts:{tabindex:t,action:t,visibleBinding:t},inverse:C.noop,fn:C.program(17,g,n),contexts:[t],types:["ID"],data:n}),(y||0===y)&&n.buffer.push(y),n.buffer.push("\r\n        "),y=a.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"3",action:"reject",type:"danger"},hashTypes:{tabindex:"STRING",action:"STRING",type:"STRING"},hashContexts:{tabindex:t,action:t,type:t},inverse:C.noop,fn:C.program(19,v,n),contexts:[t],types:["ID"],data:n}),(y||0===y)&&n.buffer.push(y),n.buffer.push("\r\n    </div>\r\n</div>"),""}),Ember.TEMPLATES.TransferPaymentView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){return t.buffer.push("\r\n    "),t.buffer.push(D(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"transferPaymentModel.pendingRefundNotification",class:"retrieve-records"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function r(e,t){var o,n,s;return t.buffer.push('\r\n    <br />\r\n    <table id="tblPaymentSearch" class="table table-bordered komodo-datagrid">\r\n        <tr>\r\n            <th style="width:100px;">'),t.buffer.push(D((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.managePayments:interAccount.paymentDate",s):C.call(e,"loc","locale.managePayments:interAccount.paymentDate",s)))),t.buffer.push('</th>\r\n            <th style="width:100px;">'),t.buffer.push(D((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.managePayments:interAccount.finTransType",s):C.call(e,"loc","locale.managePayments:interAccount.finTransType",s)))),t.buffer.push('</th>\r\n            <th style="width:100px;">'),t.buffer.push(D((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.managePayments:interAccount.accountDescr",s):C.call(e,"loc","locale.managePayments:interAccount.accountDescr",s)))),t.buffer.push('</th>\r\n            <th style="width:100px;">'),t.buffer.push(D((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.managePayments:interAccount.amount",s):C.call(e,"loc","locale.managePayments:interAccount.amount",s)))),t.buffer.push('</th>\r\n            <th style="width:100px;">'),t.buffer.push(D((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.managePayments:interAccount.transfer",s):C.call(e,"loc","locale.managePayments:interAccount.transfer",s)))),t.buffer.push("</th>\r\n        </tr>\r\n        "),o=a.each.call(e,"item","in","gridData",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(4,i,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n    </table>\r\n\r\n    <div align="left">\r\n        '),t.buffer.push(D(a.view.call(e,"Komodo.Controls.Pager",{hash:{mode:"virtual",contentLengthBinding:"paymentsRecords",pageSelectedAction:"pageSelected",itemsPerPage:"5",visiblePageCount:"3"},hashTypes:{mode:"STRING",contentLengthBinding:"STRING",pageSelectedAction:"STRING",itemsPerPage:"STRING",visiblePageCount:"STRING"},hashContexts:{mode:e,contentLengthBinding:e,pageSelectedAction:e,itemsPerPage:e,visiblePageCount:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    </div>\r\n    \r\n    "),o=a.if.call(e,"transferPaymentModel.isFTSelected",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(6,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function i(e,t){var o;return t.buffer.push("\r\n        <tr>\r\n            <td>"),o=a._triageMustache.call(e,"item.dateOfPayment",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n            <td>"),o=a._triageMustache.call(e,"item.financialTransactionType",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n            <td>"),o=a._triageMustache.call(e,"item.accountDescription",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n            <td>"),o=a._triageMustache.call(e,"item.amount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n            <td>\r\n                "),t.buffer.push(D(a.view.call(e,"Komodo.Controls.CoreRadioButton",{hash:{name:"paymentRadioButtons",valueBinding:"transferPaymentModel.selectedPayment",checkedBinding:"item.isCheckboxSelected",optionValueBinding:"_view.contentIndex"},hashTypes:{name:"STRING",valueBinding:"STRING",checkedBinding:"STRING",optionValueBinding:"STRING"},hashContexts:{name:e,valueBinding:e,checkedBinding:e,optionValueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            </td>\r\n        </tr>\r\n        "),""}function l(e,t){var o;return t.buffer.push("\r\n    <hr />\r\n    <br />\r\n    \x3c!--From Customer Details--\x3e\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(7,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    <br />\r\n    <hr />\r\n\r\n    \x3c!--When search button is clicked--\x3e\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(12,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function c(e,t){var o;return t.buffer.push("\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(8,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(10,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function u(e,t){return t.buffer.push("\r\n    "),t.buffer.push(D(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.managePayments:allocPay.customerNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(D(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"transferPaymentModel.fromCustomerNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    <br />\r\n    "),t.buffer.push(D(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.managePayments:allocPay.transferreableAmount~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(D(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"transferPaymentModel.remainingFtFunds"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function d(e,t){return t.buffer.push("\r\n    "),t.buffer.push(D(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.managePayments:interAccount.fromAccount~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(D(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"transferPaymentModel.fromAccountNumberWithDescription"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function h(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(13,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(15,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function m(e,t){return t.buffer.push("\r\n    "),t.buffer.push(D(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"3",valueBinding:"transferPaymentModel.toAccountNumber",contentBinding:"toAccountNumberListFile",validatorBinding:"validators.toAccountNumberValidator",optionLabelPath:"content.Key",optionValuePath:"content.Value",label:"~locale.managePayments:interAccount.toAccount~",prompt:"~locale.managePayments:allocPay.accountNumberPrompt~",class:"info-heading"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",contentBinding:"STRING",validatorBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",label:"STRING",prompt:"STRING",class:"STRING"},hashContexts:{tabindex:e,valueBinding:e,contentBinding:e,validatorBinding:e,optionLabelPath:e,optionValuePath:e,label:e,prompt:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(D(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"Reason For Capture",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(D(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"transferPaymentModel.reasonForCapture"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),""}function p(e,t){return t.buffer.push("\r\n    "),t.buffer.push(D(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"4",label:"~locale.managePayments:interAccount.amount~",valueBinding:"transferPaymentModel.amount",validatorBinding:"validators.amountValidator",class:"info-heading"},hashTypes:{tabindex:"STRING",label:"STRING",valueBinding:"STRING",validatorBinding:"STRING",class:"STRING"},hashContexts:{tabindex:e,label:e,valueBinding:e,validatorBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(D(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.managePayments:allocPay.comment~",class:"info-heading",validatorBinding:"validators.commentValidator"},hashTypes:{text:"STRING",class:"STRING",validatorBinding:"STRING"},hashContexts:{text:e,class:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(D(a.view.call(e,"Komodo.Controls.CoreTextArea",{hash:{valueBinding:"transferPaymentModel.comment",rows:"5",tabindex:"5",validatorBinding:"validators.commentValidator"},hashTypes:{valueBinding:"STRING",rows:"STRING",tabindex:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,rows:e,tabindex:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(D(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.commentValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function f(e,t){var o,n;t.buffer.push(D((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.managePayments:interAccount.transfer",n):C.call(e,"loc","locale.managePayments:interAccount.transfer",n))))}function g(e,t){var o,n;t.buffer.push(D((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.managePayments:interAccount.cancel",n):C.call(e,"loc","locale.managePayments:interAccount.cancel",n))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var v,y,b,D=this.escapeExpression,T=this,C=a.helperMissing;return n.buffer.push("<div "),n.buffer.push(D(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:n}))),n.buffer.push('>\r\n    <div style="width:100%;">\r\n        <span class="komodo-heading">'),n.buffer.push(D((y=a.loc||t&&t.loc,b={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},y?y.call(t,"locale.managePayments:interAccount.heading",b):C.call(t,"loc","locale.managePayments:interAccount.heading",b)))),n.buffer.push('</span>\r\n        <span class="float-right">\r\n            <b>\r\n                <a href="#/managePayments">&lt;'),n.buffer.push(D((y=a.loc||t&&t.loc,b={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},y?y.call(t,"locale.managePayments:interAccount.back",b):C.call(t,"loc","locale.managePayments:interAccount.back",b)))),n.buffer.push("</a>\r\n            </b>\r\n        </span>\r\n    </div>\r\n    <hr />\r\n\r\n    "),v=a.if.call(t,"disableTransferPaymentButton",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(1,s,n),contexts:[t],types:["ID"],data:n}),(v||0===v)&&n.buffer.push(v),n.buffer.push("\r\n    <br />\r\n    \x3c!--Collapsed Sreen 2 Starts--\x3e\r\n    "),v=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.managePayments:interAccount.listOfPayments~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:T.noop,fn:T.program(3,r,n),contexts:[t],types:["ID"],data:n}),(v||0===v)&&n.buffer.push(v),n.buffer.push('\r\n    <br />\r\n    \x3c!--Collapsed Sreen 2 ends--\x3e\r\n    \x3c!--This is Transfer Payment Button--\x3e\r\n    <div style="float:right;">\r\n        '),v=a.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"6",action:"transfer",disableBinding:"disableTransferPaymentButton"},hashTypes:{tabindex:"STRING",action:"STRING",disableBinding:"STRING"},hashContexts:{tabindex:t,action:t,disableBinding:t},inverse:T.noop,fn:T.program(17,f,n),contexts:[t],types:["ID"],data:n}),(v||0===v)&&n.buffer.push(v),n.buffer.push("\r\n        "),v=a.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"7",action:"cancel",class:"btn-inverse"},hashTypes:{tabindex:"STRING",action:"STRING",class:"STRING"},hashContexts:{tabindex:t,action:t,class:t},inverse:T.noop,fn:T.program(19,g,n),contexts:[t],types:["ID"],data:n}),(v||0===v)&&n.buffer.push(v),n.buffer.push("\r\n    </div>\r\n</div>\r\n"),""}),Ember.TEMPLATES.StatementDetailsView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o;return t.buffer.push("\r\n  "),o=a.if.call(e,"gridData.length",{hash:{},hashTypes:{},hashContexts:{},inverse:A.noop,fn:A.program(2,r,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function r(e,t){var o;return t.buffer.push('\r\n  <table width="100%"  id="statementInfo" class="table table-bordered komodo-datagrid">\r\n    <thead>\r\n      <tr>\r\n        '),o=a.if.call(e,"showPayGrpAccount",{hash:{},hashTypes:{},hashContexts:{},inverse:A.program(5,l,t),fn:A.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      "),o=a.each.call(e,"item","in","gridData",{hash:{},hashTypes:{},hashContexts:{},inverse:A.noop,fn:A.program(7,c,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </tbody>\r\n  </table>\r\n  "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.TablePager",{hash:{tableId:"statementInfo",contentBinding:"gridData",itemsPerPage:"10",headerRows:"1"},hashTypes:{tableId:"STRING",contentBinding:"STRING",itemsPerPage:"STRING",headerRows:"STRING"},hashContexts:{tableId:e,contentBinding:e,itemsPerPage:e,headerRows:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function i(e,t){var o,n;return t.buffer.push('\r\n        <th width="22%">'),t.buffer.push(S((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.statements:statement.createDate",n):P.call(e,"loc","locale.statements:statement.createDate",n)))),t.buffer.push('</th>\r\n        <th width="22%">'),t.buffer.push(S((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.statements:statement.from",n):P.call(e,"loc","locale.statements:statement.from",n)))),t.buffer.push('</th>\r\n        <th width="22%">'),t.buffer.push(S((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.statements:statement.to",n):P.call(e,"loc","locale.statements:statement.to",n)))),t.buffer.push('</th>\r\n        <th width="22%">'),t.buffer.push(S((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.statements:statement.paygroup",n):P.call(e,"loc","locale.statements:statement.paygroup",n)))),t.buffer.push('</th>\r\n        <th width="12%">'),t.buffer.push(S((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.statements:invoice.actions",n):P.call(e,"loc","locale.statements:invoice.actions",n)))),t.buffer.push("</th>\r\n        "),""}function l(e,t){var o,n;return t.buffer.push('\r\n          <th width="29%">'),t.buffer.push(S((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.statements:statement.createDate",n):P.call(e,"loc","locale.statements:statement.createDate",n)))),t.buffer.push('</th>\r\n          <th width="29%">'),t.buffer.push(S((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.statements:statement.from",n):P.call(e,"loc","locale.statements:statement.from",n)))),t.buffer.push('</th>\r\n          <th width="29%">'),t.buffer.push(S((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.statements:statement.to",n):P.call(e,"loc","locale.statements:statement.to",n)))),t.buffer.push('</th>\r\n          <th width="13%">'),
t.buffer.push(S((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.statements:invoice.actions",n):P.call(e,"loc","locale.statements:invoice.actions",n)))),t.buffer.push("</th>\r\n        "),""}function c(e,t){var o;return t.buffer.push("\r\n      <tr>\r\n        <td>"),o=a._triageMustache.call(e,"item.createdDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        <td>"),o=a._triageMustache.call(e,"item.fromDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        <td>"),o=a._triageMustache.call(e,"item.toDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n          "),o=a.if.call(e,"showPayGrpAccount",{hash:{},hashTypes:{},hashContexts:{},inverse:A.noop,fn:A.program(8,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        <td>\r\n          <table>\r\n            <tr>\r\n              <td>"),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"viewAction",disableBinding:"item.disableButton",contentBinding:"item",tabindex:"45"},hashTypes:{action:"STRING",disableBinding:"STRING",contentBinding:"STRING",tabindex:"STRING"},hashContexts:{action:e,disableBinding:e,contentBinding:e,tabindex:e},inverse:A.noop,fn:A.program(10,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n              <td>"),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"emailAction",disableBinding:"item.disableButton",contentBinding:"item",tabindex:"45"},hashTypes:{action:"STRING",disableBinding:"STRING",contentBinding:"STRING",tabindex:"STRING"},hashContexts:{action:e,disableBinding:e,contentBinding:e,tabindex:e},inverse:A.noop,fn:A.program(12,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n            </tr>\r\n          </table>\r\n        </td>\r\n      </tr>\r\n      "),""}function u(e,t){var o;return t.buffer.push("\r\n          <td>"),o=a._triageMustache.call(e,"item.accountname",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n          "),""}function d(e,t){var o,n;t.buffer.push(S((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.statements:invoice.view",n):P.call(e,"loc","locale.statements:invoice.view",n))))}function h(e,t){var o,n;t.buffer.push(S((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.statements:invoice.email",n):P.call(e,"loc","locale.statements:invoice.email",n))))}function m(e,t){var o;return t.buffer.push("\r\n    "),o=a.if.call(e,"thgridData.length",{hash:{},hashTypes:{},hashContexts:{},inverse:A.noop,fn:A.program(15,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function p(e,t){var o,n,s;return t.buffer.push('\r\n    <table width="100%" id="transactionHistoryInfo" class="table table-bordered komodo-datagrid">\r\n        <thead>\r\n            <tr>\r\n                <th width="29%">'),t.buffer.push(S((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.statements:statement.createDate",s):P.call(e,"loc","locale.statements:statement.createDate",s)))),t.buffer.push('</th>\r\n                <th width="29%">'),t.buffer.push(S((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.statements:statement.from",s):P.call(e,"loc","locale.statements:statement.from",s)))),t.buffer.push('</th>\r\n                <th width="29%">'),t.buffer.push(S((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.statements:statement.to",s):P.call(e,"loc","locale.statements:statement.to",s)))),t.buffer.push('</th>\r\n                <th width="13%">'),t.buffer.push(S((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.statements:invoice.actions",s):P.call(e,"loc","locale.statements:invoice.actions",s)))),t.buffer.push("</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            "),o=a.each.call(e,"item","in","thgridData",{hash:{},hashTypes:{},hashContexts:{},inverse:A.noop,fn:A.program(16,f,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </tbody>\r\n    </table>\r\n    "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.TablePager",{hash:{tableId:"transactionHistoryInfo",contentBinding:"thgridData",itemsPerPage:"10",headerRows:"1"},hashTypes:{tableId:"STRING",contentBinding:"STRING",itemsPerPage:"STRING",headerRows:"STRING"},hashContexts:{tableId:e,contentBinding:e,itemsPerPage:e,headerRows:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function f(e,t){var o;return t.buffer.push("\r\n            <tr>\r\n                <td>"),o=a._triageMustache.call(e,"item.createdDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                <td>"),o=a._triageMustache.call(e,"item.fromDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                <td>"),o=a._triageMustache.call(e,"item.toDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                <td>\r\n                    <table>\r\n                        <tr>\r\n                            <td>"),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"viewthAction",disableBinding:"item.disableButton",contentBinding:"item",tabindex:"45"},hashTypes:{action:"STRING",disableBinding:"STRING",contentBinding:"STRING",tabindex:"STRING"},hashContexts:{action:e,disableBinding:e,contentBinding:e,tabindex:e},inverse:A.noop,fn:A.program(10,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                            <td>"),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"emailthAction",disableBinding:"item.disableButton",contentBinding:"item",tabindex:"45"},hashTypes:{action:"STRING",disableBinding:"STRING",contentBinding:"STRING",tabindex:"STRING"},hashContexts:{action:e,disableBinding:e,contentBinding:e,tabindex:e},inverse:A.noop,fn:A.program(12,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                        </tr>\r\n                    </table>\r\n                </td>\r\n            </tr>\r\n            "),""}function g(e,t){var o;return t.buffer.push('\r\n   <table>\r\n    <tr>\r\n      <td width="20%">\r\n        '),t.buffer.push(S(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{valueBinding:"data.fromDate",label:"~locale.statements:statement.from~",validatorBinding:"validators.fromDateValidator"},hashTypes:{valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n      <td width="20%">\r\n        '),t.buffer.push(S(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{valueBinding:"data.toDate",label:"~locale.statements:statement.to~",validatorBinding:"validators.toDateValidator"},hashTypes:{valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n      <td width="20%">'),t.buffer.push(S(a.view.call(e,"Komodo.Controls.Select",{hash:{label:"~locale.statements:statement.accountNumber~",prompt:"~locale.statements:statement.accountNumberPrompt~",valueBinding:"data.accountNumberSelected",contentBinding:"allAccounts",optionLabelPath:"content",optionValuePath:"content",validatorBinding:"validators.accountNumberSelectedValidator"},hashTypes:{label:"STRING",prompt:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",validatorBinding:"STRING"},hashContexts:{label:e,prompt:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(' </td>\r\n        <td width="10%">'),t.buffer.push(S(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{tabindex:"2",checkedBinding:"data.isCharge"},hashTypes:{tabindex:"STRING",checkedBinding:"STRING"},hashContexts:{tabindex:e,checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(S(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.statements:statement.chargebox~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(' </td>\r\n        <td width="10%">'),t.buffer.push(S(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{tabindex:"2",checkedBinding:"data.isPayment"},hashTypes:{tabindex:"STRING",checkedBinding:"STRING"},hashContexts:{tabindex:e,checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(S(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.statements:statement.paymentchkbox~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(' </td>\r\n        <td width="20%">'),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"createTransaction",tabindex:"45"},hashTypes:{action:"STRING",tabindex:"STRING"},hashContexts:{action:e,tabindex:e},inverse:A.noop,fn:A.program(19,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </td>\r\n    </tr>\r\n    \r\n  </table>\r\n  "),""}function v(e,t){var o,n;t.buffer.push(S((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.statements:statement.useCaseTitle",n):P.call(e,"loc","locale.statements:statement.useCaseTitle",n))))}function y(e,t){var o;return t.buffer.push('\r\n    <table>\r\n        <tr>\r\n            <td width="40%">\r\n                '),t.buffer.push(S(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{valueBinding:"data.fromDate",label:"~locale.statements:statement.from~",validatorBinding:"validators.fromDateValidator"},hashTypes:{valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n            </td>\r\n            <td width="40%">\r\n                '),t.buffer.push(S(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{valueBinding:"data.toDate",label:"~locale.statements:statement.to~",validatorBinding:"validators.toDateValidator"},hashTypes:{valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n            </td>\r\n            <td width="20%">'),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"createStatement",tabindex:"45"},hashTypes:{action:"STRING",tabindex:"STRING"},hashContexts:{action:e,tabindex:e},inverse:A.noop,fn:A.program(22,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </td>\r\n        </tr>\r\n\r\n    </table>\r\n    "),""}function b(e,t){var o,n;t.buffer.push(S((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.statements:statement.useCaseTitlecreateView",n):P.call(e,"loc","locale.statements:statement.useCaseTitlecreateView",n))))}function D(e,t){var o;return t.buffer.push('\r\n    <table>\r\n        <tr>\r\n            <td width="30%">\r\n                '),t.buffer.push(S(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{valueBinding:"data.asfromDate",label:"~locale.statements:statement.from~",validatorBinding:"validators.asfromDateValidator"},hashTypes:{valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n            </td>\r\n            <td width="30%">\r\n                '),t.buffer.push(S(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{valueBinding:"data.astoDate",label:"~locale.statements:statement.to~",validatorBinding:"validators.astoDateValidator"},hashTypes:{valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n            </td>\r\n            <td width="20%">\r\n                '),t.buffer.push(S(a.view.call(e,"Komodo.Controls.Select",{hash:{label:"~locale.statements:statement.accountNumber~",prompt:"~locale.statements:statement.accountNumberPrompt~",valueBinding:"data.asaccountNumberSelected",contentBinding:"allAccounts",optionLabelPath:"content",optionValuePath:"content",validatorBinding:"validators.asaccountNumberSelectedValidator",visibleBinding:"controlsVisibleAccountsList"},hashTypes:{label:"STRING",prompt:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",validatorBinding:"STRING",visibleBinding:"STRING"},hashContexts:{label:e,prompt:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,validatorBinding:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(' \r\n            </td>\r\n            <td width="20%">\r\n                '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"generateAdhocStatement",tabindex:"45"},hashTypes:{action:"STRING",tabindex:"STRING"},hashContexts:{action:e,tabindex:e},inverse:A.noop,fn:A.program(25,T,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    "),""}function T(e,t){var o,n;t.buffer.push(S((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.statements:statement.generateAdHocStatement",n):P.call(e,"loc","locale.statements:statement.generateAdHocStatement",n))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var C,I,x,P=a.helperMissing,S=this.escapeExpression,A=this;return n.buffer.push('<div class="customer-page-padding">\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),n.buffer.push(S((I=a.loc||t&&t.loc,x={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},I?I.call(t,"locale.statements:statement.statement",x):P.call(t,"loc","locale.statements:statement.statement",x)))),n.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/home">&lt;'),n.buffer.push(S((I=a.loc||t&&t.loc,x={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},I?I.call(t,"locale.associateProducts:associateProducts.back",x):P.call(t,"loc","locale.associateProducts:associateProducts.back",x)))),n.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n   \r\n  "),C=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.statements:statement.pageTitle~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:A.noop,fn:A.program(1,s,n),contexts:[t],types:["ID"],data:n}),(C||0===C)&&n.buffer.push(C),n.buffer.push("\r\n    \x3c!-- View Transaction History--\x3e\r\n  "),C=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.statements:statement.viewTransactionHistory~",isCollapsed:!1,visibleBinding:"controlsVisibleth"},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN",visibleBinding:"STRING"},hashContexts:{title:t,isCollapsed:t,visibleBinding:t},inverse:A.noop,fn:A.program(14,m,n),contexts:[t],types:["ID"],data:n}),(C||0===C)&&n.buffer.push(C),n.buffer.push("\r\n   \x3c!-- Generate Transaction History--\x3e\r\n    "),C=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.statements:statement.generateTransactionHistory~",isCollapsed:!1,visibleBinding:"controlsVisibleth"},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN",visibleBinding:"STRING"},hashContexts:{title:t,isCollapsed:t,visibleBinding:t},inverse:A.noop,fn:A.program(18,g,n),contexts:[t],types:["ID"],data:n}),(C||0===C)&&n.buffer.push(C),n.buffer.push("\r\n\r\n    \x3c!-- Create Statement --\x3e\r\n    "),C=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.statements:statement.createStatement~",isCollapsed:!1,visibleBinding:"controlsVisiblecreateView"},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN",visibleBinding:"STRING"},hashContexts:{title:t,isCollapsed:t,visibleBinding:t},inverse:A.noop,fn:A.program(21,y,n),contexts:[t],types:["ID"],data:n}),(C||0===C)&&n.buffer.push(C),n.buffer.push("\r\n   \r\n    \x3c!-- Create AdHoc Statement --\x3e\r\n    "),C=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.statements:statement.createAdHocStatement~",isCollapsed:!1,visibleBinding:"controlsVisiblegenerateStatement"},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN",visibleBinding:"STRING"},hashContexts:{title:t,isCollapsed:t,visibleBinding:t},inverse:A.noop,fn:A.program(24,D,n),contexts:[t],types:["ID"],data:n}),(C||0===C)&&n.buffer.push(C),n.buffer.push("\r\n\r\n</div>\r\n\r\n\r\n"),""}),Ember.TEMPLATES.SettleViaAdhocDebitOrderView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o;return t.buffer.push("\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top "},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:h.noop,fn:h.program(2,r,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top "},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:h.noop,fn:h.program(4,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n\r\n  "),""}function r(e,t){var o;return t.buffer.push("\r\n  <br /><br />\r\n  "),t.buffer.push(d(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:manageDevicePaymentPlan.amountSettle~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br />\r\n  "),o=a._triageMustache.call(e,"view.context.settlePlanPopupDetails.totalAdhocAmountToSettle",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <br /><br />\r\n  "),t.buffer.push(d(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:manageDevicePaymentPlan.accountHolderId~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),o=a._triageMustache.call(e,"view.context.settlePlanPopupDetails.adhocAccountHolderId",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <br /><br />\r\n  "),t.buffer.push(d(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:manageDevicePaymentPlan.accountType~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),o=a._triageMustache.call(e,"view.context.settlePlanPopupDetails.bankAdhocAccType",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <br/><br />\r\n  "),t.buffer.push(d(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:manageDevicePaymentPlan.branchName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),o=a._triageMustache.call(e,"view.context.settlePlanPopupDetails.adhocBranchName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <br/><br />\r\n  "),t.buffer.push(d(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{valueBinding:"view.context.settlePlanPopupDetails.boundAdhocLowerDate",validatorBinding:"view.context.validators.boundAdhocLowerDateValidator",tabindex:"1",label:"~locale.manageAccount.paymentPlan:manageDevicePaymentPlan.adhocDate~"},hashTypes:{valueBinding:"STRING",validatorBinding:"STRING",tabindex:"STRING",label:"STRING"},hashContexts:{valueBinding:e,validatorBinding:e,tabindex:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function i(e,t){var o;return t.buffer.push("\r\n  <br /><br />\r\n  "),t.buffer.push(d(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:manageDevicePaymentPlan.fullName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),o=a._triageMustache.call(e,"view.context.settlePlanPopupDetails.accountHolderNameForSettle",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <br/><br />\r\n  "),t.buffer.push(d(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:manageDevicePaymentPlan.bankName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),o=a._triageMustache.call(e,"view.context.settlePlanPopupDetails.adhocBankName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <br/><br />\r\n  "),t.buffer.push(d(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:manageDevicePaymentPlan.paymentPlanAccount~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),o=a._triageMustache.call(e,"view.context.settlePlanPopupDetails.settleAccountNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <br/><br />\r\n  "),t.buffer.push(d(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:manageDevicePaymentPlan.branchCode~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),o=a._triageMustache.call(e,"view.context.settlePlanPopupDetails.adhocBranchCode",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <br /><br />\r\n  "),""}function l(e,t){var o,n;return t.buffer.push("\r\n    "),t.buffer.push(d((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.submitAdhocPaymentReq",n):m.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.submitAdhocPaymentReq",n)))),""}function c(e,t){var o,n;return t.buffer.push("\r\n    "),t.buffer.push(d((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.cancelAdhocPaymentReq",n):m.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.cancelAdhocPaymentReq",n)))),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var u,d=this.escapeExpression,h=this,m=a.helperMissing;return n.buffer.push('<div class="modal-max-size" style="width:550px" >\r\n  <div>\r\n  '),u=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:h.noop,fn:h.program(1,s,n),contexts:[t],types:["ID"],data:n}),(u||0===u)&&n.buffer.push(u),n.buffer.push('\r\n</div>\r\n  \r\n<br />\r\n  <div style="float:right;">\r\n\r\n    '),u=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"onSubmitAdhocPaymentReq",disabledBinding:"view.context.settlePlanPopupDetails.isAdhocPaymentReqDisabled"},hashTypes:{action:"STRING",disabledBinding:"STRING"},hashContexts:{action:t,disabledBinding:t},inverse:h.noop,fn:h.program(6,l,n),contexts:[t],types:["ID"],data:n}),(u||0===u)&&n.buffer.push(u),n.buffer.push("\r\n\r\n    "),u=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"onCancelAdhocPaymentReq"},hashTypes:{action:"STRING"},hashContexts:{action:t},inverse:h.noop,fn:h.program(8,c,n),contexts:[t],types:["ID"],data:n}),(u||0===u)&&n.buffer.push(u),n.buffer.push("\r\n\r\n  </div>\r\n</div>"),""}),Ember.TEMPLATES.SearchPromptView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){t.buffer.push("Search")}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var r,i=this.escapeExpression,l=this;return n.buffer.push('<div style="display: table; height: 200px;width:300px; #position: relative; overflow: hidden;">\r\n  <div style="#position: absolute; #top: 50%; display: table-cell; vertical-align: middle;">\r\n    \x3c!--This is case information view--\x3e\r\n    <table width="100%">\r\n      <tr>\r\n        <td width="70%">'),n.buffer.push(i(a.view.call(t,"Komodo.Controls.TextField",{hash:{valueBinding:"searchPromptModel.customerUID"},hashTypes:{valueBinding:"STRING"},hashContexts:{valueBinding:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push('</td>\r\n        <td width="20%">'),r=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"searchCustomer",tabindex:"1"},hashTypes:{action:"STRING",tabindex:"STRING"},hashContexts:{action:t,tabindex:t},inverse:l.noop,fn:l.program(1,s,n),contexts:[t],types:["ID"],data:n}),(r||0===r)&&n.buffer.push(r),n.buffer.push("</td>\r\n      </tr>\r\n    </table>\r\n  </div>\r\n</div>\r\n"),""}),Ember.TEMPLATES.ReverseFinancialTransactionView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:C.noop,fn:C.program(2,r,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function r(e,t){var o;return t.buffer.push('\r\n    <div style="float:right;">\r\n        '),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:viewAccountInformation.originalAmount~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),o=a._triageMustache.call(e,"reversalPromptModel.originalAmount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </div>\r\n    "),""}function i(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-6"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:C.noop,fn:C.program(5,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    <br />\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-6"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:C.noop,fn:C.program(7,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function l(e,t){return t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{contentBinding:"typeOfReversal",valueBinding:"reversalPromptModel.typeOfReversal",displayPath:"label",valuePath:"value",label:"~locale.manageaccount:viewAccountInformation.typeOfReversal~"},hashTypes:{contentBinding:"STRING",valueBinding:"STRING",displayPath:"STRING",valuePath:"STRING",label:"STRING"},hashContexts:{contentBinding:e,valueBinding:e,displayPath:e,valuePath:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function c(e,t){var o;return t.buffer.push("\r\n    "),o=a.if.call(e,"reversalPromptModel.typeOfReversalSelected",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(8,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function u(e,t){return t.buffer.push('\r\n    <div style="float:right;">\r\n        '),t.buffer.push(T(a.view.call(e,"Komodo.Controls.TextField",{hash:{label:"~locale.manageaccount:viewAccountInformation.amount~",valueBinding:"reversalPromptModel.amount",validatorBinding:"validators.amountValidator"},hashTypes:{label:"STRING",valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{label:e,valueBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    </div>\r\n    "),""}function d(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(11,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function h(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-6"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:C.noop,fn:C.program(12,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-6"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:C.noop,fn:C.program(14,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function m(e,t){return t.buffer.push("\r\n    "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{tabindex:"1",valueBinding:"reversalPromptModel.fromRefundDate",label:"~locale.manageaccount:viewAccountInformation.fromDate~",validatorBinding:"validators.fromRefundDateValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function p(e,t){return t.buffer.push("\r\n    "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{tabindex:"2",valueBinding:"reversalPromptModel.toRefundDate",disableBinding:"toDateIsVisible",label:"~locale.manageaccount:viewAccountInformation.toDate~",validatorBinding:"validators.toRefundDateValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",disableBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,disableBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function f(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:C.noop,fn:C.program(17,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function g(e,t){return t.buffer.push("\r\n    "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"3",contentBinding:"reversalPromptModel.reasonsForCapture",valueBinding:"reversalPromptModel.reasonForCapture",optionLabelPath:"content.Value",optionValuePath:"content.Value",label:"~locale.manageaccount:viewAccountInformation.reasonForCapture~",prompt:"~locale.manageaccount:viewAccountInformation.reasonForCapturePrompt~",
validatorBinding:"validators.reasonForCaptureValidator"},hashTypes:{tabindex:"STRING",contentBinding:"STRING",valueBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",label:"STRING",prompt:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,contentBinding:e,valueBinding:e,optionLabelPath:e,optionValuePath:e,label:e,prompt:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:viewAccountInformation.comment~",validatorBinding:"validators.commentValidator"},hashTypes:{text:"STRING",validatorBinding:"STRING"},hashContexts:{text:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextArea",{hash:{tabindex:"4",rows:"6",class:"col-xs-12",valueBinding:"reversalPromptModel.comment",validatorBinding:"validators.commentValidator"},hashTypes:{tabindex:"STRING",rows:"STRING",class:"STRING",valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,rows:e,class:e,valueBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.commentValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function v(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:C.noop,fn:C.program(20,y,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function y(e,t){var o;return t.buffer.push('\r\n    <div style="float:right;">\r\n        <table>\r\n            <tr>\r\n                <td>\r\n                    '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{tabindex:"5",action:"reversePayment",disableBinding:"reversalPromptModel.disableReversalsPopUpButton"},hashTypes:{tabindex:"STRING",action:"STRING",disableBinding:"STRING"},hashContexts:{tabindex:e,action:e,disableBinding:e},inverse:C.noop,fn:C.program(21,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n            </tr>\r\n        </table>\r\n        <br />\r\n    </div>\r\n    "),""}function b(e,t){var o,n;t.buffer.push(T((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:viewAccountInformation.reverse",n):I.call(e,"loc","locale.manageaccount:viewAccountInformation.reverse",n))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var D,T=this.escapeExpression,C=this,I=a.helperMissing;return n.buffer.push('<div style="height:330px;width:650px;">\r\n    '),D=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(1,s,n),contexts:[t],types:["ID"],data:n}),(D||0===D)&&n.buffer.push(D),n.buffer.push("\r\n    <br />\r\n\r\n    "),D=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(4,i,n),contexts:[t],types:["ID"],data:n}),(D||0===D)&&n.buffer.push(D),n.buffer.push("\r\n\r\n    "),D=a.if.call(t,"reversalPromptModel.refundSelected",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(10,d,n),contexts:[t],types:["ID"],data:n}),(D||0===D)&&n.buffer.push(D),n.buffer.push("\r\n\r\n    <br />\r\n    <hr />\r\n    <br />\r\n    "),D=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(16,f,n),contexts:[t],types:["ID"],data:n}),(D||0===D)&&n.buffer.push(D),n.buffer.push("\r\n    <br />\r\n    "),D=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(19,v,n),contexts:[t],types:["ID"],data:n}),(D||0===D)&&n.buffer.push(D),n.buffer.push("\r\n</div>\r\n\r\n\r\n\r\n"),""}),Ember.TEMPLATES.ReverseArchivedFinancialTransactionView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:y.noop,fn:y.program(2,r,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function r(e,t){var o;return t.buffer.push('\r\n    <div style="float:right;">\r\n        '),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:viewAccountInformation.originalAmount~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),o=a._triageMustache.call(e,"reversalPromptModel.originalAmount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </div>\r\n    "),""}function i(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-6"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:y.noop,fn:y.program(5,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-6"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:y.noop,fn:y.program(7,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function l(e,t){return t.buffer.push("\r\n    "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{contentBinding:"typeOfReversal",valueBinding:"reversalPromptModel.typeOfReversal",displayPath:"label",valuePath:"value",label:"~locale.manageaccount:viewAccountInformation.typeOfReversal~"},hashTypes:{contentBinding:"STRING",valueBinding:"STRING",displayPath:"STRING",valuePath:"STRING",label:"STRING"},hashContexts:{contentBinding:e,valueBinding:e,displayPath:e,valuePath:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function c(e,t){var o;return t.buffer.push("\r\n    "),o=a.if.call(e,"reversalPromptModel.typeOfReversalSelected",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(8,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function u(e,t){return t.buffer.push('\r\n    <div style="float:right;">\r\n        '),t.buffer.push(v(a.view.call(e,"Komodo.Controls.TextField",{hash:{label:"~locale.manageaccount:viewAccountInformation.amount~",valueBinding:"reversalPromptModel.amount",validatorBinding:"validators.amountValidator"},hashTypes:{label:"STRING",valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{label:e,valueBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    </div>\r\n    "),""}function d(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:y.noop,fn:y.program(11,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function h(e,t){return t.buffer.push("\r\n    "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"3",contentBinding:"reversalPromptModel.reasonsForCapture",valueBinding:"reversalPromptModel.reasonForCapture",optionLabelPath:"content.Value",optionValuePath:"content.Value",label:"~locale.manageaccount:viewAccountInformation.reasonForCapture~",prompt:"~locale.manageaccount:viewAccountInformation.reasonForCapturePrompt~",validatorBinding:"validators.reasonForCaptureValidator"},hashTypes:{tabindex:"STRING",contentBinding:"STRING",valueBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",label:"STRING",prompt:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,contentBinding:e,valueBinding:e,optionLabelPath:e,optionValuePath:e,label:e,prompt:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:viewAccountInformation.comment~",validatorBinding:"validators.commentValidator"},hashTypes:{text:"STRING",validatorBinding:"STRING"},hashContexts:{text:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br /><br />\r\n    "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreTextArea",{hash:{rows:"6",class:"col-md-12",valueBinding:"reversalPromptModel.comment",validatorBinding:"validators.commentValidator"},hashTypes:{rows:"STRING",class:"STRING",valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{rows:e,class:e,valueBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.commentValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function m(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:y.noop,fn:y.program(14,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function p(e,t){var o;return t.buffer.push('\r\n    <div style="float:right;">\r\n        <table>\r\n            <tr>\r\n                <td>\r\n                    '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{tabindex:"2",action:"reverseArchivedFinancialTransaction"},hashTypes:{tabindex:"STRING",action:"STRING"},hashContexts:{tabindex:e,action:e},inverse:y.noop,fn:y.program(15,f,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n            </tr>\r\n        </table>\r\n        <br />\r\n    </div>\r\n    "),""}function f(e,t){var o,n;t.buffer.push(v((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:viewAccountInformation.reverse",n):b.call(e,"loc","locale.manageaccount:viewAccountInformation.reverse",n))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var g,v=this.escapeExpression,y=this,b=a.helperMissing;return n.buffer.push('<div style="height:330px;width:650px;">\r\n    '),g=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(1,s,n),contexts:[t],types:["ID"],data:n}),(g||0===g)&&n.buffer.push(g),n.buffer.push("\r\n    <br />\r\n\r\n    "),g=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(4,i,n),contexts:[t],types:["ID"],data:n}),(g||0===g)&&n.buffer.push(g),n.buffer.push("\r\n    <br />\r\n    <hr />\r\n    <br />\r\n    "),g=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(10,d,n),contexts:[t],types:["ID"],data:n}),(g||0===g)&&n.buffer.push(g),n.buffer.push("\r\n    <br />\r\n\r\n    "),g=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(13,m,n),contexts:[t],types:["ID"],data:n}),(g||0===g)&&n.buffer.push(g),n.buffer.push("\r\n</div>\r\n\r\n\r\n\r\n"),""}),Ember.TEMPLATES.RefundTransactionView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o;return t.buffer.push("\r\n    <br />\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(2,r,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.if.call(e,"refundTransModel.showAccountholderToggle",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(5,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(9,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(14,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(27,I,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(30,P,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(27,I,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(33,A,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.if.call(e,"refundTransModel.enableDocuments",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(45,O,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    <br><br>\r\n    "),""}function r(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:W.noop,fn:W.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function i(e,t){return t.buffer.push('\r\n    <div style="float:right;">\r\n        '),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:manageAccount.accountBalance2~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"refundTransModel.balance",class:"sub-heading"},hashTypes:{text:"ID",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    </div>\r\n    <br />\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"1",label:"~locale.manageaccount:manageAccount.amount~",valueBinding:"refundTransModel.amount",validatorBinding:"validators.amountValidator"},hashTypes:{tabindex:"STRING",label:"STRING",valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,label:e,valueBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <hr />\r\n    <br />\r\n    "),""}function l(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(6,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function c(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:W.noop,fn:W.program(7,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function u(e,t){return t.buffer.push("\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.Checkbox",{hash:{valueBinding:"refundTransModel.isAccountHolder",label:"~locale.manageAccount.editPaymentDetails:paymentDetail.customerAccountHolder~"},hashTypes:{valueBinding:"STRING",label:"STRING"},hashContexts:{valueBinding:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function d(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-6"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:W.noop,fn:W.program(10,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-6"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:W.noop,fn:W.program(12,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function h(e,t){return t.buffer.push("\r\n\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:manageAccount.accountfullname~",validatorBinding:"validators.nameValidator"},hashTypes:{text:"STRING",validatorBinding:"STRING"},hashContexts:{text:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{tabindex:"2",valueBinding:"refundTransModel.name",disableBinding:"refundTransModel.disableNameAndSurname",validatorBinding:"validators.nameValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",disableBinding:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,disableBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.nameValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:manageAccount.accountHolderEmail~",validatorBinding:"validators.emailValidator"},hashTypes:{text:"STRING",validatorBinding:"STRING"},hashContexts:{text:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{tabindex:"4",valueBinding:"refundTransModel.emailAddress",disableBinding:"refundTransModel.emailandPhoneNumber",validatorBinding:"validators.emailValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",disableBinding:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,disableBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.emailValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:manageAccount.bank~",validatorBinding:"validators.bankNameValidator"},hashTypes:{text:"STRING",validatorBinding:"STRING"},hashContexts:{text:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"6",contentBinding:"refundTransModel.bankNames",valueBinding:"refundTransModel.bankName",optionLabelPath:"content.CanonicalValue",optionValuePath:"content.CanonicalValue",prompt:"~locale.managePayments:allocPay.accountNumberPrompt~",disableBinding:"refundTransModel.setEntryBankDetails",validatorBinding:"validators.bankNameValidator"},hashTypes:{tabindex:"STRING",contentBinding:"STRING",valueBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING",disableBinding:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,contentBinding:e,valueBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e,disableBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.bankNameValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:manageAccount.accountNumber~",validatorBinding:"validators.bankaccountNumberValidator"},hashTypes:{text:"STRING",validatorBinding:"STRING"},hashContexts:{text:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{tabindex:"8",disableBinding:"refundTransModel.setEntryBankDetails",valueBinding:"refundTransModel.bankaccountNumber",validatorBinding:"validators.bankaccountNumberValidator"},hashTypes:{tabindex:"STRING",disableBinding:"STRING",valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,disableBinding:e,valueBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.bankaccountNumberValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:manageAccount.branchcode~",validatorBinding:"validators.branchCodeValidator"},hashTypes:{text:"STRING",validatorBinding:"STRING"},hashContexts:{text:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{disable:!0,valueBinding:"refundTransModel.branchCode",validatorBinding:"validators.branchCodeValidator"},hashTypes:{disable:"BOOLEAN",valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{disable:e,valueBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.branchCodeValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),""}function m(e,t){return t.buffer.push("\r\n\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:manageAccount.accountHolderId~",validatorBinding:"validators.idNumberValidator"},hashTypes:{text:"STRING",validatorBinding:"STRING"},hashContexts:{text:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{tabindex:"3",disableBinding:"refundTransModel.disableNameAndSurname",valueBinding:"refundTransModel.idNumber",validatorBinding:"validators.idNumberValidator"},hashTypes:{tabindex:"STRING",disableBinding:"STRING",valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,disableBinding:e,valueBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.idNumberValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:manageAccount.accountHolderNumber~",validatorBinding:"validators.phoneNumberValidator"},hashTypes:{text:"STRING",validatorBinding:"STRING"},hashContexts:{text:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{tabindex:"5",disableBinding:"refundTransModel.emailandPhoneNumber",valueBinding:"refundTransModel.phoneNumber",validatorBinding:"validators.phoneNumberValidator"},hashTypes:{tabindex:"STRING",disableBinding:"STRING",valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,disableBinding:e,valueBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.phoneNumberValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:manageAccount.accounttype~",validatorBinding:"validators.bankAccountTypeValidator"},hashTypes:{text:"STRING",validatorBinding:"STRING"},hashContexts:{text:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"7",contentBinding:"refundTransModel.bankAccountTypes",valueBinding:"refundTransModel.bankAccountType",optionLabelPath:"content.value",optionValuePath:"content.value",prompt:"~locale.managePayments:allocPay.accountNumberPrompt~",disableBinding:"refundTransModel.setEntryBankDetails",validatorBinding:"validators.bankAccountTypeValidator"},hashTypes:{tabindex:"STRING",contentBinding:"STRING",valueBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING",disableBinding:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,contentBinding:e,valueBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e,disableBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.bankAccountTypeValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:manageAccount.branchname~",validatorBinding:"validators.branchNameValidator"},hashTypes:{text:"STRING",validatorBinding:"STRING"},hashContexts:{text:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"9",contentBinding:"refundTransModel.branchNames",valueBinding:"refundTransModel.branchName",optionLabelPath:"content.CanonicalValue",optionValuePath:"content.CanonicalKey",prompt:"~locale.managePayments:allocPay.accountNumberPrompt~",disableBinding:"refundTransModel.setEntryBankDetails",validatorBinding:"validators.branchNameValidator"},hashTypes:{tabindex:"STRING",contentBinding:"STRING",valueBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING",disableBinding:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,contentBinding:e,valueBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e,disableBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.branchNameValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),""}function p(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-6"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:W.noop,fn:W.program(15,f,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),o=a.if.call(e,"refundTransModel.showAHVButton",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(23,D,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function f(e,t){var o;return t.buffer.push("\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:refund.ahvstatus~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),o=a.if.call(e,"refundTransModel.enableAHVStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(16,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:refund.ahvreason~",class:"retrieve-records"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),o=a.if.call(e,"refundTransModel.processing",{hash:{},hashTypes:{},hashContexts:{},inverse:W.program(21,b,t),fn:W.program(17,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function g(e,t){var o;return t.buffer.push("\r\n    "),o=a.if.call(e,"refundTransModel.processing",{hash:{},hashTypes:{},hashContexts:{},inverse:W.program(19,y,t),fn:W.program(17,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function v(e,t){return t.buffer.push("\r\n    <div "),t.buffer.push(Y(a["bind-attr"].call(e,{hash:{class:"refundTransModel.busy:komodo-show:komodo-hidden"},hashTypes:{class:"STRING"},hashContexts:{class:e},contexts:[],types:[],data:t}))),t.buffer.push(' style="display: inline-block">\r\n        <img src="Content/Images/busy-small.svg" />\r\n    </div>\r\n    '),""}function y(e,t){var o;return t.buffer.push("\r\n    <div "),t.buffer.push(Y(a["bind-attr"].call(e,{hash:{class:"refundTransModel.isCompliant:ahv-compliant-label:ahv-noncompliant-label"},hashTypes:{class:"STRING"},hashContexts:{class:e},contexts:[],types:[],data:t}))),t.buffer.push(">\r\n        "),o=a._triageMustache.call(e,"refundTransModel.ahvStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </div>\r\n    "),""}function b(e,t){var o;return t.buffer.push("\r\n    "),o=a._triageMustache.call(e,"refundTransModel.ahvReason",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function D(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-6"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:W.noop,fn:W.program(24,T,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function T(e,t){var o;return t.buffer.push('\r\n    <div style="float:inherit;">\r\n        '),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:refund.verifyAHV~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),o=a.view.call(e,"Komodo.Controls.Button",{hash:{tabindex:"10",type:"success",disabledBinding:"refundTransModel.disableAHVRealtime",action:"verifyAHV"},hashTypes:{tabindex:"STRING",type:"STRING",disabledBinding:"STRING",action:"STRING"},hashContexts:{tabindex:e,type:e,disabledBinding:e,action:e},inverse:W.noop,fn:W.program(25,C,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </div>\r\n    "),""}function C(e,t){var o,n;t.buffer.push(Y((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:refund.submit",n):X.call(e,"loc","locale.manageaccount:refund.submit",n))))}function I(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{
class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:W.noop,fn:W.program(28,x,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function x(e,t){t.buffer.push("\r\n    <hr />\r\n    ")}function P(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:W.noop,fn:W.program(31,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function S(e,t){return t.buffer.push("\r\n\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"11",contentBinding:"refundTransModel.reasonsForCapture",valueBinding:"refundTransModel.reasonForCapture",optionLabelPath:"content.Value",optionValuePath:"content.Value",label:"~locale.manageaccount:refund.reasonForCapture~",prompt:"~locale.manageaccount:refund.reasonForCapturePrompt~",validatorBinding:"validators.reasonForCaptureValidator",disableBinding:"disableReasonForRejectionDropDown"},hashTypes:{tabindex:"STRING",contentBinding:"STRING",valueBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",label:"STRING",prompt:"STRING",validatorBinding:"STRING",disableBinding:"STRING"},hashContexts:{tabindex:e,contentBinding:e,valueBinding:e,optionLabelPath:e,optionValuePath:e,label:e,prompt:e,validatorBinding:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:manageAccount.comment~",validatorBinding:"validators.commentValidator"},hashTypes:{text:"STRING",validatorBinding:"STRING"},hashContexts:{text:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextArea",{hash:{tabindex:"12",rows:"6",class:"textarea-large",valueBinding:"refundTransModel.comment",validatorBinding:"validators.commentValidator"},hashTypes:{tabindex:"STRING",rows:"STRING",class:"STRING",valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,rows:e,class:e,valueBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.commentValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),""}function A(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:W.noop,fn:W.program(34,N,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function N(e,t){var o;return t.buffer.push('\r\n    <table width="100%">\r\n        <tr>\r\n            <td>\r\n                <table style="background-color:#0099dc;height: 25%;margin-bottom: 10px; width: 100%">\r\n                    <tr>\r\n                        <td rowspan="4" align="left" width="4%" height="100%">\r\n                            <img src="Content\\Images\\notice-icon.svg" />\r\n                        </td>\r\n                        '),o=a.if.call(e,"refundTransModel.cash",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(35,B,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                        "),o=a.if.call(e,"refundTransModel.thirdParty",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(37,M,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                        "),o=a.if.call(e,"refundTransModel.deceased",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(39,R,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                        "),o=a.if.call(e,"refundTransModel.commercial",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(41,w,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                        "),o=a.if.call(e,"refundTransModel.debitOrder",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(43,K,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </tr>\r\n                </table>\r\n            </td>\r\n        </tr>\r\n    </table>\r\n    "),""}function B(e,t){return t.buffer.push('\r\n                        <td align="left" height="100%" valign="middle">\r\n                            <span style="float: left"> '),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"The following documentation needs to be uploaded before this refund can be processed:",class:"label-color-white-bold"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</span>\r\n                            <br />\r\n                            <span style="float: left"> '),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"- Proof of banking details",class:"label-color-white-bold"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</span>\r\n                            <br />\r\n                            <span style="float: left"> '),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"- Copy of ID/Copy of Passport",class:"label-color-white-bold"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</span>\r\n                        </td>\r\n                        "),""}function M(e,t){return t.buffer.push('\r\n                        <td align="left" height="100%" valign="middle">\r\n                            <span style="float: left"> '),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"The following documentation needs to be uploaded before this refund can be processed:",class:"label-color-white-bold"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</span>\r\n                            <br />\r\n                            <span style="float: left"> '),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"- Proof of banking details",class:"label-color-white-bold"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</span>\r\n                            <br />\r\n                            <span style="float: left"> '),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"- Copy of ID/Copy of Passport",class:"label-color-white-bold"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</span>\r\n                            <br />\r\n                            <span style="float: left"> '),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"- Third party Deduction Authorisation Form",class:"label-color-white-bold"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</span>                        \r\n                        </td>\r\n                        "),""}function R(e,t){return t.buffer.push('\r\n                        <td align="left" height="100%" valign="middle">\r\n                            <span style="float: left"> '),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"The following documentation needs to be uploaded before this refund can be processed:",class:"label-color-white-bold"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</span>\r\n                            <br />\r\n                            <span style="float: left"> '),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"- Letter from the executor OR Letter of authority OR an Affidavit",class:"label-color-white-bold"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</span>\r\n                            <br />\r\n                            <span style="float: left"> '),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"- Proof of banking details from executor",class:"label-color-white-bold"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</span>\r\n                            <br />\r\n                            <span style="float: left"> '),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"- Copy of ID of the appointed person for the estate",class:"label-color-white-bold"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</span>\r\n                        </td>\r\n                        "),""}function w(e,t){return t.buffer.push('\r\n                        <td align="left" height="100%" valign="middle">\r\n                            <span style="float: left"> '),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"The following documentation needs to be uploaded before this refund can be processed:",class:"label-color-white-bold"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</span>\r\n                            <br />\r\n                            <span style="float: left"> '),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"- Proof of banking details",class:"label-color-white-bold"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</span>\r\n                        </td>\r\n                        "),""}function K(e,t){return t.buffer.push('\r\n                        <td align="left" height="100%" valign="middle">\r\n                            <span style="float: left"> '),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"No supporting documentation needs to be uploaded to process this refund.",class:"label-color-white-bold"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</span>\r\n                        </td>\r\n                        "),""}function O(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(46,G,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function G(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:W.noop,fn:W.program(47,k,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function k(e,t){var o;return t.buffer.push("\r\n\r\n    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:manageAccount.supportdoc~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br /><br />\r\n    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{id:"choosefiles",tabindex:"13"},hashTypes:{id:"STRING",tabindex:"STRING"},hashContexts:{id:e,tabindex:e},inverse:W.noop,fn:W.program(48,E,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n    <div style="display:none">\r\n        '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{id:"uploadfiles"},hashTypes:{id:"STRING"},hashContexts:{id:e},inverse:W.noop,fn:W.program(50,V,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n    </div>\r\n    <br /><br />\r\n    <span class="retrieve-records" style="min-height:30px;">\r\n        '),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageCase:createCase.documentsSupportedNote~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    </span>\r\n    <br />\r\n    "),o=a.if.call(e,"refundTransModel.enableDocGrid",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(52,F,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function E(e,t){var o,n;t.buffer.push(Y((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:manageAccount.addDocs",n):X.call(e,"loc","locale.manageaccount:manageAccount.addDocs",n))))}function V(e,t){return""}function F(e,t){var o,n,s;return t.buffer.push('\r\n    <table class="table table-bordered komodo-datagrid">\r\n        <thead>\r\n            <tr>\r\n                <th width="40%">'),t.buffer.push(Y((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:manageAccount.document",s):X.call(e,"loc","locale.manageaccount:manageAccount.document",s)))),t.buffer.push('</th>\r\n                <th width="15%">'),t.buffer.push(Y((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:manageAccount.documentType",s):X.call(e,"loc","locale.manageaccount:manageAccount.documentType",s)))),t.buffer.push('</th>\r\n                <th width="10%">'),t.buffer.push(Y((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:manageAccount.size",s):X.call(e,"loc","locale.manageaccount:manageAccount.size",s)))),t.buffer.push('</th>\r\n                <th width="10%">'),t.buffer.push(Y((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:manageAccount.percentage",s):X.call(e,"loc","locale.manageaccount:manageAccount.percentage",s)))),t.buffer.push('</th>\r\n                <th width="10%">'),t.buffer.push(Y((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:manageAccount.status",s):X.call(e,"loc","locale.manageaccount:manageAccount.status",s)))),t.buffer.push('</th>\r\n                <th width="10%">'),t.buffer.push(Y((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:manageAccount.action",s):X.call(e,"loc","locale.manageaccount:manageAccount.action",s)))),t.buffer.push("</th>\r\n            </tr>\r\n        </thead>\r\n        "),o=a.each.call(e,"row","in","refundTransModel.customerDocuments",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(53,L,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n    </table>\r\n\r\n    <div style="float:right;">\r\n        '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{tabindex:"18",action:"overrideStatus",disableBinding:"refundTransModel.disableAHVButtons",visibleBinding:"refundTransModel.visibleAHVButtons"},hashTypes:{tabindex:"STRING",action:"STRING",disableBinding:"STRING",visibleBinding:"STRING"},hashContexts:{tabindex:e,action:e,disableBinding:e,visibleBinding:e},inverse:W.noop,fn:W.program(58,_,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </div>\r\n    "),""}function L(e,t){var o;return t.buffer.push("\r\n        <tbody>\r\n            <tr>\r\n                <td>\r\n                    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"row.documentName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                </td>\r\n                <td>\r\n                    "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{valueBinding:"row.documentType",contentBinding:"refundTransModel.documentTypes",optionLabelPath:"content.value",optionValuePath:"content.value",tabindex:"20",class:"komodo-grid-edit",disableBinding:"row.isDocumentTypeDisable"},hashTypes:{valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",tabindex:"STRING",class:"STRING",disableBinding:"STRING"},hashContexts:{valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,tabindex:e,class:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                </td>\r\n                <td>\r\n                    "),o=a._triageMustache.call(e,"row.documentSize",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                <td>\r\n                    "),o=a._triageMustache.call(e,"row.uploadPercentage",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                <td>\r\n                    "),o=a._triageMustache.call(e,"row.uploadStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                <td>\r\n                    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{type:"danger",action:"removeDocument",contentBinding:"row",size:"xs",disableBinding:"row.disableDelete"},hashTypes:{type:"STRING",action:"STRING",contentBinding:"STRING",size:"STRING",disableBinding:"STRING"},hashContexts:{type:e,action:e,contentBinding:e,size:e,disableBinding:e},inverse:W.noop,fn:W.program(54,U,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{type:"success",action:"viewDocs",contentBinding:"row",size:"xs"},hashTypes:{type:"STRING",action:"STRING",contentBinding:"STRING",size:"STRING"},hashContexts:{type:e,action:e,contentBinding:e,size:e},inverse:W.noop,fn:W.program(56,H,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n            </tr>\r\n        </tbody>\r\n        "),""}function U(e,t){var o,n;t.buffer.push(Y((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:manageAccount.delete",n):X.call(e,"loc","locale.manageaccount:manageAccount.delete",n))))}function H(e,t){var o,n;t.buffer.push(Y((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:manageAccount.view",n):X.call(e,"loc","locale.manageaccount:manageAccount.view",n))))}function _(e,t){var o,n;t.buffer.push(Y((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:refund.ahvoverride",n):X.call(e,"loc","locale.manageaccount:refund.ahvoverride",n))))}function q(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:W.noop,fn:W.program(61,j,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function j(e,t){var o;return t.buffer.push('\r\n    <div style="float:right;">\r\n        '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{tabindex:"20",action:"refund"},hashTypes:{tabindex:"STRING",action:"STRING"},hashContexts:{tabindex:e,action:e},inverse:W.noop,fn:W.program(62,J,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </div>\r\n    <br /><br />\r\n    "),""}function J(e,t){var o,n;t.buffer.push(Y((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:manageAccount.refund",n):X.call(e,"loc","locale.manageaccount:manageAccount.refund",n))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var Q,z,$,Y=this.escapeExpression,W=this,X=a.helperMissing;return n.buffer.push("<div "),n.buffer.push(Y(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:n}))),n.buffer.push('>\r\n    <div style="width:100%">\r\n        <span class="komodo-heading">Refunds Financial Transaction</span>\r\n        <span class="float-right">\r\n            <b>\r\n                <a href="#/account">&lt;'),n.buffer.push(Y((z=a.loc||t&&t.loc,$={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},z?z.call(t,"locale.manageaccount:viewAccountInformation.back",$):X.call(t,"loc","locale.manageaccount:viewAccountInformation.back",$)))),n.buffer.push("</a>\r\n            </b>\r\n        </span>\r\n    </div>\r\n    <hr />\r\n\r\n    "),Q=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"Refunds",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:W.noop,fn:W.program(1,s,n),contexts:[t],types:["ID"],data:n}),(Q||0===Q)&&n.buffer.push(Q),n.buffer.push("\r\n    "),Q=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:W.noop,fn:W.program(60,q,n),contexts:[t],types:["ID"],data:n}),(Q||0===Q)&&n.buffer.push(Q),n.buffer.push("\r\n</div>\r\n\r\n\r\n\r\n"),""});var KomodoEmployeePaymentConfiguration={CustomerClass:[{CanonicalKey:"3",CanonicalValue:"Specialist",CustomerTypeConfiguration:{CustomerType:[{CanonicalKey:"35",CanonicalValue:"Multichoice",EmployeeType:[{CanonicalKey:"50",CanonicalValue:"Permanent"},{CanonicalKey:"81",CanonicalValue:"FTC"},{CanonicalKey:"79",CanonicalValue:"Executive"},{CanonicalKey:"96",CanonicalValue:"Retrencee"}],SetToPaymentDay:"23",SetPaymentDayReadOnly:"true",SetMOPReadOnly:"true"},{CanonicalKey:"37",CanonicalValue:"Media 24/Naspers",EmployeeType:[{CanonicalKey:"50",CanonicalValue:"Permanent"},{CanonicalKey:"79",CanonicalValue:"Executive"}],SetToPaymentDay:"25",SetPaymentDayReadOnly:"true",SetMOPReadOnly:"true"},{CanonicalKey:"36",CanonicalValue:"Temp/Agencies",EmployeeType:[{CanonicalKey:"109",CanonicalValue:"3rd Party Temporary"},{CanonicalKey:"74",CanonicalValue:"Agency"},{CanonicalKey:"58",CanonicalValue:"Retiree"},{CanonicalKey:"82",CanonicalValue:"Learnership"},{CanonicalKey:"85",CanonicalValue:"Medically Incapacitated"},{CanonicalKey:"98",CanonicalValue:"Spouse - Death Benefit"}],SetToPaymentDay:"1",SetPaymentDayReadOnly:"true",SetMOPReadOnly:"true"},{CanonicalKey:"37",CanonicalValue:"Temp/Agencies",EmployeeType:[{CanonicalKey:"108",CanonicalValue:"MCA Temporary"}],SetToPaymentDay:"1",SetPaymentDayReadOnly:"true",SetMOPReadOnly:"true"}]}}]};Ember.TEMPLATES.RefundsView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o,n,s;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(2,r,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n    <hr />\r\n    <br />\r\n   \r\n    <table id="tblfinancialTransactions" class="table table-bordered komodo-datagrid" width="100%">\r\n        <tr>\r\n            <th width="10%">'),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:transactionGrid.creationDate",s):y.call(e,"loc","locale.manageAccount.editPaymentDetails:transactionGrid.creationDate",s)))),t.buffer.push('</th>\r\n            <th width="12%">'),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:transactionGrid.TransactionType",s):y.call(e,"loc","locale.manageAccount.editPaymentDetails:transactionGrid.TransactionType",s)))),t.buffer.push('</th>\r\n            <th width="15%">'),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:transactionGrid.product",s):y.call(e,"loc","locale.manageAccount.editPaymentDetails:transactionGrid.product",s)))),t.buffer.push('</th>\r\n            <th width="15%">'),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:transactionGrid.ledgerAccountDescription",s):y.call(e,"loc","locale.manageAccount.editPaymentDetails:transactionGrid.ledgerAccountDescription",s)))),t.buffer.push('</th>\r\n            <th width="9%">'),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:transactionGrid.periodFrom",s):y.call(e,"loc","locale.manageAccount.editPaymentDetails:transactionGrid.periodFrom",s)))),t.buffer.push('</th>\r\n            <th width="9%">'),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:transactionGrid.PeriodTo",s):y.call(e,"loc","locale.manageAccount.editPaymentDetails:transactionGrid.PeriodTo",s)))),t.buffer.push('</th>\r\n            <th width="10%">'),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:transactionGrid.amount",s):y.call(e,"loc","locale.manageAccount.editPaymentDetails:transactionGrid.amount",s)))),t.buffer.push('</th>\r\n            <th width="10%">'),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:transactionGrid.runningTotal",s):y.call(e,"loc","locale.manageAccount.editPaymentDetails:transactionGrid.runningTotal",s)))),t.buffer.push('</th>\r\n            <th width="10%">Select</th>\r\n            <th width="10%">'),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:transactionGrid.actions",s):y.call(e,"loc","locale.manageAccount.editPaymentDetails:transactionGrid.actions",s)))),t.buffer.push("</th>\r\n        </tr>\r\n        "),o=a.each.call(e,"item","in","financialTransactions",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(8,u,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </table>\r\n    "),o=a.if.call(e,"pager",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(11,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    \r\n\r\n    "),""}function r(e,t){var o;return t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.editPaymentDetails:paymentDetail.accountNumberForFts~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    <br />\r\n    \x3c!--Drop down List for Account Number--\x3e\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:v.noop,fn:v.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    \x3c!--List Of Decoders/SmartCards--\x3e\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:v.noop,fn:v.program(5,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function i(e,t){return t.buffer.push("\r\n    "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.Select",{hash:{label:"~locale.manageAccount.editPaymentDetails:paymentDetail.accountNumber~",contentBinding:"accountNumberList",optionLabelPath:"content.Key",optionValuePath:"content.Value"},hashTypes:{label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function l(e,t){var o;return t.buffer.push("\r\n    "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.editPaymentDetails:paymentDetail.smartcardlableForFTs~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n    <div class="scroll-list" style="border-color:white;">\r\n        '),o=a.each.call(e,"smartcard","in","smartcards",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(6,c,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </div>\r\n    "),""}function c(e,t){return t.buffer.push("\r\n        "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"smartcard",class:"list-item"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </br>\r\n        "),""}function u(e,t){var o;return t.buffer.push("\r\n        <tr>\r\n            <td>"),o=a._triageMustache.call(e,"item.creationDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n            <td>"),o=a._triageMustache.call(e,"item.financialTransactionType",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n            <td>"),o=a._triageMustache.call(e,"item.product",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n            <td>"),o=a._triageMustache.call(e,"item.ledgerAccountDescription",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n            <td>"),o=a._triageMustache.call(e,"item.periodFrom",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n            <td>"),o=a._triageMustache.call(e,"item.periodTo",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n            <td style="text-align:right">'),o=a._triageMustache.call(e,"item.amount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n            <td style="text-align:right">'),o=a._triageMustache.call(e,"item.runningTotal",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n            <td>\r\n                "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"item.isCheckboxSelected"},hashTypes:{checkedBinding:"STRING"},hashContexts:{checkedBinding:e},contexts:[e],types:["ID"],data:t}))),
t.buffer.push("\r\n            </td>\r\n            <td>\r\n                "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{contentBinding:"item",action:"viewFinancialTransaction",size:"xs",tabindex:"5"},hashTypes:{contentBinding:"STRING",action:"STRING",size:"STRING",tabindex:"STRING"},hashContexts:{contentBinding:e,action:e,size:e,tabindex:e},inverse:v.noop,fn:v.program(9,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </td>\r\n        </tr>\r\n        "),""}function d(e,t){var o,n;t.buffer.push(g((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.editPaymentDetails:paymentDetail.actionView",n):y.call(e,"loc","locale.manageAccount.editPaymentDetails:paymentDetail.actionView",n))))}function h(e,t){return t.buffer.push('\r\n    <div align="left">\r\n        '),t.buffer.push(g(a.view.call(e,"Komodo.Controls.TablePager",{hash:{tableId:"tblfinancialTransactions",contentBinding:"financialTransactions",itemsPerPage:"5",headerRows:"1",visiblePageCount:"3"},hashTypes:{tableId:"STRING",contentBinding:"STRING",itemsPerPage:"STRING",headerRows:"STRING",visiblePageCount:"STRING"},hashContexts:{tableId:e,contentBinding:e,itemsPerPage:e,headerRows:e,visiblePageCount:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    </div>\r\n    "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var m,p,f,g=this.escapeExpression,v=this,y=a.helperMissing;return n.buffer.push("<div "),n.buffer.push(g(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:n}))),n.buffer.push('>\r\n    <div style="width:100%">\r\n        <span class="komodo-heading">Refunds</span>\r\n        <span class="float-right">\r\n            <b>\r\n                <a href="#/account">&lt;'),n.buffer.push(g((p=a.loc||t&&t.loc,f={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},p?p.call(t,"locale.manageaccount:viewAccountInformation.back",f):y.call(t,"loc","locale.manageaccount:viewAccountInformation.back",f)))),n.buffer.push("</a>\r\n            </b>\r\n        </span>\r\n    </div>\r\n    <hr />\r\n\r\n    "),m=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageaccount:financialTransactionsTab.title~"},hashTypes:{title:"STRING"},hashContexts:{title:t},inverse:v.noop,fn:v.program(1,s,n),contexts:[t],types:["ID"],data:n}),(m||0===m)&&n.buffer.push(m),n.buffer.push("\r\n</div>"),""}),Ember.TEMPLATES.QuotesView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o;return t.buffer.push("\r\n  <br/>\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:f.noop,fn:f.program(2,r,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function r(e,t){var o,n,s;return t.buffer.push('\r\n    <table id="quotesGrid" class="table table-bordered komodo-datagrid" width="100%">\r\n\t<tr>\r\n        <th width="10%">'),t.buffer.push(p((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:quotes.quoteNumber",s):m.call(e,"loc","locale.manageaccount:quotes.quoteNumber",s)))),t.buffer.push('</th>\r\n        <th width="10%">'),t.buffer.push(p((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:quotes.replaceQuoteNumber",s):m.call(e,"loc","locale.manageaccount:quotes.replaceQuoteNumber",s)))),t.buffer.push('</th>\r\n        <th width="10%">'),t.buffer.push(p((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:quotes.accountNumber",s):m.call(e,"loc","locale.manageaccount:quotes.accountNumber",s)))),t.buffer.push('</th>\r\n        <th width="10%">'),t.buffer.push(p((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:quotes.quoteDate",s):m.call(e,"loc","locale.manageaccount:quotes.quoteDate",s)))),t.buffer.push('</th>\r\n        <th width="10%">'),t.buffer.push(p((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:quotes.totalAmount",s):m.call(e,"loc","locale.manageaccount:quotes.totalAmount",s)))),t.buffer.push('</th>\r\n        <th width="10%">'),t.buffer.push(p((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:quotes.quoteStatus",s):m.call(e,"loc","locale.manageaccount:quotes.quoteStatus",s)))),t.buffer.push('</th>\r\n        <th width="10%">'),t.buffer.push(p((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:quotes.expirationDate",s):m.call(e,"loc","locale.manageaccount:quotes.expirationDate",s)))),t.buffer.push('</th>\r\n        <th width="10%">'),t.buffer.push(p((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:quotes.paymentDueDate",s):m.call(e,"loc","locale.manageaccount:quotes.paymentDueDate",s)))),t.buffer.push('</th>\r\n        <th width="10%">'),t.buffer.push(p((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:quotes.action",s):m.call(e,"loc","locale.manageaccount:quotes.action",s)))),t.buffer.push("</th>\r\n\t</tr>\r\n      "),o=a.each.call(e,"item","in","quotesModel.customerQuotes",{hash:{},hashTypes:{},hashContexts:{},inverse:f.noop,fn:f.program(3,i,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\t</table>\r\n  "),t.buffer.push(p(a.view.call(e,"Komodo.Controls.TablePager",{hash:{tableId:"quotesGrid",contentBinding:"quotesModel.customerQuotes",itemsPerPage:"20",headerRows:"1"},hashTypes:{tableId:"STRING",contentBinding:"STRING",itemsPerPage:"STRING",headerRows:"STRING"},hashContexts:{tableId:e,contentBinding:e,itemsPerPage:e,headerRows:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function i(e,t){var o;return t.buffer.push("\r\n      <tr>\r\n        "),o=a.with.call(e,"item",{hash:{},hashTypes:{},hashContexts:{},inverse:f.noop,fn:f.program(4,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\t\t<td> "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{contentBinding:"item",action:"viewQuoteDetails",size:"xs",tabindex:"5"},hashTypes:{contentBinding:"STRING",action:"STRING",size:"STRING",tabindex:"STRING"},hashContexts:{contentBinding:e,action:e,size:e,tabindex:e},inverse:f.noop,fn:f.program(6,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\t\t</td>\r\n      </tr>\r\n      "),""}function l(e,t){var o;return t.buffer.push("\r\n        <td>"),o=a._triageMustache.call(e,"item.Id",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        <td>"),o=a._triageMustache.call(e,"item.ReplacedByQuoteId",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        <td>"),o=a._triageMustache.call(e,"item.FinancialAccountId",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        <td>"),o=a._triageMustache.call(e,"item.QuoteDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        <td>"),o=a._triageMustache.call(e,"item.TotalAmount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        <td>"),o=a._triageMustache.call(e,"item.QuoteStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        <td>"),o=a._triageMustache.call(e,"item.ExpirationDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        <td>"),o=a._triageMustache.call(e,"item.PaymentDueDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        "),""}function c(e,t){var o,n;t.buffer.push(p((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:manageAccount.view",n):m.call(e,"loc","locale.manageaccount:manageAccount.view",n))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var u,d,h,m=a.helperMissing,p=this.escapeExpression,f=this;return n.buffer.push("<div "),n.buffer.push(p(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:n}))),n.buffer.push('>\r\n  <div width="90%">\r\n    <br/>\r\n    <span class="komodo-heading">'),n.buffer.push(p((d=a.loc||t&&t.loc,h={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},d?d.call(t,"locale.manageaccount:manageAccount.quotes",h):m.call(t,"loc","locale.manageaccount:manageAccount.quotes",h)))),n.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/account">&lt;'),n.buffer.push(p((d=a.loc||t&&t.loc,h={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},d?d.call(t,"locale.manageaccount:viewAccountInformation.back",h):m.call(t,"loc","locale.manageaccount:viewAccountInformation.back",h)))),n.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n<hr/>\r\n  "),u=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageaccount:quotes.title~",visibleBinding:"isGridDataAvailable"},hashTypes:{title:"STRING",visibleBinding:"STRING"},hashContexts:{title:t,visibleBinding:t},inverse:f.noop,fn:f.program(1,s,n),contexts:[t],types:["ID"],data:n}),(u||0===u)&&n.buffer.push(u),n.buffer.push("\r\n  "),n.buffer.push(p(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:quotes.noQuotesAvailable~",visibleBinding:"showNoquoteMessage"},hashTypes:{text:"STRING",visibleBinding:"STRING"},hashContexts:{text:t,visibleBinding:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push("\r\n</div>"),""}),Ember.TEMPLATES.ProformaInvoiceView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o;return t.buffer.push("\r\n  <hr/>\r\n  "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageaccount:proformaInvoiceTab.custInfo~"},hashTypes:{title:"STRING"},hashContexts:{title:e},inverse:ae.noop,fn:ae.program(2,r,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageaccount:proformaInvoiceTab.productDetails~"},hashTypes:{title:"STRING"},hashContexts:{title:e},inverse:ae.noop,fn:ae.program(4,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageaccount:proformaInvoiceTab.historyTab~",visible:!1},hashTypes:{title:"STRING",visible:"BOOLEAN"},hashContexts:{title:e,visible:e},inverse:ae.noop,fn:ae.program(78,$,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),""}function r(e,t){return t.buffer.push('\r\n  <table width="100%">\r\n    <tr>\r\n      <td width="25%">\r\n        '),t.buffer.push(ee(a.view.call(e,"Komodo.Controls.Select",{hash:{label:"~locale.manageaccount:accountInformationTab.accountNumber~",prompt:"~locale.manageaccount:viewAccountInformation.accountNumberPrompt~",valueBinding:"proformaInvoiceModel.accountNumberSelected",contentBinding:"allAccounts",optionLabelPath:"content",optionValuePath:"content",validatorBinding:"validators.accountNumberSelectedValidator"},hashTypes:{label:"STRING",prompt:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",validatorBinding:"STRING"},hashContexts:{label:e,prompt:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n\r\n      <td width="25%">\r\n        '),t.buffer.push(ee(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{label:"~locale.manageaccount:financialTransactionsTab.fromDate~",valueBinding:"proformaInvoiceModel.fromDateSelected",validatorBinding:"validators.fromDateSelectedValidator"},hashTypes:{label:"STRING",valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{label:e,valueBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n      <td width="25%">\r\n        '),t.buffer.push(ee(a.view.call(e,"Komodo.Controls.Select",{hash:{label:"~locale.manageaccount:proformaInvoiceTab.period~",prompt:"~locale.manageaccount:proformaInvoiceTab.selectPeriod~",valueBinding:"proformaInvoiceModel.periodSelected",contentBinding:"periodList",optionLabelPath:"content",optionValuePath:"content",validatorBinding:"validators.periodSelectedValidator"},hashTypes:{label:"STRING",prompt:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",validatorBinding:"STRING"},hashContexts:{label:e,prompt:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      </td>\r\n    </tr>\r\n  </table>\r\n  "),""}function i(e,t){var o;return t.buffer.push("\r\n  "),o=a.if.call(e,"isAccountSelected",{hash:{},hashTypes:{},hashContexts:{},inverse:ae.program(76,z,t),fn:ae.program(5,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function l(e,t){var o,n,s;return t.buffer.push('\r\n  <table class="table table-bordered komodo-datagrid" width="100%">\r\n    <tbody>\r\n      <tr>\r\n        <th width="50%">'),t.buffer.push(ee((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:financialTransactionsTab.description",s):te.call(e,"loc","locale.manageaccount:financialTransactionsTab.description",s)))),t.buffer.push('</th>\r\n        <th width="10%">'),t.buffer.push(ee((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.from",s):te.call(e,"loc","locale.manageaccount:customerAnalysis.from",s)))),t.buffer.push('</th>\r\n        <th width="10%">'),t.buffer.push(ee((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.to",s):te.call(e,"loc","locale.manageaccount:customerAnalysis.to",s)))),t.buffer.push("</th>\r\n        "),o=a.if.call(e,"isCommercialCustomer",{hash:{},hashTypes:{},hashContexts:{},inverse:ae.noop,fn:ae.program(6,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n        <th width="10%">'),t.buffer.push(ee((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:manageAccount.amount",s):te.call(e,"loc","locale.manageaccount:manageAccount.amount",s)))),t.buffer.push("<br/>("),o=a._triageMustache.call(e,"currencyMnemonic",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(")</th>\r\n      </tr>\r\n      "),o=a.each.call(e,"productDetail","in","proformaInvoiceModel.proformaInvoiceProductDetailsList",{hash:{},hashTypes:{},hashContexts:{},inverse:ae.noop,fn:ae.program(8,u,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),o=a.if.call(e,"showDiscount",{hash:{},hashTypes:{},hashContexts:{},inverse:ae.noop,fn:ae.program(16,f,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      <tr>\r\n        "),o=a.if.call(e,"isCommercialCustomer",{hash:{},hashTypes:{},hashContexts:{},inverse:ae.program(23,b,t),fn:ae.program(21,y,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        <td>\r\n          <b> "),o=a._triageMustache.call(e,"proformaInvoiceModel.invoiceTotal",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</b>\r\n        </td>\r\n      </tr>\r\n        "),o=a.if.call(e,"isVatApplicable",{hash:{},hashTypes:{},hashContexts:{},inverse:ae.program(68,q,t),fn:ae.program(25,D,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n    </tbody>\r\n  </table>\r\n  <table width="100%">\r\n    <tr>\r\n      <td width="50%"></td>\r\n      <td width="15%">\r\n        '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"generateInvoice",visible:!1},hashTypes:{action:"STRING",visible:"BOOLEAN"},hashContexts:{action:e,visible:e},inverse:ae.noop,fn:ae.program(70,j,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n      </td>\r\n      <td width="5%">'),t.buffer.push(ee(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:proformaInvoiceTab.email~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</td>\r\n      <td width="15%"> '),t.buffer.push(ee(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"proformaInvoiceModel.emailAddress"},hashTypes:{valueBinding:"STRING"},hashContexts:{valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</td>\r\n      <td width="5%"> '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"sendEmail",disabledBinding:"isSendPrintButtonDisabled",contentBinding:"item",type:"success"},hashTypes:{action:"STRING",disabledBinding:"STRING",contentBinding:"STRING",type:"STRING"},hashContexts:{action:e,disabledBinding:e,contentBinding:e,type:e},inverse:ae.noop,fn:ae.program(72,J,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n      <td width="10%">'),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"printInvoice",disabledBinding:"isSendPrintButtonDisabled",contentBinding:"item",type:"success"},hashTypes:{action:"STRING",disabledBinding:"STRING",contentBinding:"STRING",type:"STRING"},hashContexts:{action:e,disabledBinding:e,contentBinding:e,type:e},inverse:ae.noop,fn:ae.program(74,Q,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n    </tr>\r\n  </table>\r\n  "),""}function c(e,t){var o,n,s;return t.buffer.push('\r\n        <th width="10%">'),t.buffer.push(ee((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:proformaInvoiceTab.units",s):te.call(e,"loc","locale.manageaccount:proformaInvoiceTab.units",s)))),t.buffer.push('</th>\r\n        <th width="10%">'),t.buffer.push(ee((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:proformaInvoiceTab.price",s):te.call(e,"loc","locale.manageaccount:proformaInvoiceTab.price",s)))),t.buffer.push("<br/>("),o=a._triageMustache.call(e,"currencyMnemonic",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(")</th>\r\n        "),""}function u(e,t){var o;return t.buffer.push("\r\n      <tr></tr>\r\n      <tr>\r\n        "),o=a.if.call(e,"isCommercialCustomer",{hash:{},hashTypes:{},hashContexts:{},inverse:ae.program(11,h,t),fn:ae.program(9,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </tr>\r\n      "),o=a.each.call(e,"product","in","productDetail.deviceProducts",{hash:{},hashTypes:{},hashContexts:{},inverse:ae.noop,fn:ae.program(13,m,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function d(e,t){var o;return t.buffer.push('\r\n        <td colspan="6">\r\n          <b>'),o=a._triageMustache.call(e,"productDetail.viewLocation",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</b>\r\n        </td>\r\n        "),""}function h(e,t){var o;return t.buffer.push('\r\n        <td colspan="4">\r\n          <b>'),o=a._triageMustache.call(e,"productDetail.smartcardNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</b>\r\n        </td>\r\n        "),""}function m(e,t){var o;return t.buffer.push("\r\n      <tr>\r\n        <td>"),o=a._triageMustache.call(e,"product.description",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </td>\r\n        <td>"),o=a._triageMustache.call(e,"product.fromDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        <td>"),o=a._triageMustache.call(e,"product.toDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td >\r\n        "),o=a.if.call(e,"isCommercialCustomer",{hash:{},hashTypes:{},hashContexts:{},inverse:ae.noop,fn:ae.program(14,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        <td>"),o=a._triageMustache.call(e,"product.amount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </td>\r\n      </tr>\r\n      "),""}function p(e,t){var o;return t.buffer.push("\r\n        <td>"),o=a._triageMustache.call(e,"product.units",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        <td>"),o=a._triageMustache.call(e,"product.unitPrice",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        "),""}function f(e,t){var o;return t.buffer.push("\r\n        <tr>\r\n            "),o=a.if.call(e,"isCommercialCustomer",{hash:{},hashTypes:{},hashContexts:{},inverse:ae.program(19,v,t),fn:ae.program(17,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            <td>\r\n                <b> "),o=a._triageMustache.call(e,"proformaInvoiceModel.discount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</b>\r\n            </td>\r\n        </tr>\r\n        "),""}function g(e,t){var o,n;return t.buffer.push('\r\n            <td colspan="5">\r\n                <b> '),t.buffer.push(ee((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:proformaInvoiceTab.discount",n):te.call(e,"loc","locale.manageaccount:proformaInvoiceTab.discount",n)))),t.buffer.push("</b>\r\n            </td>\r\n            "),""}function v(e,t){var o,n;return t.buffer.push('\r\n            <td colspan="3">\r\n                <b> '),t.buffer.push(ee((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:proformaInvoiceTab.discount",n):te.call(e,"loc","locale.manageaccount:proformaInvoiceTab.discount",n)))),t.buffer.push("</b>\r\n            </td>\r\n            "),""}function y(e,t){var o,n;return t.buffer.push('\r\n        <td colspan="5">\r\n          <b> '),t.buffer.push(ee((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:proformaInvoiceTab.total",n):te.call(e,"loc","locale.manageaccount:proformaInvoiceTab.total",n)))),t.buffer.push("</b>\r\n        </td>\r\n        "),""}function b(e,t){var o,n;return t.buffer.push('\r\n        <td colspan="3">\r\n          <b> '),t.buffer.push(ee((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:proformaInvoiceTab.total",n):te.call(e,"loc","locale.manageaccount:proformaInvoiceTab.total",n)))),t.buffer.push("</b>\r\n        </td>\r\n        "),""}function D(e,t){var o;return t.buffer.push("\r\n            "),o=a.if.call(e,"isValidForDoubleTax",{hash:{},hashTypes:{},hashContexts:{},inverse:ae.program(43,M,t),fn:ae.program(26,T,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),o=a.if.call(e,"isTvLevy",{hash:{},hashTypes:{},hashContexts:{},inverse:ae.noop,fn:ae.program(63,U,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function T(e,t){var o;return t.buffer.push("\r\n              <tr>\r\n                "),o=a.if.call(e,"isCommercialCustomer",{hash:{},hashTypes:{},hashContexts:{},inverse:ae.program(29,I,t),fn:ae.program(27,C,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                <td>\r\n                  "),o=a._triageMustache.call(e,"proformaInvoiceModel.cstableAmount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n              </tr>\r\n              <tr>\r\n                "),o=a.if.call(e,"isCommercialCustomer",{hash:{},hashTypes:{},hashContexts:{},inverse:ae.program(33,P,t),fn:ae.program(31,x,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                <td>\r\n                  "),o=a._triageMustache.call(e,"proformaInvoiceModel.cstAmount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n              </tr>\r\n              <tr>\r\n                "),o=a.if.call(e,"isCommercialCustomer",{hash:{},hashTypes:{},hashContexts:{},inverse:ae.program(37,A,t),fn:ae.program(35,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                <td>\r\n                  "),o=a._triageMustache.call(e,"proformaInvoiceModel.vatableAmount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n              </tr>\r\n              <tr>\r\n                "),o=a.if.call(e,"isCommercialCustomer",{hash:{},hashTypes:{},hashContexts:{},inverse:ae.program(41,B,t),fn:ae.program(39,N,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                <td>\r\n                  "),o=a._triageMustache.call(e,"proformaInvoiceModel.vatIncluded",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n          </tr>\r\n            "),""}function C(e,t){var o,n;return t.buffer.push('\r\n                <td colspan="5">\r\n                  '),t.buffer.push(ee((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:proformaInvoiceTab.vatCstable",n):te.call(e,"loc","locale.manageaccount:proformaInvoiceTab.vatCstable",n)))),t.buffer.push("\r\n                </td>\r\n                "),""}function I(e,t){var o,n;return t.buffer.push('\r\n                <td colspan="3">\r\n                  '),t.buffer.push(ee((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:proformaInvoiceTab.vatCstable",n):te.call(e,"loc","locale.manageaccount:proformaInvoiceTab.vatCstable",n)))),t.buffer.push("\r\n                </td>\r\n                "),""}function x(e,t){var o;return t.buffer.push('\r\n                <td colspan="5">\r\n                  '),o=a._triageMustache.call(e,"cstPercentage",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                "),""}function P(e,t){var o;return t.buffer.push('\r\n                <td colspan="3">\r\n                  '),o=a._triageMustache.call(e,"cstPercentage",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                "),""}function S(e,t){var o,n;return t.buffer.push('\r\n                <td colspan="5">\r\n                  '),t.buffer.push(ee((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:proformaInvoiceTab.vatNhilable",n):te.call(e,"loc","locale.manageaccount:proformaInvoiceTab.vatNhilable",n)))),t.buffer.push("\r\n                </td>\r\n                "),""}function A(e,t){var o,n;return t.buffer.push('\r\n                <td colspan="3">\r\n                  '),t.buffer.push(ee((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:proformaInvoiceTab.vatNhilable",n):te.call(e,"loc","locale.manageaccount:proformaInvoiceTab.vatNhilable",n)))),t.buffer.push("\r\n                </td>\r\n                "),""}function N(e,t){var o;return t.buffer.push('\r\n                <td colspan="5">\r\n                  '),o=a._triageMustache.call(e,"vatPercentage",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                "),""}function B(e,t){var o;return t.buffer.push('\r\n                <td colspan="3">\r\n                  '),o=a._triageMustache.call(e,"vatPercentage",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                "),""}function M(e,t){var o;return t.buffer.push("\r\n                "),o=a.if.call(e,"allowExciseDuty",{hash:{},hashTypes:{},hashContexts:{},inverse:ae.program(61,L,t),fn:ae.program(44,R,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),""}function R(e,t){var o;return t.buffer.push("\r\n                  <tr>\r\n                    "),o=a.if.call(e,"isCommercialCustomer",{hash:{},hashTypes:{},hashContexts:{},inverse:ae.program(47,K,t),fn:ae.program(45,w,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    <td>\r\n                      "),o=a._triageMustache.call(e,"proformaInvoiceModel.exciseDutyableAmount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    "),o=a.if.call(e,"isCommercialCustomer",{hash:{},hashTypes:{},hashContexts:{},inverse:ae.program(51,G,t),fn:ae.program(49,O,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    <td>\r\n                      "),o=a._triageMustache.call(e,"proformaInvoiceModel.exciseDutyIncluded",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    "),o=a.if.call(e,"isCommercialCustomer",{hash:{},hashTypes:{},hashContexts:{},inverse:ae.program(55,E,t),fn:ae.program(53,k,t),contexts:[e],
types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    <td>\r\n                      "),o=a._triageMustache.call(e,"proformaInvoiceModel.vatableAmount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    "),o=a.if.call(e,"isCommercialCustomer",{hash:{},hashTypes:{},hashContexts:{},inverse:ae.program(59,F,t),fn:ae.program(57,V,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    <td>\r\n                      "),o=a._triageMustache.call(e,"proformaInvoiceModel.vatIncluded",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </td>\r\n                  </tr>\r\n                "),""}function w(e,t){var o,n;return t.buffer.push('\r\n                    <td colspan="5">\r\n                      '),t.buffer.push(ee((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:proformaInvoiceTab.vatExciseDuty",n):te.call(e,"loc","locale.manageaccount:proformaInvoiceTab.vatExciseDuty",n)))),t.buffer.push("\r\n                    </td>\r\n                    "),""}function K(e,t){var o,n;return t.buffer.push('\r\n                    <td colspan="3">\r\n                      '),t.buffer.push(ee((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:proformaInvoiceTab.vatExciseDuty",n):te.call(e,"loc","locale.manageaccount:proformaInvoiceTab.vatExciseDuty",n)))),t.buffer.push("\r\n                    </td>\r\n                    "),""}function O(e,t){var o;return t.buffer.push('\r\n                    <td colspan="5">\r\n                      '),o=a._triageMustache.call(e,"exciseDutyPercentage",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </td>\r\n                    "),""}function G(e,t){var o;return t.buffer.push('\r\n                    <td colspan="3">\r\n                      '),o=a._triageMustache.call(e,"exciseDutyPercentage",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </td>\r\n                    "),""}function k(e,t){var o,n;return t.buffer.push('\r\n                    <td colspan="5">\r\n                      '),t.buffer.push(ee((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:proformaInvoiceTab.vatable",n):te.call(e,"loc","locale.manageaccount:proformaInvoiceTab.vatable",n)))),t.buffer.push("\r\n                    </td>\r\n                    "),""}function E(e,t){var o,n;return t.buffer.push('\r\n                    <td colspan="3">\r\n                      '),t.buffer.push(ee((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:proformaInvoiceTab.vatable",n):te.call(e,"loc","locale.manageaccount:proformaInvoiceTab.vatable",n)))),t.buffer.push("\r\n                    </td>\r\n                    "),""}function V(e,t){var o;return t.buffer.push('\r\n                    <td colspan="5">\r\n                      '),o=a._triageMustache.call(e,"vatPercentage",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </td>\r\n                    "),""}function F(e,t){var o;return t.buffer.push('\r\n                    <td colspan="3">\r\n                      '),o=a._triageMustache.call(e,"vatPercentage",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </td>\r\n                    "),""}function L(e,t){var o;return t.buffer.push("\r\n                  <tr>\r\n                    "),o=a.if.call(e,"isCommercialCustomer",{hash:{},hashTypes:{},hashContexts:{},inverse:ae.program(55,E,t),fn:ae.program(53,k,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    <td>\r\n                      "),o=a._triageMustache.call(e,"proformaInvoiceModel.vatableAmount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    "),o=a.if.call(e,"isCommercialCustomer",{hash:{},hashTypes:{},hashContexts:{},inverse:ae.program(59,F,t),fn:ae.program(57,V,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    <td>\r\n                      "),o=a._triageMustache.call(e,"proformaInvoiceModel.vatIncluded",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </td>\r\n          </tr>\r\n                "),""}function U(e,t){var o;return t.buffer.push("\r\n            <tr>\r\n                "),o=a.if.call(e,"isCommercialCustomer",{hash:{},hashTypes:{},hashContexts:{},inverse:ae.program(66,_,t),fn:ae.program(64,H,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </tr>\r\n            "),""}function H(e,t){var o;return t.buffer.push('\r\n                <td colspan="5">\r\n                     '),o=a._triageMustache.call(e,"tvLevyKey",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                <td>\r\n                     "),o=a._triageMustache.call(e,"tvLevyValue",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                "),""}function _(e,t){var o;return t.buffer.push('\r\n                <td colspan="3">\r\n                     '),o=a._triageMustache.call(e,"tvLevyKey",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" \r\n                </td>\r\n                <td>\r\n                     "),o=a._triageMustache.call(e,"tvLevyValue",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                "),""}function q(e,t){t.buffer.push("\r\n\r\n        ")}function j(e,t){var o,n;t.buffer.push(ee((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:proformaInvoiceTab.generateInvoice",n):te.call(e,"loc","locale.manageaccount:proformaInvoiceTab.generateInvoice",n))))}function J(e,t){var o,n;t.buffer.push(ee((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:proformaInvoiceTab.send",n):te.call(e,"loc","locale.manageaccount:proformaInvoiceTab.send",n))))}function Q(e,t){var o,n;t.buffer.push(ee((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:proformaInvoiceTab.print",n):te.call(e,"loc","locale.manageaccount:proformaInvoiceTab.print",n))))}function z(e,t){return t.buffer.push("\r\n  "),t.buffer.push(ee(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:proformaInvoiceTab.productDetailsNotAvailable~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function $(e,t){var o,n;return t.buffer.push('\r\n  <table class="table table-bordered komodo-datagrid" width="100%">\r\n    <tr >\r\n      <th width="15%">'),t.buffer.push(ee((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:financialTransactionsTab.account",n):te.call(e,"loc","locale.manageaccount:financialTransactionsTab.account",n)))),t.buffer.push('</th>\r\n      <th width="15%">'),t.buffer.push(ee((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:financialTransactionsTab.amount",n):te.call(e,"loc","locale.manageaccount:financialTransactionsTab.amount",n)))),t.buffer.push('</th>\r\n      <th width="15%">'),t.buffer.push(ee((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:financialTransactionsTab.fromDate",n):te.call(e,"loc","locale.manageaccount:financialTransactionsTab.fromDate",n)))),t.buffer.push('</th>\r\n      <th width="15%">'),t.buffer.push(ee((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:financialTransactionsTab.toDate",n):te.call(e,"loc","locale.manageaccount:financialTransactionsTab.toDate",n)))),t.buffer.push('</th>\r\n      <th width="15%">'),t.buffer.push(ee((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:proformaInvoiceTab.createdDate",n):te.call(e,"loc","locale.manageaccount:proformaInvoiceTab.createdDate",n)))),t.buffer.push("</th>\r\n\r\n    </tr>\r\n\r\n    <tr>\r\n      <td></td>\r\n      <td></td>\r\n      <td></td>\r\n      <td></td>\r\n      <td></td>\r\n      <td></td>\r\n    </tr>\r\n\r\n  </table>\r\n  "),""}function Y(e,t){return t.buffer.push("\r\n  "),t.buffer.push(ee(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:proformaInvoiceTab.invalidCustomer~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var W,X,Z,ee=this.escapeExpression,te=a.helperMissing,ae=this;return n.buffer.push("<div "),n.buffer.push(ee(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:n}))),n.buffer.push('>\r\n  <div>\r\n    <span class="komodo-heading">'),n.buffer.push(ee((X=a.loc||t&&t.loc,Z={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},X?X.call(t,"locale.manageaccount:proformaInvoiceTab.title",Z):te.call(t,"loc","locale.manageaccount:proformaInvoiceTab.title",Z)))),n.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/account">&lt;'),n.buffer.push(ee((X=a.loc||t&&t.loc,Z={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},X?X.call(t,"locale.manageaccount:general.Back",Z):te.call(t,"loc","locale.manageaccount:general.Back",Z)))),n.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  "),W=a.if.call(t,"isCustomerValidForProforma",{hash:{},hashTypes:{},hashContexts:{},inverse:ae.program(80,Y,n),fn:ae.program(1,s,n),contexts:[t],types:["ID"],data:n}),(W||0===W)&&n.buffer.push(W),n.buffer.push("\r\n</div>"),""}),Ember.TEMPLATES.ProformaInvoicePreviewView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o,n;return t.buffer.push("\r\n    "),t.buffer.push(c((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.print",n):l.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.print",n)))),t.buffer.push("\r\n    "),""}function r(e,t){var o,n;return t.buffer.push("\r\n    "),t.buffer.push(c((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.close",n):l.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.close",n)))),t.buffer.push("\r\n    "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var i,l=a.helperMissing,c=this.escapeExpression,u=this;return n.buffer.push('<div style=" width: 750px; height: 565px;">\r\n  <div class="receipt" id="ProformaInvoicePreview" style="height:100%!important; width: 100%!important">\r\n    '),n.buffer.push(c(a._triageMustache.call(t,"data.htmlData",{hash:{unescaped:"true"},hashTypes:{unescaped:"STRING"},hashContexts:{unescaped:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push('\r\n  </div>\r\n  <div style="float:right; margin-bottom:20px">\r\n    <br />\r\n    '),i=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"printProformaInvoice",size:"sm"},hashTypes:{action:"STRING",size:"STRING"},hashContexts:{action:t,size:t},inverse:u.noop,fn:u.program(1,s,n),contexts:[t],types:["ID"],data:n}),(i||0===i)&&n.buffer.push(i),n.buffer.push("\r\n\r\n    "),i=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"close",size:"sm"},hashTypes:{action:"STRING",size:"STRING"},hashContexts:{action:t,size:t},inverse:u.noop,fn:u.program(3,r,n),contexts:[t],types:["ID"],data:n}),(i||0===i)&&n.buffer.push(i),n.buffer.push("\r\n    <br />\r\n  </div>\r\n  <br />\r\n</div>\r\n"),""}),Komodo.Application.ManageAccountUtility=Ember.Object.create({init:function(){},isAnyAccountExist:function(){return Komodo.Services.customerProfileService.currentFinancialAccounts&&Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage&&Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload&&Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount&&Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account},getSmartCardsFromAgreemnt:function(e){var t=[],a=Komodo.Services.ProductAndServiceMaintenanceHelper.create();if(e.ListOfHardware)for(var o=a.createArrayForSingleElement(e.ListOfHardware.Hardware),n=0;n<o.length;n++)t.push(o[n].LinkedSmartcard);return t},getSmartCardsOrDeviceFromAgreemnt:function(e){var t=[],a=Komodo.Services.ProductAndServiceMaintenanceHelper.create();if(e.ListOfHardware)for(var o=a.createArrayForSingleElement(e.ListOfHardware.Hardware),n=0;n<o.length;n++)null!=o[n].LinkedSmartcard&&void 0!=o[n].LinkedSmartcard&&""!=o[n].LinkedSmartcard?t.push(o[n].LinkedSmartcard):t.push(o[n].SerialNumber);return t},getSmartCardsOfAnAccount:function(e){if(e){var t=this,a=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),o=[];if(null!=e.ListOfAgreement&&null!=e.ListOfAgreement.Agreement)for(var n=a.createArrayForSingleElement(e.ListOfAgreement.Agreement),s=0;s<n.length;s++){var r=t.getSmartCardsOrDeviceFromAgreemnt(n[s]),i=r.filter(function(e){return""!==e});o=o.concat(i)}return o}},getSmartCardsOrDeviceOfAnAccount:function(e){if(e){var t=this,a=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),o=[];if(null!=e.ListOfAgreement&&null!=e.ListOfAgreement.Agreement)for(var n=a.createArrayForSingleElement(e.ListOfAgreement.Agreement),s=0;s<n.length;s++){var r=t.getSmartCardsOrDeviceFromAgreemnt(n[s]),i=r.filter(function(e){return""!==e});o=o.concat(i)}return o}}}),Ember.TEMPLATES.PreactivateQouteModalPopupView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o,n;t.buffer.push(c((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:quoteDetails.Ok",n):l.call(e,"loc","locale.manageaccount:quoteDetails.Ok",n))))}function r(e,t){var o,n;return t.buffer.push(" "),t.buffer.push(c((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:quoteDetails.Cancel",n):l.call(e,"loc","locale.manageaccount:quoteDetails.Cancel",n)))),t.buffer.push(" "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var i,l=a.helperMissing,c=this.escapeExpression,u=this;return n.buffer.push('<div style="width:300px; height:200px;padding-left:50px;padding-top:30px">\r\n    \r\n  '),n.buffer.push(c(a.view.call(t,"Komodo.Controls.Select",{hash:{valueBinding:"data.NumberOfDays",label:"~locale.manageaccount:quoteDetails.NumberOfDays~",contentBinding:"data.Days",optionLabelPath:"content",optionValuePath:"content"},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{valueBinding:t,label:t,contentBinding:t,optionLabelPath:t,optionValuePath:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push("\r\n\r\n      <br/>\r\n    <br/>\r\n    <br/>\r\n    "),i=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"preAcivateOk"},hashTypes:{action:"STRING"},hashContexts:{action:t},inverse:u.noop,fn:u.program(1,s,n),contexts:[t],types:["ID"],data:n}),(i||0===i)&&n.buffer.push(i),n.buffer.push("&nbsp;&nbsp;&nbsp;\r\n    "),i=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"preActivateCancel",type:"danger"},hashTypes:{action:"STRING",type:"STRING"},hashContexts:{action:t,type:t},inverse:u.noop,fn:u.program(3,r,n),contexts:[t],types:["ID"],data:n}),(i||0===i)&&n.buffer.push(i),n.buffer.push("&nbsp;&nbsp;&nbsp;\r\n    \r\n</div>\r\n\r\n"),""}),Ember.TEMPLATES.PendingJournalsView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o,n,s;return t.buffer.push('\r\n    <br />\r\n\r\n    <div class="table-responsive">\r\n        <table id="tblPendingTransactions" class="table table-bordered komodo-datagrid">\r\n            <thead>\r\n                <tr>\r\n                    <th style="width:10%;">'),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.managePayments:awaitingApvl.approvalRequestID",s):f.call(e,"loc","locale.managePayments:awaitingApvl.approvalRequestID",s)))),t.buffer.push('</th>\r\n                    <th style="width:10%;">'),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.managePayments:awaitingApvl.grdReqDate",s):f.call(e,"loc","locale.managePayments:awaitingApvl.grdReqDate",s)))),t.buffer.push('</th>\r\n                    <th style="width:10%;">'),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.managePayments:awaitingApvl.grdReqBy",s):f.call(e,"loc","locale.managePayments:awaitingApvl.grdReqBy",s)))),t.buffer.push('</th>\r\n                    <th style="width:10%;">'),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.managePayments:awaitingApvl.grdReqStatus",s):f.call(e,"loc","locale.managePayments:awaitingApvl.grdReqStatus",s)))),t.buffer.push('</th>\r\n                    <th style="width:10%;">'),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.managePayments:awaitingApvl.grdReqComment",s):f.call(e,"loc","locale.managePayments:awaitingApvl.grdReqComment",s)))),t.buffer.push('</th>\r\n                    <th style="width:10%;">'),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.managePayments:awaitingApvl.grdCustNumber",s):f.call(e,"loc","locale.managePayments:awaitingApvl.grdCustNumber",s)))),t.buffer.push('</th>\r\n                    <th style="width:10%;">'),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.managePayments:awaitingApvl.grdTransType",s):f.call(e,"loc","locale.managePayments:awaitingApvl.grdTransType",s)))),t.buffer.push('</th>\r\n                    <th style="width:10%;">'),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.managePayments:awaitingApvl.grdBaseAmt",s):f.call(e,"loc","locale.managePayments:awaitingApvl.grdBaseAmt",s)))),t.buffer.push('</th>\r\n                    <th style="width:10%;">'),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.managePayments:awaitingApvl.grdLedAcc",s):f.call(e,"loc","locale.managePayments:awaitingApvl.grdLedAcc",s)))),t.buffer.push('</th>\r\n                    <th style="width:10%;">'),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.managePayments:awaitingApvl.grdAction",s):f.call(e,"loc","locale.managePayments:awaitingApvl.grdAction",s)))),t.buffer.push("</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                "),o=a.each.call(e,"item","in","gridData",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(2,r,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n            </tbody>\r\n        </table>\r\n        <div style="text-align:center">\r\n            '),t.buffer.push(g(a.view.call(e,"Komodo.Controls.Pager",{hash:{mode:"virtual",contentLengthBinding:"journalsRecords",pageSelectedAction:"pageSelected",currentPageBinding:"pendingFTSModel.selectedPageNumber",itemsPerPage:"15",visiblePageCount:"3"},hashTypes:{mode:"STRING",contentLengthBinding:"STRING",pageSelectedAction:"STRING",currentPageBinding:"STRING",itemsPerPage:"STRING",visiblePageCount:"STRING"},hashContexts:{mode:e,contentLengthBinding:e,pageSelectedAction:e,currentPageBinding:e,itemsPerPage:e,visiblePageCount:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </div>\r\n    </div>\r\n\r\n    "),""}function r(e,t){var o;return t.buffer.push("\r\n                <tr>\r\n                    <td>"),o=a._triageMustache.call(e,"item.approvalRequestID",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                    <td>"),o=a._triageMustache.call(e,"item.requestDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                    <td>"),o=a._triageMustache.call(e,"item.requestedBy",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                    <td>"),o=a._triageMustache.call(e,"item.requestStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                    <td>"),o=a._triageMustache.call(e,"item.requestComment",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                    <td>"),o=a._triageMustache.call(e,"item.customerNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                    <td>"),o=a._triageMustache.call(e,"item.transactionType",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                    <td>"),o=a._triageMustache.call(e,"item.baseAmount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                    <td>"),o=a._triageMustache.call(e,"item.ledgerAccount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                    <td>\r\n                        "),o=a.if.call(e,"item.notRefunds",{hash:{},hashTypes:{},hashContexts:{},inverse:v.program(8,u,t),fn:v.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </td>\r\n                </tr>\r\n                "),""}function i(e,t){var o;return t.buffer.push("\r\n                        "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{contentBinding:"item",action:"approvePendingJournal",size:"xs",tabindex:"5"},hashTypes:{contentBinding:"STRING",action:"STRING",size:"STRING",tabindex:"STRING"},hashContexts:{contentBinding:e,action:e,size:e,tabindex:e},inverse:v.noop,fn:v.program(4,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                        "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{contentBinding:"item",action:"rejectPendingJournal",type:"success",class:"btn-danger",size:"xs",tabindex:"5"},hashTypes:{contentBinding:"STRING",action:"STRING",type:"STRING",class:"STRING",size:"STRING",tabindex:"STRING"},hashContexts:{contentBinding:e,action:e,type:e,class:e,size:e,tabindex:e},inverse:v.noop,fn:v.program(6,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                        "),""}function l(e,t){var o,n;t.buffer.push(g((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:pendingJournalsTab.accept",n):f.call(e,"loc","locale.manageaccount:pendingJournalsTab.accept",n))))}function c(e,t){var o,n;t.buffer.push(g((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:pendingJournalsTab.reject",n):f.call(e,"loc","locale.manageaccount:pendingJournalsTab.reject",n))))}function u(e,t){var o;return t.buffer.push("\r\n                        "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{contentBinding:"item",action:"review",size:"xs",tabindex:"5"},hashTypes:{contentBinding:"STRING",action:"STRING",size:"STRING",tabindex:"STRING"},hashContexts:{contentBinding:e,action:e,size:e,tabindex:e},inverse:v.noop,fn:v.program(9,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                        "),""}function d(e,t){t.buffer.push("Review")}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var h,m,p,f=a.helperMissing,g=this.escapeExpression,v=this;return n.buffer.push("<div "),n.buffer.push(g(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:n}))),n.buffer.push('>\r\n    <div style="width:100%;">\r\n        <span class="komodo-heading">'),n.buffer.push(g((m=a.loc||t&&t.loc,p={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},m?m.call(t,"locale.manageaccount:pendingJournalsTab.title",p):f.call(t,"loc","locale.manageaccount:pendingJournalsTab.title",p)))),n.buffer.push('</span>\r\n        <span class="float-right">\r\n            <b>\r\n                <a href="#/financialTransaction">&lt;'),n.buffer.push(g((m=a.loc||t&&t.loc,p={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},m?m.call(t,"locale.manageaccount:viewAccountInformation.back",p):f.call(t,"loc","locale.manageaccount:viewAccountInformation.back",p)))),n.buffer.push("</a>\r\n            </b>\r\n        </span>\r\n    </div>\r\n    <hr />\r\n    "),h=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.managePayments:awaitingApvl.collapsibleHeading~",isCollapsed:!1,linksBinding:"collapseLinks"},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN",linksBinding:"STRING"},hashContexts:{title:t,isCollapsed:t,linksBinding:t},inverse:v.noop,fn:v.program(1,s,n),contexts:[t],types:["ID"],data:n}),(h||0===h)&&n.buffer.push(h),n.buffer.push("\r\n</div>"),""}),Ember.TEMPLATES.PaymentPlanView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o;return t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageAccount.paymentPlan:paymentPlans.listOfPaymentArrangements~",linksBinding:"link"},hashTypes:{title:"STRING",linksBinding:"STRING"},hashContexts:{title:e,linksBinding:e},inverse:g.noop,fn:g.program(2,r,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function r(e,t){var o,n,s;return t.buffer.push('\r\n\r\n\t\t\t<table id="paymentPlanTable" class="table table-bordered komodo-datagrid">\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th>'),t.buffer.push(f((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:listOfPaymentPlans.id",s):p.call(e,"loc","locale.manageAccount.paymentPlan:listOfPaymentPlans.id",s)))),t.buffer.push("</th>\r\n\t\t\t\t\t<th>"),t.buffer.push(f((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:listOfPaymentPlans.invoiceId",s):p.call(e,"loc","locale.manageAccount.paymentPlan:listOfPaymentPlans.invoiceId",s)))),t.buffer.push("</th>\r\n\t\t\t\t\t<th>"),t.buffer.push(f((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:listOfPaymentPlans.accountNumber",s):p.call(e,"loc","locale.manageAccount.paymentPlan:listOfPaymentPlans.accountNumber",s)))),t.buffer.push("</th>\r\n\t\t\t\t\t<th>"),t.buffer.push(f((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:listOfPaymentPlans.numberOfInstalments",s):p.call(e,"loc","locale.manageAccount.paymentPlan:listOfPaymentPlans.numberOfInstalments",s)))),t.buffer.push("</th>\r\n\t\t\t\t\t<th>"),t.buffer.push(f((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:listOfPaymentPlans.paymentPlanTotal",s):p.call(e,"loc","locale.manageAccount.paymentPlan:listOfPaymentPlans.paymentPlanTotal",s)))),t.buffer.push("</th>\r\n\t\t\t\t\t<th>"),t.buffer.push(f((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:listOfPaymentPlans.startDate",s):p.call(e,"loc","locale.manageAccount.paymentPlan:listOfPaymentPlans.startDate",s)))),t.buffer.push("</th>\r\n\t\t\t\t\t<th>"),t.buffer.push(f((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:listOfPaymentPlans.unpaidBalance",s):p.call(e,"loc","locale.manageAccount.paymentPlan:listOfPaymentPlans.unpaidBalance",s)))),t.buffer.push("</th>\r\n\t\t\t\t\t<th>"),t.buffer.push(f((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:listOfPaymentPlans.actions",s):p.call(e,"loc","locale.manageAccount.paymentPlan:listOfPaymentPlans.actions",s)))),t.buffer.push("</th>\r\n\t\t\t\t</tr>\t\t\t\t\r\n\t\t\t\t\t"),o=a.each.call(e,"item","in","data.invoiceInstalmentPlan",{hash:{},hashTypes:{},hashContexts:{},inverse:g.noop,fn:g.program(3,i,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\t\t\t\t\r\n\t\t\t</table>\r\n\t\t"),""}function i(e,t){var o;return t.buffer.push("\r\n                    <tr>\r\n                        <td>"),o=a._triageMustache.call(e,"item.Id",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                        <td>"),o=a._triageMustache.call(e,"item.InvoiceId",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                        <td>"),o=a._triageMustache.call(e,"item.FinancialAccountId",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),
t.buffer.push("</td>\r\n                        <td>"),o=a._triageMustache.call(e,"item.NumberOfInstallments",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n                        <td class="komodo-decimal">'),o=a._triageMustache.call(e,"item.TotalAmountDue",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                        <td>"),o=a._triageMustache.call(e,"item.StartDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n                        <td class="komodo-decimal">'),o=a._triageMustache.call(e,"item.RemainingAmountDue",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                        <td>\r\n                            "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"editPlan",contentBinding:"item",class:"btn-xs btn-success",visibleBinding:"item.CanEditPlan"},hashTypes:{action:"STRING",contentBinding:"STRING",class:"STRING",visibleBinding:"STRING"},hashContexts:{action:e,contentBinding:e,class:e,visibleBinding:e},inverse:g.noop,fn:g.program(4,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                            "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"viewPlan",contentBinding:"item",class:"btn-xs",visibleBinding:"item.CanViewPlan"},hashTypes:{action:"STRING",contentBinding:"STRING",class:"STRING",visibleBinding:"STRING"},hashContexts:{action:e,contentBinding:e,class:e,visibleBinding:e},inverse:g.noop,fn:g.program(6,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                        </td>\r\n                    </tr>\r\n\t\t\t\t\t"),""}function l(e,t){var o,n;return t.buffer.push(" "),t.buffer.push(f((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:listOfPaymentPlans.edit",n):p.call(e,"loc","locale.manageAccount.paymentPlan:listOfPaymentPlans.edit",n)))),t.buffer.push("\r\n                            "),""}function c(e,t){var o,n;return t.buffer.push(f((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:listOfPaymentPlans.view",n):p.call(e,"loc","locale.manageAccount.paymentPlan:listOfPaymentPlans.view",n)))),t.buffer.push("\r\n                            "),""}function u(e,t){var o,n;return t.buffer.push("\r\n        "),t.buffer.push(f((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:paymentPlans.noFinancialAccount",n):p.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlans.noFinancialAccount",n)))),t.buffer.push(" \r\n    "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var d,h,m,p=a.helperMissing,f=this.escapeExpression,g=this;return n.buffer.push("<div "),n.buffer.push(f(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:n}))),n.buffer.push('>\r\n    <div>\r\n        <span class="komodo-heading">'),n.buffer.push(f((h=a.loc||t&&t.loc,m={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},h?h.call(t,"locale.manageAccount.paymentPlan:paymentPlans.paymentPlanHeading",m):p.call(t,"loc","locale.manageAccount.paymentPlan:paymentPlans.paymentPlanHeading",m)))),n.buffer.push('</span>\r\n        <span class="float-right">\r\n            <b>\r\n                <a href="#/account">&lt;'),n.buffer.push(f((h=a.loc||t&&t.loc,m={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},h?h.call(t,"locale.manageaccount:general.Back",m):p.call(t,"loc","locale.manageaccount:general.Back",m)))),n.buffer.push("</a>\r\n            </b>\r\n        </span>\r\n    </div>\r\n\t<hr/>\r\n    "),d=a.if.call(t,"_hasFinancialAccount",{hash:{},hashTypes:{},hashContexts:{},inverse:g.program(8,u,n),fn:g.program(1,s,n),contexts:[t],types:["ID"],data:n}),(d||0===d)&&n.buffer.push(d),n.buffer.push("\t\r\n</div>"),""}),Ember.TEMPLATES.PaymentPlanDetailsView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(2,r,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\t"),""}function r(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:y.noop,fn:y.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\t"),""}function i(e,t){var o,n,s;return t.buffer.push("\r\n    "),o=a.each.call(e,"statusResponse","in","_statusResponses",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(4,l,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    <div "),t.buffer.push(v(a["bind-attr"].call(e,{hash:{class:"_showProcessing:komodo-show:komodo-hidden"},hashTypes:{class:"STRING"},hashContexts:{class:e},contexts:[],types:[],data:t}))),t.buffer.push('>\r\n        <img src="Content/Images/busy-small.svg" />&nbsp;'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.komodo:busyIndicator.typeProcessing",s):b.call(e,"loc","locale.komodo:busyIndicator.typeProcessing",s)))),t.buffer.push("\r\n    </div>\r\n\t"),""}function l(e,t){var o;return t.buffer.push("\r\n    <div><img "),t.buffer.push(v(a["bind-attr"].call(e,{hash:{src:"statusResponse.imageUrl"},hashTypes:{src:"STRING"},hashContexts:{src:e},contexts:[],types:[],data:t}))),t.buffer.push(" />&nbsp;"),o=a._triageMustache.call(e,"statusResponse.status",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(": "),o=a._triageMustache.call(e,"statusResponse.dateChanged",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n    "),""}function c(e,t){var o,n,s;return t.buffer.push("\r\n\t"),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(7,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        <br />\r\n        <hr />\r\n        <br />\r\n        "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:paymentPlanDetails.listOfInstalments~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('<br />\r\n        <br />\r\n        <table id="paymentPlanTable" class="table table-bordered komodo-datagrid">\r\n            <tr>\r\n                <th>'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:listOfInstalments.instalment",s):b.call(e,"loc","locale.manageAccount.paymentPlan:listOfInstalments.instalment",s)))),t.buffer.push("</th>\r\n                <th>"),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:listOfInstalments.dueDate",s):b.call(e,"loc","locale.manageAccount.paymentPlan:listOfInstalments.dueDate",s)))),t.buffer.push("</th>\r\n                <th>"),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:listOfInstalments.amount",s):b.call(e,"loc","locale.manageAccount.paymentPlan:listOfInstalments.amount",s)))),t.buffer.push("</th>\r\n                <th>"),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:listOfInstalments.status",s):b.call(e,"loc","locale.manageAccount.paymentPlan:listOfInstalments.status",s)))),t.buffer.push("</th>\r\n            </tr>\r\n            "),o=a.each.call(e,"instalment","in","data.instalmentPlanDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(12,m,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </table>\r\n        <br />\r\n    "),""}function u(e,t){var o;return t.buffer.push("\r\n\t"),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(8,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(10,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function d(e,t){return t.buffer.push("\r\n\t"),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:paymentPlanDetails.paymentPlanId~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n                "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.planId"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br /><br />\r\n                "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:paymentPlanDetails.loanLedgerAccount~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n                "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.loanLedgerAccount"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br /><br />\r\n                "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:paymentPlanDetails.paymentPlanTotal~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n                "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.totalAmount"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br /><br />\r\n                "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:listOfPaymentPlans.unpaidBalance~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n                "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.unpaidBalance"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br /><br />\r\n            "),""}function h(e,t){return t.buffer.push("\r\n                "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:paymentPlanDetails.accountNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n                "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.accountNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br /><br />\r\n                "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:paymentPlanDetails.termLedgerAccount~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n                "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.termLedgerAccount"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br /><br />\r\n                "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:paymentPlanDetails.numberOfInstalments~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n                "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.numberOfInstalments"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br /><br />\r\n                "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:listOfPaymentPlans.startDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n                "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.startDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br /><br />\r\n            "),""}function m(e,t){var o;return t.buffer.push("\r\n            <tr>\r\n                <td>"),o=a._triageMustache.call(e,"instalment.Id",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                <td>"),o=a._triageMustache.call(e,"instalment.DueDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n                <td class="komodo-decimal">'),o=a._triageMustache.call(e,"instalment.Amount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                <td>"),o=a._triageMustache.call(e,"instalment.Status",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n            </tr>\r\n            "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var p,f,g,v=this.escapeExpression,y=this,b=a.helperMissing;return n.buffer.push("<div "),n.buffer.push(v(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:n}))),n.buffer.push('>\r\n    <div>\r\n        <span class="komodo-heading">'),n.buffer.push(v((f=a.loc||t&&t.loc,g={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},f?f.call(t,"locale.manageAccount.paymentPlan:paymentPlans.paymentPlanDetails",g):b.call(t,"loc","locale.manageAccount.paymentPlan:paymentPlans.paymentPlanDetails",g)))),n.buffer.push('</span>\r\n        <span class="float-right">\r\n            <b>\r\n                <a href="#/paymentPlan">&lt;'),n.buffer.push(v((f=a.loc||t&&t.loc,g={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},f?f.call(t,"locale.manageaccount:general.Back",g):b.call(t,"loc","locale.manageaccount:general.Back",g)))),n.buffer.push("</a>\r\n            </b>\r\n        </span>\r\n    </div>\r\n    <hr />\r\n    "),p=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageAccount.paymentPlan:paymentPlans.results~",visibleBinding:"_showResults"},hashTypes:{title:"STRING",visibleBinding:"STRING"},hashContexts:{title:t,visibleBinding:t},inverse:y.noop,fn:y.program(1,s,n),contexts:[t],types:["ID"],data:n}),(p||0===p)&&n.buffer.push(p),n.buffer.push("\r\n\r\n\t"),p=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageAccount.paymentPlan:paymentPlans.paymentPlanDetails~",visibleBinding:"_showDataEntry"},hashTypes:{title:"STRING",visibleBinding:"STRING"},hashContexts:{title:t,visibleBinding:t},inverse:y.noop,fn:y.program(6,c,n),contexts:[t],types:["ID"],data:n}),(p||0===p)&&n.buffer.push(p),n.buffer.push("\r\n</div>"),""}),Ember.TEMPLATES.PaymentPlanApplicationsView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o,n,s;return t.buffer.push('\r\n\t<br/>\r\n\t<table id="paymentPlanApps" class="table table-bordered komodo-datagrid">\r\n\t\t\t<tr>\r\n\t\t\t\t<th>'),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplications.productTaken",s):f.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplications.productTaken",s)))),t.buffer.push("</th>\r\n\t\t\t\t<th>"),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplications.internalCreditApproval",s):f.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplications.internalCreditApproval",s)))),t.buffer.push("</th>\r\n\t\t\t\t<th>"),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplications.creditVetting",s):f.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplications.creditVetting",s)))),t.buffer.push("</th>\r\n\t\t\t\t<th>"),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplications.highestProdQualified",s):f.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplications.highestProdQualified",s)))),t.buffer.push("</th>\r\n\t\t\t\t<th>"),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplications.applicationDate",s):f.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplications.applicationDate",s)))),t.buffer.push("</th>\r\n\t\t\t\t<th>"),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplications.applicationStatus",s):f.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplications.applicationStatus",s)))),t.buffer.push("</th>\r\n\t\t\t\t<th>"),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplications.actions",s):f.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplications.actions",s)))),t.buffer.push("</th>\r\n\t\t\t</tr>\r\n\t\t"),o=a.each.call(e,"item","in","allApps",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(2,r,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n\t</table>\r\n\t"),""}function r(e,t){var o;return t.buffer.push("\r\n\t\t\t<tr>\r\n\t\t\t\t<td>"),o=a._triageMustache.call(e,"item.productName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n\t\t\t\t<td>"),o=a._triageMustache.call(e,"item.internalVetting",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n\t\t\t\t<td>"),o=a._triageMustache.call(e,"item.creditVetting",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n\t\t\t\t<td>"),o=a._triageMustache.call(e,"item.highestProductQualified",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n\t\t\t\t<td>"),o=a._triageMustache.call(e,"item.createdDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n\t\t\t\t<td>"),o=a._triageMustache.call(e,"item.statusDescription",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n\t\t\t\t<td>"),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"redirect",contentBinding:"item",class:"btn-xs"},hashTypes:{action:"STRING",contentBinding:"STRING",class:"STRING"},hashContexts:{action:e,contentBinding:e,class:e},inverse:v.noop,fn:v.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n\t\t\t</tr>\r\n\t\t"),""}function i(e,t){var o,n;return t.buffer.push(" "),t.buffer.push(g((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplications.view",n):f.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplications.view",n)))),t.buffer.push("\r\n                "),""}function l(e,t){var o,n,s;return t.buffer.push('\r\n\r\n\t<table id="paymentPlanTable" class="0table table-bordered komodo-datagrid">\r\n\t\t\t<tr>\r\n\t\t\t\t<th>'),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlans.accountNumber",s):f.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlans.accountNumber",s)))),t.buffer.push("</th>\r\n\t\t\t\t<th>"),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlans.product",s):f.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlans.product",s)))),t.buffer.push("</th>\r\n\t\t\t\t<th>"),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlans.deviceNumber",s):f.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlans.deviceNumber",s)))),t.buffer.push("</th>\r\n\t\t\t\t<th>"),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlans.activationDate",s):f.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlans.activationDate",s)))),t.buffer.push("</th>\r\n\t\t\t\t<th>"),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlans.numberOfInstallment",s):f.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlans.numberOfInstallment",s)))),t.buffer.push("</th>\r\n\t\t\t\t<th>"),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlans.paymentPlanTotal",s):f.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlans.paymentPlanTotal",s)))),t.buffer.push("</th>\r\n\t\t\t\t<th>"),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlans.amountInvoiced",s):f.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlans.amountInvoiced",s)))),t.buffer.push("</th>\r\n\t\t\t\t<th>"),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlans.status",s):f.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlans.status",s)))),t.buffer.push("</th>\r\n\t\t\t\t<th>"),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlans.unpaidBalance",s):f.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlans.unpaidBalance",s)))),t.buffer.push("</th>\r\n\t\t\t\t<th>"),t.buffer.push(g((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlans.actions",s):f.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlans.actions",s)))),t.buffer.push("</th>\r\n\t\t\t</tr>\r\n\t\t"),o=a.each.call(e,"data","in","allApplications",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(6,c,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\t</table>\r\n\r\n\t"),""}function c(e,t){var o;return t.buffer.push("\r\n\t\t\t<tr>\r\n\t\t\t\t<td>"),o=a._triageMustache.call(e,"data.accountNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n\t\t\t\t<td>"),o=a._triageMustache.call(e,"data.productName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n\t\t\t\t<td>"),o=a._triageMustache.call(e,"data.deviceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n\t\t\t\t<td>"),o=a._triageMustache.call(e,"data.activationDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n\t\t\t\t<td>"),o=a._triageMustache.call(e,"data.numberOfInstallment",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n\t\t\t\t<td>"),o=a._triageMustache.call(e,"data.paymentPlanTotal",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n\t\t\t\t<td>"),o=a._triageMustache.call(e,"data.amountInvoiced",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n\t\t\t\t<td>"),o=a._triageMustache.call(e,"data.statusDescription",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n\t\t\t\t<td>"),o=a._triageMustache.call(e,"data.unpaidBalance",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n\t\t\t\t<td> \r\n\t\t\t\t"),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"managePlan",contentBinding:"data",class:"btn-success btn-xs"},hashTypes:{action:"STRING",contentBinding:"STRING",class:"STRING"},hashContexts:{action:e,contentBinding:e,class:e},inverse:v.noop,fn:v.program(7,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\t\t\t\t "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"redirectToPlan",contentBinding:"data",class:"btn-xs",disableBinding:"disbleViewButton"},hashTypes:{action:"STRING",contentBinding:"STRING",class:"STRING",disableBinding:"STRING"},hashContexts:{action:e,contentBinding:e,class:e,disableBinding:e},inverse:v.noop,fn:v.program(9,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n\t\t\t</tr>\r\n\t\t"),""}function u(e,t){var o,n;return t.buffer.push(" "),t.buffer.push(g((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:paymentPlans.manage",n):f.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlans.manage",n)))),t.buffer.push("\r\n                "),""}function d(e,t){var o,n;return t.buffer.push(" "),t.buffer.push(g((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:paymentPlans.view",n):f.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlans.view",n)))),t.buffer.push("\r\n                "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var h,m,p,f=a.helperMissing,g=this.escapeExpression,v=this;return n.buffer.push("<div "),n.buffer.push(g(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:n}))),n.buffer.push('>\r\n  <p class="komodo-heading">'),n.buffer.push(g((m=a.loc||t&&t.loc,p={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},m?m.call(t,"locale.manageAccount.paymentPlan:paymentPlanApplications.useCaseTitle",p):f.call(t,"loc","locale.manageAccount.paymentPlan:paymentPlanApplications.useCaseTitle",p)))),n.buffer.push("</p>\r\n\t "),h=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageAccount.paymentPlan:paymentPlanApplications.listOfPaymentPlanApps~",linksBinding:"link"},hashTypes:{title:"STRING",linksBinding:"STRING"},hashContexts:{title:t,linksBinding:t},inverse:v.noop,fn:v.program(1,s,n),contexts:[t],types:["ID"],data:n}),(h||0===h)&&n.buffer.push(h),n.buffer.push("\r\n\r\n\t"),h=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageAccount.paymentPlan:paymentPlans.listOfDevicePaymentPlans~"},hashTypes:{title:"STRING"},hashContexts:{title:t},inverse:v.noop,fn:v.program(5,l,n),contexts:[t],types:["ID"],data:n}),(h||0===h)&&n.buffer.push(h),n.buffer.push("\r\n</div>\r\n"),""}),Ember.TEMPLATES.PaymentPlanApplicationDetailsView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o,n,s;return t.buffer.push('\r\n  <table width="100%">\r\n    <tr>\r\n      <td width="50%">\r\n        <p class="info-heading">'),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"Customer Number",s):F.call(e,"loc","Customer Number",s)))),t.buffer.push(" </p>\r\n        "),o=a._triageMustache.call(e,"paymentPlanDtlsModel.iccCustomerNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n      </td>\r\n      <td width="50%">\r\n        <table width="100%">\r\n          <tr>\r\n            <td width="50%">\r\n              <p class="info-heading">'),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.accountNumber",s):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.accountNumber",s)))),t.buffer.push("</p>\r\n              "),o=a._triageMustache.call(e,"paymentPlanDtlsModel.accountNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n            </td>\r\n            <td width="50%" align="right" valign="top">\r\n            </td>\r\n          </tr>\r\n        </table>\r\n\r\n      </td>\r\n    </tr>\r\n\r\n    <tr>\r\n      <td width="50%">\r\n      </td>\r\n      <td width="50%">\r\n      </td>\r\n    </tr>\r\n\r\n    <tr>\r\n\r\n      <td width="50%">\r\n        <p class="info-heading">'),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},
n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.highestProductQualified",s):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.highestProductQualified",s)))),t.buffer.push("</p>\r\n        "),o=a._triageMustache.call(e,"paymentPlanDtlsModel.highestProductQualified",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n      </td>\r\n      <td width="50%">\r\n        '),t.buffer.push(V(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"4",valueBinding:"paymentPlanDtlsModel.productName",label:"~locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.chooseProduct~",validatorBinding:"validators.productNameValidator",class:"info-heading",disableBinding:"paymentPlanDtlsModel.disableProduct",prompt:" ",contentBinding:"_productName",optionLabelPath:"content.label",optionValuePath:"content.key"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING",class:"STRING",disableBinding:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e,class:e,disableBinding:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n\r\n    </tr>\r\n\r\n    <tr>\r\n      <td width="50%">\r\n      </td>\r\n      <td width="50%">\r\n      </td>\r\n    </tr>\r\n\r\n    '),o=a.if.call(e,"isMWEBProduct",{hash:{},hashTypes:{},hashContexts:{},inverse:L.noop,fn:L.program(2,r,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.if.call(e,"isADSLRequired",{hash:{},hashTypes:{},hashContexts:{},inverse:L.noop,fn:L.program(4,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n\r\n    \r\n\r\n    <tr>\r\n      <td width="50%">\r\n        <p class="info-heading">'),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.internalCreditApproval",s):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.internalCreditApproval",s)))),t.buffer.push("</p>\r\n        "),o=a._triageMustache.call(e,"paymentPlanDtlsModel.internalCreditApproval",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n      </td>\r\n      <td width="50%">\r\n        <p class="info-heading">'),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.creditVetting",s):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.creditVetting",s)))),t.buffer.push("</p>\r\n        "),o=a._triageMustache.call(e,"paymentPlanDtlsModel.creditVetting",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n      </td>\r\n    </tr>\r\n\r\n    <tr>\r\n      <td width="50%">\r\n      </td>\r\n      <td width="50%">\r\n      </td>\r\n    </tr>\r\n\r\n    <tr>\r\n      <td width="50%">\r\n        <p class="info-heading">'),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.ahvStatus",s):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.ahvStatus",s)))),t.buffer.push("</p>\r\n          "),o=a.if.call(e,"paymentPlanDtlsModel.isNonComplaint",{hash:{},hashTypes:{},hashContexts:{},inverse:L.program(8,c,t),fn:L.program(6,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n        \r\n      </td>\r\n      <td width="50%">\r\n        <p class="info-heading">'),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.applicationStatus",s):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.applicationStatus",s)))),t.buffer.push("</p>\r\n        "),o=a._triageMustache.call(e,"paymentPlanDtlsModel.applicationStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n      </td>\r\n    </tr>\r\n\r\n    <tr>\r\n      <td width="50%">\r\n      </td>\r\n      <td width="50%">\r\n      </td>\r\n    </tr>\r\n\r\n    '),o=a.if.call(e,"delayInAppsmartResponse",{hash:{},hashTypes:{},hashContexts:{},inverse:L.noop,fn:L.program(10,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    \r\n  </table>\r\n          \r\n    <hr />    \r\n    <b>"),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.uploadDocument",s):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.uploadDocument",s)))),t.buffer.push('</b>\r\n   <table width="100%">\r\n    <tr>\r\n      <td>\r\n        <table>\r\n          <tr>\r\n            <td>\r\n              '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{id:"pickfiles",disableBinding:"paymentPlanDtlsModel.addDocDisable"},hashTypes:{id:"STRING",disableBinding:"STRING"},hashContexts:{id:e,disableBinding:e},inverse:L.noop,fn:L.program(12,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n            </td>\r\n            <td>\r\n          \r\n            </td>\r\n          </tr>\r\n        </table>\r\n            </td>\r\n          </tr>\r\n\r\n          <tr>\r\n            <td width="100%">\r\n              '),o=a.if.call(e,"data.enableDocGrid",{hash:{},hashTypes:{},hashContexts:{},inverse:L.noop,fn:L.program(14,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </td>\r\n          </tr>\r\n\r\n        </table>\r\n     \r\n    "),o=a.if.call(e,"firstAuthenticated",{hash:{},hashTypes:{},hashContexts:{},inverse:L.noop,fn:L.program(22,y,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      \r\n    \r\n\r\n    "),o=a.if.call(e,"authenticated",{hash:{},hashTypes:{},hashContexts:{},inverse:L.noop,fn:L.program(27,T,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n   \r\n  "),""}function r(e,t){return t.buffer.push('\r\n    <tr>\r\n      <td width="50%">\r\n        '),t.buffer.push(V(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"5",valueBinding:"paymentPlanDtlsModel.addOnName",label:"~locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.chooseAddOn~",validatorBinding:"validators.addOnNameValidator",class:"info-heading",prompt:" ",contentBinding:"_addOnName",optionLabelPath:"content.label",optionValuePath:"content.key"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING",class:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e,class:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n      <td width="50%">\r\n        '),t.buffer.push(V(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"6",valueBinding:"paymentPlanDtlsModel.lineInstruction",label:"~locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.chooseMwebLineInstruction~",validatorBinding:"validators.lineInstructionValidator",class:"info-heading",prompt:" ",contentBinding:"_lineInstruction",optionLabelPath:"content.label",optionValuePath:"content.key"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING",class:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e,class:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n    </tr>\r\n    <tr>\r\n      <td width="50%">\r\n      </td>\r\n      <td width="50%">\r\n      </td>\r\n    </tr>\r\n    '),""}function i(e,t){return t.buffer.push('\r\n    <tr>\r\n      <td width="50%">\r\n        '),t.buffer.push(V(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"400",valueBinding:"paymentPlanDtlsModel.adslNumber",class:"info-heading",label:"~locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.adslContact~",validatorBinding:"validators.adslNumberValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",class:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,class:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n      <td width="50%">        \r\n      </td>\r\n    </tr>\r\n    <tr>\r\n      <td width="50%">\r\n      </td>\r\n      <td width="50%">\r\n      </td>\r\n    </tr>\r\n    '),""}function l(e,t){var o;return t.buffer.push('\r\n          <div >\r\n            <span style="background-color:#dd5b5a; color:white; width:100%; border-radius:5px; text-align:center; padding-left:10px; padding-right:10px;">\r\n                '),o=a._triageMustache.call(e,"paymentPlanDtlsModel.ahvStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </span>\r\n         </div>\r\n          "),""}function c(e,t){var o;return t.buffer.push("\r\n           <div>\r\n                "),o=a._triageMustache.call(e,"paymentPlanDtlsModel.ahvStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n         </div>\r\n          "),""}function u(e,t){t.buffer.push('\r\n    <tr>\r\n      <td width="100%" colspan="2">\r\n        <b style="color:red"> Credit assessments are underway, Consultant will get back to you with the outcome of your application</b>\r\n      </td>\r\n    </tr>\r\n    ')}function d(e,t){var o,n;return t.buffer.push("\r\n              "),t.buffer.push(V((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.addDocs",n):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.addDocs",n)))),t.buffer.push("\r\n              "),""}function h(e,t){var o,n,s;return t.buffer.push('\r\n              <table width="100%" class="table table-bordered komodo-datagrid">\r\n                <thead>\r\n                  <tr>\r\n                    <th width="50%">'),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"Document",s):F.call(e,"loc","Document",s)))),t.buffer.push('</th>\r\n                    <th width="20%">'),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"Type",s):F.call(e,"loc","Type",s)))),t.buffer.push('</th>\r\n                    <th width="10%">'),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"Percentage",s):F.call(e,"loc","Percentage",s)))),t.buffer.push('</th>\r\n                    <th width="10%">'),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"Status",s):F.call(e,"loc","Status",s)))),t.buffer.push('</th>\r\n                    <th width="10%">'),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"Action",s):F.call(e,"loc","Action",s)))),t.buffer.push("</th>\r\n                  </tr>\r\n                </thead>\r\n                "),o=a.each.call(e,"row","in","data.customerDocuments",{hash:{},hashTypes:{},hashContexts:{},inverse:L.noop,fn:L.program(15,m,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              </table>\r\n              "),""}function m(e,t){var o;return t.buffer.push("\r\n                <tbody>\r\n                  <tr>\r\n                    <td>\r\n                      "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"row.documentName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                    </td>\r\n                    <td>\r\n                      "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{valueBinding:"row.documentType",contentBinding:"row.documentTypes",optionLabelPath:"content.value",optionValuePath:"content.value",tabindex:"11",class:"komodo-grid-edit",disabledBinding:"row.isDocumentTypeDisable"},hashTypes:{valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",tabindex:"STRING",class:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,tabindex:e,class:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                    </td>\r\n                    <td>\r\n                      "),o=a._triageMustache.call(e,"row.uploadPercentage",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </td>\r\n                    <td>\r\n                      "),o=a._triageMustache.call(e,"row.uploadStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </td>\r\n                    <td>\r\n                      "),o=a.if.call(e,"row.isAlready",{hash:{},hashTypes:{},hashContexts:{},inverse:L.program(19,g,t),fn:L.program(16,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n                "),""}function p(e,t){var o;return t.buffer.push("\r\n\r\n                      "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"viewDocs",size:"xs",type:"success",contentBinding:"row",tabindex:"24"},hashTypes:{action:"STRING",size:"STRING",type:"STRING",contentBinding:"STRING",tabindex:"STRING"},hashContexts:{action:e,size:e,type:e,contentBinding:e,tabindex:e},inverse:L.noop,fn:L.program(17,f,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n                      "),""}function f(e,t){var o,n;return t.buffer.push("\r\n                      "),t.buffer.push(V((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.view",n):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.view",n)))),t.buffer.push("\r\n                      "),""}function g(e,t){var o;return t.buffer.push("\r\n\r\n                      "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"removeDocument",size:"xs",type:"danger",tabindex:"24",contentBinding:"row"},hashTypes:{action:"STRING",size:"STRING",type:"STRING",tabindex:"STRING",contentBinding:"STRING"},hashContexts:{action:e,size:e,type:e,tabindex:e,contentBinding:e},inverse:L.noop,fn:L.program(20,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n                      "),""}function v(e,t){var o,n;return t.buffer.push("\r\n                      "),t.buffer.push(V((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.delete",n):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.delete",n)))),t.buffer.push("\r\n                      "),""}function y(e,t){var o,n,s;return t.buffer.push("\r\n    \r\n    <b>"),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.supervisorAuthentication",s):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.supervisorAuthentication",s)))),t.buffer.push('</b>\r\n    <br />    \r\n    <table width="100%">\r\n     <tr>\r\n      <td width="50%">\r\n          '),t.buffer.push(V(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"200",valueBinding:"paymentPlanDtlsModel.supervisorUsername",label:"~locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.supervisorUsername~"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n      <td width="50%">\r\n          '),t.buffer.push(V(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"201",type:"password",valueBinding:"paymentPlanDtlsModel.supervisorPassword",label:"~locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.supervisorPassword~"},hashTypes:{tabindex:"STRING",type:"STRING",valueBinding:"STRING",label:"STRING"},hashContexts:{tabindex:e,type:e,valueBinding:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n    </tr>\r\n     <tr>\r\n      <td width="50%">          \r\n      </td>\r\n      <td width="50%" align="right">          \r\n          '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{id:"registerevents",action:"authenticate",tabindex:"202",class:"btn-success"},hashTypes:{id:"STRING",action:"STRING",tabindex:"STRING",class:"STRING"},hashContexts:{id:e,action:e,tabindex:e,class:e},inverse:L.noop,fn:L.program(23,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"clear",tabindex:"203",class:"btn-inverse"},hashTypes:{action:"STRING",tabindex:"STRING",class:"STRING"},hashContexts:{action:e,tabindex:e,class:e},inverse:L.noop,fn:L.program(25,D,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td>\r\n    </tr>\r\n    </table>\r\n    "),""}function b(e,t){var o,n;return t.buffer.push("\r\n          "),t.buffer.push(V((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.authenticate",n):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.authenticate",n)))),""}function D(e,t){var o,n;return t.buffer.push("\r\n          "),t.buffer.push(V((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.clear",n):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.clear",n)))),""}function T(e,t){var o,n,s;return t.buffer.push('\r\n    \r\n    <table width="100%">\r\n     <tr>\r\n      <td width="50%">\r\n          '),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.supervisorUsername",s):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.supervisorUsername",s)))),t.buffer.push('\r\n      </td>\r\n      <td width="50%">\r\n          '),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"paymentPlanDtlsModel.acceptAddedDocument",tabindex:"204"},hashTypes:{checkedBinding:"STRING",tabindex:"STRING"},hashContexts:{checkedBinding:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.acceptDocuments",s):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.acceptDocuments",s)))),t.buffer.push('\r\n      </td>\r\n    </tr>\r\n     <tr>\r\n      <td width="50%">     \r\n          '),o=a._triageMustache.call(e,"paymentPlanDtlsModel.supervisorName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('     \r\n      </td>\r\n      <td width="50%" align="right">\r\n\r\n          '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{id:"uploadfiles",tabindex:"202",disableBinding:"paymentPlanDtlsModel.acceptDocs"},hashTypes:{id:"STRING",tabindex:"STRING",disableBinding:"STRING"},hashContexts:{id:e,tabindex:e,disableBinding:e},inverse:L.noop,fn:L.program(28,C,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"rejectOverideAhv",tabindex:"203",class:"btn-danger"},hashTypes:{action:"STRING",tabindex:"STRING",class:"STRING"},hashContexts:{action:e,tabindex:e,class:e},inverse:L.noop,fn:L.program(30,I,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            \r\n      </td>\r\n    </tr>\r\n        </table>\r\n    "),""}function C(e,t){var o,n;return t.buffer.push("\r\n          "),t.buffer.push(V((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.overrideAHV",n):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.overrideAHV",n)))),""}function I(e,t){var o,n;return t.buffer.push("\r\n          "),t.buffer.push(V((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.rejectAHV",n):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.rejectAHV",n)))),""}function x(e,t){var o,n,s;return t.buffer.push('\r\n  <table width="100%">\r\n    <tr>\r\n      <td width="50%">\r\n        '),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"paymentPlanDtlsModel.idValidated",disableBinding:"isCustomerCreated"},hashTypes:{checkedBinding:"STRING",disableBinding:"STRING"},hashContexts:{checkedBinding:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.idValidated",s):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.idValidated",s)))),t.buffer.push('\r\n      </td>\r\n      <td width="50%">\r\n           '),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"paymentPlanDtlsModel.addressValidated",disableBinding:"isCustomerCreated"},hashTypes:{checkedBinding:"STRING",disableBinding:"STRING"},hashContexts:{checkedBinding:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.addressValidated",s):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.addressValidated",s)))),t.buffer.push('\r\n      </td>\r\n\r\n       \r\n    </tr>\r\n\r\n      <tr>\r\n      <td width="50%">\r\n           '),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"paymentPlanDtlsModel.incomeValidated",disableBinding:"isCustomerCreated"},hashTypes:{checkedBinding:"STRING",disableBinding:"STRING"},hashContexts:{checkedBinding:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.incomeValidated",s):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.incomeValidated",s)))),t.buffer.push('\r\n      </td>\r\n      <td width="50%">\r\n          '),o=a.if.call(e,"paymentPlanDtlsModel.isForeighnNational",{hash:{},hashTypes:{},hashContexts:{},inverse:L.noop,fn:L.program(33,P,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n      </td>\r\n    </tr>\r\n\r\n      <tr>\r\n           <td width="50%">\r\n               '),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"paymentPlanDtlsModel.overrideFlag",disableBinding:"alreadyOverrideApplication"},hashTypes:{checkedBinding:"STRING",disableBinding:"STRING"},hashContexts:{checkedBinding:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.override",s):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.override",s)))),t.buffer.push('\r\n\r\n               </td>\r\n          <td width="50%">\r\n               </td>\r\n\r\n\r\n      </tr>\r\n \r\n  </table>\r\n  <hr />\r\n   \r\n\r\n    <table width="100%">\r\n        <tr width="80%">\r\n            <td >\r\n                '),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.overrideRemark",s):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.overrideRemark",s)))),t.buffer.push("\r\n                 <br />\r\n                 <br />\r\n                 \r\n                "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextArea",{hash:{valueBinding:"paymentPlanDtlsModel.overrideRemark",class:"col-xs-12",disableBinding:"alreadyOverrideApplicationRemark"},hashTypes:{valueBinding:"STRING",class:"STRING",disableBinding:"STRING"},hashContexts:{valueBinding:e,class:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            </td>\r\n        </tr>\r\n    </table>\r\n\r\n  "),""}function P(e,t){var o,n;return t.buffer.push("\r\n           "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"paymentPlanDtlsModel.workPermit",disableBinding:"isCustomerCreated"},hashTypes:{checkedBinding:"STRING",disableBinding:"STRING"},hashContexts:{checkedBinding:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(V((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.workPermit",n):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.workPermit",n)))),t.buffer.push("\r\n         "),""}function S(e,t){var o,n,s;return t.buffer.push('\r\n  <table width="100%">\r\n    <tr>\r\n      <td width="33%">\r\n        '),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"paymentPlanDtlsModel.internalVettingCheck",disableBinding:"true"},hashTypes:{checkedBinding:"STRING",disableBinding:"STRING"},hashContexts:{checkedBinding:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.internalVettingCheck",s):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.internalVettingCheck",s)))),t.buffer.push('\r\n      </td>\r\n      <td width="33%">\r\n        '),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"paymentPlanDtlsModel.creditVettingCheck",disableBinding:"true"},hashTypes:{checkedBinding:"STRING",disableBinding:"STRING"},hashContexts:{checkedBinding:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.creditVettingCheck",s):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.creditVettingCheck",s)))),t.buffer.push('\r\n      </td>\r\n      <td width="34%">\r\n        '),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"paymentPlanDtlsModel.highestProductValidatedCheck",disableBinding:"true"},hashTypes:{checkedBinding:"STRING",disableBinding:"STRING"},hashContexts:{checkedBinding:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.highestProductValidatedCheck",s):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.highestProductValidatedCheck",s)))),t.buffer.push('\r\n      </td>\r\n    </tr>\r\n    <tr>\r\n      <td width="33%">\r\n        '),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"paymentPlanDtlsModel.ahvCompliantCheck",disableBinding:"true"},hashTypes:{checkedBinding:"STRING",disableBinding:"STRING"},hashContexts:{checkedBinding:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.ahvCompliantCheck",s):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.ahvCompliantCheck",s)))),t.buffer.push('\r\n      </td>\r\n      <td width="33%">\r\n        '),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"paymentPlanDtlsModel.productConfirmedCheck",disableBinding:"true"},hashTypes:{checkedBinding:"STRING",disableBinding:"STRING"},hashContexts:{checkedBinding:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.productConfirmedCheck",s):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.productConfirmedCheck",s)))),t.buffer.push('\r\n      </td>\r\n      <td width="34%">\r\n        '),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"paymentPlanDtlsModel.incomeProofValidatedCheck",disableBinding:"true"},hashTypes:{checkedBinding:"STRING",disableBinding:"STRING"},hashContexts:{checkedBinding:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.incomeProofValidatedCheck",s):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.incomeProofValidatedCheck",s)))),t.buffer.push('\r\n      </td>\r\n      \r\n    </tr>\r\n\r\n    <tr>\r\n      <td width="33%">\r\n        '),
t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"paymentPlanDtlsModel.idValidatedCheck",disableBinding:"true"},hashTypes:{checkedBinding:"STRING",disableBinding:"STRING"},hashContexts:{checkedBinding:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.idValidatedCheck",s):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.idValidatedCheck",s)))),t.buffer.push('\r\n\r\n\r\n      </td>\r\n      <td width="33%">\r\n        '),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"paymentPlanDtlsModel.addressValidatedCheck",disableBinding:"true"},hashTypes:{checkedBinding:"STRING",disableBinding:"STRING"},hashContexts:{checkedBinding:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.addressValidatedCheck",s):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.addressValidatedCheck",s)))),t.buffer.push('\r\n      </td>\r\n\r\n         <td width="33%">\r\n             '),o=a.if.call(e,"paymentPlanDtlsModel.isForeighnNational",{hash:{},hashTypes:{},hashContexts:{},inverse:L.noop,fn:L.program(36,A,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n      </td>\r\n\r\n     \r\n    </tr>\r\n  </table>\r\n\r\n  <div style="float:right;">\r\n    \r\n    '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{id:"saveappdetails",disableBinding:"disableSaveButton"},hashTypes:{id:"STRING",disableBinding:"STRING"},hashContexts:{id:e,disableBinding:e},inverse:L.noop,fn:L.program(38,N,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n    \x3c!--  action="refresh"--\x3e\r\n    '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{id:"refreshui",action:"refresh",class:"btn-inverse"},hashTypes:{id:"STRING",action:"STRING",class:"STRING"},hashContexts:{id:e,action:e,class:e},inverse:L.noop,fn:L.program(40,B,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  </div>\r\n  <br />\r\n  <br />\r\n  "),""}function A(e,t){var o,n;return t.buffer.push("\r\n        "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"paymentPlanDtlsModel.workPermitCheck",disableBinding:"true"},hashTypes:{checkedBinding:"STRING",disableBinding:"STRING"},hashContexts:{checkedBinding:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(V((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.workPermit",n):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.workPermit",n)))),t.buffer.push("\r\n             "),""}function N(e,t){var o,n;return t.buffer.push(" "),t.buffer.push(V((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.saveDetails",n):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.saveDetails",n)))),t.buffer.push("\r\n    "),""}function B(e,t){var o,n;return t.buffer.push(" "),t.buffer.push(V((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.refresh",n):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.refresh",n)))),t.buffer.push("\r\n    "),""}function M(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.activatePlan~"},hashTypes:{title:"STRING"},hashContexts:{title:e},inverse:L.noop,fn:L.program(43,R,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function R(e,t){var o,n,s;return t.buffer.push('\r\n  <table width="100%">    \r\n     <tr>\r\n      <td width="100%">\r\n       <p class="info-heading">'),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.activatePlan",s):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.activatePlan",s)))),t.buffer.push('</p>\r\n      </td>\r\n    </tr>\r\n    <tr>\r\n      <td width="100%">\r\n      '),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextArea",{hash:{valueBinding:"paymentPlanDtlsModel.activatePlanComment",disableBinding:"disableActivatePlan",class:"col-xs-12"},hashTypes:{valueBinding:"STRING",disableBinding:"STRING",class:"STRING"},hashContexts:{valueBinding:e,disableBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('  \r\n      </td>\r\n    </tr>    \r\n  <tr>\r\n      <td width="100%" align="right">\r\n        '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"activatePlan",disableBinding:"disableActivatePlan"},hashTypes:{action:"STRING",disableBinding:"STRING"},hashContexts:{action:e,disableBinding:e},inverse:L.noop,fn:L.program(44,w,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td>\r\n    </tr>\r\n  </table>\r\n  "),""}function w(e,t){var o,n;return t.buffer.push("\r\n        "),t.buffer.push(V((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.activatePlan",n):F.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.activatePlan",n)))),t.buffer.push("\r\n        "),""}function K(e,t){var o,n,s;return t.buffer.push('\r\n  <table class="table table-bordered komodo-datagrid">\r\n    <tr>\r\n      <th>\r\n        '),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"Activity",s):F.call(e,"loc","Activity",s)))),t.buffer.push("\r\n      </th>\r\n      <th>\r\n        "),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"Date",s):F.call(e,"loc","Date",s)))),t.buffer.push("\r\n      </th>\r\n      <th>\r\n        "),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"User",s):F.call(e,"loc","User",s)))),t.buffer.push("\r\n      </th>\r\n\r\n      <th>\r\n        "),t.buffer.push(V((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"Remark",s):F.call(e,"loc","Remark",s)))),t.buffer.push("\r\n      </th>\r\n    </tr>\r\n    "),o=a.each.call(e,"item","in","applicationActivities",{hash:{},hashTypes:{},hashContexts:{},inverse:L.noop,fn:L.program(47,O,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  </table>\r\n  "),""}function O(e,t){var o;return t.buffer.push("\r\n    <tr>\r\n      <td>\r\n        "),o=a._triageMustache.call(e,"item.activity",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td>\r\n      <td>\r\n        "),o=a._triageMustache.call(e,"item.date",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td>\r\n      <td>\r\n        "),o=a._triageMustache.call(e,"item.user",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td>\r\n      <td>\r\n        "),o=a._triageMustache.call(e,"item.remark",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td>\r\n    </tr>\r\n    "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var G,k,E,V=this.escapeExpression,F=a.helperMissing,L=this;return n.buffer.push("<div "),n.buffer.push(V(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:n}))),n.buffer.push('>\r\n\r\n  <table width="100%">\r\n    <tr>\r\n      <td width="50%">\r\n        <p class="komodo-heading">'),n.buffer.push(V((k=a.loc||t&&t.loc,E={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},k?k.call(t,"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.useCaseTitle",E):F.call(t,"loc","locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.useCaseTitle",E)))),n.buffer.push('</p>\r\n      </td>\r\n      <td width="50%" align="right">\r\n        <b>'),n.buffer.push(V(a.view.call(t,"Komodo.Controls.Link",{hash:{text:"~locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.back~",href:"#/paymentPlanApplications"},hashTypes:{text:"STRING",href:"STRING"},hashContexts:{text:t,href:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push("</b>\r\n      </td>\r\n    </tr>\r\n  </table>\r\n\r\n  "),G=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.useCaseTitle~"},hashTypes:{title:"STRING"},hashContexts:{title:t},inverse:L.noop,fn:L.program(1,s,n),contexts:[t],types:["ID"],data:n}),(G||0===G)&&n.buffer.push(G),n.buffer.push("\r\n\r\n  "),G=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.verify~"},hashTypes:{title:"STRING"},hashContexts:{title:t},inverse:L.noop,fn:L.program(32,x,n),contexts:[t],types:["ID"],data:n}),(G||0===G)&&n.buffer.push(G),n.buffer.push("\r\n\r\n  "),G=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.approvalCriteriaCheck~"},hashTypes:{title:"STRING"},hashContexts:{title:t},inverse:L.noop,fn:L.program(35,S,n),contexts:[t],types:["ID"],data:n}),(G||0===G)&&n.buffer.push(G),n.buffer.push("\r\n  "),G=a.if.call(t,"salesOrderPresent",{hash:{},hashTypes:{},hashContexts:{},inverse:L.noop,fn:L.program(42,M,n),contexts:[t],types:["ID"],data:n}),(G||0===G)&&n.buffer.push(G),n.buffer.push("\r\n  \r\n  "),G=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.applicationActivities~"},hashTypes:{title:"STRING"},hashContexts:{title:t},inverse:L.noop,fn:L.program(46,K,n),contexts:[t],types:["ID"],data:n}),(G||0===G)&&n.buffer.push(G),n.buffer.push("\r\n\r\n</div>"),""}),Ember.TEMPLATES.ManualDebitOrCreditView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){return t.buffer.push("\r\n    "),t.buffer.push(D(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"manualDebitCreditModel.pendingRefundNotification",class:"retrieve-records"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function r(e,t){var o;return t.buffer.push("\r\n    <br />\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(4,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    <hr />\r\n    <br />\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(10,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function i(e,t){var o;return t.buffer.push("\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(5,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(7,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),""}function l(e,t){return t.buffer.push("\r\n    "),t.buffer.push(D(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:manualDebitOrCredit.filterListTitle~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br /><br />\r\n    "),t.buffer.push(D(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"1",label:"~locale.manageaccount:manualDebitOrCredit.accountNumber~",class:"info-heading",valueBinding:"manualDebitCreditModel.accountNumber",contentBinding:"accountNumberList",optionLabelPath:"content.Key",optionValuePath:"content.Value"},hashTypes:{tabindex:"STRING",label:"STRING",class:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,label:e,class:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function c(e,t){var o;return t.buffer.push("\r\n    <br /><br />\r\n    "),t.buffer.push(D(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:manualDebitOrCredit.listOfDevicesSmartcard~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),o=a.each.call(e,"item","in","manualDebitCreditModel.deviceList",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(8,u,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function u(e,t){var o;return t.buffer.push("\r\n    "),o=a._triageMustache.call(e,"item.smartCard",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    <br />\r\n    "),""}function d(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(11,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(13,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function h(e,t){return t.buffer.push("\r\n    "),t.buffer.push(D(a.view.call(e,"Komodo.Controls.TextField",{hash:{label:"~locale.manageaccount:manualDebitOrCredit.amount~",class:"info-heading",tabindex:"2",valueBinding:"manualDebitCreditModel.amount",validatorBinding:"validators.amountValidator"},hashTypes:{label:"STRING",class:"STRING",tabindex:"STRING",valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{label:e,class:e,tabindex:e,valueBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(D(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"10",valueBinding:"manualDebitCreditModel.reasonForCapture",contentBinding:"reasonsForCapture",validatorBinding:"validators.reasonForCaptureValidator",optionLabelPath:"content.Value",optionValuePath:"content.Value",label:"~locale.manageaccount:refund.reasonForCapture~",prompt:"~locale.manageaccount:refund.reasonForCapturePrompt~"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",contentBinding:"STRING",validatorBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",label:"STRING",prompt:"STRING"},hashContexts:{tabindex:e,valueBinding:e,contentBinding:e,validatorBinding:e,optionLabelPath:e,optionValuePath:e,label:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(D(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"Comment",class:"info-heading",validatorBinding:"validators.commentValidator"},hashTypes:{text:"STRING",class:"STRING",validatorBinding:"STRING"},hashContexts:{text:e,class:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(D(a.view.call(e,"Komodo.Controls.CoreTextArea",{hash:{rows:"6",tabindex:"5",valueBinding:"manualDebitCreditModel.comment",validatorBinding:"validators.commentValidator"},hashTypes:{rows:"STRING",tabindex:"STRING",valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{rows:e,tabindex:e,valueBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(D(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.commentValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function m(e,t){var o;return t.buffer.push("\r\n    "),t.buffer.push(D(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"3",label:"~locale.manageaccount:manualDebitOrCredit.ledgerAccount~",class:"info-heading",valueBinding:"manualDebitCreditModel.ledgerAccount",contentBinding:"ledgerAccountList",validatorBinding:"validators.ledgerAccountValidator",prompt:"Please select Ledger Account",optionLabelPath:"content.Value",optionValuePath:"content.Key"},hashTypes:{tabindex:"STRING",label:"STRING",class:"STRING",valueBinding:"STRING",contentBinding:"STRING",validatorBinding:"STRING",prompt:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,label:e,class:e,valueBinding:e,contentBinding:e,validatorBinding:e,prompt:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),o=a.if.call(e,"manualDebitOrCredit.featureToggle",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(14,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    <br />\r\n    "),""}function p(e,t){return t.buffer.push("\r\n    "),t.buffer.push(D(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"4",label:"~locale.manageaccount:manualDebitOrCredit.stockhandler~",class:"info-heading",valueBinding:"manualDebitCreditModel.stockHandler",contentBinding:"manualDebitCreditModel.stockHandlerList",validatorBinding:"validators.stockHandlerValidator",prompt:"Please select Stock Handler",optionLabelPath:"content.Value",optionValuePath:"content.Key"},hashTypes:{tabindex:"STRING",label:"STRING",class:"STRING",valueBinding:"STRING",contentBinding:"STRING",validatorBinding:"STRING",prompt:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,label:e,class:e,valueBinding:e,contentBinding:e,validatorBinding:e,prompt:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function f(e,t){var o,n;t.buffer.push(D((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:manualDebitOrCredit.manualdebitcredit",n):C.call(e,"loc","locale.manageaccount:manualDebitOrCredit.manualdebitcredit",n))))}function g(e,t){var o,n;t.buffer.push(D((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:manualDebitOrCredit.cancel",n):C.call(e,"loc","locale.manageaccount:manualDebitOrCredit.cancel",n))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var v,y,b,D=this.escapeExpression,T=this,C=a.helperMissing;return n.buffer.push("<div "),n.buffer.push(D(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:n}))),n.buffer.push('>\r\n    <div style="width:100%">\r\n        <span class="komodo-heading">'),n.buffer.push(D((y=a.loc||t&&t.loc,b={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},y?y.call(t,"locale.manageaccount:manualDebitOrCredit.manualdebitcredit",b):C.call(t,"loc","locale.manageaccount:manualDebitOrCredit.manualdebitcredit",b)))),n.buffer.push('</span>\r\n        <span class="float-right">\r\n            <b>\r\n                <a href="#/manageAccount">&lt;'),n.buffer.push(D((y=a.loc||t&&t.loc,b={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},y?y.call(t,"locale.manageaccount:general.Back",b):C.call(t,"loc","locale.manageaccount:general.Back",b)))),n.buffer.push("</a>\r\n            </b>\r\n        </span>\r\n    </div>\r\n    <hr />\r\n\r\n    "),v=a.if.call(t,"manualDebitCreditModel.disableJournalsButton",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(1,s,n),contexts:[t],types:["ID"],data:n}),(v||0===v)&&n.buffer.push(v),n.buffer.push("\r\n    <br />\r\n    "),v=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageaccount:manualDebitOrCredit.collapsibleHeading~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:T.noop,fn:T.program(3,r,n),contexts:[t],types:["ID"],data:n}),(v||0===v)&&n.buffer.push(v),n.buffer.push('\r\n    <br />\r\n    <div style="float:right;">\r\n        '),v=a.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"5",action:"createJournal",disableBinding:"manualDebitCreditModel.disableJournalsButton"},hashTypes:{tabindex:"STRING",action:"STRING",disableBinding:"STRING"},hashContexts:{tabindex:t,action:t,disableBinding:t},inverse:T.noop,fn:T.program(16,f,n),contexts:[t],types:["ID"],data:n}),(v||0===v)&&n.buffer.push(v),n.buffer.push("\r\n        &nbsp;\r\n        "),v=a.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"6",action:"cancel",type:"inverse"},hashTypes:{tabindex:"STRING",action:"STRING",type:"STRING"},hashContexts:{tabindex:t,action:t,type:t},inverse:T.noop,fn:T.program(18,g,n),contexts:[t],types:["ID"],data:n}),(v||0===v)&&n.buffer.push(v),n.buffer.push("\r\n    </div>\r\n</div>\r\n"),""}),Ember.TEMPLATES.ManageDevicePaymentPlanView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o,n,s;return t.buffer.push('\r\n  <div class="mdpp-container">\r\n    <div class="mdpp-left">\r\n      '),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.productId",s):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.productId",s)))),t.buffer.push('\r\n      <p class="info-heading">'),o=a._triageMustache.call(e,"productId",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</p>\r\n      "),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.paymentPlanTotal",s):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.paymentPlanTotal",s)))),t.buffer.push('\r\n      <p class="info-heading">'),o=a._triageMustache.call(e,"paymentPlanTotal",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</p>\r\n\r\n      "),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.amountPerInstalment",s):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.amountPerInstalment",s)))),t.buffer.push('\r\n      <p class="info-heading">'),o=a._triageMustache.call(e,"amountPerInstalment",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</p>\r\n\r\n      "),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.deviceNumber",s):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.deviceNumber",s)))),t.buffer.push('\r\n      <p class="info-heading">'),o=a._triageMustache.call(e,"deviceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</p>\r\n\r\n    </div>\r\n    <div class="mdpp-right">\r\n      '),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.product",s):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.product",s)))),t.buffer.push('\r\n      <p class="info-heading">'),o=a._triageMustache.call(e,"product",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</p>\r\n      "),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.remainingInstalment",s):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.remainingInstalment",s)))),t.buffer.push('\r\n      <p class="info-heading">'),o=a._triageMustache.call(e,"numberOfRemainingInstalment",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</p>\r\n      "),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.salesOrderNumber",s):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.salesOrderNumber",s)))),t.buffer.push('\r\n      <p class="info-heading">'),o=a._triageMustache.call(e,"salesOrderId",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</p>\r\n      "),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.paymentPlanId",s):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.paymentPlanId",s)))),t.buffer.push('\r\n      <p class="info-heading">'),o=a._triageMustache.call(e,"productInstallmentPlanId",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</p>\r\n    </div>\r\n\r\n      "),o=a.if.call(e,"migrateDppDevice",{hash:{},hashTypes:{},hashContexts:{},inverse:ue.noop,fn:ue.program(2,r,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  </div>\r\n  "),""}function r(e,t){var o;return t.buffer.push('\r\n      <table width="100%">\r\n    <tr>\r\n       <div style="float:right;">\r\n                '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"migrateDevice",size:"sm"},hashTypes:{action:"STRING",size:"STRING"},hashContexts:{action:e,size:e},inverse:ue.noop,fn:ue.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n       </div>\r\n        </tr>\r\n      </table>\r\n          \r\n      "),""}function i(e,t){var o,n;return t.buffer.push("\r\n                "),t.buffer.push(ce((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.migrate",n):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.migrate",n)))),t.buffer.push("\r\n                "),""}function l(e,t){var o,n,s;return t.buffer.push('\r\n    \x3c!--Get Settlement Quote--\x3e\r\n    <div id ="settlementQuote" style="display:none">\r\n      <table style="width:100%">\r\n        <tr>\r\n          <td>\r\n            <div class="mdpp-container">\r\n              <div class="mdpp-leftLables">\r\n                '),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.outstandingBalance",s):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.outstandingBalance",s)))),t.buffer.push('\r\n                <p class="info-heading"></p>\r\n                '),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.discount",s):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.discount",s)))),t.buffer.push('\r\n                <p class="info-heading"></p>\r\n                <span style="font-weight: bold;">\r\n                  <b>'),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.totalAmountToSettle",s):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.totalAmountToSettle",s)))),t.buffer.push("</b>\r\n                </span>\r\n                <div>\r\n                  "),t.buffer.push(ce(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:manageDevicePaymentPlan.sendQuoteVia~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                  "),t.buffer.push(ce(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{class:"phone-dropdown",contentBinding:"communicationMethods",optionValuePath:"content.Value",optionLabelPath:"content.Value",valueBinding:"data.communicationType",label:"",disabledBinding:"disbaleSendQuote"},hashTypes:{class:"STRING",contentBinding:"STRING",optionValuePath:"STRING",optionLabelPath:"STRING",valueBinding:"STRING",label:"STRING",disabledBinding:"STRING"},hashContexts:{class:e,contentBinding:e,optionValuePath:e,optionLabelPath:e,valueBinding:e,label:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n\r\n                  <span class="komodo-language">\r\n                    '),t.buffer.push(ce(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{contentBinding:"languages",disabledBinding:"disbaleSendQuote",optionValuePath:"content.key",optionLabelPath:"content.value",valueBinding:"data.communicationLanguage",label:""},hashTypes:{contentBinding:"STRING",disabledBinding:"STRING",optionValuePath:"STRING",optionLabelPath:"STRING",valueBinding:"STRING",label:"STRING"},hashContexts:{contentBinding:e,disabledBinding:e,optionValuePath:e,optionLabelPath:e,valueBinding:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                  </span>\r\n                  "),o=a.if.call(e,"showSms",{hash:{},hashTypes:{},hashContexts:{},inverse:ue.noop,fn:ue.program(6,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                  "),o=a.if.call(e,"showEmail",{hash:{},hashTypes:{},hashContexts:{},inverse:ue.noop,fn:ue.program(10,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n\r\n                  <br/>\r\n                  <table class="float-left">\r\n                    <tr>\r\n                      <td>\r\n                        '),t.buffer.push(ce(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{valueBinding:"data.othCountryCode",validatorBinding:"validators.othCountryCodeValidator"},hashTypes:{valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,validatorBinding:e},
contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                        "),t.buffer.push(ce(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{valueBinding:"data.othPhone",validatorBinding:"validators.othPhoneValidator"},hashTypes:{valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                        "),o=a.if.call(e,"showEmail",{hash:{},hashTypes:{},hashContexts:{},inverse:ue.noop,fn:ue.program(14,f,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                      </td>\r\n                    </tr>\r\n                  </table>\r\n\r\n                </div>\r\n              </div>\r\n              <div class="mdpp-rightFields">\r\n                <p class="info-heading">'),o=a._triageMustache.call(e,"outstandingBalance",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</p>\r\n                <p class="info-heading">'),o=a._triageMustache.call(e,"discount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</p>\r\n                <span style="font-weight: bold;">\r\n                  <b>'),o=a._triageMustache.call(e,"totalAmountToSettle",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(' </b>\r\n                </span>\r\n                <div style="float:right;">\r\n                  '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"printQuote",size:"sm"},hashTypes:{action:"STRING",size:"STRING"},hashContexts:{action:e,size:e},inverse:ue.noop,fn:ue.program(16,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                  &nbsp;\r\n                  "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"useCredit",size:"sm"},hashTypes:{action:"STRING",size:"STRING"},hashContexts:{action:e,size:e},inverse:ue.noop,fn:ue.program(18,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                  &nbsp;\r\n                  "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"payVia",size:"sm"},hashTypes:{action:"STRING",size:"STRING"},hashContexts:{action:e,size:e},inverse:ue.noop,fn:ue.program(20,y,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                  &nbsp;\r\n                  "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"payNow",size:"sm"},hashTypes:{action:"STRING",size:"STRING"},hashContexts:{action:e,size:e},inverse:ue.noop,fn:ue.program(22,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                  &nbsp;\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </td>\r\n        </tr>\r\n\r\n        <tr>\r\n          <td>\r\n            <hr />\r\n            <div style="100%">\r\n              <div style="float:right;">\r\n                '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"printQuote",size:"sm"},hashTypes:{action:"STRING",size:"STRING"},hashContexts:{action:e,size:e},inverse:ue.noop,fn:ue.program(24,D,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                &nbsp;\r\n                "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"useCredit",size:"sm"},hashTypes:{action:"STRING",size:"STRING"},hashContexts:{action:e,size:e},inverse:ue.noop,fn:ue.program(26,T,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                &nbsp;\r\n                "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"payVia",size:"sm"},hashTypes:{action:"STRING",size:"STRING"},hashContexts:{action:e,size:e},inverse:ue.noop,fn:ue.program(28,C,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                &nbsp;\r\n                "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"payNow",size:"sm"},hashTypes:{action:"STRING",size:"STRING"},hashContexts:{action:e,size:e},inverse:ue.noop,fn:ue.program(30,I,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                &nbsp;\r\n              </div>\r\n            </div>\r\n\r\n          </td>\r\n        </tr>\r\n      </table>\r\n    </div>\r\n    \x3c!--SETTLE PLAN --\x3e\r\n    <div id="settlePlanDiv" style="display:none">\r\n      <div class="mdp-bothsides">\r\n\r\n        <div style="width:100%">\r\n          <table width="100%" class="table table-bordered komodo-datagrid">\r\n            <tr>\r\n              <th colspan="3">                \r\n                 <span style="float:left;font-weight: bold; font-size: 125%;">\r\n                   '),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.quotePreviewHeading",s):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.quotePreviewHeading",s)))),t.buffer.push('\r\n                 </span>\r\n                <br />\r\n                <br />\r\n                <span style="float:left">\r\n                  '),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.financialAccountid",s):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.financialAccountid",s)))),t.buffer.push(" : "),o=a._triageMustache.call(e,"financialAccountId",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('  \r\n                </span>\r\n                <span style="float:right">\r\n                  '),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.expiryDate",s):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.expiryDate",s)))),t.buffer.push(": "),o=a._triageMustache.call(e,"expiryDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(' \r\n                </span>\r\n                <span style="float:left;  padding-left: 32%;">\r\n                  '),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.status",s):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.status",s)))),t.buffer.push(" : "),o=a._triageMustache.call(e,"quoteStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(' \r\n                </span>\r\n                <br/>\r\n                <span style="float:left">\r\n                  '),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.financialAccountAmt",s):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.financialAccountAmt",s)))),t.buffer.push(" : "),o=a._triageMustache.call(e,"financialAccountAmt",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                </span>\r\n              </th>\r\n            </tr>\r\n            <tr>\r\n              <td align="left">\r\n                '),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.outstandingBalance",s):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.outstandingBalance",s)))),t.buffer.push('\r\n              </td>\r\n              <td align="right">\r\n                '),o=a._triageMustache.call(e,"outstandingBalance",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n              </td>\r\n            </tr>           \r\n            <tr >\r\n              <td align="left">\r\n                '),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.arrearsAmount",s):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.arrearsAmount",s)))),t.buffer.push('\r\n              </td>\r\n              <td align="right">\r\n                '),o=a._triageMustache.call(e,"arrearsAmount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n              </td>\r\n            </tr>            \r\n            <tr >\r\n              <td align="left">\r\n                '),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.discount",s):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.discount",s)))),t.buffer.push('\r\n              </td>\r\n              <td align="right">\r\n                '),o=a._triageMustache.call(e,"discount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n              </td>\r\n            </tr>              \r\n            <tr>\r\n              <td align="left">\r\n                <b>\r\n                  '),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.totalAmountToSettle",s):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.totalAmountToSettle",s)))),t.buffer.push('\r\n                </b>\r\n              </td>\r\n              <td align="right">\r\n                <b>\r\n                  '),o=a._triageMustache.call(e,"totalAmountToSettle",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                </b>\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td colspan="2">\r\n                <table style="width=100%; float: right">\r\n                  <tr>\r\n                    <td align="right">\r\n                      '),t.buffer.push(ce(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:manageDevicePaymentPlan.sendQuoteVia~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                      "),t.buffer.push(ce(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{class:"comunicationMethod",contentBinding:"communicationMethods",optionValuePath:"content.Value",optionLabelPath:"content.Value",valueBinding:"data.communicationType",label:"",disabledBinding:"disbaleSendQuote"},hashTypes:{class:"STRING",contentBinding:"STRING",optionValuePath:"STRING",optionLabelPath:"STRING",valueBinding:"STRING",label:"STRING",disabledBinding:"STRING"},hashContexts:{class:e,contentBinding:e,optionValuePath:e,optionLabelPath:e,valueBinding:e,label:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n                      "),t.buffer.push(ce(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{class:"comunicationMethod",contentBinding:"languages",disabledBinding:"isLanguagesDisabled",optionValuePath:"content.key",optionLabelPath:"content.value",valueBinding:"data.communicationLanguage",label:"",disabledBinding:"disbaleSendQuote"},hashTypes:{class:"STRING",contentBinding:"STRING",disabledBinding:"STRING",optionValuePath:"STRING",optionLabelPath:"STRING",valueBinding:"STRING",label:"STRING",disabledBinding:"STRING"},hashContexts:{class:e,contentBinding:e,disabledBinding:e,optionValuePath:e,optionLabelPath:e,valueBinding:e,label:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n                      "),o=a.if.call(e,"showSms",{hash:{},hashTypes:{},hashContexts:{},inverse:ue.noop,fn:ue.program(32,x,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                      "),o=a.if.call(e,"showEmail",{hash:{},hashTypes:{},hashContexts:{},inverse:ue.noop,fn:ue.program(36,A,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                      "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"printQuote",disabledBinding:"disableprintQuoteButton",size:"sm"},hashTypes:{action:"STRING",disabledBinding:"STRING",size:"STRING"},hashContexts:{action:e,disabledBinding:e,size:e},inverse:ue.noop,fn:ue.program(40,M,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n                      <br/>\r\n                      <table>\r\n                        <tr>\r\n                          <td>\r\n                            "),t.buffer.push(ce(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{valueBinding:"data.othCountryCode",validatorBinding:"validators.othCountryCodeValidator"},hashTypes:{valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                            "),t.buffer.push(ce(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{valueBinding:"data.othPhone",validatorBinding:"validators.othPhoneValidator"},hashTypes:{valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                            "),o=a.if.call(e,"showEmail",{hash:{},hashTypes:{},hashContexts:{},inverse:ue.noop,fn:ue.program(42,R,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                          </td>\r\n                        </tr>\r\n                      </table>\r\n\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td align="right">\r\n                      '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"payNow",disabledBinding:"disablePayButtons",size:"sm"},hashTypes:{action:"STRING",disabledBinding:"STRING",size:"STRING"},hashContexts:{action:e,disabledBinding:e,size:e},inverse:ue.noop,fn:ue.program(44,w,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                      &nbsp;\r\n                      "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"viewAmtForAdhocdebitorder",size:"sm",disabledBinding:"disablePayButtons"},hashTypes:{action:"STRING",size:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,size:e,disabledBinding:e},inverse:ue.noop,fn:ue.program(46,K,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                    </td>\r\n                  </tr>                \r\n                </table>\r\n              </td>\r\n            </tr>\r\n          </table>\r\n        </div>\r\n       \r\n      \r\n        <p class="info-heading">'),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.comment",s):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.comment",s)))),t.buffer.push(' </p>\r\n        <div style="width:100%; clear:both; float: left;">\r\n          '),t.buffer.push(ce(a.view.call(e,"Komodo.Controls.CoreTextArea",{hash:{valueBinding:"data.settleComment",class:"col-xs-8"},hashTypes:{valueBinding:"STRING",class:"STRING"},hashContexts:{valueBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </div>\r\n        <hr />\r\n\r\n        <p class="info-heading"></p>\r\n\r\n        <p class="info-heading">'),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.addSupportingDocuments",s):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.addSupportingDocuments",s)))),t.buffer.push(" </p>\r\n\r\n            \r\n        "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{id:"settlePlanPickFile",disabledBinding:"disableaddSettlementDocButton",size:"sm"},hashTypes:{id:"STRING",disabledBinding:"STRING",size:"STRING"},hashContexts:{id:e,disabledBinding:e,size:e},inverse:ue.noop,fn:ue.program(48,O,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n        "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{id:"uploadsettlePlanfiles",disabledBinding:"disableuploadDocSettlementButton",size:"sm"},hashTypes:{id:"STRING",disabledBinding:"STRING",size:"STRING"},hashContexts:{id:e,disabledBinding:e,size:e},inverse:ue.noop,fn:ue.program(50,G,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n      </div>\r\n      <p class="info-heading"></p>\r\n      '),o=a.if.call(e,"settlePlanModel.enableDocGrid",{hash:{},hashTypes:{},hashContexts:{},inverse:ue.noop,fn:ue.program(52,k,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n      "),o=a.if.call(e,"hideSettlePlanButton",{hash:{},hashTypes:{},hashContexts:{},inverse:ue.program(63,q,t),fn:ue.program(60,H,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n       \r\n\r\n      <br/>\r\n      <br />\r\n\r\n\r\n    </div>\r\n    \x3c!--UPGRADE PRODUCT --\x3e\r\n    <div id="upgradeProductDiv" style="display:none">\r\n\r\n      <div class="mdpp-container">\r\n\r\n        <div style="height:15%; width:100%">\r\n          <div style="min-width:20%;max-width:50%; float:left">\r\n\r\n\r\n            <div style="float:left">\r\n              <p class="info-heading">'),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.from",s):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.from",s)))),t.buffer.push(" </p>\r\n\r\n              "),o=a._triageMustache.call(e,"product",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n            </div>\r\n\r\n            <div style="float:right; padding-top: 9px;">\r\n              <br/>\r\n              &nbsp;\r\n\r\n              '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{class:"btn-success btn-xs"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:ue.noop,fn:ue.program(66,J,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n              &nbsp; &nbsp; &nbsp; <img src="Content\\Images\\dppUpgradeTo.svg" /> &nbsp; &nbsp; &nbsp;\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div style="width:20%; float:left">\r\n\r\n          '),t.buffer.push(ce(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"104",valueBinding:"data.productNameToUpgrade",label:"~locale.manageAccount.paymentPlan:manageDevicePaymentPlan.to~",validatorBinding:"validators.productNameToUpgradeValidator",prompt:" ",contentBinding:"_ProductName",optionLabelPath:"content.label",optionValuePath:"content.key"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n\r\n\r\n\r\n        </div>\r\n        <div style="width:20%; float:left">\r\n\r\n\r\n          '),t.buffer.push(ce(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{tabindex:"3",valueBinding:"data.upgradeDate",label:"~locale.manageAccount.paymentPlan:manageDevicePaymentPlan.date~",validatorBinding:"validators.upgradeDateValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n          \r\n        </div>\r\n\r\n\r\n\r\n\r\n        <hr />\r\n\r\n      </div>\r\n\r\n      <div style="float:right;">\r\n        '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{size:"sm",action:"upgradePlan",disabledBinding:"disableupgradePlanButton"},hashTypes:{size:"STRING",action:"STRING",disabledBinding:"STRING"},hashContexts:{size:e,action:e,disabledBinding:e},inverse:ue.noop,fn:ue.program(68,Q,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n      </div>\r\n      <br />\r\n      <br />\r\n\r\n\r\n    </div>\r\n    \x3c!--CANCEL PLAN--\x3e\r\n    <div id="cancelPlanDiv" style="display:none">\r\n      <div class="mdpp-container">\r\n        <div class="mdp-bothsides">\r\n          <p class="info-heading">'),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.comment",s):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.comment",s)))),t.buffer.push(' </p>\r\n          <div style="width:100%; clear:both; float: left;">\r\n            '),t.buffer.push(ce(a.view.call(e,"Komodo.Controls.CoreTextArea",{hash:{valueBinding:"data.cancelComment",class:"col-xs-8"},hashTypes:{valueBinding:"STRING",class:"STRING"},hashContexts:{valueBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n          </div>\r\n          <hr />\r\n\r\n          <p class="info-heading"></p>\r\n          <br />\r\n          <hr />\r\n\r\n          <p class="info-heading">'),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.addSupportingDocuments",s):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.addSupportingDocuments",s)))),t.buffer.push(" </p>\r\n\r\n\r\n          "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{id:"cancelPickfiles",disabledBinding:"disablecancelSelectDocButton",size:"sm"},hashTypes:{id:"STRING",disabledBinding:"STRING",size:"STRING"},hashContexts:{id:e,disabledBinding:e,size:e},inverse:ue.noop,fn:ue.program(70,z,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n          "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{id:"uploadCancelfiles",disabledBinding:"disablecancelUploadDocButton",size:"sm"},hashTypes:{id:"STRING",disabledBinding:"STRING",size:"STRING"},hashContexts:{id:e,disabledBinding:e,size:e},inverse:ue.noop,fn:ue.program(72,$,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n        </div>\r\n        <p class="info-heading"></p>\r\n        '),o=a.if.call(e,"cancelPlanModel.enableDocGrid",{hash:{},hashTypes:{},hashContexts:{},inverse:ue.noop,fn:ue.program(74,Y,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n        <div style="float:right;">        \r\n          '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"cancelDecoderPlan",disabledBinding:"disablecancelDecoderPlanButton",size:"sm"},hashTypes:{action:"STRING",disabledBinding:"STRING",size:"STRING"},hashContexts:{action:e,disabledBinding:e,size:e},inverse:ue.noop,fn:ue.program(82,ae,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n    "),""}function c(e,t){var o;return t.buffer.push("\r\n                  "),t.buffer.push(ce(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{class:"phone-dropdown",disabled:"true",contentBinding:"contactDetailTypes",optionValuePath:"content.key",optionLabelPath:"content.value",valueBinding:"data.contactType"},hashTypes:{class:"STRING",disabled:"STRING",contentBinding:"STRING",optionValuePath:"STRING",optionLabelPath:"STRING",valueBinding:"STRING"},hashContexts:{class:e,disabled:e,contentBinding:e,optionValuePath:e,optionLabelPath:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("+"),t.buffer.push(ce(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{valueBinding:"data.othCountryCode",class:"phone-code",id:"countryCode"},hashTypes:{valueBinding:"STRING",class:"STRING",id:"STRING"},hashContexts:{valueBinding:e,class:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" "),t.buffer.push(ce(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{valueBinding:"data.othPhone",class:"phone-number",id:"phoneNumber"},hashTypes:{valueBinding:"STRING",class:"STRING",id:"STRING"},hashContexts:{valueBinding:e,class:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                  "),o=a.unless.call(e,"viewOnlyPage",{hash:{},hashTypes:{},hashContexts:{},inverse:ue.noop,fn:ue.program(7,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                  "),""}function u(e,t){var o;return t.buffer.push("\r\n                  "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"sendQuotation",disabledBinding:"data.isButtonDisabled",class:"btn-success",size:"nextto-control"},hashTypes:{action:"STRING",disabledBinding:"STRING",class:"STRING",size:"STRING"},hashContexts:{action:e,disabledBinding:e,class:e,size:e},inverse:ue.noop,fn:ue.program(8,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                  "),""}function d(e,t){var o,n;return t.buffer.push("\r\n                  "),t.buffer.push(ce((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.quotation:searchQuotation.sendquote",n):le.call(e,"loc","locale.quotation:searchQuotation.sendquote",n)))),t.buffer.push("\r\n                  "),""}function h(e,t){var o;return t.buffer.push("\r\n                  "),t.buffer.push(ce(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{valueBinding:"data.othEmail",class:"input-medium",id:"otherEmail"},hashTypes:{valueBinding:"STRING",class:"STRING",id:"STRING"},hashContexts:{valueBinding:e,class:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                  "),o=a.unless.call(e,"viewOnlyPage",{hash:{},hashTypes:{},hashContexts:{},inverse:ue.noop,fn:ue.program(11,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                  "),""}function m(e,t){var o;return t.buffer.push("\r\n                  "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"sendQuotation",disabledBinding:"data.isButtonDisabled",class:"btn-success",size:"nextto-control"},hashTypes:{action:"STRING",disabledBinding:"STRING",class:"STRING",size:"STRING"},hashContexts:{action:e,disabledBinding:e,class:e,size:e},inverse:ue.noop,fn:ue.program(12,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                  "),""}function p(e,t){var o,n;return t.buffer.push("\r\n                  "),t.buffer.push(ce((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.send",n):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.send",n)))),t.buffer.push("\r\n                  "),""}function f(e,t){return t.buffer.push("\r\n                        "),t.buffer.push(ce(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{valueBinding:"data.othEmail",validatorBinding:"validators.othEmailValidator"},hashTypes:{valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                        "),""}function g(e,t){var o,n;return t.buffer.push("\r\n                  "),t.buffer.push(ce((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.printQuote",n):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.printQuote",n)))),t.buffer.push("\r\n                  "),""}function v(e,t){var o,n;return t.buffer.push("\r\n                  "),t.buffer.push(ce((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.useCredit",n):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.useCredit",n)))),t.buffer.push("\r\n                  "),""}function y(e,t){var o,n;return t.buffer.push("\r\n                  "),t.buffer.push(ce((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.payVia",n):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.payVia",n)))),t.buffer.push("\r\n                  "),""}function b(e,t){var o,n;return t.buffer.push("\r\n                  "),t.buffer.push(ce((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.payNow",n):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.payNow",n)))),t.buffer.push("\r\n                  "),""}function D(e,t){var o,n;return t.buffer.push("\r\n                "),t.buffer.push(ce((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.printQuote",n):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.printQuote",n)))),t.buffer.push("\r\n                "),""}function T(e,t){var o,n;return t.buffer.push("\r\n                "),t.buffer.push(ce((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.useCredit",n):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.useCredit",n)))),t.buffer.push("\r\n                "),""}function C(e,t){var o,n;return t.buffer.push("\r\n                "),t.buffer.push(ce((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.payVia",n):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.payVia",n)))),t.buffer.push("\r\n                "),""}function I(e,t){var o,n;return t.buffer.push("\r\n                "),t.buffer.push(ce((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.payNow",n):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.payNow",n)))),t.buffer.push("\r\n                "),""}function x(e,t){var o;return t.buffer.push("\r\n                      "),t.buffer.push(ce(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{class:"comunicationMethod",disabled:"true",contentBinding:"contactDetailTypes",optionValuePath:"content.key",optionLabelPath:"content.value",valueBinding:"data.contactType"},hashTypes:{class:"STRING",disabled:"STRING",contentBinding:"STRING",optionValuePath:"STRING",optionLabelPath:"STRING",valueBinding:"STRING"},hashContexts:{class:e,disabled:e,contentBinding:e,optionValuePath:e,
optionLabelPath:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("+"),t.buffer.push(ce(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{valueBinding:"data.othCountryCode",class:"phone-code",id:"countryCode"},hashTypes:{valueBinding:"STRING",class:"STRING",id:"STRING"},hashContexts:{valueBinding:e,class:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" "),t.buffer.push(ce(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{valueBinding:"data.othPhone",class:"phone-number",id:"phoneNumber"},hashTypes:{valueBinding:"STRING",class:"STRING",id:"STRING"},hashContexts:{valueBinding:e,class:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                      "),o=a.unless.call(e,"viewOnlyPage",{hash:{},hashTypes:{},hashContexts:{},inverse:ue.noop,fn:ue.program(33,P,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                      "),""}function P(e,t){var o;return t.buffer.push("\r\n                      "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"sendQuotation",disabledBinding:"data.isButtonDisabled",class:"btn-success",size:"nextto-control"},hashTypes:{action:"STRING",disabledBinding:"STRING",class:"STRING",size:"STRING"},hashContexts:{action:e,disabledBinding:e,class:e,size:e},inverse:ue.noop,fn:ue.program(34,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                      "),""}function S(e,t){var o,n;return t.buffer.push("\r\n                      "),t.buffer.push(ce((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.quotation:searchQuotation.sendquote",n):le.call(e,"loc","locale.quotation:searchQuotation.sendquote",n)))),t.buffer.push("\r\n                      "),""}function A(e,t){var o;return t.buffer.push("\r\n                      "),t.buffer.push(ce(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{valueBinding:"data.othEmail",class:"input-medium",id:"otherEmail"},hashTypes:{valueBinding:"STRING",class:"STRING",id:"STRING"},hashContexts:{valueBinding:e,class:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                      "),o=a.unless.call(e,"viewOnlyPage",{hash:{},hashTypes:{},hashContexts:{},inverse:ue.noop,fn:ue.program(37,N,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                      "),""}function N(e,t){var o;return t.buffer.push("\r\n                      "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"sendQuotation",disabledBinding:"isButtonDisabled",class:"btn-success",size:"nextto-control"},hashTypes:{action:"STRING",disabledBinding:"STRING",class:"STRING",size:"STRING"},hashContexts:{action:e,disabledBinding:e,class:e,size:e},inverse:ue.noop,fn:ue.program(38,B,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                      "),""}function B(e,t){var o,n;return t.buffer.push("\r\n                      "),t.buffer.push(ce((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.send",n):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.send",n)))),""}function M(e,t){var o,n;return t.buffer.push("\r\n                      "),t.buffer.push(ce((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.printQuote",n):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.printQuote",n)))),t.buffer.push("\r\n                      "),""}function R(e,t){return t.buffer.push("\r\n                            "),t.buffer.push(ce(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{valueBinding:"data.othEmail",validatorBinding:"validators.othEmailValidator"},hashTypes:{valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                            "),""}function w(e,t){var o,n;return t.buffer.push("\r\n                      "),t.buffer.push(ce((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.payNow",n):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.payNow",n)))),""}function K(e,t){var o,n;return t.buffer.push("\r\n                      "),t.buffer.push(ce((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.payVia",n):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.payVia",n)))),""}function O(e,t){var o,n;return t.buffer.push("\r\n        "),t.buffer.push(ce((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.addDocuments",n):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.addDocuments",n)))),t.buffer.push("\r\n        "),""}function G(e,t){var o,n;return t.buffer.push("\r\n        "),t.buffer.push(ce((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.uploadDocuments",n):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.uploadDocuments",n)))),t.buffer.push("\r\n        "),""}function k(e,t){var o,n,s;return t.buffer.push('\r\n      <table width="100%" class="table table-bordered komodo-datagrid">\r\n        <thead>\r\n          <tr>\r\n            <th width="50%">'),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"Document",s):le.call(e,"loc","Document",s)))),t.buffer.push('</th>\r\n            <th width="20%">'),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"Type",s):le.call(e,"loc","Type",s)))),t.buffer.push('</th>\r\n            <th width="10%">'),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"Percentage",s):le.call(e,"loc","Percentage",s)))),t.buffer.push('</th>\r\n            <th width="10%">'),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"Status",s):le.call(e,"loc","Status",s)))),t.buffer.push('</th>\r\n            <th width="10%">'),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"Action",s):le.call(e,"loc","Action",s)))),t.buffer.push("</th>\r\n          </tr>\r\n        </thead>\r\n        "),o=a.each.call(e,"row","in","settlePlanModel.customerDocuments",{hash:{},hashTypes:{},hashContexts:{},inverse:ue.noop,fn:ue.program(53,E,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </table>\r\n      "),""}function E(e,t){var o;return t.buffer.push("\r\n        <tbody>\r\n          <tr>\r\n            <td>\r\n              "),t.buffer.push(ce(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"row.documentName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            </td>\r\n            <td>\r\n              "),t.buffer.push(ce(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{valueBinding:"row.documentType",contentBinding:"row.documentTypes",optionLabelPath:"content.value",optionValuePath:"content.value",tabindex:"11",class:"komodo-grid-edit",disabledBinding:"row.isDocumentTypeDisable"},hashTypes:{valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",tabindex:"STRING",class:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,tabindex:e,class:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            </td>\r\n            <td>\r\n              "),o=a._triageMustache.call(e,"row.uploadPercentage",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </td>\r\n            <td>\r\n              "),o=a._triageMustache.call(e,"row.uploadStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </td>\r\n            <td>\r\n              "),o=a.if.call(e,"row.isAlready",{hash:{},hashTypes:{},hashContexts:{},inverse:ue.program(57,L,t),fn:ue.program(54,V,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n        "),""}function V(e,t){var o;return t.buffer.push("\r\n            \r\n              "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"viewDocs",size:"xs",type:"success",contentBinding:"row",tabindex:"24"},hashTypes:{action:"STRING",size:"STRING",type:"STRING",contentBinding:"STRING",tabindex:"STRING"},hashContexts:{action:e,size:e,type:e,contentBinding:e,tabindex:e},inverse:ue.noop,fn:ue.program(55,F,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n              "),""}function F(e,t){var o,n;return t.buffer.push("\r\n              "),t.buffer.push(ce((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.view",n):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.view",n)))),t.buffer.push("\r\n              "),""}function L(e,t){var o;return t.buffer.push("\r\n\r\n              "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"removeDocument",size:"xs",type:"danger",tabindex:"24",contentBinding:"row"},hashTypes:{action:"STRING",size:"STRING",type:"STRING",tabindex:"STRING",contentBinding:"STRING"},hashContexts:{action:e,size:e,type:e,tabindex:e,contentBinding:e},inverse:ue.noop,fn:ue.program(58,U,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              "),""}function U(e,t){var o,n;return t.buffer.push("\r\n              "),t.buffer.push(ce((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.delete",n):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.delete",n)))),t.buffer.push("\r\n              "),""}function H(e,t){var o;return t.buffer.push('\r\n      <div id="heddenDivs" style="float:right; visibility:hidden">\r\n        '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{Class:"clsSettlePlanButton",action:"settlePlan",size:"sm",disabledBinding:"settledPlanButton"},hashTypes:{Class:"STRING",action:"STRING",size:"STRING",disabledBinding:"STRING"},hashContexts:{Class:e,action:e,size:e,disabledBinding:e},inverse:ue.noop,fn:ue.program(61,_,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </div>\r\n        "),""}function _(e,t){var o,n;return t.buffer.push('\x3c!--disabledBinding="data.isSettlePlanBtnDisabled"--\x3e\r\n        '),t.buffer.push(ce((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.settlePlanButton",n):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.settlePlanButton",n)))),t.buffer.push("\r\n        "),""}function q(e,t){var o;return t.buffer.push('\r\n\r\n        <div id="heddenDivs" style="float:right">\r\n          '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{Class:"clsSettlePlanButton",action:"settlePlan",size:"sm",disabledBinding:"settledPlanButton"},hashTypes:{Class:"STRING",action:"STRING",size:"STRING",disabledBinding:"STRING"},hashContexts:{Class:e,action:e,size:e,disabledBinding:e},inverse:ue.noop,fn:ue.program(64,j,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </div>\r\n\r\n\r\n          "),""}function j(e,t){var o,n;return t.buffer.push('\x3c!--disabledBinding="data.isSettlePlanBtnDisabled"--\x3e\r\n          '),t.buffer.push(ce((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.settlePlanButton",n):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.settlePlanButton",n)))),t.buffer.push("\r\n          "),""}function J(e,t){var o,n;return t.buffer.push(" \r\n              "),t.buffer.push(ce((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.active",n):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.active",n)))),t.buffer.push("\r\n              "),""}function Q(e,t){var o,n;return t.buffer.push("\r\n        "),t.buffer.push(ce((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.upgradeProductButton",n):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.upgradeProductButton",n)))),t.buffer.push("\r\n        "),""}function z(e,t){var o,n;return t.buffer.push("\r\n          "),t.buffer.push(ce((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.addDocuments",n):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.addDocuments",n)))),t.buffer.push("\r\n          "),""}function $(e,t){var o,n;return t.buffer.push("\r\n          "),t.buffer.push(ce((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.uploadDocuments",n):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.uploadDocuments",n)))),t.buffer.push("\r\n          "),""}function Y(e,t){var o,n,s;return t.buffer.push('\r\n        <table width="100%" class="table table-bordered komodo-datagrid">\r\n          <thead>\r\n            <tr>\r\n              <th width="50%">'),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"Document",s):le.call(e,"loc","Document",s)))),t.buffer.push('</th>\r\n              <th width="20%">'),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"Type",s):le.call(e,"loc","Type",s)))),t.buffer.push('</th>\r\n              <th width="10%">'),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"Percentage",s):le.call(e,"loc","Percentage",s)))),t.buffer.push('</th>\r\n              <th width="10%">'),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"Status",s):le.call(e,"loc","Status",s)))),t.buffer.push('</th>\r\n              <th width="10%">'),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"Action",s):le.call(e,"loc","Action",s)))),t.buffer.push("</th>\r\n            </tr>\r\n          </thead>\r\n          "),o=a.each.call(e,"row","in","cancelPlanModel.customerDocuments",{hash:{},hashTypes:{},hashContexts:{},inverse:ue.noop,fn:ue.program(75,W,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </table>\r\n        "),""}function W(e,t){var o;return t.buffer.push("\r\n          <tbody>\r\n            <tr>\r\n              <td>\r\n                "),t.buffer.push(ce(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"row.documentName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n              </td>\r\n              <td>\r\n                "),t.buffer.push(ce(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{valueBinding:"row.documentType",contentBinding:"row.documentTypes",optionLabelPath:"content.value",optionValuePath:"content.value",tabindex:"11",class:"komodo-grid-edit",disabledBinding:"row.isDocumentTypeDisable"},hashTypes:{valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",tabindex:"STRING",class:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,tabindex:e,class:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n              </td>\r\n              <td>\r\n                "),o=a._triageMustache.call(e,"row.uploadPercentage",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              </td>\r\n              <td>\r\n                "),o=a._triageMustache.call(e,"row.uploadStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              </td>\r\n              <td>\r\n                "),o=a.if.call(e,"row.isAlready",{hash:{},hashTypes:{},hashContexts:{},inverse:ue.program(79,ee,t),fn:ue.program(76,X,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n          "),""}function X(e,t){var o;return t.buffer.push("\r\n\r\n                "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"viewCancelDocs",size:"xs",type:"success",contentBinding:"row",tabindex:"24"},hashTypes:{action:"STRING",size:"STRING",type:"STRING",contentBinding:"STRING",tabindex:"STRING"},hashContexts:{action:e,size:e,type:e,contentBinding:e,tabindex:e},inverse:ue.noop,fn:ue.program(77,Z,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n                "),""}function Z(e,t){var o,n;return t.buffer.push("\r\n                "),t.buffer.push(ce((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.view",n):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.view",n)))),t.buffer.push("\r\n                "),""}function ee(e,t){var o;return t.buffer.push("\r\n\r\n                "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"removeCancelDocument",size:"xs",type:"danger",tabindex:"24",contentBinding:"row"},hashTypes:{action:"STRING",size:"STRING",type:"STRING",tabindex:"STRING",contentBinding:"STRING"},hashContexts:{action:e,size:e,type:e,tabindex:e,contentBinding:e},inverse:ue.noop,fn:ue.program(80,te,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                "),""}function te(e,t){var o,n;return t.buffer.push("\r\n                "),t.buffer.push(ce((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.delete",n):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.delete",n)))),t.buffer.push("\r\n                "),""}function ae(e,t){var o,n;return t.buffer.push('\x3c!--disabledBinding="data.isCancelPlanBtnDisabled"--\x3e\r\n          '),t.buffer.push(ce((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.cancelPlan",n):le.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.cancelPlan",n)))),t.buffer.push("\r\n          "),""}function oe(e,t){var o,n,s;return t.buffer.push('\r\n  <table class="table table-bordered komodo-datagrid">\r\n    <tr>\r\n      <th>\r\n        '),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"Activity",s):le.call(e,"loc","Activity",s)))),t.buffer.push("\r\n      </th>\r\n      <th>\r\n        "),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"Date",s):le.call(e,"loc","Date",s)))),t.buffer.push("\r\n      </th>\r\n      <th>\r\n        "),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"User",s):le.call(e,"loc","User",s)))),t.buffer.push("\r\n      </th>\r\n\r\n      <th>\r\n        "),t.buffer.push(ce((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"Remark",s):le.call(e,"loc","Remark",s)))),t.buffer.push("\r\n      </th>\r\n    </tr>\r\n    "),o=a.each.call(e,"item","in","applicationActivities",{hash:{},hashTypes:{},hashContexts:{},inverse:ue.noop,fn:ue.program(85,ne,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  </table>\r\n  "),""}function ne(e,t){var o;return t.buffer.push("\r\n    <tr>\r\n      <td>\r\n        "),o=a._triageMustache.call(e,"item.activity",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td>\r\n      <td>\r\n        "),o=a._triageMustache.call(e,"item.date",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td>\r\n      <td>\r\n        "),o=a._triageMustache.call(e,"item.user",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td>\r\n      <td>\r\n        "),o=a._triageMustache.call(e,"item.remark",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td>\r\n    </tr>\r\n    "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var se,re,ie,le=a.helperMissing,ce=this.escapeExpression,ue=this;return n.buffer.push("<div "),n.buffer.push(ce(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:n}))),n.buffer.push('>\r\n  <table width="100%">\r\n    <tr>\r\n      <td width="50%">\r\n        <p class="komodo-heading">'),n.buffer.push(ce((re=a.loc||t&&t.loc,ie={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},re?re.call(t,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.useCaseTitle",ie):le.call(t,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.useCaseTitle",ie)))),n.buffer.push('</p>\r\n      </td>\r\n      <td width="50%" align="right">\r\n        <b>'),n.buffer.push(ce(a.view.call(t,"Komodo.Controls.Link",{hash:{text:"~locale.manageaccount:general.Back~",href:"#/paymentPlanApplications"},hashTypes:{text:"STRING",href:"STRING"},hashContexts:{text:t,href:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push('</b>\r\n      </td>\r\n    </tr>\r\n  </table>\r\n\r\n    <div class="linkshide">\r\n  '),se=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageAccount.paymentPlan:manageDevicePaymentPlan.devicePaymentPlanDetails~",linksBinding:"collapsibleViewLinks"},hashTypes:{title:"STRING",linksBinding:"STRING"},hashContexts:{title:t,linksBinding:t},inverse:ue.noop,fn:ue.program(1,s,n),contexts:[t],types:["ID"],data:n}),(se||0===se)&&n.buffer.push(se),n.buffer.push('\r\n    </div>\r\n  <div id="dpp-linkActions" style="display:none">\r\n    '),se=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{titleBinding:"data.currentTittle"},hashTypes:{titleBinding:"STRING"},hashContexts:{titleBinding:t},inverse:ue.noop,fn:ue.program(5,l,n),contexts:[t],types:["ID"],data:n}),(se||0===se)&&n.buffer.push(se),n.buffer.push("\r\n  </div>\r\n\r\n  "),se=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageAccount.paymentPlan:manageDevicePaymentPlan.paymentPlanActivities~"},hashTypes:{title:"STRING"},hashContexts:{title:t},inverse:ue.noop,fn:ue.program(84,oe,n),contexts:[t],types:["ID"],data:n}),(se||0===se)&&n.buffer.push(se),n.buffer.push("\r\n</div>"),""}),Ember.TEMPLATES.InvoiceDetailsView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o;return t.buffer.push("\r\n    "),o=a.if.call(e,"enableDispatchOption",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(2,r,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),o=a.if.call(e,"gridData.length",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(5,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function r(e,t){var o;return t.buffer.push('\r\n    <table>\r\n        <tr>\r\n            <td width="30%">'),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.statements:invoice.invoiceNumber~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(' </td>\r\n            <td width="30%"></td>\r\n            <td width="40%"></td>\r\n        </tr>\r\n        <tr>\r\n            <td>\r\n                '),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{label:"~locale.statements:invoice.invoiceNumber~",valueBinding:"data.invoiceNumber"},hashTypes:{label:"STRING",valueBinding:"STRING"},hashContexts:{label:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            </td>\r\n        </tr>\r\n        <tr>\r\n            <td>\r\n                "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{valueBinding:"data.fromDate",label:"~locale.statements:statement.from~",validatorBinding:"validators.fromDateValidator"},hashTypes:{valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            </td>\r\n            <td>\r\n                "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{valueBinding:"data.toDate",label:"~locale.statements:statement.to~",validatorBinding:"validators.toDateValidator"},hashTypes:{valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            </td>\r\n            <td></td>\r\n        </tr>\r\n        <tr>\r\n            <td></td>\r\n            <td></td>\r\n            <td>"),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"getInvoice",size:"nextto-control"},hashTypes:{action:"STRING",size:"STRING"},hashContexts:{action:e,size:e},inverse:y.noop,fn:y.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        </tr>\r\n    </table>\r\n    <hr />\r\n    "),""}function i(e,t){t.buffer.push("Search")}function l(e,t){var o,n,s;return t.buffer.push('\r\n    <table id="invoiceInfo" class="table table-bordered komodo-datagrid">\r\n        <thead>\r\n            <tr>\r\n                <th width="10%">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.statements:invoice.account",s):b.call(e,"loc","locale.statements:invoice.account",s)))),t.buffer.push('</th>\r\n                <th width="20%">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.statements:invoice.taxText",s):b.call(e,"loc","locale.statements:invoice.taxText",s)))),t.buffer.push('</th>\r\n                <th width="20%">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.statements:invoice.methodOfPayment",s):b.call(e,"loc","locale.statements:invoice.methodOfPayment",s)))),t.buffer.push('</th>\r\n                \x3c!--  <th width="20%">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.statements:invoice.totalText",s):b.call(e,"loc","locale.statements:invoice.totalText",s)))),t.buffer.push('</th>--\x3e\r\n                <th width="20%">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.statements:invoice.dueDateText",s):b.call(e,"loc","locale.statements:invoice.dueDateText",s)))),t.buffer.push('</th>\r\n                <th width="10%">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.statements:invoice.actions",s):b.call(e,"loc","locale.statements:invoice.actions",s)))),t.buffer.push("</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            "),o=a.each.call(e,"item","in","gridData",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(6,c,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </tbody>\r\n    </table>\r\n    "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.TablePager",{hash:{tableId:"invoiceInfo",contentBinding:"gridData",itemsPerPage:"10",headerRows:"1"},hashTypes:{tableId:"STRING",contentBinding:"STRING",itemsPerPage:"STRING",headerRows:"STRING"},hashContexts:{tableId:e,contentBinding:e,itemsPerPage:e,headerRows:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function c(e,t){var o;return t.buffer.push("\r\n            <tr>\r\n                <td>"),o=a._triageMustache.call(e,"item.accountnumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                <td>"),o=a._triageMustache.call(e,"item.invoiceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                <td>"),o=a._triageMustache.call(e,"item.mop",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                \x3c!-- <td>"),o=a._triageMustache.call(e,"item.invoiceAmount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>--\x3e\r\n                <td>"),o=a._triageMustache.call(e,"item.dueDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                <td>\r\n                    <table>\r\n                        <tr>\r\n                            <td>"),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"viewAction",disableBinding:"item.disableButton",contentBinding:"item",tabindex:"45"},hashTypes:{action:"STRING",disableBinding:"STRING",contentBinding:"STRING",tabindex:"STRING"},hashContexts:{action:e,disableBinding:e,contentBinding:e,tabindex:e},inverse:y.noop,fn:y.program(7,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                            <td>"),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"emailAction",disableBinding:"item.disableButton",contentBinding:"item",tabindex:"45"},hashTypes:{action:"STRING",disableBinding:"STRING",contentBinding:"STRING",tabindex:"STRING"},hashContexts:{action:e,
disableBinding:e,contentBinding:e,tabindex:e},inverse:y.noop,fn:y.program(9,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                        </tr>\r\n                    </table>\r\n                </td>\r\n            </tr>\r\n            "),""}function u(e,t){var o,n;t.buffer.push(v((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.statements:invoice.view",n):b.call(e,"loc","locale.statements:invoice.view",n))))}function d(e,t){var o,n;t.buffer.push(v((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.statements:invoice.email",n):b.call(e,"loc","locale.statements:invoice.email",n))))}function h(e,t){var o;return t.buffer.push('\r\n    <table>\r\n        <tr>\r\n            <td width="40%"></td>\r\n        </tr>\r\n        <tr>\r\n            <td>'),t.buffer.push(v(a.view.call(e,"Komodo.Controls.TextField",{hash:{label:"~locale.statements:invoice.invoiceNumber~",valueBinding:"data.searchInvoiceNumber",validatorBinding:"validators.searchInvoiceNumberValidator"},hashTypes:{label:"STRING",valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{label:e,valueBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n\r\n            <td>"),t.buffer.push(v(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{label:"~locale.statements:invoice.invoiceDate~",valueBinding:"data.searchDate",validatorBinding:"validators.searchDateValidator"},hashTypes:{label:"STRING",valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{label:e,valueBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n\r\n        </tr>\r\n        <tr>\r\n            <td></td>\r\n            <td></td>\r\n            <td>"),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"createInvoice",size:"nextto-control"},hashTypes:{action:"STRING",size:"STRING"},hashContexts:{action:e,size:e},inverse:y.noop,fn:y.program(12,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        </tr>\r\n    </table>\r\n    "),""}function m(e,t){t.buffer.push("Create Invoice")}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var p,f,g,v=this.escapeExpression,y=this,b=a.helperMissing;return n.buffer.push('<div class="customer-page-padding">\r\n    <div width="90%">\r\n        <span class="komodo-heading">'),n.buffer.push(v((f=a.loc||t&&t.loc,g={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},f?f.call(t,"locale.statements:invoice.invoice",g):b.call(t,"loc","locale.statements:invoice.invoice",g)))),n.buffer.push('</span>\r\n        <span class="float-right">\r\n            <b>\r\n                <a href="#/home">&lt;'),n.buffer.push(v((f=a.loc||t&&t.loc,g={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},f?f.call(t,"locale.associateProducts:associateProducts.back",g):b.call(t,"loc","locale.associateProducts:associateProducts.back",g)))),n.buffer.push("</a>\r\n            </b>\r\n        </span>\r\n    </div>\r\n    <hr />\r\n    "),p=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.statements:invoice.invoiceSearch~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:y.noop,fn:y.program(1,s,n),contexts:[t],types:["ID"],data:n}),(p||0===p)&&n.buffer.push(p),n.buffer.push("\r\n    "),p=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.statements:invoice.requestInvoice~",isCollapsed:!1,visibleBinding:"controlsVisible"},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN",visibleBinding:"STRING"},hashContexts:{title:t,isCollapsed:t,visibleBinding:t},inverse:y.noop,fn:y.program(11,h,n),contexts:[t],types:["ID"],data:n}),(p||0===p)&&n.buffer.push(p),n.buffer.push("\r\n</div>"),""}),Ember.TEMPLATES.FinancialTransactionsView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){return t.buffer.push("\r\n  "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"finTranModel.pendingRefundNotification",class:"retrieve-records"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function r(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:N.noop,fn:N.program(4,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <hr/>\r\n  <br/>\r\n  "),o=a.if.call(e,"isFinancialTransactions",{hash:{},hashTypes:{},hashContexts:{},inverse:N.noop,fn:N.program(14,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),o=a.if.call(e,"financialTransactios.length",{hash:{},hashTypes:{},hashContexts:{},inverse:N.program(29,C,t),fn:N.program(27,T,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),""}function i(e,t){var o;return t.buffer.push("\r\n  \x3c!--Drop down List for Account Number--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:N.noop,fn:N.program(5,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  \x3c!--List Of Decoders/SmartCards--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:N.noop,fn:N.program(7,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  \r\n  \r\n  "),""}function l(e,t){return t.buffer.push("\r\n\r\n  "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{label:"~locale.manageaccount:financialTransactionsTab.fromDate~",valueBinding:"finTranModel.fromDate",validatorBinding:"validators.fromDateValidator",tabindex:"1"},hashTypes:{label:"STRING",valueBinding:"STRING",validatorBinding:"STRING",tabindex:"STRING"},hashContexts:{label:e,valueBinding:e,validatorBinding:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" \r\n    \x3c!--Textbox for minimum Amount--\x3e\r\n  "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"finTranModel.minAmount",label:"~locale.manageaccount:financialTransactionsTab.minAmount~",maxlength:"10",tabindex:"3"},hashTypes:{valueBinding:"STRING",label:"STRING",maxlength:"STRING",tabindex:"STRING"},hashContexts:{valueBinding:e,label:e,maxlength:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"finTranModel.selectedAcccountId",label:"~locale.manageAccount.editPaymentDetails:paymentDetail.accountNumber~",contentBinding:"allAccounts",optionLabelPath:"content",optionValuePath:"content",tabindex:"5"},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",tabindex:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function c(e,t){var o;return t.buffer.push("\r\n   "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{label:"~locale.manageaccount:financialTransactionsTab.toDate~",valueBinding:"finTranModel.toDate",validatorBinding:"validators.toDateValidator",tabindex:"2"},hashTypes:{label:"STRING",valueBinding:"STRING",validatorBinding:"STRING",tabindex:"STRING"},hashContexts:{label:e,valueBinding:e,validatorBinding:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" \r\n  \r\n   \x3c!--Textbox for maximum Amount--\x3e\r\n      "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"finTranModel.maxAmount",label:"~locale.manageaccount:financialTransactionsTab.maxAmount~",maxlength:"10",tabindex:"4"},hashTypes:{valueBinding:"STRING",label:"STRING",maxlength:"STRING",tabindex:"STRING"},hashContexts:{valueBinding:e,label:e,maxlength:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  \r\n  \r\n  \x3c!--"),t.buffer.push(S(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.editPaymentDetails:paymentDetail.smartcardlableForFTs~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('--\x3e\r\n  <div class="scroll-list" style="border-color:white;">\r\n    '),o=a.each.call(e,"smartcard","in","smartcards",{hash:{},hashTypes:{},hashContexts:{},inverse:N.noop,fn:N.program(8,u,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  </div>\r\n   <br/>\r\n   <br/>\r\n  <br />\r\n    <br />\r\n    \r\n    \x3c!--Search Button--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"searchTransactions",tabindex:"5",disabledBinding:"isSearchDisabled"},hashTypes:{action:"STRING",tabindex:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,tabindex:e,disabledBinding:e},inverse:N.noop,fn:N.program(10,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  \x3c!--Clear Button--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"clearTransactionsFilters",tabindex:"5",disabledBinding:"isSearching",type:"inverse"},hashTypes:{action:"STRING",tabindex:"STRING",disabledBinding:"STRING",type:"STRING"},hashContexts:{action:e,tabindex:e,disabledBinding:e,type:e},inverse:N.noop,fn:N.program(12,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  \r\n  "),""}function u(e,t){return t.buffer.push("\r\n      "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"smartcard",class:"list-item"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function d(e,t){var o,n;t.buffer.push(S((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageCase:customerInteractionHistory.search",n):A.call(e,"loc","locale.manageCase:customerInteractionHistory.search",n))))}function h(e,t){var o,n;t.buffer.push(S((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageCase:customerInteractionHistory.clear",n):A.call(e,"loc","locale.manageCase:customerInteractionHistory.clear",n))))}function m(e,t){var o,n,s;return t.buffer.push('\r\n  <table id="financialTransactioInfo" class="table table-bordered komodo-datagrid" width="100%">\r\n      <tr>\r\n          <th width="10%">'),t.buffer.push(S((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:transactionGrid.creationDate",s):A.call(e,"loc","locale.manageAccount.editPaymentDetails:transactionGrid.creationDate",s)))),t.buffer.push('</th>\r\n          <th width="12%">'),t.buffer.push(S((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:transactionGrid.TransactionType",s):A.call(e,"loc","locale.manageAccount.editPaymentDetails:transactionGrid.TransactionType",s)))),t.buffer.push('</th>\r\n          <th width="10%">'),t.buffer.push(S((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:transactionGrid.productId",s):A.call(e,"loc","locale.manageAccount.editPaymentDetails:transactionGrid.productId",s)))),t.buffer.push('</th>\r\n          <th width="15%">'),t.buffer.push(S((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:transactionGrid.product",s):A.call(e,"loc","locale.manageAccount.editPaymentDetails:transactionGrid.product",s)))),t.buffer.push("</th>\r\n          "),o=a.if.call(e,"showsmartcardDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:N.noop,fn:N.program(15,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n          <th width="15%">'),t.buffer.push(S((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:transactionGrid.ledgerAccountDescription",s):A.call(e,"loc","locale.manageAccount.editPaymentDetails:transactionGrid.ledgerAccountDescription",s)))),t.buffer.push('</th>\r\n          <th width="9%">'),t.buffer.push(S((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:transactionGrid.periodFrom",s):A.call(e,"loc","locale.manageAccount.editPaymentDetails:transactionGrid.periodFrom",s)))),t.buffer.push('</th>\r\n          <th width="9%">'),t.buffer.push(S((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:transactionGrid.PeriodTo",s):A.call(e,"loc","locale.manageAccount.editPaymentDetails:transactionGrid.PeriodTo",s)))),t.buffer.push('</th>\r\n          <th width="10%">'),t.buffer.push(S((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:transactionGrid.amount",s):A.call(e,"loc","locale.manageAccount.editPaymentDetails:transactionGrid.amount",s)))),t.buffer.push('</th>\r\n          <th width="10%">'),t.buffer.push(S((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:transactionGrid.runningTotal",s):A.call(e,"loc","locale.manageAccount.editPaymentDetails:transactionGrid.runningTotal",s)))),t.buffer.push('</th>\r\n          <th width="10%">'),t.buffer.push(S((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:transactionGrid.actions",s):A.call(e,"loc","locale.manageAccount.editPaymentDetails:transactionGrid.actions",s)))),t.buffer.push("</th>\r\n\r\n      </tr>\r\n    "),o=a.each.call(e,"item","in","financialTransactios",{hash:{},hashTypes:{},hashContexts:{},inverse:N.noop,fn:N.program(17,f,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  </table>\r\n\r\n  "),""}function p(e,t){var o,n;return t.buffer.push('\r\n          <th width="10%">'),t.buffer.push(S((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.editPaymentDetails:transactionGrid.smartcard",n):A.call(e,"loc","locale.manageAccount.editPaymentDetails:transactionGrid.smartcard",n)))),t.buffer.push("</th>\r\n          "),""}function f(e,t){var o;return t.buffer.push("\r\n    <tr>\r\n      "),o=a.with.call(e,"item",{hash:{},hashTypes:{},hashContexts:{},inverse:N.noop,fn:N.program(18,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      <td>\r\n        "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{contentBinding:"item",action:"viewFinancialTransaction",size:"xs",tabindex:"5"},hashTypes:{contentBinding:"STRING",action:"STRING",size:"STRING",tabindex:"STRING"},hashContexts:{contentBinding:e,action:e,size:e,tabindex:e},inverse:N.noop,fn:N.program(21,y,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{contentBinding:"item",action:"reverseFinancialTransaction",type:"danger",size:"xs",tabindex:"5",disableBinding:"reverseFinancialTransactionModel.disableReversalsButton",visibleBinding:"item.validateLedgerAccount"},hashTypes:{contentBinding:"STRING",action:"STRING",type:"STRING",size:"STRING",tabindex:"STRING",disableBinding:"STRING",visibleBinding:"STRING"},hashContexts:{contentBinding:e,action:e,type:e,size:e,tabindex:e,disableBinding:e,visibleBinding:e},inverse:N.noop,fn:N.program(23,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{contentBinding:"item",action:"transferATransfer",type:"danger",size:"xs",tabindex:"6",visibleBinding:"item.hideTransferButton",disableBinding:"reverseFinancialTransactionModel.disableReversalsButton"},hashTypes:{contentBinding:"STRING",action:"STRING",type:"STRING",size:"STRING",tabindex:"STRING",visibleBinding:"STRING",disableBinding:"STRING"},hashContexts:{contentBinding:e,action:e,type:e,size:e,tabindex:e,visibleBinding:e,disableBinding:e},inverse:N.noop,fn:N.program(25,D,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td>\r\n    </tr>\r\n\r\n    "),""}function g(e,t){var o;return t.buffer.push("\r\n      <td>"),o=a._triageMustache.call(e,"item.creationDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n      <td>"),o=a._triageMustache.call(e,"item.financialTransactionType",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n      <td>"),o=a._triageMustache.call(e,"item.AgreementDetailId",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        <td>"),o=a._triageMustache.call(e,"item.product",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        "),o=a.if.call(e,"item.displaySmartcard",{hash:{},hashTypes:{},hashContexts:{},inverse:N.noop,fn:N.program(19,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      <td>"),o=a._triageMustache.call(e,"item.ledgerAccountDescription",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n      <td>"),o=a._triageMustache.call(e,"item.periodFrom",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n      <td>"),o=a._triageMustache.call(e,"item.periodTo",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n     \r\n      <td style="text-align:right" >'),o=a._triageMustache.call(e,"item.amount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n      <td style="text-align:right" >'),o=a._triageMustache.call(e,"item.runningTotal",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n      "),""}function v(e,t){var o;return t.buffer.push('\r\n        <td>\r\n            <div class="scroll-list" style="border-color: white;">'),o=a._triageMustache.call(e,"item.SmartCardNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n        </td>\r\n        "),""}function y(e,t){var o,n;t.buffer.push(S((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.editPaymentDetails:paymentDetail.actionView",n):A.call(e,"loc","locale.manageAccount.editPaymentDetails:paymentDetail.actionView",n))))}function b(e,t){var o,n;t.buffer.push(S((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.editPaymentDetails:paymentDetail.actionReverse",n):A.call(e,"loc","locale.manageAccount.editPaymentDetails:paymentDetail.actionReverse",n))))}function D(e,t){t.buffer.push("Transfer")}function T(e,t){return t.buffer.push("\r\n  "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.Pager",{hash:{mode:"virtual",contentLengthBinding:"_totalFts",pageSelectedAction:"pageSelected",itemsPerPage:"10",visiblePageCount:"10"},hashTypes:{mode:"STRING",contentLengthBinding:"STRING",pageSelectedAction:"STRING",itemsPerPage:"STRING",visiblePageCount:"STRING"},hashContexts:{mode:e,contentLengthBinding:e,pageSelectedAction:e,itemsPerPage:e,visiblePageCount:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  "),""}function C(e,t){return t.buffer.push("\r\n  "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.editPaymentDetails:paymentDetail.serviceNoDataMessage~",textBinding:"dataMessage"},hashTypes:{text:"STRING",textBinding:"STRING"},hashContexts:{text:e,textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var I,x,P,S=this.escapeExpression,A=a.helperMissing,N=this;return n.buffer.push("<div "),n.buffer.push(S(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:n}))),n.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),n.buffer.push(S((x=a.loc||t&&t.loc,P={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},x?x.call(t,"locale.manageaccount:general.financialTransactionsTitle",P):A.call(t,"loc","locale.manageaccount:general.financialTransactionsTitle",P)))),n.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/account">&lt;'),n.buffer.push(S((x=a.loc||t&&t.loc,P={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},x?x.call(t,"locale.manageaccount:viewAccountInformation.back",P):A.call(t,"loc","locale.manageaccount:viewAccountInformation.back",P)))),n.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n\r\n  "),I=a.if.call(t,"finTranModel.disableReversalsButton",{hash:{},hashTypes:{},hashContexts:{},inverse:N.noop,fn:N.program(1,s,n),contexts:[t],types:["ID"],data:n}),(I||0===I)&&n.buffer.push(I),n.buffer.push("\r\n  <br/>\r\n\r\n  "),I=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageaccount:financialTransactionsTab.title~",visibleBinding:"isFinancialTransactionsGridDataAvailable",linksBinding:"exportToExcelLinks"},hashTypes:{title:"STRING",visibleBinding:"STRING",linksBinding:"STRING"},hashContexts:{title:t,visibleBinding:t,linksBinding:t},inverse:N.noop,fn:N.program(3,r,n),contexts:[t],types:["ID"],data:n}),(I||0===I)&&n.buffer.push(I),n.buffer.push("\r\n\r\n  "),n.buffer.push(S(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.editPaymentDetails:paymentDetail.serviceNoDataMessage~",textBinding:"dataMessage",visibleBinding:"isFinancialTransactionsExist"},hashTypes:{text:"STRING",textBinding:"STRING",visibleBinding:"STRING"},hashContexts:{text:t,textBinding:t,visibleBinding:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push("\r\n</div>"),""}),Ember.TEMPLATES.FinancialTransactionDetailsView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o;return t.buffer.push("\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(2,r,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function r(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:b.noop,fn:b.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:b.noop,fn:b.program(10,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n   "),""}function i(e,t){var o;return t.buffer.push("\r\n    \x3c!--Transaction Number--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.transactionNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.transactionNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n      \x3c!--Create Date--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.createDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.createDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n      \x3c!--Amount Paid--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.amountPaid~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.amountPaid"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n      \x3c!--Amount Excluding Tax--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.amountexcludingTax~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.amountExcludingTax"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n      \x3c!--Product--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.product~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.product"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n      \x3c!--Method Of Payment--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.methodOfPayment~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.methodOfPayment"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n      \x3c!--Ledger Account--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.ledgerAccount~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.ledgerAccount"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n      "),o=a.if.call(e,"showPaymentTransfer",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(4,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      \x3c!--Invoice Line--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.invoiceLine~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.invoiceLine"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n      "),o=a.if.call(e,"ftApprovalDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(6,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      \x3c!--Approved By--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.approvedBy~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.approvedBy"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n      \x3c!--Batch Number--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.batchNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.batchNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n      \x3c!--Receipt Number--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.receiptNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.receiptNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n      \x3c!--Comment--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.comment~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),
t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.comment"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n      "),o=a.if.call(e,"showsmartcardDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(8,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function l(e,t){return t.buffer.push("\r\n       \x3c!--From Customer--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.fromCustomer~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.TransferFromCustomerID"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n      \x3c!--From Account--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.fromAccount~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.TransferFromAccountID"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n      "),""}function c(e,t){return t.buffer.push("\r\n      \x3c!--FT Approval Details--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.requestedBy~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br />\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.requestedBy"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n      "),""}function u(e,t){return t.buffer.push("\r\n      \x3c!--SmartCard Number--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.smartcard~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      <br/>\r\n    <div class="scroll-list">'),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.SmartCardNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</div>\r\n      <br/><br/>\r\n      "),""}function d(e,t){var o;return t.buffer.push("\r\n      \x3c!--Created By Event--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.createdByEvent~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.createdByEvent"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n      \x3c!--Creatd By--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.createdBy~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.createdBy"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n      \x3c!--Amount Including Tax--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.amountIncludingTax~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.amountIncludingTax"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n      \x3c!--Vat Amount--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.vatAmount~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.vatAmount"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n      "),o=a.if.call(e,"showTax2Amount",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(11,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      \x3c!--ProductID--\x3e\r\n    "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.productID~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br/>\r\n    "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.AgreementDetailId"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br/><br/>\r\n      \x3c!--Account Number--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.accountNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.accountNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n      \x3c!--Bank Date--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.bankDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.bankDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n      "),o=a.if.call(e,"showPaymentTransfer",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(13,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      \x3c!--Pay Point--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.payPoint~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.payPoint"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n      "),o=a.if.call(e,"ftApprovalDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(15,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      \x3c!--Ledger Account Description--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.ledgerAccountDescription~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.ledgerAccountDescription"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n      \x3c!--Paid for Invoice--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.paidForInvoice~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.paidForInvoice"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n      \x3c!--approved Date--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.approvedDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.approvedDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n      \x3c!--Reversed Transaction--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.reversedTransaction~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.reversedTransaction"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n      \x3c!--Payment Reference--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.paymentReference~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.paymentReference"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n    "),""}function h(e,t){return t.buffer.push("\r\n       \x3c!--Tax 2 Amount--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.taxType2Amount~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.taxType2Amount"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n      "),""}function m(e,t){return t.buffer.push("\r\n      \x3c!--To Customer--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.toCustomer~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.TransferToCustomerID"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n      \x3c!--To Account--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.toAccount~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.TransferToAccountID"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n      "),""}function p(e,t){return t.buffer.push("\r\n      \x3c!--FT Approval details--\x3e\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:financialTransactionDetails.requestedStatus~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br />\r\n      "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.requestedStatus"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/><br/>\r\n      "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var f,g,v,y=this.escapeExpression,b=this,D=a.helperMissing;return n.buffer.push("<div "),n.buffer.push(y(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:n}))),n.buffer.push('>\r\n  <div width="90%">\r\n    <br/>\r\n    <span class="komodo-heading">'),n.buffer.push(y((g=a.loc||t&&t.loc,v={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},g?g.call(t,"locale.manageaccount:financialTransactionDetails.financialTransactionDetailsTitle",v):D.call(t,"loc","locale.manageaccount:financialTransactionDetails.financialTransactionDetailsTitle",v)))),n.buffer.push('</span>\r\n    <span class="float-right">   \r\n      <b>\r\n           '),n.buffer.push(y(a.view.call(t,"Komodo.Controls.Link",{hash:{tabindex:"1",action:"backToFinancialTransaction",text:"~locale.commercialcustomer:customer.back~"},hashTypes:{tabindex:"STRING",action:"STRING",text:"STRING"},hashContexts:{tabindex:t,action:t,text:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push("      \r\n      </b>      \r\n    </span>\r\n  </div>    \r\n  <br/>\r\n  <hr/>\r\n  <div>\r\n    "),f=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageaccount:financialTransactionDetails.transactionDetails~",isCollapsed:"false",linksBinding:"collapsiblePrevAndNextLinks",defaultLinkClassNames:"collapsible-view-link"},hashTypes:{title:"STRING",isCollapsed:"STRING",linksBinding:"STRING",defaultLinkClassNames:"STRING"},hashContexts:{title:t,isCollapsed:t,linksBinding:t,defaultLinkClassNames:t},inverse:b.noop,fn:b.program(1,s,n),contexts:[t],types:["ID"],data:n}),(f||0===f)&&n.buffer.push(f),n.buffer.push("\r\n  </div>\r\n</div>\r\n"),""}),Ember.TEMPLATES.EditPaymentPlanView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:I.noop,fn:I.program(2,r,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function r(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:I.noop,fn:I.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function i(e,t){var o,n,s;return t.buffer.push("\r\n    "),o=a.each.call(e,"statusResponse","in","_statusResponses",{hash:{},hashTypes:{},hashContexts:{},inverse:I.noop,fn:I.program(4,l,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    <div "),t.buffer.push(C(a["bind-attr"].call(e,{hash:{class:"_showProcessing:komodo-show:komodo-hidden"},hashTypes:{class:"STRING"},hashContexts:{class:e},contexts:[],types:[],data:t}))),t.buffer.push('>\r\n        <img src="Content/Images/busy-small.svg" />&nbsp;'),t.buffer.push(C((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.komodo:busyIndicator.typeProcessing",s):x.call(e,"loc","locale.komodo:busyIndicator.typeProcessing",s)))),t.buffer.push("\r\n    </div>\r\n    "),""}function l(e,t){var o;return t.buffer.push("\r\n    <div><img "),t.buffer.push(C(a["bind-attr"].call(e,{hash:{src:"statusResponse.imageUrl"},hashTypes:{src:"STRING"},hashContexts:{src:e},contexts:[],types:[],data:t}))),t.buffer.push(" />&nbsp;"),o=a._triageMustache.call(e,"statusResponse.status",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(": "),o=a._triageMustache.call(e,"statusResponse.dateChanged",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n    "),""}function c(e,t){var o,n,s;return t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:I.noop,fn:I.program(7,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        <br />\r\n        <hr />\r\n        <br />\r\n        "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:paymentPlanDetails.listOfInstalments~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('<br />\r\n        <br />\r\n        <table id="paymentPlanTable" class="table table-bordered komodo-datagrid">\r\n            <tr>\r\n                <th>'),t.buffer.push(C((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:listOfInstalments.instalment",s):x.call(e,"loc","locale.manageAccount.paymentPlan:listOfInstalments.instalment",s)))),t.buffer.push("</th>\r\n                <th>"),t.buffer.push(C((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:listOfInstalments.dueDate",s):x.call(e,"loc","locale.manageAccount.paymentPlan:listOfInstalments.dueDate",s)))),t.buffer.push("</th>\r\n                <th>"),t.buffer.push(C((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:listOfInstalments.amount",s):x.call(e,"loc","locale.manageAccount.paymentPlan:listOfInstalments.amount",s)))),t.buffer.push("</th>\r\n                <th>"),t.buffer.push(C((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:listOfInstalments.paidAmount",s):x.call(e,"loc","locale.manageAccount.paymentPlan:listOfInstalments.paidAmount",s)))),t.buffer.push("</th>\r\n                <th>"),t.buffer.push(C((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:listOfInstalments.status",s):x.call(e,"loc","locale.manageAccount.paymentPlan:listOfInstalments.status",s)))),t.buffer.push("</th>\r\n            </tr>\r\n            "),o=a.each.call(e,"instalment","in","data.instalmentPlanDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:I.noop,fn:I.program(13,p,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </table>\r\n        "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:editPaymentPlan.runningTotal~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:": "},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.runningTotal",class:"sub-heading"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        <br />\r\n        "),o=a.if.call(e,"canEditPlan",{hash:{},hashTypes:{},hashContexts:{},inverse:I.noop,fn:I.program(15,f,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        <br />    \r\n    "),""}function u(e,t){var o;return t.buffer.push("\r\n            "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:I.noop,fn:I.program(8,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:I.noop,fn:I.program(10,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function d(e,t){return t.buffer.push("\r\n                "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:paymentPlanDetails.paymentPlanId~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n                "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.planId"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br /><br />\r\n                "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:paymentPlanDetails.loanLedgerAccount~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n                "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.loanLedgerAccount"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br /><br />\r\n                "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:paymentPlanDetails.paymentPlanTotal~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n                "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.totalAmount"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br /><br />\r\n                "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:listOfPaymentPlans.unpaidBalance~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n                "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.unpaidBalance"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br /><br />\r\n            "),""}function h(e,t){var o;return t.buffer.push("\r\n                "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:paymentPlanDetails.accountNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n                "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.accountNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br /><br />\r\n                "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:paymentPlanDetails.termLedgerAccount~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n                "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.termLedgerAccount"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br /><br />\r\n                "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:listOfPaymentPlans.startDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n                "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.startDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br /><br />\r\n                "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:editPaymentPlan.numberOfInstalments~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n               "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{contentBinding:"data.instalmentTerms",valueBinding:"_instalmentTerms",optionLabelPath:"content.value",optionValuePath:"content.key",selectionBinding:"content.key",prompt:" "},hashTypes:{contentBinding:"STRING",valueBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",selectionBinding:"STRING",prompt:"STRING"},hashContexts:{contentBinding:e,valueBinding:e,optionLabelPath:e,optionValuePath:e,selectionBinding:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"calculateInstalments",disableBinding:"data.disableCalculate",class:"nextto-control btn-success"},hashTypes:{action:"STRING",disableBinding:"STRING",class:"STRING"},hashContexts:{action:e,disableBinding:e,class:e},inverse:I.noop,fn:I.program(11,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),""}function m(e,t){var o,n;return t.buffer.push(" "),t.buffer.push(C((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:editPaymentPlan.calculateInstalments",n):x.call(e,"loc","locale.manageAccount.paymentPlan:editPaymentPlan.calculateInstalments",n)))),t.buffer.push("\r\n                "),""}function p(e,t){var o;return t.buffer.push("\r\n            <tr>\r\n                <td>"),o=a._triageMustache.call(e,"instalment.Id",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                <td>"),o=a._triageMustache.call(e,"instalment.DueDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n                <td width="30%">'),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{valueBinding:"instalment.Amount",validatorBinding:"instalment.validator",disable:"instalment.Disable"},hashTypes:{valueBinding:"STRING",validatorBinding:"STRING",disable:"ID"},hashContexts:{valueBinding:e,validatorBinding:e,disable:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"instalment.validator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</td>\r\n                <td class="komodo-decimal">'),o=a._triageMustache.call(e,"instalment.PaidAmount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                <td>"),o=a._triageMustache.call(e,"instalment.Status",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n            </tr>\r\n            "),""}function f(e,t){var o;return t.buffer.push('\r\n    <br />    \r\n        <div class="float-right">\r\n            '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"cancelArrangement",visibleBinding:"data.CanCancelPlan",class:"btn-danger"},hashTypes:{action:"STRING",visibleBinding:"STRING",class:"STRING"},hashContexts:{action:e,visibleBinding:e,class:e},inverse:I.noop,fn:I.program(16,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"saveChanges",disableBinding:"data.disableSaveInstalment"},hashTypes:{action:"STRING",disableBinding:"ID"},hashContexts:{action:e,disableBinding:e},inverse:I.noop,fn:I.program(18,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"cancelChanges",disableBinding:"data.disableCancelInstalment",class:"btn-inverse"},hashTypes:{action:"STRING",disableBinding:"ID",class:"STRING"},hashContexts:{action:e,disableBinding:e,class:e},inverse:I.noop,fn:I.program(20,y,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </div>\r\n        "),""}function g(e,t){var o,n;return t.buffer.push(" "),t.buffer.push(C((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:paymentPlanDetails.cancelArrangement",n):x.call(e,"loc","locale.manageAccount.paymentPlan:paymentPlanDetails.cancelArrangement",n)))),t.buffer.push("\r\n            "),""}function v(e,t){var o,n;return t.buffer.push(" "),t.buffer.push(C((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},
hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:editPaymentPlan.saveChanges",n):x.call(e,"loc","locale.manageAccount.paymentPlan:editPaymentPlan.saveChanges",n)))),t.buffer.push("\r\n            "),""}function y(e,t){var o,n;return t.buffer.push(" "),t.buffer.push(C((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:editPaymentPlan.cancelChanges",n):x.call(e,"loc","locale.manageAccount.paymentPlan:editPaymentPlan.cancelChanges",n)))),t.buffer.push("\r\n            "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var b,D,T,C=this.escapeExpression,I=this,x=a.helperMissing;return n.buffer.push("<div "),n.buffer.push(C(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:n}))),n.buffer.push('>\r\n    <div>\r\n        <span class="komodo-heading">'),n.buffer.push(C((D=a.loc||t&&t.loc,T={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},D?D.call(t,"locale.manageAccount.paymentPlan:editPaymentPlan.editPaymentArrangement",T):x.call(t,"loc","locale.manageAccount.paymentPlan:editPaymentPlan.editPaymentArrangement",T)))),n.buffer.push('</span>\r\n        <span class="float-right">\r\n            <b>\r\n                <a href="#/paymentPlan">&lt;'),n.buffer.push(C((D=a.loc||t&&t.loc,T={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},D?D.call(t,"locale.manageaccount:general.Back",T):x.call(t,"loc","locale.manageaccount:general.Back",T)))),n.buffer.push("</a>\r\n            </b>\r\n        </span>\r\n    </div>\r\n    <hr />\r\n\r\n    "),b=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageAccount.paymentPlan:createPaymentPlan.results~",visibleBinding:"_showResults"},hashTypes:{title:"STRING",visibleBinding:"STRING"},hashContexts:{title:t,visibleBinding:t},inverse:I.noop,fn:I.program(1,s,n),contexts:[t],types:["ID"],data:n}),(b||0===b)&&n.buffer.push(b),n.buffer.push("\r\n\r\n    "),b=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageAccount.paymentPlan:paymentPlans.paymentPlanDetails~",visibleBinding:"_showDataEntry"},hashTypes:{title:"STRING",visibleBinding:"STRING"},hashContexts:{title:t,visibleBinding:t},inverse:I.noop,fn:I.program(6,c,n),contexts:[t],types:["ID"],data:n}),(b||0===b)&&n.buffer.push(b),n.buffer.push("\r\n</div>"),""}),Ember.TEMPLATES.EditPaymentDetailsView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:he.noop,fn:he.program(2,r,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:he.noop,fn:he.program(7,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),o=a.if.call(e,"editPaymentDetailsModel.hideDebitOrderControls",{hash:{},hashTypes:{},hashContexts:{},inverse:he.program(20,v,t),fn:he.program(18,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function r(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:he.noop,fn:he.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:he.noop,fn:he.program(5,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),""}function i(e,t){return t.buffer.push("\r\n  \x3c!--Account Number--\x3e\r\n  "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.editPaymentDetails:paymentDetail.paymentDetailsFor~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"editPaymentDetailsModel.selectedAcccountId",label:"~locale.manageAccount.editPaymentDetails:paymentDetail.accountNumber~",contentBinding:"allAccounts",optionLabelPath:"content",optionValuePath:"content"},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function l(e,t){return t.buffer.push("\r\n  \x3c!--Account Description --\x3e\r\n  <br/><br/>\r\n  "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.editPaymentDetails:paymentDetail.accountDescription~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"editPaymentDetailsModel.accountDescription"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),""}function c(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:he.noop,fn:he.program(8,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:he.noop,fn:he.program(10,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:he.noop,fn:he.program(12,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function u(e,t){return t.buffer.push("\r\n  \x3c!--Default Account --\x3e\r\n  "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.editPaymentDetails:paymentDetail.defaultAccount~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"editPaymentDetailsModel.defaultAccount"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function d(e,t){return t.buffer.push("\r\n  \x3c!--List of Devices - Smartcards Removed--\x3e\r\n \r\n  \x3c!--Method Of Payment--\x3e\r\n  "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{tabindex:"",contentBinding:"editPaymentDetailsModel.radioButtonMethodofPayment",displayPath:"title",valuePath:"value",valueBinding:"editPaymentDetailsModel.methodOfPaymentData",label:"~locale.manageAccount.editPaymentDetails:paymentDetail.methodOfPayment~",action:"",disabledBinding:"isDisbaleMethodOfPayment",validatorBinding:"validators.methodOfPaymentDataValidator"},hashTypes:{tabindex:"STRING",contentBinding:"STRING",displayPath:"STRING",valuePath:"STRING",valueBinding:"STRING",label:"STRING",action:"STRING",disabledBinding:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,contentBinding:e,displayPath:e,valuePath:e,valueBinding:e,label:e,action:e,disabledBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function h(e,t){var o;return t.buffer.push("\r\n  "),o=a.if.call(e,"editPaymentDetailsModel.hideDebitOrderControls",{hash:{},hashTypes:{},hashContexts:{},inverse:he.program(16,f,t),fn:he.program(13,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function m(e,t){var o;return t.buffer.push("\r\n  "),o=a.if.call(e,"editPaymentDetailsModel.hidePaymentDayControls",{hash:{},hashTypes:{},hashContexts:{},inverse:he.program(16,f,t),fn:he.program(14,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function p(e,t){return t.buffer.push("\r\n  \x3c!--Debit Order Day--\x3e\r\n  "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"editPaymentDetailsModel.debitOrderDay",label:"~locale.manageAccount.editPaymentDetails:paymentDetail.debitOrderDay~",contentBinding:"debitOrderDays",optionLabelPath:"content.value",optionValuePath:"content.key",prompt:" ",validatorBinding:"validators.debitOrderDayValidator",disabledBinding:"editPaymentDetailsModel.isDisbaleInvoiceDay",visibleBinding:"hideDebOrdControls"},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING",validatorBinding:"STRING",disabledBinding:"STRING",visibleBinding:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e,validatorBinding:e,disabledBinding:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function f(e,t){return t.buffer.push("\r\n  \x3c!--Payment Day--\x3e\r\n  "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"editPaymentDetailsModel.debitOrderDay",label:"~locale.manageAccount.editPaymentDetails:paymentDetail.paymentDay~",contentBinding:"debitOrderDays",optionLabelPath:"content.value",optionValuePath:"content.key",prompt:" ",disabledBinding:"editPaymentDetailsModel.isDisbaleInvoiceDay",validatorBinding:"validators.debitOrderDayValidator"},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING",disabledBinding:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e,disabledBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  "),""}function g(e,t){t.buffer.push(" \r\n  ")}function v(e,t){t.buffer.push("\r\n\r\n  ")}function y(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:he.noop,fn:he.program(23,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n\r\n    <div "),t.buffer.push(de(a["bind-attr"].call(e,{hash:{style:"showOverrideAHVPanel"},hashTypes:{style:"STRING"},hashContexts:{style:e},contexts:[],types:[],data:t}))),t.buffer.push(">\r\n      <hr />\r\n\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:he.noop,fn:he.program(55,V,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n      <hr />\r\n\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:he.noop,fn:he.program(68,J,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </div>\r\n    "),""}function b(e,t){var o;return t.buffer.push("\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:he.noop,fn:he.program(24,D,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:he.noop,fn:he.program(33,P,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    <br />\r\n    <br />\r\n    <br />\r\n    <div>\r\n      <div "),t.buffer.push(de(a["bind-attr"].call(e,{hash:{style:"showThirdPartyDocsPanel"},hashTypes:{style:"STRING"},hashContexts:{style:e},contexts:[],types:[],data:t}))),t.buffer.push(">\r\n        <hr />\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:he.noop,fn:he.program(38,N,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        <hr />\r\n      </div>\r\n    </div>\r\n\r\n    "),""}function D(e,t){var o;return t.buffer.push("\r\n    "),o=a.if.call(e,"editPaymentDetailsModel.hideDebitOrderControls",{hash:{},hashTypes:{},hashContexts:{},inverse:he.program(27,C,t),fn:he.program(25,T,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    \x3c!--Account Holders Name and Surname--\x3e\r\n    "),o=a.if.call(e,"editPaymentDetailsModel.iscustomerTypeDealer",{hash:{},hashTypes:{},hashContexts:{},inverse:he.program(31,x,t),fn:he.program(29,I,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    \x3c!--Account Holders Phone Number--\x3e    \r\n    "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"editPaymentDetailsModel.accountHolderPhoneNumber",label:"~locale.manageAccount.editPaymentDetails:paymentDetail.accountHolderPhoneNumber~",visibleBinding:"hideDebOrdControls",disableBinding:"isAccHolderNameAndIdEnabled",validatorBinding:"validators.accountHolderPhoneNumberValidator"},hashTypes:{valueBinding:"STRING",label:"STRING",visibleBinding:"STRING",disableBinding:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,label:e,visibleBinding:e,disableBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n   \r\n    \x3c!--Bank--\x3e\r\n    "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"editPaymentDetailsModel.bankName",label:"~locale.manageAccount.editPaymentDetails:paymentDetail.bankName~",contentBinding:"banks",optionLabelPath:"content.CanonicalValue",optionValuePath:"content.CanonicalKey",prompt:" ",validatorBinding:"validators.bankNameValidator",disabledBinding:"isDisbaleBankName",visibleBinding:"hideDebOrdControls"},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING",validatorBinding:"STRING",disabledBinding:"STRING",visibleBinding:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e,validatorBinding:e,disabledBinding:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    \x3c!--Account Number--\x3e\r\n    "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"editPaymentDetailsModel.accountNumber",label:"~locale.manageAccount.editPaymentDetails:paymentDetail.accountNumber~",validatorBinding:"validators.accountNumberValidator",visibleBinding:"hideDebOrdControls",disabledBinding:"isDisbaleAccountNumber"},hashTypes:{valueBinding:"STRING",label:"STRING",validatorBinding:"STRING",visibleBinding:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,label:e,validatorBinding:e,visibleBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    \x3c!--Branch Code --\x3e\r\n    "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"editPaymentDetailsModel.branchCode",label:"~locale.manageAccount.editPaymentDetails:paymentDetail.branchCode~",disabledBinding:"isbranchCodeEnabled",visibleBinding:"hideDebOrdControls"},hashTypes:{valueBinding:"STRING",label:"STRING",disabledBinding:"STRING",visibleBinding:"STRING"},hashContexts:{valueBinding:e,label:e,disabledBinding:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    \x3c!--AHV Status--\x3e\r\n    "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.editPaymentDetails:paymentDetail.ahvStatus~",class:"sub-heading",visibleBinding:"isVisibleAHVStatus"},hashTypes:{text:"STRING",class:"STRING",visibleBinding:"STRING"},hashContexts:{text:e,class:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.editPaymentDetails:paymentDetail.nonCompliant~",class:"customer-status-fraud-investigation",visibleBinding:"isBankAHVNonCompliant"},hashTypes:{text:"STRING",class:"STRING",visibleBinding:"STRING"},hashContexts:{text:e,class:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.editPaymentDetails:paymentDetail.compliant~",visibleBinding:"isBankAHVCompliant",class:"customer-status-active"},hashTypes:{text:"STRING",visibleBinding:"STRING",class:"STRING"},hashContexts:{text:e,visibleBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function T(e,t){return t.buffer.push("\r\n    \x3c!--Customer is the Account Holder--\x3e\r\n    "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.Checkbox",{hash:{valueBinding:"editPaymentDetailsModel.customerAccountHolder",label:"~locale.manageAccount.editPaymentDetails:paymentDetail.customerAccountHolder~",disabledBinding:"isDisbaleIsCustomerAccountHolder"},hashTypes:{valueBinding:"STRING",label:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,label:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function C(e,t){t.buffer.push("\r\n    ")}function I(e,t){return t.buffer.push("\r\n    "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"editPaymentDetailsModel.accountHolderName",label:"~locale.manageAccount.editPaymentDetails:paymentDetail.companyName~",validatorBinding:"validators.accountHolderNameValidator",visibleBinding:"hideDebOrdControls",disabledBinding:"isAccHolderNameAndIdEnabled"},hashTypes:{valueBinding:"STRING",label:"STRING",validatorBinding:"STRING",visibleBinding:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,label:e,validatorBinding:e,visibleBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function x(e,t){return t.buffer.push("\r\n    "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"editPaymentDetailsModel.accountHolderName",label:"~locale.manageAccount.editPaymentDetails:paymentDetail.accountHolderFullName~",validatorBinding:"validators.accountHolderNameValidator",visibleBinding:"hideDebOrdControls",disabledBinding:"isAccHolderNameAndIdEnabled"},hashTypes:{valueBinding:"STRING",label:"STRING",validatorBinding:"STRING",visibleBinding:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,label:e,validatorBinding:e,visibleBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function P(e,t){var o;return t.buffer.push('\r\n    <div style="height: 65px;">\r\n      <span class="retrieve-records" style="min-height:30px;">\r\n      </span>\r\n    </div>\r\n    \x3c!--Account Holders Id/Passport Number--\x3e\r\n    '),o=a.if.call(e,"editPaymentDetailsModel.iscustomerTypeDealer",{hash:{},hashTypes:{},hashContexts:{},inverse:he.program(34,S,t),fn:he.program(34,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"editPaymentDetailsModel.accountHolderEmailAddress",label:"~locale.manageAccount.editPaymentDetails:paymentDetail.accountHolderEmailAddress~",visibleBinding:"hideDebOrdControls",disableBinding:"isAccHolderNameAndIdEnabled",validatorBinding:"validators.accountHolderEmailAddressValidator"},hashTypes:{valueBinding:"STRING",label:"STRING",visibleBinding:"STRING",disableBinding:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,label:e,visibleBinding:e,disableBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n    \x3c!--Account Type--\x3e\r\n    "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"editPaymentDetailsModel.bankAccountType",label:"~locale.manageAccount.editPaymentDetails:paymentDetail.accountType~",contentBinding:"editPaymentDetailsModel.bankAccountTypes",optionLabelPath:"content.value",optionValuePath:"content.key",validatorBinding:"validators.bankAccountTypeValidator",prompt:" ",disabledBinding:"isDisbaleAccountType",visibleBinding:"hideDebOrdControls"},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",validatorBinding:"STRING",prompt:"STRING",disabledBinding:"STRING",visibleBinding:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,validatorBinding:e,prompt:e,disabledBinding:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    \x3c!--Branch Name--\x3e\r\n    "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"editPaymentDetailsModel.branchName",label:"~locale.manageAccount.editPaymentDetails:paymentDetail.branchName~",contentBinding:"bankBranches",optionLabelPath:"content.CanonicalValue",optionValuePath:"content.CanonicalKey",prompt:" ",validatorBinding:"validators.branchNameValidator",disabledBinding:"isDisbaleBranchName",visibleBinding:"hideDebOrdControls"},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING",validatorBinding:"STRING",disabledBinding:"STRING",visibleBinding:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e,validatorBinding:e,disabledBinding:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n    <div style="height: 65px;">\r\n      <span class="retrieve-records" style="min-height:30px;">\r\n      </span>\r\n    </div>\r\n    '),t.buffer.push(de(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.editPaymentDetails:paymentDetail.verifyBankingDetails~",class:"sub-heading",visibleBinding:"isSubmitButtonVisible"},hashTypes:{text:"STRING",class:"STRING",visibleBinding:"STRING"},hashContexts:{text:e,class:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"CheckIfBankIsAHVCompiant",visibleBinding:"isSubmitButtonVisible",class:"btn-success"},hashTypes:{action:"STRING",visibleBinding:"STRING",class:"STRING"},hashContexts:{action:e,visibleBinding:e,class:e},inverse:he.noop,fn:he.program(36,A,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function S(e,t){return t.buffer.push("\r\n    "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"editPaymentDetailsModel.accountHolderId",label:"~locale.manageAccount.editPaymentDetails:paymentDetail.accountHolderId~",validatorBinding:"validators.accountHolderIdValidator",visibleBinding:"hideDebOrdControls",disabledBinding:"isAccHolderNameAndIdEnabled"},hashTypes:{valueBinding:"STRING",label:"STRING",validatorBinding:"STRING",visibleBinding:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,label:e,validatorBinding:e,visibleBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function A(e,t){var o,n;t.buffer.push(de((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.editPaymentDetails:paymentDetail.submit",n):me.call(e,"loc","locale.manageAccount.editPaymentDetails:paymentDetail.submit",n))))}function N(e,t){var o;return t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:he.noop,fn:he.program(39,B,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function B(e,t){var o,n,s;return t.buffer.push('\r\n        <div style="float:left;" width="100%">\r\n          '),t.buffer.push(de(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.editPaymentDetails:paymentDetail.addThirdPartyDocuments~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n          <br /><br />\r\n          "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{id:"addThirdPatryDocs",disabledBinding:"disableAddThirdPartyUploadDoc"},hashTypes:{id:"STRING",disabledBinding:"STRING"},hashContexts:{id:e,disabledBinding:e},inverse:he.noop,fn:he.program(40,M,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{id:"uploadThirdPatryDocs",disabledBinding:"isUploadThirdPartyDocumentDisabled"},hashTypes:{id:"STRING",disabledBinding:"STRING"},hashContexts:{id:e,disabledBinding:e},inverse:he.noop,fn:he.program(42,R,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n          <br /><br />\r\n          <span class="retrieve-records" style="min-height:30px;">\r\n            '),t.buffer.push(de(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageCase:createCase.documentsSupportedNote~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n          </span>\r\n          <br /><br />\r\n          <table width="100%" class="table table-bordered komodo-datagrid">\r\n            <thead>\r\n              <tr>\r\n                <th width="40%">'),t.buffer.push(de((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:paymentDetail.document",s):me.call(e,"loc","locale.manageAccount.editPaymentDetails:paymentDetail.document",s)))),t.buffer.push('</th>\r\n                <th width="20%">'),t.buffer.push(de((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:paymentDetail.type",s):me.call(e,"loc","locale.manageAccount.editPaymentDetails:paymentDetail.type",s)))),t.buffer.push('</th>\r\n                <th width="10%">'),t.buffer.push(de((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:paymentDetail.size",s):me.call(e,"loc","locale.manageAccount.editPaymentDetails:paymentDetail.size",s)))),t.buffer.push('</th>\r\n                <th width="10%">'),t.buffer.push(de((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:paymentDetail.percentage",s):me.call(e,"loc","locale.manageAccount.editPaymentDetails:paymentDetail.percentage",s)))),t.buffer.push('</th>\r\n                <th width="10%">'),t.buffer.push(de((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:paymentDetail.status",s):me.call(e,"loc","locale.manageAccount.editPaymentDetails:paymentDetail.status",s)))),t.buffer.push('</th>\r\n                <th width="10%">'),t.buffer.push(de((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:paymentDetail.actions",s):me.call(e,"loc","locale.manageAccount.editPaymentDetails:paymentDetail.actions",s)))),t.buffer.push("</th>\r\n              </tr>\r\n            </thead>\r\n            "),o=a.each.call(e,"itemThirdPartyDoc","in","thirdPartyDocuments",{hash:{},hashTypes:{},hashContexts:{},inverse:he.noop,fn:he.program(44,w,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </table>\r\n        </div>\r\n        "),""}function M(e,t){var o,n;return t.buffer.push("\r\n          "),t.buffer.push(de((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.editPaymentDetails:paymentDetail.addDocuments",n):me.call(e,"loc","locale.manageAccount.editPaymentDetails:paymentDetail.addDocuments",n)))),t.buffer.push("\r\n          "),""}function R(e,t){var o,n;t.buffer.push(de((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.editPaymentDetails:paymentDetail.uploadDocuments",n):me.call(e,"loc","locale.manageAccount.editPaymentDetails:paymentDetail.uploadDocuments",n))))}function w(e,t){var o;return t.buffer.push('\r\n            <tbody>\r\n              <tr>\r\n                <td style="height:auto;">\r\n                  '),o=a.if.call(e,"itemThirdPartyDoc.canDocumentDelete",{hash:{},hashTypes:{},hashContexts:{},inverse:he.program(47,O,t),fn:he.program(45,K,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                <td>\r\n                  "),o=a.if.call(e,"itemThirdPartyDoc.documentAlreadyUploaded",{hash:{},hashTypes:{},hashContexts:{},inverse:he.program(51,k,t),fn:he.program(49,G,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                <td>"),o=a._triageMustache.call(e,"itemThirdPartyDoc.documentSize",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                <td>"),o=a._triageMustache.call(e,"itemThirdPartyDoc.uploadPercentage",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                <td>"),o=a._triageMustache.call(e,"itemThirdPartyDoc.uploadStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                <td>\r\n\r\n                  "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"actionRemoveThirdPartyDocument",contentBinding:"itemThirdPartyDoc",size:"xs",type:"danger"},hashTypes:{action:"STRING",contentBinding:"STRING",size:"STRING",type:"STRING"},hashContexts:{action:e,contentBinding:e,size:e,type:e},inverse:he.noop,fn:he.program(53,E,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n            "),""}function K(e,t){return t.buffer.push("\r\n                  "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"itemThirdPartyDoc.documentName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                  "),""}function O(e,t){return t.buffer.push("\r\n                  "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.Link",{hash:{tabindex:"25",target:"_blank",hrefBinding:"itemThirdPartyDoc.documentUrl",textBinding:"itemThirdPartyDoc.documentName"},hashTypes:{tabindex:"STRING",target:"STRING",hrefBinding:"STRING",textBinding:"STRING"},hashContexts:{tabindex:e,target:e,hrefBinding:e,textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                  "),""}function G(e,t){return t.buffer.push("\r\n                  "),
t.buffer.push(de(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"itemThirdPartyDoc.documentTypeText"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                  "),""}function k(e,t){return t.buffer.push("\r\n                  "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{valueBinding:"itemThirdPartyDoc.documentType",contentBinding:"documentTypes",optionLabelPath:"content.value",optionValuePath:"content.key",class:"komodo-grid-edit",prompt:" "},hashTypes:{valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",class:"STRING",prompt:"STRING"},hashContexts:{valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,class:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                  "),""}function E(e,t){var o,n;return t.buffer.push("\r\n                  "),t.buffer.push(de((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.editPaymentDetails:paymentDetail.delete",n):me.call(e,"loc","locale.manageAccount.editPaymentDetails:paymentDetail.delete",n)))),t.buffer.push("\r\n                  "),""}function V(e,t){var o;return t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:he.noop,fn:he.program(56,F,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function F(e,t){var o,n,s;return t.buffer.push('\r\n      <div style="float:left;">\r\n        '),t.buffer.push(de(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.editPaymentDetails:paymentDetail.addAHVOverrideDocuments~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        <br /><br />\r\n        "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{id:"addDocuments",disabledBinding:"isReadOnlyOverrideAHVControls"},hashTypes:{id:"STRING",disabledBinding:"STRING"},hashContexts:{id:e,disabledBinding:e},inverse:he.noop,fn:he.program(57,L,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n      \r\n        <br /><br />\r\n        <span class="retrieve-records" style="min-height:30px;">\r\n          '),t.buffer.push(de(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageCase:createCase.documentsSupportedNote~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </span>\r\n        <br /><br />\r\n        <table width="100%" class="table table-bordered komodo-datagrid">\r\n          <thead>\r\n            <tr>\r\n              <th width="40%">'),t.buffer.push(de((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:paymentDetail.document",s):me.call(e,"loc","locale.manageAccount.editPaymentDetails:paymentDetail.document",s)))),t.buffer.push('</th>\r\n              <th width="20%">'),t.buffer.push(de((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:paymentDetail.type",s):me.call(e,"loc","locale.manageAccount.editPaymentDetails:paymentDetail.type",s)))),t.buffer.push('</th>\r\n              <th width="10%">'),t.buffer.push(de((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:paymentDetail.size",s):me.call(e,"loc","locale.manageAccount.editPaymentDetails:paymentDetail.size",s)))),t.buffer.push('</th>\r\n              <th width="10%">'),t.buffer.push(de((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:paymentDetail.percentage",s):me.call(e,"loc","locale.manageAccount.editPaymentDetails:paymentDetail.percentage",s)))),t.buffer.push('</th>\r\n              <th width="10%">'),t.buffer.push(de((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:paymentDetail.status",s):me.call(e,"loc","locale.manageAccount.editPaymentDetails:paymentDetail.status",s)))),t.buffer.push('</th>\r\n              <th width="10%">'),t.buffer.push(de((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetails:paymentDetail.actions",s):me.call(e,"loc","locale.manageAccount.editPaymentDetails:paymentDetail.actions",s)))),t.buffer.push("</th>\r\n            </tr>\r\n          </thead>\r\n          "),o=a.each.call(e,"rowEditPaymentDetailsDoc","in","editPaymentDetailsModel.supportingDocuments",{hash:{},hashTypes:{},hashContexts:{},inverse:he.noop,fn:he.program(59,U,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </table>\r\n      </div>\r\n      "),""}function L(e,t){var o,n;return t.buffer.push("\r\n        "),t.buffer.push(de((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.editPaymentDetails:paymentDetail.addDocuments",n):me.call(e,"loc","locale.manageAccount.editPaymentDetails:paymentDetail.addDocuments",n)))),t.buffer.push("\r\n        "),""}function U(e,t){var o;return t.buffer.push("\r\n          <tbody>\r\n            <tr>\r\n              <td>"),t.buffer.push(de(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"rowEditPaymentDetailsDoc.documentName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n              <td>\r\n                "),o=a.if.call(e,"rowEditPaymentDetailsDoc.documentAlreadyUploaded",{hash:{},hashTypes:{},hashContexts:{},inverse:he.program(62,_,t),fn:he.program(60,H,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              </td>\r\n              <td>"),o=a._triageMustache.call(e,"rowEditPaymentDetailsDoc.documentSize",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n              <td>"),o=a._triageMustache.call(e,"rowEditPaymentDetailsDoc.uploadPercentage",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n              <td>"),o=a._triageMustache.call(e,"rowEditPaymentDetailsDoc.uploadStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n              <td>\r\n                "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"viewDocument",size:"xs",class:"btn-success"},hashTypes:{action:"STRING",size:"STRING",class:"STRING"},hashContexts:{action:e,size:e,class:e},inverse:he.noop,fn:he.program(64,q,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"removeDocument",size:"xs",type:"danger"},hashTypes:{action:"STRING",size:"STRING",type:"STRING"},hashContexts:{action:e,size:e,type:e},inverse:he.noop,fn:he.program(66,j,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              </td>\r\n\r\n            </tr>\r\n          </tbody>\r\n          "),""}function H(e,t){return t.buffer.push("\r\n                "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"rowEditPaymentDetailsDoc.documentTypeText"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                "),""}function _(e,t){return t.buffer.push("\r\n                "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{valueBinding:"rowEditPaymentDetailsDoc.documentType",contentBinding:"rowEditPaymentDetailsDoc.documentTypes",optionLabelPath:"content.value",optionValuePath:"content.key",class:"komodo-grid-edit",prompt:" "},hashTypes:{valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",class:"STRING",prompt:"STRING"},hashContexts:{valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,class:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                "),""}function q(e,t){var o,n;return t.buffer.push("\r\n                "),t.buffer.push(de((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.editPaymentDetails:paymentDetail.view",n):me.call(e,"loc","locale.manageAccount.editPaymentDetails:paymentDetail.view",n)))),t.buffer.push("\r\n                "),""}function j(e,t){var o,n;return t.buffer.push("\r\n                "),t.buffer.push(de((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.editPaymentDetails:paymentDetail.delete",n):me.call(e,"loc","locale.manageAccount.editPaymentDetails:paymentDetail.delete",n)))),t.buffer.push("\r\n                "),""}function J(e,t){var o;return t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:he.noop,fn:he.program(69,Q,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function Q(e,t){var o;return t.buffer.push("\r\n      "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.editPaymentDetails:ahvSupervisorApproval.supervisorAuthentication~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br /><br />\r\n      "),o=a.if.call(e,"verifyBySupervisorDone",{hash:{},hashTypes:{},hashContexts:{},inverse:he.program(80,ee,t),fn:he.program(70,z,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n      "),""}function z(e,t){var o;return t.buffer.push("              \r\n        \r\n          "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:he.noop,fn:he.program(71,$,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n\r\n          <br />\r\n          <div style="float:right;">\r\n            '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"authenticate"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:he.noop,fn:he.program(76,X,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"clear",type:"inverse"},hashTypes:{action:"STRING",type:"STRING"},hashContexts:{action:e,type:e},inverse:he.noop,fn:he.program(78,Z,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </div>\r\n\r\n\r\n      "),""}function $(e,t){var o;return t.buffer.push("\r\n\r\n                  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:he.noop,fn:he.program(72,Y,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n                  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:he.noop,fn:he.program(74,W,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n          "),""}function Y(e,t){return t.buffer.push("\r\n\r\n                            "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"editPaymentDetailsModel.supervisorUsername",label:"~locale.manageAccount.editPaymentDetails:ahvSupervisorApproval.supervisorName~"},hashTypes:{valueBinding:"STRING",label:"STRING"},hashContexts:{valueBinding:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n                  "),""}function W(e,t){return t.buffer.push("\r\n\r\n                      "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.TextField",{hash:{type:"password",valueBinding:"editPaymentDetailsModel.supervisorPassword",label:"~locale.manageAccount.editPaymentDetails:ahvSupervisorApproval.supervisorPassword~"},hashTypes:{type:"STRING",valueBinding:"STRING",label:"STRING"},hashContexts:{type:e,valueBinding:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                  "),""}function X(e,t){var o,n;t.buffer.push(de((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.editPaymentDetails:ahvSupervisorApproval.authenticate",n):me.call(e,"loc","locale.manageAccount.editPaymentDetails:ahvSupervisorApproval.authenticate",n))))}function Z(e,t){var o,n;t.buffer.push(de((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.editPaymentDetails:ahvSupervisorApproval.clear",n):me.call(e,"loc","locale.manageAccount.editPaymentDetails:ahvSupervisorApproval.clear",n))))}function ee(e,t){var o;return t.buffer.push("\r\n\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:he.noop,fn:he.program(81,te,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n\r\n              <br/>\r\n              <div style="float:right;">        \r\n                '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{id:"uploadDocuments",action:"overrideStatus",disabledBinding:"disableOverrideAHV"},hashTypes:{id:"STRING",action:"STRING",disabledBinding:"STRING"},hashContexts:{id:e,action:e,disabledBinding:e},inverse:he.noop,fn:he.program(86,ne,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"rejectAHV",type:"danger"},hashTypes:{action:"STRING",type:"STRING"},hashContexts:{action:e,type:e},inverse:he.noop,fn:he.program(88,se,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              </div>    \r\n\r\n     "),""}function te(e,t){var o;return t.buffer.push("\r\n\r\n                  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:he.noop,fn:he.program(82,ae,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n                  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:he.noop,fn:he.program(84,oe,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              "),""}function ae(e,t){return t.buffer.push("\r\n                        "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.editPaymentDetails:ahvSupervisorApproval.supervisorName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                            <br/>\r\n                        "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"editPaymentDetailsModel.supervisorUsername"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                        <br/>\r\n                  "),""}function oe(e,t){return t.buffer.push("\r\n                        "),t.buffer.push(de(a.view.call(e,"Komodo.Controls.Checkbox",{hash:{valueBinding:"editPaymentDetailsModel.acceptDocumentation",label:"~locale.manageAccount.editPaymentDetails:ahvSupervisorApproval.acceptDocumentation~"},hashTypes:{valueBinding:"STRING",label:"STRING"},hashContexts:{valueBinding:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                  "),""}function ne(e,t){var o,n;t.buffer.push(de((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.editPaymentDetails:paymentDetail.overrideAHV",n):me.call(e,"loc","locale.manageAccount.editPaymentDetails:paymentDetail.overrideAHV",n))))}function se(e,t){var o,n;t.buffer.push(de((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.editPaymentDetails:paymentDetail.rejectAHV",n):me.call(e,"loc","locale.manageAccount.editPaymentDetails:paymentDetail.rejectAHV",n))))}function re(e,t){var o,n;t.buffer.push(de((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.editPaymentDetails:paymentDetail.saveDetails",n):me.call(e,"loc","locale.manageAccount.editPaymentDetails:paymentDetail.saveDetails",n))))}function ie(e,t){var o,n;t.buffer.push(de((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.editPaymentDetails:general.cancelButton",n):me.call(e,"loc","locale.manageAccount.editPaymentDetails:general.cancelButton",n))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var le,ce,ue,de=this.escapeExpression,he=this,me=a.helperMissing;return n.buffer.push("<div "),n.buffer.push(de(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:n}))),n.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),n.buffer.push(de((ce=a.loc||t&&t.loc,ue={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},ce?ce.call(t,"locale.manageAccount.editPaymentDetails:general.moduleTitle",ue):me.call(t,"loc","locale.manageAccount.editPaymentDetails:general.moduleTitle",ue)))),n.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/account">&lt;'),n.buffer.push(de((ce=a.loc||t&&t.loc,ue={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},ce?ce.call(t,"locale.manageAccount.editPaymentDetails:general.backLink",ue):me.call(t,"loc","locale.manageAccount.editPaymentDetails:general.backLink",ue)))),n.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n\r\n  "),le=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageAccount.editPaymentDetails:paymentDetail.paymentDetails~",visibleBinding:"isAccountDataAvailable"},hashTypes:{title:"STRING",visibleBinding:"STRING"},hashContexts:{title:t,visibleBinding:t},inverse:he.noop,fn:he.program(1,s,n),contexts:[t],types:["ID"],data:n}),(le||0===le)&&n.buffer.push(le),n.buffer.push("\r\n  \x3c!--"),n.buffer.push(de(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.editPaymentDetails:paymentDetail.bankingDetailsFor~",class:"sub-heading",visibleBinding:"hideDebOrdControls"},hashTypes:{text:"STRING",class:"STRING",visibleBinding:"STRING"},hashContexts:{text:t,class:t,visibleBinding:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push("--\x3e\r\n\r\n  <div "),n.buffer.push(de(a["bind-attr"].call(t,{hash:{style:"isShow"},hashTypes:{style:"STRING"},hashContexts:{style:t},contexts:[],types:[],data:n}))),n.buffer.push(">\r\n    "),le=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageAccount.editPaymentDetails:paymentDetail.bankingDetailsFor~",linksBinding:"collapsibleEditLink",visibleBinding:"isAccountDataAvailable"},hashTypes:{title:"STRING",linksBinding:"STRING",visibleBinding:"STRING"},hashContexts:{title:t,linksBinding:t,visibleBinding:t},inverse:he.noop,fn:he.program(22,y,n),contexts:[t],types:["ID"],data:n}),(le||0===le)&&n.buffer.push(le),n.buffer.push('\r\n  </div>\r\n  <div style="float:right;">\r\n    <br />\r\n    '),le=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"submitPayementDetail",contentBinding:"editPaymentDetailsModel",disabledBinding:"editPaymentDetailsModel.isSaveButtonDisabled",visibleBinding:"isAccountDataAvailable"},hashTypes:{action:"STRING",contentBinding:"STRING",disabledBinding:"STRING",visibleBinding:"STRING"},hashContexts:{action:t,contentBinding:t,disabledBinding:t,visibleBinding:t},inverse:he.noop,fn:he.program(90,re,n),contexts:[t],types:["ID"],data:n}),(le||0===le)&&n.buffer.push(le),n.buffer.push("\r\n    "),le=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"cancelAction",contentBinding:"editPaymentDetailsModel",class:"btn-inverse",disabledBinding:"editPaymentDetailsModel.isCancelButtonDisabled",visibleBinding:"isAccountDataAvailable"},hashTypes:{action:"STRING",contentBinding:"STRING",class:"STRING",disabledBinding:"STRING",visibleBinding:"STRING"},hashContexts:{action:t,contentBinding:t,class:t,disabledBinding:t,visibleBinding:t},inverse:he.noop,fn:he.program(92,ie,n),contexts:[t],types:["ID"],data:n}),(le||0===le)&&n.buffer.push(le),n.buffer.push("\r\n  </div>\r\n  <div>\r\n    "),n.buffer.push(de(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:accountInformationTab.serviceNoDataMessage~",visibleBinding:"noAccountExist"},hashTypes:{text:"STRING",visibleBinding:"STRING"},hashContexts:{text:t,visibleBinding:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push("\r\n    "),n.buffer.push(de(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"editPaymentDetailsModel.customerTypee",visibleBinding:"noRequired"},hashTypes:{textBinding:"STRING",visibleBinding:"STRING"},hashContexts:{textBinding:t,visibleBinding:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push("\r\n  </div>\r\n</div>"),""}),Ember.TEMPLATES.EditPaymentDetailsAfricaView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:Z.noop,fn:Z.program(2,r,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:Z.noop,fn:Z.program(7,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),o=a.if.call(e,"editPaymentDetailsModel.hideDebitOrderControls",{hash:{},hashTypes:{},hashContexts:{},inverse:Z.program(20,v,t),fn:Z.program(18,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function r(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:Z.noop,fn:Z.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:Z.noop,fn:Z.program(5,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),""}function i(e,t){return t.buffer.push("\r\n    \x3c!--Account Number--\x3e\r\n    "),t.buffer.push(X(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.paymentDetailsFor~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br /><br />\r\n    "),t.buffer.push(X(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"editPaymentDetailsModel.selectedAcccountId",label:"~locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.accountNumber~",contentBinding:"allAccounts",optionLabelPath:"content",optionValuePath:"content"},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function l(e,t){return t.buffer.push("\r\n    \x3c!--Account Description --\x3e\r\n    <br /><br />\r\n    "),t.buffer.push(X(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.accountDescription~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(X(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"editPaymentDetailsModel.accountDescription"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br /><br />\r\n    "),""}function c(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:Z.noop,fn:Z.program(8,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:Z.noop,fn:Z.program(10,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:Z.noop,fn:Z.program(12,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function u(e,t){return t.buffer.push("\r\n    \x3c!--Default Account --\x3e\r\n    "),t.buffer.push(X(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.defaultAccount~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(X(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"editPaymentDetailsModel.defaultAccount"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function d(e,t){return t.buffer.push("\r\n    \x3c!--List of Devices - Smartcards Removed--\x3e\r\n    \x3c!--Method Of Payment--\x3e\r\n    "),t.buffer.push(X(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{tabindex:"",contentBinding:"editPaymentDetailsModel.radioButtonMethodofPayment",displayPath:"title",valuePath:"value",valueBinding:"editPaymentDetailsModel.methodOfPaymentData",label:"~locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.methodOfPayment~",action:"",disabledBinding:"isDisbaleMethodOfPayment",validatorBinding:"validators.methodOfPaymentDataValidator"},hashTypes:{tabindex:"STRING",contentBinding:"STRING",displayPath:"STRING",valuePath:"STRING",valueBinding:"STRING",label:"STRING",action:"STRING",disabledBinding:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,contentBinding:e,displayPath:e,valuePath:e,valueBinding:e,label:e,action:e,disabledBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function h(e,t){var o;return t.buffer.push("\r\n    "),o=a.if.call(e,"editPaymentDetailsModel.hideDebitOrderControls",{hash:{},hashTypes:{},hashContexts:{},inverse:Z.program(16,f,t),fn:Z.program(13,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function m(e,t){var o;return t.buffer.push("\r\n    "),o=a.if.call(e,"editPaymentDetailsModel.hidePaymentDayControls",{hash:{},hashTypes:{},hashContexts:{},inverse:Z.program(16,f,t),fn:Z.program(14,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function p(e,t){return t.buffer.push("\r\n    \x3c!--Debit Order Day--\x3e\r\n    "),t.buffer.push(X(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"editPaymentDetailsModel.debitOrderDay",label:"~locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.debitOrderDay~",contentBinding:"debitOrderDays",optionLabelPath:"content.value",optionValuePath:"content.key",validatorBinding:"validators.debitOrderDayValidator",disabledBinding:"editPaymentDetailsModel.isDisbaleInvoiceDay",visibleBinding:"hideDebOrdControls"},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",validatorBinding:"STRING",disabledBinding:"STRING",visibleBinding:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,validatorBinding:e,disabledBinding:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function f(e,t){return t.buffer.push("\r\n    \x3c!--Payment Day--\x3e\r\n    "),t.buffer.push(X(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"editPaymentDetailsModel.debitOrderDay",label:"~locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.paymentDay~",contentBinding:"debitOrderDays",optionLabelPath:"content.value",optionValuePath:"content.key",disabledBinding:"editPaymentDetailsModel.isDisbaleInvoiceDay",validatorBinding:"validators.debitOrderDayValidator"},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",disabledBinding:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,disabledBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n    "),""}function g(e,t){t.buffer.push("\r\n    <hr />\r\n    ")}function v(e,t){t.buffer.push("\r\n    ")}function y(e,t){var o;return t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:Z.noop,fn:Z.program(23,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </div>   \r\n    "),""}function b(e,t){var o;return t.buffer.push("\r\n\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:Z.noop,fn:Z.program(24,D,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:Z.noop,fn:Z.program(33,P,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        <br />\r\n        <br />\r\n        <div>\r\n            <div "),t.buffer.push(X(a["bind-attr"].call(e,{hash:{style:"showThirdPartyDocsPanel"},hashTypes:{style:"STRING"},hashContexts:{style:e},contexts:[],types:[],data:t}))),t.buffer.push(">\r\n                <hr />\r\n                "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:Z.noop,fn:Z.program(36,A,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                <hr />\r\n            </div>\r\n        </div>\r\n        "),""}function D(e,t){var o;return t.buffer.push("\r\n\r\n      <br /><br />\r\n        "),o=a.if.call(e,"editPaymentDetailsModel.hideDebitOrderControls",{hash:{},hashTypes:{},hashContexts:{},inverse:Z.program(27,C,t),fn:Z.program(25,T,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),
t.buffer.push("\r\n        \x3c!--Account Holders Name and Surname--\x3e\r\n        "),o=a.if.call(e,"editPaymentDetailsModel.iscustomerTypeDealer",{hash:{},hashTypes:{},hashContexts:{},inverse:Z.program(31,x,t),fn:Z.program(29,I,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        \x3c!--Bank--\x3e\r\n        "),t.buffer.push(X(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"editPaymentDetailsModel.bankName",label:"~locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.bankName~",contentBinding:"banks",optionLabelPath:"content.CanonicalValue",optionValuePath:"content.CanonicalKey",prompt:" ",validatorBinding:"validators.bankNameValidator",disabledBinding:"isDisbaleBankName",visibleBinding:"hideDebOrdControls"},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING",validatorBinding:"STRING",disabledBinding:"STRING",visibleBinding:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e,validatorBinding:e,disabledBinding:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        \x3c!--Account Number--\x3e\r\n        "),t.buffer.push(X(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"editPaymentDetailsModel.accountNumber",label:"~locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.accountNumber~",validatorBinding:"validators.accountNumberValidator",visibleBinding:"hideDebOrdControls",disabledBinding:"isDisbaleAccountNumber"},hashTypes:{valueBinding:"STRING",label:"STRING",validatorBinding:"STRING",visibleBinding:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,label:e,validatorBinding:e,visibleBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        \x3c!--Branch Code --\x3e\r\n        "),t.buffer.push(X(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"editPaymentDetailsModel.branchCode",label:"~locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.branchCode~",disabledBinding:"isbranchCodeEnabled",visibleBinding:"hideDebOrdControls"},hashTypes:{valueBinding:"STRING",label:"STRING",disabledBinding:"STRING",visibleBinding:"STRING"},hashContexts:{valueBinding:e,label:e,disabledBinding:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n        "),""}function T(e,t){return t.buffer.push("\r\n        \x3c!--Customer is the Account Holder--\x3e\r\n        "),t.buffer.push(X(a.view.call(e,"Komodo.Controls.Checkbox",{hash:{valueBinding:"editPaymentDetailsModel.customerAccountHolder",label:"~locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.customerAccountHolder~",disabledBinding:"isDisbaleIsCustomerAccountHolder"},hashTypes:{valueBinding:"STRING",label:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,label:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),""}function C(e,t){t.buffer.push("\r\n\r\n        ")}function I(e,t){return t.buffer.push("\r\n        "),t.buffer.push(X(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"editPaymentDetailsModel.accountHolderName",label:"~locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.companyName~",validatorBinding:"validators.accountHolderNameValidator",visibleBinding:"hideDebOrdControls",disabledBinding:"isAccHolderNameAndIdEnabled"},hashTypes:{valueBinding:"STRING",label:"STRING",validatorBinding:"STRING",visibleBinding:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,label:e,validatorBinding:e,visibleBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),""}function x(e,t){return t.buffer.push("\r\n        "),t.buffer.push(X(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"editPaymentDetailsModel.accountHolderName",label:"~locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.accountHolderFullName~",validatorBinding:"validators.accountHolderNameValidator",visibleBinding:"hideDebOrdControls",disabledBinding:"isAccHolderNameAndIdEnabled"},hashTypes:{valueBinding:"STRING",label:"STRING",validatorBinding:"STRING",visibleBinding:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,label:e,validatorBinding:e,visibleBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),""}function P(e,t){var o;return t.buffer.push("\r\n        <br /><br /><br /><br /><br />\r\n        \x3c!--Account Holders Id/Passport Number--\x3e\r\n        "),o=a.if.call(e,"editPaymentDetailsModel.iscustomerTypeDealer",{hash:{},hashTypes:{},hashContexts:{},inverse:Z.program(34,S,t),fn:Z.program(34,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        \x3c!--Account Type--\x3e\r\n        "),t.buffer.push(X(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"editPaymentDetailsModel.bankAccountType",label:"~locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.accountType~",contentBinding:"editPaymentDetailsModel.bankAccountTypes",optionLabelPath:"content.value",optionValuePath:"content.key",validatorBinding:"validators.bankAccountTypeValidator",prompt:" ",disabledBinding:"isDisbaleAccountType",visibleBinding:"hideDebOrdControls"},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",validatorBinding:"STRING",prompt:"STRING",disabledBinding:"STRING",visibleBinding:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,validatorBinding:e,prompt:e,disabledBinding:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        \x3c!--Branch Name--\x3e\r\n        "),t.buffer.push(X(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"editPaymentDetailsModel.branchName",label:"~locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.branchName~",contentBinding:"bankBranches",optionLabelPath:"content.CanonicalValue",optionValuePath:"content.CanonicalKey",prompt:" ",validatorBinding:"validators.branchNameValidator",disabledBinding:"isDisbaleBranchName",visibleBinding:"hideDebOrdControls"},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING",validatorBinding:"STRING",disabledBinding:"STRING",visibleBinding:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e,validatorBinding:e,disabledBinding:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),""}function S(e,t){return t.buffer.push("\r\n        "),t.buffer.push(X(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"editPaymentDetailsModel.accountHolderId",label:"~locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.accountHolderId~",validatorBinding:"validators.accountHolderIdValidator",visibleBinding:"hideDebOrdControls",disabledBinding:"isAccHolderNameAndIdEnabled"},hashTypes:{valueBinding:"STRING",label:"STRING",validatorBinding:"STRING",visibleBinding:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,label:e,validatorBinding:e,visibleBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),""}function A(e,t){var o;return t.buffer.push("\r\n                "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:Z.noop,fn:Z.program(37,N,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                "),""}function N(e,t){var o,n,s;return t.buffer.push('\r\n                <div style="float:left;" width="100%">\r\n                    '),t.buffer.push(X(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.addThirdPartyDocuments~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                    <br /><br />\r\n                    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{id:"addThirdPatryDocs",disabledBinding:"disableAddThirdPartyUploadDoc"},hashTypes:{id:"STRING",disabledBinding:"STRING"},hashContexts:{id:e,disabledBinding:e},inverse:Z.noop,fn:Z.program(38,B,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{id:"uploadThirdPatryDocs",disabledBinding:"isUploadThirdPartyDocumentDisabled"},hashTypes:{id:"STRING",disabledBinding:"STRING"},hashContexts:{id:e,disabledBinding:e},inverse:Z.noop,fn:Z.program(40,M,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                    <br /><br />\r\n                    <span class="retrieve-records" style="min-height:30px;">\r\n                        '),t.buffer.push(X(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageCase:createCase.documentsSupportedNote~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                    </span>\r\n                    <br /><br />\r\n                    <table width="100%" class="table table-bordered komodo-datagrid">\r\n                        <thead>\r\n                            <tr>\r\n                                <th width="40%">'),t.buffer.push(X((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.document",s):ee.call(e,"loc","locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.document",s)))),t.buffer.push('</th>\r\n                                <th width="20%">'),t.buffer.push(X((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.type",s):ee.call(e,"loc","locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.type",s)))),t.buffer.push('</th>\r\n                                <th width="10%">'),t.buffer.push(X((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.size",s):ee.call(e,"loc","locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.size",s)))),t.buffer.push('</th>\r\n                                <th width="10%">'),t.buffer.push(X((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.percentage",s):ee.call(e,"loc","locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.percentage",s)))),t.buffer.push('</th>\r\n                                <th width="10%">'),t.buffer.push(X((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.status",s):ee.call(e,"loc","locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.status",s)))),t.buffer.push('</th>\r\n                                <th width="10%">'),t.buffer.push(X((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.actions",s):ee.call(e,"loc","locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.actions",s)))),t.buffer.push("</th>\r\n                            </tr>\r\n                        </thead>\r\n                        "),o=a.each.call(e,"itemThirdPartyDoc","in","thirdPartyDocuments",{hash:{},hashTypes:{},hashContexts:{},inverse:Z.noop,fn:Z.program(42,R,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </table>\r\n                </div>\r\n                "),""}function B(e,t){var o,n;return t.buffer.push("\r\n                    "),t.buffer.push(X((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.addDocuments",n):ee.call(e,"loc","locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.addDocuments",n)))),t.buffer.push("\r\n                    "),""}function M(e,t){var o,n;t.buffer.push(X((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.uploadDocuments",n):ee.call(e,"loc","locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.uploadDocuments",n))))}function R(e,t){var o;return t.buffer.push('\r\n                        <tbody>\r\n                            <tr>\r\n                                <td style="height:auto;">\r\n                                    '),o=a.if.call(e,"itemThirdPartyDoc.canDocumentDelete",{hash:{},hashTypes:{},hashContexts:{},inverse:Z.program(45,K,t),fn:Z.program(43,w,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                                </td>\r\n                                <td>\r\n                                    "),o=a.if.call(e,"itemThirdPartyDoc.documentAlreadyUploaded",{hash:{},hashTypes:{},hashContexts:{},inverse:Z.program(49,G,t),fn:Z.program(47,O,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                                </td>\r\n                                <td>"),o=a._triageMustache.call(e,"itemThirdPartyDoc.documentSize",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                                <td>"),o=a._triageMustache.call(e,"itemThirdPartyDoc.uploadPercentage",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                                <td>"),o=a._triageMustache.call(e,"itemThirdPartyDoc.uploadStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                                <td>\r\n                                    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"actionRemoveThirdPartyDocument",contentBinding:"itemThirdPartyDoc",size:"xs",type:"danger"},hashTypes:{action:"STRING",contentBinding:"STRING",size:"STRING",type:"STRING"},hashContexts:{action:e,contentBinding:e,size:e,type:e},inverse:Z.noop,fn:Z.program(51,k,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                        "),""}function w(e,t){return t.buffer.push("\r\n                                    "),t.buffer.push(X(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"itemThirdPartyDoc.documentName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                                    "),""}function K(e,t){return t.buffer.push("\r\n                                    "),t.buffer.push(X(a.view.call(e,"Komodo.Controls.Link",{hash:{tabindex:"25",target:"_blank",hrefBinding:"itemThirdPartyDoc.documentUrl",textBinding:"itemThirdPartyDoc.documentName"},hashTypes:{tabindex:"STRING",target:"STRING",hrefBinding:"STRING",textBinding:"STRING"},hashContexts:{tabindex:e,target:e,hrefBinding:e,textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                                    "),""}function O(e,t){return t.buffer.push("\r\n                                    "),t.buffer.push(X(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"itemThirdPartyDoc.documentTypeText"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                                    "),""}function G(e,t){return t.buffer.push("\r\n                                    "),t.buffer.push(X(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{valueBinding:"itemThirdPartyDoc.documentType",contentBinding:"documentTypes",optionLabelPath:"content.value",optionValuePath:"content.key",class:"komodo-grid-edit",prompt:" "},hashTypes:{valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",class:"STRING",prompt:"STRING"},hashContexts:{valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,class:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                                    "),""}function k(e,t){var o,n;return t.buffer.push("\r\n                                    "),t.buffer.push(X((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.delete",n):ee.call(e,"loc","locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.delete",n)))),t.buffer.push("\r\n                                    "),""}function E(e,t){var o,n;t.buffer.push(X((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.saveDetails",n):ee.call(e,"loc","locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.saveDetails",n))))}function V(e,t){var o,n;t.buffer.push(X((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.editPaymentDetailsAfrica:general.cancelButton",n):ee.call(e,"loc","locale.manageAccount.editPaymentDetailsAfrica:general.cancelButton",n))))}function F(e,t){var o;return t.buffer.push("\r\n            "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:Z.noop,fn:Z.program(58,L,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),""}function L(e,t){var o,n,s;return t.buffer.push('\r\n            <div style="float:left;">\r\n                '),t.buffer.push(X(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.addAHVOverrideDocuments~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                <br /><br />\r\n                "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{id:"addDocuments",disabledBinding:"isReadOnlyOverrideAHVControls"},hashTypes:{id:"STRING",disabledBinding:"STRING"},hashContexts:{id:e,disabledBinding:e},inverse:Z.noop,fn:Z.program(59,U,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{id:"uploadDocuments",disabledBinding:"isReadOnlyOverrideAHVControls"},hashTypes:{id:"STRING",disabledBinding:"STRING"},hashContexts:{id:e,disabledBinding:e},inverse:Z.noop,fn:Z.program(40,M,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                <br /><br />\r\n                <span class="retrieve-records" style="min-height:30px;">\r\n                    '),t.buffer.push(X(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageCase:createCase.documentsSupportedNote~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                </span>\r\n                <br /><br />\r\n                <table width="100%" class="table table-bordered komodo-datagrid">\r\n                    <thead>\r\n                        <tr>\r\n                            <th width="40%">'),t.buffer.push(X((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.document",s):ee.call(e,"loc","locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.document",s)))),t.buffer.push('</th>\r\n                            <th width="20%">'),t.buffer.push(X((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.type",s):ee.call(e,"loc","locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.type",s)))),t.buffer.push('</th>\r\n                            <th width="10%">'),t.buffer.push(X((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.size",s):ee.call(e,"loc","locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.size",s)))),t.buffer.push('</th>\r\n                            <th width="10%">'),t.buffer.push(X((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.percentage",s):ee.call(e,"loc","locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.percentage",s)))),t.buffer.push('</th>\r\n                            <th width="10%">'),t.buffer.push(X((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.status",s):ee.call(e,"loc","locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.status",s)))),t.buffer.push('</th>\r\n                            <th width="10%">'),t.buffer.push(X((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.actions",s):ee.call(e,"loc","locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.actions",s)))),t.buffer.push("</th>\r\n                        </tr>\r\n                    </thead>\r\n                    "),o=a.each.call(e,"rowEditPaymentDetailsDoc","in","editPaymentDetailsModel.supportingDocuments",{hash:{},hashTypes:{},hashContexts:{},inverse:Z.noop,fn:Z.program(61,H,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </table>\r\n            </div>\r\n            "),""}function U(e,t){var o,n;return t.buffer.push("\r\n                "),t.buffer.push(X((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.addDocuments",n):ee.call(e,"loc","locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.addDocuments",n)))),t.buffer.push("\r\n                "),""}function H(e,t){var o;return t.buffer.push("\r\n                    <tbody>\r\n                        <tr>\r\n                            <td>"),t.buffer.push(X(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"rowEditPaymentDetailsDoc.documentName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n                            <td>\r\n                                "),o=a.if.call(e,"rowEditPaymentDetailsDoc.documentAlreadyUploaded",{hash:{},hashTypes:{},hashContexts:{},inverse:Z.program(64,q,t),fn:Z.program(62,_,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                            </td>\r\n                            <td>"),o=a._triageMustache.call(e,"rowEditPaymentDetailsDoc.documentSize",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                            <td>"),o=a._triageMustache.call(e,"rowEditPaymentDetailsDoc.uploadPercentage",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                            <td>"),o=a._triageMustache.call(e,"rowEditPaymentDetailsDoc.uploadStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                            <td>\r\n                                "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"removeDocument",size:"xs",type:"danger"},hashTypes:{action:"STRING",size:"STRING",type:"STRING"},hashContexts:{action:e,size:e,type:e},inverse:Z.noop,fn:Z.program(66,j,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                            </td>\r\n\r\n                        </tr>\r\n                    </tbody>\r\n                    "),""}function _(e,t){return t.buffer.push("\r\n                                "),t.buffer.push(X(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"rowEditPaymentDetailsDoc.documentTypeText"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                                "),""}function q(e,t){return t.buffer.push("\r\n                                "),t.buffer.push(X(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{valueBinding:"rowEditPaymentDetailsDoc.documentType",contentBinding:"rowEditPaymentDetailsDoc.documentTypes",optionLabelPath:"content.value",optionValuePath:"content.key",class:"komodo-grid-edit",prompt:" "},hashTypes:{valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",class:"STRING",prompt:"STRING"},hashContexts:{valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,class:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                                "),""}function j(e,t){var o,n;return t.buffer.push("\r\n                                "),t.buffer.push(X((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.delete",n):ee.call(e,"loc","locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.delete",n)))),t.buffer.push("\r\n                                "),""}function J(e,t){var o;return t.buffer.push("\r\n            "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:Z.noop,fn:Z.program(69,Q,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),""}function Q(e,t){var o;return t.buffer.push("\r\n            "),t.buffer.push(X(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.accountHolderVerification~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br /><br />\r\n            <table>\r\n                <tr>\r\n                    <td>"),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"overrideStatus",disabledBinding:"isDisableOverrideAHVControl"},hashTypes:{action:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,disabledBinding:e},inverse:Z.noop,fn:Z.program(70,z,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                </tr>\r\n            </table>\r\n            "),""}function z(e,t){var o,n;t.buffer.push(X((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.overrideAHV",n):ee.call(e,"loc","locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.overrideAHV",n))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var $,Y,W,X=this.escapeExpression,Z=this,ee=a.helperMissing;return n.buffer.push("<div "),n.buffer.push(X(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:n}))),n.buffer.push('>\r\n    <div width="90%">\r\n        <span class="komodo-heading">'),n.buffer.push(X((Y=a.loc||t&&t.loc,W={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},Y?Y.call(t,"locale.manageAccount.editPaymentDetailsAfrica:general.moduleTitle",W):ee.call(t,"loc","locale.manageAccount.editPaymentDetailsAfrica:general.moduleTitle",W)))),n.buffer.push('</span>\r\n        <span class="float-right">\r\n            <b>\r\n                <a href="#/account">&lt;'),n.buffer.push(X((Y=a.loc||t&&t.loc,W={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},Y?Y.call(t,"locale.manageAccount.editPaymentDetailsAfrica:general.backLink",W):ee.call(t,"loc","locale.manageAccount.editPaymentDetailsAfrica:general.backLink",W)))),n.buffer.push("</a>\r\n            </b>\r\n        </span>\r\n    </div>\r\n    <hr />\r\n\r\n    "),$=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.paymentDetails~",visibleBinding:"isAccountDataAvailable"},hashTypes:{title:"STRING",visibleBinding:"STRING"},hashContexts:{title:t,visibleBinding:t},inverse:Z.noop,fn:Z.program(1,s,n),contexts:[t],types:["ID"],data:n}),($||0===$)&&n.buffer.push($),n.buffer.push("\r\n    <div "),n.buffer.push(X(a["bind-attr"].call(t,{hash:{style:"isShow"},hashTypes:{style:"STRING"},hashContexts:{style:t},contexts:[],types:[],data:n}))),n.buffer.push(">\r\n      "),$=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageAccount.editPaymentDetails:paymentDetail.bankingDetailsFor~",linksBinding:"collapsibleEditLink",visibleBinding:"isAccountDataAvailable"},hashTypes:{title:"STRING",linksBinding:"STRING",visibleBinding:"STRING"},hashContexts:{title:t,linksBinding:t,visibleBinding:t},inverse:Z.noop,fn:Z.program(22,y,n),contexts:[t],types:["ID"],data:n}),($||0===$)&&n.buffer.push($),n.buffer.push('     \r\n    <div style="float:right;">\r\n            <br />\r\n            '),$=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"submitPayementDetail",contentBinding:"editPaymentDetailsModel",disabledBinding:"editPaymentDetailsModel.isSaveButtonDisabled",visibleBinding:"isAccountDataAvailable"},hashTypes:{action:"STRING",contentBinding:"STRING",disabledBinding:"STRING",visibleBinding:"STRING"},hashContexts:{action:t,contentBinding:t,disabledBinding:t,visibleBinding:t},inverse:Z.noop,fn:Z.program(53,E,n),contexts:[t],types:["ID"],data:n}),($||0===$)&&n.buffer.push($),n.buffer.push("\r\n            "),$=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"cancelAction",contentBinding:"editPaymentDetailsModel",class:"btn-inverse",disabledBinding:"editPaymentDetailsModel.isCancelButtonDisabled",visibleBinding:"isAccountDataAvailable"},hashTypes:{action:"STRING",contentBinding:"STRING",class:"STRING",disabledBinding:"STRING",visibleBinding:"STRING"},hashContexts:{action:t,contentBinding:t,class:t,disabledBinding:t,visibleBinding:t},inverse:Z.noop,fn:Z.program(55,V,n),contexts:[t],types:["ID"],data:n}),($||0===$)&&n.buffer.push($),n.buffer.push("\r\n        </div>\r\n        \r\n\r\n\r\n        <div "),n.buffer.push(X(a["bind-attr"].call(t,{hash:{style:"showOverrideAHVPanel"},hashTypes:{style:"STRING"},hashContexts:{style:t},contexts:[],types:[],data:n}))),n.buffer.push(">\r\n            <hr />\r\n\r\n            "),$=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:Z.noop,fn:Z.program(57,F,n),contexts:[t],types:["ID"],data:n}),($||0===$)&&n.buffer.push($),n.buffer.push("\r\n\r\n            <hr />\r\n\r\n            "),$=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:Z.noop,fn:Z.program(68,J,n),contexts:[t],types:["ID"],
data:n}),($||0===$)&&n.buffer.push($),n.buffer.push("\r\n        </div>\r\n     \r\n\r\n\r\n        "),n.buffer.push(X(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:accountInformationTab.serviceNoDataMessage~",visibleBinding:"noAccountExist"},hashTypes:{text:"STRING",visibleBinding:"STRING"},hashContexts:{text:t,visibleBinding:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push("\r\n\r\n\r\n        "),n.buffer.push(X(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"editPaymentDetailsModel.customerTypee",visibleBinding:"noRequired"},hashTypes:{textBinding:"STRING",visibleBinding:"STRING"},hashContexts:{textBinding:t,visibleBinding:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push("\r\n\r\n    </div>"),""}),Ember.TEMPLATES.DPPQuotePreviewView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o,n;return t.buffer.push("\r\n       "),t.buffer.push(c((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.print",n):l.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.print",n)))),t.buffer.push("\r\n        "),""}function r(e,t){var o,n;return t.buffer.push("\r\n        "),t.buffer.push(c((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.close",n):l.call(e,"loc","locale.manageAccount.paymentPlan:manageDevicePaymentPlan.close",n)))),t.buffer.push("\r\n        "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var i,l=a.helperMissing,c=this.escapeExpression,u=this;return n.buffer.push('\r\n<div  >\r\n  <div class="print-button">    \r\n  </div>\r\n  <div style="display: none" id="print">\r\n  </div>\r\n  <div class="receipt" id="quotePreview" style="height: 650px; width: 100% ">\r\n    '),n.buffer.push(c(a._triageMustache.call(t,"data.htmlData",{hash:{unescaped:"true"},hashTypes:{unescaped:"STRING"},hashContexts:{unescaped:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push('\r\n  </div>\r\n  <div style="float:right; margin-bottom:20px">\r\n    <br />\r\n'),i=a.view.call(t,"Komodo.Controls.Button",{hash:{id:"settlePlanPickFile",action:"prinQoute",size:"sm"},hashTypes:{id:"STRING",action:"STRING",size:"STRING"},hashContexts:{id:t,action:t,size:t},inverse:u.noop,fn:u.program(1,s,n),contexts:[t],types:["ID"],data:n}),(i||0===i)&&n.buffer.push(i),n.buffer.push("\r\n        \r\n"),i=a.view.call(t,"Komodo.Controls.Button",{hash:{id:"settlePlanPickFile",action:"Close",size:"sm"},hashTypes:{id:"STRING",action:"STRING",size:"STRING"},hashContexts:{id:t,action:t,size:t},inverse:u.noop,fn:u.program(3,r,n),contexts:[t],types:["ID"],data:n}),(i||0===i)&&n.buffer.push(i),n.buffer.push("\r\n         <br />\r\n        </div>\r\n  <br />\r\n</div>\r\n"),""}),Ember.TEMPLATES.DevicePlanDetailView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o,n,s;return t.buffer.push('\r\n  <table width="100%">\r\n\t  <tr>\r\n\t\t  <td width="50%">\r\n\t\t\t  <p class="info-heading">'),t.buffer.push(h((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:devicePlanDetail.productId",s):d.call(e,"loc","locale.manageAccount.paymentPlan:devicePlanDetail.productId",s)))),t.buffer.push("</p>\r\n        "),o=a._triageMustache.call(e,"productId",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n      </td>\r\n\t\t  <td width="50%">\r\n\t\t\t  <p class="info-heading">'),t.buffer.push(h((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:devicePlanDetail.product",s):d.call(e,"loc","locale.manageAccount.paymentPlan:devicePlanDetail.product",s)))),t.buffer.push("</p>\r\n        "),o=a._triageMustache.call(e,"product",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n      </td>\r\n\t  </tr>\r\n\t  <tr>\r\n\t\t  <td width="50%">\r\n        \r\n      </td>\r\n\t\t  <td width="50%">\r\n\t\t\t  \r\n\t\t  </td>\r\n\t  </tr>\r\n    \r\n    <tr>\r\n      <td width="50%">\r\n        <p class="info-heading">'),t.buffer.push(h((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:devicePlanDetail.paymentPlanTotal",s):d.call(e,"loc","locale.manageAccount.paymentPlan:devicePlanDetail.paymentPlanTotal",s)))),t.buffer.push("</p>\r\n        "),o=a._triageMustache.call(e,"paymentPlanTotal",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n      </td>\r\n      <td width="50%">\r\n        <p class="info-heading">'),t.buffer.push(h((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:devicePlanDetail.noOfRemainingInstalment",s):d.call(e,"loc","locale.manageAccount.paymentPlan:devicePlanDetail.noOfRemainingInstalment",s)))),t.buffer.push("</p>\r\n        "),o=a._triageMustache.call(e,"numberOfRemainingInstalment",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n      </td>\r\n    </tr>\r\n    \r\n    <tr>\r\n      <td width="50%">\r\n\r\n      </td>\r\n      <td width="50%">\r\n\r\n      </td>\r\n    </tr>\r\n\r\n    <tr>\r\n      <td width="50%">\r\n        <p class="info-heading">'),t.buffer.push(h((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:devicePlanDetail.amountPerInstallment",s):d.call(e,"loc","locale.manageAccount.paymentPlan:devicePlanDetail.amountPerInstallment",s)))),t.buffer.push("</p>\r\n        "),o=a._triageMustache.call(e,"amountPerInstalment",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n      </td>\r\n      <td width="50%">\r\n        \r\n      </td>\r\n    </tr>\r\n  </table>\r\n  '),""}function r(e,t){var o,n,s;return t.buffer.push('\r\n  <table id="examplePager" width="100%" class="table table-bordered komodo-datagrid">\r\n    <tr>\r\n      <th>\r\n        '),t.buffer.push(h((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:devicePlanDetail.id",s):d.call(e,"loc","locale.manageAccount.paymentPlan:devicePlanDetail.id",s)))),t.buffer.push("\r\n      </th>\r\n      <th>\r\n        "),t.buffer.push(h((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:devicePlanDetail.instalment",s):d.call(e,"loc","locale.manageAccount.paymentPlan:devicePlanDetail.instalment",s)))),t.buffer.push("\r\n      </th>\r\n      <th>\r\n        "),t.buffer.push(h((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:devicePlanDetail.dueDate",s):d.call(e,"loc","locale.manageAccount.paymentPlan:devicePlanDetail.dueDate",s)))),t.buffer.push("\r\n      </th>\r\n      <th>\r\n        "),t.buffer.push(h((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:devicePlanDetail.amount",s):d.call(e,"loc","locale.manageAccount.paymentPlan:devicePlanDetail.amount",s)))),t.buffer.push("\r\n      </th>\r\n      <th>\r\n        "),t.buffer.push(h((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:devicePlanDetail.transactionNumber",s):d.call(e,"loc","locale.manageAccount.paymentPlan:devicePlanDetail.transactionNumber",s)))),t.buffer.push("\r\n      </th>\r\n      <th>\r\n        "),t.buffer.push(h((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:devicePlanDetail.status",s):d.call(e,"loc","locale.manageAccount.paymentPlan:devicePlanDetail.status",s)))),t.buffer.push("\r\n      </th>\r\n    </tr>\r\n    "),o=a.each.call(e,"data","in","deviceDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(4,i,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  </table>\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.TablePager",{hash:{tableId:"examplePager",contentBinding:"deviceDetails",itemsPerPage:"10",headerRows:"1",visiblePageCount:"3"},hashTypes:{tableId:"STRING",contentBinding:"STRING",itemsPerPage:"STRING",headerRows:"STRING",visiblePageCount:"STRING"},hashContexts:{tableId:e,contentBinding:e,itemsPerPage:e,headerRows:e,visiblePageCount:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function i(e,t){var o;return t.buffer.push("\r\n    <tr>\r\n      <td>\r\n        "),o=a._triageMustache.call(e,"data.uid",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td>\r\n      <td>\r\n        "),o=a._triageMustache.call(e,"data.installmentId",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td>\r\n      <td>\r\n        "),o=a._triageMustache.call(e,"data.dueDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td>\r\n      <td>\r\n        "),o=a._triageMustache.call(e,"data.installmentAmount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td>\r\n      <td>\r\n        "),o=a._triageMustache.call(e,"data.transctionId",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td>\r\n      <td>\r\n        "),o=a._triageMustache.call(e,"data.status",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td>\r\n    </tr>\r\n    "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var l,c,u,d=a.helperMissing,h=this.escapeExpression,m=this;return n.buffer.push("<div "),n.buffer.push(h(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:n}))),n.buffer.push('>\r\n  \r\n  <table width="100%">\r\n    <tr>\r\n      <td width="50%">\r\n        <p class="komodo-heading">'),n.buffer.push(h((c=a.loc||t&&t.loc,u={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},c?c.call(t,"locale.manageAccount.paymentPlan:devicePlanDetail.useCaseTitle",u):d.call(t,"loc","locale.manageAccount.paymentPlan:devicePlanDetail.useCaseTitle",u)))),n.buffer.push('</p>\r\n      </td>\r\n      <td width="50%" align="right">\r\n        <b>'),n.buffer.push(h(a.view.call(t,"Komodo.Controls.Link",{hash:{text:"~locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.back~",href:"#/paymentPlanApplications"},hashTypes:{text:"STRING",href:"STRING"},hashContexts:{text:t,href:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push("</b>\r\n      </td>\r\n    </tr>\r\n  </table>\r\n  <hr/>\r\n  "),l=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageAccount.paymentPlan:devicePlanDetail.useCaseTitle~"},hashTypes:{title:"STRING"},hashContexts:{title:t},inverse:m.noop,fn:m.program(1,s,n),contexts:[t],types:["ID"],data:n}),(l||0===l)&&n.buffer.push(l),n.buffer.push("\r\n  \r\n  "),l=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageAccount.paymentPlan:devicePlanDetail.listOfInstalment~"},hashTypes:{title:"STRING"},hashContexts:{title:t},inverse:m.noop,fn:m.program(3,r,n),contexts:[t],types:["ID"],data:n}),(l||0===l)&&n.buffer.push(l),n.buffer.push("\r\n</div>"),""}),Ember.TEMPLATES.CustomerQuoteDetailsView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o,n,s;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(2,r,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <hr/>\r\n  <br/>\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(7,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <hr/>\r\n  <br/>\r\n  "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:quoteDetails.quoteLineDetails~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n  <table id="tblquoteLineDetails" class="table table-bordered komodo-datagrid">\r\n    <tr>\r\n      <th style="width:70px;">'),t.buffer.push(T((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:quoteDetails.invoiceText",s):I.call(e,"loc","locale.manageaccount:quoteDetails.invoiceText",s)))),t.buffer.push('</th>\r\n      <th style="width:70px;">'),t.buffer.push(T((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:quoteDetails.amount",s):I.call(e,"loc","locale.manageaccount:quoteDetails.amount",s)))),t.buffer.push('</th>\r\n      <th style="width:70px;">'),t.buffer.push(T((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:quoteDetails.amountIncludingVAT",s):I.call(e,"loc","locale.manageaccount:quoteDetails.amountIncludingVAT",s)))),t.buffer.push('</th>\r\n      <th style="width:70px;">'),t.buffer.push(T((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:quoteDetails.vat",s):I.call(e,"loc","locale.manageaccount:quoteDetails.vat",s)))),t.buffer.push('</th>\r\n      <th style="width:70px;">'),t.buffer.push(T((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:quoteDetails.startDate",s):I.call(e,"loc","locale.manageaccount:quoteDetails.startDate",s)))),t.buffer.push('</th>\r\n      <th style="width:70px;">'),t.buffer.push(T((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:quoteDetails.endDate",s):I.call(e,"loc","locale.manageaccount:quoteDetails.endDate",s)))),t.buffer.push("</th>\r\n    </tr>\r\n    "),o=a.each.call(e,"item","in","customerQuoteDetailsModel.quoteLineDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(12,h,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n  </table>\r\n\r\n  <div class="float-right">\r\n    '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"addToAccount",visibleBinding:"isAddToAccountVisible"},hashTypes:{action:"STRING",visibleBinding:"STRING"},hashContexts:{action:e,visibleBinding:e},inverse:C.noop,fn:C.program(14,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("&nbsp;&nbsp;&nbsp; \r\n    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"regenerateQuote",disabledBinding:"isRegenerateQuoteDisable"},hashTypes:{action:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,disabledBinding:e},inverse:C.noop,fn:C.program(16,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("&nbsp;&nbsp;&nbsp;\r\n    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"rejectQuote",disabledBinding:"isRejectQuoteDisable",type:"danger"},hashTypes:{action:"STRING",disabledBinding:"STRING",type:"STRING"},hashContexts:{action:e,disabledBinding:e,type:e},inverse:C.noop,fn:C.program(18,f,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("&nbsp;&nbsp;&nbsp;\r\n    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"preActivate",visibleBinding:"isPreActivateVisable",disabledBinding:"isPreActivateDisable"},hashTypes:{action:"STRING",visibleBinding:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,visibleBinding:e,disabledBinding:e},inverse:C.noop,fn:C.program(20,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" &nbsp;&nbsp;&nbsp;\r\n    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"UseAvailableCredit",disabledBinding:"isUseAvailableCreditDisable"},hashTypes:{action:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,disabledBinding:e},inverse:C.noop,fn:C.program(22,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("&nbsp;&nbsp;&nbsp;\r\n  </div>\r\n  <br/><br/>\r\n  "),""}function r(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:C.noop,fn:C.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:C.noop,fn:C.program(5,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function i(e,t){return t.buffer.push("\r\n\r\n  \x3c!--Quote Number--\x3e\r\n  "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:quoteDetails.quoteNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"customerQuoteDetailsModel.quoteNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n\r\n  \x3c!--Quote Date--\x3e\r\n  "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:quoteDetails.quoteDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"customerQuoteDetailsModel.quoteDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n\r\n  \x3c!--Quote Category--\x3e\r\n  "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:quoteDetails.quoteCategory~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"customerQuoteDetailsModel.quoteCategory"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n\r\n  \x3c!--Invoice Run Id--\x3e\r\n  "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:quoteDetails.invoiceRunId~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"customerQuoteDetailsModel.invoiceRunId"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n\r\n  \x3c!--Expiration Date--\x3e\r\n  "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:quoteDetails.expirationDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"customerQuoteDetailsModel.expirationDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),""}function l(e,t){return t.buffer.push("\r\n\r\n  \x3c!--Replaced By Quote--\x3e\r\n  "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:quoteDetails.replacedByQuote~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"customerQuoteDetailsModel.replacedByQuote"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n\r\n  \x3c!--Status--\x3e\r\n  "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:quoteDetails.status~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"customerQuoteDetailsModel.status"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n\r\n  \x3c!--Created By--\x3e\r\n  "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:quoteDetails.createdBy~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"customerQuoteDetailsModel.createdBy"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n\r\n  \x3c!--Fulfillment Date--\x3e\r\n  "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:quoteDetails.fulfillmentDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"customerQuoteDetailsModel.fulfillmentDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n\r\n  \x3c!--Payment Due Date--\x3e\r\n  "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:quoteDetails.paymentDueDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"customerQuoteDetailsModel.paymentDueDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  <br/><br/>\r\n  "),""}function c(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:C.noop,fn:C.program(8,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:C.noop,fn:C.program(10,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function u(e,t){return t.buffer.push("\r\n\r\n  \x3c!--Quote Total--\x3e\r\n  "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:quoteDetails.quoteTotal~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"customerQuoteDetailsModel.quoteTotal"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n\r\n  \x3c!--Available Balance--\x3e\r\n  "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:quoteDetails.availableBalance~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"customerQuoteDetailsModel.availableBalance"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n\r\n  "),""}function d(e,t){return t.buffer.push("\r\n  \x3c!--Account Balance--\x3e\r\n  "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:quoteDetails.accountBalance~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"customerQuoteDetailsModel.accountBalance"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n\r\n  \x3c!--Amount if Paid Today--\x3e\r\n  "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:quoteDetails.amountIfPaidToday~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(T(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"customerQuoteDetailsModel.amountIfPaidToday"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n\r\n  "),""}function h(e,t){var o;return t.buffer.push("\r\n    <tr>\r\n      <td>"),o=a._triageMustache.call(e,"item.InvoiceText",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n      <td>"),o=a._triageMustache.call(e,"item.Amount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n      <td>"),o=a._triageMustache.call(e,"item.AmountIncludingVAT",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n      <td>"),o=a._triageMustache.call(e,"item.TaxAmount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n      <td>"),o=a._triageMustache.call(e,"item.StartDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n      <td>"),o=a._triageMustache.call(e,"item.EndDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n    </tr>\r\n    "),""}function m(e,t){var o,n;t.buffer.push(T((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:quoteDetails.addToAccount",n):I.call(e,"loc","locale.manageaccount:quoteDetails.addToAccount",n))))}function p(e,t){var o,n;t.buffer.push(T((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:quoteDetails.regenerateQuote",n):I.call(e,"loc","locale.manageaccount:quoteDetails.regenerateQuote",n))))}function f(e,t){var o,n;t.buffer.push(T((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:quoteDetails.reject",n):I.call(e,"loc","locale.manageaccount:quoteDetails.reject",n))))}function g(e,t){var o,n;t.buffer.push(T((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:quoteDetails.preActivate",n):I.call(e,"loc","locale.manageaccount:quoteDetails.preActivate",n))))}function v(e,t){var o,n;t.buffer.push(T((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:quoteDetails.useCredit",n):I.call(e,"loc","locale.manageaccount:quoteDetails.useCredit",n))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var y,b,D,T=this.escapeExpression,C=this,I=a.helperMissing;return n.buffer.push("<div "),n.buffer.push(T(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:n}))),n.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),n.buffer.push(T((b=a.loc||t&&t.loc,D={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},b?b.call(t,"locale.manageaccount:quoteDetails.customerQuoteDetails",D):I.call(t,"loc","locale.manageaccount:quoteDetails.customerQuoteDetails",D)))),n.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/quotes">&lt;'),n.buffer.push(T((b=a.loc||t&&t.loc,D={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},b?b.call(t,"locale.manageaccount:quoteDetails.back",D):I.call(t,"loc","locale.manageaccount:quoteDetails.back",D)))),n.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n\r\n  \x3c!--This is Quote Detail panel--\x3e\r\n  "),y=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageaccount:quoteDetails.customerQuoteDetails~",isCollapsed:!1,linksBinding:"collapsiblePrevAndNextLinks",defaultLinkClassNames:"collapsible-view-link"},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN",linksBinding:"STRING",defaultLinkClassNames:"STRING"},hashContexts:{title:t,isCollapsed:t,linksBinding:t,defaultLinkClassNames:t},inverse:C.noop,fn:C.program(1,s,n),contexts:[t],types:["ID"],data:n}),(y||0===y)&&n.buffer.push(y),n.buffer.push("\r\n</div>"),""}),Ember.TEMPLATES.CustomerAnalysisView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o,n;t.buffer.push(v((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:customerAnalysis.go",n):g.call(e,"loc","locale.manageaccount:customerAnalysis.go",n))))}function r(e,t){var o,n,s;return t.buffer.push("\r\n  <div "),t.buffer.push(v(a["bind-attr"].call(e,{hash:{class:"showFTViewScroll:table-Scrollable:table-horizontalScrollbar"},hashTypes:{class:"STRING"},hashContexts:{class:e},contexts:[],types:[],data:t}))),
t.buffer.push('>\r\n    <table id="tableBillableView" class="table table-bordered komodo-datagrid">\r\n      <thead>\r\n        <tr>\r\n          <th colspan="8" class="text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.financialTransaction",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.financialTransaction",s)))),t.buffer.push('</th>\r\n          <th colspan="4" class="text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.history",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.history",s)))),t.buffer.push('</th>\r\n          <th colspan="2" class="text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.csiCommands",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.csiCommands",s)))),t.buffer.push('</th>\r\n        </tr>\r\n        <tr>\r\n          <th class="text-nowrap text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.creationDate",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.creationDate",s)))),t.buffer.push('</th>\r\n          <th class="text-nowrap text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.ftType",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.ftType",s)))),t.buffer.push('</th>\r\n          <th class="text-nowrap text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.product",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.product",s)))),t.buffer.push('</th>\r\n          <th class="text-nowrap text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.ledgerAccountDescription",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.ledgerAccountDescription",s)))),t.buffer.push('</th>\r\n          <th class="text-nowrap text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.periodFrom",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.periodFrom",s)))),t.buffer.push('</th>\r\n          <th class="text-nowrap text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.periodTo",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.periodTo",s)))),t.buffer.push('</th>\r\n          <th class="text-nowrap text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.amount",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.amount",s)))),t.buffer.push('</th>\r\n          <th class="text-nowrap text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.runningTotal",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.runningTotal",s)))),t.buffer.push('</th>\r\n          <th class="text-nowrap text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.historyNumber",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.historyNumber",s)))),t.buffer.push('</th>\r\n          <th class="text-nowrap text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.userName",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.userName",s)))),t.buffer.push('</th>\r\n          <th class="text-nowrap text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.eventID",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.eventID",s)))),t.buffer.push('</th>\r\n          <th class="text-nowrap text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.eventName",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.eventName",s)))),t.buffer.push('</th>\r\n          <th class="text-nowrap text-center"> '),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.message",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.message",s)))),t.buffer.push('</th>\r\n          <th class="text-nowrap text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.command",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.command",s)))),t.buffer.push("</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        "),o=a.if.call(e,"data.FTViewDataAvailable",{hash:{},hashTypes:{},hashContexts:{},inverse:y.program(7,c,t),fn:y.program(4,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n  "),""}function i(e,t){var o;return t.buffer.push("\r\n        "),o=a.each.call(e,"record","in","data.bindFTViewDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(5,l,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function l(e,t){var o;return t.buffer.push('\r\n        <tr>\r\n          <td class="text-nowrap">'),o=a._triageMustache.call(e,"record.CreationDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n          <td class="text-nowrap">'),o=a._triageMustache.call(e,"record.TransactionType",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n          <td class="text-nowrap">'),o=a._triageMustache.call(e,"record.Product",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n          <td class="text-nowrap">'),o=a._triageMustache.call(e,"record.LedgerAccountDescription",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n          <td class="text-nowrap">'),o=a._triageMustache.call(e,"record.PeriodFrom",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n          <td class="text-nowrap">'),o=a._triageMustache.call(e,"record.PeriodTo",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n          <td class="text-nowrap">'),o=a._triageMustache.call(e,"record.Amount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n          <td class="text-nowrap">'),o=a._triageMustache.call(e,"record.RunningTotal",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n          <td class="text-nowrap">'),o=a._triageMustache.call(e,"record.HistoryNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n          <td class="text-nowrap">'),o=a._triageMustache.call(e,"record.UserName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n          <td class="text-nowrap">'),o=a._triageMustache.call(e,"record.EventId",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n          <td class="text-nowrap">'),o=a._triageMustache.call(e,"record.EventName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n          <td>"),o=a._triageMustache.call(e,"record.Message",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n          <td class="text-nowrap">'),o=a._triageMustache.call(e,"record.MessageTrackingId",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        </tr>\r\n        "),""}function c(e,t){return t.buffer.push('\r\n        <tr>\r\n          <td colspan="14" class="sub-heading text-center">\r\n            <i>'),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:customerAnalysis.noRecordsAvailable~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</i>\r\n          </td>\r\n        </tr>\r\n        "),""}function u(e,t){var o,n,s;return t.buffer.push("\r\n  <div "),t.buffer.push(v(a["bind-attr"].call(e,{hash:{class:"showHistroyViewScroll:table-Scrollable:table-horizontalScrollbar"},hashTypes:{class:"STRING"},hashContexts:{class:e},contexts:[],types:[],data:t}))),t.buffer.push('>\r\n    <table id="tableAllView" class="table table-bordered komodo-datagrid">\r\n      <thead>\r\n        <tr>\r\n          <th colspan="6" class="text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.history",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.history",s)))),t.buffer.push('</th>\r\n          <th colspan="6" class="text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.financialTransaction",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.financialTransaction",s)))),t.buffer.push('</th>\r\n          <th colspan="2" class="text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.csiCommands",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.csiCommands",s)))),t.buffer.push('</th>\r\n        </tr>\r\n        <tr>\r\n          <th class="text-nowrap text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.actualDate",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.actualDate",s)))),t.buffer.push('</th>\r\n          <th class="text-nowrap text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.historyNumber",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.historyNumber",s)))),t.buffer.push('</th>\r\n          <th class="text-nowrap text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.userName",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.userName",s)))),t.buffer.push('</th>\r\n          <th class="text-nowrap text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.productName",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.productName",s)))),t.buffer.push('</th>\r\n          <th class="text-nowrap text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.eventID",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.eventID",s)))),t.buffer.push('</th>\r\n          <th class="text-nowrap text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.eventName",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.eventName",s)))),t.buffer.push('</th>\r\n          <th class="text-nowrap text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.ftType",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.ftType",s)))),t.buffer.push('</th>\r\n          <th class="text-nowrap text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.ledgerAccountDescription",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.ledgerAccountDescription",s)))),t.buffer.push('</th>\r\n          <th class="text-nowrap text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.periodFrom",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.periodFrom",s)))),t.buffer.push('</th>\r\n          <th class="text-nowrap text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.periodTo",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.periodTo",s)))),t.buffer.push('</th>\r\n          <th class="text-nowrap text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.amount",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.amount",s)))),t.buffer.push('</th>\r\n          <th class="text-nowrap text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.runningTotal",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.runningTotal",s)))),t.buffer.push('</th>\r\n          <th class="text-nowrap text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.message",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.message",s)))),t.buffer.push('</th>\r\n          <th class="text-nowrap text-center">'),t.buffer.push(v((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:customerAnalysis.command",s):g.call(e,"loc","locale.manageaccount:customerAnalysis.command",s)))),t.buffer.push("</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        "),o=a.if.call(e,"data.HistoryViewDataAvailable",{hash:{},hashTypes:{},hashContexts:{},inverse:y.program(7,c,t),fn:y.program(10,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n  "),""}function d(e,t){var o;return t.buffer.push("\r\n        "),o=a.each.call(e,"record","in","data.bindHistoryViewDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(11,h,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function h(e,t){var o;return t.buffer.push('\r\n        <tr>\r\n          <td class="text-nowrap">'),o=a._triageMustache.call(e,"record.CreationDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n          <td class="text-nowrap">'),o=a._triageMustache.call(e,"record.HistoryNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n          <td class="text-nowrap">'),o=a._triageMustache.call(e,"record.UserName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n          <td class="text-nowrap">'),o=a._triageMustache.call(e,"record.Product",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n          <td class="text-nowrap">'),o=a._triageMustache.call(e,"record.EventId",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n          <td class="text-nowrap">'),o=a._triageMustache.call(e,"record.EventName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n          <td class="text-nowrap">'),o=a._triageMustache.call(e,"record.TransactionType",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n          <td class="text-nowrap">'),o=a._triageMustache.call(e,"record.LedgerAccountDescription",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n          <td class="text-nowrap">'),o=a._triageMustache.call(e,"record.PeriodFrom",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n          <td class="text-nowrap">'),o=a._triageMustache.call(e,"record.PeriodTo",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n          <td class="text-nowrap">'),o=a._triageMustache.call(e,"record.Amount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n          <td class="text-nowrap">'),o=a._triageMustache.call(e,"record.RunningTotal",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n          <td>"),o=a._triageMustache.call(e,"record.Message",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n          <td class="text-nowrap">'),o=a._triageMustache.call(e,"record.MessageTrackingId",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        </tr>\r\n        "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var m,p,f,g=a.helperMissing,v=this.escapeExpression,y=this;return n.buffer.push("<div "),n.buffer.push(v(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:n}))),n.buffer.push('>\r\n  <span class="komodo-heading">'),n.buffer.push(v((p=a.loc||t&&t.loc,f={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},p?p.call(t,"locale.manageaccount:customerAnalysis.title",f):g.call(t,"loc","locale.manageaccount:customerAnalysis.title",f)))),n.buffer.push('</span>\r\n  <span class="float-right">\r\n    <b>'),n.buffer.push(v(a.view.call(t,"Komodo.Controls.Link",{hash:{text:"~locale.manageaccount:customerAnalysis.exportToExcel~",action:"exportToExcel"},hashTypes:{text:"STRING",action:"STRING"},hashContexts:{text:t,action:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push('</b>\r\n  </span>\r\n  <hr />  \r\n  <table style="width: 100%;">\r\n    <tr>\r\n      <td style="width: 60%">\r\n        <table>\r\n          <tr>\r\n            <td style="width: auto">\r\n              '),n.buffer.push(v(a.view.call(t,"Komodo.Controls.DatePicker",{hash:{tabindex:"1",label:"~locale.manageaccount:customerAnalysis.from~",valueBinding:"data.fromDateBinding",validatorBinding:"validators.fromDateBindingValidator"},hashTypes:{tabindex:"STRING",label:"STRING",valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:t,label:t,valueBinding:t,validatorBinding:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push('\r\n            </td>\r\n            <td style="width: auto">\r\n              '),n.buffer.push(v(a.view.call(t,"Komodo.Controls.DatePicker",{hash:{tabindex:"2",label:"~locale.manageaccount:customerAnalysis.to~",valueBinding:"data.toDateBinding",validatorBinding:"validators.toDateBindingValidator"},hashTypes:{tabindex:"STRING",label:"STRING",valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:t,label:t,valueBinding:t,validatorBinding:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push('\r\n            </td>\r\n            <td style="width: auto">\r\n              '),m=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"getDetails",size:"xs",disableBinding:"data.disableGoButton"},hashTypes:{action:"STRING",size:"STRING",disableBinding:"STRING"},hashContexts:{action:t,size:t,disableBinding:t},inverse:y.noop,fn:y.program(1,s,n),contexts:[t],types:["ID"],data:n}),(m||0===m)&&n.buffer.push(m),n.buffer.push('\r\n            </td>\r\n          </tr>\r\n        </table>\r\n      </td>\r\n      <td style="width: 60%; float: right">\r\n        <table style="width: 100%;">\r\n          <tr>\r\n            <td class="text-center">\r\n              '),n.buffer.push(v(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:customerAnalysis.show~"},hashTypes:{text:"STRING"},hashContexts:{text:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push("\r\n            </td>\r\n            <td>\r\n              "),n.buffer.push(v(a.view.call(t,"Komodo.Controls.RadioButtonGroup",{hash:{contentBinding:"data.radioButtonShow",displayPath:"title",valuePath:"value",valueBinding:"data.radioButtonBinding",orientation:"horizontal"},hashTypes:{contentBinding:"STRING",displayPath:"STRING",valuePath:"STRING",valueBinding:"STRING",orientation:"STRING"},hashContexts:{contentBinding:t,displayPath:t,valuePath:t,valueBinding:t,orientation:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push("\r\n            </td>\r\n          </tr>\r\n        </table>\r\n      </td>\r\n    </tr>\r\n  </table>\r\n\r\n  <br />\r\n\r\n  "),m=a.if.call(t,"data.isBillableView",{hash:{},hashTypes:{},hashContexts:{},inverse:y.program(9,u,n),fn:y.program(3,r,n),contexts:[t],types:["ID"],data:n}),(m||0===m)&&n.buffer.push(m),n.buffer.push("\r\n</div>\r\n\r\n"),""}),Komodo.Models.AdhocDebitOrderModel=Ember.Object.extend({init:function(){this.methodOfPayment=void 0,this.acccountId=void 0,this.selectedAcccountId=void 0,this.invoicePeriod=void 0,this.accountHolderName=void 0,this.accountHolderId=void 0,this.bankName=void 0,this.branchName=void 0,this.branchCode=void 0,this.accountType=void 0,this.accountNumber=void 0,this.debitOrderDay=void 0,this.customerAccountHolder=void 0,this.methodOfPaymentData=void 0,this.radioButtonMethodofPayment=[{title:"Debit Order",value:"1"},{title:"Cash",value:"2"}],this.selectRadioButtonValue="1",this.radioFinancialAccount=[{title:"New",value:"1"},{title:"Existing",value:"2"}],this.selectAccountNoValue=void 0,this.hideDebitOrderControls=void 0,this.isSaveButtonDisabled=!0,this.methodOfPayments=[],this.accountDescription=void 0,this.isDisbaleInvoiceDayTemp=!1,this.iscustomerTypeDealer=void 0,this.bankAccountType=void 0,this.bankAccountTypes=[],this.validBusinessDays=[],this.isDisbaleInvoiceDay=!1,this.accountsGrid=[],this.selectedGridItem=void 0,this.commandGridItem=void 0,this.accountHolderPhoneNumber=void 0,this.accountHolderEmailAddress=void 0,this.payerIsCustomer=!0,this.ahvRejectionReson=void 0,this._super()}}),Komodo.Models.AdhocCustomerDocumentModel=Ember.Object.extend({init:function(){this.customerDocuments=[],this.documentName="",this.documentSize="",this.uploadPercentage="",this.uploadStatus="",this.documentUrl="",this.documentTypes=[],this.documentSerialNumbers=[],this.enableDocGrid=!0,this.refundDocumentTypes=[],this._super()}}),Komodo.Models.AdhocDebitOrderUnblockModel=Ember.Object.extend({init:function(){this.supervisorUsername="",this.passCode="",this.comment="",this.disableAction=!1,this._super()}}),Komodo.Models.AHVSupervisorModel=Ember.Object.extend({init:function(){this.ahvSupervisorUserName="",this.passCode="",this.acceptDocumentation=!1,this._super()}}),Komodo.Models.AllocateTransferModel=Ember.Object.extend({init:function(){this.placeOfPayment=void 0,this.country=void 0,this.countryDescription=void 0,this.currencyCode=void 0,this.methodofPayment=void 0,this.searchAmount=void 0,this.amount=void 0,this.dateOfPayment=void 0,this.fromDate=void 0,this.toDate=void 0,this.paymentReference=void 0,this.customerNo=void 0,this.toAccountDescription=void 0,this.toAccountNumber=void 0,this.customerNumber=void 0,this.custNo=void 0,this.accountNumber=void 0,this.fromAccountDescription=void 0,this.fromAccountNumber=void 0,this.smartcardNumber=void 0,this.selectedFinancialAccount=void 0,this.customerName=void 0,this.customerSurname=void 0,this.comment=void 0,this.isUnallocatedPayment=void 0,this.isMisAllocatedPayment=void 0,this.isSearchPayment=void 0,this.isCustomerSmartNumber=void 0,this.UID=void 0,this.listofPayments=[],this.searchByToCustomer=void 0,this.isArchive=void 0,this.disableForViewOnlyUser=void 0,this.customerClasses=void 0,this.LedgerAccount=void 0,this.ledgerAccountList=void 0,this.iccDateTime=void 0,this.featureToggle=void 0,this.paymentsList=void 0,this.GoLiveDate=void 0,this.selectedPageFrom=void 0,this.selectedPageTo=void 0,this.selectedPageNumber=void 0,this.typeOfPayment=void 0,this.selectedItemPerPage=void 0,this.isSortedAscending=!0,this.processing=void 0,this.idNumber=void 0,this.deviceNumber=void 0,this.searchText=void 0,this.accountNumber2=void 0,this.searchTextName=void 0,this.invoiceNumber=void 0,this.paymentHistory=void 0,this.reasonForCapture=void 0,this.reasonsForCapture=[],this._super()}}),Komodo.Models.ListofPayments=Ember.Object.extend({init:function(){this.dateOfPayment=void 0,this.placeOfPayment=void 0,this.paymentReference=void 0,this.amount=void 0,this.UID=void 0,this.accountNumber=void 0,this.isCheckboxSelected=void 0,this.result=void 0,this.currencyCode=void 0,this._super()}}),Komodo.Models.SearchCriteriaModel=Ember.Object.extend({init:function(){this.selectedPageFrom=void 0,this.selectedPageTo=void 0,this.selectedPageNumber=void 0,this.paymentDetails=void 0,this.payments=void 0,this.fromDate=void 0,this.toDate=void 0,this.paymentReference=void 0,this.searchAmount=void 0,this.typeOfPayment=void 0,this.paymentHistory=void 0,this._super()}}),Komodo.Models.ArchivedFinancialTransactionDetailsModel=Ember.Object.extend({init:function(){this.transactionNumber=void 0,this.accountNumber=void 0,this.createDate=void 0,this.createdByEvent=void 0,this.currency=void 0,this.amount=void 0,this.period=void 0,this.runningTotal=void 0,this.paidforCustomer=void 0,this.paidforAccount=void 0,this.psNumber=void 0,this.billingRuleDescription=void 0,this.sMSAccount=void 0,this.product=void 0,this.invoiceLine=void 0,this.paidForInvoice=void 0,this.appearedonInvoice=void 0,this.paymentReference=void 0,this.bankDate=void 0,this._super()}}),Komodo.Models.ArchivedFinancialTransactionsModel=Ember.Object.extend({init:function(){this.accountNumber=void 0,this.creationDate=void 0,this.amount=void 0,this.fromDate=void 0,this.toDate=void 0,this.msgAccountNumber=void 0,this.country=void 0,this.defaultAccountNumber=void 0,this.disableArchiveReversalsButton=void 0,this.disableArchivedReversalsPopUpButton=void 0,this.restrictReversal=void 0,this.pendingRefundNotification=void 0,this._super()}}),Komodo.Models.CreatePaymentPlanModel=Ember.Object.extend({init:function(){this._super(),this.set("financialAccountsList",Ember.A()),this.set("customerInvoices",Ember.A()),this.set("selectedInvoicesList",Ember.A()),this.set("selectedInvoicesTotalAmount",void 0),this.set("instalmentTerms",Ember.A()),this.set("chosenInstalmentAmounts",Ember.A()),this.set("instalments",1),this.set("defaultInstalmentAmount",void 0),this.set("chosenAmountsRunningTotal",0),this.set("defaultInstalment",kl.value("locale.manageAccount.paymentPlan:createPaymentPlan.default")),this.set("chooseInstalments",kl.value("locale.manageAccount.paymentPlan:createPaymentPlan.chooseAmounts")),this.set("listOfInstalments",Ember.A()),this.set("finalListOfInstalments",Ember.A()),this.set("disableCreateInstalment",!0),this.set("itemsPerPage",0),this.set("visiblePageCount",0),this.set("pageNumber",1),this.set("totalHits",0),this.set("runningTotal",0),this.set("allInvoices",Ember.A())}}),Komodo.Models.CustomerAnalysisModel=Ember.Object.extend({init:function(){this.customerID=void 0,this.radioButtonShow=void 0,this.radioButtonBinding=void 0,this.fromDateBinding=void 0,this.toDateBinding=void 0,this.disableGoButton=!0,this.isBillableView=!0,this.allFTViewRecords=void 0,this.allHistoryViewRecords=void 0,this.bindFTViewDetails=void 0,this.bindHistoryViewDetails=void 0,this.fromDate=null,this.toDate=null,this.pageSize=null,this.pageNumber=null,this.FTViewDataAvailable=!1,this.HistoryViewDataAvailable=!1,this._super()}}),Komodo.Models.FTHistoryCSIDetailsModel=Ember.Object.extend({init:function(){this.CreationDate=void 0,this.TransactionType=void 0,this.Product=void 0,this.LedgerAccountDescription=void 0,this.PeriodFrom=void 0,this.PeriodTo=void 0,this.Amount=void 0,this.RunningTotal=void 0,this.HistoryNumber=void 0,this.UserName=void 0,this.EventId=void 0,this.EventName=void 0,this.Message=void 0,this.MessageTrackingId=void 0,this._super()}}),Komodo.Models.CustomerQuoteDetailsModel=Ember.Object.extend({init:function(){this.quoteNumber=void 0,this.quoteDate=void 0,this.quoteCategory=void 0,this.invoiceRunId=void 0,this.expirationDate=void 0,this.replacedByQuote=void 0,this.status=void 0,this.createdBy=void 0,this.fulfillmentDate=void 0,this.paymentDueDate=void 0,this.quoteTotal=void 0,this.availableBalance=void 0,this.accountBalance=void 0,this.amountIfPaidToday=void 0,this.NumberOfDays=void 0,this.Reasons=[],this.Reason=void 0,this.Days=[],this.qouteSourceEvent=void 0,this.quoteLineDetails=[],this.deviceserialNumber=void 0,this.packageoperation=void 0,this._super()}}),Komodo.Models.DevicePlanDetailModel=Ember.Object.extend({init:function(){this.accountNumber=void 0,this.creditVetting=void 0,this.highestProductQualified=void 0,this.productName=void 0,this.dateFor=void 0,this.idValidated=void 0,this.idReference=void 0,this.addressValidated=!1,this.addressReference=void 0,this.ahvCompliant=!1,this.ahvReference=void 0,this.creditApproval=void 0,this.applicationStatus=void 0,this.productId=void 0,this.product=void 0,this.paymentPlanTotal=void 0,this.numberOfRemainingInstalment=void 0,this.amountPerInstalment=void 0,this._super()}}),Komodo.Models.DPPQuotePreviewModel=Ember.Object.extend({init:function(){this._super()}}),Komodo.Models.EditPaymentDetailsModel=Ember.Object.extend({init:function(){this.customerTypee=void 0,this.methodOfPayment=void 0,this.acccountId=void 0,this.selectedAcccountId=void 0,this.invoicePeriod=void 0,this.accountHolderName=void 0,this.accountHolderId=void 0,this.bankName=void 0,
this.branchName=void 0,this.branchCode=void 0,this.accountType=void 0,this.accountNumber=void 0,this.debitOrderDay=void 0,this.customerAccountHolder=void 0,this.methodOfPaymentData=void 0,this.radioButtonMethodofPayment=[{title:"Debit Order",value:"1"},{title:"Cash",value:"2"},{title:"AHV Pending",value:"3"}],this.hideDebitOrderControls=void 0,this.hidePaymentDayControls=!0,this.isSaveButtonDisabled=!0,this.methodOfPayments=[],this.accountDescription=void 0,this.isDisbaleInvoiceDayTemp=!1,this.iscustomerTypeDealer=void 0,this.bankAccountType=void 0,this.bankAccountTypes=[],this.isDisbaleInvoiceDay=!1,this.supportDocPagerPageContent=Ember.A(),this.supportingDocuments=[],this.ahvPending=!1,this.thirdPartyDocuments=[],this.supervisorUsername="",this.supervisorPassword="",this.disableAction=!1,this.isCancelButtonDisabled=!0,this.accountHolderPhoneNumber=void 0,this.accountHolderEmailAddress=void 0,this.acceptDocumentation=!1,this._super()}}),Komodo.Models.SupportingDocumentModel=Ember.Object.extend({init:function(){this.documentName="",this.documentSize="",this.documentType="",this.documentTypeText="",this.documentSerialNumber="",this.serialNumber="",this.uploadPercentage="",this.uploadStatus="",this.documentTypes=[],this.documentSerialNumbers=[],this.documentAlreadyUploaded=!1,this._super()},canDocumentDelete:function(){return!(1==this.get("documentAlreadyUploaded")||"DONE"==this.get("uploadStatus"))}.property("uploadStatus","documentAlreadyUploaded")}),Komodo.Models.FinancialTransactionDetailsModel=Ember.Object.extend({init:function(){this.transactionNumber=void 0,this.createDate=void 0,this.amountPaid=void 0,this.product=void 0,this.methodOfPayment=void 0,this.ledgerAccount=void 0,this.invoiceLine=void 0,this.approvedBy=void 0,this.batchNumber=void 0,this.receiptNumber=void 0,this.comment=void 0,this.createdByEvent=void 0,this.createdBy=void 0,this.accountNumber=void 0,this.bankDate=void 0,this.payPoint=void 0,this.ledgerAccountDescription=void 0,this.paidForInvoice=void 0,this.approvedDate=void 0,this.reversedTransaction=void 0,this.paymentReference=void 0,this.amountIncludingTax=void 0,this.amountExcludingTax=void 0,this.vatAmount=void 0,this.taxType2Amount=void 0,this.AgreementDetailId=void 0,this.TransferFromCustomerID,this.TransferToCustomerID,this.TransferFromAccountID,this.TransferToAccountID,this.requestedBy=void 0,this.requestedStatus=void 0,this._super()}}),Komodo.Models.FinancialTransactionsModel=Ember.Object.extend({init:function(){this.selectedAcccountId,this.reasons=[],this.comment,this.ReversePayment=void 0,this.reverse=void 0,this.isDisableView=void 0,this.isDisableReverse=void 0,this.disableReversalsButton=void 0,this.msgAccountNumber=void 0,this.customerNumber=void 0,this.country=void 0,this.disableReversalsPopUpButton=void 0,this.restrictReversal=void 0,this.enableRefund=void 0,this.pendingRefundNotification=void 0,this.AgreementDetailId=void 0,this.journalTransactionStatus=void 0,this.refundId=void 0,this.financialTransactionApprovalRequestUID=void 0,this.financialTransactionUID=void 0,this.statusChangeComment=void 0,this.statusChangeCommentsForJournals=void 0,this.statusReasonSelected=void 0,this.requestedBy=void 0,this.disableForViewOnlyUser=void 0,this.rejectForJournalsFromViewFTSelected=void 0,this.requestDate=void 0,this.journalTransactionType=void 0,this.reasonsForJournalRejection=[],this.pendingTransactions=void 0,this.status=void 0,this.pageSize=void 0,this.pageNo=void 0,this.fromDate=void 0,this.toDate=void 0,this.totalAccount=void 0,this.minAmount=void 0,this.maxAmount=void 0,this.isBack=!1,this.allAccountsOnBack=[],this._super()}}),Komodo.Models.InvoiceDetailsModel=Ember.Object.extend({init:function(){this.country=void 0,this.customerRefNo=void 0,this.invoiceNumber=void 0,this.searchInvoiceNumber=void 0,this.dataGrid=void 0,this.fromDate=void 0,this.toDate=void 0,this.searchDate=void 0,this.customerClass=void 0,this.documentUrl=void 0,this._super()}}),Komodo.Models.ManageAccountGridModel=Ember.Object.extend({init:function(){this.accountNo,this.accountDescription,this.smartcardnumber,this.status,this.paymentmethod,this.amountdue,this.duedate,this.actions,this.accountsGrid=[],this.selectedGridItem=void 0,this.commandGridItem=void 0,this._super()}}),Komodo.Models.ManageAccountModel=Ember.Object.extend({init:function(){this.accountDescription,this.status,this.totalDue,this.duedate,this.statuslst=[],this.accountDescriptionlst=[],this._super()}}),Komodo.Models.ManageDevicePaymentPlanModel=Ember.Object.extend({init:function(){this.productName=void 0,this.iccCustomerNumber=void 0,this.cancelSalesOrderId=void 0,this.cancelDeviceNumber=void 0,this.cancelComment=void 0,this.contactType=void 0,this.email=void 0,this.othEmail=void 0,this.othPhone=void 0,this.othCountryCode=void 0,this.isButtonDisabled=void 0,this.phone=void 0,this.settleComment=void 0,this.productNameToUpgrade=void 0,this.productNameForUpgrade=void 0,this.upgradeDate=void 0,this.upgradeDateValue=new Date(Date.UTC((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())),this.cancelPlanSalesOrderNumber=void 0,this.cancelPlanDevice=void 0,this.cancelPlanComment=void 0,this.productCode=void 0,this.currentDiv=void 0,this.currentTittle=void 0,this.applicationActivities=[],this.visibleLinkss=[],this.checkMigrate=!1,this.applicationStatus=void 0,this.htmlData=void 0,this.isQuoteAvailable=void 0,this.quoteString=void 0,this.quote=void 0,this._super()}}),Komodo.Models.SettlePlanDPPDocumentModel=Ember.Object.extend({init:function(){this.documentName="",this.documentSize="",this.uploadPercentage="",this.uploadStatus="",this.documentUrl="",this.documentTypes=[],this.documentSerialNumber="",this.isAlready=!1,this.isDocumentTypeDisable=!1,this.enableDocGrid=!1,this._super()},documentType:void 0}),Komodo.Models.CancelPlanDPPDocumentModel=Ember.Object.extend({init:function(){this.documentName="",this.documentSize="",this.uploadPercentage="",this.uploadStatus="",this.documentUrl="",this.documentTypes=[],this.documentSerialNumber="",this.isAlready=!1,this.isDocumentTypeDisable=!0,this.enableDocGrid=!1,this._super()},documentType:void 0}),Komodo.Models.SettlePlanByAdhocModel=Ember.Object.extend({init:function(){this.settleCustomerNumber=void 0,this.settleAccountNumber=void 0,this.totalAdhocAmountToSettle=void 0,this.boundAdhocLowerDate=void 0,this.accountHolderNameForSettle=void 0,this.accountHolderSurnameForSettle=void 0,this.adhocAHVStatus=void 0,this.adhocAccountHolderId=void 0,this.adhocPayerIdType=void 0,this.bankAdhocAccType=void 0,this.adhocBankName=void 0,this.adhocBankNameNumber=void 0,this.adhocBranchName=void 0,this.adhocBranchNameNumber=void 0,this.adhocBranchCode=void 0,this.adhocMethodOfPayment=void 0,this.adhocDebitOrderDay=void 0,this.isAdhocPaymentReqDisabled=!1,this._super()}}),Komodo.Models.ManualDebitOrCreditModel=Ember.Object.extend({init:function(){this.country=void 0,this.customerNumber=void 0,this.accountNumberList=void 0,this.accountNumber=void 0,this.amount=void 0,this.comment=void 0,this.ledgerAccountList=void 0,this.ledgerAccount=void 0,this.deviceList=void 0,this.disableJournalsButton=!1,this.pendingRefundNotification=void 0,this.stockHandlerList=void 0,this.stockHandler=void 0,this.manualDebitOrCreditSASpecific=void 0,this.reasonForCapture=void 0,this.reasonsForCapture=[],this._super()}}),Komodo.Models.PaymentPlanApplicationDetailsModel=Ember.Object.extend({init:function(){this.accountNumber="NA",this.creditVetting="NA",this.productKey=void 0,this.highestProductQualified="NA",this.productName=void 0,this.addOnName=void 0,this.lineInstruction=void 0,this.adslNumber=void 0,this.applicationDate="NA",this.adhocDate=void 0,this.internalCreditApproval="NA",this.applicationStatus="NA",this.ahvStatus="NA",this.override=!1,this.checkOverride=!1,this.idValidated=!1,this.idReference=void 0,this.addressValidated=!1,this.addressReference=void 0,this.workPermit=!1,this.addDocDisable=!0,this.IdType=void 0,this.incomeValidated=!1,this.incomeReference=void 0,this.overrideFlag=!1,this.overrideRemark=void 0,this.isCreditCSR=!0,this.enableSaveButton=!0,this.iccCustomerNumber=void 0,this.crmCustomerNumber=void 0,this.adhocDODate=void 0,this.tempKey=void 0,this.tempKeyAddon=void 0,this.tempKeyLineInstruction=void 0,this.tempKeyADSLNumber=void 0,this.bankDetails=void 0,this.firstName=void 0,this.lastName=void 0,this.idNumber=void 0,this.disableProduct=!1,this.overrideAhvFlag=!1,this.methodOfPayments=[],this.bankAccountTypes=[],this.isForeighnNational=!1,this.idValidatedCheck=!1,this.workPermitCheck=!1,this.addressValidatedCheck=!1,this.creditVettingCheck=!1,this.internalVettingCheck=!1,this.productConfirmedCheck=!1,this.highestProductValidatedCheck=!1,this.ahvCompliantCheck=!1,this.incomeProofValidatedCheck=!1,this.adhocDOScheduledCheck=!1,this.comment=void 0,this.salesOrderId="-",this.activatePlanComment=void 0,this.supervisorUsername=void 0,this.supervisorPassword=void 0,this.acceptAddedDocument=!1,this.supervisorName=void 0,this.isNonComplaint=!1,this.supervisorAuthentication=!1,this.supervisorOverriden=!1,this.workPermit=!1,this._super()},documentType:void 0}),Komodo.Models.DPPDocumentModel=Ember.Object.extend({init:function(){this.documentName="",this.documentSize="",this.uploadPercentage="",this.uploadStatus="",this.documentUrl="",this.documentTypes=[],this.documentSerialNumber="",this.isAlready=!1,this.isDocumentTypeDisable=!1,this.enableDocGrid=!1,this._super()},documentType:void 0}),Komodo.Models.AHVDocumentModel=Ember.Object.extend({init:function(){this.documentName="",this.documentSize="",this.uploadPercentage="",this.uploadStatus="",this.documentUrl="",this.documentTypes=[],this.documentSerialNumber="",this.isAlready=!1,this.isDocumentTypeDisable=!1,this.enableDocGrid=!1,this._super()},documentType:void 0}),Komodo.Models.PaymentPlanApplicationsModel=Ember.Object.extend({init:function(){this._super()}}),Komodo.Models.PaymentPlanDetailsModel=Ember.Object.extend({init:function(){this._super(),this.set("instalmentPlanDetails",Ember.A()),this.set("instalmentTerms",Ember.A()),this.set("planId",void 0),this.set("accountNumber",void 0),this.set("loanLedgerAccount",void 0),this.set("termLedgerAccount",void 0),this.set("totalAmount",void 0),this.set("numberOfInstalments",void 0),this.set("unpaidBalance",void 0),this.set("startDate",void 0),this.set("runningTotal",parseFloat(0).toFixed(2)),this.set("disableSaveInstalment",!0),this.set("disableCancelInstalment",!0),this.set("disableCalculate",!1)}}),Komodo.Models.PaymentPlanModel=Ember.Object.extend({init:function(){this._super(),this.country=void 0,this.isAvailable=!1,this.set("invoiceInstalmentPlan",Ember.A())}}),Komodo.Models.PendingJournalsModel=Ember.Object.extend({init:function(){this.customerId=void 0,this.pendingTransactions=[],this.approvalRequestID=void 0,this.requestDate=void 0,this.requestedBy=void 0,this.requestStatus=void 0,this.requestComment=void 0,this.customerNumber=void 0,this.transactionType=void 0,this.baseAmount=void 0,this.status=void 0,this.descendingJournalsByDate=void 0,this.pageNumber=1,this.accountNumber=void 0,this.reversedTransaction=void 0,this.FinancialTransactionApprovalRequestUID=void 0,this.FinancialTransactionUID=void 0,this.TransactionStatus=void 0,this.StatusChangeComment=void 0,this.Country=void 0,this.journalID=void 0,this._super()}}),Komodo.Models.ProformaInvoiceModel=Ember.Object.extend({init:function(){this.accountNumberSelected=void 0,this.fromDateSelected=void 0,this.periodSelected=void 0,this.proformaInvoiceProductDetailsList=[],this.emailAddress=void 0,this.toDate=void 0,this.xmlString=void 0,this.invoiceNumber=void 0,this.invoiceTotal=void 0,this.vatIncluded=void 0,this.vatableAmount=void 0,this.exciseDutyIncluded=void 0,this.exciseDutyableAmount=void 0,this.discount=void 0,this.xmlForTemplate=void 0,this.htmlData=void 0,this._super()}}),Komodo.Models.QuotesModel=Ember.Object.extend({init:function(){this.customerQuotes=[],this._super()}}),Komodo.Models.RefundTransactionModel=Ember.Object.extend({init:function(){this.country=void 0,this.countryDesc=void 0,this.customerNumber=void 0,this.accountNumber=void 0,this.balance=void 0,this.customerClass=void 0,this.customerStatus=void 0,this.enableDocuments=void 0,this.enableDocGrid=void 0,this.name=void 0,this.idNumber=void 0,this.methodOfPayment=void 0,this.bankName=void 0,this.branchName=void 0,this.branchCode=void 0,this.bankaccountNumber=void 0,this.bankAccountType=void 0,this.ahvStatus=void 0,this.amount=void 0,this.comment=void 0,this.iccDateTime=void 0,this.iccDate=void 0,this.invoiceProfileDay=void 0,this.methodOfPaymentkey=void 0,this.refundsFlow=void 0,this.letterFromExecutor=void 0,this.letterOfAuthority=void 0,this.affidavit=void 0,this.visibleAHVButtons=void 0,this.disableNameAndSurname=void 0,this.bankNames=[],this.bankAccountTypes=[],this.methodOfPayments=[],this.branchNames=[],this.bigSevenbanks=[],this.reasonsForCapture=[],this.paymentDetails=[],this.documentTypes=[],this.customerDocuments=[],this.documentsToBeUploaded=[],this.documentChecklist=[],this.currentCheckList=[],this.personalDetails=[],this.disableAHVRealtime=!0,this.enableAHVStatus=!1,this.showAHVButton=!1,this.emailandPhoneNumber=!1,this.checked=!1,this.isCompliant=!1,this.disableAHVButtons=!1,this.setEntryBankDetails=!1,this.isSupervisor=!1,this.authenticate=!1,this.cash=!1,this.thirdParty=!1,this.deceased=!1,this.debitOrder=!1,this.commercial=!1,this.isAccountHolder=!1,this.showAccountholderToggle=!1,this.invoiceDay=void 0,this.busyIndicator=void 0,this.disableRefundsButton=void 0,this.restrictRefunds=void 0,this.disableAhvOverride=void 0,this.permissionsValue=void 0,this.reasonForCapture=void 0,this.enableAHVOverride=void 0,this.superuser=void 0,this.overridden=void 0,this._super()}}),Komodo.Models.RefundsCustomerDocumentModel=Ember.Object.extend({init:function(){this.documentName="",this.documentType="",this.documentSize="",this.uploadPercentage="",this.uploadStatus="",this.documentUrl="",this.documentSerialNumbers=[],this._super()}}),Komodo.Models.ReverseArchivedFinancialTransactionModel=Ember.Object.extend({init:function(){this.country=void 0,this.comment=void 0,this.originalAmount=void 0,this.amount=void 0,this.typeOfReversalSelected=void 0,this.typeOfReversal="0",this.validatedAmount=void 0,this.validators=void 0,this.reasonForCapture=void 0,this.reasonsForCapture=[],this.disableArchivedReversalsPopUpButton=void 0,this._super()}}),Komodo.Models.ReverseFinancialTransactionModel=Ember.Object.extend({init:function(){this.country=void 0,this.comment=void 0,this.originalAmount=void 0,this.amount=void 0,this.periodFrom=void 0,this.periodTo=void 0,this.typeOfReversalSelected=void 0,this.typeOfReversal="0",this.validatedAmount=void 0,this.validators=void 0,this.disableReversalsPopUpButton=void 0,this.ledgerAccountDescription=void 0,this.PeriodisableLedgerAccounts=[],this.refundSelected=void 0,this.fromRefundDate=void 0,this.toRefundDate=void 0,this.toDateIsVisible=void 0,this.reasonForCapture=void 0,this.reasonsForCapture=[],this.isPeriodizedReversal=!1,this._super()}}),Komodo.Models.SearchPromptModel=Ember.Object.extend({init:function(){this.customerUID=void 0,this._super()}}),Komodo.Models.StatementDetailsModel=Ember.Object.extend({init:function(){this.country=void 0,this.customerRefNo=void 0,this.customerFullName=void 0,this.email=void 0,this.fromDate=void 0,this.toDate=void 0,this.dataGrid=void 0,this.thdataGrid=void 0,this.customerClass=void 0,this.documentUrl=void 0,this.documentId=void 0,this.isCharge=void 0,this.isPayment=void 0,this._super()}}),Komodo.Models.TransferPaymentModel=Ember.Object.extend({init:function(){this.country=void 0,this.amount=void 0,this.selectedAmount=void 0,this.dateOfPayment=void 0,this.toAccountNumber=void 0,this.fromCustomerNumber=void 0,this.fromAccountNumber=void 0,this.fromAccountNumberWithDescription=void 0,this.comment=void 0,this.isFTSelected=void 0,this.UID=void 0,this.pendingRefundNotification=void 0,this.iccDateTime=void 0,this.LedgerAccount=void 0,this.paymentsList=void 0,this.reasonForCapture=void 0,this.remainingFtFunds=void 0,this.selectedPayment=void 0,this._super()}}),Komodo.Models.UpdateFinancialTransactionStatusModel=Ember.Object.extend({init:function(){this.transactionNumber=void 0,this.createDate=void 0,this.amountPaid=void 0,this.product=void 0,this.methodOfPayment=void 0,this.ledgerAccount=void 0,this.invoiceLine=void 0,this.batchNumber=void 0,this.receiptNumber=void 0,this.comment=void 0,this.createByEvent=void 0,this.createdBy=void 0,this.accountNumber=void 0,this.bankDate=void 0,this.payPoint=void 0,this.ledgerAccountDescription=void 0,this.paidforInvoice=void 0,this.approvedDate=void 0,this.reversedTransaction=void 0,this.paymentReference=void 0,this.financialTransactionApprovalRequestUID=void 0,this.financialTransactionUID=void 0,this.transactionStatus=void 0,this.statusChangeComment=void 0,this.requestedBy=void 0,this.country=void 0,this.journalID=void 0,this.refundID=void 0,this.documentsDisable=void 0,this.disableForViewOnlyUser=void 0,this.customerSearch=void 0,this.transactionTypeSearch=void 0,this.requestedBySearch=void 0,this.dateSearch=void 0,this.BankAccountNumber=void 0,this.BankAccountTypeDescription=void 0,this.BankBranchId=void 0,this.BankCodeId=void 0,this.BankName=void 0,this.MethodOfPaymentDescription=void 0,this.MethodOfPaymentId=void 0,this.PayerIdNumber=void 0,this.PayerName=void 0,this.AHVStatus=void 0,this._super()}}),Komodo.Models.SupportDocumentsModel=Ember.Object.extend({init:function(){this.UploadedDocumentsDataGrid=[],this._super()}}),Komodo.Models.SearchCriteriaModel=Ember.Object.extend({init:function(){this.searchCustomerNumber=void 0,this.searchDate=void 0,this.searchUser=void 0,this.searchTransType=void 0,this.selectedPageFrom=void 0,this.selectedPageTo=void 0,this.selectedPageNumber=void 0,this.pendingTransactions=void 0,this._super()}}),Komodo.Models.ViewAccountInformationModel=Ember.Object.extend({init:function(){this.selectedAcccountId=void 0,this.accountDescription=void 0,this.status=void 0,this.selectedAcccountStatus=void 0,this.methodOfPayment=void 0,this.nextInvoiceDate=void 0,this.debitOrderDay=void 0,this.listOfDevicesSmartcard=void 0,this.chargePeriod=void 0,this.priceCurrency=void 0,this.amountOverdue=void 0,this.totalAmountOverdue=void 0,this.notYetDue=void 0,this.currentlyDue=void 0,this.totalAmountDue=void 0,this.days1To30=void 0,this.days31To60=void 0,this.days61To90=void 0,this.days91To120=void 0,this.days121To150=void 0,this.days151To180=void 0,this.over180Days=void 0,this.accountHoldersName=void 0,this.bank=void 0,this.accountNumber=void 0,this.branchCode=void 0,this.accountHoldersId=void 0,this.accountType=void 0,this.branchName=void 0,this.methodOfPayments=[{value:"Debit Order",key:"1"},{value:"Cash",key:"2"}],this.isPaymentDetails=!1,this.maskedBankAccountnumber=void 0,this._super()}}),Komodo.Models.WriteOffModel=Ember.Object.extend({init:function(){this.country=void 0,this.customerNumber=void 0,this.accountNumber=void 0,this.accountDesc=void 0,this.accountStatus=void 0,this.accountStatuses=void 0,this.accountBalance=void 0,this.accountNumberList=void 0,this.invoiceNumber=void 0,this.invoices=void 0,this.invoicesGrid=void 0,this.disputeStatus=void 0,this.invoiceDate=void 0,this.dueDate=void 0,this.methodOfPayment=void 0,this.balanceBroughtForward=void 0,this.totalAmount=void 0,this.balance=void 0,this.ReferenceNumber=void 0,this.financialAccount=void 0,this.comment=void 0,this.amount=void 0,this.customerClass=void 0,this.commercial=void 0,this.residential=void 0,this.commercialId=void 0,this.residentialId=void 0,this.customClassLoaded=void 0,this.writeOffAmount=void 0,this.enableWriteOff=void 0,this.displayMessage=void 0,this.hideWriteOffButton=void 0,this.enableInvoices=void 0,this.isResidential=void 0,this.isCommercial=void 0,this.disableForViewOnlyUser=void 0,this.methodOfPayment=[],this._super()}}),Ember.TEMPLATES.CreatePaymentPlanView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o;return t.buffer.push("\r\n\t"),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:R.noop,fn:R.program(2,r,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\t"),""}function r(e,t){var o;return t.buffer.push("\r\n\t"),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:R.noop,fn:R.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\t"),""}function i(e,t){var o,n,s;return t.buffer.push("\r\n\t\t"),o=a.each.call(e,"statusResponse","in","_statusResponses",{hash:{},hashTypes:{},hashContexts:{},inverse:R.noop,fn:R.program(4,l,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\t\t<div "),t.buffer.push(M(a["bind-attr"].call(e,{hash:{class:"_showProcessing:komodo-show:komodo-hidden"},hashTypes:{class:"STRING"},hashContexts:{class:e},contexts:[],types:[],data:t}))),t.buffer.push('>\r\n\t\t\t<img src="Content/Images/busy-small.svg" />&nbsp;'),t.buffer.push(M((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.komodo:busyIndicator.typeProcessing",s):w.call(e,"loc","locale.komodo:busyIndicator.typeProcessing",s)))),t.buffer.push("\r\n\t\t</div>\r\n\t"),""}function l(e,t){var o;return t.buffer.push("\r\n\t\t<div><img "),t.buffer.push(M(a["bind-attr"].call(e,{hash:{src:"statusResponse.imageUrl"},hashTypes:{src:"STRING"},hashContexts:{src:e},contexts:[],types:[],data:t}))),t.buffer.push("/>&nbsp;"),o=a._triageMustache.call(e,"statusResponse.status",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(": "),o=a._triageMustache.call(e,"statusResponse.dateChanged",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n\t\t"),""}function c(e,t){var o;return t.buffer.push("\r\n\t"),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageAccount.paymentPlan:invoices.invoices~",visibleBinding:"_showDataEntry"},hashTypes:{title:"STRING",visibleBinding:"STRING"},hashContexts:{title:e,visibleBinding:e},inverse:R.noop,fn:R.program(7,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    \r\n    "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageAccount.paymentPlan:paymentPlans.paymentPlanDetails~",visibleBinding:"_showDataEntry"},hashTypes:{title:"STRING",visibleBinding:"STRING"},hashContexts:{title:e,visibleBinding:e},inverse:R.noop,fn:R.program(16,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n    <br/>\r\n\t<div class="float-right">\r\n        '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"createPaymentPlan",disable:"data.disableCreateInstalment",visibleBinding:"_showDataEntry"},hashTypes:{action:"STRING",disable:"ID",visibleBinding:"STRING"},hashContexts:{action:e,disable:e,visibleBinding:e},inverse:R.noop,fn:R.program(29,P,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </div>\r\n   \r\n    "),""}function u(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:R.noop,fn:R.program(8,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function d(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:R.noop,fn:R.program(9,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function h(e,t){var o,n,s;return t.buffer.push('\r\n    <p class="sub-heading">'),t.buffer.push(M((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:createPaymentPlan.filterInvoices",s):w.call(e,"loc","locale.manageAccount.paymentPlan:createPaymentPlan.filterInvoices",s)))),t.buffer.push("</p>\r\n    "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"data.financialAccountFilter",tabindex:"2",label:"~locale.manageAccount.paymentPlan:createPaymentPlan.account~",contentBinding:"data.financialAccountsList",optionLabelPath:"content.full",optionValuePath:"content.number",prompt:" "},hashTypes:{valueBinding:"STRING",tabindex:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING"},hashContexts:{valueBinding:e,tabindex:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n    <div class="float-right">\r\n        '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"searchInvoiceList"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:R.noop,fn:R.program(10,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"clearInvoiceList",type:"inverse"},hashTypes:{action:"STRING",type:"STRING"},hashContexts:{action:e,type:e},inverse:R.noop,fn:R.program(12,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n    </div>\r\n    <br/>\r\n    <br/>\r\n    <hr/>\r\n    <br/>\r\n    <table id="invoicesTable"  class="table table-bordered komodo-datagrid">\r\n        <tr>\r\n            <th>'),t.buffer.push(M((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:invoices.invoiceNumber",s):w.call(e,"loc","locale.manageAccount.paymentPlan:invoices.invoiceNumber",s)))),t.buffer.push("</th>\r\n            <th>"),t.buffer.push(M((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:invoices.disputeStatus",s):w.call(e,"loc","locale.manageAccount.paymentPlan:invoices.disputeStatus",s)))),t.buffer.push("</th>\r\n            <th>"),t.buffer.push(M((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:invoices.invoiceDate",s):w.call(e,"loc","locale.manageAccount.paymentPlan:invoices.invoiceDate",s)))),t.buffer.push("</th>\r\n            <th>"),t.buffer.push(M((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:invoices.dueDate",s):w.call(e,"loc","locale.manageAccount.paymentPlan:invoices.dueDate",s)))),t.buffer.push("</th>\r\n            <th>"),t.buffer.push(M((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:invoices.accountNumber",s):w.call(e,"loc","locale.manageAccount.paymentPlan:invoices.accountNumber",s)))),t.buffer.push("</th>\r\n            <th>"),t.buffer.push(M((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:invoices.methodOfPayment",s):w.call(e,"loc","locale.manageAccount.paymentPlan:invoices.methodOfPayment",s)))),t.buffer.push("</th>\r\n            <th>"),t.buffer.push(M((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:invoices.balanceBroughtForward",s):w.call(e,"loc","locale.manageAccount.paymentPlan:invoices.balanceBroughtForward",s)))),t.buffer.push("</th>\r\n            <th>"),t.buffer.push(M((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:invoices.totalAmount",s):w.call(e,"loc","locale.manageAccount.paymentPlan:invoices.totalAmount",s)))),t.buffer.push("</th>\r\n            <th>"),t.buffer.push(M((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:invoices.balance",s):w.call(e,"loc","locale.manageAccount.paymentPlan:invoices.balance",s)))),t.buffer.push("</th>\r\n            <th>"),t.buffer.push(M((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageAccount.paymentPlan:invoices.select",s):w.call(e,"loc","locale.manageAccount.paymentPlan:invoices.select",s)))),t.buffer.push("</th>\r\n        </tr>\r\n        "),o=a.each.call(e,"invoice","in","_visibleInvoicesContent",{hash:{},hashTypes:{},hashContexts:{},inverse:R.noop,fn:R.program(14,f,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </table>\r\n    \r\n    "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.Pager",{hash:{mode:"virtual",contentLengthBinding:"data.totalHits",pageSelectedAction:"pageSelected",itemsPerPageBinding:"data.itemsPerPage",visiblePageCountBinding:"data.visiblePageCount"},hashTypes:{mode:"STRING",contentLengthBinding:"STRING",pageSelectedAction:"STRING",itemsPerPageBinding:"STRING",visiblePageCountBinding:"STRING"},hashContexts:{mode:e,contentLengthBinding:e,pageSelectedAction:e,itemsPerPageBinding:e,visiblePageCountBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n     "),""}function m(e,t){var o,n;return t.buffer.push("\r\n        "),t.buffer.push(M((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:createPaymentPlan.search",n):w.call(e,"loc","locale.manageAccount.paymentPlan:createPaymentPlan.search",n)))),t.buffer.push("\r\n        "),""}function p(e,t){var o,n;return t.buffer.push("\r\n        "),t.buffer.push(M((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:createPaymentPlan.clear",n):w.call(e,"loc","locale.manageAccount.paymentPlan:createPaymentPlan.clear",n)))),t.buffer.push("\r\n        "),""}function f(e,t){var o;return t.buffer.push("\r\n        <tr>\r\n            <td>"),o=a._triageMustache.call(e,"invoice.InvoiceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n            <td>"),o=a._triageMustache.call(e,"invoice.DisputeStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n            <td>"),o=a._triageMustache.call(e,"invoice.InvoiceDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n            <td>"),o=a._triageMustache.call(e,"invoice.DueDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n            <td>"),o=a._triageMustache.call(e,"invoice.FinancialAccountId",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n            <td>"),o=a._triageMustache.call(e,"invoice.Mop",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n            <td class="komodo-decimal">'),o=a._triageMustache.call(e,"invoice.BalanceBroughtForward",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n            <td class="komodo-decimal">'),o=a._triageMustache.call(e,"invoice.TotalAmount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n            <td class="komodo-decimal">'),o=a._triageMustache.call(e,"invoice.Balance",{hash:{},
hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n            <td>"),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"invoice.selected"},hashTypes:{checkedBinding:"STRING"},hashContexts:{checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n        </tr>\r\n        "),""}function g(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:R.noop,fn:R.program(17,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n       \r\n    <br />\r\n    "),""}function v(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:R.noop,fn:R.program(18,y,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:R.noop,fn:R.program(24,C,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function y(e,t){var o;return t.buffer.push("\r\n    "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.Select",{hash:{label:"~locale.manageAccount.paymentPlan:createPaymentPlan.numberOfInstalments~",contentBinding:"data.instalmentTerms",valueBinding:"_instalmentTerms",optionLabelPath:"content.value",optionValuePath:"content.key",selectionBinding:"content.key",validatorBinding:"validators.numberOfInstalmentsValidator"},hashTypes:{label:"STRING",contentBinding:"STRING",valueBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",selectionBinding:"STRING",validatorBinding:"STRING"},hashContexts:{label:e,contentBinding:e,valueBinding:e,optionLabelPath:e,optionValuePath:e,selectionBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br/>\r\n    "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:createPaymentPlan.instalments~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n    "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreRadioButton",{hash:{name:"instalments",valueBinding:"data.instalments",optionValue:"1",optionLabelBinding:"data.defaultInstalment"},hashTypes:{name:"STRING",valueBinding:"STRING",optionValue:"STRING",optionLabelBinding:"STRING"},hashContexts:{name:e,valueBinding:e,optionValue:e,optionLabelBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n    "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreRadioButton",{hash:{name:"instalments",valueBinding:"data.instalments",optionValue:"2",optionLabelBinding:"data.chooseInstalments"},hashTypes:{name:"STRING",valueBinding:"STRING",optionValue:"STRING",optionLabelBinding:"STRING"},hashContexts:{name:e,valueBinding:e,optionValue:e,optionLabelBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n    <br/>\r\n    "),o=a.if.call(e,"isDefaultNumberOfInstalments",{hash:{},hashTypes:{},hashContexts:{},inverse:R.program(21,D,t),fn:R.program(19,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),""}function b(e,t){t.buffer.push("\r\n        &nbsp;\r\n    ")}function D(e,t){var o;return t.buffer.push("\r\n    "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:createPaymentPlan.amountPerInstalment~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n    "),o=a.each.call(e,"item","in","data.chosenInstalmentAmounts",{hash:{},hashTypes:{},hashContexts:{},inverse:R.noop,fn:R.program(22,T,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function T(e,t){var o;return t.buffer.push("\r\n    "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:createPaymentPlan.instalmentAmount~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" "),o=a._triageMustache.call(e,"item.key",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("<br />\r\n    "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{validatorBinding:"item.validator",valueBinding:"item.amount"},hashTypes:{validatorBinding:"STRING",valueBinding:"STRING"},hashContexts:{validatorBinding:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n    "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"item.validator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br/>\r\n    "),""}function C(e,t){var o;return t.buffer.push("\r\n    "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:createPaymentPlan.paymentPlanTotal~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br/>\r\n\r\n    "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.selectedInvoicesTotalAmount"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br/><br />\r\n    "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.pagerTotal"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br /><br />\r\n    <br/>\r\n    "),o=a.if.call(e,"isDefaultNumberOfInstalments",{hash:{},hashTypes:{},hashContexts:{},inverse:R.program(27,x,t),fn:R.program(25,I,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function I(e,t){t.buffer.push("\r\n    &nbsp;\r\n    ")}function x(e,t){return t.buffer.push("\r\n        "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.paymentPlan:createPaymentPlan.runningTotal~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n        "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{valueBinding:"data.chosenAmountsRunningTotal",disabled:!0},hashTypes:{valueBinding:"STRING",disabled:"BOOLEAN"},hashContexts:{valueBinding:e,disabled:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n    "),""}function P(e,t){var o,n;return t.buffer.push(" \r\n        "),t.buffer.push(M((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:createPaymentPlan.createPaymentPlan",n):w.call(e,"loc","locale.manageAccount.paymentPlan:createPaymentPlan.createPaymentPlan",n)))),t.buffer.push("\r\n        "),""}function S(e,t){var o,n;return t.buffer.push("\r\n     "),t.buffer.push(M((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.paymentPlan:createPaymentPlan.noInvoicesFound",n):w.call(e,"loc","locale.manageAccount.paymentPlan:createPaymentPlan.noInvoicesFound",n)))),t.buffer.push("\r\n    "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var A,N,B,M=this.escapeExpression,R=this,w=a.helperMissing;return n.buffer.push("<div "),n.buffer.push(M(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:n}))),n.buffer.push('>\r\n    <div>\r\n        <span class="komodo-heading">'),n.buffer.push(M((N=a.loc||t&&t.loc,B={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},N?N.call(t,"locale.manageAccount.paymentPlan:createPaymentPlan.createPaymentPlan",B):w.call(t,"loc","locale.manageAccount.paymentPlan:createPaymentPlan.createPaymentPlan",B)))),n.buffer.push('</span>\r\n        <span class="float-right">\r\n            <b>\r\n                <a href="#/paymentPlan">&lt;'),n.buffer.push(M((N=a.loc||t&&t.loc,B={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},N?N.call(t,"locale.manageaccount:general.Back",B):w.call(t,"loc","locale.manageaccount:general.Back",B)))),n.buffer.push("</a>\r\n            </b>\r\n        </span>\r\n    </div>\r\n    <hr />\r\n\t"),A=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageAccount.paymentPlan:createPaymentPlan.results~",visibleBinding:"_showResults"},hashTypes:{title:"STRING",visibleBinding:"STRING"},hashContexts:{title:t,visibleBinding:t},inverse:R.noop,fn:R.program(1,s,n),contexts:[t],types:["ID"],data:n}),(A||0===A)&&n.buffer.push(A),n.buffer.push("\r\n    "),A=a.if.call(t,"_hasInvoices",{hash:{},hashTypes:{},hashContexts:{},inverse:R.program(31,S,n),fn:R.program(6,c,n),contexts:[t],types:["ID"],data:n}),(A||0===A)&&n.buffer.push(A),n.buffer.push("\r\n</div>"),""}),Komodo.Application.AccountRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"account",useCaseDisplayName:kl.value("locale.manageaccount:manageAccount.manageAccountTitle"),renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("account",{controller:"account"})},init:function(){Komodo.Services.eventAggregator.subscribe("PublishAccountNoToRedirectEditPaymentDetail",function(e){Komodo.Services.uiService.getController("editPaymentDetails").set("accountno",e),Komodo.Services.uiService.transitionTo("editPaymentDetails")}),Komodo.Services.eventAggregator.subscribe("PublishAccountNoToRedirectViewFinanceTransactions",function(e){Komodo.Services.uiService.getController("financialTransactions").set("accountno",e),Komodo.Services.uiService.transitionTo("financialTransactions")}),Komodo.Services.eventAggregator.subscribe("PublishAccountNoToRedirectViewAccountInformation",function(e){Komodo.Services.uiService.getController("viewAccountInformation").set("accountNumber",e),Komodo.Services.uiService.transitionTo("viewAccountInformation")}),Komodo.Services.eventAggregator.subscribe("PublishAccountNoToRedirectEditPaymentDetails",function(e){Komodo.Services.uiService.getController("editPaymentDetails").set("accountno",e)}),this._super()}}),Komodo.Application.EditPaymentDetailsRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"editPaymentDetails",useCaseDisplayName:kl.value("locale.manageaccount:manageAccount.EditPaymentDetails"),renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("editPaymentDetails",{controller:"editPaymentDetails"})},init:function(){this._super()}}),Komodo.Application.EditPaymentDetailsAfricaRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"editPaymentDetailsAfrica",useCaseDisplayName:kl.value("locale.manageaccount:manageAccount.editPaymentDetailsAfrica"),renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("editPaymentDetailsAfrica",{controller:"editPaymentDetailsAfrica"})},init:function(){this._super()}}),Komodo.Application.StatementDetailsRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"statementDetails",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("statementDetails",{controller:"statementDetails"})},init:function(){this._super()}}),Komodo.Application.InvoiceDetailsRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"invoiceDetails",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("invoiceDetails",{controller:"invoiceDetails"})},init:function(){this._super()}}),Komodo.Application.FinancialTransactionsRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"financialTransactions",useCaseDisplayName:kl.value("locale.manageaccount:manageAccount.viewTransaction"),renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("financialTransactions",{controller:"financialTransactions"})},init:function(){Komodo.Services.eventAggregator.subscribe("PublishCommentsToRedirectViewFinanceTransactions",function(e){Komodo.Services.uiService.getController("financialTransactions").setReversalData(e)}),this._super()}}),Komodo.Application.ViewAccountInformationRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"viewAccountInformation",useCaseDisplayName:kl.value("locale.manageaccount:manageAccount.viewAccount"),renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("viewAccountInformation",{controller:"viewAccountInformation"})},init:function(){this._super()}}),Komodo.Application.FinancialTransactionDetailsRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"financialTransactionDetails",useCaseDisplayName:kl.value("locale.manageaccount:manageAccount.financialTransaction"),renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("financialTransactionDetails",{controller:"financialTransactionDetails"})},init:function(){this._super()}}),Komodo.Application.QuotesRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"quotes",useCaseDisplayName:kl.value("locale.manageaccount:manageAccount.quotes"),renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("quotes",{controller:"quotes"})},init:function(){this._super()}}),Komodo.Application.CustomerQuoteDetailsRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"customerQuoteDetails",useCaseDisplayName:kl.value("locale.manageaccount:quoteDetails.customerQuoteDetails"),renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("customerQuoteDetails",{controller:"customerQuoteDetails"})},init:function(){this._super()}}),Komodo.Application.ArchivedFinancialTransactionsRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"archivedFinancialTransactions",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("archivedFinancialTransactions",{controller:"archivedFinancialTransactions"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageaccount:manageAccount.archivedTransaction"),Komodo.Services.eventAggregator.subscribe("PublishCommentsToRedirectViewArchivedFinancialTransactions",function(e){Komodo.Services.uiService.getController("archivedFinancialTransactions").setReversalArchivedData(e)}),this._super()}}),Komodo.Application.ArchivedFinancialTransactionDetailsRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"archivedFinancialTransactionDetails",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("archivedFinancialTransactionDetails",{controller:"archivedFinancialTransactionDetails"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageaccount:manageAccount.archievedTransactionDetails"),this._super()},model:function(e){return e}}),Komodo.Application.ManualDebitOrCreditRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"manualDebitOrCredit",renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("manualDebitOrCredit",{controller:"manualDebitOrCredit"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageaccount:manualDebitOrCredit.manualdebitcredit"),this._super()}}),Komodo.Application.PaymentPlanRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"paymentPlan",useCaseDisplayName:kl.value("locale.manageAccount.paymentPlan:paymentPlans.listOfPaymentPlans"),renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("paymentPlan",{controller:"paymentPlan"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageAccount.paymentPlan:paymentPlans.listOfPaymentPlans"),this._super()}}),Komodo.Application.DevicePlanDetailRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"devicePlanDetail",useCaseDisplayName:kl.value("locale.manageaccount.paymentPlan:devicePlanDetail.useCaseTitle"),renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("devicePlanDetail",{controller:"devicePlanDetail"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageAccount.paymentPlan:devicePlanDetail.useCaseTitle"),this._super()}}),Komodo.Application.PaymentPlanDetailsRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"paymentPlanDetails",useCaseDisplayName:kl.value("locale.manageAccount.paymentPlan:paymentPlans.listOfPaymentPlans"),renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("paymentPlanDetails",{controller:"paymentPlanDetails"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageAccount.paymentPlan:paymentPlans.listOfPaymentPlans"),this._super()}}),Komodo.Application.EditPaymentPlanRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"EditPaymentPlan",useCaseDisplayName:kl.value("locale.manageAccount.paymentPlan:editPaymentPlan.editPaymentArrangement"),renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("editPaymentPlan",{controller:"editPaymentPlan"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageAccount.paymentPlan:paymentPlans.listOfPaymentPlans"),this._super()}}),Komodo.Application.PaymentPlanApplicationsRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"paymentPlanApplications",useCaseDisplayName:kl.value("locale.manageAccount.paymentPlan:paymentPlanApplications.useCaseTitle"),renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("paymentPlanApplications",{controller:"paymentPlanApplications"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageAccount.paymentPlan:paymentPlanApplications.useCaseTitle"),this._super()}}),Komodo.Application.CreatePaymentPlanRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"createPaymentPlanRoute",useCaseDisplayName:kl.value("locale.manageAccount.paymentPlan:createPaymentPlan.createPaymentPlan"),renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("createPaymentPlan",{controller:"createPaymentPlan"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageAccount.paymentPlan:createPaymentPlan.createPaymentPlan"),this._super()}}),Komodo.Application.PaymentPlanApplicationDetailsRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"paymentPlanApplicationDetails",useCaseDisplayName:kl.value("locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.useCaseTitle"),renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("paymentPlanApplicationDetails",{controller:"paymentPlanApplicationDetails"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.useCaseTitle"),this._super()}}),Komodo.Application.ManageDevicePaymentPlanRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"manageDevicePaymentPlan",useCaseDisplayName:kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.useCaseTitle"),renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("manageDevicePaymentPlan",{controller:"manageDevicePaymentPlan"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.useCaseTitle"),this._super()}}),Komodo.Application.AdhocDebitOrderRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"adhocDebitOrder",useCaseDisplayName:kl.value("locale.manageAccount.adhocdebitorder:general.useCaseTitle"),renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("adhocDebitOrder",{controller:"adhocDebitOrder"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageAccount.adhocdebitorder:general.useCaseTitle"),this._super()}}),Komodo.Application.CustomerAnalysisRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"customerAnalysis",useCaseDisplayName:kl.value("locale.manageaccount:customerAnalysis.title"),renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("customerAnalysis",{controller:"customerAnalysis"})},init:function(){this._super()}}),Komodo.Application.ProformaInvoiceRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"proformaInvoice",useCaseDisplayName:kl.value("locale.manageaccount:proformaInvoiceTab.title"),renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("proformaInvoice",{controller:"proformaInvoice"})},init:function(){this._super()}}),Komodo.UI.Route.registerRoutes(function(){this.resource("account"),this.resource("editPaymentDetails"),this.resource("editPaymentDetailsAfrica"),this.resource("financialTransactions"),this.resource("financialTransactionDetails"),this.resource("quotes"),this.resource("customerQuoteDetails"),this.resource("viewAccountInformation"),this.resource("archivedFinancialTransactions"),this.resource("archivedFinancialTransactionDetails"),this.resource("manualDebitOrCredit"),this.resource("paymentPlan"),this.resource("createPaymentPlan"),this.resource("paymentPlanDetails"),this.resource("editPaymentPlan"),this.resource("statementDetails"),this.resource("invoiceDetails"),this.resource("devicePlanDetail"),this.resource("paymentPlanApplications"),this.resource("paymentPlanApplicationDetails"),this.resource("manageDevicePaymentPlan"),this.resource("adhocDebitOrder"),this.resource("customerAnalysis"),this.resource("proformaInvoice"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageAccount,routeName:"account",title:kl.value("locale.manageaccount:manageAccount.manageAccountTitle"),type:Komodo.NavigationTypes.HomeTile,display:!1,imageurl:"Content/Images/Home/manageCustomer.svg",desiredLocation:4,conditionalCallback:function(e){if(!Komodo.Services.ProductAndServiceMaintenanceHelper.create().isCustomerIdIsAvailableToRetriveData())return Komodo.Services.uiService.showModalPopup("Please Search for a Customer","searchPrompt",{closeCallback:function(){Komodo.Services.uiService.getController("searchPrompt").set("searchPromptModel.customerUID",void 0),Komodo.Services.uiService.transitionTo("home")},canUserClose:!0,shouldStartAndStopController:!1}),!1}}),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageAccount,routeName:"financialTransactions",title:kl.value("locale.manageaccount:manageAccount.viewTransaction")}),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageAccount,routeName:"statementDetails",title:kl.value("locale.statements:statement.statement")}),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageAccount,routeName:"invoiceDetails",title:kl.value("locale.statements:invoice.invoice")}),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageAccount,routeName:"editPaymentDetails",title:kl.value("locale.manageaccount:manageAccount.EditPaymentDetails")}),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageAccount,routeName:"editPaymentDetailsAfrica",title:kl.value("locale.manageaccount:manageAccount.editPaymentDetailsAfrica")}),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageAccount,routeName:"manualDebitOrCredit",title:kl.value("locale.manageaccount:manualDebitOrCredit.manualdebitcredit")}),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageAccount,routeName:"archivedFinancialTransactions",title:kl.value("locale.manageaccount:manageAccount.archivedTransaction")}),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageAccount,routeName:"paymentPlan",title:kl.value("locale.manageAccount.paymentPlan:paymentPlans.paymentPlanHeading")}),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageAccount,routeName:"paymentPlanApplications",title:kl.value("locale.manageAccount.paymentPlan:paymentPlanApplications.devicePaymentPlans")}),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageAccount,routeName:"quotes",title:kl.value("locale.manageaccount:manageAccount.quotes")}),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageAccount,routeName:"customerAnalysis",title:kl.value("locale.manageaccount:customerAnalysis.title")}),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageAccount,routeName:"proformaInvoice",title:kl.value("locale.manageaccount:proformaInvoiceTab.title")}),Komodo.Services.eventAggregator.subscribe("PublishAdhocDebitOrder",function(e){var t=Komodo.Services.uiService.getController("adhocDebitOrder");void 0!==t&&(!1===t._isStarted&&t.start(),void 0!==e&&void 0!==e.length&&e.length>0&&(t.clearData(),t.setAllAccounts(e)))})}),Komodo.Application.AdhocDebitOrderRoute=Komodo.UI.Route.extend({useCaseName:"adhocDebitOrder",useCaseDisplayName:void 0,init:function(){this.useCaseDisplayName=kl.value("locale.manageaccount:adhocdebitorder.useCaseTitle"),this._super()}}),Komodo.UI.Route.registerRoutes(function(){this.resource("adhocDebitOrder"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageAccount,routeName:"adhocDebitOrder",title:"adhocDebitOrder"})}),Komodo.Application.TransferPaymentRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"interAccountTransfers",renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("transferPayment",{controller:"transferPayment"})},init:function(){this.useCaseDisplayName=kl.value("locale.managePayments:interAccount.useCaseTitle"),this._super()}}),Komodo.Application.WriteOffRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"writeOff",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("writeOff",{controller:"writeOff"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageaccount:writeOffFunds.title"),this._super()}}),Komodo.Application.RefundTransactionRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"refundTransaction",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("refundTransaction",{controller:"refundTransaction"})},init:function(){this.useCaseDisplayName="refundTransaction",this._super()},model:function(e){return e}}),Komodo.Application.PendingJournalsRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"pendingJournals",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("pendingJournals",{controller:"pendingJournals"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageaccount:pendingFTS.title"),this._super()},model:function(e){return e}}),Komodo.Application.UpdateFinancialTransactionStatusRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"updateFinancialTransactionStatus",init:function(){this.useCaseDisplayName=kl.value("locale.managePayments:aprvFinTrans.useCaseTitle"),Komodo.Services.eventAggregator.subscribe("updateFinancialTransactionStatusRedirect",function(e){Komodo.Services.uiService.getController("updateFinancialTransactionStatus").setResponseMessage(e)}),this._super()}}),Komodo.UI.Route.registerRoutes(function(){this.resource("refundTransaction"),this.resource("transferPayment"),this.resource("writeOff"),this.resource("pendingJournals"),this.resource("updateFinancialTransactionStatus"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageAccount,routeName:"transferPayment",title:kl.value("locale.managePayments:interAccount.useCaseTitle")}),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageAccount,routeName:"writeOff",title:kl.value("locale.manageaccount:writeOffFunds.title")})}),Komodo.Services.manageAccountService=Ember.Object.create({ageingInfo:void 0,retrieveAgeingInfoError:void 0,currentArchiveFinancialTransactions:void 0,currentArchiveFinancialTransactionsError:void 0,financialAccountsErrorReceived:void 0,financialTransactionsErrorReceived:void 0,currentCustomerQuotes:void 0,init:function(){},setRetrieveAgeingInfoResult:function(e){this.set("ageingInfo",e)},setRetrieveAgeingInfoError:function(e){this.set("retrieveAgeingInfoError",e)},setRetrievedArchiveFinancialTransactionResul:function(e){this.set("currentArchiveFinancialTransactions",e)},setRetrievedArchiveFinancialTransactionError:function(e){this.set("currentArchiveFinancialTransactionsError",e)},setfinancialAccountsErrorReceived:function(e){this.set("financialAccountsErrorReceived",e)},setfinancialTransactionsErrorReceived:function(e){this.set("financialTransactionsErrorReceived",e)},setQuotesResult:function(e){this.set("currentCustomerQuotes",e.Quote)},searchQuotation:function(e,t){var a=$.Deferred(),o={eventName:"RetrieveQuotations",eventVersion:"v1",eventValidityInMinutes:0,eventPriority:null};return e.sendMessage(t,o).done(function(){a.resolve()}).fail(function(e){a.reject(e)}),a},publishEvent:function(e,t,a,o){var n=$.Deferred(),s={eventName:a,eventVersion:o,eventValidityInMinutes:0,eventPriority:null};return e.sendMessage(t,s).done(function(){n.resolve()}).fail(function(e,t){n.fail(e)}),n},overrideCreditVettingDecision:function(e,t){var a=$.Deferred(),o={eventName:"OverrideCreditVettingDecision",eventVersion:"v1",eventValidityInMinutes:0,eventPriority:null};return e.sendMessage(t,o).done(function(){a.resolve()}).fail(function(e){a.fail(e)}),a},createProductPaymentPlan:function(e,t){var a=$.Deferred(),o={eventName:"CreateProductPaymentPlan",eventVersion:"v1",eventValidityInMinutes:0,eventPriority:null};return e.sendMessage(t,o).done(function(){a.resolve()}).fail(function(e){a.fail(e)}),a},settleDecoderPaymentPlan:function(e,t){var a=$.Deferred(),o={eventName:"SettleDecoderPaymentPlan",eventVersion:"v1",eventValidityInMinutes:0,eventPriority:null};return e.sendMessage(t,o).done(function(){a.resolve()}).fail(function(e){a.fail(e)}),a},cancelDecoderPaymentPlan:function(e,t){var a=$.Deferred(),o={eventName:"CancelDecoderPaymentPlan",eventVersion:"v1",eventValidityInMinutes:0,eventPriority:null};return e.sendMessage(t,o).done(function(){a.resolve()}).fail(function(e){a.fail(e)}),a},
sendOutbondNotification:function(e,t){var a=$.Deferred(),o={eventName:"SendOutboundNotification",eventVersion:"v1",eventValidityInMinutes:0,eventPriority:null};return e.sendMessage(t,o).done(function(){a.resolve()}).fail(function(e){a.fail(e)}),a},activateProduct:function(e,t){var a=$.Deferred(),o={eventName:"ActivatePaymentPlanProduct",eventVersion:"v1",eventValidityInMinutes:0,eventPriority:null};return e.sendMessage(t,o).done(function(){a.resolve()}).fail(function(e){a.fail(e)}),a}}),Komodo.Services.TransferPaymentAccessService=Ember.Object.extend(Komodo.Dependency,{init:function(){this._super(),this.requiresDependency("_securityService",{singleton:Komodo.Services.securityService}),this.requiresDependency("_eventAggregator",{singleton:Komodo.Services.eventAggregator}),this.requiresDependency("_featureToggleService",{singleton:Komodo.Services.featureToggleService}),this.getEventAggregator().subscribe(Komodo.EventNames.applicationInitialized,this,this._configure),this.getEventAggregator().subscribe(Komodo.EventNames.userLoggedIn,this,this._configure)},getSecurityService:function(){return this.get("_securityService")},getEventAggregator:function(){return this.get("_eventAggregator")},getFeatureToggleService:function(){return this.get("_featureToggleService")},_configure:function(){var e=this;this.getFeatureToggleService().isEnabled("ManageAccount","TransferPayment").done(function(t){Ember.run(function(){t||e.getSecurityService().overrideRouteAccess({routeName:"transferPayment",permissionType:"HIDE"})})})},destroy:function(){this.getEventAggregator().unsubscribe(Komodo.EventNames.applicationInitialized,this,this._configure),this._super()}}),Komodo.Services.PaymentPlanService=Ember.Object.extend(Komodo.Dependency,{_invoiceInstalmentPlan:void 0,_selectedPaymentPlanId:void 0,init:function(){this.requiresDependency("_queryService",{singleton:Komodo.Services.queryService}),this.requiresDependency("_uiService",{singleton:Komodo.Services.uiService})},getQueryService:function(){return this.get("_queryService")},getUIService:function(){return this.get("_uiService")},getCustomerProfileService:function(){return Komodo.Services.customerProfileService},_getJSON:function(e){var t=$.Deferred();return this.getQueryService().getJSON(e).done(function(e){t.resolve(e)}).fail(function(e,a,o){t.reject(o)}),t},fetchPaymentPlan:function(e){return Komodo.guard.againstUndefined(e,"customerNumber"),this._getJSON("CreditApplication/GetListOfInvoiceInstallmentPlanByCustomerNumber?customerNumber="+e)},fetchCustomerInvoices:function(e,t,a){return Komodo.guard.againstUndefined(e,"customerNumber"),Komodo.guard.againstUndefined(t,"pageNumber"),Komodo.guard.againstUndefined(a,"pageSize"),this._getJSON("Invoice/GetUnpaidInvoicesbyCustomerId?customerId="+e+"&pageNumber="+t+"&pageSize="+a)},setMonthlyInstalments:function(total,numberOfMonths){var number=parseFloat(total),subTotal=0;number/=numberOfMonths;for(var monthlyAmount=Ember.A(),i=1;i<=numberOfMonths;i++)monthlyAmount.pushObject({key:i,amount:parseFloat(number.toFixed(2))}),subTotal+=parseFloat(number.toFixed(2));var remainder=parseFloat((total-subTotal).toFixed(2));if(remainder>0){var remainderCounter=remainder/.01;if(remainder>=.01)for(var j=0;j<remainderCounter.toFixed(0);j++)monthlyAmount[j].amount=parseFloat(eval(monthlyAmount[j].amount+.01).toFixed(2))}else monthlyAmount[monthlyAmount.length-1].amount=parseFloat(eval(monthlyAmount[monthlyAmount.length-1].amount+remainder).toFixed(2));return monthlyAmount},getCurrentCustomerNo:function(){return this.getCustomerProfileService().get("personalDetails.customerNo")},getListOfFinancialAccounts:function(){return this.getCustomerProfileService().get("currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account")},getSubscriptionAccount:function(e){return this._getJSON("AccountProfile/GetSubscriptionAccountId?customerId="+e)},hasGracePeriod:function(e,t){var a=moment(e,KomodoConfiguration.dateFormat);return!(moment(t,KomodoConfiguration.dateFormat).diff(a,"days")<KomodoConfiguration.finance.IPDayTolerance)},getDateForInvoice:function(e,t){var a=moment(e,KomodoConfiguration.dateFormat).daysInMonth(),o=moment(e,KomodoConfiguration.dateFormat).add(1,"months").date(1).subtract(1,"days"),n=moment(e,KomodoConfiguration.dateFormat),s=moment(n).format("DD");if(s>t&&s!=o){var r=moment(moment(e,KomodoConfiguration.dateFormat).format(t+"/MM/YYYY"),KomodoConfiguration.dateFormat);return moment(r.add(1,"months"),KomodoConfiguration.dateFormat)}return s<t&&a<t?moment(o):s<t&&a>=t?moment(moment(e,KomodoConfiguration.dateFormat).format(t+"/MM/YYYY"),KomodoConfiguration.dateFormat):e},getDueDates:function(e,t){var a=moment().format(KomodoConfiguration.dateFormat);this.get("installmentArray",new Ember.A),this.set("installmentArray",[]);for(var o=this,n=0;n<e;n++)if(0===n){var s=moment(moment().format(t+"/MM/YYYY"),KomodoConfiguration.dateFormat);o.hasGracePeriod(a,s)?(o.invoiceDate=o.getDateForInvoice(a,t),o.invoiceDate._isAMomentObject||(o.invoiceDate=moment().format(o.invoiceDate,KomodoConfiguration.dateFormat)),o.get("installmentArray").push(o.invoiceDate)):(o.invoiceDate=o.getDateForInvoice(moment(moment(a,KomodoConfiguration.dateFormat).add(1,"months").format("YYYY-MM-")+"01"),t),o.hasGracePeriod(a,o.invoiceDate)?(o.invoiceDate._isAMomentObject||(o.invoiceDate=moment().format(o.invoiceDate,KomodoConfiguration.dateFormat)),o.get("installmentArray").push(o.invoiceDate)):(o.invoiceDate=o.getDateForInvoice(moment(moment(o.invoiceDate,KomodoConfiguration.dateFormat).add(1,"months").format("YYYY-MM-")+"01"),t),o.invoiceDate._isAMomentObject||(o.invoiceDate=moment().format(o.invoiceDate,KomodoConfiguration.dateFormat)),o.get("installmentArray").push(o.invoiceDate)))}else o.invoiceDate=o.getDateForInvoice(moment(o.invoiceDate,KomodoConfiguration.dateFormat).add(1,"months"),t),o.get("installmentArray").push(o.invoiceDate);return o.get("installmentArray")},hasSelectedCustomer:function(){return void 0!=this.getCustomerProfileService().get("personalDetails.customerNo")},customerSelectionRequired:function(){return!this.hasSelectedCustomer()&&(Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:messages.customerRequiredTitle"),kl.value("locale.manageAccount.paymentPlan:messages.customerRequiredMessage"),Komodo.Controls.MessageBoxOkButtons,this,"customerRequired","default"),this.getUIService().transitionTo("home"),!0)}}),Komodo.Services.paymentPlanService=Komodo.Services.PaymentPlanService.create(),Ember.TEMPLATES.ArchivedFinancialTransactionsView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){return t.buffer.push("\r\n  "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"archiveFTModel.pendingRefundNotification",class:"retrieve-records"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function r(e,t){var o;return t.buffer.push("\r\n\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageaccount:archivedFinancialTransactions.listOfArchivedFinancialTransactions~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:e,isCollapsed:e},inverse:D.noop,fn:D.program(4,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function i(e,t){var o,n,s;return t.buffer.push("\r\n\r\n\r\n  "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:archivedFinancialTransactions.filterList~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n  <br/>\r\n  <table style="width:100%">\r\n    <tr>\r\n      \x3c!--From Date--\x3e\r\n      <td style="width:30%">\r\n        '),t.buffer.push(y(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{tabindex:"3",label:"~locale.manageaccount:archivedFinancialTransactions.fromDate~",valueBinding:"archiveFTModel.fromDate",validatorBinding:"validators.fromDateValidator",class:"info-heading"},hashTypes:{tabindex:"STRING",label:"STRING",valueBinding:"STRING",validatorBinding:"STRING",class:"STRING"},hashContexts:{tabindex:e,label:e,valueBinding:e,validatorBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n      \x3c!--To Date--\x3e\r\n      <td style="width:30%">\r\n        '),t.buffer.push(y(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{tabindex:"4",label:"~locale.manageaccount:archivedFinancialTransactions.toDate~",valueBinding:"archiveFTModel.toDate",validatorBinding:"validators.toDateValidator",class:"info-heading"},hashTypes:{tabindex:"STRING",label:"STRING",valueBinding:"STRING",validatorBinding:"STRING",class:"STRING"},hashContexts:{tabindex:e,label:e,valueBinding:e,validatorBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n      <td colspan="4">\r\n        <div style="float:right;">\r\n          '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"searchAFT"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:D.noop,fn:D.program(5,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"clearSearchParameters"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:D.noop,fn:D.program(7,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n        </div>\r\n      </td>\r\n    </tr>\r\n  </table>\r\n\r\n  <hr/>\r\n  <br/>\r\n  \r\n  \x3c!-- Grid --\x3e\r\n  <table id="financialTransactioInfo" class="table table-bordered komodo-datagrid">\r\n    <tbody>\r\n    <tr>\r\n      <th width="150px">'),t.buffer.push(y((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:archivedFinancialTransactions.creationDate",s):b.call(e,"loc","locale.manageaccount:archivedFinancialTransactions.creationDate",s)))),t.buffer.push('</th>\r\n      <th width="150px">'),t.buffer.push(y((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:archivedFinancialTransactions.smsAccount",s):b.call(e,"loc","locale.manageaccount:archivedFinancialTransactions.smsAccount",s)))),t.buffer.push('</th>\r\n      <th width="150px">'),t.buffer.push(y((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:archivedFinancialTransactions.billingRule",s):b.call(e,"loc","locale.manageaccount:archivedFinancialTransactions.billingRule",s)))),t.buffer.push('</th>\r\n      <th width="150px">'),t.buffer.push(y((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:archivedFinancialTransactions.periodFrom",s):b.call(e,"loc","locale.manageaccount:archivedFinancialTransactions.periodFrom",s)))),t.buffer.push('</th>\r\n      <th width="150px">'),t.buffer.push(y((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:archivedFinancialTransactions.periodTo",s):b.call(e,"loc","locale.manageaccount:archivedFinancialTransactions.periodTo",s)))),t.buffer.push('</th>\r\n      <th width="150px">'),t.buffer.push(y((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:archivedFinancialTransactions.amount",s):b.call(e,"loc","locale.manageaccount:archivedFinancialTransactions.amount",s)))),t.buffer.push('</th>\r\n      <th width="150px">'),t.buffer.push(y((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:archivedFinancialTransactions.runningTotal",s):b.call(e,"loc","locale.manageaccount:archivedFinancialTransactions.runningTotal",s)))),t.buffer.push('</th>\r\n      <th width="100px">'),t.buffer.push(y((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.manageaccount:archivedFinancialTransactions.actions",s):b.call(e,"loc","locale.manageaccount:archivedFinancialTransactions.actions",s)))),t.buffer.push("</th>\r\n    </tr>\r\n    "),o=a.each.call(e,"item","in","archiveFinancialTransactions",{hash:{},hashTypes:{},hashContexts:{},inverse:D.noop,fn:D.program(9,u,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </tbody>\r\n  </table>\r\n  "),o=a.if.call(e,"archiveFinancialTransactions",{hash:{},hashTypes:{},hashContexts:{},inverse:D.noop,fn:D.program(16,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),""}function l(e,t){var o,n;t.buffer.push(y((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:archivedFinancialTransactions.search",n):b.call(e,"loc","locale.manageaccount:archivedFinancialTransactions.search",n))))}function c(e,t){var o,n;t.buffer.push(y((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:archivedFinancialTransactions.clear",n):b.call(e,"loc","locale.manageaccount:archivedFinancialTransactions.clear",n))))}function u(e,t){var o;return t.buffer.push("\r\n    <tr>\r\n      "),o=a.with.call(e,"item",{hash:{},hashTypes:{},hashContexts:{},inverse:D.noop,fn:D.program(10,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      <td>\r\n        "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{tabindex:"4",contentBinding:"item",action:"ViewArchivedTransactions",size:"xs"},hashTypes:{tabindex:"STRING",contentBinding:"STRING",action:"STRING",size:"STRING"},hashContexts:{tabindex:e,contentBinding:e,action:e,size:e},inverse:D.noop,fn:D.program(12,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{tabindex:"5",contentBinding:"item",action:"reverseArchivedFinancialTransaction",size:"xs",class:"btn-danger",visibleBinding:"showReversal"},hashTypes:{tabindex:"STRING",contentBinding:"STRING",action:"STRING",size:"STRING",class:"STRING",visibleBinding:"STRING"},hashContexts:{tabindex:e,contentBinding:e,action:e,size:e,class:e,visibleBinding:e},inverse:D.noop,fn:D.program(14,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td>\r\n    </tr>\r\n      "),""}function d(e,t){var o;return t.buffer.push("\r\n      <td>"),o=a._triageMustache.call(e,"item.creationDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n      <td>"),o=a._triageMustache.call(e,"item.ledgerAccountDescription",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n      <td>"),o=a._triageMustache.call(e,"item.billingRuleDescription",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n      <td>"),o=a._triageMustache.call(e,"item.periodFrom",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n      <td>"),o=a._triageMustache.call(e,"item.periodTo",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n      <td style="text-align:right">'),o=a._triageMustache.call(e,"item.amount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n      <td style="text-align:right">'),o=a._triageMustache.call(e,"item.runningTotal",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n      <td style="display:none">'),o=a._triageMustache.call(e,"item.transactionNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n      "),""}function h(e,t){var o,n;t.buffer.push(y((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:archivedFinancialTransactions.view",n):b.call(e,"loc","locale.manageaccount:archivedFinancialTransactions.view",n))))}function m(e,t){var o,n;t.buffer.push(y((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageaccount:archivedFinancialTransactions.reverse",n):b.call(e,"loc","locale.manageaccount:archivedFinancialTransactions.reverse",n))))}function p(e,t){return t.buffer.push("\r\n\r\n  "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.TablePager",{hash:{mode:"virtual",contentLengthBinding:"contentLength",tableId:"financialTransactioInfo",contentBinding:"archiveFinancialTransactions",itemsPerPage:"10"},hashTypes:{mode:"STRING",contentLengthBinding:"STRING",tableId:"STRING",contentBinding:"STRING",itemsPerPage:"STRING"},hashContexts:{mode:e,contentLengthBinding:e,tableId:e,contentBinding:e,itemsPerPage:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var f,g,v,y=this.escapeExpression,b=a.helperMissing,D=this;return n.buffer.push("<div "),n.buffer.push(y(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:n}))),n.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),n.buffer.push(y((g=a.loc||t&&t.loc,v={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},g?g.call(t,"locale.manageaccount:archivedFinancialTransactions.archivedFinancialTransactionsTitle",v):b.call(t,"loc","locale.manageaccount:archivedFinancialTransactions.archivedFinancialTransactionsTitle",v)))),n.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/account">&lt;'),n.buffer.push(y((g=a.loc||t&&t.loc,v={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},g?g.call(t,"locale.manageaccount:archivedFinancialTransactions.back",v):b.call(t,"loc","locale.manageaccount:archivedFinancialTransactions.back",v)))),n.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n  \r\n  "),f=a.if.call(t,"archiveFTModel.disableArchiveReversalsButton",{hash:{},hashTypes:{},hashContexts:{},inverse:D.noop,fn:D.program(1,s,n),contexts:[t],types:["ID"],data:n}),(f||0===f)&&n.buffer.push(f),n.buffer.push("\r\n  \r\n  <br/>\r\n  "),f=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageaccount:archivedFinancialTransactions.archivedFinancialTransactionsTitle~"},hashTypes:{title:"STRING"},hashContexts:{title:t},inverse:D.noop,fn:D.program(3,r,n),contexts:[t],types:["ID"],data:n}),(f||0===f)&&n.buffer.push(f),n.buffer.push("\r\n\r\n</div>"),""}),Ember.TEMPLATES.AccountSupervisorApprovalView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o,n;return t.buffer.push("\r\n            "),t.buffer.push(d((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.editPaymentDetails:ahvSupervisorApproval.login",n):u.call(e,"loc","locale.manageAccount.editPaymentDetails:ahvSupervisorApproval.login",n)))),t.buffer.push("\r\n            "),""}function r(e,t){var o,n;return t.buffer.push("\r\n            "),t.buffer.push(d((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.editPaymentDetails:ahvSupervisorApproval.cancel",n):u.call(e,"loc","locale.manageAccount.editPaymentDetails:ahvSupervisorApproval.cancel",n)))),t.buffer.push("\r\n            "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var i,l,c,u=a.helperMissing,d=this.escapeExpression,h=this;return n.buffer.push('<table border="0" cellspacing="2" cellpadding="2" width="100%">\r\n    <tr>'),n.buffer.push(d((l=a.loc||t&&t.loc,c={hash:{class:"info-heading"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[t],types:["STRING"],data:n},l?l.call(t,"locale.manageAccount.editPaymentDetails:ahvSupervisorApproval.supervisorApproval",c):u.call(t,"loc","locale.manageAccount.editPaymentDetails:ahvSupervisorApproval.supervisorApproval",c)))),n.buffer.push('</tr>\r\n    <tr>\r\n        <td>\r\n            <fieldset>\r\n                <legend></legend>             \r\n                <table border="0" cellspacing="5" cellpadding="5" width="100%">                   \r\n                    <tr>\r\n                        <td style="padding-right:10px">\r\n                            '),n.buffer.push(d(a.view.call(t,"Komodo.Controls.TextField",{hash:{tabindex:"200",valueBinding:"data.supervisorUsername",label:"~locale.manageAccount.editPaymentDetails:ahvSupervisorApproval.supervisorName~",validatorBinding:"validators.supervisorUsernameValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:t,valueBinding:t,label:t,validatorBinding:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push("\r\n                        </td>\r\n                        <td>\r\n                            "),n.buffer.push(d(a.view.call(t,"Komodo.Controls.TextField",{hash:{type:"password",tabindex:"201",valueBinding:"data.password",label:"~locale.manageAccount.editPaymentDetails:ahvSupervisorApproval.password~",validatorBinding:"validators.passwordValidator"},hashTypes:{type:"STRING",tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{type:t,tabindex:t,valueBinding:t,label:t,validatorBinding:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push('\r\n                        </td>\r\n                    </tr>\r\n                </table>\r\n            </fieldset>\r\n        </td>\r\n    </tr>\r\n    <tr>\r\n        <td align="right">\r\n            '),i=a.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"202",action:"login",disabledBinding:"thisController.isLoginDisabled"},hashTypes:{tabindex:"STRING",action:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:t,action:t,disabledBinding:t},inverse:h.noop,fn:h.program(1,s,n),contexts:[t],types:["ID"],data:n}),(i||0===i)&&n.buffer.push(i),n.buffer.push("\r\n            "),i=a.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"203",action:"cancel"},hashTypes:{tabindex:"STRING",action:"STRING"},hashContexts:{tabindex:t,action:t},inverse:h.noop,fn:h.program(3,r,n),contexts:[t],types:["ID"],data:n}),(i||0===i)&&n.buffer.push(i),n.buffer.push("\r\n        </td>\r\n    </tr>\r\n</table>\r\n"),""}),Ember.TEMPLATES.ArchivedFinancialTransactionDetailsView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(2,r,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function r(e,t){var o;return t.buffer.push("\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:m.noop,fn:m.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:m.noop,fn:m.program(5,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),""}function i(e,t){return t.buffer.push("\r\n  \x3c!--Transaction Number--\x3e\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:archivedFinancialTransactions.transactionNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.transactionNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  \x3c!--Create Date--\x3e\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:archivedFinancialTransactions.createDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.createDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  \x3c!--Currency--\x3e\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:archivedFinancialTransactions.currency~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.currency"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  \x3c!--Period--\x3e\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:archivedFinancialTransactions.period~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.period"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  \x3c!--Paid for Customer--\x3e\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:archivedFinancialTransactions.paidForCustomer~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.paidforCustomer"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  \x3c!--PS Number--\x3e\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:archivedFinancialTransactions.psNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.psNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  \x3c!--SMS Account--\x3e\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:archivedFinancialTransactions.smsAccount~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.sMSAccount"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  \x3c!--Invoice Line--\x3e\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:archivedFinancialTransactions.invoiceLine~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.invoiceLine"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  \x3c!--Appeared on Invoice--\x3e\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:archivedFinancialTransactions.appearedOnInvoice~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.appearedonInvoice"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  \x3c!--Bank Date--\x3e\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:archivedFinancialTransactions.bankDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.bankDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),""}function l(e,t){return t.buffer.push("\r\n  \x3c!--Account Number--\x3e\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:archivedFinancialTransactions.accountNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.accountNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  \x3c!--Created By Event--\x3e\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:archivedFinancialTransactions.createdByEvent~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.createdByEvent"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  \x3c!--Amount--\x3e\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:archivedFinancialTransactions.amount~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.amount"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),
t.buffer.push("\r\n  <br/><br/>\r\n  \x3c!--Running Total--\x3e\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:archivedFinancialTransactions.runningTotal~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.runningTotal"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  \x3c!--Paid for Account--\x3e\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:archivedFinancialTransactions.paidForAccount~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.paidforAccount"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  \x3c!--Billing Rule--\x3e\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:archivedFinancialTransactions.billingRule~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.billingRuleDescription"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  \x3c!--Product--\x3e\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:archivedFinancialTransactions.product~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.product"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  \x3c!--Paid for Invoice--\x3e\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:archivedFinancialTransactions.paidForInvoice~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.paidForInvoice"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  \x3c!--Payment Reference--\x3e\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageaccount:archivedFinancialTransactions.paymentReference~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"financialTransactionDetailsModel.paymentReference"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var c,u,d,h=this.escapeExpression,m=this,p=a.helperMissing;return n.buffer.push("<div "),n.buffer.push(h(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:n}))),n.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),n.buffer.push(h((u=a.loc||t&&t.loc,d={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},u?u.call(t,"locale.manageaccount:archivedFinancialTransactions.archivedFinancialTransactionDetailsTitle",d):p.call(t,"loc","locale.manageaccount:archivedFinancialTransactions.archivedFinancialTransactionDetailsTitle",d)))),n.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/archivedFinancialTransactions">&lt;'),n.buffer.push(h((u=a.loc||t&&t.loc,d={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},u?u.call(t,"locale.manageaccount:viewAccountInformation.back",d):p.call(t,"loc","locale.manageaccount:viewAccountInformation.back",d)))),n.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n    <hr/>\r\n  </div>\r\n  "),c=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageaccount:archivedFinancialTransactions.transactionDetails~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:m.noop,fn:m.program(1,s,n),contexts:[t],types:["ID"],data:n}),(c||0===c)&&n.buffer.push(c),n.buffer.push("\r\n</div>"),""}),Ember.TEMPLATES.AllocateTransferView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o;return t.buffer.push("\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-lg-6"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:F.noop,fn:F.program(2,r,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-lg-6"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:F.noop,fn:F.program(4,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),""}function r(e,t){return t.buffer.push("\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.managePayments:allocPay.fromCustomer~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    <br />\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.managePayments:allocPay.customerNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"allocateTransferModel.customerNo"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    <br />\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"8",valueBinding:"allocateTransferModel.amount",label:"~locale.managePayments:allocPay.amount~",validatorBinding:"validators.amountValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function i(e,t){return t.buffer.push("\r\n    <br />\r\n    <br />\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.managePayments:allocPay.accountNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"allocateTransferModel.toAccountDescription"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    <br />\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"8",valueBinding:"allocateTransferModel.remainingFtFunds",label:"~locale.managePayments:allocPay.transferreableAmount~",readonly:!0,class:"info-heading"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",readonly:"BOOLEAN",class:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,readonly:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function l(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-lg-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:F.noop,fn:F.program(7,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-lg-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:F.noop,fn:F.program(9,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function c(e,t){return t.buffer.push("\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.managePayments:allocPay.toCustomerNo~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{contentBinding:"allocateTransferModel.searchByToCustomers",valueBinding:"allocateTransferModel.searchByToCustomer",displayPath:"title",valuePath:"value",label:"~locale.managePayments:allocPay.searchForCustomerBy~",orientation:"horizontal"},hashTypes:{contentBinding:"STRING",valueBinding:"STRING",displayPath:"STRING",valuePath:"STRING",label:"STRING",orientation:"STRING"},hashContexts:{contentBinding:e,valueBinding:e,displayPath:e,valuePath:e,label:e,orientation:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function u(e,t){var o;return t.buffer.push("\r\n    <br />\r\n    "),o=a.if.call(e,"allocateTransferModel.istoggleCustomer",{hash:{},hashTypes:{},hashContexts:{},inverse:F.noop,fn:F.program(10,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.if.call(e,"allocateTransferModel.istoggleSmartcard",{hash:{},hashTypes:{},hashContexts:{},inverse:F.noop,fn:F.program(14,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.if.call(e,"allocateTransferModel.istoggleID",{hash:{},hashTypes:{},hashContexts:{},inverse:F.noop,fn:F.program(17,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.if.call(e,"allocateTransferModel.istogglePassport",{hash:{},hashTypes:{},hashContexts:{},inverse:F.noop,fn:F.program(20,y,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.if.call(e,"allocateTransferModel.istoggleAccountNumber",{hash:{},hashTypes:{},hashContexts:{},inverse:F.noop,fn:F.program(23,D,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.if.call(e,"allocateTransferModel.istoggleInvoiceNumber",{hash:{},hashTypes:{},hashContexts:{},inverse:F.noop,fn:F.program(26,C,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.if.call(e,"allocateTransferModel.istoggleCellphone",{hash:{},hashTypes:{},hashContexts:{},inverse:F.noop,fn:F.program(29,x,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.if.call(e,"allocateTransferModel.istoggleDeviceNumber",{hash:{},hashTypes:{},hashContexts:{},inverse:F.noop,fn:F.program(32,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function d(e,t){var o;return t.buffer.push("\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"allocateTransferModel.searchTextName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.FormView",{hash:{action:"retrieveFA"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:F.noop,fn:F.program(11,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function h(e,t){var o;return t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{tabindex:"8",valueBinding:"allocateTransferModel.customerNumber",validatorBinding:"validators.customerNumberValidator",class:"info-heading"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",validatorBinding:"STRING",class:"STRING"},hashContexts:{tabindex:e,valueBinding:e,validatorBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{type:"success",action:"retrieveFA",size:"nextto-control"},hashTypes:{type:"STRING",action:"STRING",size:"STRING"},hashContexts:{type:e,action:e,size:e},inverse:F.noop,fn:F.program(12,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.customerNumberValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function m(e,t){var o,n;t.buffer.push(V((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.managePayments:allocPay.search",n):L.call(e,"loc","locale.managePayments:allocPay.search",n))))}function p(e,t){var o;return t.buffer.push("\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"allocateTransferModel.searchTextName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.FormView",{hash:{action:"retrieveFA"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:F.noop,fn:F.program(15,f,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function f(e,t){var o;return t.buffer.push("\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{tabindex:"8",valueBinding:"allocateTransferModel.smartcardNumber",validatorBinding:"validators.smartcardNumberValidator",class:"info-heading"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",validatorBinding:"STRING",class:"STRING"},hashContexts:{tabindex:e,valueBinding:e,validatorBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{type:"success",action:"retrieveFA",size:"nextto-control"},hashTypes:{type:"STRING",action:"STRING",size:"STRING"},hashContexts:{type:e,action:e,size:e},inverse:F.noop,fn:F.program(12,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.smartcardNumberValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function g(e,t){var o;return t.buffer.push("\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"allocateTransferModel.searchTextName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.FormView",{hash:{action:"retrieveFA"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:F.noop,fn:F.program(18,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function v(e,t){var o;return t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{tabindex:"8",valueBinding:"allocateTransferModel.idNumber",validatorBinding:"validators.idNumberValidator",class:"info-heading"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",validatorBinding:"STRING",class:"STRING"},hashContexts:{tabindex:e,valueBinding:e,validatorBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{type:"success",action:"retrieveFA",size:"nextto-control"},hashTypes:{type:"STRING",action:"STRING",size:"STRING"},hashContexts:{type:e,action:e,size:e},inverse:F.noop,fn:F.program(12,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.idNumberValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function y(e,t){var o;return t.buffer.push("\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"allocateTransferModel.searchTextName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.FormView",{hash:{action:"retrieveFA"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:F.noop,fn:F.program(21,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function b(e,t){var o;return t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{tabindex:"8",valueBinding:"allocateTransferModel.searchText",validatorBinding:"validators.searchTextValidator",class:"info-heading"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",validatorBinding:"STRING",class:"STRING"},hashContexts:{tabindex:e,valueBinding:e,validatorBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{type:"success",action:"retrieveFA",size:"nextto-control"},hashTypes:{type:"STRING",action:"STRING",size:"STRING"},hashContexts:{type:e,action:e,size:e},inverse:F.noop,fn:F.program(12,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.searchTextValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function D(e,t){var o;return t.buffer.push("\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"allocateTransferModel.searchTextName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.FormView",{hash:{action:"retrieveFA"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:F.noop,fn:F.program(24,T,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function T(e,t){var o;return t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{tabindex:"8",valueBinding:"allocateTransferModel.accountNumber2",validatorBinding:"validators.accountNumber2Validator",class:"info-heading"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",validatorBinding:"STRING",class:"STRING"},hashContexts:{tabindex:e,valueBinding:e,validatorBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{type:"success",action:"retrieveFA",size:"nextto-control"},hashTypes:{type:"STRING",action:"STRING",size:"STRING"},hashContexts:{type:e,action:e,size:e},inverse:F.noop,fn:F.program(12,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.accountNumber2Validator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function C(e,t){var o;return t.buffer.push("\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"allocateTransferModel.searchTextName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.FormView",{hash:{action:"retrieveFA"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:F.noop,fn:F.program(27,I,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function I(e,t){var o;return t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{tabindex:"8",valueBinding:"allocateTransferModel.invoiceNumber",validatorBinding:"validators.invoiceNumberValidator",class:"info-heading"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",validatorBinding:"STRING",class:"STRING"},hashContexts:{tabindex:e,valueBinding:e,validatorBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{type:"success",action:"retrieveFA",size:"nextto-control"},hashTypes:{type:"STRING",action:"STRING",size:"STRING"},hashContexts:{type:e,action:e,size:e},inverse:F.noop,fn:F.program(12,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.invoiceNumberValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function x(e,t){var o;return t.buffer.push("\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"allocateTransferModel.searchTextName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.FormView",{hash:{action:"retrieveFA"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:F.noop,fn:F.program(30,P,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function P(e,t){var o;return t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{class:"phone-code",tabindex:"8",value:"+27"},hashTypes:{class:"STRING",tabindex:"STRING",value:"STRING"},hashContexts:{class:e,tabindex:e,value:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{tabindex:"9",class:"phone-number",valueBinding:"allocateTransferModel.searchText",validatorBinding:"validators.searchTextValidator"},hashTypes:{tabindex:"STRING",class:"STRING",valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,class:e,valueBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{type:"success",action:"retrieveFA",size:"nextto-control"},hashTypes:{type:"STRING",action:"STRING",size:"STRING"},hashContexts:{type:e,action:e,size:e},inverse:F.noop,fn:F.program(12,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.searchTextValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function S(e,t){var o;return t.buffer.push("\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"allocateTransferModel.searchTextName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.FormView",{hash:{action:"retrieveFA"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:F.noop,fn:F.program(33,A,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function A(e,t){var o;return t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{tabindex:"8",valueBinding:"allocateTransferModel.deviceNumber",validatorBinding:"validators.deviceNumberValidator",class:"info-heading"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",validatorBinding:"STRING",class:"STRING"},hashContexts:{tabindex:e,valueBinding:e,validatorBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{type:"success",action:"retrieveFA",size:"nextto-control"},hashTypes:{type:"STRING",action:"STRING",size:"STRING"},hashContexts:{type:e,action:e,size:e},inverse:F.noop,fn:F.program(12,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.deviceNumberValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function N(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:F.noop,fn:F.program(36,B,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:F.noop,fn:F.program(41,w,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function B(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-lg-6"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:F.noop,fn:F.program(37,M,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-lg-6"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:F.noop,fn:F.program(39,R,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function M(e,t){return t.buffer.push("\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.managePayments:allocPay.customerNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"allocateTransferModel.custNo"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    <br />\r\n\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"10",valueBinding:"allocateTransferModel.toAccountNumber",contentBinding:"allocateTransferModel.accountNumberList",validatorBinding:"validators.toAccountNumberValidator",optionLabelPath:"content.Value",optionValuePath:"content.Key",label:"~locale.managePayments:allocPay.accounts~"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",contentBinding:"STRING",validatorBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",label:"STRING"},hashContexts:{tabindex:e,valueBinding:e,contentBinding:e,validatorBinding:e,optionLabelPath:e,optionValuePath:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function R(e,t){return t.buffer.push("\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.managePayments:allocPay.customerName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"allocateTransferModel.customerName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    <br />\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"10",valueBinding:"allocateTransferModel.reasonForCapture",contentBinding:"allocateTransferModel.reasonsForCapture",validatorBinding:"validators.reasonForCaptureValidator",optionLabelPath:"content.Value",optionValuePath:"content.Value",label:"~locale.manageaccount:refund.reasonForCapture~",prompt:"~locale.manageaccount:refund.reasonForCapturePrompt~"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",contentBinding:"STRING",validatorBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",label:"STRING",prompt:"STRING"},hashContexts:{tabindex:e,valueBinding:e,contentBinding:e,validatorBinding:e,optionLabelPath:e,optionValuePath:e,label:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),""}function w(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-lg-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:F.noop,fn:F.program(42,K,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function K(e,t){return t.buffer.push("\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.managePayments:allocPay.comment~",class:"info-heading",validatorBinding:"validators.commentValidator"},hashTypes:{text:"STRING",class:"STRING",validatorBinding:"STRING"},hashContexts:{text:e,class:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreTextArea",{hash:{valueBinding:"allocateTransferModel.comment",rows:"6",tabindex:"11",validatorBinding:"validators.commentValidator",disabledBinding:"istoggleComment",class:"textarea-large"},hashTypes:{valueBinding:"STRING",rows:"STRING",tabindex:"STRING",validatorBinding:"STRING",disabledBinding:"STRING",class:"STRING"},hashContexts:{valueBinding:e,rows:e,tabindex:e,validatorBinding:e,disabledBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(V(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.commentValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),""}function O(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-lg-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:F.noop,fn:F.program(45,G,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function G(e,t){var o;return t.buffer.push('\r\n    <div style="float: right">\r\n    '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{tabindex:"12",action:"transferPayment",visibleBinding:"allocateTransferModel.disableForViewOnlyUser"},hashTypes:{tabindex:"STRING",action:"STRING",visibleBinding:"STRING"},hashContexts:{tabindex:e,action:e,visibleBinding:e},inverse:F.noop,fn:F.program(46,k,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </div>\r\n    "),""}function k(e,t){var o,n;return t.buffer.push(V((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.managePayments:allocPay.transfer",n):L.call(e,"loc","locale.managePayments:allocPay.transfer",n)))),t.buffer.push("\r\n    "),
""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var E,V=this.escapeExpression,F=this,L=a.helperMissing;return n.buffer.push('<div class="modal-max-size">\r\n    '),E=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:F.noop,fn:F.program(1,s,n),contexts:[t],types:["ID"],data:n}),(E||0===E)&&n.buffer.push(E),n.buffer.push("\r\n    <hr />\r\n    <br />\r\n\r\n    \x3c!--To Customer--\x3e\r\n    "),E=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:F.noop,fn:F.program(6,l,n),contexts:[t],types:["ID"],data:n}),(E||0===E)&&n.buffer.push(E),n.buffer.push("\r\n\r\n    \x3c!--When search button is clicked--\x3e\r\n    "),E=a.if.call(t,"allocateTransferModel.isCustomerOrSmartcardNumber",{hash:{},hashTypes:{},hashContexts:{},inverse:F.noop,fn:F.program(35,N,n),contexts:[t],types:["ID"],data:n}),(E||0===E)&&n.buffer.push(E),n.buffer.push("\r\n\r\n    \x3c!--Collapsed Sreen 2 ends--\x3e\r\n    <br />\r\n    \x3c!--This is Transfer Payment Button--\x3e\r\n    "),E=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:F.noop,fn:F.program(44,O,n),contexts:[t],types:["ID"],data:n}),(E||0===E)&&n.buffer.push(E),n.buffer.push("\r\n\r\n</div>\r\n"),""}),Ember.TEMPLATES.AdhocDebitOrderView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o;return t.buffer.push("\r\n  \x3c!--Account Details DataGrid--\x3e\r\n  "),t.buffer.push(Z(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.adhocdebitorder:paymentDetail.paymentDetails~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:ee.noop,fn:ee.program(2,r,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <hr />\r\n  <br />\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:ee.noop,fn:ee.program(5,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),o=a.if.call(e,"isCommercialCustomer",{hash:{},hashTypes:{},hashContexts:{},inverse:ee.program(12,h,t),fn:ee.program(10,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:ee.noop,fn:ee.program(16,f,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n   "),o=a.if.call(e,"isAHVReson",{hash:{},hashTypes:{},hashContexts:{},inverse:ee.noop,fn:ee.program(21,y,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    \r\n  "),o=a.if.call(e,"isAHVOverrideAllowed",{hash:{},hashTypes:{},hashContexts:{},inverse:ee.noop,fn:ee.program(25,T,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),o=a.if.call(e,"isAHVOverrideAllowed",{hash:{},hashTypes:{},hashContexts:{},inverse:ee.noop,fn:ee.program(38,M,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:ee.noop,fn:ee.program(62,j,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),""}function r(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:ee.noop,fn:ee.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function i(e,t){return t.buffer.push("\r\n  "),t.buffer.push(Z(a.view.call(e,"Komodo.Controls.DataGrid",{hash:{tabindex:"0",canSort:!0,performsValidation:!0,canDelete:!1,canEdit:!1,editMode:"cell",canSelect:!1,contentBinding:"allAccounts",columnsBinding:"accdataGridColumns",showFooter:!0,footersBinding:"dataGridFooters",pageSize:10},hashTypes:{tabindex:"STRING",canSort:"BOOLEAN",performsValidation:"BOOLEAN",canDelete:"BOOLEAN",canEdit:"BOOLEAN",editMode:"STRING",canSelect:"BOOLEAN",contentBinding:"STRING",columnsBinding:"STRING",showFooter:"BOOLEAN",footersBinding:"STRING",pageSize:"INTEGER"},hashContexts:{tabindex:e,canSort:e,performsValidation:e,canDelete:e,canEdit:e,editMode:e,canSelect:e,contentBinding:e,columnsBinding:e,showFooter:e,footersBinding:e,pageSize:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function l(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:ee.noop,fn:ee.program(6,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:ee.noop,fn:ee.program(8,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function c(e,t){return t.buffer.push("\r\n  "),t.buffer.push(Z(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{contentBinding:"adhocDOrderModel.radioFinancialAccount",valueBinding:"adhocDOrderModel.selectRadioButtonValue",displayPath:"title",valuePath:"value",label:"~locale.manageAccount.adhocdebitorder:paymentDetail.selectPaymentDetails~",visibleBinding:"isVisibleSelectRadioButton"},hashTypes:{contentBinding:"STRING",valueBinding:"STRING",displayPath:"STRING",valuePath:"STRING",label:"STRING",visibleBinding:"STRING"},hashContexts:{contentBinding:e,valueBinding:e,displayPath:e,valuePath:e,label:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function u(e,t){return t.buffer.push("\r\n  "),t.buffer.push(Z(a.view.call(e,"Komodo.Controls.Select",{hash:{label:"~locale.manageAccount.adhocdebitorder:paymentDetail.accNumber~",contentBinding:"commercialAccNumbers",optionLabelPath:"content.value",optionValuePath:"content.key",valueBinding:"adhocDOrderModel.selectAccountNoValue",prompt:"~locale.manageAccount.adhocdebitorder:paymentDetail.selectFA~",visibleBinding:"isVisibleAccountNumbers"},hashTypes:{label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",valueBinding:"STRING",prompt:"STRING",visibleBinding:"STRING"},hashContexts:{label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,valueBinding:e,prompt:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function d(e,t){t.buffer.push("\r\n     <br />\r\n    ")}function h(e,t){var o;return t.buffer.push("\r\n   "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:ee.noop,fn:ee.program(13,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n   "),""}function m(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:ee.noop,fn:ee.program(14,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n   "),""}function p(e,t){return t.buffer.push("\r\n    "),t.buffer.push(Z(a.view.call(e,"Komodo.Controls.Checkbox",{hash:{valueBinding:"adhocDOrderModel.payerIsCustomer",label:"~locale.customer:customerInformation.customerPayer~",validatorBinding:"validators.payerIsCustomerValidator",disabledBinding:"isDisabledpayerIsCustomer"},hashTypes:{valueBinding:"STRING",label:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,label:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    \r\n    "),""}function f(e,t){var o;return t.buffer.push("\r\n   \r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:ee.noop,fn:ee.program(17,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:ee.noop,fn:ee.program(19,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),""}function g(e,t){var o;return t.buffer.push("\r\n\r\n  \x3c!--Amount--\x3e\r\n  "),t.buffer.push(Z(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"adhocDOrderModel.amount",tabindex:"1",label:"~locale.manageAccount.adhocdebitorder:paymentDetail.totalAmount~",validatorBinding:"validators.amountValidator",disabledBinding:"isAmountDisabled"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",label:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,tabindex:e,label:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  \r\n  \x3c!--Mobile Number--\x3e\r\n  "),t.buffer.push(Z(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"adhocDOrderModel.accountHolderPhoneNumber",tabindex:"3",label:"~locale.manageAccount.adhocdebitorder:paymentDetail.valMessagephoneNumber~",validatorBinding:"validators.accountHolderPhoneNumberValidator",disabledBinding:"ismobileNumberDisabled"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",label:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,tabindex:e,label:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  \x3c!--Account Holders Id/Passport Number--\x3e\r\n  "),t.buffer.push(Z(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"adhocDOrderModel.accountHolderId",tabindex:"5",label:"~locale.manageAccount.adhocdebitorder:paymentDetail.accountHolderId~",validatorBinding:"validators.accountHolderIdValidator",disabledBinding:"isaccountHolderIdEnabled"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",label:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,tabindex:e,label:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  \x3c!--Account Type--\x3e\r\n  "),t.buffer.push(Z(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"adhocDOrderModel.bankAccountType",tabindex:"7",label:"~locale.manageAccount.adhocdebitorder:paymentDetail.accountType~",contentBinding:"bankAccountTypes",optionLabelPath:"content.value",optionValuePath:"content.key",validatorBinding:"validators.bankAccountTypeValidator",prompt:" ",disabledBinding:"isbankAccountTypeEnabled"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",validatorBinding:"STRING",prompt:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,tabindex:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,validatorBinding:e,prompt:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  \x3c!--Branch Name--\x3e\r\n  "),t.buffer.push(Z(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"adhocDOrderModel.branchName",tabindex:"9",label:"~locale.manageAccount.adhocdebitorder:paymentDetail.branchName~",contentBinding:"bankBranches",optionLabelPath:"content.CanonicalValue",optionValuePath:"content.CanonicalKey",prompt:" ",validatorBinding:"validators.branchNameValidator",disabledBinding:"isbranchNameEnabled"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,tabindex:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  \x3c!--Scheduled Ad-hoc Date--\x3e\r\n  "),t.buffer.push(Z(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{valueBinding:"adhocDOrderModel.boundLowerDate",tabindex:"11",label:"~locale.manageAccount.adhocdebitorder:paymentDetail.scheduledAdhocDate~",validatorBinding:"validators.boundLowerDateValidator",disabledBinding:"isboundLowerDateEnabled"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",label:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,tabindex:e,label:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  \x3c!-- AHV Status --\x3e\r\n  "),t.buffer.push(Z(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.adhocdebitorder:general.ahvstatus~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <div "),t.buffer.push(Z(a["bind-attr"].call(e,{hash:{class:"adhocDOrderModel.isCompliant:ahv-compliant-label:ahv-noncompliant-label"},hashTypes:{class:"STRING"},hashContexts:{class:e},contexts:[],types:[],data:t}))),t.buffer.push("> \r\n  "),o=a._triageMustache.call(e,"adhocDOrderModel.ahvStatusMessage",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  </div> \r\n   \r\n  "),""}function v(e,t){return t.buffer.push("\r\n\r\n  \x3c!--Account Holders Name and Surname--\x3e\r\n  "),t.buffer.push(Z(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"adhocDOrderModel.accountHolderName",tabindex:"2",label:"~locale.manageAccount.adhocdebitorder:paymentDetail.accountHolderFullName~",validatorBinding:"validators.accountHolderNameValidator",disabledBinding:"isaccountHolderNameEnabled"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",label:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,tabindex:e,label:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  \x3c!--Account Holder Email Id--\x3e\r\n  "),t.buffer.push(Z(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"adhocDOrderModel.accountHolderEmailAddress",tabindex:"4",label:"~locale.manageAccount.adhocdebitorder:paymentDetail.accHolderEmailId~",validatorBinding:"validators.accountHolderEmailAddressValidator",disabledBinding:"isemailIdEnabled"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",label:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,tabindex:e,label:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  \x3c!--Bank--\x3e\r\n  "),t.buffer.push(Z(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"adhocDOrderModel.bankName",tabindex:"6",label:"~locale.manageAccount.adhocdebitorder:paymentDetail.bankName~",contentBinding:"banks",optionLabelPath:"content.CanonicalValue",optionValuePath:"content.CanonicalKey",prompt:" ",validatorBinding:"validators.bankNameValidator",disabledBinding:"isbankNameEnabled"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,tabindex:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  \x3c!--Account Number--\x3e\r\n  "),t.buffer.push(Z(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"adhocDOrderModel.accountNumber",tabindex:"8",label:"~locale.manageAccount.adhocdebitorder:paymentDetail.accountNumber~",validatorBinding:"validators.accountNumberValidator",disabledBinding:"isaccountNumberEnabled"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",label:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,tabindex:e,label:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  \x3c!--Branch Code --\x3e\r\n  "),t.buffer.push(Z(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"adhocDOrderModel.branchCode",tabindex:"10",label:"~locale.manageAccount.adhocdebitorder:paymentDetail.branchCode~",disabledBinding:"isbranchCodeEnabled"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",label:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,tabindex:e,label:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  "),""}function y(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:ee.noop,fn:ee.program(22,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n   "),""}function b(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:ee.noop,fn:ee.program(23,D,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function D(e,t){return t.buffer.push("   \r\n   <br />\r\n    "),t.buffer.push(Z(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.adhocdebitorder:general.ahvReason~",class:"ahv-reson-label"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n     "),t.buffer.push(Z(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"adhocDOrderModel.ahvRejectionReson"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function T(e,t){var o;return t.buffer.push("\r\n  <hr />\r\n  \x3c!--New Requirement AHV Override --\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:ee.noop,fn:ee.program(26,C,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function C(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:ee.noop,fn:ee.program(27,I,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function I(e,t){var o;return t.buffer.push("\r\n  "),t.buffer.push(Z(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.adhocdebitorder:general.supportdoc~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br /><br />\r\n  "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{id:"choosefiles",disabledBinding:"adhocDOrderModel.isChoosefilesEnable"},hashTypes:{id:"STRING",disabledBinding:"STRING"},hashContexts:{id:e,disabledBinding:e},inverse:ee.noop,fn:ee.program(28,x,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n  <div style="display:none">\r\n  '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{id:"uploadfiles",disabledBinding:"adhocDOrderModel.isUploadfilesEnable"},hashTypes:{id:"STRING",disabledBinding:"STRING"},hashContexts:{id:e,disabledBinding:e},inverse:ee.noop,fn:ee.program(30,P,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  </div>\r\n  <br /><br />\r\n  "),o=a.if.call(e,"overrideCustomerDocument.enableDocGrid",{hash:{},hashTypes:{},hashContexts:{},inverse:ee.noop,fn:ee.program(32,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    \r\n  "),""}function x(e,t){var o,n;t.buffer.push(Z((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.adhocdebitorder:general.addDocs",n):te.call(e,"loc","locale.manageAccount.adhocdebitorder:general.addDocs",n))))}function P(e,t){var o,n;t.buffer.push(Z((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.adhocdebitorder:general.uploadDocs",n):te.call(e,"loc","locale.manageAccount.adhocdebitorder:general.uploadDocs",n))))}function S(e,t){var o,n,s;return t.buffer.push('\r\n  <table width="100%" class="table table-bordered komodo-datagrid">\r\n    <thead>\r\n      <tr>\r\n        <th width="40%">'),t.buffer.push(Z((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"Document",s):te.call(e,"loc","Document",s)))),t.buffer.push('</th>\r\n        <th width="15%">'),t.buffer.push(Z((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"Document Type",s):te.call(e,"loc","Document Type",s)))),t.buffer.push('</th>\r\n        <th width="10%">'),t.buffer.push(Z((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"Size",s):te.call(e,"loc","Size",s)))),t.buffer.push('</th>\r\n        <th width="10%">'),t.buffer.push(Z((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"Percentage",s):te.call(e,"loc","Percentage",s)))),t.buffer.push('</th>\r\n        <th width="10%">'),t.buffer.push(Z((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"Status",s):te.call(e,"loc","Status",s)))),t.buffer.push('</th>\r\n        <th width="10%">'),t.buffer.push(Z((n=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"Action",s):te.call(e,"loc","Action",s)))),t.buffer.push("</th>\r\n      </tr>\r\n    </thead>\r\n    "),o=a.each.call(e,"row","in","overrideCustomerDocument.customerDocuments",{hash:{},hashTypes:{},hashContexts:{},inverse:ee.noop,fn:ee.program(33,A,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  </table>\r\n  "),""}function A(e,t){var o;return t.buffer.push("\r\n    <tbody>\r\n      <tr>\r\n        <td>\r\n          "),t.buffer.push(Z(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"row.documentName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),t.buffer.push(Z(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{valueBinding:"row.documentType",contentBinding:"row.documentTypes",optionLabelPath:"content.value",optionValuePath:"content.value",tabindex:"20",class:"komodo-grid-edit"},hashTypes:{valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",tabindex:"STRING",class:"STRING"},hashContexts:{valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,tabindex:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),o=a._triageMustache.call(e,"row.documentSize",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),o=a._triageMustache.call(e,"row.uploadPercentage",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),o=a._triageMustache.call(e,"row.uploadStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"viewDocument",size:"xs"},hashTypes:{action:"STRING",size:"STRING"},hashContexts:{action:e,size:e},inverse:ee.noop,fn:ee.program(34,N,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"removeDocument",size:"xs",type:"danger"},hashTypes:{action:"STRING",size:"STRING",type:"STRING"},hashContexts:{action:e,size:e,type:e},inverse:ee.noop,fn:ee.program(36,B,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n    "),""}function N(e,t){var o,n;return t.buffer.push("\r\n          "),t.buffer.push(Z((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.adhocdebitorder:general.viewDocument",n):te.call(e,"loc","locale.manageAccount.adhocdebitorder:general.viewDocument",n)))),t.buffer.push("\r\n          "),""}function B(e,t){var o,n;return t.buffer.push(" \r\n          "),t.buffer.push(Z((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.adhocdebitorder:general.deleteDocument",n):te.call(e,"loc","locale.manageAccount.adhocdebitorder:general.deleteDocument",n)))),t.buffer.push("\r\n          "),""}function M(e,t){var o;return t.buffer.push("\r\n\t<hr/>\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:ee.noop,fn:ee.program(39,R,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    <br/>\r\n    <br/>\r\n\t"),o=a.if.call(e,"isAuthenticated",{hash:{},hashTypes:{},hashContexts:{},inverse:ee.program(52,F,t),fn:ee.program(42,K,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\t<br/>\r\n\t<br/>\r\n    "),""}function R(e,t){var o;return t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:ee.noop,fn:ee.program(40,w,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function w(e,t){return t.buffer.push("\r\n\t        "),t.buffer.push(Z(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.adhocdebitorder:general.supervisorAuthentication~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),""}function K(e,t){var o;return t.buffer.push("\r\n\t\t"),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:ee.noop,fn:ee.program(43,O,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n\t\t<br/>\r\n\t\t<div style="float:right;">\r\n\t\t\t'),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"overrideAHV",tabindex:"602",disableBinding:"disableOverrideAHV"},hashTypes:{action:"STRING",tabindex:"STRING",disableBinding:"STRING"},hashContexts:{action:e,tabindex:e,disableBinding:e},inverse:ee.noop,fn:ee.program(48,E,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\t\t\t"),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"rejectAHV",tabindex:"603",type:"danger"},hashTypes:{action:"STRING",tabindex:"STRING",type:"STRING"},hashContexts:{action:e,tabindex:e,type:e},inverse:ee.noop,fn:ee.program(50,V,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\t\t</div>\r\n\t"),""}function O(e,t){var o;return t.buffer.push("\r\n\t\t"),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:ee.noop,fn:ee.program(44,G,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\t\t"),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:ee.noop,fn:ee.program(46,k,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\t\t"),""}function G(e,t){return t.buffer.push("\r\n\t\t\t"),t.buffer.push(Z(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.adhocdebitorder:general.supervisorName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\t\t\t<br/>\r\n\t\t\t"),t.buffer.push(Z(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"supervisonrUserName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\t\t\t<br/>\r\n\t\t"),""}function k(e,t){return t.buffer.push("\r\n\t\t\t"),t.buffer.push(Z(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"ahvOverrideModel.acceptDocumentation",tabindex:"601"},hashTypes:{checkedBinding:"STRING",tabindex:"STRING"},hashContexts:{checkedBinding:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(Z(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.adhocdebitorder:general.acceptDocumentation~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\t\t"),""}function E(e,t){var o,n;t.buffer.push(Z((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.adhocdebitorder:general.overrideAHV",n):te.call(e,"loc","locale.manageAccount.adhocdebitorder:general.overrideAHV",n))))}function V(e,t){var o,n;t.buffer.push(Z((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.adhocdebitorder:general.rejectAHV",n):te.call(e,"loc","locale.manageAccount.adhocdebitorder:general.rejectAHV",n))))}function F(e,t){var o;return t.buffer.push("\r\n\t\t"),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:ee.noop,fn:ee.program(53,L,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n\t\t<br/>\r\n\t\t<div style="float:right;">\r\n\t\t\t'),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"authenticate",tabindex:"606"},hashTypes:{action:"STRING",tabindex:"STRING"},hashContexts:{action:e,tabindex:e},inverse:ee.noop,fn:ee.program(58,_,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\t\t\t"),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"clear",tabindex:"607",type:"inverse"},hashTypes:{action:"STRING",tabindex:"STRING",type:"STRING"},hashContexts:{action:e,tabindex:e,type:e},inverse:ee.noop,fn:ee.program(60,q,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\t\t</div>\r\n\t"),""}function L(e,t){var o;return t.buffer.push("\r\n\t\t"),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:ee.noop,fn:ee.program(54,U,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\t\t"),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:ee.noop,fn:ee.program(56,H,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\t\t"),""}function U(e,t){return t.buffer.push("\r\n\t\t\t"),t.buffer.push(Z(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"604",valueBinding:"ahvOverrideModel.ahvSupervisorUserName",label:"~locale.manageAccount.adhocdebitorder:general.supervisorUsername~",validatorBinding:"validators.ahvSupervisorUserNameValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\t\t"),""}function H(e,t){return t.buffer.push("\r\n\t\t\t"),t.buffer.push(Z(a.view.call(e,"Komodo.Controls.TextField",{hash:{type:"password",tabindex:"605",valueBinding:"ahvOverrideModel.passCode",
label:"~locale.manageAccount.adhocdebitorder:general.supervisorpassword~",validatorBinding:"validators.passCodeValidator"},hashTypes:{type:"STRING",tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{type:e,tabindex:e,valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\t\t"),""}function _(e,t){var o,n;t.buffer.push(Z((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.adhocdebitorder:general.authenticate",n):te.call(e,"loc","locale.manageAccount.adhocdebitorder:general.authenticate",n))))}function q(e,t){var o,n;t.buffer.push(Z((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.adhocdebitorder:general.clear",n):te.call(e,"loc","locale.manageAccount.adhocdebitorder:general.clear",n))))}function j(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:ee.noop,fn:ee.program(63,J,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function J(e,t){var o;return t.buffer.push("\r\n \r\n  "),o=a.if.call(e,"adhocDOrderModel.busyIndicator",{hash:{},hashTypes:{},hashContexts:{},inverse:ee.noop,fn:ee.program(64,Q,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function Q(e,t){t.buffer.push("\r\n  <div style=\"float:right;\">\r\n    <img src='Content/Images/busy-indicator.svg' />\r\n  </div>\r\n  ")}function z(e,t){var o,n;t.buffer.push(Z((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.adhocdebitorder:paymentDetail.saveDetails",n):te.call(e,"loc","locale.manageAccount.adhocdebitorder:paymentDetail.saveDetails",n))))}function $(e,t){var o,n;t.buffer.push(Z((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageAccount.adhocdebitorder:general.cancelButton",n):te.call(e,"loc","locale.manageAccount.adhocdebitorder:general.cancelButton",n))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var Y,W,X,Z=this.escapeExpression,ee=this,te=a.helperMissing;return n.buffer.push("<div "),n.buffer.push(Z(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:n}))),n.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),n.buffer.push(Z((W=a.loc||t&&t.loc,X={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},W?W.call(t,"locale.manageAccount.adhocdebitorder:general.moduleTitle",X):te.call(t,"loc","locale.manageAccount.adhocdebitorder:general.moduleTitle",X)))),n.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/account">&lt;'),n.buffer.push(Z((W=a.loc||t&&t.loc,X={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},W?W.call(t,"locale.manageAccount.adhocdebitorder:general.backLink",X):te.call(t,"loc","locale.manageAccount.adhocdebitorder:general.backLink",X)))),n.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr />\r\n\r\n  "),Y=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageAccount.adhocdebitorder:paymentDetail.debitOrderDetails~",visibleBinding:"isAccountDataAvailable"},hashTypes:{title:"STRING",visibleBinding:"STRING"},hashContexts:{title:t,visibleBinding:t},inverse:ee.noop,fn:ee.program(1,s,n),contexts:[t],types:["ID"],data:n}),(Y||0===Y)&&n.buffer.push(Y),n.buffer.push('\r\n    \r\n    <br />\r\n    <br />\r\n  <div style="float:right;">\r\n    '),Y=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"submitPayementDetail",contentBinding:"adhocDOrderModel",disabledBinding:"adhocDOrderModel.isSaveButtonDisabled",visibleBinding:"isAccountDataAvailable",tabindex:"10"},hashTypes:{action:"STRING",contentBinding:"STRING",disabledBinding:"STRING",visibleBinding:"STRING",tabindex:"STRING"},hashContexts:{action:t,contentBinding:t,disabledBinding:t,visibleBinding:t,tabindex:t},inverse:ee.noop,fn:ee.program(66,z,n),contexts:[t],types:["ID"],data:n}),(Y||0===Y)&&n.buffer.push(Y),n.buffer.push("\r\n    "),Y=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"cancelAction",contentBinding:"adhocDOrderModel",class:"btn-inverse",visibleBinding:"isAccountDataAvailable"},hashTypes:{action:"STRING",contentBinding:"STRING",class:"STRING",visibleBinding:"STRING"},hashContexts:{action:t,contentBinding:t,class:t,visibleBinding:t},inverse:ee.noop,fn:ee.program(68,$,n),contexts:[t],types:["ID"],data:n}),(Y||0===Y)&&n.buffer.push(Y),n.buffer.push("\r\n  </div>\r\n  "),n.buffer.push(Z(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.adhocdebitorder:paymentDetail.serviceNoDataMessage~",visibleBinding:"noAccountExist"},hashTypes:{text:"STRING",visibleBinding:"STRING"},hashContexts:{text:t,visibleBinding:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push("\r\n  <br />\r\n</div>"),""}),Ember.TEMPLATES.AdhocDebitOrderUnblockView=Ember.Handlebars.template(function(e,t,a,o,n){function s(e,t){var o,n;return t.buffer.push("\r\n      "),t.buffer.push(c((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"Unblock",n):l.call(e,"loc","Unblock",n)))),t.buffer.push("\r\n      "),""}function r(e,t){var o,n;return t.buffer.push("\r\n      "),t.buffer.push(c((o=a.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"Cancel",n):l.call(e,"loc","Cancel",n)))),t.buffer.push("\r\n      "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),n=n||{};var i,l=a.helperMissing,c=this.escapeExpression,u=this;return n.buffer.push('<table border="0" cellSpacing="2" cellPadding="2" width="100%">\r\n  <tr>\r\n    <td>\r\n      <fieldset>\r\n        '),n.buffer.push(c(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.adhocdebitorder:general.unblockTitle~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:t,class:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push('\r\n        <hr />\r\n        <table border="0" cellSpacing="5" cellPadding="5" width="100%">\r\n            <tr>\r\n                <td style="padding-right:10px">\r\n                    '),n.buffer.push(c(a.view.call(t,"Komodo.Controls.TextField",{hash:{tabindex:"200",valueBinding:"data.supervisorUsername",label:"~locale.manageAccount.adhocdebitorder:general.supervisorName~",validatorBinding:"view.context.validators.supervisorUsernameValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:t,valueBinding:t,label:t,validatorBinding:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push("\r\n                </td>\r\n                <td>\r\n                    "),n.buffer.push(c(a.view.call(t,"Komodo.Controls.TextField",{hash:{type:"password",tabindex:"201",valueBinding:"data.passCode",label:"~locale.manageAccount.adhocdebitorder:general.passCode~",validatorBinding:"view.context.validators.passCodeValidator"},hashTypes:{type:"STRING",tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{type:t,tabindex:t,valueBinding:t,label:t,validatorBinding:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push('\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td colspan="2">\r\n                    '),n.buffer.push(c(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageAccount.adhocdebitorder:general.comment~",validatorBinding:"view.context.validators.commentValidator"},hashTypes:{text:"STRING",validatorBinding:"STRING"},hashContexts:{text:t,validatorBinding:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push("<br/>\r\n                    "),n.buffer.push(c(a.view.call(t,"Komodo.Controls.CoreTextArea",{hash:{tabindex:"202",valueBinding:"data.comment",validatorBinding:"view.context.validators.commentValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:t,valueBinding:t,validatorBinding:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push("<br/>\r\n\t                "),n.buffer.push(c(a.view.call(t,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"view.context.validators.commentValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push('\r\n                </td>\r\n            </tr>\r\n        </table>\r\n      </fieldset>\r\n    </td>\r\n  </tr>\r\n  <tr>\r\n    <td align="right">\r\n      '),i=a.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"203",action:"unblock",disabledBinding:"view.context.data.disableAction"},hashTypes:{tabindex:"STRING",action:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:t,action:t,disabledBinding:t},inverse:u.noop,fn:u.program(1,s,n),contexts:[t],types:["ID"],data:n}),(i||0===i)&&n.buffer.push(i),n.buffer.push("\r\n      "),i=a.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"204",action:"cancel"},hashTypes:{tabindex:"STRING",action:"STRING"},hashContexts:{tabindex:t,action:t},inverse:u.noop,fn:u.program(3,r,n),contexts:[t],types:["ID"],data:n}),(i||0===i)&&n.buffer.push(i),n.buffer.push("\r\n    </td>\r\n  </tr>\r\n</table>\r\n"),""}),Komodo.Application.RefundTransactionController=Komodo.UI.Controller.extend({customerNumber:0,accountNumber:0,amount:0,localeRefund:"locale.manageaccount:refund.",init:function(){Komodo.log("Constructing Refund Financial Transactions Controller"),this.set("processVersion","v1.1"),this.set("processName","Refund Financial Transactions"),this.requiresDependency("_clarityConstantService",{singleton:Komodo.Services.clarityConstantService}),this._super()},start:function(){this.removeObserver("refundTransModel.isAccountHolder"),this.set("disableReasonForRejectionDropDown",!1),this.registerModel("refundsCustomerDocument",Komodo.Models.RefundsCustomerDocumentModel),this.registerModel("refundTransModel",Komodo.Models.RefundTransactionModel),this.refundTransModel.set("country",this.getCountry()),this.refundTransModel.set("countryDesc",this.getCountryDesc());var e=this.get("model").queryParams;this.refundTransModel.set("customerNumber",e.customerNumber),this.refundTransModel.set("accountNumber",e.accountNumber),this.refundTransModel.set("balance",e.amount),this.refundTransModel.set("customerClass",e.customerClass),this.refundTransModel.set("customerStatus",e.customerStatus),this.refundTransModel.set("paymentDetails",e.paymentDetails),this.refundTransModel.set("Overridden",!1);var t=Komodo.Services.customerProfileService.personalDetails;this.refundTransModel.set("personalDetails",t),this.addObserver("refundTransModel.isAccountHolder",this.checkAccountholder),1==this.refundTransModel.get("paymentDetails").MethodOfPaymentId&&this.refundTransModel.set("isAccountHolder",!0),this.getServerDateTime(),this.setBankName(),this.getAHVBank(),this.getJournalCaptureReasons(),this.listenToMOP(),this.registerValidation(),this._super()},getCountry:function(){return Komodo.Services.uiService.getController("application").get("_selectedCountryId")},getCountryDesc:function(){return Komodo.Services.uiService.getController("application").get("_selectedCountryDescription")},getClarityConstantService:function(){return Komodo.Services.clarityConstantService},registerValidation:function(){var e=this;"1"==e.refundTransModel.get("customerClass")?(e.registerValidator(e.get("refundTransModel"),"name",{type:"string",isRequired:!0,displayName:"Company Name"}),e.registerValidator(e.get("refundTransModel"),"idNumber",{type:"string",isRequired:!0,displayName:"Company Registration Number"})):(e.registerValidator(e.get("refundTransModel"),"name",{type:"string",isRequired:!0,minLength:3,maxLength:61,functions:Komodo.UI.Validators.firstNameAndLastNameValidator,displayName:"Account Holder Name and Surname"}),e.registerValidator(e.get("refundTransModel"),"idNumber",{type:"string",isRequired:!0,minLength:8,maxLength:13,displayName:"Id number"})),e.registerValidator(e.get("refundTransModel"),"bankName",{isRequired:!0,displayName:"Bank Name"}),e.registerValidator(e.get("refundTransModel"),"amount",{limitValueToType:!0,type:"number",isRequired:!0,displayName:"Amount"}),e.registerValidator(e.get("refundTransModel"),"bankaccountNumber",{limitValueToType:!0,type:"number",minlength:5,maxLength:34,isRequired:!0,functions:Komodo.UI.Validators.numericValidator,displayName:"Bank Account Number"}),e.registerValidator(e.get("refundTransModel"),"branchCode",{limitValueToType:!0,type:"number",isRequired:!0,displayName:"Branch Code"}),e.registerValidator(e.get("refundTransModel"),"bankAccountType",{isRequired:!0,displayName:"Bank Account Type"}),e.registerValidator(e.get("refundTransModel"),"branchName",{isRequired:!0,displayName:"Branch Name"}),e.registerValidator(e.get("refundTransModel"),"reasonForCapture",{isRequired:!0,displayName:"Reason for capture"}),e.registerValidator(e.get("refundTransModel"),"username",{isRequired:!0,displayName:"Supervisor Username"}),e.registerValidator(e.get("refundTransModel"),"password",{isRequired:!0,displayName:"Supervisor Password"}),e.registerValidator(e.get("refundTransModel"),"emailAddress",{displayName:"Email Address"}),e.registerValidator(e.get("refundTransModel"),"phoneNumber",{displayName:"Phone Number"}),e.registerValidator(e.get("refundTransModel"),"comment",{isRequired:!0,displayName:kl.value(this.localeRefund+"comment"),maxLength:420})},setBankName:function(){var e=this,t=e.get("refundTransModel");t.get("bankNames").clear(),Komodo.Services.cachedDataService.fetch("BankDetail").done(function(a){var o=JSON.parse(a);$.each(o.Banks.Bank,function(e,a){t.get("bankNames").addObject(a)}),e.setBankAccountTypes()}).fail(function(){Komodo.UI.error("[ERROR] : could not retrieve Bank name from CDM")})},setBankAccountTypes:function(){var e=this,t=e.get("refundTransModel");t.get("bankAccountTypes").clear(),Komodo.Services.cachedDataService.fetch("BankAccountType").done(function(a){$.each(a,function(e,a){t.get("bankAccountTypes").addObject(a)}),e.setMethodOfPayment()}).fail(function(){Komodo.UI.error("[ERROR] : could not retrieve bank account type from CDM")})},setMethodOfPayment:function(){var e=this,t=e.get("refundTransModel");t.get("methodOfPayments").clear(),Komodo.Services.cachedDataService.fetch("MethodOfPayment").done(function(e){$.each(e,function(e,a){t.get("methodOfPayments").addObject(a)})}).fail(function(){Komodo.UI.error("[ERROR] : could not retrieve method of payment from CDM")})},bankChanged:function(){var e=this,t=e.get("refundTransModel");if(t.get("branchNames").clear(),t.get("bankName")){$.each(t.get("bankNames"),function(a,o){o.CanonicalValue===t.get("bankName")&&(e.set("validationBank",o.CanonicalKey),o.Branches&&o.Branches.Branch&&($.isArray(o.Branches.Branch)?$.each(o.Branches.Branch,function(e,a){t.get("branchNames").addObject(a)}):t.get("branchNames").addObject(o.Branches.Branch)))});t.bigSevenbanks.findBy("key",e.get("validationBank"))&&"1"!=t.get("customerClass")&&"4"!=t.get("customerClass")&&t.get("isAccountHolder")?(t.set("enableAHVStatus",!0),t.set("showAHVButton",!0),t.set("disableAHVRealtime",!1)):(t.set("showAHVButton",!1),t.set("disableAHVRealtime",!0))}}.observes("refundTransModel.bankName"),branchChanged:function(){var e=this,t=e.get("refundTransModel");t.set("branchCode",void 0),t.get("branchName")&&$.each(t.get("branchNames"),function(e,a){t.get("branchName")==a.CanonicalKey&&t.set("branchCode",a.BranchCode)})}.observes("refundTransModel.branchName"),getAHVBank:function(){var e=this,t=e.get("refundTransModel");t.get("bigSevenbanks").clear(),Komodo.Services.cachedDataService.fetch("AHVSupportedBanks").done(function(e){var a=e;$.each(a,function(e,a){t.get("bigSevenbanks").addObject(a)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve AHV Supported banks")})},getJournalCaptureReasons:function(){var e=this,t=e.get("refundTransModel");t.get("reasonsForCapture").clear(),Komodo.Services.cachedDataService.fetch("RefundCaptureReason").done(function(a){var o,n=JSON.parse(a);o=t.customerStatus&&"deceased"===t.customerStatus.toLowerCase()?n.RefundCaptureReasons.RefundCaptureReason.filter(function(e){return-1!==e.CanonicalValue.toLowerCase().indexOf("deceased")}):n.RefundCaptureReasons.RefundCaptureReason.filter(function(e){return-1===e.CanonicalValue.toLowerCase().indexOf("deceased")}),o.forEach(function(e){var a={Key:e.CanonicalKey,Value:e.CanonicalValue};t.reasonsForCapture.push(a)}),1==t.reasonsForCapture.length&&(e.set("disableReasonForRejectionDropDown",!0),t.set("reasonForCapture",t.reasonsForCapture[0].Value))}).fail(function(){Komodo.UI.error("[ERROR] : could not retrieve Refund Capture reasons from CDM")})},getRefundDocumentsType:function(e){var t=this,a=t.get("refundTransModel");a.get("documentTypes").clear(),a.get("documentChecklist").clear(),t.getClarityConstantService().fetchConstantValue("ManageAccountConstants","customerTypesConstant.RefundDocumentType."+e).done(function(e){$.each(e,function(e,t){var o={key:t,value:t};a.get("documentTypes").push(o),a.get("documentChecklist").push(o.value)})}).fail(function(e){Komodo.UI.error(e)})},getRefundDocumentType:function(e){var t,a=this;return a.getClarityConstantService().fetchConstantValue("ManageAccountConstants","customerTypesConstant.RefundDocumentType."+e).done(function(e){t=e[0]}).fail(function(e){Komodo.UI.error(e)}),t},getlistOfTax:function(){return Komodo.Models.Tax.create()},getCurrentUsername:function(){return Komodo.Services.securityService.get("domainUserName")},getServerDateTime:function(){var e=this,t=e.get("refundTransModel");Komodo.Services.queryService.getJSON("ServerDateTime/GetServerDateTime",{async:!1}).done(function(e){t.set("iccDateTime",void 0),t.set("iccDateTime",e);var a=new Date(t.get("iccDateTime")),o=new moment(a).format("YYYY-MM-DD");t.set("iccDate",o)}).error(function(t){var a=t.responseJSON.Message||t.responseJSON;Komodo.Controls.MessageBoxController.show(kl.value(e.localeRefund+"ajaxServerDateTime"),a,Komodo.Controls.MessageBoxOkButtons,that,"message","warning")})},toTitleCase:function(e){return e.replace(/\b\w+/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},checkAccountholder:function(){var e=this,t=e.get("refundTransModel");if("Deceased"!==t.customerStatus&&void 0!==t.customerStatus&&"1"!=t.get("customerClass")&&"4"!=t.get("customerClass"))if(t.get("isAccountHolder")){t.set("name",t.get("personalDetails").firstName+" "+t.get("personalDetails").lastName),t.set("idNumber",t.get("personalDetails").idNo),t.set("emailAddress",t.get("personalDetails").email),t.set("phoneNumber",t.get("personalDetails").mobileNo),t.set("cash",!0),t.set("thirdParty",!1),t.set("deceased",!1),t.set("disableAHVRealtime",!1),t.set("disableNameAndSurname",!0),e.getRefundDocumentsType("cash");var a=t.bigSevenbanks.findBy("key",t.get("bankName"));a&&t.set("showAHVButton",!0)}else t.set("name",void 0),t.set("idNumber",void 0),t.set("emailAddress",void 0),t.set("phoneNumber",void 0),t.set("cash",!1),t.set("thirdParty",!0),t.set("deceased",!1),t.set("showAHVButton",!1),t.set("disableAHVRealtime",!0),t.set("disableNameAndSurname",!1),e.getRefundDocumentsType("3rdParty")},listenToMOP:function(){var e=this,t=e.get("refundTransModel");"Deceased"===t.customerStatus?(t.set("deceased",!0),t.set("showAccountholderToggle",!1),t.set("enableDocuments",!0),t.set("invoiceProfileDay",t.get("paymentDetails").DebitOrderDay),e.getRefundDocumentsType("Deceased"),t.set("letterFromExecutor",e.getRefundDocumentType("letterFromExecutor")),t.set("letterOfAuthority",e.getRefundDocumentType("letterOfAuthority")),t.set("affidavit",e.getRefundDocumentType("affidavit")),t.set("disableNameAndSurname",!1)):1==t.get("paymentDetails").MethodOfPaymentId?(t.set("invoiceProfileDay",t.get("paymentDetails").DebitOrderDay),"1"==t.get("customerClass")||"4"==t.get("customerClass")?(t.set("showAccountholderToggle",!1),e.getRefundDocumentsType("Commercial"),t.set("commercial",!0)):(t.set("showAccountholderToggle",!0),t.set("commercial",!1)),t.set("setEntryBankDetails",!1),t.set("disableNameAndSurname",!1),t.set("emailandPhoneNumber",!1),t.set("enableDocuments",!0)):(t.set("showAccountholderToggle",!1),t.set("nameAndSurname",t.get("paymentDetails").PayerName),t.set("name",t.get("paymentDetails").PayerName),t.set("idNumber",t.get("paymentDetails").PayerIdNumber),t.set("emailAddress",t.get("paymentDetails").PayerEmail),t.set("phoneNumber",t.get("paymentDetails").PayerPhoneNumber),t.set("bankName",t.bankNames.findBy("CanonicalKey",t.get("paymentDetails").BankCode).CanonicalValue),t.set("branchName",t.branchNames.findBy("BranchCode",t.get("paymentDetails").BankBranchId).CanonicalKey),t.set("bankAccountType",t.bankAccountTypes.findBy("value",t.get("paymentDetails").BankAccountTypeDescription).value),t.set("bankaccountNumber",t.get("paymentDetails").BankAccountNumber),t.set("invoiceProfileDay",t.get("paymentDetails").DebitOrderDay),t.set("ahvStatus",t.get("paymentDetails").AHVStatus),t.set("setEntryBankDetails",!0),t.set("disableNameAndSurname",!0),t.set("emailandPhoneNumber",!0),t.set("enableAHVStatus",!0),t.set("isCompliant",!0),t.set("disableAHVRealtime",!0),t.set("enableDocuments",!1),t.set("showAHVButton",!1),t.set("debitOrder",!0))},dataURItoBlob:function(e){for(var t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],o=new ArrayBuffer(t.length),n=new Uint8Array(o),s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return new Blob([o],{type:a})},validationPipline:function(){var e,t=this,a=t.get("refundTransModel");if(t.set("validatingRefundsInput",[]),a.refundsFlow){a.get("amount")||t.get("validatingRefundsInput").push("\n"+kl.value(t.localeRefund+"amountRequired"));var o=parseFloat(a.get("balance"))-2*parseFloat(a.get("balance"));parseFloat(a.get("amount"))>o&&t.get("validatingRefundsInput").push("\n"+kl.value(t.localeRefund+"amountExceeded")),parseFloat(a.get("amount"))<25&&t.get("validatingRefundsInput").push("\n"+kl.value(t.localeRefund+"amountLessThen25")),"Deceased"!=a.customerStatus&&1!=a.get("paymentDetails").MethodOfPaymentId||0==a.get("showAHVButton")&&0==a.get("Overridden")&&t.get("validatingRefundsInput").push("\nPlease override banking details"),a.get("reasonForCapture")||t.get("validatingRefundsInput").push("\n"+kl.value(t.localeRefund+"reasonForCaptureRequired")),a.get("comment")||t.get("validatingRefundsInput").push("\n"+kl.value(t.localeRefund+"commentRequired")),a.get("comment")&&a.get("comment").length>420&&t.get("validatingRefundsInput").push("\n"+kl.value(t.localeRefund+"commentExceed420"))}if(a.get("name")||t.get("validatingRefundsInput").push("\n"+kl.value(t.localeRefund+"nameSurnameRequired")),a.get("idNumber")||t.get("validatingRefundsInput").push("\n"+kl.value(t.localeRefund+"idPassportRequired")),a.get("bankName")||t.get("validatingRefundsInput").push("\n"+kl.value(t.localeRefund+"bankRequired")),a.get("bankAccountType")||t.get("validatingRefundsInput").push("\n"+kl.value(t.localeRefund+"bankAccountTypeRequired")),a.get("bankaccountNumber")){var n=parseFloat(a.get("bankaccountNumber"));(isNaN(n)||0===n)&&(a.set("setEntryBankDetails",!1),a.set("disableNameAndSurname",!1),t.get("validatingRefundsInput").push("\n"+kl.value(t.localeRefund+"invalidAccountNumber")))}else t.get("validatingRefundsInput").push("\n"+kl.value(t.localeRefund+"accountNumberRequired"));a.get("branchName")||t.get("validatingRefundsInput").push("\n"+kl.value(t.localeRefund+"branchRequired")),a.get("branchCode")||t.get("validatingRefundsInput").push("\n"+kl.value(t.localeRefund+"branchCodeRequired")),a.get("documentChecklist").clear(),$.each(a.get("documentTypes"),function(e,t){a.get("documentChecklist").push(t.value)}),"Deceased"!=a.customerStatus&&1!=a.get("paymentDetails").MethodOfPaymentId||(a.customerDocuments.findBy("documentType",void 0)&&t.get("validatingRefundsInput").push("\n\n"+kl.value(t.localeRefund+"specifyDocumentType")+"\n"),$.each(a.get("customerDocuments"),function(t,o){if(a.get("letterFromExecutor")==o.documentType||a.get("letterOfAuthority")==o.documentType||a.get("affidavit")==o.documentType)a.documentChecklist.indexOf(a.get("letterFromExecutor"))>=0&&a.documentChecklist.indexOf(a.get("letterOfAuthority"))>=0&&a.documentChecklist.indexOf(a.get("affidavit"))>=0&&(e=a.documentChecklist.indexOf(a.get("letterFromExecutor")),a.documentChecklist.removeAt(e,1),e=a.documentChecklist.indexOf(a.get("letterOfAuthority")),a.documentChecklist.removeAt(e,1),e=a.documentChecklist.indexOf(a.get("affidavit")),a.documentChecklist.removeAt(e,1));else{var n=a.documentTypes.findBy("value",o.documentType);n&&(e=a.documentChecklist.indexOf(n.value))>-1&&a.documentChecklist.removeAt(e,1)}}),a.documentChecklist.length>0&&t.get("validatingRefundsInput").push("\n\n"+kl.value(t.localeRefund+"addValidator")+"\n"+a.documentChecklist.join(",")+"\n"))},verifyAHVStatus:function(){var e=this,t=e.get("refundTransModel");t.set("processing",!0),t.set("busy",!0),Komodo.Services.queryService.getJSONFromApiRoot("Verified-Bank-Details?bankAccountNumber="+t.bankaccountNumber+"&bankBranchCode="+t.branchCode+"&bankAccountType="+t.bankAccountType+"&idNumber="+t.idNumber+"&bankName="+t.bankName+"&initials="+t.get("name").split(" ")[0]+"&surname="+t.get("name").split(" ")[t.get("name").split(" ").length-1]+"&customerNumber="+t.customerNumber,{async:!0}).done(function(e){t.set("processing",!1),t.set("busy",!1),t.set("ahvStatus",e.ahvStatus),"COMPLIANT"==t.get("ahvStatus").toUpperCase()?(t.set("isCompliant",!0),t.set("Verified",!0),t.set("visibleAHVButtons",!1)):(t.set("isCompliant",!1),t.set("setEntryBankDetails",!1),t.set("disableNameAndSurname",!1),t.set("Verified",!1),t.set("visibleAHVButtons",!0)),t.set("ahvReason",e.reason)}).error(function(a){t.set("processing",!1),t.set("busy",!1),t.set("disableAHVRealtime",!1);var o;a.responseJSON?a.responseJSON.detail&&(o=a.responseJSON.detail):o=a.responseJSON,void 0==o&&(o=a.statusText),Komodo.Controls.MessageBoxController.show(kl.value(e.localeRefund+"failureMessage"),o,null,null,"id123456","danger")})},overrideAHVStatus:function(){var e=this,t=e.get("refundTransModel");e.showBusyIndicator();var a;a="1"==Komodo.Services.customerProfileService.personalDetails.customerClass||"4"==Komodo.Services.customerProfileService.personalDetails.customerClass?{methodOfPayment:"Debit Order",bankName:t.get("bankName"),bankAccountType:t.get("bankAccountType"),debitOrderDay:32,bankAccountNumber:t.get("bankaccountNumber"),bankBranchCode:t.get("branchCode"),payerIdNumber:t.get("idNumber"),initials:"",Surname:"",emailAddress:void 0==t.get("emailAddress")?"":t.get("emailAddress"),phoneNumber:void 0==t.get("phoneNumber")?"":t.get("phoneNumber"),commercialCustomerName:t.get("name"),commercialCustomerAccountNumber:t.get("accountNumber")}:{methodOfPayment:"Debit Order",bankName:t.get("bankName"),bankAccountType:t.get("bankAccountType"),debitOrderDay:t.get("invoiceProfileDay"),bankAccountNumber:t.get("bankaccountNumber"),bankBranchCode:t.get("branchCode"),payerIdNumber:t.get("idNumber"),initials:t.get("name").split(" ")[0],Surname:t.get("name").split(" ")[t.get("name").split(" ").length-1],emailAddress:void 0==t.get("emailAddress")?"":t.get("emailAddress"),phoneNumber:void 0==t.get("phoneNumber")?"":t.get("phoneNumber"),commercialCustomerName:"",commercialCustomerAccountNumber:""},Komodo.Services.queryService.putJSONApiRoot("customers/"+t.customerNumber+"/override-payment-details",{data:a}).done(function(){e.hideBusyIndicator(),t.set("isCompliant",!0),t.set("disableAHVButtons",!0),t.set("ahvStatus","Compliant"),t.set("isApproved",!0),t.set("Overridden",!0),t.set("disableStatus",!0),t.set("ahvReason","Overriden")}).error(function(a){e.hideBusyIndicator(),t.set("disableAHVButtons",!1);var o;a.responseJSON?a.responseJSON.detail&&(o=a.responseJSON.detail):o=a.responseJSON,void 0==o&&(o=a.statusText),Komodo.Controls.MessageBoxController.show(kl.value(e.localeRefund+"failureMessage"),o,null,null,"id123456","danger")})},uploadFilesForOverride:function(){var e=this;e.get("refundTransModel");$("#uploadfiles").trigger("click")},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,3e5,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},publishRefund:function(){var e=this,t=e.get("refundTransModel"),a=Komodo.Models.RefundCustomer.create(),o=Komodo.canonicalFacadeFactory(a,["Country","ListOfRefundCustomerDetails"]);o.set("Country",t.get("country"));var n=Komodo.Models.ListOfRefundCustomerDetails.create(),s=Komodo.Models.RefundCustomerDetail.create(),r=Komodo.canonicalFacadeFactory(s,["FinancialTransactionUID","RequestedBy","Comments","Amount","PaymentDetail"]),i=Komodo.Models.Price.create();i.set("Value",t.get("amount")),i.set("CurrencyCode","0"),i.set("ValueWithoutTax",t.get("amount"));var l=this.getlistOfTax();i.set("ListOfTax",l);var c=Komodo.Models.Email.create();c.set("Value",void 0==t.get("emailAddress")?"":t.get("emailAddress")),c.set("IsPrimary",void 0),c.set("IsMarketingEnabled",void 0);var u=Komodo.Models.PhoneNumber.create();u.set("Type",void 0),u.set("Code",void 0),u.set("Number",void 0==t.get("phoneNumber")?"":t.get("phoneNumber")),u.set("Extension",void 0),u.set("IsPrimary",void 0),u.set("IsMarketingEnabled",void 0),u.set("IsBoxOfficeNumber",void 0),u.set("IsBoxOfficePrimary",void 0),r.set("FinancialTransactionUID",t.get("accountNumber")),r.set("RequestedBy",e.getCurrentUsername()),r.set("Comments",t.get("reasonForCapture")+" - "+t.get("comment")),r.set("Amount",i);var d=Komodo.Models.PaymentDetail.create(),h=Komodo.canonicalFacadeFactory(d,["MethodOfPayment","BankAccountType","AccountNumber","BankName","BranchName","BranchCode","DebitOrderDay","PayerName","PayerSurname","PayerIDType","PayerIDNumber","PayerEmail","PayerPhoneNumber","AHVStatus"]);h.set("MethodOfPayment",t.get("paymentDetails").MethodOfPaymentId),h.set("BankAccountType",t.get("bankAccountType")),h.set("AccountNumber",t.get("bankaccountNumber")),h.set("BankName",t.get("bankName")),h.set("BranchName",t.get("branchName")),h.set("BranchCode",t.get("branchCode")),h.set("DebitOrderDay",void 0),h.set("PayerName",t.get("name").split(" ")[0]),h.set("PayerSurname",t.get("name").split(" ")[t.get("name").split(" ").length-1]),h.set("PayerIDType",void 0),h.set("PayerIDNumber",t.get("idNumber")),h.set("PayerEmail",c),h.set("PayerPhoneNumber",u),h.set("AHVStatus",t.get("ahvStatus")),o.set("ListOfRefundCustomerDetails",n),n.set("RefundCustomerDetail",s),s.set("PaymentDetail",d),e.startNewProcess(),Komodo.Services.manageAccountService.publishEvent(e,a,"RefundCustomer","v1"),e.showBusyIndicator()},messageRefundCustomerReceived:function(e){Komodo.log(e)},messageRefundCustomerDeliveryFailure:function(e){Komodo.log(e)},messageRefundCustomerFault:function(e){Komodo.log(e)},messageNotifyPendingApprovalReceived:function(){var e=this,t=e.get("refundTransModel");e.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(e.localeRefund+"refundRequest"),kl.value(e.localeRefund+"refundApproval",{amount:t.get("amount"),customerNumber:t.get("customerNumber")}),Komodo.Controls.MessageBoxOkButtons,this,"refunds","success").response=function(){Komodo.Services.uiService.transitionTo("account")}},messageNotifyPendingApprovalDeliveryFailure:function(e){Komodo.log(e)},messageNotifyPendingApprovalFault:function(e){Komodo.log(e)},messageFailureMessageEventReceived:function(e){var t=this,a=t.get("refundTransModel");t.hideBusyIndicator(),
"SaveCustomerDocumentEvent"==e.ResponseMessage.Payload.OriginatedEventName&&Komodo.Controls.MessageBoxController.show(kl.value(t.localeRefund+"failureMessage"),e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,null,null,"id123456","danger"),"CreateInteraction"==e.ResponseMessage.Payload.OriginatedEventName&&(Komodo.Controls.MessageBoxController.show(kl.value(t.localeRefund+"failureMessage"),e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,null,null,"id123456","danger"),a.set("disableApproval",!0)),"RefundCustomer"==e.ResponseMessage.Payload.OriginatedEventName&&Komodo.Controls.MessageBoxController.show(kl.value(t.localeRefund+"failureMessage"),e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,null,null,"id123456","danger"),"FailureMessageEvent"==e.ResponseMessage.Payload.OriginatedEventName&&Komodo.Controls.MessageBoxController.show(kl.value(t.localeRefund+"failureMessage"),e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,null,null,"id123456","danger")},messageReceived:function(e){Komodo.log(e)},messageDeliveryFailure:function(e){Komodo.log(e)},messageFault:function(e){Komodo.log(e)},actions:{refund:function(){var e=this;e.get("refundTransModel").set("refundsFlow",!0),e.validationPipline(),e.get("validatingRefundsInput").length>0?Komodo.Controls.MessageBoxController.show(kl.value(e.localeRefund+"failureMessage"),e.get("validatingRefundsInput").join(""),null,null,"id123456","warning"):(e.uploadFilesForOverride(),e.publishRefund())},verifyAHV:function(){this.verifyAHVStatus()},removeDocument:function(e){var t,a,o=e.content.documentName,n=this.get("refundTransModel"),s=-1;$(n.customerDocuments).each(function(e,r){r.documentName===o&&(s=e,t=r.documentName,$(n.fileUploader.files).each(function(e){t===n.fileUploader.files[e].name&&(a=e)}))}),s>-1&&(n.customerDocuments.removeAt(s),n.fileUploader.files.removeAt(a)),n.customerDocuments.length<=0&&n.set("enableDocGrid",!1)},viewDocs:function(e){var t,a=this,o=e.content,n=o.documentName,s=a.get("refundTransModel");$(s.customerDocuments).each(function(e,a){a.documentName===n&&(t=e,i=a.documentName)});var r=s.fileUploader.files[t].getNative(),i=r.name,l=new window.FileReader;l.onload=function(e){saveAs(a.dataURItoBlob(e.target.result),i)},l.readAsDataURL(o)},overrideStatus:function(){var e=this;e.get("refundTransModel").set("refundsFlow",!1),e.validationPipline(),e.get("validatingRefundsInput").length>0?Komodo.Controls.MessageBoxController.show(kl.value(e.localeRefund+"failureMessage"),e.get("validatingRefundsInput").join(""),null,null,"id123456","warning"):(e.uploadFilesForOverride(),e.overrideAHVStatus())},rejectAHV:function(){var e=this,t=e.get("refundTransModel");t.set("isSupervisor",!1),t.set("customerDocuments",[]),t.set("isApproved",!1),t.set("authenticate",!1),t.set("username",void 0),t.set("password",void 0),e.publishCreateInteraction()}}}),Komodo.Application.AdhocDebitOrderView=Komodo.UI.View.extend({viewKey:"AdhocDebitOrderView",templateName:"AdhocDebitOrderView",didInsertElement:function(){this._super();var e=Komodo.Services.ProductAndServiceMaintenanceHelper.create().getCustomerIdToRetrieveData(),t=Komodo.Services.uiService.getController("adhocDebitOrder"),a=new plupload.Uploader({runtimes:"html5,flash,silverlight,html4",browse_button:"choosefiles",url:KomodoConfiguration.ibsApiUrl+t.get("countryDesc")+"/uploaddownload/upload?customerNumber="+e+"&documentType=",headers:{"komodo-sessiontoken":Komodo.Services.securityService.get("sessionToken")},filters:{max_file_size:"10mb",mime_types:[{title:"Image files",extensions:"jpg,gif,png,jpeg,JPG,GIF,PNG,JPEG"},{title:"Adobe And Document Files",extensions:"pdf,doc,xls,docx,xlsx"}]},init:{PostInit:function(){$("#filelist > tbody").html(""),$("#uploadfiles").click(function(){return $(a.files).each(function(e,t){2!==t.status&&4!==t.status||(t.status=1)}),a.uploadCanceled=!1,a.start(),!1})}.observes("overrideCustomerDocument.customerDocuments"),FilesAdded:function(e,t){var a=Komodo.Services.uiService.getController("adhocDebitOrder"),o=a.get("overrideCustomerDocument");plupload.each(t,function(t){var n=!1;if($(o.customerDocuments).each(function(e,a){a.get("documentName")===t.name&&(n=!0,o.set("enableDocGrid",!0))}),n)e.removeFile(t);else{o.set("enableDocGrid",!0);var s=Komodo.Models.RefundsCustomerDocumentModel.create();s.set("documentName",t.name),s.set("documentSize",plupload.formatSize(t.size)),s.set("uploadPercentage",""),s.set("documentTypes",o.get("documentTypes")),s.set("documentType","Refunds"),s.set("documentSerialNumbers",a.get("documentSerialNumbers")),s.set("documentSerialNumber",void 0),s.set("uploadStatus","QUEUED"),o.get("customerDocuments").pushObject(s)}})},UploadProgress:function(e,t){!1===e.uploadCanceled&&e.changeFileStatus(this.accountController.get("overrideCustomerDocument"),t)},FileUploaded:function(e,t,a){var o=JSON.parse(a.response)[0];e.changeFileStatus(this.accountController.get("overrideCustomerDocument"),t,o)},Error:function(e,t){Komodo.Controls.MessageBoxController.show(kl.value(this.accountController.localGeneral+"uploadTitle"),kl.value(this.accountController.localGeneral+"fileUploadError")+" "+t.code+" : "+t.message+(void 0===t.response||null===t.response?"":t.response),Komodo.Controls.MessageBoxOkButtons,this,"modelCustomerDocuments","danger"),e.uploadCanceled=!0,e.changeFileStatus(this.accountController.get("overrideCustomerDocument"),t.file)},BeforeUpload:function(t,a){if(!1===t.uploadCanceled){var o=Komodo.Services.uiService.getController("adhocDebitOrder");t.settings.url=KomodoConfiguration.ibsApiUrl+o.get("countryDesc")+"/uploaddownload/upload?customerNumber="+e+"&documentType=";var n=o.get("overrideCustomerDocument");$(n.customerDocuments).each(function(e,n){if(n.get("documentName")===a.name){var s=n.get("documentType");void 0!==s&&null!==s&&""!==s||(Komodo.Controls.MessageBoxController.show(kl.value(o.localGeneral+"uploadTitle"),kl.value(o.localGeneral+"validateDocumentType"),Komodo.Controls.MessageBoxOkButtons,this,"modelCustomerDocuments","danger"),t.stop(),t.uploadCanceled=!0)}}),!1===t.uploadCanceled&&$(n.customerDocuments).each(function(e,o){if(o.get("documentName")===a.name){t.settings.url=t.settings.url+o.get("documentType")+""}})}else t.stop()},UploadComplete:function(t,a){t.uploadCanceled=!1;var o=Komodo.Services.uiService.getController("adhocDebitOrder"),n=Komodo.Models.SaveDocument.create(),s=Komodo.canonicalFacadeFactory(n,["ListOfDocument"]),r=[];$(o.get("overrideCustomerDocument.customerDocuments")).each(function(t,a){if(a.get("documentUrl")){var o=Komodo.Models.Document.create();o.set("FileType",a.get("documentType")),o.set("DocumentURL",a.get("documentUrl"));var n=[],s=Komodo.Models.DocumentMetaData.create();s.set("DocumentMetaDataValueUri","CustomerId"),s.set("Value",e),n.pushObject(s);var i=Komodo.Models.DocumentMetaData.create();i.set("DocumentMetaDataValueUri","DocumentType"),i.set("Value",a.get("documentType")),n.pushObject(i);var l=Komodo.Models.DocumentMetaData.create();l.set("DocumentMetaDataValueUri","DocumentSerial"),l.set("Value",e),n.pushObject(l),o.set("ListOfDocumentMetaData",n),r.pushObject(o)}}),r&&r.length>0&&(n.set("Country",o.get("loggedInCountryId")),s.set("ListOfDocument",r),Komodo.Services.CustomerService.publishCustomerEvent(this.accountController,n,"SaveCustomerDocumentEvent","v2",!1))}}});a.accountController=Komodo.Services.uiService.getController("adhocDebitOrder"),t.overrideCustomerDocument.set("fileUploader",a),a.uploadCanceled=!1,a.changeFileStatus=this.fileUploadStatus,a.init()},fileUploadStatus:function(e,t,a){$(e.customerDocuments).each(function(e,o){o.get("documentName")===t.name&&(o.set("uploadPercentage",t.percent+" %"),2===t.status?o.set("uploadStatus","UPLOADING"):4===t.status?(o.set("uploadStatus","FAILED"),o.set("uploadPercentage","0 %")):5===t.status&&(o.set("uploadStatus","DONE"),o.set("documentUrl",a)))})},uploadDocumentWith:function(){return $(fileuploader.files).each(function(e,t){2!==t.status&&4!==t.status||(t.status=1)}),fileuploader.uploadCanceled=!1,fileuploader.start(),!1}}),Komodo.Application.WriteOffView=Komodo.UI.View.extend({viewKey:"WriteOffView",templateName:"WriteOffView"}),Komodo.Application.ArchivedFinancialTransactionDetailsView=Komodo.UI.View.extend({viewKey:"ArchivedFinancialTransactionDetailsView",templateName:"ArchivedFinancialTransactionDetailsView"}),Komodo.Application.AccountView=Komodo.UI.View.extend({viewKey:"AccountView",templateName:"AccountView"}),Komodo.Application.ArchivedFinancialTransactionsView=Komodo.UI.View.extend({viewKey:"ArchivedFinancialTransactionsView",templateName:"ArchivedFinancialTransactionsView"}),Komodo.Application.AccountSupervisorApprovalView=Komodo.UI.View.extend({viewKey:"AccountSupervisorApprovalView",templateName:"AccountSupervisorApprovalView"}),Komodo.Application.CreatePaymentPlanView=Komodo.UI.View.extend({viewKey:"CreatePaymentPlanView",templateName:"CreatePaymentPlanView"}),Komodo.Application.ArchivedFinancialTransactionDetailsController=Komodo.UI.Controller.extend({init:function(){Komodo.log("Constructing Archived Financial Transaction Details Controller"),this.set("processVersion","v1.1"),this.set("processName","Archived Financial Transaction Details "),this._super()},start:function(){this.set("financialTransactionDetailsModel",Komodo.Models.ArchivedFinancialTransactionDetailsModel.create());var e=this.get("model").queryParams;this.set("transactionNumber",e.transactionId),this.bindControls(),this._super()},bindControls:function(){var e=this,t=Komodo.Services.manageAccountService.currentArchiveFinancialTransactions,a=t.ResponseMessage&&t.ResponseMessage.Payload&&t.ResponseMessage.Payload.ListOfArchiveFinancialTransaction;if(a){var o=a.ArchiveFinancialTransaction.filter(function(t){return t.TransactionNumber===e.get("transactionNumber")});if(o.length>0){var n=o[0];this.financialTransactionDetailsModel.set("transactionNumber",n.TransactionNumber),this.financialTransactionDetailsModel.set("accountNumber",e.verifyAndGetBlankValue(n.FinancialAccountId)),this.financialTransactionDetailsModel.set("createDate",e.verifyAndGetBlankValue(e.getFormattedDate(n.CreationDate))),this.financialTransactionDetailsModel.set("createdByEvent",e.verifyAndGetBlankValue(n.CreatedByEventName)),this.financialTransactionDetailsModel.set("currency",e.verifyAndGetBlankValue(n.ActualAmount.CurrencyMnemonic)),this.financialTransactionDetailsModel.set("amount",e.verifyAndGetBlankValue(n.ActualAmount.Value)),this.financialTransactionDetailsModel.set("period",e.verifyAndGetBlankValue(e.getFormattedDate(n.PeriodFrom))+" To "+e.verifyAndGetBlankValue(e.getFormattedDate(n.PeriodTo))),this.financialTransactionDetailsModel.set("runningTotal",e.verifyAndGetBlankValue(n.RunningTotal)),this.financialTransactionDetailsModel.set("paidforCustomer",e.verifyAndGetBlankValue(n.PaidforCustomerNumber)),this.financialTransactionDetailsModel.set("paidforAccount",e.verifyAndGetBlankValue(n.PaidForAccountId)),this.financialTransactionDetailsModel.set("psNumber",e.verifyAndGetBlankValue(n.PSNumber)),this.financialTransactionDetailsModel.set("billingRuleDescription",e.verifyAndGetBlankValue(n.BillingRuleDescription)),this.financialTransactionDetailsModel.set("sMSAccount",e.verifyAndGetBlankValue(n.LedgerAccountDescription)),this.financialTransactionDetailsModel.set("product",e.verifyAndGetBlankValue(n.Product)),this.financialTransactionDetailsModel.set("invoiceLine",e.verifyAndGetBlankValue(n.InvoiceLineText)),this.financialTransactionDetailsModel.set("paidForInvoice",e.verifyAndGetBlankValue(n.PaidForInvoice)),this.financialTransactionDetailsModel.set("appearedonInvoice",e.verifyAndGetBlankValue(n.AppearedOnInvoice)),this.financialTransactionDetailsModel.set("paymentReference",e.verifyAndGetBlankValue(n.PaymentReferenceNumber)),this.financialTransactionDetailsModel.set("bankDate",e.verifyAndGetBlankValue(e.getFormattedDate(n.BankDate)))}}},verifyAndGetBlankValue:function(e){return void 0===e||null===e||""===e?"-":e},getFormattedDate:function(e){var t="";if("0001-01-01T00:00:00"===e)return"";if(e){var a=e.split("T"),o=new Date(a[0]),n=o.getDate();n=n<10?"0"+n.toString():n.toString();var s=o.getMonth()+1;s=s<10?"0"+s.toString():s.toString();t=n+"-"+s+"-"+o.getFullYear()}return t}}),Komodo.Application.CustomerAnalysisView=Komodo.UI.View.extend({viewKey:"CustomerAnalysisView",templateName:"CustomerAnalysisView"}),Komodo.Application.WriteOffController=Komodo.UI.Controller.extend({localeBase:"locale.manageaccount:writeOffFunds.",gridDataPaging:Ember.A(),init:function(){this._super(),Komodo.log("Constructing Write Off controller"),this.set("processVersion","v1.1"),this.set("processName","Write Off")},start:function(){var e=this;e.set("writeOffModel",Komodo.Models.WriteOffModel.create()),e.writeOffModel.set("country",e.getCountry()),e.registerValidation();var t=Komodo.Services.customerProfileService.getCustomerPersonalDetail();if(void 0!=t){if(e.writeOffModel.set("customerNumber",t.customerNo),e.writeOffModel.set("customerClass",t.customerClass),e.writeOffModel.set("displayMessage",void 0),e.writeOffModel.set("enableWriteOff",!1),e.writeOffModel.set("hideWriteOffButton",!0),e.setMethodOfPayment(),t.customerClass==GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_RESIDENTIAL"))e.writeOffModel.set("residential",!0),e.writeOffModel.set("commercial",!1),e.retrieveAccounts(),e.retrieveAccountStatus();else if(t.customerClass==GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_COMMERCIAL"))e.writeOffModel.set("residential",!1),e.writeOffModel.set("commercial",!0),e.retrieveAccounts(),e.retrieveAccountStatus();else{var a=kl.value(e.localeBase+"residentialCommercialRestrictionMessage");e.writeOffModel.set("displayMessage",a),e.writeOffModel.set("enableWriteOff",!1),e.writeOffModel.set("hideWriteOffButton",!1)}Komodo.Services.featureToggleService.isEnabled("ManageAccount","Refunds").done(function(t){if(t){Komodo.Services.securityService.hasPermission("clarity://manageAccountView/viewOnly")?e.writeOffModel.set("disableForViewOnlyUser",!0):e.writeOffModel.set("disableForViewOnlyUser",!1)}else e.writeOffModel.set("disableForViewOnlyUser",!1)}).fail(function(e){Komodo.log("Error while calling feature toggle. Error Details:"+e)})}this._super()},getCountry:function(){return Komodo.Services.uiService.getController("application").get("_selectedCountryId")},registerValidation:function(){this.registerValidator(this.get("writeOffModel"),"comment",{isRequired:!0,displayName:kl.value(this.localeBase+"comment")})},listenToComment:function(){void 0!=this.writeOffModel.get("comment")&&""!=this.writeOffModel.get("comment")?this.registerValidator(this.get("writeOffModel"),"comment",{isRequired:!1,displayName:kl.value(this.localeBase+"comment"),maxLength:420}):this.registerValidator(this.get("writeOffModel"),"comment",{isRequired:!0,displayName:kl.value(this.localeBase+"comment")})}.observes("writeOffModel.comment"),setMethodOfPayment:function(){var e=this;Komodo.Services.cachedDataService.fetch("MethodOfPayment").done(function(t){var a=e.get("writeOffModel");$.each(t,function(e,t){a.get("methodOfPayment").addObject(t)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve method of payment from CDM")})},retrieveAccountStatus:function(){var e=this;Komodo.Services.cachedDataService.fetch("AccountStatus").done(function(t){e.writeOffModel.set("accountStatuses",[]),$.each(t,function(t,a){e.writeOffModel.get("accountStatuses").addObject(a)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve Account Statuses from CDM")})},selectedAccount:function(){var e=this,t=this.writeOffModel.get("customerClass");void 0!=e.writeOffModel.get("financialAccounts")&&$.each(e.writeOffModel.get("financialAccounts"),function(a,o){e.writeOffModel.get("accountNumber")==o.Number&&(e.writeOffModel.set("accountBalance",o.TotalBalance.Value),t==GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_RESIDENTIAL")?(e.set("disableAmountField",!0),o.TotalBalance.Value<0?e.writeOffModel.set("amount",o.TotalBalance.Value-2*o.TotalBalance.Value):e.writeOffModel.set("amount",o.TotalBalance.Value)):t==GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_COMMERCIAL")&&e.retrieveInvoices(),$.each(e.writeOffModel.get("accountNumberList"),function(t,a){a.Value==o.Number?e.writeOffModel.set("accountDesc",a.Description):e.writeOffModel.set("accountDesc",a.Name)}),$.each(e.writeOffModel.get("accountStatuses"),function(t,a){a.key==o.StatusId&&e.writeOffModel.set("accountStatus",a.value)}))})}.observes("writeOffModel.accountNumber"),retrieveAccounts:function(){var e=this,t=this.writeOffModel.get("customerNumber"),a=this.writeOffModel.get("customerClass");Komodo.Services.queryService.refreshUserData(),Komodo.Services.queryService.getJSON("AccountProfile/Get?smartcardNumber=&customerUID="+t,{async:!0}).done(function(t){if(e.set("FinancialAccounts",[]),e.writeOffModel.set("financialAccounts",t.FinancialAccounts),a==GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_RESIDENTIAL")){if($.each(t.FinancialAccounts,function(t,a){a.TotalBalance.Value>0&&e.get("FinancialAccounts").push(a)}),0==e.get("FinancialAccounts").length){var o=kl.value(e.localeBase+"noAccountCanBeWrittenOff");e.writeOffModel.set("displayMessage",o),e.writeOffModel.set("enableWriteOff",!1),e.writeOffModel.set("enableInvoices",!1),e.writeOffModel.set("residential",!1),e.writeOffModel.set("commercial",!1),e.writeOffModel.set("hideWriteOffButton",!1)}}else $.each(t.FinancialAccounts,function(t,a){e.get("FinancialAccounts").push(a)}),e.get("FinancialAccounts").length>0&&a==GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_COMMERCIAL")&&e.retrieveInvoices();if(e.writeOffModel.set("accountNumberList",[]),e.get("FinancialAccounts").length>0){e.writeOffModel.set("enableWriteOff",!0),e.writeOffModel.set("hideWriteOffButton",!0);for(var n,s,r,i,l=e.get("FinancialAccounts"),c=0;c<l.length;c++){if(n=Komodo.Services.customerProfileService.get("accountType"),null!=l[c].AccountTypeDescription){s=n.AccountTypes.AccountType;for(var u=0;u<s.length;u++){if(s[u].CanonicalValue==l[c].AccountTypeDescription){r=s[u].AccountTypeDescription;break}r=l[c].AccountTypeDescription}}a==GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_COMMERCIAL")||a==GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_CSI")?(i={Key:l[c].Number+" - "+l[c].Name,Value:l[c].Number,Description:r},e.writeOffModel.accountNumberList.push(i)):(i={Key:l[c].Number+" - "+r,Value:l[c].Number,Description:r},e.writeOffModel.accountNumberList.push(i))}var d=e.writeOffModel.get("accountNumberList").sort(function(e,t){return e.Value-t.Value});e.writeOffModel.set("accountNumber",d),e.writeOffModel.set("accountNumber",e.writeOffModel.get("accountNumber")[0].Value)}}).error(function(t){var a;a=t.responseJSON.Message?t.responseJSON.Message:t.responseJSON,Komodo.Controls.MessageBoxController.show(kl.value(e.localeBase+"ajaxFinancialAccountsError"),a,Komodo.Controls.MessageBoxOkButtons,e,"message","warning")})},retrieveInvoices:function(){var e=this,t=e.writeOffModel.get("customerNumber");Komodo.Services.queryService.refreshUserData(),Komodo.Services.queryService.getJSON("/Invoice/GetInvoicesbyCustomerNumberOrInvoiceNumber?customerId="+t+"&invoiceNumber=0",{async:!1}).done(function(t){var a=$.makeArray(t.Invoices);if(e.writeOffModel.set("invoicesGrid",[]),e.set("methodOfPaymentValue",void 0),$.each(a,function(t,a){a.FinancialAccountId==e.writeOffModel.get("accountNumber")&&a.Balance>0&&($.each(e.writeOffModel.get("methodOfPayment"),function(t,o){o.key==a.MopId&&e.set("methodOfPaymentValue",o.value)}),e.writeOffModel.get("invoicesGrid").addObject(Ember.Object.create({invoiceNumber:a.Id,disputeStatus:a.DisputeStatus,invoiceDate:a.InvoiceDate,dueDate:a.DueDate,accountNumber:a.FinancialAccountId,methodOfPayment:e.get("methodOfPaymentValue"),balanceBroughtForward:a.BalanceBroughtForward,totalAmount:a.TotalAmount,balance:a.Balance})))}),0==e.writeOffModel.get("invoicesGrid").length){var o=kl.value(e.localeBase+"noInvoiceCanBeWrittenOff");e.writeOffModel.set("displayMessage",o),e.writeOffModel.set("enableInvoices",!0),e.writeOffModel.set("residential",!1),e.writeOffModel.set("commercial",!1),e.writeOffModel.set("hideWriteOffButton",!1)}else e.writeOffModel.set("enableInvoices",!1),e.writeOffModel.set("residential",!1),e.writeOffModel.set("commercial",!0),e.writeOffModel.set("hideWriteOffButton",!0)}).error(function(t){e.writeOffModel.set("residential",!1),e.writeOffModel.set("commercial",!1),e.writeOffModel.set("hideWriteOffButton",!1);var a;a=t.responseJSON.Message?t.responseJSON.Message:t.responseJSON,Komodo.Controls.MessageBoxController.show(kl.value(e.localeBase+"ajaxInvoicesError"),a,Komodo.Controls.MessageBoxOkButtons,e,"message","warning")})},getlistOfTax:function(){return Komodo.Models.Tax.create()},publishWriteOffFunds:function(){var e=this,t=Komodo.Models.WriteOffFunds.create(),a=Komodo.canonicalFacadeFactory(t,["Country","Amount","FinancialAccountUID","LedgerAccount","InvoiceUID","Comments","CustomerClass"]),o=Komodo.Models.Price.create();o.set("Value",e.writeOffModel.get("amount")),o.set("CurrencyCode","0"),o.set("ValueWithoutTax",e.writeOffModel.get("amount"));var n=e.getlistOfTax();o.set("ListOfTax",n),a.set("Country",e.writeOffModel.get("country")),a.set("Amount",o),a.set("FinancialAccountUID",e.writeOffModel.get("accountNumber")),a.set("LedgerAccount",""),a.set("InvoiceUID",e.writeOffModel.get("invoicesNumber")),a.set("Comments",e.writeOffModel.get("comment")),a.set("CustomerClass",e.writeOffModel.get("customerClass"));var s=Komodo.Services.manageAccountService;e.startNewProcess(),e.showBusyIndicator(),s.publishEvent(e,t,"WriteOffFunds","v1")},messageWriteOffFundsReceived:function(e){Komodo.log(e)},messageWriteOffFundsDeliveryFailure:function(e){Komodo.log(e)},messageWriteOffFundsFault:function(e){Komodo.log(e)},messageFundsWrittenOffReceived:function(e){this.hideBusyIndicator(),""==e.ResponseMessage.Payload.InvoiceUID||void 0==e.ResponseMessage.Payload.InvoiceUID||null==e.ResponseMessage.Payload.InvoiceUID?(Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"writtenOffHeading"),kl.value(this.localeBase+"financialAccoutNumber",{financialAccount:this.writeOffModel.get("accountNumber")}),null,this,"id5446676","success"),this.retrieveAccounts(),this.writeOffModel.set("comment",void 0)):(Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"writtenOffHeading"),kl.value(this.localeBase+"invoiceNumberMessage",{invoiceNumber:this.writeOffModel.get("invoicesNumber")}),null,this,"id5446676","success"),this.retrieveInvoices())},messageFundsWrittenOffDeliveryFailure:function(e){Komodo.log(e)},messageFundsWrittenOffFault:function(e){Komodo.log(e)},messageFailureMessageEventReceived:function(e){this.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(self.localeBase+"failureMessage"),e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,null,null,"id123456","danger")},messageReceived:function(e){Komodo.log(e)},messageDeliveryFailure:function(e){Komodo.log(e)},messageFault:function(e){Komodo.log(e)},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,3e5,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},actions:{writeOff:function(){var e=this;e.writeOffModel.get("residential")?(e.set("writeOffInputs",[]),e.get("writeOffInputs").push(kl.value(e.localeBase+"requiredFields")+"\n"),e.writeOffModel.get("amount")||e.get("writeOffInputs").push("\n"+kl.value(e.localeBase+"amountRequired")),e.writeOffModel.get("comment")&&""!=e.writeOffModel.get("comment")||e.get("writeOffInputs").push("\n"+kl.value(e.localeBase+"commentRequired")),void 0!=e.writeOffModel.get("comment")&&""!=e.writeOffModel.get("comment")&&e.writeOffModel.get("comment").length>420&&e.get("writeOffInputs").push("\n"+kl.value(e.localeBase+"commentExceed420")),e.get("writeOffInputs").length>1?Komodo.Controls.MessageBoxController.show(kl.value(e.localeBase+"requiredFields"),e.get("writeOffInputs").join(""),Komodo.Controls.MessageBoxOkButtons,e,"message","warning"):e.publishWriteOffFunds()):(e.set("writeOffInputs",[]),e.writeOffModel.get("invoicesNumber")||e.get("writeOffInputs").push(kl.value(e.localeBase+"selectInvoiceNumber")+"\n"),e.get("writeOffInputs").length>0?Komodo.Controls.MessageBoxController.show(kl.value(e.localeBase+"requiredFields"),e.get("writeOffInputs").join(""),Komodo.Controls.MessageBoxOkButtons,e,"message","warning"):e.publishWriteOffFunds())},invoiceSelected:function(e){var t=this,a=e.get("content");t.writeOffModel.set("amount",a.balance),t.writeOffModel.set("invoicesNumber",a.invoiceNumber),t.writeOffModel.set("accountNumber",a.accountNumber)}}}),Komodo.Application.CustomerQuoteDetailsView=Komodo.UI.View.extend({viewKey:"CustomerQuoteDetailsView",templateName:"CustomerQuoteDetailsView"}),Komodo.Application.ViewAccountInformationView=Komodo.UI.View.extend({viewKey:"ViewAccountInformationView",templateName:"ViewAccountInformationView"}),Komodo.Application.DevicePlanDetailView=Komodo.UI.View.extend({viewKey:"DevicePlanDetailView",templateName:"DevicePlanDetailView"}),Komodo.Application.DPPQuotePreviewView=Komodo.UI.View.extend({viewKey:"DPPQuotePreviewView",templateName:"DPPQuotePreviewView"}),Komodo.Application.TransferPaymentController=Komodo.UI.Controller.extend({localeBase:"locale.managePayments:interAccount.",localeRefund:"locale.manageaccount:refund.",init:function(){Komodo.log("Constructing Transfer Payment controller"),this.set("processVersion","v1.1"),this.set("processName","Transfer Payment"),this._super()},start:function(){this.set("startup",!1),this.set("disableTransferPaymentButton",!1),this.set("pageNumber",1),this.set("paymentCount",0),this.set("payments",[]),this.set("isCheckboxSelected",!1),this.set("transferPaymentModel",Komodo.Models.TransferPaymentModel.create());var e=Komodo.Services.customerProfileService.getCustomerPersonalDetail();void 0!==e&&(this.transferPaymentModel.set("country",this.getCountry()),this.transferPaymentModel.set("fromCustomerNumber",e.customerNo),this.transferPaymentModel.set("customerClass",e.customerClass),this.getLedgerAccountsfromCDM(),this.getJournalCaptureReasonsfromCDM(),this.registerValidation(),this.retrieveFinancialTransactions(this.transferPaymentModel.get("fromCustomerNumber"),20,1),this.gridDataForView(0,4)),this._super()},getCountry:function(){return Komodo.Services.uiService.getController("application").get("_selectedCountryId")},registerValidation:function(){this.registerValidator(this.get("transferPaymentModel"),"amount",{limitValueToType:!0,type:"number",isRequired:!0}),this.registerValidator(this.get("transferPaymentModel"),"fromAccountNumber",{isRequired:!0}),this.registerValidator(this.get("transferPaymentModel"),"toAccountNumber",{isRequired:!0}),this.registerValidator(this.get("transferPaymentModel"),"reasonForCapture",{isRequired:!0}),this.registerValidator(this.get("transferPaymentModel"),"comment",{isRequired:!0,displayName:kl.value(this.localeBase+"comment")})},calculateRemainingAmount:function(){var e=this,t=e.transferPaymentModel.get("remainingFtFunds")-2*e.transferPaymentModel.get("remainingFtFunds");e.transferPaymentModel.get("remainingFtFunds")>0?(e.transferPaymentModel.set("amount",0),e.transferPaymentModel.set("remainingFtFunds",0)):t<e.transferPaymentModel.get("amount")&&(e.transferPaymentModel.set("amount",e.transferPaymentModel.get("remainingFtFunds")),Komodo.Controls.MessageBoxController.show(kl.value(e.localeBase+"amountValidationHeading"),kl.value(e.localeBase+"amountValidation"),null,e,"remainingAmountWarningTP","warning"))}.observes("transferPaymentModel.amount"),gridDataForView:function(e,t){var a=this;a.set("gridData",[]);var o=a.transferPaymentModel.get("paymentsList");if(void 0!==o&&o.length>0)for(var n=e;n<=t&&o.length!==n&&(a.get("gridData").addObject(Ember.Object.create({dateOfPayment:o[n].dateOfPayment,financialTransactionType:o[n].financialTransactionType,accountDescription:o[n].accountDescription,amount:o[n].amount,UID:o[n].UID,customerNo:o[n].customerNo,accountNumber:o[n].accountNumber,isCheckboxSelected:!1,currencyCode:o[n].currencyCode})),4!==n);n++);},retrieveRemainingFtFunds:function(e){var t=this;Komodo.Services.queryService.refreshUserData(),Komodo.Services.queryService.getJSON("FinancialTransaction/GetFinancialTransactionHistory?financialTransactionId="+e).done(function(e){t.transferPaymentModel.set("remainingFtFunds",e.TransferrableAmount)}).error(function(e){var a;e.responseJSON?e.responseJSON.Message&&(a=e.responseJSON.Message):a=e.responseJSON,Komodo.Controls.MessageBoxController.show(kl.value(t.localeBase+"ajaxPaymentHistory"),a,Komodo.Controls.MessageBoxOkButtons,t,"paymentHistoryWarningTP","warning")})},retrieveFinancialTransactions:function(e,t,a){var o=this,n=0;Komodo.Services.queryService.refreshUserData(),Komodo.Services.queryService.getJSON("FinancialTransaction/GetPayments?customerNumber="+e+"&pageSize="+t+"&pageNumber="+a,{async:!1}).done(function(t){var a,s=o.transferPaymentModel.get("customerClass"),r=t.FinancialTransaction;n=r.length,o.set("paymentCount",o.get("paymentCount")+n),o.set("paymentsRecords",o.get("paymentCount")),Komodo.Services.queryService.getJSON("AccountProfile/Get?smartcardNumber=&customerUID="+e,{async:!1}).done(function(e){if(o.set("fromAccountNumberList",[]),o.set("toAccountNumberList",[]),e.FinancialAccounts.length>=1){a=e.FinancialAccounts;var t;if(s===GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_COMMERCIAL")||s===GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_CSI")||s===GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_NATIONALDEAL"))for(var n=0;n<a.length;n++)t={Key:a[n].Number+" "+a[n].Name,Value:a[n].Number.toString()},o.fromAccountNumberList.push(t);else for(var r=0;r<a.length;r++)t={Key:a[r].Number+" "+a[r].AccountTypeDescription,Value:a[r].Number.toString()},o.fromAccountNumberList.push(t)}}).error(function(e){var t;t=e.responseJSON.Message?e.responseJSON.Message:e.responseJSON,Komodo.Controls.MessageBoxController.show(kl.value(o.localeBase+"errorGetFAs"),t,Komodo.Controls.MessageBoxOkButtons,o,"financialAccountWarning","warning")}),null!=r&&($.each(r,function(e,t){t.ActualAmount.Value<0&&$.each(a,function(e,a){parseInt(a.Number)===parseInt(t.FinancialAccountId)&&(s===GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_COMMERCIAL")||s===GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_CSI")||s===GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_NATIONALDEAL")?o.get("payments").addObject(Ember.Object.create({dateOfPayment:t.CreationDate,amount:t.ActualAmount.Value,UID:t.UID,customerNo:t.CustomerNumber,accountNumber:t.FinancialAccountId,currencyCode:t.ActualAmount.CurrencyCode,accountDescription:a.Name,financialTransactionType:t.TransactionType})):o.get("payments").addObject(Ember.Object.create({dateOfPayment:t.CreationDate,amount:t.ActualAmount.Value,UID:t.UID,customerNo:t.CustomerNumber,accountNumber:t.FinancialAccountId,currencyCode:t.ActualAmount.CurrencyCode,accountDescription:a.AccountTypeDescription,financialTransactionType:t.TransactionType})))})}),o.transferPaymentModel.set("paymentsList",o.get("payments")))}).error(function(e){o.clearData(),o.set("payments",[]);var t;t=e.responseJSON.Message?e.responseJSON.Message:e.responseJSON,Komodo.Controls.MessageBoxController.show(kl.value(o.localeBase+"errorGetFts"),t,Komodo.Controls.MessageBoxOkButtons,o,"financialTransactionsWarning","warning")})},retrieveToAccount:function(){var e=this;if(this.transferPaymentModel.get("fromCustomerNumber")){var t=e.transferPaymentModel.get("fromAccountNumber"),a=e.transferPaymentModel.get("fromCustomerNumber");e.checkIfRefundRequestIsInProgress(a,t),t&&(e.set("toAccountNumberListFile",[]),
void 0!==this.get("toAccountNumberList")&&$.each(e.get("fromAccountNumberList"),function(a,o){if(t!==o.Value){var n={Key:o.Key,Value:o.Value};e.toAccountNumberListFile.push(n)}}))}}.observes("transferPaymentModel.fromAccountNumber"),checkIfRefundRequestIsInProgress:function(e,t){var a=this;a.set("disableTransferPaymentButton",!1),Komodo.Services.queryService.getJSON("Journal/GetPendingRefundRequestsByCustomerId?token=token&customerNumber="+e,{async:!1}).done(function(e){e.AccountNumbers.length>0&&null!==e.AccountNumbers[0]&&$.each(e.AccountNumbers,function(e,o){parseInt(t)===parseInt(o.FINANCIALACCOUNTID)&&(a.set("disableTransferPaymentButton",!0),a.transferPaymentModel.set("pendingRefundNotification",kl.value(a.localeRefund+"pendingRefund",{AccountNumber:t})))}),Komodo.Services.securityService.hasPermission("clarity://manageAccountView/viewOnly")&&a.set("disableTransferPaymentButton",!0)}).error(function(e){a.set("disableTransferPaymentButton",!0);var t;t=e.responseJSON.Message?e.responseJSON.Message:e.responseJSON,Komodo.Controls.MessageBoxController.show(kl.value(a.localeRefund+"ajaxPendingRefundRequests"),t,Komodo.Controls.MessageBoxOkButtons,a,"message","warning")})},getLedgerAccountsfromCDM:function(){var e=this;Komodo.Services.cachedDataService.fetch("MisallocatedUnallocatedLedgerAccounts").done(function(t){var a=e.get("transferPaymentModel"),o=JSON.parse(t);$.each(o.MisallocatedUnallocatedLedgerAccounts.MisallocatedUnallocatedLedgerAccount,function(e,t){1===parseInt(t.isInterAccount)&&a.set("LedgerAccount",t.CanonicalKey)})}).fail(function(){Komodo.UI.error("[ERROR] : could not retrieve Misallocated Unallocated Ledger Accounts from CDM")})},getJournalCaptureReasonsfromCDM:function(){var e=this;Komodo.Services.cachedDataService.fetch("JournalCaptureReason").done(function(t){var a=e.get("transferPaymentModel"),o=JSON.parse(t);$.each(o.JournalCaptureReasons.JournalCaptureReason,function(e,t){1===parseInt(t.isInterAccount)&&a.set("reasonForCapture",t.CanonicalValue)})}).fail(function(){Komodo.UI.error("[ERROR] : could not retrieve Journal Capture reasons from CDM")})},getServerDateTime:function(){var e=this;Komodo.Services.queryService.getJSON("ServerDateTime/GetServerDateTime",{async:!1}).done(function(t){e.transferPaymentModel.set("iccDateTime",void 0),e.transferPaymentModel.set("iccDateTime",t)}).error(function(t){var a;t.responseJSON?t.responseJSON.Message&&(a=t.responseJSON.Message):a=t.responseJSON,Komodo.Controls.MessageBoxController.show(kl.value(e.localeRefund+"ajaxServerDateTime"),a,Komodo.Controls.MessageBoxOkButtons,e,"message","warning")})},publishInterAccountFundsTransfer:function(){var e=this;e.getServerDateTime();var t=new Date(e.transferPaymentModel.iccDateTime),a=new moment(t).format("YYYY-MM-DDTHH:mm:ss"),o=Komodo.Models.CreateInterAccountFundsTransfer.create(),n=Komodo.Services.manageAccountService,s=Komodo.canonicalFacadeFactory(o,["Country","AmountPaid","FinancialTransactionUID","LedgerAccount","CustomerUID","Comments","AccountUID","RequestDate","RequestedBy","ProductUID"]),r=Komodo.Models.Price.create();r.set("Value",e.transferPaymentModel.amount),r.set("CurrencyCode",""),r.set("ValueWithoutTax",e.transferPaymentModel.amount);var i=e.getlistOfTax();r.set("ListOfTax",i),s.set("Country",e.transferPaymentModel.get("country")),s.set("AmountPaid",r),s.set("Comments",e.transferPaymentModel.get("reasonForCapture")+" - "+e.transferPaymentModel.get("comment")),s.set("FinancialTransactionUID",e.transferPaymentModel.get("UID")),s.set("LedgerAccount",e.transferPaymentModel.get("LedgerAccount")),s.set("CustomerUID",e.transferPaymentModel.get("fromCustomerNumber")),s.set("AccountUID",e.transferPaymentModel.get("toAccountNumber")),s.set("RequestDate",a),s.set("RequestedBy",e.userName()),s.set("ProductUID",void 0),e.startNewProcess(),n.publishEvent(e,o,"interAccountTransfer","v1"),e.showBusyIndicator()},messageinterAccountTransferReceived:function(e){Komodo.log(e)},messagePaymentTransferredReceived:function(e){var t=this;this.hideBusyIndicator();var a;"True"===e.ResponseMessage.Payload.IsPendingApproval.toString()?(a=kl.value(t.localeBase+"approvalRequestAccounts",{amount:e.ResponseMessage.Payload.AmountPaid.Value,fromAccount:t.transferPaymentModel.get("fromAccountNumber"),toAccount:e.ResponseMessage.Payload.ToAccountUID}),t.clearData(),Komodo.Controls.MessageBoxController.show(kl.value(t.localeBase+"transferSuccess"),a,null,t,"id1234567","success")):(a=kl.value(t.localeBase+"transferAccountRequest",{amount:e.ResponseMessage.Payload.AmountPaid.Value,fromAccount:t.transferPaymentModel.get("fromAccountNumber"),toAccount:e.ResponseMessage.Payload.ToAccountUID}),t.clearData(),Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"transferSuccess"),a,null,t,"id1234567","success"))},messagePaymentTransferredDeliveryFailure:function(e){Komodo.log(e)},messagePaymentTransferredFault:function(e){Komodo.log(e)},messageReceived:function(e){Komodo.log(e)},messageDeliveryFailure:function(e){Komodo.log(e)},messageFault:function(e){Komodo.log(e)},messageFailureMessageEventReceived:function(e){var t=this;this.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(t.localeBase+"transferFailure"),e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,null,t,"id123456","danger")},getlistOfTax:function(){return Komodo.Models.Tax.create()},userName:function(){return Komodo.Services.securityService.get("domainUserName").substring(3)},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,3e5,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},clearData:function(){this.transferPaymentModel.set("fromAccountNumber",void 0),this.transferPaymentModel.set("isSearchPayment",!1),this.transferPaymentModel.set("amount",void 0),this.transferPaymentModel.set("toAccountNumber",void 0),this.transferPaymentModel.set("comment",void 0),this.transferPaymentModel.set("remainingFtFunds",void 0),this.transferPaymentModel.set("isFTSelected",!1),$("input[name=paymentRadioButtons]").attr("checked",!1)},allocateSelected:function(e){var t=this;if(void 0!==t.get("transferPaymentModel")&&void 0!==t.transferPaymentModel.get("selectedPayment")){var a=t.transferPaymentModel.get("selectedPayment");t.transferPaymentModel.set("isFTSelected",!0),t.transferPaymentModel.set("UID",t.get("gridData")[a].UID),t.retrieveRemainingFtFunds(t.get("gridData")[a].UID),t.transferPaymentModel.set("dateOfPayment",t.get("gridData")[a].dateOfPayment),t.transferPaymentModel.set("selectedAmount",t.get("gridData")[a].amount),$.each(t.get("fromAccountNumberList"),function(e,o){parseInt(t.get("gridData")[a].accountNumber)===parseInt(o.Value)&&(t.transferPaymentModel.set("fromAccountNumber",o.Value),t.transferPaymentModel.set("fromAccountNumberWithDescription",o.Key))})}}.observes("transferPaymentModel.selectedPayment"),actions:{transfer:function(){var e=this;e.set("validatingTransferInput",[]),e.transferPaymentModel.get("fromAccountNumber")||e.get("validatingTransferInput").push(kl.value(e.localeBase+"selectFromAccount")+"<br/>"),e.transferPaymentModel.get("toAccountNumber")||e.get("validatingTransferInput").push(kl.value(e.localeBase+"selectToAccount")+"<br/>"),e.transferPaymentModel.get("amount")||e.get("validatingTransferInput").push(kl.value(e.localeBase+"amountRequired")+"<br/>");var t=parseInt(e.transferPaymentModel.get("selectedAmount"))-2*parseInt(e.transferPaymentModel.get("selectedAmount"));parseInt(e.transferPaymentModel.get("amount"))>t&&e.get("validatingTransferInput").push(kl.value(e.localeBase+"amountExceeded")+"<br/>"),e.transferPaymentModel.get("reasonForCapture")&&""!==e.transferPaymentModel.get("reasonForCapture")||e.get("validatingTransferInput").push(kl.value(e.localeRefund+"reasonForCaptureRequired")+"<br/>"),e.transferPaymentModel.get("comment")&&""!==e.transferPaymentModel.get("comment")||e.get("validatingTransferInput").push(kl.value(e.localeBase+"commentRequired")+"<br/>"),void 0!==e.transferPaymentModel.get("comment")&&""!==e.transferPaymentModel.get("comment")&&e.transferPaymentModel.get("comment").length>420&&e.get("validatingTransferInput").push(kl.value(e.localeBase+"commentExceed420")+"<br/>"),e.get("validatingTransferInput").length>0?Komodo.Controls.MessageBoxController.show(kl.value(e.localeBase+"errorValidation"),e.get("validatingTransferInput").join(" "),Komodo.Controls.MessageBoxOkButtons,e,"message","warning"):e.publishInterAccountFundsTransfer()},cancel:function(){this.clearData()},pageSelected:function(e){var t=this;!0===t.get("startup")&&(t.get("payments").length/5===e.pageNumber?(t.set("pageNumber",t.get("pageNumber")+1),t.retrieveFinancialTransactions(t.transferPaymentModel.get("fromCustomerNumber"),20,t.get("pageNumber"))):(t.get("payments").length/5>e.pageNumber||t.get("payments").length/5<e.pageNumber)&&t.gridDataForView(e.from,e.to-1)),t.set("startup",!0)}}}),Komodo.Application.EditPaymentDetailsAfricaView=Komodo.UI.View.extend({viewKey:"EditPaymentDetailsAfricaView",templateName:"EditPaymentDetailsAfricaView",didInsertElement:function(){this._super();var e=this.get("controller"),t=e.get("customerNumber"),a=e.get("accountno"),o=new plupload.Uploader({runtimes:"html5,flash,silverlight,html4",browse_button:"addDocuments",url:KomodoConfiguration.ibsApiUrl+e.get("loggedInCountryName")+"/UploadDownload/UploadAccountDocuments?customerNumber="+t+"&accountNumber="+a+"&documentType=",headers:{"komodo-sessiontoken":Komodo.Services.securityService.get("sessionToken")},filters:{max_file_size:"10mb",mime_types:[{title:"Image files",extensions:"jpg,gif,png,jpeg,JPG,GIF,PNG,JPEG"},{title:"Adobe And Document Files",extensions:"pdf,doc,xls,docx,xlsx"}]},init:{PostInit:function(){$("#uploadDocuments").click(function(){return $(o.files).each(function(e,t){2!==t.status&&4!==t.status||(t.status=1)}),o.uploadCanceled=!1,o.start(),!1})}.observes("editPaymentDetailsModel.supportingDocuments"),FilesAdded:function(e,t){var a=this.editPaymentDetailsController,o=this.editPaymentDetailsController.get("editPaymentDetailsModel");plupload.each(t,function(t){var n=!1;if($(o.supportingDocuments).each(function(e,o){o.get("documentName")===t.name&&(n=!0,a.set("isDocumentAvailable",!0))}),n)e.removeFile(t);else{var s=Komodo.Models.SupportingDocumentModel.create();s.set("documentName",t.name),s.set("documentSize",plupload.formatSize(t.size)),s.set("uploadPercentage",""),s.set("documentTypes",o.get("documentTypes")),s.set("documentType",""),s.set("uploadStatus","QUEUED"),s.set("documentSerialNumbers",a.get("documentSerialNumbers")),s.set("documentSerialNumber",void 0),s.set("documentAlreadyUploaded",!1),a.set("isDocumentAvailable",!0),o.get("supportingDocuments").pushObject(s)}})},UploadProgress:function(e,t){!1===e.uploadCanceled&&e.changeFileStatus(this.editPaymentDetailsController.get("editPaymentDetailsModel"),t)},FileUploaded:function(e,t,a){var o=JSON.parse(a.response)[0];e.changeFileStatus(this.editPaymentDetailsController.get("editPaymentDetailsModel"),t,o),1==this.editPaymentDetailsController.get("isDisableAHVOverride")&&this.editPaymentDetailsController.set("isDisableAHVOverride",!1)},Error:function(t,a){t.uploadCanceled=!0,t.changeFileStatus(this.editPaymentDetailsController.get("editPaymentDetailsModel"),a.file),Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"technicalError"),a.code+" : "+a.message+(void 0===a.response||null===a.response?"":a.response),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")},BeforeUpload:function(a,o){if(!1===a.uploadCanceled){var n=this.editPaymentDetailsController;n.startProgress();var s=n.get("accountno");a.settings.url=KomodoConfiguration.ibsApiUrl+e.get("loggedInCountryName")+"/UploadDownload/UploadAccountDocuments?customerNumber="+t+"&accountNumber="+s+"&documentType=";var r=n.get("editPaymentDetailsModel");$(r.supportingDocuments).each(function(e,t){if(t.get("documentName")===o.name){var s=t.get("documentType");void 0!==s&&null!==s&&""!==s||(Komodo.Controls.MessageBoxController.show(kl.value(n.localEditPaymeDetail+"uploadDocuments"),kl.value(n.localEditPaymeDetail+"specifyDocumentType"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"),a.stop(),a.uploadCanceled=!0)}}),!1===a.uploadCanceled&&$(r.supportingDocuments).each(function(e,t){if(t.get("documentName")===o.name){a.settings.url=a.settings.url+t.get("documentType")+""}})}else a.stop()},UploadComplete:function(a,o){e.stopProgress(),a.uploadCanceled=!1;var n=Komodo.Models.SaveDocument.create(),s=Komodo.canonicalFacadeFactory(n,["ListOfDocument"]),r=[],i=Ember.get(e.editPaymentDetailsModel,"supportingDocuments");i.length>0&&($.each(i,function(a,o){if("DONE"==o.uploadStatus&&0==o.get("documentAlreadyUploaded")){var n=Komodo.Models.Document.create();n.set("FileType",o.get("documentType")),n.set("DocumentURL",o.get("documentUrl"));var s=[],i=Komodo.Models.DocumentMetaData.create();i.set("DocumentMetaDataValueUri","CustomerId"),i.set("Value",t),s.pushObject(i);var l=Komodo.Models.DocumentMetaData.create();l.set("DocumentMetaDataValueUri","DocumentType"),l.set("Value",e.getDocumentTypeValue(o.get("documentType"))),o.set("documentTypeText",e.getDocumentTypeValue(o.get("documentType"))),s.pushObject(l);var c=Komodo.Models.DocumentMetaData.create();c.set("DocumentMetaDataValueUri","DocumentSerial"),c.set("Value",t),o.set("documentAlreadyUploaded",!0),s.pushObject(c),n.set("ListOfDocumentMetaData",s),r.pushObject(n)}}),r.length>0&&(1==this.editPaymentDetailsController.get("isDisableAHVOverride")&&this.editPaymentDetailsController.set("isDisableAHVOverride",!1),n.set("Country",this.editPaymentDetailsController.get("loggedInCountryId")),s.set("ListOfDocument",r),this.editPaymentDetailsController.publishRequestOnBus(n,"SaveCustomerDocumentEvent","v2")))}}});o.editPaymentDetailsController=this.get("controller"),this.get("controller.editPaymentDetailsModel").set("fileUploader",o),o.changeFileStatus=this.fileUploadStatus,o.init();var n=KomodoConfiguration.ibsApiUrl+e.get("loggedInCountryName")+"/UploadDownload/UploadAccountDocuments?customerNumber="+t+"&accountNumber="+a+"&documentType=",s=this.getNewFileUploader(this.get("controller"),"thirdPartyDocuments",n,"addThirdPatryDocs","uploadThirdPatryDocs",this.onThirdPartyDocsAdded,this.onThirdPartyDocProgress,this.onThirdPartyDocUploaded,this.onThirdPartyDocError,this.onThirdPartyDocBeforeUpload,this.onThirdPartyDocsUploadComplete);e.thirdPartyDocUploader=s,s.init()},onThirdPartyDocsAdded:function(e,t,a){Komodo.log("onThirdPartyDocsAdded"),void 0==e.get("thirdPartyDocuments")&&e.set("thirdPartyDocuments",Ember.A());for(var o=e.get("thirdPartyDocuments"),n=0;n<a.length;n++){var s=a[n];if(e.isDocumentNameExists(o,s.name))t.removeFile(s);else{var r=e.mapPluploadFileToDoc(s,"QUEUED");o.pushObject(r),Komodo.log("File Added: "+s.name)}}},onThirdPartyDocBeforeUpload:function(e,t,a){if(Komodo.log("onThirdPartyDocBeforeUpload"),Komodo.log(a.name),!1===t.uploadCanceled){e.startProgress();for(var o=e.get("thirdPartyDocuments"),n=0;n<o.length;n++){var s=o[n];if(s.get("documentName")===a.name){var r=s.get("documentType");if(Komodo.UI.propertyHelpers.isNullOrEmpty(r)){Komodo.Controls.MessageBoxController.show(kl.value(e.localEditPaymeDetail+"uploadDocuments"),kl.value(e.localEditPaymeDetail+"specifyDocumentType"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"),t.stop(),t.uploadCanceled=!0;break}t.settings.url=e.getUploadDocumentUrl(r)}}}else up.stop()},onThirdPartyDocProgress:function(e,t,a){Komodo.log("onThirdPartyDocProgress"),!1===t.uploadCanceled&&e.onThirdPartyDocStatusChange(a)},onThirdPartyDocUploaded:function(e,t,a,o){Komodo.log("onThirdPartyDocUploaded");var n=JSON.parse(o.response)[0];e.onThirdPartyDocStatusChange(a,n)},onThirdPartyDocError:function(e,t,a){Komodo.log("onThirdPartyDocError"),e.onThirdPartyDocStatusChange(a.file)},onThirdPartyDocsUploadComplete:function(e,t,a){e.stopProgress(),Komodo.log("onThirdPartyDocsUploadComplete"),t.uploadCanceled=!1,e.getDocumentPayload(e.get("thirdPartyDocuments")),e.set("editPaymentDetailsModel.isSaveButtonDisabled",!1)},filter:function(e,t){for(var a=Ember.A(),o=0;o<e.length;o++)1==t(e[o])&&a.addObject(e[o]);return a},fileUploadStatus:function(e,t,a){$(e.supportingDocuments).each(function(e,o){o.get("documentName")===t.name&&(o.set("uploadPercentage",t.percent+" %"),2===t.status?o.set("uploadStatus","UPLOADING"):4===t.status?(o.set("uploadStatus","FAILED"),o.set("uploadPercentage","0 %")):5===t.status&&(o.set("uploadStatus","DONE"),o.set("documentUrl",a)))})},getNewFileUploader:function(e,t,a,o,n,s,r,i,l,c,u){var d=new plupload.Uploader({runtimes:"html5,flash,silverlight,html4",browse_button:o,url:a,headers:{"komodo-sessiontoken":Komodo.Services.securityService.get("sessionToken")},filters:{max_file_size:"10mb",mime_types:[{title:"Image files",extensions:"jpg,gif,png,jpeg,JPG,GIF,PNG,JPEG"},{title:"Adobe And Document Files",extensions:"pdf,doc,xls,docx,xlsx"}]},init:{PostInit:function(){document.getElementById(n).onclick=function(){return void 0!=d.files&&d.files.length>0&&$(d.files).each(function(e,t){2!==t.status&&4!==t.status||(t.status=1)}),d.uploadCanceled=!1,d.start(),!1}},FilesAdded:function(t,a){s(e,t,a)},UploadProgress:function(t,a){r(e,t,a)},FileUploaded:function(t,a,o){i(e,t,a,o)},Error:function(t,a){l(e,t,a)},BeforeUpload:function(t,a){c(e,t,a)},UploadComplete:function(t,a){u(e,t,a)}}});return d.parentView=this,d}}),Komodo.Application.StatementDetailsController=Komodo.UI.Controller.extend({localeBase:"locale.statements:statement.",_useZombiesFeatures:!1,init:function(){this.registerModel("data",Komodo.Models.StatementDetailsModel),this.set("isAccountTypeLoaded",!1),this.set("documentType",void 0),this.set("accountNo",void 0),that.set("asaccountNo",void 0),this.set("CustomerUID",void 0),this.set("transactionType",void 0),this.set("charge",void 0),this.set("payment",void 0),this.set("useNewAdhocService",void 0),this.set("showPayGrp",void 0),this.set("showPayGrpAccount",void 0),this.set("generateAdHocStatement",void 0),this.allAccounts=[],this._super()},start:function(){var e=this;e.set("data.fromDate",void 0),e.set("data.toDate",void 0),e.set("data.customerFullName",void 0),e.set("data.email",void 0),e.set("data.isCharge",void 0),e.set("data.isPayment",void 0),e.set("gridData",void 0),e.set("thgridData",void 0),this.getcustomerID()&&(this.loadFeatureToggle(),this.loadControls(),this.getStatementType(),this.get("useNewAdhocService")&&this.retriveTransactionHistory(),this.initializeConstant(),this.registerValidation(),this.retrieveStatement(),this.setAccountTypes(),this.getAccounts(),this.checkForNationalDeal()),this._super()},stop:function(){this.set("isAccountTypeLoaded",!1),this.set("documentType",void 0),this.set("accountNo",void 0),that.set("asaccountNo",void 0),this.set("CustomerUID",void 0),this.set("transactionType",void 0),this.set("charge",void 0),this.set("payment",void 0),this.set("showPayGrpAccount",void 0),this.set("useNewAdhocService",void 0),this.set("data.fromDate",void 0),this.set("data.toDate",void 0),this.set("data.customerFullName",void 0),this.set("data.email",void 0),this.set("data.isCharge",void 0),this.set("data.isPayment",void 0),this.set("data.accountNumberSelected",void 0),this.set("data.asaccountNumberSelected",void 0),this.set("gridData",void 0),this.set("thgridData",void 0),this.allAccounts=[],this._super()},loadControls:function(){var e=this;e.get("useNewAdhocService")?(e.set("controlsVisiblecreateView",!1),e.set("controlsVisibleth",!0)):(e.set("controlsVisiblecreateView",!0),e.set("controlsVisibleth",!1)),"9"==e.data.get("customerClass")?e.set("controlsVisibleAccountsList",!0):e.set("controlsVisibleAccountsList",!1),e.get("generateAdHocStatement")?e.set("controlsVisiblegenerateStatement",!0):e.set("controlsVisiblegenerateStatement",!1)},loadFeatureToggle:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("InvoiceAndStatement","EnableDispatchOption").done(function(t){e.set("enableDispatchOption",t)}).fail(function(e){Komodo.error("[ERROR] : could not retrieve EnableDispatchOption domain = "+Komodo.Services.queryService.getSelectedCountryId()+"/ qualifier = "+language),Komodo.error("[ERROR] : "+e)}),Komodo.Services.featureToggleService.isEnabled("InvoiceAndStatement","IsNewAdHocService").done(function(t){e.set("useNewAdhocService",t)}).fail(function(e){Komodo.error("[ERROR] : could not retrieve IsNewAdHocService domain = "+Komodo.Services.queryService.getSelectedCountryId()+"/ qualifier = "+language),Komodo.error("[ERROR] : "+e)}),Komodo.Services.featureToggleService.isEnabled("InvoiceAndStatement","ShowPayGroup").done(function(t){e.set("showPayGrp",t)}).fail(function(e){Komodo.error("[ERROR] : could not retrieve ShowPayGroup domain = "+Komodo.Services.queryService.getSelectedCountryId()+"/ qualifier = "+language),Komodo.error("[ERROR] : "+e)}),Komodo.Services.featureToggleService.isEnabled("InvoiceAndStatement","CreateAdHocStatement").done(function(t){e.set("generateAdHocStatement",t)}).fail(function(e){Komodo.error("[ERROR] : could not retrieve CreateAdHocStatement domain = "+Komodo.Services.queryService.getSelectedCountryId()+"/ qualifier = "+language),Komodo.error("[ERROR] : "+e)})},checkForNationalDeal:function(){var e=this;1==e.get("showPayGrp")&&"9"==e.data.get("customerClass")&&e.set("showPayGrpAccount",!0)},initializeConstant:function(){var e=this;Ember.isEmpty(GetClarityConstants("ManageAccountConstants","customerTypesConstants.accountStatus.open"))?e.set("accountStatusOpen",""):e.set("accountStatusOpen",GetClarityConstants("ManageAccountConstants","customerTypesConstants.accountStatus.open")[0]),Ember.isEmpty(GetClarityConstants("ManageAccountConstants","customerTypesConstants.customerTypesConstants.customerClassResidential"))?e.set("customerClassResidential",""):e.set("customerClassResidential",GetClarityConstants("ManageAccountConstants","customerTypesConstants.customerTypesConstants.customerClassResidential")[0])},showStatement:function(e){var t=$.Deferred();return Komodo.Services.queryService.getPdf(e,!0).done(function(e){var a=URL.createObjectURL(e);window.open(a),t.resolve(e)}).error(function(e){t.reject(JSON.stringify(e))}),t},emailStatement:function(e){var t=$.Deferred(),a=this,o=Komodo.Services.customerProfileService.currentCustomerDetails.ResponseMessage.Payload.CustomerDetail.CompanyName,n=a.data.email,s=a.data.dataGrid.invoiceNo,r=e.documentURL,i="";switch(a.documentType){case"CommOIStatement":i="CommercialStatement";break;default:i="ResidentialStatement"}return a.showBusyIndicator(),Komodo.Services.queryService.getJSON("MessagingFramework/SendMessage?customerName="+o+"&recipientEmail="+n+"&invoiceNo="+s+"&attachmentUrl="+r+"&application=Document%20Management&template="+i,!0).done(function(e){a.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(a.localeBase+"emailConfirmationTitle"),kl.value(a.localeBase+"emailConfirmationBody")+e,Komodo.Controls.MessageBoxOkButtons,this,"id5798673","success")}).error(function(e){a.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(a.localeBase+"emailErrorTitle"),kl.value(a.localeBase+"emailErrorBody")+e,Komodo.Controls.MessageBoxOkButtons,this,"id5798673","danger"),t.reject(JSON.stringify(e))}),t},retrieveStatement:function(){var e=$.Deferred(),t=this;if(t.data.dataGrid=void 0,t._useZombiesFeatures)return Komodo.Services.queryService.getJSON("DocumentType/GetStatement?customerId="+t.data.customerRefNo+"&dateRange=000000_000000&documentType=statement",!0).done(function(a){t.set("gridData",[]),a.length>0&&$.each(a,function(e,a){t.data.dataGrid={invoiceNo:a.InvoiceId,createdDate:t.removeTimeFromDate(a.CreatedDate),fromDate:t.removeTimeFromDate(a.FromDate),toDate:t.removeTimeFromDate(a.ToDate),documentURL:a.Link,disableButton:Ember.isEmpty(a.Link)},t.get("gridData").push(t.data.dataGrid)}),e.resolve(void 0)}).error(function(a){t.set("gridData",void 0),e.reject(JSON.stringify(a))}),e;Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(e){t.data.set("country",e.data.countryId)});var a=t.getStatementType();if(void 0==a&&t.messageCreateStatementsError3(""),!t.get("enableDispatchOption")){Komodo.Services.customerProfileService.getCustomerPersonalDetail().isGotv&&(a="gotv."+a)}return t.get("useNewAdhocService")?Komodo.Services.queryService.getJSON("Statement/GetStatementsByCustomer?customerId="+t.data.customerRefNo+"&documentType="+a+"&requestType=*",!0).done(function(a){t.set("gridData",[]),a.DocumentList.length>0&&$.each(a.DocumentList,function(e,a){t.data.dataGrid={createdDate:t.removeTimeFromDate(a.CreatedDate),fromDate:t.removeTimeFromDate(a.FromDate),toDate:t.removeTimeFromDate(a.ToDate),documentURL:a.DocumentUrl,accountname:a.AccountName,accountnumber:a.AccountNumber,disableButton:Ember.isEmpty(a.DocumentUrl)},t.get("gridData").push(t.data.dataGrid)}),e.resolve(void 0)}).error(function(a){t.set("gridData",void 0),e.reject(JSON.stringify(a))}):Komodo.Services.queryService.getJSON("Statement/GetStatementbyId?customerId="+t.data.customerRefNo+"&documentType="+a+"&pagenumber=1",!0).done(function(a){t.set("gridData",[]),null!=a&&a.length>0&&$.each(a,function(e,a){t.data.dataGrid={createdDate:t.removeTimeFromDate(a.CreatedDate),fromDate:t.removeTimeFromDate(a.FromDate),toDate:t.removeTimeFromDate(a.ToDate),documentURL:a.DocumentURL,disableButton:Ember.isEmpty(a.DocumentURL)},t.get("gridData").push(t.data.dataGrid)}),e.resolve(void 0)}).error(function(a){t.set("gridData",void 0),e.reject(JSON.stringify(a))}),e},retriveTransactionHistory:function(){var e=$.Deferred(),t=this;if(t._useZombiesFeatures)return e.resolve(void 0);t.data.thdataGrid=void 0,Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(e){t.data.set("country",e.data.countryId)});var a=t.getStatementType();if(void 0==a&&t.messageCreateStatementsError3(""),!t.get("useNewAdhocService")){Komodo.Services.customerProfileService.getCustomerPersonalDetail().isGotv&&(a="gotv."+a)}return Komodo.Services.queryService.getJSON("Statement/GetTransactionHistoryByCustomer?customerId="+t.data.customerRefNo,!0).done(function(a){t.set("thgridData",[]),$.each(a.DocumentList,function(e,a){t.data.thdataGrid={createdDate:t.removeTimeFromDate(a.CreatedDate),fromDate:t.removeTimeFromDate(a.FromDate),toDate:t.removeTimeFromDate(a.ToDate),documentID:a.DocumentId,documentURL:a.DocumentUrl,disableButton:Ember.isEmpty(a.DocumentUrl)},t.get("thgridData").push(t.data.thdataGrid)}),e.resolve(void 0)}).error(function(a){t.set("thgridData",void 0),e.reject(JSON.stringify(a))}),e},removeTimeFromDate:function(e){var t=new Date(e),a=t.getFullYear(),o=t.getMonth()+1,n=t.getDate();return n<10&&(n="0"+n),o<10&&(o="0"+o),a+"-"+o+"-"+n},trimString:function(e){return e.replace(/^\s+|\s+$/g,"")},getcustomerID:function(){var e=Komodo.Services.ProductAndServiceMaintenanceHelper.create();return e.isCustomerIdIsAvailableToRetriveData()?(this.data.set("customerRefNo",e.getCustomerIdToRetrieveData()),this.data.set("customerClass",e.getCustomerDetails().customerClass),this.data.set("email",e.getCustomerDetails().email),this.data.set("customerFullName",e.getCustomerDetails().title+"_"+e.getCustomerDetails().firstName+"_"+e.getCustomerDetails().lastName),!0):(Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"useCaseTitle"),kl.value(this.localeBase+"searchCustomer")),Komodo.Services.uiService.transitionTo("home"),!1)},registerValidation:function(){this.registerValidator(this.get("data"),"fromDate",{type:"date",isRequired:!0,displayName:"From Date",minDate:new Date((new Date).getFullYear()-3,(new Date).getMonth(),(new Date).getDate()+1)}),this.registerValidator(this.get("data"),"toDate",{type:"date",isRequired:!0,displayName:"To Date",maxDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()+1)}),this.registerValidator(this.get("data"),"accountNumberSelected",{isRequired:!0}),this.registerValidator(this.get("data"),"asfromDate",{type:"date",isRequired:!0,displayName:"From Date",minDate:new Date((new Date).getFullYear()-3,(new Date).getMonth(),(new Date).getDate()+1)}),this.registerValidator(this.get("data"),"astoDate",{type:"date",isRequired:!0,displayName:"To Date",maxDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()+1)}),this.registerValidator(this.get("data"),"asaccountNumberSelected",{isRequired:!0})},actions:{createStatement:function(){this.publishCreateStatementsEvent()},viewAction:function(e){var t=function(){var e=document.createElement("a");return document.body.appendChild(e),e.style="display: none",function(t,a){var o=new Blob([t],{type:"application/pdf"}),n=window.URL.createObjectURL(o);e.href=n,e.download=a,e.click(),window.URL.revokeObjectURL(n)}}(),a=new XMLHttpRequest;a.open("GET",e.content.documentURL,!0),a.responseType="arraybuffer",a.setRequestHeader("Accept","application/pdf"),a.onerror=function(e){},a.onload=function(e){var o=a.response;t(o,"statement.pdf")},a.send(null)},emailAction:function(e){var t=this;if(t._useZombiesFeatures)return void t.emailStatement(e.content);var a=e.content;t.sendmailToCustomer(a)},viewthAction:function(e){var t=this;if(t._useZombiesFeatures)return void t.showStatement(e.content.documentURL);var a=function(){var e=document.createElement("a");return document.body.appendChild(e),e.style="display: none",function(t,a){var o=new Blob([t],{type:"application/pdf"}),n=window.URL.createObjectURL(o);e.href=n,e.download=a,e.click(),window.URL.revokeObjectURL(n)}}(),o=new XMLHttpRequest;o.open("GET",e.content.documentURL,!0),o.responseType="arraybuffer",o.setRequestHeader("Accept","application/pdf"),o.onerror=function(e){},o.onload=function(e){var t=o.response;a(t,"transactionhistorystatement.pdf")},o.send(null)},emailthAction:function(e){var t=this,a=e.content;t.sendmailToCustomer(a)},createTransaction:function(){this.createTransactionsHistory()},generateAdhocStatement:function(){var e=this;e.get("generateAdHocStatement")&&e.createAdHocStatement()}},createAdHocStatement:function(){var e=this;try{var t=new Date(e.data.astoDate),a=e.removeTimeFromDate(t),o=new Date(e.data.asfromDate),n=e.removeTimeFromDate(o),s=e.getDateDiffrenceInDays(e.data.asfromDate,e.data.astoDate);if(void 0==e.data.asfromDate||""==e.data.asfromDate||void 0==e.data.astoDate||""==e.data.astoDate)e.messageCreateStatementsError9("");else if(a<n)e.messageCreateStatementsError10("");else if(s>30)e.messageCreateStatementsError12("");else{"9"==e.data.get("customerClass")?void 0!=e.get("asaccountNo")&&null!=e.get("asaccountNo")||e.messageCreateStatementsError11(""):e.set("asaccountNo","0");var r=e.getStatementType();e.showBusyIndicator();var i=new Object;i.Country=e.data.country,i.CustomerId=e.data.customerRefNo,i.DocumentType=r,i.FinancialAccountId=e.get("asaccountNo"),i.FromDate=n,i.ToDate=a,Komodo.Services.queryService.postJSON("Statement/RequestStatement",{data:i}).done(function(t){t&&(e.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(e.localeBase+"successful"),kl.value(e.localeBase+"successfulascreated"),Komodo.Controls.MessageBoxOkButton,e,"id5446676","success"),e.retrieveStatement(),e.resetValues())}).error(function(t){e.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(e.localeBase+"requestStatement"),kl.value(e.localeBase+"errorMessage9"),Komodo.Controls.MessageBoxOkButtons,e,"id5798673","danger")})}}catch(e){this.handleException("createAdHocStatement",e,!0,!0)}},sendmailToCustomer:function(e){var t=this,a=void 0;if(t.validateEmailId(t.data.get("email")))t.showBusyIndicator(),a=void 0==e.documentID||""==e.documentID?e.documentURL.split("statements/")[1]:e.documentID,Komodo.Services.queryService.getJSON("Statement/EmailDocument?customerName="+t.data.get("customerFullName")+"&documentId="+a+"&documentType="+t.get("documentType")+"&emailId="+t.data.get("email"),!0).done(function(e){
e&&(t.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(t.localeBase+"statement"),kl.value(e.DeliveredMessageDetails),Komodo.Controls.MessageBoxOkButtons,t,"id5798673","success"))}).error(function(e){t.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(t.localeBase+"statement"),kl.value(t.localeBase+"errorMessage6"),Komodo.Controls.MessageBoxOkButtons,t,"id5798673","danger")});else{Komodo.Controls.MessageBoxController.show(kl.value(t.localeBase+"statement"),kl.value(t.localeBase+"invalidemail"),Komodo.Controls.MessageBoxOkButtons,t,"id5446675","warning").response=function(e){"ok"==e&&("2"==t.data.get("customerClass")?Komodo.Services.uiService.transitionTo("/editCustomerDetail"):"1"==t.data.get("customerClass")||"9"==t.data.get("customerClass")||"4"==t.data.get("customerClass")?Komodo.Services.uiService.transitionTo("/editCommercialCustomer"):"3"==t.data.get("customerClass")&&Komodo.Services.uiService.transitionTo("/editSpecialistCustomerDetail"))}}},validateEmailId:function(e){return!!new RegExp("^\\w+([-+.']\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$").test(e)},resetValues:function(){var e=this;e.set("isAccountTypeLoaded",!1),e.set("documentType",void 0),e.set("accountNo",void 0),e.set("asaccountNo",void 0),e.set("charge",void 0),e.set("payment",void 0),e.set("transactionType",void 0),e.set("data.fromDate",void 0),e.set("data.toDate",void 0),e.set("data.customerFullName",void 0),e.set("data.email",void 0),e.set("data.isCharge",void 0),e.set("data.isPayment",void 0),e.set("data.accountNumberSelected",void 0),e.set("data.asaccountNumberSelected",void 0)},createTransactionsHistory:function(){try{var e,t=this,a=t.getStatementType(),o=void 0,n=Komodo.Services.systemService,s=Komodo.Models.CreateStatementAndInvoice.create(),r=Komodo.canonicalFacadeFactory(s,["Country","CustomerUID","InvoiceAndStatementType","FromDate","ToDate","ReferenceNumber","DispatchOption"]);Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(e){r.set("Country",e.data.countryId),t.data.set("country",e.data.countryId)});if(Komodo.Services.customerProfileService.getCustomerPersonalDetail().isGotv&&(a="gotv."+a),r.set("InvoiceAndStatementType",a),r.set("CustomerUID",t.data.customerRefNo),t.getTransactionType(),void 0==t.data.fromDate||""==t.data.fromDate||void 0==t.data.toDate||""==t.data.toDate)t.messageCreateStatementsError4("");else{var i=new Date(t.data.toDate),l=t.removeTimeFromDate(i),c=new Date(t.data.fromDate),u=t.removeTimeFromDate(c);if(t._useZombiesFeatures){if(l<u)t.messageCreateStatementsError2("");else if(void 0==t.get("accountNo")||null==t.get("accountNo"))t.messageCreateStatementsError8("");else if(void 0==t.get("transactionType")||null==t.get("transactionType"))t.messageCreateStatementsError7("");else{t.set("thgridData",[]);var d=-1;d="all"===t.get("accountNo").toLower()?-1:t.get("accountNo");var h=-1;switch(t.get("transactionType")){case 0:h=-1;break;case 1:h=0;break;case 2:h=3}var m={createdDate:t.removeTimeFromDate(Date.now()),fromDate:t.removeTimeFromDate(t.data.fromDate),toDate:t.removeTimeFromDate(t.data.toDate),documentURL:"/DocumentType/GetPdf?pdfUrl="+t.data.get("country")+"/"+t.data.customerRefNo+"/"+t.removeTimeFromDate(t.data.fromDate)+"_"+t.removeTimeFromDate(t.data.toDate)+"/history/"+d+"/"+h+"/pdf-copy",disableButton:!1};t.get("thgridData").push(m)}return}if(t.get("useNewAdhocService"))if(t.set("documentType",Komodo.DocumentTypeEnumForSA.TRANSHISTORY),t.set("CustomerUID",t.data.customerRefNo),u<GetCustomerTypesConstants("DocumentDateType","FIRSTVALIDDATE"))t.messageCreateStatementsError1("");else if(l<u)t.messageCreateStatementsError2("");else if(void 0==t.get("accountNo")||null==t.get("accountNo"))t.messageCreateStatementsError8("");else if(void 0==t.get("transactionType")||null==t.get("transactionType"))t.messageCreateStatementsError7("");else{t.showBusyIndicator();var p=new Object;p.Country=t.data.country,p.CustomerId=t.data.customerRefNo,p.DocumentType=a,p.FinancialAccountId=t.get("accountNo"),p.FromDate=u,p.ToDate=l,p.TransactionType=t.get("transactionType"),Komodo.Services.queryService.postJSON("Statement/RequestTransactionHistory",{data:p}).done(function(e){e&&(t.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(t.localeBase+"successful"),kl.value(t.localeBase+"successfulthcreated"),Komodo.Controls.MessageBoxOkButton,t,"id5446676","success"),t.retriveTransactionHistory(),t.resetValues())}).error(function(e){t.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(t.localeBase+"useCaseTitle"),kl.value(t.localeBase+"errorMessage5"),Komodo.Controls.MessageBoxOkButtons,t,"id5798673","danger")})}else l<u?t.messageCreateStatementsError2(""):(r.set("ToDate",n.universalDateString(new Date(t.data.toDate))),r.set("FromDate",n.universalDateString(new Date(t.data.fromDate))),r.set("ReferenceNumber",t.data.customerRefNo),t.data.DispatchOption=1,r.set("DispatchOption",t.data.DispatchOption),e=Komodo.Services.manageAccountService,t.getNewProcessID(),o="Event Message for CreateStatements",e.publishEvent(t,s,"CreateStatementAndInvoice","v1").done(function(){Komodo.Controls.MessageBoxController.show(kl.value(t.localeBase+"useCaseTitle"),kl.value(t.localeBase+"statementCreated"),Komodo.Controls.MessageBoxOkButtons,t,"id5798673","success"),Komodo.log(o+" has been published successfully")}).fail(function(e,a){Komodo.Controls.MessageBoxController.show(kl.value(t.localeBase+"useCaseTitle"),kl.value(t.localeBase+"messageCreateStatementsDeliveryFailure"),Komodo.Controls.MessageBoxOkButtons,t,"id5798673","danger"),t.messageCreateStatementsFailure(a),Komodo.log(o+" has been failed")}))}}catch(e){this.handleException("createTransactionsHistory",e,!0,!0)}},accountNoSelected:function(){var e=this;if(e.clearData(),Ember.isEmpty(e.get("data.accountNumberSelected")))e.set("isAccountSelected",!1);else{e.set("isAccountSelected",!0);var t=void 0;t="All"===e.get("data.accountNumberSelected")?0:e.get("data.accountNumberSelected").split(" -")[0],e.set("accountNo",t)}}.observes("data.accountNumberSelected"),asaccountNoSelected:function(){var e=this;if(e.clearData(),!Ember.isEmpty(e.get("data.asaccountNumberSelected"))){var t=void 0;t="All"===e.get("data.asaccountNumberSelected")?0:e.get("data.asaccountNumberSelected").split(" -")[0],e.set("asaccountNo",t)}}.observes("data.asaccountNumberSelected"),isChargeSelected:function(){var e=this;e.get("data.isCharge")&&null!==e.data.isCharge&&void 0!==e.data.isCharge&&""!==e.data.isCharge?e.set("charge",1):e.set("charge",0)}.observes("data.isCharge"),isPaymentSelected:function(){var e=this;e.get("data.isPayment")&&null!==e.data.isPayment&&void 0!==e.data.isPayment&&""!==e.data.isPayment?e.set("payment",1):e.set("payment",0)}.observes("data.isPayment"),clearData:function(){this.set("isAccountSelected",!1)},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,12e5,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},getNewProcessID:function(){this.startNewProcess()},setAccountTypes:function(){var e=this;e.set("accountTypes",Komodo.Services.customerProfileService.get("accountType").AccountTypes.AccountType),e.set("isAccountTypeLoaded",e.get("accountTypes")&&e.get("accountTypes").length>0)},getAccounts:function(){var e=this,t=Komodo.Application.ManageAccountUtility.isAnyAccountExist();if(e.set("allAccounts",[]),t&&e.get("isAccountTypeLoaded")){var a=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),o=a.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account),n=[],s="";n.pushObject("All");for(var r=0;r<o.length;r++)s=e.get("accountTypes").filter(function(e){if(e.CanonicalKey===o[r].Type)return e.AccountTypeDescription}),Komodo.Services.customerProfileService.personalDetails.customerClass===e.get("customerClassCommercial")?Ember.isEmpty(o[r].Name)?n.pushObject(o[r].UID):n.pushObject(o[r].UID+" - "+o[r].Name):Ember.isEmpty(s)||Komodo.Services.customerProfileService.personalDetails.customerClass!==e.get("customerClassResidential")?n.pushObject(o[r].UID):n.pushObject(o[r].UID+" - "+s[0].AccountTypeDescription),e.set("allAccounts",n)}},getTransactionType:function(){var e=this;1==e.get("charge")&&1==e.get("payment")?e.set("transactionType",0):1==e.get("charge")?e.set("transactionType",1):1==e.get("payment")&&e.set("transactionType",2)},publishCreateStatementsEvent:function(){try{var e,t=this,a=void 0,o=Komodo.Services.systemService,n=Komodo.Models.CreateStatementAndInvoice.create(),s=Komodo.canonicalFacadeFactory(n,["Country","CustomerUID","InvoiceAndStatementType","FromDate","ToDate","ReferenceNumber","DispatchOption"]);Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(e){s.set("Country",e.data.countryId),t.data.set("country",e.data.countryId)}),s.set("CustomerUID",t.data.customerRefNo);var r=t.getStatementType();if(t.get("enableDispatchOption"))s.set("InvoiceAndStatementType",Komodo.DocumentTypeEnumForSA.TRANSHISTORY);else{Komodo.Services.customerProfileService.getCustomerPersonalDetail().isGotv&&(r="gotv."+r),s.set("InvoiceAndStatementType",r)}if(void 0==t.data.fromDate||""==t.data.fromDate||void 0==t.data.toDate||""==t.data.toDate)t.messageCreateStatementsError4("");else{var i=new Date(t.data.toDate),l=t.removeTimeFromDate(i),c=new Date(t.data.fromDate),u=t.removeTimeFromDate(c);t.get("enableDispatchOption")?u<GetCustomerTypesConstants("DocumentDateType","FIRSTVALIDDATE")?t.messageCreateStatementsError1(""):l<u?t.messageCreateStatementsError2(""):(s.set("ToDate",o.universalDateString(new Date(t.data.toDate))),s.set("FromDate",o.universalDateString(new Date(t.data.fromDate))),s.set("ReferenceNumber",t.data.customerRefNo),t.data.DispatchOption=7,s.set("DispatchOption",t.data.DispatchOption),e=Komodo.Services.manageAccountService,t.getNewProcessID(),a="Event Message for CreateStatements",e.publishEvent(t,n,"CreateStatementAndInvoice","v1").done(function(){Komodo.Controls.MessageBoxController.show(kl.value(t.localeBase+"useCaseTitlecreateView"),kl.value(t.localeBase+"statementCreated"),Komodo.Controls.MessageBoxOkButtons,t,"id5798673","success"),Komodo.log(a+" has been published successfully")}).fail(function(e,o){Komodo.Controls.MessageBoxController.show(kl.value(t.localeBase+"useCaseTitlecreateView"),kl.value(t.localeBase+"messageCreateStatementsDeliveryFailure"),Komodo.Controls.MessageBoxOkButtons,t,"id5798673","danger"),t.messageCreateStatementsFailure(o),Komodo.log(a+" has been failed")})):l<u?t.messageCreateStatementsError2(""):(s.set("ToDate",o.universalDateString(new Date(t.data.toDate))),s.set("FromDate",o.universalDateString(new Date(t.data.fromDate))),s.set("ToDate",o.universalDateString(new Date(t.data.toDate))),s.set("FromDate",o.universalDateString(new Date(t.data.fromDate))),s.set("ReferenceNumber",t.data.customerRefNo),t.data.DispatchOption=1,s.set("DispatchOption",t.data.DispatchOption),e=Komodo.Services.manageAccountService,t.getNewProcessID(),a="Event Message for CreateStatements",e.publishEvent(t,n,"CreateStatementAndInvoice","v1").done(function(){Komodo.Controls.MessageBoxController.show(kl.value(t.localeBase+"useCaseTitlecreateView"),kl.value(t.localeBase+"statementCreated"),Komodo.Controls.MessageBoxOkButtons,t,"id5798673","success"),Komodo.log(a+" has been published successfully")}).fail(function(e,o){Komodo.Controls.MessageBoxController.show(kl.value(t.localeBase+"useCaseTitlecreateView"),kl.value(t.localeBase+"messageCreateStatementsDeliveryFailure"),Komodo.Controls.MessageBoxOkButtons,t,"id5798673","danger"),t.messageCreateStatementsFailure(o),Komodo.log(a+" has been failed")}))}}catch(e){this.handleException("publishCreateStatementsEvent",e,!0,!0)}},publishEmailStatementsEvent:function(e){try{var t,a=this,o=Komodo.Services.systemService,n=Komodo.Models.CreateStatementAndInvoice.create(),s=Komodo.canonicalFacadeFactory(n,["Country","CustomerUID","InvoiceAndStatementType","FromDate","ToDate","ReferenceNumber","DispatchOption"]);Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(e){s.set("Country",e.data.countryId),a.data.set("country",e.data.countryId)}),s.set("CustomerUID",a.data.customerRefNo);var r=a.getStatementType();if(!a.get("enableDispatchOption")){Komodo.Services.customerProfileService.getCustomerPersonalDetail().isGotv&&(r="gotv."+r)}s.set("InvoiceAndStatementType",r),s.set("CreatedDate",o.universalDateString(new Date(e.createdDate.replace(/(\d{2})-(\d{2})-(\d{4})/,"$2/$1/$3")))),s.set("FromDate",o.universalDateString(new Date(e.fromDate.replace(/(\d{2})-(\d{2})-(\d{4})/,"$2/$1/$3")))),s.set("ToDate",o.universalDateString(new Date(e.toDate.replace(/(\d{2})-(\d{2})-(\d{4})/,"$2/$1/$3")))),s.set("ReferenceNumber",a.data.customerRefNo),a.get("enableDispatchOption")?(a.data.DispatchOption=Ember.isEmpty(e.documentURL)?7:6,s.set("DispatchOption",a.data.DispatchOption)):(a.data.DispatchOption=Ember.isEmpty(e.documentURL)?1:2,s.set("DispatchOption",a.data.DispatchOption)),t=Komodo.Services.manageAccountService,a.getNewProcessID();t.publishEvent(a,n,"CreateStatementAndInvoice","v1").done(function(){Komodo.Controls.MessageBoxController.show(kl.value(a.localeBase+"useCaseTitle"),kl.value(a.localeBase+"statementSent"),Komodo.Controls.MessageBoxOkButtons,a,"id5798673","success"),Komodo.log("Event Message for CreateStatements has been published successfully")}).fail(function(e,t){a.messageFailureMessageEventReceived(t),Komodo.log("Event Message for CreateStatements has been failed"),Komodo.Services.messagingService.removeMessages(t)})}catch(e){this.handleException("publishEmailStatementsEvent",e,!0,!0)}},getStatementType:function(){var e=this,t=void 0;if(e.get("useNewAdhocService")){switch(e.data.get("customerClass")){case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_RESIDENTIAL"):case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_SPECIALIST"):t=Komodo.DocumentTypeEnumForSA.RESIDENTIALBBFSTATEMENT,e.set("documentType",t);break;case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_COMMERCIAL"):t=Komodo.DocumentTypeEnumForSA.COMMERCIALBBFSTATEMENT,e.set("documentType",t);break;case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_NATIONALDEAL"):t=Komodo.DocumentTypeEnumForSA.NATIONALDEAL,e.set("documentType",t)}return t}if(e.get("enableDispatchOption")){switch(e.data.get("customerClass")){case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_RESIDENTIAL"):case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_SPECIALIST"):t=Komodo.DocumentTypeEnumForSA.RESIDENTIALBBFSTATEMENT,e.set("documentType",t);break;case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_COMMERCIAL"):t=Komodo.DocumentTypeEnumForSA.COMMERCIALBBFSTATEMENT,e.set("documentType",t);break;case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_NATIONALDEAL"):t=Komodo.DocumentTypeEnumForSA.NATIONALDEAL,e.set("documentType",t)}return t}switch(e.data.get("customerClass")){case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_RESIDENTIAL"):case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_SPECIALIST"):t=Komodo.DocumentTypeEnum.RESIDENTIALBBFSTATEMENT;break;case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_COMMERCIAL"):case GetCustomerTypesConstants("CustomerTypesConstants","DIPLOMAT"):t=Komodo.DocumentTypeEnum.OISTATEMENT;break;case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_NATIONALDEAL"):t=Komodo.DocumentTypeEnum.NATIONALDEAL}return t},messageCreateStatementsFailure:function(e){this.hideBusyIndicator(),Komodo.UI.warn(kl.value(this.localeBase+"messageCreateStatementsDeliveryFailure")+"messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"useCaseTitle"),kl.value(this.localeBase+"messageCreateStatementsDeliveryFailure"),Komodo.Controls.MessageBoxOkButtons,this,"id5798673","danger")},messageCreateStatementsError1:function(e){this.hideBusyIndicator(),Komodo.UI.warn(kl.value(this.localeBase+"errorMessage1")+"messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"useCaseTitle"),kl.value(this.localeBase+"errorMessage1"),Komodo.Controls.MessageBoxOkButtons,this,"id5798673","danger")},messageCreateStatementsError2:function(e){this.hideBusyIndicator(),Komodo.UI.warn(kl.value(this.localeBase+"errorMessage2")+"messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"useCaseTitle"),kl.value(this.localeBase+"errorMessage2"),Komodo.Controls.MessageBoxOkButtons,this,"id5798673","danger")},messageCreateStatementsError3:function(e){this.hideBusyIndicator(),Komodo.UI.warn(kl.value(this.localeBase+"errorMessage3")+"messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"useCaseTitle"),kl.value(this.localeBase+"errorMessage3"),Komodo.Controls.MessageBoxOkButtons,this,"id5798673","danger")},messageCreateStatementsError4:function(e){this.hideBusyIndicator(),Komodo.UI.warn(kl.value(this.localeBase+"errorMessage4")+"messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"useCaseTitle"),kl.value(this.localeBase+"errorMessage4"),Komodo.Controls.MessageBoxOkButtons,this,"id5798673","danger")},messageCreateStatementsError5:function(e){this.hideBusyIndicator(),Komodo.UI.warn(kl.value(this.localeBase+"errorMessage5")+"messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"useCaseTitle"),kl.value(this.localeBase+"errorMessage5"),Komodo.Controls.MessageBoxOkButtons,this,"id5798673","danger")},messageCreateStatementsError7:function(e){this.hideBusyIndicator(),Komodo.UI.warn(kl.value(this.localeBase+"errorMessage6")+"messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"useCaseTitle"),kl.value(this.localeBase+"errorMessage7"),Komodo.Controls.MessageBoxOkButtons,this,"id5798673","danger")},messageCreateStatementsError8:function(e){this.hideBusyIndicator(),Komodo.UI.warn(kl.value(this.localeBase+"errorMessage8")+"messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"useCaseTitle"),kl.value(this.localeBase+"errorMessage8"),Komodo.Controls.MessageBoxOkButtons,this,"id5798673","danger")},messageCreateStatementsError9:function(e){this.hideBusyIndicator(),Komodo.UI.warn(kl.value(this.localeBase+"errorMessage10")+"messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"requestStatement"),kl.value(this.localeBase+"errorMessage10"),Komodo.Controls.MessageBoxOkButtons,this,"id5798673","danger")},messageCreateStatementsError10:function(e){this.hideBusyIndicator(),Komodo.UI.warn(kl.value(this.localeBase+"errorMessage2")+"messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"requestStatement"),kl.value(this.localeBase+"errorMessage2"),Komodo.Controls.MessageBoxOkButtons,this,"id5798673","danger")},messageCreateStatementsError11:function(e){this.hideBusyIndicator(),Komodo.UI.warn(kl.value(this.localeBase+"errorMessage8")+"messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"requestStatement"),kl.value(this.localeBase+"errorMessage8"),Komodo.Controls.MessageBoxOkButtons,this,"id5798673","danger")},messageCreateStatementsError12:function(e){this.hideBusyIndicator(),Komodo.UI.warn(kl.value(this.localeBase+"errorMessage11")+"messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"requestStatement"),kl.value(this.localeBase+"errorMessage11"),Komodo.Controls.MessageBoxOkButtons,this,"id5798673","danger")},messageFault:function(e){this.hideBusyIndicator(),Komodo.UI.warn(kl.value(this.localeBase+"messageCreateStatementsDeliveryFailure")+"messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"useCaseTitle"),kl.value(this.localeBase+"messageCreateStatementsDeliveryFailure"),Komodo.Controls.MessageBoxOkButtons,this,"id5798673","danger")},messageReceived:function(){this.hideBusyIndicator()},messageDeliveryFailure:function(e){this.hideBusyIndicator(),Komodo.UI.warn(kl.value(this.localeBase+"messageCreateStatementsDeliveryFailure")+"messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"useCaseTitle"),kl.value(this.localeBase+"messageCreateStatementsDeliveryFailure"),Komodo.Controls.MessageBoxOkButtons,this,"id5798673","danger")},messageStatementCreatedReceived:function(e){this.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"useCaseTitle"),kl.value(this.localeBase+"statementCreated"))},messageFailureMessageEventReceived:function(e){this.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButtons,this,"id2366673","danger")},handleException:function(e,t,a,o){try{var n="Error in function ["+e+"]. Exception: "+t+".";a&&(Komodo.log(n),null!=t&&null!=t.stack&&Komodo.log(t.stack)),o&&Komodo.Controls.MessageBoxController.show("An error has occurred",n,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}catch(e){Komodo.log(e)}},getDateDiffrenceInDays:function(e,t){var a=new Date(e),o=new Date(t),n=o.getTime()-a.getTime();return Math.round(n/864e5)}}),Komodo.Application.EditPaymentDetailsView=Komodo.UI.View.extend({viewKey:"EditPaymentDetailsView",templateName:"EditPaymentDetailsView",didInsertElement:function(){this._super();var e=this.get("controller"),t=e.get("customerNumber"),a=e.get("accountno"),o=new plupload.Uploader({runtimes:"html5,flash,silverlight,html4",browse_button:"addDocuments",url:KomodoConfiguration.ibsApiUrl+e.get("loggedInCountryName")+"/UploadDownload/UploadAccountDocuments?customerNumber="+t+"&accountNumber="+a+"&documentType=",headers:{"komodo-sessiontoken":Komodo.Services.securityService.get("sessionToken")},filters:{max_file_size:"10mb",mime_types:[{title:"Image files",extensions:"jpg,gif,png,jpeg,JPG,GIF,PNG,JPEG"},{title:"Adobe And Document Files",extensions:"pdf,doc,xls,docx,xlsx"}]},init:{PostInit:function(){$("#uploadDocuments").click(function(){return $(o.files).each(function(e,t){2!==t.status&&4!==t.status||(t.status=1)}),o.uploadCanceled=!1,o.start(),!1})}.observes("editPaymentDetailsModel.supportingDocuments"),FilesAdded:function(e,t){var a=this.editPaymentDetailsController,o=this.editPaymentDetailsController.get("editPaymentDetailsModel");plupload.each(t,function(t){var n=!1;if($(o.supportingDocuments).each(function(e,o){o.get("documentName")===t.name&&(n=!0,a.set("isDocumentAvailable",!0))}),n)e.removeFile(t);else{var s=Komodo.Models.SupportingDocumentModel.create();s.set("documentName",t.name),s.set("documentSize",plupload.formatSize(t.size)),s.set("uploadPercentage",""),s.set("documentTypes",o.get("documentTypes")),s.set("documentType",""),s.set("uploadStatus","QUEUED"),s.set("documentSerialNumbers",a.get("documentSerialNumbers")),s.set("documentSerialNumber",void 0),s.set("documentAlreadyUploaded",!1),a.set("isDocumentAvailable",!0),o.get("supportingDocuments").pushObject(s)}}),a.set("isVerifiedBySupervisor",!1),a.set("verifyBySupervisorDone",!0),o.set("supervisorUsername",""),o.set("supervisorPassword",""),o.set("acceptDocumentation",!1)},UploadProgress:function(e,t){!1===e.uploadCanceled&&e.changeFileStatus(this.editPaymentDetailsController.get("editPaymentDetailsModel"),t)},FileUploaded:function(e,t,a){var o=JSON.parse(a.response)[0];e.changeFileStatus(this.editPaymentDetailsController.get("editPaymentDetailsModel"),t,o),1==this.editPaymentDetailsController.get("isDisableAHVOverride")&&this.editPaymentDetailsController.set("isDisableAHVOverride",!1),this.editPaymentDetailsController.set("isVerifiedBySupervisor",!1),this.editPaymentDetailsController.set("verifyBySupervisorDone",!0)},Error:function(t,a){t.uploadCanceled=!0,t.changeFileStatus(this.editPaymentDetailsController.get("editPaymentDetailsModel"),a.file),Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"technicalError"),a.code+" : "+a.message+(void 0===a.response||null===a.response?"":a.response),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")},BeforeUpload:function(a,o){if(!1===a.uploadCanceled){var n=this.editPaymentDetailsController;n.startProgress();var s=n.get("accountno");a.settings.url=KomodoConfiguration.ibsApiUrl+e.get("loggedInCountryName")+"/UploadDownload/UploadAccountDocuments?customerNumber="+t+"&accountNumber="+s+"&documentType=";var r=n.get("editPaymentDetailsModel");$(r.supportingDocuments).each(function(e,t){if(t.get("documentName")===o.name){var s=t.get("documentType");void 0!==s&&null!==s&&""!==s||(Komodo.Controls.MessageBoxController.show(kl.value(n.localEditPaymeDetail+"uploadDocuments"),kl.value(n.localEditPaymeDetail+"specifyDocumentType"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"),a.stop(),a.uploadCanceled=!0)}}),!1===a.uploadCanceled&&$(r.supportingDocuments).each(function(e,t){if(t.get("documentName")===o.name){a.settings.url=a.settings.url+t.get("documentType")+""}})}else a.stop()},UploadComplete:function(a,o){e.stopProgress(),a.uploadCanceled=!1;var n=Komodo.Models.SaveDocument.create(),s=Komodo.canonicalFacadeFactory(n,["ListOfDocument"]),r=[],i=Ember.get(e.editPaymentDetailsModel,"supportingDocuments");if(i.length>0){var l=!1;$.each(i,function(a,o){if("DONE"==o.uploadStatus&&0==o.get("documentAlreadyUploaded")){var n=Komodo.Models.Document.create();n.set("FileType",o.get("documentType")),n.set("DocumentURL",o.get("documentUrl"));var s=[],i=Komodo.Models.DocumentMetaData.create();i.set("DocumentMetaDataValueUri","CustomerId"),i.set("Value",t),s.pushObject(i);var l=Komodo.Models.DocumentMetaData.create();l.set("DocumentMetaDataValueUri","DocumentType"),l.set("Value",e.getDocumentTypeValue(o.get("documentType"))),o.set("documentTypeText",e.getDocumentTypeValue(o.get("documentType"))),s.pushObject(l);var c=Komodo.Models.DocumentMetaData.create();c.set("DocumentMetaDataValueUri","DocumentSerial"),c.set("Value",t),o.set("documentAlreadyUploaded",!0),s.pushObject(c),n.set("ListOfDocumentMetaData",s),r.pushObject(n)}});for(var c=0;c<i.length;c++){if("DONE"!=i[c].uploadStatus){l=!1;break}l=!0}r.length>0&&l?(1==this.editPaymentDetailsController.get("isDisableAHVOverride")&&this.editPaymentDetailsController.set("isDisableAHVOverride",!1),n.set("Country",this.editPaymentDetailsController.get("loggedInCountryId")),s.set("ListOfDocument",r),this.editPaymentDetailsController.publishRequestOnBus(n,"SaveCustomerDocumentEvent","v2"),this.editPaymentDetailsController.set("isVerifiedBySupervisor",!1),this.editPaymentDetailsController.set("verifyBySupervisorDone",!0),this.editPaymentDetailsController.overridePaymentDetails(this.editPaymentDetailsController.editPaymentDetailsModel,"ahvActionOverride")):l&&this.editPaymentDetailsController.overridePaymentDetails(this.editPaymentDetailsController.editPaymentDetailsModel,"ahvActionOverride")}}}});o.editPaymentDetailsController=this.get("controller"),this.get("controller.editPaymentDetailsModel").set("fileUploader",o),o.changeFileStatus=this.fileUploadStatus,o.init();var n=KomodoConfiguration.ibsApiUrl+e.get("loggedInCountryName")+"/UploadDownload/UploadAccountDocuments?customerNumber="+t+"&accountNumber="+a+"&documentType=",s=this.getNewFileUploader(this.get("controller"),"thirdPartyDocuments",n,"addThirdPatryDocs","uploadThirdPatryDocs",this.onThirdPartyDocsAdded,this.onThirdPartyDocProgress,this.onThirdPartyDocUploaded,this.onThirdPartyDocError,this.onThirdPartyDocBeforeUpload,this.onThirdPartyDocsUploadComplete);e.thirdPartyDocUploader=s,s.init()},onThirdPartyDocsAdded:function(e,t,a){Komodo.log("onThirdPartyDocsAdded"),void 0==e.get("thirdPartyDocuments")&&e.set("thirdPartyDocuments",Ember.A());for(var o=e.get("thirdPartyDocuments"),n=0;n<a.length;n++){var s=a[n];if(e.isDocumentNameExists(o,s.name))t.removeFile(s);else{var r=e.mapPluploadFileToDoc(s,"QUEUED");o.pushObject(r),Komodo.log("File Added: "+s.name)}}},onThirdPartyDocBeforeUpload:function(e,t,a){if(Komodo.log("onThirdPartyDocBeforeUpload"),Komodo.log(a.name),!1===t.uploadCanceled){e.startProgress();for(var o=e.get("thirdPartyDocuments"),n=0;n<o.length;n++){var s=o[n];if(s.get("documentName")===a.name){var r=s.get("documentType");if(Komodo.UI.propertyHelpers.isNullOrEmpty(r)){Komodo.Controls.MessageBoxController.show(kl.value(e.localEditPaymeDetail+"uploadDocuments"),kl.value(e.localEditPaymeDetail+"specifyDocumentType"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"),t.stop(),t.uploadCanceled=!0;break}t.settings.url=e.getUploadDocumentUrl(r)}}}else up.stop()},onThirdPartyDocProgress:function(e,t,a){Komodo.log("onThirdPartyDocProgress"),!1===t.uploadCanceled&&e.onThirdPartyDocStatusChange(a)},onThirdPartyDocUploaded:function(e,t,a,o){Komodo.log("onThirdPartyDocUploaded");var n=JSON.parse(o.response)[0];e.onThirdPartyDocStatusChange(a,n)},onThirdPartyDocError:function(e,t,a){Komodo.log("onThirdPartyDocError"),e.onThirdPartyDocStatusChange(a.file)},onThirdPartyDocsUploadComplete:function(e,t,a){e.stopProgress(),Komodo.log("onThirdPartyDocsUploadComplete"),t.uploadCanceled=!1,e.getDocumentPayload(e.get("thirdPartyDocuments")),e.set("editPaymentDetailsModel.isSaveButtonDisabled",!1)},filter:function(e,t){for(var a=Ember.A(),o=0;o<e.length;o++)1==t(e[o])&&a.addObject(e[o]);return a},fileUploadStatus:function(e,t,a){$(e.supportingDocuments).each(function(e,o){o.get("documentName")===t.name&&(o.set("uploadPercentage",t.percent+" %"),2===t.status?o.set("uploadStatus","UPLOADING"):4===t.status?(o.set("uploadStatus","FAILED"),o.set("uploadPercentage","0 %")):5===t.status&&(o.set("uploadStatus","DONE"),o.set("documentUrl",a)))})},getNewFileUploader:function(e,t,a,o,n,s,r,i,l,c,u){var d=new plupload.Uploader({runtimes:"html5,flash,silverlight,html4",browse_button:o,url:a,headers:{"komodo-sessiontoken":Komodo.Services.securityService.get("sessionToken")},filters:{max_file_size:"10mb",mime_types:[{title:"Image files",extensions:"jpg,gif,png,jpeg,JPG,GIF,PNG,JPEG"},{title:"Adobe And Document Files",extensions:"pdf,doc,xls,docx,xlsx"}]},init:{PostInit:function(){document.getElementById(n).onclick=function(){return void 0!=d.files&&d.files.length>0&&$(d.files).each(function(e,t){2!==t.status&&4!==t.status||(t.status=1)}),d.uploadCanceled=!1,d.start(),!1}},FilesAdded:function(t,a){s(e,t,a)},UploadProgress:function(t,a){r(e,t,a)},FileUploaded:function(t,a,o){i(e,t,a,o)},Error:function(t,a){l(e,t,a)},BeforeUpload:function(t,a){c(e,t,a)},UploadComplete:function(t,a){u(e,t,a)}}});return d.parentView=this,d}}),Komodo.Application.SearchPromptController=Komodo.UI.Controller.extend({init:function(){this._super(),Komodo.log("Constructing Search Prompt controller"),this.requiresDependency("_eventAggregator",{singleton:Komodo.Services.eventAggregator}),this.set("processVersion","v1.1"),this.set("processName","Search Prompt"),this.set("searchPromptModel",Komodo.Models.SearchPromptModel.create())},start:function(){this.set("searchPromptModel",Komodo.Models.SearchPromptModel.create()),this._super()},actions:{searchCustomer:function(){var e=this.get("searchPromptModel.customerUID");void 0==e||""==e.trim()?alert("Please provide Input for Search"):this.getEventAggregator().publish(Komodo.EventNames.searchRequested,{searchTerm:this.get("searchPromptModel.customerUID"),searchType:"general"})}},getEventAggregator:function(){return this.get("_eventAggregator")},stop:function(){this._super()}}),Komodo.Application.EditPaymentPlanView=Komodo.UI.View.extend({viewKey:"EditPaymentPlanView",templateName:"EditPaymentPlanView"}),
Komodo.Application.ReverseFinancialTransactionController=Komodo.UI.Controller.extend({localeFT:"locale.manageaccount:viewAccountInformation.",init:function(){this.set("processVersion","v1.1"),this.set("processName","Reversal Prompt"),this._super()},start:function(){var e=this;e.set("reversalPromptModel",Komodo.Services.uiService.getController("financialTransactions").reverseFinancialTransactionModel),e.set("toDateIsVisible",!0),e.set("typeOfReversal",[]),e.set("enablePeriodRefund",!1),Komodo.Services.featureToggleService.isEnabled("CustomerGlobal","SASpecificIDValidation").done(function(t){e.set("SASpecific",t)}).fail(function(e){Komodo.Services.log("Error while checking feature toggle. Error Details:"+e)}),e.getPeriodisableLedgerAccounts(),e.getJournalCaptureReasons();for(var t=0;t<e.reversalPromptModel.get("PeriodisableLedgerAccounts").length;t++)if(e.reversalPromptModel.get("ledgerAccountDescription")==e.reversalPromptModel.get("PeriodisableLedgerAccounts")[t].value){e.set("enablePeriodRefund",!0);break}!0===e.get("enablePeriodRefund")?(e.get("typeOfReversal").addObject(Ember.Object.create({value:"fullFTReversal",label:kl.value(e.localeFT+"fullReversal")})),e.get("typeOfReversal").addObject(Ember.Object.create({value:"partialAmountFT",label:kl.value(e.localeFT+"partialReversal")}))):(e.get("typeOfReversal").addObject(Ember.Object.create({value:"fullFTReversal",label:kl.value(e.localeFT+"fullReversal")})),e.get("typeOfReversal").addObject(Ember.Object.create({value:"partialAmountFT",label:kl.value(e.localeFT+"specificAmount")}))),e.reversalPromptModel.set("typeOfReversal","fullFTReversal"),e.reversalPromptModel.set("comment",void 0),e.reversalPromptModel.set("reasonForCapture",void 0),e.reversalPromptModel.set("amount",void 0),e.reversalPromptModel.set("fromRefundDate",void 0),e.reversalPromptModel.set("toRefundDate",void 0),e.reversalPromptModel.set("amount",void 0),e.registerValidation(),e._super()},registerValidation:function(){this.registerValidator(this.get("reversalPromptModel"),"amount",{limitValueToType:!0,type:"number",isRequired:!0}),this.registerValidator(this.get("reversalPromptModel"),"reasonForCapture",{isRequired:!0}),this.registerValidator(this.get("reversalPromptModel"),"comment",{isRequired:!0,displayName:kl.value(this.localeFT+"comment"),maxLength:420})},minValueCal:function(){if(Ember.isEmpty(this.get("reversalPromptModel.fromRefundDate")))this.set("toDateIsVisible",!0);else{this.set("toDateIsVisible",!1),this.set("validators.toRefundDateValidator.options.minDate",new Date(this.get("reversalPromptModel.fromRefundDate")));var e=new Date(this.getDateObjectFromString(this.get("reversalPromptModel.periodTo")));this.set("validators.toRefundDateValidator.options.maxDate",new Date(e.setDate(e.getDate()+1)))}}.observes("reversalPromptModel.fromRefundDate"),getPeriodisableLedgerAccounts:function(){var e=this;Komodo.Services.cachedDataService.fetch("PeriodisableLedgerAccounts").done(function(t){var a=e.get("reversalPromptModel");$.each(t,function(e,t){a.get("PeriodisableLedgerAccounts").addObject(t)})}).fail(function(){Komodo.UI.error("[ERROR] : could not retrieve Periodisable ledger account from CDM")})},getJournalCaptureReasons:function(){var e,t=this;Komodo.Services.cachedDataService.fetch("JournalCaptureReason").done(function(a){if(a){e=t.get("SASpecific")?JSON.parse(a).JournalCaptureReasons.JournalCaptureReason:a;var o;$.each(e,function(e,a){o=t.get("SASpecific")?{Key:a.CanonicalKey,Value:a.CanonicalValue}:{Key:a.key,Value:a.value},t.reversalPromptModel.reasonsForCapture.push(o)})}}).fail(function(){Komodo.UI.error("[ERROR] : could not retrieve Journal Capture reasons from CDM")})},getDateObjectFromString:function(e){var t,a=new Date;return e&&(e.indexOf("-")>=0?(t=e.split("-"),a=new Date(new Date(parseInt(t[2],10),parseInt(t[1],10)-1,parseInt(t[0],10)))):e.indexOf("/")>=0&&(t=e.split("/"),a=new Date(new Date(parseInt(t[2],10),parseInt(t[1],10)-1,parseInt(t[0],10))))),a},getDateFromJavascriptDate:function(e){function t(e){var t=e.toString();return t.length<2?"0"+t:t}var a=e.getFullYear(),o=t(e.getMonth()+1);return t(e.getDate())+"-"+o+"-"+a},selectedTypeOfReversal:function(){if("fullFTReversal"==this.get("reversalPromptModel.typeOfReversal"))this.set("reversalPromptModel.typeOfReversalSelected",!1),this.set("reversalPromptModel.refundSelected",!1),this.set("reversalPromptModel.amount",void 0),this.set("reversalPromptModel.fromRefundDate",void 0),this.set("reversalPromptModel.toRefundDate",void 0),this.set("reversalPromptModel.fullReversal",!0);else if("partialAmountFT"==this.get("reversalPromptModel.typeOfReversal"))if(this.set("reversalPromptModel.fullReversal",!1),!0===this.get("enablePeriodRefund")){this.set("reversalPromptModel.typeOfReversalSelected",!1),this.set("reversalPromptModel.refundSelected",!0),this.registerValidator(this.get("reversalPromptModel"),"fromRefundDate",{type:"date",isRequired:!0,displayName:kl.value(this.localeFT+"fromDate")}),this.registerValidator(this.get("reversalPromptModel"),"toRefundDate",{type:"date",isRequired:!0,displayName:kl.value(this.localeFT+"toDate")});var e=new Date(this.getDateObjectFromString(this.get("reversalPromptModel.periodFrom")));this.set("validators.fromRefundDateValidator.options.minDate",new Date(e.setDate(e.getDate())));var t=new Date(this.getDateObjectFromString(this.get("reversalPromptModel.periodTo")));this.set("validators.fromRefundDateValidator.options.maxDate",new Date(t.setDate(t.getDate()+1))),this.set("reversalPromptModel.amount",0)}else this.set("reversalPromptModel.typeOfReversalSelected",!0),this.set("reversalPromptModel.refundSelected",!1),this.set("reversalPromptModel.fromRefundDate",void 0),this.set("reversalPromptModel.toRefundDate",void 0),this.set("reversalPromptModel.amount",void 0)}.observes("reversalPromptModel.typeOfReversal"),actions:{reversePayment:function(){var e,t,a=this.reversalPromptModel.get("reasonForCapture"),o=this.reversalPromptModel.get("comment"),n=this.reversalPromptModel.get("amount");if(this.set("validatingInput",[]),1==this.reversalPromptModel.get("fullReversal")){this.set("reversalPromptModel.isPeriodizedReversal",!1);var s=this.reversalPromptModel.get("originalAmount");n=s.split(" ")[1],this.reversalPromptModel.set("amount",n)}else if(1==this.get("enablePeriodRefund"))this.set("reversalPromptModel.isPeriodizedReversal",!0),this.reversalPromptModel.get("fromRefundDate")||this.get("validatingInput").push("\n"+kl.value(this.localeFT+"fromDateRequired")),this.reversalPromptModel.get("toRefundDate")||this.get("validatingInput").push("\n"+kl.value(this.localeFT+"toDateRequired")),moment(this.reversalPromptModel.get("fromRefundDate")).isValid()&&moment(this.reversalPromptModel.get("toRefundDate")).isValid()?(e=this.getDateFromJavascriptDate(new Date(this.reversalPromptModel.get("fromRefundDate"))),t=this.getDateFromJavascriptDate(new Date(this.reversalPromptModel.get("toRefundDate"))),this.reversalPromptModel.set("fromRefundDate",e),this.reversalPromptModel.set("toRefundDate",t)):this.get("validatingInput").push("\n"+kl.value(this.localeFT+"validFromAndToDateRequired"));else{this.set("reversalPromptModel.isPeriodizedReversal",!1);var s=this.reversalPromptModel.get("originalAmount"),r=parseFloat(s.substring(4)),i=parseFloat(n);if(r<0){var l=r.toString().substring(1);r=parseFloat(l)}void 0!=this.reversalPromptModel.get("amount")&&""!=this.reversalPromptModel.get("amount")||this.get("validatingInput").push("\n"+kl.value(this.localeFT+"amountInvalid")),r<i&&this.get("validatingInput").push("\n"+kl.value(this.localeFT+"amountExceeded"))}void 0!=a&&""!=a||this.get("validatingInput").push("\n"+kl.value(this.localeFT+"reasonForCaptureRequired")),void 0!=o&&""!=o||this.get("validatingInput").push("\n"+kl.value(this.localeFT+"commentRequired")),void 0!=o&&""!=o&&o.length>420&&this.get("validatingInput").push("\n"+kl.value(this.localeFT+"commentExceed420")),this.get("validatingInput").length>0?alert(this.get("validatingInput").join("")):Komodo.Services.eventAggregator.publish("PublishCommentsToRedirectViewFinanceTransactions",this.reversalPromptModel)}}}),Komodo.Application.FinancialTransactionDetailsView=Komodo.UI.View.extend({viewKey:"FinancialTransactionDetailsView",templateName:"FinancialTransactionDetailsView"}),Komodo.Application.ReverseArchivedFinancialTransactionController=Komodo.UI.Controller.extend({localeArchiveFT:"locale.manageaccount:archivedFinancialTransactions.",init:function(){this.set("processVersion","v1.1"),this.set("processName","Archived Reversal Prompt"),this._super()},start:function(){this.set("reversalPromptModel",Komodo.Services.uiService.getController("archivedFinancialTransactions").reverseArchivedFinancialTransactionModel),this.set("typeOfReversal",[]),this.get("typeOfReversal").addObject(Ember.Object.create({value:"0",label:kl.value(this.localeArchiveFT+"fullReversal")})),this.get("typeOfReversal").addObject(Ember.Object.create({value:"1",label:kl.value(this.localeArchiveFT+"partialReversal")})),this.reversalPromptModel.set("typeOfReversal","0"),this.reversalPromptModel.set("comment",void 0),this.reversalPromptModel.set("amount",void 0),this.reversalPromptModel.set("reasonForCapture",void 0),this.getJournalCaptureReasons(),this.registerValidation(),this._super()},registerValidation:function(){this.registerValidator(this.get("reversalPromptModel"),"amount",{limitValueToType:!0,type:"number",isRequired:!0}),this.registerValidator(this.get("reversalPromptModel"),"reasonForCapture",{isRequired:!0}),this.registerValidator(this.get("reversalPromptModel"),"comment",{isRequired:!0,displayName:kl.value(this.localeArchiveFT+"comment")})},getJournalCaptureReasons:function(){var e=this;Komodo.Services.cachedDataService.fetch("JournalCaptureReason").done(function(t){t&&$.each(t,function(t,a){var o={Key:a.key,Value:a.value};e.reversalPromptModel.reasonsForCapture.push(o)})}).fail(function(){Komodo.UI.error("[ERROR] : could not retrieve Journal Capture reasons from CDM")})},selectedTypeOfReversal:function(){"0"==this.reversalPromptModel.get("typeOfReversal")&&(this.reversalPromptModel.set("typeOfReversalSelected",!1),this.reversalPromptModel.set("amount",void 0)),"1"==this.reversalPromptModel.get("typeOfReversal")&&this.reversalPromptModel.set("typeOfReversalSelected",!0)}.observes("reversalPromptModel.typeOfReversal"),actions:{reverseArchivedFinancialTransaction:function(){var e,t=this.reversalPromptModel.get("reasonForCapture")+" - "+this.reversalPromptModel.get("comment"),a=this.reversalPromptModel.get("originalAmount"),o=a.split(" "),n=o[1];if(this.set("validatingInput",[]),"0"==this.reversalPromptModel.get("typeOfReversal"))this.reversalPromptModel.set("amount",n);else{e=this.reversalPromptModel.get("amount"),e&&(n<0?this.reversalPromptModel.set("amount",-1*e):this.reversalPromptModel.set("amount",e));var s=parseFloat(n),r=parseFloat(e);if(s<0){var i=s.toString().substring(1);s=parseFloat(i)}void 0!=this.reversalPromptModel.get("amount")&&""!=this.reversalPromptModel.get("amount")||this.get("validatingInput").push("\n"+kl.value(this.localeArchiveFT+"amountInvalid")),s<r&&this.get("validatingInput").push("\n"+kl.value(this.localeArchiveFT+"amountExceeded"))}void 0!=this.reversalPromptModel.get("reasonForCapture")&&""!=this.reversalPromptModel.get("reasonForCapture")||this.get("validatingInput").push("\n"+kl.value(this.localeArchiveFT+"reasonForCaptureRequired")),void 0!=this.reversalPromptModel.get("comment")&&""!=this.reversalPromptModel.get("comment")||this.get("validatingInput").push("\n"+kl.value(this.localeArchiveFT+"commentRequired")),void 0!=t&&""!=t&&t.length>420&&this.get("validatingInput").push("\n"+kl.value(this.localeArchiveFT+"commentExceed420")),this.get("validatingInput").length>0?alert(this.get("validatingInput").join("")):(this.reversalPromptModel.set("originalAmount",n),Komodo.Services.eventAggregator.publish("PublishCommentsToRedirectViewArchivedFinancialTransactions",this.reversalPromptModel))}}}),Komodo.Application.FinancialTransactionsView=Komodo.UI.View.extend({viewKey:"FinancialTransactionsView",templateName:"FinancialTransactionsView"}),Komodo.Application.AllocateTransferView=Komodo.UI.View.extend({viewKey:"AllocateTransferView",templateName:"AllocateTransferView"}),Komodo.Application.InvoiceDetailsView=Komodo.UI.View.extend({viewKey:"InvoiceDetailsView"}),Komodo.Application.UpdateFinancialTransactionStatusView=Komodo.UI.View.extend({viewKey:"UpdateFinancialTransactionStatusView",templateName:"UpdateFinancialTransactionStatusView"}),Komodo.Application.ManualDebitOrCreditView=Komodo.UI.View.extend({viewKey:"ManualDebitOrCreditView",templateName:"ManualDebitOrCreditView"}),Komodo.Application.PaymentPlanApplicationsView=Komodo.UI.View.extend({viewKey:"PaymentPlanApplicationsView",templateName:"PaymentPlanApplicationsView"}),Komodo.Application.AdhocDebitOrderUnblockView=Komodo.UI.View.extend({viewKey:"AdhocDebitOrderUnblockView",templateName:"AdhocDebitOrderUnblockView"}),Komodo.Application.PaymentPlanDetailsView=Komodo.UI.View.extend({viewKey:"PaymentPlanDetailsView",templateName:"PaymentPlanDetailsView"}),Komodo.Application.PaymentPlanApplicationsController=Komodo.UI.Controller.extend({idNumber:void 0,dppProducts:[],currencyMnemonics:void 0,disbleViewButton:!1,customerNumber:void 0,init:function(){this._super(),this.set("allApps",[])},start:function(){this._super(),this.set("customerNumber",void 0),this.set("paymentPlanAppModel",Komodo.Models.PaymentPlanApplicationsModel.create()),this.set("currencyMnemonics",void 0),this.getAllDPPProducts(),Komodo.Services.securityService.hasPermission("clarity://paymentPlansView/viewOnly")?this.set("disbleViewButton",!0):this.set("disbleViewButton",!1)},getAllDPPProducts:function(){var e=this;Komodo.Services.queryService.getJSON("/CreditApplication/GetAllDPPProducts").done(function(t){if(null!=t){e.set("dppProducts",[]);for(var a=0;a<t.length;a++){var o={key:t[a].Name,label:t[a].Description};e.dppProducts.push(o)}e.fillApplicationData()}}).error(function(e){var t=JSON.stringify(e);Komodo.log("retrievePrintDocumentInfo ajax call failed. Error: "+t)})},getNewProcessID:function(){this.startNewProcess()},fillApplicationGrid:function(e){var t=this;t.set("allApplications",[]),Ember.isEmpty(e)||t.fillPaymentPlanGrid(e)},fillPaymentPlanGrid:function(e){var t=this;Komodo.Services.queryService.getJSON("/CreditApplication/GetProductInstallmentPlans?customerNumber="+e).done(function(e){null!=e&&($.each(e,function(e,a){var o=null;t.set("currencyMnemonics",a.CurrencyMnemonic),o=Ember.Object.create({accountNumber:null!=a.FinancialAccountId&&void 0!=a.FinancialAccountId?a.FinancialAccountId:"-",product:a.ProductName,productName:null!=a.ProductName&&void 0!=a.ProductName?t.getProductDescription(a.ProductName):"-",deviceNumber:null!=a.ProvisionedDevices&&void 0!=a.ProvisionedDevices?a.ProvisionedDevices:"-",activationDate:null!=a.CreationDate&&void 0!=a.CreationDate?t.getFormattedDate(a.CreationDate):"-",numberOfInstallment:a.InstalmentsInPlan,instalmentsInvoiced:a.InstalmentsInvoiced,instalmentsNotYetInvoiced:a.InstalmentsNotYetInvoiced,paymentPlanTotal:a.CurrencyMnemonic+" "+parseFloat(a.PlanTotalAmount).toFixed(2),amountInvoiced:a.CurrencyMnemonic+" "+parseFloat(a.AmountInvoiced).toFixed(2),statusDescription:" - ",unpaidBalance:a.CurrencyMnemonic+" "+parseFloat(a.AmountNotYetInvoiced).toFixed(2),instalmentAmount:a.CurrencyMnemonic+" "+parseFloat(a.InstalmentAmount).toFixed(2),productId:a.ProductId,productInstallmentPlanId:a.ProductInstallmentPlanId,detail:a.ProductPlanDetails}),t.get("allApplications").pushObject(o)}),t.GetFinantialAccountStatus())}).error(function(e){var a=JSON.stringify(e);Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:paymentPlans.listOfDevicePaymentPlans"),a,Komodo.Controls.MessageBoxOkButtons,t,"authmbx","danger")})},GetFinantialAccountStatus:function(){var e=this,t=e.get("allApplications");$.each(t,function(t,a){Komodo.Services.queryService.getJSON("/CreditApplication/GetFinantialAccountStatus?financialAccountId="+a.accountNumber).done(function(o){null!=o&&(a.statusDescription=o,0===t&&e.set("allApplications",[]),e.get("allApplications").pushObject(a))}).error(function(t){var a=JSON.stringify(t);Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:paymentPlans.listOfDevicePaymentPlans"),a,Komodo.Controls.MessageBoxOkButtons,e,"authmbx","danger")})})},fillApplicationData:function(){var e=this;e.set("allApps",[]);var t=Komodo.Services.ProductAndServiceMaintenanceHelper.create().getCustomerIdToRetrieveData();if(Ember.isEmpty(t)){if(null!=e.get("idNumber")||void 0!=e.get("idNumber")){var a="customerNumber=";a+="",a+="&idNumber=",a+=e.get("idNumber"),a+="&applicationStartDate=",a+="",a+="&applicationEndDate=",a+="",a+="&applicationStatus=",a+=""}}else{var a="customerNumber=";a+=t,a+="&idNumber=",a+="&applicationStartDate=",a+="",a+="&applicationEndDate=",a+="",a+="&applicationStatus=",a+=""}Komodo.Services.queryService.getJSON("/CreditApplication/SearchCreditApplications?"+a).done(function(t){null!=t&&(Ember.isEmpty(t[0].CreditApplicationDetail.ICCCustNumber)||(e.fillApplicationGrid(t[0].CreditApplicationDetail.ICCCustNumber),e.set("customerNumber",t[0].CreditApplicationDetail.ICCCustNumber)),$.each(t,function(t,a){var o=null;o=0==a.CreditDetails.length?Ember.Object.create({applicationId:a.ApplicationDetail.ApplicationId,createdDate:e.getFormattedDate(a.ApplicationDetail.CreatedDate),productName:Ember.isEmpty(a.CreditApplicationDetail.ProductTaken)?"-":e.getProductDescription(a.CreditApplicationDetail.ProductTaken),statusDescription:a.ApplicationDetail.StatusDescription,highestProductQualified:"-",creditVetting:"-",internalVetting:null!=a.ApprovalDetails.InternalVetting?a.ApprovalDetails.InternalVetting:"-"}):Ember.Object.create({applicationId:a.ApplicationDetail.ApplicationId,createdDate:e.getFormattedDate(a.ApplicationDetail.CreatedDate),productName:Ember.isEmpty(a.CreditApplicationDetail.ProductTaken)?"-":e.getProductDescription(a.CreditApplicationDetail.ProductTaken),statusDescription:a.ApplicationDetail.StatusDescription,highestProductQualified:e.getProductDescription(a.CreditDetails[0].HighestProductQualified),creditVetting:1==a.CreditDetails[0].IsQualified?"Yes":"No",internalVetting:null!=a.ApprovalDetails.InternalVetting?a.ApprovalDetails.InternalVetting:"-"}),e.get("allApps").pushObject(o)}))}).error(function(e){})},getProductDescription:function(e){var t=this,a="";return t.dppProducts.forEach(function(t){t.key==e&&(a=t.label)}),a},stop:function(){this.set("idNumber",void 0),this.set("customerNumber",void 0),Ember.set(this,"allApps",[]),Ember.set(this,"allApplications",[]),this._super()},getFormattedDate:function(e){var t="";if("0001-01-01T00:00:00"===e)return"";if(e){var a=e.split("T"),o=new Date(a[0]),n=o.getDate();n=n<10?"0"+n.toString():n.toString();var s=o.getMonth()+1;s=s<10?"0"+s.toString():s.toString();t=n+"-"+s+"-"+o.getFullYear()}return t},getCreditDetails:function(e){var t=this;Komodo.Services.uiService.getController("paymentPlanApplicationDetails").set("applicationId",e.applicationId),t.transitionToRoute("/paymentPlanApplicationDetails")},getDevicePlanDetails:function(e){var t=this,a=Komodo.Services.uiService.getController("devicePlanDetail");a.set("productId",e.productId),a.set("product",e.productName),a.set("paymentPlanTotal",e.paymentPlanTotal),a.set("amountPerInstalment",e.instalmentAmount),a.set("detail",e.detail),a.set("currencyMnemonics",t.get("currencyMnemonics"));var o=e.numberOfInstallment-e.instalmentsInvoiced;a.set("numberOfRemainingInstalment",o),t.transitionToRoute("/devicePlanDetail")},manageDevicePaymentPlan:function(e){var t=this,a=Komodo.Services.uiService.getController("manageDevicePaymentPlan");a.set("productId",e.productId),a.set("product",e.product),a.set("paymentPlanTotal",e.paymentPlanTotal),a.set("amountPerInstalment",e.instalmentAmount),a.set("detail",e.detail),a.set("currencyMnemonics",t.get("currencyMnemonics")),a.set("numberOfInstallment",e.numberOfInstallment),a.set("deviceNumber",e.deviceNumber),a.set("accountNumber",e.accountNumber),a.set("customerNumber",t.get("customerNumber")),a.set("productInstallmentPlanId",e.productInstallmentPlanId),a.set("payentPlanApllicationStatus",e.statusDescription);var o=e.numberOfInstallment-e.instalmentsInvoiced;a.set("numberOfRemainingInstalment",o),t.transitionToRoute("/manageDevicePaymentPlan")},link:function(){return[{href:"#/getItOnPaymentPlan",title:kl.value("locale.manageAccount.paymentPlan:paymentPlanApplications.newPaymentPlanApplication")}]}.property(),actions:{redirect:function(e){this.getCreditDetails(e.content)},redirectToPlan:function(e){this.getDevicePlanDetails(e.content)},managePlan:function(e){this.manageDevicePaymentPlan(e.content)}}}),Komodo.Application.PaymentPlanView=Komodo.UI.View.extend({viewKey:"PaymentPlanView",templateName:"PaymentPlanView"}),Komodo.Application.PendingJournalsView=Komodo.UI.View.extend({viewKey:"PendingJournalsView",templateName:"PendingJournalsView"}),Komodo.Application.ManualDebitOrCreditController=Komodo.UI.Controller.extend({localeBase:"locale.manageaccount:manualDebitOrCredit.",localeRefund:"locale.manageaccount:refund.",init:function(){this._super(),Komodo.log("Constructing Manual Debit Or Credit controller"),this.set("processVersion","v1.1"),this.set("processName","Manual Debit Or Credit")},start:function(){var e=this;this.set("manualDebitCreditModel",Komodo.Models.ManualDebitOrCreditModel.create());var t=this.get("manualDebitCreditModel"),a=Komodo.Services.customerProfileService.getCustomerPersonalDetail();void 0!==a&&null!==a&&(t.set("country",e.getCountry()),t.set("language",e.getCurrentLanguage()),t.set("customerNumber",a.customerNo),t.set("customerClass",a.customerClass),Komodo.Services.featureToggleService.isEnabled("ManageAccount","ManualDebitOrCreditSASpecific").done(function(a){if(e.set("manualDebitOrCreditSASpecific",a),a){var o=Komodo.Services.securityService.hasPermission("clarity://billingAndCollections/allowed");t.set("billingAndCollections",o);var n=Komodo.Services.securityService.hasPermission("clarity://manageAccountView/viewOnly");t.set("viewOnlyUsers",n)}else t.set("billingAndCollections",!0)}).fail(function(){Komodo.log("Error while calling feature toggle")}),Komodo.Services.featureToggleService.isEnabled("ManageAccount","ManualDebitOrCreditAmountRestriction").done(function(t){e.set("manualDebitOrCreditAmountRestriction",t),t&&e.set("manualDebitCreditAmountLimit",GetClarityConstants("ManageAccountConstants","manualDebitOrCreditConstants.manualDebitOrCredit.maxAmount").toString())}).fail(function(){Komodo.log("Error while calling feature toggle")}),Komodo.Services.featureToggleService.isEnabled("ManageAccount","ManualDebitOrCreditZeroAmountCheck").done(function(t){e.set("manualDebitOrCreditZeroAmountCheck",t)}).fail(function(){Komodo.log("Error while calling feature toggle")}),this.getJournalCaptureReasonsfromCDM(),this.getLedgerAccountsfromCDM(),this.registerValidation(),this.retrieveAccounts(),this.retrieveDevices()),this._super()},getCountry:function(){return Komodo.Services.uiService.getController("application").get("_selectedCountryId")},getCurrentLanguage:function(){return Komodo.Services.localizationService.getCurrentLanguage()},getLedgerAccountsfromCDM:function(){var e,t=this,a=t.get("manualDebitCreditModel");e=a.get("billingAndCollections")?"ManualLedgerAccount":"HighRiskLedgerAccounts",Komodo.Services.cachedDataService.fetch(e).done(function(e){t.set("ledgerAccountList",[]),$.each(e,function(e,a){var o={Key:a.key,Value:a.value};t.ledgerAccountList.push(o)})}).fail(function(){Komodo.UI.error("[ERROR] : could not retrieve Manual Ledger Accounts from CDM")})},getJournalCaptureReasonsfromCDM:function(){var e=this;Komodo.Services.cachedDataService.fetch("JournalCaptureReason").done(function(t){if(e.set("reasonsForCapture",[]),!0===e.get("manualDebitOrCreditSASpecific")){var a=JSON.parse(t);$.each(a.JournalCaptureReasons.JournalCaptureReason,function(t,a){var o={Key:a.CanonicalKey,Value:a.CanonicalValue};e.reasonsForCapture.push(o)})}else $.each(t,function(t,a){var o={Key:a.key,Value:a.value};e.reasonsForCapture.push(o)})}).fail(function(){Komodo.UI.error("[ERROR] : could not retrieve Journal Capture reasons from CDM")})},registerValidation:function(){this.registerValidator(this.get("manualDebitCreditModel"),"amount",{limitValueToType:!0,type:"number",isRequired:!0}),this.registerValidator(this.get("manualDebitCreditModel"),"ledgerAccount",{isRequired:!0}),this.registerValidator(this.get("manualDebitCreditModel"),"reasonForCapture",{isRequired:!0}),this.registerValidator(this.get("manualDebitCreditModel"),"comment",{isRequired:!0,displayName:kl.value(this.localeBase+"comment"),maxLength:420})},retrieveAccounts:function(){var e,t,a=this,o=this.get("manualDebitCreditModel");Komodo.Services.queryService.refreshUserData(),Komodo.Services.queryService.getJSON("/AccountProfile/Get/"+a.manualDebitCreditModel.get("customerNumber"),{async:!1}).done(function(n){if(a.set("accountNumberList",[]),n.Account.length>=1){o.set("financialAccounts",n.Account);for(var s=Komodo.Services.customerProfileService.get("accountType").AccountTypes.AccountType,r=0;r<o.get("financialAccounts").length;r++){if(null!==o.get("financialAccounts")[r].AccountTypeDescription)for(var i=0;i<s.length;i++)if(parseInt(s[i].CanonicalKey)===parseInt(o.get("financialAccounts")[r].Type)){t=s[i].AccountTypeDescription;break}e=o.get("customerClass")===GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_COMMERCIAL")||o.get("customerClass")===GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_CSI")?{Key:o.get("financialAccounts")[r].Number+" - "+o.get("financialAccounts")[r].Name,Value:o.get("financialAccounts")[r].Number,IsDefault:o.get("financialAccounts")[r].IsDefault}:{Key:o.get("financialAccounts")[r].Number+" - "+t,Value:o.get("financialAccounts")[r].Number,IsDefault:o.get("financialAccounts")[r].IsDefault},a.accountNumberList.push(e)}var l=a.get("accountNumberList").sort(function(e,t){return e.IsDefault===t.IsDefault?0:e.IsDefault?-1:1});o.set("accountNumber",l[0].Value)}else Komodo.Controls.MessageBoxController.show(kl.value(a.localeBase+"ajaxFinancialAccountsError"),kl.value(a.localeBase+"financialAccountNotFound"),Komodo.Controls.MessageBoxOkButtons,a,"Message","warning")}).error(function(e){var t;t=e.responseJSON.Message?e.responseJSON.Message:e.responseJSON,Komodo.Controls.MessageBoxController.show(kl.value(a.localeBase+"ajaxFinancialAccountsError"),t,Komodo.Controls.MessageBoxOkButtons,a,"Message","warning")})},retrieveDevices:function(){var e,t=this,a=t.get("manualDebitCreditModel"),o=a.get("customerNumber"),n=a.get("accountNumber"),s=a.get("financialAccounts");if(void 0!==o&&(!0===t.get("manualDebitOrCreditSASpecific")&&!1===a.get("viewOnlyUsers")?t.checkIfRefundRequestIsInProgress(o,n):t.manualDebitCreditModel.set("disableJournalsButton",!1),1!==parseInt(a.get("customerClass")))){t.set("deviceList",[]);for(var r=0;r<s.length;r++)if(parseInt(s[r].UID)===parseInt(n))for(var i=0;i<s[r].ListOfAgreement.Agreement.length;i++)for(var l=s[r].ListOfAgreement.Agreement,c=0;c<l[i].ListOfHardware.Hardware.length;c++){var u=l[i].ListOfHardware.Hardware;e=void 0!==u[c].LinkedSmartcard&&""!==u[c].LinkedSmartcard?{smartCard:u[c].LinkedSmartcard}:{smartCard:u[c].SerialNumber},t.deviceList.push(e)}}}.observes("manualDebitCreditModel.accountNumber"),checkIfRefundRequestIsInProgress:function(e,t){var a=this,o=a.get("manualDebitCreditModel");Komodo.Services.queryService.getJSON("Journal/GetPendingRefundRequestsByCustomerId?token=token&customerNumber="+e.trim(),{async:!1}).done(function(e){if(e.AccountNumbers.length>0&&null!==e.AccountNumbers[0])for(var n=0;n<e.AccountNumbers.length;n++)if(parseInt(t)===parseInt(e.AccountNumbers[n].FINANCIALACCOUNTID)){o.set("disableJournalsButton",!0),o.set("pendingRefundNotification",kl.value(a.localeRefund+"pendingRefund",{AccountNumber:t}));break}}).error(function(e){o.set("disableJournalsButton",!0);var t;t=e.responseJSON.Message?e.responseJSON.Message:e.responseJSON,Komodo.Controls.MessageBoxController.show(kl.value(a.localeRefund+"ajaxPendingRefundRequests"),t,Komodo.Controls.MessageBoxOkButtons,a,"message","warning")})},publishManualAdjustment:function(){var e=this,t=Komodo.Services.manageAccountService,a=Komodo.Models.CreateManualAdjustmentTransactions.create(),o=Komodo.canonicalFacadeFactory(a,["Country","BaseAmount","FromAccountUID","ToAccountUID","FromCustomerUID","ToCustomerUID","LedgerAccountUID","OriginalAmount","Description","FinancialTransactionUID","FinancialTransactionType","Comment","Language"]),n=Komodo.Models.Price.create();n.set("Value",e.manualDebitCreditModel.amount),n.set("CurrencyCode","0"),n.set("ValueWithoutTax",e.manualDebitCreditModel.amount);var s=this.getlistOfTax();n.set("ListOfTax",s);var r=e.manualDebitCreditModel.get("accountNumber").toString();o.set("Country",e.manualDebitCreditModel.get("country")),o.set("BaseAmount",n),o.set("FromAccountUID",r),o.set("FromCustomerUID",e.manualDebitCreditModel.get("customerNumber")),o.set("LedgerAccountUID",e.manualDebitCreditModel.get("ledgerAccount")),o.set("FinancialTransactionType","Journal"),o.set("Comment",e.manualDebitCreditModel.get("reasonForCapture")+" - "+e.manualDebitCreditModel.get("comment")),o.set("Language",e.manualDebitCreditModel.get("language")),e.startNewProcess(),t.publishEvent(e,a,"CreateManualAdjustmentTransactions","v1"),e.showBusyIndicator()},messageCreateManualAdjustmentTransactionsReceived:function(e){Komodo.log(e)},messageCreateManualAdjustmentTransactionsDeliveryFailure:function(e){Komodo.log(e)},messageCreateManualAdjustmentTransactionsFault:function(e){Komodo.log(e)},messageManualAdjustmentTransactionsCreatedReceived:function(e){var t=this;this.hideBusyIndicator(),"True"===e.ResponseMessage.Payload.IsPendingApproval?(Komodo.Controls.MessageBoxController.show(kl.value(t.localeBase+"manualSuccess"),kl.value(t.localeBase+"approvalRequest",{amount:t.manualDebitCreditModel.amount}),null,t,"id123456","success"),this.clearData()):(Komodo.Controls.MessageBoxController.show(kl.value(t.localeBase+"manualSuccess"),kl.value(t.localeBase+"manualRequest",{amount:t.manualDebitCreditModel.amount}),null,t,"id123456","success"),this.clearData())},messageManualAdjustmentTransactionsCreatedDeliveryFailure:function(e){Komodo.log(e)},messageManualAdjustmentTransactionsCreatedFault:function(e){Komodo.log(e)},messageReceived:function(e){Komodo.log(e)},messageDeliveryFailure:function(e){Komodo.log(e)},messageFault:function(e){Komodo.log(e)},messageFailureMessageEventReceived:function(e){var t=this;this.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(t.localeBase+"manualFailure"),e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,null,t,"id123456","danger")},getlistOfTax:function(){return Komodo.Models.Tax.create()},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,3e5,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},clearData:function(){this.manualDebitCreditModel.set("amount",void 0),this.manualDebitCreditModel.set("ledgerAccount",void 0),this.manualDebitCreditModel.set("comment",void 0),this.manualDebitCreditModel.set("reasonForCapture",void 0)},userName:function(){return Komodo.Services.securityService.get("domainUserName").substring(3)},actions:{createJournal:function(){var e=this;e.set("validatingInput",[]),e.set("amountExceeded",!1),
e.manualDebitCreditModel.get("amount")?isNaN(parseFloat(e.manualDebitCreditModel.amount))?e.get("validatingInput").push("\t\t"+kl.value(e.localeBase+"amountInvalid")+"<br>"):void 0!==e.get("manualDebitOrCreditZeroAmountCheck")&&!0===e.get("manualDebitOrCreditZeroAmountCheck")&&0===parseFloat(e.manualDebitCreditModel.amount)&&e.get("validatingInput").push("\t\t"+kl.value(e.localeBase+"amountInvalid")+"<br>"):e.get("validatingInput").push("\t\t"+kl.value(e.localeBase+"amountRequired")+"<br>"),e.manualDebitCreditModel.get("ledgerAccount")||e.get("validatingInput").push("\t\t"+kl.value(e.localeBase+"selectLedgerAccount")+"<br>"),e.manualDebitCreditModel.get("reasonForCapture")&&""!==e.manualDebitCreditModel.get("reasonForCapture")||e.get("validatingInput").push(kl.value(e.localeBase+"reasonForCaptureRequired")+"<br/>"),void 0!==e.manualDebitCreditModel.get("comment")&&""!==e.manualDebitCreditModel.get("comment")||e.get("validatingInput").push("\t\t"+kl.value(e.localeBase+"commentRequired")+"<br>"),void 0!==e.manualDebitCreditModel.get("comment")&&""!==e.manualDebitCreditModel.get("comment")&&e.manualDebitCreditModel.get("comment").length>420&&e.get("validatingInput").push("\t\t"+kl.value(e.localeBase+"commentExceed420")),void 0!==e.get("manualDebitOrCreditAmountRestriction")&&!0===e.get("manualDebitOrCreditAmountRestriction")&&""!==e.get("manualDebitCreditAmountLimit")&&e.manualDebitCreditModel.amount>parseFloat(e.get("manualDebitCreditAmountLimit"))&&(e.set("amountExceeded",!0),e.get("validatingInput").push("\t\t"+kl.value(e.localeBase+"amountExceed")+"<br>")),e.get("validatingInput").length>0?e.get("amountExceeded")?Komodo.Controls.MessageBoxController.show(kl.value(e.localeBase+"amountRestriction"),kl.value(e.localeBase+"amountExceed"),Komodo.Controls.MessageBoxOkButtons,e,"message","warning"):Komodo.Controls.MessageBoxController.show(kl.value(e.localeBase+"requiredFields"),e.get("validatingInput").join(" "),Komodo.Controls.MessageBoxOkButtons,e,"message","warning"):e.publishManualAdjustment()},cancel:function(){this.clearData()}}}),Komodo.Application.PreactivateQouteModalPopupView=Komodo.UI.View.extend({viewKey:"PreactivateQouteModalPopupView",templateName:"PreactivateQouteModalPopupView"}),Komodo.Application.TransferPaymentView=Komodo.UI.View.extend({viewKey:"TransferPaymentView",templateName:"TransferPaymentView"}),Komodo.Application.ProformaInvoicePreviewView=Komodo.UI.View.extend({viewKey:"ProformaInvoicePreviewView",templateName:"ProformaInvoicePreviewView"}),Komodo.Application.ManageAccountSharedObjectController=Komodo.UI.Controller.extend({sessionId:void 0,domainUserName:void 0,self:void 0,init:function(){Komodo.log("Shared Object for the Manage Account"),this.set("processVersion","v1.1"),this.set("processName","Manage Account"),this._super(),sessionId=Komodo.Services.securityService.get("sessionToken"),domainUserName=Komodo.Services.securityService.get("domainUserName"),self=this,self.start()},resultArchiveFTMessage:{ResponseMessage:{Payload:{ListOfArchiveFinancialTransaction:{ArchiveFinancialTransaction:[]}}}},retrieveAgeingInfoForFinAccount:function(e,t){Komodo.Services.queryService.getJSON("/FinancialTransaction/GetAgeingForFinancialAccount?faid="+e).done(function(e){self.messageAgeingInfoRetrievedReceived(e)}).error(function(e){var t=JSON.stringify(e);self.messageAgeingInfoRetrievedError(t),Komodo.log("Retrieve Ageing Information ajax call failed. Error: "+t)})},messageAgeingInfoRetrievedReceived:function(e){Komodo.Services.manageAccountService.setRetrieveAgeingInfoResult(e),Komodo.Services.eventAggregator.publish("AgeingInfoRetrievedReceived")},messageAgeingInfoRetrievedError:function(e){Komodo.Services.manageAccountService.setRetrieveAgeingInfoError("Error in retrieving Ageing Information"),Komodo.Services.eventAggregator.publish("AgeingInfoRetrievedError")},countryName:void 0,getCountryDetails:function(){var e=this;Komodo.Services.uiService.getController("application").get("_selectedCountryId"),e.set("countryName",Komodo.Services.uiService.getController("application").get("_selectedCountryDescription"))},resultAccountMessage:{ResponseMessage:{Payload:{ListOfAccount:{Account:[]}}}},retrieveFinancialAccounts:function(e){Komodo.Services.securityService.get("sessionToken");this.getCountryDetails();var t=(this.countryName,this),a=this.resultAccountMessage;Komodo.Services.customerProfileService.currentFinancialAccounts=void 0,a.ResponseMessage.Payload.ListOfAccount.Account.clear(),Komodo.Services.queryService.getJSON("/AccountProfile?id="+e).done(function(e){a.ResponseMessage.Payload.ListOfAccount.Account.clear(),e&&e.Account.length&&0!=e.Account.length&&(e.Account.length>1?a.ResponseMessage.Payload.ListOfAccount.Account.addObjects(e.Account):a.ResponseMessage.Payload.ListOfAccount.Account.addObject(e.Account[0])),t.messageFinancialAccountsRetrievedReceived(a)}).error(function(e){var a=JSON.stringify(e);t.messageFinancialAccountsErrorReceived(e),Komodo.log("retrieveFinancialAccounts ajax call failed. Error: "+a),void 0==e.responseJSON.Message&&void 0==e.responseJSON.MessageDetail||Komodo.Controls.MessageBoxController.show("Error","<b><b>Error - Retrieve Customer Financial Accounts ajax call failed</b><br/>Error Message = "+e.responseJSON.Message+"</br> Error Message Detail = "+e.responseJSON.MessageDetail,Komodo.Controls.MessageBoxOkButtons,t,"message","warning")})},retrieveFinancialAccountsSync:function(e){Komodo.Services.securityService.get("sessionToken");this.getCountryDetails();var t=(this.countryName,this),a=this.resultAccountMessage;Komodo.Services.customerProfileService.currentFinancialAccounts=void 0,a.ResponseMessage.Payload.ListOfAccount.Account.clear(),Komodo.Services.queryService.getJSON("/AccountProfile?id="+e,{async:!1}).done(function(e){a.ResponseMessage.Payload.ListOfAccount.Account.clear(),e&&e.Account.length&&0!=e.Account.length&&(e.Account.length>1?a.ResponseMessage.Payload.ListOfAccount.Account.addObjects(e.Account):a.ResponseMessage.Payload.ListOfAccount.Account.addObject(e.Account[0])),t.messageFinancialAccountsRetrievedReceived(a)}).error(function(e){var a=JSON.stringify(e);t.messageFinancialAccountsErrorReceived(e),Komodo.log("retrieveFinancialAccounts ajax call failed. Error: "+a),void 0==e.responseJSON.Message&&void 0==e.responseJSON.MessageDetail||Komodo.Controls.MessageBoxController.show("Error","<b><b>Error - Retrieve Customer Financial Accounts ajax call failed</b><br/>Error Message = "+e.responseJSON.Message+"</br> Error Message Detail = "+e.responseJSON.MessageDetail,Komodo.Controls.MessageBoxOkButtons,t,"message","warning")})},messageFinancialAccountsRetrievedReceived:function(e){var t=Komodo.Services.customerProfileService;t.retrievedFinancialAccounts(void 0);var a=e.ResponseMessage.Payload.ListOfAccount;a&&a.Account&&(t.retrievedFinancialAccounts(e),Komodo.Services.eventAggregator.publish("FinancialAccountsRetrievedReceived"))},messageFinancialAccountsErrorReceived:function(e){Komodo.Services.manageAccountService.setfinancialAccountsErrorReceived(e),Komodo.Services.eventAggregator.publish("FinancialAccountsErrorReceived")},resultFTMessage:{ResponseMessage:{Payload:{ListOfFinancialTransaction:{FinancialTransaction:[],PagingDetail:[]}}}},retrieveCustomerFinancialTransactionsWithPageing:function(e,t,a,o){var n=this,s=this.resultFTMessage;s.ResponseMessage.Payload.ListOfFinancialTransaction.FinancialTransaction.clear(),Komodo.Services.queryService.getJSON("/FinancialTransaction/GetFinancialTransactions?customerId="+e+"&financialAccountId="+t+"&pageSize="+o+"&pageNumber="+a).done(function(e){s.ResponseMessage.Payload.ListOfFinancialTransaction.FinancialTransaction.clear(),s.ResponseMessage.Payload.ListOfFinancialTransaction.PagingDetail.clear(),e&&e.ListOfFinancialTransaction.FinancialTransaction.length&&0!=e.ListOfFinancialTransaction.FinancialTransaction.length&&(e.ListOfFinancialTransaction.FinancialTransaction.length>1?(s.ResponseMessage.Payload.ListOfFinancialTransaction.FinancialTransaction.addObjects(e.ListOfFinancialTransaction.FinancialTransaction),s.ResponseMessage.Payload.ListOfFinancialTransaction.PagingDetail.push(e.PagingDetail)):(s.ResponseMessage.Payload.ListOfFinancialTransaction.FinancialTransaction.addObject(e.ListOfFinancialTransaction.FinancialTransaction[0]),s.ResponseMessage.Payload.ListOfFinancialTransaction.PagingDetail.push(e.PagingDetail[0]))),n.messageFinancialTransactionsRetrievedReceived(s)}).error(function(e){var t=JSON.stringify(e);n.messageFinancialTransactionsErrorReceived(e),Komodo.log("retrieveCustomerFinancialTransactions ajax call failed. Error: "+t),void 0==e.responseJSON.Message&&void 0==e.responseJSON.MessageDetail||Komodo.Controls.MessageBoxController.show("Error","<b>Error - Retrieve Customer Financial Transactions ajax call failed</b><br/>Error Message = "+e.responseJSON.Message+"</br> Error Message Detail = "+e.responseJSON.MessageDetail,Komodo.Controls.MessageBoxOkButtons,n,"message","warning")})},retrieveCustomerFinancialTransactions:function(e,t,a,o){var n=this,s=this.resultFTMessage;s.ResponseMessage.Payload.ListOfFinancialTransaction.FinancialTransaction.clear(),Komodo.Services.queryService.getJSON("/FinancialTransaction/GetFinancialTransactions?customerId="+e+"&financialAccountId="+t+"&pageSize="+o+"&pageNumber="+a).done(function(e){s.ResponseMessage.Payload.ListOfFinancialTransaction.FinancialTransaction.clear(),e&&e.ListOfFinancialTransaction.FinancialTransaction.length&&0!=e.ListOfFinancialTransaction.FinancialTransaction.length&&(e.ListOfFinancialTransaction.FinancialTransaction.length>1?s.ResponseMessage.Payload.ListOfFinancialTransaction.FinancialTransaction.addObjects(e.ListOfFinancialTransaction.FinancialTransaction):s.ResponseMessage.Payload.ListOfFinancialTransaction.FinancialTransaction.addObject(e.ListOfFinancialTransaction.FinancialTransaction[0])),n.messageFinancialTransactionsRetrievedReceived(s)}).error(function(e){var t=JSON.stringify(e);n.messageFinancialTransactionsErrorReceived(e),Komodo.log("retrieveCustomerFinancialTransactions ajax call failed. Error: "+t),void 0==e.responseJSON.Message&&void 0==e.responseJSON.MessageDetail||Komodo.Controls.MessageBoxController.show("Error","<b>Error - Retrieve Customer Financial Transactions ajax call failed</b><br/>Error Message = "+e.responseJSON.Message+"</br> Error Message Detail = "+e.responseJSON.MessageDetail,Komodo.Controls.MessageBoxOkButtons,n,"message","warning")})},messageFinancialTransactionsRetrievedReceived:function(e){var t=Komodo.Services.customerProfileService;t.retrievedFinancialTransaction(void 0),void 0!=e&&(t.retrievedFinancialTransaction(e),Komodo.Services.eventAggregator.publish("FinancialTransactionsRetrievedReceived"))},messageFinancialTransactionsErrorReceived:function(e){Komodo.Services.manageAccountService.setfinancialTransactionsErrorReceived(e),Komodo.Services.eventAggregator.publish("FinancialTransactionsErrorReceived")},retrieveArchiveFinancialTransaction:function(e,t,a,o,n,s,r){var i=this.resultArchiveFTMessage,l="";if(i.ResponseMessage.Payload.ListOfArchiveFinancialTransaction.ArchiveFinancialTransaction.clear(),self.isValuePresent(o)&&"0001-01-01T00:00:00"!=o?l+="&"+self.createParameter("fromDate",o):l+="&"+self.createParameter("fromDate","0001-01-01T00:00:00"),self.isValuePresent(n)&&"0001-01-01T00:00:00"!=n?l+="&"+self.createParameter("toDate",n):l+="&"+self.createParameter("toDate","0001-01-01T00:00:00"),l+="&"+self.createParameter("amount",""),l+="&"+self.createParameter("customerNumber",a),self.isValuePresent(s)?l+="&"+self.createParameter("accountNumber",s):l+="&"+self.createParameter("accountNumber",""),l+="&"+self.createParameter("referenceNumber",""),l+="&"+self.createParameter("pageSize",t),l+="&"+self.createParameter("pageNumber",e),l.length<=0)return Komodo.Controls.MessageBoxController.show("Error","Please provide some criteria to fetch records.",Komodo.Controls.MessageBoxOkButtons,self,"id5446673","error"),!1;Komodo.Services.queryService.refreshUserData(),Komodo.Services.queryService.getJSON("/FinancialTransaction/GetAllArchiveFinancialTransactions?"+l).done(function(e){i.ResponseMessage.Payload.ListOfArchiveFinancialTransaction.ArchiveFinancialTransaction.clear(),e&&e.items.length&&0!=e.items.length?e.items.length>1?i.ResponseMessage.Payload.ListOfArchiveFinancialTransaction.ArchiveFinancialTransaction.addObjects(e.items):i.ResponseMessage.Payload.ListOfArchiveFinancialTransaction.ArchiveFinancialTransaction.addObject(e.items[0]):i.ResponseMessage.Payload.ListOfArchiveFinancialTransaction.ArchiveFinancialTransaction.clear(),self.messageArchiveFinancialTransactionsRetrievedReceived(i)}).error(function(e){var t=JSON.stringify(e);self.messageArchiveFinancialTransactionsRetrievedError(t),Komodo.log("Retrieve Archive Financial Transactions by Filter ajax call failed. Error: "+t)})},messageArchiveFinancialTransactionsRetrievedReceived:function(e){Komodo.Services.manageAccountService.setRetrievedArchiveFinancialTransactionResul(e),Komodo.Services.eventAggregator.publish("ArchiveFinancialTransactionsRetrievedReceived")},messageArchiveFinancialTransactionsRetrievedError:function(e){var t=Komodo.Services.manageAccountService;null!=e&&void 0!=e&&""!=e&&e.toLowerCase().search("archive financial transactions for customer with id")>-1?t.setRetrievedArchiveFinancialTransactionError($.parseJSON(e).responseJSON):t.setRetrievedArchiveFinancialTransactionError("Error in retrieving the records."),Komodo.Services.eventAggregator.publish("ArchiveFinancialTransactionRetrievedError")},createParameter:function(e,t){return e+"="+t},isValuePresent:function(e){return null!==e&&void 0!==e&&""!=e},retrieveMOPforPOSFT:function(e){self=this,Komodo.Services.queryService.getJSON("/PointOfSale/GetPayment?paymentId="+e,{async:!1}).done(function(e){Komodo.Models.FinancialTransactionDetailsModel.create();self.set("MOP",e.MethodOfPayment)}).error(function(e){Komodo.log("Retrieve POS information  ajax call failed. Error: "+e)})},retrieveCustomerQuotes:function(e){self=this,Komodo.Services.queryService.getJSON("/Quote/GetCustomerQuotes?customerId="+e+"&deviceSerialNumber=&quoteCurrentStatus=0&quoteCategory=0",{async:!1}).done(function(e){if(e&&e.Quote.length&&0!=e.Quote.length&&e.Quote.length>0)for(var t=0;t<e.Quote.length;t++)e.Quote[t].QuoteDate=self.getFormattedDate(e.Quote[t].QuoteDate),e.Quote[t].ExpirationDate=self.getFormattedDate(e.Quote[t].ExpirationDate),e.Quote[t].PaymentDueDate=self.getFormattedDate(e.Quote[t].PaymentDueDate),e.Quote[t].TotalAmount=parseFloat(e.Quote[t].TotalAmount).toFixed(2);self.messageretrieveCustomerQuotesReceived(e)}).error(function(e){var t=JSON.stringify(e);self.messageAgeingInfoRetrievedError(t),Komodo.log("Retrieve Get Customer quotes ajax call failed. Error: "+t)})},messageretrieveCustomerQuotesReceived:function(e){Komodo.Services.manageAccountService.setQuotesResult(e),Komodo.Services.eventAggregator.publish("CustomerQuotesReceivedReceived")},getFormattedDate:function(e){var t="";if("0001-01-01T00:00:00"===e)return"";if(e){var a=e.split("T"),o=new Date(a[0]),n=o.getDate();n=n<10?"0"+n.toString():n.toString();var s=o.getMonth()+1;s=s<10?"0"+s.toString():s.toString();t=n+"-"+s+"-"+o.getFullYear()}return t},stop:function(){this._super()}}),Komodo.Application.ProformaInvoiceView=Komodo.UI.View.extend({viewKey:"ProformaInvoiceView",templateName:"ProformaInvoiceView"}),Komodo.Application.InvoiceDetailsController=Komodo.UI.Controller.extend({localeBase:"locale.statements:invoice.",init:function(){this._super()},start:function(){var e=this;this.registerModel("data",Komodo.Models.InvoiceDetailsModel),this.getcustomerID()&&(this.registerValidation(),this.retrieveCustomerInvoices()),Komodo.Services.featureToggleService.isEnabled("InvoiceAndStatement","EnableDispatchOption").done(function(t){e.set("enableDispatchOption",t)}).fail(function(){}),e.set("data.fromDate",void 0),e.set("data.toDate",void 0),e.set("data.invoiceNumber",void 0),e.set("data.searchDate",void 0),e.set("data.searchInvoiceNumber",void 0),e.set("gridData",void 0),this._super()},stop:function(){this._super()},retrieveCustomerInvoices:function(){var e=$.Deferred(),t=this;t.data.dataGrid=void 0;var a=t.getInvoiceType();if(void 0==a&&t.messageCreateInvoicesError(""),!t.get("enableDispatchOption")){Komodo.Services.customerProfileService.getCustomerPersonalDetail().isGotv&&(a="gotv."+a)}return Komodo.Services.queryService.getJSON("Invoice/GetInvoicesbyId?customerId="+t.data.customerRefNo+"&documentType="+a+"&pagenumber=1",!0).done(function(a){t.set("gridData",[]),$.each(a,function(e,a){t.data.dataGrid={accountnumber:a.Accountnumber,documentURL:a.DocumentURL,disableButton:Ember.isEmpty(a.DocumentURL),dueDate:t.removeTimeFromDate(a.DueDate),invoiceNumber:a.InvoiceNumber,mop:a.MOP},t.get("gridData").push(t.data.dataGrid)}),e.resolve(void 0)}).error(function(a){t.set("gridData",void 0),e.reject(JSON.stringify(a))}),e},getInvoice:function(){var e=this,t=e.getInvoiceType();void 0==t&&e.messageCreateInvoicesError("");var a="Invoice/SearchInvoiceByCriteria?customerNumber="+e.get("data.customerRefNo")+"&documentType="+t;e.get("data.invoiceNumber")&&(a=a+"&invoicenumber="+e.get("data.invoiceNumber"));var o=new Date(e.get("data.fromDate")),n=e.removeTimeFromDate(o);e.get("data.fromDate")&&(a=a+"&fromdate="+n);var s=new Date(e.get("data.toDate")),r=e.removeTimeFromDate(s);e.get("data.toDate")&&(a=a+"&todate="+r),a+="&pagenumber=1";var i=$.Deferred();return Komodo.Services.queryService.getJSON(a).done(function(t){e.set("gridData",[]),$.each(t,function(t,a){var o={accountnumber:a.Accountnumber,documentURL:a.DocumentURL,disableButton:Ember.isEmpty(a.DocumentURL),dueDate:e.removeTimeFromDate(a.DueDate),invoiceAmount:void 0!==a.InvoiceAmount?parseFloat(a.InvoiceAmount).toFixed(2):"0.00",invoiceNumber:a.InvoiceNumber,mop:a.MOP};e.data.documentUrl=a.DocumentURL,e.get("gridData").push(o)}),i.resolve(t)}).error(function(e){i.reject(JSON.stringify(e))}),i},removeTimeFromDate:function(e){var t=new Date(e),a=t.getFullYear(),o=t.getMonth()+1,n=t.getDate();return n<10&&(n="0"+n),o<10&&(o="0"+o),a+"-"+o+"-"+n},getcustomerID:function(){var e=Komodo.Services.ProductAndServiceMaintenanceHelper.create();return e.isCustomerIdIsAvailableToRetriveData()?(this.data.set("customerRefNo",e.getCustomerIdToRetrieveData()),this.data.set("customerClass",e.getCustomerDetails().customerClass),!0):(Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"useCaseTitle"),kl.value(this.localeBase+"searchCustomer")),Komodo.Services.uiService.transitionTo("home"),!1)},registerValidation:function(){this.get("enableDispatchOption")?this.registerValidator(this.get("data"),"searchDate",{type:"date",isRequired:!0,displayName:"Date",maxDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()+1)}):(this.registerValidator(this.get("data"),"searchDate",{type:"date",isRequired:!0,displayName:"Date",maxDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()+1)}),this.registerValidator(this.get("data"),"searchInvoiceNumber",{limitValueToType:!0,type:"number",isRequired:!0}))},actions:{viewAction:function(e){if(this.get("enableDispatchOption"))window.open(e.content.documentURL,"_blank").focus();else{var t=function(){var e=document.createElement("a");return document.body.appendChild(e),e.style="display: none",function(t,a){var o=new Blob([t],{type:"application/pdf"}),n=window.URL.createObjectURL(o);e.href=n,e.download=a,e.click(),window.URL.revokeObjectURL(n)}}(),a=new XMLHttpRequest;a.open("GET",e.content.documentURL,!0),a.responseType="arraybuffer",a.setRequestHeader("Accept","application/pdf"),a.onerror=function(e){},a.onload=function(e){var o=a.response;t(o,"invoice.pdf")},a.send(null)}},emailAction:function(e){var t=this,a=e.content;t.publishEmailInvoiceEvent(a)},createInvoice:function(){this.publishCreateInvoicesEvent()},getInvoice:function(){this.getInvoice()}},publishCreateInvoicesEvent:function(){try{var e,t=this,a=void 0,o=Komodo.Services.systemService,n=Komodo.Models.CreateStatementAndInvoice.create(),s=Komodo.canonicalFacadeFactory(n,["Country","CustomerUID","InvoiceAndStatementType","FromDate","ToDate","ReferenceNumber","DispatchOption"]);Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(e){s.set("Country",e.data.countryId),t.data.set("country",e.data.countryId)}),s.set("CustomerUID",t.data.customerRefNo);var r=t.getInvoiceType();if(t.get("enableDispatchOption")){t.data.DispatchOption=7,s.set("DispatchOption",t.data.DispatchOption),s.set("InvoiceAndStatementType",r);var i=t.data.searchDate;i&&s.set("FromDate",o.universalDateString(new Date(i))),s.set("ReferenceNumber",t.data.searchInvoiceNumber),e=Komodo.Services.manageAccountService,t.getNewProcessID(),a="Event Message for CreateInvoices",e.publishEvent(t,n,"CreateStatementAndInvoice","v1").done(function(){Komodo.Controls.MessageBoxController.show(kl.value(t.localeBase+"useCaseTitle"),kl.value(t.localeBase+"invoicesCreated"),Komodo.Controls.MessageBoxOkButtons,t,"id5798673","success"),Komodo.log(a+" has been published successfully")}).fail(function(e,t){Komodo.log(a+" has been failed"),Komodo.Services.messagingService.removeMessages(t)})}else{Komodo.Services.customerProfileService.getCustomerPersonalDetail().isGotv&&(r="gotv."+r),s.set("InvoiceAndStatementType",r);var l=t.data.searchDate,c=t.data.searchInvoiceNumber;l&&c?(void 0!=l&&s.set("FromDate",o.universalDateString(new Date(l))),s.set("ReferenceNumber",c),t.data.DispatchOption=1,s.set("DispatchOption",t.data.DispatchOption),e=Komodo.Services.manageAccountService,t.getNewProcessID(),a="Event Message for CreateInvoices",e.publishEvent(t,n,"CreateStatementAndInvoice","v1").done(function(){Komodo.Controls.MessageBoxController.show(kl.value(t.localeBase+"useCaseTitle"),kl.value(t.localeBase+"invoicesCreated"),Komodo.Controls.MessageBoxOkButtons,t,"id5798673","success"),Komodo.log(a+" has been published successfully")}).fail(function(e,t){Komodo.log(a+" has been failed"),Komodo.Services.messagingService.removeMessages(t)})):t.messageCreateInvoicesError2("")}}catch(e){this.handleException("publishCreateInvoicesEvent",e,!0,!0)}},publishEmailInvoiceEvent:function(e){try{var t,a=this,o=Komodo.Services.systemService,n=Komodo.Models.CreateStatementAndInvoice.create(),s=Komodo.canonicalFacadeFactory(n,["Country","CustomerUID","InvoiceAndStatementType","FromDate","ReferenceNumber","DispatchOption"]);Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(e){s.set("Country",e.data.countryId),a.data.set("country",e.data.countryId)}),s.set("CustomerUID",a.data.customerRefNo);var r=a.getInvoiceType();if(s.set("FromDate",o.universalDateString(new Date(e.dueDate.replace(/(\d{2})-(\d{2})-(\d{4})/,"$2/$1/$3")))),s.set("ReferenceNumber",e.invoiceNumber),a.get("enableDispatchOption"))a.data.DispatchOption=Ember.isEmpty(e.documentURL)?7:6,s.set("DispatchOption",a.data.DispatchOption),s.set("InvoiceAndStatementType",a.getInvoiceTypeCopy());else{a.data.DispatchOption=Ember.isEmpty(e.documentURL)?1:2,s.set("DispatchOption",a.data.DispatchOption);Komodo.Services.customerProfileService.getCustomerPersonalDetail().isGotv&&(r="gotv."+r),s.set("InvoiceAndStatementType",r)}t=Komodo.Services.manageAccountService,a.getNewProcessID();t.publishEvent(a,n,"CreateStatementAndInvoice","v1").done(function(){Komodo.Controls.MessageBoxController.show(kl.value(a.localeBase+"useCaseTitle"),kl.value(a.localeBase+"invoiceSent"),Komodo.Controls.MessageBoxOkButtons,a,"id5798673","success"),Komodo.log("Event Message for CreateInvoices has been published successfully")}).fail(function(e,t){Komodo.log("Event Message for CreateInvoices has been failed"),Komodo.Services.messagingService.removeMessages(t)})}catch(e){this.handleException("publishEmailInvoiceEvent",e,!0,!0)}},getInvoiceType:function(){var e=this,t=void 0;if(e.get("enableDispatchOption")){switch(e.data.get("customerClass")){case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_RESIDENTIAL"):case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_SPECIALIST"):t=Komodo.DocumentTypeEnumForSA.BBFINVOICE;break;case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_COMMERCIAL"):case GetCustomerTypesConstants("CustomerTypesConstants","DIPLOMAT"):t=Komodo.DocumentTypeEnumForSA.OIINVOICE}return t}switch(e.data.get("customerClass")){case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_RESIDENTIAL"):case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_SPECIALIST"):t=Komodo.DocumentTypeEnum.BBFINVOICE;break;case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_COMMERCIAL"):case GetCustomerTypesConstants("CustomerTypesConstants","DIPLOMAT"):t=Komodo.DocumentTypeEnum.OIINVOICE}return t},getInvoiceTypeCopy:function(){var e=this,t=void 0;if(e.get("enableDispatchOption")){switch(e.data.get("customerClass")){case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_RESIDENTIAL"):case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_SPECIALIST"):t=Komodo.DocumentTypeEnumForSA.BBFINVOICE;break;case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_COMMERCIAL"):case GetCustomerTypesConstants("CustomerTypesConstants","DIPLOMAT"):t=Komodo.DocumentTypeEnumForSA.OIINVOICECOPY}return t}switch(e.data.get("customerClass")){case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_RESIDENTIAL"):case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_SPECIALIST"):t=Komodo.DocumentTypeEnumForSA.BBFINVOICE;break;case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_COMMERCIAL"):case GetCustomerTypesConstants("CustomerTypesConstants","DIPLOMAT"):t=Komodo.DocumentTypeEnumForSA.OIINVOICECOPY}return t},getNewProcessID:function(){this.startNewProcess()},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,12e5,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},messageCreateInvoicesFailure:function(e){this.hideBusyIndicator(),Komodo.UI.warn(kl.value(this.localeBase+"messageInvoiceDeliveryFailure")+"messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"useCaseTitle"),kl.value(this.localeBase+"messageInvoiceDeliveryFailure"),Komodo.Controls.MessageBoxOkButtons,this,"id5798673","danger")},messageCreateInvoicesError:function(e){this.hideBusyIndicator(),Komodo.UI.warn(kl.value(this.localeBase+"errorMessage")+"messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"useCaseTitle"),kl.value(this.localeBase+"errorMessage"),Komodo.Controls.MessageBoxOkButtons,this,"id5798673","danger")},messageCreateInvoicesError2:function(e){this.hideBusyIndicator(),Komodo.UI.warn(kl.value(this.localeBase+"errorMessage2")+"messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"useCaseTitle"),kl.value(this.localeBase+"errorMessage2"),Komodo.Controls.MessageBoxOkButtons,this,"id5798673","danger")},messageFault:function(e){this.hideBusyIndicator(),Komodo.UI.warn(kl.value(this.localeBase+"messageInvoiceDeliveryFailure")+"messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"useCaseTitle"),kl.value(this.localeBase+"messageInvoiceDeliveryFailure"),Komodo.Controls.MessageBoxOkButtons,this,"id5798673","danger")},messageReceived:function(){this.hideBusyIndicator()},messageDeliveryFailure:function(e){this.hideBusyIndicator(),Komodo.UI.warn(kl.value(this.localeBase+"messageInvoiceDeliveryFailure")+"messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"useCaseTitle"),kl.value(this.localeBase+"messageInvoiceDeliveryFailure"),Komodo.Controls.MessageBoxOkButtons,this,"id5798673","danger")},messageStatementCreatedReceived:function(e){this.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"useCaseTitle"),kl.value(this.localeBase+"invoiceSent"))},messageFailureMessageEventReceived:function(e){this.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButtons,this,"id2366673","danger")},handleException:function(e,t,a,o){try{var n="Error in function ["+e+"]. Exception: "+t+".";a&&(Komodo.log(n),null!=t&&null!=t.stack&&Komodo.log(t.stack)),o&&Komodo.Controls.MessageBoxController.show("An error has occurred",n,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}catch(e){Komodo.log(e)}},gridData:[]}),Komodo.Application.QuotesView=Komodo.UI.View.extend({viewKey:"QuotesView",templateName:"QuotesView"}),Komodo.Application.CustomerAnalysisController=Komodo.UI.Controller.extend({init:function(){var e=this;Komodo.log(kl.value(e.localeBase+"logOnPageInit")),e._super()},start:function(){var e=this;e.registerModel("data",Komodo.Models.CustomerAnalysisModel);var t=Komodo.Services.ProductAndServiceMaintenanceHelper.create();if(!t.isCustomerIdIsAvailableToRetriveData())return void Komodo.Controls.MessageBoxController.show(kl.value(e.localeBase+"customerNotFound"),kl.value(e.localeBase+"customerNotFoundMsg"));e.data.set("customerID",t.getCustomerIdToRetrieveData()),Ember.isEmpty(e.get("data.customerID"))||(e.setDefaultBindings(),e.showBusyIndicator(),Komodo.Services.queryService.getJSON("/FinancialTransaction/GetCustomerFTHistoryCSI?customerNumber="+e.get("data.customerID")+"&fromDate="+e.get("data.fromDate")+"&toDate="+e.get("data.toDate")+"&pageNumber="+e.get("data.pageNumber")+"&pageSize="+e.get("data.pageSize")).done(function(t){Ember.isEmpty(t)||(e.data.set("allFTViewRecords",e.mapFTHistoryCSIDetails(t.custAnalysisFTView)),e.data.set("allHistoryViewRecords",e.mapFTHistoryCSIDetails(t.custAnalysisHistoryView)),e.data.set("bindFTViewDetails",e.data.get("allFTViewRecords")),e.data.set("FTViewDataAvailable",!Ember.isEmpty(e.data.get("bindFTViewDetails"))),e.set("showFTViewScroll",e.data.get("allFTViewRecords").length>10),e.data.set("bindHistoryViewDetails",e.data.get("allHistoryViewRecords")),e.data.set("HistoryViewDataAvailable",!Ember.isEmpty(e.data.get("bindHistoryViewDetails"))),e.set("showHistroyViewScroll",e.data.get("allHistoryViewRecords").length>10)),e.hideBusyIndicator()}).error(function(t){e.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(e.localeBase+"title"),t.responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,e,"id5446673","danger")})),e._super()},setDefaultBindings:function(){var e=this;e.set("data.radioButtonShow",[{title:kl.value(e.localeBase+"All"),value:"0"},{title:kl.value(e.localeBase+"Billable"),value:"1"}]),e.data.set("radioButtonBinding","1"),e.registerValidator(e.get("data"),"fromDateBinding",{type:"date",maxDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()+1),displayName:kl.value(e.localeBase+"fromDate"),functions:Komodo.UI.Validators.DatePickerValidator}),e.registerValidator(e.get("data"),"toDateBinding",{type:"date",maxDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()+1),displayName:kl.value(e.localeBase+"toDate"),functions:Komodo.UI.Validators.DatePickerValidator})},createDependentProperty:function(e,t){var a=this;t.forEach(function(t){void 0!==a.get("validators."+e)&&a.get("validators."+e).functions.addObject(t)}),void 0!==a.get("validators."+e)&&a.get("validators."+e).validate()},removeDependentProperty:function(e){var t=this;void 0!==t.get("validators."+e)&&(t.get("validators."+e).functions.clear(),t.get("validators."+e).validate())},mapFTHistoryCSIDetails:function(e){var t=this;if(!Ember.isEmpty(e))var a=e.map(function(e){var a=Komodo.Models.FTHistoryCSIDetailsModel.create();return a.set("CreationDate",Ember.isEmpty(e.CreationDate)?"-":t.setDateToDisplayInGrid(e.CreationDate)),
a.set("TransactionType",Ember.isEmpty(e.TransactionType)?"-":e.TransactionType),a.set("Product",Ember.isEmpty(e.Product)?"-":e.Product),a.set("LedgerAccountDescription",Ember.isEmpty(e.LedgerAccountDescription)?"-":e.LedgerAccountDescription),a.set("PeriodFrom",Ember.isEmpty(e.PeriodFrom)?"-":t.setDateToDisplayInGrid(e.PeriodFrom)),a.set("PeriodTo",Ember.isEmpty(e.PeriodTo)?"-":t.setDateToDisplayInGrid(e.PeriodTo)),a.set("Amount",Ember.isEmpty(e.Amount)?"-":e.Amount),a.set("RunningTotal",Ember.isEmpty(e.RunningTotal)?"-":e.RunningTotal),a.set("HistoryNumber",Ember.isEmpty(e.HistoryNumber)?"-":e.HistoryNumber),a.set("UserName",Ember.isEmpty(e.UserName)?"-":e.UserName),a.set("EventId",Ember.isEmpty(e.EventId)?"-":e.EventId),a.set("EventName",Ember.isEmpty(e.EventName)?"-":e.EventName),a.set("Message",Ember.isEmpty(e.Message)?"-":e.Message),a.set("MessageTrackingId",Ember.isEmpty(e.MessageTrackingId)?"-":e.MessageTrackingId),a});return a},setDateToDisplayInGrid:function(e){var t=Komodo.Services.dateTimeFormatterService.getDateFromDateInXsdFormat(e);return Komodo.Services.dateTimeFormatterService.getDateTimeFromJavascriptDate(t)},getDateObjectFromString:function(e){var t=e.split(/\-|\s/);return new Date(t.slice(0,3).reverse().join("-")+" "+t[3])},filterDataForDateRange:function(){var e=this;Ember.isEmpty(e.get("data.fromDateBinding"))||Ember.isEmpty(e.get("data.toDateBinding"))?(e.data.set("bindFTViewDetails",e.data.get("allFTViewRecords")),e.data.set("bindHistoryViewDetails",e.data.get("allHistoryViewRecords"))):(e.data.set("bindFTViewDetails",Ember.isEmpty(e.data.get("allFTViewRecords"))?void 0:e.data.get("allFTViewRecords").filter(function(t){var a=e.getDateObjectFromString(t.CreationDate);return XDates.inRange(a.toLocaleDateString("sv-SE"),e.get("data.fromDateBinding").toLocaleDateString("sv-SE"),e.get("data.toDateBinding").toLocaleDateString("sv-SE"))})),e.data.set("bindHistoryViewDetails",Ember.isEmpty(e.data.get("allHistoryViewRecords"))?void 0:e.data.get("allHistoryViewRecords").filter(function(t){var a=e.getDateObjectFromString(t.CreationDate);return XDates.inRange(a.toLocaleDateString("sv-SE"),e.get("data.fromDateBinding").toLocaleDateString("sv-SE"),e.get("data.toDateBinding").toLocaleDateString("sv-SE"))}))),e.data.set("FTViewDataAvailable",!Ember.isEmpty(e.data.get("bindFTViewDetails"))),e.data.set("HistoryViewDataAvailable",!Ember.isEmpty(e.data.get("bindHistoryViewDetails")))},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,6e3,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},getNewProcessID:function(){this.startNewProcess()},dateSelection:function(){var e=this;if(Ember.isEmpty(e.get("data.fromDateBinding"))?Ember.isEmpty(e.get("data.toDateBinding"))?(e.removeDependentProperty("fromDateBindingValidator"),e.removeDependentProperty("toDateBindingValidator")):e.createDependentProperty("fromDateBindingValidator",[Komodo.UI.Validators.RequiredValidator,Komodo.UI.Validators.DatePickerValidator]):e.createDependentProperty("toDateBindingValidator",[Komodo.UI.Validators.RequiredValidator,Komodo.UI.Validators.DatePickerValidator]),!Ember.isEmpty(e.get("data.toDateBinding"))&&!Ember.isEmpty(e.get("data.fromDateBinding"))&&-1===XDates.compare(e.get("data.toDateBinding").toDateString(),e.get("data.fromDateBinding").toDateString())){Komodo.Controls.MessageBoxController.show(kl.value(e.localeBase+"title"),kl.value(e.localeBase+"validateToAndFromDate"),null,e,"id123486","warning").response=function(t){"ok"===t&&(e.data.set("toDateBinding",void 0),e.data.set("fromDateBinding",void 0))}}e.set("data.disableGoButton",!(!Ember.isEmpty(e.get("data.fromDateBinding"))&&!Ember.isEmpty(e.get("data.toDateBinding"))))}.observes("data.fromDateBinding","data.toDateBinding"),displayView:function(){var e=this;e.set("data.isBillableView","0"!==e.get("data.radioButtonBinding")),e.filterDataForDateRange()}.observes("data.radioButtonBinding"),retrieveCustomerAnalysisExport:function(e,t,a,o,n,s,r,i,l,c){var u=this,d={};if(Ember.isEmpty(n))return void Komodo.Controls.MessageBoxController.show(kl.value(u.localeBase+"customerNotFound"),kl.value(u.localeBase+"customerNotFoundMsg"),Komodo.Controls.MessageBoxOkButtons,u,"id123458","warning");o.push({Field:"customerNumber",Value:n}),o.push({Field:"fromDate",Value:Ember.isEmpty(s)?null:s.toLocaleDateString("sv-SE")}),o.push({Field:"toDate",Value:Ember.isEmpty(r)?null:r.toLocaleDateString("sv-SE")}),o.push({Field:"pageNumber",Value:Ember.isEmpty(i)?null:i}),o.push({Field:"pageSize",Value:Ember.isEmpty(l)?null:l}),o=u.addBillableView(o,c),d.ExportDictionary=o,Komodo.Services.queryService.postJSON("/ExportData/ExportAllRecords?apiName="+e+"&fileName="+t+"&fileFormat="+a,{data:d}).done(function(e){t=t.replace(/ /g,"_");var a="data:application/vnd.ms-excel,"+encodeURIComponent(e),o=document.createElement("a");o.href=a,o.style="visibility:hidden",o.download=t+"_"+n+"_"+u.formatDateForFileName(new Date)+".xls",document.body.appendChild(o),o.click(),document.body.removeChild(o)}).error(function(e){var t=JSON.stringify(e);Komodo.log("Notify Owner ajax call failed. Error: "+t),Komodo.Controls.MessageBoxController.show(kl.value(u.localeBase+"technicalErr"),t,Komodo.Controls.MessageBoxOkButtons,u,"authmbx","danger")})},addBillableView:function(e,t){return e.push({Field:"CustomList1",Value:"View"}),e.push({Field:"billableView",Value:t}),e},formatDateForFileName:function(){var e=new Date,t=e.getDate();t=t<10?"0"+t.toString():t.toString();var a=e.getMonth()+1;return a=a<10?"0"+a.toString():a.toString(),t+"-"+a+"-"+e.getFullYear()},actions:{getDetails:function(){var e=this;if(!1!==e.canSubmitData(e.get("data"),kl.value(e.localeBase+"title"),{showInModal:!0}))return 1===XDates.compare(e.get("data.fromDateBinding"),e.get("data.toDateBinding"))?void Komodo.Controls.MessageBoxController.show(kl.value(e.localeBase+"title"),kl.value(e.localeBase+"fromToDateValidation"),Komodo.Controls.MessageBoxOkButtons,e,"id5446675","warning"):void e.filterDataForDateRange()},exportToExcel:function(){var e=this;if("1"===e.get("data.radioButtonBinding")&&Ember.isEmpty(e.get("data.bindFTViewDetails")))return void Komodo.Controls.MessageBoxController.show(kl.value(e.localeBase+"title"),kl.value(e.localeBase+"noRecordsAvailable"),Komodo.Controls.MessageBoxOkButtons,e,"id123456","warning");if("0"===e.get("data.radioButtonBinding")&&Ember.isEmpty(e.get("data.bindHistoryViewDetails")))return void Komodo.Controls.MessageBoxController.show(kl.value(e.localeBase+"title"),kl.value(e.localeBase+"noRecordsAvailable"),Komodo.Controls.MessageBoxOkButtons,e,"id123457","warning");var t=ColumnHeaderForExportConfiguration.BasicConfiguration,a=kl.value(e.localeExportFields+t.CustomerAnalysisAPI[0].ApiName),o=kl.value(e.localeExportFields+t.CustomerAnalysisAPI[0].FileName),n=kl.value(e.localeExportFields+t.CustomerAnalysisAPI[0].FileFormat),s=e.get("data.customerID"),r=Ember.isEmpty(e.get("data.fromDateBinding"))?null:e.get("data.fromDateBinding"),i=Ember.isEmpty(e.get("data.toDateBinding"))?null:e.get("data.toDateBinding"),l=e.get("data.pageNumber"),c=e.get("data.pageSize"),u=e.get("data.isBillableView");exportDictionary=e.getHistoryColumnHeaderForExport(),e.retrieveCustomerAnalysisExport(a,o,n,exportDictionary,s,r,i,l,c,u)}},getHistoryColumnHeaderForExport:function(){var e=this,t=e.getColumnHeaderExportConfigurationForCustomerAnalysis(),a=Ember.A(),t=t.BasicConfiguration;return e.get("data.isBillableView")?$.each(t.CustomerAnalysisBillable,function(t,o){a.push({Field:o.Field,Value:kl.value(e.localeColumnHeaderForExportBillable+o.Value)})}):$.each(t.CustomerAnalysisAll,function(t,o){a.push({Field:o.Field,Value:kl.value(e.localeColumnHeaderForExportAll+o.Value)})}),a},getColumnHeaderExportConfigurationForCustomerAnalysis:function(){return{BasicConfiguration:{CustomerAnalysisBillable:[{Field:"CreationDate",Value:"valueCreationDate"},{Field:"TransactionType",Value:"valueTransactionType"},{Field:"Product",Value:"valueProduct"},{Field:"LedgerAccountDescription",Value:"valueLedgerAccountDescription"},{Field:"PeriodFrom",Value:"valuePeriodFrom"},{Field:"PeriodTo",Value:"valuePeriodTo"},{Field:"Amount",Value:"valueAmount"},{Field:"RunningTotal",Value:"valueRunningTotal"},{Field:"HistoryNumber",Value:"valueHistoryNumber"},{Field:"UserName",Value:"valueUserName"},{Field:"EventId",Value:"valueEventId"},{Field:"EventName",Value:"valueEventName"},{Field:"Message",Value:"valueMessage"},{Field:"MessageTrackingId",Value:"valueMessageTrackingId"},{Field:"===",Value:"valueseparator"}],CustomerAnalysisAll:[{Field:"CreationDate",Value:"valueCreationDate"},{Field:"HistoryNumber",Value:"valueHistoryNumber"},{Field:"UserName",Value:"valueUserName"},{Field:"Product",Value:"valueProduct"},{Field:"EventId",Value:"valueEventId"},{Field:"EventName",Value:"valueEventName"},{Field:"TransactionType",Value:"valueTransactionType"},{Field:"LedgerAccountDescription",Value:"valueLedgerAccountDescription"},{Field:"PeriodFrom",Value:"valuePeriodFrom"},{Field:"PeriodTo",Value:"valuePeriodTo"},{Field:"Amount",Value:"valueAmount"},{Field:"RunningTotal",Value:"valueRunningTotal"},{Field:"Message",Value:"valueMessage"},{Field:"MessageTrackingId",Value:"valueMessageTrackingId"},{Field:"===",Value:"valueseparator"}]}}},stop:function(){var e=this;e.set("data.radioButtonBinding",void 0),e.set("data.fromDateBinding",void 0),e.set("data.toDateBinding",void 0),e.set("data.allFTViewRecords",void 0),e.set("data.allHistoryViewRecords",void 0),e.set("data.bindFTViewDetails",void 0),e.set("data.bindHistoryViewDetails",void 0),this._super()},localeBase:"locale.manageaccount:customerAnalysis.",localeColumnHeaderForExportBillable:"locale.manageaccount:columnHeaderForExportBillable.",localeColumnHeaderForExportAll:"locale.manageaccount:columnHeaderForExportAll.",localeExportFields:"locale.manageaccount:exportFields.",localecustomerAnalysisAPIParameters:"locale.manageaccount:customerAnalysisAPIParameters.",showFTViewScroll:!1,showHistroyViewScroll:!1}),Komodo.Application.RefundsView=Komodo.UI.View.extend({viewKey:"RefundsView",templateName:"RefundsView"}),Komodo.Application.StatementDetailsView=Komodo.UI.View.extend({viewKey:"StatementDetailsView"}),Komodo.Application.ReverseArchivedFinancialTransactionView=Komodo.UI.View.extend({viewKey:"ReverseArchivedFinancialTransactionView"}),Komodo.Application.SettleViaAdhocDebitOrderView=Komodo.UI.View.extend({viewKey:"SettleViaAdhocDebitOrderView",templateName:"SettleViaAdhocDebitOrderView"}),Komodo.Application.ReverseFinancialTransactionView=Komodo.UI.View.extend({viewKey:"ReverseFinancialTransactionView"}),Komodo.Application.DevicePlanDetailController=Komodo.UI.Controller.extend({deviceDetails:[],currencyMnemonics:void 0,init:function(){this._super()},start:function(){var e=this;if(e.registerModel("devicePlanDetailModel",Komodo.Models.DevicePlanDetailModel),e.set("deviceDetails",[]),null!=this.get("detail").length)for(var t=0;t<e.get("detail").length;t++){var a=e.get("detail")[t],o={uid:t+1,installmentId:a.UID,dueDate:null!=a.DueDate?e.getFormattedDate(a.DueDate):"-",installmentAmount:e.get("currencyMnemonics")+" "+parseFloat(a.InstalmentAmount).toFixed(2),transctionId:a.FinancialTransactionId,status:a.Status};e.get("deviceDetails").pushObject(o)}e._super()},actions:{},getFormattedDate:function(e){var t="";if("0001-01-01T00:00:00"===e)return"";if(e){var a=e.split("T"),o=new Date(a[0]),n=o.getDate();n=n<10?"0"+n.toString():n.toString();var s=o.getMonth()+1;s=s<10?"0"+s.toString():s.toString();t=n+"-"+s+"-"+o.getFullYear()}return t},stop:function(){this._super()}}),Komodo.Application.SearchPromptView=Komodo.UI.View.extend({viewKey:"SearchPromptView",templateName:"SearchPromptView"}),Komodo.Application.CreatePaymentPlanController=Komodo.UI.Controller.extend({_currentCustomerNumber:void 0,_instalmentTerms:void 0,_currencyType:"",_selectedCountry:void 0,_subscriptionAccountIpDay:void 0,_statusResponses:Ember.A(),_showResults:!1,_showDataEntry:!0,_showProcessing:!1,_processComplete:!1,_hasInvoices:!1,_pageDataObjects:Ember.A(),init:function(){this._super(),this.requiresDependency("_uiService",{singleton:Komodo.Services.uiService}),this.requiresDependency("_komodoConfiguration",{singleton:KomodoConfiguration}),this.requiresDependency("_localizationService",{singleton:Komodo.Services.localizationService}),this.requiresDependency("_customerProfileService",{singleton:Komodo.Services.customerProfileService}),this.requiresDependency("_queryService",{singleton:Komodo.Services.queryService}),this.requiresDependency("_paymentPlanService",{singleton:Komodo.Services.paymentPlanService}),this.requiresDependency("_dateTimeFormatterService",{singleton:Komodo.Services.dateTimeFormatterService}),this.requiresDependency("_currencyFormatterService",{singleton:Komodo.Services.currencyFormatterService}),this.requiresDependency("_manageAccountService",{singleton:Komodo.Services.manageAccountService})},start:function(){var e=this;if(this._super(),this.set("_startingController",!0),this.set("_showResults",!1),this.set("_showDataEntry",!0),this.set("_showProcessing",!1),this.set("_processComplete",!1),this.set("_hasInvoices",!1),this.get("_pageDataObjects").clear(),this.registerModel("data",Komodo.Models.CreatePaymentPlanModel),this.set("_currentCustomerNumber",this.getCustomerProfileService().get("personalDetails.customerNo")),this.set("data.itemsPerPage",20),this.set("data.visiblePageCount",3),this.set("data.instalments","1"),this.set("_startingController",!1),!this.getPaymentPlanService().customerSelectionRequired()){var t=this.getCustomerProfileService().get("currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account");this.set("_currencyType",this.getCurrencyFormatterService().getCurrencyForCustomer(t[0].Balance.CurrencyCode)),this.set("_selectedCountry",this.getQueryService().getSelectedCountryId()),this.getPaymentPlanService().getSubscriptionAccount(this.get("_currentCustomerNumber")).done(function(a){if(0!==t.length)for(var o=0;o<t.length;o++)t[o].Number===a&&e.set("_subscriptionAccountIpDay",t[o].InvoiceDay)}),t.forEach(function(t){e.get("data.financialAccountsList").pushObject({number:t.Number,description:t.AccountTypeDescription,full:t.Number+" - "+t.AccountTypeDescription})}),this._fetchPage()}},stop:function(){this.set("this._instalmentTerms",void 0),this._super()},getUIService:function(){return this.get("_uiService")},getKomodoConfiguration:function(){return this.get("_komodoConfiguration")},getLocalizationService:function(){return this.get("_localizationService")},getCustomerProfileService:function(){return this.get("_customerProfileService")},getCustomerNumber:function(){return this.get("_currentCustomerNumber")},getQueryService:function(){return this.get("_queryService")},getPaymentPlanService:function(){return this.get("_paymentPlanService")},getDateTimeFormatterService:function(){return this.get("_dateTimeFormatterService")},getCurrencyFormatterService:function(){return this.get("_currencyFormatterService")},getManageAccountService:function(){return this.get("_manageAccountService")},_localize:function(e){return this.getLocalizationService().value("locale.manageAccount.paymentPlan:"+e)},selectedInvoicesChanged:function(){var e=0,t=Ember.A();this._pageDataObjects.forEach(function(e){e.customerInvoices.filterBy("selected",!0).forEach(function(e){t.pushObject(e)})}),t.forEach(function(t){e=e+=parseFloat(t.Balance.replace(/^\D+/g,""))}),this.set("data.runningTotal",e.toFixed(2)),this.set("data.selectedInvoicesTotalAmount",this.get("data.runningTotal")),this.set("data.chosenAmountsRunningTotal",this.get("data.runningTotal")),e>0&&"1"===this.get("data.instalments")?this.set("data.disableCreateInstalment",!1):(this.set("data.disableCreateInstalment",!0),this.getRunningTotal())}.observes("data.customerInvoices.@each.selected"),isDefaultNumberOfInstalments:function(){return"1"===this.get("data.instalments")?(this.set("data.disableCreateInstalment",!1),!0):(this.set("data.disableCreateInstalment",!0),!1)}.property("data.instalments"),_clearInstalmentAmountValidators:function(){for(var e=1;this.get("validators")["instalmentAmountValidator_"+e];)delete this.get("validators")["instalmentAmountValidator_"+e],e+=1},chosenInstalmentAmounts:function(){var e,t;this._clearInstalmentAmountValidators(),this.get("data.chosenInstalmentAmounts").clear();for(var a=1;a<=this._instalmentTerms;a++)e=Ember.Object.create({key:a,amount:0}),t="instalmentAmountValidator_"+a,this.registerValidator(e,"amount",{type:"number",isRequired:!0,limitValueToType:!0,displayName:this._localize("createPaymentPlan.instalmentAmount"),name:t}),e.set("validator",this.get("validators."+t)),this.get("data.chosenInstalmentAmounts").pushObject(e);return this.get("data.chosenInstalmentAmounts")}.observes("this._instalmentTerms"),getRunningTotal:function(){var e=parseFloat(this.get("data.selectedInvoicesTotalAmount")),t=!0,a=this.get("data.chosenInstalmentAmounts");0!==e&&0!==a.length&&(a.forEach(function(a){a.amount?(e=e.toFixed(2)-a.amount,t=!0):t=!1}),this.set("data.chosenAmountsRunningTotal",e.toFixed(2))),"1"===this.get("data.instalments")&&0!==parseFloat(this.get("data.selectedInvoicesTotalAmount"))?this.set("data.disableCreateInstalment",!1):0===e&&t&&0!==parseFloat(this.get("data.selectedInvoicesTotalAmount"))?this.set("data.disableCreateInstalment",!1):this.set("data.disableCreateInstalment",!0)}.observes("data.chosenInstalmentAmounts.@each.amount","data.instalments"),_fetchPage:function(){var e=this;if(!this.get("_startingController")){var t=this._pageDataObjects.filterBy("pageNumber",this.get("data.pageNumber"));if(t.length>0)return this.get("data.customerInvoices").clear(),this.set("data.customerInvoices",t[0].customerInvoices.slice(0)),void(this.get("data.customerInvoices").length>0&&this.set("_hasInvoices",!0));this.getPaymentPlanService().fetchCustomerInvoices(this.get("_currentCustomerNumber"),this.get("data.pageNumber"),this.get("data.itemsPerPage")).done(function(t){e.set("data.totalHits",t.TotalRecords),0!==t.Invoices.length&&e.set("_hasInvoices",!0);var a={};a.pageNumber=e.get("data.pageNumber"),a.customerInvoices=Ember.A(),t.Invoices.forEach(function(t){var o=e.getCurrencyFormatterService().convertAmountToSystemCurrency(e.get("_currencyType"),t.BalanceBroughtForward),n=e.getCurrencyFormatterService().convertAmountToSystemCurrency(e.get("_currencyType"),t.TotalAmount),s=e.getCurrencyFormatterService().convertAmountToSystemCurrency(e.get("_currencyType"),t.Balance);a.customerInvoices.pushObject({Id:t.Id,InvoiceNumber:t.InvoiceNumber,DisputeStatus:t.DisputeStatus,InvoiceDate:e.getDateTimeFormatterService().convertDateFromXsdToSystemDate(t.InvoiceDate),DueDate:e.getDateTimeFormatterService().convertDateFromXsdToSystemDate(t.DueDate),FinancialAccountId:t.FinancialAccountId,Mop:t.Mop,BalanceBroughtForward:o,TotalAmount:n,Balance:s})}),e.get("data.customerInvoices").clear(),e.set("data.customerInvoices",a.customerInvoices.slice(0)),e._pageDataObjects.pushObject(a)}).fail(function(e){Komodo.log(" getPaymentPlanService has failed"+e)});for(var a=1;a<=KomodoConfiguration.finance.paymentArrangementMaximumTerm;a++)this.get("data.instalmentTerms").pushObject({key:a,value:a});this.registerValidator(this.get("data"),"instalmentTerms",{isRequired:!0,displayName:kl.value("locale.manageAccount.paymentPlan:createPaymentPlan.numberOfInstalments")})}}.observes("data.pageNumber"),_visibleInvoicesContent:function(){return this.get("data.customerInvoices")}.property("data.customerInvoices"),actions:{searchInvoiceList:function(){var e=this._pageDataObjects.filterBy("pageNumber",this.get("data.pageNumber"))[0].customerInvoices;this.set("data.itemsPerPage",this.get("data.totalHits")),this._fetchPage(),this.get("data.financialAccountFilter")?this.set("data.customerInvoices",e.filterBy("FinancialAccountId",this.get("data.financialAccountFilter"))):this.set("data.customerInvoices",e.slice(0))},clearInvoiceList:function(){this._fetchPage(),this.set("data.financialAccountFilter",void 0)},pageSelected:function(e){this.set("data.pageNumber",e.pageNumber)},createPaymentPlan:function(){var e,t=this;this.set("_showResults",!0),this.set("_showDataEntry",!1),this.set("_showProcessing",!0),this.get("_statusResponses").clear(),e="1"===t.get("data.instalments")?this.getPaymentPlanService().setMonthlyInstalments(t.get("data.selectedInvoicesTotalAmount"),t._instalmentTerms):this.get("data.chosenInstalmentAmounts"),this.set("data.listOfInstalments",e);var a=this.getPaymentPlanService().getDueDates(t._instalmentTerms,t.get("_subscriptionAccountIpDay")),o=this.getInstallments(a,e),n=Ember.A();this._pageDataObjects.forEach(function(e){e.customerInvoices.filterBy("selected",!0).forEach(function(e){n.pushObject({UID:e.Id})})});var s={Country:this.get("_selectedCountry"),CustomerUID:this.get("_currentCustomerNumber"),InvoiceUIDs:{InvoiceUID:n},InvoiceInstalments:{InvoiceInstalment:o}},r={eventName:"CreateInvoiceInstalmentPlan",eventVersion:"v1"};this.sendMessage(s,r).done(function(){Komodo.log("CreateInvoiceInstalmentPlan() : CreateInvoiceInstalmentPlan event has been published")}).fail(function(e){Komodo.log("CreateInvoiceInstalmentPlan() : CreateInvoiceInstalmentPlan event has failed"+e)})}},canCreatePlan:function(){this.getSecurityService().hasPermission("clarity://payment-plan/create")?this.set("_showDataEntry",!0):this.set("_showDataEntry",!1)}.property("_showDataEntry"),getInstallments:function(e,t){for(var a=Ember.A(),o=0;o<e.length;o++){var n=Ember.Object.create({DueDate:this.getDateTimeFormatterService().convertDateFromSystemDateToEsbDate(e[o]),AmountDue:t[o].amount});a.pushObject(n)}return a},_errorViewLayout:function(){this.set("_showProcessing",!1),this.set("_showResults",!0),this.set("_showDataEntry",!this.get("_processComplete"))},messageReceived:function(e){Komodo.UI.log("[CreatePaymentPlanController.messageReceived] : event name = "+e.ResponseMessage.EventName),Komodo.Controls.MessageBoxController.show(this._localize("createPaymentPlan.createPaymentPlan"),this._localize("messages.genericMessageReceived"),Komodo.Controls.MessageBoxOkButtons,this,"genericMessageReceived","success")},messageDeliveryFailure:function(e){Komodo.UI.warn("[CreatePaymentPlanController.messageDeliveryFailure] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(this._localize("createPaymentPlan.createPaymentPlan"),this._localize("messages.genericDeliveryFailureMessage"),Komodo.Controls.MessageBoxOkButtons,this,"genericDeliveryFailure","warning"),this._errorViewLayout()},messageFault:function(e){Komodo.UI.error("[CreatePaymentPlanController.messageFault] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(this._localize("createPaymentPlan.createPaymentPlan"),this._localize("messages.genericFaultMessage"),Komodo.Controls.MessageBoxOkButtons,this,"genericFault","danger"),this._errorViewLayout()},messageFailureMessageEventReceived:function(e){Komodo.UI.warn("[CreatePaymentPlanController.messageInvoiceInstalmentPlanAmendedDeliveryFailure] : messageId = "+e.messageId),this.get("_statusResponses").pushObject(Ember.Object.create({imageUrl:"Content/Images/cross.svg",status:this._localize("processStatusDescription.FailureMessageEvent")+" : "+e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription})),this._errorViewLayout()},messageInvoiceInstalmentPlanCreatedReceived:function(e){var t=this;Komodo.UI.log("[CreatePaymentPlanController.messageInvoiceInstalmentPlanCreatedReceived]"+e.ResponseMessage.EventMetaData.Event.EventId),this.set("_showProcessing",!1),this.set("_processComplete",!0),Komodo.Controls.MessageBoxController.show(this._localize("messages.paymentPlanCreatedTitle"),this._localize("createPaymentPlan.createPaymentPlanSuccess"),Komodo.Controls.MessageBoxOkButtons,this,"paymentPlanCreated","success").response=function(e){"ok"===e&&(t.startNewProcess(),t.getUIService().transitionTo("paymentPlan"))}},messageCreateInvoiceInstalmentPlanDeliveryFailure:function(e){Komodo.UI.warn("[CreatePaymentPlanController.messageInvoiceInstalmentPlanAmendedDeliveryFailure] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(this._localize("createPaymentPlan.createPaymentPlan"),this._localize("messages.genericDeliveryFailureMessage"),Komodo.Controls.MessageBoxOkButtons,this,"paymentPlanDeliveryFailure","warning"),this._errorViewLayout()},messageCreateInvoiceInstalmentPlanFault:function(e){Komodo.UI.error("[CreatePaymentPlanController.messageInvoiceInstalmentPlanAmendedFault] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(this._localize("createPaymentPlan.createPaymentPlan"),this._localize("messages.genericFaultMessage"),Komodo.Controls.MessageBoxOkButtons,this,"paymentPlanFault","danger"),this._errorViewLayout()},messageNotifyProcessStatusChangedReceived:function(e){Komodo.UI.log("[CreatePaymentPlanController.messageInvoiceInstalmentPlanCreatedReceived]"+e.ResponseMessage.EventMetaData.Event.EventId);var t=e.ResponseMessage.Payload.Status,a=this;this.get("_statusResponses").pushObject(Ember.Object.create({imageUrl:"Content/Images/"+("failure"!==t.toLowerCase()?"check":"cross")+".svg",status:this._localize("processStatusDescription."+t),dateChanged:moment(e.ResponseMessage.Payload.DateChanged).format("DD/MM/YYYY HH:mm:ss")})),"awaitingapproval"===t.toLowerCase()&&(this.set("_processComplete",!1),this.set("_showProcessing",!1),Komodo.Controls.MessageBoxController.show(this._localize("messages.awaitingApprovalTitle"),this._localize("messages.awaitingApprovalMessage"),Komodo.Controls.MessageBoxOkButtons,this,"awaitingApproval","success").response=function(e){"ok"===e&&a.getUIService().transitionTo("paymentPlan")})}}),Komodo.Application.CustomerQuoteDetailsController=Komodo.UI.Controller.extend({localeCustomerQuoteDetails:"locale.manageaccount:quoteDetails.",qouteIndex:void 0,selectedQuote:void 0,preactivateMinDays:"",preactivateMaxDays:"",init:function(){this.set("processVersion","v1.1"),this.set("processName","Customer Quote Detail Information"),this.requiresDependency("_queryService",{singleton:Komodo.Services.queryService}),this.registerModel("customerQuoteDetailsModel",Komodo.Models.CustomerQuoteDetailsModel),this.initializeData(),this._super()},initializeData:function(){this.set("isRegenerateQuoteDisable",!1),this.set("isRejectQuoteDisable",!1),this.set("isUseAvailableCreditDisable",!1),this.set("isPreActivateDisable",!1),this.set("isPreActivateVisable",!0),this.set("prevQoute",!0),this.set("nextQoute",!0),this.set("allowToPreActivateQoutes",!0),this.set("holidayhomequote",!1),this.set("preactivatemessage",void 0)},start:function(){this.registerModel("customerQuoteDetailsModel",Komodo.Models.CustomerQuoteDetailsModel),this.set("isPreActivateDisable",!1),this.set("isAccountcheck",!1),this.set("holidayHomeAccounts",void 0),this.set("addToAccountEnable",!1),this.set("loggedInCountryId",Komodo.Services.uiService.getController("application").get("_selectedCountryId"));var e=Komodo.Services.ProductAndServiceMaintenanceHelper.create();if(e.isCustomerIdIsAvailableToRetriveData()){var t=e.getCustomerIdToRetrieveData();this.getcustomerquotes(t)}if(!Ember.isBlank(this.get("allQuotes"))){for(var a=0;a<this.get("allQuotes").length;a++){var o=this;if(this.get("allQuotes")[a].Id===o.selectedQuote){quote=this.get("allQuotes")[a],this.qouteIndex=a;break}}this.qouteIndex>=this.get("allQuotes").length-1?this.set("nextQuoteVisible.disabled",!0):this.set("nextQuoteVisible.disabled",!1),this.qouteIndex<=0?this.set("preQuoteVisible.disabled",!0):this.set("preQuoteVisible.disabled",!1),Ember.isBlank(quote)||(this.set("canPreActivate",Komodo.Services.securityService.hasPermission("clarity://customerQuoteDetails/canPreActivateQuote")),this.set("isViewOnly",Komodo.Services.securityService.hasPermission("clarity://customerQuoteDetails/viewOnly")),this.bindQuote(quote))}},getcustomerquotes:function(e){var t=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),a=Komodo.Application.ManageAccountSharedObjectController.create();if(Ember.isBlank(Komodo.Services.manageAccountService.currentCustomerQuotes))Ember.isBlank(e)||(a.retrieveCustomerQuotes(e),this.set("allQuotes",t.createArrayForSingleElement(Komodo.Services.manageAccountService.currentCustomerQuotes)));else{var o=t.createArrayForSingleElement(Komodo.Services.manageAccountService.currentCustomerQuotes);Ember.isBlank(o)||o[0].CustomerId.toString()!==e.toString()?Ember.isBlank(e)||(a.retrieveCustomerQuotes(e),this.set("allQuotes",t.createArrayForSingleElement(Komodo.Services.manageAccountService.currentCustomerQuotes))):this.set("allQuotes",o)}},checkAddtoAccountVisibilty:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("QuoteDetail","IsAddToAccountEnable").done(function(t){if(t){var a=Komodo.Services.customerProfileService.currentFinancialAccounts,o=Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerClass;if(a&&"2"===o){for(var n=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),s=n.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account),r=["1","6","7"],i=0;i<s.length;i++)void 0!==s[i].Status&&"6"===s[i].Status&&void 0!==s[i].IsDefault&&s[i].IsDefault&&void 0!==s[i].PaymentDetail&&s[i].IsDefault&&void 0!==s[i].PaymentDetail.MethodOfPayment&&-1===r.indexOf(s[i].PaymentDetail.MethodOfPayment.toString())&&e.set("isAccountcheck",!0),"13"===s[i].Type&&(e.get("holidayHomeAccounts")?e.set("holidayHomeAccounts",e.get("holidayHomeAccounts")+","+s[i].UID):e.set("holidayHomeAccounts",s[i].UID));e.set("addToAccountEnable",!0)}else e.set("addToAccountEnable",!1)}else e.set("addToAccountEnable",!1)}).fail(function(){Komodo.log("Error while checking feature toggle QuoteDetail.IsAddToAccountEnable")})},newlyAddedProductCheck:function(){var e=!1;return Komodo.Services.featureToggleService.isEnabled("QuoteDetail","IsNewlyAddedProductCheck").done(function(t){!Ember.isBlank(t)&&t&&(e=!0)}).fail(function(){Komodo.log("Error while checking feature toggle QuoteDetail.IsNewlyAddedProductCheck")}),e},isDateNotFormatted:function(e){return e.length>10},collapsiblePrevAndNextLinks:function(){return[this.get("preQuoteVisible").set("title",kl.value(this.localeCustomerQuoteDetails+"previousQuote")),this.get("nextQuoteVisible").set("title",kl.value(this.localeCustomerQuoteDetails+"nextQuote"))]}.property(),nextQuoteVisible:Ember.Object.create({action:"next",title:void 0}),preQuoteVisible:Ember.Object.create({action:"prev",title:void 0}),canPreActivateQoutes:function(e,t){Komodo.Application.ManageAccountSharedObjectController.create().retrieveFinancialAccountsSync(t);var a=Komodo.Services.customerProfileService.currentFinancialAccounts,o=!1,n=!1;if(this.set("holidayhomequote",!1),a){var s=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),r=s.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account),l=this.preActivateThresholdAllowed();for(i=0;i<r.length;i++)if(("3"===r[i].Status||"9"===r[i].Status)&&(!0!==l||parseFloat(r[i].Balance.Value).toFixed(2)>GetCustomerTypesConstants("PreActivateConstants","THRESHOLDAMOUNT"))){this.set("allowToPreActivateQoutes",!1),this.set("preactivatemessage",kl.value(this.localeCustomerQuoteDetails+"CantPreActivateQouteMessage")),o=!0;break}for(Komodo.Services.featureToggleService.isEnabled("QuoteDetail","HolidayHome2pointzerocheck").done(function(e){n=e}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)}),j=0;j<r.length;j++){if(n&&"13"===r[j].Type&&e===r[j].UID){this.set("holidayhomequote",!0),this.checkPrimaryServiceActive()?this.set("allowToPreActivateQoutes",!0):(this.set("allowToPreActivateQoutes",!1),
this.set("preactivatemessage",!0===o?this.get("preactivatemessage"):kl.value(this.localeCustomerQuoteDetails+"preActivateMessageforPrimaryService")));break}this.set("allowToPreActivateQoutes",!0!==o)}}},checkPrimaryServiceActive:function(){for(var e=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),t=e.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account),a=!1,o=0,n=t.length;o<n;o++)if("3"===t[o].Type.toString()||"15"===t[o].Type.toString())for(var s=e.createArrayForSingleElement(t[o].ListOfAgreement.Agreement),r=0,i=s.length;r<i;r++)if(void 0!==s[r].ListOfHardware&&void 0!==s[r].ListOfHardware.Hardware)for(var l=e.createArrayForSingleElement(s[r].ListOfHardware.Hardware),c=0,u=l.length;c<u;c++)if(l[c].ListOfService&&l[c].ListOfService.Service){var d=e.createArrayForSingleElement(l[c].ListOfService.Service);if(d.length>0)for(var h=0,m=d.length;h<m;h++)if("principal"===d[h].ProductDetail.Type.toString().toLowerCase()&&"active"===d[h].Status.toString().toLowerCase()){a=!0;break}}return a},preActivateThresholdAllowed:function(){var e=!1;return Komodo.Services.featureToggleService.isEnabled("QuoteDetail","PreActivateThresholdAllowed").done(function(t){!Ember.isBlank(t)&&t&&(e=!0)}).fail(function(){Komodo.log("Error while checking feature toggle QuoteDetail.PreActivateThresholdAllowed")}),e},getCurrencyForCustomer:function(e){for(var t=Komodo.Services.customerProfileService.get("currency"),a=0;a<t.length;a++)if(t[a].key===e)return t[a].value;return""},redirectToAmountToPay:function(e){Komodo.Services.featureToggleService.isEnabled("ManageCustomer","IsAllowAmountToPayPaymentPlanPopup").done(function(t){t?Komodo.Services.uiService.transitionTo("amountToPay"):e.send("viewAmountPayable")}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)})},getPreActivateMinDays:function(){return this.preactivateMinDays||(this.preactivateMinDays=GetClarityConstants("ManageViewingConstants","config.komodoConfiguration.preActivateQuote.minDays").toString()),this.preactivateMinDays},getPreActivateMaxDays:function(){return this.preactivateMaxDays||(this.preactivateMaxDays=GetClarityConstants("ManageViewingConstants","config.komodoConfiguration.preActivateQuote.maxDays").toString()),this.preactivateMaxDays},preActivatePopup:function(e,t,a){var o=[],n=this,s=void 0;canExist=!0;var r=void 0;t&&n.customerQuoteDetailsModel.set("qouteSourceEvent",t);var l=!0===n.get("holidayhomequote")?GetCustomerTypesConstants("PreActivateConstants","holidayHomeMinDays"):n.getPreActivateMinDays(),c=!0===n.get("holidayhomequote")?GetCustomerTypesConstants("PreActivateConstants","holidayHomeMaxDays"):n.getPreActivateMaxDays();switch(n.customerQuoteDetailsModel.get("qouteSourceEvent")){case"ProductSubstitution":s=!0===n.get("holidayhomequote")?GetCustomerTypesConstants("PreActivateConstants","holidayHomeQuotereason"):GetCustomerTypesConstants("PreActivateConstants","productSubstitutionreason"),r=2;break;case"ProductReconnect":s=!0===n.get("holidayhomequote")?GetCustomerTypesConstants("PreActivateConstants","holidayHomeQuotereason"):GetCustomerTypesConstants("PreActivateConstants","productReconnectreason"),r=1;break;case"ProductCreate":s=!0===n.get("holidayhomequote")?GetCustomerTypesConstants("PreActivateConstants","holidayHomeQuotereason"):GetCustomerTypesConstants("PreActivateConstants","productCreatereason"),r=0;break;case"QuoteForQuantityChange":s=GetCustomerTypesConstants("PreActivateConstants","quoteForQuantityChangereason")}for(i=l;i<=c;i++)o.push(i);n.customerQuoteDetailsModel.set("Reason",parseInt(s)),n.customerQuoteDetailsModel.set("Days",o);var u=n.getserialnumberbyQuoteId(e);n.get("holidayhomequote")?(n.customerQuoteDetailsModel.set("NumberOfDays",GetCustomerTypesConstants("PreActivateConstants","holidayHomeMaxDays")),n.customerQuoteDetailsModel.set("deviceserialNumber",u),n.customerQuoteDetailsModel.set("packageoperation",r)):n.customerQuoteDetailsModel.set("NumberOfDays",n.getPreActivateMinDays());var d=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),h=d.getCustomerIdToRetrieveData(),m={quoteId:e,controllerName:a,daysToAdd:0,serialNumber:u,packageOperation:r,customerId:h,reason:parseInt(s)};n.defaultPreactive(m)},doHolidayHome:function(e,t){var a=this,o={DeviceSerialNumber:e.serialNumber,PackageNames:[],QuoteId:e.quoteId,ReconnectionReasonId:0,DaysToAdd:e.daysToAdd,Operation:e.packageOperation};Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo),Komodo.Services.queryService.postJSON("/Device/PreActivateHolidayHome",{data:o}).done(function(o){t.close(),Komodo.Controls.MessageBoxController.show(kl.value(a.localeCustomerQuoteDetails+"Success"),kl.value(a.localeCustomerQuoteDetails+"QuotePreactivated"),Komodo.Controls.MessageBoxOkButton,a,"authmbx3","success").response=function(t){if("ok"===t)if("customerProfileContainer"==e.controllerName){var o=Komodo.Services.uiService.getController(e.controllerName);a.redirectToAmountToPay(o)}else Komodo.Services.uiService.transitionTo("quotes")}}).error(function(t){Komodo.Controls.MessageBoxController.show(kl.value(a.localeCustomerQuoteDetails+"Failure"),t.responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,this,"authmbx3","danger").response=function(t){if("ok"==t&&"customerProfileContainer"===e.controllerName){var o=Komodo.Services.uiService.getController(e.controllerName);a.redirectToAmountToPay(o)}}})},doOther:function(e,t){var a=this;Komodo.Services.featureToggleService.isEnabled("QuoteDetail","PreActivationWithLimitCheck").done(function(o){if(o)var n={QuoteId:e.quoteId,DaysToAdd:e.daysToAdd,Reason:e.reason,CustomerId:e.customerId,EventId:GetCustomerTypesConstants("PreActivateConstants","preactivationEventId")};else var n={QuoteId:e.quoteId,DaysToAdd:e.daysToAdd,Reason:e.reason};Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo),Komodo.Services.queryService.postJSON("/Quote/PreActivateQuoteWithLimit",{data:n}).done(function(o){t.close(),Komodo.Controls.MessageBoxController.show(kl.value(a.localeCustomerQuoteDetails+"Success"),kl.value(a.localeCustomerQuoteDetails+"QuotePreactivated"),Komodo.Controls.MessageBoxOkButton,a,"authmbx3","success").response=function(t){if("ok"===t)if(a.addGraceDays(e.quoteId,e.daysToAdd),"customerProfileContainer"==e.controllerName){var o=Komodo.Services.uiService.getController(e.controllerName);a.redirectToAmountToPay(o)}else Komodo.Services.uiService.transitionTo("quotes")}}).error(function(t){Komodo.Controls.MessageBoxController.show(kl.value(a.localeCustomerQuoteDetails+"Failure"),t.responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,this,"authmbx3","danger").response=function(t){if("ok"==t&&"customerProfileContainer"===e.controllerName){var o=Komodo.Services.uiService.getController(e.controllerName);a.redirectToAmountToPay(o)}}})}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)})},preActivateOK:function(e,t){var a=this;canExist=!1;var o=kl.value(a.localeCustomerQuoteDetails+"Confirm"),n=kl.value(a.localeCustomerQuoteDetails+"confirmMessage")+e.quoteId+kl.value(a.localeCustomerQuoteDetails+"confirmMessage1")+e.daysToAdd+kl.value(a.localeCustomerQuoteDetails+"confirmMessage2");Komodo.Controls.MessageBoxController.show(o,n,Komodo.Controls.MessageBoxYesNoButtons,a).response=function(o){if("yes"===o)!0===a.get("holidayhomequote")?a.doHolidayHome(e,t):a.doOther(e,t);else if("no"===o&&"customerProfileContainer"==e.controllerName){var n=Komodo.Services.uiService.getController(e.controllerName);a.redirectToAmountToPay(n)}}},addGraceDays:function(e,t){var a=Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo,o=(new Date).toLocaleDateString("sv-SE"),n=Komodo.Services.securityService.roles,s=[];n.forEach(function(e,t){var a=e.split("/");s[t]=a[a.length-1]});var r=[this.getserialnumberbyQuoteId(e)],i={CustomerUID:a,ListOfSmartCardNumber:r,LastGraceDayGivenOn:o,NumberOfGraceDaysGiven:t,ListOfRole:s,Action:GetClarityConstants("ManageViewingConstants","manageGraceDayConfiguration.maxGraceDayAllowedConfiguration.maxGraceDayAllowed.actionCode").toString()};Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo),Komodo.Services.queryService.postJSON("/CustomerProfile/AddGraceDays",{data:i}).done(function(e){}).error(function(e){var t=JSON.stringify(e);Komodo.log("Add Grace days- AddGraceDays ajax call failed. Error: "+t)})},getserialnumberbyQuoteId:function(e){var t=void 0,a=this.get("allQuotes");if(!Ember.isBlank(a))for(var o=0;o<a.length;o++)if(a[o].Id.toString()===e.toString()){t=a[o].LineItems[0].SerialNumber;break}return t},bindQuote:function(e){var t=Komodo.Application.ManageAccountSharedObjectController.create();if(this.canPreActivateQoutes(e.FinancialAccountId.toString(),e.CustomerId.toString()),this.checkAddtoAccountVisibilty(),2===e.QuoteGenerationMethod?this.set("isPreActivateDisable",!0):this.set("isPreActivateDisable",!1),"ProductCreate"===e.SourceEvent&&this.get("holidayhomequote")?this.set("isPreActivateDisable",!1):"ProductCreate"===e.SourceEvent&&this.newlyAddedProductCheck()&&this.set("isPreActivateDisable",!0),0==this.get("canPreActivate")?this.set("isPreActivateVisable",!1):this.set("isPreActivateVisable",!0),this.customerQuoteDetailsModel.set("quoteNumber",this.verifyAndGetBlankValue(e.Id.toString().trim())),this.customerQuoteDetailsModel.set("quoteDate",this.verifyAndGetBlankValue(e.QuoteDate.toString().trim())),this.customerQuoteDetailsModel.set("quoteCategory",this.getQuotationType(this.verifyAndGetBlankValue(e.QuoteGenerationMethod.toString().trim()))),this.customerQuoteDetailsModel.set("invoiceRunId",this.verifyAndGetBlankValue(e.InvoiceRunId.toString().trim())),this.customerQuoteDetailsModel.set("expirationDate",this.verifyAndGetBlankValue(e.ExpirationDate.toString().trim())),this.customerQuoteDetailsModel.set("replacedByQuote",this.verifyAndGetBlankValue(e.ReplacedByQuoteId.toString().trim())),this.customerQuoteDetailsModel.set("status",this.verifyAndGetBlankValue(e.QuoteStatus.toString().trim())),this.customerQuoteDetailsModel.set("qouteSourceEvent",this.verifyAndGetBlankValue(e.SourceEvent.toString().trim())),"Rejected"===e.QuoteStatus||"Fulfilled"===e.QuoteStatus||"Cancelled"===e.QuoteStatus||"Replaced"===e.QuoteStatus){this.set("isUseAvailableCreditDisable",!0),this.set("isRejectQuoteDisable",!0),this.set("isPreActivateDisable",!0),this.initializeManageAccountConstantsForRejetReplace();var a=this.get("QuoteStatusToRejectForReplace"),o=this.get("QuoteGenerationMethodToRejectForReplace"),n=this.customerQuoteDetailsModel.get("qouteSourceEvent"),s=this;Komodo.Services.featureToggleService.isEnabled("QuoteDetail","EnableRejectForReplace").done(function(t){!Ember.isBlank(a)&&!Ember.isBlank(o)&&a.contains(e.QuoteStatus)&&o.contains(e.QuoteGenerationMethod.toString().trim())&&"ProductSubstitution"===n&&s.set("isRejectQuoteDisable",!t)}).fail(function(){Komodo.log("Error while checking feature toggle QuoteDetail.EnableRejectForReplace")})}else this.set("isUseAvailableCreditDisable",!0===this.get("holidayhomequote")),this.set("isRejectQuoteDisable",!0===this.get("holidayhomequote"));"Pending"===e.QuoteStatus?this.set("isRegenerateQuoteDisable",!0===this.get("holidayhomequote")):this.set("isRegenerateQuoteDisable",!0),this.customerQuoteDetailsModel.set("createdBy",this.verifyAndGetBlankValue(e.CreatedByUser.toString().trim())),this.customerQuoteDetailsModel.set("fulfillmentDate",this.verifyAndGetBlankValue(t.getFormattedDate(e.FulfillmentDate).toString().trim())),this.customerQuoteDetailsModel.set("paymentDueDate",this.verifyAndGetBlankValue(e.PaymentDueDate.toString().trim())),this.customerQuoteDetailsModel.set("quoteTotal",!0===this.get("holidayhomequote")?"0.00":this.verifyAndGetBlankValue(parseFloat(e.TotalAmount).toFixed(2).toString().trim())),this.customerQuoteDetailsModel.set("availableBalance",!0===this.get("holidayhomequote")?"0.00":this.verifyAndGetBlankValue(parseFloat(e.FinancialAccountCurrentBalance).toFixed(2).toString().trim())),this.customerQuoteDetailsModel.set("accountBalance",this.verifyAndGetBlankValue(parseFloat(e.FinancialAccountBalance).toFixed(2)).toString().trim()),this.customerQuoteDetailsModel.set("amountIfPaidToday",!0===this.get("holidayhomequote")?"0.00":this.verifyAndGetBlankValue(parseFloat(parseFloat(e.TotalAmount)+parseFloat(e.FinancialAccountCurrentBalance)).toFixed(2).toString().trim()));for(var r=0;r<e.LineItems.length;r++){var i=this.getCurrencyForCustomer(e.LineItems[r].CurrencyId);e.LineItems[r].AmountIncludingVAT=!0===this.get("holidayhomequote")?"":this.verifyAndGetBlankValue((parseFloat(e.LineItems[r].Amount).toFixed(2)+" "+i).toString().trim()),e.LineItems[r].Amount=!0===this.get("holidayhomequote")?"":this.verifyAndGetBlankValue((parseFloat(parseFloat(e.LineItems[r].Amount).toFixed(2)-parseFloat(e.LineItems[r].TaxAmount).toFixed(2)).toFixed(2)+" "+i).toString().trim()),e.LineItems[r].TaxAmount=!0===this.get("holidayhomequote")?"":this.verifyAndGetBlankValue((parseFloat(e.LineItems[r].TaxAmount).toFixed(2)+" "+i).toString().trim()),(this.isDateNotFormatted(e.LineItems[r].StartDate)||this.isDateNotFormatted(e.LineItems[r].EndDate))&&(e.LineItems[r].StartDate=!0===this.get("holidayhomequote")?"":this.verifyAndGetBlankValue(t.getFormattedDate(e.LineItems[r].StartDate.toString().trim())),e.LineItems[r].EndDate=!0===this.get("holidayhomequote")?"":this.verifyAndGetBlankValue(t.getFormattedDate(e.LineItems[r].EndDate.toString().trim())))}this.customerQuoteDetailsModel.set("quoteLineDetails",e.LineItems),this.get("isViewOnly")?(this.set("isRegenerateQuoteDisable",!0),this.set("isRejectQuoteDisable",!0),this.set("isUseAvailableCreditDisable",!0),this.set("isPreActivateDisable",!0)):(this.set("isRegenerateQuoteDisable",this.get("isRegenerateQuoteDisable")),this.set("isRejectQuoteDisable",this.get("isRejectQuoteDisable")),this.set("isUseAvailableCreditDisable",this.get("isUseAvailableCreditDisable")),this.set("isPreActivateDisable",this.get("isPreActivateDisable"))),this.get("addToAccountEnable")&&this.get("isAccountcheck")&&void 0!==this.get("holidayHomeAccounts")&&void 0!==e.QuoteStatus&&"pending"===e.QuoteStatus.toLowerCase()&&void 0!==e.FinancialAccountId&&this.get("holidayHomeAccounts").split(",").contains(e.FinancialAccountId.toString())?this.set("isAddToAccountVisible",!0):this.set("isAddToAccountVisible",!1)},initializeManageAccountConstantsForRejetReplace:function(){this.set("QuoteStatusToRejectForReplace",GetClarityConstants("ManageAccountConstants","RejectQuote.QuoteStatus")),this.set("QuoteGenerationMethodToRejectForReplace",GetClarityConstants("ManageAccountConstants","RejectQuote.QuoteGenerationMethod"))},getQuotationType:function(e){for(var t=Komodo.Services.customerProfileService.get("quotationType"),a=0;a<t.length;a++)if(t[a].key==e)return t[a].value;return""},qoutesNavigation:function(e){var t=this.get("allQuotes");if("next"===e){if(this.qouteIndex<t.length-1){this.qouteIndex++,this.qouteIndex===t.length-1?this.set("nextQuoteVisible.disabled",!0):this.set("nextQuoteVisible.disabled",!1),this.set("preQuoteVisible.disabled",!1);var a=t[this.qouteIndex];void 0!==a&&(quote=a,this.bindQuote(quote))}}else if("prev"===e&&this.qouteIndex>0){this.qouteIndex--,0===this.qouteIndex?this.set("preQuoteVisible.disabled",!0):this.set("preQuoteVisible.disabled",!1),this.set("nextQuoteVisible.disabled",!1);var o=t[this.qouteIndex];void 0!==o&&(quote=o,this.bindQuote(quote))}},actions:{UseAvailableCredit:function(){var e=this,t=Komodo.Controls.MessageBoxController.show(kl.value(e.localeCustomerQuoteDetails+"useAvailableCreditTitle"),kl.value(e.localeCustomerQuoteDetails+"confirmUseCredit"),Komodo.Controls.MessageBoxYesNoButtons,e),a=new Array;t.response=function(t){"yes"===t&&(a.push({quoteId:quote.Id,financialAccountId:quote.FinancialAccountId}),Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo),Komodo.Services.queryService.postJSON("/Quote/AcceptQuotes",{data:a}).done(function(t){Komodo.Controls.MessageBoxController.show(kl.value(e.localeCustomerQuoteDetails+"useAvailableCreditTitle"),kl.value(e.localeCustomerQuoteDetails+"useCreditSuccess"),Komodo.Controls.MessageBoxOkButton,e,"authmbx3","success").response=function(e){"ok"===e&&Komodo.Services.uiService.transitionTo("quotes")}}).error(function(t){var a=JSON.stringify(t);Komodo.log("AcceptQuotes ajax call failed. Error: "+a),Komodo.Controls.MessageBoxController.show(kl.value(e.localeCustomerQuoteDetails+"useAvailableCreditTitle"),t.responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,e,"authmbx3","danger")}))}},rejectQuote:function(){var e=this;Komodo.Controls.MessageBoxController.show(kl.value(e.localeCustomerQuoteDetails+"rejectQuotesMessageTitle"),kl.value(e.localeCustomerQuoteDetails+"rejectQuotesMessage"),Komodo.Controls.MessageBoxYesNoButtons,e).response=function(t){"yes"===t&&Komodo.Services.queryService.getJSON("Quote/RejectQuote?quoteId="+quote.Id,!0).done(function(t){Komodo.Controls.MessageBoxController.show(kl.value(e.localeCustomerQuoteDetails+"rejectQuotesMessageTitle"),kl.value(e.localeCustomerQuoteDetails+"rejectQuoteSuccess"),Komodo.Controls.MessageBoxOkButton,e,"authmbx3","success").response=function(e){"ok"===e&&Komodo.Services.uiService.transitionTo("quotes")}}).error(function(t){var a=JSON.stringify(t);Komodo.log("Reject Quote ajax call failed. Error: "+a),Komodo.Controls.MessageBoxController.show(kl.value(e.localeCustomerQuoteDetails+"rejectQuotesMessageTitle"),t.responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,e,"authmbx3","danger")})}},regenerateQuote:function(){var e=this;Komodo.Controls.MessageBoxController.show(kl.value(e.localeCustomerQuoteDetails+"regenerateQuotesMessageTitle"),kl.value(e.localeCustomerQuoteDetails+"regenerateQuotesMessage"),Komodo.Controls.MessageBoxYesNoButtons,e).response=function(t){"yes"===t&&Komodo.Services.queryService.getJSON("Quote/RegenerateQuote?financialAccountId="+quote.FinancialAccountId+"&QuoteGenerationMethod="+quote.QuoteGenerationMethod+"&quoteId="+quote.Id+"&Save="+!1,!0).done(function(t){if(isFinite(t)){var a=kl.value(e.localeCustomerQuoteDetails+"regenerateQuoteSuccess",{newQuoteId:t});Komodo.Controls.MessageBoxController.show(kl.value(e.localeCustomerQuoteDetails+"regenerateQuotesMessageTitle"),a,Komodo.Controls.MessageBoxOkButton,e,"authmbx3","success").response=function(e){"ok"===e&&Komodo.Services.uiService.transitionTo("quotes")}}else Komodo.Controls.MessageBoxController.show(kl.value(e.localeCustomerQuoteDetails+"regenerateQuotesMessageTitle"),t,Komodo.Controls.MessageBoxOkButtons,e,"authmbx3","danger")}).error(function(t){var a=JSON.stringify(t);Komodo.log("Regenerate Quote ajax call failed. Error: "+a),Komodo.Controls.MessageBoxController.show(kl.value(e.localeCustomerQuoteDetails+"regenerateQuotesMessageTitle"),t.responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,e,"authmbx3","danger")})}},preActivate:function(){this.get("allowToPreActivateQoutes")?"zaf"!==this.get("loggedInCountryId")&&"QuoteForQuantityChange"==this.customerQuoteDetailsModel.get("qouteSourceEvent")?this.preActivateForXtraview(this.customerQuoteDetailsModel.get("quoteNumber")):this.preActivatePopup(this.customerQuoteDetailsModel.get("quoteNumber")):Komodo.Controls.MessageBoxController.show(kl.value(this.localeCustomerQuoteDetails+"CantPreActivateQouteTitle"),this.get("preactivatemessage"),Komodo.Controls.MessageBoxOkButtons,this,"authmbx3","danger")},next:function(){this.qoutesNavigation("next")},prev:function(){this.qoutesNavigation("prev")},addToAccount:function(){var e=this;Komodo.Controls.MessageBoxController.show(kl.value(e.localeCustomerQuoteDetails+"addToAccountMessageTitle"),kl.value(e.localeCustomerQuoteDetails+"confirmAddToAccount"),Komodo.Controls.MessageBoxYesNoButtons,e).response=function(t){if("yes"===t){var a={customerId:quote.CustomerId,quoteId:quote.Id};Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo),Komodo.Services.queryService.postJSON("/Device/CreateHolidayHomeDebitOrder",{data:a}).done(function(t){Komodo.Controls.MessageBoxController.show(kl.value(e.localeCustomerQuoteDetails+"addToAccountMessageTitle"),kl.value(e.localeCustomerQuoteDetails+"addToAccountSuccess"),Komodo.Controls.MessageBoxOkButton,e,"authmbx3","success").response=function(t){"ok"===t&&(e.publishCreateActivity(5,15,213,Komodo.Services.securityService.session.domainUserName+" performs Add to Debit for customer "+Komodo.Services.customerProfileService.personalDetails.customerNo),Komodo.Services.uiService.transitionTo("quotes"))}}).error(function(t){var a=JSON.stringify(t);Komodo.log("Add To Account ajax call failed. Error: "+a),"FT007"===t.responseJSON.ResponseCode?Komodo.Controls.MessageBoxController.show(kl.value(e.localeCustomerQuoteDetails+"addToAccountMessageTitle"),kl.value(e.localeCustomerQuoteDetails+"addToAccountFTApprovalMessage"),Komodo.Controls.MessageBoxOkButtons,e,"message","warning"):Komodo.Controls.MessageBoxController.show(kl.value(e.localeCustomerQuoteDetails+"addToAccountMessageTitle"),t.responseJSON.ResponseMessage,Komodo.Controls.MessageBoxOkButtons,e,"authmbx3","danger")})}}}},publishCreateActivity:function(e,t,a,o){var n=this,s=Komodo.Services.customerProfileService.getCustomerPersonalDetail(),r=Komodo.Models.CreateInteraction.create(),i=Komodo.Models.Case.create();i.set("InteracteeName",Komodo.Services.securityService.session.domainUserName),i.set("InteractionLocation",Komodo.Services.customerProfileService.get("selectedCountry").countryDescription),i.set("InteractionMedium","1"),i.set("CustomerUID",s.customerNo),i.set("Notes",o),i.set("Category",e),i.set("SubCategory",t),i.set("Outcome",a),i.set("Status","1");var l=Komodo.canonicalFacadeFactory(r,["Country","Case"]);l.set("Country",Komodo.Services.uiService.getController("application").get("_selectedCountryId")),l.set("Case",i),n.startNewProcess(),n.publishRequestOnBus(r,"CreateInteraction","v1")},publishRequestOnBus:function(e,t,a){var o=Komodo.Services.manageAccountService,n="Event Message for "+t+" ";o.publishEvent(this,e,t,a).done(function(){Komodo.log(n+" has been published successfully")}).fail(function(e,t){Komodo.log(n+" has been failed")})},getQueryService:function(){return this.get("_queryService")},messageCreateInteractionFault:function(e){Ember.isBlank(e)||Ember.isBlank(e.messageId)||Komodo.UI.error("[CustomerQuoteDetailsController.messageCreateInteractionFault] : messageId = "+e.messageId)},messageCreateInteractionDeliveryFailure:function(e){Ember.isBlank(e)||Ember.isBlank(e.messageId)||Komodo.UI.warn("[CustomerQuoteDetailsController.messageCreateInteractionDeliveryFailure] : messageId = "+e.messageId)},messageFailureMessageEventReceived:function(e){Ember.isBlank(e)||Ember.isBlank(e.ResponseMessage)||Ember.isBlank(e.ResponseMessage.Payload)||Ember.isBlank(e.ResponseMessage.Payload.ListOfErrorDetails)||Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButtons,this,"CreateInteraction","danger")},verifyAndGetBlankValue:function(e){return e||"-"},preActivateForXtraview:function(e){that=this;var t={QuoteId:e,DaysToAdd:0,Reason:GetCustomerTypesConstants("PreActivateConstants","quoteForQuantityChangereason")};Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo),Komodo.Services.queryService.postJSON("/Quote/PreActivateQuoteWithLimit",{data:t}).done(function(e){Komodo.Controls.MessageBoxController.show(kl.value(that.localeCustomerQuoteDetails+"Success"),kl.value(that.localeCustomerQuoteDetails+"QuotePreactivated"),Komodo.Controls.MessageBoxOkButton,that,"authmbx3","success")}).error(function(e){Komodo.Controls.MessageBoxController.show(kl.value(that.localeCustomerQuoteDetails+"Failure"),e.responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,this,"authmbx3","danger")})},defaultPreactive:function(e){var t=this,a=Komodo.Services.uiService.showModalPopup(kl.value(t.localeCustomerQuoteDetails+"PreActivateQuoute"),null,{view:Komodo.Application.PreactivateQouteModalPopupView,context:{data:t.customerQuoteDetailsModel,preAcivateOk:function(){e.daysToAdd=this.data.get("NumberOfDays");var o={customerNo:e.customerId,giveDays:e.daysToAdd},n=this;Komodo.UI.graceRules.checkGraceLimit(o,function(o){o.graceAllowed?t.preActivateOK(e,a):Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing:addGraceDays.useCaseTitle"),o.error,Komodo.Controls.MessageBoxOkButtons,n,"authmbx3","warning"),n.data.set("NumberOfDays",void 0),n.data.set("Reason",void 0)})},preActivateCancel:function(){if(this.data.set("NumberOfDays",void 0),this.data.set("Reason",void 0),canExist=!1,a.close(),"customerProfileContainer"===e.controllerName){var o=Komodo.Services.uiService.getController(objePreActivate.controllerName);t.redirectToAmountToPay(o)}}},canUserClose:!0,closeCallback:function(){if(canExist&&"customerProfileContainer"===e.controllerName){var a=Komodo.Services.uiService.getController(e.controllerName);t.redirectToAmountToPay(a)}}})},stop:function(){this.set("customerQuoteDetailsModel",Komodo.Models.CustomerQuoteDetailsModel.create()),this._super()}}),Komodo.Application.QuotesController=Komodo.UI.Controller.extend({init:function(){this._super()},start:function(){this.registerModel("quotesModel",Komodo.Models.QuotesModel);var e=Komodo.Application.ManageAccountSharedObjectController.create(),t=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),a=t.getCustomerIdToRetrieveData();e.retrieveCustomerQuotes(a),this.quotesModel.set("customerQuotes",Komodo.Services.manageAccountService.currentCustomerQuotes),void 0!==this.quotesModel.get("customerQuotes")&&this.quotesModel.get("customerQuotes").length>0?(this.set("isGridDataAvailable",!0),this.set("showNoquoteMessage",!1)):(this.set("isGridDataAvailable",!1),this.set("showNoquoteMessage",!0))},actions:{viewQuoteDetails:function(e){Komodo.Services.uiService.getController("customerQuoteDetails").selectedQuote=e.get("content").Id,Komodo.Services.uiService.transitionTo("customerQuoteDetails")}},stop:function(){this.set("quotesModel",Komodo.Models.QuotesModel.create()),this._super()}}),Komodo.Application.FinancialTransactionDetailsController=Komodo.UI.Controller.extend({localeFT:"locale.manageaccount:viewAccountInformation.",transactionID:void 0,financialTransactions:[],init:function(){var e=this;Komodo.log("Constructing Financial Transaction Details Controller"),e.set("processVersion","v1.1"),e.set("processName","Financial Transaction Details "),e.registerModel("finTranModel",Komodo.Models.FinancialTransactionsModel),e.set("finTranModel",Komodo.Models.FinancialTransactionsModel.create()),e.finTranModel.set("isBack",!1),Komodo.Services.eventAggregator.subscribe("PublishFinancialTransaction",function(t){Ember.isEmpty(t)||e.set("finTranModel",t)}),e._super()},previousVisible:Ember.Object.create({title:void 0,action:"prvFTDetails"}),nextVisible:Ember.Object.create({title:void 0,action:"nexFTDetails"}),start:function(){var e=this;e.set("financialTransactionDetailsModel",Komodo.Models.FinancialTransactionDetailsModel.create()),e.manageFinancicalTransactionDetails("start"),e.loadFeaturetoggles(),e._super()},loadFeaturetoggles:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("FinancialTransaction","IsSmartcardEnable").done(function(t){null!=t&&void 0!=t?e.set("showsmartcardDetails",t):e.set("showsmartcardDetails",!1)}).fail(function(){Komodo.UI.error("[ERROR] : could not retrieve FinancialTransaction.IsSmartcardEnable featureToggle")}),Komodo.Services.featureToggleService.isEnabled("financialTransaction","showPaymentTransfer").done(function(t){null!=t&&void 0!=t?e.set("showPaymentTransfer",t):e.set("showPaymentTransfer",!1)}).fail(function(){Komodo.UI.error("[ERROR] : could not retrieve FinancialTransaction.showPaymentTransfer featureToggle")}),Komodo.Services.featureToggleService.isEnabled("FinancialTransaction","ShowTax2Amount").done(function(t){e.set("showTax2Amount",t)}).fail(function(){Komodo.UI.error("[ERROR] : could not retrieve FinancialTransaction.ShowTax2Amount featureToggle")}),Komodo.Services.featureToggleService.isEnabled("FinancialTransaction","FTApprovalDetails").done(function(t){e.set("ftApprovalDetails",t)}).fail(function(){Komodo.UI.error("[ERROR] : could not retrieve FinancialTransaction.FTApprovalDetails featureToggle")})},bindData:function(e){return Komodo.Application.CustomerProfileMapper.create().mapFinancialTransactionDetail(e)},bindControls:function(){var e=this,t=e.get("currentAccountFT");if(t){var a=t.filter(function(t){return t.UID===e.get("transactionID")});if(a.length>0){var o=this.bindData(a);if(this.financialTransactionDetailsModel.set("transactionNumber",this.transactionID),this.financialTransactionDetailsModel.set("createDate",o[0].createDate),this.financialTransactionDetailsModel.set("amountPaid",o[0].amountPaid),this.financialTransactionDetailsModel.set("product",o[0].product),this.financialTransactionDetailsModel.set("ledgerAccount",o[0].ledgerAccount),this.financialTransactionDetailsModel.set("invoiceLine",o[0].invoiceLine),this.financialTransactionDetailsModel.set("approvedBy",o[0].approvedBy),this.financialTransactionDetailsModel.set("batchNumber",o[0].batchNumber),this.financialTransactionDetailsModel.set("receiptNumber",o[0].receiptNumber),this.financialTransactionDetailsModel.set("comment",o[0].comment),this.financialTransactionDetailsModel.set("createdByEvent",o[0].createdByEvent),this.financialTransactionDetailsModel.set("createdBy",o[0].createdBy),this.financialTransactionDetailsModel.set("accountNumber",o[0].accountNumber),this.financialTransactionDetailsModel.set("bankDate",o[0].bankDate),this.financialTransactionDetailsModel.set("payPoint",o[0].payPoint),this.financialTransactionDetailsModel.set("ledgerAccountDescription",o[0].ledgerAccountDescription),this.financialTransactionDetailsModel.set("paidForInvoice",o[0].paidForInvoice),this.financialTransactionDetailsModel.set("approvedDate",o[0].approvedDate),this.financialTransactionDetailsModel.set("reversedTransaction",o[0].reversedTransaction),this.financialTransactionDetailsModel.set("vatAmount",o[0].vatAmount),this.financialTransactionDetailsModel.set("taxType2Amount",o[0].taxType2Amount),this.financialTransactionDetailsModel.set("amountExcludingTax",o[0].amountExcludingTax),this.financialTransactionDetailsModel.set("amountIncludingTax",o[0].amountIncludingTax),this.financialTransactionDetailsModel.set("AgreementDetailId",o[0].AgreementDetailId),this.financialTransactionDetailsModel.set("paymentReference",o[0].paymentReference),this.financialTransactionDetailsModel.set("SmartCardNumber",o[0].SmartCardNumber.htmlSafe()),this.financialTransactionDetailsModel.set("TransferFromCustomerID",o[0].TransferFromCustomerID),this.financialTransactionDetailsModel.set("TransferToCustomerID",o[0].TransferToCustomerID),this.financialTransactionDetailsModel.set("TransferFromAccountID",o[0].TransferFromAccountID),this.financialTransactionDetailsModel.set("TransferToAccountID",o[0].TransferToAccountID),this.financialTransactionDetailsModel.set("requestedBy",o[0].requestedBy),this.financialTransactionDetailsModel.set("requestedStatus",o[0].requestedStatus),-1!=o[0].paymentReference.indexOf(KomodoConfiguration.PoSPaymentKey)){
var n=Komodo.Application.ManageAccountSharedObjectController.create();n.retrieveMOPforPOSFT(o[0].paymentReference.split("-")[1]),this.financialTransactionDetailsModel.set("methodOfPayment",n.MOP)}else this.financialTransactionDetailsModel.set("methodOfPayment",o[0].methodOfPayment)}}},showHideCustomerDetails:function(){var e=this,t=$("#komodo-show-details").css("top");"142px"!==t&&"114px"!==t||($("#komodo-customer-details").slideUp(500,function(){$("#otp-slide-item-customer").attr("class","otp-slide-close")}),$("#komodo-show-details").animate({top:40},500),$("#komodo-customer-page").animate({"padding-top":20},500,function(){e.showHideCustomerDetails()})),"40px"===t?($("#otp-slide-item").attr("class","otp-slide-open"),$("#komodo-customer-details").slideDown(500),$("#komodo-show-details").animate({top:136},{duration:500,queue:!1}),$("#komodo-customer-page").animate({"padding-top":100},{duration:500,queue:!1})):($("#komodo-customer-details").slideUp(500,function(){$("#otp-slide-item").attr("class","otp-slide-close")}),$("#komodo-show-details").animate({top:40},{duration:500,queue:!1}),$("#komodo-customer-page").animate({"padding-top":20},{duration:500,queue:!1}))},backToFinancialTransaction:function(){var e=this;Ember.isEmpty(e.finTranModel)||(e.finTranModel.set("isBack",!0),Komodo.Services.eventAggregator.publish("PublishFinancialTransactionBack",e.finTranModel)),e.transitionToRoute("/financialTransactions")},manageFinancicalTransactionDetails:function(e){for(var t=this,a=0;a<this.get("financialTransactions").length;a++)if(t.get("financialTransactions")[a].transactionId==t.get("transactionID")){var o=0;"previous"==e&&0!=a?(o=a-1,t.set("transactionID",t.get("financialTransactions")[o].transactionId)):"next"==e&&a<t.get("financialTransactions").length-1&&(o=a+1,t.set("transactionID",t.get("financialTransactions")[o].transactionId)),0==o&&0==a||0==o&&"previous"==e?t.set("previousVisible.disabled",!0):t.set("previousVisible.disabled",!1),o==t.get("financialTransactions").length-1||a==t.get("financialTransactions").length-1&&"previous"!=e?t.set("nextVisible.disabled",!0):t.set("nextVisible.disabled",!1),t.bindControls();break}},actions:{showHideCustomerDetails:function(){this.showHideCustomerDetails()},prvFTDetails:function(){this.manageFinancicalTransactionDetails("previous")},nexFTDetails:function(){this.manageFinancicalTransactionDetails("next")},backToFinancialTransaction:function(){this.backToFinancialTransaction()}},collapsiblePrevAndNextLinks:function(){return[this.get("previousVisible").set("title",kl.value(this.localeFT+"ftPrevious")),this.get("nextVisible").set("title",kl.value(this.localeFT+"ftNext"))]}.property(),stop:function(){this._super()}}),Komodo.Application.RefundTransactionView=Komodo.UI.View.extend({viewKey:"RefundTransactionView",templateName:"RefundTransactionView",didInsertElement:function(){this._super();var e=Komodo.Services.uiService.getController("refundTransaction"),t=e.get("refundTransModel"),a=new plupload.Uploader({runtimes:"html5,flash,silverlight,html4",browse_button:"choosefiles",url:KomodoConfiguration.ibsApiUrl+t.get("countryDesc")+"/uploaddownload/upload?customerNumber="+t.get("customerNumber")+"&documentType=",unique_names:"true",headers:{"komodo-sessiontoken":Komodo.Services.securityService.get("sessionToken")},filters:{max_file_size:"10mb",mime_types:[{title:"Image files",extensions:"jpg,gif,png,jpeg,JPG,GIF,PNG,JPEG"},{title:"Adobe And Document Files",extensions:"pdf,doc,xls,docx,xlsx"}],prevent_duplicates:"true"},init:{PostInit:function(){$("#filelist > tbody").html(""),$("#uploadfiles").click(function(){return $(a.files).each(function(e,t){2!==t.status&&4!==t.status||(t.status=1)}),a.uploadCanceled=!1,a.start(),!1})}.observes("refundTransModel.customerDocuments"),FilesAdded:function(e,t){var a=Komodo.Services.uiService.getController("refundTransaction"),o=a.get("refundTransModel");plupload.each(t,function(e){o.set("enableDocGrid",!0);var t=Komodo.Models.RefundsCustomerDocumentModel.create();t.set("documentName",o.get("iccDate")+"_"+e.name),t.set("documentSize",plupload.formatSize(e.size)),t.set("documentName",e.name),t.set("documentSize",plupload.formatSize(e.size)),t.set("uploadPercentage",""),"1"==o.get("customerClass")||"4"==o.get("customerClass")&&1==o.documentTypes.length?(t.set("documentType",o.documentTypes[0].value),t.set("isDocumentTypeDisable",!0)):(t.set("documentType",kl.value(a.localeRefund+"refunds")),t.set("isDocumentTypeDisable",!1)),t.set("documentSerialNumber",void 0),t.set("uploadStatus",kl.value(a.localeRefund+"queued")),t.set("documentUrl",""),t.set("disableDelete",!1),o.get("customerDocuments").pushObject(t)})},BeforeUpload:function(e,t){if(!1===e.uploadCanceled){var a=Komodo.Services.uiService.getController("refundTransaction"),o=a.get("refundTransModel");e.settings.url=KomodoConfiguration.ibsApiUrl+o.get("countryDesc")+"/uploaddownload/upload?customerNumber="+o.get("customerNumber")+"&documentType=";var n=o.customerDocuments.findBy("uploadStatus","QUEUED");o.get("documentsToBeUploaded").push(n);var s=o.documentsToBeUploaded.findBy("documentName",t.name).documentType;void 0===s||null===s||""===s?(Komodo.Controls.MessageBoxController.show("Specify Document type",kl.value(a.localeRefund+"specifyDocument"),Komodo.Controls.MessageBoxOkButtons,"specifyDocument","warning"),e.stop()):e.settings.url=e.settings.url+s}else e.stop()},UploadProgress:function(e,t){!1===e.uploadCanceled&&e.changeFileStatus(this.refundTransactionController.get("refundTransModel"),t)},FileUploaded:function(e,t,a){var o=JSON.parse(a.response)[0];e.changeFileStatus(this.refundTransactionController.get("refundTransModel"),t,o)},Error:function(e,t){Komodo.Controls.MessageBoxController.show("Specify Document type",t.code+" : "+t.message+(void 0===t.response||null===t.response?"":t.response),Komodo.Controls.MessageBoxOkButtons,"specifyDocument","warning"),e.uploadCanceled=!0,e.changeFileStatus(this.refundTransactionController.get("refundTransModel"),t.file)},UploadComplete:function(e){e.uploadCanceled=!1;var t=Komodo.Services.uiService.getController("refundTransaction"),a=Komodo.Models.SaveDocument.create(),o=Komodo.canonicalFacadeFactory(a,["ListOfDocument"]),n=[],s=t.get("refundTransModel");$(s.get("documentsToBeUploaded")).each(function(e,t){var a=Komodo.Models.Document.create();a.set("FileType",t.documentType),a.set("DocumentURL",t.documentUrl);var o=[],r=Komodo.Models.DocumentMetaData.create();r.set("DocumentMetaDataValueUri","CustomerId"),r.set("Value",s.get("customerNumber")),o.pushObject(r);var i=Komodo.Models.DocumentMetaData.create();i.set("DocumentMetaDataValueUri","DocumentType"),i.set("Value",t.documentType),o.pushObject(i);var l=Komodo.Models.DocumentMetaData.create();l.set("DocumentMetaDataValueUri","DocumentSerial"),l.set("Value",s.get("customerNumber")),o.pushObject(l);var c=Komodo.Models.DocumentMetaData.create();c.set("DocumentMetaDataValueUri","DocumentUploadDate"),c.set("Value",s.get("iccDate")),o.pushObject(c),a.set("ListOfDocumentMetaData",o),n.pushObject(a)}),a.set("Country",s.get("country")),o.set("ListOfDocument",n),Komodo.Services.CustomerService.publishCustomerEvent(this.refundTransactionController,a,"SaveCustomerDocumentEvent","v2",!1)}}});a.refundTransactionController=Komodo.Services.uiService.getController("refundTransaction"),e.refundTransModel.set("fileUploader",a),a.uploadCanceled=!1,a.changeFileStatus=this.fileUploadStatus,a.init()},messageFailureMessageEventReceived:function(e){var t=this.get("controller"),a="";void 0!==e.ResponseMessage.Payload&&void 0!==e.ResponseMessage.Payload.ListOfErrorDetails&&$(e.ResponseMessage.Payload.ListOfErrorDetails).each(function(e,t){a+=t.ErrorDescription}),""!==a&&"null"!==a&&void 0!==a||(a=kl.value(t._localeBase+"shift.technicalError")),Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"home.title"),a,Komodo.Controls.MessageBoxOkButtons,t,"modelPayment","danger")},fileUploadStatus:function(e,t,a){$(e.customerDocuments).each(function(o,n){$(e.documentsToBeUploaded).each(function(e,o){n.get("documentName")===t.name&&o.documentName===t.name&&(n.set("uploadPercentage",t.percent+" %"),2===t.status?n.set("uploadStatus","UPLOADING"):4===t.status?(n.set("uploadStatus","FAILED"),n.set("uploadPercentage","0 %")):5===t.status&&(n.set("uploadStatus","DONE"),n.set("enableDelete",!0),n.set("isDocumentTypeDisable",!0),n.set("disableDelete",!0),n.documentUrl=a))})})}}),Komodo.Application.ManageDevicePaymentPlanView=Komodo.UI.View.extend({viewKey:"ManageDevicePaymentPlanView",templateName:"ManageDevicePaymentPlanView",didInsertElement:function(){this._super();var e=this.get("context"),t=void 0;Ember.isEmpty(e.data)||Ember.isEmpty(e.data.iccCustomerNumber)||"NA"==e.data.iccCustomerNumber||(t=this.get("data.iccCustomerNumber"));var a=new plupload.Uploader({runtimes:"html5,flash,silverlight,html4",browse_button:"settlePlanPickFile",url:KomodoConfiguration.ibsApiUrl+this.get("context.loggedInCountryName")+"/uploaddownload/upload?customerNumber="+t+"&documentType=",headers:{"komodo-sessiontoken":Komodo.Services.securityService.get("sessionToken")},filters:{max_file_size:"10mb",mime_types:[{title:"Image files",extensions:"jpg,gif,png,jpeg,JPG,GIF,PNG,JPEG"},{title:"Adobe And Document Files",extensions:"pdf"},{title:"Outlook messages",extensions:"msg"}]},init:{PostInit:function(){$("#filelist > tbody").html(""),$("input:file").parent().width(0).height(0).css("visibility","hidden"),$("#uploadsettlePlanfiles").click(function(){return $(a.files).each(function(e,t){2!==t.status&&4!==t.status||(t.status=1)}),a.uploadCanceled=!1,a.start(),!1})},FilesAdded:function(e,t){var a=(this.manageDevicePaymentPlanController,this.manageDevicePaymentPlanController.get("settlePlanModel"));plupload.each(t,function(t){var o=!1;if($(a.customerDocuments).each(function(e,n){n.get("documentName")===t.name&&(o=!0,a.set("enableDocGrid",!0))}),o)e.removeFile(t);else{a.set("enableDocGrid",!0);var n=Komodo.Models.SettlePlanDPPDocumentModel.create();n.set("documentName",t.name),n.set("documentSize",plupload.formatSize(t.size)),n.set("uploadPercentage",""),n.set("documentTypes",a.get("documentTypes")),n.set("documentType",void 0),n.set("documentSerialNumber",a.get("documentSerialNumber")),n.set("documentSerialNumber",void 0),n.set("uploadStatus","QUEUED"),a.get("customerDocuments").pushObject(n)}})},UploadProgress:function(e,t){!1===e.uploadCanceled&&e.changeFileStatus(this.manageDevicePaymentPlanController.get("settlePlanModel"),t)},FileUploaded:function(e,t,a){var o=JSON.parse(a.response)[0];e.changeFileStatus(this.manageDevicePaymentPlanController.get("settlePlanModel"),t,o)},Error:function(e,t){Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.useCaseTitle"),t.code+" : "+t.message+(void 0===t.response||null===t.response?"":t.response),Komodo.Controls.MessageBoxOkButtons,this,"modelCustomerDocuments","danger"),e.uploadCanceled=!0,e.changeFileStatus(this.manageDevicePaymentPlanController.get("settlePlanModel"),t.file)},BeforeUpload:function(e,a){if(!1===e.uploadCanceled){var o=this.manageDevicePaymentPlanController,n=this.manageDevicePaymentPlanController.get("data");if(null!=n&&void 0!=n&&(Ember.isEmpty(n.iccCustomerNumber)||"NA"==n.iccCustomerNumber||(t=n.iccCustomerNumber)),Ember.isEmpty(t))e.stop();else{e.settings.url=KomodoConfiguration.ibsApiUrl+o.get("loggedInCountryName")+"/uploaddownload/upload?customerNumber="+t+"&documentType=";var s=this.manageDevicePaymentPlanController.get("settlePlanModel");$(s.customerDocuments).each(function(t,o){if(o.get("documentName")===a.name){var n=o.get("documentType");void 0!==n&&null!==n&&""!==n||(Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.useCaseTitle"),"Please specify the document type",Komodo.Controls.MessageBoxOkButtons,this,"modelCustomerDocuments","danger"),e.stop(),e.uploadCanceled=!0)}}),!1===e.uploadCanceled&&$(s.customerDocuments).each(function(o,n){n.get("documentName")===a.name&&(e.settings.url=e.settings.url+n.get("documentType")+"&serialNumber="+t)})}}},UploadComplete:function(e,a){e.uploadCanceled=!1;var o=Komodo.Models.SaveDocument.create(),n=Komodo.canonicalFacadeFactory(o,["ListOfDocument"]),s=[];$(this.manageDevicePaymentPlanController.get("settlePlanModel.customerDocuments")).each(function(e,a){if("UPLOADED"!=a.uploadStatus){var o=Komodo.Models.Document.create();o.set("FileType",a.get("documentType")),o.set("DocumentURL",a.get("documentUrl"));var n=[],r=Komodo.Models.DocumentMetaData.create();r.set("DocumentMetaDataValueUri","CustomerId"),r.set("Value",t),n.pushObject(r);var i=Komodo.Models.DocumentMetaData.create();i.set("DocumentMetaDataValueUri","DocumentType"),i.set("Value",a.get("documentType")),n.pushObject(i);var l=Komodo.Models.DocumentMetaData.create();l.set("DocumentMetaDataValueUri","DocumentSerial"),l.set("Value",t),n.pushObject(l),o.set("ListOfDocumentMetaData",n),s.pushObject(o)}}),o.set("Country",this.manageDevicePaymentPlanController.get("country")),n.set("ListOfDocument",s),Komodo.Services.CustomerService.publishCustomerEvent(this.manageDevicePaymentPlanController,o,"SaveCustomerDocumentEvent","v2",!1)}}});a.manageDevicePaymentPlanController=this.get("context"),this.get("context.settlePlanModel").set("fileUploader",a),a.uploadCanceled=!1,a.changeFileStatus=this.fileUploadStatus,a.init();var o=new plupload.Uploader({runtimes:"html5,flash,silverlight,html4",browse_button:"cancelPickfiles",url:KomodoConfiguration.ibsApiUrl+e.get("country")+"/uploaddownload/upload",headers:{"komodo-sessiontoken":Komodo.Services.securityService.get("sessionToken")},filters:{max_file_size:"10mb",mime_types:[{title:"Image files",extensions:"jpg,gif,png,jpeg,JPG,GIF,PNG,JPEG"},{title:"Adobe And Document Files",extensions:"pdf"},{title:"Outlook messages",extensions:"msg"}]},init:{PostInit:function(){$("#filelist > tbody").html(""),$("input:file").parent().width(0).height(0).css("visibility","hidden"),$("#uploadCancelfiles").click(function(){return $(o.files).each(function(e,t){2!==t.status&&4!==t.status||(t.status=1)}),o.uploadCanceled=!1,o.start(),!1})},FilesAdded:function(e,t){var a=(this.manageDevicePaymentPlanController,this.manageDevicePaymentPlanController.get("cancelPlanModel"));plupload.each(t,function(t){var o=!1;if($(a.customerDocuments).each(function(e,n){n.get("documentName")===t.name&&(o=!0,a.set("enableDocGrid",!0))}),o)e.removeFile(t);else{a.set("enableDocGrid",!0);var n=Komodo.Models.CancelPlanDPPDocumentModel.create();n.set("documentName",t.name),n.set("documentSize",plupload.formatSize(t.size)),n.set("uploadPercentage",""),n.set("documentTypes",a.get("documentTypes")),n.set("documentType",void 0),n.set("documentSerialNumber",a.get("documentSerialNumber")),n.set("documentSerialNumber",void 0),n.set("uploadStatus","QUEUED"),a.get("customerDocuments").pushObject(n)}})},UploadProgress:function(e,t){!1===e.uploadCanceled&&e.changeFileStatus(this.manageDevicePaymentPlanController.get("cancelPlanModel"),t)},FileUploaded:function(e,t,a){var o=JSON.parse(a.response)[0];e.changeFileStatus(this.manageDevicePaymentPlanController.get("cancelPlanModel"),t,o)},Error:function(e,t){Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.useCaseTitle"),t.code+" : "+t.message+(void 0===t.response||null===t.response?"":t.response),Komodo.Controls.MessageBoxOkButtons,this,"modelCustomerDocuments","danger"),e.uploadCanceled=!0,e.changeFileStatus(this.manageDevicePaymentPlanController.get("cancelPlanModel"),t.file)},BeforeUpload:function(e,a){if(!1===e.uploadCanceled){var o=this.manageDevicePaymentPlanController,n=this.manageDevicePaymentPlanController.get("data");if(null!=n&&void 0!=n&&(Ember.isEmpty(n.iccCustomerNumber)||"NA"==n.iccCustomerNumber||(t=n.iccCustomerNumber)),Ember.isEmpty(t))e.stop();else{e.settings.url=KomodoConfiguration.ibsApiUrl+o.get("loggedInCountryName")+"/uploaddownload/upload?customerNumber="+t+"&documentType=";var s=this.manageDevicePaymentPlanController.get("cancelPlanModel");$(s.customerDocuments).each(function(t,o){if(o.get("documentName")===a.name){var n=o.get("documentType");void 0!==n&&null!==n&&""!==n||(Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.useCaseTitle"),"Please specify the document type",Komodo.Controls.MessageBoxOkButtons,this,"modelCustomerDocuments","danger"),e.stop(),e.uploadCanceled=!0)}}),!1===e.uploadCanceled&&$(s.customerDocuments).each(function(o,n){n.get("documentName")===a.name&&(e.settings.url=e.settings.url+n.get("documentType")+"&serialNumber="+t)})}}},UploadComplete:function(e,a){e.uploadCanceled=!1;var o=Komodo.Models.SaveDocument.create(),n=Komodo.canonicalFacadeFactory(o,["ListOfDocument"]),s=[];$(this.manageDevicePaymentPlanController.get("cancelPlanModel.customerDocuments")).each(function(e,a){if("UPLOADED"!=a.uploadStatus){var o=Komodo.Models.Document.create();o.set("FileType",a.get("documentType")),o.set("DocumentURL",a.get("documentUrl"));var n=[],r=Komodo.Models.DocumentMetaData.create();r.set("DocumentMetaDataValueUri","CustomerId"),r.set("Value",t),n.pushObject(r);var i=Komodo.Models.DocumentMetaData.create();i.set("DocumentMetaDataValueUri","DocumentType"),i.set("Value",a.get("documentType")),n.pushObject(i);var l=Komodo.Models.DocumentMetaData.create();l.set("DocumentMetaDataValueUri","DocumentSerial"),l.set("Value",t),n.pushObject(l),o.set("ListOfDocumentMetaData",n),s.pushObject(o)}}),o.set("Country",this.manageDevicePaymentPlanController.get("country")),n.set("ListOfDocument",s),Komodo.Services.CustomerService.publishCustomerEvent(this.manageDevicePaymentPlanController,o,"SaveCustomerDocumentEvent","v2",!1)}}});o.manageDevicePaymentPlanController=this.get("context"),this.get("context.cancelPlanModel").set("fileUploader",o),o.uploadCanceled=!1,o.changeFileStatus=this.fileUploadStatus,o.init()},messageFailureMessageEventReceived:function(e){var t=this.get("controller"),a="",o="";void 0!==e.ResponseMessage.Payload&&void 0!==e.ResponseMessage.Payload.ListOfErrorDetails&&$(e.ResponseMessage.Payload.ListOfErrorDetails).each(function(e,t){a+=t.ErrorDescription,o=t.ErrorCode}),""!==a&&"null"!==a&&void 0!==a||(a=kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan..technicalError")),Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.useCaseTitle"),a,Komodo.Controls.MessageBoxOkButtons,t,"modelPayment","danger")},fileUploadStatus:function(e,t,a){$(e.customerDocuments).each(function(e,o){o.get("documentName")===t.name&&(o.set("uploadPercentage",t.percent+" %"),2===t.status?o.set("uploadStatus","UPLOADING"):4===t.status?(o.set("uploadStatus","FAILED"),o.set("uploadPercentage","0 %")):5===t.status&&(o.set("uploadStatus","DONE"),o.set("documentUrl",a),o.set("isDocumentTypeDisable",!0),o.set("isAlready",!0)))})}}),Komodo.Application.UpdateFinancialTransactionStatusController=Komodo.UI.Controller.extend({transactionDetails:[],transactionStatus:void 0,localeBase:"locale.managePayments:aprvFinTrans.",start:function(){var e=this;this.approveFinancialTransaction.set("country",e.getCountry()),this.approveFinancialTransaction.set("featureToggle",!0),this.retrieveFinancialAccountsByCustomerNumber(this.journalDetailsModel.get("customerNumber"),this.journalDetailsModel.get("accountNumber")),this.getUploadedDocuments(),this.getRejectionReasonsfromCDM(),this.registerValidation(),this._super()},registerValidation:function(){this.registerValidator(this.get("approveFinancialTransaction"),"reasonForRejection",{isRequired:!0})},validateComment:function(){""==this.approveFinancialTransaction.get("statusChangeComment")||void 0==this.approveFinancialTransaction.get("statusChangeComment")?this.registerValidator(this.get("approveFinancialTransaction"),"statusChangeComment",{isRequired:!0,displayName:kl.value(this.localeBase+"comment")}):this.registerValidator(this.get("approveFinancialTransaction"),"statusChangeComment",{isRequired:!1,displayName:kl.value(this.localeBase+"comment"),maxLength:420})}.observes("approveFinancialTransaction.statusChangeComment"),publishUpdateFinancialTransctionStatus:function(){var e=this,t=Komodo.Models.UpdateFinancialTransctionStatus.create(),a=Komodo.Services.PublishRetrieveFinancialTransactions,o=Komodo.canonicalFacadeFactory(t,["Country","FinancialTransactionApprovalRequestUID","FinancialTransactionUID","TransactionStatus","StatusChangeComment","RequestedBy"]);o.set("Country",e.approveFinancialTransaction.get("country")),o.set("FinancialTransactionApprovalRequestUID",e.approveFinancialTransaction.get("refundID")),o.set("FinancialTransactionUID",e.approveFinancialTransaction.get("financialTransactionUID")),o.set("TransactionStatus",e.approveFinancialTransaction.get("transactionStatus")),o.set("StatusChangeComment",e.approveFinancialTransaction.get("statusChangeComment")),o.set("RequestedBy",e.userName()),e.startNewProcess(),a.publishRetrieveFinancialTransactionsEvent(e,t,"UpdateFinancialTransctionStatus","v1"),e.showBusyIndicator()},messageUpdateFinancialTransctionStatusReceived:function(e){Komodo.log(e)},messageUpdateFinancialTransctionStatusDeliveryFailure:function(e){Komodo.log(e)},messageUpdateFinancialTransctionStatusFault:function(e){Komodo.log(e)},messageFinancialTransactionsStatusesUpdatedReceived:function(e){var t=this;t.hideBusyIndicator();var a;"Approved"===e.ResponseMessage.Payload.ListOfFinancialTransactions.FinancialTransactions.TransactionStatus?(a=Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"transactionStatus",{transactionStatus:e.ResponseMessage.Payload.ListOfFinancialTransactions.FinancialTransactions.TransactionStatus}),kl.value(this.localeBase+"approved",{journalID:t.journalDetailsModel.get("journalID")}),Komodo.Controls.MessageBoxOkButtons,this,"id123456","success"),a.response=function(){Komodo.Services.uiService.transitionTo("pendingJournals")}):(a=Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"transactionStatus",{transactionStatus:e.ResponseMessage.Payload.ListOfFinancialTransactions.FinancialTransactions.TransactionStatus}),kl.value(this.localeBase+"rejected",{journalID:t.journalDetailsModel.get("journalID")}),Komodo.Controls.MessageBoxOkButtons,this,"id123456","success"),a.response=function(){Komodo.Services.uiService.transitionTo("pendingJournals")})},messageFinancialTransactionsStatusesUpdatedDeliveryFailure:function(e){Komodo.log(e)},messageFinancialTransactionsStatusesUpdatedFault:function(e){Komodo.log(e)},messageReceived:function(e){Komodo.log(e)},messageDeliveryFailure:function(e){Komodo.log(e)},messageFault:function(e){Komodo.log(e)},messageFailureMessageEventReceived:function(e){this.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"transactionStatusError"),e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButtons,this,"id123456","danger").response=function(){Komodo.Services.uiService.transitionTo("pendingJournals")}},userName:function(){return Komodo.Services.securityService.get("domainUserName").substring(3)},getCountry:function(){return Komodo.Services.uiService.getController("application").get("_selectedCountryId")},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,3e5,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},getUploadedDocuments:function(){var e=this,t=e.journalDetailsModel.get("customerNumber");Komodo.Services.queryService.refreshUserData(),Komodo.Services.queryService.getJSON("ConfigurationQuery?customerID="+t,{async:!1}).done(function(t){0===t.DocumentPayload.length?e.journalDetailsModel.set("documentsDisable",!1):(e.journalDetailsModel.set("documentsDisable",!0),null!=t.DocumentPayload&&t.DocumentPayload.forEach(function(t){var a="",o="",n="",s=t.DocumentURL;if(null!=t.ListOfDocumentMetaData&&t.ListOfDocumentMetaData.forEach(function(e){switch(e.DocumentMetaDataValueURI.toLowerCase()){case"documentserial":o=e.Value;break;case"documenttype":a=e.Value;break;case"documentuploaddate":n=e.Value}}),void 0!=n&&""!=n){new moment(n).format("YYYY-MM-DD")==new moment(e.journalDetailsModel.get("createDate")).format("YYYY-MM-DD")&&void 0!=a&&""!=a&&(a!=GetCustomerTypesConstants("RefundDocumentType","COPY_OF_ID")&&a!=GetCustomerTypesConstants("RefundDocumentType","BANK_STATEMENT")&&a!=GetCustomerTypesConstants("RefundDocumentType","PROOF_OF_PAYMENT")&&a!=GetCustomerTypesConstants("RefundDocumentType","COPY_OF_PASSPORT")&&a!=GetCustomerTypesConstants("RefundDocumentType","THIRD_PARTY_DEDUCTION_AUTHORISATION_FORM")||e.supportDocument.get("UploadedDocumentsDataGrid").addObject(Ember.Object.create({Reference:"",ReferenceNumber:"",DocumentType:a,DocumentNumber:o,Actions:s})))}}))}).error(function(e){var t=JSON.stringify(e);Komodo.UI.error("retrieveUploadedDocuments ajax call failed. Error: "+t)})},retrieveFinancialAccountsByCustomerNumber:function(e,t){var a=this;Komodo.Services.queryService.refreshUserData(),Komodo.Services.queryService.getJSON("/AccountProfile/Get?smartcardNumber=&customerUID="+e,{async:!1}).done(function(e){var o=$.makeArray(e.FinancialAccounts);$.each(o,function(e,o){t==o.Number&&(a.journalDetailsModel.set("BankAccountNumber",o.PaymentDetails.BankAccountNumber),a.journalDetailsModel.set("BankAccountTypeDescription",o.PaymentDetails.BankAccountTypeDescription),a.journalDetailsModel.set("BankBranchId",o.PaymentDetails.BankBranchId),a.journalDetailsModel.set("BankCodeId",o.PaymentDetails.BankCodeId),a.journalDetailsModel.set("BankName",o.PaymentDetails.BankName),a.journalDetailsModel.set("MethodOfPaymentDescription",o.PaymentDetails.MethodOfPaymentDescription),a.journalDetailsModel.set("MethodOfPaymentId",o.PaymentDetails.MethodOfPaymentId),a.journalDetailsModel.set("PayerIdNumber",o.PaymentDetails.PayerIdNumber),a.journalDetailsModel.set("PayerName",o.PaymentDetails.PayerName),a.journalDetailsModel.set("AHVStatus",o.AHVStatus),a.setBankDetails(a.journalDetailsModel.get("BankBranchId")))})}).error(function(e){var t;t=void 0!=e.responseJSON.Message?e.responseJSON.Message:e.responseJSON,Komodo.Controls.MessageBoxController.show(kl.value(a.localeBase+"ajaxFinancialAccountsError"),t,Komodo.Controls.MessageBoxOkButtons,a,"message","warning")})},setBankDetails:function(e){var t=this;Komodo.Services.cachedDataService.fetch("BankDetail").done(function(a){var o=JSON.parse(a);$.each(o.Banks.Bank,function(a,o){o.Branches.Branch.length>1?$.each(o.Branches.Branch,function(a,o){o.BranchCode==e&&t.journalDetailsModel.set("BankBranchName",o.CanonicalValue)}):o.Branches.Branch.BranchCode==e&&t.journalDetailsModel.set("BankBranchName",o.Branches.Branch.CanonicalValue)})}).fail(function(){Komodo.UI.error("[ERROR] : could not retrieve Bank branch name from CDM")})},setResponseMessage:function(e){this.journalDetails=e,this.set("journalDetailsModel",Komodo.Models.UpdateFinancialTransactionStatusModel.create()),this.set("approveFinancialTransaction",Komodo.Models.UpdateFinancialTransactionStatusModel.create()),this.set("supportDocument",Komodo.Models.SupportDocumentsModel.create()),void 0!=this.journalDetails&&this.set("journalDetailsModel",this.journalDetails.journalDetailsModel)},getRejectionReasonsfromCDM:function(){var e=this;Komodo.Services.cachedDataService.fetch("LedgerAccountRejectionReason").done(function(t){t&&t[0]&&(e.approveFinancialTransaction.set("listOfRejectionReason",[]),$.each(t,function(t,a){var o={Key:a.key,Value:a.value};e.approveFinancialTransaction.listOfRejectionReason.push(o)}))}).fail(function(){Komodo.UI.error("[ERROR] : could not retrieve Manual Ledger Accounts from CDM")})},actions:{approve:function(){this.approveFinancialTransaction.set("statusChangeComment",this.journalDetailsModel.get("requestComment")),this.approveFinancialTransaction.set("transactionStatus","Approved"),this.approveFinancialTransaction.set("financialTransactionUID",this.journalDetailsModel.get("accountNumber")),this.approveFinancialTransaction.set("refundID","-1"),this.publishUpdateFinancialTransctionStatus()},reject:function(){var e=this;e.approveFinancialTransaction.set("reasonForRejection",void 0),e.approveFinancialTransaction.set("statusChangeComment",void 0),e.approveFinancialTransaction.set("toggle",!0),e.approveFinancialTransaction.set("rejectForJournalsFromViewFTSelected",!1);var t=Komodo.Services.uiService.showModalPopup("Reject",null,{view:Komodo.Application.RejectFinancialTransactionsView,context:{approveFinancialTransaction:e.journalDetails.journalDetailsModel,rejectFinancialTransactionModel:e.approveFinancialTransaction,validators:e.validators,rejectTransaction:function(){e.set("validatingRejectionInput",[]),void 0==e.approveFinancialTransaction.get("reasonForRejection")&&e.get("validatingRejectionInput").push("\n"+kl.value(e.localeBase+"rejectReasonError")),void 0!=e.approveFinancialTransaction.get("statusChangeComment")&&""!=e.approveFinancialTransaction.get("statusChangeComment")||e.get("validatingRejectionInput").push("\n"+kl.value(e.localeBase+"commentRequired")),void 0!=e.approveFinancialTransaction.get("statusChangeComment")&&e.approveFinancialTransaction.get("statusChangeComment").length>=420&&e.get("validatingRejectionInput").push("\n"+kl.value(e.localeBase+"commentExceed420")),e.get("validatingRejectionInput").length>0?alert(e.get("validatingRejectionInput").join(" ")):(e.approveFinancialTransaction.set("transactionStatus","Rejected"),e.approveFinancialTransaction.set("financialTransactionUID",e.journalDetailsModel.get("accountNumber")),e.approveFinancialTransaction.set("refundID","-1"),e.approveFinancialTransaction.set("statusChangeComment",e.approveFinancialTransaction.get("reasonForRejection")+" - "+e.approveFinancialTransaction.get("statusChangeComment")),e.publishUpdateFinancialTransctionStatus())},close:function(){t.close()}},canUserClose:!0})},viewDocs:function(e){var t=e.content,a=t.Actions,o=this.supportDocument.get("UploadedDocumentsDataGrid");$(o).each(function(e,t){t.Actions===a&&window.open(t.Actions,"","_blank")})},transitionBack:function(){}}}),Komodo.Application.PaymentPlanController=Komodo.UI.Controller.extend({_currentCustomerNumber:void 0,_currencyType:"",_canCreateInstalment:!1,_hasFinancialAccount:!1,init:function(){this._super(),this.requiresDependency("_uiService",{singleton:Komodo.Services.uiService}),this.requiresDependency("_komodoConfiguration",{singleton:KomodoConfiguration}),this.requiresDependency("_localizationService",{singleton:Komodo.Services.localizationService}),this.requiresDependency("_customerProfileService",{singleton:Komodo.Services.customerProfileService}),this.requiresDependency("_busyService",{singleton:Komodo.Services.busyService}),this.requiresDependency("_queryService",{singleton:Komodo.Services.queryService}),this.requiresDependency("_paymentPlanService",{singleton:Komodo.Services.paymentPlanService}),this.requiresDependency("_dateTimeFormatterService",{singleton:Komodo.Services.dateTimeFormatterService}),this.requiresDependency("_currencyFormatterService",{singleton:Komodo.Services.currencyFormatterService}),this.requiresDependency("_securityService",{singleton:Komodo.Services.securityService})},start:function(){var e=this;this.registerModel("paymentPlanModel",Komodo.Models.PaymentPlanModel),this.set("currencyMnemonics",void 0),this._super(),this.registerModel("data",Komodo.Models.PaymentPlanModel),this.set("_currentCustomerNumber",this.getCustomerProfileService().get("personalDetails.customerNo"));var t,a=this.getCustomerProfileService().get("personalDetails.type")
;"VIP"!=a&&"External Demo"!=a&&"Internal Demo"!=a&&"Sales Promoters"!=a&&"Panelist"!==a&&"Field Trials"!==a||(t=Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:paymentPlans.paymentPlanHeading"),kl.value("locale.manageAccount.paymentPlan:messages.notValidCustomerForPlan")+"'"+a+"' customer",Komodo.Controls.MessageBoxOkButtons,this,"loadDataError","default"),t.response=function(t){"ok"==t&&e.transitionToRoute("/specialistCustomerProfile")});var o=this.getCustomerProfileService().get("personalDetails.customerClassText");"Commercial"!=o&&"National Deal"!=o||(t=Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:paymentPlans.paymentPlanHeading"),kl.value("locale.manageAccount.paymentPlan:messages.notValidCustomerClass")+"'"+o+"' customer",Komodo.Controls.MessageBoxOkButtons,this,"loadDataError","default"),t.response=function(t){"ok"==t&&e.transitionToRoute("/commercialCustomer")});var n=this.getCustomerProfileService().get("currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account");null==n||"undefined"==n?this.set("_hasFinancialAccount",!1):(this.set("_hasFinancialAccount",!0),this.set("_currencyType",this.getCurrencyFormatterService().getCurrencyForCustomer(n[0].Balance.CurrencyCode)),this.get("data.invoiceInstalmentPlan").clear(),this.showBusyIndicator(),this.getPaymentPlanService().fetchPaymentPlan(this.get("_currentCustomerNumber")).done(function(t){0===t.length?e.set("_canCreateInstalment",!0):(e.get("data.invoiceInstalmentPlan").clear(),t.some(function(e){return!0===e.IsActivePlan})?e.set("_canCreateInstalment",!1):e.set("_canCreateInstalment",!0),t.forEach(function(t){e.get("data.invoiceInstalmentPlan").pushObject({ARDocSubTypeId:t.ARDocSubTypeId,CommercialProductId:t.CommercialProductId,Description:t.Description,Extended:t.Extended,FinancialAccountId:t.FinancialAccountId,Id:t.Id,InstallmentDetails:t.InstallmentDetails,InvoiceId:t.InvoiceId,IsInstallmentCreationAlignedWithInvoiceProfile:t.IsInstallmentCreationAlignedWithInvoiceProfile,LoanLedgerAccountId:t.LoanLedgerAccountId,Name:t.Name,NumberOfInstallments:t.NumberOfInstallments,PeriodBetweenInstallments:t.PeriodBetweenInstallments,RemainingAmountDue:e.getCurrencyFormatterService().convertAmountToSystemCurrency(e.get("_currencyType"),t.RemainingAmountDue),StartDate:e.getDateTimeFormatterService().convertDateFromXsdToSystemDate(t.StartDate),TermLedgerAccountId:t.TermLedgerAccountId,TotalAmountDue:e.getCurrencyFormatterService().convertAmountToSystemCurrency(e.get("_currencyType"),t.TotalAmountDue),UnallocatedAmount:e.getCurrencyFormatterService().convertAmountToSystemCurrency(e.get("_currencyType"),t.UnallocatedAmount),CanEditPlan:t.IsActivePlan&&e.getSecurityService().hasPermission("clarity://payment-plan/edit/view"),CanViewPlan:e.getSecurityService().hasPermission("clarity://payment-plan/view"),CanCancelPlan:t.IsActivePlan})}),e.getPaymentPlanService().set("_invoiceInstalmentPlan",e.get("data.invoiceInstalmentPlan"))),e.hideBusyIndicator()}).fail(function(t){e.hideBusyIndicator(),"Not Found"===t?e.set("_canCreateInstalment",!0):Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:paymentPlans.paymentPlanHeading"),kl.value("locale.manageAccount.paymentPlan:messages.cannotLoadData"),Komodo.Controls.MessageBoxOkButtons,this,"loadDataError","warning")}))},getNewProcessID:function(){this.startNewProcess()},getFormattedDate:function(e){var t="";if("0001-01-01T00:00:00"===e)return"";if(e){var a=e.split("T"),o=new Date(a[0]),n=o.getDate();n=n<10?"0"+n.toString():n.toString();var s=o.getMonth()+1;s=s<10?"0"+s.toString():s.toString();t=n+"-"+s+"-"+o.getFullYear()}return t},subscribeCreditApplicationRetrievedReceived:function(){var e=this;Komodo.Services.eventAggregator.subscribe("FinancialAccountsRetrievedReceived",function(){var t=e.getCustomerProfileController();t&&t.bindFinancialAccountsResponseToModel()})},stop:function(){this._super()},getUIService:function(){return this.get("_uiService")},getKomodoConfiguration:function(){return this.get("_komodoConfiguration")},getLocalizationService:function(){return this.get("_localizationService")},getCustomerProfileService:function(){return this.get("_customerProfileService")},getCustomerNumber:function(){return this.get("_currentCustomerNumber")},getBusyService:function(){return this.get("_busyService")},getQueryService:function(){return this.get("_queryService")},getPaymentPlanService:function(){return this.get("_paymentPlanService")},getDateTimeFormatterService:function(){return this.get("_dateTimeFormatterService")},getCurrencyFormatterService:function(){return this.get("_currencyFormatterService")},getSecurityService:function(){return this.get("_securityService")},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,3e4,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},link:function(){return[]}.property(),newPaymentArrangementLink:function(){this.getSecurityService().hasPermission("clarity://payment-plan/create/view")&&this.get("_canCreateInstalment")?this.get("link").pushObject({href:"#/createPaymentPlan",title:kl.value("locale.manageAccount.paymentPlan:createPaymentPlan.newPaymentPlan")}):this.get("link").clear()}.observes("_canCreateInstalment"),getDevicePlanDetails:function(e){var t=this,a=Komodo.Services.uiService.getController("devicePlanDetail");a.set("productId",e.productId),a.set("product",e.productName),a.set("paymentPlanTotal",e.paymentPlanTotal),a.set("amountPerInstalment",e.instalmentAmount),a.set("detail",e.detail),a.set("currencyMnemonics",t.get("currencyMnemonics"));for(var o=0,n=0;n<e.detail.length;n++)"Pending"===e.detail[n].Status&&o++;a.set("numberOfRemainingInstalment",o),t.transitionToRoute("/devicePlanDetail")},actions:{viewPlan:function(e){this.getPaymentPlanService().set("_selectedPaymentPlanId",e.content.Id),this.getUIService().transitionTo("paymentPlanDetails")},editPlan:function(){this.getUIService().transitionTo("editPaymentPlan")},createPaymentPlan:function(){this.getUIService().transitionTo("createPaymentPlan")},redirect:function(e){this.getDevicePlanDetails(e.content)}}}),Komodo.Application.PendingJournalsController=Komodo.UI.Controller.extend({localePendingFT:"locale.managePayments:awaitingApvl.",localeBase:"locale.managePayments:aprvFinTrans.",journalsRecords:0,init:function(){this._super(),Komodo.log("Constructing Pending FTS controller"),this.set("processVersion","v1.1"),this.set("processName","Pending FTS")},start:function(){this.set("pendingFTSModel",Komodo.Models.PendingJournalsModel.create()),this.pendingFTSModel.set("country",this.getCountry()),this.pendingFTSModel.set("language",this.getCurrentLanguage());var e=this.get("model").queryParams;this.pendingFTSModel.set("customerNumber",e.customerNumber),this.queryJournals(this.pendingFTSModel.get("customerNumber"),0,15,1,0,0,""),this.queryRefunds(this.pendingFTSModel.get("customerNumber")),this.gridDataForView(0,14),this.getRejectionReasons(),this.registerValidation(),this._super()},registerValidation:function(){this.registerValidator(this.get("pendingFTSModel"),"reasonForRejection",{isRequired:!0}),this.registerValidator(this.get("pendingFTSModel"),"statusChangeComment",{isRequired:!0})},getCountry:function(){return Komodo.Services.uiService.getController("application").get("_selectedCountryId")},getCurrentLanguage:function(){return Komodo.Services.localizationService.getCurrentLanguage()},titleCaseForJournalRequestedBy:function(e){var t,a="",o="",n=e.toLowerCase(),s=n.split(".");if(s.length>1)for(var r=0;r<=s.length;r++)void 0!=s[r]&&(0==r&&(a=s[r].charAt(0).toUpperCase()+s[r].substring(1)),s.length>0&&1==r&&(o=s[r].charAt(0).toUpperCase()+s[r].substring(1),t=a+"."+o));else t=n.charAt(0).toUpperCase()+n.substring(1);return t},sortDataInDescendingOrder:function(){var e,t=this;void 0!=t.pendingFTSModel.get("pendingTransactions")&&(t.pendingFTSModel.get("pendingTransactions").length>0?(t.set("isJournals",!0),e=t.pendingFTSModel.get("pendingTransactions").sort(function(e,t){return new Date(t.requestDate)-new Date(e.requestDate)}),t.pendingFTSModel.set("descendingJournalsByDate",e)):(t.set("gridData",[]),t.pendingFTSModel.set("descendingJournalsByDate",[])))},gridDataForView:function(e,t){var a=this;a.set("gridData",[]);var o=a.pendingFTSModel.get("descendingJournalsByDate");if(void 0!=o&&o.length>0)for(var n=e;n<=t&&o.length!=n;n++)a.get("gridData").addObject(Ember.Object.create({approvalRequestID:o[n].approvalRequestID,requestDate:o[n].requestDate,requestedBy:o[n].requestedBy,requestStatus:o[n].requestStatus,requestComment:o[n].requestComment,customerNumber:o[n].customerNumber,transactionType:o[n].transactionType,baseAmount:o[n].baseAmount,ledgerAccount:o[n].ledgerAccount,accountNumber:o[n].accountNumber,reversedTransaction:o[n].reversedTransaction,notRefunds:o[n].notRefunds}))},queryJournals:function(e,t,a,o,n,s,r){var i,l,c=this;Komodo.Services.queryService.refreshUserData(),Komodo.Services.queryService.getJSON("Journal/GetJournals?customerNumber="+e+"&accountNumber=0&pageSize="+a+"&pageNumber="+o+"&status=Pending&fromDate="+n+"&transactionType="+s+"&requestedBy="+r+"&sortDirection=Ascending",{async:!1}).done(function(e){i=e.Journals,c.set("journalsRecords",e.PagingDetails.TotalRecordCount),$.each(i,function(e,t){l=c.titleCaseForJournalRequestedBy(t.RequestBy),c.pendingFTSModel.get("pendingTransactions").addObject(Ember.Object.create({approvalRequestID:t.JournalId,requestDate:t.RequestDate,requestedBy:l,requestStatus:t.RequestStatus,requestComment:t.RequestComment,customerNumber:t.CustomerNumber,transactionType:t.TransactionType,baseAmount:t.BaseAmount.Value,ledgerAccount:t.LedgerAccount,accountNumber:t.FinancialAccountId,reversedTransaction:t.ReversedTransactionId,notRefunds:!0}))}),c.sortDataInDescendingOrder()}).error(function(e){var t;void 0!=e.responseJSON?void 0!=e.responseJSON.Message?t=e.responseJSON.Message:e.responseJSON&&(t=e.responseJSON):t=e.statusText,Komodo.Controls.MessageBoxController.show(kl.value(c.localeBase+"error"),t,Komodo.Controls.MessageBoxOkButtons,c,"message","warning")})},queryRefunds:function(e){var t,a=this;Komodo.Services.queryService.refreshUserData(),Komodo.Services.queryService.getJSON("/Journal/GetPendingRefundRequestsForFirstApproval?token=token&customerNumber="+e+"&requestedBy=&date=&transactionType=",{async:!1}).done(function(e){var o=e.RefundApprovalRequests;o.length>0&&null!=o[0]&&($.each(o,function(e,o){var n=new moment(o.DATEREGUESTED).format("YYYY-MM-DDTHH:mm:ss");t=a.titleCaseForJournalRequestedBy(o.ORIGINALREQUESTER),a.pendingFTSModel.get("pendingTransactions").addObject(Ember.Object.create({approvalRequestID:o.REQUESTID,requestDate:n,requestedBy:t,requestStatus:GetCustomerTypesConstants("RefundConfig","REQUEST_STATUS"),requestComment:o.COMMENTS,customerNumber:o.CUSTOMER_ID,transactionType:GetCustomerTypesConstants("RefundConfig","TRANSACTION_TYPE"),baseAmount:o.AMOUNTREQUESTED,ledgerAccount:GetCustomerTypesConstants("RefundConfig","LEDGER_ACCOUNT"),accountNumber:o.FINANCIALACCOUNTID,journalID:o.REQUESTID,notRefunds:!1}))}),a.set("journalsRecords",a.get("journalsRecords")+a.pendingFTSModel.get("pendingTransactions").length),a.sortDataInDescendingOrder())}).error(function(e){var t;404==e.status?(void 0!=e.responseJSON&&(void 0!=e.responseJSON.Message?t=e.responseJSON.Message:e.responseJSON&&(t=e.responseJSON)),Komodo.log(t)):void 0!=e.responseJSON?void 0!=e.responseJSON.Message?t=e.responseJSON.Message:e.responseJSON&&(t=e.responseJSON):t=e.statusText,a.set("RefundsError",t)})},publishUpdateFinancialTransctionStatus:function(){var e=this,t=Komodo.Models.UpdateFinancialTransctionStatus.create(),a=Komodo.Services.PublishRetrieveFinancialTransactions,o=Komodo.Services.securityService.get("domainUserName").substring(3),n=e.pendingFTSModel.get("country"),s=Komodo.canonicalFacadeFactory(t,["Country","FinancialTransactionApprovalRequestUID","FinancialTransactionUID","TransactionStatus","StatusChangeComment","RequestedBy","Language"]);s.set("Country",n),s.set("TransactionStatus",e.pendingFTSModel.get("journalTransactionStatus")),s.set("StatusChangeComment",e.pendingFTSModel.get("statusChangeComment")),e.pendingFTSModel.get("journalTransactionType")!==GetCustomerTypesConstants("RefundConfig","TRANSACTION_TYPE")?(s.set("FinancialTransactionApprovalRequestUID",e.pendingFTSModel.get("financialTransactionApprovalRequestUID")),s.set("FinancialTransactionUID",e.pendingFTSModel.get("financialTransactionUID")),s.set("RequestedBy",e.pendingFTSModel.get("requestedBy"))):(s.set("FinancialTransactionApprovalRequestUID",e.pendingFTSModel.get("refundID")),s.set("FinancialTransactionUID",e.pendingFTSModel.get("financialTransactionUID")),s.set("RequestedBy",o)),s.set("Language",e.pendingFTSModel.get("language")),e.startNewProcess(),a.publishRetrieveFinancialTransactionsEvent(e,t,"UpdateFinancialTransctionStatus","v1"),e.showBusyIndicator()},messageUpdateFinancialTransctionStatusReceived:function(e){Komodo.log(e)},messageUpdateFinancialTransctionStatusDeliveryFailure:function(e){Komodo.log(e)},messageUpdateFinancialTransctionStatusFault:function(e){Komodo.log(e)},messageFinancialTransactionStatusUpdatedReceived:function(e){var t=this;t.hideBusyIndicator(),t.pendingFTSModel.set("pendingTransactions",[]);var a;e.ResponseMessage.Payload.TransactionStatus===GetCustomerTypesConstants("TransactionStatus","APPROVED")?(a=Komodo.Controls.MessageBoxController.show(kl.value(t.localeBase+"transactionStatus",{transactionStatus:e.ResponseMessage.Payload.TransactionStatus}),kl.value(t.localeBase+"approved",{journalID:t.pendingFTSModel.get("financialTransactionApprovalRequestUID")}),Komodo.Controls.MessageBoxOkButtons,t,"id123456","success"),a.response=function(){t.queryJournals(t.pendingFTSModel.get("customerNumber"),0,15,1,0,0,""),t.gridDataForView(0,14)}):(a=Komodo.Controls.MessageBoxController.show(kl.value(t.localeBase+"transactionStatus",{transactionStatus:e.ResponseMessage.Payload.TransactionStatus}),kl.value(this.localeBase+"rejected",{journalID:t.pendingFTSModel.get("financialTransactionApprovalRequestUID")}),Komodo.Controls.MessageBoxOkButtons,t,"id123456","success"),a.response=function(){t.queryJournals(t.pendingFTSModel.get("customerNumber"),0,15,1,0,0,""),t.gridDataForView(0,14)})},messageFinancialTransactionStatusUpdatedDeliveryFailure:function(e){Komodo.log(e)},messageFinancialTransactionStatusUpdatedFault:function(e){Komodo.log(e)},messageFinancialTransactionsStatusesUpdatedReceived:function(e){var t=this;t.hideBusyIndicator(),e.ResponseMessage.Payload.ListOfFinancialTransactions.FinancialTransactions.TransactionStatus===GetCustomerTypesConstants("TransactionStatus","APPROVED")?Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"transactionStatus",{transactionStatus:e.ResponseMessage.Payload.ListOfFinancialTransactions.FinancialTransactions.TransactionStatus}),kl.value(this.get("approveMessage"),{journalID:t.pendingFTSModel.get("financialTransactionApprovalRequestUID")}),Komodo.Controls.MessageBoxOkButtons,this,"id123456","success"):Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"transactionStatus",{transactionStatus:e.ResponseMessage.Payload.ListOfFinancialTransactions.FinancialTransactions.TransactionStatus}),kl.value(this.get("rejectMessage"),{journalID:t.pendingFTSModel.get("financialTransactionApprovalRequestUID")}),Komodo.Controls.MessageBoxOkButtons,this,"id123456","success")},messageFinancialTransactionsStatusesUpdatedDeliveryFailure:function(e){Komodo.log(e)},messageFinancialTransactionsStatusesUpdatedFault:function(e){Komodo.log(e)},messageFailureMessageEventReceived:function(e){this.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(this.localeFTGenText+"technicalError"),e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,null,null,"id123456","danger")},messageReceived:function(e){Komodo.log(e)},messageDeliveryFailure:function(e){Komodo.log(e)},messageFault:function(e){Komodo.log(e)},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,3e5,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},getRejectionReasons:function(){var e=this;Komodo.Services.cachedDataService.fetch("LedgerAccountRejectionReason").done(function(t){t&&t[0]&&(e.pendingFTSModel.set("listOfRejectionReason",[]),$.each(t,function(t,a){var o={Key:a.key,Value:a.value};e.pendingFTSModel.listOfRejectionReason.push(o)}))}).fail(function(){Komodo.UI.error("[ERROR] : could not retrieve Manual Ledger Accounts from CDM")})},collapseLinks:function(){return[{href:"#/financialTransactions",title:"View Financial Transactions"}]}.property(),actions:{approvePendingJournal:function(e){var t=this;t.pendingFTSModel.set("statusChangeCommentsForJournals",e.content.requestStatus),e.content.transactionType!==GetCustomerTypesConstants("RefundConfig","TRANSACTION_TYPE")?(t.pendingFTSModel.set("journalTransactionStatus",GetCustomerTypesConstants("TransactionStatus","APPROVED")),t.pendingFTSModel.set("financialTransactionApprovalRequestUID",e.content.approvalRequestID),t.pendingFTSModel.set("requestedBy",e.content.requestedBy),t.pendingFTSModel.set("statusChangeComment",e.content.requestComment),t.pendingFTSModel.set("financialTransactionUID",e.content.accountNumber),t.publishUpdateFinancialTransctionStatus()):(t.pendingFTSModel.set("journalTransactionStatus",GetCustomerTypesConstants("TransactionStatus","APPROVED")),t.pendingFTSModel.set("financialTransactionUID",e.content.accountNumber),t.pendingFTSModel.set("refundID","-1"),t.pendingFTSModel.set("statusChangeComment",e.content.requestComment),t.pendingFTSModel.set("financialTransactionUID",e.content.accountNumber),t.publishUpdateFinancialTransctionStatus())},rejectPendingJournal:function(e){var t=this;t.set("pendingFTSModel.reasonForRejection",void 0),t.set("pendingFTSModel.statusChangeComment",void 0),t.set("pendingFTSModel.statusReasonSelected",void 0),t.set("pendingFTSModel.financialTransactionApprovalRequestUID",e.content.approvalRequestID),t.set("pendingFTSModel.requestDate",e.content.requestDate),t.set("pendingFTSModel.requestedBy",e.content.requestedBy),t.set("pendingFTSModel.journalTransactionType",e.content.transactionType),t.set("pendingFTSModel.financialTransactionUID",e.content.accountNumber),t.set("pendingFTSModel.journalTransactionStatus",GetCustomerTypesConstants("TransactionStatus","REJECTED")),t.set("pendingFTSModel.toggle",!1),t.set("pendingFTSModel.rejectForJournalsFromViewFTSelected",!0);var a=Komodo.Services.uiService.showModalPopup("Reject",null,{view:Komodo.Application.RejectFinancialTransactionsView,context:{rejectFinancialTransactionModel:t.get("pendingFTSModel"),validators:t.validators,rejectTransaction:function(){t.set("validatingRejectionInput",[]),void 0==t.pendingFTSModel.get("reasonForRejection")&&t.get("validatingRejectionInput").push("\n"+kl.value(t.localeBase+"rejectReasonError")),void 0!=t.pendingFTSModel.get("statusChangeComment")&&""!=t.pendingFTSModel.get("statusChangeComment")||t.get("validatingRejectionInput").push("\n"+kl.value(t.localeBase+"commentRequired")),void 0!=t.pendingFTSModel.get("statusChangeComment")&&t.pendingFTSModel.get("statusChangeComment").length>=420&&t.get("validatingRejectionInput").push("\n"+kl.value(t.localeBase+"commentExceed420")),t.get("validatingRejectionInput").length>0?alert(t.get("validatingRejectionInput").join(" ")):(t.pendingFTSModel.set("journalTransactionStatus","Rejected"),t.pendingFTSModel.set("statusChangeComment",t.pendingFTSModel.get("reasonForRejection")+" - "+t.pendingFTSModel.get("statusChangeComment")),t.publishUpdateFinancialTransctionStatus())},close:function(){a.close(),t.set("popup.context.rejectForJournalsFromViewFTSelected",!1)}},canUserClose:!0})},pageSelected:function(){},review:function(e){var t=e.get("content"),a=[],o=Komodo.Models.UpdateFinancialTransactionStatusModel.create();o.createDate=t.requestDate,o.amountPaid=t.baseAmount,o.ledgerAccount=t.ledgerAccount,o.requestComment=t.requestComment,o.accountNumber=t.accountNumber,o.reversedTransaction=t.reversedTransaction,o.transactionStatus=t.requestStatus,o.requestedBy=t.requestedBy,o.journalID=t.approvalRequestID,o.customerNumber=t.customerNumber,o.transactionType=t.transactionType,o.featureToggle=!0,a.set("journalDetailsModel",o),Komodo.Services.eventAggregator.publish("updateFinancialTransactionStatusRedirect",a),Komodo.Services.uiService.transitionTo("updateFinancialTransactionStatus")}}}),Komodo.Application.PaymentPlanApplicationDetailsController=Komodo.UI.Controller.extend({applicationId:void 0,radioButtonOptions:[],disableSaveButton:!1,documentsAvail:!1,loggedInCountry:void 0,processCoRelationId:void 0,_productName:[],_addOnName:[],_lineInstruction:[],applicationActivities:[],isCustomerCreated:!0,bankAccountTypeValue:void 0,methodOfPaymentId:void 0,canOverride:!0,defaultAHVDocumentType:void 0,documentSerialNumbers:[],alreadyOverrideApplication:!1,alreadyOverrideApplicationRemark:!0,allCriteriaMate:!1,cntApprovalCriteria:!0,dppProducts:[],delayInAppsmartResponse:!1,displayAppsSmartMessages:!1,timer:void 0,dppProductDetails:[],overrideProduct:!1,inputDateTimeFormat:"YYYY-MM-DD 00:00:00",workingDays:[],authenticated:!1,firstAuthenticated:!0,showAuthenticated:!1,acceptDocs:!1,migratedCustomer:!1,isDeliveryAddressAvailable:!1,ahvCompliantByDpp:!1,salesOrderPresent:!1,salesDetails:[],disableActivatePlan:!1,isMWEBProduct:!1,isADSLRequired:!1,registerOnce:1,localeBase:"locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.",localAhvSupervisorApproval:"locale.manageAccount.editPaymentDetails:ahvSupervisorApproval.",supervisorClaim:["clarity://documentApproval/canApprove"],saveApplicationOrAhvOveride:void 0,clickEvent:function(){var e=Komodo.Services.uiService.getController("paymentPlanApplicationDetails");if("uploadfiles"===$(this).attr("id")&&(e.saveApplicationOrAhvOveride="uploadfiles"),$(e.data.fileUploader.files).each(function(e,t){2!==t.status&&4!==t.status||(t.status=1)}),"saveappdetails"===$(this).attr("id")){e.saveApplicationOrAhvOveride="saveappdetails";var t=0;$(e.data.fileUploader.files).each(function(e,a){5===a.status&&t++}),0!==e.data.fileUploader.files.length&&t!==e.data.fileUploader.files.length||(e.saveApplicationOrAhvOveride="",e.savedppapplication())}e.data.fileUploader.uploadCanceled=!1,e.data.fileUploader.start()},init:function(){var e=this;e.set("processVersion","v1.1"),e.set("processName","Payment Plan Application Details process"),e.registerModel("data",Komodo.Models.DPPDocumentModel),e.registerModel("ahvData",Komodo.Models.AHVDocumentModel),e.registerModel("paymentPlanDtlsModel",Komodo.Models.PaymentPlanApplicationDetailsModel),e.set("paymentPlanDtlsModel.checkOverride",!1),e._super()},start:function(){var e=this;e.requiresDependency("_securityService",{singleton:Komodo.Services.securityService}),e.set("firstAuthenticated",!1),e.set("showAuthenticated",!0),e.set("authenticated",!1),e.set("acceptDocs",!1),e.set("disableActivatePlan",!1),e.set("ahvCompliantByDpp",!1),e.set("salesDetails",[]),e.set("salesOrderPresent",!1),e.set("migratedCustomer",!1),e.set("isDeliveryAddressAvailable",!1),e.setInitialApprovalCriteria(),e.get("documentSerialNumbers").push({key:"N/A",value:"N/A"}),e.setMethodOfPayment(),e.setBankAccountTypes(),e.get("data").set("customerDocuments",[]),e.get("ahvData").set("customerDocuments",[]),e.set("paymentPlanDtlsModel.productName",""),e.set("paymentPlanDtlsModel.addOnName",""),e.set("paymentPlanDtlsModel.lineInstruction",""),e.set("paymentPlanDtlsModel.adslNumber",""),e.set("paymentPlanDtlsModel.bankDetails",void 0),e.set("paymentPlanDtlsModel.firstName",void 0),e.set("paymentPlanDtlsModel.lastName",void 0),e.set("paymentPlanDtlsModel.disableProduct",!1),e.set("paymentPlanDtlsModel.isNonComplaint",!1),e.getLoggedIncountry(),e.setCountry(),Ember.isEmpty(e.get("processCoRelationId"))||(e.set("timer",setInterval(function(){e.setTimer()},64e3)),"NA"!=e.get("paymentPlanDtlsModel.applicationStatus")&&e.set("displayAppsSmartMessages",!0),e.getNewProcessID(),e.showBusyIndicator()),e.getAllDPPProducts(),Komodo.Services.eventAggregator.subscribe("NotifyCreditRatingReceived",function(t){t.Payload.CorrelationID==e.get("processCoRelationId")&&(e.set("processCoRelationId",void 0),e.set("displayAppsSmartMessages",!0),e.getCreditDetails())}),e.set("allDocs",[]),e.set("documentsAvail",!1),e.registerValidation(),e.set("applicationActivities",[]),e.set("canOverride",!0),e.set("overrideProduct",!1),Komodo.Services.securityService.hasPermission("clarity://saveApplicationControlView/viewOnly")||e.set("disableSaveButton",!0),e.loadWorkingDays(),e._super()},loadWorkingDays:function(){var e=this;e.set("workingDays",[]),Komodo.Services.cachedDataService.fetch("BusinessWorkingDays").done(function(t){$.each(t,function(t,a){e.workingDays.addObject(a)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve EmploymentStatus from CDM")})},setTimer:function(){var e=this;e.set("processCoRelationId",void 0),Ember.isEmpty(e.get("paymentPlanDtlsModel.highestProductQualified"))||"NA"==e.get("paymentPlanDtlsModel.highestProductQualified")?e.set("delayInAppsmartResponse",!0):e.set("delayInAppsmartResponse",!1),e.get("paymentPlanDtlsModel.applicationStatus"),clearInterval(e.get("timer"))},getAllDPPProducts:function(){var e=this;Komodo.Services.queryService.getJSON("/CreditApplication/GetAllDPPProducts").done(function(t){if(null!=t){e.set("dppProducts",[]),e.set("dppProductDetails",[]),e.set("_lineInstruction",[]);for(var a=0;a<t.length;a++)if(t[a].Active){var o={key:t[a].Description,label:t[a].Description,provider:t[a].Provider,name:t[a].Name};e.dppProducts.push(o),e.dppProductDetails.push({name:t[a].Name,description:t[a].Description,addOnDetails:t[a].AddOnDetails,Active:t[a].Active,provider:t[a].Provider})}if(null!=t[0]&&null!=t[0].LineInstruction)for(var n=0;n<t[0].LineInstruction.length;n++){var s={key:t[0].LineInstruction[n],label:t[0].LineInstruction[n]};e._lineInstruction.push(s)}e.getCreditDetails()}}).error(function(e){var t=JSON.stringify(e);Komodo.log("retrievePrintDocumentInfo ajax call failed. Error: "+t)})},setInitialApprovalCriteria:function(){this.set("paymentPlanDtlsModel.idValidatedCheck",!1),this.set("paymentPlanDtlsModel.workPermit",!1),this.set("paymentPlanDtlsModel.addressValidatedCheck",!1),this.set("paymentPlanDtlsModel.creditVettingCheck",!1),this.set("paymentPlanDtlsModel.internalVettingCheck",!1),this.set("paymentPlanDtlsModel.productConfirmedCheck",!1),this.set("paymentPlanDtlsModel.highestProductValidatedCheck",!1),this.set("paymentPlanDtlsModel.ahvCompliantCheck",!1),this.set("paymentPlanDtlsModel.incomeProofValidatedCheck",!1),this.set("paymentPlanDtlsModel.workPermitCheck",!1)},getLoggedIncountry:function(){var e=this;quoteCountry=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),language=Komodo.Services.localizationService.getCurrentLanguage(),e.set("loggedInCountry",quoteCountry)},setCountry:function(){var e=this;countryId=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),language=Komodo.Services.localizationService.getCurrentLanguage(),e.set("country",Komodo.Services.uiService.getController("application").get("_selectedCountryId")),e.set("loggedInCountryId",Komodo.Services.uiService.getController("application").get("_selectedCountryId")),e.set("loggedInCountryName",Komodo.Services.uiService.getController("application").get("_selectedCountryDescription"));var t=e.get("data"),a=e.get("ahvData");t.set("documentTypes",[]),a.set("documentTypes",[]),e.getStaticCDMOtherDocsData(e.get("country"),language,"DocumentType",t.documentTypes),e.getStaticCDMAhvData(e.get("country"),language,"DocumentType",a.documentTypes)},getStaticCDMData:function(e,t,a,o){Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){switch(o.clear(),a){case"DocumentType":$.each(e,function(e,t){"None"!==t.value&&o.addObject(t)});break;default:$.each(e,function(e,t){o.addObject(t)})}}).fail(function(){Komodo.log("[ERROR] : could not retrieve static CDM data for "+a)})},getStaticCDMAhvData:function(e,t,a,o){var n=this;Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){switch(o.clear(),a){case"DocumentType":$.each(e,function(e,t){"None"===t.value||"Bank Statement"!=t.value&&"Copy of ID"!=t.value||o.addObject(t)});break;default:$.each(e,function(e,t){o.addObject(t)})}n.set("defaultAHVDocumentType","Bank Statement")}).fail(function(){Komodo.log("[ERROR] : could not retrieve static CDM data for "+a)})},getStaticCDMOtherDocsData:function(e,t,a,o){Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){switch(o.clear(),a){case"DocumentType":$.each(e,function(e,t){"None"===t.value||"Proof of Address"!=t.value&&"Proof of Income"!==t.value&&"Copy of ID"!==t.value&&"Bank Statement"!==t.value&&"Third Party Deduction Authorisation Form"!==t.value&&"Signed Terms & Conditions"!==t.value&&"Work Permit"!==t.value&&"Acknowledgement of Debt Form"!==t.value||o.addObject(t)});break;default:$.each(e,function(e,t){o.addObject(t)})}}).fail(function(){Komodo.log("[ERROR] : could not retrieve static CDM data for "+a)})},getFormattedDate:function(e){var t="";if("0001-01-01T00:00:00"===e)return"";if(e){var a=e.split("T"),o=new Date(a[0]),n=o.getDate();n=n<10?"0"+n.toString():n.toString();var s=o.getMonth()+1;s=s<10?"0"+s.toString():s.toString();t=n+"/"+s+"/"+o.getFullYear()}return t},getWorkingDate:function(e){e=new Date(e);var t=e.getDate();t=t<10?"0"+t.toString():t.toString();var a=e.getMonth()+1;return a=a<10?"0"+a.toString():a.toString(),t+"/"+a+"/"+e.getFullYear()},getDateForAdhoc:function(e){var t=e.getDate();t=t<10?"0"+t.toString():t.toString();var a=e.getMonth()+1;return a=a<10?"0"+a.toString():a.toString(),e.getFullYear()+"-"+a+"-"+t},checkAhvStatus:function(e){var t=this;t.set("firstAuthenticated",!1),t.set("showAuthenticated",!0),Ember.isEmpty(e)?(t.set("paymentPlanDtlsModel.ahvStatus","Pending"),t.set("paymentPlanDtlsModel.isNonComplaint",!1)):(t.set("paymentPlanDtlsModel.ahvStatus",e),t.set("canOverride",!0),"compliant"==e.toLowerCase()?(t.get("ahvCompliantByDpp")||(t.set("paymentPlanDtlsModel.overrideAhvFlag",!0),t.set("firstAuthenticated",!1),t.set("showAuthenticated",!0),t.set("paymentPlanDtlsModel.isNonComplaint",!1)),t.set("paymentPlanDtlsModel.ahvCompliantCheck",!0),t.get("paymentPlanDtlsModel.internalVettingCheck")&&t.get("paymentPlanDtlsModel.creditVettingCheck")&&t.get("paymentPlanDtlsModel.highestProductValidatedCheck")&&t.get("paymentPlanDtlsModel.ahvCompliantCheck")&&t.get("paymentPlanDtlsModel.productConfirmedCheck")&&t.get("paymentPlanDtlsModel.idValidatedCheck")&&t.get("paymentPlanDtlsModel.addressValidatedCheck")&&t.get("paymentPlanDtlsModel.incomeProofValidatedCheck")&&(t.get("paymentPlanDtlsModel.isForeighnNational")?t.get("paymentPlanDtlsModel.workPermitCheck")?t.set("disableSaveButton",!0):t.set("disableSaveButton",!1):t.set("disableSaveButton",!0))):(t.set("paymentPlanDtlsModel.isNonComplaint",!0),t.set("firstAuthenticated",!0),t.set("showAuthenticated",!1)))},getCreditDetails:function(){var e=this;e.set("canOverride",!0),Komodo.Services.queryService.getJSON("/CreditApplication/Get?applicationId="+e.get("applicationId")+"&IdNumber=&pageNumber=0&pageSize=0").done(function(t){Ember.isEmpty(t[0].CreditDetails)&&!Ember.isEmpty(e.get("processCoRelationId"))||e.hideBusyIndicator(),e.initializeModalValues(),e.refreshUI(t)}).error(function(t){var a=JSON.stringify(t);e.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.useCaseTitle"),a,Komodo.Controls.MessageBoxOkButtons,e,"authmbx","danger")})},refreshUI:function(e){var t=this
;if(t.set("registerOnce",1),t.authenticated&&(t.set("authenticated",!1),t.set("firstAuthenticated",!1)),t.set("firstAuthenticated",!1),t.set("showAuthenticated",!0),null!=e){if(t.set("migratedCustomer",!1),t.set("isDeliveryAddressAvailable",!1),null!=e[0].BankDetail&&t.set("paymentPlanDtlsModel.bankDetails",e[0].BankDetail),null!=e[0].CreditDetails&&e[0].CreditDetails.length>0?t.dppProducts.forEach(function(a){if(e[0].CreditDetails[0].HighestProductQualified==a.name)return void t.set("paymentPlanDtlsModel.highestProductQualified",a.label)}):t.set("paymentPlanDtlsModel.highestProductQualified","NA"),null!=e[0].ApplicationDetail){if(t.set("paymentPlanDtlsModel.tempKey",e[0].CreditApplicationDetail.ProductTakenDescription),t.set("paymentPlanDtlsModel.tempKeyAddon",e[0].CreditApplicationDetail.AddOnTaken),t.set("paymentPlanDtlsModel.tempKeyLineInstruction",e[0].CreditApplicationDetail.LineInstruction),t.set("paymentPlanDtlsModel.tempKeyADSLNumber",e[0].CreditApplicationDetail.ADSLNumber),"11"==e[0].ApplicationDetail.StatusId&&t.set("disableSaveButton",!0),t.set("paymentPlanDtlsModel.applicationDate",null!=e[0].ApplicationDetail.CreatedDate?t.getFormattedDate(e[0].ApplicationDetail.CreatedDate):"NA"),t.set("paymentPlanDtlsModel.applicationStatus",null!=e[0].ApplicationDetail.StatusDescription?e[0].ApplicationDetail.StatusDescription:"NA"),t.set("paymentPlanDtlsModel.iccCustomerNumber",null!=e[0].CreditApplicationDetail.ICCCustNumber?e[0].CreditApplicationDetail.ICCCustNumber:"NA"),Ember.isEmpty(e[0].CreditApplicationDetail.ICCCustNumber)||Ember.isEmpty(e[0].CreditApplicationDetail.FinancialAccountId)||!Ember.isEmpty(e[0].CreditApplicationDetail.AHVStatus)&&"compliant"==e[0].CreditApplicationDetail.AHVStatus.toLowerCase()||t.getAllDocuments(),!Ember.isEmpty(e[0].CreditApplicationDetail.MigratedCustomer)&&e[0].CreditApplicationDetail.MigratedCustomer){t.set("migratedCustomer",!0);for(var a=0;a<e[0].AddressDetails.length;a++){e[0].AddressDetails[a].TypeKey==Komodo.CanonicalValues.AddressTypes.Delivery&&t.set("isDeliveryAddressAvailable",!0)}}t.set("paymentPlanDtlsModel.crmCustomerNumber",e[0].ApplicationDetail.CRMCentralId),t.get("isDeliveryAddressAvailable")||Ember.isEmpty(e[0].CreditApplicationDetail.ICCCustNumber)||t.checkDeliveryAddressInCrm(e[0].CreditApplicationDetail.ICCCustNumber)}var o=8;if(null!=e[0].PersonalDetail&&(t.set("paymentPlanDtlsModel.firstName",e[0].PersonalDetail.FirstName),t.set("paymentPlanDtlsModel.lastName",e[0].PersonalDetail.Surname),t.set("paymentPlanDtlsModel.idNumber",e[0].PersonalDetail.IdNumber),t.set("paymentPlanDtlsModel.IdType",e[0].PersonalDetail.IdType),"Passport Number"===e[0].PersonalDetail.IdType?(o=9,t.set("paymentPlanDtlsModel.isForeighnNational",!0)):(o=8,t.set("paymentPlanDtlsModel.isForeighnNational",!1))),null!=e[0].CreditApplicationDetail){if("Compliant"!=e[0].CreditApplicationDetail.AHVProofRefrence?this.set("ahvCompliantByDpp",!0):this.set("ahvCompliantByDpp",!1),t.set("paymentPlanDtlsModel.accountNumber",Ember.isEmpty(e[0].CreditApplicationDetail.FinancialAccountId)?"NA":e[0].CreditApplicationDetail.FinancialAccountId),t.set("paymentPlanDtlsModel.overrideFlag",e[0].CreditApplicationDetail.Overridden),e[0].CreditApplicationDetail.Overridden)t.set("alreadyOverrideApplication",!0),t.set("alreadyOverrideApplicationRemark",!0);else{Komodo.Services.securityService.hasPermission("clarity://overrideApplicationControlView/viewOnly")?(t.set("alreadyOverrideApplication",!1),t.set("alreadyOverrideApplicationRemark",!0),null!=e[0].ApprovalDetails&&"vetted"===t.get("paymentPlanDtlsModel.applicationStatus").toLowerCase()&&"yes"===e[0].ApprovalDetails.InternalVetting.toLowerCase()&&e[0].ApprovalDetails.CreditVetting&&e[0].ApprovalDetails.ProductConfirmed&&e[0].ApprovalDetails.AHVCompliant&&(t.set("alreadyOverrideApplication",!0),t.set("alreadyOverrideApplicationRemark",!0)),null==e[0].ApprovalDetails||"expired"!==t.get("paymentPlanDtlsModel.applicationStatus").toLowerCase()||"no"!==e[0].ApprovalDetails.InternalVetting.toLowerCase()||e[0].ApprovalDetails.CreditVetting||e[0].ApprovalDetails.ProductConfirmed||e[0].ApprovalDetails.AHVCompliant&&!e[0].ApprovalDetails.AHVCompliant||(t.set("alreadyOverrideApplication",!0),t.set("alreadyOverrideApplicationRemark",!0))):(t.set("alreadyOverrideApplication",!0),t.set("alreadyOverrideApplicationRemark",!0))}t.set("paymentPlanDtlsModel.overrideRemark",e[0].CreditApplicationDetail.OverriddenRemark),t.set("paymentPlanDtlsModel.ahvStatus","NA")}if(null!=e[0].CreditDetails&&(t.set("paymentPlanDtlsModel.creditVetting",null!=e[0].CreditDetails&&e[0].CreditDetails.length>0?1==e[0].CreditDetails[0].IsQualified?"Yes":"No":"NA"),null!=e[0].CreditDetails&&e[0].CreditDetails.length>0?t.set("paymentPlanDtlsModel.productKey",e[0].CreditDetails[0].HighestProductQualified):t.set("paymentPlanDtlsModel.productKey",void 0)),null!=t.get("paymentPlanDtlsModel.productKey")&&void 0!=t.get("paymentPlanDtlsModel.productKey")?t.get("alreadyOverrideApplication")?(t.set("_productName",[]),!Ember.isEmpty(e[0].CreditApplicationDetail.ProductTaken)&&e[0].CreditApplicationDetail.Overridden?t.loadProductOnOverride():t.loadProducts(t.get("paymentPlanDtlsModel.productKey"))):t.loadProducts(t.get("paymentPlanDtlsModel.productKey")):t.set("_productName",[]),!Ember.isEmpty(e[0].SalesOrderDetail)&&!Ember.isEmpty(e[0].SalesOrderDetail.SalesOrderID)&&(t.set("paymentPlanDtlsModel.salesOrderId",e[0].SalesOrderDetail.SalesOrderID),t.set("disableSaveButton",!0),t.set("salesOrderPresent",!0),t.set("salesDetails",[]),t.salesDetails.pushObject(e[0].SalesOrderDetail),!Ember.isEmpty(e[0].CreditApplicationDetail))){var n=!1,s=!1,r=!1;!Ember.isEmpty(e[0].CreditApplicationDetail.PlanActivated)&&e[0].CreditApplicationDetail.PlanActivated&&(n=!0),!Ember.isEmpty(e[0].CreditApplicationDetail.PlanCancelle)&&e[0].CreditApplicationDetail.PlanCancelled&&(s=!0),!Ember.isEmpty(e[0].CreditApplicationDetail.PlanSettled)&&e[0].CreditApplicationDetail.PlanSettled&&(r=!0),n||s||r||Ember.isEmpty(e[0].SalesOrderDetail.SmartcardNumber)||Ember.isEmpty(e[0].SalesOrderDetail.DecoderNumber)?t.set("disableActivatePlan",!0):t.set("disableActivatePlan",!1)}if(null!=e[0].ApprovalDetails){t.set("paymentPlanDtlsModel.internalCreditApproval",e[0].ApprovalDetails.InternalVetting),t.set("allCriteriaMate",!1);var i=0;t.set("cntApprovalCriteria",i),e[0].ApprovalDetails.IdValidated&&(t.set("paymentPlanDtlsModel.idValidatedCheck",!0),i++),e[0].ApprovalDetails.WorkPermit&&(t.set("paymentPlanDtlsModel.workPermitCheck",!0),i++),e[0].ApprovalDetails.AddressValidated&&(t.set("paymentPlanDtlsModel.addressValidatedCheck",!0),i++),(e[0].ApprovalDetails.CreditVetting||t.get("paymentPlanDtlsModel.overrideFlag"))&&(t.set("paymentPlanDtlsModel.creditVettingCheck",!0),i++),null!=e[0].ApprovalDetails.InternalVetting&&""!=e[0].ApprovalDetails.InternalVetting&&"Yes"==e[0].ApprovalDetails.InternalVetting&&(t.set("paymentPlanDtlsModel.internalVettingCheck",!0),i++),e[0].ApprovalDetails.ProductConfirmed&&(t.set("paymentPlanDtlsModel.productConfirmedCheck",!0),i++),e[0].ApprovalDetails.HighestProductQualified&&(t.set("paymentPlanDtlsModel.highestProductValidatedCheck",!0),i++),e[0].ApprovalDetails.AHVCompliant&&(t.set("paymentPlanDtlsModel.ahvCompliantCheck",!0),i++),e[0].ApprovalDetails.IncomeProofValidated&&(t.set("paymentPlanDtlsModel.incomeProofValidatedCheck",!0),i++),i===o&&t.set("allCriteriaMate",!0),t.set("paymentPlanDtlsModel.idValidated",(e[0].ApprovalDetails.IdValidated,e[0].ApprovalDetails.IdValidated)),Ember.isEmpty(e[0].CreditApplicationDetail.ICCCustNumber)||Ember.isEmpty(e[0].CreditApplicationDetail.FinancialAccountId)?e[0].ApprovalDetails.ProductConfirmed&&t.set("canOverride",!0):t.checkAhvStatus(e[0].CreditApplicationDetail.AHVStatus),t.set("paymentPlanDtlsModel.addressValidated",(e[0].ApprovalDetails.AddressValidated,e[0].ApprovalDetails.AddressValidated)),t.set("paymentPlanDtlsModel.incomeValidated",(e[0].ApprovalDetails.IncomeProofValidated,e[0].ApprovalDetails.IncomeProofValidated));var l=Komodo.Services.securityService.hasPermission("clarity://overrideApplicationControlView/viewOnly");t.get("paymentPlanDtlsModel.internalVettingCheck")&&t.get("paymentPlanDtlsModel.creditVettingCheck")&&t.get("paymentPlanDtlsModel.highestProductValidatedCheck")&&t.get("paymentPlanDtlsModel.ahvCompliantCheck")&&t.get("paymentPlanDtlsModel.productConfirmedCheck")&&t.get("paymentPlanDtlsModel.idValidatedCheck")&&t.get("paymentPlanDtlsModel.addressValidatedCheck")&&t.get("paymentPlanDtlsModel.incomeProofValidatedCheck")||!l?t.get("paymentPlanDtlsModel.isForeighnNational")?t.get("paymentPlanDtlsModel.workPermitCheck")?t.set("isCustomerCreated",!0):t.set("isCustomerCreated",!1):t.set("isCustomerCreated",!0):t.set("isCustomerCreated",!1),t.set("paymentPlanDtlsModel.addDocDisable",t.get("isCustomerCreated")),t.get("paymentPlanDtlsModel.ahvCompliantCheck")&&t.get("paymentPlanDtlsModel.productConfirmedCheck")&&t.get("paymentPlanDtlsModel.idValidatedCheck")&&t.get("paymentPlanDtlsModel.addressValidatedCheck")&&t.get("paymentPlanDtlsModel.incomeProofValidatedCheck")&&t.get("paymentPlanDtlsModel.addDocDisable",!0)}if(t.set("applicationActivities",[]),null!=e[0].ApplicationActivity)for(var a=0;a<e[0].ApplicationActivity.length;a++){var c=e[0].ApplicationActivity,u={activity:c[a].Action,date:c[a].ActionDate,user:c[a].Actor,remark:c[a].Remark};t.get("applicationActivities").pushObject(u)}Komodo.Services.uiService.getController("paymentPlanApplications").set("idNumber",e[0].PersonalDetail.IdNumber),void 0==t.get("processCoRelationId")&&(Ember.isEmpty(t.get("paymentPlanDtlsModel.highestProductQualified"))||"NA"==t.get("paymentPlanDtlsModel.highestProductQualified")?t.set("delayInAppsmartResponse",!0):t.set("delayInAppsmartResponse",!1)),t.get("displayAppsSmartMessages")&&(Ember.isEmpty(e[0].ApplicationActivity[0].Action)||"declined"!=e[0].ApplicationActivity[0].Action.toLowerCase()||Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.useCaseTitle"),e[0].ApplicationActivity[0].Remark,Komodo.Controls.MessageBoxOkButtons,t,"authmbx","danger"),Ember.isEmpty(e[0].ApplicationActivity[0].Action)||"qualified"!=e[0].ApplicationActivity[0].Action.toLowerCase()||Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.useCaseTitle"),e[0].ApplicationActivity[0].Remark,Komodo.Controls.MessageBoxOkButton,t,"id5446673","success")),t.set("displayAppsSmartMessages",!1)}},checkDeliveryAddressInCrm:function(e){var t=this;Komodo.Services.queryService.getJSON("/CustomerProfile?customerId="+e).done(function(e){if(e&&e.CustomerDetail){var a=e.CustomerDetail;if(null!=a){t.set("paymentPlanDtlsModel.crmCustomerNumber",a.UID);var o=a.ListOfAddress.Address,n=[],s=!1;o.forEach(function(e){var a=Ember.Object.create({residentialStatus:null,yearsAtAddress:0,streetNumber:null,streetName:null,boxSuitePrivateBag:null,isPrimary:e.IsPrimary,firstName:null,surname:null,buildingName:e.BuildingName,city:e.City,street:e.Street,suburb:e.Suburb,unitNumber:e.HouseNumber,country:e.Country,countrykey:0,province:e.Province,provincekey:null,postalCode:e.PostCode,type:e.Type,typeKey:null});n.push(a),e.Type===Komodo.CanonicalValues.AddressTypes.Delivery&&(t.set("isDeliveryAddressAvailable",!0),s=!0)}),s&&t.updateDeliveryAddress(n,a.UID)}}}).error(function(e){var t=JSON.stringify(e);Komodo.log("retrieveCustomer ajax call failed. Error: "+t)})},updateDeliveryAddress:function(e,t){var a=this,o={applicationID:a.get("applicationId"),crmcustnumber:t,addressDetails:e};Komodo.Services.queryService.postJSON("/CreditApplication/UpdateAddressDetails",{data:o}).done(function(e){a.set("isDeliveryAddressAvailable",!0)}).error(function(e){a.set("isDeliveryAddressAvailable",!1);var t=JSON.stringify(e);Komodo.log("retrieveCustomer ajax call failed. Error: "+t)})},loadProducts:function(e){var t=this;Komodo.Services.queryService.getJSON("/CreditApplication/GetQualifyingDPPProducts?productName="+e).done(function(e){if(null!=e){t.set("_productName",[]);for(var a=!1,o=0;o<t.get("dppProductDetails").length;o++)t.get("paymentPlanDtlsModel.highestProductQualified")===t.get("dppProductDetails")[o].description&&(t.get("dppProductDetails")[o].Active||(a=!0));for(var n=0;n<e.length;n++)a?t._productName.push({key:e[n].Description,label:e[n].Description,addOns:e[n].AddOnDetails,provider:e[n].Provider,name:e[n].Name}):e[n].Active&&t._productName.push({key:e[n].Description,label:e[n].Description,addOns:e[n].AddOnDetails,provider:e[n].Provider,name:e[n].Name});if(null!=e[0]&&null!=e[0].LineInstruction){t.set("_lineInstruction",[]);for(var o=0;o<e[0].LineInstruction.length;o++){var s={key:e[0].LineInstruction[o],label:e[0].LineInstruction[o]};t._lineInstruction.push(s)}}t.set("paymentPlanDtlsModel.productName",""),t.set("paymentPlanDtlsModel.addOnName",""),t.set("paymentPlanDtlsModel.lineInstruction",""),t.set("paymentPlanDtlsModel.adslNumber",""),t.set("paymentPlanDtlsModel.productName",t.get("paymentPlanDtlsModel.tempKey")),t.set("paymentPlanDtlsModel.addOnName",t.get("paymentPlanDtlsModel.tempKeyAddon")),t.set("paymentPlanDtlsModel.lineInstruction",t.get("paymentPlanDtlsModel.tempKeyLineInstruction")),t.set("paymentPlanDtlsModel.adslNumber",t.get("paymentPlanDtlsModel.tempKeyADSLNumber"))}}).error(function(e){var t=JSON.stringify(e);Komodo.log("retrievePrintDocumentInfo ajax call failed. Error: "+t)})},registerValidation:function(){var e=this;e.registerValidator(e.get("paymentPlanDtlsModel"),"productName",{type:"string",isRequired:!0})},initializeModalValues:function(){var e=this;e.set("iccCustomerNumber","NA"),e.set("accountNumber","NA"),e.set("highestProductQualified","NA"),e.set("applicationDate","NA"),e.set("adhocDate","NA"),e.set("internalCreditApproval","NA"),e.set("creditVetting","NA"),e.set("ahvStatus","NA"),e.set("applicationStatus","NA"),e.set("paymentPlanDtlsModel.workPermitCheck",!1),e.set("paymentPlanDtlsModel.idValidatedCheck",!1),e.set("paymentPlanDtlsModel.addressValidatedCheck",!1),e.set("paymentPlanDtlsModel.creditVettingCheck",!1),e.set("paymentPlanDtlsModel.internalVettingCheck",!1),e.set("paymentPlanDtlsModel.productConfirmedCheck",!1),e.set("paymentPlanDtlsModel.highestProductValidatedCheck",!1),e.set("paymentPlanDtlsModel.ahvCompliantCheck",!1),e.set("paymentPlanDtlsModel.incomeProofValidatedCheck",!1)},stop:function(){this.set("salesDetails",[]),this.set("delayInAppsmartResponse",!1),this.set("paymentPlanDtlsModel.overrideAhvFlag",!1),this.set("canOverride",!0),this.set("processCoRelationId",void 0),this.set("methodOfPaymentId",void 0),this.set("disableSaveButton",!1),this.set("ahvCompliantByDpp",!1),this.set("salesOrderPresent",!1),this.set("disableActivatePlan",!1),this.set("alreadyOverrideApplication",!1),this.set("alreadyOverrideApplicationRemark",!1);var e=this.get("data"),t=this;e.set("fileUploader",null),$(document).off({click:t.clickEvent},"#saveappdetails , #uploadfiles"),this.initializeModalValues(),this._super()},getAllDocuments:function(){var e=this,t=null;t=Ember.isEmpty(e.get("paymentPlanDtlsModel.iccCustomerNumber"))||"NA"==e.get("paymentPlanDtlsModel.iccCustomerNumber")?null:e.get("paymentPlanDtlsModel.iccCustomerNumber"),e.set("data.customerDocuments",[]),e.set("ahvData.customerDocuments",[]),null!=t&&Komodo.Services.queryService.getJSON("ConfigurationQuery?customerID="+t).done(function(t){if(Ember.isEmpty(t))e.set("data.enableDocGrid",!1);else if(null!=t.DocumentPayload&&t.DocumentPayload.length>0)for(var a=0;a<t.DocumentPayload.length;a++){var o=t.DocumentPayload[a],n=null!=o.DocumentURL?o.DocumentURL.split("/")[o.DocumentURL.split("/").length-1]:"-",s=Komodo.Models.DPPDocumentModel.create();s.set("documentName",n),s.set("uploadPercentage",""),s.set("documentTypes",e.get("data.documentTypes")),s.set("documentUrl",o.DocumentURL),s.set("documentSerialNumber",""),s.set("uploadStatus","UPLOADED"),s.set("isAlready",!0),s.set("isDocumentTypeDisable",!0),e.set("data.enableDocGrid",!0),void 0!==o.ListOfDocumentMetaData&&null!==o.ListOfDocumentMetaData&&o.ListOfDocumentMetaData.length>0&&$(o.ListOfDocumentMetaData).each(function(e,t){"DocumentType"===t.DocumentMetaDataValueURI&&s.set("documentType",t.Value)}),"None"===s.get("documentType")||"Proof of Income"!==s.get("documentType")&&"Copy of ID"!==s.get("documentType")&&"Bank Statement"!==s.get("documentType")&&"Proof of Address"!==s.get("documentType")&&"Third Party Deduction Authorisation Form"!==s.get("documentType")&&"Acknowledgement of Debt Form"!==s.get("documentType")&&"Work Permit"!==s.get("documentType")&&"Signed Terms & Conditions"!==s.get("documentType")||e.get("data.customerDocuments").pushObject(s)}else e.set("data.enableDocGrid",!1)}).error(function(e){var t=JSON.stringify(e);Komodo.log("retrievePrintDocumentInfo ajax call failed. Error: "+t)})},subscribeNotifyCreditRatingReceivedReceived:function(){Komodo.Services.eventAggregator.subscribe("NotifyCreditRatingReceivedReceived",function(){alert("Done")})},getNewProcessID:function(){this.startNewProcess()},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,6e4,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},saveApplicationsApprovals:function(){var e=this;e.getNewProcessID(),e.showBusyIndicator();var t="";t=e.get("paymentPlanDtlsModel.overrideFlag")?{idValidated:"NA"!=e.get("paymentPlanDtlsModel.idValidated")?e.get("paymentPlanDtlsModel.idValidated"):null,addressValidated:"NA"!=e.get("paymentPlanDtlsModel.addressValidated")?e.get("paymentPlanDtlsModel.addressValidated"):null,creditVetting:!0,internalVetting:"Yes",productConfirmed:null!=e.get("paymentPlanDtlsModel.productName"),highestProductQualified:"NA"!=e.get("paymentPlanDtlsModel.highestProductQualified"),ahvCompliant:"NA"!=e.get("paymentPlanDtlsModel.ahvStatus")?"compliant"==e.get("paymentPlanDtlsModel.ahvStatus").toLowerCase():null,incomeProofValidated:"NA"!=e.get("paymentPlanDtlsModel.incomeValidated")?e.get("paymentPlanDtlsModel.incomeValidated"):null,paymentReceived:null,workPermit:"NA"!==e.get("paymentPlanDtlsModel.workPermit")?e.get("paymentPlanDtlsModel.workPermit"):null}:{idValidated:"NA"!=e.get("paymentPlanDtlsModel.idValidated")?e.get("paymentPlanDtlsModel.idValidated"):null,addressValidated:"NA"!=e.get("paymentPlanDtlsModel.addressValidated")?e.get("paymentPlanDtlsModel.addressValidated"):null,creditVetting:"NA"!=e.get("paymentPlanDtlsModel.creditVetting")?"Yes"==e.get("paymentPlanDtlsModel.creditVetting"):null,internalVetting:"NA"!=e.get("paymentPlanDtlsModel.internalCreditApproval")?e.get("paymentPlanDtlsModel.internalCreditApproval"):null,productConfirmed:null!=e.get("paymentPlanDtlsModel.productName"),highestProductQualified:"NA"!=e.get("paymentPlanDtlsModel.highestProductQualified"),ahvCompliant:"NA"!=e.get("paymentPlanDtlsModel.ahvStatus")?"compliant"==e.get("paymentPlanDtlsModel.ahvStatus").toLowerCase():null,incomeProofValidated:"NA"!=e.get("paymentPlanDtlsModel.incomeValidated")?e.get("paymentPlanDtlsModel.incomeValidated"):null,paymentReceived:null,workPermit:"NA"!==e.get("paymentPlanDtlsModel.workPermit")?e.get("paymentPlanDtlsModel.workPermit"):null};for(var a="",o=0;o<e.dppProducts.length;o++)if(e.dppProducts[o].key===e.get("paymentPlanDtlsModel.productName")){a=e.dppProducts[o].name;break}var n={iccCustNumber:"NA"!=e.get("paymentPlanDtlsModel.iccCustomerNumber")?e.get("paymentPlanDtlsModel.iccCustomerNumber"):null,crmCustNumber:"NA"!=e.get("paymentPlanDtlsModel.crmCustomerNumber")?e.get("paymentPlanDtlsModel.crmCustomerNumber"):null,financialAccountId:"NA"!=e.get("paymentPlanDtlsModel.accountNumber")?e.get("paymentPlanDtlsModel.accountNumber"):null,adhocDOReference:null,overridden:e.get("paymentPlanDtlsModel.overrideFlag"),overriddenRemark:"NA"!=e.get("paymentPlanDtlsModel.overrideRemark")?e.get("paymentPlanDtlsModel.overrideRemark"):null,idProofRefrence:null,addressProofRefrence:null,ahvProofRefrence:"NA"!=e.get("paymentPlanDtlsModel.ahvStatus")?e.get("paymentPlanDtlsModel.ahvStatus"):null,incomeProofReference:null,appSmartApplicationId:null,appSmartProcessInstanceId:null,productTaken:""!==a?a:null,productTakenDescription:"NA"!==e.get("paymentPlanDtlsModel.productName")?e.get("paymentPlanDtlsModel.productName"):null,addOnTaken:"NA"!=e.get("paymentPlanDtlsModel.addOnName")?e.get("paymentPlanDtlsModel.addOnName"):null,lineInstruction:"NA"!=e.get("paymentPlanDtlsModel.lineInstruction")?e.get("paymentPlanDtlsModel.lineInstruction"):null,adslNumber:"NA"!=e.get("paymentPlanDtlsModel.adslNumber")?e.get("paymentPlanDtlsModel.adslNumber"):null},s={applicationID:e.get("applicationId"),approvalCriterias:t,creditApplicationDetails:n,statusId:1==e.get("paymentPlanDtlsModel.overrideFlag")?10:0,statusText:1==e.get("paymentPlanDtlsModel.overrideFlag")?"Overridden":""};Komodo.Services.queryService.postJSON("/CreditApplication/UpdateCreditApprovalDetails",{data:s}).done(function(t){if(e.hideBusyIndicator(),null!=t&&t.length>0){if(1==e.get("paymentPlanDtlsModel.overrideFlag")&&"Overridden"!=e.get("paymentPlanDtlsModel.applicationStatus")&&(Ember.empty(t[0].CreditApplicationDetail.ICCCustNumber)||Ember.empty(t[0].CreditApplicationDetail.FinancialAccountId))){var a=Komodo.Models.OverrideCreditVettingDecision.create(),o=Komodo.canonicalFacadeFactory(a,["Country","ApplicationId","OverrideReason"]);o.set("Country",e.get("loggedInCountry")),o.set("ApplicationId",e.get("applicationId")),o.set("OverrideReason",e.get("paymentPlanDtlsModel.overrideRemark")),e.getNewProcessID(),Komodo.Services.manageAccountService.overrideCreditVettingDecision(e,a).done(function(){Komodo.log("publishOverrideCreditVettingDecision() : Override Credit Vetting Decision event has been published.")}).fail(function(){Komodo.log("publishOverrideCreditVettingDecision() : Override Credit Vetting Decision event has failed.")})}return e.refreshUI(t),1==e.get("allCriteriaMate")&&e.sendDeliveryInstructions(),e.set("paymentPlanDtlsModel.productName",""),e.set("paymentPlanDtlsModel.addOnName",""),e.set("paymentPlanDtlsModel.lineInstruction",""),e.set("paymentPlanDtlsModel.adslNumber",""),e.getNewProcessID(),e.showBusyIndicator(),e.getCreditDetails(),e.set("paymentPlanDtlsModel.overrideAhvFlag",!1),void Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.useCaseTitle"),kl.value("Credit Approvals Saved"),Komodo.Controls.MessageBoxOkButton,e,"id5446673","success")}}).error(function(t){e.hideBusyIndicator();var a=JSON.stringify(t);Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.useCaseTitle"),a,Komodo.Controls.MessageBoxOkButtons,e,"authmbx","danger")})},removeDocument:function(e){var t=this,a=e.documentName,o=t.get("data"),n=-1,s="";$(o.customerDocuments).each(function(e,t){t.documentName===a&&(n=e,s=t.documentName)}),n>-1&&(o.customerDocuments.removeAt(n),o.fileUploader.files.removeAt(n))},setMethodOfPayment:function(){var e=this;Komodo.Services.cachedDataService.fetch("MethodOfPayment").done(function(t){var a=e.get("paymentPlanDtlsModel");a.set("methodOfPayments",[]),$.each(t,function(e,t){a.get("methodOfPayments").addObject(t)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve method of payment from CDM")})},getAccountTypeValue:function(e){var t=this;t.set("bankAccountTypeValue",void 0);for(var a=t.get("paymentPlanDtlsModel.bankAccountTypes"),o=0;o<a.length>0;o++)if(e.toString()==a[o].key){t.set("bankAccountTypeValue",a[o].value);break}},setBankAccountTypes:function(){var e=this;Komodo.Services.cachedDataService.fetch("BankAccountType").done(function(t){var a=e.get("paymentPlanDtlsModel");a.get("bankAccountTypes").clear(),$.each(t,function(e,t){a.get("bankAccountTypes").addObject(t)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve bank account type from CDM")})},getMethodOfPayment:function(e){var t=this;t.set("methodOfPaymentId",void 0);for(var a=t.get("paymentPlanDtlsModel.methodOfPayments"),o=0;o<a.length>0;o++)if(e==a[o].value){t.set("methodOfPaymentId",a[o].key);break}},publishOverrideAHVStatus:function(){var e=this,t=Komodo.Models.OverrideAHVStatus.create(),a=Komodo.canonicalFacadeFactory(t,["Country","FinancialAccountUID","PaymentDetail"]),o=Komodo.Models.PaymentDetail.create(),n=Komodo.canonicalFacadeFactory(o,["MethodOfPayment","BankAccountType","AccountNumber","BankName","BranchName","BranchCode","DebitOrderDay","PayerName","PayerSurname","PayerIDType","PayerIDNumber","AHVStatus","YearsAtBank","IsSalaryMandated"]);if(a.set("Country",e.get("loggedInCountry")),null!=e.get("paymentPlanDtlsModel.accountNumber")&&"NA"!=e.get("paymentPlanDtlsModel.accountNumber")&&void 0!=e.get("paymentPlanDtlsModel.accountNumber")&&(a.set("FinancialAccountUID",e.get("paymentPlanDtlsModel.accountNumber")),void 0!=e.get("paymentPlanDtlsModel.bankDetails")&&null!=e.get("paymentPlanDtlsModel.bankDetails"))){e.getAccountTypeValue(e.get("paymentPlanDtlsModel.bankDetails").BankAccountType),e.getMethodOfPayment(e.get("bankAccountTypeValue")),n.set("MethodOfPayment",e.get("methodOfPaymentId")),n.set("BankAccountType",e.get("bankAccountTypeValue")),n.set("AccountNumber",e.get("paymentPlanDtlsModel.bankDetails").BankAccountNumber),n.set("BankName",e.get("paymentPlanDtlsModel.bankDetails").BankNameKey),n.set("BranchName",e.get("paymentPlanDtlsModel.bankDetails").BankBranchNameKey),n.set("BranchCode",e.get("paymentPlanDtlsModel.bankDetails").BankBranchCode),n.set("DebitOrderDay",e.get("paymentPlanDtlsModel.bankDetails").DebitOrderDay),n.set("PayerIDNumber",e.get("paymentPlanDtlsModel.idNumber"));var s;s="Passport Number"===e.get("paymentPlanDtlsModel.IdType")?2:1,n.set("PayerIDType",s),n.set("AHVStatus",void 0),n.set("IsSalaryMandated",void 0),void 0!=e.get("paymentPlanDtlsModel.firstName")&&null!=e.get("paymentPlanDtlsModel.firstName")&&n.set("PayerName",e.get("paymentPlanDtlsModel.firstName")),void 0!=e.get("paymentPlanDtlsModel.lastName")&&null!=e.get("paymentPlanDtlsModel.lastName")&&n.set("PayerSurname",e.get("paymentPlanDtlsModel.lastName")),a.set("PaymentDetail",o),e.getNewProcessID(),e.showBusyIndicator();Komodo.Services.manageAccountService.publishEvent(e,t,"OverrideAHVStatus","v1").fail(function(t){e.hideBusyIndicator()})}},OverrideMethodOfPayment:function(){for(var e=this,t="",a=0;a<e.get("paymentPlanDtlsModel.bankAccountTypes").length;a++)if(e.get("paymentPlanDtlsModel.bankDetails").BankAccountType==e.get("paymentPlanDtlsModel.bankAccountTypes")[a].key){t=e.get("paymentPlanDtlsModel.bankAccountTypes")[a].value;break}var o={methodOfPayment:"Debit Order",bankName:e.get("paymentPlanDtlsModel.bankDetails").BankName,bankAccountType:t,debitOrderDay:e.get("paymentPlanDtlsModel.bankDetails").DebitOrderDay,bankAccountNumber:e.get("paymentPlanDtlsModel.bankDetails").BankAccountNumber,bankBranchCode:e.get("paymentPlanDtlsModel.bankDetails").BankBranchCode,payerIdNumber:e.get("paymentPlanDtlsModel.idNumber"),initials:e.get("paymentPlanDtlsModel.firstName")[0]+e.get("paymentPlanDtlsModel.lastName")[0],surname:e.get("paymentPlanDtlsModel.lastName"),emailAddress:e.get("paymentPlanDtlsModel.bankDetails").PayerEmailAddress,phoneNumber:e.get("paymentPlanDtlsModel.bankDetails").PayerPhoneNumber};e.showBusyIndicator(),Komodo.Services.queryService.putJSONApiRoot("customers/"+e.get("paymentPlanDtlsModel.iccCustomerNumber")+"/override-payment-details",{data:o}).done(function(){e.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show("Overide AHV","Complete",Komodo.Controls.MessageBoxOkButtons,e,"authmbx","success").response=function(t){"ok"===t&&e.updateRepository()}}).error(function(t){if(e.hideBusyIndicator(),Ember.isEmpty(t.responseJSON))Komodo.Controls.MessageBoxController.show(t.statusText,"Status :  "+t.status+", Error : "+t.statusText,Komodo.Controls.MessageBoxOkButtons,e,"authmbx3","danger");else{Komodo.log("Override-payment-details Call fail : "+t.responseJSON.detail);var a=t.responseJSON.detail;Ember.isEmpty(t.responseJSON.detail)&&(a=t.responseJSON.message),Komodo.Controls.MessageBoxController.show(kl.value(t.statusText),"Status :  "+t.status+", Error : "+a,Komodo.Controls.MessageBoxOkButtons,e,"authmbx3","danger")}})},getBankingDetails:function(){var e=this;e.showBusyIndicator(),Komodo.Services.queryService.getJSON("/CreditApplication/Get?applicationId="+e.get("applicationId")+"&IdNumber=&pageNumber=0&pageSize=0").done(function(t){null!=t&&(Ember.isEmpty(t[0].CreditDetails)&&!Ember.isEmpty(e.get("processCoRelationId"))||e.hideBusyIndicator(),null!=t[0].BankDetail&&e.set("paymentPlanDtlsModel.bankDetails",t[0].BankDetail))}).error(function(t){var a=JSON.stringify(t);e.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.useCaseTitle"),a,Komodo.Controls.MessageBoxOkButtons,e,"authmbx","danger")})},updateRepository:function(){var e=this,t={idValidated:null,addressValidated:null,creditVetting:null,internalVetting:null,productConfirmed:null,highestProductQualified:null,ahvCompliant:!0,incomeProofValidated:null,paymentReceived:null,workPermit:null},a={iccCustNumber:null,crmCustNumber:null,financialAccountId:null,adhocDODate:null,adhocDOReference:null,overridden:null,ahvoverriden:!0,ahvstatus:"Compliant",overriddenRemark:null,idProofRefrence:null,addressProofRefrence:null,ahvProofRefrence:null,incomeProofReference:null,appSmartApplicationId:null,appSmartProcessInstanceId:null,productName:null},o={applicationID:e.get("applicationId"),approvalCriterias:t,creditApplicationDetails:a,statusId:0,statusText:null};e.showBusyIndicator(),Komodo.Services.queryService.postJSON("/CreditApplication/UpdateCreditApprovalDetails",{data:o}).done(function(t){e.hideBusyIndicator(),e.set("paymentPlanDtlsModel.isNonComplaint",!1),e.addApplicationActivity(t)}).error(function(t){e.hideBusyIndicator()})},addApplicationActivity:function(){var e=this;e.showBusyIndicator(),Komodo.Services.queryService.postJSON("/CreditApplication/AddApplicationActivity?activity=Supervisor Approval&applicationId="+e.get("applicationId")+"&remark=Supervisor "+e.get("paymentPlanDtlsModel.supervisorUsername")+" approved AHV Override").done(function(){e.hideBusyIndicator(),e.refreshtheui()}).error(function(){e.hideBusyIndicator()})},messageOverrideAHVStatusReceived:function(e){Komodo.log(e)},messageOverrideAHVStatusDeliveryFailure:function(e){Komodo.log(e)},messageOverrideAHVStatusFault:function(e){Komodo.log(e)},messageAHVStatusOverriddenReceived:function(e){var t=this;t.hideBusyIndicator(),t.set("paymentPlanDtlsModel.ahvStatus",e.ResponseMessage.Payload.PaymentDetail.AHVStatus),t.set("paymentPlanDtlsModel.ahvCompliantCheck",!0),t.set("paymentPlanDtlsModel.overrideAhvFlag",!0),t.set("canOverride",!0);var t=this,a={idValidated:null,workPermit:null,addressValidated:null,creditVetting:null,internalVetting:null,productConfirmed:null,highestProductQualified:null,ahvCompliant:!0,incomeProofValidated:null,paymentReceived:null},o={iccCustNumber:null,crmCustNumber:null,financialAccountId:null,adhocDODate:null,adhocDOReference:null,overridden:null,overriddenRemark:null,idProofRefrence:null,addressProofRefrence:null,ahvProofRefrence:e.ResponseMessage.Payload.PaymentDetail.AHVStatus,incomeProofReference:null,appSmartApplicationId:null,appSmartProcessInstanceId:null,productName:null},n={applicationID:t.get("applicationId"),approvalCriterias:a,creditApplicationDetails:o,statusId:0,statusText:null};Komodo.Services.queryService.postJSON("/CreditApplication/UpdateCreditApprovalDetails",{data:n}).done(function(e){}).error(function(e){JSON.stringify(e)})},messageAHVStatusOverriddenDeliveryFailure:function(e){Komodo.log(e)},messageAHVStatusOverriddenFault:function(e){Komodo.log(e)},messageFailureMessageEventReceived:function(e){this.hideBusyIndicator(),
"OverrideAHVStatus"==e.ResponseMessage.Payload.OriginatedEventName?alert(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription):Komodo.Controls.MessageBoxController.show("Failure Message",e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,null,null,"id123456","danger")},messageReceived:function(e){Komodo.log(e)},messageDeliveryFailure:function(e){Komodo.log(e)},messageFault:function(e){Komodo.log(e)},messageProductPaymentPlanCreatedReceived:function(){var e=this;e.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.useCaseTitle"),kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.paymentplanCreated"),Komodo.Controls.MessageBoxOkButtons,e,"authmbx","success").response=function(){}},messageProductPaymentPlanCreatedFailure:function(e){that.hideBusyIndicator(),Komodo.log(e)},messageProductPaymentPlanCreatedEventFault:function(e){that.hideBusyIndicator(),Komodo.log(e)},overrideAhvCheck:function(){if(this.get("paymentPlanDtlsModel.overrideAhvFlag")){Komodo.Services.securityService.hasPermission("clarity://overrideAHVControlView/viewOnly")?this.set("canOverride",!1):this.set("canOverride",!0)}else this.set("canOverride",!0)}.observes("paymentPlanDtlsModel.overrideAhvFlag"),overrideProucts:function(){var e=this;e.paymentPlanDtlsModel.overrideFlag?e.set("alreadyOverrideApplicationRemark",!1):e.set("alreadyOverrideApplicationRemark",!0),e.get("alreadyOverrideApplication")||(e.get("paymentPlanDtlsModel.overrideFlag")?(e.loadProductOnOverride(),e.set("paymentPlanDtlsModel.productName",void 0),e.set("paymentPlanDtlsModel.addOnName",void 0),e.set("paymentPlanDtlsModel.lineInstruction",void 0),e.set("paymentPlanDtlsModel.adslNumber",void 0)):e.loadProducts(e.get("paymentPlanDtlsModel.productKey")))}.observes("paymentPlanDtlsModel.overrideFlag"),loadProductOnOverride:function(){var e=this;e.set("_productName",[]);for(var t=!1,a=0;a<e.get("dppProductDetails").length;a++)e.get("paymentPlanDtlsModel.highestProductQualified")===e.get("dppProductDetails")[a].description&&(e.get("dppProductDetails")[a].Active||(t=!0));for(var o=0;o<e.get("dppProductDetails").length;o++){var n=e.get("dppProductDetails")[o];if(t){var s={key:n.description,label:n.description,addOns:n.addOnDetails,provider:n.provider,name:n.name};e._productName.push(s)}else if(1==n.Active){var s={key:n.description,label:n.description,addOns:n.addOnDetails,provider:n.provider,name:n.name};e._productName.push(s)}}e.set("paymentPlanDtlsModel.productName",e.get("paymentPlanDtlsModel.tempKey")),e.set("paymentPlanDtlsModel.addOnName",e.get("paymentPlanDtlsModel.tempKeyAddon")),e.set("paymentPlanDtlsModel.lineInstruction",e.get("paymentPlanDtlsModel.tempKeyLineInstruction")),e.set("paymentPlanDtlsModel.adslNumber",e.get("paymentPlanDtlsModel.tempKeyADSLNumber"))},checkUploadedAhvDocuments:function(){var e=this;e.set("registerOnce",1);var t=0,a=0;if(null!=e.get("data.customerDocuments")&&!(e.get("data.customerDocuments").length>1))return void alert("Following documents are compulsory in order to Override AHV:\n Bank Statement \n Copy of ID");for(var o=0;o<e.get("data.customerDocuments").length;o++)"DONE"!==e.get("data.customerDocuments")[o].uploadStatus&&"UPLOADED"!==e.get("data.customerDocuments")[o].uploadStatus||void 0===e.get("data.customerDocuments")[o].documentType||"None"!==e.get("data.customerDocuments")[o].documentType&&("Bank Statement"===e.get("data.customerDocuments")[o].documentType&&a++,"Copy of ID"==e.get("data.customerDocuments")[o].documentType&&t++);t>0&&a>0?e.OverrideMethodOfPayment():alert("Following documents are compulsory in order to Override AHV:\n Bank Statement \n Copy of ID")},sendDeliveryInstructions:function(){var e=this,t=Komodo.Models.CreateProductPaymentPlan.create(),a=Komodo.canonicalFacadeFactory(t,["Country","Hardware","AccountID","CustomerID","CreditApplicationID"]),o=Komodo.Models.Hardware.create(),n=Komodo.canonicalFacadeFactory(o,["SerialNumber","Status","StatusReason","ManufactureDate","MACAddress","OriginalSmartcard","SmartcardDetail","InsuranceStartDate","CustomerWarrantyEndDate","CustomerWarrantyStartDate","ManufacturerWarrantyEndDate","ManufacturerWarrantyStartDate","InsuranceStatus","WarrantyStatus","LinkedSmartcard","LinkedSmartcardStatus","LinkedSmartcardStatusReason","ProductDetail","ListOfService","SecondaryHardware","IsAwaitingInstallation"]),s=Komodo.Models.ProductDetail.create();Komodo.canonicalFacadeFactory(s,["UID","Type","Name","Model","Manufacturer","Description","Offers","Price","ProductFeatures"]).set("Name",e.get("paymentPlanDtlsModel.productName")),n.set("ProductDetail",s),a.set("Country",e.get("loggedInCountry")),a.set("Hardware",o),a.set("AccountID",e.get("paymentPlanDtlsModel.accountNumber")),a.set("CustomerID",e.get("paymentPlanDtlsModel.iccCustomerNumber")),a.set("CreditApplicationID",e.get("applicationId")),Komodo.Services.manageAccountService.createProductPaymentPlan(e,t).done(function(){e.set("allCriteriaMate",!1),Komodo.log("publishCreateProductPaymentPlan() : Create Product Payment Plan event has been published."),Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.useCaseTitle"),kl.value("Delivery Instructions Sent Successfully"),Komodo.Controls.MessageBoxOkButton,e,"id5446673","success")}).fail(function(){Komodo.log("publishCreateProductPaymentPlan() : Create Product Payment Plan Decision event has failed.")})},publishActivateProduct:function(){var e=this,t=Komodo.Models.ActivatePaymentPlanProduct.create(),a=Komodo.canonicalFacadeFactory(t,["Country","CustomerNumber","CreditApplicationId","DeviceSerialNumber","FinancialAccountNumber","PaymentPlanProductName"]);a.set("Country",e.get("loggedInCountry")),a.set("CustomerNumber",e.get("paymentPlanDtlsModel.iccCustomerNumber")),a.set("CreditApplicationId",e.get("applicationId"));var o=Komodo.Models.DeviceSerialNumber.create(),n=Komodo.canonicalFacadeFactory(o,["DecoderSerialNumber","SmartCardSerialNumber"]);n.set("DecoderSerialNumber",e.salesDetails[0].DecoderNumber),n.set("SmartCardSerialNumber",e.salesDetails[0].SmartcardNumber),a.set("DeviceSerialNumber",o),a.set("FinancialAccountNumber",e.get("paymentPlanDtlsModel.accountNumber"));for(var s="",r=0;r<e.dppProducts.length;r++)if(e.dppProducts[r].key===e.get("paymentPlanDtlsModel.productName")){s=e.dppProducts[r].name;break}a.set("PaymentPlanProductName",s),e.getNewProcessID(),Komodo.Services.manageAccountService.activateProduct(e,t).done(function(){e.set("disableActivatePlan",!0),e.showBusyIndicator(),Komodo.log("publishActivateProduct() : Activate Product event has been published.")}).fail(function(){Komodo.log("publishActivateProduct()  : Activate Product event has failed.")})},loadAddons:function(){var e=this;e.set("isMWEBProduct",!1),$.each(e.get("dppProductDetails"),function(t,a){a.description===e.get("paymentPlanDtlsModel.productName")&&"MWEB"===a.provider&&e.set("isMWEBProduct",!0)}),e.get("isMWEBProduct")?(e.set("_addOnName",[]),e.get("paymentPlanDtlsModel.productName")?$.each(e.get("dppProductDetails"),function(t,a){a.description===e.get("paymentPlanDtlsModel.productName")&&(a.addOnDetails?$.isArray(a.addOnDetails)?$.each(a.addOnDetails,function(t,a){var o={key:a.Name,label:a.Description,isADSLRequired:a.IsADSLRequired};e._addOnName.push(o)}):e.get("_addOnName").addObject(a.addOnDetails):e.set("paymentPlanDtlsModel.addOnName",""))}):(e.set("paymentPlanDtlsModel.addOnName",""),e.set("paymentPlanDtlsModel.lineInstruction",""),e.set("paymentPlanDtlsModel.adslNumber","")),e.registerValidator(e.get("paymentPlanDtlsModel"),"addOnName",{type:"string",isRequired:!0}),e.registerValidator(e.get("paymentPlanDtlsModel"),"lineInstruction",{type:"string",isRequired:!0})):(e.set("paymentPlanDtlsModel.addOnName",""),e.set("paymentPlanDtlsModel.lineInstruction",""),e.set("paymentPlanDtlsModel.adslNumber",""),e.removeDependentProperty("addOnNameValidator"),e.removeDependentProperty("lineInstructionValidator"))}.observes("paymentPlanDtlsModel.productName"),loadADSL:function(){var e=this;e.set("isADSLRequired",!1),$.each(e.get("_addOnName"),function(t,a){a.key==e.get("paymentPlanDtlsModel.addOnName")&&a.isADSLRequired&&e.set("isADSLRequired",!0)}),e.get("isADSLRequired")?e.registerValidator(e.get("paymentPlanDtlsModel"),"adslNumber",{type:"number",isRequired:!0,displayName:kl.value(e.localeBase+"phoneNumber"),minLength:7,maxLength:10,functions:Komodo.UI.Validators.numericValidator}):(e.set("paymentPlanDtlsModel.adslNumber",""),e.removeDependentProperty("adslNumberValidator"))}.observes("paymentPlanDtlsModel.addOnName"),removeDependentProperty:function(e){var t=this;void 0!==t.get("validators."+e)&&(t.get("validators."+e).functions.clear(),t.get("validators."+e).validate())},checkAHVDocuments:function(){var e=this;e.get("paymentPlanDtlsModel.acceptAddedDocument")?e.set("paymentPlanDtlsModel.acceptDocs",!1):e.set("paymentPlanDtlsModel.acceptDocs",!0)}.observes("paymentPlanDtlsModel.acceptAddedDocument"),getSecurityService:function(){return this.get("_securityService")},validateUserClaim:function(e,t,a,o){var n=this,s=$.Deferred();return n.getSecurityService().authenticate(e,t,a).done(function(e){var t=void 0;$(e.permissions).each(function(a,n){$(o).each(function(a,o){n===o&&(t=e.sessionToken)})}),s.resolve(t)}).fail(function(e){alert("Error : "+e)}),s},savedppapplication:function(){if(this.get("paymentPlanDtlsModel.overrideFlag")&&(null===this.get("paymentPlanDtlsModel.overrideRemark")||void 0===this.get("paymentPlanDtlsModel.overrideRemark")||""===this.get("paymentPlanDtlsModel.overrideRemark")))return void Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.useCaseTitle"),kl.value("Override Remark is Required"),Komodo.Controls.MessageBoxOkButtons,this,"authmbx","danger");if(!1!==this.canSubmitData(this.paymentPlanDtlsModel,kl.value("locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.useCaseTitle"),{showInModal:!0}))return this.get("migratedCustomer")&&!this.get("isDeliveryAddressAvailable")?void Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.useCaseTitle"),kl.value("Delivery address and banking information of default account is required."),Komodo.Controls.MessageBoxOkButtons,this,"authmbx","danger"):void this.saveApplicationsApprovals()},refreshtheui:function(){this.set("paymentPlanDtlsModel.productName",""),this.set("paymentPlanDtlsModel.addOnName",""),this.set("paymentPlanDtlsModel.lineInstruction",""),this.set("paymentPlanDtlsModel.adslNumber",""),this.getNewProcessID(),this.showBusyIndicator(),this.getCreditDetails(),this.set("paymentPlanDtlsModel.overrideAhvFlag",!1)},actions:{refresh:function(){this.refreshtheui()},override:function(){this.checkUploadedAhvDocuments()},rejectOverideAhv:function(){var e=this;e.set("firstAuthenticated",!0),e.set("authenticated",!1),e.set("paymentPlanDtlsModel.supervisorName",void 0),e.set("paymentPlanDtlsModel.supervisorPassword",void 0)},removeDocument:function(e){this.removeDocument(e.content)},saveApplication:function(){this.savedppapplication()},viewDocs:function(e){var t=e.content,a=t.documentName,o=this.get("data");$(o.customerDocuments).each(function(e,t){t.documentName===a&&window.open(t.documentUrl,"","_blank")})},clear:function(){var e=this;e.set("paymentPlanDtlsModel.supervisorUsername",""),e.set("paymentPlanDtlsModel.supervisorPassword","")},removeAhvDocument:function(e){this.removeAhvDocument(e.content)},sendDeliveryInstructions:function(){},cancelApplication:function(){},activatePlan:function(){var e=this;if(Ember.isEmpty(e.get("paymentPlanDtlsModel.activatePlanComment")))return void Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.useCaseTitle"),kl.value("Please specify the comment."),Komodo.Controls.MessageBoxOkButtons,e,"authmbx","danger");e.publishActivateProduct()},authenticate:function(){var e=this,t=Komodo.Services.securityService.get("domainUserName");if(Ember.isEmpty(e.get("paymentPlanDtlsModel.supervisorUsername"))||Ember.isEmpty(e.get("paymentPlanDtlsModel.supervisorPassword")))return void Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.missingInfoTitle"),kl.value("locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.missingInfo"),Komodo.Controls.MessageBoxOkButtons,e,"id5446673","warning");e.set("paymentPlanDtlsModel.supervisorName",e.get("paymentPlanDtlsModel.supervisorUsername")),e.validateUserClaim(Komodo.Services.uiService.getController("application").get("_selectedCountryId"),e.get("paymentPlanDtlsModel.supervisorUsername"),e.get("paymentPlanDtlsModel.supervisorPassword"),e.supervisorClaim).done(function(a){void 0!==a?(e.set("sessionToken",a),t.toLowerCase()===e.get("paymentPlanDtlsModel.supervisorUsername").toLowerCase()?(alert(""+kl.value(e.localAhvSupervisorApproval+"unauthoriseError")),e.set("paymentPlanDtlsModel.supervisorUsername",void 0),e.set("paymentPlanDtlsModel.supervisorPassword",void 0)):(e.set("firstAuthenticated",!1),e.set("authenticated",!0))):(alert(""+kl.value(e.localAhvSupervisorApproval+"accessDenied")),e.set("paymentPlanDtlsModel.supervisorUsername",void 0),e.set("paymentPlanDtlsModel.supervisorPassword",void 0))}).fail(function(e){alert("Error : "+e)})}}}),Komodo.Application.PaymentPlanApplicationDetailsView=Komodo.UI.View.extend({viewKey:"PaymentPlanApplicationDetailsView",templateName:"PaymentPlanApplicationDetailsView",didInsertElement:function(){this._super();var e=this.get("context"),t=(Komodo.Services.uiService.getController("paymentPlanApplicationDetails"),null);null==e.paymentPlanDtlsModel||void 0==e.paymentPlanDtlsModel||Ember.isEmpty(e.paymentPlanDtlsModel.iccCustomerNumber)||"NA"==e.paymentPlanDtlsModel.iccCustomerNumber||(t=this.get("model.iccCustomerNumber"));var a=new plupload.Uploader({runtimes:"html5,flash,silverlight,html4",browse_button:"pickfiles",url:KomodoConfiguration.ibsApiUrl+this.get("context.loggedInCountryName")+"/uploaddownload/upload?customerNumber="+t+"&documentType=",headers:{"komodo-sessiontoken":Komodo.Services.securityService.get("sessionToken")},filters:{max_file_size:"10mb",mime_types:[{title:"Image files",extensions:"jpg,gif,png,jpeg,JPG,GIF,PNG,JPEG"},{title:"Adobe And Document Files",extensions:"pdf"}]},init:{PostInit:function(){$("#filelist > tbody").html(""),$("input:file").parent().width(0).height(0).css("visibility","hidden");var e=Komodo.Services.uiService.getController("paymentPlanApplicationDetails");return $(document).off({click:e.clickEvent},"#saveappdetails, #uploadfiles"),$(document).on({click:e.clickEvent},"#saveappdetails, #uploadfiles"),!1},FilesAdded:function(e,t){var a=(this.paymentPlanApplicationDetailsController,this.paymentPlanApplicationDetailsController.get("data"));plupload.each(t,function(t){var o=!1;if($(a.customerDocuments).each(function(e,n){n.get("documentName")===t.name&&(o=!0,a.set("enableDocGrid",!0))}),o)e.removeFile(t);else{a.set("enableDocGrid",!0);var n=Komodo.Models.DPPDocumentModel.create();n.set("documentName",t.name),n.set("documentSize",plupload.formatSize(t.size)),n.set("uploadPercentage",""),n.set("documentTypes",a.get("documentTypes")),n.set("documentType",void 0),n.set("documentSerialNumber",a.get("documentSerialNumber")),n.set("documentSerialNumber",void 0),n.set("uploadStatus","QUEUED"),a.get("customerDocuments").pushObject(n)}})},UploadProgress:function(e,t){!1===e.uploadCanceled&&e.changeFileStatus(this.paymentPlanApplicationDetailsController.get("data"),t)},FileUploaded:function(e,t,a){var o=JSON.parse(a.response)[0];e.changeFileStatus(this.paymentPlanApplicationDetailsController.get("data"),t,o)},Error:function(e,t){Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.useCaseTitle"),t.code+" : "+t.message+(void 0===t.response||null===t.response?"":t.response),Komodo.Controls.MessageBoxOkButtons,this,"modelCustomerDocuments","danger"),e.uploadCanceled=!0,e.changeFileStatus(this.paymentPlanApplicationDetailsController.get("data"),t.file)},BeforeUpload:function(e,a){if(!1===e.uploadCanceled){var o=this.paymentPlanApplicationDetailsController,n=this.paymentPlanApplicationDetailsController.get("paymentPlanDtlsModel");if(null!=n&&void 0!=n&&(Ember.isEmpty(n.iccCustomerNumber)||"NA"==n.iccCustomerNumber||(t=n.iccCustomerNumber)),Ember.isEmpty(t))e.stop();else{e.settings.url=KomodoConfiguration.ibsApiUrl+o.get("loggedInCountryName")+"/uploaddownload/upload?customerNumber="+t+"&documentType=";var s=this.paymentPlanApplicationDetailsController.get("data");$(s.customerDocuments).each(function(t,o){if(o.get("documentName")===a.name){var n=o.get("documentType");void 0!==n&&null!==n&&""!==n||(Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.useCaseTitle"),"Please specify the document type",Komodo.Controls.MessageBoxOkButtons,this,"modelCustomerDocuments","danger"),e.stop(),e.uploadCanceled=!0)}}),!1===e.uploadCanceled&&$(s.customerDocuments).each(function(o,n){n.get("documentName")===a.name&&(e.settings.url=e.settings.url+n.get("documentType")+"&serialNumber="+t)})}}},UploadComplete:function(e,a){e.uploadCanceled=!1;var o=Komodo.Models.SaveDocument.create(),n=Komodo.canonicalFacadeFactory(o,["ListOfDocument"]),s=[];$(this.paymentPlanApplicationDetailsController.get("data.customerDocuments")).each(function(e,a){if("UPLOADED"!=a.uploadStatus){var o=Komodo.Models.Document.create();o.set("FileType",a.get("documentType")),o.set("DocumentURL",a.get("documentUrl"));var n=[],r=Komodo.Models.DocumentMetaData.create();r.set("DocumentMetaDataValueUri","CustomerId"),r.set("Value",t),n.pushObject(r);var i=Komodo.Models.DocumentMetaData.create();i.set("DocumentMetaDataValueUri","DocumentType"),i.set("Value",a.get("documentType")),n.pushObject(i);var l=Komodo.Models.DocumentMetaData.create();l.set("DocumentMetaDataValueUri","DocumentSerial"),l.set("Value",t),n.pushObject(l),o.set("ListOfDocumentMetaData",n),s.pushObject(o)}}),o.set("Country",this.paymentPlanApplicationDetailsController.get("country")),n.set("ListOfDocument",s),Komodo.Services.CustomerService.publishCustomerEvent(this.paymentPlanApplicationDetailsController,o,"SaveCustomerDocumentEvent","v2",!1);var r=Komodo.Services.uiService.getController("paymentPlanApplicationDetails");return"uploadfiles"==r.saveApplicationOrAhvOveride?(r.saveApplicationOrAhvOveride="",void r.checkUploadedAhvDocuments()):"saveappdetails"==r.saveApplicationOrAhvOveride?(r.saveApplicationOrAhvOveride="",void r.savedppapplication()):void 0}}});a.paymentPlanApplicationDetailsController=this.get("context"),this.get("context.data").set("fileUploader",a),a.uploadCanceled=!1,a.changeFileStatus=this.fileUploadStatus,a.init();var o=new plupload.Uploader({runtimes:"html5,flash,silverlight,html4",browse_button:"ahvPickfiles",url:KomodoConfiguration.ibsApiUrl+e.get("country")+"/uploaddownload/upload",headers:{"komodo-sessiontoken":Komodo.Services.securityService.get("sessionToken")},filters:{max_file_size:"10mb",mime_types:[{title:"Image files",extensions:"jpg,gif,png,jpeg,JPG,GIF,PNG,JPEG"},{title:"Adobe And Document Files",extensions:"pdf"}]},init:{PostInit:function(){$("#filelist > tbody").html(""),$("input:file").parent().width(0).height(0).css("visibility","hidden"),$("#ahvUploadfiles").click(function(){return $(o.files).each(function(e,t){2!==t.status&&4!==t.status||(t.status=1)}),o.uploadCanceled=!1,o.start(),!1})},FilesAdded:function(e,t){var a=(this.paymentPlanApplicationDetailsController,this.paymentPlanApplicationDetailsController.get("ahvData"));plupload.each(t,function(t){var o=!1;if($(a.customerDocuments).each(function(e,n){n.get("documentName")===t.name&&(o=!0,a.set("enableDocGrid",!0))}),o)e.removeFile(t);else{a.set("enableDocGrid",!0);var n=Komodo.Models.AHVDocumentModel.create();n.set("documentName",t.name),n.set("documentSize",plupload.formatSize(t.size)),n.set("uploadPercentage",""),n.set("documentTypes",a.get("documentTypes")),n.set("documentType",void 0),n.set("documentSerialNumber",void 0),n.set("uploadStatus","QUEUED"),a.get("customerDocuments").pushObject(n)}})},UploadProgress:function(e,t){!1===e.uploadCanceled&&e.changeFileStatus(this.paymentPlanApplicationDetailsController.get("ahvData"),t)},FileUploaded:function(e,t,a){var o=JSON.parse(a.response)[0];e.changeFileStatus(this.paymentPlanApplicationDetailsController.get("ahvData"),t,o)},Error:function(e,t){Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.useCaseTitle"),t.code+" : "+t.message+(void 0===t.response||null===t.response?"":t.response),Komodo.Controls.MessageBoxOkButtons,this,"modelCustomerDocuments","danger"),e.uploadCanceled=!0,e.changeFileStatus(this.paymentPlanApplicationDetailsController.get("ahvData"),t.file)},BeforeUpload:function(e,a){if(!1===e.uploadCanceled){var o=this.paymentPlanApplicationDetailsController,n=this.paymentPlanApplicationDetailsController.get("paymentPlanDtlsModel");if(null!=n&&void 0!=n&&(Ember.isEmpty(n.iccCustomerNumber)||"NA"==n.iccCustomerNumber||(t=n.iccCustomerNumber)),Ember.isEmpty(t))e.stop();else{e.settings.url=KomodoConfiguration.ibsApiUrl+o.get("loggedInCountryName")+"/uploaddownload/upload?customerNumber="+t+"&documentType=";var s=this.paymentPlanApplicationDetailsController.get("ahvData");$(s.customerDocuments).each(function(t,o){if(o.get("documentName")===a.name){var n=o.get("documentType");void 0!==n&&null!==n&&""!==n||(Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.useCaseTitle"),"Please specify the document type",Komodo.Controls.MessageBoxOkButtons,this,"modelCustomerDocuments","danger"),e.stop(),e.uploadCanceled=!0)}}),!1===e.uploadCanceled&&$(s.customerDocuments).each(function(o,n){n.get("documentName")===a.name&&(e.settings.url=e.settings.url+n.get("documentType")+"&serialNumber="+t)})}}},UploadComplete:function(e,a){e.uploadCanceled=!1;var o=Komodo.Models.SaveDocument.create(),n=Komodo.canonicalFacadeFactory(o,["ListOfDocument"]),s=[];$(this.paymentPlanApplicationDetailsController.get("ahvData.customerDocuments")).each(function(e,a){if("UPLOADED"!=a.uploadStatus){var o=Komodo.Models.Document.create();o.set("FileType",a.get("documentType")),o.set("DocumentURL",a.get("documentUrl"));var n=[],r=Komodo.Models.DocumentMetaData.create();r.set("DocumentMetaDataValueUri","CustomerId"),r.set("Value",t),n.pushObject(r);var i=Komodo.Models.DocumentMetaData.create();i.set("DocumentMetaDataValueUri","DocumentType"),i.set("Value",a.get("documentType")),n.pushObject(i);var l=Komodo.Models.DocumentMetaData.create();l.set("DocumentMetaDataValueUri","DocumentSerial"),l.set("Value",t),n.pushObject(l),o.set("ListOfDocumentMetaData",n),s.pushObject(o)}}),o.set("Country",this.paymentPlanApplicationDetailsController.get("country")),n.set("ListOfDocument",s),Komodo.Services.CustomerService.publishCustomerEvent(this.paymentPlanApplicationDetailsController,o,"SaveCustomerDocumentEvent","v2",!1)}}});o.paymentPlanApplicationDetailsController=this.get("context"),this.get("context.ahvData").set("fileUploader",o),o.uploadCanceled=!1,o.changeFileStatus=this.fileUploadStatus,o.init()},messageFailureMessageEventReceived:function(e){var t=this.get("controller"),a="",o="";void 0!==e.ResponseMessage.Payload&&void 0!==e.ResponseMessage.Payload.ListOfErrorDetails&&$(e.ResponseMessage.Payload.ListOfErrorDetails).each(function(e,t){a+=t.ErrorDescription,o=t.ErrorCode}),""!==a&&"null"!==a&&void 0!==a||(a=kl.value(t._localeBase+"dccClaims.technicalError")),Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"dccClaims.title"),a,Komodo.Controls.MessageBoxOkButtons,t,"modelPayment","danger")},fileUploadStatus:function(e,t,a){$(e.customerDocuments).each(function(e,o){o.get("documentName")===t.name&&(o.set("uploadPercentage",t.percent+" %"),2===t.status?o.set("uploadStatus","UPLOADING"):4===t.status?(o.set("uploadStatus","FAILED"),o.set("uploadPercentage","0 %")):5===t.status&&(o.set("uploadStatus","DONE"),o.set("documentUrl",a),o.set("isDocumentTypeDisable",!0),o.set("isAlready",!0)))})}}),Komodo.Application.PaymentPlanDetailsController=Komodo.UI.Controller.extend({_currentCustomerNumber:void 0,_statusResponses:Ember.A(),_showResults:!1,_showDataEntry:!0,_showProcessing:!1,init:function(){this._super(),this.requiresDependency("_uiService",{singleton:Komodo.Services.uiService}),this.requiresDependency("_komodoConfiguration",{singleton:KomodoConfiguration}),this.requiresDependency("_localizationService",{singleton:Komodo.Services.localizationService}),this.requiresDependency("_customerProfileService",{singleton:Komodo.Services.customerProfileService}),this.requiresDependency("_busyService",{singleton:Komodo.Services.busyService}),this.requiresDependency("_queryService",{singleton:Komodo.Services.queryService}),this.requiresDependency("_paymentPlanService",{singleton:Komodo.Services.paymentPlanService}),this.requiresDependency("_dateTimeFormatterService",{singleton:Komodo.Services.dateTimeFormatterService}),this.requiresDependency("_eventAggregatorService",{singleton:Komodo.Services.eventAggregator}),this.requiresDependency("_navigationService",{singleton:Komodo.Services.navigationService})},start:function(){this._super(),this.registerModel("data",Komodo.Models.PaymentPlanDetailsModel),this.set("_currentCustomerNumber",this.getCustomerProfileService().get("personalDetails.customerNo"));var e=this.getPaymentPlanService().get("_invoiceInstalmentPlan"),t=this;this.set("_showResults",!1),this.set("_showDataEntry",!0),this.set("_showProcessing",!1),this.get("data.instalmentPlanDetails").clear(),this.set("_selectedCountry",this.getQueryService().getSelectedCountryId());var a=this.getPaymentPlanService().get("_selectedPaymentPlanId");e.filterBy("Id",a).forEach(function(e){t.set("data.planId",e.Id),t.set("data.accountNumber",e.FinancialAccountId),t.set("data.loanLedgerAccount",e.LoanLedgerAccountId),t.set("data.termLedgerAccount",e.TermLedgerAccountId),t.set("data.totalAmount",e.TotalAmountDue),t.set("data.numberOfInstalments",e.NumberOfInstallments),t.set("data.unpaidBalance",e.RemainingAmountDue),t.set("data.startDate",e.StartDate),t.set("data.CanCancelPlan",e.CanCancelPlan),e.InstallmentDetails.forEach(function(e){t.get("data.instalmentPlanDetails").pushObject({Amount:e.Amount.toFixed(2),ChargeTransactionId:e.ChargeTransactionId,DueDate:t.getDateTimeFormatterService().convertDateFromXsdToSystemDate(e.DueDate),Extended:e.extended,FinancialAccountId:e.FinancialAccountId,Id:e.Id,PaidAmount:e.PaidAmount.toFixed(2),Status:e.Status})})})},stop:function(){this._super()},getKomodoConfiguration:function(){return this.get("_komodoConfiguration")},getLocalizationService:function(){return this.get("_localizationService")},getCustomerProfileService:function(){return this.get("_customerProfileService")},getCustomerNumber:function(){return this.get("_currentCustomerNumber")},getBusyService:function(){return this.get("_busyService")},getQueryService:function(){return this.get("_queryService")},getPaymentPlanService:function(){return this.get("_paymentPlanService")},getDateTimeFormatterService:function(){return this.get("_dateTimeFormatterService")},getEventAggregatorService:function(){return this.get("_eventAggregatorService")},getNavigationService:function(){return this.get("_navigationService")},getUIService:function(){return this.get("_uiService")}}),Komodo.Application.AccountController=Komodo.UI.Controller.extend({localeAccountlInformationTab:"locale.manageaccount:accountInformationTab.",localelinkText:"locale.manageaccount:linkText.",localeRefund:"locale.manageaccount:refund.",isShowPager:!0,isSearchInProgress:!1,Timeout:void 0,isShowSmartcardColumn:!0,showPaymentGroup:!1,finishLoad:!1,enableRefunds:!1,disableRefundsButton:!1,customerNumber:void 0,init:function(){this.set("customerClassCommercialProformaInvoice",GetClarityConstants("ManageAccountConstants","customerTypesConstants.customerTypesConstants.customerClassCommercial").toString()),this.accountDescriptionlst=[],this.accountDescriptions=[],this.statuslst=[],this.statuses=[],this.sts="",this.totalDue="",this.accountDescription="",this.set("statusFilter",""),Komodo.log("Constructing Manage Account Controller"),this.set("accountsGridTemp",[]),this.set("accounGridFilter",[]),this.set("processVersion","v1.1"),this.set("processName","Manage Account"),this.set("isShowSmartcardColumn",!0),_virtualPagerPageContent=Ember.A(),this.set("isAccountExist",!1),this.set("isGridDataAvailable",!1),this.subscribeFinancialAccountsRetrievedReceived(),this.subscribeFinancialAccountsErrorReceived(),this.pageSize=KomodoConfiguration.financialAcountsCount,this.pageNumber=1,this.accountStatusKey=0,this.accountDescrpkey="All",this.totalAccounts=0,this.accountsListCache=[],this.accountsSearchInfoCache=[],this._super()},start:function(){var e=this;e.DataBinded=!0,e.set("loadOnce",0),e.set("finishLoad",!1),e.set("totalAccounts",0),e.set("isShowPager",!0),e.set("isSearchInProgress",!1),e.accountStatusKey=0,e.accountDescrpkey="All",e.pageNumber=1,e.registerModel("customerProfileModel",Komodo.Models.CustomerProfileModel),e.set("manageAccountModel",Komodo.Models.ManageAccountModel.create()),Komodo.Services.navigationService.activateGroup(Komodo.NavigationGroupNames.ManageAccount);var t=Komodo.Services.ProductAndServiceMaintenanceHelper.create();if(!t.isCustomerIdIsAvailableToRetriveData())return void Komodo.Controls.MessageBoxController.show(kl.value(this.localeAccountlInformationTab+"custNotFoundHeader"),kl.value(this.localeAccountlInformationTab+"custNotFoundMessage"));var a=t.getCustomerIdToRetrieveData(),o=Komodo.Application.ManageAccountSharedObjectController.create();e.set("customerNumber",a),e.setAllDescriptions(),e.setAllStatus(),o.retrieveFinancialAccounts(a),Komodo.Services.featureToggleService.isEnabled("ManageAccount","HideSmartcardColumn").done(function(t){e.set("isShowSmartcardColumn",!0!==t)}).fail(function(e){Komodo.Services.error("Error while checking feature toggle [ManageAccount.HideSmartcardColumn]. Error Details:"+e)}),Komodo.Services.featureToggleService.isEnabled("ManageAccount","Refunds").done(function(t){t?(e.set("enableRefunds",t),e.retrieveRefundRequestsInProgress(a)):e.set("enableRefunds",!1)}).fail(function(){Komodo.UI.error("[ERROR] : could not retrieve ManageAccount.Refunds featureToggle")}),e.set("finishLoad",!0),"1"==Komodo.Services.customerProfileService.personalDetails.customerClass||"9"==Komodo.Services.customerProfileService.personalDetails.customerClass||"4"==Komodo.Services.customerProfileService.personalDetails.customerClass?e.set("showPaymentGroup",!0):e.set("showPaymentGroup",!1),e.isFirstSearch=!0,e.searchForAccounts(!1),e._super()},getAccountController:function(){return Komodo.Services.uiService.getController("account")},subscribeFinancialAccountsRetrievedReceived:function(){var e=this;Komodo.Services.eventAggregator.subscribe("FinancialAccountsRetrievedReceived",function(){e.getAccountController()})},subscribeFinancialAccountsErrorReceived:function(){var e=this;Komodo.Services.eventAggregator.subscribe("FinancialAccountsErrorReceived",function(){var t=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),a=t.getCustomerIdToRetrieveData();if(Komodo.Services.manageAccountService.financialAccountsErrorReceived.responseJSON!=kl.value(e.localeAccountlInformationTab+"financialAccountNotFound",{customerId:a})){var o=e.getAccountController();o&&(this.set("accountsGridTemp",[]),e.set("isAccountExist",!1),e.set("isGridDataAvailable",!0))}else{var o=e.getAccountController();o&&(e.set("isAccountExist",!0),e.set("isGridDataAvailable",!1))}})},setGridData:function(e){var t=this;this.customerProfileModel.set("accountsGrid",Ember.A()),
this.set("accountsGridTemp",Ember.A());var a;if(e){var o=Komodo.Services.ProductAndServiceMaintenanceHelper.create();if(null!=(a=o.createArrayForSingleElement(e.ListOfAccount.Account))){for(var n=0;n<a.length;n++)t.bindData(a[n]);t.getSortedAccountData()}}0===t.get("accountsGridTemp").length?(t.set("isAccountExist",!0),t.set("isGridDataAvailable",!1)):(t.set("isAccountExist",!1),t.set("isGridDataAvailable",!0)),t.set("accountsGridTemp1",[]),$.each(t.get("accountsGridTemp"),function(e,o){$.each(a,function(e,a){t.get("enableRefunds")&&t.checkIfRefundRequestIsInProgress(o.accountNo),a.UID==o.accountNo&&(a.Balance.Value>=-25?t.set("isVisible",!1):t.set("isVisible",!0),t.get("accountsGridTemp1").addObject(Ember.Object.create({accountNo:o.accountNo,accountDescription:o.accountDescription,smartcardno:o.smartcardno,status:o.status,methodofpayment:o.methodofpayment,overdue:o.overdue,name:o.name,isVisible:t.get("isVisible"),invoiceProfileDay:a.InvoiceProfileDay,invoiceDay:a.InvoiceDay,ahvStatus:o.AHVStatus,disableRefundButton:t.get("disableRefundsButton"),defaultAccount:a.IsDefault})))})}),t.set("accountsGridTemp",[]);var s=t.get("accountsGridTemp1").sort(function(e,t){return e.accountNo-t.accountNo});t.set("showAccountsData",!0),t.set("accountsGridTemp",s),t.customerProfileModel.set("accountsGrid",s),t.set("isSearchInProgress",!1)},stop:function(){this.set("isShowPager",!1),this.set("accountsGridTemp",[]),this.customerProfileModel.set("accountsGrid",[]),this.set("accountsGridTemp1",[]),this.accountsListCache=[],this.accountsSearchInfoCache=[],this._super()},bindData:function(e){var t=Komodo.Application.CustomerProfileMapper.create(),a=t.mapAccountInformation(e);null!=a&&this.get("accountsGridTemp").push(a)},getSortedAccountData:function(){var e=this.get("accountsGridTemp").filter(function(e){return e.status.toUpperCase()==="open".toUpperCase()}),t=this.get("accountsGridTemp").filter(function(e){return e.status.toUpperCase()!=="open".toUpperCase()});this.set("accountsGridTemp",[]),this.get("accountsGridTemp").addObjects(e),this.get("accountsGridTemp").addObjects(t)},setAllDescriptions:function(){this.set("accountDescriptionlst",[]),this.set("accountDescriptions",[]);var e=0,t=0,o=Komodo.Services.customerProfileService.currentFinancialAccounts;if(o){if(o.ResponseMessage&&o.ResponseMessage.Payload&&o.ResponseMessage.Payload.ListOfAccount&&o.ResponseMessage.Payload.ListOfAccount.Account){var n=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),s=n.createArrayForSingleElement(o.ResponseMessage.Payload.ListOfAccount.Account);if(null!=s)for(var r=0;r<s.length;r++)if(t=0,a={CanonicalKey:s[r].Type,AccountTypeDescription:this.getAccountTypeText(s[r].Type)},0==e)this.accountDescriptions.push(a),e++;else{for(var i=0;i<e;i++)a.AccountTypeDescription==this.accountDescriptions[i].AccountTypeDescription&&t++;0==t&&(this.accountDescriptions.push(a),e++)}}}this.set("accountDescriptionlst",this.accountDescriptions)},setAllStatus:function(){this.set("statuslst",[]),this.set("statuses",[]);var e=0,t=0,o=Komodo.Services.customerProfileService.currentFinancialAccounts;if(o){if(o.ResponseMessage&&o.ResponseMessage.Payload&&o.ResponseMessage.Payload.ListOfAccount&&o.ResponseMessage.Payload.ListOfAccount.Account){var n=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),s=n.createArrayForSingleElement(o.ResponseMessage.Payload.ListOfAccount.Account);if(null!=s)for(var r=0;r<s.length;r++)if(t=0,a={key:s[r].Status,value:this.getStatusText(s[r].Status)},0==e)this.statuses.push(a),e++;else{for(var i=0;i<e;i++)a.value==this.statuses[i].value&&t++;0==t&&(this.statuses.push(a),e++)}}}this.set("statuslst",this.statuses)},getStatusText:function(e){var t=Komodo.Services.customerProfileService.get("accountStatus");if(t&&null!=e)for(var a=0;a<t.length;a++)if(t[a].key==e)return t[a].value;return null},getStatusTextFilter:function(e){var t=this.get("statuses");if(t)for(var a=0;a<t.length;a++)if(t[a].key==e)return t[a].value;return null},getAccountTypeText:function(e){var t=Komodo.Services.customerProfileService.get("accountType");if(t&&null!=e)for(var a=t.AccountTypes.AccountType,o=0;o<a.length;o++)if(a[o].CanonicalKey==e)return a[o].AccountTypeDescription;return null},getAccountTypeTextFilter:function(e){var t=this.get("accountDescriptions");if(t)for(var a=0;a<t.length;a++)if(t[a].CanonicalKey==e)return t[a].AccountTypeDescription;return null},accountInfoExists:function(e){var t=this.accountsSearchInfoCache;for(i=0;i<t.length;i++)if(t[i].customerNumber==e.customerNumber&&t[i].pageSize==e.pageSize&&t[i].pageNumber==e.pageNumber&&t[i].accountType==e.accountType&&t[i].accountStatus==e.accountStatus)return!0;return!1},filterGrid:function(e){var t=this;if(this.DataBinded=!0,e)if(e.status?t.accountStatusKey=t.manageAccountModel.status:t.accountStatusKey=0,e.accountDescription)switch(t.accountDescrpkey=t.getAccountTypeText(e.accountDescription),t.accountDescrpkey){case"DStv Residential":t.accountDescrpkey="DStvRes";break;case"Holiday Home":t.accountDescrpkey="HolidayHome";break;case"Payment Plan":t.accountDescrpkey="PaymentPlan";break;case"Pre-paid":t.accountDescrpkey="Prepaid";break;case"Cash Sale":t.accountDescrpkey="CashSale";break;case"GOtv Residential":t.accountDescrpkey="GOtvRes";break;case"Digital Decoder Care Contract":t.accountDescrpkey="DDCC";break;case"DStv Commercial":t.accountDescrpkey="DStvComm"}else t.accountDescrpkey="All";var a={customerNumber:t.get("customerNumber"),pageSize:t.pageSize,pageNumber:t.pageNumber,accountType:t.accountDescrpkey,accountStatus:t.accountStatusKey};if(this.accountInfoExists(a)){var o=t.accountsSearchInfoCache;for(i=0;i<o.length;i++){var n=o[i];if(t.accountsSearchInfoCache[i].customerNumber==a.customerNumber&&n.pageSize==a.pageSize&&n.pageNumber==a.pageNumber&&n.accountType==a.accountType&&n.accountStatus==a.accountStatus){var s={ListOfAccount:{Account:t.accountsListCache[i]},PagingDetail:{TotalRecordCount:t.totalAccounts}};t.setGridData(s)}}}else t.accountsSearchInfoCache.addObject(a),t.customerProfileModel.set("accountsGrid",Ember.A()),t.set("accountsGridTemp",[]),Komodo.Services.queryService.getJSON("/AccountProfile/Get/"+t.get("customerNumber")+"?pageSize="+t.pageSize+"&pageNumber="+t.pageNumber+"&accountType="+t.accountDescrpkey+"&accountStatus="+t.accountStatusKey).done(function(e){var a;if(e){var o=Komodo.Services.ProductAndServiceMaintenanceHelper.create();if(a=null==e.ListOfAccount?Ember.A():o.createArrayForSingleElement(e.ListOfAccount.Account),t.accountsListCache.addObject(a),null!=a){for(var n=0;n<a.length;n++)t.bindData(a[n]);t.getSortedAccountData()}}0===t.get("accountsGridTemp").length?(t.set("isAccountExist",!0),t.set("isGridDataAvailable",!0)):(t.set("isAccountExist",!1),t.set("isGridDataAvailable",!0)),t.set("accountsGridTemp1",[]),$.each(t.get("accountsGridTemp"),function(e,o){t.get("enableRefunds")&&t.checkIfRefundRequestIsInProgress(o.accountNo),$.each(a,function(e,a){a.UID==o.accountNo&&(a.Balance.Value>=-25?t.set("isVisible",!1):t.set("isVisible",!0),t.get("accountsGridTemp1").addObject(Ember.Object.create({accountNo:o.accountNo,accountDescription:o.accountDescription,smartcardno:o.smartcardno,status:o.status,methodofpayment:o.methodofpayment,overdue:o.overdue,name:o.name,isVisible:t.get("isVisible"),invoiceProfileDay:a.InvoiceProfileDay,invoiceDay:a.InvoiceDay,ahvStatus:o.AHVStatus,disableRefundButton:t.get("disableRefundsButton"),defaultAccount:a.IsDefault})))})}),t.get("accountsGridTemp",[]);var s=t.get("accountsGridTemp1").sort(function(e,t){return e.accountNo-t.accountNo});t.set("showAccountsData",!0),t.set("accountsGridTemp",s),t.customerProfileModel.set("accountsGrid",s),t.set("isSearchInProgress",!1),t.set("totalAccounts",null==e.PagingDetail?0:e.PagingDetail.TotalRecordCount)}).fail(function(e){t.set("isSearchInProgress",!1)})},retrieveRefundRequestsInProgress:function(e){var t=this;Komodo.Services.queryService.getJSON("Journal/GetPendingRefundRequestsByCustomerId?token=token&customerNumber="+e,{async:!1}).done(function(e){e.AccountNumbers.length>0&&null!=e.AccountNumbers[0]?t.set("PendingRefundRequests",e.AccountNumbers):t.set("PendingRefundRequests",void 0)}).error(function(e){var a=e.responseJSON.Message||e.responseJSON;Komodo.Controls.MessageBoxController.show(kl.value(t.localeRefund+"ajaxPendingRefundRequests"),a,Komodo.Controls.MessageBoxOkButtons,t,"message","warning")})},checkIfRefundRequestIsInProgress:function(e){var t=this,a=t.get("PendingRefundRequests");if(void 0!==a)for(var o=0;o<a.length;o++){if(parseInt(e)===parseInt(a[o].FINANCIALACCOUNTID)){t.set("disableRefundsButton",!0);break}t.set("disableRefundsButton",!1)}},isFirstSearch:!1,searchForAccounts:function(e){this.resetPagerData();var t=void 0;e&&(t={status:this.manageAccountModel.status,accountDescription:this.manageAccountModel.accountDescription}),this.get("isSearchInProgress")||(this.set("isSearchInProgress",!0),this.filterGrid(t))},actions:{EditPaymentDetail:function(e){var t=e.content.accountNo;Komodo.Services.eventAggregator.publish("PublishAccountNoToRedirectEditPaymentDetail",t)},ViewFinancialAccountInformation:function(e){var t=e.content.accountNo;Komodo.Services.eventAggregator.publish("PublishAccountNoToRedirectViewAccountInformation",t)},refund:function(e){var t=this.accountsListCache[0].findBy("IsDefault",!0).PaymentDetails;$.extend(t,{AHVStatus:this.accountsListCache[0].findBy("IsDefault",!0).PaymentDetail.AHVStatus,BankCode:this.accountsListCache[0].findBy("IsDefault",!0).PaymentDetail.BankName});var a=this.accountsListCache[0].findBy("Number",parseInt(e.content.accountNo)).Balance.Value;Komodo.Services.uiService.transitionTo("refundTransaction",{queryParams:{customerNumber:this.get("customerNumber"),accountNumber:e.content.accountNo,amount:a,customerClass:Komodo.Services.customerProfileService.personalDetails.customerClass,customerStatus:Komodo.Services.customerProfileService.personalDetails.customerStatus,paymentDetails:t}})},pageNavigate:function(e){if(this.isFirstSearch)return void(this.isFirstSearch=!1);this.pageNumber=e.pageNumber,this.set("isSearchInProgress",!0),this.filterGrid(),this.DataBinded=!0},actionSearchForAccounts:function(){this.isFirstSearch=!0,this.searchForAccounts(!0)}},resetPagerData:function(){this.pageNumber=1,this.totalAccounts=0,this.set("accountsGridTemp",[]),this.customerProfileModel.set("accountsGrid",[]),this.set("_virtualPagerPageContent",Ember.A()),this.set("accountsSearchInfoCache",[]),this.set("accountsListCache",[]),this.set("showAccountsData",!1)},showAccountsData:!0}),Komodo.Application.EditPaymentPlanController=Komodo.UI.Controller.extend({_currentCustomerNumber:void 0,_instalmentTerms:void 0,_selectedCountry:void 0,_loading:!0,_statusResponses:Ember.A(),_showResults:!1,_showDataEntry:!0,_showProcessing:!1,init:function(){this._super(),this.requiresDependency("_uiService",{singleton:Komodo.Services.uiService}),this.requiresDependency("_komodoConfiguration",{singleton:KomodoConfiguration}),this.requiresDependency("_localizationService",{singleton:Komodo.Services.localizationService}),this.requiresDependency("_securityService",{singleton:Komodo.Services.securityService}),this.requiresDependency("_customerProfileService",{singleton:Komodo.Services.customerProfileService}),this.requiresDependency("_busyService",{singleton:Komodo.Services.busyService}),this.requiresDependency("_queryService",{singleton:Komodo.Services.queryService}),this.requiresDependency("_paymentPlanService",{singleton:Komodo.Services.paymentPlanService}),this.requiresDependency("_dateTimeFormatterService",{singleton:Komodo.Services.dateTimeFormatterService})},start:function(){this._super(),this.registerModel("data",Komodo.Models.PaymentPlanDetailsModel),this.set("_showResults",!1),this.set("_showDataEntry",!0),this.set("_showProcessing",!1),this.set("_currentCustomerNumber",this.getCustomerProfileService().get("personalDetails.customerNo")),this.set("_selectedCountry",this.getQueryService().getSelectedCountryId());var e,t,a=this.getPaymentPlanService().get("_invoiceInstalmentPlan"),o=this,n=0;this.set("data.planId",a[0].Id),this.set("data.accountNumber",a[0].FinancialAccountId),this.set("data.loanLedgerAccount",a[0].LoanLedgerAccountId),this.set("data.termLedgerAccount",a[0].TermLedgerAccountId),this.set("data.totalAmount",a[0].TotalAmountDue),this.set("data.unpaidBalance",a[0].RemainingAmountDue),this.set("data.startDate",a[0].StartDate),this.get("data.instalmentPlanDetails").clear(),this._clearInstalmentAmountValidators(),a[0].InstallmentDetails.sortBy("Id").forEach(function(a){var s=o.disableInstalment(a.DueDate,a.Status);s&&n++,t=Ember.Object.create({Amount:a.Amount.toFixed(2),ChargeTransactionId:a.ChargeTransactionId,DueDate:o.getDateTimeFormatterService().convertDateFromXsdToSystemDate(a.DueDate),Extended:a.extended,FinancialAccountId:a.FinancialAccountId,Id:a.Id,PaidAmount:a.PaidAmount.toFixed(2),Status:a.Status,Disable:s}),e="instalmentAmountValidator_"+a.Id,0==s&&o.registerValidator(t,"Amount",{type:"number",isRequired:!0,limitValueToType:!0,displayName:o._localize("createPaymentPlan.instalmentAmount"),name:e}),t.set("validator",o.get("validators."+e)),o.get("data.instalmentPlanDetails").pushObject(t)});for(var s=1;s<=KomodoConfiguration.finance.paymentArrangementMaximumTerm;s++)this.get("data.instalmentTerms").pushObject({key:s,value:s});this.get("data.instalmentPlanDetails").length==n&&this.set("data.disableCalculate",!0),this.set("_instalmentTerms",this.get("data.numberOfInstalments")),this.set("_loading",!1),a[0].InstallmentDetails.filter(function(e){return"WaitingForFt"===e.Status}).length>0&&this.set(this.get("data.CanCancelPlan"),!1)},stop:function(){this._super(),this.set("_loading",!0)},getUIService:function(){return this.get("_uiService")},getKomodoConfiguration:function(){return this.get("_komodoConfiguration")},getLocalizationService:function(){return this.get("_localizationService")},getSecurityService:function(){return this.get("_securityService")},getCustomerProfileService:function(){return this.get("_customerProfileService")},getCustomerNumber:function(){return this.get("_currentCustomerNumber")},getBusyService:function(){return this.get("_busyService")},getQueryService:function(){return this.get("_queryService")},getPaymentPlanService:function(){return this.get("_paymentPlanService")},getDateTimeFormatterService:function(){return this.get("_dateTimeFormatterService")},_localize:function(e){return this.getLocalizationService().value("locale.manageAccount.paymentPlan:"+e)},_clearInstalmentAmountValidators:function(){for(var e=1;this.get("validators")["instalmentAmountValidator_"+e];)delete this.get("validators")["instalmentAmountValidator_"+e],e+=1},disableInstalment:function(e,t){e=new Date(e);var a=new Date;a.setDate(e.getDate()-KomodoConfiguration.finance.IPDayTolerance);var o=new Date;return"unpaid"!=t.toLowerCase()||o>=a&&o<=e&&o.getMonth()==e.getMonth()&&o.getYear()==e.getYear()},actions:{saveChanges:function(){var e=this,t=[];this.set("_showResults",!0),this.set("_showDataEntry",!1),this.set("_showProcessing",!0),this.get("_statusResponses").clear(),this.get("data.instalmentPlanDetails").forEach(function(a){if("unpaid"==a.Status.toLowerCase()){var o={DueDate:void 0,AmountDue:void 0};o.DueDate=e.getDateTimeFormatterService().convertDateFromSystemDateToEsbDate(a.DueDate),o.AmountDue=a.Amount,t.pushObject(o)}});var a={Country:this.get("_selectedCountry"),CustomerUID:this.get("_currentCustomerNumber"),InvoiceInstalmentPlanUID:this.get("data.planId"),InvoiceInstalments:{InvoiceInstalment:t}},o={eventName:"AmendInvoiceInstalmentPlan",eventVersion:"v1"};this.startNewProcess(),this.sendMessage(a,o).done(function(){Komodo.log("AmendInvoiceInstalmentPlanEvent() : AmendInvoiceInstalmentPlan event has been published")}).fail(function(e){Komodo.log("AmendInvoiceInstalmentPlanEvent() : AmendInvoiceInstalmentPlan event has failed"+e)})},cancelChanges:function(){this.set("data.disableCancelInstalment",!0),this.set("_loading",!0),this.start()},calculateInstalments:function(){var e,t=this,a=0,o=0,n=[];this._clearInstalmentAmountValidators(),this.get("data.instalmentPlanDetails").forEach(function(e){e.Disable?(o+=parseFloat(e.Amount),n.pushObject(e)):a+=parseFloat(+e.Amount)}),0!=+this.get("data.runningTotal")&&(a+=parseFloat(this.get("data.runningTotal"))),this.getPaymentPlanService().setMonthlyInstalments(a,this.get("_instalmentTerms")).forEach(function(a){var o,s;0==n.length?(o=t.get("data.instalmentPlanDetails")[0].DueDate,s=0):(o=n[n.length-1].DueDate,s=n[n.length-1].Id+1,o=moment(o,KomodoConfiguration.dateFormat).add(1,"months")),o=moment(o,KomodoConfiguration.dateFormat);var r=Ember.Object.create({Amount:a.amount.toFixed(2),Disable:!1,ChargeTransactionId:0,DueDate:o.format(KomodoConfiguration.dateFormat),Extended:void 0,FinancialAccountId:void 0,Id:s,PaidAmount:(0).toFixed(2),Status:"Unpaid"});e="instalmentAmountValidator_"+s,t.registerValidator(r,"Amount",{type:"number",isRequired:!0,limitValueToType:!0,displayName:t._localize("createPaymentPlan.instalmentAmount"),name:e}),r.set("validator",t.get("validators."+e)),n.pushObject(r)}),this.get("data.instalmentPlanDetails").clear(),this.set("data.instalmentPlanDetails",n)},cancelArrangement:function(){this.startNewProcess();var e=this,t={eventName:"CancelInvoiceInstalmentPlan",eventVersion:"v1"},a={Country:e.get("_selectedCountry"),CustomerUID:e.get("_currentCustomerNumber"),InvoiceInstalmentPlanUID:e.get("data.planId")};Komodo.Controls.MessageBoxController.show(this._localize("messages.cancelPaymentPlanTitle"),this._localize("messages.cancelPaymentPlanConfirmation"),Komodo.Controls.MessageBoxYesNoButtons,this,"cancelPlan","warning").response=function(o){"yes"==o&&(e.set("_showResults",!0),e.set("_showDataEntry",!1),e.set("_showProcessing",!0),e.get("_statusResponses").clear(),e.sendMessage(a,t).done(function(){Komodo.log("CancelInvoiceInstalmentPlanEvent() : CancelInvoiceInstalmentPlan event has been published")}).fail(function(e){Komodo.log("CancelInvoiceInstalmentPlanEvent() : CancelInvoiceInstalmentPlan event has failed: "+e)}))}}},instalmentSelectionChanged:function(){this.get("_loading")||null!=this.get("_instalmentTerms")&&this.set("data.disableCancelInstalment",!1)}.observes("_instalmentTerms"),instalmentAmountChanged:function(){if(!this.get("_loading")){var e=this,t=0,a=0,o=this.get("data.unpaidBalance").replace(/^\D+/g,""),n=!1;if(this.set("data.disableCancelInstalment",!1),void 0!=this.get("data.totalAmount")){this.get("data.instalmentPlanDetails").forEach(function(e){var o;e.Disable||a++,""==e.Amount||void 0==e.Amount||0==e.Amount?(o=0,n=!0):o=e.Amount,t+=parseFloat(o)});var s=this.get("data.totalAmount").replace(/^\D+/g,"")-t.toFixed(2);e.set("data.runningTotal",parseFloat(s).toFixed(2))}t.toFixed(2)!=o||n?this.set("data.disableSaveInstalment",!0):this.set("data.disableSaveInstalment",!1)}}.observes("data.instalmentPlanDetails.@each.Amount"),canCancelChangesToInstalmentPlan:function(){this.get("_loading")||this.set("data.disableCancelInstalment",!1)}.observes("data.instalmentPlanDetails"),canEditPlan:function(){return!!this.getSecurityService().hasPermission("clarity://payment-plan/edit")}.property(),_errorViewLayout:function(){this.set("_showProcessing",!1),this.set("_showResults",!0),this.set("_showDataEntry",!0)},messageReceived:function(e){Komodo.UI.log("[EditPaymentPlanController.messageReceived] : event name = "+e.ResponseMessage.EventName)},messageDeliveryFailure:function(e){Komodo.UI.warn("[EditPaymentPlanController.messageDeliveryFailure] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(this._localize("editPaymentPlan.editPaymentArrangement"),this._localize("messages.genericDeliveryFailureMessage"),Komodo.Controls.MessageBoxOkButtons,this,"genericDeliveryFailure","warning"),this._errorViewLayout()},messageFault:function(e){Komodo.UI.error("[EditPaymentPlanController.messageFault] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(this._localize("editPaymentPlan.editPaymentArrangement"),this._localize("messages.genericFaultMessage"),Komodo.Controls.MessageBoxOkButtons,this,"genericFault","danger"),this._errorViewLayout()},messageInvoiceInstalmentPlanAmendedReceived:function(e){var t=this;this.set("_showProcessing",!1),this.set("_processComplete",!0),Komodo.UI.log("[EditPaymentPlanController.messageInvoiceInstalmentPlanAmendedReceived]"+e.ResponseMessage.EventMetaData.Event.EventId),Komodo.Controls.MessageBoxController.show(this._localize("editPaymentPlan.editPaymentArrangement"),this._localize("messages.successfulMessage"),Komodo.Controls.MessageBoxOkButtons,this,"invoiceInstalmentPlanAmendedReceived","success").response=function(e){"ok"==e&&(t.startNewProcess(),t.getUIService().transitionTo("paymentPlan"))}},messageInvoiceInstalmentPlanAmendedDeliveryFailure:function(e){Komodo.UI.warn("[EditPaymentPlanController.messageInvoiceInstalmentPlanAmendedDeliveryFailure] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(this._localize("editPaymentPlan.editPaymentArrangement"),this._localize("messages.genericDeliveryFailureMessage"),Komodo.Controls.MessageBoxOkButtons,this,"paymentPlanDeliveryFailure","warning")},messageInvoiceInstalmentPlanAmendedFault:function(e){Komodo.UI.error("[EditPaymentPlanController.messageInvoiceInstalmentPlanAmendedFault] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(this._localize("editPaymentPlan.editPaymentArrangement"),this._localize("messages.genericFaultMessage"),Komodo.Controls.MessageBoxOkButtons,this,"paymentPlanFault","danger"),this._errorViewLayout()},messageFailureMessageEventReceived:function(e){Komodo.UI.warn("[EditPaymentPlanController.messageInvoiceInstalmentPlanAmendedDeliveryFailure] : messageId = "+e.messageId),this.get("_statusResponses").pushObject(Ember.Object.create({imageUrl:"Content/Images/cross.svg",status:this._localize("processStatusDescription.FailureMessageEvent")+" : "+e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription})),this._errorViewLayout()},messageNotifyProcessStatusChangedReceived:function(e){var t=e.ResponseMessage.Payload.Status,a=this;Komodo.UI.log("[EditPaymentPlanController.messageInvoiceInstalmentPlanAmendedReceived]"+e.ResponseMessage.EventMetaData.Event.EventId),this.get("_statusResponses").pushObject(Ember.Object.create({imageUrl:"Content/Images/"+("failure"!=t.toLowerCase()?"check":"cross")+".svg",status:this._localize("processStatusDescription."+t),dateChanged:moment(e.ResponseMessage.Payload.DateChanged).format("DD/MM/YYYY HH:mm:ss")})),"awaitingapproval"==t.toLowerCase()&&(this.set("_processComplete",!1),this.set("_showProcessing",!1),Komodo.Controls.MessageBoxController.show(this._localize("editPaymentPlan.editPaymentArrangement"),this._localize("messages.awaitingApprovalMessage"),Komodo.Controls.MessageBoxOkButtons,this,"invoiceInstalmentPlanAmendedReceived","success").response=function(e){"ok"==e&&a.getUIService().transitionTo("paymentPlan")}),"completed"==t.toLowerCase()&&(this.set("_showProcessing",!1),this.set("_processComplete",!0),Komodo.Controls.MessageBoxController.show(this._localize("editPaymentPlan.editPaymentArrangement"),this._localize("messages.successfulMessage"),Komodo.Controls.MessageBoxOkButtons,this,"invoiceInstalmentPlanAmendedReceived","success").response=function(e){"ok"==e&&(a.startNewProcess(),a.getUIService().transitionTo("paymentPlan"))})},messageCancelInvoiceInstalmentPlanReceived:function(e){Komodo.UI.log("[PaymentPlanDetailsController.messageCancelInvoiceInstalmentPlanReceived]"+e.ResponseMessage.EventMetaData.Event.EventId),Komodo.Controls.MessageBoxController.show(this._localize("editPaymentPlan.editPaymentArrangement"),this._localize("messages.cancelPaymentPlanSuccessful"),Komodo.Controls.MessageBoxOkButtons,this,"cancelInvoiceInstalmentPlanReceived","success"),this._errorViewLayout(),this.startNewProcess()},messageCancelInvoiceInstalmentPlanDeliveryFailure:function(e){Komodo.UI.warn("[PaymentPlanDetailsController.messageCancelInvoiceInstalmentPlanDeliveryFailure] : errorDescription = "+e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription),this.get("_statusResponses").pushObject(Ember.Object.create({imageUrl:"Content/Images/cross.svg",status:this._localize("processStatusDescription.FailureMessageEvent")+" : "+e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription})),this._errorViewLayout()},messageCancelInvoiceInstalmentPlanFault:function(e){Komodo.UI.error("[PaymentPlanDetailsController.messageCancelInvoiceInstalmentPlanFault] : errorDescription = "+e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription),this.get("_statusResponses").pushObject(Ember.Object.create({imageUrl:"Content/Images/cross.svg",status:this._localize("processStatusDescription.FailureMessageEvent")+" : "+e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription})),this._errorViewLayout()}}),Komodo.Application.ViewAccountInformationController=Komodo.UI.Controller.extend({localeBase:"locale.manageaccount:viewAccountInformation.",anniversaryUpdateMonthClaim:"clarity://viewAccountInformation/canUpdateAnniversary",init:function(){this._super(),Komodo.log("Constructing View Account Information controller"),this.set("processVersion","v1.1"),this.set("processName","View Account Information "),this.set("allAccounts",[]),this.set("smartcards",[]),this.set("accountNumber",""),this.set("accountNumberWithDescription",""),this.set("accountTypes",[]),this.set("banks",[]),this.set("bankBranches",[]),this.set("isAccountTypeLoaded",!1),this.set("isBankNameLoaded",!1),this.set("debitOrderDayLabel",""),this.set("accountStatus",[]),this.set("loggedInCountryId",void 0),this.set("loggedInCountryName",""),this.getLoggedIncountry(),this.set("isAccountDataAvailable",!1),this.set("noAccountExist",!0),this.set("debitOrderDaysArray",[]),this.set("selectedAccountInfo","")},start:function(){this.registerModel("viewAccountInformationModel",Komodo.Models.ViewAccountInformationModel),this.set("sharedObject",Komodo.Application.ManageAccountSharedObjectController.create());var e=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),t=e.isCustomerIdIsAvailableToRetriveData();if(this.set("selectedAccountDetails",""),this.set("anniversaryMonthsList",[]),this.set("canUpdateAnniversarypermission",!1),this.set("searchAnnualAggrementFlag",!1),this.getCDMData(),!t)return void Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"customerNotFound"),kl.value(this.localeBase+"selectCustomer"));this.setAnniversaryMonth(),this.setAccountTypes(),this.setDebitOrderDays(),this.setAccountStatus(),this.setBanks(),this.setAllAccounts(),Komodo.Services.securityService.hasPermission("clarity://customerModule/hideIdentityNumber")&&(Ember.isNone(Komodo.Services.customerProfileService.getCustomerDetails())||(Komodo.Services.customerProfileService.getCustomerDetails().ResponseMessage.Payload.CustomerDetail.PersonalDetail.IdentityDetailType===Komodo.CanonicalValues.IdentificationType.Passport&&this.viewAccountInformationModel.set("accountHoldersId",Komodo.UI.MaskInputs.maskValues("*",Komodo.MaskType.typepassport,this.viewAccountInformationModel.get("accountHoldersId"),Komodo.MaskCharacter.passport)),Komodo.Services.customerProfileService.getCustomerDetails().ResponseMessage.Payload.CustomerDetail.PersonalDetail.IdentityDetailType===Komodo.CanonicalValues.IdentificationType.ID&&this.viewAccountInformationModel.set("accountHoldersId",Komodo.UI.MaskInputs.maskValues("*",Komodo.MaskType.typeID,this.viewAccountInformationModel.get("accountHoldersId"),Komodo.MaskCharacter.id)))),this._super()},chargePeriods:[{title:"Monthly",value:"1"},{title:"Annually",value:"12"}],DefaultAnniversaryVal:{key:"0",value:"."},getCDMData:function(){var e=this,t=void 0,a=void 0,o=void 0;t=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),a=Komodo.Services.localizationService.getCurrentLanguage(),Komodo.Services.uiService.getController("application").get("_selectedCountryDescription"),Komodo.Services.cachedDataService.fetch("Location").done(function(n){var s=JSON.parse(n);e.set("countries",[]),$.each(s.Countries.Country,function(t,a){e.get("countries").addObject(a)}),Komodo.Services.cachedDataService.fetch("CountryISO").done(function(a){e.set("isoData",[]),e.set("isoData",a),e.isoData.forEach(function(e){t===e.value&&(o=e.key)}),void 0!=o&&e.set("loggedInCountryId",o)}).fail(function(){Komodo.log("[ERROR] : could not retrieve CountryISO domain = "+t+"/ qualifier = "+a)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve Location domain = "+t+"/ qualifier = "+a)})},collapsibleEditLinks:function(){return"zaf"===Komodo.Services.uiService.getController("application").get("_selectedCountryId")?[{href:"#/editPaymentDetails",title:kl.value(this.localeBase+"editLink")}]:[{href:"#/editPaymentDetailsAfrica",title:kl.value(this.localeBase+"editLink")}]}.property(),setAllAccounts:function(){var e=Komodo.Application.ManageAccountUtility.isAnyAccountExist();if(this.set("allAccounts",[]),e&&e.length>0&&this.get("isAccountTypeLoaded")){this.set("isAccountDataAvailable",!0),this.set("noAccountExist",!1);for(var t=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),a=t.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account),o=[],n="",s=0;s<a.length;s++)n=this.get("accountTypes").filter(function(e){if(e.CanonicalKey===a[s].Type)return e.AccountTypeDescription}),Komodo.Services.customerProfileService.personalDetails.customerClass===GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_COMMERCIAL")||Komodo.Services.customerProfileService.personalDetails.customerClass===GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_NATIONALDEAL")||Komodo.Services.customerProfileService.personalDetails.customerClass===GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_CSI")?a[s].Name?o.pushObject(a[s].UID+" - "+a[s].Name):o.pushObject(a[s].UID):n&&n.length>0?o.pushObject(a[s].UID+" - "+n[0].AccountTypeDescription):o.pushObject(a[s].UID);if(o=o.sort(function(e,t){return parseInt(e,10)>parseInt(t,10)}),this.set("allAccounts",o),this.get("toBeFixAccountNo")&&(this.get("viewAccountInformationModel").set("selectedAcccountId",this.get("toBeFixAccountNo")),this.set("toBeFixAccountNo",void 0)),this.get("accountNumber")){if(o&&o.length>0)for(var s=0;s<this.get("allAccounts").length;s++)if(tempAccountNoWithDesc=this.get("allAccounts")[s],tempAccountNoWithDesc&&(tempAccountArray=tempAccountNoWithDesc.split(" - "),tempAccountArray&&tempAccountArray.length>0&&tempAccountArray[0]===this.get("accountNumber"))){this.get("viewAccountInformationModel").set("selectedAcccountId",tempAccountNoWithDesc);break}}else this.get("allAccounts")&&this.get("allAccounts").length>0&&this.get("viewAccountInformationModel").set("selectedAcccountId",this.get("allAccounts")[0])}else this.set("isAccountDataAvailable",!1),this.set("noAccountExist",!0)},setBanks:function(){var e=this;Komodo.Services.cachedDataService.fetch("BankDetail").done(function(t){var a=JSON.parse(t);e.get("banks").clear(),$.each($.makeArray(a.Banks.Bank),function(t,a){e.get("banks").addObject(a)}),e.set("isBankNameLoaded",e.get("banks")&&e.get("banks").length>0),e.bindAccountInformation(void 0,!1)}).fail(function(){Komodo.log("[ERROR] : could not retrieve hierarchical example data")})},setBankName:function(e){var t=this;if(e)for(var a=t.get("banks"),o=this.get("viewAccountInformationModel"),n=0;n<a.length;n++)a[n].CanonicalKey===e&&o.set("bank",a[n].CanonicalValue)},setBranchName:function(e,t){var a=this;if(a.get("bankBranches").clear(),e){for(var o=a.get("banks"),n=0;n<o.length;n++)if(o[n].CanonicalKey===e&&o[n].Branches&&o[n].Branches.Branch)for(var s=$.makeArray(o[n].Branches.Branch),r=0;r<s.length;r++)a.get("bankBranches").addObject(s[r]);var i=this.get("viewAccountInformationModel");if(t){var l=a.get("bankBranches").filter(function(e){
return e.BranchCode.toUpperCase()===t});l.length&&l.length>0?i.set("branchName",l[0].CanonicalValue):i.set("branchName","")}}},setAccountTypes:function(){this.set("accountTypes",Komodo.Services.customerProfileService.get("accountType").AccountTypes.AccountType),this.set("isAccountTypeLoaded",this.get("accountTypes")&&this.get("accountTypes").length>0),this.bindAccountInformation(void 0,!1)},setAccountStatus:function(){var e=this;e.get("accountStatus").clear(),$.each(Komodo.Services.customerProfileService.get("accountStatus"),function(t,a){"NEW ACCOUNT"!=a.value.toUpperCase()&&e.get("accountStatus").addObject(a)})},setAnniversaryMonth:function(){var e=this;Komodo.Services.cachedDataService.fetch("AnniversaryMonth").done(function(t){e.get("anniversaryMonthsList").clear(),e.get("anniversaryMonthsList").addObject(e.DefaultAnniversaryVal),$.each($.makeArray(t),function(t,a){e.get("anniversaryMonthsList").addObject(a)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve Anniversary Month data")}),Komodo.Services.featureToggleService.isEnabled("ManageAccount","IsAnniversaryMonthUpdateAllowed").done(function(t){Ember.isEmpty(t.toString().toLowerCase())?e.set("disableAnniversaryMonth",!0):e.set("canUpdateAnniversarypermission",Komodo.Services.securityService.hasPermission(e.anniversaryUpdateMonthClaim))}).fail(function(){Komodo.log("[ERROR] : could not retrieve ManageAccount.AnniversaryMonth featureToggle")})},seperateAndGetAccountNumberFromDescription:function(e){if(e){var t=e.split(" - ");t&&t.length>0?(this.set("accountNumber",t[0]),this.set("accountNumberWithDescription",e)):(this.set("accountNumber",t),this.set("accountNumberWithDescription",t))}else this.get("accountNumber")||this.set("accountNumber",0),this.set("accountNumberWithDescription","");return this.get("accountNumber")},getSelectedAccount:function(){var e=this.get("accountNumber"),t=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),a=Komodo.Application.ManageAccountUtility.isAnyAccountExist();if(a&&a.length>0)var o=t.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account),n=o.filter(function(t){return t.UID.toUpperCase()===e.toUpperCase()});return n[0]||null},setDebitOrderDays:function(){var e=this;Komodo.Services.customerProfileService.personalDetails.customerClass===GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_COMMERCIAL")||Komodo.Services.customerProfileService.personalDetails.customerClass===GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_NATIONALDEAL")||Komodo.Services.customerProfileService.personalDetails.customerClass===GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_CSI")?Komodo.Services.cachedDataService.fetch("InvoiceDayCommercial").done(function(t){e.debitOrderDaysArray.length>0&&e.get("debitOrderDaysArray").clear(),$.each(t,function(t,a){a.key2=parseInt(a.key),e.get("debitOrderDaysArray").addObject(a)}),e.set("debitOrderDaysArray",e.get("debitOrderDaysArray").sortBy("key2"))}).fail(function(){Komodo.log("[ERROR] : could not retrieve debit order day from CDM")}):Komodo.Services.cachedDataService.fetch("InvoiceDay").done(function(t){e.debitOrderDaysArray.length>0&&e.get("debitOrderDaysArray").clear(),Komodo.Services.customerProfileService.personalDetails.customerClass==GetCustomerTypesConstants("CustomerTypesConstants","DEALER")&&"Agent"==Komodo.Services.customerProfileService.personalDetails.customerTypeText||t.removeObject(t.findBy("key","29")),$.each(t,function(t,a){a.key2=parseInt(a.key),e.get("debitOrderDaysArray").addObject(a)}),e.set("debitOrderDaysArray",e.get("debitOrderDaysArray").sortBy("key2"))}).fail(function(){Komodo.log("[ERROR] : could not retrieve debit order day from CDM")})},getDebitOrderDays:function(e){for(var t=this,a=0;a<t.get("debitOrderDaysArray").length;a++)if(t.get("debitOrderDaysArray")[a].key==e)return"29"==e?t.get("debitOrderDaysArray")[a].value:Komodo.Services.customerProfileService.personalDetails.customerClass===GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_COMMERCIAL")||Komodo.Services.customerProfileService.personalDetails.customerClass===GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_NATIONALDEAL")||Komodo.Services.customerProfileService.personalDetails.customerClass===GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_CSI")?t.get("debitOrderDaysArray")[a].value:t.get("debitOrderDaysArray")[a].value.substring(4)+t.getOrdinal(t.get("debitOrderDaysArray")[a].value.substring(4))},bindAccountInformation:function(e,t){var a=e||this.getSelectedBankAccountId(),o=this.get("accountNumberWithDescription");if(this.get("isAccountTypeLoaded")&&this.get("isBankNameLoaded")&&a){this.set("accountNumber",a);var n=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),s=(Komodo.Application.CustomerProfileMapper.create(),Komodo.Application.ManageAccountUtility.isAnyAccountExist());if(s&&s.length>0){var r=n.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account),i=this,l=r.filter(function(e){var t=i.get("accountNumber");return e.UID===t});i.set("selectedAccountInfo",l),l.length>0&&i.get("canUpdateAnniversarypermission")&&i.searchAnnualAggrement(l)?i.set("disableAnniversaryMonth",!1):i.set("disableAnniversaryMonth",!0),l.length>0&&l[0].AnniversaryMonth.toString()===Komodo.DefualtAnniversaryMonth.Default?i.set("viewAccountInformationModel.selectedAnniversaryMonth","0"):i.set("viewAccountInformationModel.selectedAnniversaryMonth",l[0].AnniversaryMonth.toString());var c=this.get("viewAccountInformationModel");if(t||c.set("selectedAcccountId",o),c.set("priceCurrency",l[0].AgeingDetails.CurrencyDesc),c.set("notYetDue",parseFloat(l[0].AgeingDetails.notYetDue).toFixed(2)),c.set("currentlyDue",parseFloat(l[0].AgeingDetails.due).toFixed(2)),c.set("days1To30",parseFloat(l[0].AgeingDetails.days1To30).toFixed(2)),c.set("days31To60",parseFloat(l[0].AgeingDetails.days31To60).toFixed(2)),c.set("days61To90",parseFloat(l[0].AgeingDetails.days61To90).toFixed(2)),c.set("days91To120",parseFloat(l[0].AgeingDetails.days91To120).toFixed(2)),c.set("days121To150",parseFloat(l[0].AgeingDetails.days121To150).toFixed(2)),c.set("days151To180",parseFloat(l[0].AgeingDetails.days151To180).toFixed(2)),c.set("over180Days",parseFloat(l[0].AgeingDetails.over180Days).toFixed(2)),c.set("totalAmountOverdue",parseFloat(l[0].AgeingDetails.totalAmountOverdue).toFixed(2)),c.set("totalAmountDue",parseFloat(l[0].AgeingDetails.totalFinancialAccountBalance).toFixed(2)),this.setChargePeriod(l),i.get("accountStatus"))var u=i.get("accountStatus").filter(function(e){return e.key.toUpperCase()===l[0].Status.toUpperCase()});if(u&&0!==u.length?c.set("status",this.verifyAndGetBlankValue(u[0].value.trim())):c.set("status","-"),u&&0!==u.length){var d=i.get("isStatusPiracyorBadDebts"),h=this.verifyAndGetBlankValue(u[0].value.trim());null==d&&void 0==d&&null==h&&void 0==h||(1!=d||"bad debt write-off"!=h.toLowerCase()&&"suspended"!=h.toLowerCase()&&"closed"!=h.toLowerCase()?c.set("statusOfAccount",!0):c.set("statusOfAccount",!1))}if(c.set("selectedAcccountStatus",this.verifyAndGetBlankValue(u[0].key.trim())),Komodo.Services.customerProfileService.get("mop")){var m=Komodo.Services.customerProfileService.get("mop").filter(function(e){return e.key.toUpperCase()===l[0].PaymentDetail.MethodOfPayment.toUpperCase()});if(m&&0!==m.length)if(this.verifyAndGetBlankValue(m[0].key.trim())==Komodo.MethodOfPayment.CASH)c.set("methodOfPayment",c.methodOfPayments[1].value),i.set("debitOrderDayLabel",kl.value(i.localeBase+"paymentDay")),c.set("bank","-"),c.set("maskedBankAccountnumber","-"),c.set("accountNumber","-"),c.set("branchName","-"),c.set("branchCode","-"),c.set("accountHoldersId","-"),c.set("accountHoldersName","-"),c.set("accountType","-"),c.set("isPaymentDetails",!0);else{if(l[0].PaymentDetail.MethodOfPayment==Komodo.MethodOfPayment.AHV_PENDING?(c.set("methodOfPayment","AHV Pending"),c.set("accountType",l[0].PaymentDetail.BankAccountType)):l[0].PaymentDetail.MethodOfPayment==Komodo.MethodOfPayment.PAYROLL?(c.set("methodOfPayment","Payroll"),c.set("accountType","-")):(c.set("methodOfPayment",c.methodOfPayments[0].value),c.set("accountType",this.verifyAndGetBlankValue(l[0].PaymentDetail.BankAccountType.trim()))),i.set("debitOrderDayLabel",kl.value(i.localeBase+"debitOrderDay")),l[0].PaymentDetail.BankName?this.setBankName(l[0].PaymentDetail.BankName):c.set("bank","-"),l[0].PaymentDetail.AccountNumber){var p=Komodo.UI.MaskInputs.maskValues("*",Komodo.MaskType.typeAccount,l[0].PaymentDetail.AccountNumber,Komodo.MaskCharacter.accountNumber);Ember.isBlank(p)?(c.set("maskedBankAccountnumber",l[0].PaymentDetail.AccountNumber),c.set("accountNumber",l[0].PaymentDetail.AccountNumber)):(c.set("accountNumber",l[0].PaymentDetail.AccountNumber),c.set("maskedBankAccountnumber",p))}else c.set("accountNumber","-"),c.set("maskedBankAccountnumber","-");l[0].PaymentDetail.BranchCode?c.set("branchCode",l[0].PaymentDetail.BranchCode):c.set("branchCode","-"),l[0].PaymentDetail.BankName&&l[0].PaymentDetail.BranchCode?this.setBranchName(l[0].PaymentDetail.BankName,l[0].PaymentDetail.BranchCode):(c.set("branchName","-"),c.set("branchCode","-")),l[0].PaymentDetail.PayerIDNumber?c.set("accountHoldersId",l[0].PaymentDetail.PayerIDNumber):c.set("accountHoldersId","-");var f="";l[0].PaymentDetail.PayerName&&(f+=l[0].PaymentDetail.PayerName+" "),l[0].PaymentDetail.PayerSurname&&(f+=l[0].PaymentDetail.PayerSurname),""!==f?c.set("accountHoldersName",f):c.set("accountHoldersName","-"),c.set("isPaymentDetails",!1)}else c.set("methodOfPayment","-"),c.set("bank","-"),c.set("maskedBankAccountnumber","-"),c.set("accountNumber","-"),c.set("branchName","-"),c.set("branchCode","-"),c.set("accountHoldersId","-"),c.set("accountHoldersName","-"),c.set("accountType","-")}if(i.get("accountTypes"))var g=i.get("accountTypes").filter(function(e){return e.CanonicalKey.toUpperCase()===l[0].Type.toUpperCase()});g&&0!==g.length?c.set("accountDescription",g[0].AccountTypeDescription):c.set("accountDescription","-");var v=this.getDebitOrderDays(l[0].PaymentDetail.DebitOrderDay);v?c.set("debitOrderDay",v):c.set("debitOrderDay","-"),this.setSmartCardsOfAnAccount()}}},getSelectedBankAccountId:function(){var e=void 0,t=this;return t.get("accountNumber")?e=t.get("accountNumber"):t.get("allAccounts")&&t.get("allAccounts").length>0?(t.set("accountNumber",t.seperateAndGetAccountNumberFromDescription(t.get("allAccounts")[0])),t.set("accountNumberWithDescription",t.get("allAccounts")[0]),e=t.get("accountNumber")):e=void 0,e},setSmartCardsOfAnAccount:function(){var e=this.getSelectedAccount();if(this.set("smartcards",Komodo.Application.ManageAccountUtility.getSmartCardsOrDeviceOfAnAccount(e)),0===this.get("smartcards").length){var t=this.get("smartcards");t.addObject("-"),this.set("smartcards",t)}},accountNumberChanged:function(){var e=this.seperateAndGetAccountNumberFromDescription(this.get("viewAccountInformationModel").get("selectedAcccountId"));e&&(this.bindAccountInformation(e,!0),Komodo.Services.eventAggregator.publish("PublishAccountNoToRedirectEditPaymentDetails",e))}.observes("viewAccountInformationModel.selectedAcccountId"),verifyAndGetBlankValue:function(e){return e||"-"},getOrdinal:function(e){var t;switch(t="th",e){case"1":case"21":case"31":t="st";break;case"2":case"22":t="nd";break;case"3":case"23":t="rd"}return t},bindAgeingInfoToModel:function(){var e=Komodo.Services.manageAccountService.ageingInfo,t=this.get("viewAccountInformationModel");void 0==e?Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"technicalError"),kl.value(this.localeBase+"errorRetrievingCases"),Komodo.Controls.MessageBoxOkButtons,this,"id5446674","danger"):(t.set("priceCurrency",e.CurrencyDesc),t.set("notYetDue",parseFloat(e.notYetDue).toFixed(2)),t.set("currentlyDue",parseFloat(e.due).toFixed(2)),t.set("days1To30",parseFloat(e.days1To30).toFixed(2)),t.set("days31To60",parseFloat(e.days31To60).toFixed(2)),t.set("days61To90",parseFloat(e.days61To90).toFixed(2)),t.set("days91To120",parseFloat(e.days91To120).toFixed(2)),t.set("days121To150",parseFloat(e.days121To150).toFixed(2)),t.set("days151To180",parseFloat(e.days151To180).toFixed(2)),t.set("over180Days",parseFloat(e.over180Days).toFixed(2)),t.set("totalAmountOverdue",parseFloat(e.totalAmountOverdue).toFixed(2)),t.set("totalAmountDue",parseFloat(e.totalFinancialAccountBalance).toFixed(2)))},updateAnniversary:function(){var e=this;e.showBlockingBusyIndicator();var t={AccountNumber:e.get("selectedAccountInfo")[0].UID,AnniversaryMonth:e.viewAccountInformationModel.selectedAnniversaryMonth,IsDefault:e.get("selectedAccountInfo")[0].IsDefault};Komodo.Services.queryService.postJSON("AccountProfile/UpdateAnniversaryMonth",{data:t}).done(function(t){e.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(e.localeBase+"successful"),kl.value(e.localeBase+"anniversaryMonthUpdateSuccessfully"),Komodo.Controls.MessageBoxOkButton,e,"id5446676","success"),Komodo.Services.uiService.transitionTo("account")}).error(function(t){e.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show("Error",t.responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,e,"id5446673","danger")})},setChargePeriod:function(e){var t=this.get("viewAccountInformationModel");if(e.length>0)if(e[0].ListOfAgreement&&e[0].ListOfAgreement.Agreement.length>0&&e[0].ListOfAgreement.Agreement[0].TermOfPayment&&""!=e[0].ListOfAgreement.Agreement[0].TermOfPayment){var a=$.grep(this.chargePeriods,function(t){return t.value===e[0].ListOfAgreement.Agreement[0].TermOfPayment});a&&a.length>0?t.set("chargePeriod",this.verifyAndGetBlankValue(a[0].title)):t.set("chargePeriod",this.verifyAndGetBlankValue(""))}else t.set("chargePeriod",this.verifyAndGetBlankValue(""));else t.set("chargePeriod",this.verifyAndGetBlankValue(""))},updateAccountStatus:function(){this.getNewProcessID(),this.showBlockingBusyIndicator();var e=Komodo.Models.UpdateFinancialAccountStatus.create(),t=Komodo.canonicalFacadeFactory(e,["Country","AccountUID","Status"]);this.loggedInCountryId&&this.get("accountNumber")&&this.viewAccountInformationModel.get("selectedAcccountStatus")&&(t.set("Country",this.loggedInCountryId),t.set("AccountUID",this.get("accountNumber")),t.set("Status",this.viewAccountInformationModel.selectedAcccountStatus),this.publishRequestOnBus(e,"UpdateFinancialAccountStatus","v1"))},publishRequestOnBus:function(e,t,a){var o=Komodo.Services.manageAccountService,n="Event Message for "+t+" ";o.publishEvent(this,e,t,a).done(function(){Komodo.log(n+" has been published successfully")}).fail(function(e,t){Komodo.log(n+" has been failed"),Komodo.Services.messagingService.removeMessages(t)})},messageFailureMessageEventReceived:function(e){this.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"technicalError"),e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButton,this,"id5446674","danger")},messageFinancialAccountStatusUpdatedReceived:function(e){if(Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"successful"),kl.value(this.localeBase+"statusUpdated"),Komodo.Controls.MessageBoxOkButton,this,"id5446676","success"),this.hideBusyIndicator(),e.ResponseMessage){var t=e.ResponseMessage.Payload.Account.UID,a=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),o=a.getCustomerIdToRetrieveData(),n=this.get("viewAccountInformationModel");if(t){Komodo.Application.SharedObjectController.create().retrieveFinancialAccounts(o);var s=this.get("accountStatus").filter(function(t){return t.key.toUpperCase()===e.ResponseMessage.Payload.Account.Status.toUpperCase()});s&&(n.set("status",this.verifyAndGetBlankValue(s[0].value)),n.set("statusOfAccount",!0))}}},cancelUpdateAccountStatus:function(){var e=this.get("viewAccountInformationModel.selectedAcccountId");this.set("accountNumber",e||this.getSelectedBankAccountId());var t=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),a=Komodo.Application.ManageAccountUtility.isAnyAccountExist();if(a&&a.length>0){var o=t.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account),n=this,s=o.filter(function(e){var t=n.get("accountNumber");return e.UID===t}),r=n.get("viewAccountInformationModel");if(Komodo.Services.customerProfileService.get("accountStatus"))var i=Komodo.Services.customerProfileService.get("accountStatus").filter(function(e){return e.key.toUpperCase()===s[0].Status.toUpperCase()});i&&0!==i.length&&r.set("selectedAcccountStatus",n.verifyAndGetBlankValue(i[0].key.trim()))}},getNewProcessID:function(){this.startNewProcess()},showBlockingBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,18e5,"blocking",this)},searchAnnualAggrement:function(e){for(var t=this,a=!1,o=e[0].ListOfAgreement.Agreement,n=0;n<o.length;n++)if(!Ember.isEmpty(o[n].ListOfHardware)&&!Ember.isEmpty(o[n].ListOfHardware.Hardware))for(var s=o[n].ListOfHardware.Hardware,r=0;r<s.length;r++)if(s[r].ListOfService.Service.length>=1)for(var i=s[r].ListOfService.Service,l=0;l<i.length;l++)i[l].ChargePeriod.toString()==Komodo.ChargePeriodCollection.ANNUALLY.value&&i[l].Status.toString()==Komodo.ProductStatusCollection.Active.value&&(t.set("searchAnnualAggrementFlag",!0),a=!0);return a},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},actions:{saveAccountStatus:function(e){this.updateAccountStatus()},cancelAction:function(){this.cancelUpdateAccountStatus()},updateAnniversaryMonth:function(){this.updateAnniversary()}},getLoggedIncountry:function(){var e=this;quoteCountry=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),language=Komodo.Services.localizationService.getCurrentLanguage(),e.set("loggedInCountryName",Komodo.Services.uiService.getController("application").get("_selectedCountryDescription"))},stop:function(){this.set("accountNumber",""),this.set("accountNumberWithDescription",""),this.set("allAccounts",[]),this.set("smartcards",[]),this.set("accountTypes",[]),this.set("banks",[]),this.set("bankBranches",[]),this.set("isAccountTypeLoaded",!1),this.set("isBankNameLoaded",!1),this.set("debitOrderDayLabel",""),this.set("selectedAccountInfo",""),this._super()},toBeFixAccountNo:void 0}),Komodo.Application.ProformaInvoiceController=Komodo.UI.Controller.extend({localeUpgradeOrDowngrade:"locale.manageviewing:upgradeOrDowngrade.",localeProformaInvoice:"locale.manageaccount:proformaInvoiceTab.",init:function(){this._super()},start:function(){var e=this;e.registerModel("proformaInvoiceModel",Komodo.Models.ProformaInvoiceModel),e.set("proformaInvoiceModel.xmlForTemplate",""),e.allAccounts=[],e.periodList=[],e.set("communicationType",""),e.set("customerNumber",void 0),e.set("vatAmount",void 0),e.set("ipDayForDate",void 0),e.set("ipMonthForDate",void 0),e.set("isCustomerValidForProforma",!1),e.set("isCommercialCustomer",!1),e.set("isResidentialCustomer",!1),e.set("proformaPdfUrl",void 0),e.set("isValidForDoubleTax",!1),e.set("isVatApplicable",!0),e.set("isAnnualCustomer",!1),e.set("showDiscount",!1),e.set("totalOfAllPrices",0),e.set("accountTypes",[]),e.set("basicAmountBeforeSelectingPeriod",void 0),e.set("isAccountTypeLoaded",!1),e.set("isAccountSelected",!1),e.set("allowExciseDuty",!1),e.set("hideDiscountRow",!1),e.set("isTvLevy",!1),e.set("tvLevyValue",0),e.set("tvLevyKey",""),e.getCustomerId(),e.getLoggedIncountry(),e.loadFeatureToggle(),e.isExciseDutyAllowed(),e.initializeProformaInvoiceConstants(),e.isCustomerValidForProformaInvoice(),e.isCustomerValidForVat(),e.isCustomerValidForDoubleTax(),e.bindPeriod(),e.loadCountries(),e.loadTitles(),e.registerValidators(),e.setAccountTypes(),e.setAllAccounts(),e._super()},stop:function(){var e=this;e.clearAll(),e._super()},loadFeatureToggle:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("ProformaInvoice","HideDiscount").done(function(t){e.set("hideDiscountRow",t)}).fail(function(e){Komodo.error("[ERROR] : could not retrieve HideDiscount domain = "+Komodo.Services.queryService.getSelectedCountryId()+"/ qualifier = "+language),Komodo.error("[ERROR] : "+e)}),Komodo.Services.featureToggleService.isEnabled("ProformaInvoice","IsTVLevyAllowed").done(function(t){e.set("isTvLevy",t)}).fail(function(e){Komodo.error("[ERROR] : could not retrieve IsTVLevyAllowed domain = "+Komodo.Services.queryService.getSelectedCountryId()+"/ qualifier = "+language),Komodo.error("[ERROR] : "+e)})},initializeProformaInvoiceConstants:function(){var e=this;Ember.isEmpty(GetClarityConstants("ManageAccountConstants","customerTypesConstants.customerTypesConstants.customerClassCommercial"))?e.set("customerClassCommercial",""):e.set("customerClassCommercial",GetClarityConstants("ManageAccountConstants","customerTypesConstants.customerTypesConstants.customerClassCommercial")[0]),Ember.isEmpty(GetClarityConstants("ManageAccountConstants","customerTypesConstants.customerTypesConstants.customerClassResidential"))?e.set("customerClassResidential",""):e.set("customerClassResidential",GetClarityConstants("ManageAccountConstants","customerTypesConstants.customerTypesConstants.customerClassResidential")[0]),Ember.isEmpty(GetClarityConstants("ManageAccountConstants","customerTypesConstants.templateForProformaInvoice.applicationName"))?e.set("templateForProformaInvoiceApplicationName",""):e.set("templateForProformaInvoiceApplicationName",GetClarityConstants("ManageAccountConstants","customerTypesConstants.templateForProformaInvoice.applicationName")[0]),Ember.isEmpty(GetClarityConstants("ManageAccountConstants","customerTypesConstants.templateForProformaInvoice.businessUnit"))?e.set("templateForProformaInvoiceBusinessUnit",""):e.set("templateForProformaInvoiceBusinessUnit",GetClarityConstants("ManageAccountConstants","customerTypesConstants.templateForProformaInvoice.businessUnit")[0]),Ember.isEmpty(GetClarityConstants("ManageAccountConstants","customerTypesConstants.templateForProformaInvoice.templateType"))?e.set("templateForProformaInvoiceTemplateType",""):e.set("templateForProformaInvoiceTemplateType",GetClarityConstants("ManageAccountConstants","customerTypesConstants.templateForProformaInvoice.templateType")[0]),Ember.isEmpty(GetClarityConstants("ManageAccountConstants","customerTypesConstants.templateForProformaInvoice.language"))?e.set("templateForProformaInvoiceLanguage",""):e.set("templateForProformaInvoiceLanguage",GetClarityConstants("ManageAccountConstants","customerTypesConstants.templateForProformaInvoice.language")[0]),Ember.isEmpty(GetClarityConstants("ManageAccountConstants","productsConstants.productsConstants.templateNameProformaCommertial"))?e.set("templateNameProformaCommertial",""):e.set("templateNameProformaCommertial",GetClarityConstants("ManageAccountConstants","productsConstants.productsConstants.templateNameProformaCommertial")[0]),Ember.isEmpty(GetClarityConstants("ManageAccountConstants","productsConstants.productsConstants.templateNameProformaResidential"))?e.set("templateNameProformaResidential",""):e.set("templateNameProformaResidential",GetClarityConstants("ManageAccountConstants","productsConstants.productsConstants.templateNameProformaResidential")[0]),Ember.isEmpty(GetClarityConstants("ManageAccountConstants","productsConstants.productsConstants.gotv"))?e.set("productsConstantsGotv",""):e.set("productsConstantsGotv",GetClarityConstants("ManageAccountConstants","productsConstants.productsConstants.gotv")[0]),Ember.isEmpty(GetClarityConstants("ManageAccountConstants","customerTypesConstants.accountStatus.open"))?e.set("accountStatusOpen",""):e.set("accountStatusOpen",GetClarityConstants("ManageAccountConstants","customerTypesConstants.accountStatus.open")[0]),Ember.isEmpty(GetClarityConstants("ManageAccountConstants","customerTypesConstants.interactionMedium.Email"))?e.set("interactionMediumEmail",""):e.set("interactionMediumEmail",GetClarityConstants("ManageAccountConstants","customerTypesConstants.interactionMedium.Email")[0]),Ember.isEmpty(GetClarityConstants("ManageAccountConstants","customerTypesConstants.queryType.dstv"))?e.set("queryTypeDstv",""):e.set("queryTypeDstv",GetClarityConstants("ManageAccountConstants","customerTypesConstants.queryType.dstv")[0]),Ember.isEmpty(GetClarityConstants("ManageAccountConstants","customerTypesConstants.category.financial"))?e.set("categoryFinancial",""):e.set("categoryFinancial",GetClarityConstants("ManageAccountConstants","customerTypesConstants.category.financial")[0]),Ember.isEmpty(GetClarityConstants("ManageAccountConstants","customerTypesConstants.subCategory.statementInvoiceQueries"))?e.set("statementInvoiceQueries",""):e.set("statementInvoiceQueries",GetClarityConstants("ManageAccountConstants","customerTypesConstants.subCategory.statementInvoiceQueries")[0]),Ember.isEmpty(GetClarityConstants("ManageAccountConstants","customerTypesConstants.outcome.emailSuccessfullySent"))?e.set("emailSuccessfullySent",""):e.set("emailSuccessfullySent",GetClarityConstants("ManageAccountConstants","customerTypesConstants.outcome.emailSuccessfullySent")[0]),Ember.isEmpty(GetClarityConstants("ManageAccountConstants","customerTypesConstants.caseStatus.complete"))?e.set("caseStatusComplete",""):e.set("caseStatusComplete",GetClarityConstants("ManageAccountConstants","customerTypesConstants.caseStatus.complete")[0]),Ember.isEmpty(GetClarityConstants("ManageAccountConstants","customerTypesConstants.interactionMedium.walkin"))?e.set("interactionMediumWalkin",""):e.set("interactionMediumWalkin",GetClarityConstants("ManageAccountConstants","customerTypesConstants.interactionMedium.walkin")[0]),Ember.isEmpty(GetClarityConstants("ManageAccountConstants","customerTypesConstants.outcome.proformaInvoiceProvided"))?e.set("proformaInvoiceProvided",""):e.set("proformaInvoiceProvided",GetClarityConstants("ManageAccountConstants","customerTypesConstants.outcome.proformaInvoiceProvided")[0]),Ember.isEmpty(GetClarityConstants("ManageAccountConstants","productsConstants.productsConstants.templateNameProformaGotv"))?e.set("templateNameProformaGotv",""):e.set("templateNameProformaGotv",GetClarityConstants("ManageAccountConstants","productsConstants.productsConstants.templateNameProformaGotv")[0])},isCustomerValidForProformaInvoice:function(){var e=this;e.set("isCustomerValidForProforma",!1),Komodo.Services.queryService.getJSON("/CustomerProfile?customerId="+e.get("customerNumber"),{async:!1}).done(function(t){var a=t.CustomerDetail;Ember.isEmpty(a)||(a.Class===e.get("customerClassCommercial")||a.Class===e.get("customerClassResidential")?e.set("isCustomerValidForProforma",!0):e.set("isCustomerValidForProforma",!1),a.Class===e.get("customerClassCommercial")?e.set("isCommercialCustomer",!0):e.set("isCommercialCustomer",!1),a.Class===e.get("customerClassResidential")&&e.set("isResidentialCustomer",!0))})},isExciseDutyAllowed:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("ProformaInvoice","IsExciseDutyAllowed").done(function(t){e.set("allowExciseDuty",t)}).fail(function(e){Komodo.error("[ERROR] : could not retrieve allowExciseDuty domain = "+Komodo.Services.queryService.getSelectedCountryId()+"/ qualifier = "+language),Komodo.error("[ERROR] : "+e)})},isCustomerValidForDoubleTax:function(){var e=this;e.get("loggedInCountryName")===GetClarityConstants("ManageAccountConstants","customerTypesConstants.countryDescription.ghana").toString()?e.set("isValidForDoubleTax",!0):e.set("isValidForDoubleTax",!1)},isCustomerValidForVat:function(){var e=this;e.get("loggedInCountryName")===GetClarityConstants("ManageAccountConstants","customerTypesConstants.countryDescription.zimbabwe").toString()?e.set("isVatApplicable",!1):e.set("isVatApplicable",!0)},bindPeriod:function(){this.set("periodList",["1","2","3","4","5","6","7","8","9","10","11","12"])},registerValidators:function(){var e=this;e.registerValidator(e.get("proformaInvoiceModel"),"emailAddress",{minLength:6,maxLength:254,type:"string",displayName:kl.value(e.localeProformaInvoice+"email"),regExPattern:Komodo.UI.Validators.RegExPatterns.Email}),e.registerValidator("proformaInvoiceModel","fromDateSelected",{type:"date",isRequired:!0,minDate:e.loadIpDay()}),e.registerValidator("proformaInvoiceModel","periodSelected",{isRequired:!0}),e.registerValidator("proformaInvoiceModel","accountNumberSelected",{isRequired:!0})},loadTitles:function(){var e=this;e.set("titles",[]),Komodo.Services.cachedDataService.fetch("Title").done(function(t){$.each(t,function(t,a){e.titles.addObject(a)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve Titles from CDM")})},actions:{printInvoice:function(e){var t=this;if("zaf"!==t.get("loggedInCountryId")){var a=function(){var e=document.createElement("a");return document.body.appendChild(e),e.style="display: none",function(t,a){var o=new Blob([t],{type:"application/pdf"}),n=window.URL.createObjectURL(o);e.href=n,e.download=a,e.click(),window.URL.revokeObjectURL(n)}}(),o=new XMLHttpRequest;o.open("GET",t.get("proformaPdfUrl"),!0),o.responseType="arraybuffer",o.setRequestHeader("Accept","application/pdf"),o.onerror=function(e){},o.onload=function(e){var t=o.response;a(t,"ProformaInvoice.pdf")},o.send(null)}else if("zaf"===t.get("loggedInCountryId")){var t=this;if(t.showBusyIndicator(),!t.canSubmitData(t.get("proformaInvoiceModel"),kl.value(t.localeProformaInvoice+"title"),{showInModal:!0}))return;t.getNewProcessID(),t.previewInvoice()}t.publishCreateCase(kl.value(t.localeProformaInvoice+"print"))},sendEmail:function(){var e=this;e.showBusyIndicator(),e.canSubmitData(e.get("proformaInvoiceModel"),kl.value(e.localeProformaInvoice+"title"),{showInModal:!0})&&(!Ember.isEmpty(e.get("proformaInvoiceModel.emailAddress"))&&e.get("validators.emailAddressValidator.isValid")?(e.set("communicationType","Email"),e.generateProformaInvoiceXML(),"zaf"!==e.get("loggedInCountryId")?Ember.isEmpty(e.get("proformaPdfUrl"))&&Ember.isEmpty(e.get("xmlString"))?Komodo.Controls.MessageBoxController.show(kl.value(e.localeProformaInvoice+"title"),kl.value(e.localeProformaInvoice+"emailSendingFailed"),Komodo.Controls.MessageBoxOkButtons,e,"id5446674","danger"):e.publishOutbondNotificationEvent(e.get("xmlString")):"zaf"===e.get("loggedInCountryId")&&(Ember.isEmpty(e.get("xmlString"))?Komodo.Controls.MessageBoxController.show(kl.value(e.localeProformaInvoice+"title"),kl.value(e.localeProformaInvoice+"emailSendingFailed"),Komodo.Controls.MessageBoxOkButtons,e,"id5446674","danger"):e.publishOutbondNotificationEvent(e.get("xmlString")))):Komodo.Controls.MessageBoxController.show(kl.value(e.localeProformaInvoice+"title"),kl.value(e.localeProformaInvoice+"emailValidation"),Komodo.Controls.MessageBoxOkButtons,e,"id5446674","danger"))}},generateProformaInvoiceXML:function(){var e=this;Komodo.Services.queryService.getJSON("/CustomerProfile?customerId="+e.get("customerNumber"),{async:!1}).done(function(t){var a="<ProformaInvoice><Customer><CustomerNumber>"+e.get("customerNumber")+"</CustomerNumber>",o=t.CustomerDetail;if(null!=o){o.Class===e.get("customerClassCommercial")?a+="<Name>"+o.CompanyName+"</Name>":(a+="<Title>"+e.getTitleCanonicalValue(o.PersonalDetail.Title)+" </Title>",a+="<Name>"+o.PersonalDetail.FirstName+"</Name>"),Ember.isEmpty(o.VATNumber)?a+="<VatNo></VatNo>":a+="<VatNo>"+o.VATNumber+"</VatNo>",Ember.isEmpty(o.CompanyFiscalCode)?a+="<TinNo></TinNo>":a+="<TinNo>"+o.CompanyFiscalCode+"</TinNo>",a+="<Surname>"+o.PersonalDetail.Surname+"</Surname>";for(var n=o.ListOfAddress.Address,s=0;s<n.length;s++)if(n[s].Type===Komodo.CanonicalValues.AddressTypes.Physical){var r=n[s];a+="<AddressDetails><UnitNumber>"+r.BuildingNumber+"</UnitNumber>",a+="<Building>"+r.BuildingName+"</Building>",a+="<Street>"+r.Street+"</Street>",a+="<Suburb>"+r.Suburb+"</Suburb>",a+="<City>"+r.City+"</City>"
;var i=e.getProvinceNameById(r.Province,e.get("loggedInCountryId"));a+="<Province>"+i+"</Province>",a+="<PostalCode>"+r.PostCode+"</PostalCode>",a+="<Country>"+r.Country+"</Country>",a+="</AddressDetails>";break}a+="</Customer><InvoiceDetails><InvoiceNumber>"+e.get("proformaInvoiceModel.invoiceNumber")+"</InvoiceNumber><InvoiceDate>"+e.getFormattedDateForUI(new Date)+"</InvoiceDate><InvoiceToDate>"+e.getFormattedDateForUI(new Date)+"</InvoiceToDate><InvoicePeriod>"+e.get("proformaInvoiceModel.periodSelected")+"</InvoicePeriod><InvoiceTotal>"+e.get("proformaInvoiceModel.vatableAmount")+"</InvoiceTotal><InvoiceGrandTotal>"+e.get("proformaInvoiceModel.invoiceTotal")+"</InvoiceGrandTotal><VatPercentage>"+e.get("vatPercForTemplate")+"</VatPercentage><VatAmount>"+e.get("proformaInvoiceModel.vatIncluded")+"</VatAmount><Currency>"+e.get("currencyMnemonic")+"</Currency>",e.get("isValidForDoubleTax")&&(a+="<CstableAmount>"+e.get("proformaInvoiceModel.cstableAmount")+"</CstableAmount><CstAmount>"+e.get("proformaInvoiceModel.cstAmount")+"</CstAmount><CstPercentage>"+e.get("cstPercForTemplate")+"</CstPercentage>"),e.get("allowExciseDuty")&&(a+="<ExciseDutyableAmount>"+e.get("proformaInvoiceModel.exciseDutyableAmount")+"</ExciseDutyableAmount><ExcisedutyAmount>"+e.get("proformaInvoiceModel.excisedutyAmount")+"</ExcisedutyAmount><ExciseDutyPercentage>"+e.get("excisedutyPercForTemplate")+"</ExciseDutyPercentage>"),e.get("hideDiscountRow")||1!=e.get("showDiscount")||(a+="<InvoiceDiscount>"+e.get("proformaInvoiceModel.discount")+"</InvoiceDiscount>"),a+="<ProductDetails>",$.each(e.get("proformaInvoiceModel.proformaInvoiceProductDetailsList"),function(t,o){e.get("isCommercialCustomer")?a+="<Location><Type>"+o.viewLocation+"</Type>":a+="<Smartcard><SmartcardNumber>"+o.smartcardNumber+"</SmartcardNumber>",$.each(o.deviceProducts,function(t,o){a+="<Product><Description>"+o.description+"</Description><FromDate>"+o.fromDate+"</FromDate><ToDate>"+o.toDate+"</ToDate>",e.get("isCommercialCustomer")&&(a+="<Units>"+o.units+"</Units><UnitPrice>"+o.unitPrice+"</UnitPrice>"),a+="<Amount>"+o.amount+"</Amount></Product>"}),e.get("isCommercialCustomer")?a+="</Location>":a+="</Smartcard>"}),a+="</ProductDetails></InvoiceDetails></ProformaInvoice>",a=a.replace(/undefined/gi,""),a=a.replace(/&/gi,"&amp;"),e.set("xmlString",a)}}).error(function(e){var t=JSON.stringify(e);Komodo.log("retrieveCustomer ajax call failed. Error: "+t)})},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,12e5,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},previewInvoice:function(){var e=this;e.generateProformaInvoiceXML(),e.hideBusyIndicator();var t=e.getTemplateName();Komodo.Services.queryService.postJSON("/Invoice/GenerateProformaInvoice?applicationName="+e.get("templateForProformaInvoiceApplicationName")+"&templateName="+t+"&businessUnitName="+e.get("templateForProformaInvoiceBusinessUnit")+"&templateType="+e.get("templateForProformaInvoiceTemplateType")+"&language="+e.get("templateForProformaInvoiceLanguage"),{data:e.get("xmlString")}).done(function(t){e.set("proformaInvoiceModel.htmlData",t);var a=Komodo.Services.uiService.showModalPopup(kl.value(e.localeProformaInvoice+"title"),null,{view:Komodo.Application.ProformaInvoicePreviewView,context:{data:e.get("proformaInvoiceModel"),printProformaInvoice:function(){var t=$("#ProformaInvoicePreview").html(),a=window.open("","","width="+screen.width+",height="+screen.height);a.document.write("<html><head>"),a.document.write('<link rel="stylesheet" href="'+e.getPath()+'Content/modules.css" type="text/css" />'),a.document.write("</head><body>"),a.document.write(t),a.document.write("<script> setTimeout(function () {window.print(); window.close() }, 800);<\/script></body></html>")},close:function(){a.close()}},canUserClose:!0})}).error(function(t){e.hideBusyIndicator();var a=JSON.stringify(t);Komodo.Controls.MessageBoxController.show(kl.value(e.localeProformaInvoice+"productDetails"),a,Komodo.Controls.MessageBoxOkButtons,e,"authmbx","danger")})},getPath:function(){var e=window.location.href;return e=e.substring(0,e.lastIndexOf("/"))+"/",e.replace("#/","")},publishOutbondNotificationEvent:function(e){var t=this;t.hideBusyIndicator();var a=Komodo.Models.SendOutboundNotification.create(),o=Komodo.canonicalFacadeFactory(a,["Country","ListOfOutboundNotification"]);o.set("Country",t.get("loggedInCountryId"));var n=Komodo.Models.ListOfOutboundNotification.create(),s=Komodo.canonicalFacadeFactory(n,["OutboundNotification"]),r=Komodo.Models.OutboundNotification.create(),i=Komodo.canonicalFacadeFactory(r,["BusinessEntity","BusinessUnit","Country","TemplateName","ListOfRecipient","ListOfAttachment","MessageData"]);if(i.set("BusinessEntity",t.get("templateForProformaInvoiceApplicationName")),i.set("BusinessUnit","Multichoice"),i.set("Country",t.get("loggedInCountryId")),i.set("TemplateName",t.getTemplateName()),i.set("MessageData",e),"zaf"!==t.get("loggedInCountryId")){var l=Komodo.Models.ListOfAttachment.create(),c=Komodo.canonicalFacadeFactory(l,["Attachment"]),u=Komodo.Models.Attachment.create(),d=Komodo.canonicalFacadeFactory(u,["Type","FriendlyName","URI"]);d.set("Type","PDF"),d.set("FriendlyName","ProformaInvoice.pdf"),d.set("URI",t.get("proformaPdfUrl")),c.set("Attachment",u),i.set("ListOfAttachment",l)}var h=Komodo.Models.ListOfContext.create(),m=Komodo.Models.Context.create(),p=Komodo.canonicalFacadeFactory(h,["Context"]),f=Komodo.canonicalFacadeFactory(m,["ContextValueUri","Value"]);f.set("ContextValueUri","CustomerId"),f.set("Value",t.get("customerNumber")),p.set("Context",m);var g=Komodo.Models.ListOfRecipients.create(),v=Komodo.canonicalFacadeFactory(g,["Recipient"]),y=Komodo.Models.Recipient.create(),b=Komodo.canonicalFacadeFactory(y,["CommunicationType","Language","MessageUID","From","To","ScheduledDate","ExpiryDate","ListOfContext"]);b.set("Language","English"),b.set("CommunicationType",t.get("communicationType")),b.set("From","NoReply.ProformaInvoice@MultiChoice.co.za"),b.set("To",t.get("proformaInvoiceModel.emailAddress")),b.set("ListOfContext",h),v.set("Recipient",y),i.set("ListOfRecipient",g),s.set("OutboundNotification",r),o.set("ListOfOutboundNotification",n),t.getNewProcessID(),Komodo.Services.manageAccountService.sendOutbondNotification(t,a).done(function(){Komodo.log("publishsendOutbondNotificationEvent() : Send Outbond Notification event has been published."),t.publishCreateCase(kl.value(t.localeProformaInvoice+"email"));var e="Email"===t.get("communicationType")?t.get("proformaInvoiceModel.emailAddress"):t.get("loggedInCountryId");Komodo.Controls.MessageBoxController.show(kl.value(t.localeProformaInvoice+"title"),t.get("communicationType")+" "+kl.value(t.localeProformaInvoice+"messageSent")+" "+e,Komodo.Controls.MessageBoxOkButton,t,"id5446673","success")}).fail(function(){Komodo.log("publishsendOutbondNotificationEvent() : Email Proforma Invoice event has failed.")})},getCustomerId:function(){var e=this,t=Komodo.Services.ProductAndServiceMaintenanceHelper.create();if(!t.isCustomerIdIsAvailableToRetriveData())return void Komodo.Controls.MessageBoxController.show(kl.value(e.localeUpgradeOrDowngrade+"customerSearchNotFound"),kl.value(e.localeUpgradeOrDowngrade+"customerSearchNotFoundMessage"),Komodo.Controls.MessageBoxOkButton,e,"id123456");var a=t.getCustomerIdToRetrieveData();e.set("customerNumber",a)},loadCountries:function(){var e=this,t=Komodo.Services.localizationService.getCurrentLanguage();Komodo.Services.cachedDataService.fetch("Location").done(function(t){var a=JSON.parse(t);e.set("countries",[]),$.each($.makeArray(a.Countries.Country),function(t,a){e.get("countries").addObject(a)})}).fail(function(){Komodo.error("[ERROR] : could not retrieve Location domain = "+e.get("loggedInCountryId")+"/ qualifier = "+t)})},getProvinceNameById:function(e,t){var a=this,o=void 0;return void 0!==t&&void 0!==a.get("countries")&&$.each(a.get("countries"),function(a,n){n.CanonicalKey===t&&n.Provinces&&n.Provinces.Province&&$.isArray(n.Provinces.Province)&&$.each(n.Provinces.Province,function(t,a){a.CanonicalKey===e&&(o=a.CanonicalValue)})}),o},getNewProcessID:function(){this.startNewProcess()},getTitleCanonicalValue:function(e){for(var t=this,a=0;a<t.titles.length;a++)if(t.titles[a].key===e)return t.titles[a].value},getLoggedIncountry:function(){var e=this;e.set("loggedInCountryId",Komodo.Services.uiService.getController("application").get("_selectedCountryId")),e.set("loggedInCountryName",Komodo.Services.uiService.getController("application").get("_selectedCountryDescription"))},accountNoSelected:function(){var e=this;e.set("proformaInvoiceModel.emailAddress",void 0),e.clearData(),Ember.isEmpty(e.get("proformaInvoiceModel.accountNumberSelected"))||(e.getProformaInvoiceProductDetails(1),"zaf"!==e.get("loggedInCountryId")&&e.getProformaPdfUrl(1),Ember.isEmpty(e.get("proformaInvoiceModel.proformaInvoiceProductDetailsList"))?e.set("isAccountSelected",!1):e.set("isAccountSelected",!0),e.setEmailAddress(e.get("proformaInvoiceModel.invoiceTotal")),0===e.get("proformaInvoiceModel.invoiceTotal")||e.get("proformaInvoiceModel.invoiceTotal")===parseFloat(0).toFixed(2)?e.set("isSendPrintButtonDisabled",!0):e.set("isSendPrintButtonDisabled",!1))}.observes("proformaInvoiceModel.accountNumberSelected"),periodValueSelected:function(){var e=this;Ember.isEmpty(e.get("proformaInvoiceModel.periodSelected"))||Ember.isEmpty(e.get("proformaInvoiceModel.fromDateSelected"))||(e.set("proformaInvoiceModel.invoiceTotal",void 0),e.set("proformaInvoiceModel.vatableAmount",void 0),e.set("proformaInvoiceModel.vatIncluded",void 0),e.set("proformaInvoiceModel.cstAmount",void 0),e.set("proformaInvoiceModel.cstableAmount",void 0),e.getProformaInvoiceProductDetails(e.get("proformaInvoiceModel.periodSelected")),"zaf"!==e.get("loggedInCountryId")&&e.getProformaPdfUrl(e.get("proformaInvoiceModel.periodSelected")),Ember.isEmpty(e.get("proformaInvoiceModel.proformaInvoiceProductDetailsList"))?e.set("isAccountSelected",!1):(e.set("isAccountSelected",!0),e.get("hideDiscountRow")||("12"==e.get("proformaInvoiceModel.periodSelected")?(e.set("showDiscount",!0),e.isAnnualCustomerCheck()):e.set("showDiscount",!1)))),Ember.isEmpty(e.get("proformaInvoiceModel.proformaInvoiceProductDetailsList"))||$.each(e.get("proformaInvoiceModel.proformaInvoiceProductDetailsList"),function(t,a){$.each(a.deviceProducts,function(t,a){Ember.isEmpty(e.get("proformaInvoiceModel.periodSelected"))&&(a.fromDate="-",a.toDate="-")})})}.observes("proformaInvoiceModel.periodSelected"),fromDateOnUISelected:function(){var e=this;if(e.set("proformaInvoiceModel.periodSelected",void 0),Ember.isEmpty(e.get("proformaInvoiceModel.proformaInvoiceProductDetailsList"))||$.each(e.get("proformaInvoiceModel.proformaInvoiceProductDetailsList"),function(e,t){$.each(t.deviceProducts,function(e,t){t.fromDate="-",t.toDate="-"})}),!Ember.isEmpty(e.get("proformaInvoiceModel.fromDateSelected"))){var t=new Date(XDates.getDateObjectFromString(("31-03-"+new Date(e.get("proformaInvoiceModel.fromDateSelected")).getFullYear()).toString()));if(e.getformatedDateforComparison(new Date(e.get("proformaInvoiceModel.fromDateSelected")))===e.getformatedDateforComparison(t))return Komodo.Controls.MessageBoxController.show(kl.value(e.localeProformaInvoice+"title"),kl.value("locale.manageviewing:upgradeOrDowngrade.invalidDateMessage"),Komodo.Controls.MessageBoxOkButtons,e,"id5446673","danger"),e.set("proformaInvoiceModel.fromDateSelected",void 0),void e.getProformaInvoiceProductDetails(1)}}.observes("proformaInvoiceModel.fromDateSelected"),getProformaInvoiceProductDetails:function(e){var t=this,a=0,o=t.getformatedDateforMicroService(t.loadIpDay());if(!Ember.isEmpty(t.get("proformaInvoiceModel.accountNumberSelected"))){t.set("isAccountSelected",!0);var n=t.get("proformaInvoiceModel.accountNumberSelected").split(" -")[0];Ember.isEmpty(t.get("proformaInvoiceModel.fromDateSelected"))||(o=t.getformatedDateforMicroService(t.get("proformaInvoiceModel.fromDateSelected"))),Komodo.Services.queryService.getJSONFromApiRoot("customers/"+t.get("customerNumber")+"/Account/"+n+"/?fromDate="+o+"&period="+e+"&page=1&pageSize=10",{async:!1}).done(function(e){Ember.isEmpty(e)?t.set("isAccountSelected",!1):(t.set("proformaInvoiceModel.proformaInvoiceProductDetailsList",e.items[0].deviceProductDetails),$.each(t.get("proformaInvoiceModel.proformaInvoiceProductDetailsList"),function(e,o){$.each(o.deviceProducts,function(e,o){o.unitPrice=t.getFormatedAmount(o.unitPrice,2,".",","),o.amount=t.getFormatedAmount(o.amount,2,".",","),a=o.discount+a,Ember.isEmpty(t.get("proformaInvoiceModel.periodSelected"))&&(o.fromDate="-",o.toDate="-")})}),t.set("proformaInvoiceModel.discount","-"+t.getFormatedAmount(a,2,".",",")),t.set("proformaInvoiceModel.invoiceTotal",t.getFormatedAmount(e.items[0].invoiceTotal,2,".",",")),t.set("proformaInvoiceModel.vatableAmount",t.getFormatedAmount(e.items[0].vatableAmount,2,".",",")),t.set("proformaInvoiceModel.vatIncluded",t.getFormatedAmount(e.items[0].vatAmount,2,".",",")),t.set("proformaInvoiceModel.exciseDutyIncluded",t.getFormatedAmount(e.items[0].exciseDutyAmount,2,".",",")),Ember.isEmpty(e.items[0].cstableAmount)||t.set("proformaInvoiceModel.cstableAmount",t.getFormatedAmount(e.items[0].cstableAmount,2,".",",")),Ember.isEmpty(e.items[0].cstAmount)||t.set("proformaInvoiceModel.cstAmount",t.getFormatedAmount(e.items[0].cstAmount,2,".",",")),Ember.isEmpty(e.items[0].exciseDutyAmount)||t.set("proformaInvoiceModel.excisedutyAmount",t.getFormatedAmount(e.items[0].exciseDutyAmount,2,".",",")),Ember.isEmpty(e.items[0].exciseDutyableAmount)||t.set("proformaInvoiceModel.exciseDutyableAmount",t.getFormatedAmount(e.items[0].exciseDutyableAmount,2,".",",")),t.set("vatPercForTemplate",e.items[0].vat),t.set("cstPercForTemplate",e.items[0].cst),t.set("excisedutyPercForTemplate",e.items[0].exciseDuty),t.get("isValidForDoubleTax")?t.set("vatPercentage",kl.value(t.localeProformaInvoice+"vatNhilIncludedText",{defaultVatPercentage:e.items[0].vat})):t.get("allowExciseDuty")?(t.set("exciseDutyPercentage",kl.value(t.localeProformaInvoice+"exciseIncludedText",{defaultexcisePercentage:e.items[0].exciseDuty})),t.set("vatPercentage",kl.value(t.localeProformaInvoice+"vatIncludedText",{defaultVatPercentage:e.items[0].vat}))):t.set("vatPercentage",kl.value(t.localeProformaInvoice+"vatIncludedText",{defaultVatPercentage:e.items[0].vat})),t.set("cstPercentage",kl.value(t.localeProformaInvoice+"cstIncludedText",{defaultCstPercentage:e.items[0].cst})),t.set("currencyMnemonic",e.items[0].currency),t.set("tvLevyKey",e.items[0].tvLevyText),t.set("tvLevyValue",e.items[0].tvLevyValue))}).error(function(e){var a=kl.value(t.localeProformaInvoice+"errorMessageForMicroService")+(Ember.isBlank(e.responseJSON)||!0!=!Ember.isBlank(e.responseJSON.detail)?"":e.responseJSON.detail);Komodo.Controls.MessageBoxController.show(kl.value(t.localeProformaInvoice+"title"),a,Komodo.Controls.MessageBoxOkButtons,t,"id5446675","danger")})}},getProformaPdfUrl:function(e){var t=this,a=void 0;1==t.get("isCommercialCustomer")&&(a="commercial"),1==t.get("isResidentialCustomer")&&(a="residential");var o=t.getformatedDateforMicroService(t.loadIpDay());if(!Ember.isEmpty(t.get("proformaInvoiceModel.accountNumberSelected"))){t.set("isAccountSelected",!0);var n=t.get("proformaInvoiceModel.accountNumberSelected").split(" -")[0];Ember.isEmpty(t.get("proformaInvoiceModel.fromDateSelected"))||(o=t.getformatedDateforMicroService(t.get("proformaInvoiceModel.fromDateSelected")));var s=Komodo.Services.queryService.getApiRootUrl("customer/"+t.get("customerNumber")+"/Account/"+n+"/customerType/"+a+"/?isDoubleTax="+t.get("isValidForDoubleTax")+"&isExciseDuty="+t.get("allowExciseDuty")+"&hideDiscountRow="+t.get("hideDiscountRow")+"&showDiscount="+t.get("showDiscount")+"&discount="+t.get("proformaInvoiceModel.discount")+"&fromDate="+o+"&period="+e+"&page=1&pageSize=10");s=s+"customer/"+t.get("customerNumber")+"/Account/"+n+"/customerType/"+a+"/?isDoubleTax="+t.get("isValidForDoubleTax")+"&isExciseDuty="+t.get("allowExciseDuty")+"&hideDiscountRow="+t.get("hideDiscountRow")+"&showDiscount="+t.get("showDiscount")+"&discount="+t.get("proformaInvoiceModel.discount")+"&fromDate="+o+"&period="+e+"&page=1&pageSize=10",t.set("proformaPdfUrl",s)}},setAccountTypes:function(){var e=this;e.set("accountTypes",Komodo.Services.customerProfileService.get("accountType").AccountTypes.AccountType),e.set("isAccountTypeLoaded",e.get("accountTypes")&&e.get("accountTypes").length>0)},setAllAccounts:function(){var e=this,t=Komodo.Application.ManageAccountUtility.isAnyAccountExist();if(e.set("allAccounts",[]),t&&e.get("isAccountTypeLoaded"))for(var a=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),o=a.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account),n=[],s="",r=0;r<o.length;r++)s=e.get("accountTypes").filter(function(e){if(e.CanonicalKey===o[r].Type)return e.AccountTypeDescription}),o[r].Status===e.get("accountStatusOpen")&&(Komodo.Services.customerProfileService.personalDetails.customerClass===e.get("customerClassCommercial")?Ember.isEmpty(o[r].Name)?n.pushObject(o[r].UID):n.pushObject(o[r].UID+" - "+o[r].Name):Ember.isEmpty(s)||Komodo.Services.customerProfileService.personalDetails.customerClass!==e.get("customerClassResidential")?n.pushObject(o[r].UID):n.pushObject(o[r].UID+" - "+s[0].AccountTypeDescription)),e.set("allAccounts",n)},publishCreateCase:function(e){var t=this,a=Komodo.Models.CreateInteraction.create(),o=Komodo.Models.Case.create(),n=Komodo.canonicalFacadeFactory(a,["Country","Case","ListOfCaseData_CaseData"]),s=Komodo.Services.customerProfileService.getCustomerPersonalDetail();o.set("Type","Case"),o.set("CustomerUID",s.customerNo),s.customerClass===t.get("customerClassCommercial")?o.set("InteracteeName",s.companyName):o.set("InteracteeName",s.firstName+" "+s.lastName),o.set("ContactPerson",s.firstName),o.set("ContactPersonNumber",s.telNo),o.set("InteractionLocation",t.get("loggedInCountryName")),o.set("InteractionMedium",t.get("interactionMediumEmail")),o.set("QueryType",t.get("queryTypeDstv")),o.set("Category",t.get("categoryFinancial")),o.set("SubCategory",t.get("statementInvoiceQueries")),o.set("Outcome",t.get("emailSuccessfullySent")),o.set("Status",t.get("caseStatusComplete")),o.set("CreatedDate",new Date),o.set("Notes",kl.value(t.localeProformaInvoice+"emailSentTo")+t.get("proformaInvoiceModel.emailAddress")+kl.value(t.localeProformaInvoice+"notesDetails")+t.get("proformaInvoiceModel.accountNumberSelected").split(" -")[0]+kl.value(t.localeProformaInvoice+"forAmount")+t.get("proformaInvoiceModel.invoiceTotal")),e===kl.value(t.localeProformaInvoice+"print")&&(o.set("InteractionMedium",t.get("interactionMediumWalkin")),o.set("Outcome",t.get("proformaInvoiceProvided")),o.set("Notes",kl.value(t.localeProformaInvoice+"printNote")+kl.value(t.localeProformaInvoice+"notesDetails")+t.get("proformaInvoiceModel.accountNumberSelected").split(" -")[0]+kl.value(t.localeProformaInvoice+"forAmount")+t.get("proformaInvoiceModel.invoiceTotal")));var r=Komodo.Models.CaseData.create(),i=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),l=[];i.set("CaseDataValueUri","Interaction Type"),i.set("Value","Manual"),l.push(r),n.set("Country",Komodo.Services.queryService.getSelectedCountryId()),n.set("Case",o),n.set("ListOfCaseData_CaseData",l),t.publishRequestOnBus(a,"CreateInteraction","v1")},publishRequestOnBus:function(e,t,a){var o=Komodo.Services.ManageCaseService,n="Event Message for "+t+" ";o.publishEvent(this,e,t,a).done(function(){Komodo.log(n+" has been published successfully")}).fail(function(e){Komodo.log(n+" has been failed"),Komodo.Controls.MessageBoxController.show(n,e)})},messageCaseCreatedReceived:function(e){if(!Ember.isEmpty(ResponseMessage.Payload.Case.UID)){var t=this;t.caseNumber=e.ResponseMessage.Payload.Case.UID,t.get("isCase")?(Komodo.log("[Create Case]: Case created with ID "+t.caseNumber),Komodo.log("[Create Case]: Uploading Documents to Server.......")):(Komodo.log("[Create Interaction]: Interaction created with ID "+t.caseNumber),Komodo.log("[Create Interaction]: Uploading Documents to Server.......")),t.caseFileUploader.start()}},messageFailureMessageEventReceived:function(e){Komodo.Services.busyService.stop(this.get("processId"),"blocking"),Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")},clearData:function(){var e=this;e.set("proformaInvoiceModel.proformaInvoiceProductDetailsList",[]),e.set("proformaInvoiceModel.invoiceTotal",0),e.set("proformaInvoiceModel.periodSelected",void 0),e.set("proformaInvoiceModel.fromDateSelected",void 0),e.set("isAccountSelected",!1),e.set("proformaInvoiceModel.invoiceTotal",void 0),e.set("proformaInvoiceModel.vatableAmount",void 0),e.set("proformaInvoiceModel.vatIncluded",void 0),e.set("proformaInvoiceModel.exciseDutyableAmount",void 0),e.set("proformaInvoiceModel.exciseDutyIncluded",void 0),e.set("proformaInvoiceModel.cstAmount",void 0),e.set("proformaInvoiceModel.cstableAmount",void 0),e.set("vatPercentage",void 0),e.set("cstPercentage",void 0),e.set("exciseDutyPercentage",void 0),e.set("vatPercForTemplate",void 0),e.set("cstPercForTemplate",void 0),e.set("currencyMnemonic",void 0),e.set("excisedutyPercForTemplate",void 0),e.set("showDiscount",void 0)},clearAll:function(){var e=this;e.get("periodList").clear(),e.get("titles").clear(),e.set("loggedInCountryName",void 0),e.set("customerNumber",void 0),e.set("isAccountSelected",!1),e.set("currencyMnemonic",void 0),e.set("proformaInvoiceModel.proformaInvoiceProductDetailsList",[]),e.set("vatPercentage",void 0),e.set("cstPercForTemplate",void 0),e.set("vatPercForTemplate",void 0),e.set("cstPercForTemplate",void 0),e.set("excisedutyPercForTemplate",void 0),e.set("isAnnualCustomer",!1),e.set("showDiscount",!1),e.set("hideDiscountRow",!1),e.set("isTvLevy",!1)},getFormattedDateForUI:function(e){var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=new Date(e),o=t[a.getMonth()];return function(e){var t=e.toString();return t.length<2?"0"+t:t}(a.getDate())+" "+o+" "+a.getFullYear()},setEmailAddress:function(e){var t=this;if(!Ember.isEmpty(Komodo.Services.customerProfileService.get("currentCustomerDetails").ResponseMessage.Payload.CustomerDetail.ListOfEmail)){var a=Komodo.Services.customerProfileService.get("currentCustomerDetails").ResponseMessage.Payload.CustomerDetail.ListOfEmail.Email;a.length>0&&$.each(a,function(a,o){o.IsPrimary&&0!=e&&e!=parseFloat(0).toFixed(2)&&t.set("proformaInvoiceModel.emailAddress",o.Value)})}},getTemplateName:function(){var e=this,t=void 0;return Ember.isEmpty(Komodo.Services.customerProfileService.currentCustomerDetails)||Ember.isEmpty(Komodo.Services.customerProfileService.currentCustomerDetails.ResponseMessage)||(t=Komodo.Services.customerProfileService.currentCustomerDetails.ResponseMessage.Payload.CustomerDetail.BusinessUnit),e.get("isCommercialCustomer")?e.get("templateNameProformaCommertial"):e.get("loggedInCountryName")!==GetClarityConstants("ManageAccountConstants","customerTypesConstants.countryDescription.kenya").toString()&&e.get("loggedInCountryName")!==GetClarityConstants("ManageAccountConstants","customerTypesConstants.countryDescription.zambia").toString()&&e.get("loggedInCountryName")!==GetClarityConstants("ManageAccountConstants","customerTypesConstants.countryDescription.ghana").toString()||t.toUpperCase()!=e.get("productsConstantsGotv")?e.get("templateNameProformaResidential"):e.get("templateNameProformaGotv")},loadIpDay:function(){var e=this,t=(new Date).getDate(),a=(new Date).getMonth(),o=(new Date).getFullYear(),n=(new Date).toLocaleDateString("sv-SE");return Komodo.Services.queryService.getJSON("AccountProfile?id="+e.get("customerNumber"),{async:!1}).done(function(s){s&&s.Account.length&&s.Account.length>0&&$.each(s.Account,function(e,a){a.IsDefault&&(t=a.InvoiceDay)});var r=32-new Date(o,a+1,32).getDate();t>r&&(t=1);var i=new Date((new Date).toLocaleDateString("sv-SE")),l=new Date((new Date).getFullYear(),(new Date).getMonth(),t),c=l.getDate()-5,u=new Date((new Date).getFullYear(),(new Date).getMonth(),c),d=new Date(new Date(u).toLocaleDateString("sv-SE"));-1===XDates.compare(i,d)||0===XDates.compare(i,d)?e.set("ipMonthForDate",(new Date).getMonth()):1===XDates.compare(i,d)&&e.set("ipMonthForDate",(new Date).getMonth()+1),e.set("ipDayForDate",t);var h=new Date((new Date).getFullYear(),e.get("ipMonthForDate"),e.get("ipDayForDate"));n=new Date(new Date(h).toLocaleDateString("sv-SE"))}),new Date(new Date(n).toLocaleDateString("sv-SE"))},getformatedDateforComparison:function(e){function t(e){var t=e.toString();return t.length<2?"0"+t:t}if(void 0!=e&&""!=e){var a=e.getFullYear(),o=t(e.getMonth()+1);return t(e.getDate())+"-"+o+"-"+a}},getformatedDateforMicroService:function(e){function t(e){var t=e.toString();return t.length<2?"0"+t:t}if(void 0!=e&&""!=e){var a=e.getFullYear();return t(e.getMonth()+1)+"-"+t(e.getDate())+"-"+a}},toFixedFix:function(e,t){var a=Math.pow(10,t);return""+Math.round(e*a)/a},getFormatedAmount:function(e,t,a,o){var n=this;e=(e+"").replace(/[^0-9+-Ee.]/g,"");var s=isFinite(+e)?+e:0,r=isFinite(+t)?Math.abs(t):0,i=void 0===o?",":o,l=void 0===a?".":a,c="";return c=(r?n.toFixedFix(s,r):""+Math.round(s)).split("."),c[0].length>3&&(c[0]=c[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,i)),(c[1]||"").length<r&&(c[1]=c[1]||"",c[1]+=new Array(r-c[1].length+1).join("0")),c.join(l)},isAnnualCustomerCheck:function(){for(var e=this,t=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),a=t.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account),o=e.get("proformaInvoiceModel.accountNumberSelected").split(" -")[0],n=0;n<a.length;n++)if(a[n].ListOfAgreement.Agreement&&a[n].UID==o){agrList=t.createArrayForSingleElement(a[n].ListOfAgreement.Agreement);for(var s=0;s<agrList.length;s++)if(!Ember.isEmpty(agrList[s].ListOfHardware)&&!Ember.isEmpty(agrList[s].ListOfHardware.Hardware))for(var r=agrList[s].ListOfHardware.Hardware,i=0;i<r.length;i++)if(r[i].ListOfService.Service.length>=1)for(var l=r[i].ListOfService.Service,c=0;c<l.length;c++)l[c].ChargePeriod.toString()==Komodo.ChargePeriodCollection.ANNUALLY.value?e.set("isAnnualCustomer",!0):e.set("isAnnualCustomer",!1)}},allAccounts:[],periodList:[],titles:[],finalProductListWithPeriod:[],loggedInCountryName:void 0,customerNumber:void 0,vatAmount:void 0,totalOfAllPrices:0,isAccountSelected:!1,currencyMnemonic:void 0,basicAmountBeforeSelectingPeriod:void 0,finalProductList:[],vatPercentage:void 0,cstPercentage:void 0,exciseDutyPercentage:void 0,vatPercForTemplate:void 0,cstPercForTemplate:void 0,excisedutyPercForTemplate:void 0,isSendPrintButtonDisabled:!1,ipDayForDate:void 0,ipMonthForDate:void 0}),Komodo.Application.ManageDevicePaymentPlanController=Komodo.UI.Controller.extend({localGeneral:"locale.manageAccount.adhocdebitorder:general.",migrateDppDevice:!1,init:function(){var e=this;e.set("processVersion","v1.1"),e.set("processName","Manage Device Payment Plan Process"),e.set("upgardePlan",[{title:kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.upgradeProduct"),action:"upgradePlanShow"}]),e.set("getSettlementQuote",[{title:kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.getQuote"),action:"getSettlementQuoteShow"}]),e.registerModel("data",Komodo.Models.ManageDevicePaymentPlanModel),e.registerModel("settlePlanModel",Komodo.Models.SettlePlanDPPDocumentModel),e.registerModel("cancelPlanModel",Komodo.Models.CancelPlanDPPDocumentModel),e.registerModel("settleAdhocModel",Komodo.Models.SettlePlanByAdhocModel),e.registerModel("QuotePreview",Komodo.Models.DPPQuotePreviewModel),e.set("disbaleSendQuote",!0),e._super()},start:function(){var e=this;e.initializePaymentDetails(),e.set("disablecancelDecoderPlanButton",!1),e.set("disableupgradePlanButton",!1),e.set("data.settleComment",void 0),e.set("data.cancelComment",void 0),e.set("xmlString",""),e.loadTitles(),e.loadProducts(),e.set("quoteId",void 0),e.get("settlePlanModel").set("customerDocuments",[]),e.get("cancelPlanModel").set("customerDocuments",[]),e.set("data.iccCustomerNumber",e.get("customerNumber")),e.set("salesOrderId",void 0),e.hideAllMenu();var t=e.get("deviceNumber").split(" - ");e.set("smartcardNumber",t[1]),e.set("deviceSerialNumber",t[0]),e.set("outstandingBalance","-"),e.set("discount","-"),e.set("arrearsAmount","-"),e.set("totalAmountToSettle","-"),e.set("quoteStatus","-"),e.set("expiryDate","-"),e.set("financialAccountAmt","-"),e.set("quoteExpiryDate","-"),e.set("financialAccountId","-"),e.set("BHName",""),e.set("BHSurname",""),0===e.get("numberOfRemainingInstalment")?(e.set("disablecancelDecoderPlanButton",!0),e.set("disableprintQuoteButton",!0),e.set("settledPlanButton",!0),e.set("isButtonDisabled",!0),e.set("disableaddSettlementDocButton",!0),e.set("disableuploadDocSettlementButton",!0),e.set("disablecancelSelectDocButton",!0),e.set("disablecancelUploadDocButton",!0)):e.generateSettlementQuotes(),e.getLanguages(),e.setCountry(),e.get("data").set("othEmail",void 0),e.get("data").set("othPhone",void 0),e.registerValidators(),e.set("showEmail",!0),e.set("showSms",!1),e.set("applicationActivities",[]),e.getApplicationDetails(),e.set("disbaleSendQuote",!0),e.set("visibleLinks",[]),Komodo.Services.securityService.hasPermission("clarity://settleDPPPlan/NotAllowed")||e.get("data.visibleLinkss").push({title:kl.value(e._localeBase+"settlePlanTitle"),action:"settlePlanLink"}),Komodo.Services.securityService.hasPermission("clarity://cancelDPPPlan/Allowed")&&e.get("data.visibleLinkss").push({title:kl.value(e._localeBase+"cancelPlanTitle"),action:"CancelPlanLink"}),Komodo.Services.securityService.hasPermission("clarity://settleDPPPlanButton/Allowed")?e.set("hideSettlePlanButton",!1):(e.set("settledPlanButton",!0),e.set("hideSettlePlanButton",!0)),e.validateMigrate()},registerValidators:function(){var e=this;e.registerValidator(e.get("data"),"othEmail",{minLength:6,maxLength:254,type:"string",displayName:kl.value(this._localeBase+"email"),regExPattern:Komodo.UI.Validators.RegExPatterns.Email}),e.registerValidator(e.get("data"),"othPhone",{type:"number",limitValueToType:!0,minLength:7,maxLength:10,displayName:kl.value(this._localeBase+"phoneNumber"),functions:Komodo.UI.Validators.numericValidator}),e.registerValidator(e.get("data"),"othCountryCode",{type:"number",limitValueToType:!0,minLength:2,maxLength:4,displayName:kl.value(this._localeBase+"countryCode"),functions:Komodo.UI.Validators.numericValidator}),e.registerValidator(e.get("data"),"termOfPayment",{type:"string"}),e.registerValidator(e.get("data"),"contactType",{type:"string"}),e.registerValidator(e.get("data"),"upgradeDate",{type:"date",minDate:e.get("data.upgradeDateValue")}),e.registerValidator(e.get("data"),"productNameToUpgrade",{type:"string",isRequired:!0,displayName:kl.value(e._localeBase+"productNameToUpgradeTo")}),e.registerValidator(e.get("settleAdhocModel"),"boundAdhocLowerDate",{type:"date",isRequired:!0,minDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),maxDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()+30),displayName:kl.value(e._localeBase+"scheduleDate")})},loadTitles:function(){var e=this;e.set("titles",[]),Komodo.Services.cachedDataService.fetch("Title").done(function(t){$.each(t,function(t,a){e.titles.addObject(a)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve Titles from CDM")})},loadProducts:function(){var e=this;Komodo.Services.queryService.getJSON("/CreditApplication/GetAllDPPProducts").done(function(t){if(null!=t){
e.set("_allProductName",[]);for(var a=0;a<t.length;a++)if(!0===t[a].Active){var o={Name:t[a].Name,Description:t[a].Description,Active:t[a].Active};e._allProductName.push(o)}}}).error(function(e){var t=JSON.stringify(e);Komodo.log("GetAllDPPProducts ajax call failed. Error: "+t)})},loadUpGradeProducts:function(){var e=this;Komodo.Services.queryService.getJSON("/Device/GetUpgradeDowngradePackages?fromPackageName="+e.get("product")).done(function(t){null!=t&&(e.set("_ProductName",[]),$.each(e._allProductName,function(a,o){for(var n=0;n<t.length;n++)if(o.Active&&o.Name===t[n].ToPackageName){var s={key:o.Name,label:o.Description};e._ProductName.push(s)}}))}).error(function(e){var t=JSON.stringify(e);Komodo.log("retrievePrintDocumentInfo ajax call failed. Error: "+t)})},validateMigrate:function(){var e=this;if(Ember.isEmpty(e.get("deviceSerialNumber")))return void Komodo.Controls.MessageBoxController.show("Missing Fields","Missing Serial Number",Komodo.Controls.MessageBoxOkButtons,e,"authmbx3","danger");Komodo.Services.queryService.getJSONFromApiRoot("decoders/"+e.get("deviceSerialNumber")+"/payment-plan?accountNumber="+e.get("accountNumber")).done(function(t){e.set("data.checkMigrate",!0),t.canMigrate?e.set("migrateDppDevice",!0):e.set("migrateDppDevice",!1)}).error(function(t){if(Ember.isEmpty(t.responseJSON))0===t.status?Komodo.Controls.MessageBoxController.show("Error","Service Unavailable",Komodo.Controls.MessageBoxOkButtons,e,"authmbx3","danger"):Komodo.Controls.MessageBoxController.show(t.statusText,"Status :  "+t.status+", Error : "+t.statusText,Komodo.Controls.MessageBoxOkButtons,e,"authmbx3","danger");else{Komodo.log("Override-payment-details Call fail : "+t.responseJSON.detail);var a=t.responseJSON.detail;Ember.isEmpty(t.responseJSON.detail)&&(a=t.responseJSON.message),Komodo.Controls.MessageBoxController.show(kl.value(t.statusText),"Status :  "+t.status+", Error : "+a,Komodo.Controls.MessageBoxOkButtons,e,"authmbx3","danger")}})},setCountry:function(){var e=this,t=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),a=Komodo.Services.localizationService.getCurrentLanguage();e.set("country",t),e.set("loggedInCountryId",t),e.set("loggedInCountryName",Komodo.Services.uiService.getController("application").get("_selectedCountryDescription"));var o=e.get("settlePlanModel");o.set("documentTypes",[]);var n=e.get("cancelPlanModel");n.set("documentTypes",[]),e.getStaticCDMData(e.get("country"),a,"DocumentType",o.documentTypes,"settle"),e.getStaticCDMData(e.get("country"),a,"DocumentType",n.documentTypes,""),n.documentTypes[0]={key:1,value:"No Type Selected"},Komodo.Services.cachedDataService.fetch("AccountStatus",{domain:t,qualifier:a}).done(function(t){e.set("accountStatuses",[]),e.set("accountStatuses",t)}).fail(function(){Komodo.log("[ERROR] : could not retrieve Account Status domain = "+t+"/ qualifier = "+a)}),Komodo.Services.cachedDataService.fetch("AccountType",{domain:t,qualifier:a}).done(function(t){e.set("accountTypes",[]),e.set("accountTypes",t)}).fail(function(){Komodo.log("[ERROR] : could not retrieve Account Type domain = "+t+"/ qualifier = "+a)}),Komodo.Services.cachedDataService.fetch("MethodOfPayment",{domain:t,qualifier:a}).done(function(t){e.set("paymentMethods",[]),e.set("paymentMethods",t)}).fail(function(){Komodo.log("[ERROR] : could not retrieve MethodOfPayment domain = "+t+"/ qualifier = "+a)})},getStaticCDMData:function(e,t,a,o,n){Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){switch(o.clear(),a){case"DocumentType":$.each(e,function(e,t){"None"!==t.value&&("settle"===n?"21"==t.key&&o.addObject(t):o.addObject(t))});break;default:$.each(e,function(e,t){o.addObject(t)})}}).fail(function(){Komodo.log("[ERROR] : could not retrieve static CDM data for "+a)})},getApplicationDetails:function(){var e=this;e.set("applicationActivities",[]),Komodo.Services.queryService.getJSON("/CreditApplication/Get?applicationId=&IdNumber=&pageNumber=0&pageSize=0&financialAccountId="+e.get("accountNumber")).done(function(t){if(Ember.isEmpty(t[0].SalesOrderDetail)||Ember.isEmpty(t[0].SalesOrderDetail.SalesOrderID)||e.set("salesOrderId",t[0].SalesOrderDetail.SalesOrderID),Ember.isEmpty(t[0].PersonalDetail)||(e.set("data.email",t[0].PersonalDetail.Email),e.set("data.othEmail",e.get("data.email"))),Ember.isEmpty(t[0].ApplicationDetail.ApplicationId)||e.set("applicationId",t[0].ApplicationDetail.ApplicationId),e.set("applicationActivities",[]),!Ember.isEmpty(t[0].ApplicationActivity))for(var a=0;a<t[0].ApplicationActivity.length;a++){var o=t[0].ApplicationActivity,n={activity:o[a].Action,date:o[a].ActionDate,user:o[a].Actor,remark:o[a].Remark};e.get("applicationActivities").pushObject(n)}}).error(function(e){JSON.stringify(e)})},hideAllMenu:function(){var e=this;e.set("cancelViewFlag",!0),e.set("settlementQuoteViewFlag",!0),e.set("settlementPlanFlag",!0),e.set("upgradeFlag",!0)},fetchDataFromCrm:function(){var e=this;Komodo.Services.queryService.getJSON("/CustomerProfile?customerId="+e.get("customerNumber")).done(function(t){var a="<DPPSettlementQuotes><CustomerDetails><PersonalDetails><CustomerNumber>"+e.get("customerNumber")+"</CustomerNumber>",o=t.CustomerDetail;if(null!=o){if(!Ember.isEmpty(o.ListOfEmail))for(var n=0;n<o.ListOfEmail.Email.length;n++){var s=o.ListOfEmail.Email[n];s.IsPrimary&&e.set("data.othEmail",s.Value)}a+="<Title>"+e.getTitleCanonicalValue(o.PersonalDetail.Title)+"</Title>",a+="<Name>"+o.PersonalDetail.FirstName+"</Name>",a+="<Surname>"+o.PersonalDetail.Surname+"</Surname>",a+="</PersonalDetails><AddressDetails><UnitNumber>";for(var r=o.ListOfAddress.Address,n=0;n<r.length;n++){var i=r[n];if(i.Type==Komodo.CanonicalValues.AddressTypes.Physical){var l=e.get("quotes")[0];a+=i.BuildingNumber+"</UnitNumber>",a+="<BuildingName>"+i.BuildingName+"</BuildingName>",a+="<StreetNumber></StreetNumber>",a+="<StreetName>"+i.Street+"</StreetName>",a+="<Suburb>"+i.Suburb+"</Suburb>",a+="<City>"+i.City+"</City>",a+="<Province></Province>",a+="<PostalCode>"+i.PostCode+"</PostalCode>",a+="<Country>South Africa</Country>",a+="</AddressDetails></CustomerDetails><QuoteDetails><DecoderNumber>"+l.DecoderNumber+"</DecoderNumber><ExpiryDate>"+l.ExpiryDate+"</ExpiryDate><OutstandingAmount>"+e.get("currencyMnemonics")+" "+l.OutstandingAmount+"</OutstandingAmount><ArrearsAmount>"+e.get("currencyMnemonics")+" "+l.ArrearsAmount+"</ArrearsAmount><DiscountAmount>"+e.get("currencyMnemonics")+" "+(l.DiscountAmount>0?"-":"")+l.DiscountAmount+"</DiscountAmount><SettlmentAmount>"+e.get("currencyMnemonics")+" "+l.SettlementAmount+"</SettlmentAmount></QuoteDetails></DPPSettlementQuotes>"}}a=a.replace("&","&amp;"),e.set("xmlString",a)}}).error(function(e){var t=JSON.stringify(e);Komodo.log("retrieveCustomer ajax call failed. Error: "+t)})},getTitleCanonicalValue:function(e){for(var t=this,a=0;a<t.titles.length;a++)if(t.titles[a].key===e)return t.titles[a].value},getNewProcessID:function(){this.startNewProcess()},generateSettlementQuotes:function(){var e=this;Komodo.Services.queryService.getJSON("/CreditApplication/GetSettlementQuotes?customerNumber="+e.get("customerNumber")+"&deviceSerialNumber="+e.get("deviceSerialNumber")+"&smartcard="+e.get("smartcardNumber")+"&financialAccountId="+e.get("accountNumber")).done(function(t){if(null!=t){e.set("quotes",[]);var a;e.fetchDataFromCrm(),e.set("quoteId",void 0),e.set("quoteId",t.Id),a=Ember.Object.create({Id:t.Id,FinancialAccountId:t.FinancialAccountId,DecoderNumber:t.DecoderNumber,OutstandingAmount:t.OutstandingAmount.toFixed(2),DiscountAmount:t.DiscountAmount.toFixed(2),ArrearsAmount:t.ArrearsAmount.toFixed(2),SettlementAmount:t.SettlementAmount.toFixed(2),Status:t.Status,ExpiryDate:e.getFormattedDate(t.ExpiryDate),FulfilmentDate:e.getFormattedDate(t.FulfilmentDate),CreatedDate:t.CreatedDate,CreatedBy:t.CreatedBy}),e.get("data").set("isQuoteAvailable",!0),e.get("quotes").pushObject(a),e.set("financialAccountId",t.FinancialAccountId),e.set("status",t.Status),"Fulfilled"==t.Status&&e.set("settledPlanButton",!0),e.set("expiryDate",e.getFormattedDate(t.ExpiryDate)),e.set("quoteStatus",t.Status),e.set("outstandingBalance",e.get("currencyMnemonics")+" "+t.OutstandingAmount.toFixed(2)),e.set("discount",e.get("currencyMnemonics")+" "+(t.DiscountAmount.toFixed(2)>0?"-"+t.DiscountAmount.toFixed(2):t.DiscountAmount.toFixed(2))),e.set("arrearsAmount",e.get("currencyMnemonics")+" "+t.ArrearsAmount.toFixed(2)),e.set("totalAmountToSettle",e.get("currencyMnemonics")+" "+(0===Math.abs(t.SettlementAmount.toFixed(2))?"0.00":t.SettlementAmount.toFixed(2))),e.set("settleAdhocModel.settleAccountNumber",t.FinancialAccountId),e.set("settleAdhocModel.settleCustomerNumber",e.get("customerNumber")),e.set("status",t.Status),e.set("settleAdhocModel.totalAdhocAmountToSettle",e.get("currencyMnemonics")+" "+t.SettlementAmount.toFixed(2)),e.retrieveCustomerFinancialAccounts(e.get("customerNumber"))}}).error(function(e){var t=JSON.stringify(e);Komodo.log("Get Settlement Quotes ajax call failed. Error: "+t)})},previewQuote:function(){var e=this;Komodo.Services.queryService.postJSON("/CreditApplication/GetEmailTemplate",{data:e.get("xmlString")}).done(function(t){e.get("data").set("htmlData",t),e.hideBusyIndicator();var a=Komodo.Services.uiService.showModalPopup("Settlement Quotation",null,{view:Komodo.Application.DPPQuotePreviewView,context:{data:e.get("data"),prinQoute:function(){var e=document.getElementById("quotePreview").innerHTML,t=window.open("","","width="+screen.width+",height="+screen.height);t.document.write(e),t.document.close(),t.focus(),t.print(),t.close()},Close:function(){a.close()}},canUserClose:!0})}).error(function(t){e.hideBusyIndicator();var a=JSON.stringify(t);Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.useCaseTitle"),a,Komodo.Controls.MessageBoxOkButtons,e,"authmbx","danger")})},publishOutbondNotificationEvent:function(e){var t=this,a=Komodo.Models.SendOutboundNotification.create(),o=Komodo.canonicalFacadeFactory(a,["Country","ListOfOutboundNotification"]);o.set("Country",t.get("country"));var n=Komodo.Models.ListOfOutboundNotification.create(),s=Komodo.canonicalFacadeFactory(n,["OutboundNotification"]),r=Komodo.Models.OutboundNotification.create(),i=Komodo.canonicalFacadeFactory(r,["BusinessEntity","BusinessUnit","Country","TemplateName","ListOfRecipient","ListOfAttachment","MessageData"]);i.set("BusinessEntity","DPPNotifications"),i.set("BusinessUnit","Multichoice"),i.set("Country",t.get("loggedInCountryName")),i.set("TemplateName","DPPSettlementQuotation"),i.set("MessageData",e);var l=Komodo.Models.ListOfRecipients.create(),c=Komodo.canonicalFacadeFactory(l,["Recipient"]),u=Komodo.Models.Recipient.create(),d=Komodo.canonicalFacadeFactory(u,["CommunicationType","Language","MessageUID","From","To","ScheduledDate","ExpiryDate","ListOfContext"]);d.set("Language","English"),d.set("CommunicationType",t.get("data.communicationType")),d.set("From","NoReply.DecoderPaymentPlan@MultiChoice.co.za"),d.set("To",t.get("data.othEmail")),c.set("Recipient",u),i.set("ListOfRecipient",l),s.set("OutboundNotification",r),o.set("ListOfOutboundNotification",n),t.getNewProcessID(),Komodo.Services.manageAccountService.sendOutbondNotification(t,a).done(function(){Komodo.log("publishsendOutbondNotificationEvent() : Send Outbond Notification event has been published.");var e="Email"==t.get("data.communicationType")?t.get("data.othEmail"):t.get("data.othCountryCode")+" "+t.get("data.othPhone");Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.useCaseTitle"),t.get("data.communicationType")+" "+kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.messageSent")+" "+e,Komodo.Controls.MessageBoxOkButton,t,"id5446673","success")}).fail(function(){Komodo.log("publishsendOutbondNotificationEvent() : Cancel Payment Plan event has failed.")})},cancelSettlePaymentPlanEvent:function(e){var t=this,a=null;a="settle"==e?Komodo.Models.SettleDecoderPaymentPlan.create():Komodo.Models.CancelDecoderPaymentPlan.create();var o=Komodo.canonicalFacadeFactory(a,["Country","CustomerID","DPPHardware","SalesOrderID","FinancialAccount","DecoderPaymentPlanID"]);o.set("Country",t.get("country")),o.set("CustomerID",t.get("data.iccCustomerNumber"));var n=Komodo.Models.ListOfHardware.create(),s=Komodo.canonicalFacadeFactory(n,["Hardware"]),r=Komodo.Models.Hardware.create(),i=Komodo.canonicalFacadeFactory(r,["SerialNumber","Status","StatusReason","ManufactureDate","MACAddress","OriginalSmartcard","SmartcardDetail","InsuranceStartDate","CustomerWarrantyEndDate","CustomerWarrantyStartDate","ManufacturerWarrantyEndDate","ManufacturerWarrantyStartDate","InsuranceStatus","WarrantyStatus","LinkedSmartcard","LinkedSmartcardStatus","LinkedSmartcardStatusReason","ProductDetail","ListOfService","SecondaryHardware","IsAwaitingInstallation"]),l=Komodo.Models.ProductDetail.create(),c=Komodo.canonicalFacadeFactory(l,["UID","Type","Name","Model","Manufacturer","Description","Offers","Price","ProductFeatures"]);i.set("SerialNumber",t.get("deviceSerialNumber")),i.set("LinkedSmartcard",t.get("smartcardNumber")),c.set("UID",t.get("productId")),c.set("Name",t.get("product")),i.set("ProductDetail",l),s.set("Hardware",r),o.set("DPPHardware",n),o.set("SalesOrderID",t.get("salesOrderId"));var u=Komodo.Models.Account.create();Komodo.canonicalFacadeFactory(u,["Type","UID","Name","StartDate","EndDate","DunningLevel","ChargeDate","Balance","TermOfPayment","Status","PaymentDetail","ListOfAgreement","BillingAddress"]).set("UID",t.get("accountNumber")),o.set("FinancialAccount",u),"settle"==e?o.set("DecoderPaymentPlanID",t.get("quoteId")):o.set("DecoderPaymentPlanID",t.get("productInstallmentPlanId")),t.getNewProcessID(),t.showBusyIndicator(),"settle"==e?Komodo.Services.manageAccountService.settleDecoderPaymentPlan(t,a).done(function(){t.set("settledPlanButton",!0),Komodo.log("publishSettlePaymentPlanEvent() : Settle Payment Plan event has been published.")}).fail(function(){t.hideBusyIndicator(),Komodo.log("publishCancelPaymentPlanEvent() : Cancel Payment Plan event has failed.")}):Komodo.Services.manageAccountService.cancelDecoderPaymentPlan(t,a).done(function(){Komodo.log("publishCancelPaymentPlanEvent() : Settle Payment Plan event has been published.")}).fail(function(){t.hideBusyIndicator(),Komodo.log("publishCancelPaymentPlanEvent() : Cancel Payment Plan event has failed.")})},VerifyAccountFunds:function(){var e=this,t=e.get("quotes");e.getNewProcessID(),e.showBusyIndicator(),Komodo.Services.queryService.getJSON("/CreditApplication/VerifyAccountFunds?financialAccountId="+t[0].FinancialAccountId+"&amount="+t[0].SettlementAmount).done(function(t){e.hideBusyIndicator(),t?e.cancelSettlePaymentPlanEvent("settle"):Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.useCaseTitle"),kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.VerifyAmount"),Komodo.Controls.MessageBoxOkButtons,e,"authmbx","warning")}).error(function(t){e.hideBusyIndicator();var a=JSON.stringify(t);Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.useCaseTitle"),a,Komodo.Controls.MessageBoxOkButtons,e,"authmbx","danger")})},collapsibleViewLinks:function(){return this.get("data").get("visibleLinkss")}.property(),getLanguages:function(){var e=this;e.set("languages",[]),e.set("contactDetailTypes",[]),Komodo.Services.cachedDataService.fetch("CommunicationLanguage").done(function(t){$.each(t,function(t,a){e.languages.addObject(a)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve CommunicationLanguage from CDM")}),Komodo.Services.cachedDataService.fetch("ContactDetailType").done(function(t){$.each(t,function(t,a){e.contactDetailTypes.addObject(a)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve ContactDetailType from CDM")})},methodOfCommunicationChanged:function(){if(void 0!==this.data.communicationType)switch(this.data.communicationType){case"Email":this.set("data.othPhone",void 0),this.set("data.othCountryCode",void 0),this.set("showEmail",!0),this.set("showSms",!1),this.get("data.email")&&this.set("data.othEmail",this.get("data.email")),this.get("data.othEmail")&&this.get("data.othEmail").length>0?this.set("data.isButtonDisabled",!1):this.set("data.isButtonDisabled",!0);break;case"SMS":this.set("data.othEmail",void 0),this.set("showSms",!0),this.set("showEmail",!1),this.get("data.phone")&&(this.set("data.othCountryCode",this.get("data.phone").split(" ")[0].replace("+","",-1)),this.set("data.othPhone",this.get("data.phone").split(" ")[1])),this.get("data.othPhone")&&this.get("data.othCountryCode")&&this.get("data.othPhone").length>0&&this.get("data.othCountryCode").length>0?this.set("data.isButtonDisabled",!1):this.set("data.isButtonDisabled",!0)}else this.set("data.isButtonDisabled",!0)}.observes("data.communicationType"),otherMobileNumberChanged:function(){switch(this.get("data.othPhone")){case void 0:case"":case null:this.set("data.isButtonDisabled",!0);break;default:switch(this.get("data.othCountryCode")){case void 0:case"":case null:this.set("data.isButtonDisabled",!0);break;default:this.data.communicationType&&this.data.communicationLanguage&&this.data.othPhone.length<=10&&this.data.othPhone.length>=7&&this.data.othCountryCode.length<=4&&this.data.othCountryCode.length>=1?this.set("data.isButtonDisabled",!1):this.set("data.isButtonDisabled",!0)}}}.observes("data.othPhone","data.othCountryCode"),otherEmailChanged:function(){switch(this.get("data.othEmail")){case void 0:case"":case null:this.set("data.isButtonDisabled",!0);break;default:this.data.communicationType&&this.data.communicationLanguage&&this.get("validators.othEmailValidator.isValid")&&this.data.othEmail.length>=6&&this.data.othEmail.length<=254?this.set("data.isButtonDisabled",!1):this.set("data.isButtonDisabled",!0)}}.observes("data.othEmail"),stop:function(){var e=this;this.set("salesOrderId",void 0),this.set("quoteId",void 0),this.set("settledPlanButton",!1),this.set("xmlString",void 0),this.set("data.settleComment",void 0),this.set("data.cancelComment",void 0),e.set("disableprintQuoteButton",void 0),e.set("settledPlanButton",void 0),e.set("isButtonDisabled",void 0),e.set("disableaddSettlementDocButton",void 0),e.set("disableuploadDocSettlementButton",void 0),e.set("disablecancelSelectDocButton",void 0),e.set("disablecancelUploadDocButton",void 0),e.set("quotes",void 0),e.set("applicationActivities",void 0),e.set("financialAccountId",void 0),e.set("quoteStatus",void 0),e.set("hideSettlePlanButton",!1),e.set("disablePayButtons",!0),e.set("isNotValidStatus",!1),e.set("strmessage",void 0),e.set("migrateDppDevice",!1),e.set("visibleLinks",[]),e.set("data.visibleLinkss",[]),e.set("data.checkMigrate",!1),this._super()},messageDecoderPaymentPlanCancelledReceived:function(e){var t=this;t.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.useCaseTitle"),kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.cancelSuccessful"),Komodo.Controls.MessageBoxOkButtons,t,"authmbx","success").response=function(e){t.set("data.cancelComment",void 0),t.transitionToRoute("/paymentPlanApplications")}},messageDecoderPaymentPlanSettledReceived:function(e){var t=this;t.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.useCaseTitle"),kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.settledSuccessful"),Komodo.Controls.MessageBoxOkButtons,t,"authmbx","success").response=function(e){t.set("data.settleComment",void 0),t.transitionToRoute("/paymentPlanApplications")}},messageFailureMessageEventReceived:function(e){try{Komodo.Services.busyService.stop(this.get("processId"),"blocking"),"CreateInteraction"!=e.ResponseMessage.Payload.OriginatedEventName?Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"):Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.problemInActivity"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}catch(e){this.handleException("messageFailureMessageEventReceived",e,!0,!0)}},messageDeliveryFailure:function(e){try{this.messageHandle(e,"Communication failure between the browser and webMethods broker generic publish. No specific delivery failure method for the given event name could be found.")}catch(e){this.handleException("messageDeliveryFailure",e,!0,!0)}},messageFault:function(e){try{this.messageHandle(e,"FaultException occurred in the broker indicating message can't be processed for message type. No fault method implementation.")}catch(e){this.handleException("messageFault",e,!0,!0)}},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,6e4,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},getFormattedDate:function(e){var t="";if("0001-01-01T00:00:00"===e)return"";if(e){var a=e.split("T"),o=new Date(a[0]),n=o.getDate();n=n<10?"0"+n.toString():n.toString();var s=o.getMonth()+1;s=s<10?"0"+s.toString():s.toString();t=n+"/"+s+"/"+o.getFullYear()}return t},validateAdhocBusinessRules:function(e){var t=this;t.getNewProcessID(),t.showBusyIndicator(),""!==e&&void 0!==e||(e=t.settleAdhocModel.get("settleAccountNumber")),Komodo.Services.queryService.getJSON("/DebitOrder/IsAdHocDebitOrderTransactionInprogress?financialAccountId="+e).done(function(e){void 0!==e&&null!==e&&Komodo.Services.queryService.getJSON("/DebitOrder/IsCustomerAdhocBlocked?customerId="+t.get("settleAdhocModel.settleCustomerNumber")+"&schedule="+new moment(t.get("settleAdhocModel.boundAdhocLowerDate")).format("YYYY-MM-DDThh:mm:ss")).done(function(a){var o=a.split("|");if(t.set("strmessage",""),"Pending"===e.AHVStatus&&!0===e.IsPendingAdhocTransaction){t.set("isNotValidStatus",!0);var n=kl.value(t.localGeneral+"alreadyAHVPending")+"</br>"+kl.value(t.localGeneral+"pendingAdhocrequest");t.set("strmessage",n)}if("Pending"===e.AHVStatus&&!1===e.IsPendingAdhocTransaction&&(t.set("isNotValidStatus",!0),t.set("strmessage",t.get("strmessage")+kl.value(t.localGeneral+"alreadyAHVPending"))),""===e.AHVStatus&&!0===e.IsPendingAdhocTransaction&&(t.set("isNotValidStatus",!0),t.set("strmessage",t.get("strmessage")+kl.value(t.localGeneral+"pendingAdhocrequest"))),"No Record Found"===e.AHVStatus&&!0===e.IsPendingAdhocTransaction&&(t.set("isNotValidStatus",!0),t.set("strmessage",t.get("strmessage")+kl.value(t.localGeneral+"pendingAdhocrequest"))),"true"===o[0]&&(t.set("isNotValidStatus",!0),t.set("strmessage",t.get("strmessage")+"This customer is blocked from "+moment(o[1]).format(KomodoConfiguration.dateFormat)+" to "+moment(o[2]).format(KomodoConfiguration.dateFormat))),!1===t.get("isNotValidStatus")){var s,r=Komodo.Models.Price.create(),i=Komodo.Services.systemService,l=t.getPaymentDetailsForPayload();s=t.settleAdhocModel.get("totalAdhocAmountToSettle").split(" ")[1],r.set("Value",s),r.set("CurrencyCode","0"),r.set("ValueWithoutTax",s);var c=Komodo.Models.CreateAdHocDebitOrder.create(),u=Komodo.canonicalFacadeFactory(c,["Country","FinancialAccountUID","PaymentDetail","Amount","AdHocDebitOrderRunDate"]);u.set("Country",t.loggedInCountryId),u.set("FinancialAccountUID",t.settleAdhocModel.get("settleAccountNumber")),u.set("Amount",r),u.set("PaymentDetail",l),u.set("AdHocDebitOrderRunDate",i.universalDateString(new Date(t.settleAdhocModel.get("boundAdhocLowerDate")))),t.publishAdhocPaymentReqOnBus(c,"CreateAdHocDebitOrder","v1")}else t.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(t.localGeneral+"customerblockedfor"),t.get("strmessage"))}).error(function(e){t.hideBusyIndicator();var a=JSON.stringify(e),o=e.responseJSON.ExceptionMessage?e.responseJSON.ExceptionMessage:e.responseJSON.Message;Komodo.log("[ERROR] : retriveCustomersAdhocblockedstatus ajax call failed. Error: "+a),Komodo.Controls.MessageBoxController.show(kl.value(t.localGeneral+"moduleTitle"),"[ERROR] : retriveCustomersAdhocblockedstatus ajax call failed. Error: "+o,Komodo.Controls.MessageBoxOkButtons,t,"id5446674","danger")})}).error(function(e){t.hideBusyIndicator();var a=JSON.stringify(e),o=e.responseJSON.ExceptionMessage?e.responseJSON.ExceptionMessage:e.responseJSON.Message;Komodo.log("[ERROR] : retriveCustomersAdhocblockedstatus ajax call failed. Error: "+a),Komodo.Controls.MessageBoxController.show(kl.value(t.localGeneral+"moduleTitle"),"[ERROR] : retriveCustomersAdhocblockedstatus ajax call failed. Error: "+o,Komodo.Controls.MessageBoxOkButtons,t,"id5446674","danger")})},messageNotifyAdHocDebitOrderSubmittedReceived:function(message){if(void 0!==message.ResponseMessage.Payload){var accountId=message.ResponseMessage.Payload.FinancialAccountUID,that=this,serviceObj=Komodo.Services.systemService;that.set("disablePayButtons",!0),that.hideBusyIndicator();var messageBox=Komodo.Controls.MessageBoxController.show(kl.value(this.localGeneral+"successful"),kl.value(that.localGeneral+"successfulMsg"),Komodo.Controls.MessageBoxOkButton,that,"id5446676","success");messageBox.response=function(action){if("ok"===action){that.getApplicationDetails();var adhocDateToFormat=that.settleAdhocModel.get("boundAdhocLowerDate"),adhocDateForSettle=new moment(adhocDateToFormat).format("YYYY-MM-DD"),adhocAmount=that.get("settleAdhocModel.totalAdhocAmountToSettle"),remark=kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.adhocActivitySuccessRemark",{dateAdhoc:adhocDateForSettle,acc:accountId,amt:adhocAmount}),successActivity=eval("Komodo.ActivityStatus.ADHOC_DEBIT_SUCCESS");Komodo.Services.queryService.postJSON("/CreditApplication/AddApplicationActivity?activity="+successActivity+"&applicationId="+that.applicationId+"&remark="+remark).done(function(e){Komodo.Services.queryService.getJSON("/CreditApplication/Get?applicationId=&IdNumber=&pageNumber=0&pageSize=0&financialAccountId="+that.get("accountNumber")).done(function(e){})})}}}},messageFailureMessageEventReceived:function(message){var that=this;that.hideBusyIndicator();var title=kl.value(that.localGeneral+"moduleTitle");message.ResponseMessage.Payload.ListOfErrorDetails.ErrorType&&(title=message.ResponseMessage.Payload.ListOfErrorDetails.ErrorType);var messageBox=Komodo.Controls.MessageBoxController.show(title,message.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButtons,that,"id5446674","danger");messageBox.response=function(action){if("ok"===action){that.getApplicationDetails();var adhocDateToFormat=that.settleAdhocModel.get("boundAdhocLowerDate"),adhocDateForSettle=new moment(adhocDateToFormat).format("YYYY-MM-DD"),adhocAmount=that.get("settleAdhocModel.totalAdhocAmountToSettle"),remark=kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.adhocActivitySuccessRemark",{dateAdhoc:adhocDateForSettle,acc:accountId,amt:adhocAmount}),successActivity=eval("Komodo.ActivityStatus.ADHOC_DEBIT_FAILURE");Komodo.Services.queryService.postJSON("/CreditApplication/AddApplicationActivity?activity="+activity+"&applicationId="+that.applicationId+"&remark="+remark).done(function(e){Komodo.Services.queryService.getJSON("/CreditApplication/Get?applicationId=&IdNumber=&pageNumber=0&pageSize=0&financialAccountId="+that.get("accountNumber")).done(function(e){})})}}},messageFault:function(e){this.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(this.localGeneral+"moduleTitle"),kl.value(this.localGeneral+"anErrorHasOccurredMsg"),Komodo.Controls.MessageBoxOkButtons,this,"id5798673","danger")},publishAdhocPaymentReqOnBus:function(e,t,a){var o=Komodo.Services.manageAccountService,n="Event Message for "+t+" ";o.publishEvent(this,e,t,a).done(function(){Komodo.log(n+" has been published successfully")}).fail(function(e,t){Komodo.log(n+" has been failed"),Komodo.Services.messagingService.removeMessages(t)})},splitNameForPayload:function(){var e=this,t=this.get("settleAdhocModel");if(void 0!=t.get("accountHolderNameForSettle").toLowerCase()&&""===e.get("BHName")){var a=t.get("accountHolderNameForSettle").toLowerCase(),o=a.split(" ");e.set("BHName",void 0),e.set("BHSurname",void 0);for(var n=0;n<=o.length;n++){if(void 0!=o[n]||""!=o[n]){if(void 0==e.get("BHName")){var s=o[n].charAt(0).toUpperCase()+o[n].substring(1);e.set("BHName",s)}if(void 0==e.get("BHSurname")&&void 0!=e.get("BHName")&&void 0!=o[n+1]){var r=o[n+1].charAt(0).toUpperCase()+o[n+1].substring(1);e.set("BHSurname",r)}}break}}},initializePaymentDetails:function(){var e=this;e.set("settleAdhocModel.settleCustomerNumber","-"),e.set("settleAdhocModel.boundAdhocLowerDate",void 0),e.set("settleAdhocModel.accountHolderNameForSettle","-"),e.set("settleAdhocModel.adhocAccountHolderId","-"),e.set("settleAdhocModel.bankAdhocAccType","-"),e.set("settleAdhocModel.adhocBankName","-"),e.set("settleAdhocModel.adhocBankNameNumber","-"),e.set("settleAdhocModel.adhocBranchNameNumber","-"),e.set("settleAdhocModel.adhocBranchName","-"),e.set("settleAdhocModel.adhocBranchCode","-"),e.set("settleAdhocModel.totalAdhocAmountToSettle","-"),e.set("settleAdhocModel.adhocBankNameNumber","-"),e.set("settleAdhocModel.accountHolderSurnameForSettle","-"),e.set("settleAdhocModel.adhocAHVStatus","-"),e.set("settleAdhocModel.adhocPayerIdType","-"),e.set("settleAdhocModel.adhocDebitOrderDay","-")},getPaymentDetailsForPayload:function(){var e=this,t=Komodo.Models.PaymentDetail.create(),a=this.get("settleAdhocModel");return paymentDetailFacade=Komodo.canonicalFacadeFactory(t,["MethodOfPayment","AccountNumber","BankAccountType","BankName","BranchName","BranchCode","DebitOrderDay","PayerName","PayerSurname","AHVStatus","PayerIDNumber","PayerIDType","YearsAtBank","IsSalaryMandated"]),paymentDetailFacade.set("MethodOfPayment",a.get("adhocMethodOfPayment")),paymentDetailFacade.set("BankAccountType",a.get("bankAdhocAccType")),a.get("settleAccountNumber")?paymentDetailFacade.set("AccountNumber",a.get("settleAccountNumber")):paymentDetailFacade.set("AccountNumber",""),paymentDetailFacade.set("BankName",a.get("adhocBankNameNumber")),paymentDetailFacade.set("BranchCode",a.get("adhocBranchCode")),paymentDetailFacade.set("BranchName",a.get("adhocBranchNameNumber")),e.splitNameForPayload(),paymentDetailFacade.set("PayerName",e.get("BHName")),paymentDetailFacade.set("PayerSurname",e.get("BHSurname")),paymentDetailFacade.set("PayerIDNumber",a.get("adhocAccountHolderId")),paymentDetailFacade.set("AHVStatus",a.get("adhocAHVStatus")),paymentDetailFacade.set("DebitOrderDay",a.get("adhocDebitOrderDay")),paymentDetailFacade.set("PayerIDType",a.get("adhocPayerIdType")),paymentDetailFacade.set("YearsAtBank",void 0),paymentDetailFacade.set("IsSalaryMandated",void 0),t},setBankDetailsForAdhocDebitOrderPopUp:function(){var e=this;if(void 0!=Komodo.Services.customerProfileService.currentFinancialAccounts&&null!=Komodo.Services.customerProfileService.currentFinancialAccounts){var t=Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount;void 0!=t.Account&&t.Account.forEach(function(t){!0===t.IsDefault&&(e.set("settleAdhocModel.adhocBankName",t.PaymentDetails.BankName),e.set("settleAdhocModel.adhocBankNameNumber",t.PaymentDetail.BankName),e.set("settleAdhocModel.adhocBranchNameNumber",t.PaymentDetail.BranchName),e.set("settleAdhocModel.adhocBranchCode",t.PaymentDetail.BranchCode),e.set("settleAdhocModel.bankAdhocAccType",t.PaymentDetail.BankAccountType),e.set("settleAdhocModel.adhocMethodOfPayment",t.PaymentDetail.MethodOfPayment),
e.set("settleAdhocModel.adhocDebitOrderDay",t.PaymentDetail.DebitOrderDay),e.set("settleAdhocModel.accountHolderNameForSettle",t.PaymentDetails.PayerName),e.set("settleAdhocModel.accountHolderSurnameForSettle",t.PaymentDetail.PayerSurname),e.set("settleAdhocModel.adhocPayerIdType",t.PaymentDetails.PayerIdType),e.getBranchName(),t.PaymentDetails&&t.PaymentDetail&&!Ember.isEmpty(t.PaymentDetail.PayerIDNumber)?e.set("settleAdhocModel.adhocAccountHolderId",t.PaymentDetail.PayerIDNumber):e.set("settleAdhocModel.adhocAccountHolderId",e.get("settleAdhocModel.settleCustomerNumber"))),t.Type===Komodo.AccountTypes.PAYMENT_PLAN&&e.set("settleAdhocModel.adhocAHVStatus",t.PaymentDetail.AHVStatus)})}},retrieveCustomerFinancialAccounts:function(e){var t=this;Komodo.Services.queryService.getJSON("AccountProfile/Get?id="+e).done(function(e){t.bindCustomerFinancialAccounts(e)}).error(function(e){var a=JSON.stringify(e);Komodo.log("retrieveFinancialAccounts ajax call failed. Error: "+a),Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.useCaseTitle"),e.responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,t,"id5446673","danger")})},setOLTModel:function(){var e=this;if(e.get("quotes")&&e.get("quotes.length")&&e.get("quotes.length")>0)var t=e.quotes[0].SettlementAmount;var a=new Array;e.get("financialAccounts")&&e.financialAccounts.forEach(function(o){if(e.get("accountNumber")==o.id){var n={financialAccountId:o.id,totalAmountToPay:parseFloat(0).toFixed(2),type:o.type,methodOfPayment:o.methodOfPayment,status:o.status,displayText:o.displayText,chargeuntildate:o.chargeuntildate,currencyCode:o.currencyCode,isDefault:o.isDefault,overdue:parseFloat(t).toFixed(2),products:o.products,isChecked:o.isChecked};a.push(n)}});var o=Komodo.Services.customerProfileService.personalDetails,n=[];return a&&a.forEach(function(e){var t=Komodo.Models.OnlineTill.CustomerModel.create();t.set("customerNumber",o.customerNo),t.set("title",o.title),t.set("customerFirstname",o.firstName),t.set("customerSurname",o.lastName);var s="";s=Ember.isEmpty(o.title)?"":o.title,s+=Ember.isEmpty(o.firstName)?"":" "+o.firstName,s+=Ember.isEmpty(o.lastName)?"":" "+o.lastName,t.set("customerName",s),t.set("customerClass",o.customerClassText),t.set("customerType",o.customerTypeText),t.set("telNo",o.telNo),t.set("mobileNo",o.mobileNo),t.set("locationIndicator",o.locationIndicator),t.set("email",o.email),t.set("isActiveCustomer",o.isActiveCustomer),t.set("isDstv",o.isDstv),t.set("isGotv",o.isGotv),t.set("businessUnit",Ember.isEmpty(o.viewPlatform)?"":o.viewPlatform.toUpperCase()),t.set("customerStatus",o.customerStatus);var r=[];a.forEach(function(e){var t=Komodo.Models.OnlineTill.AccountModel.create();t.set("accountNumber",e.financialAccountId),t.set("balance",e.totalAmountToPay),t.set("type",e.type),t.set("methodOfPayment",e.methodOfPayment),t.set("status",e.status),t.set("displayText",e.displayText),t.set("chargeuntildate",e.chargeuntildate),t.set("overdue",e.overdue),t.set("currencyCode",e.currencyCode),t.set("isDefault",e.isDefault),t.set("products",e.products),t.set("selected",!0),t.set("quotes",[]),r.push(t)}),t.set("accounts",r),t.set("quotes",[]),t.set("quote",[]);var i=Komodo.Models.OnlineTill.AccountModel.create();i.set("accountNumber",e.financialAccountId),i.set("balance",e.totalAmountToPay),i.set("type",e.type),i.set("methodOfPayment",e.methodOfPayment),i.set("status",e.status),i.set("displayText",e.displayText),i.set("chargeuntildate",e.chargeuntildate),i.set("currencyCode",e.currencyCode),i.set("isDefault",e.isDefault),t.set("account",i),t.set("payAmount",parseFloat(e.totalAmountToPay)+parseFloat(e.overdue)),n.push(t)}),n},bindCustomerFinancialAccounts:function(e){var t=this;this.set("financialAccounts",[]),this.set("financialAccountsCurrency","");var a,o=0,n=0;e.Account.forEach(function(e){var n=t.getValueFromKey(t.get("accountStatuses"),e.Status),s=t.getValueFromKey(t.get("accountTypes"),e.Type),r=void 0,i="";Ember.isEmpty(e.PaymentDetail)||(r=t.getValueFromKey(t.get("paymentMethods"),e.PaymentDetail.MethodOfPayment),i=t.getDueDateOfAnAccount(e.PaymentDetail.DebitOrderDay));var l="";Ember.isEmpty(e.Balance)||Ember.isEmpty(e.Balance.Value)||(l=parseFloat(e.Balance.CurrencyCode));var c="-";e.Balance.Value>0&&("15"==e.Type?(c=new Date,c=XDates.getformatedDateforUI(new Date(c))):c=kl.value(t.localGeneral+"dueImmediately"));var u={id:e.UID,balanceAmount:e.Balance.Value,status:Ember.isEmpty(n)?"":n,type:Ember.isEmpty(s)?"":s,methodOfPayment:Ember.isEmpty(r)?"":r,chargeuntildate:i,displayText:"",isDefault:e.IsDefault,isChecked:!1,overdue:parseFloat(e.Balance.Value).toFixed(2),currencyCode:l,products:t.populateProductModel(e),desc:t.getAccountTypeText(e.Type),dueDate:c};if(u.displayText=u.id+": "+u.desc,t.get("accountNumber")==u.id&&(u.isChecked=!0,a=u.overdue,t.get("numberOfRemainingInstalment")>0&&t.set("financialAccountAmt",u.overdue),u.overdue<0)){var d=u.overdue.split("-");o=d[1]}t.financialAccounts.addObject(u)}),t.get("quotes")&&t.get("quotes.length")&&t.get("quotes.length")>0&&(n=0===Math.abs(t.quotes[0].SettlementAmount)?0:t.quotes[0].SettlementAmount),n>0&&t.set("disablePayButtons",!1)},getValueFromKey:function(e,t){var a;return e.forEach(function(e){e.key==t&&(a=e.value)}),a},getAccountTypeText:function(e){var t,a=Komodo.Services.customerProfileService.get("accountType");if(a&&null!=e){return a.AccountTypes.AccountType.forEach(function(a){a.CanonicalKey==e&&(t=a.AccountTypeDescription)}),t}},populateProductModel:function(e){var t=[];return void 0!==e.ListOfAgreement&&null!==e.ListOfAgreement&&$(e.ListOfAgreement.Agreement).each(function(a,o){void 0!==o.ListOfHardware&&$(o.ListOfHardware.Hardware).each(function(a,o){void 0!==o.ListOfService&&null!==o.ListOfService&&$(o.ListOfService.Service).each(function(a,n){var s=Komodo.Models.OnlineTill.ProductModel.create();s.set("accountNumber",e.UID),s.set("productId",n.UID),s.set("productStatus",n.Status),s.set("hardware",o.ProductDetail.Name),s.set("productName",n.ProductDetail.Name),s.set("productType",n.ProductDetail.Type),s.set("smartcardNumber",o.LinkedSmartcard),t.push(s)})})}),t},getDueDateOfAnAccount:function(e){var t=parseInt(e,10),a=null,o=new Date,n=new Date(o.getFullYear(),o.getMonth(),t);return a=1===XDates.compare(o,n)?XDates.getNextMonthDateForDay(e):n,XDates.getDateFromJavascriptDate(a)},checkAdhocDateisValidBusinessDate:function(e){var t=this,a=void 0;if(a=e,void 0!=t.get("validBusinessDays"))for(var o=t.get("validBusinessDays"),n=0;n<o.length;n++)if(moment(o[n].value).format(KomodoConfiguration.dateFormat)===moment(a).format(KomodoConfiguration.dateFormat))return!0;return!1},setBusinessDays:function(){var e=this;Komodo.Services.cachedDataService.fetch("BusinessWorkingDays").done(function(t){e.get("validBusinessDays").clear(),$.each(t,function(t,a){e.get("validBusinessDays").addObject(a)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve hierarchical example data")})},getBanks:function(){var e=this;Komodo.Services.cachedDataService.fetch("BankDetail").done(function(t){var a=JSON.parse(t);e.get("banks").clear(),$.each(a.Banks.Bank,function(t,a){e.get("banks").addObject(a)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve hierarchical example data")})},getBranchName:function(){var e=this;e.getBanks();var t=e.get("banks");Ember.isEmpty(t)||t.forEach(function(t){t.CanonicalKey==e.get("settleAdhocModel.adhocBankNameNumber")&&(void 0!=t.Branches.Branch.length?t.Branches.Branch.forEach(function(t){t.BranchCode==e.get("settleAdhocModel.adhocBranchCode")&&e.set("settleAdhocModel.adhocBranchName",t.CanonicalValue)}):t.Branches.Branch.BranchCode==e.get("settleAdhocModel.adhocBranchCode")&&e.set("settleAdhocModel.adhocBranchName",t.Branches.Branch.CanonicalValue))})},actions:{upgradeProductLink:function(){this.loadUpGradeProducts(),$("#dpp-linkActions").css("display","");var e=this.get("currentDiv");this.get("currentTittle");void 0!=e?(this.data.set("currentTittle","UPGRADE PRODUCT"),$("#"+e).css("display","none"),this.set("currentDiv","upgradeProductDiv"),e=this.get("currentDiv"),$("#"+e).css("display","")):(this.data.set("currentTittle","UPGRADE PRODUCT"),this.set("currentDiv","upgradeProductDiv"),e=this.get("currentDiv"),$("#"+e).css("display",""))},generateSettlementQuoteLink:function(){var e=this;$("#dpp-linkActions").css("display","");var t=e.get("currentDiv");void 0!=t?(e.data.set("currentTittle","GET SETTLEMENT QUOTE"),$("#"+t).css("display","none"),e.set("currentDiv","settlementQuote"),t=e.get("currentDiv"),$("#"+t).css("display","")):(e.data.set("currentTittle","GET SETTLEMENT QUOTE"),e.set("currentDiv","settlementQuote"),t=e.get("currentDiv"),$("#"+t).css("display",""))},settlePlanLink:function(){var e=this;if(e.get("data.checkMigrate")&&!e.get("migrateDppDevice")){$("#dpp-linkActions").css("display","");var t=e.get("currentDiv");void 0!=t?(e.data.set("currentTittle","SETTLE PLAN"),$("#"+t).css("display","none"),e.set("currentDiv","settlePlanDiv"),t=e.get("currentDiv"),$("#"+t).css("display","")):(e.data.set("currentTittle","SETTLE PLAN"),e.set("currentDiv","settlePlanDiv"),t=e.get("currentDiv"),$("#"+t).css("display",""))}},CancelPlanLink:function(){var e=this;if(e.get("data.checkMigrate")&&!e.get("migrateDppDevice")){$("#dpp-linkActions").css("display","");var t=this.get("currentDiv");void 0!=t?(this.data.set("currentTittle","CANCEL PLAN"),$("#"+t).css("display","none"),this.set("currentDiv","cancelPlanDiv"),t=this.get("currentDiv"),$("#"+t).css("display","")):(this.data.set("currentTittle","CANCEL PLAN"),this.set("currentDiv","cancelPlanDiv"),t=this.get("currentDiv"),$("#"+t).css("display",""))}},upgradePlan:function(){},printQuote:function(){var e=this;e.getNewProcessID(),e.showBusyIndicator(),e.previewQuote()},sendQuotation:function(){var e=this;this.get("data.othEmail")&&this.get("validators.othEmailValidator.isValid")&&this.data.othEmail.length>=6&&this.data.othEmail.length<=254?e.publishOutbondNotificationEvent(e.get("xmlString")):Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.useCaseTitle"),kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.emailValidation"),Komodo.Controls.MessageBoxOkButtons,e,"id5446674","danger")},useCredit:function(){},payVia:function(){},payNow:function(){var e=this;Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:paymentPlanApplicationDetails.useCaseTitle"),kl.value("locale.manageviewing:reconnect.payNowConfirm"),Komodo.Controls.MessageBoxYesNoButtons,e,"id123456","warning").response=function(t){if("yes"==t){var a=e.setOLTModel();Komodo.Services.navigationService.activateGroup(Komodo.NavigationGroupNames.OnlineTill),Komodo.Services.uiService.transitionTo("customerPayment"),Komodo.Services.eventAggregator.publish("PublishCustomerPayment",a)}}},viewAmtForAdhocdebitorder:function(){var e=this;if(e.setBusinessDays(),e.setBankDetailsForAdhocDebitOrderPopUp(),void 0==e.get("settleAdhocModel.adhocBankName")||void 0==e.get("settleAdhocModel.adhocBankName")||void 0==e.get("settleAdhocModel.adhocBranchNameNumber")||void 0==e.get("settleAdhocModel.adhocBranchCode")||void 0==e.get("settleAdhocModel.bankAdhocAccType")||void 0==e.get("settleAdhocModel.adhocMethodOfPayment")||void 0==e.get("settleAdhocModel.accountHolderNameForSettle")||void 0==e.get("settleAdhocModel.adhocPayerIdType")||void 0==e.get("settleAdhocModel.adhocDebitOrderDay")||void 0==e.get("settleAdhocModel.adhocAHVStatus"))Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.useCaseTitle"),kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.invalidBankDetails"),Komodo.Controls.MessageBoxOkButtons,e,"id54456673","warning");else var t=Komodo.Services.uiService.showModalPopup(kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.popUpAdhocTitle"),null,{view:Komodo.Application.SettleViaAdhocDebitOrderView,context:{settlePlanPopupDetails:e.get("settleAdhocModel"),validators:e.validators,onSubmitAdhocPaymentReq:function(){if(Ember.isEmpty(e.settleAdhocModel.get("boundAdhocLowerDate")))alert(kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.dateValidation")),e.settleAdhocModel.set("boundAdhocLowerDate",void 0);else{if(0==e.canSubmitData(e.settleAdhocModel,kl.value(e._localeBase+"scheduleDate"),{showInModal:!1}))return;var t=e.checkAdhocDateisValidBusinessDate(e.settleAdhocModel.get("boundAdhocLowerDate"));void 0!=t&&0==t?(alert(kl.value(e.localGeneral+"businessDateNotValid")),e.settleAdhocModel.set("boundAdhocLowerDate",void 0)):e.validateAdhocBusinessRules(e.get("financialAccountId"))}},onCancelAdhocPaymentReq:function(){t.close()}},canUserClose:!0})},upgradePlanShow:function(){},getSettlementQuoteShow:function(){},viewDocs:function(e){var t=e.content,a=t.documentName,o=this.get("settlePlanModel");$(o.customerDocuments).each(function(e,t){t.documentName===a&&window.open(t.documentUrl,"","_blank")})},removeDocument:function(e){var t=this,a=e.content.documentName,o=t.get("settlePlanModel"),n=-1,s="";$(o.customerDocuments).each(function(e,t){t.documentName===a&&(n=e,s=t.documentName)}),n>-1&&(o.customerDocuments.removeAt(n),o.fileUploader.files.removeAt(n))},settlePlan:function(){var e=this;if(Ember.isEmpty(e.get("data.settleComment")))return void Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.useCaseTitle"),kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.missingValues")+" Comment",Komodo.Controls.MessageBoxOkButtons,e,"authmbx","warning");e.VerifyAccountFunds()},cancelDecoderPlan:function(){var e=this;if(Ember.isEmpty(e.get("data.cancelComment")))return void Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.useCaseTitle"),kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.missingValues")+" Comment",Komodo.Controls.MessageBoxOkButtons,e,"authmbx","warning");e.cancelSettlePaymentPlanEvent("cancel")},viewCancelDocs:function(e){var t=e.content,a=t.documentName,o=this.get("cancelPlanModel");$(o.customerDocuments).each(function(e,t){t.documentName===a&&window.open(t.documentUrl,"","_blank")})},removeCancelDocument:function(e){var t=this,a=e.content.documentName,o=t.get("cancelPlanModel"),n=-1,s="";$(o.customerDocuments).each(function(e,t){t.documentName===a&&(n=e,s=t.documentName)}),n>-1&&(o.customerDocuments.removeAt(n),o.fileUploader.files.removeAt(n))},migrateDevice:function(){var e=this;e.showBusyIndicator(),Komodo.Services.queryService.patchJSONApiRoot("decoders/"+e.get("deviceSerialNumber")+"/payment-plan?isMigrate=true&accountNumber="+e.get("accountNumber")).done(function(t){if(e.hideBusyIndicator(),t.isMigrated){Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.endContractHeader"),kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.endConcractSuccessMassage"),Komodo.Controls.MessageBoxOkButtons,e,"authmbx","success").response=function(e){"ok"===e&&(Komodo.Services.navigationService.activateGroup(Komodo.NavigationGroupNames.ManageViewing),Komodo.Services.uiService.transitionTo("manageViewing"))}}else Komodo.Controls.MessageBoxController.show(kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.endContractHeader"),kl.value("locale.manageAccount.paymentPlan:manageDevicePaymentPlan.endConcractUnsuccessMassage"),Komodo.Controls.MessageBoxOkButtons,e,"authmbx","danger")}).error(function(t){if(e.hideBusyIndicator(),Ember.isEmpty(t.responseJSON))Komodo.Controls.MessageBoxController.show(t.statusText,"Status :  "+t.status+", Error : "+t.statusText,Komodo.Controls.MessageBoxOkButtons,e,"authmbx3","danger");else{Komodo.log("Override-payment-details Call fail : "+t.responseJSON.detail);var a=t.responseJSON.detail;Ember.isEmpty(t.responseJSON.detail)&&(a=t.responseJSON.message),Komodo.Controls.MessageBoxController.show(kl.value(t.statusText),"Status :  "+t.status+", Error : "+a,Komodo.Controls.MessageBoxOkButtons,e,"authmbx3","danger")}})}},disableupgradePlanButton:!1,disablecancelDecoderPlanButton:!1,disablesettleDecoderPlanButton:!1,disableprintQuoteButton:!1,isButtonDisabled:!1,disbaleSendQuote:!0,quoteId:void 0,communicationMethods:[{Key:"1",Value:"Email"},{Key:"2",Value:"SMS"}],languages:[],contactDetailTypes:[],salesOrderId:"NA",smartcardNumber:void 0,deviceSerialNumber:void 0,outstandingBalance:void 0,discount:void 0,arrearsAmount:void 0,totalAmountToSettle:void 0,expiryDate:void 0,status:void 0,quoteStatus:void 0,financialAccountId:void 0,showSms:!1,_localeBase:"locale.manageAccount.paymentPlan:manageDevicePaymentPlan.",loggedInCountry:void 0,productId:void 0,paymentPlanTotal:void 0,amountPerInstalment:void 0,deviceNumber:void 0,product:void 0,productInstallmentPlanId:void 0,quotes:[],applicationActivities:[],applicationId:void 0,loggedInCountryName:void 0,settledPlanButton:!1,xmlString:void 0,titles:[],_productName:[],_allProductName:[],visibleLinks:[],hideSettlePlanButton:!1,settleObject:[],disablePayButtons:!0,banks:[],validBusinessDays:[],isNotValidStatus:!1,strmessage:void 0,totalAdhocAmountToSettle:void 0,financialAccId:void 0}),Komodo.Application.ArchivedFinancialTransactionsController=Komodo.UI.Controller.extend({localeArchiveFT:"locale.manageaccount:archivedFinancialTransactions.",popUpScreen:void 0,transactionNumber:void 0,init:function(){Komodo.log("Constructing Archived Financial Transactions Controller"),this.set("processVersion","v1.1"),this.set("processName","Archived Financial Transactions"),this.set("accountno",""),this.set("creationDateTemp",""),this.set("customerId",""),this.subscribeArchiveFinancialTransactionsRetrievedReceived(),this.subscribeArchiveFinancialTransactionRetrievedError(),this._super()},start:function(){var e=this;this.set("archiveFTModel",Komodo.Models.ArchivedFinancialTransactionsModel.create()),this.set("reverseArchivedFinancialTransactionModel",Komodo.Models.ReverseArchivedFinancialTransactionModel.create()),this.set("loggedInCountryName",this.getLoggedIncountry());var t=Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo;t?(this.set("sharedObject",Komodo.Application.ManageAccountSharedObjectController.create()),this.set("customerId",t),this.retrieveDefaultAccount(),Komodo.Services.featureToggleService.isEnabled("ManageAccount","ArchivedFTs").done(function(t){t?(e.set("showReversal",!1),e.set("useZAFAjaxCall",!0)):(e.set("showReversal",Komodo.Services.securityService.hasPermission("clarity://reverseArchiveFinancialTransactionView/allowed")),e.set("useZAFAjaxCall",!1))}).fail(function(){Komodo.UI.error("[ERROR] : could not retrieve Archived FTs featureToggle")})):Komodo.Controls.MessageBoxController.show(kl.value(this.localeArchiveFT+"customerNotFound"),kl.value(this.localeArchiveFT+"selectCustomer")),this.getAllArchiveFT(),this._super()},getAllArchiveFT:function(){var e=this.get("sharedObject");this.getNewProcessID(),this.showBlockingBusyIndicator(),e.retrieveArchiveFinancialTransaction(1,50,this.get("customerId"),"0001-01-01T00:00:00","0001-01-01T00:00:00",null,this.get("loggedInCountryName"))},bindData:function(){var e=Komodo.Services.manageAccountService.currentArchiveFinancialTransactions;if(e.ResponseMessage&&e.ResponseMessage.Payload&&e.ResponseMessage.Payload.ListOfArchiveFinancialTransaction){var t=Komodo.Application.CustomerProfileMapper.create(),a=t.mapArchiveFinancialTransactions(e.ResponseMessage.Payload.ListOfArchiveFinancialTransaction.ArchiveFinancialTransaction);void 0==a?this.set("archiveFinancialTransactions",[]):this.set("archiveFinancialTransactions",a)}},subscribeArchiveFinancialTransactionsRetrievedReceived:function(){Komodo.Services.eventAggregator.subscribe("ArchiveFinancialTransactionsRetrievedReceived",function(){var e=Komodo.Services.uiService.getController("archivedFinancialTransactions");e.hideBusyIndicator(),e&&e.bindData()})},subscribeArchiveFinancialTransactionRetrievedError:function(){var e=this;Komodo.Services.eventAggregator.subscribe("ArchiveFinancialTransactionRetrievedError",function(){var t=Komodo.Services.uiService.getController("archivedFinancialTransactions");t.hideBusyIndicator(),t.set("archiveFinancialTransactions",[]);var a=Komodo.Services.manageAccountService.currentArchiveFinancialTransactionsError;null!=a&&void 0!=a&&""!=a&&a.toLowerCase().search(kl.value(e.localeArchiveFT+"archiveFTCustId"))>-1?Komodo.Controls.MessageBoxController.show(kl.value(e.localeArchiveFT+"archivedFinancialTransactionsTitle"),a,Komodo.Controls.MessageBoxOkButtons,e,"id5446673",""):Komodo.Controls.MessageBoxController.show(kl.value(e.localeArchiveFT+"technicalError"),a,Komodo.Controls.MessageBoxOkButtons,e,"id5446674","danger")})},showBlockingBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,3e5,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},getNewProcessID:function(){this.startNewProcess()},filterArchiveFT:function(){var e=this.get("archiveFTModel");if(this.canSubmitData(e,"Fill required data",{showInModal:!0})){var t,a,o,n,s="",r=e.accountNumber,i=new Date(e.fromDate),l=new Date(e.toDate);if(void 0!==i&&""!==i&&void 0!==l&&""!==l&&(t=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0),a=new Date(l.getFullYear(),l.getMonth(),l.getDate(),23,59,59),o=new moment(t).format("YYYY-MM-DDTHH:mm:ss"),(n=new moment(a).format("YYYY-MM-DDTHH:mm:ss"))<o&&(s+=kl.value(this.localeArchiveFT+"toDateMsg"))),void 0==i||""==i||"Invalid Date"==i.toString()||void 0==l||""==l||"Invalid Date"==l.toString())Komodo.Controls.MessageBoxController.show(kl.value(this.localeArchiveFT+"warning"),kl.value(this.localeArchiveFT+"warnMsg"),Komodo.Controls.MessageBoxOkButtons,this,"id5446675","warning");else if(void 0!==i&&""!==i&&void 0!==l&&""!==l&&s.length>0)Komodo.Controls.MessageBoxController.show("Archived Financial Transactions",s,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","alert");else if(void 0!=i&&""!=i||void 0!=l&&""!=l||null!=r&&void 0!=r){this.retrievedCArchiveFT=void 0,this.showBlockingBusyIndicator();var c=this.get("sharedObject");this.retrievedCArchiveFT=c.retrieveArchiveFinancialTransaction(1,2e3,this.get("customerId"),o,n,r,this.get("loggedInCountryName"))}else Komodo.Controls.MessageBoxController.show(kl.value(this.localeArchiveFT+"error"),kl.value(this.localeArchiveFT+"filterMsg"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","error")}},getLoggedIncountry:function(){return Komodo.Services.uiService.getController("application").get("_selectedCountryId")},stop:function(){this.set("archiveFinancialTransactions",[]),this.set("accountno",""),this._super()},setReversalArchivedData:function(){this.get("popUpScreen").close(),this.publishReverseArchivedFinancialTransactionsEvent()},retrieveDefaultAccount:function(){var e=this;Komodo.Services.queryService.refreshUserData(),Komodo.Services.queryService.getJSON("AccountProfile/Get?smartcardNumber=&customerUID="+this.get("customerId"),{async:!1}).done(function(t){if(t.FinancialAccounts.length>=1)for(var a=t.FinancialAccounts,o=0;o<a.length;o++)1==a[o].IsDefault&&e.archiveFTModel.set("defaultAccountNumber",a[o].Number);else Komodo.Controls.MessageBoxController.show("Error",kl.value(e.localeBase+"financialAccountNotFound"),Komodo.Controls.MessageBoxOkButtons,e,"message","warning"),e.hideBusyIndicator()}).error(function(t){e.hideBusyIndicator();var a="";a=t.responseJSON.Message?t.responseJSON.Message:t.responseJSON,Komodo.Controls.MessageBoxController.show("Error",a,Komodo.Controls.MessageBoxOkButtons,e,"message","warning")})},publishReverseArchivedFinancialTransactionsEvent:function(){var e=this,t=Komodo.Models.CreateManualAdjustmentTransactions.create(),a=Komodo.Services.manageAccountService,o=Komodo.canonicalFacadeFactory(t,["Country","BaseAmount","FromAccountUID","ToAccountUID","FromCustomerUID","ToCustomerUID","LedgerAccountUID","OriginalAmount","Description","FinancialTransactionUID","FinancialTransactionType","Comment","Language"]),n=Komodo.Models.Price.create(),s=Komodo.Models.Price.create(),r=e.getlistOfTax();n.set("Value",e.reverseArchivedFinancialTransactionModel.amount),n.set("CurrencyCode","0"),n.set("ValueWithoutTax",e.reverseArchivedFinancialTransactionModel.amount),n.set("ListOfTax",r),s.set("Value",e.reverseArchivedFinancialTransactionModel.originalAmount),s.set("CurrencyCode","0"),s.set("ValueWithoutTax",e.reverseArchivedFinancialTransactionModel.originalAmount),s.set("ListOfTax",r),o.set("Country",e.get("loggedInCountryName")),o.set("BaseAmount",n),o.set("FromAccountUID",e.archiveFTModel.get("defaultAccountNumber")),o.set("FromCustomerUID",e.get("customerId")),o.set("OriginalAmount",s),o.set("Description","Manual adjustment for Customers that exist on IBS 5.4"),o.set("FinancialTransactionUID",e.get("transactionNumber")),o.set("FinancialTransactionType","Reversal"),o.set("Comment",e.reverseArchivedFinancialTransactionModel.get("comment")),o.set("Language",""),e.startNewProcess(),e.showBlockingBusyIndicator(),a.publishEvent(e,t,"CreateManualAdjustmentTransactions","v1")},messageManualAdjustmentTransactionsCreatedReceived:function(e){this.hideBusyIndicator(),"True"==e.ResponseMessage.Payload.IsPendingApproval?Komodo.Controls.MessageBoxController.show(kl.value(this.localeArchiveFT+"reversalStatus"),kl.value(this.localeArchiveFT+"approvalReversal",{amount:e.ResponseMessage.Payload.BaseAmount.Value,accountNumber:this.archiveFTModel.get("defaultAccountNumber"),customerNumber:this.get("customerId")}),null,this,"id5446676","success"):Komodo.Controls.MessageBoxController.show(kl.value(this.localeArchiveFT+"reversalStatus"),kl.value(this.localeArchiveFT+"reversalRequest",{amount:e.ResponseMessage.Payload.BaseAmount.Value,accountNumber:this.archiveFTModel.get("defaultAccountNumber"),customerNumber:this.get("customerId")}),null,this,"id5446676","success")},messageManualAdjustmentTransactionsCreatedDeliveryFailure:function(e){Komodo.log(e)},messageManualAdjustmentTransactionsCreatedFault:function(e){Komodo.log(e)},messageReceived:function(e){Komodo.log(e)},messageDeliveryFailure:function(e){Komodo.log(e)},messageFault:function(e){Komodo.log(e)},messageFailureMessageEventReceived:function(e){this.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,null,this,"id5446674","danger")},getlistOfTax:function(){return Komodo.Models.Tax.create()},actions:{ViewArchivedTransactions:function(e){Komodo.Services.uiService.transitionTo("archivedFinancialTransactionDetails",{queryParams:{transactionId:e.get("content").transactionNumber}})},reverseArchivedFinancialTransaction:function(e){this.set("transactionNumber",e.content.transactionNumber),this.reverseArchivedFinancialTransactionModel.set("originalAmount",e.content.amount);var t=Komodo.Services.uiService.showModalPopup(kl.value(this.localeArchiveFT+"reverseArchivedFunds"),"reverseArchivedFinancialTransaction",{canUserClose:!0});this.set("popUpScreen",t)},searchAFT:function(){this.filterArchiveFT()},clearSearchParameters:function(){this.archiveFTModel.set("accountNumber",void 0),this.archiveFTModel.set("creationDate",void 0),this.archiveFTModel.set("fromDate",void 0),this.archiveFTModel.set("toDate",void 0)}}}),Komodo.Application.AdhocDebitOrderController=Komodo.UI.Controller.extend({localGeneral:"locale.manageAccount.adhocdebitorder:general.",localEditPaymeDetail:"locale.manageAccount.adhocdebitorder:paymentDetail.",inputDateTimeFormat:"YYYY-MM-DD 00:00:00",documentSerialNumbers:[],isAmountDisabled:!0,supervisorClaim:"clarity://adhoc/supervisor",supervisorApprovalCheck:["clarity://adhocDebitOrder/canSupervisorApproveAdhoc"],ahvApprovalCheck:"clarity://documentApproval/canApprove",dataGridFooters:[[],[],[],[]],isVisibleSelectRadioButton:!1,isCommercialCustomer:!1,isVisibleAccountNumbers:!1,isDebtOrderAccountExist:!1,isPaymentDetailsExist:!1,commercialAccNumbers:[],updateCommercialPaymentDetails:!1,needs:["genericPayment"],isAuthenticated:!1,supervisonrUserName:void 0,init:function(){this._super();this.set("banks",[]),this.set("BigSevenbanks",[]),this.set("bankBranches",[]),this.set("bankAccountTypes",[]),this.set("batype",""),this.set("debitOrderDays",[]),this.set("adhocDOrderModel",null),this.set("allAccounts",[]),this.set("accountQuotes",[]),this.set("smartcards",[]),this.set("methodOfPayments",[]),this.set("isAccHolderNameAndIdEnabled",!1),this.set("customerName",""),this.set("customerID",""),this.set("customerNumber",""),this.set("isCashAccountTypeRemoved",!1),this.set("isPasssportClient",!1),this.set("cashMOP",""),this.set("MOP",""),this.set("accountTypes",[]),this.set("customerModel",""),this.set("customerModels",""),this.set("amount",""),this.set("validBusinessDays",[]),this.set("scheduledAdhocDate",""),this.set("isFieldDisabled",!1),this.set("loggedInCountryId",void 0),this.set("noAccountExist",!1),this.set("isAccountDataAvailable",!0),this.set("isbranchCodeEnabled",!0),this.set("loggedInCountryName",""),this.set("requstforAHV",""),this.set("isClientOverriden",!1),this.set("AHVStatus",""),this.set("BankDetailsChangeStatus",""),this.set("BHName",""),this.set("BHSurname",""),this.set("processVersion","v1.1"),this.set("processName","Adhoc Debit Order controller"),this.requiresDependency("_queryService",{singleton:Komodo.Services.queryService}),this.requiresDependency("_securityService",{singleton:Komodo.Services.securityService}),this.registerModel("ahvOverrideModel",Komodo.Models.AHVSupervisorModel),this.set("isAHVOverrideAllowed",!0),this.set("isAuthenticated",!1),this.set("isDisabledpayerIsCustomer",!1),this.set("isAHVReson",!1),Komodo.log("Constructing Adhoc Debit Order controller");var e=this;e.registerModel("adhocDOrderModel",Komodo.Models.AdhocDebitOrderModel),e.registerModel("overrideCustomerDocument",Komodo.Models.AdhocCustomerDocumentModel),e.accdataGridColumns=[Komodo.Controls.DataGridColumn.create({name:"accountno",title:kl.value(this.localEditPaymeDetail+"accountNumber"),canEdit:!1,width:"100px"}),Komodo.Controls.DataGridColumn.create({name:"accountDescription",title:kl.value(this.localEditPaymeDetail+"accountDescription"),canEdit:!1,width:"150px"}),Komodo.Controls.DataGridColumn.create({name:"balance",title:kl.value(this.localEditPaymeDetail+"balance"),canEdit:!1,width:"100px",customClass:"komodo-decimal"}),Komodo.Controls.DataGridColumn.create({name:"amount",title:kl.value(this.localEditPaymeDetail+"quoteAmount"),canEdit:!1,width:"150px",customClass:"komodo-decimal"})]},resultAccountMessage:{ResponseMessage:{Payload:{ListOfAccount:{Account:[]}}}},start:function(){var e=this;if(e.getCDMData(),e.set("isAuthenticated",!1),helperFunction=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),!helperFunction.isCustomerIdIsAvailableToRetriveData())return Komodo.Controls.MessageBoxController.show(kl.value(this.localGeneral+"customerNotFound"),kl.value(this.localGeneral+"customerNotFoundMsg")),void Komodo.Services.uiService.transitionTo("home");customerInfo=helperFunction.getCustomerDetails(),this.set("customerClass",customerInfo.customerClass),customerInfo.customerClass===GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_COMMERCIAL")&&(this.set("isCommercialCustomer",!0),Ember.set(e,"adhocDOrderModel.selectRadioButtonValue","1"),this.set("updateCommercialPaymentDetails",!1)),this.set("customerNumber",customerInfo.customerNo),e.adhocDOrderModel.set("customerNo",customerInfo.customerNo),e.populateBasicDetails();var t=this.getSelectedAccount()
;if(Komodo.MethodOfPayment.AHV_PENDING==t.PaymentDetail.MethodOfPayment)return Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),kl.value(e.localGeneral+"alreadyAHVPendingMsg"),Komodo.Controls.MessageBoxOkButtons,e,"id5446675","warning"),void this.adhocDOrderModel.set("isSaveButtonDisabled",!0);if("Non-Compliant"==t.PaymentDetail.AHVStatus){return Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),kl.value(e.localGeneral+"nonCompliantBankingDetails"),Komodo.Controls.MessageBoxOkButtons,e,"id5446675","warning").response=function(e){"ok"==e&&Komodo.Services.uiService.transitionTo("/editPaymentDetails")},void this.adhocDOrderModel.set("isSaveButtonDisabled",!0)}e.overrideCustomerDocument.set("enableDocGrid",!0),this._super()},getSecurityService:function(){return this.get("_securityService")},clearData:function(){var e=this;e.set("adhocDOrderModel",Komodo.Models.AdhocDebitOrderModel.create()),e.set("overrideCustomerDocument",Komodo.Models.AdhocCustomerDocumentModel.create()),e.set("adhocDOrderModel.boundLowerDate",new Date),e.set("adhocDOrderModel.scheduledAdhocDate",this.get("adhocDOrderModel.boundLowerDate")),e.get("documentSerialNumbers").push({key:"N/A",value:"N/A"}),e.set("allAccounts",[]),e.set("ahvOverrideModel",[])},populateBasicDetails:function(){this.setBanks(),this.setBankAccountTypes(),this.registerValidation(),this.getCustomerDetails(),this.setBusinessDays(),this.setMethodOfPayment(),this.setAccountTypes()},registerValidation:function(){var e=this;e.registerValidator(e.get("adhocDOrderModel"),"accountHolderPhoneNumber",{type:"number",isRequired:!0,functions:Komodo.UI.Validators.DebitOrderValidator,minLength:9,maxLength:14,displayName:kl.value("locale.manageAccount.adhocdebitorder:paymentDetail.accHolderPhone")}),e.registerValidator(e.get("adhocDOrderModel"),"accountHolderEmailAddress",{type:"string",regExPattern:Komodo.UI.Validators.RegExPatterns.Email,minLength:6,maxLength:254,displayName:kl.value("locale.manageAccount.adhocdebitorder:paymentDetail.accHolderEmailId")}),e.registerValidator(e.get("adhocDOrderModel"),"bankAccountType",{type:"string",isRequired:!0,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.accountType")}),e.registerValidator(e.get("adhocDOrderModel"),"bankName",{type:"string",isRequired:!0,functions:Komodo.UI.Validators.DebitOrderValidator,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.bankName")}),e.registerValidator(e.get("adhocDOrderModel"),"branchName",{type:"string",isRequired:!0,functions:Komodo.UI.Validators.DebitOrderValidator,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.branchName")}),e.registerValidator(e.get("adhocDOrderModel"),"branchCode",{type:"string",isRequired:!0,functions:Komodo.UI.Validators.DebitOrderValidator,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.branchCode")}),e.registerValidator(e.get("adhocDOrderModel"),"accountNumber",{type:"number",isRequired:!0,functions:Komodo.UI.Validators.numericValidator,minLength:5,maxLength:15,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.accountNumber")}),e.registerValidator(e.get("adhocDOrderModel"),"amount",{isRequired:!0,type:"string",minLength:1,maxLength:50,regExPattern:"^[0-9.]*$"}),e.get("customerClass")==GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_COMMERCIAL")?(e.registerValidator(e.get("adhocDOrderModel"),"accountHolderName",{type:"string",isRequired:!0,minLength:3,maxLength:50,functions:Komodo.UI.Validators.shouldNotStartWithSpace,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.accountHolderFullName")}),e.registerValidator(e.get("adhocDOrderModel"),"accountHolderId",{type:"string",isRequired:!0,minLength:3,maxLength:50,functions:Komodo.UI.Validators.shouldNotStartWithSpace,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.accountHolderId")})):(e.registerValidator(e.get("adhocDOrderModel"),"accountHolderName",{type:"string",isRequired:!0,minLength:3,maxLength:101,functions:Komodo.UI.Validators.fullNameValidator,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.accountHolderFullName")}),e.registerValidator(e.get("adhocDOrderModel"),"accountHolderId",{type:"string",isRequired:!0,minLength:7,maxLength:20,functions:Komodo.UI.Validators.alphanumericValidator,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.accountHolderId")})),e.registerValidator(e.get("adhocDOrderModel"),"boundLowerDate",{type:"date",isRequired:!0,minDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),maxDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()+30)})},adhocLimitInNormalCondition:function(){var e=this;switch(e.get("customerClass")){case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_COMMERCIAL"):if(e.get("adhocDOrderModel.amount")<=Komodo.DebitOrder.ADHOC_COMMERCIAL_PAYMENT_LIMIT)return!0;break;case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_RESIDENTIAL"):if(e.get("adhocDOrderModel.amount")<=Komodo.DebitOrder.ADHOC_PAYMENT_LIMIT)return!0;break;default:return!0}return!1},adhocLimitForSpecificCondition:function(){var e=this;switch(e.get("customerClass")){case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_COMMERCIAL"):if(e.get("adhocDOrderModel.amount")>Komodo.DebitOrder.ADHOC_COMMERCIAL_PAYMENT_LIMIT&&e.get("adhocDOrderModel.amount")<=Komodo.DebitOrder.ADHOC_COMMERCIAL_PAYMORE_LIMIT)if(Komodo.Services.securityService.hasPermission("clarity://adhocDebitOrder/canSupervisorApproveAdhoc")){var t=kl.value(e.localEditPaymeDetail+"supervisorMsgBox"),a=Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),t,Komodo.Controls.MessageBoxYesNoButtons,e,"id5446675","warning");a.response=function(t){"yes"===t?(e.interactionDetails(e,Komodo.Services.securityService.get("domainUserName")),e.submitAdHocDebitOrder()):e.get("adhocDOrderModel").set("isSaveButtonDisabled",!1)}}else{var o=kl.value(e.localEditPaymeDetail+"confirmationMessageForSupervisor"),n=Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),o,Komodo.Controls.MessageBoxYesNoButtons,e,"id5446675","warning");n.response=function(t){"yes"===t?e.approvalMorePayBySupervisor():e.get("adhocDOrderModel").set("isSaveButtonDisabled",!1)}}else if(e.get("adhocDOrderModel.amount")>Komodo.DebitOrder.ADHOC_COMMERCIAL_PAYMORE_LIMIT)return void Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),kl.value(e.localEditPaymeDetail+"adhocLimitErrorMessage"),null,e,"id5446675","warning");break;case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_RESIDENTIAL"):if(e.get("adhocDOrderModel.amount")>Komodo.DebitOrder.ADHOC_PAYMENT_LIMIT&&e.get("adhocDOrderModel.amount")<=Komodo.DebitOrder.ADHOC_RESIDENTIAL_PAYMORE_LIMIT)if(Komodo.Services.securityService.hasPermission("clarity://adhocDebitOrder/canSupervisorApproveAdhoc")){var s=kl.value(e.localEditPaymeDetail+"supervisorMsgBox"),r=Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),s,Komodo.Controls.MessageBoxYesNoButtons,e,"id5446675","warning");r.response=function(t){"yes"===t?(e.interactionDetails(e,Komodo.Services.securityService.get("domainUserName")),e.submitAdHocDebitOrder()):e.get("adhocDOrderModel").set("isSaveButtonDisabled",!1)}}else{var i=kl.value(e.localEditPaymeDetail+"confirmationMessageForSupervisor"),l=Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),i,Komodo.Controls.MessageBoxYesNoButtons,e,"id5446675","warning");l.response=function(t){"yes"===t?e.approvalMorePayBySupervisor():e.get("adhocDOrderModel").set("isSaveButtonDisabled",!1)}}else if(e.get("adhocDOrderModel.amount")>Komodo.DebitOrder.ADHOC_RESIDENTIAL_PAYMORE_LIMIT)return void Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),kl.value(e.localEditPaymeDetail+"adhocLimitErrorMessage"),null,e,"id5446675","warning")}},interactionDetails:function(e,t){var a,o,n=Komodo.DebitOrder.ADHOC_SUCCESS_INTERACTION_CATEGORY,s=Komodo.DebitOrder.ADHOC_SUCCESS_INTERACTION_SUBCATEGORY,r=Komodo.DebitOrder.ADHOC_SUCCESS_INTERACTION_OUTCOME,i=e.get("adhocDOrderModel.customerNo");switch(e.get("customerClass")){case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_COMMERCIAL"):a=e.get("adhocDOrderModel.amount"),o=e.get("adhocDOrderModel.acccountId");var l=kl.value(e.localEditPaymeDetail+"interactionMsg");l=l.replace("_supervisorName_",t),l=l.replace("__financialId__",o),l=l.replace("__amount__",parseFloat(a).toFixed(2)),e.publishCreateInteraction(i,l,s,r,a,n,o);break;case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_RESIDENTIAL"):$.each(e.get("allAccounts"),function(l,c){a=parseFloat(c.amount)+parseFloat(c.balance),o=c.accountno;var u=kl.value(e.localEditPaymeDetail+"interactionMsg");u=u.replace("_supervisorName_",t),u=u.replace("__financialId__",o),u=u.replace("__amount__",parseFloat(a).toFixed(2)),0!=a&&e.publishCreateInteraction(i,u,s,r,a,n,o)})}},approvalMorePayBySupervisor:function(){var e=Komodo.Services.queryService.getSelectedCountryId(),t=this.get("controllers.genericPayment"),a=this;a.registerModel("supervisorApproval",Komodo.Models.OnlineTill.SupervisorApprovalModel),a.registerValidator(a.get("supervisorApproval"),"supervisorUsername",{isRequired:!0,displayName:kl.value(a.localEditPaymeDetail+"supervisorName"),minLength:1,maxLength:50}),a.registerValidator(a.get("supervisorApproval"),"passCode",{isRequired:!0,displayName:kl.value(a.localEditPaymeDetail+"passCode"),minLength:1,maxLength:50});var o=Komodo.Services.uiService.showModalPopup(kl.value(a.localGeneral+"popUpForSupervisor"),null,{view:Komodo.Application.SupervisorApprovalView,context:{data:a.get("supervisorApproval"),validators:a.validators,ok:function(){var n=this;!1!==a.canSubmitData(a.get("supervisorApproval"),kl.value(a.localGeneral+"moduleTitle"),{showInModal:!1})&&(n.data.set("disableAction",!0),t.validateUserClaim(e,n.data.get("supervisorUsername"),n.data.get("passCode"),a.supervisorApprovalCheck).done(function(e){void 0!==e?(a.interactionDetails(a,n.data.get("supervisorUsername")),a.submitAdHocDebitOrder(),n.data.set("supervisorUsername",void 0),n.data.set("passCode",void 0)):(o.close(),n.data.set("disableAction",!1),n.data.set("supervisorUsername",void 0),n.data.set("passCode",void 0),a.get("adhocDOrderModel").set("isSaveButtonDisabled",!1),Komodo.Controls.MessageBoxController.show(kl.value(a.localGeneral+"moduleTitle"),kl.value(a.localEditPaymeDetail+"unauthorizedSupervisor"),Komodo.Controls.MessageBoxOkButtons,a,"id5446674","warning"))}))},cancel:function(){var e=this;e.data.set("supervisorUsername",void 0),e.data.set("passCode",void 0),o.close()}},canUserClose:!0})},actions:{submitPayementDetail:function(e){this.canSubmitData(this.adhocDOrderModel,"Fill required data",{showInModal:!0})&&this.createAdhocDebitOrder(e)},cancelAction:function(){this.cancelEdit()},overrideStatus:function(){var e=this,t=[];if(e.startNewProcess(),e.get("isPasssportClient")?e.overrideCustomerDocument.set("refundDocumentTypes",[GetCustomerTypesConstants("RefundDocumentType","COPY_OF_PASSPORT"),GetCustomerTypesConstants("RefundDocumentType","BANK_STATEMENT")]):e.overrideCustomerDocument.set("refundDocumentTypes",[GetCustomerTypesConstants("RefundDocumentType","COPY_OF_ID"),GetCustomerTypesConstants("RefundDocumentType","BANK_STATEMENT")]),e.adhocDOrderModel.get("accountHolderName")||t.push("\nAccount Holder Name Required"),e.adhocDOrderModel.get("accountHolderId")||t.push("\nID/Passport Required"),e.adhocDOrderModel.get("bankName")||t.push("\nBank Required"),e.adhocDOrderModel.get("bankAccountType")||t.push("\nBank Account Type Required"),e.adhocDOrderModel.get("accountNumber")||t.push("\nAccount Number Required"),e.adhocDOrderModel.get("branchName")||t.push("\nBranch Name Required"),e.overrideCustomerDocument.get("customerDocuments").some(function(e){return void 0==e.documentType}))t.push("\n\nPlease specify document type for all added documents \n");else if(e.overrideCustomerDocument.get("customerDocuments").some(function(e){return"DONE"!=e.uploadStatus}))t.push("\n\nPlease upload all the documents \n");else{for(var a=0;a<e.overrideCustomerDocument.get("customerDocuments").length;a++)e.overrideCustomerDocument.get("customerDocuments")[a].documentType==GetCustomerTypesConstants("RefundDocumentType","COPY_OF_PASSPORT")&&e.overrideCustomerDocument.get("refundDocumentTypes").removeObject(e.overrideCustomerDocument.get("customerDocuments")[a].documentType),e.overrideCustomerDocument.get("customerDocuments")[a].documentType==GetCustomerTypesConstants("RefundDocumentType","COPY_OF_ID")&&e.overrideCustomerDocument.get("refundDocumentTypes").removeObject(e.overrideCustomerDocument.get("customerDocuments")[a].documentType),e.overrideCustomerDocument.get("customerDocuments")[a].documentType==GetCustomerTypesConstants("RefundDocumentType","BANK_STATEMENT")&&e.overrideCustomerDocument.get("refundDocumentTypes").removeObject(e.overrideCustomerDocument.get("customerDocuments")[a].documentType);e.overrideCustomerDocument.get("refundDocumentTypes").length>0&&t.push("\n\nPlease upload the following documents: \n-"+e.overrideCustomerDocument.get("refundDocumentTypes").join("\n-"))}t.length>0?Komodo.Controls.MessageBoxController.show(kl.value(this.localGeneral+"moduleTitle"),t.join(""),Komodo.Controls.MessageBoxOkButtons,this,"id5446675","warning"):(e.publishOverrideAHVStatus(),e.set("isClientOverriden",!0))},removeDocument:function(e){var t=this,a=e._parentView._childViews[0].text,o=t.get("overrideCustomerDocument"),n=-1,s="";$(o.customerDocuments).each(function(e,t){t.documentName===a&&(n=e,s=t.documentName)}),n>-1&&(o.customerDocuments.removeAt(n),o.fileUploader.files.removeAt(n))},viewDocument:function(e){var t=this,a=e._parentView._childViews[0].text,o=t.get("overrideCustomerDocument"),n=-1,s="";$(o.customerDocuments).each(function(e,t){t.documentName===a&&(n=e,s=t.documentName)});var r=o.fileUploader.files[n].getNative(),s=r.name,i=new window.FileReader;i.onload=function(e){saveAs(t.dataURItoBlob(e.target.result),s)},i.readAsDataURL(r)},authenticate:function(){var e=this;e._context;if(this.canSubmitData(this.ahvOverrideModel,"Fill required data",{showInModal:!0})){var t=(e.get("controllers.genericPayment"),Komodo.Services.securityService.get("domainUserName")),a=Komodo.Services.queryService.getSelectedCountryId();t!==e.get("ahvOverrideModel.ahvSupervisorUserName")?e.validateUserClaim(a,e.get("ahvOverrideModel.ahvSupervisorUserName"),e.get("ahvOverrideModel.passCode"),e.get("ahvApprovalCheck")).done(function(t){Ember.isEmpty(t)?(e.clearAllAHVOverrdieModel(),alert(kl.value("locale.onlinetill:customer.accessDenied"))):(e.set("supervisonrUserName",e.get("ahvOverrideModel.ahvSupervisorUserName")),e.set("isAuthenticated",!0))}):(e.clearAllAHVOverrdieModel(),alert(kl.value("locale.onlinetill:customer.unauthoriseError")))}},clear:function(){this.clearAHVOverride()},overrideAHV:function(){var e=this;$("#uploadfiles").trigger("click"),e.getNewProcessID(),e.showBlockingBusyIndicator(),e.set("isClientOverriden",!0);var t=helperFunction.getCustomerIdToRetrieveData(),a=e.get("adhocDOrderModel"),o=a.accountHolderName.trim().split(" "),n=o.length>=1?o[0]:"",s=o.length>=2?o[1]:"",r=(Komodo.Services.customerProfileService.personalDetails.email.indexOf("@")>0&&Komodo.Services.customerProfileService.personalDetails.email,e.getBankNamebyId(a.bankName)),i=e.getSelectedAccount(),l=i.PaymentDetail.MethodOfPayment==e.cashMOP.key?"cash":"debit order",c={};switch(e.get("isCommercialCustomer")){case!0:c={methodOfPayment:l,bankName:r,bankAccountType:a.batype,debitOrderDay:i.InvoicingProfileId,bankAccountNumber:a.accountNumber,bankBranchCode:a.branchCode,payerIdNumber:a.accountHolderId,emailAddress:a.accountHolderEmailAddress,phoneNumber:a.accountHolderPhoneNumber,commercialCustomerName:a.accountHolderName.trim(),commercialCustomerAccountNumber:i.UID};break;case!1:c={methodOfPayment:l,bankName:r,bankAccountType:a.batype,debitOrderDay:i.PaymentDetails.DebitOrderDay,bankAccountNumber:a.accountNumber,bankBranchCode:a.branchCode,payerIdNumber:a.accountHolderId,initials:n,surname:s,emailAddress:a.accountHolderEmailAddress,phoneNumber:a.accountHolderPhoneNumber}}e.callOverrideAHVService(t,c)},rejectAHV:function(){var e=this;e.logInteractionForAHVOverride(!1),e.clearAHVOverride()}},clearAHVOverride:function(){var e=this;e.clearAllAHVOverrdieModel(),void 0!=e.get("overrideCustomerDocument").customerDocuments&&e.get("overrideCustomerDocument").customerDocuments.clear(),e.set("ahvOverrideModel.acceptDocumentation",!1)},logInteractionForAHVOverride:function(e){var t=this,a=t.get("adhocDOrderModel"),o=Komodo.DebitOrder.ADHOC_SUCCESS_INTERACTION_CATEGORY,n=Komodo.DebitOrder.ADHOC_SUCCESS_INTERACTION_SUBCATEGORY,s=void 0,r=void 0,i=a.acccountId,l=a.customerNo,c=a.amount;e?(s=Komodo.DebitOrder.ADHOC_AHVVERIFIED_INTERACTION_OUTCOME,r=kl.value(t.localGeneral+"ahvoverrideAcceptMessage")):(s=Komodo.DebitOrder.ADHOC_AHVREJECTED_INTERACTION_OUTCOME,r=kl.value(t.localGeneral+"ahvOverrideReject")),r=r.replace("__supervisorName__",t.supervisonrUserName),r=r.replace("__customerID__",l),r=r.replace("__financialAccountId__",i),t.publishCreateInteraction(l,r,n,s,c,o,i)},dataURItoBlob:function(e){for(var t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],o=new ArrayBuffer(t.length),n=new Uint8Array(o),s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return new Blob([o],{type:a})},download:function(e,t,a){var o=document.createElement("a");if(o.setAttribute("href","data:"+t+","+encodeURIComponent(a)),o.setAttribute("download",e),document.createEvent){var n=document.createEvent("MouseEvents");n.initEvent("click",!0,!0),o.dispatchEvent(n)}else o.click()},getCDMData:function(){var e=this,t="",a="",o=$.Deferred(),n=e.get("overrideCustomerDocument");t=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),a=Komodo.Services.localizationService.getCurrentLanguage();var s=Komodo.Services.uiService.getController("application").get("_selectedCountryDescription");e.set("countryDesc",s),e.set("loggedInCountryId",t),Komodo.Services.cachedDataService.fetch("DocumentType",{domain:t,qualifier:a}).done(function(e){n.set("documentTypes",[]),n.set("documentTypes",e),o.resolve(e)}).fail(function(){Komodo.log("[ERROR] : could not retrieve DocumentType domain = "+t+"/ qualifier = "+a)})},getQueryService:function(){return this.get("_queryService")},getDefualtFinancialAccount:function(){var e=this,t=e.get("customerModel").accounts,a=new Object;if(t)for(var o=0;o<t.length;o++){if(!e.isCommercialCustomer&&t[o].isDefault){a=t[o];break}if(e.isVisibleSelectRadioButton&&e.isVisibleAccountNumbers){if(t[o].accountNumber===e.allAccounts[0].accountno){a=t[o];break}}else if(t[o].accountNumber===e.get("adhocDOrderModel.acccountId")){a=t[o];break}}return a},publishCreateInteraction:function(e,t,a,o,n,s,r){var i,l=this,c=Komodo.Models.CreateInteraction.create(),u=Komodo.Models.Case.create(),d=[],h=Komodo.DebitOrder.ADHOC_SUCCESS_INTERACTION_STATUS,m=Komodo.DebitOrder.ADHOC_SUCCESS_INTERACTION_INTERACTIONMEDIUM;if(u.set("InteracteeName",Komodo.Services.securityService.session.domainUserName),u.set("InteractionLocation",l.get("loggedInCountryId")),u.set("InteractionMedium",m),u.set("CustomerUID",e),s?u.set("Category",s):u.set("Category",3),u.set("SubCategory",a),u.set("Outcome",o),u.set("Status",h),u.set("Notes",t),i=Komodo.canonicalFacadeFactory(c,["Country","Case","ListOfCaseData_CaseData"]),n){var p=Komodo.Models.CaseData.create(),f=Komodo.canonicalFacadeFactory(p,["CaseDataValueUri","Value"]);f.set("CaseDataValueUri","Amount"),f.set("Value",n),d.push(p);var p=Komodo.Models.CaseData.create(),f=Komodo.canonicalFacadeFactory(p,["CaseDataValueUri","Value"]);f.set("CaseDataValueUri","FinancialAccountUID"),f.set("Value",r),d.push(p);var p=Komodo.Models.CaseData.create(),f=Komodo.canonicalFacadeFactory(p,["CaseDataValueUri","Value"]);f.set("CaseDataValueUri","DateOfExecution"),f.set("Value",l.adhocDOrderModel.get("boundLowerDate")),d.push(p),u.set("CreatedDate",new Date),u.set("CreatedBy",Komodo.Services.securityService.session.domainUserName)}Komodo.canonicalFacadeFactory(c,["Country","Case"]),i.set("Country",l.get("loggedInCountryId")),i.set("Case",u),i.set("ListOfCaseData_CaseData",d),l.publishRequestOnBus(c,"CreateInteraction","v1")},setAccountTypes:function(){this.set("accountTypes",Komodo.Services.customerProfileService.get("accountType").AccountTypes.AccountType)},setMethodOfPayment:function(){var e=this;Komodo.Services.cachedDataService.fetch("MethodOfPayment").done(function(t){e.get("methodOfPayments").clear(),$.each(t,function(t,a){e.get("methodOfPayments").addObject(a)}),"Cash"==e.get("methodOfPayments")[0].value&&e.set("cashMOP",e.get("methodOfPayments")[0])}).fail(function(){Komodo.log("[ERROR] : could not retrieve method of payment from CDM")})},setBankAccountTypes:function(){var e=this;Komodo.Services.cachedDataService.fetch("BankAccountType").done(function(t){var a=e.get("adhocDOrderModel");a.get("bankAccountTypes").clear(),e.get("bankAccountTypes").clear(),$.each(t,function(t,o){"CASH"!=o.value.toUpperCase()&&(e.get("bankAccountTypes").addObject(o),a.get("bankAccountTypes").addObject(o))})}).fail(function(){Komodo.log("[ERROR] : could not retrieve bank account type from CDM")})},setBanks:function(){var e=this;Komodo.Services.cachedDataService.fetch("BankDetail").done(function(t){var a=JSON.parse(t);e.get("banks").clear(),$.each(a.Banks.Bank,function(t,a){e.get("banks").addObject(a)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve hierarchical example data")})},setAllAccounts:function(e){var t=e[0],a=this;a.set("allAccounts",[]),a.set("commercialAccNumbers",[]);var o=[];this.set("customerModel",t),this.set("customerModels",e);var n=0;if(t){for(var s=0,r=0,i=0;i<e.length;i++)for(var l=0;l<e[i].accounts.length;l++){var c=e[i].accounts[l];c.selected&&(r=parseFloat(r)+parseFloat(c.overdue))}var u=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),d=u.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account);if(d.forEach(function(e){if(a.isCommercialCustomer&&t.account.accountNumber!==e.UID&&""!==e.PaymentDetail.AccountNumber){a.set("isDebtOrderAccountExist",!0);var o={key:e.UID,value:e.UID+": "+e.AccountTypeDescription};a.commercialAccNumbers.addObject(o)}t.account.accountNumber===e.UID&&(""!==e.PaymentDetail.AccountNumber?a.set("isPaymentDetailsExist",!0):a.set("isPaymentDetailsExist",!1))}),a.isCommercialCustomer&&"Cash"===t.account.methodOfPayment&&!a.isPaymentDetailsExist&&a.isDebtOrderAccountExist&&(a.set("isVisibleSelectRadioButton",!0),a.set("adhocDOrderModel.selectRadioButtonValue","2")),e){var h;e.forEach(function(e){h=e.account.accountNumber,e.accounts.forEach(function(e){h===e.accountNumber&&(e.quotes.length>0?e.quotes.forEach(function(t){if(t.isSelected){var n=$.grep(o,function(e){return e.accountno===t.financialAccountId});if(n&&n.length>0){var r=parseFloat(n[0].amount)+parseFloat(t.totalAmount);n[0].amount=parseFloat(r).toFixed(2),s+=parseFloat(t.totalAmount)}else(p=a.get("accountTypes").filter(function(t){if(t.CanonicalValue===e.type)return t.AccountTypeDescription}))&&p.length>0&&(s+=parseFloat(t.totalAmount),e.selected?o.pushObject({accountno:t.financialAccountId,accountDescription:p[0].AccountTypeDescription,balance:e.overdue,amount:parseFloat(t.totalAmount).toFixed(2)}):o.pushObject({accountno:t.financialAccountId,accountDescription:p[0].AccountTypeDescription,balance:parseFloat(0).toFixed(2),amount:parseFloat(t.totalAmount).toFixed(2)}))}else if(e.selected){var n=$.grep(o,function(t){return t.accountno===e.accountNumber});n&&n.length<=0&&o.pushObject({accountno:e.accountNumber,accountDescription:e.type,balance:parseFloat(e.overdue).toFixed(2),amount:parseFloat(0).toFixed(2)})}}):e.selected&&o.pushObject({accountno:e.accountNumber,accountDescription:e.type,balance:parseFloat(e.overdue).toFixed(2),amount:parseFloat(0).toFixed(2)}))})}),o=o.sort(function(e,t){return parseInt(e.accountno,10)>parseInt(t.accountno,10)}),n=parseFloat(s),s=parseFloat(s)+parseFloat(r),a.set("allAccounts",o),a.bindPaymentDetail(a.get("accountno"),!0),a.get("adhocDOrderModel").set("amount",parseFloat(s).toFixed(2)),a.get("adhocDOrderModel").set("isSaveButtonDisabled",!1)}else a.set("noAccountExist",!0),a.set("isAccountDataAvailable",!1)}else{var m=Komodo.Application.ManageAccountUtility.isAnyAccountExist(),p="";if(m&&m.length>0&&a.get("accountTypes")&&a.get("accountTypes").length>0){a.set("noAccountExist",!1),a.set("isAccountDataAvailable",!0);for(var d=helperFunction.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account),p="",i=0;i<d.length;i++){p=a.get("accountTypes").filter(function(e){if(e.CanonicalKey===d[i].Type)return e.AccountTypeDescription});var f={accountno:d[i].UID,accountDescription:p[0].AccountTypeDescription,amount:d[i].Balance.Value};o.pushObject(f)}if(o=o.sort(function(e,t){return parseInt(e.accountno,10)>parseInt(t.accountno,10)}),a.set("allAccounts",o),a.get("accountno")){if(o&&o.length>0)for(var i=0;i<a.get("allAccounts").length;i++)if(tempAccountNoWithDesc=a.get("allAccounts")[i],null!=tempAccountNoWithDesc&&void 0!=tempAccountNoWithDesc&&""!=tempAccountNoWithDesc&&tempAccountNoWithDesc.accountno===a.get("accountno")){a.get("adhocDOrderModel").set("selectedAcccountId",tempAccountNoWithDesc.accountno);break}}else a.get("allAccounts")&&a.get("allAccounts").length>0&&a.get("adhocDOrderModel").set("selectedAcccountId",a.get("allAccounts")[0])}else a.set("noAccountExist",!0),a.set("isAccountDataAvailable",!1)}void 0!=a.get("dataGridFooters")[0]&&a.get("dataGridFooters")[0].clear(),a.get("dataGridFooters")[0].addObject(Komodo.Controls.DataGridFooterColumn.create({content:kl.value(this.localEditPaymeDetail+"subTotal"),columnSpan:2})),a.get("dataGridFooters")[0].addObject(Komodo.Controls.DataGridFooterColumn.create({content:parseFloat(r).toFixed(2),columnSpan:1,customClass:"komodo-decimal"})),a.get("dataGridFooters")[0].addObject(Komodo.Controls.DataGridFooterColumn.create({content:parseFloat(n).toFixed(2),columnSpan:1,customClass:"komodo-decimal"}))},onCommercialAccNoChanged:function(){var e=this;"2"===e.get("adhocDOrderModel.selectRadioButtonValue")&&(e.clearPaymentDetails(),null!==e.get("adhocDOrderModel.selectAccountNoValue")&&e.bindPaymentDetail(e.get("adhocDOrderModel.selectAccountNoValue"),!0))}.observes("adhocDOrderModel.selectAccountNoValue"),selectRadioChanged:function(){var e=this;e.set("adhocDOrderModel.ahvStatus",void 0),e.set("adhocDOrderModel.AHVStatus",void 0),e.set("adhocDOrderModel.ahvStatusMessage","Non-Compliant"),e.set("adhocDOrderModel.isCompliant",!1),"2"===e.get("adhocDOrderModel.selectRadioButtonValue")?(e.set("isVisibleAccountNumbers",!0),Ember.set(e,"adhocDOrderModel.selectAccountNoValue",e.commercialAccNumbers[0].key)):(e.clearPaymentDetails(),e.set("ahvStatus",void 0),e.set("AHVStatus",void 0),e.set("isVisibleAccountNumbers",!1),e.disableorenableAHVControls(!1),e.disableOrEnableControls("enable"),e.disableEnableCustomerDetails("enable"),Ember.set(e,"adhocDOrderModel.selectAccountNoValue",void 0))}.observes("adhocDOrderModel.selectRadioButtonValue"),acceptDocumentChanged:function(){var e=this,e=this,t=[];if(e.get("ahvOverrideModel.acceptDocumentation")){if(e.startNewProcess(),e.get("isPasssportClient")?e.overrideCustomerDocument.set("refundDocumentTypes",[GetCustomerTypesConstants("RefundDocumentType","COPY_OF_PASSPORT"),GetCustomerTypesConstants("RefundDocumentType","BANK_STATEMENT")]):e.overrideCustomerDocument.set("refundDocumentTypes",[GetCustomerTypesConstants("RefundDocumentType","COPY_OF_ID"),GetCustomerTypesConstants("RefundDocumentType","BANK_STATEMENT")]),e.adhocDOrderModel.get("accountHolderName")||t.push("<br>Account Holder Name Required"),e.adhocDOrderModel.get("accountHolderId")||t.push("<br>ID/Passport Required"),e.adhocDOrderModel.get("bankName")||t.push("<br>Bank Required"),e.adhocDOrderModel.get("bankAccountType")||t.push("<br>Bank Account Type Required"),e.adhocDOrderModel.get("accountNumber")||t.push("<br>Account Number Required"),e.adhocDOrderModel.get("branchName")||t.push("<br>Branch Name Required"),e.adhocDOrderModel.get("accountHolderPhoneNumber"))if(e.overrideCustomerDocument.get("customerDocuments").some(function(e){return void 0==e.documentType}))t.push("<br><br>Please specify document type for all added documents <br>");else{for(var a=0;a<e.overrideCustomerDocument.get("customerDocuments").length;a++)e.overrideCustomerDocument.get("customerDocuments")[a].documentType==GetCustomerTypesConstants("RefundDocumentType","COPY_OF_PASSPORT")&&e.overrideCustomerDocument.get("refundDocumentTypes").removeObject(e.overrideCustomerDocument.get("customerDocuments")[a].documentType),e.overrideCustomerDocument.get("customerDocuments")[a].documentType==GetCustomerTypesConstants("RefundDocumentType","COPY_OF_ID")&&e.overrideCustomerDocument.get("refundDocumentTypes").removeObject(e.overrideCustomerDocument.get("customerDocuments")[a].documentType),e.overrideCustomerDocument.get("customerDocuments")[a].documentType==GetCustomerTypesConstants("RefundDocumentType","BANK_STATEMENT")&&e.overrideCustomerDocument.get("refundDocumentTypes").removeObject(e.overrideCustomerDocument.get("customerDocuments")[a].documentType);e.overrideCustomerDocument.get("refundDocumentTypes").length>0&&t.push("<br><br>Please upload the following documents: <br>-"+e.overrideCustomerDocument.get("refundDocumentTypes").join("<br>-"))}else t.push("<br>Mobile Number Required");t.length>0?(e.set("ahvOverrideModel.acceptDocumentation",!1),Komodo.Controls.MessageBoxController.show(kl.value(this.localGeneral+"moduleTitle"),t.join(""),Komodo.Controls.MessageBoxOkButtons,this,"id5446675","warning")):(e.set("isClientOverriden",!0),e.get("ahvOverrideModel.acceptDocumentation")?this.set("disableOverrideAHV",!1):this.set("disableOverrideAHV",!0))}}.observes("ahvOverrideModel.acceptDocumentation"),clearPaymentDetails:function(){this.adhocDOrderModel.set("accountHolderId",void 0),this.adhocDOrderModel.set("bankAccountType",[]),this.adhocDOrderModel.set("branchName",[]),this.adhocDOrderModel.set("accountHolderName",void 0),this.adhocDOrderModel.set("bankName",[]),this.adhocDOrderModel.set("accountNumber",void 0),this.adhocDOrderModel.set("branchCode",void 0),this.adhocDOrderModel.set("accountHolderPhoneNumber",void 0),this.adhocDOrderModel.set("accountHolderEmailAddress",void 0)},setBusinessDays:function(){var e=this;Komodo.Services.cachedDataService.fetch("BusinessWorkingDays").done(function(t){e.get("validBusinessDays").clear(),$.each(t,function(t,a){e.get("validBusinessDays").addObject(a)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve hierarchical example data")})},bindPaymentDetail:function(e,t){var a=this,o=e||a.getSelectedBankAccountId(),n=a.get("accountNumberWithDescription"),s=a.get("adhocDOrderModel");if(a.get("methodOfPayments")&&a.get("methodOfPayments").length>0&&a.get("banks")&&a.get("banks").length>0&&a.get("accountTypes").length>0){a.set("accountno",o),a.isCommercialCustomer||a.retrieveCustomerQuotesByAccountID(o);var r=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),i=Komodo.Application.ManageAccountUtility.isAnyAccountExist();if(i&&i.length>0){var l=r.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account),c=a,u=l.filter(function(e){var t=c.get("accountno");return e.UID===t});if(u.length&&u.length>0){if(a.set("requstforAHV","False"),
void 0!=a.get("methodOfPayments"))for(var d=a.get("methodOfPayments"),h=0;h<d.length;h++)d[h].key===u[0].PaymentDetail.MethodOfPayment&&(s.set("MOP",d[h].key),s.set("methodOfPayment",d[h].key));var m=c.get("accountTypes").filter(function(e){return e.CanonicalKey.toUpperCase()===u[0].Type.toUpperCase()});m&&0!==m.length?(null!=n&&void 0!=n&&""!=n&&s.set("accountDescription",n.accountDescription),s.set("accountType",m[0].CanonicalKey)):s.set("accountDescription","-");var p=a.getSelectedAccount(),f="";p&&p.PaymentDetail&&""!=p.PaymentDetail.PayerName?(accountHolder=p.PaymentDetail.PayerName,f=p.PaymentDetail.PayerIDNumber):(accountHolder=a.get("customerName"),f=a.get("customerID")),"Compliant"==p.PaymentDetail.AHVStatus?(s.set("isCompliant",!0),s.set("ahvStatusMessage","Compliant")):(s.set("isCompliant",!1),s.set("ahvStatusMessage","Non-Compliant")),s.set("ahvStatus",p.PaymentDetail.AHVStatus),s.set("AHVStatus",p.PaymentDetail.AHVStatus),s.set("defaultAccount",p.IsDefault),s.set("accountHolderName",accountHolder),s.set("accountHolderId",f);var g=a.adhocDOrderModel.get("accountHolderName").toLowerCase(),v=g.split(" ");a.set("BHName",void 0),a.set("BHSurname",void 0);for(var h=0;h<=v.length;h++){if(void 0!=v[h]||""!=v[h]){if(void 0==a.get("BHName")){var y=v[h].charAt(0).toUpperCase()+v[h].substring(1);a.set("BHName",y)}if(void 0==a.get("BHSurname")&&void 0!=a.get("BHName")&&void 0!=v[h+1]){var b=v[h+1].charAt(0).toUpperCase()+v[h+1].substring(1);a.set("BHSurname",b)}}break}if(s.set("acccountId",o),t||s.set("selectedAcccountId",n),s.set("accountNumber",p.PaymentDetail.AccountNumber),void 0!=a.get("bankAccountTypes")){for(var D=a.get("bankAccountTypes"),T=!1,h=0;h<D.length;h++)D[h].value.toUpperCase()===p.PaymentDetail.BankAccountType.toUpperCase()&&(s.set("bankAccountType",D[h].key),s.set("batype",D[h].value),T=!0);!1===T&&s.set("bankAccountType","")}p.PaymentDetail.BankName?s.set("bankName",p.PaymentDetail.BankName):(s.set("bankName",void 0),s.set("branchName",void 0)),a.setSmartCardsOfAnAccount();var C=(c.get("accountTypes").filter(function(e){return e.CanonicalKey.toUpperCase()===p.Type.toUpperCase()}),p.PaymentDetails.PayerPhoneNumber.replace("+","").replace(" ","")),I=p.PaymentDetails.PayerEmail;if(s.get("payerIsCustomer")){var x=Komodo.Services.customerProfileService.currentCustomerDetails.ResponseMessage.Payload.CustomerDetail,P=x.ListOfPhoneNumber.PhoneNumber,S=x.ListOfEmail?x.ListOfEmail.Email:{};void 0!=C&&""!=C||P.length>0&&(C=P[0].Code+P[0].Number),void 0!=I&&""!=I||S.length>0&&(I=S[0].Value)}s.set("accountHolderPhoneNumber",C),s.set("accountHolderEmailAddress",I),a.set("adhocDOrderModel",s)}else s.set("accountHolderName",a.get("customerName"))}}},disableOrEnableControls:function(e){var t=this;"disable"===e?(t.set("isbankAccountTypeEnabled",!0),t.set("isbranchNameEnabled",!0),t.set("isbankNameEnabled",!0),t.set("isaccountNumberEnabled",!0),t.set("isDisabledpayerIsCustomer",!0)):(t.set("isbankAccountTypeEnabled",!1),t.set("isbranchNameEnabled",!1),t.set("isbankNameEnabled",!1),t.set("isaccountNumberEnabled",!1),t.set("isDisabledpayerIsCustomer",!1))},disableEnableCustomerDetails:function(e){var t=this;"disable"===e?(t.set("isaccountHolderIdEnabled",!0),t.set("isaccountHolderNameEnabled",!0),t.set("ismobileNumberDisabled",!0),t.set("isemailIdEnabled",!0)):(t.set("isaccountHolderIdEnabled",!1),t.set("isaccountHolderNameEnabled",!1),t.set("ismobileNumberDisabled",!1),t.set("isemailIdEnabled",!1))},getSelectedAccount:function(){var e=this,t=e.get("customerNumber"),a=this.resultAccountMessage;a.ResponseMessage.Payload.ListOfAccount.Account.clear(),Komodo.Services.queryService.getJSON("/AccountProfile?id="+t,{async:!1}).done(function(e){a.ResponseMessage.Payload.ListOfAccount.Account.clear(),e&&e.Account.length&&0!==e.Account.length&&(e.Account.length>1?a.ResponseMessage.Payload.ListOfAccount.Account.addObjects(e.Account):a.ResponseMessage.Payload.ListOfAccount.Account.addObject(e.Account[0]))}).error(function(e){var t=JSON.stringify(e);Komodo.log("retrieveFinancialAccounts ajax call failed. Error: "+t)});for(var o,n,s=a.ResponseMessage.Payload.ListOfAccount.Account,r=0;r<s.length;r++)if(e.isCommercialCustomer){if(o=s[r],e.isVisibleSelectRadioButton){if("1"===e.adhocDOrderModel.get("selectRadioButtonValue")&&e.allAccounts&&e.allAccounts.length&&e.allAccounts[0].accountno===s[r].UID){o=s[r],e.disableOrEnableControls("enable"),e.disableEnableCustomerDetails("enable");break}if("2"===e.adhocDOrderModel.get("selectRadioButtonValue")&&e.adhocDOrderModel.get("selectAccountNoValue")===s[r].UID){o=s[r],e.disableOrEnableControls("disable"),e.disableEnableCustomerDetails("disable"),n="Compliant"===s[r].PaymentDetail.AHVStatus,e.disableorenableAHVControls(n);break}}else if(e.allAccounts&&e.allAccounts.length&&e.allAccounts[0].accountno===s[r].UID&&s[r].PaymentDetail&&""!==s[r].PaymentDetail.AccountNumber){o=s[r],e.disableOrEnableControls("disable"),e.disableEnableCustomerDetails("disable"),n="Compliant"===s[r].PaymentDetail.AHVStatus,e.disableorenableAHVControls(n);break}}else{if(s[r].PaymentDetail&&""!=s[r].PaymentDetail.AccountNumber){o=s[r],e.disableOrEnableControls("disable"),e.disableEnableCustomerDetails("disable");var i=e.isAllowedForAHVRealtime();!1===i&&""!=o.PaymentDetail.AccountNumber?e.disableorenableAHVControls(!1):e.disableorenableAHVControls(!0);break}s[r].PaymentDetail&&s[r].PaymentDetail.MethodOfPayment==Komodo.MethodOfPayment.CASH&&(o=s[r],e.disableOrEnableControls("enable"),e.isCommercialCustomer&&e.disableEnableCustomerDetails("enable"))}return o},getSelectedBankAccountId:function(){return this.get("accountno")?this.get("accountno"):this.get("allAccounts")&&this.get("allAccounts").length>0?(this.set("accountno",this.seperateAndGetAccountNumberFromDescription(this.get("allAccounts")[0])),this.set("accountNumberWithDescription",this.get("allAccounts")[0]),this.get("accountno")):this.set("accountno",0)},retrieveCustomerQuotesByAccountID:function(e){for(var t=!1,a=0;a<this.get("accountQuotes").length;a++)this.get("accountQuotes")[a].accountid==e&&(this.get("adhocDOrderModel").set("amount",this.get("accountQuotes")[a].quoteAmount),t=!0);!1===t&&this.get("adhocDOrderModel").set("amount","0")},retrieveCustomerQuotes:function(){var e=this,t=helperFunction.getCustomerIdToRetrieveData();e.set("accountQuotes",[]);var a=[];Komodo.Services.queryService.getJSON("/Quote/GetCustomerQuotes?customerId="+t+"&deviceSerialNumber=&quoteCurrentStatus=4&quoteCategory=0").done(function(t){if(t&&t.Quote.length&&0!=t.Quote.length){if(t.Quote.length>0)for(var o=0;o<t.Quote.length;o++)a.pushObject({accountid:t.Quote[o].FinancialAccountId,quoteAmount:t.Quote[o].TotalAmount})}else Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"informationQuote"),kl.value(e.localGeneral+"noQuotesMessage"));e.set("accountQuotes",a),e.retrieveCustomerQuotesByAccountID(e.get("accountno"))}).error(function(e){var t=JSON.stringify(e);Komodo.log("[ERROR] : retriveCustomerQuote ajax call failed. Error: "+t)})},bankNameChanged:function(){var e=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),t=this;if(t.get("bankBranches").clear(),t.adhocDOrderModel.set("branchName",void 0),t.adhocDOrderModel.set("branchCode",void 0),t.get("adhocDOrderModel.bankName")){t.get("banks")&&$.each(t.get("banks"),function(e,a){a.CanonicalKey===t.get("adhocDOrderModel.bankName")&&a.Branches&&a.Branches.Branch&&($.isArray(a.Branches.Branch)?$.each(a.Branches.Branch,function(e,a){t.get("bankBranches").addObject(a)}):t.get("bankBranches").addObject(a.Branches.Branch))});var a=t.get("adhocDOrderModel"),o=t.getSelectedAccount();t.isCommercialCustomer||(t.isAllowedForAHVRealtime()||""!=o.PaymentDetail.AccountNumber?t.disableorenableAHVControls(!0):t.disableorenableAHVControls(!1));e.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account);if(o.PaymentDetail.BranchCode&&null!=o.PaymentDetail.BranchCode){var n=t.get("bankBranches").filter(function(e){return e.BranchCode.toUpperCase()===o.PaymentDetail.BranchCode.toUpperCase()});n.length&&n.length>0?(a.set("branchName",n[0].CanonicalKey),a.set("branchCode",n[0].BranchCode)):(a.set("branchName",void 0),a.set("branchCode",void 0))}t.set("adhocDOrderModel",a)}t.ahvStatusChanging()}.observes("adhocDOrderModel.bankName"),checkBigSevenBank:function(){var e=this;Komodo.Services.cachedDataService.fetch("AHVSupportedBanks").done(function(t){var a=t;$.each(a,function(t,a){e.get("BigSevenbanks").addObject(a)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve hierarchical example data")});for(var t=e.get("BigSevenbanks"),a=e.get("adhocDOrderModel.bankName"),o=!1,n=0;n<t.length;n++){if(t[n].key==a&&!e.get("isPasssportClient")){o=!0;break}o=!1}return e.set("BigSevenbanks",[]),o},branchNameChanged:function(){var e=this;e.adhocDOrderModel.set("branchCode",void 0);var t=e.get("bankBranches").filter(function(t){return t.CanonicalKey===e.get("adhocDOrderModel.branchName")}),a=e.get("adhocDOrderModel");t.length&&t.length>0?a.set("branchCode",t[0].BranchCode):a&&a.set("branchCode",void 0)}.observes("adhocDOrderModel.branchName"),accountNumberChanged:function(){var e=this,t=e.seperateAndGetAccountNumberFromDescription(e.get("adhocDOrderModel.selectedAcccountId"));if(t){if(e.getSelectedAccount(t).PaymentDetail.MethodOfPayment!=Komodo.MethodOfPayment.AHV_PENDING){e.getSelectedAccount(t),e.set("accountNumberWithDescription",e.get("adhocDOrderModel.selectedAcccountId")),e.bindPaymentDetail(t,!0);e.get("adhocDOrderModel.accountNumber");e.adhocDOrderModel.set("isSaveButtonDisabled",!1),e.retrieveCustomerQuotesByAccountID(t),e.validateBusinessRules(t)}else Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),kl.value(e.localGeneral+"alreadyAHVPendingMsg")),e.adhocDOrderModel.set("isSaveButtonDisabled",!0)}},bankAccountypeChanged:function(){var e=this,t=e.get("adhocDOrderModel");if(void 0!=e.get("bankAccountTypes")&&void 0!=t.get("bankAccountType")){for(var a=e.get("bankAccountTypes"),o=!1,n=0;n<a.length;n++)a[n].key===t.get("bankAccountType")&&(t.set("batype",a[n].value),o=!0);!1===o&&t.set("batype","")}}.observes("adhocDOrderModel.bankAccountType"),compareBankDetails:function(){var e=this,t="False",a=e.getSelectedAccount(),o=e.getcustomerPaymentDetail("CreateAdHocDebitOrder");return Komodo.MethodOfPayment.AHV_PENDING==a.PaymentDetail.MethodOfPayment||Komodo.MethodOfPayment.CASH==a.PaymentDetail.MethodOfPayment?e.get("adhocDOrderModel.accountHolderId")&&13!=e.get("adhocDOrderModel.accountHolderId").length?(e.set("isPasssportClient",!0),e.set("requstforAHV","False")):(e.set("isPasssportClient",!1),a.PaymentDetail.AccountNumber==o.AccountNumber&&a.PaymentDetail.BankName==o.BankName&&a.PaymentDetail.BankAccountType==o.BankAccountType&&""!=a.PaymentDetail.AHVStatus?(t="False",e.set("requstforAHV","False")):(t="True",e.set("requstforAHV","True"))):(t="False",e.set("requstforAHV","False")),t},messageFinancialAccountUpdatedReceived:function(e){var t=this;(e.ResponseMessage.EventName="FinancialAccountUpdated")&&t.CreateAdHocDebitOrder()},getCustomerDetails:function(){var e=this;moment(new Date).format(KomodoConfiguration.dateFormat);helperFunction.isCustomerIdIsAvailableToRetriveData()&&(Komodo.Services.securityService.get("sessionToken"),Komodo.Services.securityService.get("domainUserName"),Komodo.Services.queryService.getJSON("/CustomerProfile?customerId="+customerInfo.customerNo).done(function(t){t&&t.CustomerDetail&&(void 0!==t.CustomerDetail.SubscriberSystemUID&&t.CustomerDetail.SubscriberSystemUID.SubscriberSystem.length>0&&e.set("companyRegistrationNumber",t.CustomerDetail.CompanyRegistrationNumber),"6"===t.CustomerDetail.Class&&"Agent"==t.CustomerDetail.CustomerTypeText?e.set("customerName",void 0===customerInfo.companyName||null===customerInfo.companyName?"":customerInfo.companyName.trim()):(e.set("customerName",(void 0===customerInfo.firstName||null===customerInfo.firstName?"":customerInfo.firstName.trim())+" "+(void 0===customerInfo.lastName||null===customerInfo.lastName?"":customerInfo.lastName.trim())),e.set("customerID",customerInfo.idNo)))}).error(function(e){var t=JSON.stringify(e);Komodo.log("[ERROR] : retrieveCustomer ajax call failed. Error: "+t)}),e.set("customerName",(void 0===customerInfo.firstName||null===customerInfo.firstName?"":customerInfo.firstName.trim())+" "+(void 0===customerInfo.lastName||null===customerInfo.lastName?"":customerInfo.lastName.trim())),e.set("customerID",customerInfo.idNo))},ahvCompliantUpdateBankingDetails:function(){var e=this;paymentDetailsToUpdate=e.getcustomerPaymentDetail("VerifyPaymentDetail"),e.updateBankingDetails(paymentDetailsToUpdate,"Compliant")},submitAdHocDebitOrder:function(){var e=this,t=!0;if(e.get("allAccounts")){var a=e.get("adhocDOrderModel");e.getNewProcessID(),e.showBlockingBusyIndicator();var o;if("True"===("Compliant"===a.get("ahvStatus")?"False":e.compareBankDetails())){e.set("AHVStatus","InProgress"),o=e.getcustomerPaymentDetail("VerifyPaymentDetail");e.get("customerModel").accounts&&e.isAllowedForAHVRealtime()&&(e.verifyPaymentDetailsAHVRealTime(),t=!1)}else{e.set("AHVStatus","Compliant"),o=e.getcustomerPaymentDetail("CreateAdHocDebitOrder");var n=e.getSelectedAccount(),s=e.getDefualtFinancialAccount();e.get("isCommercialCustomer")||e.get("isClientOverriden")||!e.canUpdateBankingDetails()||(n.PaymentDetail&&""!=n.PaymentDetail.AccountNumber&&n.PaymentDetail.AccountNumber==o.AccountNumber&&n.UID==s.accountNumber&&n.PaymentDetail.BankAccountType==o.BankAccountType&&(n.PaymentDetail.BankName,o.BankName),"Compliant"!=e.get("AHVStatus")&&e.isAllowedForAHVRealtime()?(t=!1,e.verifyPaymentDetailsAHVRealTime()):(t=!1,e.updateBankingDetails(o,"Compliant")))}}t&&e.CreateAdHocDebitOrder()},CreateAdHocDebitOrder:function(){var e=this,t=e.get("adhocDOrderModel"),a=e.getcustomerPaymentDetail("CreateAdHocDebitOrderService"),o=Komodo.Services.systemService;$(e.get("allAccounts")).each(function(n,s){for(var r=(e.get("customerModel"),0),i=e.get("customerModels"),l=0;l<i.length;l++)for(var c=0;c<i[l].accounts.length;c++){var u=i[l].accounts[c];u.selected&&s.accountno==u.accountNumber&&(r=parseFloat(r)+parseFloat(u.overdue))}var d=parseFloat(r)+parseFloat(s.amount),h=Komodo.Models.Price.create();h.set("Value",d),h.set("CurrencyCode","0"),h.set("ValueWithoutTax",d);var m=Komodo.Models.CreateAdHocDebitOrder.create(),p=Komodo.canonicalFacadeFactory(m,["Country","FinancialAccountUID","PaymentDetail","Amount","AdHocDebitOrderRunDate"]);p.set("Country",e.loggedInCountryId),p.set("FinancialAccountUID",s.accountno),p.set("Amount",h),p.set("PaymentDetail",a),p.set("AdHocDebitOrderRunDate",o.universalDateString(new Date(t.get("boundLowerDate")))),e.publishRequestOnBus(m,"CreateAdHocDebitOrder","v1")})},canUpdateBankingDetails:function(){for(var e=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),t=e.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account),a=!1,o=0;o<t.length;o++)if(t[o].PaymentDetail&&""==t[o].PaymentDetail.AccountNumber){a=!0;break}return a},updateBankingDetails:function(e,t){var a=this,o=a.getDefualtFinancialAccount(),n=(a.getSelectedAccount(o.accountNumber).PaymentDetail.MethodOfPayment,helperFunction.getCustomerIdToRetrieveData()),s=(e.PayerName,e.PayerName.slice(0,1)),r=e.PayerSurname,i=(Komodo.Services.customerProfileService.personalDetails.email.indexOf("@")>0&&Komodo.Services.customerProfileService.personalDetails.email,a.getBankNamebyId(e.BankName)),l={methodOfPayment:"debit order",bankName:i,bankAccountType:e.BankAccountType,debitOrderDay:e.DebitOrderDay,bankAccountNumber:e.AccountNumber,bankBranchCode:e.BranchCode,payerIdNumber:e.PayerIDNumber,initials:s,surname:r,emailAddress:e.PayerEmail,phoneNumber:e.PayerPhoneNumber};Komodo.Services.queryService.putJSONApiRoot("customers/"+n+"/payment-details?debitOrderType=adhoc",{data:l}).done(function(e){void 0!=e?(a.CreateAdHocDebitOrder(),a.hideBusyIndicator(),a.disableorenableAHVControls(!0)):Komodo.Controls.MessageBoxController.show(kl.value(a.localGeneral+"moduleTitle"),"No response from Update Banking Details service.",Komodo.Controls.MessageBoxOkButtons,a,"id5446675","warning")}).fail(function(e){var t="Update Banking Details Failed: "+e.statusText+" Response: "+e.responseText;Komodo.Controls.MessageBoxController.show(kl.value(a.localGeneral+"moduleTitle"),t,Komodo.Controls.MessageBoxOkButtons,a,"id5446675","danger"),a.set("adhocDOrderModel.isSaveButtonDisabled",!1)})},getcustomerPaymentDetail:function(e){var t=this,a=Komodo.Models.PaymentDetail.create(),o=this.get("adhocDOrderModel");if(paymentDetailFacade="CreateAdHocDebitOrderService"==e?Komodo.canonicalFacadeFactory(a,["MethodOfPayment","AccountNumber","BankAccountType","BankName","BranchName","BranchCode","DebitOrderDay","PayerName","PayerSurname","AHVStatus","PayerIDNumber","PayerIDType","YearsAtBank","IsSalaryMandated"]):Komodo.canonicalFacadeFactory(a,["MethodOfPayment","AccountNumber","BankAccountType","BankName","BranchName","BranchCode","DebitOrderDay","PayerName","PayerSurname","AHVStatus","PayerIDNumber","PayerIDType","YearsAtBank","IsSalaryMandated","PayerPhoneNumber","PayerEmail"]),paymentDetailFacade.set("MethodOfPayment",o.get("MOP")),paymentDetailFacade.set("BankAccountType",o.get("batype")),o.get("accountNumber")?paymentDetailFacade.set("AccountNumber",o.get("accountNumber").trim()):paymentDetailFacade.set("AccountNumber",""),o.get("bankName")){var n=this.get("banks").filter(function(e){return e.CanonicalKey.toUpperCase()===o.get("bankName").toUpperCase()});n&&n.length>0&&paymentDetailFacade.set("BankName",n[0].CanonicalKey)}if(paymentDetailFacade.set("BranchCode",o.get("branchCode")),paymentDetailFacade.set("BranchName",o.get("branchName")),void 0!=t.adhocDOrderModel.get("accountHolderName").toLowerCase()&&""===t.get("BHName")){var s=o.get("accountHolderName").toLowerCase(),r=s.split(" ");t.set("BHName",void 0),t.set("BHSurname",void 0);for(var i=0;i<=r.length;i++){if(void 0!=r[i]||""!=r[i]){if(void 0==t.get("BHName")){var l=r[i].charAt(0).toUpperCase()+r[i].substring(1);t.set("BHName",l)}if(void 0==t.get("BHSurname")&&void 0!=t.get("BHName")&&void 0!=r[i+1]){var c=r[i+1].charAt(0).toUpperCase()+r[i+1].substring(1);t.set("BHSurname",c)}}break}}return paymentDetailFacade.set("PayerName",t.get("BHName")),paymentDetailFacade.set("PayerSurname",t.get("BHSurname")),paymentDetailFacade.set("PayerIDNumber",o.get("accountHolderId")),paymentDetailFacade.set("AHVStatus",t.get("AHVStatus")),paymentDetailFacade.set("DebitOrderDay",(new Date).getDate()),paymentDetailFacade.set("PayerIDType",void 0),paymentDetailFacade.set("YearsAtBank",void 0),paymentDetailFacade.set("IsSalaryMandated",void 0),"CreateAdHocDebitOrderService"!=e&&(paymentDetailFacade.set("PayerPhoneNumber",o.get("accountHolderPhoneNumber")),paymentDetailFacade.set("PayerEmail",o.get("accountHolderEmailAddress"))),a},checkAdhocDateisValidBusinessDate:function(e){var t=this,a=void 0;if(a=e,void 0!=t.get("validBusinessDays"))for(var o=t.get("validBusinessDays"),n=0;n<o.length;n++)if(moment(o[n].value).format(KomodoConfiguration.dateFormat)===moment(a).format(KomodoConfiguration.dateFormat))return!0;return!1},boundLowerDateValueChanged:function(){var e=this;if(e.get("validators.boundLowerDateValidator")&&void 0!=e.get("adhocDOrderModel.boundLowerDate")){var t=e.get("adhocDOrderModel.boundLowerDate"),a=e.checkAdhocDateisValidBusinessDate(t);if(void 0!=a){if(1!=a)return void Komodo.Controls.MessageBoxController.show(kl.value(this.localGeneral+"moduleTitle"),kl.value(this.localGeneral+"businessDateNotValid"),Komodo.Controls.MessageBoxOkButtons,this,"id5446675","warning");e.set("adhocDOrderModel.scheduledAdhocDate",t),this.adhocDOrderModel.set("isSaveButtonDisabled",!1)}}}.observes("adhocDOrderModel.boundLowerDate"),cancelEdit:function(){Komodo.Controls.MessageBoxController.show(kl.value(this.localGeneral+"moduleTitle"),"Are you sure want to continue?",Komodo.Controls.MessageBoxOkCancelButtons,that,"id5446673","warning").response=function(e){if("ok"==e)return void Komodo.Services.uiService.transitionTo("customerProfile");e="cancel"}},getKeyFromValue:function(e,t){var a;return e.forEach(function(e){e.value==t&&(a=e.key)}),a},publishOverrideAHVStatus:function(){var e=this;e.getNewProcessID(),e.showBlockingBusyIndicator();var t=Komodo.Models.OverrideAHVStatus.create(),a=Komodo.canonicalFacadeFactory(t,["Country","FinancialAccountUID","PaymentDetail"]),o=e.getDefualtFinancialAccount();a.set("Country",e.get("loggedInCountryId")),a.set("FinancialAccountUID",o.accountNumber);var n=Komodo.Models.PaymentDetail.create(),s=Komodo.canonicalFacadeFactory(n,["MethodOfPayment","BankAccountType","AccountNumber","BankName","BranchName","BranchCode","DebitOrderDay","PayerName","PayerSurname","PayerIDType","PayerIDNumber","AHVStatus","YearsAtBank","IsSalaryMandated"]);if(e.get("updateCommercialPaymentDetails")){var r=e.getKeyFromValue(e.get("methodOfPayments"),o.methodOfPayment);s.set("MethodOfPayment",r)}else s.set("MethodOfPayment",e.adhocDOrderModel.get("MOP"));s.set("BankAccountType",e.adhocDOrderModel.get("batype")),s.set("AccountNumber",e.adhocDOrderModel.get("accountNumber")),s.set("BankName",e.adhocDOrderModel.get("bankName")),s.set("BranchName",e.adhocDOrderModel.get("branchName")),s.set("BranchCode",e.adhocDOrderModel.get("branchCode")),s.set("DebitOrderDay",void 0);var i=e.adhocDOrderModel.get("accountHolderName").toLowerCase(),l=i.split(" ");e.set("firstName",void 0),e.set("surname",void 0);for(var c=0;c<=l.length;c++){if(void 0!=l[c]||""!=l[c]){if(void 0==e.get("firstName")){var u=l[c].charAt(0).toUpperCase()+l[c].substring(1);e.set("firstName",u)}if((void 0!=l[c+1]||""!=l[c+1])&&void 0==e.get("surname")&&void 0!=e.get("firstName")){var d=l[c+1].charAt(0).toUpperCase()+l[c+1].substring(1);e.set("surname",d)}}break}s.set("PayerName",e.get("firstName")),s.set("PayerSurname",e.get("surname")),s.set("PayerIDType",void 0),s.set("PayerIDNumber",e.adhocDOrderModel.get("accountHolderId")),s.set("AHVStatus",void 0),s.set("YearsAtBank",void 0),s.set("IsSalaryMandated",void 0),a.set("PaymentDetail",n),e.disableorenableAHVControls(!1),Komodo.Services.manageAccountService.publishEvent(e,t,"OverrideAHVStatus","v1").fail(function(t){e.refundTransModel.set("busyIndicator",!1),publishOverrideAHVStatus(!0),e.disableorenableAHVControls(!0)})},publishRequestOnBus:function(e,t,a){var o=Komodo.Services.manageAccountService,n="Event Message for "+t+" ";o.publishEvent(this,e,t,a).done(function(){Komodo.log(n+" has been published successfully")}).fail(function(e,t){Komodo.log(n+" has been failed"),Komodo.Services.messagingService.removeMessages(t)})},messageFailureMessageEventReceived:function(e){this.hideBusyIndicator();var t=kl.value(this.localGeneral+"moduleTitle");e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType&&(t=e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType),Komodo.Controls.MessageBoxController.show(t,e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButtons,this,"id5446674","danger");var a=this,o=Komodo.DebitOrder.ADHOC_SUCCESS_INTERACTION_CATEGORY,n=Komodo.DebitOrder.ADHOC_SUCCESS_INTERACTION_SUBCATEGORY,s=Komodo.DebitOrder.ADHOC_FAIL_INTERACTION_OUTCOME,r=a.get("adhocDOrderModel.customerNo"),i=kl.value(a.localGeneral+"interactionFailedMsg"),l=e.ResponseMessage.Payload.Amount.Value,c=e.ResponseMessage.Payload.FinancialAccountUID;i=i.replace("__financialId__",c),i=i.replace("__amount__",parseFloat(l).toFixed(2)),a.publishCreateInteraction(r,i,n,s,l,o),Komodo.log("Create Interaction is failed for ADhoc...")},messageFault:function(e){this.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(this.localGeneral+"moduleTitle"),kl.value(this.localGeneral+"anErrorHasOccurredMsg"),Komodo.Controls.MessageBoxOkButtons,this,"id5798673","danger")},messageNotifyAdHocDebitOrderSubmittedReceived:function(e){if(void 0!==e.ResponseMessage.Payload){e.ResponseMessage.Payload.FinancialAccountUID;Komodo.Controls.MessageBoxController.show(kl.value(this.localGeneral+"successful"),kl.value(this.localGeneral+"successfulMsg"),Komodo.Controls.MessageBoxOkButton,this,"id5446676","success");var t,a,o=this,n=Komodo.DebitOrder.ADHOC_SUCCESS_INTERACTION_CATEGORY,s=Komodo.DebitOrder.ADHOC_SUCCESS_INTERACTION_SUBCATEGORY,r=o.get("adhocDOrderModel.customerNo"),i=e.ResponseMessage.Payload.Amount.Value,l=e.ResponseMessage.Payload.FinancialAccountUID;"Compliant"===o.get("adhocDOrderModel").get("ahvStatus")?(t=Komodo.DebitOrder.ADHOC_SUCCESS_INTERACTION_OUTCOME,a=kl.value(o.localGeneral+"interactionSuccessfulMsg")):(t=Komodo.DebitOrder.ADHOC_PENDING_INTERACTION_OUTCOME,a=kl.value(o.localGeneral+"interactionPendingMsg")),a=a.replace("__financialId__",l),a=a.replace("__amount__",parseFloat(i).toFixed(2)),o.publishCreateInteraction(r,a,s,t,i,n,l),Komodo.log("Create Interaction is published sucessfully for ADhoc..."),this.hideBusyIndicator()}},messageAHVStatusOverriddenReceived:function(e){var t=this;t.disableorenableAHVControls(),t.disableOrEnableControls("disable"),t.disableEnableCustomerDetails("disable"),t.adhocDOrderModel.set("ahvStatusMessage",e.ResponseMessage.Payload.PaymentDetail.AHVStatus),"Compliant"===e.ResponseMessage.Payload.PaymentDetail.AHVStatus?(t.set("AHVStatus","Compliant"),t.adhocDOrderModel.set("isCompliant",!0),t.disableorenableAHVControls(!1),t.get("updateCommercialPaymentDetails")&&(t.set("updateCommercialPaymentDetails",!1),t.CreateAdHocDebitOrder())):t.adhocDOrderModel.set("isCompliant",!1),t.hideBusyIndicator()},checkCustomerID:function(){var e=this;e.isCommercialCustomer||e.switchCustomerIsAccountHolder(),void 0==e.get("adhocDOrderModel.accountHolderId")&&null==e.get("adhocDOrderModel.accountHolderId")||(13==e.get("adhocDOrderModel.accountHolderId").length||e.get("adhocDOrderModel.MOP")===Komodo.MethodOfPayment.CURRENT||e.get("adhocDOrderModel.MOP")===Komodo.MethodOfPayment.SAVINGS||e.get("adhocDOrderModel.MOP")===Komodo.MethodOfPayment.TRANSMISSION||e.get("adhocDOrderModel.MOP")===Komodo.MethodOfPayment.AHV_PENDING?e.set("isPasssportClient",!1):e.set("isPasssportClient",!0))}.observes("adhocDOrderModel.accountHolderId"),checkCustomerIsAccountHolder:function(){var e=this;if(!e.isCommercialCustomer){var t=Komodo.Services.customerProfileService.currentCustomerDetails.ResponseMessage.Payload.CustomerDetail,a=t.ListOfPhoneNumber.PhoneNumber,o=t.ListOfEmail?t.ListOfEmail.Email:{},n=void 0,s=void 0;a.length>0&&(n=a[0].Code+a[0].Number),o.length>0&&(s=o[0].Value);e.getSelectedAccount();e.get("isDisabledpayerIsCustomer")||(e.get("adhocDOrderModel.payerIsCustomer")?(e.adhocDOrderModel.set("accountHolderPhoneNumber",n),e.adhocDOrderModel.set("accountHolderId",e.customerID),e.adhocDOrderModel.set("bankAccountType",void 0),e.adhocDOrderModel.set("branchName",void 0),e.adhocDOrderModel.set("accountHolderName",e.customerName),e.adhocDOrderModel.set("accountHolderEmailAddress",s),e.adhocDOrderModel.set("bankName",void 0),e.adhocDOrderModel.set("accountNumber",void 0),e.adhocDOrderModel.set("branchCode",void 0),e.disableEnableCustomerDetails("disable")):(e.adhocDOrderModel.set("accountHolderPhoneNumber",void 0),e.adhocDOrderModel.set("accountHolderId",void 0),e.adhocDOrderModel.set("bankAccountType",void 0),e.adhocDOrderModel.set("branchName",void 0),e.adhocDOrderModel.set("accountHolderName",void 0),e.adhocDOrderModel.set("accountHolderEmailAddress",void 0),e.adhocDOrderModel.set("bankName",void 0),e.adhocDOrderModel.set("accountNumber",void 0),e.adhocDOrderModel.set("branchCode",void 0),e.disableEnableCustomerDetails("enable")),e.clearAHVOverride())}}.observes("adhocDOrderModel.payerIsCustomer"),disableorenableAHVControls:function(e){var t=this;if(!0===e)t.adhocDOrderModel.set("isChoosefilesEnable",!0),t.adhocDOrderModel.set("isUploadfilesEnable",!0),t.adhocDOrderModel.set("isAhvoverrideStatus",!0);else{Komodo.Services.securityService.hasPermission("clarity://ahvOverrideView/allowed")&&(t.adhocDOrderModel.set("isChoosefilesEnable",!1),t.adhocDOrderModel.set("isUploadfilesEnable",!1),t.adhocDOrderModel.set("isAhvoverrideStatus",!1))}},messageOverrideAHVStatusReceived:function(e){Komodo.log(e)},messageOverrideAHVStatusDeliveryFailure:function(e){Komodo.log(e)},messageOverrideAHVStatusFault:function(e){Komodo.log(e)},unBlockCustomer:function(e,t){var a=this;a.startNewProcess(),a.showBlockingBusyIndicator();var o=moment(new Date).format(a.get("inputDateTimeFormat")),n=a.get("adhocDOrderModel.customerNo"),s=a.get("accountno");Komodo.Services.queryService.getJSON("/DebitOrder/UnblockCustomerAdhoc?customerId="+n+"&financialAccountId="+s+"&unBlockedDate="+o+"&unBlockedBy="+e+"&unBlockedComments="+t).done(function(t){if(a.hideBusyIndicator(),"1"==t){var o=kl.value(a.localGeneral+"UnblockedCustomer")+" By "+e;a.publishCreateInteraction(n,o,113,565),Komodo.Controls.MessageBoxController.show(kl.value(a.localGeneral+"moduleTitle"),kl.value(a.localGeneral+"unblockSuccessMsg"),Komodo.Controls.MessageBoxOkButtons,a,"id5446674","success")}else Komodo.Controls.MessageBoxController.show(kl.value(a.localGeneral+"moduleTitle"),kl.value(a.localGeneral+"unblockFailerMsg"),Komodo.Controls.MessageBoxOkButtons,a,"id5446674","warning")}).error(function(e){a.hideBusyIndicator();var t=JSON.stringify(e),o=e.responseJSON.ExceptionMessage?e.responseJSON.ExceptionMessage:e.responseJSON.Message;Komodo.log("[ERROR] : unblockCustomerAdhoc ajax call failed. Error: "+t),Komodo.Controls.MessageBoxController.show(kl.value(a.localGeneral+"moduleTitle"),"[ERROR] : unblockCustomerAdhoc ajax call failed. Error: "+o,Komodo.Controls.MessageBoxOkButtons,a,"id5446674","danger")})},createAdhocDebitOrder:function(){var e=this;e.compareBankDetails();var t=e.getSelectedAccount();if((e.get("isPasssportClient")&&""==t.PaymentDetail.AccountNumber||!e.isAllowedForAHVRealtime()&&""==t.PaymentDetail.AccountNumber)&&!e.get("isClientOverriden"))return void Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),kl.value(e.localGeneral+"avhOverrideRequired"),Komodo.Controls.MessageBoxOkButtons,e,"id5446675","warning");if(""==t.PaymentDetail.AHVStatus&&!e.isAllowedForAHVRealtime())return void Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),kl.value(e.localGeneral+"avhOverrideRequired"),Komodo.Controls.MessageBoxOkButtons,e,"id5446675","warning");if(""===t.PaymentDetail.AHVStatus&&e.isCommercialCustomer)return void Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),kl.value(e.localGeneral+"avhOverrideRequired"),Komodo.Controls.MessageBoxOkButtons,e,"id5446675","warning");e.startNewProcess(),e.showBlockingBusyIndicator();var a=(Komodo.Services.ProductAndServiceMaintenanceHelper.create(),moment(e.get("adhocDOrderModel.boundLowerDate")).format(e.get("inputDateTimeFormat")));if(!this.checkAdhocDateisValidBusinessDate(e.get("adhocDOrderModel.boundLowerDate")))return e.hideBusyIndicator(),a=moment(new Date).format(e.get("inputDateTimeFormat")),e.set("adhocDOrderModel.boundLowerDate",new Date),void Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),kl.value(e.localGeneral+"businessDateNotValid"),Komodo.Controls.MessageBoxOkButtons,e,"id5446675","warning");var o=[];$.each(e.get("allAccounts"),function(e,t){o.pushObject(t.accountno)});var n=new Object;n.CustomerId=e.get("adhocDOrderModel.customerNo"),n.Schedule=a,n.FinancialAccountIds=o,Komodo.Services.queryService.postJSON("/DebitOrder/ValidateAdhocDebitOrder",{data:n}).done(function(t){if(e.hideBusyIndicator(),t){var a="",o=!1,n=!1,s=t.CustomerAdhocBlocked.split("|");if("true"===s[0]&&(n=!0),$.each($.makeArray(t.PendingAdhocTransactions),function(t,n){return"Pending"===n.AHVStatus&&!0===n.IsPendingAdhocTransaction&&(o=!0,a=kl.value(e.localGeneral+"alreadyAHVPending")+"<br>"+kl.value(e.localGeneral+"pendingAdhocrequest")),
"Pending"===n.AHVStatus&&!1===n.IsPendingAdhocTransaction&&(o=!0,a+=kl.value(e.localGeneral+"alreadyAHVPending")),""===n.AHVStatus&&!0===n.IsPendingAdhocTransaction&&(o=!0,a+=kl.value(e.localGeneral+"pendingAdhocrequest")),!1}),$.each($.makeArray(t.AdhocAllowedForDate),function(t,n){var s=n.Value.split("|"),r=s[1];"false"===s[0]&&r.indexOf("exception")>1?(o=!0,a+=kl.value(e.localGeneral+"exceptionErrorMessage")):("false"===s[0]&&r.indexOf("Restrictions")>1&&(o=!0,a+=kl.value(e.localGeneral+"restrictedDaysErrorMessage")),"false"===s[0]&&r.indexOf("Restrictions")<1&&(o=!0,a+=kl.value(e.localGeneral+"cutOffErrorMessage")))}),!0===o)return Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),a,null,e,"id5446675","warning"),void e.adhocDOrderModel.set("isSaveButtonDisabled",!0);e.adhocDOrderModel.set("isSaveButtonDisabled",!1);var r=e.getErrors(e.get("adhocDOrderModel"));if(""!==r)return void Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),r,null,e,"id5446675","warning");if(n){var i="The customer's Ad-hoc is blocked from "+moment(s[1]).format(KomodoConfiguration.dateFormat)+" to "+moment(s[2]).format(KomodoConfiguration.dateFormat)+". Do you want to unblock the customer?",l=Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),i,Komodo.Controls.MessageBoxYesNoButtons,e,"id5446675","warning");return void(l.response=function(t){if("yes"==t){var a=Komodo.Application.ModalPaneController.create();e.registerModel("approveUnblock",Komodo.Models.AdhocDebitOrderUnblockModel),e.registerValidator(e.get("approveUnblock"),"supervisorUsername",{isRequired:!0,displayName:kl.value(e.localGeneral+"supervisorName"),minLength:1,maxLength:50}),e.registerValidator(e.get("approveUnblock"),"passCode",{isRequired:!0,displayName:kl.value(e.localGeneral+"passCode"),minLength:1,maxLength:50}),e.registerValidator(e.get("approveUnblock"),"comment",{isRequired:!0,displayName:kl.value(e.localGeneral+"comment"),minLength:1,maxLength:200}),a.popup(kl.value(e.localGeneral+"moduleTitle"),"adhocDebitOrderUnblock",{context:{data:e.get("approveUnblock"),validators:e.validators,unblock:function(){var t=this;!1!==e.canSubmitData(e.approveUnblock,kl.value(e.localGeneral+"moduleTitle"),{showInModal:!1})&&(t.data.set("disableAction",!0),e.country=e.loggedInCountryId,e.validateUserClaim(e.loggedInCountryId,t.data.supervisorUsername,t.data.passCode,e.supervisorClaim).done(function(o){if(void 0!==o){a.close();var n=t.data.supervisorUsername.substring(3),s=t.data.comment;e.unBlockCustomer(n,s)}else t.data.set("disableAction",!1),alert(kl.value(e.localGeneral+"accessDenied"))}))},cancel:function(){a.close()}}})}})}if(!0===e.adhocLimitInNormalCondition()){var l=Komodo.Controls.MessageBoxController.show(kl.value(e.localEditPaymeDetail+"confirmChanges"),kl.value(e.localEditPaymeDetail+"confirmChangesMsg"),Komodo.Controls.MessageBoxYesNoButtons,e,"id5446675","warning");l.response=function(t){"yes"===t&&(e.get("adhocDOrderModel").set("isSaveButtonDisabled",!0),e.submitAdHocDebitOrder())}}else e.adhocLimitForSpecificCondition(),e.get("adhocDOrderModel").set("isSaveButtonDisabled",!0)}}).error(function(t){var a=JSON.stringify(t),o=t.responseJSON.ExceptionMessage?t.responseJSON.ExceptionMessage:t.responseJSON.Message;Komodo.log("[ERROR] : validateAdhocDebitOrder ajax call failed. Error: "+a),Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),"[ERROR] : validateAdhocDebitOrder ajax call failed. Error: "+o,Komodo.Controls.MessageBoxOkButtons,e,"id5446674","danger"),e.hideBusyIndicator()})},validateBusinessRules:function(e){var t=this;""!==e&&void 0!==e||(e=-1),Komodo.Services.queryService.getJSON("/DebitOrder/IsAdHocDebitOrderTransactionInprogress?financialAccountId="+e).done(function(e){void 0!==e&&null!==e&&Komodo.Services.queryService.getJSON("/DebitOrder/IsCustomerAdhocBlocked?customerId="+t.get("adhocDOrderModel.customerNo")+"&schedule="+new moment(t.get("adhocDOrderModel.scheduledAdhocDate")).format("YYYY-MM-DDThh:mm:ss")).done(function(a){var o="",n=!1,s=a.split("|");"Pending"===e.AHVStatus&&!0===e.IsPendingAdhocTransaction&&(n=!0,o=t.localGeneral+"alreadyAHVPending<br>"+t.localGeneral+"pendingAdhocrequest"),"Pending"===e.AHVStatus&&!1===e.IsPendingAdhocTransaction&&(n=!0,o=o+t.localGeneral+"alreadyAHVPending"),""===e.AHVStatus&&!0===e.IsPendingAdhocTransaction&&(n=!0,o=o+t.localGeneral+"pendingAdhocrequest"),"No Record Found"===e.AHVStatus&&!0===e.IsPendingAdhocTransaction&&(n=!0,o=o+t.localGeneral+"pendingAdhocrequest"),"true"===s[0]&&(n=!0,o=o+"These customer is blocked from "+moment(s[1]).format(KomodoConfiguration.dateFormat)+" to "+moment(s[2]).format(KomodoConfiguration.dateFormat)),!0===n?(Komodo.Controls.MessageBoxController.show(kl.value(t.localGeneral+"customerblockedfor"),kl.value(o)),t.adhocDOrderModel.set("isSaveButtonDisabled",!0)):t.adhocDOrderModel.set("isSaveButtonDisabled",!1),t.hideBusyIndicator()}).error(function(e){var a=JSON.stringify(e),o=e.responseJSON.ExceptionMessage?e.responseJSON.ExceptionMessage:e.responseJSON.Message;Komodo.log("[ERROR] : retriveCustomersAdhocblockedstatus ajax call failed. Error: "+a),Komodo.Controls.MessageBoxController.show(kl.value(t.localGeneral+"moduleTitle"),"[ERROR] : retriveCustomersAdhocblockedstatus ajax call failed. Error: "+o,Komodo.Controls.MessageBoxOkButtons,t,"id5446674","danger"),t.hideBusyIndicator()})}).error(function(e){var a=JSON.stringify(e),o=e.responseJSON.ExceptionMessage?e.responseJSON.ExceptionMessage:e.responseJSON.Message;Komodo.log("[ERROR] : retriveCustomersAdhocblockedstatus ajax call failed. Error: "+a),Komodo.Controls.MessageBoxController.show(kl.value(t.localGeneral+"moduleTitle"),"[ERROR] : retriveCustomersAdhocblockedstatus ajax call failed. Error: "+o,Komodo.Controls.MessageBoxOkButtons,t,"id5446674","danger"),t.hideBusyIndicator()})},getAHVStatus:function(e,t){var a=this;""!==e&&void 0!==e||(e=-1),""!==t&&void 0!==t||(t=-1),Komodo.Services.queryService.getJSON("/DebitOrder/RetrieveAdhocDebitOrderRequest?targetBankAccountNumber="+e+"&financialAccountId="+t).done(function(e){void 0!==e&&null!==e&&("Pending"===e.AhvStatus?(Komodo.Controls.MessageBoxController.show(kl.value(a.localGeneral+"moduleTitle"),kl.value(a.localGeneral+"alreadyAHVPendingMsg")),a.adhocDOrderModel.set("isSaveButtonDisabled",!0)):a.adhocDOrderModel.set("isSaveButtonDisabled",!1),a.hideBusyIndicator())}).error(function(e){var t=JSON.stringify(e),o=e.responseJSON.ExceptionMessage?e.responseJSON.ExceptionMessage:e.responseJSON.Message;Komodo.log("[ERROR] : retriveAHVstatus ajax call failed. Error: "+t),Komodo.Controls.MessageBoxController.show(kl.value(a.localGeneral+"moduleTitle"),"[ERROR] : retriveAHVstatus ajax call failed. Error: "+o,Komodo.Controls.MessageBoxOkButtons,a,"id5446674","danger"),a.hideBusyIndicator()})},setSmartCardsOfAnAccount:function(){var e=this.getSelectedAccount();if(this.set("smartcards",Komodo.Application.ManageAccountUtility.getSmartCardsOrDeviceOfAnAccount(e)),0===this.get("smartcards").length){var t=this.get("smartcards");t.addObject("-"),this.set("smartcards",t)}},getErrors:function(e){var t=this,a="",o="";if(o=kl.value(this.localGeneral+"customValiudationErrorMsg")+"<br />",!t.get("allAccounts")&&t.get("allAccounts").length>0)return a=kl.value(this.localGeneral+"errorMessage11"),o+a;if(!e.get("amount")||""===$.trim(e.get("amount")))return a=kl.value(this.localGeneral+"errorMessage13"),o+a;if("0"===e.get("amount"))return"Amount can not be 0";if(this.validators.accountHolderNameValidator.errors&&this.validators.accountHolderNameValidator.errors.length>0)return o+this.validators.accountHolderNameValidator.errors;if(6!=customerInfo.customerClass&&this.validators.accountHolderIdValidator.errors&&this.validators.accountHolderIdValidator.errors.length>0)return o+this.validators.accountHolderIdValidator.errors;if(this.validators.accountNumberValidator.errors&&this.validators.accountNumberValidator.errors.length>0)return this.validators.accountNumberValidator.errors.length>0?o+this.validators.accountNumberValidator.errors[0]:o+this.validators.accountNumberValidator.errors;if(!e.get("bankAccountType"))return a=kl.value(this.localGeneral+"errorMessage8"),o+a;if(!e.get("accountNumber")||""===$.trim(e.get("accountNumber")))return a=kl.value(this.localGeneral+"errorMessage1"),o+a;if(!e.get("bankName")||""===$.trim(e.get("bankName")))return a=kl.value(this.localGeneral+"errorMessage2"),o+a;if(!e.get("branchName")||""===$.trim(e.get("branchName")))return a=kl.value(this.localGeneral+"errorMessage3"),o+a;if(!e.get("accountHolderName")||""===$.trim(e.get("accountHolderName")))return a=kl.value(this.localGeneral+"errorMessage4"),o+a;if(6!=customerInfo.customerClass){if(!(e.get("accountHolderId")&&""!==$.trim(e.get("accountHolderId"))))return a=kl.value(this.localGeneral+"errorMessage6"),o+a}return e.get("scheduledAdhocDate")&&""!==$.trim(e.get("scheduledAdhocDate"))?a:(a=kl.value(this.localGeneral+"errorMessage12"),o+a)},publishCreateActivity:function(e,t){var a=this,o=Komodo.Services.uiService.getController("application").get("_selectedCountryDescription"),n=Komodo.Models.CreateInteraction.create(),s=Komodo.Models.Case.create(),r=kl.value(a.localEditPaymeDetail+"successMessage")+e;s.set("InteracteeName",Komodo.Services.securityService.session.domainUserName),s.set("InteractionLocation",o),s.set("InteractionMedium","1"),s.set("CustomerUID",t),s.set("Notes",r),s.set("Category",5),s.set("SubCategory",125),s.set("Outcome",237),s.set("Status","1");var i=Komodo.canonicalFacadeFactory(n,["Country","Case"]);i.set("Country",a.get("loggedInCountryId")),i.set("Case",s),a.publishRequestOnBus(n,"CreateInteraction","v1")},getNewProcessID:function(){this.startNewProcess()},showBlockingBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,25e3,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},createDependentProperty:function(e,t){var a=this;t.forEach(function(t){void 0!==a.get("validators."+e)&&(a.get("validators."+e).functions.addObject(t),a.get("validators."+e).validate())})},removeDependentProperty:function(e){var t=this;void 0!==t.get("validators."+e)&&(t.get("validators."+e).functions.clear(),t.get("validators."+e).validate())},seperateAndGetAccountNumberFromDescription:function(e){return e?(this.set("accountno",e.accountno),this.set("accountNumberWithDescription",e.accountDescription)):(this.get("accountno")||this.set("accountno",0),this.set("accountNumberWithDescription","")),this.get("accountno")},validateUserClaim:function(e,t,a,o){var n=this,s=$.Deferred();return n.getSecurityService().authenticate(e,t,a).done(function(e){var t=void 0;$(e.permissions).each(function(a,n){n===o&&(t=e.sessionToken)}),s.resolve(t)}).fail(function(e){s.resolve(void 0)}),s},stop:function(){var e=this;e.set("accountno",""),e.set("accountNumberWithDescription",""),e.set("cashMOP",""),e.set("isCashAccountTypeRemoved",!1),e.set("isAccHolderNameAndIdEnabled",!1),e.set("customerName",""),e.set("customerID",""),e.set("payerAccountHolderId",""),e.set("isFieldDisabled",!1),e.set("isClientOverriden",""),e.overrideCustomerDocument.set("customerDocuments",[]),e.overrideCustomerDocument.set("enableDocGrid",!0),e.set("isCommercialCustomer",!1),e.set("isVisibleSelectRadioButton",!1),e.set("isVisibleAccountNumbers",!1),e.set("isDebtOrderAccountExist",!1),e.set("isPaymentDetailsExist",!1),e.set("updateCommercialPaymentDetails",!1),e.set("supervisonrUserName",""),e.set("isAuthenticated",!1),e.set("isAHVOverrideAllowed",!0),e.set("ahvOverrideModel",[]),e.set("isDisabledpayerIsCustomer",!1),e.set("isAHVReson",!1),e._super()},clearAllAHVOverrdieModel:function(){var e=this;e.set("ahvOverrideModel.ahvSupervisorUserName",""),e.set("ahvOverrideModel.passCode",""),e.set("ahvOverrideModel.acceptDocumentation",!1),e.set("isAuthenticated",!1),e.set("disableOverrideAHV",!0)},uploadfiles:function(){var e=this;return e.set("documentsVerified",void 0),$(e.fileUploader.files).each(function(e,t){2!==t.status&&4!==t.status||(t.status=1)}),e.fileUploader.uploadCanceled=!1,e.fileUploader.start(),!1},callOverrideAHVService:function(e,t){var a=this;Komodo.Services.queryService.putJSONApiRoot("customers/"+e+"/override-payment-details",{data:t}).done(function(e){if(void 0!=e){a.logInteractionForAHVOverride(!0),a.disableOrEnableControls("disable"),a.disableEnableCustomerDetails("disable"),a.adhocDOrderModel.set("ahvStatusMessage","Compliant"),a.set("AHVStatus","Compliant"),a.adhocDOrderModel.set("isCompliant",!0),a.adhocDOrderModel.set("AHVStatus","Compliant"),a.adhocDOrderModel.set("ahvStatus","Compliant"),a.set("isAuthenticated",!1);Komodo.Controls.MessageBoxController.show(kl.value(a.localGeneral+"moduleTitle"),kl.value(a.localGeneral+"ahvSucessMessage"),Komodo.Controls.MessageBoxOkButtons,a,"id5446675","success").response=function(e){"ok"==e&&(a.set("AHVStatus","Compliant"),a.adhocDOrderModel.set("isCompliant",!0),a.disableorenableAHVControls(!0))},a.hideBusyIndicator()}else a.adhocDOrderModel.set("isCompliant",!1),Komodo.Controls.MessageBoxController.show(kl.value(a.localGeneral+"moduleTitle"),"No response from AHV Override",Komodo.Controls.MessageBoxOkButtons,a,"id5446675","warning");a.hideBusyIndicator()}).fail(function(e){if(e){var t=JSON.parse(e.responseText),o="Override Payment Details Failed: "+e.statusText+"<br> Response: "+t.detail;Komodo.Controls.MessageBoxController.show(kl.value(a.localGeneral+"moduleTitle"),o,Komodo.Controls.MessageBoxOkButtons,a,"id123456","danger")}a.hideBusyIndicator()})},getBankNamebyId:function(e){var t=this,a="";return $.each(t.banks,function(t,o){o.CanonicalKey==e&&(a=o.CanonicalValue)}),a},switchCustomerIsAccountHolder:function(){var e=this;if(!e.isCommercialCustomer){var t=Komodo.Services.customerProfileService.currentCustomerDetails.ResponseMessage.Payload.CustomerDetail.PersonalDetail;void 0!=t&&(t.IdentityDetailValue==e.get("adhocDOrderModel.accountHolderId")?e.set("adhocDOrderModel.payerIsCustomer",!0):e.set("adhocDOrderModel.payerIsCustomer",!1))}},verifyPaymentDetailsAHVRealTime:function(){for(var e=this,t=e.get("customerModel"),a=e.getcustomerPaymentDetail("VerifyPaymentDetail"),o=e.getBankNamebyId(a.BankName),n="Verified-Bank-Details?bankAccountNumber="+a.AccountNumber+"&bankBranchCode="+a.BranchCode+"&bankAccountType="+a.BankAccountType+"&idNumber="+a.PayerIDNumber+"&bankName="+o+"&initials="+a.PayerName.slice(0,1)+"&surname="+a.PayerSurname+"&customerNumber="+e.customerNumber,s=0;s<t.accounts.length;s++){t.accounts[s].selected&&Komodo.Services.queryService.getJSONFromApiRoot(n).done(function(t){if(t&&t.ahvStatus){switch(e.set("isAHVReson",!0),t.ahvStatus.toLowerCase()){case Komodo.AHVOverride.Non_Compliant:e.logInteractionForAHV(!1),e.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),t.reason,Komodo.Controls.MessageBoxOkButtons,e,"id123456","danger");break;case Komodo.AHVOverride.Compliant:e.adhocDOrderModel.set("ahvStatusMessage","Compliant"),e.set("AHVStatus","Compliant"),e.adhocDOrderModel.set("isCompliant",!0),e.adhocDOrderModel.set("AHVStatus","Compliant"),e.adhocDOrderModel.set("ahvStatus","Compliant"),e.updateBankingDetails(a,t.ahvStatus)}e.adhocDOrderModel.set("ahvRejectionReson",t.reason)}else Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),"No response from AHV",Komodo.Controls.MessageBoxOkButtons,e,"id5446675","warning")}).error(function(t){if(t&&t.responseText){var a=JSON.parse(t.responseText);Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),a.detail,Komodo.Controls.MessageBoxOkButtons,e,"id123456","danger"),e.set("adhocDOrderModel.isSaveButtonDisabled",!1)}})}},ahvStatusChanging:function(){var e=this;e.isAllowedForAHVRealtime()?e.set("isAHVOverrideAllowed",!1):(e.set("isAHVOverrideAllowed",!0),e.registerValidator(e.get("ahvOverrideModel"),"ahvSupervisorUserName",{type:"string",isRequired:!0,functions:Komodo.UI.Validators.DebitOrderValidator,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.bankName")}),e.registerValidator(e.get("ahvOverrideModel"),"passCode",{type:"string",isRequired:!0,functions:Komodo.UI.Validators.DebitOrderValidator,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.bankName")}))}.observes("adhocDOrderModel.ahvStatusMessage"),validateEmailAddress:function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},isAllowedForAHVRealtime:function(){var e=this,t=Komodo.Services.customerProfileService.currentCustomerDetails.ResponseMessage.Payload.CustomerDetail.PersonalDetail.IdentityDetailType,a=null!=t?t:"";return!("Compliant"!=e.get("adhocDOrderModel.ahvStatusMessage")&&(!e.checkBigSevenBank()||!e.get("adhocDOrderModel.payerIsCustomer")||e.get("adhocDOrderModel.payerIsCustomer")&&"1"!=a||e.isCommercialCustomer))},logInteractionForAHV:function(e){var t=this,a=t.get("adhocDOrderModel"),o=Komodo.DebitOrder.ADHOC_SUCCESS_INTERACTION_CATEGORY,n=Komodo.DebitOrder.ADHOC_SUCCESS_INTERACTION_SUBCATEGORY,s=void 0,r=void 0,i=a.acccountId,l=a.customerNo,c=a.amount;e?(s=Komodo.DebitOrder.ADHOC_AHVVerified_INTERACTION_OUTCOME,r=kl.value(t.localGeneral+"ahvVerifiedMessage")):(s=Komodo.DebitOrder.ADHOC_AHVNotVerified_INTERACTION_OUTCOME,r=kl.value(t.localGeneral+"ahvNotVerifiedMessage")),t.publishCreateInteraction(l,r,n,s,c,o,i)}}),Komodo.Models.EditPaymentDetailsModel=Ember.Object.extend({init:function(){this.customerTypee=void 0,this.methodOfPayment=void 0,this.acccountId=void 0,this.selectedAcccountId=void 0,this.invoicePeriod=void 0,this.accountHolderName=void 0,this.accountHolderId=void 0,this.bankName=void 0,this.branchName=void 0,this.branchCode=void 0,this.accountType=void 0,this.accountNumber=void 0,this.debitOrderDay=void 0,this.customerAccountHolder=void 0,this.methodOfPaymentData=void 0,this.radioButtonMethodofPayment=[{title:"Debit Order",value:"1"},{title:"Cash",value:"2"},{title:"AHV Pending",value:"3"}],this.hideDebitOrderControls=void 0,this.hidePaymentDayControls=!0,this.isSaveButtonDisabled=!0,this.methodOfPayments=[],this.accountDescription=void 0,this.isDisbaleInvoiceDayTemp=!1,this.iscustomerTypeDealer=void 0,this.bankAccountType=void 0,this.bankAccountTypes=[],this.isDisbaleInvoiceDay=!1,this.supportDocPagerPageContent=Ember.A(),this.supportingDocuments=[],this.ahvPending=!1,this.thirdPartyDocuments=[],this.supervisorUsername="",this.supervisorPassword="",this.disableAction=!1,this.isCancelButtonDisabled=!0,this.accountHolderPhoneNumber=void 0,this.accountHolderEmailAddress=void 0,this.acceptDocumentation=!1,this._super()}}),Komodo.Models.SupportingDocumentModel=Ember.Object.extend({init:function(){this.documentName="",this.documentSize="",this.documentType="",this.documentTypeText="",this.documentSerialNumber="",this.serialNumber="",this.uploadPercentage="",this.uploadStatus="",this.documentTypes=[],this.documentSerialNumbers=[],this.documentAlreadyUploaded=!1,this._super()},canDocumentDelete:function(){return!(1==this.get("documentAlreadyUploaded")||"DONE"==this.get("uploadStatus"))}.property("uploadStatus","documentAlreadyUploaded")}),Komodo.Application.EditPaymentDetailsController=Komodo.UI.Controller.extend({localGeneral:"locale.manageAccount.editPaymentDetails:general.",localEditPaymeDetail:"locale.manageAccount.editPaymentDetails:paymentDetail.",localAhvSupervisorApproval:"locale.manageAccount.editPaymentDetails:ahvSupervisorApproval.",localUpdateBankingInteraction:"locale.manageAccount.editPaymentDetails:updateBankingInteraction.",localUploadDocumentInteraction:"locale.manageAccount.editPaymentDetails:uploadDocumentInteraction.",isDisableAHVOverride:!0,ahvAccountType:void 0,thirdPartyDocuments:Ember.A(),documentTypes:Ember.A(),thirdPartyDocUploader:void 0,thirdPartyDocPatternAlias:"TPDOC_AC",isShowThirdPartyDocs:!1,isAHVEnable:void 0,existingAccountNumber:void 0,messageToPerformAHV:void 0,supervisorClaim:["clarity://documentApproval/canApprove"],sessionToken:void 0,needs:["genericPayment"],init:function(){this._super();this.set("isDisbaleMethodOfPayment",!1),this.set("isDisbaleBankName",!0),this.set("isDisbaleAccountType",!0),this.set("isDisbaleAccountNumber",!1),this.set("isDisbaleBranchName",!0),this.set("isDisbaleIsCustomerAccountHolder",!1),this.set("loggedInCountryId",void 0),this.set("banks",[]),this.set("bankBranches",[]),this.set("bankAccountTypes",[]),this.set("debitOrderDays",[]),this.set("editPaymentDetailsModel",null),this.set("hideDebOrdControls",!1),this.set("allAccounts",[]),this.set("smartcards",[]),this.set("isAccHolderNameAndIdEnabled",!0),this.set("customerName",""),this.set("customerID",""),this.set("customerEmail",""),this.set("customerPhoneNumber",""),this.set("payerAccountHolderName",""),this.set("payerAccountHolderId",""),this.set("isCashAccountTypeRemoved",!1),this.set("cashMOP",""),this.set("accountTypes",[]),this.set("isFieldDisabled",!1),this.set("noAccountExist",!1),this.set("noRequired",!1),this.set("isAccountDataAvailable",!0),this.set("isbranchCodeEnabled",!0),this.set("loggedInCountryName",""),Komodo.log("Constructing Edit payment detail controller"),this.set("processVersion","v1.1"),this.set("processName","Edit payment controller"),this.requiresDependency("_queryService",{singleton:Komodo.Services.queryService}),this.registerModel("editPaymentDetailsModel",Komodo.Models.EditPaymentDetailsModel),this.set("editPaymentDetailsModel.radioButtonMethodofPayment",[]),this.get("editPaymentDetailsModel.radioButtonMethodofPayment").pushObject(Ember.Object.create({title:"Debit Order",value:"1"})),this.get("editPaymentDetailsModel.radioButtonMethodofPayment").pushObject(Ember.Object.create({title:"Cash",value:"2"})),this.get("editPaymentDetailsModel.radioButtonMethodofPayment").pushObject(Ember.Object.create({title:"AHV Pending",value:"3"})),this.set("customerNumber",""),this.set("isDocumentAvailable",!1),this.set("isEnableShowOverrideAHVPanel",!1),this.set("isBankDetailsChanged",!1),this.set("isSACustomerIsNotAccountHolder",!1),this.set("isSACustomerForceToAHV",!1),this.set("verifyBySupervisorDone",!0),this.set("isVerifiedBySupervisor",!1),this.set("clickedOnEdit",!1),this.set("disableOverrideAHV",!0),this.requiresDependency("_securityService",{singleton:Komodo.Services.securityService})},start:function(){if(this.set("isDisableAHVOverride",!0),this.set("loggedInCountryId",this.getQueryService().getSelectedCountryId()),this.getPermissions(),this.setThirdPartyPaymentDocumentDefaults(),this.checkAndGetCustomer(),this.setDefaults(),!isCustomerAvailable)return Komodo.Controls.MessageBoxController.show(kl.value(this.localGeneral+"customerNotFound"),kl.value(this.localGeneral+"customerNotFoundMsg")),void(void 0!=this.editPaymentDetailsModel.acccountId&&this.boxOfficeButtons());var e=this;Komodo.Services.featureToggleService.isEnabled("EditPaymentDetails","IsAllowViewOrEditPaymentDetails").done(function(t){if(t){var a=Komodo.Services.securityService.hasPermission("clarity://managePayments/canViewOrEditPaymentDetails"),o=Komodo.Services.securityService.hasPermission("clarity://managePayments/canViewOrEditPaymentDetailsForSpecialist");1!=customerInfo.customerClass&&9!=customerInfo.customerClass&&10!=customerInfo.customerClass||a?3!=customerInfo.customerClass||o?"VIP"==customerInfo.customerTypeText&&7==customerInfo.typeId||"External Demo"==customerInfo.customerTypeText&&10==customerInfo.typeId||"Internal Demo"==customerInfo.customerTypeText&&12==customerInfo.typeId||"Sales Promoters"==customerInfo.customerTypeText&&13==customerInfo.typeId||"Field Trials"==customerInfo.customerTypeText&&38==customerInfo.typeId?(e.set("isAccountDataAvailable",!1),e.set("noRequired",!0),e.editPaymentDetailsModel.set("customerTypee",kl.value(e.localEditPaymeDetail+"serviceNoRequired",{customerType:customerInfo.customerTypeText}))):(e.set("noRequired",!1),e.setDefaultpopulateData()):(e.set("isAccountDataAvailable",!1),e.set("noRequired",!0),e.editPaymentDetailsModel.set("customerTypee",kl.value(e.localEditPaymeDetail+"messageViewOrEditPaymentDetailsForSpecialist",{customerType:customerInfo.customerTypeText}))):(e.set("isAccountDataAvailable",!1),e.set("noRequired",!0),e.editPaymentDetailsModel.set("customerTypee",kl.value(e.localEditPaymeDetail+"messageViewOrEditPaymentDetails",{customerType:customerInfo.customerTypeText})))}else e.set("noRequired",!1),e.setDefaultpopulateData()}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)}),this.checkPermissionsToUploadThirdPartyDocs(),this.checkBankingDetails(),this._super()},canUploadThirdPartyAuthDocs:!1,canSeeOverrideAHVControls:!1,isReadOnlyOverrideAHVControls:!1,isBankAHVCompliant:!1,isSubmitButtonVisible:!1,getPermissions:function(){this.set("canUploadThirdPartyAuthDocs",!0),this.set("canSeeOverrideAHVControls",1==Komodo.Services.securityService.hasPermission("clarity://managePayments/allowOverrideAHV")),this.set("isReadOnlyOverrideAHVControls",1==Komodo.Services.securityService.hasPermission("clarity://managePayments/allowOverrideAHVReadOnly"))},checkPermissionsToUploadThirdPartyDocs:function(){1!=Komodo.Services.securityService.hasPermission("clarity://managePayments/canUploadThirdPartyDocs")&&(this.set("editPaymentDetailsModel.customerAccountHolder",!0),this.set("isDisbaleIsCustomerAccountHolder",!0))},disableAddThirdPartyUploadDoc:!1,oncanUploadThirdPartyAuthDocsChanged:function(){this.set("disableAddThirdPartyUploadDoc",1!=this.get("canUploadThirdPartyAuthDocs"))}.observes("canUploadThirdPartyAuthDocs"),boxOfficeButtons:function(){var e=this.get("editPaymentDetailsModel");Komodo.Services.featureToggleService.isEnabled("EditPaymentDetails","IsAllowEditPaymentDayForNonDefaultAccount").done(function(t){t?"Internal Demo"==customerInfo.customerTypeText||"External Demo"==customerInfo.customerTypeText||"9"==e.accountType?e.set("isSaveButtonDisabled",!0):"Payment Plan"==e.accountDescription&&(e.set("isSaveButtonDisabled",!0),e.set("isCancelButtonDisabled",!0)):"Agent"!=customerInfo.customerTypeText&&"Super Dealer"!=customerInfo.customerTypeText&&"MPOS"!=customerInfo.customerTypeText||6!=customerInfo.customerClass||("2"==e.get("methodOfPaymentData")?e.set("isSaveButtonDisabled",!0):e.set("isSaveButtonDisabled",!1))}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)})},checkBankingDetails:function(){var e=this;"2"==e.editPaymentDetailsModel.methodOfPaymentData&&e.set("hideDebOrdControls",!1),"1"!=e.editPaymentDetailsModel.methodOfPaymentData&&"3"!=e.editPaymentDetailsModel.methodOfPaymentData||!e.isYes(e.editPaymentDetailsModel.defaultAccount)||(e.set("hideDebOrdControls",!0),e.editPaymentDetailsModel.customerAccountHolder&&!e.isAnyPaymentDetailsFieldEmpty()&&(e.set("isDisbaleBankName",!0),e.set("isDisbaleAccountType",!0),e.set("isDisbaleAccountNumber",!0),e.set("isDisbaleBranchName",!0),e.set("isDisbaleIsCustomerAccountHolder",!0),e.set("isAccHolderNameAndIdEnabled",!0)),e.editPaymentDetailsModel.customerAccountHolder&&e.isAnyPaymentDetailsFieldEmpty()?(e.set("isAccHolderNameAndIdEnabled",!0),e.set("isDisbaleIsCustomerAccountHolder",!0),e.set("isDisbaleBankName",!1),e.set("isDisbaleAccountType",!1),Ember.isBlank(e.editPaymentDetailsModel.accountNumber)?e.set("isDisbaleAccountNumber",!1):e.set("isDisbaleAccountNumber",!0),e.set("isDisbaleBranchName",!1)):e.editPaymentDetailsModel.customerAccountHolder||e.isAnyPaymentDetailsFieldEmpty()||e.isAnyCustomerDetailsFieldEmpty()?e.editPaymentDetailsModel.customerAccountHolder||!e.isAnyPaymentDetailsFieldEmpty()&&!e.isAnyCustomerDetailsFieldEmpty()||(e.set("isDisbaleIsCustomerAccountHolder",!1),e.set("isAccHolderNameAndIdEnabled",!1),e.set("isDisbaleBankName",!1),e.set("isDisbaleAccountType",!1),Ember.isBlank(e.editPaymentDetailsModel.accountNumber)?e.set("isDisbaleAccountNumber",!1):e.set("isDisbaleAccountNumber",!0),e.set("isDisbaleBranchName",!1)):(e.set("isDisbaleBankName",!0),e.set("isDisbaleAccountType",!0),e.set("isDisbaleAccountNumber",!0),e.set("isDisbaleBranchName",!0),e.set("isDisbaleIsCustomerAccountHolder",!0),e.set("isAccHolderNameAndIdEnabled",!0)))},checkAndGetCustomer:function(){var e=this;helperFunction=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),isCustomerAvailable=helperFunction.isCustomerIdIsAvailableToRetriveData(),isCustomerAvailable&&(customerInfo=helperFunction.getCustomerDetails(),this.set("customerNumber",customerInfo.customerNo),e.getCustomerDetails())},getCustomerDetails:function(){var e=this;isCustomerAvailable&&(6==customerInfo.customerClass&&this.get("editPaymentDetailsModel").set("iscustomerTypeDealer",!0),Komodo.Services.queryService.getJSON("/CustomerProfile?customerId="+customerInfo.customerNo,{async:!1}).done(function(t){t&&t.CustomerDetail&&(t.CustomerDetail.SubscriberSystemUID&&t.CustomerDetail.SubscriberSystemUID.SubscriberSystem.length>0&&e.set("companyRegistrationNumber",t.CustomerDetail.CompanyRegistrationNumber),"6"===t.CustomerDetail.Class?e.set("customerName",void 0===customerInfo.companyName||null===customerInfo.companyName?"":customerInfo.companyName.trim()):(e.set("customerName",(void 0===customerInfo.firstName||null===customerInfo.firstName?"":customerInfo.firstName.trim())+" "+(void 0===customerInfo.lastName||null===customerInfo.lastName?"":customerInfo.lastName.trim())),e.set("customerID",customerInfo.idNo)),e.set("customerEmail",customerInfo.email),e.set("customerPhoneNumber",e.removeSpacesAndPlusFromPhoneNumber(customerInfo.mobileNo)))}).error(function(t){e.set("customerName",(void 0===customerInfo.firstName||null===customerInfo.firstName?"":customerInfo.firstName.trim())+" "+(void 0===customerInfo.lastName||null===customerInfo.lastName?"":customerInfo.lastName.trim())),e.set("customerID",customerInfo.idNo),e.set("customerEmail",customerInfo.email),e.set("customerPhoneNumber",e.removeSpacesAndPlusFromPhoneNumber(customerInfo.mobileNo));var a=JSON.stringify(t);Komodo.log("[ERROR] : retrieveCustomer ajax call failed. Error: "+a)}))},removeSpacesAndPlusFromPhoneNumber:function(e){var t="";return Ember.isEmpty(e)?t:(t=e.replace(/\D/g,""),t.trim())},setDefaultpopulateData:function(){var e=this;e.setMethodOfPayment(),e.setAccountTypes(),e.registerValidation(),e.initializeManageAccountConstants(),e.bindPaymentDetail(void 0,!1),e.setControllEnableProperty(),e.getSelectedCountryName()},setMethodOfPayment:function(){var e=this;Komodo.Services.cachedDataService.fetch("MethodOfPayment").done(function(t){var a=e.get("editPaymentDetailsModel");a.get("methodOfPayments").clear(),$.each(t,function(t,o){a.get("methodOfPayments").addObject(o),"Cash"===o.value&&e.set("cashMOP",o)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve method of payment from CDM")})},setAccountTypes:function(){var e=this;e.set("accountTypes",Komodo.Services.customerProfileService.get("accountType").AccountTypes.AccountType),e.setDebitOrderDays()},initializeManageAccountConstants:function(){this.set("configuredSPLProducts",GetClarityConstants("ManageAccountConstants","splProductConfigurations.productId")),this.set("splAgreementContactPeriod",GetClarityConstants("ManageAccountConstants","splProductConfigurations.agreementContractPeriod"))},setAllAccounts:function(){var e=this,t=Komodo.Application.ManageAccountUtility.isAnyAccountExist();e.set("allAccounts",[]);var a="";if(t&&t.length>0&&e.get("accountTypes")&&e.get("accountTypes").length>0){e.set("noAccountExist",!1),e.set("isAccountDataAvailable",!0);for(var o=helperFunction.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account),n=[],a="",s=0;s<o.length;s++)a=e.get("accountTypes").filter(function(e){if(e.CanonicalKey===o[s].Type)return e.AccountTypeDescription}),
"1"==Komodo.Services.customerProfileService.personalDetails.customerClass||"9"==Komodo.Services.customerProfileService.personalDetails.customerClass||"4"==Komodo.Services.customerProfileService.personalDetails.customerClass?null!=o[s].Name&&void 0!=o[s].Name&&""!=o[s].Name?n.pushObject(o[s].UID+" - "+o[s].Name):n.pushObject(o[s].UID):null!=a&&void 0!=a&&""!=a&&a.length>0?n.pushObject(o[s].UID+" - "+a[0].AccountTypeDescription):n.pushObject(o[s].UID),0!=s&&o[s].IsDefault&&(n[0]=[n[s],n[s]=n[0]][0]);if(n.length>1){var r=n[0];n.shift(),n=n.sort(function(e,t){return parseInt(e,10)>parseInt(t,10)}),n.unshift(r)}if(e.set("allAccounts",n),e.get("accountno")){if(n&&n.length>0)for(var s=0;s<e.get("allAccounts").length;s++)if(tempAccountNoWithDesc=e.get("allAccounts")[s],null!=tempAccountNoWithDesc&&void 0!=tempAccountNoWithDesc&&""!=tempAccountNoWithDesc&&(tempAccountArray=tempAccountNoWithDesc.split(" - "),null!=tempAccountArray&&void 0!=tempAccountArray&&""!=tempAccountArray&&tempAccountArray.length>0&&tempAccountArray[0]===e.get("accountno"))){e.get("editPaymentDetailsModel").set("selectedAcccountId",tempAccountNoWithDesc);break}}else e.get("allAccounts")&&e.get("allAccounts").length>0&&e.get("editPaymentDetailsModel").set("selectedAcccountId",e.get("allAccounts")[0])}else e.set("noAccountExist",!0),e.set("isAccountDataAvailable",!1)},setDebitOrderDays:function(){var e=this;"1"==customerInfo.customerClass||"4"==customerInfo.customerClass||"9"==customerInfo.customerClass?Komodo.Services.cachedDataService.fetch("InvoiceDayCommercial").done(function(t){e.debitOrderDays.length>0&&e.get("debitOrderDays").clear(),$.each(t,function(t,a){a.key2=parseInt(a.key),e.get("debitOrderDays").addObject(a)}),e.set("debitOrderDays",e.get("debitOrderDays").sortBy("key2")),e.setBanks()}).fail(function(){Komodo.log("[ERROR] : could not retrieve debit order day from CDM")}):Komodo.Services.cachedDataService.fetch("InvoiceDay").done(function(t){e.debitOrderDays.length>0&&e.get("debitOrderDays").clear(),"6"!=customerInfo.customerClass&&t.removeObject(t.findBy("key","29")),$.each(t,function(t,a){a.key2=parseInt(a.key),e.get("debitOrderDays").addObject(a)}),e.set("debitOrderDays",e.get("debitOrderDays").sortBy("key2")),e.setBanks()}).fail(function(){Komodo.log("[ERROR] : could not retrieve debit order day from CDM")})},setBanks:function(){var e=this;Komodo.Services.cachedDataService.fetch("BankDetail").done(function(t){var a=JSON.parse(t);e.get("banks").clear(),$.each($.makeArray(a.Banks.Bank),function(t,a){e.get("banks").addObject(a)}),e.setBankAccountTypes()}).fail(function(){Komodo.log("[ERROR] : could not retrieve hierarchical example data")})},registerValidation:function(){var e=this;e.registerValidator(e.get("editPaymentDetailsModel"),"bankAccountType",{type:"string",isRequired:!0,functions:Komodo.UI.Validators.DebitOrderValidator,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.accountType")}),e.registerValidator(e.get("editPaymentDetailsModel"),"debitOrderDay",{type:"string",isRequired:!0,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.debitOrderDay")}),e.registerValidator(e.get("editPaymentDetailsModel"),"bankName",{type:"string",isRequired:!0,functions:Komodo.UI.Validators.DebitOrderValidator,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.bankName")}),e.registerValidator(e.get("editPaymentDetailsModel"),"branchName",{type:"string",isRequired:!0,functions:Komodo.UI.Validators.DebitOrderValidator,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.branchName")}),e.registerValidator(e.get("editPaymentDetailsModel"),"branchCode",{type:"string",isRequired:!0,functions:Komodo.UI.Validators.DebitOrderValidator,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.branchCode")}),1!=customerInfo.customerClass&&9!=customerInfo.customerClass?e.registerValidator(e.get("editPaymentDetailsModel"),"accountHolderName",{type:"string",isRequired:!0,minLength:3,maxLength:61,functions:Komodo.UI.Validators.firstNameAndLastNameValidator,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.accountHolderFullName")}):e.registerValidator(e.get("editPaymentDetailsModel"),"accountHolderName",{type:"string",isRequired:!0,minLength:3,maxLength:50,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.accountHolderFullName")}),e.registerValidator(e.get("editPaymentDetailsModel"),"accountHolderPhoneNumber",{type:"number",isRequired:!0,minLength:9,maxLength:14,functions:Komodo.UI.Validators.numericValidator,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.accountHolderPhoneNumber")}),e.registerValidator(e.get("editPaymentDetailsModel"),"accountHolderEmailAddress",{type:"string",isRequired:!0,minLength:6,maxLength:254,regExPattern:"^\\w+([-+.']\\w+)*@\\w+([-.]\\w+)*\\.[a-zA-Z]{2,}$",displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.accountHolderEmailAddress")}),6!=customerInfo.customerClass&&1!=customerInfo.customerClass&&9!=customerInfo.customerClass?e.registerValidator(e.get("editPaymentDetailsModel"),"accountHolderId",{type:"string",isRequired:!0,minLength:GetCustomerTypesConstants("CustomerValidationsConstants","ACCOUNTHOLDERID_MIN"),maxLength:GetCustomerTypesConstants("CustomerValidationsConstants","ACCOUNTHOLDERID_MAX"),functions:Komodo.UI.Validators.alphanumericValidator,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.accountHolderId")}):e.registerValidator(e.get("editPaymentDetailsModel"),"accountHolderId",{type:"string",isRequired:!0,minLength:GetCustomerTypesConstants("CustomerValidationsConstants","COMMERCIAL_ACCOUNTHOLDERID_MIN"),maxLength:GetCustomerTypesConstants("CustomerValidationsConstants","COMMERCIAL_ACCOUNTHOLDERID_MAX"),displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.accountHolderId")}),e.registerValidator(e.get("editPaymentDetailsModel"),"methodOfPaymentData",{type:"string",isRequired:!0,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.methodOfPayment")})},setBankAccountTypes:function(){var e=this;Komodo.Services.cachedDataService.fetch("MethodOfPayment").done(function(t){var a=e.get("editPaymentDetailsModel");a.get("bankAccountTypes").clear(),$.each(t,function(e,t){"CASH"!==t.value.toUpperCase()&&"PAYROLL"!==t.value.toUpperCase()&&"AHV PENDING"!==t.value.toUpperCase()&&a.get("bankAccountTypes").addObject(t)}),e.setAllAccounts(),e.setDocumentTypes()}).fail(function(){Komodo.log("[ERROR] : could not retrieve method of payment from CDM")})},methodOfPaymentChanged:function(){var e=this,t=e.get("editPaymentDetailsModel"),a=t.radioButtonMethodofPayment.find(function(e){return"AHV Pending"===e.title});t&&("3"!==Ember.get(t,"methodOfPaymentData")||!e.isYes(t.get("defaultAccount"))&&"Payment Plan"!=t.get("accountDescription")?e.editPaymentDetailsModel.set("ahvPending",!1):e.editPaymentDetailsModel.set("ahvPending",!0),void 0!=t.get("methodOfPaymentData")&&"2"===t.get("methodOfPaymentData")?(void 0!=a&&t.radioButtonMethodofPayment.removeAt(2),e.set("hideDebOrdControls",!1),e.removeDependentProperty("bankNameValidator"),e.removeDependentProperty("branchNameValidator"),e.removeDependentProperty("branchCodeValidator"),e.removeDependentProperty("accountNumberValidator"),e.removeDependentProperty("accountHolderNameValidator"),e.removeDependentProperty("bankAccountTypeValidator"),6!=customerInfo.customerClass&&e.removeDependentProperty("accountHolderIdValidator"),t.set("hideDebitOrderControls",!1),e.get("isCashAccountTypeRemoved")&&"Cash"!=t.get("methodOfPayments")[0].value&&(t.get("methodOfPayments").insertAt(0,e.get("cashMOP")),t.set("methodOfPayment",e.get("cashMOP").key))):void 0==t.get("methodOfPaymentData")||"1"!==t.get("methodOfPaymentData")&&"3"!==t.get("methodOfPaymentData")||("3"===t.get("methodOfPaymentData")?void 0==a&&t.radioButtonMethodofPayment.pushObject(Ember.Object.create({title:"AHV Pending",value:"3"})):void 0!=a&&t.radioButtonMethodofPayment.removeAt(2),e.set("hideDebOrdControls",void 0!=t.get("methodOfPaymentData")&&("1"===t.get("methodOfPaymentData")||"3"===t.get("methodOfPaymentData"))),e.createDependentProperty("bankNameValidator",[Komodo.UI.Validators.RequiredValidator]),e.createDependentProperty("branchNameValidator",[Komodo.UI.Validators.RequiredValidator]),e.createDependentProperty("branchCodeValidator",[Komodo.UI.Validators.RequiredValidator]),e.createDependentProperty("bankAccountTypeValidator",[Komodo.UI.Validators.RequiredValidator]),(Ember.isBlank(t.accountNumber)||-1===t.accountNumber.trim().indexOf("*"))&&e.registerValidator(t,"accountNumber",{type:"number",isRequired:!0,functions:Komodo.UI.Validators.numericValidator,minLength:5,maxLength:34,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.accountNumber")}),e.registerValidator(e.get("editPaymentDetailsModel"),"bankAccountType",{type:"string",isRequired:!0,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.accountType")}),1!=customerInfo.customerClass&&9!=customerInfo.customerClass?e.createDependentProperty("accountHolderNameValidator",[Komodo.UI.Validators.RequiredValidator,Komodo.UI.Validators.MinLengthValidator,Komodo.UI.Validators.MaxLengthValidator,Komodo.UI.Validators.RegExValidator,Komodo.UI.Validators.shouldNotOneStringAndshouldNotStartWithSpace]):e.createDependentProperty("accountHolderNameValidator",[Komodo.UI.Validators.RequiredValidator,Komodo.UI.Validators.MinLengthValidator,Komodo.UI.Validators.MaxLengthValidator]),6!=customerInfo.customerClass&&1!=customerInfo.customerClass&&9!=customerInfo.customerClass?e.createDependentProperty("accountHolderIdValidator",[Komodo.UI.Validators.RequiredValidator,Komodo.UI.Validators.MinLengthValidator,Komodo.UI.Validators.MaxLengthValidator,Komodo.UI.Validators.alphanumericValidator]):e.createDependentProperty("accountHolderIdValidator",[Komodo.UI.Validators.RequiredValidator,Komodo.UI.Validators.MinLengthValidator,Komodo.UI.Validators.MaxLengthValidator]),t.set("hideDebitOrderControls",!0),0==e.get("isCashAccountTypeRemoved")&&e.set("isCashAccountTypeRemoved",!0),e.get("isCashAccountTypeRemoved")&&"Cash"==t.get("methodOfPayments")[0].value&&t.get("methodOfPayments").removeObject(e.get("cashMOP")),1==e.editPaymentDetailsModel.get("customerAccountHolder")?e.set("isAccHolderNameAndIdEnabled",!0):e.set("isAccHolderNameAndIdEnabled",!1),e.customerIsAccountHolder()),2!=customerInfo.customerClass&&3!=customerInfo.customerClass||e.enableBankDetails(),e.get("clickedOnEdit")||e.setControllEnableProperty()),e.checkBankingDetails()}.observes("editPaymentDetailsModel.methodOfPaymentData"),enableBankDetails:function(){var e=this,t=e.get("editPaymentDetailsModel");Komodo.Services.featureToggleService.isEnabled("EditPaymentDetails","IsAllowEditPaymentDayForNonDefaultAccount").done(function(a){a&&(void 0!=t.get("methodOfPaymentData")&&"2"===t.get("methodOfPaymentData")&&e.isYes(t.get("defaultAccount"))?(e.set("hideDebOrdControls",!0),e.removeDependentProperty("bankNameValidator"),e.removeDependentProperty("branchNameValidator"),e.removeDependentProperty("branchCodeValidator"),e.removeDependentProperty("accountNumberValidator"),e.removeDependentProperty("accountHolderNameValidator"),e.removeDependentProperty("bankAccountTypeValidator"),e.deregisterValidator("bankAccountType"),6!=customerInfo.customerClass&&e.removeDependentProperty("accountHolderIdValidator"),t.set("hideDebitOrderControls",!0),t.set("hidePaymentDayControls",!1),1==e.editPaymentDetailsModel.get("customerAccountHolder")?e.set("isAccHolderNameAndIdEnabled",!0):e.set("isAccHolderNameAndIdEnabled",!1),e.customerIsAccountHolder()):void 0==t.get("methodOfPaymentData")||e.isYes(t.get("defaultAccount"))?void 0!=t.get("methodOfPaymentData")&&"3"===t.get("methodOfPaymentData")&&e.isYes(t.get("defaultAccount"))||(t.set("hidePaymentDayControls",!0),e.customerIsAccountHolder()):(e.set("hideDebOrdControls",!1),e.removeDependentProperty("bankNameValidator"),e.removeDependentProperty("branchNameValidator"),e.removeDependentProperty("branchCodeValidator"),e.removeDependentProperty("accountNumberValidator"),e.removeDependentProperty("accountHolderNameValidator"),e.removeDependentProperty("bankAccountTypeValidator"),e.deregisterValidator("bankAccountType"),6!=customerInfo.customerClass&&e.removeDependentProperty("accountHolderIdValidator"),t.set("hideDebitOrderControls",!1)))}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)})},bankNameChanged:function(){var e=this;e.get("bankBranches").clear();var t=e.get("editPaymentDetailsModel");if(e.get("editPaymentDetailsModel.bankName")){e.get("banks")&&$.each(e.get("banks"),function(t,a){a.CanonicalKey===e.get("editPaymentDetailsModel.bankName")&&a.Branches&&a.Branches.Branch&&($.isArray(a.Branches.Branch)?$.each(a.Branches.Branch,function(t,a){e.get("bankBranches").addObject(a)}):e.get("bankBranches").addObject(a.Branches.Branch))});var a=e.getSelectedAccount();if(a.PaymentDetail.BranchCode&&null!=a.PaymentDetail.BranchCode){var o=e.get("bankBranches").filter(function(e){return e.BranchCode.toUpperCase()===a.PaymentDetail.BranchCode.toUpperCase()});o.length&&o.length>0?(t.set("branchName",o[0].CanonicalKey),t.set("branchCode",o[0].BranchCode)):(t.set("branchName",void 0),t.set("branchCode",void 0))}void 0!=e.editPaymentDetailsModel.acccountId&&e.boxOfficeButtons(),e.set("editPaymentDetailsModel",t),e.checkBankIsAHV()}else t.set("branchName",void 0),t.set("branchCode",void 0)}.observes("editPaymentDetailsModel.bankName"),checkBankIsAHV:function(){var e=this,t=e.get("editPaymentDetailsModel.methodOfPaymentData"),a=e.getSelectedAccount();if(e.editPaymentDetailsModel.set("acceptDocumentation",!1),e.isAHVEnable&&!Ember.isEmpty(a)&&e.isBankDetailsChanged)if("1"!=t&&"3"!=t||"9"==a.Type)e.set("isSubmitButtonVisible",!1),e.set("hideDebOrdControls",!1);else{var o=e.get("editPaymentDetailsModel.bankName");Ember.isEmpty(o&&o.trim())||(e.set("isSubmitButtonVisible",e.isAHVCompliantBank(o)),e.editPaymentDetailsModel.set("isSaveButtonDisabled",!0)),e.set("hideDebOrdControls",!0)}else e.set("isSubmitButtonVisible",!1)},showOverrideAHVPanelAndMsg:function(){var e=this;e.isEnableShowOverrideAHVPanel&&!e.isSACustomerIsNotAccountHolder?(e.set("isSubmitButtonVisible",!0),e.editPaymentDetailsModel.set("isSaveButtonDisabled",!0)):(e.editPaymentDetailsModel.set("isSaveButtonDisabled",!1),e.set("isSubmitButtonVisible",!1))},branchNameChanged:function(){var e=this;e.editPaymentDetailsModel.set("branchCode",void 0);var t=e.get("bankBranches").filter(function(t){return t.CanonicalKey===e.get("editPaymentDetailsModel.branchName")}),a=e.get("editPaymentDetailsModel");t.length&&t.length>0?a.set("branchCode",t[0].BranchCode):a&&a.set("branchCode",void 0)}.observes("editPaymentDetailsModel.branchName"),accountNumberChanged:function(){var e=this,t=e.seperateAndGetAccountNumberFromDescription(e.get("editPaymentDetailsModel.selectedAcccountId"));e.isThirdPartyDocsRetrived=!1,t&&(e.set("accountNumberWithDescription",e.get("editPaymentDetailsModel.selectedAcccountId")),e.bindPaymentDetail(t,!0),e.setControllEnableProperty(),e.set("editPaymentDetailsModel.supportingDocuments",Ember.A())),Komodo.Services.featureToggleService.isEnabled("EditPaymentDetails","IsAllowEditPaymentDayForNonDefaultAccount").done(function(t){t&&e.methodOfPaymentChanged()}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)}),e.set("isBankDetailsChanged",!1),e.checkBankIsAHV()}.observes("editPaymentDetailsModel.selectedAcccountId"),hideSaveDetailsButton:function(){var e=this;void 0!=e.editPaymentDetailsModel.acccountId&&e.boxOfficeButtons(),e.isEnableShowOverrideAHVPanel&&(e.editPaymentDetailsModel.set("isSaveButtonDisabled",!0),e.editPaymentDetailsModel.set("isCancelButtonDisabled",!1));var t=e.getSelectedAccount();Ember.isEmpty(t)||"7"==t.PaymentDetail.MethodOfPayment&&e.editPaymentDetailsModel.set("isSaveButtonDisabled",!0)}.observes("editPaymentDetailsModel.methodOfPaymentData","editPaymentDetailsModel.accountHolderName","editPaymentDetailsModel.accountHolderId","editPaymentDetailsModel.accountNumber","editPaymentDetailsModel.debitOrderDay","editPaymentDetailsModel.customerAccountHolder","editPaymentDetailsModel.branchName","editPaymentDetailsModel.bankAccountType","editPaymentDetailsModel.accountHolderPhoneNumber","editPaymentDetailsModel.accountHolderEmailAddress"),customerIsAccountHolderChecked:function(){var e=this;e.customerIsAccountHolder(),e.editPaymentDetailsModel.customerAccountHolder?e.checkBankIsAHV():e.set("isSubmitButtonVisible",!1)}.observes("editPaymentDetailsModel.customerAccountHolder"),collapsibleEditLink:function(){return[{action:"editBankingDetails",title:kl.value(this.localGeneral+"editLink"),disabledBinding:!0}]}.property(),acceptDocumentationChecked:function(){var e=this;e.get("editPaymentDetailsModel").get("acceptDocumentation")?e.set("disableOverrideAHV",!1):e.set("disableOverrideAHV",!0)}.observes("editPaymentDetailsModel.acceptDocumentation"),dataURItoBlob:function(e){for(var t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],o=new ArrayBuffer(t.length),n=new Uint8Array(o),s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return new Blob([o],{type:a})},actions:{CheckIfBankIsAHVCompiant:function(){var e=this,t=e.getErrors(e.get("editPaymentDetailsModel"));if(""!==t)return void Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),t,null,e,"id5446675","warning");e.checkAHVStatus(e.editPaymentDetailsModel)},submitPayementDetail:function(e){this.updatePayementDetail(e)},cancelAction:function(){var e=this;e.cancelEdit(),e.setControllEnableProperty()},removeDocument:function(e){var t=e._parentView._childViews[0].text,a=this.get("editPaymentDetailsModel"),o=-1,n=-1;$(a.supportingDocuments).each(function(e,a){a.documentName===t&&(o=e)}),o>-1&&a.supportingDocuments.removeAt(o),$(a.fileUploader.files).each(function(e,a){a.name===t&&(n=e)}),n>-1&&a.fileUploader.files.removeAt(n),a.supportingDocuments.length<=0&&(a.set("supportDocPagerPageContent",[]),this.set("isDocumentAvailable",!1),0==this.get("isDisableAHVOverride")&&this.set("isDisableAHVOverride",!0)),this.set("isVerifiedBySupervisor",!1),this.set("verifyBySupervisorDone",!0)},viewDocument:function(e){var t=this,a=-1,o="",n=t.get("editPaymentDetailsModel");if(n.fileUploader){var o=e._parentView._childViews[0].text;if($(n.supportingDocuments).each(function(e,t){t.documentName===o&&(a=e)}),a>-1){var s=new FileReader;s.onload=function(e){saveAs(t.dataURItoBlob(e.target.result),o)},s.readAsDataURL(n.fileUploader.files[a].getNative())}}},authenticate:function(){var e=this,t=Komodo.Services.securityService.get("domainUserName"),a=Komodo.Services.queryService.getSelectedCountryId(),o=(e.get("controllers.genericPayment"),e.get("editPaymentDetailsModel"));e.validateUserClaim(a,o.get("supervisorUsername"),o.get("supervisorPassword"),e.supervisorClaim).done(function(a){void 0!==a?(e.set("sessionToken",a),t===o.get("supervisorUsername")?(Komodo.Controls.MessageBoxController.show(kl.value(e.localAhvSupervisorApproval+"supervisorAuthentication"),kl.value(e.localAhvSupervisorApproval+"unauthoriseError"),Komodo.Controls.MessageBoxOkButton,this,"id5446676","warning"),o.set("supervisorUsername",""),o.set("supervisorPassword","")):(e.set("verifyBySupervisorDone",!1),e.set("isVerifiedBySupervisor",!0))):(Komodo.Controls.MessageBoxController.show(kl.value(e.localAhvSupervisorApproval+"supervisorAuthentication"),kl.value(e.localAhvSupervisorApproval+"accessDenied"),Komodo.Controls.MessageBoxOkButton,this,"id5446676","warning"),o.set("supervisorUsername",""),o.set("supervisorPassword",""),e.set("verifyBySupervisorDone",!0),e.set("isVerifiedBySupervisor",!1))}).fail(function(t){Komodo.Controls.MessageBoxController.show(kl.value(e.localAhvSupervisorApproval+"supervisorAuthentication"),kl.value(e.localAhvSupervisorApproval+"invalidUser"),Komodo.Controls.MessageBoxOkButton,this,"id5446676","warning")}),e.editPaymentDetailsModel.set("disableAction",!1)},clear:function(){var e=this,t=e.get("editPaymentDetailsModel");t.set("supervisorUsername",""),t.set("supervisorPassword","")},overrideStatus:function(){var e=this;if(e.isEnableShowOverrideAHVPanel){e.updatePayementDetail(e.editPaymentDetailsModel);var t=e.getErrors(e.get("editPaymentDetailsModel"));if(""!==t)return void Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),t,null,e,"id5446675","warning");if(!e.checkIfThirdPartyDocumentsUploaded())return}e.set("InputDocType",[]);for(var a=0;a<e.editPaymentDetailsModel.get("supportingDocuments").length;a++){var o=e.editPaymentDetailsModel.get("supportingDocuments")[a].documentType;if(null==o||void 0==o)return void Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),kl.value(e.localGeneral+"selectDocType"),Komodo.Controls.MessageBoxOkButtons,e,"id5446675","warning");e.get("InputDocType").indexOf(o)>-1||e.get("InputDocType").push(o)}if(e.set("ExpectedDocType",[]),e.get("isSACustomerForceToAHV")){e.set("ExpectedDocType",["5","20","26"]);var n=e.get("InputDocType").length==e.get("ExpectedDocType").length&&e.get("InputDocType").every(function(t,a){if(e.get("ExpectedDocType").indexOf(t)>-1)return t=e.get("ExpectedDocType")[e.get("ExpectedDocType").indexOf(t)]});if(n)e.editPaymentDetailsModel.get("fileUploader").uploadCanceled=!1,e.editPaymentDetailsModel.get("fileUploader").start();else{for(var s=e.get("ExpectedDocType").filter(function(t){return e.get("InputDocType").indexOf(t)<0}),r="",a=0;a<s.length;a++)r=r+e.getDocumentTypeValue(s[a])+"<br/>";if(""!=r)return void Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),kl.value(e.localGeneral+"specifyDocs")+"<br/>"+r,Komodo.Controls.MessageBoxOkButtons,e,"id5446675","warning");e.editPaymentDetailsModel.get("fileUploader").uploadCanceled=!1,e.editPaymentDetailsModel.get("fileUploader").start()}}else{e.set("ExpectedDocType",["5","20"]);var n=e.get("InputDocType").length==e.get("ExpectedDocType").length&&e.get("InputDocType").every(function(t,a){if(e.get("ExpectedDocType").indexOf(t)>-1)return t=e.get("ExpectedDocType")[e.get("ExpectedDocType").indexOf(t)]});if(n)e.editPaymentDetailsModel.get("fileUploader").uploadCanceled=!1,e.editPaymentDetailsModel.get("fileUploader").start();else{for(var s=e.get("ExpectedDocType").filter(function(t){return e.get("InputDocType").indexOf(t)<0}),r="",a=0;a<s.length;a++)r=r+e.getDocumentTypeValue(s[a])+"<br/>";if(""!=r)return void Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),kl.value(e.localGeneral+"specifyDocs")+"<br/>"+r,Komodo.Controls.MessageBoxOkButtons,e,"id5446675","warning");e.editPaymentDetailsModel.get("fileUploader").uploadCanceled=!1,e.editPaymentDetailsModel.get("fileUploader").start()}}},rejectAHV:function(){var e=this;if(Ember.isBlank(e.editPaymentDetailsModel.get("fileUploader"))||Ember.isBlank(e.editPaymentDetailsModel.get("fileUploader")).files||(e.editPaymentDetailsModel.get("fileUploader").splice(),e.editPaymentDetailsModel.set("supportingDocuments",[])),0===e.editPaymentDetailsModel.get("fileUploader").files.length&&0===e.editPaymentDetailsModel.get("supportingDocuments").length){var t=e.get("accountno"),a=e.get("customerNumber"),o=kl.value(e.localEditPaymeDetail+"documentRejected"),n=e.get("editPaymentDetailsModel.supervisorUsername"),s=kl.value(e.localUploadDocumentInteraction+"interactionMedium"),r=kl.value(e.localUploadDocumentInteraction+"category"),i=kl.value(e.localUploadDocumentInteraction+"subCategory"),l=kl.value(e.localUploadDocumentInteraction+"rejectedOutcome"),c=kl.value(e.localUploadDocumentInteraction+"status"),u=kl.value(e.localEditPaymeDetail+"interactionNoteAfterAHVDocumentVerified",{userId:n,reason:o,customerId:a,financeAccount:t});e.publishCreateActivity(t,a,u,n,s,r,i,l,c),e.set("verifyBySupervisorDone",!0),e.set("isVerifiedBySupervisor",!1),e.editPaymentDetailsModel.set("supervisorUsername",""),e.editPaymentDetailsModel.set("supervisorPassword",""),e.editPaymentDetailsModel.set("acceptDocumentation",!1),e.set("disableOverrideAHV",!0)}},actionRemoveThirdPartyDocument:function(e){for(var t=e.get("content"),a=this.thirdPartyDocUploader.files,o=t.get("documentName"),n=0;n<a.length;n++){var s=a[n];if(o==s.name){this.thirdPartyDocUploader.files.removeObject(s);break}}this.thirdPartyDocuments.removeObject(t)},actionAcceptDocument:function(){this.publishOverrideAHVStatus()},actionRejectDocument:function(){var e=this,t=e.get("accountno"),a=e.get("customerNumber"),o=kl.value(e.localEditPaymeDetail+"documentRejected"),n=e.get("editPaymentDetailsModel.supervisorUsername"),s=kl.value(e.localUploadDocumentInteraction+"interactionMedium"),r=kl.value(e.localUploadDocumentInteraction+"category"),i=kl.value(e.localUploadDocumentInteraction+"subCategory"),l=kl.value(e.localUploadDocumentInteraction+"rejectedOutcome"),c=kl.value(e.localUploadDocumentInteraction+"status"),u=kl.value(e.localEditPaymeDetail+"interactionNoteAfterAHVDocumentVerified",{userId:n,reason:o,customerId:a,financeAccount:t});e.publishCreateActivity(t,a,u,n,s,r,i,l,c),e.set("verifyBySupervisorDone",!0),e.set("isVerifiedBySupervisor",!1)},editBankingDetails:function(){var e=this,t=e.getSelectedAccount();Ember.isEmpty(t)||"7"!==t.PaymentDetail.MethodOfPayment&&(e.set("clickedOnEdit",!0),e.clearBankingDetails(),e.isAllPaymentDetailsFieldsEmpty()&&"2"==e.get("editPaymentDetailsModel").get("methodOfPaymentData")&&e.removeAllDependentProperties(),e.set("isAccHolderNameAndIdEnabled",!1),e.setDefaultControlEnable(),e.registerValidator(e.get("editPaymentDetailsModel"),"accountNumber",{type:"number",isRequired:!0,functions:Komodo.UI.Validators.numericValidator,minLength:5,maxLength:15,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.accountNumber")}))}},getDocumentTypeValue:function(e){for(var t=this,a=t.editPaymentDetailsModel.documentTypes,o=0;o<a.length;o++)if(a[o].key===e)return a[o].value},publishOverrideAHVStatus:function(){var e=this,t=Komodo.Models.OverrideAHVStatus.create(),a=Komodo.canonicalFacadeFactory(t,["Country","FinancialAccountUID","PaymentDetail"]);a.set("Country",e.get("loggedInCountryId")),a.set("FinancialAccountUID",e.get("accountno"));var o=Komodo.Models.PaymentDetail.create(),n=Komodo.canonicalFacadeFactory(o,["MethodOfPayment","BankAccountType","AccountNumber","BankName","BranchName","BranchCode","DebitOrderDay","PayerName","PayerSurname","PayerIDType","PayerIDNumber","PayerPhoneNumber","PayerEmail","AHVStatus","YearsAtBank","IsSalaryMandated"]);n.set("MethodOfPayment",e.editPaymentDetailsModel.get("accountType")),n.set("BankAccountType",e.get("ahvAccountType")),n.set("AccountNumber",e.editPaymentDetailsModel.get("accountNumber")),n.set("BankName",e.editPaymentDetailsModel.get("bankName")),n.set("BranchName",e.editPaymentDetailsModel.get("branchName")),n.set("BranchCode",e.editPaymentDetailsModel.get("branchCode")),n.set("DebitOrderDay",e.editPaymentDetailsModel.get("debitOrderDay"));var s=e.editPaymentDetailsModel.get("accountHolderName").toLowerCase().trim(),r=e.getFirstNameLastName(s);r.length>0&&(e.set("firstName",r[0]),e.set("surname",r[1])),n.set("PayerName",e.get("firstName")),n.set("PayerSurname",e.get("surname")),n.set("PayerIDType",void 0),n.set("PayerIDNumber",e.editPaymentDetailsModel.get("accountHolderId")),n.set("PayerPhoneNumber",e.editPaymentDetailsModel.get("accountHolderPhoneNumber")),n.set("PayerEmail",e.editPaymentDetailsModel.get("accountHolderEmailAddress")),n.set("AHVStatus",void 0),n.set("YearsAtBank",void 0),n.set("IsSalaryMandated",void 0),a.set("PaymentDetail",o),e.startProgress(),Komodo.Services.manageAccountService.publishEvent(e,t,"OverrideAHVStatus","v1").fail(function(t){e.editPaymentDetailsModel.set("busyIndicator",!1)})},getFirstNameLastName:function(e){var t=this,a=e.split(" "),o=" ",n=" ";if(!($.isArray(a)&&a.length>0))return[];if(a=$.grep(a,function(e){return!t.isNullOrEmpty(e)}),a.length<=0)return[];for(var s=0;s<a.length;s++)a[s]=a[s][0].toUpperCase()+(a[s].length>1?a[s].substring(1):"");return o=a[0],a.removeObject(a[0]),a.length>0&&(n=a.join(" ")),[o,n]},isProgressStarted:!1,innerProcessId:void 0,startProgress:function(e){1!=this.isProgressStarted&&(void 0==e&&(e=Komodo.Services.busyIndicatorTypes.Loading),this.getNewProcessID(),this.innerProcessId=this.get("processId"),this.isProgressStarted=!0,Komodo.Services.busyService.start(!0,this.innerProcessId,e,8e4,"blocking",this))},stopProgress:function(){this.isProgressStarted=!1,Komodo.Services.busyService.stop(this.innerProcessId,"blocking")},startTimeout:function(){var e=this;e.editPaymentDetailsModel.set("busyIndicator",!0),e.set("Timeout",setTimeout(function(){e.editPaymentDetailsModel.set("busyIndicator",!1)},3e4))},messageAHVStatusOverriddenReceived:function(e){var t=this;t.stopProgress(),t.editPaymentDetailsModel.set("busyIndicator",!1),t.editPaymentDetailsModel.set("ahvStatus",e.ResponseMessage.Payload.PaymentDetail.AHVStatus),t.set("editPaymentDetailsModel.supportingDocuments",Ember.A());var a,o;Komodo.Controls.MessageBoxController.show(kl.value(t.localGeneral+"moduleTitle"),kl.value(t.localGeneral+"overrideAhvResult"),Komodo.Controls.MessageBoxOkButton,this,"id5446676","success").response=function(n){"ok"==n&&(a=e.ResponseMessage.Payload.FinancialAccountUID,o=t.get("customerNumber"),t.set("clickedOnEdit",!1),t.isEnableShowOverrideAHVPanel&&(t.bindPaymentDetail(a,!1),t.setControllEnableProperty()),t.set("verifyBySupervisorDone",!0),t.set("isVerifiedBySupervisor",!1),t.successInterationAHVOrverride(a,o))}},successInterationAHVOrverride:function(e,t){var a=this,o=(kl.value(a.localEditPaymeDetail+"documentAccepted"),a.get("editPaymentDetailsModel.supervisorUsername")),n=kl.value(a.localEditPaymeDetail+"interactionNoteAfterAHV",{userId:o,customerId:t,financeAccount:e}),s=kl.value(a.localUploadDocumentInteraction+"interactionMedium"),r=kl.value(a.localUploadDocumentInteraction+"category"),i=kl.value(a.localUploadDocumentInteraction+"subCategory"),l=kl.value(a.localUploadDocumentInteraction+"acceptedOutcome"),c=kl.value(a.localUploadDocumentInteraction+"status");a.publishCreateActivity(e,t,n,o,s,r,i,l,c);var u=kl.value(a.localUpdateBankingInteraction+"interactionMedium"),d=kl.value(a.localUpdateBankingInteraction+"category"),h=kl.value(a.localUpdateBankingInteraction+"subCategory"),m=kl.value(a.localUpdateBankingInteraction+"outcome"),p=kl.value(a.localUpdateBankingInteraction+"status"),f=Komodo.Services.securityService.session.domainUserName,g=kl.value(a.localEditPaymeDetail+"interactionNoteAfterBankingDetailsUpdated",{userId:f,customerId:t,financeAccount:e});a.publishCreateActivity(e,t,g,f,u,d,h,m,p)},reloadAccountDetails:function(e){this.get("editPaymentDetailsModel");if(helperFunction=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),isCustomerAvailable=helperFunction.isCustomerIdIsAvailableToRetriveData(),this.setThirdPartyPaymentDocumentDefaults(),!isCustomerAvailable)return void Komodo.Controls.MessageBoxController.show(kl.value(this.localGeneral+"moduleTitle"),kl.value(this.localGeneral+"customerNotFound"));var t=helperFunction.getCustomerIdToRetrieveData();Komodo.Application.ManageAccountSharedObjectController.create().retrieveFinancialAccountsSync(t),this.bindPaymentDetail(e,!0),this.setControllEnableProperty()},messageAHVStatusOverriddenDeliveryFailure:function(e){this.set("editPaymentDetailsModel.supportingDocuments",Ember.A()),Komodo.log(e)},messageAHVStatusOverriddenFault:function(e){this.set("editPaymentDetailsModel.supportingDocuments",Ember.A()),Komodo.log(e)},messageReceived:function(e){Komodo.log(e)},messageDeliveryFailure:function(e){Komodo.log(e)},messageFault:function(e){Komodo.log(e)},createDependentProperties:function(){var e=this;e.createDependentProperty("bankNameValidator",[Komodo.UI.Validators.RequiredValidator]),
e.createDependentProperty("branchNameValidator",[Komodo.UI.Validators.RequiredValidator]),e.createDependentProperty("branchCodeValidator",[Komodo.UI.Validators.RequiredValidator]),e.createDependentProperty("bankAccountTypeValidator",[Komodo.UI.Validators.RequiredValidator]),e.createDependentProperty("accountNumberValidator",[Komodo.UI.Validators.RequiredValidator]),e.registerValidator(e.get("editPaymentDetailsModel"),"accountNumber",{type:"number",isRequired:!0,functions:Komodo.UI.Validators.numericValidator,minLength:5,maxLength:34,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.accountNumber")}),e.registerValidator(e.get("editPaymentDetailsModel"),"bankAccountType",{type:"string",isRequired:!0,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.accountType")}),e.registerValidator(e.get("editPaymentDetailsModel"),"accountHolderPhoneNumber",{type:"number",isRequired:!0,minLength:9,maxLength:14,functions:Komodo.UI.Validators.numericValidator,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.accountHolderPhoneNumber")}),1!=customerInfo.customerClass&&9!=customerInfo.customerClass?e.createDependentProperty("accountHolderNameValidator",[Komodo.UI.Validators.RequiredValidator,Komodo.UI.Validators.MinLengthValidator,Komodo.UI.Validators.MaxLengthValidator,Komodo.UI.Validators.RegExValidator,Komodo.UI.Validators.shouldNotOneStringAndshouldNotStartWithSpace]):e.createDependentProperty("accountHolderNameValidator",[Komodo.UI.Validators.RequiredValidator,Komodo.UI.Validators.MinLengthValidator,Komodo.UI.Validators.MaxLengthValidator]),6!=customerInfo.customerClass&&1!=customerInfo.customerClass&&customerInfo.customerClass,e.createDependentProperty("accountHolderIdValidator",[Komodo.UI.Validators.RequiredValidator,Komodo.UI.Validators.MinLengthValidator,Komodo.UI.Validators.MaxLengthValidator])},removeDependentProperties:function(){var e=this;e.removeDependentProperty("bankNameValidator",[Komodo.UI.Validators.RequiredValidator]),e.removeDependentProperty("branchNameValidator",[Komodo.UI.Validators.RequiredValidator]),e.removeDependentProperty("branchCodeValidator",[Komodo.UI.Validators.RequiredValidator]),e.removeDependentProperty("bankAccountTypeValidator",[Komodo.UI.Validators.RequiredValidator]),e.removeDependentProperty("accountNumberValidator",[Komodo.UI.Validators.RequiredValidator]),e.registerValidator(e.get("editPaymentDetailsModel"),"accountNumber",{type:"number",isRequired:!0,functions:Komodo.UI.Validators.numericValidator,minLength:5,maxLength:34,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.accountNumber")}),e.registerValidator(e.get("editPaymentDetailsModel"),"bankAccountType",{type:"string",isRequired:!0,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.accountType")}),e.registerValidator(e.get("editPaymentDetailsModel"),"accountHolderPhoneNumber",{type:"number",isRequired:!0,minLength:9,maxLength:14,functions:Komodo.UI.Validators.numericValidator,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.accountHolderPhoneNumber")}),1!=customerInfo.customerClass&&9!=customerInfo.customerClass?e.createDependentProperty("accountHolderNameValidator",[Komodo.UI.Validators.RequiredValidator,Komodo.UI.Validators.MinLengthValidator,Komodo.UI.Validators.MaxLengthValidator,Komodo.UI.Validators.RegExValidator,Komodo.UI.Validators.shouldNotOneStringAndshouldNotStartWithSpace]):e.createDependentProperty("accountHolderNameValidator",[Komodo.UI.Validators.RequiredValidator,Komodo.UI.Validators.MinLengthValidator,Komodo.UI.Validators.MaxLengthValidator]),6!=customerInfo.customerClass&&1!=customerInfo.customerClass&&9!=customerInfo.customerClass&&e.createDependentProperty("accountHolderIdValidator",[Komodo.UI.Validators.RequiredValidator,Komodo.UI.Validators.MinLengthValidator,Komodo.UI.Validators.MaxLengthValidator])},removeAllDependentProperties:function(){var e=this;e.removeDependentProperty("bankNameValidator",[Komodo.UI.Validators.RequiredValidator]),e.removeDependentProperty("branchNameValidator",[Komodo.UI.Validators.RequiredValidator]),e.removeDependentProperty("branchCodeValidator",[Komodo.UI.Validators.RequiredValidator]),e.removeDependentProperty("bankAccountTypeValidator",[Komodo.UI.Validators.RequiredValidator]),e.removeDependentProperty("accountNumberValidator",[Komodo.UI.Validators.RequiredValidator]),e.deregisterValidator(e.get("editPaymentDetailsModel"),"accountNumber",{type:"number",isRequired:!0,functions:Komodo.UI.Validators.numericValidator,minLength:5,maxLength:34,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.accountNumber")}),e.deregisterValidator(e.get("editPaymentDetailsModel"),"bankAccountType",{type:"string",isRequired:!0,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.accountType")}),e.deregisterValidator(e.get("editPaymentDetailsModel"),"accountHolderPhoneNumber",{type:"number",isRequired:!0,minLength:9,maxLength:14,functions:Komodo.UI.Validators.numericValidator,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.accountHolderPhoneNumber")}),1!=customerInfo.customerClass&&9!=customerInfo.customerClass?e.removeDependentProperty("accountHolderNameValidator",[Komodo.UI.Validators.RequiredValidator,Komodo.UI.Validators.MinLengthValidator,Komodo.UI.Validators.MaxLengthValidator,Komodo.UI.Validators.RegExValidator,Komodo.UI.Validators.shouldNotOneStringAndshouldNotStartWithSpace]):e.removeDependentProperty("accountHolderNameValidator",[Komodo.UI.Validators.RequiredValidator,Komodo.UI.Validators.MinLengthValidator,Komodo.UI.Validators.MaxLengthValidator]),6!=customerInfo.customerClass&&1!=customerInfo.customerClass&&9!=customerInfo.customerClass&&e.removeDependentProperty("accountHolderIdValidator",[Komodo.UI.Validators.RequiredValidator,Komodo.UI.Validators.MinLengthValidator,Komodo.UI.Validators.MaxLengthValidator])},updatePayementDetail:function(){var e=this,t=!1;if(Komodo.Services.featureToggleService.isEnabled("EditPaymentDetails","IsAllowEditPaymentDayForNonDefaultAccount").done(function(a){if(a)if(e.isYes(e.get("editPaymentDetailsModel").defaultAccount))if("2"==e.get("editPaymentDetailsModel").methodOfPaymentData)t=!1;else{var o=Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account.filter(function(e){return"Payment Plan"===e.AccountTypeDescription});0!=o.length&&(Ember.isEmpty(e.editPaymentDetailsModel.bankName)||Ember.isEmpty(e.editPaymentDetailsModel.bankAccountType)||Ember.isEmpty(e.editPaymentDetailsModel.accountNumber)||Ember.isEmpty(e.editPaymentDetailsModel.branchName)||Ember.isEmpty(e.editPaymentDetailsModel.accountHolderId)||Ember.isEmpty(e.editPaymentDetailsModel.accountHolderName)||Ember.isEmpty(e.editPaymentDetailsModel.accountHolderPhoneNumber))&&(Komodo.Controls.MessageBoxController.show("Warning",kl.value(e.localEditPaymeDetail+"bankingDetailsBlank"),null,this,"id123456","warning"),t=!0)}else t=!1}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)}),!t){var a=e.getErrors(e.get("editPaymentDetailsModel"));if(""!==a)return void Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),a,null,e,"id5446675","warning");if(!e.isEnableShowOverrideAHVPanel){if(!e.checkIfThirdPartyDocumentsUploaded())return;Komodo.Controls.MessageBoxController.show(kl.value(e.localEditPaymeDetail+"confirmChanges"),kl.value(e.localEditPaymeDetail+"confirmChangesMsg"),Komodo.Controls.MessageBoxYesNoButtons,e,"id5446675","warning").response=function(t){"yes"==t&&(e.get("editPaymentDetailsModel").set("isSaveButtonDisabled",!0),e.overridePaymentDetails(e.editPaymentDetailsModel,"ahvActionSave"))}}}},getErrors:function(e){var t="",a="";if(a=kl.value(this.localGeneral+"customValiudationErrorMsg")+"<br />",!e.get("selectedAcccountId"))return t=kl.value(this.localGeneral+"errorMessage11"),a+t;"1"===e.get("methodOfPaymentData")&&(t=this.checkErrors(e));var o=this;return Komodo.Services.featureToggleService.isEnabled("EditPaymentDetails","IsAllowEditPaymentDayForNonDefaultAccount").done(function(a){a&&void 0!=e.get("methodOfPaymentData")&&"2"===e.get("methodOfPaymentData")&&o.isYes(e.get("defaultAccount"))&&(Ember.isEmpty(e.get("bankName"))&&(Ember.isEmpty(e.get("bankAccountType"))||0==e.get("bankAccountType"))&&Ember.isEmpty(e.get("accountNumber"))&&Ember.isEmpty(e.get("branchName"))&&Ember.isEmpty(e.get("accountHolderId"))&&Ember.isEmpty(e.get("accountHolderName"))||"1"===e.get("methodOfPaymentData")&&(t=o.checkErrors(e)))}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)}),e.get("debitOrderDay")&&e.get("debitOrderDay")&&""!==$.trim(e.get("debitOrderDay"))?t:(t=kl.value(this.localGeneral+"errorMessage12"),a+t)},checkErrors:function(e){var t="",a="";if(a=kl.value(this.localGeneral+"customValiudationErrorMsg")+"<br />",this.validators.accountHolderNameValidator.errors&&this.validators.accountHolderNameValidator.errors.length>0)return a+this.validators.accountHolderNameValidator.errors;if(6!=customerInfo.customerClass&&this.validators.accountHolderIdValidator.errors&&this.validators.accountHolderIdValidator.errors.length>0)return a+this.validators.accountHolderIdValidator.errors;if(-1===e.get("accountNumber").trim().indexOf("*")&&this.validators.accountNumberValidator.errors&&this.validators.accountNumberValidator.errors.length>0)return this.validators.accountNumberValidator.errors.length>0?a+this.validators.accountNumberValidator.errors[0]:a+this.validators.accountNumberValidator.errors;if(!e.get("bankAccountType"))return t=kl.value(this.localGeneral+"errorMessage8"),a+t;if(!e.get("accountNumber")||""===$.trim(e.get("accountNumber")))return t=kl.value(this.localGeneral+"errorMessage1"),a+t;if(!e.get("bankName")||""===$.trim(e.get("bankName")))return t=kl.value(this.localGeneral+"errorMessage2"),a+t;if(!e.get("branchName")||""===$.trim(e.get("branchName")))return t=kl.value(this.localGeneral+"errorMessage3"),a+t;if(!e.get("accountHolderName")||""===$.trim(e.get("accountHolderName")))return t=kl.value(this.localGeneral+"errorMessage4"),a+t;if(!e.get("customerAccountHolder")){if(!(e.get("accountHolderPhoneNumber")&&""!==$.trim(e.get("accountHolderPhoneNumber"))))return t=kl.value(this.localGeneral+"errorMessage14"),a+t;if(this.validators.accountHolderPhoneNumberValidator.errors.length>0)return t=this.validators.accountHolderPhoneNumberValidator.errors[0],a+t;if(!(e.get("accountHolderEmailAddress")&&""!==$.trim(e.get("accountHolderEmailAddress"))))return t=kl.value(this.localGeneral+"errorMessage15"),a+t;if(this.validators.accountHolderEmailAddressValidator.errors.length>0)return t=this.validators.accountHolderEmailAddressValidator.errors[0],a+t}if(6!=customerInfo.customerClass){if(!(e.get("accountHolderId")&&""!==$.trim(e.get("accountHolderId"))))return t=kl.value(this.localGeneral+"errorMessage6"),a+t}return t},updateFinanceAccount:function(){this.getNewProcessID(),this.showBlockingBusyIndicator();var e=Komodo.Models.UpdateFinancialAccount.create(),t=this.setAccountDataToUpdate(),a=Komodo.canonicalFacadeFactory(e,["Country","Account"]);a.set("Country",this.loggedInCountryId),a.set("Account",t),this.publishRequestOnBus(e,"UpdateFinancialAccount","v2")},getNewProcessID:function(){this.startNewProcess()},showBlockingBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,18e5,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},setAccountDataToUpdate:function(){var e=Komodo.Models.Account.create(),t=Komodo.canonicalFacadeFactory(e,["UID","Type","PaymentDetail"]);t.set("UID",this.get("accountno"));var a=this.get("editPaymentDetailsModel"),o=Komodo.Models.PaymentDetail.create();if(t.set("Type",a.get("accountType")),"2"==a.get("methodOfPaymentData")?o.set("MethodOfPayment",this.get("cashMOP").key):o.set("MethodOfPayment",a.get("bankAccountType")),a.get("accountNumber")?o.set("AccountNumber",a.get("accountNumber").trim()):o.set("AccountNumber",""),"2"==a.get("methodOfPaymentData")){if(a.set("supportDocPagerPageContent",[]),a.set("supportingDocuments",[]),this.thirdPartyDocuments.length>0)for(var n=this.thirdPartyDocUploader.files,s=0;s<n.length;s++){var r=n[s];r.name,this.thirdPartyDocUploader.files.removeObject(r),this.thirdPartyDocuments.removeObject(docItem)}this.thirdPartyDocuments.clear()}if(a.get("bankName")){var i=this.get("banks").filter(function(e){return e.CanonicalKey.toUpperCase()===a.get("bankName").toUpperCase()});i&&i.length>0&&o.set("BankName",i[0].CanonicalKey)}else o.set("BankName","");o.set("BranchCode",void 0==a.get("branchCode")?"":a.get("branchCode")),o.set("BranchName",void 0==a.get("branchCode")?"":a.get("branchCode")),o.set("PayerName",a.get("accountHolderName")),o.set("PayerIDNumber",a.get("accountHolderId")),o.set("BankAccountType",void 0==a.get("bankAccountType")?"":a.get("bankAccountType"));for(var l=a.get("bankAccountTypes"),s=0;s<l.length;s++)l[s].key===a.get("bankAccountType")&&o.set("BankAccountType",l[s].value);a.get("debitOrderDay")&&""!==a.get("debitOrderDay")&&o.set("DebitOrderDay",a.get("debitOrderDay")),t.set("PaymentDetail",o);for(var c=this.getSelectedAccount(),u=0;u<c.ListOfAgreement.Agreement.length;u++)for(var d=0;d<c.ListOfAgreement.Agreement[u].ListOfHardware.Hardware.length;d++)for(var h=0;h<c.ListOfAgreement.Agreement[u].ListOfHardware.Hardware[d].ListOfService.Service.length;h++){var m=Komodo.Models.Service.create(),p=c.ListOfAgreement.Agreement[u].ListOfHardware.Hardware[d].ListOfService.Service[h];m.set("UID",p.UID),m.set("Status",p.Status);var f=Komodo.Models.ProductDetail.create();f.set("UID",p.ProductDetail.UID),f.set("Type",p.ProductDetail.Type),f.set("Name",p.ProductDetail.Name),f.set("Model",p.ProductDetail.Model),f.set("Manufacturer",p.ProductDetail.Manufacturer),f.set("Description",p.ProductDetail.Description),f.set("Price",p.ProductDetail.Price),f.set("ProductFeatures",p.ProductDetail.ProductFeatures),m.set("ProductDetail",f),c.ListOfAgreement.Agreement[u].ListOfHardware.Hardware[d].ListOfService.Service[h]=m}return e},getSelectedAccount:function(){var e=this.get("accountno"),t=Komodo.Application.ManageAccountUtility.isAnyAccountExist();if(!Ember.isEmpty(t)&&!Ember.isEmpty(e)&&t.length>0){return helperFunction.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account).filter(function(t){var a=null;return Ember.isEmpty(t)||(a=t.UID===e),a})[0]}return null},cancelEdit:function(){var e=this.get("accountno");this.set("isEnableShowOverrideAHVPanel",!1),this.set("clickedOnEdit",!1);var t=Komodo.Application.ManageAccountUtility.isAnyAccountExist();if(t&&t.length>0){var a=helperFunction.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account),o=a.filter(function(t){return t.UID===e});if(o.length&&o.length>0){var n=this.get("editPaymentDetailsModel"),s=!1;if(void 0!=n.get("bankAccountTypes")){for(var r=n.get("bankAccountTypes"),i=0;i<r.length;i++)r[i].value.toUpperCase()===o[0].PaymentDetail.BankAccountType.toUpperCase()&&(n.set("bankAccountType",r[i].key),s=!0);0==s&&n.set("bankAccountType",0)}n.set("accountHolderPhoneNumber",this.removeSpacesAndPlusFromPhoneNumber(o[0].PaymentDetails.PayerPhoneNumber)),n.set("accountHolderEmailAddress",o[0].PaymentDetails.PayerEmail),n.set("accountHolderName",o[0].PaymentDetail.PayerName),n.set("accountHolderId",o[0].PaymentDetail.PayerIDNumber),n.set("acccountId",e);var l=Komodo.UI.MaskInputs.maskValues("*",Komodo.MaskType.typeAccount,o[0].PaymentDetail.AccountNumber,Komodo.MaskCharacter.accountNumber);if(this.set("existingAccountNumber",o[0].PaymentDetail.AccountNumber),n.set("accountNumber",void 0!==l?l:o[0].PaymentDetail.AccountNumber),(Ember.isBlank(n.accountNumber)||-1===n.accountNumber.trim().indexOf("*"))&&this.registerValidator(n,"accountNumber",{type:"number",isRequired:!0,functions:Komodo.UI.Validators.numericValidator,minLength:5,maxLength:34,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.accountNumber")}),o[0].PaymentDetail.BankName){var c=this.get("banks").filter(function(e){return e.CanonicalKey.toUpperCase()===o[0].PaymentDetail.BankName.toUpperCase()});c&&c.length>0&&n.set("bankName",c[0].CanonicalKey)}if(o[0].PaymentDetail.BranchCode){var u=this.get("bankBranches").filter(function(e){return e.BranchCode.toUpperCase()===o[0].PaymentDetail.BranchCode.toUpperCase()});u.length&&u.length>0?(n.set("branchName",u[0].CanonicalKey),n.set("branchCode",u[0].BranchCode)):(n.set("branchName",""),n.set("branchCode",""))}if(o[0].PaymentDetail.MethodOfPayment){this.get("cashMOP")&&"Cash"!=n.get("methodOfPayments")[0].value&&n.get("methodOfPayments").insertAt(0,this.get("cashMOP"));var d=n.get("methodOfPayments").filter(function(e){return e.key.toUpperCase()===o[0].PaymentDetail.MethodOfPayment.toUpperCase()});d.length&&d.length>0&&"1"!=d[0].key&&("Cash"!=d[0].value&&"Cash"!=n.get("methodOfPayments")[0].value||n.get("methodOfPayments").removeObject(n.get("methodOfPayments")[0]),n.set("methodOfPayment",d[0].key)),"1"===o[0].PaymentDetail.MethodOfPayment?(n.set("methodOfPaymentData","2"),this.removeAllDependentProperties()):"7"===o[0].PaymentDetail.MethodOfPayment?n.set("methodOfPaymentData","3"):n.set("methodOfPaymentData","1")}if(o[0].PaymentDetail.DebitOrderDay){var h=this.get("debitOrderDays").filter(function(e){return e.key.toUpperCase()===o[0].PaymentDetail.DebitOrderDay.toUpperCase()});h.length&&h.length>0&&("6"==customerInfo.customerClass?n.set("debitOrderDay","29"):n.set("debitOrderDay",h[0].key))}o[0].PaymentDetail.PayerIDNumber==("1"==customerInfo.customerClass||"4"==customerInfo.customerClass||"6"==customerInfo.customerClass||"9"==customerInfo.customerClass?this.get("companyRegistrationNumber"):this.get("customerID"))?(n.set("customerAccountHolder",!0),this.set("isAccHolderNameAndIdEnabled",!0)):"7"===o[0].PaymentDetail.MethodOfPayment?this.set("isAccHolderNameAndIdEnabled",!0):n.set("customerAccountHolder",!1),this.set("editPaymentDetailsModel",n)}void 0!=this.editPaymentDetailsModel.acccountId&&this.boxOfficeButtons(),this.set("editPaymentDetailsModel.supportingDocuments",Ember.A()),"Compliant"===o[0].PaymentDetail.AHVStatus?(this.set("isVisibleAHVStatus",!0),this.set("isBankAHVNonCompliant",!1),this.set("isBankAHVCompliant",!0)):(this.set("isVisibleAHVStatus",!0),this.set("isBankAHVNonCompliant",!0),this.set("isBankAHVCompliant",!1))}this.checkPermissionsToUploadThirdPartyDocs(),this.set("isSACustomerIsNotAccountHolder",!1),this.set("isSACustomerForceToAHV",!1),this.editPaymentDetailsModel.set("isCancelButtonDisabled",!0),this.editPaymentDetailsModel.set("isSaveButtonDisabled",!0),this.removeDependentProperty("accountNumberValidator",[Komodo.UI.Validators.RequiredValidator,Komodo.UI.Validators.numericValidator]),this.checkBankingDetails()},messageFinancialAccountUpdatedReceived:function(e){var t=this,a=t.get("editPaymentDetailsModel");t.hideBusyIndicator();var o=e.ResponseMessage.Payload.Account.UID;Komodo.Controls.MessageBoxController.show(kl.value(t.localGeneral+"successful"),kl.value(t.localGeneral+"successfulMsg"),Komodo.Controls.MessageBoxOkButton,t,"id5446676","success").response=function(e){if("ok"==e){if(!isCustomerAvailable)return void Komodo.Controls.MessageBoxController.show(kl.value(t.localGeneral+"moduleTitle"),kl.value(t.localGeneral+"customerNotFound"));t.set("clickedOnEdit",!1),t.editPaymentDetailsModel.set("isCancelButtonDisabled",!0);var n=helperFunction.getCustomerIdToRetrieveData();Komodo.Application.ManageAccountSharedObjectController.create().retrieveFinancialAccountsSync(n);var s=Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account.findBy("UID",o);void 0!=s&&"7"==s.PaymentDetail.MethodOfPayment&&(a.set("methodOfPaymentData","3"),t.bindPaymentDetail(o,!0)),t.setControllEnableProperty();var r=t.get("accountno"),i=t.get("customerNumber"),l=Komodo.Services.securityService.session.domainUserName,c=kl.value(t.localUpdateBankingInteraction+"interactionMedium"),u=kl.value(t.localUpdateBankingInteraction+"category"),d=kl.value(t.localUpdateBankingInteraction+"subCategory"),h=kl.value(t.localUpdateBankingInteraction+"outcome"),m=kl.value(t.localUpdateBankingInteraction+"status"),p=Komodo.Services.securityService.session.domainUserName,f=kl.value(t.localEditPaymeDetail+"interactionNoteAfterBankingDetailsUpdated",{userId:l,customerId:i,financeAccount:r});t.publishCreateActivity(r,n,f,p,c,u,d,h,m)}}},publishCreateActivity:function(e,t,a,o){var n=this,s=Komodo.Models.CreateInteraction.create(),r=Komodo.Models.Case.create();void 0==a&&(a=kl.value(n.localEditPaymeDetail+"successMessage")+e),r.set("InteracteeName",o),r.set("InteractionLocation",Komodo.Services.uiService.getController("application").get("_selectedCountryDescription")),r.set("InteractionMedium","1"),r.set("CustomerUID",t),r.set("Notes",a),r.set("Category",3),r.set("SubCategory",13),r.set("Outcome",52),r.set("Status","1");var i=Komodo.canonicalFacadeFactory(s,["Country","Case"]);i.set("Country",n.get("loggedInCountryId")),i.set("Case",r),n.publishRequestOnBus(s,"CreateInteraction","v1")},publishCreateActivity:function(e,t,a,o,n,s,r,i,l){var c=this,u=Komodo.Models.CreateInteraction.create(),d=Komodo.Models.Case.create();void 0==a&&(a=kl.value(c.localEditPaymeDetail+"successMessage")+e),d.set("InteracteeName",o),d.set("InteractionLocation",Komodo.Services.uiService.getController("application").get("_selectedCountryDescription")),d.set("InteractionMedium",n),d.set("CustomerUID",t),d.set("Notes",a),d.set("Category",s),d.set("SubCategory",r),d.set("Outcome",i),d.set("Status",l);var h=Komodo.canonicalFacadeFactory(u,["Country","Case"]);h.set("Country",c.get("loggedInCountryId")),h.set("Case",d),c.publishRequestOnBus(u,"CreateInteraction","v1")},publishRequestOnBus:function(e,t,a){var o=Komodo.Services.manageAccountService,n="Event Message for "+t+" ";o.publishEvent(this,e,t,a).done(function(){Komodo.log(n+" has been published successfully")}).fail(function(e,t){Komodo.log(n+" has been failed")})},messageFailureMessageEventReceived:function(e){var t=this;this.hideBusyIndicator();var a=e.ResponseMessage.Payload.OriginatedEventName,o=e.ResponseMessage.Payload.ListOfErrorDetails,n=this.isNullOrEmpty(o.ErrorType)?kl.value(this.localGeneral+"moduleTitle"):o.ErrorType;"SaveCustomerDocumentEvent"==a||"OverrideAHVStatus"==a?(this.set("editPaymentDetailsModel.supportingDocuments",Ember.A()),Komodo.Controls.MessageBoxController.show(n,o.ErrorDescription,Komodo.Controls.MessageBoxOkButton,t,"id5446674","danger")):Komodo.Controls.MessageBoxController.show(n,o.ErrorDescription,Komodo.Controls.MessageBoxOkButton,t,"id5446674","danger")},clearBankingDetails:function(){var e=this,t=e.get("editPaymentDetailsModel");t.set("customerAccountHolder",!1),t.set("accountHolderName",""),t.set("bankName",""),t.set("accountNumber",""),t.set("branchCode",""),t.set("bankAccountType",""),t.set("branchName",""),t.set("accountHolderId",""),t.set("accountHolderPhoneNumber",""),t.set("accountHolderEmailAddress",""),t.set("supportDocPagerPageContent",[]),t.set("supportingDocuments",[]),e.thirdPartyDocuments.clear()},setControllEnableProperty:function(){var e=this;e.isAllPaymentDetailsFieldsEmpty()?(e.setDefaultControlEnable(),e.set("isAccHolderNameAndIdEnabled",!1)):(e.setDefaultControl(),e.set("isAccHolderNameAndIdEnabled",!0),e.checkBankingDetails())},customerIsAccountHolder:function(){var e=this;if(1==e.editPaymentDetailsModel.customerAccountHolder){e.get("editPaymentDetailsModel").set("accountHolderName",(e.get("customerName")+"").trim());var t=e.get("companyRegistrationNumber");void 0!==t&&null!==t||(t=e.get("customerID")),e.get("editPaymentDetailsModel").set("accountHolderId",t),e.get("editPaymentDetailsModel").set("accountHolderPhoneNumber",(e.get("customerPhoneNumber")+"").trim()),e.get("editPaymentDetailsModel").set("accountHolderEmailAddress",!0==!Ember.isBlank(e.get("customerEmail"))?e.get("customerEmail").replace("-","").trim():""),e.set("isAccHolderNameAndIdEnabled",!0),e.removeDependentProperty("accountHolderEmailAddressValidator",[Komodo.UI.Validators.RequiredValidator])}else{var a=e.getSelectedAccount();e.registerValidator(e.get("editPaymentDetailsModel"),"accountHolderEmailAddress",{type:"string",isRequired:!0,minLength:6,maxLength:254,regExPattern:"^\\w+([-+.']\\w+)*@\\w+([-.]\\w+)*\\.[a-zA-Z]{2,}$",displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.accountHolderEmailAddress")}),e.get("clickedOnEdit")?Ember.isEmpty(a)||(Ember.isEmpty(e.get("editPaymentDetailsModel").get("accountHolderName"))||Ember.isEmpty(e.get("editPaymentDetailsModel").get("accountHolderId"))?(e.get("editPaymentDetailsModel").set("accountHolderName",""),e.get("editPaymentDetailsModel").set("accountHolderId",""),e.get("editPaymentDetailsModel").set("accountHolderPhoneNumber",""),e.get("editPaymentDetailsModel").set("accountHolderEmailAddress","")):(e.get("editPaymentDetailsModel").get("accountHolderName").toUpperCase()===a.PaymentDetail.PayerName.toUpperCase()&&(e.get("editPaymentDetailsModel").get("accountHolderId").toUpperCase(),a.PaymentDetail.PayerIDNumber.toUpperCase()),e.get("editPaymentDetailsModel").set("accountHolderName",""),e.get("editPaymentDetailsModel").set("accountHolderId",""),e.get("editPaymentDetailsModel").set("accountHolderPhoneNumber",""),e.get("editPaymentDetailsModel").set("accountHolderEmailAddress",""))):Ember.isEmpty(a)?(e.get("editPaymentDetailsModel").set("accountHolderName",e.get("editPaymentDetailsModel").get("accountHolderName")),e.get("editPaymentDetailsModel").set("accountHolderId",e.get("editPaymentDetailsModel").get("accountHolderId")),e.get("editPaymentDetailsModel").set("accountHolderPhoneNumber",e.get("editPaymentDetailsModel").get("accountHolderPhoneNumber")),e.get("editPaymentDetailsModel").set("accountHolderEmailAddress",e.get("editPaymentDetailsModel").get("accountHolderEmailAddress"))):(e.get("editPaymentDetailsModel").set("accountHolderName",a.PaymentDetail.PayerName),e.get("editPaymentDetailsModel").set("accountHolderId",a.PaymentDetail.PayerIDNumber),e.get("editPaymentDetailsModel").set("accountHolderPhoneNumber",e.removeSpacesAndPlusFromPhoneNumber(a.PaymentDetails.PayerPhoneNumber)),e.get("editPaymentDetailsModel").set("accountHolderEmailAddress",a.PaymentDetails.PayerEmail)),e.set("isAccHolderNameAndIdEnabled",!1)}},getQueryService:function(){return this.get("_queryService")},bindPaymentDetail:function(e,t){var a=this,o=e||a.getSelectedBankAccountId(),n=a.get("accountNumberWithDescription"),s=a.get("editPaymentDetailsModel");if(s.get("methodOfPayments")&&s.get("methodOfPayments").length>0&&a.get("debitOrderDays")&&a.get("debitOrderDays").length>0&&a.get("banks")&&a.get("banks").length>0&&a.get("accountTypes").length>0){a.set("accountno",o);var r=Komodo.Application.ManageAccountUtility.isAnyAccountExist();if(r&&r.length>0){var i=helperFunction.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account),l=a,c=i.filter(function(e){var t=l.get("accountno");return e.UID===t});if(c.length&&c.length>0){var u=l.get("accountTypes").filter(function(e){return e.CanonicalKey.toUpperCase()===c[0].Type.toUpperCase()});u&&0!==u.length?(null!=u[0].AccountTypeDescription&&void 0!=u[0].AccountTypeDescription&&""!=u[0].AccountTypeDescription?s.set("accountDescription",u[0].AccountTypeDescription):s.set("accountDescription","-"),s.set("accountType",u[0].CanonicalKey)):s.set("accountDescription","-");var d=kl.value(a.localGeneral+"yes"),h=kl.value(a.localGeneral+"no");s.set("defaultAccount",1==c[0].IsDefault?d:h),s.set("acccountId",o),t||s.set("selectedAcccountId",n);var m=Komodo.UI.MaskInputs.maskValues("*",Komodo.MaskType.typeAccount,c[0].PaymentDetail.AccountNumber,Komodo.MaskCharacter.accountNumber);a.set("existingAccountNumber",c[0].PaymentDetail.AccountNumber),s.set("accountNumber",void 0!==m?m:c[0].PaymentDetail.AccountNumber),(Ember.isBlank(s.accountNumber)||-1===s.accountNumber.trim().indexOf("*"))&&a.registerValidator(s,"accountNumber",{type:"number",isRequired:!0,functions:Komodo.UI.Validators.numericValidator,minLength:5,maxLength:34,displayName:kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.accountNumber")}),a.get("cashMOP")&&"Cash"!=s.get("methodOfPayments")[0].value&&s.get("methodOfPayments").insertAt(0,a.get("cashMOP")),c[0].PaymentDetail.PayerIDNumber==("1"==customerInfo.customerClass||"4"==customerInfo.customerClass||"6"==customerInfo.customerClass||"9"==customerInfo.customerClass?this.get("companyRegistrationNumber"):this.get("customerID"))?(s.customerAccountHolder=!0,a.set("isAccHolderNameAndIdEnabled",!0),s.set("accountHolderPhoneNumber",(a.get("customerPhoneNumber")+"").trim()),s.set("accountHolderEmailAddress",!0==!Ember.isBlank(a.get("customerEmail"))?a.get("customerEmail").replace("-","").trim():""),s.set("accountHolderName",(a.get("customerName")+"").trim()),"1"==customerInfo.customerClass||"4"==customerInfo.customerClass||"6"==customerInfo.customerClass||"9"==customerInfo.customerClass?s.set("accountHolderId",(a.get("companyRegistrationNumber")+"").trim()):s.set("accountHolderId",(a.get("customerID")+"").trim())):(s.customerAccountHolder=!1,a.set("isAccHolderNameAndIdEnabled",!1),s.set("accountHolderName",c[0].PaymentDetail.PayerName),s.set("accountHolderId",c[0].PaymentDetail.PayerIDNumber),s.set("accountHolderPhoneNumber",a.removeSpacesAndPlusFromPhoneNumber(c[0].PaymentDetails.PayerPhoneNumber)),s.set("accountHolderEmailAddress",c[0].PaymentDetails.PayerEmail)),a.set("payerAccountHolderName",s.get("accountHolderName")),a.set("payerAccountHolderId",s.get("accountHolderId")),"1"===c[0].PaymentDetail.MethodOfPayment?(s.set("methodOfPaymentData","2"),a.setDefaultControl()):"7"===c[0].PaymentDetail.MethodOfPayment?(s.set("methodOfPaymentData","3"),1!=c[0].IsDefault&&"Payment Plan"!=s.get("accountDescription")||a.editPaymentDetailsModel.set("ahvPending",!0)):"6"===c[0].PaymentDetail.MethodOfPayment?(s.set("methodOfPaymentData","4"),s.set("hideDebitOrderControls",!1),a.setDefaultControl(),a.set("isDisbaleMethodOfPayment",!0)):(s.set("methodOfPaymentData","1"),s.set("hideDebitOrderControls",!0),a.setDefaultControl());var p=!1;if(void 0!=s.get("bankAccountTypes")){for(var f=s.get("bankAccountTypes"),g=0;g<f.length;g++)f[g].value.toUpperCase()===c[0].PaymentDetail.BankAccountType.toUpperCase()&&(s.set("bankAccountType",f[g].key),p=!0);0==p&&s.set("bankAccountType",0)}Komodo.Services.featureToggleService.isEnabled("EditPaymentDetails","RemovePaymentDay1").done(function(e){var t=a.get("debitOrderDays").filter(function(e){return e.key.toUpperCase()===c[0].PaymentDetail.DebitOrderDay.toUpperCase()});t.length&&t.length>0&&s.set("debitOrderDay",t[0].key),c[0].PaymentDetail.BankName?(s.set("bankName",c[0].PaymentDetail.BankName),a.bankNameChanged()):(s.set("bankName",""),s.set("branchName","")),a.setSmartCardsOfAnAccount();var o=l.get("accountTypes").filter(function(e){return e.CanonicalKey.toUpperCase()===c[0].Type.toUpperCase()});if(0==c[0].IsDefault){var n=kl.value(a.localGeneral+"no");s.set("defaultAccount",n),Komodo.Services.securityService.hasPermission("clarity://system/supervisor")?"Holiday Home"==o||"13"==c[0].Type?(a.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!1),a.set("isDisbaleMethodOfPayment",!0)):"9"==c[0].Type?(a.setReadOnlyControlForBoxOffice(),a.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!0)):("2"==customerInfo.customerClass||"3"==customerInfo.customerClass)&&o.length>0&&"DStv Residential"==o[0].AccountTypeDescription&&(a.set("isDisbaleMethodOfPayment",!1),
a.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!1)):Komodo.Services.securityService.hasPermission("clarity://updateAccountdetails/canUpdateAccountdetails")?a.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!1):a.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!0)}else if(1==c[0].IsDefault){var r=kl.value(a.localGeneral+"yes");s.set("defaultAccount",r),a.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!1)}a.set("editPaymentDetailsModel",s)}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)}),a.isAllowPaymentDayEditable(c)}a.editPaymentDetailsModel.set("isSaveButtonDisabled",!0),2!=customerInfo.customerClass&&3!=customerInfo.customerClass||a.enableBankDetails()}}},setReadOnlyControlForBoxOffice:function(){this.set("isDisbaleMethodOfPayment",!0),this.set("isDisbaleBankName",!0),this.set("isDisbaleAccountType",!0),this.set("isDisbaleAccountNumber",!0),this.set("isDisbaleBranchName",!0),this.set("isAccHolderNameAndIdEnabled",!0),this.set("isDisbaleIsCustomerAccountHolder",!0),this.set("isEnableShowOverrideAHVPanel",!1)},setReadOnlyControlInAHVPending:function(){this.set("isDisbaleMethodOfPayment",!0),this.set("isDisbaleBankName",!0),this.set("isDisbaleAccountType",!0),this.set("isDisbaleAccountNumber",!0),this.set("isDisbaleBranchName",!0),this.set("isAccHolderNameAndIdEnabled",!0),this.set("isDisbaleIsCustomerAccountHolder",!0)},setDefaultControl:function(){this.set("isDisbaleBankName",!0),this.set("isDisbaleAccountType",!0),this.set("isDisbaleAccountNumber",!0),this.set("isDisbaleBranchName",!0),this.set("isDisbaleIsCustomerAccountHolder",!0),this.set("verifyBySupervisorDone",!0),this.set("isVerifiedBySupervisor",!1)},setDefaultControlEnable:function(){this.set("isDisbaleBankName",!1),this.set("isDisbaleAccountType",!1),this.set("isDisbaleAccountNumber",!1),this.set("isDisbaleBranchName",!1),this.set("isDisbaleIsCustomerAccountHolder",!1)},setSmartCardsOfAnAccount:function(){var e=this.getSelectedAccount();if(this.set("smartcards",Komodo.Application.ManageAccountUtility.getSmartCardsOrDeviceOfAnAccount(e)),0===this.get("smartcards").length){var t=this.get("smartcards");t.addObject("-"),this.set("smartcards",t)}},getSelectedBankAccountId:function(){return this.get("accountno")?this.get("accountno"):this.get("allAccounts")&&this.get("allAccounts").length>0?(this.set("accountno",this.seperateAndGetAccountNumberFromDescription(this.get("allAccounts")[0])),this.set("accountNumberWithDescription",this.get("allAccounts")[0]),this.get("accountno")):this.set("accountno",0)},seperateAndGetAccountNumberFromDescription:function(e){if(null!=e&&void 0!=e&&""!=e){var t=e.split(" - ");null!=t&&void 0!=t&&t.length>0?(this.set("accountno",t[0]),this.set("accountNumberWithDescription",e)):(this.set("accountno",t),this.set("accountNumberWithDescription",t))}else this.get("accountno")||this.set("accountno",0),this.set("accountNumberWithDescription","");return this.get("accountno")},createDependentProperty:function(e,t){var a=this;t.forEach(function(t){void 0!==a.get("validators."+e)&&(a.get("validators."+e).functions.addObject(t),a.get("validators."+e).validate())})},removeDependentProperty:function(e){var t=this;void 0!==t.get("validators."+e)&&(t.get("validators."+e).functions.clear(),t.get("validators."+e).validate())},setReadOnlyControlEmployeePayroll:function(){this.set("isDisbaleMethodOfPayment",!0),this.set("isDisbaleBankName",!0),this.set("isDisbaleAccountType",!0),this.set("isDisbaleAccountNumber",!0),this.set("isDisbaleBranchName",!0),this.set("isAccHolderNameAndIdEnabled",!0),this.set("isDisbaleIsCustomerAccountHolder",!0)},setEnableControlEmployeePayroll:function(){this.set("isDisbaleMethodOfPayment",!1),this.set("isDisbaleBankName",!1),this.set("isDisbaleAccountType",!1),this.set("isDisbaleAccountNumber",!1),this.set("isDisbaleBranchName",!1),this.set("isAccHolderNameAndIdEnabled",!1),this.set("isDisbaleIsCustomerAccountHolder",!1)},setRunTimeMOP:function(e){if(e.length>0){var t=this,a=t.get("editPaymentDetailsModel"),o=a.radioButtonMethodofPayment.find(function(e){return"AHV Pending"===e.title}),n=a.radioButtonMethodofPayment.find(function(e){return"Payroll"===e.title});void 0!=n&&void 0!=o&&(a.radioButtonMethodofPayment.removeAt(2),a.radioButtonMethodofPayment.removeAt(2)),"7"===e[0].PaymentDetail.MethodOfPayment?(3==a.radioButtonMethodofPayment.length&&void 0!=n&&a.radioButtonMethodofPayment.removeAt(2),void 0==o&&a.radioButtonMethodofPayment.pushObject(Ember.Object.create({title:"AHV Pending",value:"3"}))):"6"===e[0].PaymentDetail.MethodOfPayment?(3==a.radioButtonMethodofPayment.length&&void 0!=o&&a.radioButtonMethodofPayment.removeAt(2),void 0==n&&a.radioButtonMethodofPayment.pushObject(Ember.Object.create({title:"Payroll",value:"4"}))):(e[0].PaymentDetail.MethodOfPayment,3==a.radioButtonMethodofPayment.length&&void 0!=n?a.radioButtonMethodofPayment.removeAt(2):3==a.radioButtonMethodofPayment.length&&void 0!=o&&a.radioButtonMethodofPayment.removeAt(2))}},setEmployeePayRoll:function(e){var t=this,a=t.get("editPaymentDetailsModel"),o=(t.get("debitOrderDays").filter(function(t){return t.key.toUpperCase()===e[0].PaymentDetail.DebitOrderDay.toUpperCase()}),KomodoEmployeePaymentConfiguration.CustomerClass);Komodo.Services.featureToggleService.isEnabled("EditPaymentDetails","IsAllowEmployeePayroll").done(function(e){if(e)for(var n=0;n<o.length;n++)if(customerInfo.customerClass==o[n].CanonicalKey||customerInfo.customerClassText==o[n].CanonicalValue)for(var s=0;s<o[n].CustomerTypeConfiguration.CustomerType.length;s++)if(customerInfo.typeId==o[n].CustomerTypeConfiguration.CustomerType[s].CanonicalKey||customerInfo.type==o[n].CustomerTypeConfiguration.CustomerType[s].CanonicalValue)for(var r=0;r<o[n].CustomerTypeConfiguration.CustomerType[s].EmployeeType.length;r++)customerInfo.locationIndicatorText!=o[n].CustomerTypeConfiguration.CustomerType[s].EmployeeType[r].CanonicalValue&&customerInfo.locationIndicator!=o[n].CustomerTypeConfiguration.CustomerType[s].EmployeeType[r].CanonicalKey||(a.set("debitOrderDay",o[n].CustomerTypeConfiguration.CustomerType[s].SetToPaymentDay),a.set("isDisbaleInvoiceDay",o[n].CustomerTypeConfiguration.CustomerType[s].SetPaymentDayReadOnly),t.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!0),t.setReadOnlyControlEmployeePayroll(),t.editPaymentDetailsModel.set("isSaveButtonDisabled",!0),a.set("isSaveButtonDisabled",!0))}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)})},isAllowPaymentDayEditable:function(e){var t=this,a=t.get("editPaymentDetailsModel"),o=kl.value(t.localGeneral+"no"),n=kl.value(t.localGeneral+"yes");Komodo.Services.featureToggleService.isEnabled("EditPaymentDetails","IsAllowEditPaymentDayForNonDefaultAccount").done(function(s){var r=t.get("accountTypes").filter(function(t){return t.CanonicalKey.toUpperCase()===e[0].Type.toUpperCase()});s?(0==e[0].IsDefault?(a.set("defaultAccount",o),Komodo.Services.securityService.hasPermission("clarity://editPaymentDetails/canUpdatePaymentDay")?t.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!1):t.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!0),"Holiday Home"==r||"13"==e[0].Type?(t.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!1),t.set("isDisbaleMethodOfPayment",!0)):"9"===e[0].Type?(t.setReadOnlyControlForBoxOffice(),t.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!0),"7"===e[0].PaymentDetail.MethodOfPayment&&t.set("isAccHolderNameAndIdEnabled",!0)):"2"!=customerInfo.customerClass&&"3"!=customerInfo.customerClass||r.length>0&&("DStv Residential"==r[0].AccountTypeDescription?(t.set("isDisbaleMethodOfPayment",!1),t.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!1)):Ember.isBlank(a.get("accountDescription"))||"Payment Plan"!=r[0].AccountTypeDescription||(t.set("isDisbaleMethodOfPayment",!0),t.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!1)))):1==e[0].IsDefault&&(a.set("defaultAccount",n),t.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!1),Ember.isBlank(a.get("accountDescription"))||"Payment Plan"!==a.get("accountDescription")?Ember.isBlank(a.get("accountDescription"))||"DStv Residential"!==a.get("accountDescription")||"3"!==a.get("methodOfPaymentData")?t.set("isDisbaleMethodOfPayment",t.checkSPLProduct(e[0])):t.set("isDisbaleMethodOfPayment",!0):"2"===a.get("methodOfPaymentData")?t.set("isDisbaleMethodOfPayment",!1):t.set("isDisbaleMethodOfPayment",!0)),t.checkIpDayForUsers()):(0==e[0].IsDefault?(a.set("defaultAccount",o),Komodo.Services.securityService.hasPermission("clarity://system/supervisor")?"Holiday Home"==r||"13"==e[0].Type?(t.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!1),t.set("isDisbaleMethodOfPayment",!0)):"9"==e[0].Type?(t.setReadOnlyControlForBoxOffice(),t.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!1)):("2"==customerInfo.customerClass||"3"==customerInfo.customerClass)&&r.length>0&&"DStv Residential"==r[0].AccountTypeDescription&&(t.set("isDisbaleMethodOfPayment",!1),t.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!1)):Komodo.Services.securityService.hasPermission("clarity://updateAccountdetails/canUpdateAccountdetails")?t.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!1):t.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!0)):1==e[0].IsDefault&&(a.set("defaultAccount",n),t.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!1)),"Agent"!=customerInfo.customerTypeText&&"Super Dealer"!=customerInfo.customerTypeText&&"MPOS"!=customerInfo.customerTypeText||6!=customerInfo.customerClass||(t.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!0),"2"==t.editPaymentDetailsModel.get("methodOfPaymentData")&&(t.set("isDisbaleMethodOfPayment",!0),t.editPaymentDetailsModel.set("isSaveButtonDisabled",!0))))}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)})},checkSPLProduct:function(e){var t=!1,a=this;return Komodo.Services.featureToggleService.isEnabled("EditPaymentDetails","SubscriptionPriceLock").done(function(o){if(!Ember.isBlank(o)&&o&&!Ember.isBlank(a.editPaymentDetailsModel.get("accountDescription"))&&"DStv Residential"===a.editPaymentDetailsModel.get("accountDescription")&&!Ember.isBlank(a.editPaymentDetailsModel.get("methodOfPaymentData"))&&"1"===a.editPaymentDetailsModel.methodOfPaymentData)for(var n=a.get("configuredSPLProducts"),s=a.get("splAgreementContactPeriod"),r=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),i=r.createArrayForSingleElement(e.ListOfAgreement.Agreement),l=0,c=i.length;l<c;l++)if(!Ember.isBlank(i[l].ContractPeriod)&&!Ember.isBlank(s)&&s.find(function(e){return e===i[l].ContractPeriod.toString()})&&!Ember.isBlank(i[l].ListOfHardware)&&!Ember.isBlank(i[l].ListOfHardware.Hardware))for(var u=r.createArrayForSingleElement(i[l].ListOfHardware.Hardware),d=0,h=u.length;d<h;d++)if(!Ember.isBlank(u[d].ListOfService)&&!Ember.isBlank(u[d].ListOfService.Service)){var m=r.createArrayForSingleElement(u[d].ListOfService.Service);if(m.length>0)for(var p=0,f=m.length;p<f;p++)if(!Ember.isBlank(n)&&n.length>0&&"principal"===m[p].ProductDetail.Type.toString().toLowerCase()&&n.find(function(e){return e===m[p].ProductDetail.UID.toString()})&&"active"===m[p].Status.toString().toLowerCase()){t=!0;break}}}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)}),t},checkIpDayForUsers:function(){var e=this;"Employee-MultiChoice"==customerInfo.customerTypeText&&35==customerInfo.typeId&&e.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!0),("Employee Related"==customerInfo.customerTypeText&&39==customerInfo.typeId||"Employee-MultiChoice"==customerInfo.customerTypeText&&35==customerInfo.typeId||"Employee-3rd Party"==customerInfo.customerTypeText&&36==customerInfo.typeId||"Employee-M24/Naspers"==customerInfo.customerTypeText&&37==customerInfo.typeId)&&("1"==e.editPaymentDetailsModel.get("methodOfPaymentData")?e.set("isDisbaleMethodOfPayment",!0):e.set("isDisbaleMethodOfPayment",!1))},getSelectedCountryName:function(){this.set("loggedInCountryName",Komodo.Services.uiService.getController("application").get("_selectedCountryDescription"))},setDocumentTypes:function(){var e=this.get("editPaymentDetailsModel"),t=this;Komodo.Services.cachedDataService.fetch("DocumentType").done(function(a){e.set("documentTypes",a),t.set("documentTypes",a)}).fail(function(){Komodo.log("[ERROR] : could not retrieve Document Type from CDM")})},showOverrideAHVPanel:function(){return(this.get("canSeeOverrideAHVControls")||this.get("isReadOnlyOverrideAHVControls"))&&1==this.get("editPaymentDetailsModel.ahvPending")||1==this.get("isEnableShowOverrideAHVPanel")?"display:block;":"display:none;"}.property("editPaymentDetailsModel.ahvPending","canSeeOverrideAHVControls","isReadOnlyOverrideAHVControls","isEnableShowOverrideAHVPanel"),isDisableOverrideAHVControl:function(){return this.get("isDisableAHVOverride")}.property("isDisableAHVOverride"),onShowThirdPartyDocsChanged:function(){var e=1==this.get("editPaymentDetailsModel.hideDebitOrderControls");e=e&&!this.get("editPaymentDetailsModel.customerAccountHolder"),e=e&&!this.get("editPaymentDetailsModel.ahvPending"),this.get("isAHVEnable")?this.set("isShowThirdPartyDocs",!1):this.set("isShowThirdPartyDocs",e)}.observes("editPaymentDetailsModel.customerAccountHolder","editPaymentDetailsModel.hideDebitOrderControls","editPaymentDetailsModel.ahvPending"),showThirdPartyDocsPanel:function(){return this.get("isShowThirdPartyDocs")?"display:block;":"display:none;"}.property("isShowThirdPartyDocs"),isShow:function(){return!this.get("hideDebOrdControls")&&"2"==this.get("editPaymentDetailsModel.methodOfPaymentData")&&this.get("clickedOnEdit")&&this.clearBankingDetails(),this.get("hideDebOrdControls")?"display:block;":"display:none;"}.property("hideDebOrdControls"),onThirdPartyDocsDisplayed:function(){if(this.checkPermissionsToUploadThirdPartyDocs(),1==this.get("isShowThirdPartyDocs")&&0==this.isThirdPartyDocsRetrived){var e=this.get("customerNumber");this.getThirdPartyDocuments(e)}}.observes("isShowThirdPartyDocs"),isUploadThirdPartyDocumentDisabled:function(){for(var e=0;e<this.thirdPartyDocuments.length;e++)if("QUEUED"===this.thirdPartyDocuments[e].get("uploadStatus"))return!1;return!0}.property("thirdPartyDocuments.length","thirdPartyDocuments.@each.uploadStatus"),isAllPaymentDetailsFieldsEmpty:function(){return Komodo.UI.propertyHelpers.isNullOrEmpty(this.get("editPaymentDetailsModel.bankName"))&&(Komodo.UI.propertyHelpers.isNullOrEmpty(this.get("editPaymentDetailsModel.bankAccountType"))||0==this.get("editPaymentDetailsModel.bankAccountType"))&&Komodo.UI.propertyHelpers.isNullOrEmpty(this.get("editPaymentDetailsModel.accountNumber"))&&Komodo.UI.propertyHelpers.isNullOrEmpty(this.get("editPaymentDetailsModel.branchName"))&&Komodo.UI.propertyHelpers.isNullOrEmpty(this.get("editPaymentDetailsModel.accountHolderId"))&&Komodo.UI.propertyHelpers.isNullOrEmpty(this.get("editPaymentDetailsModel.accountHolderName"))},isAnyPaymentDetailsFieldEmpty:function(){return Komodo.UI.propertyHelpers.isNullOrEmpty(this.get("editPaymentDetailsModel.bankName"))||Komodo.UI.propertyHelpers.isNullOrEmpty(this.get("editPaymentDetailsModel.bankAccountType"))||0==this.get("editPaymentDetailsModel.bankAccountType")||Komodo.UI.propertyHelpers.isNullOrEmpty(this.get("editPaymentDetailsModel.branchName"))||Komodo.UI.propertyHelpers.isNullOrEmpty(this.get("editPaymentDetailsModel.accountNumber"))},isAnyCustomerDetailsFieldEmpty:function(){return Komodo.UI.propertyHelpers.isNullOrEmpty(this.get("editPaymentDetailsModel.accountHolderName"))||Komodo.UI.propertyHelpers.isNullOrEmpty(this.get("editPaymentDetailsModel.accountHolderPhoneNumber"))||Komodo.UI.propertyHelpers.isNullOrEmpty(this.get("editPaymentDetailsModel.accountHolderId"))||Komodo.UI.propertyHelpers.isNullOrEmpty(this.get("editPaymentDetailsModel.accountHolderEmailAddress"))},uploadedDocStatus:["DONE","UPLOADED"],checkIfThirdPartyDocumentsUploaded:function(){if(!this.get("isShowThirdPartyDocs"))return!0;if("2"==this.get("editPaymentDetailsModel.methodOfPaymentData")&&this.isAllPaymentDetailsFieldsEmpty())return!0;for(var e=this,t=Ember.A(),a=0;a<this.thirdPartyDocuments.length;a++){var o=this.thirdPartyDocuments[a];this.uploadedDocStatus.contains(o.get("uploadStatus"))&&t.addObject(o)}for(var n=["5","20","26"],a=0;a<t.length;a++){var o=t[a];if(n.length<=0)break;for(var s=0;s<n.length;s++)if(o.get("documentType")===n[s]){n.removeObject(n[s]);break}}if(n.length>0){var r=this.getDocumentTypeNamesByIds(n);return Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),kl.value(e.localEditPaymeDetail+"requiredThirdPartyDocuments")+"<br/>"+r.join(",<br/> ")+".",null,e,"id5446675","warning"),!1}return!0},getDocumentTypeNamesByIds:function(e){for(var t=Ember.A(),a=0;a<e.length;a++)t.addObject(this.getDocTypeNameById(e[a]));return t},getDocTypeNameById:function(e){for(var t=0;t<this.documentTypes.length;t++){var a=this.documentTypes[t];if(a.key===e)return a.value}},getDocTypeIdByName:function(e){if(Komodo.UI.propertyHelpers.isNullOrEmpty(e))return"-";for(var t=0;t<this.documentTypes.length;t++){var a=this.documentTypes[t];if(a.value.toUpperCase()===e.toUpperCase())return a.key}return"-"},mapPluploadFileToDoc:function(e,t){var a=Komodo.Models.SupportingDocumentModel.create();return a.set("documentName",e.name),a.set("documentSize",plupload.formatSize(e.size)),a.set("uploadPercentage",""),a.set("documentType",""),a.set("uploadStatus",t),a.set("documentAlreadyUploaded",!1),a},getUploadDocumentUrl:function(e){void 0==e&&(e="");var t=this.get("customerNumber"),a=this.get("accountno");return KomodoConfiguration.ibsApiUrl+this.get("loggedInCountryName")+"/UploadDownload/UploadAccountDocuments?customerNumber="+t+"&accountNumber="+a+"&documentType="+e+"&documentAlias="+this.thirdPartyDocPatternAlias},onThirdPartyDocStatusChange:function(e,t){for(var a=this.get("thirdPartyDocuments"),o=0;o<a.length;o++){var n=a[o];if(n.get("documentName")===e.name){n.set("uploadPercentage",e.percent+" %"),2===e.status?n.set("uploadStatus","UPLOADING"):4===e.status?(n.set("uploadStatus","FAILED"),n.set("uploadPercentage","0 %")):5===e.status&&(n.set("uploadStatus","DONE"),n.set("documentUrl",t));break}}},getDocumentPayload:function(e){var t=Komodo.Models.SaveDocument.create(),a=Komodo.canonicalFacadeFactory(t,["ListOfDocument"]),o=Ember.A(),n=this.get("customerNumber"),s=this,r=0,i=Ember.A();if(s.set("verifyBySupervisorDone",!0),s.set("isVerifiedBySupervisor",!1),e.length>0){if($.each(e,function(e,t){if(1!=t.get("documentAlreadyUploaded"))if(r++,"DONE"==t.uploadStatus){var a=Komodo.Models.Document.create();a.set("FileType",t.get("documentType")),a.set("DocumentURL",t.get("documentUrl"));var l=[],c=s.getDocumentMetaData("CustomerId",n);l.pushObject(c);var u=s.getDocumentMetaData("DocumentSerial",n);l.pushObject(u);var d=s.getDocumentTypeValue(t.get("documentType")),h=s.getDocumentMetaData("DocumentType",d);t.set("documentTypeText",d),l.pushObject(h),t.set("documentAlreadyUploaded",!0),a.set("ListOfDocumentMetaData",l),o.pushObject(a)}else"FAILED"==t.uploadStatus&&i.addObject(t)}),i.length==r)return void Komodo.error("Document uploading failed.");o.length>0&&(t.set("Country",this.get("loggedInCountryId")),a.set("ListOfDocument",o),this.publishRequestOnBus(t,"SaveCustomerDocumentEvent","v2"))}this.isEnableShowOverrideAHVPanel&&this.editPaymentDetailsModel.set("isSaveButtonDisabled",!0)},getDocumentMetaData:function(e,t){var a=Komodo.Models.DocumentMetaData.create();return a.set("DocumentMetaDataValueUri",e),a.set("Value",t),a},getMetadataValueByKey:function(e,t){$.isArray(e)||(e=$.makeArray(e));for(var a=0;a<e.length;a++){var o=Ember.get(e[a],"DocumentMetaDataValueURI");if(!Komodo.UI.propertyHelpers.isNullOrEmpty(o)&&t.toUpperCase()===o.toUpperCase())return Ember.get(e[a],"Value")}return null},isDocumentNameExists:function(e,t){for(var a=0;a<e.length;a++){if(e[a].get("documentName")===t)return!0}return!1},getThirdPartyDocuments:function(e){this.isThirdPartyDocsRetrived=!0;var t=this;Komodo.Services.queryService.getJSON("ConfigurationQuery?customerID="+e).done(function(e){this.isThirdPartyDocsRetrived=!1,t.bindThirdPartyDocuments(e)}).error(function(e){this.isThirdPartyDocsRetrived=!1;var t=JSON.stringify(e);Komodo.log("retrieve getThirdPartyDocuments ajax call failed. Error: "+t)})},bindThirdPartyDocuments:function(e){var t=this.get("accountno"),a=customerInfo.customerNo;if(this.thirdPartyDocuments.clear(),null!=e.DocumentPayload){var o=this.thirdPartyDocPatternAlias+t+"_"+a+"_",n=this.getDocumentModelByPayload(e.DocumentPayload,o);this.set("thirdPartyDocuments",n)}},getDocumentModelByPayload:function(e,t){for(var a=Ember.A(),o=0;o<e.length;o++){var n=e[o],s=Komodo.Models.SupportingDocumentModel.create(),r=n.DocumentURL,i=r.split("/"),l=i[i.length-1];if(0==l.search(t)){var c=l.replace(t,"");s.set("documentName",c),s.set("documentUrl",r),s.set("documentSize","-"),s.set("uploadPercentage","-"),s.set("uploadStatus","UPLOADED"),s.set("documentAlreadyUploaded",!0);var u=this.getMetadataValueByKey(n.ListOfDocumentMetaData,"DocumentType");s.set("documentType",this.getDocTypeIdByName(u)),s.set("documentTypeText",u),a.addObject(s)}}return a},setThirdPartyPaymentDocumentDefaults:function(){this.set("thirdPartyDocuments",Ember.A()),this.isThirdPartyDocsRetrived=!1},propToCheckBankDetails:["accountHolderName","bankName","accountNumber","branchCode","accountHolderId","bankAccountType","branchName","accountHolderPhoneNumber","accountHolderEmailAddress"],isBankingDetailsAvailable:!1,onBankingDetailsChanged:function(){void 0!=this.get("editPaymentDetailsModel")&&(this.set("isBankingDetailsAvailable",Komodo.UI.propertyHelpers.isAllFieldsEmpty(this.get("editPaymentDetailsModel"),this.propToCheckBankDetails)),Komodo.log(this.get("isBankingDetailsAvailable")))}.observes("editPaymentDetailsModel.accountHolderName","editPaymentDetailsModel.bankName","editPaymentDetailsModel.accountNumber","editPaymentDetailsModel.branchCode","editPaymentDetailsModel.accountHolderId","editPaymentDetailsModel.bankAccountType","editPaymentDetailsModel.branchName","editPaymentDetailsModel.accountHolderPhoneNumber","editPaymentDetailsModel.accountHolderEmailAddress"),isNullOrEmpty:function(e){return void 0==e||null==e||""==e},isAHVCompliantBank:function(e){var t=[];Komodo.Services.cachedDataService.fetch("AHVSupportedBanks").done(function(e){$.each(e,function(e,a){t.addObject(a)})}).fail(function(){Komodo.log(kl.value("locale.manageAccount.editPaymentDetails:paymentDetail.errNotRetrieveAHVBankDS"))});for(var a=!1,o=t.length,n=0;n<o;n++)if(t[n].key==e){a=!0;break}return a},checkCustomerIsAccountHolder:function(){var e=this;e.isAHVEnable&&e.isBankDetailsChanged&&!e.get("editPaymentDetailsModel.customerAccountHolder")&&"1"===e.get("editPaymentDetailsModel.methodOfPaymentData")?(e.set("isSACustomerIsNotAccountHolder",!0),e.set("isSACustomerForceToAHV",!0),e.editPaymentDetailsModel.set("isSaveButtonDisabled",!0)):(e.set("isSACustomerForceToAHV",!1),e.set("isSubmitButtonVisible",!1),e.checkCustomerAccountIdIsSocialIdentitynumber())},checkCustomerAccountIdIsSocialIdentitynumber:function(){var e,t=this;e=Ember.isEmpty(t.get("editPaymentDetailsModel.accountHolderId"))?0:t.get("editPaymentDetailsModel.accountHolderId").length,t.isAHVEnable&&t.isBankDetailsChanged&&"1"===t.get("editPaymentDetailsModel.methodOfPaymentData")&&t.get("editPaymentDetailsModel.customerAccountHolder")&&13!=e?t.set("isSACustomerIsNotAccountHolder",!0):t.set("isSACustomerIsNotAccountHolder",!1)},compareBankDetailsIsChanged:function(){var e=this,t=e.getSelectedAccount();if(!Ember.isEmpty(t)){var a=null;switch(t.PaymentDetail.MethodOfPayment){case"1":a="2";break;case"7":a="3";break;default:a="1"}for(var o,n={accountHolderId:t.PaymentDetail.PayerIDNumber,accountHolderName:this.getInitials(t.PaymentDetail.PayerName)+" "+this.getSurname(t.PaymentDetail.PayerName),bankName:t.PaymentDetail.BankName,bankAccountNumber:t.PaymentDetail.AccountNumber,branchCode:t.PaymentDetail.BranchCode,bankAccountType:t.PaymentDetail.BankAccountType},s=JSON.stringify(n),r=e.editPaymentDetailsModel.bankAccountTypes.length,i=0;i<r;i++)if(e.editPaymentDetailsModel.bankAccountTypes[i].key==e.editPaymentDetailsModel.bankAccountType){o=e.editPaymentDetailsModel.bankAccountTypes[i].value;break}var l;Ember.isBlank(e.editPaymentDetailsModel.accountNumber)||(l=e.editPaymentDetailsModel.accountNumber.trim().indexOf("*")>-1?e.get("existingAccountNumber"):e.editPaymentDetailsModel.accountNumber);var c={accountHolderId:e.editPaymentDetailsModel.accountHolderId,accountHolderName:this.getInitials(e.editPaymentDetailsModel.accountHolderName)+" "+this.getSurname(e.editPaymentDetailsModel.accountHolderName),bankName:e.editPaymentDetailsModel.bankName,bankAccountNumber:l,branchCode:e.editPaymentDetailsModel.branchCode,bankAccountType:o},u=JSON.stringify(c),d=Ember.compare(s.toUpperCase(),u.toUpperCase());e.set("isBankDetailsChanged",0!=d),e.editPaymentDetailsModel.set("isSaveButtonDisabled",!e.isBankDetailsChanged),e.editPaymentDetailsModel.set("isCancelButtonDisabled",!e.isBankDetailsChanged),e.set("verifyBySupervisorDone",!0),e.set("isVerifiedBySupervisor",!1),e.checkCustomerIsAccountHolder(),e.get("isSACustomerIsNotAccountHolder")?(e.editPaymentDetailsModel.set("isSaveButtonDisabled",e.get("isSACustomerIsNotAccountHolder")),e.set("isShowThirdPartyDocs",!1)):e.checkBankIsAHV(),e.editPaymentDetailsModel.methodOfPaymentData!==a&&(e.editPaymentDetailsModel.set("isSaveButtonDisabled",!1),e.editPaymentDetailsModel.set("isCancelButtonDisabled",!1)),e.set("isVisibleAHVStatus",!1),e.set("isBankAHVNonCompliant",!1),e.set("isBankAHVCompliant",!1),"2"!==e.editPaymentDetailsModel.methodOfPaymentData?(!1===e.get("isBankDetailsChanged")?"Compliant"===t.PaymentDetail.AHVStatus?(e.set("isVisibleAHVStatus",!0),e.set("isBankAHVNonCompliant",!1),e.set("isBankAHVCompliant",!0),e.set("isEnableShowOverrideAHVPanel",!1)):(e.set("isVisibleAHVStatus",!0),e.set("isBankAHVNonCompliant",!0),e.set("isBankAHVCompliant",!1),e.set("isEnableShowOverrideAHVPanel",!0)):(e.set("isVisibleAHVStatus",!0),e.set("isBankAHVNonCompliant",!0),e.set("isBankAHVCompliant",!1),!e.isSACustomerIsNotAccountHolder&&e.isAHVCompliantBank(e.editPaymentDetailsModel.bankName)&&e.editPaymentDetailsModel.customerAccountHolder?(e.set("isSubmitButtonVisible",!0),e.set("isEnableShowOverrideAHVPanel",!1),e.editPaymentDetailsModel.set("isSaveButtonDisabled",!0)):(e.set("isSubmitButtonVisible",!1),e.set("isEnableShowOverrideAHVPanel",!0),e.editPaymentDetailsModel.set("isSaveButtonDisabled",!1))),"3"===e.editPaymentDetailsModel.methodOfPaymentData&&(e.set("isVisibleAHVStatus",!0),e.set("isBankAHVNonCompliant",!0),e.set("isBankAHVCompliant",!1),e.set("isEnableShowOverrideAHVPanel",!0))):(e.set("isEnableShowOverrideAHVPanel",!1),e.set("hideDebOrdControls",!1)),e.isYes(e.editPaymentDetailsModel.defaultAccount)&&"1"===e.editPaymentDetailsModel.methodOfPaymentData?e.set("hideDebOrdControls",!0):e.isYes(e.editPaymentDetailsModel.defaultAccount)&&"3"===e.editPaymentDetailsModel.methodOfPaymentData?e.set("hideDebOrdControls",!0):e.set("hideDebOrdControls",!1)}}.observes("editPaymentDetailsModel.accountHolderName","editPaymentDetailsModel.bankName","editPaymentDetailsModel.accountNumber","editPaymentDetailsModel.branchCode","editPaymentDetailsModel.accountHolderId","editPaymentDetailsModel.bankAccountType","editPaymentDetailsModel.methodOfPaymentData","editPaymentDetailsModel.customerAccountHolder"),comparePaymentDetailsIsChanged:function(){var e=this,t=e.getSelectedAccount();if(!Ember.isEmpty(t)){var a={debitOrderDay:t.InvoiceDay.toString()},o=JSON.stringify(a),n={debitOrderDay:e.editPaymentDetailsModel.debitOrderDay.toString()},s=JSON.stringify(n),r=Ember.compare(o.toUpperCase(),s.toUpperCase());e.editPaymentDetailsModel.set("isCancelButtonDisabled",0==r),e.editPaymentDetailsModel.set("isSaveButtonDisabled",0==r)}}.observes("editPaymentDetailsModel.debitOrderDay"),IfPhoneOrEmailIsChanged:function(){var e=this;e.editPaymentDetailsModel.customerAccountHolder||e.get("isAccHolderNameAndIdEnabled")||(e.editPaymentDetailsModel.set("isSaveButtonDisabled",!1),e.editPaymentDetailsModel.set("isCancelButtonDisabled",!1))}.observes("editPaymentDetailsModel.accountHolderEmailAddress","editPaymentDetailsModel.accountHolderPhoneNumber"),setDefaults:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("EditPaymentDetails","AHVCompliantBankFeature").done(function(t){e.set("isAHVEnable",t)}).fail(function(e){Komodo.Services.log("Error while checking feature toggle. Error Details:"+e)})},isLoginDisabled:function(){return!this.get("isModelValid")||this.editPaymentDetailsModel.get("disableAction")}.property("isModelValid","editPaymentDetailsModel.disableAction"),popUpSupervisorApproval:function(){var e=this,t=Komodo.Services.securityService.get("domainUserName"),a=Komodo.Services.queryService.getSelectedCountryId();e.get("controllers.genericPayment"),e.get("editPaymentDetailsModel");e.registerValidator(e.get("editPaymentDetailsModel"),"supervisorUsername",{type:"string",isRequired:!0}),e.registerValidator(e.get("editPaymentDetailsModel"),"supervisorPassword",{type:"string",isRequired:!0}),e.editPaymentDetailsModel.set("supervisorUsername",void 0),e.editPaymentDetailsModel.set("supervisorPassword",void 0);var o=Komodo.Services.uiService.showModalPopup(kl.value(e.localEditPaymeDetail+"popUpForSupervisor"),"supervisorApproval",{view:Komodo.Application.AccountSupervisorApprovalView,context:{data:e.get("editPaymentDetailsModel"),validators:e.validators,thisController:this,login:function(){var n=this;e.editPaymentDetailsModel.set("disableAction",!0),e.validateUserClaim(a,n.data.get("supervisorUsername"),n.data.get("supervisorPassword"),e.supervisorClaim).done(function(a){void 0!==a?(e.set("sessionToken",a),t===n.data.get("supervisorUsername")?(alert(kl.value(e.localAhvSupervisorApproval+"unauthoriseError")),n.data.set("supervisorUsername",void 0),n.data.set("supervisorPassword",void 0)):(o.close(),e.set("verifyBySupervisorDone",!1),e.set("isVerifiedBySupervisor",!0))):(alert(kl.value(e.localAhvSupervisorApproval+"accessDenied")),n.data.set("supervisorUsername",void 0),n.data.set("supervisorPassword",void 0),e.set("verifyBySupervisorDone",!0),e.set("isVerifiedBySupervisor",!1))}).fail(function(e){alert(e)}),e.editPaymentDetailsModel.set("disableAction",!1)},cancel:function(){o.close()}},canUserClose:!1})},validateUserClaim:function(e,t,a,o){var n=this,s=$.Deferred();return n.getSecurityService().authenticate(e,t,a).done(function(e){var t=void 0;$(e.permissions).each(function(a,n){$(o).each(function(a,o){n===o&&(t=e.sessionToken)})}),s.resolve(t)}).fail(function(e){Komodo.Controls.MessageBoxController.show(kl.value(n.localAhvSupervisorApproval+"supervisorAuthentication"),kl.value(n.localAhvSupervisorApproval+"invalidUser"),Komodo.Controls.MessageBoxOkButton,this,"id5446676","warning")}),s},getSecurityService:function(){return this.get("_securityService")},checkAHVStatus:function(e){that=this;var t="";Ember.isBlank(e.accountNumber)||(t=e.accountNumber,t.trim().indexOf("*")>-1&&(t=that.get("existingAccountNumber")));var a=e.branchCode,o=e.bankAccountTypes.findBy("key",e.bankAccountType).value,n=e.accountHolderId,s=this.get("banks").findBy("CanonicalKey",e.bankName).CanonicalValue,r=this.getInitials(e.accountHolderName),i=this.getSurname(e.accountHolderName);Komodo.Services.queryService.getJSONFromApiRoot("Verified-Bank-Details?bankAccountNumber="+t+"&bankBranchCode="+a+"&bankAccountType="+o+"&idNumber="+n+"&bankName="+s+"&initials="+r+"&surname="+i,!1).done(function(e){that.set("AHVStatus",e.ahvStatus),that.set("AHVReason",e.reason),"Compliant"===that.get("AHVStatus")?(that.set("isBankAHVCompliant",!0),that.set("isBankAHVNonCompliant",!1),that.editPaymentDetailsModel.set("isSaveButtonDisabled",!1),that.set("isEnableShowOverrideAHVPanel",!1)):(that.set("isBankAHVCompliant",!1),that.set("isBankAHVNonCompliant",!0),that.editPaymentDetailsModel.set("isSaveButtonDisabled",!0),
that.set("isEnableShowOverrideAHVPanel",!0),void 0!=that.get("AHVReason")&&Komodo.Controls.MessageBoxController.show(kl.value(that.localEditPaymeDetail+"paymentDetails"),that.get("AHVReason"),Komodo.Controls.MessageBoxOkButton,this,"id5446676","warning")),that.set("isSubmitButtonVisible",!1),that.set("isVisibleAHVStatus",!0)}).error(function(e){var t="Verified-Bank-Details Failed: "+(Ember.isBlank(e.responseJSON)||!0!=!Ember.isBlank(e.responseJSON.detail)?"":e.responseJSON.detail);Komodo.Controls.MessageBoxController.show(kl.value(that.localGeneral+"moduleTitle"),t,Komodo.Controls.MessageBoxOkButtons,that,"id5446675","danger")})},getInitials:function(e){if(!Ember.isBlank(e)&&e.split(" ").length>0)return e.split(" ")[0]},getSurname:function(e){if(!Ember.isBlank(e)&&e.split(" ").length>0)return e.split(" ")[e.split(" ").length-1]},overridePaymentDetails:function(e,t){var a=this;a.startProgress();var o="",n="";Ember.isBlank(e.accountNumber)||(n=e.accountNumber,n.trim().indexOf("*")>-1&&(n=a.get("existingAccountNumber")));var s=e.branchCode,r=!0===Ember.isBlank(e.bankAccountTypes.findBy("key",e.bankAccountType))?"":e.bankAccountTypes.findBy("key",e.bankAccountType).value,i=e.accountHolderId,l=!0===Ember.isBlank(this.get("banks").findBy("CanonicalKey",e.bankName))?"":this.get("banks").findBy("CanonicalKey",e.bankName).CanonicalValue,c=this.getInitials(e.accountHolderName),u=this.getSurname(e.accountHolderName),d=e.accountHolderEmailAddress,h=e.accountHolderPhoneNumber,m="",p="";"1"!=customerInfo.customerClass&&"9"!=customerInfo.customerClass||(m=e.accountHolderName,p=this.get("accountno"),c="",u=""),"2"===e.methodOfPaymentData?o="Cash":"1"!==e.methodOfPaymentData&&"3"!==e.methodOfPaymentData||(o="Debit Order"),Ember.isBlank(e.debitOrderDay)||"30"!==e.debitOrderDay&&"31"!==e.debitOrderDay&&"32"!==e.debitOrderDay||(e.debitOrderDay=(parseInt(e.debitOrderDay)-1).toString());var f={methodOfPayment:o,bankName:l,bankAccountType:r,debitOrderDay:e.debitOrderDay,bankAccountNumber:n,bankBranchCode:s,payerIdNumber:i,initials:c,surname:u,emailAddress:d,phoneNumber:h,commercialCustomerName:m,commercialCustomerAccountNumber:p};Ember.isBlank(t)||"ahvActionOverride"!==t?Ember.isBlank(t)||"ahvActionSave"!==t||(Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+this.get("customerNumber")),Komodo.Services.queryService.putJSONApiRoot("customers/"+this.get("customerNumber")+"/payment-details?debitOrderType=Recurring",{data:f}).done(function(e){if(!isCustomerAvailable)return void Komodo.Controls.MessageBoxController.show(kl.value(a.localGeneral+"moduleTitle"),kl.value(a.localGeneral+"customerNotFound"));a.stopProgress(),Komodo.Controls.MessageBoxController.show(kl.value(a.localGeneral+"successful"),kl.value(a.localGeneral+"successfulMsg"),Komodo.Controls.MessageBoxOkButton,a,"id5446676","success").response=function(e){if("ok"==e){a.set("clickedOnEdit",!1),a.editPaymentDetailsModel.set("isCancelButtonDisabled",!0);var t=helperFunction.getCustomerIdToRetrieveData();Komodo.Application.ManageAccountSharedObjectController.create().retrieveFinancialAccountsSync(t),a.set("existingAccountNumber",void 0),a.bindPaymentDetail(a.get("accountno"),!1),a.setControllEnableProperty();var o=a.get("accountno"),n=a.get("customerNumber"),s=Komodo.Services.securityService.session.domainUserName,r=kl.value(a.localUpdateBankingInteraction+"interactionMedium"),i=kl.value(a.localUpdateBankingInteraction+"category"),l=kl.value(a.localUpdateBankingInteraction+"subCategory"),c=kl.value(a.localUpdateBankingInteraction+"outcome"),u=kl.value(a.localUpdateBankingInteraction+"status"),d=Komodo.Services.securityService.session.domainUserName,h=kl.value(a.localEditPaymeDetail+"interactionNoteAfterBankingDetailsUpdated",{userId:s,customerId:n,financeAccount:o});a.publishCreateActivity(o,t,h,d,r,i,l,c,u)}}}).fail(function(e){var t="Update Payment Details Failed: "+(Ember.isBlank(e.responseJSON)||!0!=!Ember.isBlank(e.responseJSON.detail)?"":e.responseJSON.detail);Komodo.Controls.MessageBoxController.show(kl.value(a.localGeneral+"moduleTitle"),t,Komodo.Controls.MessageBoxOkButtons,a,"id5446675","danger")})):(Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+this.get("customerNumber")),Komodo.Services.queryService.putJSONApiRoot("customers/"+this.get("customerNumber")+"/override-payment-details",{data:f}).done(function(e){a.stopProgress(),a.editPaymentDetailsModel.set("busyIndicator",!1),a.set("editPaymentDetailsModel.supportingDocuments",Ember.A());var t,o;Komodo.Controls.MessageBoxController.show(kl.value(a.localGeneral+"moduleTitle"),kl.value(a.localGeneral+"overrideAhvResult"),Komodo.Controls.MessageBoxOkButton,a,"id5446676","success").response=function(e){"ok"===e&&(t=a.get("accountno"),o=a.get("customerNumber"),a.set("clickedOnEdit",!1),a.removeDependentProperty("accountNumberValidator"),a.set("existingAccountNumber",void 0),a.isEnableShowOverrideAHVPanel&&(Komodo.Application.ManageAccountSharedObjectController.create().retrieveFinancialAccountsSync(o),a.bindPaymentDetail(t,!1),a.setControllEnableProperty(),a.set("isVisibleAHVStatus",!0),a.set("isBankAHVCompliant",!0),a.set("isBankAHVNonCompliant",!1),a.editPaymentDetailsModel.set("isSaveButtonDisabled",!0),a.set("isEnableShowOverrideAHVPanel",!1),a.set("isSubmitButtonVisible",!1),a.editPaymentDetailsModel.set("isCancelButtonDisabled",!0)),a.set("verifyBySupervisorDone",!0),a.set("isVerifiedBySupervisor",!1),a.successInterationAHVOrverride(t,o),a.editPaymentDetailsModel.set("supervisorUsername",""),a.editPaymentDetailsModel.set("supervisorPassword",""),a.editPaymentDetailsModel.set("acceptDocumentation",!1))}}).fail(function(e){var t="Override Payment Details Failed: "+(Ember.isBlank(e.responseJSON)||!0!=!Ember.isBlank(e.responseJSON.detail)?"":e.responseJSON.detail);Komodo.Controls.MessageBoxController.show(kl.value(a.localGeneral+"moduleTitle"),t,Komodo.Controls.MessageBoxOkButtons,a,"id5446675","danger"),a.set("verifyBySupervisorDone",!1),a.set("isVerifiedBySupervisor",!0),a.set("isVisibleAHVStatus",!0),a.set("isBankAHVCompliant",!1),a.set("isBankAHVNonCompliant",!0),a.set("isSubmitButtonVisible",!1)}))},isYes:function(e){return e==kl.value(this.localGeneral+"yes")},stop:function(){this.set("accountno",""),this.set("accountNumberWithDescription",""),this.set("cashMOP",""),this.set("isCashAccountTypeRemoved",!1),this.set("isAccHolderNameAndIdEnabled",!1),this.set("customerName",""),this.set("customerID",""),this.set("customerEmail",""),this.set("customerPhoneNumber",""),this.set("customerCountryCode",""),this.set("payerAccountHolderName",""),this.set("payerAccountHolderId",""),this.set("isFieldDisabled",!1),this.set("editPaymentDetailsModel.supportDocPagerPageContent",[]),this.set("editPaymentDetailsModel.supportingDocuments",[]),this.set("isDocumentAvailable",!1),this.set("editPaymentDetailsModel.ahvPending",!1),this.set("editPaymentDetailsModel",Komodo.Models.EditPaymentDetailsModel.create()),this.set("editPaymentDetailsModel.customerAccountHolder",void 0),this.set("isShowThirdPartyDocs",!1),this.set("clickedOnEdit",!1),this.set("isEnableShowOverrideAHVPanel",!1),this.set("existingAccountNumber",void 0),this._super()}}),Komodo.Application.EditPaymentDetailsAfricaController=Komodo.UI.Controller.extend({localGeneral:"locale.manageAccount.editPaymentDetailsAfrica:general.",localEditPaymeDetail:"locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.",isDisableAHVOverride:!0,ahvAccountType:void 0,thirdPartyDocuments:Ember.A(),documentTypes:Ember.A(),thirdPartyDocUploader:void 0,thirdPartyDocPatternAlias:"TPDOC_AC",isShowThirdPartyDocs:!1,existingAccountNumber:void 0,isIdentificationNumberMandatory:!1,isDebitOrderAllowed:!1,yes:"Y",no:"N",init:function(){this._super();this.set("isDisbaleMethodOfPayment",!1),this.set("isDisbaleBankName",!1),this.set("isDisbaleAccountType",!1),this.set("isDisbaleAccountNumber",!1),this.set("isDisbaleBranchName",!1),this.set("isDisbaleIsCustomerAccountHolder",!1),this.set("loggedInCountryId",void 0),this.set("banks",[]),this.set("bankBranches",[]),this.set("bankAccountTypes",[]),this.set("debitOrderDays",[]),this.set("editPaymentDetailsModel",null),this.set("hideDebOrdControls",!1),this.set("allAccounts",[]),this.set("smartcards",[]),this.set("isAccHolderNameAndIdEnabled",!1),this.set("customerName",""),this.set("customerID",""),this.set("payerAccountHolderName",""),this.set("payerAccountHolderId",""),this.set("isCashAccountTypeRemoved",!1),this.set("cashMOP",""),this.set("accountTypes",[]),this.set("isFieldDisabled",!1),this.set("noAccountExist",!1),this.set("noRequired",!1),this.set("isAccountDataAvailable",!0),this.set("isbranchCodeEnabled",!0),this.set("loggedInCountryName",""),Komodo.log("Constructing Edit payment detail controller"),this.set("processVersion","v1.1"),this.set("processName","Edit payment controller"),this.requiresDependency("_queryService",{singleton:Komodo.Services.queryService}),this.registerModel("editPaymentDetailsModel",Komodo.Models.EditPaymentDetailsModel),this.set("editPaymentDetailsModel.radioButtonMethodofPayment",[]),this.get("editPaymentDetailsModel.radioButtonMethodofPayment").pushObject(Ember.Object.create({title:"Debit Order",value:"1"})),this.get("editPaymentDetailsModel.radioButtonMethodofPayment").pushObject(Ember.Object.create({title:"Cash",value:"2"})),this.get("editPaymentDetailsModel.radioButtonMethodofPayment").pushObject(Ember.Object.create({title:"AHV Pending",value:"3"})),this.set("customerNumber",""),this.set("isDocumentAvailable",!1),this.set("isEnableShowOverrideAHVPanel",!1),this.set("isBankDetailsChanged",!1),this.set("clickedOnEdit",!1),this.set("isDisableInvoiceDayBind",!1),this.set("isDebitOrderAllowed",!1);var e=kl.value(this.localGeneral+"yes");this.set("yes",e);var t=kl.value(this.localGeneral+"no");this.set("no",t)},start:function(){if(this.initializeEditPaymentDetailAfricaConstants(),this.set("isDisableAHVOverride",!0),this.set("loggedInCountryId",this.getQueryService().getSelectedCountryId()),this.getPermissions(),this.setThirdPartyPaymentDocumentDefaults(),this.checkAndGetCustomer(),this.featureToggleEditPayment(),!isCustomerAvailable)return Komodo.Controls.MessageBoxController.show(kl.value(this.localGeneral+"customerNotFound"),kl.value(this.localGeneral+"customerNotFoundMsg")),void(void 0!=this.editPaymentDetailsModel.acccountId&&this.boxOfficeButtons());var e=this;Komodo.Services.featureToggleService.isEnabled("CreateCustomer","IsDebitOrderAllowed").done(function(t){e.set("isDebitOrderAllowed",t)}).fail(function(e){Komodo.Services.log("Error while checking feature toggle. Error Details:"+e)}),Komodo.Services.featureToggleService.isEnabled("EditPaymentDetails","IsAllowViewOrEditPaymentDetails").done(function(t){if(t){var a=Komodo.Services.securityService.hasPermission("clarity://managePayments/canViewOrEditPaymentDetails"),o=Komodo.Services.securityService.hasPermission("clarity://managePayments/canViewOrEditPaymentDetailsForSpecialist");1!=customerInfo.customerClass&&9!=customerInfo.customerClass&&10!=customerInfo.customerClass||a?3!=customerInfo.customerClass||o?"VIP"==customerInfo.customerTypeText&&7==customerInfo.typeId||"External Demo"==customerInfo.customerTypeText&&10==customerInfo.typeId||"Internal Demo"==customerInfo.customerTypeText&&12==customerInfo.typeId||"Sales Promoters"==customerInfo.customerTypeText&&13==customerInfo.typeId||"Field Trials"==customerInfo.customerTypeText&&38==customerInfo.typeId?(e.set("isAccountDataAvailable",!1),e.set("noRequired",!0),e.editPaymentDetailsModel.set("customerTypee",kl.value(e.localEditPaymeDetail+"serviceNoRequired",{customerType:customerInfo.customerTypeText}))):(e.set("noRequired",!1),e.setDefaultpopulateData()):(e.set("isAccountDataAvailable",!1),e.set("noRequired",!0),e.editPaymentDetailsModel.set("customerTypee",kl.value(e.localEditPaymeDetail+"messageViewOrEditPaymentDetailsForSpecialist",{customerType:customerInfo.customerTypeText}))):(e.set("isAccountDataAvailable",!1),e.set("noRequired",!0),e.editPaymentDetailsModel.set("customerTypee",kl.value(e.localEditPaymeDetail+"messageViewOrEditPaymentDetails",{customerType:customerInfo.customerTypeText})))}else e.set("noRequired",!1),e.setDefaultpopulateData()}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)}),Komodo.Services.featureToggleService.isEnabled("CustomerGlobal","IsIdentificationNumberRequire").done(function(t){e.set("isIdentificationNumberMandatory",t)}).fail(function(e){Komodo.Services.log("Error while checking feature toggle. Error Details:"+e)}),this.checkPermissionsToUploadThirdPartyDocs(),this.disableBankingDetails(),!1===e.get("isDebitOrderAllowed")?this.set("editVisible.disabled",!0):this.set("editVisible.disabled",!1),this._super()},canUploadThirdPartyAuthDocs:!1,canSeeOverrideAHVControls:!1,isReadOnlyOverrideAHVControls:!1,getPermissions:function(){this.set("canUploadThirdPartyAuthDocs",!0),this.set("canSeeOverrideAHVControls",1==Komodo.Services.securityService.hasPermission("clarity://managePayments/allowOverrideAHV")),this.set("isReadOnlyOverrideAHVControls",1==Komodo.Services.securityService.hasPermission("clarity://managePayments/allowOverrideAHVReadOnly"))},initializeEditPaymentDetailAfricaConstants:function(){this.set("copyOfId",GetClarityConstants("ManageAccountConstants","customerTypesConstant.RefundDocumentType.copyOfId").toString()),this.set("bankStatement",GetClarityConstants("ManageAccountConstants","customerTypesConstant.RefundDocumentType.bankStatement").toString())},uninitializeEditPaymentDetailAfricaConstants:function(){this.set("copyOfId",void 0),this.set("bankStatement",void 0)},checkPermissionsToUploadThirdPartyDocs:function(){1!=Komodo.Services.securityService.hasPermission("clarity://managePayments/canUploadThirdPartyDocs")&&(this.set("editPaymentDetailsModel.customerAccountHolder",!0),this.set("isDisbaleIsCustomerAccountHolder",!0))},disableAddThirdPartyUploadDoc:!1,oncanUploadThirdPartyAuthDocsChanged:function(){this.set("disableAddThirdPartyUploadDoc",1!=this.get("canUploadThirdPartyAuthDocs"))}.observes("canUploadThirdPartyAuthDocs"),boxOfficeButtons:function(){var e=this.get("editPaymentDetailsModel");Komodo.Services.featureToggleService.isEnabled("EditPaymentDetails","IsAllowEditPaymentDayForNonDefaultAccount").done(function(t){t?"Internal Demo"==customerInfo.customerTypeText||"External Demo"==customerInfo.customerTypeText||"9"==e.accountType?(e.set("isSaveButtonDisabled",!0),e.set("isCancelButtonDisabled",!0)):"Payment Plan"==e.accountDescription?(e.set("isSaveButtonDisabled",!0),e.set("isCancelButtonDisabled",!0)):(e.set("isSaveButtonDisabled",!1),e.set("isCancelButtonDisabled",!1)):"Agent"!=customerInfo.customerTypeText&&"Super Dealer"!=customerInfo.customerTypeText&&"MPOS"!=customerInfo.customerTypeText||6!=customerInfo.customerClass?(e.set("isSaveButtonDisabled",!1),e.set("isCancelButtonDisabled",!1)):"2"==e.get("methodOfPaymentData")?(e.set("isSaveButtonDisabled",!0),e.set("isCancelButtonDisabled",!0)):(e.set("isSaveButtonDisabled",!1),e.set("isCancelButtonDisabled",!1))}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)})},checkAndGetCustomer:function(){var e=this;helperFunction=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),isCustomerAvailable=helperFunction.isCustomerIdIsAvailableToRetriveData(),isCustomerAvailable&&(customerInfo=helperFunction.getCustomerDetails(),this.set("customerNumber",customerInfo.customerNo),e.getCustomerDetails())},getCustomerDetails:function(){var e=this;isCustomerAvailable&&(6==customerInfo.customerClass&&this.get("editPaymentDetailsModel").set("iscustomerTypeDealer",!0),Komodo.Services.queryService.getJSON("/CustomerProfile?customerId="+customerInfo.customerNo,{async:!1}).done(function(t){t&&t.CustomerDetail&&(t.CustomerDetail.SubscriberSystemUID&&t.CustomerDetail.SubscriberSystemUID.SubscriberSystem.length>0&&e.set("companyRegistrationNumber",t.CustomerDetail.CompanyRegistrationNumber),"6"===t.CustomerDetail.Class?e.set("customerName",void 0===customerInfo.companyName||null===customerInfo.companyName?"":customerInfo.companyName.trim()):(e.set("customerName",(void 0===customerInfo.firstName||null===customerInfo.firstName?"":customerInfo.firstName.trim())+" "+(void 0===customerInfo.lastName||null===customerInfo.lastName?"":customerInfo.lastName.trim())),e.set("customerID",customerInfo.idNo)))}).error(function(t){e.set("customerName",(void 0===customerInfo.firstName||null===customerInfo.firstName?"":customerInfo.firstName.trim())+" "+(void 0===customerInfo.lastName||null===customerInfo.lastName?"":customerInfo.lastName.trim())),e.set("customerID",customerInfo.idNo);var a=JSON.stringify(t);Komodo.log("[ERROR] : retrieveCustomer ajax call failed. Error: "+a)}))},setDefaultpopulateData:function(){var e=this;e.setMethodOfPayment(),e.setAccountTypes(),e.registerValidation(),e.bindPaymentDetail(void 0,!1),e.getSelectedCountryName()},setMethodOfPayment:function(){var e=this;Komodo.Services.cachedDataService.fetch("MethodOfPayment").done(function(t){var a=e.get("editPaymentDetailsModel");a.get("methodOfPayments").clear(),$.each(t,function(t,o){a.get("methodOfPayments").addObject(o),"Cash"===o.value&&e.set("cashMOP",o)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve method of payment from CDM")})},setAccountTypes:function(){var e=this;e.set("accountTypes",!0==!Ember.isBlank(Komodo.Services.customerProfileService.get("accountType"))?Komodo.Services.customerProfileService.get("accountType").AccountTypes.AccountType:void 0),e.setDebitOrderDays()},setAllAccounts:function(){var e=this,t=Komodo.Application.ManageAccountUtility.isAnyAccountExist();e.set("allAccounts",[]);var a="";if(t&&t.length>0&&e.get("accountTypes")&&e.get("accountTypes").length>0){e.set("noAccountExist",!1),e.set("isAccountDataAvailable",!0);for(var o=helperFunction.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account),n=[],a="",s=0;s<o.length;s++)a=e.get("accountTypes").filter(function(e){if(e.CanonicalKey===o[s].Type)return e.AccountTypeDescription}),"1"==Komodo.Services.customerProfileService.personalDetails.customerClass||"9"==Komodo.Services.customerProfileService.personalDetails.customerClass||"4"==Komodo.Services.customerProfileService.personalDetails.customerClass?null!=o[s].Name&&void 0!=o[s].Name&&""!=o[s].Name?n.pushObject(o[s].UID+" - "+o[s].Name):n.pushObject(o[s].UID):null!=a&&void 0!=a&&""!=a&&a.length>0?n.pushObject(o[s].UID+" - "+a[0].AccountTypeDescription):n.pushObject(o[s].UID),0!=s&&o[s].IsDefault&&(n[0]=[n[s],n[s]=n[0]][0]);if(n.length>1){var r=n[0];n.shift(),n=n.sort(function(e,t){return parseInt(e,10)>parseInt(t,10)}),n.unshift(r)}if(e.set("allAccounts",n),e.get("accountno")){if(n&&n.length>0)for(var s=0;s<e.get("allAccounts").length;s++)if(tempAccountNoWithDesc=e.get("allAccounts")[s],null!=tempAccountNoWithDesc&&void 0!=tempAccountNoWithDesc&&""!=tempAccountNoWithDesc&&(tempAccountArray=tempAccountNoWithDesc.split(" - "),null!=tempAccountArray&&void 0!=tempAccountArray&&""!=tempAccountArray&&tempAccountArray.length>0&&tempAccountArray[0]===e.get("accountno"))){e.get("editPaymentDetailsModel").set("selectedAcccountId",tempAccountNoWithDesc);break}}else e.get("allAccounts")&&e.get("allAccounts").length>0&&e.get("editPaymentDetailsModel").set("selectedAcccountId",e.get("allAccounts")[0])}else e.set("noAccountExist",!0),e.set("isAccountDataAvailable",!1)},setDebitOrderDays:function(){var e=this;"1"==customerInfo.customerClass||"4"==customerInfo.customerClass||"9"==customerInfo.customerClass?Komodo.Services.cachedDataService.fetch("InvoiceDayCommercial").done(function(t){e.debitOrderDays.length>0&&e.get("debitOrderDays").clear(),$.each(t,function(t,a){a.key2=parseInt(a.key),e.get("debitOrderDays").addObject(a)}),e.set("debitOrderDays",e.get("debitOrderDays").sortBy("key2")),e.setBanks()}).fail(function(){Komodo.log("[ERROR] : could not retrieve debit order day from CDM")}):Komodo.Services.cachedDataService.fetch("InvoiceDay").done(function(t){e.debitOrderDays.length>0&&e.get("debitOrderDays").clear(),"6"!=customerInfo.customerClass&&t.removeObject(t.findBy("key","29")),$.each(t,function(t,a){a.key2=parseInt(a.key),e.get("debitOrderDays").addObject(a)}),e.set("debitOrderDays",e.get("debitOrderDays").sortBy("key2")),e.setBanks()}).fail(function(){Komodo.log("[ERROR] : could not retrieve debit order day from CDM")})},setBanks:function(){var e=this;Komodo.Services.cachedDataService.fetch("BankDetail").done(function(t){var a=JSON.parse(t);e.get("banks").clear(),$.each($.makeArray(a.Banks.Bank),function(t,a){e.get("banks").addObject(a)}),e.setBankAccountTypes()}).fail(function(){Komodo.log("[ERROR] : could not retrieve hierarchical example data")})},registerValidation:function(){var e=this;e.registerValidator(e.get("editPaymentDetailsModel"),"bankAccountType",{type:"string",isRequired:!0,displayName:kl.value("locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.accountType")}),e.registerValidator(e.get("editPaymentDetailsModel"),"debitOrderDay",{type:"string",isRequired:!0,displayName:kl.value("locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.debitOrderDay")}),e.registerValidator(e.get("editPaymentDetailsModel"),"bankName",{type:"string",isRequired:!0,functions:Komodo.UI.Validators.DebitOrderValidator,displayName:kl.value("locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.bankName")}),e.registerValidator(e.get("editPaymentDetailsModel"),"branchName",{type:"string",isRequired:!0,functions:Komodo.UI.Validators.DebitOrderValidator,displayName:kl.value("locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.branchName")}),e.registerValidator(e.get("editPaymentDetailsModel"),"branchCode",{type:"string",isRequired:!0,functions:Komodo.UI.Validators.DebitOrderValidator,displayName:kl.value("locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.branchCode")}),e.registerValidator(e.get("editPaymentDetailsModel"),"accountHolderName",{type:"string",isRequired:!0,minLength:3,maxLength:61,functions:Komodo.UI.Validators.firstNameAndLastNameValidator,displayName:kl.value("locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.accountHolderFullName")}),6!=customerInfo.customerClass&&(e.isIdentificationNumberMandatory?e.registerValidator(e.get("editPaymentDetailsModel"),"accountHolderId",{type:"string",isRequired:!0,minLength:8,maxLength:13,functions:Komodo.UI.Validators.alphanumericValidator,displayName:kl.value("locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.accountHolderId")}):e.registerValidator(e.get("editPaymentDetailsModel"),"accountHolderId",{type:"string",minLength:8,maxLength:13,functions:Komodo.UI.Validators.alphanumericValidator,displayName:kl.value("locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.accountHolderId")})),e.registerValidator(e.get("editPaymentDetailsModel"),"methodOfPaymentData",{type:"string",isRequired:!0,displayName:kl.value("locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.methodOfPayment")})},setBankAccountTypes:function(){var e=this;Komodo.Services.cachedDataService.fetch("MethodOfPayment").done(function(t){var a=e.get("editPaymentDetailsModel");a.get("bankAccountTypes").clear(),$.each(t,function(e,t){"CASH"!==t.value.toUpperCase()&&"PAYROLL"!==t.value.toUpperCase()&&"AHV PENDING"!==t.value.toUpperCase()&&a.get("bankAccountTypes").addObject(t)}),e.setAllAccounts(),e.setDocumentTypes()}).fail(function(){Komodo.log("[ERROR] : could not retrieve method of payment from CDM")})},methodOfPaymentChanged:function(){var e=this,t=e.get("editPaymentDetailsModel"),a=t.radioButtonMethodofPayment.find(function(e){return"AHV Pending"===e.title});t&&("3"!==Ember.get(t,"methodOfPaymentData")||t.get("defaultAccount")!=e.yes&&"Payment Plan"!=t.get("accountDescription")?e.editPaymentDetailsModel.set("ahvPending",!1):e.editPaymentDetailsModel.set("ahvPending",!0),void 0!=t.get("methodOfPaymentData")&&"2"===t.get("methodOfPaymentData")?(void 0!=a&&t.radioButtonMethodofPayment.removeAt(2),e.set("hideDebOrdControls",!1),e.removeDependentProperty("bankNameValidator"),e.removeDependentProperty("branchNameValidator"),e.removeDependentProperty("branchCodeValidator"),e.removeDependentProperty("accountNumberValidator"),e.removeDependentProperty("accountHolderNameValidator"),e.removeDependentProperty("bankAccountTypeValidator"),6!=customerInfo.customerClass&&e.removeDependentProperty("accountHolderIdValidator"),t.set("hideDebitOrderControls",!1),e.get("isCashAccountTypeRemoved")&&"Cash"!=t.get("methodOfPayments")[0].value&&(t.get("methodOfPayments").insertAt(0,e.get("cashMOP")),t.set("methodOfPayment",e.get("cashMOP").key))):void 0==t.get("methodOfPaymentData")||"1"!==t.get("methodOfPaymentData")&&"3"!==t.get("methodOfPaymentData")||("3"===t.get("methodOfPaymentData")?void 0==a&&t.radioButtonMethodofPayment.pushObject(Ember.Object.create({title:"AHV Pending",value:"3"})):void 0!=a&&t.radioButtonMethodofPayment.removeAt(2),e.set("hideDebOrdControls",void 0!=t.get("methodOfPaymentData")&&("1"===t.get("methodOfPaymentData")||"3"===t.get("methodOfPaymentData"))),e.createDependentProperty("bankNameValidator",[Komodo.UI.Validators.RequiredValidator]),e.createDependentProperty("branchNameValidator",[Komodo.UI.Validators.RequiredValidator]),e.createDependentProperty("branchCodeValidator",[Komodo.UI.Validators.RequiredValidator]),e.createDependentProperty("bankAccountTypeValidator",[Komodo.UI.Validators.RequiredValidator]),void 0===t.accountNumber&&e.registerValidator(e.get("editPaymentDetailsModel"),"accountNumber",{type:"number",isRequired:!0,functions:Komodo.UI.Validators.numericValidator,minLength:5,maxLength:34,displayName:kl.value("locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.accountNumber")}),e.registerValidator(e.get("editPaymentDetailsModel"),"bankAccountType",{type:"string",isRequired:!0,displayName:kl.value("locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.accountType")}),e.createDependentProperty("accountHolderNameValidator",[Komodo.UI.Validators.RequiredValidator,Komodo.UI.Validators.MinLengthValidator,Komodo.UI.Validators.MaxLengthValidator,Komodo.UI.Validators.RegExValidator,Komodo.UI.Validators.shouldNotOneStringAndshouldNotStartWithSpace]),6!=customerInfo.customerClass&&e.isIdentificationNumberMandatory&&e.createDependentProperty("accountHolderIdValidator",[Komodo.UI.Validators.RequiredValidator,Komodo.UI.Validators.MinLengthValidator,Komodo.UI.Validators.MaxLengthValidator,Komodo.UI.Validators.alphanumericValidator]),t.set("hideDebitOrderControls",!0),0==e.get("isCashAccountTypeRemoved")&&e.set("isCashAccountTypeRemoved",!0),e.get("isCashAccountTypeRemoved")&&"Cash"==t.get("methodOfPayments")[0].value&&t.get("methodOfPayments").removeObject(e.get("cashMOP")),1==e.editPaymentDetailsModel.get("customerAccountHolder")?e.set("isAccHolderNameAndIdEnabled",!0):e.set("isAccHolderNameAndIdEnabled",!1),e.customerIsAccountHolder()),2!=customerInfo.customerClass&&3!=customerInfo.customerClass||e.enableBankDetails(),e.disableBankingDetails(),e.disableIPDayForZambiaforDebitOrder())}.observes("editPaymentDetailsModel.methodOfPaymentData"),enableBankDetails:function(){var e=this,t=e.get("editPaymentDetailsModel");Komodo.Services.featureToggleService.isEnabled("EditPaymentDetails","IsAllowEditPaymentDayForNonDefaultAccount").done(function(a){a&&(void 0!=t.get("methodOfPaymentData")&&"2"===t.get("methodOfPaymentData")&&t.get("defaultAccount")==e.yes?(e.set("hideDebOrdControls",!0),e.removeDependentProperty("bankNameValidator"),e.removeDependentProperty("branchNameValidator"),e.removeDependentProperty("branchCodeValidator"),e.removeDependentProperty("accountNumberValidator"),e.removeDependentProperty("accountHolderNameValidator"),e.removeDependentProperty("bankAccountTypeValidator"),e.deregisterValidator("bankAccountType"),6!=customerInfo.customerClass&&e.removeDependentProperty("accountHolderIdValidator"),t.set("hideDebitOrderControls",!0),t.set("hidePaymentDayControls",!1),1==e.editPaymentDetailsModel.get("customerAccountHolder")?e.set("isAccHolderNameAndIdEnabled",!0):e.set("isAccHolderNameAndIdEnabled",!1),e.customerIsAccountHolder()):void 0!=t.get("methodOfPaymentData")&&t.get("defaultAccount")==e.no?(e.set("hideDebOrdControls",!1),e.removeDependentProperty("bankNameValidator"),e.removeDependentProperty("branchNameValidator"),e.removeDependentProperty("branchCodeValidator"),e.removeDependentProperty("accountNumberValidator"),e.removeDependentProperty("accountHolderNameValidator"),e.removeDependentProperty("bankAccountTypeValidator"),e.deregisterValidator("bankAccountType"),6!=customerInfo.customerClass&&e.removeDependentProperty("accountHolderIdValidator"),t.set("hideDebitOrderControls",!1)):void 0!=t.get("methodOfPaymentData")&&"3"===t.get("methodOfPaymentData")&&t.get("defaultAccount")==e.yes?e.setReadOnlyControlInAHVPending():t.set("hidePaymentDayControls",!0))}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)})},bankNameChanged:function(){var e=this;if(e.get("bankBranches").clear(),e.editPaymentDetailsModel.set("branchName",void 0),e.editPaymentDetailsModel.set("branchCode",void 0),e.get("editPaymentDetailsModel.bankName")){e.get("banks")&&$.each(e.get("banks"),function(t,a){a.CanonicalKey===e.get("editPaymentDetailsModel.bankName")&&a.Branches&&a.Branches.Branch&&($.isArray(a.Branches.Branch)?$.each(a.Branches.Branch,function(t,a){e.get("bankBranches").addObject(a)}):e.get("bankBranches").addObject(a.Branches.Branch))});var t=e.get("editPaymentDetailsModel"),a=e.getSelectedAccount();if(a.PaymentDetail.BranchCode&&null!=a.PaymentDetail.BranchCode){var o=e.get("bankBranches").filter(function(e){return e.BranchCode.toUpperCase()===a.PaymentDetail.BranchCode.toUpperCase()});o.length&&o.length>0?(t.set("branchName",o[0].CanonicalKey),t.set("branchCode",o[0].BranchCode)):(t.set("branchName",void 0),t.set("branchCode",void 0))}void 0!=e.editPaymentDetailsModel.acccountId&&e.boxOfficeButtons(),e.set("editPaymentDetailsModel",t),e.checkBankIsAHV(),e.showOverrideAHVPanelAndMsg()}}.observes("editPaymentDetailsModel.bankName"),checkBankIsAHV:function(){var e=this,t=e.get("editPaymentDetailsModel.methodOfPaymentData"),a=e.getSelectedAccount();e.set("isEnableShowOverrideAHVPanel",!1),Komodo.Services.featureToggleService.isEnabled("EditPaymentDetails","AHVCompliantBankFeature").done(function(o){if(o&&!Ember.isEmpty(a)&&e.isBankDetailsChanged&&("1"==t||"3"==t)&&"9"!=a.Type){var n=e.get("editPaymentDetailsModel.bankName");Ember.isEmpty(n&&n.trim())||(e.set("isEnableShowOverrideAHVPanel",!e.isAHVCompliantBank(n)),e.editPaymentDetailsModel.set("isSaveButtonDisabled",e.isEnableShowOverrideAHVPanel))}}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)})},showOverrideAHVPanelAndMsg:function(){var e=this;if(e.isEnableShowOverrideAHVPanel){Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),kl.value(e.localGeneral+"selectedBankIsNotComplaint"),Komodo.Controls.MessageBoxOkButton,e,"id5446675","warning").response=function(t){"ok"==t&&e.editPaymentDetailsModel.set("isSaveButtonDisabled",!0)}}},branchNameChanged:function(){var e=this;e.editPaymentDetailsModel.set("branchCode",void 0);var t=e.get("bankBranches").filter(function(t){return t.CanonicalKey===e.get("editPaymentDetailsModel.branchName")}),a=e.get("editPaymentDetailsModel");t.length&&t.length>0?a.set("branchCode",t[0].BranchCode):a&&a.set("branchCode",void 0)}.observes("editPaymentDetailsModel.branchName"),accountNumberChanged:function(){var e=this,t=e.seperateAndGetAccountNumberFromDescription(e.get("editPaymentDetailsModel.selectedAcccountId"));e.isThirdPartyDocsRetrived=!1,t&&(e.set("accountNumberWithDescription",e.get("editPaymentDetailsModel.selectedAcccountId")),e.bindPaymentDetail(t,!0),e.set("editPaymentDetailsModel.supportingDocuments",Ember.A())),
Komodo.Services.featureToggleService.isEnabled("EditPaymentDetails","IsAllowEditPaymentDayForNonDefaultAccount").done(function(t){t&&e.methodOfPaymentChanged()}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)}),e.set("isBankDetailsChanged",!1),e.checkBankIsAHV()}.observes("editPaymentDetailsModel.selectedAcccountId"),hideSaveDetailsButton:function(){var e=this;void 0!=e.editPaymentDetailsModel.acccountId&&e.boxOfficeButtons(),e.isEnableShowOverrideAHVPanel&&e.editPaymentDetailsModel.set("isSaveButtonDisabled",!0)}.observes("editPaymentDetailsModel.methodOfPaymentData","editPaymentDetailsModel.accountHolderName","editPaymentDetailsModel.accountHolderId","editPaymentDetailsModel.accountNumber","editPaymentDetailsModel.debitOrderDay","editPaymentDetailsModel.customerAccountHolder","editPaymentDetailsModel.branchName","editPaymentDetailsModel.bankAccountType"),customerIsAccountHolderChecked:function(){var e=this;e.customerIsAccountHolder(),e.editPaymentDetailsModel.customerAccountHolder&&e.checkBankIsAHV()}.observes("editPaymentDetailsModel.customerAccountHolder"),collapsibleEditLink:function(){return[{action:"enabledBankingDetails",title:kl.value(this.localGeneral+"editLink")}]}.property(),editVisible:Ember.Object.create({action:"enabledBankingDetails",title:kl.value(this.localGeneral+"editLink")}),actions:{submitPayementDetail:function(e){var t=this;"1"==t.get("editPaymentDetailsModel").get("methodOfPaymentData")&&0==t.get("isDebitOrderAllowed")?Komodo.Controls.MessageBoxController.show(kl.value(t.localGeneral+"moduleTitle"),kl.value(t.localGeneral+"debitOrderNotAllowed"),Komodo.Controls.MessageBoxOkButton,t,"id5446896","warning").response=function(e){}:this.updatePayementDetail(e)},cancelAction:function(){this.cancelEdit()},removeDocument:function(e){var t=e._parentView._childViews[0].text,a=this.get("editPaymentDetailsModel"),o=-1,n=-1;$(a.supportingDocuments).each(function(e,a){a.documentName===t&&(o=e)}),o>-1&&a.supportingDocuments.removeAt(o),$(a.fileUploader.files).each(function(e,a){a.name===t&&(n=e)}),n>-1&&a.fileUploader.files.removeAt(n),a.supportingDocuments.length<=0&&(a.set("supportDocPagerPageContent",[]),this.set("isDocumentAvailable",!1),0==this.get("isDisableAHVOverride")&&this.set("isDisableAHVOverride",!0))},viewDocument:function(e){var t=e._parentView._parentView._childViews[0].text,a=this.get("editPaymentDetailsModel");$(a.supportingDocuments).each(function(e,a){a.documentName===t&&window.open(a.documentUrl,"","_blank")})},overrideStatus:function(){var e=this;if(e.isEnableShowOverrideAHVPanel){e.updatePayementDetail(e.editPaymentDetailsModel);var t=e.getErrors(e.get("editPaymentDetailsModel"));if(""!==t)return void Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),t,null,e,"id5446675","warning");if(!e.checkIfThirdPartyDocumentsUploaded())return}e.set("ahvDocumentTypes",[]),e.set("ahvDocumentTypes",[e.get("copyOfId"),e.get("bankStatement")]),e.set("validatingRefundsInput",[]);for(var a=0;a<e.editPaymentDetailsModel.bankAccountTypes.length;a++)e.editPaymentDetailsModel.bankAccountTypes[a].key===e.editPaymentDetailsModel.get("bankAccountType")&&e.set("ahvAccountType",e.editPaymentDetailsModel.bankAccountTypes[a].value);for(var a=0;a<e.editPaymentDetailsModel.get("supportingDocuments").length;a++){var o=e.editPaymentDetailsModel.get("supportingDocuments")[a].documentType,n=e.editPaymentDetailsModel.get("supportingDocuments")[a].documentTypeText;void 0==o?o="-":"DONE"==e.editPaymentDetailsModel.get("supportingDocuments")[a].uploadStatus&&("COPY OF ID"===n.toString().toUpperCase()&&e.get("ahvDocumentTypes").removeObject(n),"BANK STATEMENT"===n.toString().toUpperCase()&&e.get("ahvDocumentTypes").removeObject(n))}e.get("ahvDocumentTypes").length>0&&e.get("validatingRefundsInput").push(e.get("ahvDocumentTypes").join("<br/>")),e.get("validatingRefundsInput").length>0?Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),kl.value(e.localGeneral+"specifyDocs")+"<br/>"+e.get("validatingRefundsInput"),Komodo.Controls.MessageBoxOkButtons,e,"id5446675","warning"):e.publishOverrideAHVStatus()},actionRemoveThirdPartyDocument:function(e){for(var t=e.get("content"),a=this.thirdPartyDocUploader.files,o=t.get("documentName"),n=0;n<a.length;n++){var s=a[n];if(o==s.name){this.thirdPartyDocUploader.files.removeObject(s);break}}this.thirdPartyDocuments.removeObject(t)},enabledBankingDetails:function(){var e=this;if(!Komodo.Services.securityService.hasPermission("clarity://editPaymentDetails/canChangeBankingDetails"))return void Komodo.Controls.MessageBoxController.show("Warning",kl.value(e.localEditPaymeDetail+"editBankingDetailsPermission"),null,this,"id123456","warning");e.customerIsAccountHolder(),e.set("isDisbaleIsCustomerAccountHolder",!1),e.checkPermissionsToUploadThirdPartyDocs(),e.set("isDisbaleBankName",!1),e.set("isDisbaleAccountNumber",!1),e.set("isDisbaleAccountType",!1),e.set("isDisbaleBranchName",!1),e.createDependentProperty("accountNumberValidator",[Komodo.UI.Validators.RequiredValidator]),e.registerValidator(e.get("editPaymentDetailsModel"),"accountNumber",{type:"number",isRequired:!0,functions:Komodo.UI.Validators.numericValidator,minLength:5,maxLength:34,displayName:kl.value("locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.accountNumber")}),e.get("editPaymentDetailsModel").set("accountNumber",e.get("existingAccountNumber"))}},getDocumentTypeValue:function(e){for(var t=this,a=t.editPaymentDetailsModel.documentTypes,o=0;o<a.length;o++)if(a[o].key===e)return a[o].value},publishOverrideAHVStatus:function(){var e=this,t=Komodo.Models.OverrideAHVStatus.create(),a=Komodo.canonicalFacadeFactory(t,["Country","FinancialAccountUID","PaymentDetail"]);a.set("Country",e.get("loggedInCountryId")),a.set("FinancialAccountUID",e.get("accountno"));var o=Komodo.Models.PaymentDetail.create(),n=Komodo.canonicalFacadeFactory(o,["MethodOfPayment","BankAccountType","AccountNumber","BankName","BranchName","BranchCode","DebitOrderDay","PayerName","PayerSurname","PayerIDType","PayerIDNumber","AHVStatus","YearsAtBank","IsSalaryMandated"]);n.set("MethodOfPayment",e.editPaymentDetailsModel.get("accountType")),n.set("BankAccountType",e.get("ahvAccountType")),n.set("AccountNumber",e.editPaymentDetailsModel.get("accountNumber")),n.set("BankName",e.editPaymentDetailsModel.get("bankName")),n.set("BranchName",e.editPaymentDetailsModel.get("branchName")),n.set("BranchCode",e.editPaymentDetailsModel.get("branchCode")),n.set("DebitOrderDay",e.editPaymentDetailsModel.get("debitOrderDay"));var s=e.editPaymentDetailsModel.get("accountHolderName").toLowerCase().trim(),r=e.getFirstNameLastName(s);r.length>0&&(e.set("firstName",r[0]),e.set("surname",r[1])),n.set("PayerName",e.get("firstName")),n.set("PayerSurname",e.get("surname")),n.set("PayerIDType",void 0),n.set("PayerIDNumber",e.editPaymentDetailsModel.get("accountHolderId")),n.set("AHVStatus",void 0),n.set("YearsAtBank",void 0),n.set("IsSalaryMandated",void 0),a.set("PaymentDetail",o),e.startProgress(),Komodo.Services.manageAccountService.publishEvent(e,t,"OverrideAHVStatus","v1").fail(function(t){e.editPaymentDetailsModel.set("busyIndicator",!1)})},getFirstNameLastName:function(e){var t=this,a=e.split(" "),o=" ",n=" ";if(!($.isArray(a)&&a.length>0))return[];if(a=$.grep(a,function(e){return!t.isNullOrEmpty(e)}),a.length<=0)return[];for(var s=0;s<a.length;s++)a[s]=a[s][0].toUpperCase()+(a[s].length>1?a[s].substring(1):"");return o=a[0],a.removeObject(a[0]),a.length>0&&(n=a.join(" ")),[o,n]},isProgressStarted:!1,innerProcessId:void 0,startProgress:function(e){1!=this.isProgressStarted&&(void 0==e&&(e=Komodo.Services.busyIndicatorTypes.Loading),this.getNewProcessID(),this.innerProcessId=this.get("processId"),this.isProgressStarted=!0,Komodo.Services.busyService.start(!0,this.innerProcessId,e,8e4,"blocking",this))},stopProgress:function(){this.isProgressStarted=!1,Komodo.Services.busyService.stop(this.innerProcessId,"blocking")},startTimeout:function(){var e=this;e.editPaymentDetailsModel.set("busyIndicator",!0),e.set("Timeout",setTimeout(function(){e.editPaymentDetailsModel.set("busyIndicator",!1)},3e4))},messageAHVStatusOverriddenReceived:function(e){var t=this;t.stopProgress(),t.editPaymentDetailsModel.set("busyIndicator",!1),t.editPaymentDetailsModel.set("ahvStatus",e.ResponseMessage.Payload.PaymentDetail.AHVStatus),t.set("editPaymentDetailsModel.supportingDocuments",Ember.A());var a,o;Komodo.Controls.MessageBoxController.show(kl.value(t.localGeneral+"moduleTitle"),kl.value(t.localGeneral+"overrideAhvResult"),Komodo.Controls.MessageBoxOkButton,this,"id5446676","success").response=function(n){"ok"==n&&(a=e.ResponseMessage.Payload.FinancialAccountUID,o=t.get("customerNumber"),t.isEnableShowOverrideAHVPanel&&t.bindPaymentDetail(a,!1),t.successInterationAHVOrverride(a,o))}},successInterationAHVOrverride:function(e,t){var a=this,o=kl.value(a.localEditPaymeDetail+"successInterationAHVOrverride")+e;a.publishCreateActivity(e,t,o),a.reloadAccountDetails(e)},reloadAccountDetails:function(e){this.get("editPaymentDetailsModel");if(helperFunction=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),isCustomerAvailable=helperFunction.isCustomerIdIsAvailableToRetriveData(),this.setThirdPartyPaymentDocumentDefaults(),!isCustomerAvailable)return void Komodo.Controls.MessageBoxController.show(kl.value(this.localGeneral+"moduleTitle"),kl.value(this.localGeneral+"customerNotFound"));var t=helperFunction.getCustomerIdToRetrieveData();Komodo.Application.ManageAccountSharedObjectController.create().retrieveFinancialAccountsSync(t),this.bindPaymentDetail(e,!0)},messageAHVStatusOverriddenDeliveryFailure:function(e){this.set("editPaymentDetailsModel.supportingDocuments",Ember.A()),Komodo.log(e)},messageAHVStatusOverriddenFault:function(e){this.set("editPaymentDetailsModel.supportingDocuments",Ember.A()),Komodo.log(e)},messageReceived:function(e){Komodo.log(e)},messageDeliveryFailure:function(e){Komodo.log(e)},messageFault:function(e){Komodo.log(e)},createDependentProperties:function(){var e=this;e.createDependentProperty("bankNameValidator",[Komodo.UI.Validators.RequiredValidator]),e.createDependentProperty("branchNameValidator",[Komodo.UI.Validators.RequiredValidator]),e.createDependentProperty("branchCodeValidator",[Komodo.UI.Validators.RequiredValidator]),e.createDependentProperty("bankAccountTypeValidator",[Komodo.UI.Validators.RequiredValidator]),e.registerValidator(e.get("editPaymentDetailsModel"),"bankAccountType",{type:"string",isRequired:!0,displayName:kl.value("locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.accountType")}),e.createDependentProperty("accountHolderNameValidator",[Komodo.UI.Validators.RequiredValidator,Komodo.UI.Validators.MinLengthValidator,Komodo.UI.Validators.MaxLengthValidator,Komodo.UI.Validators.RegExValidator,Komodo.UI.Validators.shouldNotOneStringAndshouldNotStartWithSpace]),6!=customerInfo.customerClass&&e.createDependentProperty("accountHolderIdValidator",[Komodo.UI.Validators.RequiredValidator,Komodo.UI.Validators.MinLengthValidator,Komodo.UI.Validators.MaxLengthValidator,Komodo.UI.Validators.alphanumericValidator])},removeDependentProperties:function(){var e=this;e.removeDependentProperty("bankNameValidator",[Komodo.UI.Validators.RequiredValidator]),e.removeDependentProperty("branchNameValidator",[Komodo.UI.Validators.RequiredValidator]),e.removeDependentProperty("branchCodeValidator",[Komodo.UI.Validators.RequiredValidator]),e.removeDependentProperty("bankAccountTypeValidator",[Komodo.UI.Validators.RequiredValidator]),e.removeDependentProperty("accountNumberValidator",[Komodo.UI.Validators.RequiredValidator]),e.registerValidator(e.get("editPaymentDetailsModel"),"accountNumber",{type:"number",isRequired:!0,functions:Komodo.UI.Validators.numericValidator,minLength:5,maxLength:34,displayName:kl.value("locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.accountNumber")}),e.registerValidator(e.get("editPaymentDetailsModel"),"bankAccountType",{type:"string",isRequired:!0,displayName:kl.value("locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.accountType")}),e.createDependentProperty("accountHolderNameValidator",[Komodo.UI.Validators.RequiredValidator,Komodo.UI.Validators.MinLengthValidator,Komodo.UI.Validators.MaxLengthValidator,Komodo.UI.Validators.RegExValidator,Komodo.UI.Validators.shouldNotOneStringAndshouldNotStartWithSpace]),6!=customerInfo.customerClass&&e.createDependentProperty("accountHolderIdValidator",[Komodo.UI.Validators.RequiredValidator,Komodo.UI.Validators.MinLengthValidator,Komodo.UI.Validators.MaxLengthValidator,Komodo.UI.Validators.alphanumericValidator])},removeAllDependentProperties:function(){var e=this;e.removeDependentProperty("bankNameValidator",[Komodo.UI.Validators.RequiredValidator]),e.removeDependentProperty("branchNameValidator",[Komodo.UI.Validators.RequiredValidator]),e.removeDependentProperty("branchCodeValidator",[Komodo.UI.Validators.RequiredValidator]),e.removeDependentProperty("bankAccountTypeValidator",[Komodo.UI.Validators.RequiredValidator]),e.removeDependentProperty("accountNumberValidator",[Komodo.UI.Validators.RequiredValidator]),e.deregisterValidator(e.get("editPaymentDetailsModel"),"accountNumber",{type:"number",isRequired:!0,functions:Komodo.UI.Validators.numericValidator,minLength:5,maxLength:34,displayName:kl.value("locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.accountNumber")}),e.deregisterValidator(e.get("editPaymentDetailsModel"),"accountNumber",{type:"number",isRequired:!0,functions:Komodo.UI.Validators.accountNoValidator,minLength:5,maxLength:34,displayName:kl.value("locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.accountNumber")}),e.deregisterValidator(e.get("editPaymentDetailsModel"),"bankAccountType",{type:"string",isRequired:!0,displayName:kl.value("locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.accountType")}),e.removeDependentProperty("accountHolderNameValidator",[Komodo.UI.Validators.RequiredValidator,Komodo.UI.Validators.MinLengthValidator,Komodo.UI.Validators.MaxLengthValidator,Komodo.UI.Validators.RegExValidator,Komodo.UI.Validators.shouldNotOneStringAndshouldNotStartWithSpace]),6!=customerInfo.customerClass&&e.removeDependentProperty("accountHolderIdValidator",[Komodo.UI.Validators.RequiredValidator,Komodo.UI.Validators.MinLengthValidator,Komodo.UI.Validators.MaxLengthValidator,Komodo.UI.Validators.alphanumericValidator])},updatePayementDetail:function(){var e=this,t=!1;if(Komodo.Services.featureToggleService.isEnabled("EditPaymentDetails","IsAllowEditPaymentDayForNonDefaultAccount").done(function(a){if(a)if(e.get("editPaymentDetailsModel").defaultAccount==e.yes)if("2"==e.get("editPaymentDetailsModel").methodOfPaymentData)if(null!=e.get("editPaymentDetailsModel").bankName&&null!=e.get("editPaymentDetailsModel").bankAccountType&&""!=e.get("editPaymentDetailsModel").accountNumber&&void 0!=e.get("editPaymentDetailsModel").branchName&&""!=e.get("editPaymentDetailsModel").accountHolderId&&""!=e.get("editPaymentDetailsModel").accountHolderName){e.removeDependentProperties();var o=Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account.filter(function(e){return"Payment Plan"===e.AccountTypeDescription});0==o.length||null!=e.get("editPaymentDetailsModel").bankName&&null!=e.get("editPaymentDetailsModel").bankAccountType&&null!=e.get("editPaymentDetailsModel").accountNumber&&null!=e.get("editPaymentDetailsModel").branchName&&null!=e.get("editPaymentDetailsModel").accountHolderId&&null!=e.get("editPaymentDetailsModel").accountHolderName||(Komodo.Controls.MessageBoxController.show("Warning",kl.value(e.localEditPaymeDetail+"bankingDetailsBlank"),null,this,"id123456","warning"),t=!0)}else if(null!=e.get("editPaymentDetailsModel").bankName&&""!=e.get("editPaymentDetailsModel").bankName||null!=e.get("editPaymentDetailsModel").bankAccountType&&0!=e.get("editPaymentDetailsModel").bankAccountType||""!=e.get("editPaymentDetailsModel").accountNumber||void 0!=e.get("editPaymentDetailsModel").branchName&&""!=e.get("editPaymentDetailsModel").branchName||""!=e.get("editPaymentDetailsModel").accountHolderId||""!=e.get("editPaymentDetailsModel").accountHolderName)e.createDependentProperties(),t=!0;else if(e.removeAllDependentProperties(),6!=customerInfo.customerClass&&e.createDependentProperty("accountHolderIdValidator",[Komodo.UI.Validators.MinLengthValidator,Komodo.UI.Validators.MaxLengthValidator,Komodo.UI.Validators.alphanumericValidator]),6!=customerInfo.customerClass&&e.validators.accountHolderIdValidator.errors&&e.validators.accountHolderIdValidator.errors.length>0)t=!0;else{var o=Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account.filter(function(e){return"Payment Plan"===e.AccountTypeDescription});0==o.length||null!=e.get("editPaymentDetailsModel").bankName&&null!=e.get("editPaymentDetailsModel").bankAccountType&&null!=e.get("editPaymentDetailsModel").accountNumber&&null!=e.get("editPaymentDetailsModel").branchName&&null!=e.get("editPaymentDetailsModel").accountHolderId&&null!=e.get("editPaymentDetailsModel").accountHolderName||(Komodo.Controls.MessageBoxController.show("Warning",kl.value(e.localEditPaymeDetail+"bankingDetailsBlank"),null,this,"id123456","warning"),t=!0)}else{e.removeDependentProperties();var o=Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account.filter(function(e){return"Payment Plan"===e.AccountTypeDescription});0==o.length||null!=e.get("editPaymentDetailsModel").bankName&&null!=e.get("editPaymentDetailsModel").bankAccountType&&null!=e.get("editPaymentDetailsModel").accountNumber&&null!=e.get("editPaymentDetailsModel").branchName&&null!=e.get("editPaymentDetailsModel").accountHolderId&&null!=e.get("editPaymentDetailsModel").accountHolderName||(Komodo.Controls.MessageBoxController.show("Warning",kl.value(e.localEditPaymeDetail+"bankingDetailsBlank"),null,this,"id123456","warning"),t=!0)}else if("Payment Plan"===e.get("editPaymentDetailsModel").accountDescription){var o=Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account.filter(function(t){return t.defaultAccount===e.yes});0!=o.length&&(null==o[0].PaymentDetail.bankName||null!=o[0].PaymentDetail.bankAccountType&&null!=o[0].PaymentDetail.accountNumber&&null!=o[0].PaymentDetail.branchName||(Komodo.Controls.MessageBoxController.show("Warning",kl.value(e.localEditPaymeDetail+"bankingDetailsBlank"),null,this,"id123456","warning"),t=!0))}}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)}),!t){var a=e.getErrors(e.get("editPaymentDetailsModel"));if(""!==a)return void Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),a,null,e,"id5446675","warning");if(!e.isEnableShowOverrideAHVPanel){if(!e.checkIfThirdPartyDocumentsUploaded())return;Komodo.Controls.MessageBoxController.show(kl.value(e.localEditPaymeDetail+"confirmChanges"),kl.value(e.localEditPaymeDetail+"confirmChangesMsg"),Komodo.Controls.MessageBoxYesNoButtons,e,"id5446675","warning").response=function(t){"yes"==t&&(e.updateFinanceAccount(),e.disableBankingDetails(),e.get("editPaymentDetailsModel").set("isSaveButtonDisabled",!0),e.removeDependentProperty("accountNumberValidator",[Komodo.UI.Validators.RequiredValidator]),e.deregisterValidator(e.get("editPaymentDetailsModel"),"accountNumber",{type:"number",isRequired:!0,functions:Komodo.UI.Validators.numericValidator,minLength:5,maxLength:34,displayName:kl.value("locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.accountNumber")}))}}}},getErrors:function(e){var t="",a="";if(a=kl.value(this.localGeneral+"customValiudationErrorMsg")+"<br />",!e.get("selectedAcccountId"))return t=kl.value(this.localGeneral+"errorMessage11"),a+t;"1"===e.get("methodOfPaymentData")&&(t=this.checkErrors(e));var o=this;return Komodo.Services.featureToggleService.isEnabled("EditPaymentDetails","IsAllowEditPaymentDayForNonDefaultAccount").done(function(a){a&&void 0!=e.get("methodOfPaymentData")&&"2"===e.get("methodOfPaymentData")&&e.get("defaultAccount")==o.yes&&(null!=e.get("bankName")&&""!=e.get("bankName")||null!=e.get("bankAccountType")&&0!=e.get("bankAccountType")||""!=e.get("accountNumber")||void 0!=e.get("branchName")&&""!=e.get("branchName")||""!=e.get("accountHolderId")||""!=e.get("accountHolderName"))&&(t=o.checkErrors(e))}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)}),e.get("debitOrderDay")&&e.get("debitOrderDay")&&""!==$.trim(e.get("debitOrderDay"))?t:(t=kl.value(this.localGeneral+"errorMessage12"),a+t)},checkErrors:function(e){var t="",a="";if(a=kl.value(this.localGeneral+"customValiudationErrorMsg")+"<br />",this.validators.accountHolderNameValidator.errors&&this.validators.accountHolderNameValidator.errors.length>0)return a+this.validators.accountHolderNameValidator.errors;if(6!=customerInfo.customerClass&&this.validators.accountHolderIdValidator.errors&&this.validators.accountHolderIdValidator.errors.length>0)return a+this.validators.accountHolderIdValidator.errors;if(-1===e.get("accountNumber").trim().indexOf("*")&&this.validators.accountNumberValidator.errors&&this.validators.accountNumberValidator.errors.length>0)return this.validators.accountNumberValidator.errors.length>0?a+this.validators.accountNumberValidator.errors[0]:a+this.validators.accountNumberValidator.errors;if(!e.get("bankAccountType"))return t=kl.value(this.localGeneral+"errorMessage8"),a+t;if(!e.get("accountNumber")||""===$.trim(e.get("accountNumber")))return t=kl.value(this.localGeneral+"errorMessage1"),a+t;if(!e.get("bankName")||""===$.trim(e.get("bankName")))return t=kl.value(this.localGeneral+"errorMessage2"),a+t;if(!e.get("branchName")||""===$.trim(e.get("branchName")))return t=kl.value(this.localGeneral+"errorMessage3"),a+t;if(!e.get("accountHolderName")||""===$.trim(e.get("accountHolderName")))return t=kl.value(this.localGeneral+"errorMessage4"),a+t;if(6!=customerInfo.customerClass){if(!(e.get("accountHolderId")&&""!==$.trim(e.get("accountHolderId")))&&this.isIdentificationNumberMandatory)return t=kl.value(this.localGeneral+"errorMessage6"),a+t}return t},updateFinanceAccount:function(){this.getNewProcessID(),this.showBlockingBusyIndicator();var e=Komodo.Models.UpdateFinancialAccount.create(),t=this.setAccountDataToUpdate(),a=Komodo.canonicalFacadeFactory(e,["Country","Account"]);a.set("Country",this.loggedInCountryId),a.set("Account",t),this.publishRequestOnBus(e,"UpdateFinancialAccount","v2")},getNewProcessID:function(){this.startNewProcess()},showBlockingBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,18e5,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},setAccountDataToUpdate:function(){var e=Komodo.Models.Account.create(),t=Komodo.canonicalFacadeFactory(e,["UID","Type","PaymentDetail"]);t.set("UID",this.get("accountno"));var a=this.get("editPaymentDetailsModel"),o=Komodo.Models.PaymentDetail.create();if(t.set("Type",a.get("accountType")),"2"==a.get("methodOfPaymentData")?o.set("MethodOfPayment",this.get("cashMOP").key):o.set("MethodOfPayment",a.get("bankAccountType")),a.get("accountNumber"))if(a.get("accountNumber").trim().indexOf("*")>-1)o.set("AccountNumber",this.get("existingAccountNumber"));else{o.set("AccountNumber",a.get("accountNumber").trim()),this.set("existingAccountNumber",a.get("accountNumber").trim());var n=Komodo.UI.MaskInputs.maskValues("*",Komodo.MaskType.typeAccount,a.get("accountNumber"),Komodo.MaskCharacter.accountNumber);a.set("accountNumber",n)}else o.set("AccountNumber","");if(a.get("bankName")){var s=this.get("banks").filter(function(e){return e.CanonicalKey.toUpperCase()===a.get("bankName").toUpperCase()});s&&s.length>0&&o.set("BankName",s[0].CanonicalKey)}else o.set("BankName","");o.set("BranchCode",void 0==a.get("branchCode")?"":a.get("branchCode")),o.set("BranchName",void 0==a.get("branchCode")?"":a.get("branchCode")),o.set("PayerName",a.get("accountHolderName")),o.set("PayerIDNumber",a.get("accountHolderId")),o.set("BankAccountType",void 0==a.get("bankAccountType")?"":a.get("bankAccountType"));for(var r=a.get("bankAccountTypes"),i=0;i<r.length;i++)r[i].key===a.get("bankAccountType")&&o.set("BankAccountType",r[i].value);a.get("debitOrderDay")&&""!==a.get("debitOrderDay")&&o.set("DebitOrderDay",a.get("debitOrderDay")),t.set("PaymentDetail",o);for(var l=this.getSelectedAccount(),c=0;c<l.ListOfAgreement.Agreement.length;c++)for(var u=0;u<l.ListOfAgreement.Agreement[c].ListOfHardware.Hardware.length;u++)for(var d=0;d<l.ListOfAgreement.Agreement[c].ListOfHardware.Hardware[u].ListOfService.Service.length;d++){var h=Komodo.Models.Service.create(),m=l.ListOfAgreement.Agreement[c].ListOfHardware.Hardware[u].ListOfService.Service[d];h.set("UID",m.UID),h.set("Status",m.Status);var p=Komodo.Models.ProductDetail.create();p.set("UID",m.ProductDetail.UID),p.set("Type",m.ProductDetail.Type),p.set("Name",m.ProductDetail.Name),p.set("Model",m.ProductDetail.Model),p.set("Manufacturer",m.ProductDetail.Manufacturer),p.set("Description",m.ProductDetail.Description),p.set("Price",m.ProductDetail.Price),p.set("ProductFeatures",m.ProductDetail.ProductFeatures),h.set("ProductDetail",p),l.ListOfAgreement.Agreement[c].ListOfHardware.Hardware[u].ListOfService.Service[d]=h}return e},getSelectedAccount:function(){var e=this.get("accountno"),t=Komodo.Application.ManageAccountUtility.isAnyAccountExist();if(!Ember.isEmpty(t)&&!Ember.isEmpty(e)&&t.length>0&&0!=e){return helperFunction.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account).filter(function(t){return t.UID.toUpperCase()===e.toUpperCase()})[0]}return null},cancelEdit:function(){var e=this.get("accountno"),t=Komodo.Application.ManageAccountUtility.isAnyAccountExist();if(t&&t.length>0){var a=helperFunction.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account),o=a.filter(function(t){return t.UID===e});if(o.length&&o.length>0){var n=this.get("editPaymentDetailsModel"),s=!1;if(void 0!=n.get("bankAccountTypes")){for(var r=n.get("bankAccountTypes"),i=0;i<r.length;i++)r[i].value.toUpperCase()===o[0].PaymentDetail.BankAccountType.toUpperCase()&&(n.set("bankAccountType",r[i].key),s=!0);0==s&&n.set("bankAccountType",0)}n.set("accountHolderName",o[0].PaymentDetail.PayerName),n.set("accountHolderId",o[0].PaymentDetail.PayerIDNumber),n.set("acccountId",e);var l=Komodo.UI.MaskInputs.maskValues("*",Komodo.MaskType.typeAccount,o[0].PaymentDetail.AccountNumber,Komodo.MaskCharacter.accountNumber);if(this.set("existingAccountNumber",o[0].PaymentDetail.AccountNumber),n.set("accountNumber",l),o[0].PaymentDetail.BankName){var c=this.get("banks").filter(function(e){return e.CanonicalKey.toUpperCase()===o[0].PaymentDetail.BankName.toUpperCase()});c&&c.length>0&&n.set("bankName",c[0].CanonicalKey)}if(o[0].PaymentDetail.BranchCode){var u=this.get("bankBranches").filter(function(e){return e.BranchCode.toUpperCase()===o[0].PaymentDetail.BranchCode.toUpperCase()});u.length&&u.length>0?(n.set("branchName",u[0].CanonicalKey),n.set("branchCode",u[0].BranchCode)):(n.set("branchName",""),n.set("branchCode",""))}if(o[0].PaymentDetail.MethodOfPayment){this.get("cashMOP")&&"Cash"!=n.get("methodOfPayments")[0].value&&n.get("methodOfPayments").insertAt(0,this.get("cashMOP"));var d=n.get("methodOfPayments").filter(function(e){return e.key.toUpperCase()===o[0].PaymentDetail.MethodOfPayment.toUpperCase()});d.length&&d.length>0&&"1"!=d[0].key&&("Cash"!=d[0].value&&"Cash"!=n.get("methodOfPayments")[0].value||n.get("methodOfPayments").removeObject(n.get("methodOfPayments")[0]),n.set("methodOfPayment",d[0].key)),"1"===o[0].PaymentDetail.MethodOfPayment?n.set("methodOfPaymentData","2"):"7"===o[0].PaymentDetail.MethodOfPayment?n.set("methodOfPaymentData","3"):n.set("methodOfPaymentData","1")}if(o[0].PaymentDetail.DebitOrderDay){var h=this.get("debitOrderDays").filter(function(e){return e.key.toUpperCase()===o[0].PaymentDetail.DebitOrderDay.toUpperCase()});h.length&&h.length>0&&("6"==customerInfo.customerClass?n.set("debitOrderDay","29"):n.set("debitOrderDay",h[0].key))}o[0].PaymentDetail.PayerIDNumber==("1"==customerInfo.customerClass||"4"==customerInfo.customerClass||"6"==customerInfo.customerClass||"9"==customerInfo.customerClass?this.get("companyRegistrationNumber"):this.get("customerID"))?(n.set("customerAccountHolder",!0),this.set("isAccHolderNameAndIdEnabled",!0)):"7"===o[0].PaymentDetail.MethodOfPayment?this.set("isAccHolderNameAndIdEnabled",!0):(n.set("customerAccountHolder",!1),this.set("isAccHolderNameAndIdEnabled",!1)),this.set("editPaymentDetailsModel",n)}void 0!=this.editPaymentDetailsModel.acccountId&&this.boxOfficeButtons()}this.checkPermissionsToUploadThirdPartyDocs(),this.disableBankingDetails(),this.removeDependentProperty("accountNumberValidator",[Komodo.UI.Validators.RequiredValidator]),this.deregisterValidator(this.get("editPaymentDetailsModel"),"accountNumber",{type:"number",isRequired:!0,functions:Komodo.UI.Validators.numericValidator,minLength:5,maxLength:34,displayName:kl.value("locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.accountNumber")})},messageFinancialAccountUpdatedReceived:function(e){var t=this,a=t.get("editPaymentDetailsModel");t.hideBusyIndicator();var o=e.ResponseMessage.Payload.Account.UID;Komodo.Controls.MessageBoxController.show(kl.value(t.localGeneral+"successful"),kl.value(t.localGeneral+"successfulMsg"),Komodo.Controls.MessageBoxOkButton,t,"id5446676","success").response=function(e){if("ok"==e){if(!isCustomerAvailable)return void Komodo.Controls.MessageBoxController.show(kl.value(t.localGeneral+"moduleTitle"),kl.value(t.localGeneral+"customerNotFound"));var n=helperFunction.getCustomerIdToRetrieveData();Komodo.Application.ManageAccountSharedObjectController.create().retrieveFinancialAccountsSync(n);var s=Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account.findBy("UID",o);void 0!=s&&"7"==s.PaymentDetail.MethodOfPayment&&(a.set("methodOfPaymentData","3"),t.bindPaymentDetail(o,!0)),t.publishCreateActivity(o,n)}}},publishCreateActivity:function(e,t,a){var o=this;Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(n){var s=Komodo.Models.CreateInteraction.create(),r=Komodo.Models.Case.create();void 0==a&&(a=kl.value(o.localEditPaymeDetail+"successMessage")+e),r.set("InteracteeName",Komodo.Services.securityService.session.domainUserName),r.set("InteractionLocation",n.data.countryDescription),r.set("InteractionMedium","1"),r.set("CustomerUID",t),r.set("Notes",a),r.set("Category",3),r.set("SubCategory",13),r.set("Outcome",52),r.set("Status","1");var i=Komodo.canonicalFacadeFactory(s,["Country","Case"]);i.set("Country",o.get("loggedInCountryId")),i.set("Case",r),o.publishRequestOnBus(s,"CreateInteraction","v1")})},publishRequestOnBus:function(e,t,a){var o=Komodo.Services.manageAccountService,n="Event Message for "+t+" ";o.publishEvent(this,e,t,a).done(function(){Komodo.log(n+" has been published successfully")}).fail(function(e,t){Komodo.log(n+" has been failed")})},messageFailureMessageEventReceived:function(e){var t=this;this.hideBusyIndicator();var a=e.ResponseMessage.Payload.OriginatedEventName,o=e.ResponseMessage.Payload.ListOfErrorDetails,n=this.isNullOrEmpty(o.ErrorType)?kl.value(this.localGeneral+"moduleTitle"):o.ErrorType;"SaveCustomerDocumentEvent"==a||"OverrideAHVStatus"==a?(this.set("editPaymentDetailsModel.supportingDocuments",Ember.A()),
Komodo.Controls.MessageBoxController.show(n,o.ErrorDescription,Komodo.Controls.MessageBoxOkButton,t,"id5446674","danger")):Komodo.Controls.MessageBoxController.show(n,o.ErrorDescription,Komodo.Controls.MessageBoxOkButton,t,"id5446674","danger")},customerIsAccountHolder:function(){var e=this;if(1==e.editPaymentDetailsModel.customerAccountHolder){e.get("editPaymentDetailsModel").set("accountHolderName",(e.get("customerName")+"").trim());var t=e.get("companyRegistrationNumber");"11"!==e.get("editPaymentDetailsModel.accountType")&&"14"!==e.get("editPaymentDetailsModel.accountType")||(t=t.replace(/\//g,"").replace(/\\/g,"")),void 0!==t&&null!==t||(t=e.get("customerID")),e.get("editPaymentDetailsModel").set("accountHolderId",t),e.set("isAccHolderNameAndIdEnabled",!0)}else e.get("editPaymentDetailsModel").set("accountHolderName",e.get("payerAccountHolderName")),e.get("editPaymentDetailsModel").set("accountHolderId",e.get("payerAccountHolderId")),e.set("isAccHolderNameAndIdEnabled",!1)},getQueryService:function(){return this.get("_queryService")},bindPaymentDetail:function(e,t){var a=this,o=e||a.getSelectedBankAccountId(),n=a.get("accountNumberWithDescription"),s=a.get("editPaymentDetailsModel");if(s.get("methodOfPayments")&&s.get("methodOfPayments").length>0&&a.get("debitOrderDays")&&a.get("debitOrderDays").length>0&&a.get("banks")&&a.get("banks").length>0&&a.get("accountTypes").length>0){a.set("accountno",o);var r=Komodo.Application.ManageAccountUtility.isAnyAccountExist();if(r&&r.length>0){var i=helperFunction.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account),l=a,c=i.filter(function(e){var t=l.get("accountno");return e.UID===t});if(c.length&&c.length>0){var u=l.get("accountTypes").filter(function(e){return e.CanonicalKey.toUpperCase()===c[0].Type.toUpperCase()});u&&0!==u.length?(null!=u[0].AccountTypeDescription&&void 0!=u[0].AccountTypeDescription&&""!=u[0].AccountTypeDescription?s.set("accountDescription",u[0].AccountTypeDescription):s.set("accountDescription","-"),s.set("accountType",u[0].CanonicalKey)):s.set("accountDescription","-"),s.set("defaultAccount",1==c[0].IsDefault?a.yes:a.no),s.set("accountHolderName",c[0].PaymentDetail.PayerName),s.set("accountHolderId",c[0].PaymentDetail.PayerIDNumber),a.set("payerAccountHolderName",s.get("accountHolderName")),a.set("payerAccountHolderId",s.get("accountHolderId")),s.set("acccountId",o),t||s.set("selectedAcccountId",n);var d=Komodo.UI.MaskInputs.maskValues("*",Komodo.MaskType.typeAccount,c[0].PaymentDetail.AccountNumber,Komodo.MaskCharacter.accountNumber);a.set("existingAccountNumber",c[0].PaymentDetail.AccountNumber),s.set("accountNumber",d),a.get("cashMOP")&&"Cash"!=s.get("methodOfPayments")[0].value&&s.get("methodOfPayments").insertAt(0,a.get("cashMOP")),"-"===this.get("customerID")&&this.set("customerID",""),"-"===this.get("companyRegistrationNumber")&&this.set("companyRegistrationNumber",""),c[0].PaymentDetail.PayerIDNumber==("1"==customerInfo.customerClass||"4"==customerInfo.customerClass||"6"==customerInfo.customerClass||"9"==customerInfo.customerClass?this.get("companyRegistrationNumber"):this.get("customerID"))&&c[0].PaymentDetail.PayerName.toLowerCase()===this.get("customerName").toLowerCase()?(s.set("customerAccountHolder",!0),a.set("isAccHolderNameAndIdEnabled",!0)):(s.set("customerAccountHolder",!1),a.set("isAccHolderNameAndIdEnabled",!1)),"1"===c[0].PaymentDetail.MethodOfPayment?(s.set("methodOfPaymentData","2"),a.setDefaultControl(),!1===a.get("isDebitOrderAllowed")&&a.set("isDisbaleMethodOfPayment",!0)):"7"===c[0].PaymentDetail.MethodOfPayment?(s.set("methodOfPaymentData","3"),1!=c[0].IsDefault&&"Payment Plan"!=s.get("accountDescription")||a.editPaymentDetailsModel.set("ahvPending",!0),a.setReadOnlyControlInAHVPending()):"6"===c[0].PaymentDetail.MethodOfPayment?(s.set("methodOfPaymentData","4"),s.set("hideDebitOrderControls",!1),a.setDefaultControl(),a.set("isDisbaleMethodOfPayment",!0)):(s.set("methodOfPaymentData","1"),s.set("hideDebitOrderControls",!0),a.setDefaultControl(),!1===a.get("isDebitOrderAllowed")&&a.set("isDisbaleMethodOfPayment",!0));var h=!1;if(void 0!=s.get("bankAccountTypes")){for(var m=s.get("bankAccountTypes"),p=0;p<m.length;p++)m[p].value.toUpperCase()===c[0].PaymentDetail.BankAccountType.toUpperCase()&&(s.set("bankAccountType",m[p].key),h=!0);0==h&&s.set("bankAccountType",0)}Komodo.Services.featureToggleService.isEnabled("EditPaymentDetails","RemovePaymentDay1").done(function(e){e&&"1"!=c[0].PaymentDetail.DebitOrderDay&&"2"==customerInfo.customerClass&&a.get("debitOrderDays").removeObject(a.get("debitOrderDays").findBy("key","1"));var t=a.get("debitOrderDays").filter(function(e){return e.key.toUpperCase()===c[0].PaymentDetail.DebitOrderDay.toUpperCase()});t.length&&t.length>0&&s.set("debitOrderDay",t[0].key),c[0].PaymentDetail.BankName?(s.set("bankName",c[0].PaymentDetail.BankName),a.bankNameChanged()):(s.set("bankName",""),s.set("branchName","")),a.setSmartCardsOfAnAccount();var o=l.get("accountTypes").filter(function(e){return e.CanonicalKey.toUpperCase()===c[0].Type.toUpperCase()});0==c[0].IsDefault?(s.set("defaultAccount",a.no),a.editPaymentDetailsModel.set("isCancelButtonDisabled",!1),Komodo.Services.securityService.hasPermission("clarity://system/supervisor")?"Holiday Home"==o||"13"==c[0].Type?(a.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!1),a.set("isDisbaleMethodOfPayment",!0),a.editPaymentDetailsModel.set("isCancelButtonDisabled",!1)):"9"==c[0].Type?(a.setReadOnlyControlForBoxOffice(),a.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!1),a.editPaymentDetailsModel.set("isCancelButtonDisabled",!1)):("2"==customerInfo.customerClass||"3"==customerInfo.customerClass)&&o.length>0&&"DStv Residential"==o[0].AccountTypeDescription&&(a.set("isDisbaleMethodOfPayment",!1),a.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!1),a.editPaymentDetailsModel.set("isCancelButtonDisabled",!1)):a.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!0)):1==c[0].IsDefault&&(s.set("defaultAccount",a.yes),a.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!1),a.editPaymentDetailsModel.set("isCancelButtonDisabled",!1)),a.set("editPaymentDetailsModel",s)}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)}),a.isAllowPaymentDayEditable(c)}a.editPaymentDetailsModel.set("isSaveButtonDisabled",!0),2!=customerInfo.customerClass&&3!=customerInfo.customerClass||a.enableBankDetails()}}},setReadOnlyControlForBoxOffice:function(){this.set("isDisbaleMethodOfPayment",!0),this.set("isDisbaleBankName",!0),this.set("isDisbaleAccountType",!0),this.set("isDisbaleAccountNumber",!0),this.set("isDisbaleBranchName",!0),this.set("isAccHolderNameAndIdEnabled",!0),this.set("isDisbaleIsCustomerAccountHolder",!0),this.set("isEnableShowOverrideAHVPanel",!1)},setReadOnlyControlInAHVPending:function(){this.set("isDisbaleMethodOfPayment",!0),this.set("isDisbaleBankName",!0),this.set("isDisbaleAccountType",!0),this.set("isDisbaleAccountNumber",!0),this.set("isDisbaleBranchName",!0),this.set("isAccHolderNameAndIdEnabled",!0),this.set("isDisbaleIsCustomerAccountHolder",!0)},setDefaultControl:function(){this.set("isDisbaleMethodOfPayment",!1),this.set("isDisbaleBankName",!0),this.set("isDisbaleAccountType",!0),this.set("isDisbaleAccountNumber",!0),this.set("isDisbaleBranchName",!0),this.set("isDisbaleIsCustomerAccountHolder",!0),this.set("isEnableShowOverrideAHVPanel",!1),this.editPaymentDetailsModel.set("isSaveButtonDisabled",!0),this.editPaymentDetailsModel.set("isCancelButtonDisabled",!1)},setSmartCardsOfAnAccount:function(){var e=this.getSelectedAccount();if(this.set("smartcards",Komodo.Application.ManageAccountUtility.getSmartCardsOrDeviceOfAnAccount(e)),0===this.get("smartcards").length){var t=this.get("smartcards");t.addObject("-"),this.set("smartcards",t)}},getSelectedBankAccountId:function(){return this.get("accountno")?this.get("accountno"):this.get("allAccounts")&&this.get("allAccounts").length>0?(this.set("accountno",this.seperateAndGetAccountNumberFromDescription(this.get("allAccounts")[0])),this.set("accountNumberWithDescription",this.get("allAccounts")[0]),this.get("accountno")):this.set("accountno",0)},seperateAndGetAccountNumberFromDescription:function(e){if(null!=e&&void 0!=e&&""!=e){var t=e.split(" - ");null!=t&&void 0!=t&&t.length>0?(this.set("accountno",t[0]),this.set("accountNumberWithDescription",e)):(this.set("accountno",t),this.set("accountNumberWithDescription",t))}else this.get("accountno")||this.set("accountno",0),this.set("accountNumberWithDescription","");return this.get("accountno")},createDependentProperty:function(e,t){var a=this;t.forEach(function(t){void 0!==a.get("validators."+e)&&(a.get("validators."+e).functions.addObject(t),a.get("validators."+e).validate())})},removeDependentProperty:function(e){var t=this;void 0!==t.get("validators."+e)&&(t.get("validators."+e).functions.clear(),t.get("validators."+e).validate())},setReadOnlyControlEmployeePayroll:function(){this.set("isDisbaleMethodOfPayment",!0),this.set("isDisbaleBankName",!0),this.set("isDisbaleAccountType",!0),this.set("isDisbaleAccountNumber",!0),this.set("isDisbaleBranchName",!0),this.set("isAccHolderNameAndIdEnabled",!0),this.set("isDisbaleIsCustomerAccountHolder",!0)},setEnableControlEmployeePayroll:function(){this.set("isDisbaleMethodOfPayment",!1),this.set("isDisbaleBankName",!1),this.set("isDisbaleAccountType",!1),this.set("isDisbaleAccountNumber",!1),this.set("isDisbaleBranchName",!1),this.set("isAccHolderNameAndIdEnabled",!1),this.set("isDisbaleIsCustomerAccountHolder",!1)},setRunTimeMOP:function(e){if(e.length>0){var t=this,a=t.get("editPaymentDetailsModel"),o=a.radioButtonMethodofPayment.find(function(e){return"AHV Pending"===e.title}),n=a.radioButtonMethodofPayment.find(function(e){return"Payroll"===e.title});void 0!=n&&void 0!=o&&(a.radioButtonMethodofPayment.removeAt(2),a.radioButtonMethodofPayment.removeAt(2)),"7"===e[0].PaymentDetail.MethodOfPayment?(3==a.radioButtonMethodofPayment.length&&void 0!=n&&a.radioButtonMethodofPayment.removeAt(2),void 0==o&&a.radioButtonMethodofPayment.pushObject(Ember.Object.create({title:"AHV Pending",value:"3"}))):"6"===e[0].PaymentDetail.MethodOfPayment?(3==a.radioButtonMethodofPayment.length&&void 0!=o&&a.radioButtonMethodofPayment.removeAt(2),void 0==n&&a.radioButtonMethodofPayment.pushObject(Ember.Object.create({title:"Payroll",value:"4"}))):(e[0].PaymentDetail.MethodOfPayment,3==a.radioButtonMethodofPayment.length&&void 0!=n?a.radioButtonMethodofPayment.removeAt(2):3==a.radioButtonMethodofPayment.length&&void 0!=o&&a.radioButtonMethodofPayment.removeAt(2))}},setEmployeePayRoll:function(e){var t=this,a=t.get("editPaymentDetailsModel"),o=(t.get("debitOrderDays").filter(function(t){return t.key.toUpperCase()===e[0].PaymentDetail.DebitOrderDay.toUpperCase()}),KomodoEmployeePaymentConfiguration.CustomerClass);Komodo.Services.featureToggleService.isEnabled("EditPaymentDetails","IsAllowEmployeePayroll").done(function(e){if(e)for(var n=0;n<o.length;n++)if(customerInfo.customerClass==o[n].CanonicalKey||customerInfo.customerClassText==o[n].CanonicalValue)for(var s=0;s<o[n].CustomerTypeConfiguration.CustomerType.length;s++)if(customerInfo.typeId==o[n].CustomerTypeConfiguration.CustomerType[s].CanonicalKey||customerInfo.type==o[n].CustomerTypeConfiguration.CustomerType[s].CanonicalValue)for(var r=0;r<o[n].CustomerTypeConfiguration.CustomerType[s].EmployeeType.length;r++)customerInfo.locationIndicatorText!=o[n].CustomerTypeConfiguration.CustomerType[s].EmployeeType[r].CanonicalValue&&customerInfo.locationIndicator!=o[n].CustomerTypeConfiguration.CustomerType[s].EmployeeType[r].CanonicalKey||(a.set("debitOrderDay",o[n].CustomerTypeConfiguration.CustomerType[s].SetToPaymentDay),a.set("isDisbaleInvoiceDay",o[n].CustomerTypeConfiguration.CustomerType[s].SetPaymentDayReadOnly),t.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!0),t.setReadOnlyControlEmployeePayroll(),t.editPaymentDetailsModel.set("isSaveButtonDisabled",!0),a.set("isSaveButtonDisabled",!0),a.set("isSaveButtonDisabled",!0))}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)})},isAllowPaymentDayEditable:function(e){var t=this,a=t.get("editPaymentDetailsModel");Komodo.Services.featureToggleService.isEnabled("EditPaymentDetails","IsAllowEditPaymentDayForNonDefaultAccount").done(function(o){var n=t.get("accountTypes").filter(function(t){return t.CanonicalKey.toUpperCase()===e[0].Type.toUpperCase()});o?(0==e[0].IsDefault?(a.set("defaultAccount",t.no),t.editPaymentDetailsModel.set("isCancelButtonDisabled",!1),Komodo.Services.securityService.hasPermission("clarity://editPaymentDetails/canUpdatePaymentDay")?t.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!1):t.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!0),"Holiday Home"==n||"13"==e[0].Type?(t.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!1),t.set("isDisbaleMethodOfPayment",!0),t.editPaymentDetailsModel.set("isCancelButtonDisabled",!0)):"9"===e[0].Type?(t.setReadOnlyControlForBoxOffice(),t.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!0),t.editPaymentDetailsModel.set("isCancelButtonDisabled",!0),"7"===e[0].PaymentDetail.MethodOfPayment&&t.set("isAccHolderNameAndIdEnabled",!0)):"2"!=customerInfo.customerClass&&"3"!=customerInfo.customerClass||n.length>0&&("DStv Residential"==n[0].AccountTypeDescription?t.set("isDisbaleMethodOfPayment",!0):"Payment Plan"==n[0].AccountTypeDescription&&(t.set("isDisbaleMethodOfPayment",!0),t.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!0)))):1==e[0].IsDefault&&(a.set("defaultAccount",t.yes),t.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!1),t.editPaymentDetailsModel.set("isCancelButtonDisabled",!1)),t.checkIpDayForUsers()):(0==e[0].IsDefault?(a.set("defaultAccount",t.no),t.editPaymentDetailsModel.set("isCancelButtonDisabled",!1),Komodo.Services.securityService.hasPermission("clarity://system/supervisor")?"Holiday Home"==n||"13"==e[0].Type?(t.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!1),t.set("isDisbaleMethodOfPayment",!0),t.editPaymentDetailsModel.set("isCancelButtonDisabled",!1)):"9"==e[0].Type?(t.setReadOnlyControlForBoxOffice(),t.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!1),t.editPaymentDetailsModel.set("isCancelButtonDisabled",!1)):("2"==customerInfo.customerClass||"3"==customerInfo.customerClass)&&n.length>0&&"DStv Residential"==n[0].AccountTypeDescription&&(t.set("isDisbaleMethodOfPayment",!1),t.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!1),t.editPaymentDetailsModel.set("isCancelButtonDisabled",!1)):t.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!0)):1==e[0].IsDefault&&(a.set("defaultAccount",t.yes),t.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!1),t.editPaymentDetailsModel.set("isCancelButtonDisabled",!1)),"Agent"!=customerInfo.customerTypeText&&"Super Dealer"!=customerInfo.customerTypeText&&"MPOS"!=customerInfo.customerTypeText||6!=customerInfo.customerClass||(t.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!0),"2"==t.editPaymentDetailsModel.get("methodOfPaymentData")&&(t.set("isDisbaleMethodOfPayment",!0),t.editPaymentDetailsModel.set("isSaveButtonDisabled",!0))),t.disableIPDayForZambiaforDebitOrder())}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)})},checkIpDayForUsers:function(){var e=this;"Employee-MultiChoice"==customerInfo.customerTypeText&&35==customerInfo.typeId&&e.editPaymentDetailsModel.set("isDisbaleInvoiceDay",!0),("Employee Related"==customerInfo.customerTypeText&&39==customerInfo.typeId||"Employee-MultiChoice"==customerInfo.customerTypeText&&35==customerInfo.typeId||"Employee-3rd Party"==customerInfo.customerTypeText&&36==customerInfo.typeId||"Employee-M24/Naspers"==customerInfo.customerTypeText&&37==customerInfo.typeId)&&("1"==e.editPaymentDetailsModel.get("methodOfPaymentData")?e.set("isDisbaleMethodOfPayment",!0):e.set("isDisbaleMethodOfPayment",!1))},getSelectedCountryName:function(){var e=this;Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(t){e.set("loggedInCountryName",t.data.countryDescription)})},setDocumentTypes:function(){var e=this.get("editPaymentDetailsModel"),t=this;Komodo.Services.cachedDataService.fetch("DocumentType").done(function(a){e.set("documentTypes",a),t.set("documentTypes",a)}).fail(function(){Komodo.log("[ERROR] : could not retrieve Document Type from CDM")})},showOverrideAHVPanel:function(){return(this.get("canSeeOverrideAHVControls")||this.get("isReadOnlyOverrideAHVControls"))&&1==this.get("editPaymentDetailsModel.ahvPending")||1==this.get("isEnableShowOverrideAHVPanel")?"display:block;":"display:none;"}.property("editPaymentDetailsModel.ahvPending","canSeeOverrideAHVControls","isReadOnlyOverrideAHVControls","isEnableShowOverrideAHVPanel"),isDisableOverrideAHVControl:function(){return this.get("isDisableAHVOverride")}.property("isDisableAHVOverride"),onShowThirdPartyDocsChanged:function(){var e=1==this.get("editPaymentDetailsModel.hideDebitOrderControls");e=e&&!this.get("editPaymentDetailsModel.customerAccountHolder"),e=e&&!this.get("editPaymentDetailsModel.ahvPending"),this.set("isShowThirdPartyDocs",e)}.observes("editPaymentDetailsModel.customerAccountHolder","editPaymentDetailsModel.hideDebitOrderControls","editPaymentDetailsModel.ahvPending"),showThirdPartyDocsPanel:function(){return this.get("isShowThirdPartyDocs")?"display:block;":"display:none;"}.property("isShowThirdPartyDocs"),onThirdPartyDocsDisplayed:function(){if(this.checkPermissionsToUploadThirdPartyDocs(),1==this.get("isShowThirdPartyDocs")&&0==this.isThirdPartyDocsRetrived){var e=this.get("customerNumber");this.getThirdPartyDocuments(e)}}.observes("isShowThirdPartyDocs"),isUploadThirdPartyDocumentDisabled:function(){for(var e=0;e<this.thirdPartyDocuments.length;e++)if("QUEUED"===this.thirdPartyDocuments[e].get("uploadStatus"))return!1;return!0}.property("thirdPartyDocuments.length","thirdPartyDocuments.@each.uploadStatus"),isAllPaymentDetailsFieldsEmpty:function(){return Komodo.UI.propertyHelpers.isNullOrEmpty(this.get("editPaymentDetailsModel.bankName"))&&(Komodo.UI.propertyHelpers.isNullOrEmpty(this.get("editPaymentDetailsModel.bankAccountType"))||0==this.get("editPaymentDetailsModel.bankAccountType"))&&Komodo.UI.propertyHelpers.isNullOrEmpty(this.get("editPaymentDetailsModel.accountNumber"))&&Komodo.UI.propertyHelpers.isNullOrEmpty(this.get("editPaymentDetailsModel.branchName"))&&Komodo.UI.propertyHelpers.isNullOrEmpty(this.get("editPaymentDetailsModel.accountHolderId"))&&Komodo.UI.propertyHelpers.isNullOrEmpty(this.get("editPaymentDetailsModel.accountHolderName"))},uploadedDocStatus:["DONE","UPLOADED"],checkIfThirdPartyDocumentsUploaded:function(){if(!this.get("isShowThirdPartyDocs"))return!0;if("2"==this.get("editPaymentDetailsModel.methodOfPaymentData")&&this.isAllPaymentDetailsFieldsEmpty())return!0;for(var e=this,t=Ember.A(),a=0;a<this.thirdPartyDocuments.length;a++){var o=this.thirdPartyDocuments[a];this.uploadedDocStatus.contains(o.get("uploadStatus"))&&t.addObject(o)}for(var n=["5","20","26"],a=0;a<t.length;a++){var o=t[a];if(n.length<=0)break;for(var s=0;s<n.length;s++)if(o.get("documentType")===n[s]){n.removeObject(n[s]);break}}if(n.length>0){var r=this.getDocumentTypeNamesByIds(n);return Komodo.Controls.MessageBoxController.show(kl.value(e.localGeneral+"moduleTitle"),kl.value(e.localEditPaymeDetail+"requiredThirdPartyDocuments")+"<br/>"+r.join(",<br/> ")+".",null,e,"id5446675","warning"),!1}return!0},getDocumentTypeNamesByIds:function(e){for(var t=Ember.A(),a=0;a<e.length;a++)t.addObject(this.getDocTypeNameById(e[a]));return t},getDocTypeNameById:function(e){for(var t=0;t<this.documentTypes.length;t++){var a=this.documentTypes[t];if(a.key===e)return a.value}},getDocTypeIdByName:function(e){if(Komodo.UI.propertyHelpers.isNullOrEmpty(e))return"-";for(var t=0;t<this.documentTypes.length;t++){var a=this.documentTypes[t];if(a.value.toUpperCase()===e.toUpperCase())return a.key}return"-"},mapPluploadFileToDoc:function(e,t){var a=Komodo.Models.SupportingDocumentModel.create();return a.set("documentName",e.name),a.set("documentSize",plupload.formatSize(e.size)),a.set("uploadPercentage",""),a.set("documentType",""),a.set("uploadStatus",t),a.set("documentAlreadyUploaded",!1),a},getUploadDocumentUrl:function(e){void 0==e&&(e="");var t=this.get("customerNumber"),a=this.get("accountno");return KomodoConfiguration.ibsApiUrl+this.get("loggedInCountryName")+"/UploadDownload/UploadAccountDocuments?customerNumber="+t+"&accountNumber="+a+"&documentType="+e+"&documentAlias="+this.thirdPartyDocPatternAlias},onThirdPartyDocStatusChange:function(e,t){for(var a=this.get("thirdPartyDocuments"),o=0;o<a.length;o++){var n=a[o];if(n.get("documentName")===e.name){n.set("uploadPercentage",e.percent+" %"),2===e.status?n.set("uploadStatus","UPLOADING"):4===e.status?(n.set("uploadStatus","FAILED"),n.set("uploadPercentage","0 %")):5===e.status&&(n.set("uploadStatus","DONE"),n.set("documentUrl",t));break}}},getDocumentPayload:function(e){var t=Komodo.Models.SaveDocument.create(),a=Komodo.canonicalFacadeFactory(t,["ListOfDocument"]),o=Ember.A(),n=this.get("customerNumber"),s=this,r=0,i=Ember.A();if(e.length>0){if($.each(e,function(e,t){if(1!=t.get("documentAlreadyUploaded"))if(r++,"DONE"==t.uploadStatus){var a=Komodo.Models.Document.create();a.set("FileType",t.get("documentType")),a.set("DocumentURL",t.get("documentUrl"));var l=[],c=s.getDocumentMetaData("CustomerId",n);l.pushObject(c);var u=s.getDocumentMetaData("DocumentSerial",n);l.pushObject(u);var d=s.getDocumentTypeValue(t.get("documentType")),h=s.getDocumentMetaData("DocumentType",d);t.set("documentTypeText",d),l.pushObject(h),t.set("documentAlreadyUploaded",!0),a.set("ListOfDocumentMetaData",l),o.pushObject(a)}else"FAILED"==t.uploadStatus&&i.addObject(t)}),i.length==r)return void Komodo.error("Document uploading failed.");o.length>0&&(t.set("Country",this.get("loggedInCountryId")),a.set("ListOfDocument",o),this.publishRequestOnBus(t,"SaveCustomerDocumentEvent","v2"))}this.isEnableShowOverrideAHVPanel&&this.editPaymentDetailsModel.set("isSaveButtonDisabled",!0)},getDocumentMetaData:function(e,t){var a=Komodo.Models.DocumentMetaData.create();return a.set("DocumentMetaDataValueUri",e),a.set("Value",t),a},getMetadataValueByKey:function(e,t){$.isArray(e)||(e=$.makeArray(e));for(var a=0;a<e.length;a++){var o=Ember.get(e[a],"DocumentMetaDataValueURI");if(!Komodo.UI.propertyHelpers.isNullOrEmpty(o)&&t.toUpperCase()===o.toUpperCase())return Ember.get(e[a],"Value")}return null},isDocumentNameExists:function(e,t){for(var a=0;a<e.length;a++){if(e[a].get("documentName")===t)return!0}return!1},getThirdPartyDocuments:function(e){this.isThirdPartyDocsRetrived=!0;var t=this;Komodo.Services.queryService.getJSON("ConfigurationQuery?customerID="+e).done(function(e){this.isThirdPartyDocsRetrived=!1,t.bindThirdPartyDocuments(e)}).error(function(e){this.isThirdPartyDocsRetrived=!1;var t=JSON.stringify(e);Komodo.log("retrieve getThirdPartyDocuments ajax call failed. Error: "+t)})},bindThirdPartyDocuments:function(e){var t=this.get("accountno"),a=customerInfo.customerNo;if(this.thirdPartyDocuments.clear(),null!=e.DocumentPayload){var o=this.thirdPartyDocPatternAlias+t+"_"+a+"_",n=this.getDocumentModelByPayload(e.DocumentPayload,o);this.set("thirdPartyDocuments",n)}},getDocumentModelByPayload:function(e,t){for(var a=Ember.A(),o=0;o<e.length;o++){var n=e[o],s=Komodo.Models.SupportingDocumentModel.create(),r=n.DocumentURL,i=r.split("/"),l=i[i.length-1];if(0==l.search(t)){var c=l.replace(t,"");s.set("documentName",c),s.set("documentUrl",r),s.set("documentSize","-"),s.set("uploadPercentage","-"),s.set("uploadStatus","UPLOADED"),s.set("documentAlreadyUploaded",!0);var u=this.getMetadataValueByKey(n.ListOfDocumentMetaData,"DocumentType");s.set("documentType",this.getDocTypeIdByName(u)),s.set("documentTypeText",u),a.addObject(s)}}return a},setThirdPartyPaymentDocumentDefaults:function(){this.set("thirdPartyDocuments",Ember.A()),this.isThirdPartyDocsRetrived=!1},propToCheckBankDetails:["accountHolderName","bankName","accountNumber","branchCode","accountHolderId","bankAccountType","branchName"],isBankingDetailsAvailable:!1,onBankingDetailsChanged:function(){void 0!=this.get("editPaymentDetailsModel")&&(this.set("isBankingDetailsAvailable",Komodo.UI.propertyHelpers.isAllFieldsEmpty(this.get("editPaymentDetailsModel"),this.propToCheckBankDetails)),Komodo.log(this.get("isBankingDetailsAvailable")))}.observes("editPaymentDetailsModel.accountHolderName","editPaymentDetailsModel.bankName","editPaymentDetailsModel.accountNumber","editPaymentDetailsModel.branchCode","editPaymentDetailsModel.accountHolderId","editPaymentDetailsModel.bankAccountType","editPaymentDetailsModel.branchName"),isNullOrEmpty:function(e){return void 0==e||null==e||""==e},isAHVCompliantBank:function(e){var t=[];Komodo.Services.cachedDataService.fetch("AHVSupportedBanks").done(function(e){$.each(e,function(e,a){t.addObject(a)})}).fail(function(){Komodo.log(kl.value("locale.manageAccount.editPaymentDetailsAfrica:paymentDetail.errNotRetrieveAHVBankDS"))});for(var a=!1,o=t.length,n=0;n<o;n++)if(t[n].key==e){a=!0;break}return a},compareBankDetailsIsChanged:function(){var e=this,t=e.getSelectedAccount();if(!Ember.isEmpty(t)){var a=null;switch(t.PaymentDetail.MethodOfPayment){case"1":a="2";break;case"7":a="3";break;default:a="1"}for(var o,n={accountHolderId:t.PaymentDetail.PayerIDNumber,accountHolderName:t.PaymentDetail.PayerName,bankName:t.PaymentDetail.BankName,bankAccountNumber:t.PaymentDetail.AccountNumber,branchCode:t.PaymentDetail.BranchCode,bankAccountType:t.PaymentDetail.BankAccountType,methodOfPaymentData:a},s=JSON.stringify(n),r=e.editPaymentDetailsModel.bankAccountTypes.length,i=0;i<r;i++)if(e.editPaymentDetailsModel.bankAccountTypes[i].key==e.editPaymentDetailsModel.bankAccountType){o=e.editPaymentDetailsModel.bankAccountTypes[i].value;break}var l={accountHolderId:e.editPaymentDetailsModel.accountHolderId,accountHolderName:e.editPaymentDetailsModel.accountHolderName,bankName:e.editPaymentDetailsModel.bankName,bankAccountNumber:e.editPaymentDetailsModel.accountNumber,branchCode:e.editPaymentDetailsModel.branchCode,bankAccountType:o,methodOfPaymentData:e.editPaymentDetailsModel.methodOfPaymentData},c=JSON.stringify(l),u=Ember.compare(s.toUpperCase(),c.toUpperCase());e.set("isBankDetailsChanged",0!=u),e.editPaymentDetailsModel.set("isSaveButtonDisabled",!e.isBankDetailsChanged),"-"==e.editPaymentDetailsModel.accountHolderId&&e.editPaymentDetailsModel.set("accountHolderId",""),e.checkBankIsAHV()}}.observes("editPaymentDetailsModel.accountHolderName","editPaymentDetailsModel.bankName","editPaymentDetailsModel.accountNumber","editPaymentDetailsModel.branchCode","editPaymentDetailsModel.accountHolderId","editPaymentDetailsModel.bankAccountType","editPaymentDetailsModel.methodOfPaymentData"),disableBankingDetails:function(){var e=this;e.set("isAccHolderNameAndIdEnabled",!0),e.set("isDisbaleIsCustomerAccountHolder",!0),e.set("isDisbaleBankName",!0),e.set("isDisbaleAccountNumber",!0),e.set("isbranchCodeEnabled",!0),e.set("isDisbaleAccountType",!0),e.set("isDisbaleBranchName",!0)},isShow:function(){return this.get("hideDebOrdControls")?"display:block;":"display:none;"}.property("hideDebOrdControls"),disableIPDayForZambiaforDebitOrder:function(){this.isDisableInvoiceDayBind&&1==this.get("editPaymentDetailsModel").get("methodOfPaymentData")?(this.set("editPaymentDetailsModel.isDisbaleInvoiceDay",!0),this.set("editPaymentDetailsModel.debitOrderDay","1")):this.isDisableInvoiceDayBind&&1!=this.get("editPaymentDetailsModel").get("methodOfPaymentData")&&(this.set("editPaymentDetailsModel.debitOrderDay",this.getSelectedAccount().PaymentDetail.DebitOrderDay.toString()),this.set("isDisbaleMethodOfPayment",!1),this.set("editPaymentDetailsModel.isDisbaleInvoiceDay",!1))},featureToggleEditPayment:function(){var e=this;e.get("editPaymentDetailsModel");Komodo.Services.featureToggleService.isEnabled("editPaymentDetails","isDisableInvoiceDay").done(function(t){t?e.set("isDisableInvoiceDayBind",!0):e.set("isDisableInvoiceDayBind",!1)}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)})},stop:function(){this.set("accountno",""),this.set("accountNumberWithDescription",""),this.set("cashMOP",""),this.set("isCashAccountTypeRemoved",!1),this.set("isAccHolderNameAndIdEnabled",!1),this.set("customerName",""),this.set("customerID",""),this.set("payerAccountHolderName",""),this.set("payerAccountHolderId",""),this.set("isFieldDisabled",!1),this.set("editPaymentDetailsModel.supportDocPagerPageContent",[]),this.set("editPaymentDetailsModel.supportingDocuments",[]),this.set("isDocumentAvailable",!1),this.set("editPaymentDetailsModel.ahvPending",!1),this.set("editPaymentDetailsModel.customerAccountHolder",void 0),this.set("isShowThirdPartyDocs",!1),this.set("existingAccountNumber",void 0),this.set("isDebitOrderAllowed",void 0),this.uninitializeEditPaymentDetailAfricaConstants(),this._super()}}),Komodo.Application.FinancialTransactionsController=Komodo.UI.Controller.extend({localeFinancialTransactionsTab:"locale.manageaccount:financialTransactionsTab.",localeFT:"locale.manageaccount:viewAccountInformation.",localelinkText:"locale.manageaccount:linkText.",localeFTsText:"locale.manageAccount.editPaymentDetails:paymentDetail.",localeFTGenText:"locale.manageAccount.editPaymentDetails:general.",localeRefund:"locale.manageaccount:refund.",localeBase:"locale.managePayments:aprvFinTrans.",localeAllocPay:"locale.managePayments:allocPay.",localeJournalTransactionsTab:"locale.manageaccount:pendingJournalsTab.",localeExportToExcel:"locale.manageCase:customerInteractionHistory.exportToExcel",comment:void 0,transactionId:void 0,reason:void 0,popUpScreen:void 0,financialTransactios:[],isFinancialTransactions:!0,isSearched:void 0,validateAmount:void 0,init:function(){Ember.A(),this._super(),Komodo.log("Constructing Financial Transactions Controller"),this.set("processVersion","v1.1"),this.set("processName","Financial Transactions"),this.set("allAccounts",[]),this.set("smartcards",[]),this.set("accountno",""),this.set("dataMessage",""),this.set("isFinancialTransactionsGridDataAvailable",!1),this.set("isFinancialTransactionsExist",!1),this.set("accountNumberWithDescription",""),this.set("accountTypes",[]),this.set("isAccountTypeLoaded",!1),this.subscribeFinancialTransactionsRetrievedReceived(),this.subscribeFinancialTransactionsErrorReceived(),this.set("currentAccountFT",[]),this.set("_totalFts",0),this.set("isPendingJournalsDataAvailable",!1),this.set("approveMessage",this.localeBase+"approved"),this.set("rejectMessage",this.localeBase+"rejected"),this.registerModel("finTranModel",Komodo.Models.FinancialTransactionsModel),this.set("finTranModel",Komodo.Models.FinancialTransactionsModel.create()),this.finTranModel.set("isBack",!1),Komodo.Services.eventAggregator.subscribe("PublishFinancialTransactionBack",function(e){Ember.isEmpty(e)||this.set("finTranModel",e)})},start:function(){if(this.finTranModel.isBack)this.allAccounts=this.finTranModel.allAccountsOnBack;else{var e=this;this.set("finTranModel.fromDate",null),this.set("finTranModel.toDate",null),this.set("finTranModel.minAmount",null),this.set("finTranModel.maxAmount",null),this.isSearched=!0,this.set("financialTransactios",[]),this.registerModel("customerProfileModel",Komodo.Models.CustomerProfileModel),this.set("customerProfileModel",Komodo.Models.CustomerProfileModel.create()),this.set("reverseFinancialTransactionModel",Komodo.Models.ReverseFinancialTransactionModel.create()),this.set("allocateTransferModel",Komodo.Models.AllocateTransferModel.create()),e.set("validateAmount",!1),this.finTranModel.set("showCommentArea",void 0),this.finTranModel.set("country",this.getCountry()),this.finTranModel.set("langauge",this.getCurrentLanguage()),this.set("firstLoad",!0),this.set("finTranModel.journalTransactionStatus",""),
this.set("finTranModel.refundId",""),this.set("finTranModel.financialTransactionApprovalRequestUID",""),this.set("finTranModel.financialTransactionUID",""),this.set("finTranModel.statusChangeComment",""),this.set("finTranModel.statusChangeCommentsForJournals",""),this.set("finTranModel.statusReasonSelected",""),this.set("finTranModel.requestedBy",""),this.set("finTranModel.pendingTransactions",[]),this.set("finTranModel.rejectForJournalsFromViewFTSelected",!1),this.set("finTranModel.requestDate",""),this.set("finTranModel.journalTransactionType",""),this.set("finTranModel.status",[]),this.get("finTranModel.reasonsForJournalRejection").push("Reject FT Approval Request"),this.get("finTranModel.status").addObject(Ember.Object.create({journalStatus:"Pending"})),this.registerValidator("finTranModel","fromDate",{type:"date",maxDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()+1)}),this.registerValidator("finTranModel","toDate",{type:"date",maxDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()+1)}),Komodo.Services.featureToggleService.isEnabled("FinancialTransaction","IsSmartcardEnable").done(function(t){null!=t&&void 0!=t?e.set("showsmartcardDetails",t):e.set("showsmartcardDetails",!1)}).fail(function(){Komodo.UI.error("[ERROR] : could not retrieve FinancialTransaction.IsSmartcardEnable featureToggle")}),Komodo.Services.featureToggleService.isEnabled("ManageAccount","Refunds").done(function(t){var a;if(t){e.getLedgerAccountsfromCDM(),e.finTranModel.set("enableRefund",t),a=Komodo.Services.securityService.hasPermission("clarity://reverseFinancialTransactionView/allowed"),e.reverseFinancialTransactionModel.set("enableReversal",a);var o=Komodo.Services.securityService.hasPermission("clarity://reverseFinancialTransactionView/viewOnly");e.reverseFinancialTransactionModel.set("disableReversalsPopUpButton",o);var n=Komodo.Services.securityService.hasPermission("clarity://approveOrReject/allowed");e.reverseFinancialTransactionModel.set("disableForViewOnlyUser",n);var s=Komodo.Services.securityService.hasPermission("clarity://paymentReversals/Allowed");e.reverseFinancialTransactionModel.set("paymentReversal",s)}else a=Komodo.Services.securityService.hasPermission("clarity://reverseFinancialTransactionView/allowed"),e.reverseFinancialTransactionModel.set("enableReversal",a),e.reverseFinancialTransactionModel.set("disableReversalsPopUpButton",!1),e.reverseFinancialTransactionModel.set("disableReversalsButton",!1),e.reverseFinancialTransactionModel.set("disableForViewOnlyUser",!0)}).fail(function(){Komodo.UI.error("[ERROR] : could not retrieve ManageAccount.Refunds featureToggle")});var t=Komodo.Services.ProductAndServiceMaintenanceHelper.create();if(!t.isCustomerIdIsAvailableToRetriveData())return void Komodo.Controls.MessageBoxController.show(kl.value(this.localeFTGenText+"customerNotFound"),kl.value(this.localeFTGenText+"customerNotFoundMsg"));var a=t.getCustomerIdToRetrieveData();this.finTranModel.set("customerNumber",a),this.setAccountTypes(),this.set("isSetAccounts",!1),this.setAllAccounts()}this._super()},titleChanged:function(){this.reason&&this.reason.reasonText&&"Other"===this.reason.reasonText?this.finTranModel.set("showCommentArea",!0):this.finTranModel.set("showCommentArea",void 0)}.observes("this.reason"),stop:function(){this.set("allAccounts",[]),this.set("accountNumberWithDescription",""),this.set("smartcards",[]),this.finTranModel.set("isBack",!1),this._super()},getFinanceTransactionsController:function(){return Komodo.Services.uiService.getController("financialTransactions")},subscribeFinancialTransactionsRetrievedReceived:function(){},subscribeFinancialTransactionsErrorReceived:function(){var e=this;Komodo.Services.eventAggregator.subscribe("FinancialTransactionsErrorReceived",function(){void 0==!Komodo.Services.manageAccountService.financialTransactionsErrorReceived.responseJSON.Message&&void 0==Komodo.Services.manageAccountService.financialTransactionsErrorReceived.responseJSON.MessageDetail&&(e.set("dataMessage",""),e.isFAAndFT())})},bindData:function(e){return Komodo.Application.CustomerProfileMapper.create().mapFinancialTransactions(e)},commentPopup:function(){var e=Komodo.Models.ReasonModel.create(),t=Komodo.Models.ReasonModel.create();e.set("reasonText","Customer may have been charged twice for the same subscription services in the same period"),e.set("reasonKey","1"),t.set("reasonText","Other"),t.set("reasonKey","2"),this.get("finTranModel").reasons.clear(),this.get("finTranModel").reasons.addObject(e),this.get("finTranModel").reasons.addObject(t),document.getElementById("reversalDetails").style.display="table"},disableControls:function(){var e=this;e.get("finTranModel").set("isDisableView",!0),e.get("finTranModel").set("isDisableReverse",!0)},cancelTransaction:function(){document.getElementById("reversalDetails").style.display="none"},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,3e5,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},isFAAndFT:function(){this.set("isFinancialTransactionsGridDataAvailable",!0),this.set("isFinancialTransactions",!0),this.set("isFinancialTransactionsExist",!1)},isFAAndNodFT:function(){this.set("dataMessage",kl.value(this.localeFTsText+"serviceNoFTMessage")),this.set("isFinancialTransactions",!1),this.set("isFinancialTransactionsGridDataAvailable",!0),this.set("isFinancialTransactionsExist",!1)},isNoFAAndNoFT:function(){this.set("dataMessage",kl.value(this.localeFTsText+"serviceNoDataMessage")),this.set("isFinancialTransactionsGridDataAvailable",!1),this.set("isFinancialTransactions",!0),this.set("isFinancialTransactionsExist",!0)},setAccountTypes:function(){this.set("accountTypes",Komodo.Services.customerProfileService.get("accountType").AccountTypes.AccountType),this.set("isAccountTypeLoaded",this.get("accountTypes")&&this.get("accountTypes").length>0)},setAllAccounts:function(){var e=Komodo.Application.ManageAccountUtility.isAnyAccountExist();if(this.set("allAccounts",[]),e&&this.get("isAccountTypeLoaded")){var t=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),a=t.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account),o=[],n="";this.set("isFinancialTransactions",!1),this.set("isFinancialTransactionsGridDataAvailable",!0),this.set("isFinancialTransactionsExist",!1);for(var s=0;s<a.length;s++)n=this.get("accountTypes").filter(function(e){if(e.CanonicalKey===a[s].Type)return e.AccountTypeDescription}),"1"==Komodo.Services.customerProfileService.personalDetails.customerClass||"9"==Komodo.Services.customerProfileService.personalDetails.customerClass||"4"==Komodo.Services.customerProfileService.personalDetails.customerClass?null!=a[s].Name&&void 0!=a[s].Name&&""!=a[s].Name?o.pushObject(a[s].UID+" - "+a[s].Name):o.pushObject(a[s].UID):null!=n&&void 0!=n&&""!=n&&n.length>0?o.pushObject(a[s].UID+" - "+n[0].AccountTypeDescription):o.pushObject(a[s].UID),0!=s&&a[s].IsDefault&&(o[0]=[o[s],o[s]=o[0]][0]);if(o.length>1){var r=o[0];o.shift(),o=o.sort(function(e,t){return parseInt(e,10)>parseInt(t,10)}),o.unshift(r)}this.set("allAccounts",o),this.get("accountno")?o&&o.length>0?this.get("finTranModel").set("selectedAcccountId",this.get("accountno")[0]):this.isNoFAAndNoFT():o&&o.length>0?this.get("finTranModel").set("selectedAcccountId",o[0]):this.isNoFAAndNoFT()}else this.isNoFAAndNoFT();this.set("finTranModel.allAccountsOnBack",o)},actions:{pageSelected:function(e){this.finTranModel.set("isBack",!1),this.loadData(e)},viewFinancialTransaction:function(e){try{var t=this;t.finTranModel.set("isBack",!1);var a=e.get("content").transactionId,o=Komodo.Services.uiService.getController("financialTransactionDetails");o.set("transactionID",a),o.set("financialTransactions",t.get("financialTransactios")),o.set("currentAccountFT",t.get("currentAccountFT")),t.finTranModel&&Komodo.Services.eventAggregator.publish("PublishFinancialTransaction",t.finTranModel),this.transitionToRoute("/financialTransactionDetails")}catch(e){this.handleException("viewFinancialTransaction",e,!0,!0)}},reverseFinancialTransaction:function(e){var t=this;if(t.reverseFinancialTransactionModel.get("enableReversal")){t.finTranModel.set("isBack",!1);var a=t.get("reverseFinancialTransactionModel");a.set("transactionId",e.get("content").transactionId),a.set("originalAmount",e.get("content").amount),a.set("periodFrom",e.get("content").periodFrom),a.set("periodTo",e.get("content").periodTo),a.set("ledgerAccountDescription",e.get("content").ledgerAccountDescription);var o=Komodo.Services.uiService.showModalPopup(kl.value(this.localeFT+"reverseFunds"),"reverseFinancialTransaction",{canUserClose:!0});this.set("popUpScreen",o)}else Komodo.Controls.MessageBoxController.show(kl.value(t.localeFT+"reversalAccess"),kl.value(t.localeFT+"reversalPermission"),null,null,"id123456","warning")},transferATransfer:function(e){var t=this;t.setFtData(),t.finTranModel.set("isBack",!1),t.set("transactionId",e.get("content").transactionId),t.set("skip",!1),t.allocateTransferModel.set("ledgerAccountDescription",e.get("content").ledgerAccountDescription),t.allocateTransferModel.set("amount",e.get("content").amount),t.allocateTransferModel.set("customerNo",t.finTranModel.get("customerNumber"));var a=t.finTranModel.get("selectedAcccountId").split(" - ");if(t.allocateTransferModel.set("toAccountDescription",a[1]),t.allocateTransferModel.set("fromAccountNumber",a[0]),t.getLedgerAccounts(a[1]),t.allocateTransferModel.set("UID",e.get("content").transactionId),t.retrieveRemainingFtFunds(t.get("transactionId")),t.set("validateAmount",!0),0==t.allocateTransferModel.get("remainingFtFunds"))Komodo.Controls.MessageBoxController.show("Transfer Warning","This transfer has been fully transferred",Komodo.Controls.MessageBoxOkButtons,t,"message","warning");else var o=Komodo.Services.uiService.showModalPopup("Allocate Transfer","financialTransaction",{view:Komodo.Application.AllocateTransferView,context:{allocateTransferModel:t.get("allocateTransferModel"),validators:t.validators,self:this,retrieveFA:function(){t.set("customerInformation",[]);var e,a=t.allocateTransferModel.get("searchText"),o=t.allocateTransferModel.get("customerNumber"),n=t.allocateTransferModel.get("smartcardNumber"),s=t.allocateTransferModel.get("deviceNumber"),r=t.allocateTransferModel.get("idNumber"),i=t.allocateTransferModel.get("accountNumber2"),l=t.allocateTransferModel.get("invoiceNumber");void 0!=a&&""!=a?(t.retrieveCustomerInformationFromElasticSearch(a),e=a):void 0!=s&&""!=s?(t.retrieveCustomerInformationFromElasticSearch(s),e=s):void 0!=r&&""!=r?(t.retrieveCustomerInformationFromElasticSearch(r),e=r):void 0!=o&&""!=o?(t.set("skip",!0),t.set("customerInformation",void 0),t.retrieveFinancialAccountsBySmartcardorCustomerNumber(o,n),e=o):void 0!=n&&""!=n?(t.set("skip",!0),t.set("customerInformation",void 0),t.retrieveFinancialAccountsBySmartcardorCustomerNumber(o,n),e=n):void 0!=i&&""!=i?(t.set("skip",!0),t.set("customerInformation",void 0),t.retrieveCustomerNumberByFinancialAccount(i),t.retrieveFinancialAccountsBySmartcardorCustomerNumber(t.allocateTransferModel.get("customerNumber"),n),e=i):void 0!=l&&""!=l&&(t.set("skip",!0),t.set("customerInformation",void 0),t.retrieveCustomerNumberByInvoiceNumber(l),t.retrieveFinancialAccountsBySmartcardorCustomerNumber(t.allocateTransferModel.get("customerNumber"),n),e=l),0==t.get("skip")&&void 0!=t.get("customerInformation")&&(0==t.get("customerInformation").length?Komodo.Controls.MessageBoxController.show(kl.value(t.localeAllocPay+"ajaxFinancialAccountsError"),"Customer with "+t.allocateTransferModel.get("searchTextName")+": "+e+"  is not found",Komodo.Controls.MessageBoxOkButtons,t,"message","warning"):($.each(t.get("customerInformation"),function(e,t){o=t.customerNumber}),t.retrieveFinancialAccountsBySmartcardorCustomerNumber(o,n)))},transferPayment:function(){t.finTranModel.set("isBack",!1),t.set("validatingTransferInput",[]),t.allocateTransferModel.get("toAccountNumber")||t.get("validatingTransferInput").push("\n"+kl.value(t.localeAllocPay+"selectAccount")),t.finTranModel.get("enableRefund")&&(t.allocateTransferModel.get("reasonForCapture")&&""!=t.allocateTransferModel.get("reasonForCapture")||t.get("validatingTransferInput").push("\n"+kl.value(t.localeAllocPay+"reasonForCaptureRequired"))),void 0!=t.allocateTransferModel.get("comment")&&""!=t.allocateTransferModel.get("comment")||t.get("validatingTransferInput").push("\n"+kl.value(t.localeAllocPay+"commentRequired")),void 0!=t.allocateTransferModel.get("comment")&&""!=t.allocateTransferModel.get("comment")&&t.allocateTransferModel.get("comment").length>420&&t.get("validatingTransferInput").push("\n"+kl.value(t.localeAllocPay+"commentExceed420")),t.get("validatingTransferInput").length>0?alert(t.get("validatingTransferInput").join(" ")):t.publishTransfer()},cancel:function(){this.clearData()},close:function(){t.set("validateAmount",!1),o.close()}},canUserClose:!0})},searchTransactions:function(){this.validateAmountSearch()&&(this.finTranModel.set("isBack",!1),this.resetPagerData(),this.loadData(null),this.isSearched=!0)},clearTransactionsFilters:function(){this.set("finTranModel.fromDate",null),this.set("finTranModel.toDate",null),this.set("finTranModel.minAmount",null),this.set("finTranModel.maxAmount",null),this.finTranModel.set("isBack",!1),this.resetPagerData(),this.loadData(null)},exportToExcel:function(){return this.finTranModel.set("isBack",!1),this.exportDataToExcel(),!1}},validateAmountSearch:function(){that=this;var e=that.get("finTranModel").minAmount,t=that.get("finTranModel").maxAmount;if(void 0!=e&&""!=e||void 0!=t&&""!=t){if(void 0==e&&void 0!==t||void 0!==e&&void 0==t)return Komodo.Controls.MessageBoxController.show(kl.value(this.localeFTGenText+"technicalError"),kl.value(this.localeFTGenText+"errorforAmounts"),null,null,"id123456","danger"),!1;if("0"==e||"0"==t)return Komodo.Controls.MessageBoxController.show(kl.value(this.localeFTGenText+"technicalError"),kl.value(this.localeFTGenText+"errorforZeroAmount"),null,null,"id123456","danger"),!1;if(void 0!==e&&0==/^\s*-?[1-9]\d*(\.\d{1,2})?\s*$/.test(e))return Komodo.Controls.MessageBoxController.show(kl.value(this.localeFTGenText+"technicalError"),kl.value(this.localeFTGenText+"errorforAmounts"),null,null,"id123456","danger"),!1;if(void 0!==t&&0==/^\s*-?[1-9]\d*(\.\d{1,2})?\s*$/.test(t))return Komodo.Controls.MessageBoxController.show(kl.value(this.localeFTGenText+"technicalError"),kl.value(this.localeFTGenText+"errorforAmounts"),null,null,"id123456","danger"),!1;if(parseFloat(e)>parseFloat(t))return Komodo.Controls.MessageBoxController.show(kl.value(this.localeFTGenText+"technicalError"),kl.value(this.localeFTGenText+"errorforAmounts"),null,null,"id123456","danger"),!1}return!0},loadData:function(e){var t=this.seperateAndGetAccountNumberFromDescription(this.get("finTranModel").get("selectedAcccountId")),a=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),o=a.getCustomerIdToRetrieveData(),n=null,s=null,r=null,i=null;0!=t&&(this.isValuePresent(this.get("finTranModel").fromDate)&&(s=this.get("finTranModel").fromDate.toLocaleDateString("sv-SE")),this.isValuePresent(this.get("finTranModel").toDate)&&(n=this.get("finTranModel").toDate.toLocaleDateString("sv-SE")),this.isValuePresent(this.get("finTranModel").minAmount)&&(r=this.get("finTranModel").minAmount),this.isValuePresent(this.get("finTranModel").maxAmount)&&(i=this.get("finTranModel").maxAmount),this.isValuePresent(e)?this.bindGridData(o,t,e.pageNumber,KomodoConfiguration.finiancialAccountTransactionCount,s,n,r,i):(this.set("_totalFts",0),this.set("financialTransactios",[]),this.bindGridData(o,t,0,KomodoConfiguration.finiancialAccountTransactionCount,s,n,r,i))),this.set("firstLoad",!1)},exportDataToExcel:function(){var e=this.seperateAndGetAccountNumberFromDescription(this.get("finTranModel").get("selectedAcccountId")),t=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),a=t.getCustomerIdToRetrieveData(),o=null,n=null,s=null,r=null,i=KomodoConfiguration.exportToExcelCallCount;if(0!=e)if(this.isValuePresent(this.get("finTranModel").fromDate)&&(n=this.get("finTranModel").fromDate.toLocaleDateString("sv-SE")),this.isValuePresent(this.get("finTranModel").toDate)&&(o=this.get("finTranModel").toDate.toLocaleDateString("sv-SE")),this.isValuePresent(this.get("finTranModel").minAmount)&&(s=this.get("finTranModel").minAmount),this.isValuePresent(this.get("finTranModel").maxAmount)&&(r=this.get("finTranModel").maxAmount),0==this.isSearched)Komodo.Controls.MessageBoxController.show(kl.value("locale.manageaccount:general.financialTransactionsTitle"),kl.value(this.localeFT+"noDataFoundForExport"),null,this,"id123456","warning");else{var l=this;Komodo.Services.queryService.getJSON("/FinancialTransaction/GetFinancialTransactions?customerId="+a+"&financialAccountId="+e+"&pageSize="+i+"&pageNumber=0&fromDate="+n+"&toDate="+o+"&minAmount="+s+"&maxAmount="+r).done(function(e){if(null!=e&&void 0!=e&&null!=e.ListOfFinancialTransaction&&void 0!=e.ListOfFinancialTransaction&&null!=e.ListOfFinancialTransaction.FinancialTransaction&&void 0!=e.ListOfFinancialTransaction.FinancialTransaction){var t=l.bindData(e.ListOfFinancialTransaction.FinancialTransaction),o=[],n=kl.value(l.localeFT+"reportCreationDate"),s=kl.value(l.localeFT+"reportFTType"),r=kl.value(l.localeFT+"reportProductId"),i=kl.value(l.localeFT+"reportProduct"),c=kl.value(l.localeFT+"reportSmartcard"),u=kl.value(l.localeFT+"reportLedgerAccountDesc"),d=kl.value(l.localeFT+"reportPeriodFrom"),h=kl.value(l.localeFT+"reportPeriodTo"),m=kl.value(l.localeFT+"reportAmount"),p=kl.value(l.localeFT+"reportRunningTotal");if(l.showsmartcardDetails)for(var f=0;f<t.length;f++){var g={};g[n]=t[f].creationDate,g[s]=t[f].financialTransactionType,g[r]=t[f].AgreementDetailId,g[i]=t[f].product,g[c]=t[f].SmartCardNumber,g[u]=t[f].ledgerAccountDescription,g[d]=t[f].periodFrom,g[h]=t[f].periodTo,g[m]=t[f].amount,g[p]=t[f].runningTotal,o.push(g)}else for(var f=0;f<t.length;f++){var g={};g[n]=t[f].creationDate,g[s]=t[f].financialTransactionType,g[r]=t[f].AgreementDetailId,g[i]=t[f].product,g[u]=t[f].ledgerAccountDescription,g[d]=t[f].periodFrom,g[h]=t[f].periodTo,g[m]=t[f].amount,g[p]=t[f].runningTotal,o.push(g)}var v=kl.value(l.localeFT+"reportTitle"),y=v+" "+a+" ";Komodo.UI.ExportFunctions.exportToExcelConvertor(o,v,y,!0),l.isSearched=!1}}).fail(function(e){Komodo.log("[ERROR] : could not retrieve any customer account information for: "+a),void 0==e.responseJSON.Message&&void 0==e.responseJSON.MessageDetail?(l.isFAAndNodFT(),l.set("financialTransactios",[])):(Komodo.Controls.MessageBoxController.show(kl.value(l.localeFinancialTransactionsTab+"ftErrorTitle"),"<b>Error - Retrieve Customer Financial Transactions ajax call failed</b><br/>Error Message = "+e.responseJSON.Message+"</br> Error Message Detail = "+e.responseJSON.MessageDetail,Komodo.Controls.MessageBoxOkButtons,l,"message","danger"),l.set("financialTransactios",[]))})}},getDateFromDateInXsdFormat:function(e){var t="",a=e.indexOf("T");t=e.substring(0,a).split("-").reverse().join("-");var o=e.substring(a+1,e.length),n=o.split(":"),s=new Date,r=void 0;return t&&t.indexOf("-")>=0&&(r=t.split("-"),s=new Date(parseInt(r[2],10),parseInt(r[1],10)-1,parseInt(r[0],10),parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10))),s},seperateAndGetAccountNumberFromDescription:function(e){if(null!=e&&void 0!=e&&""!=e){var t=e.split(" - ");null!=t&&void 0!=t&&t.length>0?(this.set("accountno",t[0]),this.set("accountNumberWithDescription",e)):(this.set("accountno",t),this.set("accountNumberWithDescription",t))}else this.set("accountno",0),this.set("accountNumberWithDescription","");return this.get("accountno")},bindGridData:function(e,t,a,o,n,s,r,i){var l=this;this.resultFTMessage;this.finTranModel.get("isBack")||Komodo.Services.queryService.getJSON("/FinancialTransaction/GetFinancialTransactions?customerId="+e+"&financialAccountId="+t+"&pageSize="+o+"&pageNumber="+a+"&fromDate="+n+"&toDate="+s+"&minAmount="+r+"&maxAmount="+i).done(function(e){if(l.set("currentAccountFT",e.ListOfFinancialTransaction.FinancialTransaction),e.ListOfFinancialTransaction.FinancialTransaction.length>=1){var t=l.bindData(e.ListOfFinancialTransaction.FinancialTransaction);void 0!=t?(l.set("financialTransactios",t),l.set("_totalFts",e.PagingDetail.TotalRecordCount),$.each(l.get("financialTransactios"),function(e,t){l.finTranModel.get("enableRefund")?(t.validateLedgerAccount=l.reverseFinancialTransactionModel.get("enableReversal"),!1===l.reverseFinancialTransactionModel.get("paymentReversal")&&t.financialTransactionType.match(/payment/i)&&(t.validateLedgerAccount=!1),"Transfer"==t.financialTransactionType&&(t.ledgerAccountDescription.match(/transfers in/i)||t.ledgerAccountDescription.match(/transfer in/i))&&(t.hideTransferButton=!0)):(t.hideTransferButton=!1,t.validateLedgerAccount=l.reverseFinancialTransactionModel.get("enableReversal")),t.ledgerAccountDescription.match(/takeon/i)&&(t.validateLedgerAccount=!1),l.get("showsmartcardDetails")?t.set("displaySmartcard",!0):t.set("displaySmartcard",!1)}),l.isFAAndFT()):(l.isFAAndNodFT(),l.set("financialTransactios",[]))}else l.isFAAndNodFT(),l.set("financialTransactios",[])}).fail(function(t){Komodo.log("[ERROR] : could not retrieve any customer account information for: "+e),void 0==t.responseJSON.Message&&void 0==t.responseJSON.MessageDetail?(l.isFAAndNodFT(),l.set("financialTransactios",[])):(Komodo.Controls.MessageBoxController.show(kl.value(l.localeFinancialTransactionsTab+"ftErrorTitle"),"<b>Error - Retrieve Customer Financial Transactions ajax call failed</b><br/>Error Message = "+t.responseJSON.Message+"</br> Error Message Detail = "+t.responseJSON.MessageDetail,Komodo.Controls.MessageBoxOkButtons,l,"message","danger"),l.set("financialTransactios",[]))})},accountNumberChanged:function(){var e=this.seperateAndGetAccountNumberFromDescription(this.get("finTranModel").get("selectedAcccountId"));e&&(this.set("accountno",this.get("accountNumberWithDescription")),this.finTranModel.get("enableRefund")&&this.checkIfRefundRequestIsInProgress(this.finTranModel.get("customerNumber"),e),this.loadData(null))}.observes("finTranModel.selectedAcccountId"),filterCriteriaChanged:function(){this.isValuePresent(this.get("finTranModel").fromDate)||this.isValuePresent(this.get("finTranModel").toDate)||this.isValuePresent(this.get("finTranModel").minAmount)||this.isValuePresent(this.get("finTranModel").maxAmount)?this.isSearched=!1:this.isSearched=!0}.observes("finTranModel.fromDate","finTranModel.toDate","finTranModel.minAmount","finTranModel.maxAmount"),setSmartCardsOfAnAccount:function(){this.set("smartcards",[]);var e=this.getSelectedAccount();if(null!=e)if(this.set("smartcards",Komodo.Application.ManageAccountUtility.getSmartCardsOfAnAccount(e)),void 0!=this.get("smartcards")){if(0===this.get("smartcards").length){var t=this.get("smartcards");t.addObject("-"),this.set("smartcards",t)}}else this.set("smartcards",["-"]);else this.set("smartcards",["-"])},getSelectedAccount:function(){var e=this.seperateAndGetAccountNumberFromDescription(this.get("accountno"));this.finTranModel.get("enableRefund")&&this.checkIfRefundRequestIsInProgress(this.finTranModel.get("customerNumber"),e);var t=Komodo.Services.ProductAndServiceMaintenanceHelper.create();if(Komodo.Application.ManageAccountUtility.isAnyAccountExist())var a=t.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account),o=a.filter(function(t){return t.UID.toUpperCase()===e.toUpperCase()});return o[0]||null},getlistOfTax:function(){return Komodo.Models.Tax.create()},populateTransactionTypes:function(){this.set("FinancialTransactionType",Komodo.Services.customerProfileService.get("FinancialTransactionType"))},isValuePresent:function(e){return null!==e&&void 0!==e&&""!=e},resetPagerData:function(){this.set("_totalFts",0),this.set("currentAccountFT",Ember.A()),this.set("_virtualPagerPageContent",Ember.A())},exportToExcelLinks:function(){return 1==this.finTranModel.get("enableRefund")?[{title:kl.value(this.localeExportToExcel),action:"exportToExcel",target:"controller"},{href:"#/pendingJournals?customerNumber="+this.finTranModel.get("customerNumber"),title:"View Pending Journals"}]:[{title:kl.value(this.localeExportToExcel),action:"exportToExcel",target:"controller"}]}.property(),setReversalData:function(){this.get("popUpScreen").close(),this.publishReverseFinancialTransactionsEvent()},checkIfRefundRequestIsInProgress:function(e,t){var a=this;a.reverseFinancialTransactionModel.set("disableReversalsButton",!1),Komodo.Services.queryService.getJSON("Journal/GetPendingRefundRequestsByCustomerId?token=token&customerNumber="+e,{async:!1}).done(function(e){if(e.AccountNumbers.length>0&&null!=e.AccountNumbers[0])for(var o=0;o<e.AccountNumbers.length;o++){if(t==e.AccountNumbers[o].FINANCIALACCOUNTID){a.reverseFinancialTransactionModel.set("disableReversalsButton",!0),a.finTranModel.set("pendingRefundNotification",kl.value(a.localeRefund+"pendingRefund",{AccountNumber:t}));break}a.reverseFinancialTransactionModel.set("disableReversalsButton",!1)}}).error(function(e){a.reverseFinancialTransactionModel.set("disableReversalsButton",!0);var t;t=e.responseJSON.Message?e.responseJSON.Message:e.responseJSON,Komodo.Controls.MessageBoxController.show(kl.value(a.localeRefund+"ajaxPendingRefundRequests"),t,Komodo.Controls.MessageBoxOkButtons,a,"message","warning")})},publishReverseFinancialTransactionsEvent:function(){var e=Komodo.Models.ReverseFinancialTransaction.create(),t=Komodo.canonicalFacadeFactory(e,["Country","FinancialTransactionUID","RequestedBy","Comments","Amount","PeriodFrom","PeriodTo","IsFullReversal","Language"]),a=this.reverseFinancialTransactionModel.get("transactionId"),o=Komodo.Models.Price.create();o.set("Value",this.reverseFinancialTransactionModel.get("amount")),o.set("CurrencyCode","0"),o.set("ValueWithoutTax",this.reverseFinancialTransactionModel.get("amount"));var n=this.getlistOfTax();o.set("ListOfTax",n);var s=new moment(this.reverseFinancialTransactionModel.fromRefundDate,"DD-MM-YYYY").format("YYYY-MM-DDTHH:mm:ss"),r=new moment(this.reverseFinancialTransactionModel.toRefundDate,"DD-MM-YYYY").format("YYYY-MM-DDTHH:mm:ss");"Invalid date"==s&&"Invalid date"==r&&(s=void 0,r=void 0),t.set("Country",this.finTranModel.get("country")),t.set("FinancialTransactionUID",a),t.set("RequestedBy",this.userName()),t.set("Comments",this.reverseFinancialTransactionModel.get("reasonForCapture")+" - "+this.reverseFinancialTransactionModel.get("comment")),t.set("Amount",o),t.set("PeriodFrom",s),t.set("PeriodTo",r),t.set("IsFullReversal",this.reverseFinancialTransactionModel.get("fullReversal")),t.set("Language",this.finTranModel.get("langauge"));var i=Komodo.Services.manageAccountService;this.startNewProcess(),i.publishEvent(this,e,"ReverseFinancialTransaction","v1"),this.showBusyIndicator()},messageReverseFinancialTransactionReceived:function(e){Komodo.log(e)},messageReverseFinancialTransactionDeliveryFailure:function(e){Komodo.log(e)},messageReverseFinancialTransactionFault:function(e){Komodo.log(e)},messageFinancialTransactionReversedReceived:function(e){this.hideBusyIndicator();var t;if(void 0!=e.ResponseMessage.Payload.FinancialTransaction?void 0!=e.ResponseMessage.Payload.FinancialTransaction.ActualAmount&&e.ResponseMessage.Payload.FinancialTransaction.ActualAmount.Value&&(t=e.ResponseMessage.Payload.FinancialTransaction.ActualAmount.Value):t=this.reverseFinancialTransactionModel.amount,"False"==e.ResponseMessage.Payload.IsPendingApproval)Komodo.Controls.MessageBoxController.show(kl.value(this.localeFT+"reversalStatus"),kl.value(this.localeFT+"reversalRequest",{amount:t,accountNumber:this.get("accountno"),customerNumber:this.finTranModel.get("customerNumber")}),null,this,"id5446676","success");else if(1==this.reverseFinancialTransactionModel.isPeriodizedReversal){var a=new moment(this.reverseFinancialTransactionModel.fromRefundDate,"DD-MM-YYYY").format("YYYY-MM-DDTHH:mm:ss"),o=new moment(this.reverseFinancialTransactionModel.toRefundDate,"DD-MM-YYYY").format("YYYY-MM-DDTHH:mm:ss");Komodo.Controls.MessageBoxController.show(kl.value(this.localeFT+"reversalStatus"),kl.value(this.localeFT+"refundPeriodApproval",{ID:this.get("transactionId"),fromDate:a,toDate:o,customerNumber:this.finTranModel.get("customerNumber")}),null,this,"id5446676","success")}else Komodo.Controls.MessageBoxController.show(kl.value(this.localeFT+"reversalStatus"),kl.value(this.localeFT+"approvalReversal",{amount:t,accountNumber:this.get("accountno"),customerNumber:this.finTranModel.get("customerNumber")}),null,this,"id5446676","success")},messageFinancialTransactionReversedDeliveryFailure:function(e){Komodo.log(e)},messageFinancialTransactionReversedFault:function(e){Komodo.log(e)},messageFailureMessageEventReceived:function(e){this.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(this.localeFTGenText+"technicalError"),e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,null,null,"id123456","danger")},messageReceived:function(e){Komodo.log(e)},messageDeliveryFailure:function(e){Komodo.log(e)},messageFault:function(e){Komodo.log(e)},registerValidation:function(){this.registerValidator(this.get("allocateTransferModel"),"amount",{limitValueToType:!0,type:"number",isRequired:!0}),this.registerValidator(this.get("allocateTransferModel"),"comment",{isRequired:!0,displayName:kl.value(this.localeAllocPay+"comment"),maxLength:420}),this.registerValidator(this.get("allocateTransferModel"),"toAccountNumber",{isRequired:!0}),this.registerValidator(this.get("allocateTransferModel"),"reasonForCapture",{isRequired:!0})},validateToCustomer:function(){if(void 0!=this.allocateTransferModel)switch(this.allocateTransferModel.set("customerNumber",void 0),this.allocateTransferModel.set("smartcardNumber",void 0),this.allocateTransferModel.set("idNumber",void 0),this.allocateTransferModel.set("deviceNumber",void 0),this.allocateTransferModel.set("custNo",void 0),this.allocateTransferModel.set("customerName",void 0),this.allocateTransferModel.set("searchText",void 0),this.allocateTransferModel.set("accountNumber2",void 0),this.allocateTransferModel.set("invoiceNumber",void 0),this.allocateTransferModel.set("accountNumber",void 0),this.allocateTransferModel.set("comment",void 0),this.allocateTransferModel.set("isCustomerOrSmartcardNumber",!1),this.allocateTransferModel.get("searchByToCustomer")){case"0":this.allocateTransferModel.set("searchTextName","Customer Number"),this.registerValidator(this.get("allocateTransferModel"),"customerNumber",{limitValueToType:!0,type:"number",isRequired:!0,displayName:kl.value(this.localeAllocPay+"customerNumber")}),this.allocateTransferModel.set("istoggleCustomer",!0),this.allocateTransferModel.set("istoggleSmartcard",!1),this.allocateTransferModel.set("istoggleID",!1),this.allocateTransferModel.set("istogglePassport",!1),this.allocateTransferModel.set("istoggleAccountNumber",!1),this.allocateTransferModel.set("istoggleInvoiceNumber",!1),this.allocateTransferModel.set("istoggleCellphone",!1),this.allocateTransferModel.set("istoggleDeviceNumber",!1);break;case"1":this.allocateTransferModel.set("searchTextName","Smartcard Number"),this.registerValidator(this.get("allocateTransferModel"),"smartcardNumber",{limitValueToType:!0,type:"number",isRequired:!0,displayName:kl.value(this.localeAllocPay+"smartcardNumber"),functions:Komodo.UI.Validators.SmartcardNumberValidator}),this.allocateTransferModel.set("istoggleCustomer",!1),this.allocateTransferModel.set("istoggleSmartcard",!0),this.allocateTransferModel.set("istoggleID",!1),this.allocateTransferModel.set("istogglePassport",!1),this.allocateTransferModel.set("istoggleAccountNumber",!1),
this.allocateTransferModel.set("istoggleInvoiceNumber",!1),this.allocateTransferModel.set("istoggleCellphone",!1),this.allocateTransferModel.set("istoggleDeviceNumber",!1);break;case"2":this.allocateTransferModel.set("searchTextName","ID Number"),this.registerValidator(this.get("allocateTransferModel"),"idNumber",{limitValueToType:!0,type:"number",isRequired:!0,displayName:kl.value(this.localeAllocPay+"idNumber"),functions:Komodo.UI.Validators.RSA_IDValidator}),this.allocateTransferModel.set("istoggleCustomer",!1),this.allocateTransferModel.set("istoggleSmartcard",!1),this.allocateTransferModel.set("istoggleID",!0),this.allocateTransferModel.set("istogglePassport",!1),this.allocateTransferModel.set("istoggleAccountNumber",!1),this.allocateTransferModel.set("istoggleInvoiceNumber",!1),this.allocateTransferModel.set("istoggleCellphone",!1),this.allocateTransferModel.set("istoggleDeviceNumber",!1);break;case"3":this.allocateTransferModel.set("searchTextName","Passport Number"),this.registerValidator(this.get("allocateTransferModel"),"searchText",{isRequired:!0,displayName:kl.value(this.localeAllocPay+"passPort"),minLength:8}),this.allocateTransferModel.set("istoggleCustomer",!1),this.allocateTransferModel.set("istoggleSmartcard",!1),this.allocateTransferModel.set("istoggleID",!1),this.allocateTransferModel.set("istogglePassport",!0),this.allocateTransferModel.set("istoggleAccountNumber",!1),this.allocateTransferModel.set("istoggleInvoiceNumber",!1),this.allocateTransferModel.set("istoggleCellphone",!1),this.allocateTransferModel.set("istoggleDeviceNumber",!1);break;case"4":this.allocateTransferModel.set("searchTextName","Account Number"),this.registerValidator(this.get("allocateTransferModel"),"accountNumber2",{limitValueToType:!0,type:"number",isRequired:!0,displayName:kl.value(this.localeAllocPay+"accountNumber")}),this.allocateTransferModel.set("istoggleCustomer",!1),this.allocateTransferModel.set("istoggleSmartcard",!1),this.allocateTransferModel.set("istoggleID",!1),this.allocateTransferModel.set("istogglePassport",!1),this.allocateTransferModel.set("istoggleAccountNumber",!0),this.allocateTransferModel.set("istoggleInvoiceNumber",!1),this.allocateTransferModel.set("istoggleCellphone",!1),this.allocateTransferModel.set("istoggleDeviceNumber",!1);break;case"5":this.allocateTransferModel.set("searchTextName","Invoice Number"),this.registerValidator(this.get("allocateTransferModel"),"invoiceNumber",{limitValueToType:!0,type:"number",isRequired:!0,displayName:kl.value(this.localeAllocPay+"invoice")}),this.allocateTransferModel.set("istoggleCustomer",!1),this.allocateTransferModel.set("istoggleSmartcard",!1),this.allocateTransferModel.set("istoggleID",!1),this.allocateTransferModel.set("istogglePassport",!1),this.allocateTransferModel.set("istoggleAccountNumber",!1),this.allocateTransferModel.set("istoggleInvoiceNumber",!0),this.allocateTransferModel.set("istoggleCellphone",!1),this.allocateTransferModel.set("istoggleDeviceNumber",!1);break;case"6":this.allocateTransferModel.set("searchTextName","Cellphone Number"),this.registerValidator(this.get("allocateTransferModel"),"searchText",{limitValueToType:!0,type:"number",isRequired:!0,displayName:kl.value(this.localeAllocPay+"cellphone"),minlength:7}),this.allocateTransferModel.set("istoggleCustomer",!1),this.allocateTransferModel.set("istoggleSmartcard",!1),this.allocateTransferModel.set("istoggleID",!1),this.allocateTransferModel.set("istogglePassport",!1),this.allocateTransferModel.set("istoggleAccountNumber",!1),this.allocateTransferModel.set("istoggleInvoiceNumber",!1),this.allocateTransferModel.set("istoggleCellphone",!0),this.allocateTransferModel.set("istoggleDeviceNumber",!1);break;case"7":this.allocateTransferModel.set("searchTextName","Device Number"),this.registerValidator(this.get("allocateTransferModel"),"deviceNumber",{isRequired:!0,displayName:kl.value(this.localeAllocPay+"deviceNumber")}),this.allocateTransferModel.set("istoggleCustomer",!1),this.allocateTransferModel.set("istoggleSmartcard",!1),this.allocateTransferModel.set("istoggleID",!1),this.allocateTransferModel.set("istogglePassport",!1),this.allocateTransferModel.set("istoggleAccountNumber",!1),this.allocateTransferModel.set("istoggleInvoiceNumber",!1),this.allocateTransferModel.set("istoggleCellphone",!1),this.allocateTransferModel.set("istoggleDeviceNumber",!0)}}.observes("allocateTransferModel.searchByToCustomer"),validateToAmount:function(){var e=this;if(e.get("validateAmount")){var t=e.allocateTransferModel.get("remainingFtFunds")-2*e.allocateTransferModel.get("remainingFtFunds");e.allocateTransferModel.get("remainingFtFunds")>0?(e.allocateTransferModel.set("amount",0),e.allocateTransferModel.set("remainingFtFunds",0)):t<e.allocateTransferModel.get("amount")&&(e.allocateTransferModel.set("amount",e.allocateTransferModel.get("remainingFtFunds")),alert(kl.value(e.localeAllocPay+"amountValidation")))}}.observes("allocateTransferModel.amount"),clearData:function(){this.allocateTransferModel.set("isTransfer",!1),this.allocateTransferModel.set("istoggleCustomer",!1),this.allocateTransferModel.set("istoggleSmartcard",!1),this.allocateTransferModel.set("istoggleID",!1),this.allocateTransferModel.set("istogglePassport",!1),this.allocateTransferModel.set("istoggleAccountNumber",!1),this.allocateTransferModel.set("istoggleCellphone",!1),this.allocateTransferModel.set("istoggleInvoiceNumber",!1),this.allocateTransferModel.set("istoggleDeviceNumber",!1),this.allocateTransferModel.set("isCustomerOrSmartcardNumber",!1),this.allocateTransferModel.set("isSearchCustomerBy",!1),this.allocateTransferModel.set("amount",void 0),this.allocateTransferModel.set("comment",void 0),this.allocateTransferModel.set("customerNumber",void 0),this.allocateTransferModel.set("custNo",void 0),this.allocateTransferModel.set("customerName",void 0),this.allocateTransferModel.set("smartcardNumber",void 0),this.allocateTransferModel.set("accountNumber",void 0),this.allocateTransferModel.set("remainingFtFunds",void 0),this.allocateTransferModel.set("reasonForCapture",void 0),this.allocateTransferModel.set("searchByToCustomer",void 0)},retrieveRemainingFtFunds:function(e){var t=this;Komodo.Services.queryService.refreshUserData(),Komodo.Services.queryService.getJSON("FinancialTransaction/GetFinancialTransactionHistory?financialTransactionId="+e,{async:!1}).done(function(e){t.allocateTransferModel.set("remainingFtFunds",e.TransferrableAmount),t.allocateTransferModel.set("amount",e.TransferrableAmount)}).error(function(e){var a;e.responseJSON?e.responseJSON.Message&&(a=e.responseJSON.Message):a=e.responseJSON,Komodo.Controls.MessageBoxController.show(kl.value(t.localeAllocPay+"ajaxPaymentHistory"),a,Komodo.Controls.MessageBoxOkButtons,t,"message","warning")})},retrieveCustomerInformationFromElasticSearch:function(e){var t=this;Komodo.Services.queryService.getJSON("/ElasticSearch/GetElasticSearchData?from=0&size="+parseInt(KomodoConfiguration.elasticSearchConfig.numberOfRecords)+"&documentType=&default_field="+KomodoConfiguration.elasticSearchConfig.default_field+"&searchText="+e.trim()+"&default_operator="+KomodoConfiguration.elasticSearchConfig.default_operator,{async:!1}).done(function(a){var o=$.makeArray(a.hits.hits);1==o.length?$.each(o,function(a,o){"2"!==t.allocateTransferModel.get("searchByToCustomer")&&"3"!==t.allocateTransferModel.get("searchByToCustomer")||o._source.IdentityValue==e&&t.get("customerInformation").addObject(Ember.Object.create({customerNumber:o._source.CustomerNumber,idNumberPassport:o._source.IdentityValue})),"6"===t.allocateTransferModel.get("searchByToCustomer")&&$.each(o._source.ListOfPhoneNumber,function(a,n){n.Number==e&&t.get("customerInformation").addObject(Ember.Object.create({customerNumber:o._source.CustomerNumber,cellphone:n.Number}))}),"7"===t.allocateTransferModel.get("searchByToCustomer")&&$.each(o._source.ListOfDevice,function(a,n){n.DeviceNumber==e&&t.get("customerInformation").addObject(Ember.Object.create({customerNumber:o._source.CustomerNumber,deviceNumber:n.DeviceNumber}))})}):alert("Not Found")}).error(function(e){t.hideBusyIndicator();JSON.stringify(e);alert(kl.value("locale.customer:getItOnPaymentPlan.useCaseTitle"))})},retrieveFinancialAccountsBySmartcardorCustomerNumber:function(e,t){var a=this;if(a.allocateTransferModel.set("accountNumberList",[]),t||e){Komodo.Services.queryService.refreshUserData();var o;o=e?"/AccountProfile/Get?smartcardNumber=&customerUID="+e:"/AccountProfile/Get?smartcardNumber="+t+"&customerUID=",Komodo.Services.queryService.getJSON(o,{async:!0}).done(function(e){if(a.allocateTransferModel.set("accountNumberList",[]),e.FinancialAccounts.length>=1){var t=e.FinancialAccounts,o=t[0].CustomerId;a.retrieveCustomer(o),a.allocateTransferModel.set("custNo",o);var n,s=a.allocateTransferModel.get("customerClass");if(s==GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_COMMERCIAL")||s==GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_CSI"))for(var r=0;r<t.length;r++)n={Key:t[r].Number,Value:t[r].Number+" "+t[r].Name,IsDefault:t[r].IsDefault},a.allocateTransferModel.accountNumberList.push(n),a.allocateTransferModel.set("toAccountNumber",a.allocateTransferModel.get("accountNumberList"));else for(var i=0;i<t.length;i++)n={Key:t[i].Number,Value:t[i].Number+" "+t[i].AccountTypeDescription,IsDefault:t[i].IsDefault},a.allocateTransferModel.accountNumberList.push(n),a.allocateTransferModel.set("toAccountNumber",a.allocateTransferModel.get("accountNumberList"));var l=a.allocateTransferModel.get("toAccountNumber").sort(function(e,t){return e.IsDefault===t.IsDefault?0:e.IsDefault?-1:1});a.allocateTransferModel.set("toAccountNumber",l),a.allocateTransferModel.set("isCustomerOrSmartcardNumber",!0),a.allocateTransferModel.set("isTransfer",!0)}}).error(function(e){a.allocateTransferModel.set("accountNumberList",[]);var t;t=void 0!=e.responseJSON.Message?e.responseJSON.Message:e.responseJSON,alert(kl.value(a.localeAllocPay+"ajaxFinancialAccountsError")+"\n"+t)})}else alert(kl.value(a.localeAllocPay+"customerNumberOrSmartcardNumberPrompt"))},retrieveCustomerNumberByFinancialAccount:function(e){var t=this;Komodo.Services.queryService.refreshUserData(),Komodo.Services.queryService.getJSON("/AccountProfile/GetCustomerIdByFinancialAccount/"+e+"?dummy="+e,{async:!1}).done(function(e){e&&t.allocateTransferModel.set("customerNumber",e)}).error(function(e){var a;e.responseJSON?e.responseJSON.Message&&(a=e.responseJSON.Message):a=e.responseJSON,alert(kl.value(t.localeAllocPay+"ajaxCustomerError")+"\n"+a)})},retrieveCustomerNumberByInvoiceNumber:function(e){var t=this;Komodo.Services.queryService.refreshUserData(),Komodo.Services.queryService.getJSON("/Invoice/GetInvoicesbyCustomerNumberOrInvoiceNumber?customerId=&invoiceNumber="+e,{async:!1}).done(function(e){var a=$.makeArray(e.Invoices);$.each(a,function(e,a){t.allocateTransferModel.set("customerNumber",a.customerId)})}).error(function(e){var a;a=e.responseJSON.Message?e.responseJSON.Message:e.responseJSON,alert(kl.value(t.localeAllocPay+"ajaxInvoicesError")+"\n"+a)})},retrieveCustomer:function(e){var t=this;Komodo.Services.queryService.refreshUserData(),Komodo.Services.queryService.getJSON("CustomerProfile?customerId="+e,{async:!1}).done(function(e){if(e&&e.CustomerDetail){var a=e.CustomerDetail.PersonalDetail.FirstName,o=e.CustomerDetail.PersonalDetail.Surname;""==a||null==a?t.allocateTransferModel.set("customerName",o):t.allocateTransferModel.set("customerName",a+" "+o),t.allocateTransferModel.set("customerClass",e.CustomerDetail.Class)}}).error(function(e){var a;e.responseJSON?void 0!=e.responseJSON.Message&&(a=e.responseJSON.Message):a=e.responseJSON,alert(kl.value(t.localeAllocPay+"ajaxCustomerError")+"\n"+a)})},getLedgerAccountsfromCDM:function(){var e=this;Komodo.Services.cachedDataService.fetch("MisallocatedUnallocatedLedgerAccounts").done(function(t){if(t){var a=JSON.parse(t);e.allocateTransferModel.set("ledgerAccountList",[]),$.each(a.MisallocatedUnallocatedLedgerAccounts.MisallocatedUnallocatedLedgerAccount,function(t,a){if(1==a.isAllocated||1==a.isUnallocated||1==a.isInterAccount){var o={Key:a.CanonicalKey,Value:a.CanonicalValue,isAllocated:a.isAllocated,isUnallocated:a.isUnallocated,isInterAccount:a.isInterAccount};e.allocateTransferModel.ledgerAccountList.push(o)}})}}).fail(function(){Komodo.UI.error("[ERROR] : could not retrieve Misallocated Unallocated Ledger Accounts from CDM")})},getJournalCaptureReasonsfromCDM:function(){var e=this;Komodo.Services.cachedDataService.fetch("JournalCaptureReason").done(function(t){if(t){var a=JSON.parse(t);e.allocateTransferModel.set("reasonsForCapture",[]),e.finTranModel.get("enableRefund")?$.each(a.JournalCaptureReasons.JournalCaptureReason,function(t,a){var o={Key:a.CanonicalKey,Value:a.CanonicalValue};e.allocateTransferModel.reasonsForCapture.push(o)}):$.each(t,function(t,a){var o={Key:a.key,Value:a.value};e.allocateTransferModel.reasonsForCapture.push(o)})}}).fail(function(){Komodo.UI.error("[ERROR] : could not retrieve Journal Capture reasons from CDM")})},getLedgerAccounts:function(e){var t=this;e.match(/Unallocated/i)?$.each(t.allocateTransferModel.ledgerAccountList,function(e,a){1==a.isUnallocated&&t.allocateTransferModel.set("LedgerAccount",a.Key)}):$.each(t.allocateTransferModel.ledgerAccountList,function(e,a){t.allocateTransferModel.get("ledgerAccountDescription").match(/Interaccount/i)?1==a.isInteraccount&&t.allocateTransferModel.set("LedgerAccount",a.Key):1==a.isAllocated&&t.allocateTransferModel.set("LedgerAccount",a.Key)})},getServerDateTime:function(){var e=this;Komodo.Services.queryService.getJSON("ServerDateTime/GetServerDateTime",{async:!1}).done(function(t){e.allocateTransferModel.set("iccDateTime",void 0),e.allocateTransferModel.set("iccDateTime",t)}).error(function(t){var a;t.responseJSON?t.responseJSON.Message&&(a=t.responseJSON.Message):a=t.responseJSON,Komodo.Controls.MessageBoxController.show(kl.value(e.localeAllocPay+"ajaxServerDateTime"),a,Komodo.Controls.MessageBoxOkButtons,e,"message","warning")})},publishTransfer:function(){var e=this;e.getServerDateTime();var t=new Date(e.allocateTransferModel.iccDateTime),a=new moment(t).format("YYYY-MM-DDTHH:mm:ss"),o=Komodo.Models.TransferPayment.create(),n=Komodo.Services.manageAccountService,s=Komodo.canonicalFacadeFactory(o,["Country","AmountPaid","FromFinancialTransactionUID","LedgerAccount","CustomerUID","Comments","ToAccountUID","RequestDate","RequestedBy","Language"]),r=Komodo.Models.Price.create();r.set("Value",e.allocateTransferModel.amount),r.set("CurrencyCode","12"),r.set("ValueWithoutTax",e.allocateTransferModel.amount);var i=e.getlistOfTax();r.set("ListOfTax",i),s.set("Country",e.allocateTransferModel.get("country")),s.set("AmountPaid",r),s.set("Comments",e.allocateTransferModel.get("reasonForCapture")+" - "+e.allocateTransferModel.get("comment")),s.set("FromFinancialTransactionUID",e.allocateTransferModel.get("UID")),s.set("LedgerAccount",e.allocateTransferModel.get("LedgerAccount")),s.set("CustomerUID",e.allocateTransferModel.get("custNo")),s.set("ToAccountUID",e.allocateTransferModel.get("toAccountNumber")),s.set("RequestDate",a),s.set("RequestedBy",e.userName()),s.set("Language",this.finTranModel.get("langauge")),e.startNewProcess(),n.publishEvent(e,o,"TransferPayment","v1"),e.showBusyIndicator()},messageTransferPaymentReceived:function(e){Komodo.log(e)},messageTransferPaymentDeliveryFailure:function(e){Komodo.log(e)},messageTransferPaymentFault:function(e){Komodo.log(e)},messagePaymentTransferredReceived:function(e){this.hideBusyIndicator(),"True"==e.ResponseMessage.Payload.IsPendingApproval?(Komodo.Controls.MessageBoxController.show(kl.value(this.localeAllocPay+"transferSuccess"),kl.value(this.localeAllocPay+"approvalRequestCustomers",{amount:e.ResponseMessage.Payload.AmountPaid.Value,fromCustomer:this.allocateTransferModel.get("customerNo"),toCustomer:e.ResponseMessage.Payload.CustomerUID}),null,self,"id123456","success"),this.clearData()):(Komodo.Controls.MessageBoxController.show(kl.value(this.localeAllocPay+"transferSuccess"),kl.value(this.localeAllocPay+"transferCustomerRequest",{amount:e.ResponseMessage.Payload.AmountPaid.Value,fromCustomer:this.allocateTransferModel.get("customerNo"),toCustomer:e.ResponseMessage.Payload.CustomerUID}),null,self,"id123456","success"),this.clearData())},messagePaymentTransferredDeliveryFailure:function(e){Komodo.log(e)},messagePaymentTransferredFault:function(e){Komodo.log(e)},userName:function(){return Komodo.Services.securityService.get("domainUserName").substring(3)},getCountry:function(){return Komodo.Services.uiService.getController("application").get("_selectedCountryId")},getCurrentLanguage:function(){return Komodo.Services.localizationService.getCurrentLanguage()},setFtData:function(){var e=this;e.allocateTransferModel.set("searchByToCustomers",[]),e.allocateTransferModel.get("searchByToCustomers").addObject(Ember.Object.create({title:kl.value(e.localeAllocPay+"customerNumber"),value:"0"})),e.allocateTransferModel.get("searchByToCustomers").addObject(Ember.Object.create({title:kl.value(e.localeAllocPay+"smartcardNumber"),value:"1"})),e.allocateTransferModel.get("searchByToCustomers").addObject(Ember.Object.create({title:kl.value(e.localeAllocPay+"idNumber"),value:"2"})),e.allocateTransferModel.get("searchByToCustomers").addObject(Ember.Object.create({title:kl.value(e.localeAllocPay+"passPort"),value:"3"})),e.allocateTransferModel.get("searchByToCustomers").addObject(Ember.Object.create({title:kl.value(e.localeAllocPay+"accountNumber"),value:"4"})),e.allocateTransferModel.get("searchByToCustomers").addObject(Ember.Object.create({title:kl.value(e.localeAllocPay+"invoice"),value:"5"})),e.allocateTransferModel.get("searchByToCustomers").addObject(Ember.Object.create({title:kl.value(e.localeAllocPay+"cellphone"),value:"6"})),e.allocateTransferModel.get("searchByToCustomers").addObject(Ember.Object.create({title:kl.value(e.localeAllocPay+"deviceNumber"),value:"7"})),e.getLedgerAccountsfromCDM(),e.getJournalCaptureReasonsfromCDM(),e.clearData(),e.registerValidation(),e.allocateTransferModel.set("country",e.getCountry())}}),Komodo.Services.localizationService.registerNamespace("locale.manageaccount"),Komodo.Services.localizationService.registerNamespace("locale.manageAccount.editPaymentDetails"),Komodo.Services.localizationService.registerNamespace("locale.manageAccount.editPaymentDetailsAfrica"),Komodo.Services.localizationService.registerNamespace("locale.manageAccount.paymentPlan"),Komodo.Services.localizationService.registerNamespace("locale.statements"),Komodo.Services.localizationService.registerNamespace("locale.manageAccount.adhocdebitorder");