Ember.TEMPLATES.UnassignPrinterToUserView=Ember.Handlebars.template(function(e,t,s,r,n){function o(e,t){var r;return t.buffer.push("\r\n  \x3c!--Column 1--\x3e\r\n  "),r=s.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:f.noop,fn:f.program(2,a,t),contexts:[e],types:["ID"],data:t}),(r||0===r)&&t.buffer.push(r),t.buffer.push("\r\n  \x3c!--Column 2--\x3e\r\n  "),r=s.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:f.noop,fn:f.program(4,i,t),contexts:[e],types:["ID"],data:t}),(r||0===r)&&t.buffer.push(r),t.buffer.push("\r\n  "),""}function a(e,t){return t.buffer.push("\r\n  "),t.buffer.push(g(s.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.printing:home.printerType~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(g(s.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.printerTypeName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  "),t.buffer.push(g(s.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.printing:home.assetTag~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(g(s.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.assetTag"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function i(e,t){return t.buffer.push("\r\n  "),t.buffer.push(g(s.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.printing:home.printerName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(g(s.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.printerName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  "),t.buffer.push(g(s.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.printing:home.ipAddress~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(g(s.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.ipAddress"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function l(e,t){var r;return t.buffer.push("\r\n  \x3c!--Column 1--\x3e\r\n  "),r=s.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top full-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:f.noop,fn:f.program(7,h,t),contexts:[e],types:["ID"],data:t}),(r||0===r)&&t.buffer.push(r),t.buffer.push("\r\n  "),""}function h(e,t){var r,n,o;return t.buffer.push("\r\n  "),t.buffer.push(g(s.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.printing:home.assignedUsers~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n  <br/>\r\n  <div id="printerView" style="min-height: 50px; max-height: 250px; overflow-x: auto;">\r\n    <table class="table table-bordered komodo-datagrid">\r\n      <thead>\r\n        <tr>\r\n          <th>'),t.buffer.push(g((n=s.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.printing:home.userName",o):m.call(e,"loc","locale.printing:home.userName",o)))),t.buffer.push("</th>\r\n          <th></th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        "),r=s.each.call(e,"row","in","printerUsers",{hash:{},hashTypes:{},hashContexts:{},inverse:f.noop,fn:f.program(8,d,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(r||0===r)&&t.buffer.push(r),t.buffer.push("\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n  "),""}function d(e,t){var r;return t.buffer.push("\r\n        "),r=s.with.call(e,"row",{hash:{},hashTypes:{},hashContexts:{},inverse:f.noop,fn:f.program(9,p,t),contexts:[e],types:["ID"],data:t}),(r||0===r)&&t.buffer.push(r),t.buffer.push("\r\n        "),""}function p(e,t){return t.buffer.push("\r\n        <tr>\r\n          <td>\r\n            "),t.buffer.push(g(s.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"userName",label:"~locale.printing:home.printerName~"},hashTypes:{textBinding:"STRING",label:"STRING"},hashContexts:{textBinding:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n          </td>\r\n          <td>\r\n            "),t.buffer.push(g(s.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"isSelected"},hashTypes:{checkedBinding:"STRING"},hashContexts:{checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n          </td>\r\n        </tr>\r\n        "),""}function u(e,t){var r,n;return t.buffer.push("\r\n    "),t.buffer.push(g((r=s.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},r?r.call(e,"locale.printing:home.unassignPrinter",n):m.call(e,"loc","locale.printing:home.unassignPrinter",n)))),t.buffer.push("\r\n    "),""}this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),n=n||{};var c,g=this.escapeExpression,f=this,m=s.helperMissing;return n.buffer.push('<div style="width:500px;">\r\n  <br/>\r\n  '),c=s.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:f.noop,fn:f.program(1,o,n),contexts:[t],types:["ID"],data:n}),(c||0===c)&&n.buffer.push(c),n.buffer.push("\r\n  <hr/>\r\n  "),c=s.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:f.noop,fn:f.program(6,l,n),contexts:[t],types:["ID"],data:n}),(c||0===c)&&n.buffer.push(c),n.buffer.push('\r\n  <br/>\r\n  <div style="float:right;">\r\n    '),c=s.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"6",action:"unassignPrinter"},hashTypes:{tabindex:"STRING",action:"STRING"},hashContexts:{tabindex:t,action:t},inverse:f.noop,fn:f.program(11,u,n),contexts:[t],types:["ID"],data:n}),(c||0===c)&&n.buffer.push(c),n.buffer.push("\r\n  </div>\r\n  <br/>\r\n</div>"),""}),Komodo.Models.Printing=Ember.Namespace.createWithMixins(LoggingMixin,{name:"Komodo.Models.Printing"}),Komodo.Application.PrinterManagementRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"printerManagement",init:function(){this.useCaseDisplayName=kl.value("locale.printing:home.useCaseTitle"),this._super()}}),Komodo.Application.AssignPrinterRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"assignPrinter",init:function(){this.useCaseDisplayName=kl.value("locale.printing:home.assignPrinterUseCaseTitle"),this._super()}}),Komodo.UI.Route.registerRoutes(function(){this.resource("printerManagement"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.OnlineTill,routeName:"printerManagement",title:kl.value("locale.printing:home.addPrinterUseCaseTitle"),type:Komodo.NavigationTypes.Normal,desiredLocation:10}),this.resource("assignPrinter"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.OnlineTill,routeName:"assignPrinter",title:kl.value("locale.printing:home.assignPrinterUseCaseTitle"),type:Komodo.NavigationTypes.Normal,desiredLocation:11})}),Komodo.Services.PrintingService=Ember.Object.extend({publishPrintingEvent:function(e,t,s,r,n){e.startNewProcess(),n=void 0!==n&&n;var o=$.Deferred(),a={eventName:s,eventVersion:r,eventValidityInMinutes:0,eventPriority:null,fireAndForget:n};return e.sendMessage(t,a).done(function(){o.resolve(),Komodo.log(s+" is done.")}).fail(function(e){o.fail(e),Komodo.log(s+" is failed.")}),o}}),Ember.TEMPLATES.PrinterManagementView=Ember.Handlebars.template(function(e,t,s,r,n){function o(e,t){var r,n,o;return t.buffer.push('\r\n  <table width="100%">\r\n    <tr>\r\n      <td class="komodo-search">\r\n        '),t.buffer.push(g(s.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.printing:home.assetTag~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        <br/>\r\n        "),t.buffer.push(g(s.view.call(e,"Komodo.Controls.CoreTextField",{hash:{tabindex:"1",valueBinding:"data.searchAssetTag"},hashTypes:{tabindex:"STRING",valueBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),r=s.view.call(e,"Komodo.Controls.Button",{hash:{tabindex:"2",action:"searchPrinters",size:"nextto-control"},hashTypes:{tabindex:"STRING",action:"STRING",size:"STRING"},hashContexts:{tabindex:e,action:e,size:e},inverse:f.noop,fn:f.program(2,a,t),contexts:[e],types:["ID"],data:t}),(r||0===r)&&t.buffer.push(r),t.buffer.push('\r\n      </td>\r\n    </tr>\r\n  </table>\r\n  <hr />\r\n  <table width="100%" class="otp-tbl-data" style="margin: 0">\r\n    <tr>\r\n      <td>\r\n        '),t.buffer.push(g(s.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.printing:home.printers~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" "),t.buffer.push(g(s.view.call(e,"Komodo.Controls.Link",{hash:{tabindex:"3",action:"addNewPrinter",text:"~locale.printing:home.addButton~"},hashTypes:{tabindex:"STRING",action:"STRING",text:"STRING"},hashContexts:{tabindex:e,action:e,text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n    </tr>\r\n    <tr>\r\n      <td>\r\n        <table id="printersGrid" class="table table-bordered komodo-datagrid">\r\n          <thead>\r\n            <tr>\r\n              <th>'),t.buffer.push(g((n=s.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.printing:home.printerName",o):c.call(e,"loc","locale.printing:home.printerName",o)))),t.buffer.push("</th>\r\n              <th>"),t.buffer.push(g((n=s.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.printing:home.printerType",o):c.call(e,"loc","locale.printing:home.printerType",o)))),t.buffer.push("</th>\r\n              <th>"),t.buffer.push(g((n=s.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.printing:home.assetTag",o):c.call(e,"loc","locale.printing:home.assetTag",o)))),t.buffer.push("</th>\r\n              <th>"),t.buffer.push(g((n=s.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.printing:home.ipAddress",o):c.call(e,"loc","locale.printing:home.ipAddress",o)))),t.buffer.push("</th>\r\n              <th>"),t.buffer.push(g((n=s.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.printing:home.actions",o):c.call(e,"loc","locale.printing:home.actions",o)))),t.buffer.push("</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            "),r=s.each.call(e,"item","in","virtualPrintersPagerPageContent",{hash:{},hashTypes:{},hashContexts:{},inverse:f.noop,fn:f.program(4,i,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(r||0===r)&&t.buffer.push(r),t.buffer.push("\r\n          </tbody>\r\n        </table>\r\n        "),r=s.if.call(e,"showPager",{hash:{},hashTypes:{},hashContexts:{},inverse:f.noop,fn:f.program(7,h,t),contexts:[e],types:["ID"],data:t}),(r||0===r)&&t.buffer.push(r),t.buffer.push("\r\n      </td>\r\n    </tr>\r\n  </table>\r\n  <br/>\r\n  "),""}function a(e,t){var r,n;return t.buffer.push("\r\n        "),t.buffer.push(g((r=s.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},r?r.call(e,"locale.onlinetill:customer.search",n):c.call(e,"loc","locale.onlinetill:customer.search",n)))),t.buffer.push("\r\n        "),""}function i(e,t){var r;return t.buffer.push("\r\n            <tr>\r\n              <td>"),r=s._triageMustache.call(e,"item.printerName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(r||0===r)&&t.buffer.push(r),t.buffer.push("</td>\r\n              <td>"),r=s._triageMustache.call(e,"item.printerTypeName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(r||0===r)&&t.buffer.push(r),t.buffer.push("</td>\r\n              <td>"),r=s._triageMustache.call(e,"item.assetTag",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(r||0===r)&&t.buffer.push(r),t.buffer.push("</td>\r\n              <td>"),r=s._triageMustache.call(e,"item.ipAddress",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(r||0===r)&&t.buffer.push(r),t.buffer.push("</td>\r\n              <td>\r\n                "),r=s.view.call(e,"Komodo.Controls.Button",{hash:{action:"editPrinter",size:"xs",tabindex:"3"},hashTypes:{action:"STRING",size:"STRING",tabindex:"STRING"},hashContexts:{action:e,size:e,tabindex:e},inverse:f.noop,fn:f.program(5,l,t),contexts:[e],types:["ID"],data:t}),(r||0===r)&&t.buffer.push(r),t.buffer.push("\r\n              </td>\r\n            </tr>\r\n            "),""}function l(e,t){var r,n;return t.buffer.push("\r\n                "),t.buffer.push(g((r=s.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},r?r.call(e,"locale.printing:home.edit",n):c.call(e,"loc","locale.printing:home.edit",n)))),t.buffer.push("\r\n                "),""}function h(e,t){return t.buffer.push("\r\n        "),t.buffer.push(g(s.view.call(e,"Komodo.Controls.Pager",{hash:{mode:"virtual",contentLengthBinding:"contentLength",pageSelectedAction:"pageSelected",itemsPerPage:"10",visiblePageCount:"2"},hashTypes:{mode:"STRING",contentLengthBinding:"STRING",pageSelectedAction:"STRING",itemsPerPage:"STRING",visiblePageCount:"STRING"},hashContexts:{mode:e,contentLengthBinding:e,pageSelectedAction:e,itemsPerPage:e,visiblePageCount:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),""}this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),n=n||{};var d,p,u,c=s.helperMissing,g=this.escapeExpression,f=this;return n.buffer.push('<div class="no-banner-padding">\r\n  <table width="100%">\r\n    <tr>\r\n      <td>\r\n        <p class="komodo-heading">'),n.buffer.push(g((p=s.loc||t&&t.loc,u={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},p?p.call(t,"locale.printing:home.addPrinterUseCaseTitle",u):c.call(t,"loc","locale.printing:home.addPrinterUseCaseTitle",u)))),n.buffer.push('</p>\r\n      </td>\r\n      <td align="right">\r\n        '),n.buffer.push(g(s.view.call(t,"Komodo.Controls.Link",{hash:{tabindex:"8",text:"~locale.onlinetill:home.back~",href:"#/home"},hashTypes:{tabindex:"STRING",text:"STRING",href:"STRING"},hashContexts:{tabindex:t,text:t,href:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push("\r\n      </td>\r\n    </tr>\r\n  </table>\r\n  <hr />\r\n  "),d=s.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.printing:home.ctitle~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:f.noop,fn:f.program(1,o,n),contexts:[t],types:["ID"],data:n}),(d||0===d)&&n.buffer.push(d),n.buffer.push("\r\n</div>"),""}),Ember.TEMPLATES.AssignPrinterToUserView=Ember.Handlebars.template(function(e,t,s,r,n){function o(e,t){var r;return t.buffer.push("\r\n  \x3c!--Column 1--\x3e\r\n  "),r=s.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:c.noop,fn:c.program(2,a,t),contexts:[e],types:["ID"],data:t}),(r||0===r)&&t.buffer.push(r),t.buffer.push("\r\n  \x3c!--Column 2--\x3e\r\n  "),r=s.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:c.noop,fn:c.program(4,i,t),contexts:[e],types:["ID"],data:t}),(r||0===r)&&t.buffer.push(r),t.buffer.push("\r\n  "),""}function a(e,t){return t.buffer.push("\r\n  "),t.buffer.push(u(s.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.printing:home.printerType~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(u(s.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.printerTypeName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  "),t.buffer.push(u(s.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.printing:home.assetTag~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(u(s.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.assetTag"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function i(e,t){return t.buffer.push("\r\n  "),t.buffer.push(u(s.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.printing:home.printerName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(u(s.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.printerName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  "),t.buffer.push(u(s.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.printing:home.ipAddress~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(u(s.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.ipAddress"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function l(e,t){var r;return t.buffer.push("\r\n  \x3c!--Column 1--\x3e\r\n  "),r=s.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:c.noop,fn:c.program(7,h,t),contexts:[e],types:["ID"],data:t}),(r||0===r)&&t.buffer.push(r),t.buffer.push("\r\n  "),""}function h(e,t){return t.buffer.push("\r\n  "),t.buffer.push(u(s.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.printing:home.assignPrinterTitle~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  "),t.buffer.push(u(s.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"201",valueBinding:"data.userName",label:"~locale.printing:home.userName~"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function d(e,t){var r,n;return t.buffer.push("\r\n    "),t.buffer.push(u((r=s.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},r?r.call(e,"locale.printing:home.assignPrinter",n):g.call(e,"loc","locale.printing:home.assignPrinter",n)))),t.buffer.push("\r\n    "),""}this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),n=n||{};var p,u=this.escapeExpression,c=this,g=s.helperMissing;return n.buffer.push('<div style="width:500px;">\r\n  <br/>\r\n  '),p=s.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:c.noop,fn:c.program(1,o,n),contexts:[t],types:["ID"],data:n}),(p||0===p)&&n.buffer.push(p),n.buffer.push("\r\n  <hr/>\r\n  "),p=s.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:c.noop,fn:c.program(6,l,n),contexts:[t],types:["ID"],data:n}),(p||0===p)&&n.buffer.push(p),n.buffer.push('\r\n  <br/>\r\n  <div style="float:right;">\r\n    '),p=s.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"202",action:"assignPrinter"},hashTypes:{tabindex:"STRING",action:"STRING"},hashContexts:{tabindex:t,action:t},inverse:c.noop,fn:c.program(9,d,n),contexts:[t],types:["ID"],data:n}),(p||0===p)&&n.buffer.push(p),n.buffer.push("\r\n  </div>\r\n  <br/>\r\n</div>"),""}),Ember.TEMPLATES.AssignPrinterView=Ember.Handlebars.template(function(e,t,s,r,n){function o(e,t){var r,n,o;return t.buffer.push('\r\n  <table width="100%">\r\n    <tr>\r\n      <td class="komodo-search">\r\n        '),t.buffer.push(f(s.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.printing:home.assetTag~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        <br/>\r\n        "),t.buffer.push(f(s.view.call(e,"Komodo.Controls.CoreTextField",{hash:{tabindex:"1",valueBinding:"data.searchAssetTag"},hashTypes:{tabindex:"STRING",valueBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),r=s.view.call(e,"Komodo.Controls.Button",{hash:{tabindex:"2",action:"searchPrinters",size:"nextto-control"},hashTypes:{tabindex:"STRING",action:"STRING",size:"STRING"},hashContexts:{tabindex:e,action:e,size:e},inverse:m.noop,fn:m.program(2,a,t),contexts:[e],types:["ID"],data:t}),(r||0===r)&&t.buffer.push(r),t.buffer.push('\r\n      </td>\r\n    </tr>\r\n  </table>\r\n  <hr />\r\n  <table width="100%" class="otp-tbl-data" style="margin: 0">\r\n    <tr>\r\n      <td>\r\n        '),t.buffer.push(f(s.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.printing:home.printers~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      </td>\r\n    </tr>\r\n    <tr>\r\n      <td>\r\n        <table id="printersGrid" class="table table-bordered komodo-datagrid">\r\n          <thead>\r\n            <tr>\r\n              <th>'),t.buffer.push(f((n=s.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.printing:home.printerName",o):g.call(e,"loc","locale.printing:home.printerName",o)))),t.buffer.push("</th>\r\n              <th>"),t.buffer.push(f((n=s.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.printing:home.printerType",o):g.call(e,"loc","locale.printing:home.printerType",o)))),t.buffer.push("</th>\r\n              <th>"),t.buffer.push(f((n=s.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.printing:home.assetTag",o):g.call(e,"loc","locale.printing:home.assetTag",o)))),t.buffer.push("</th>\r\n              <th>"),t.buffer.push(f((n=s.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.printing:home.ipAddress",o):g.call(e,"loc","locale.printing:home.ipAddress",o)))),t.buffer.push("</th>\r\n              <th>"),t.buffer.push(f((n=s.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},n?n.call(e,"locale.printing:home.actions",o):g.call(e,"loc","locale.printing:home.actions",o)))),t.buffer.push("</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            "),r=s.each.call(e,"item","in","virtualPrintersPagerPageContent",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(4,i,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(r||0===r)&&t.buffer.push(r),t.buffer.push("\r\n          </tbody>\r\n        </table>\r\n        "),r=s.if.call(e,"showPager",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(9,d,t),contexts:[e],types:["ID"],data:t}),(r||0===r)&&t.buffer.push(r),t.buffer.push("\r\n      </td>\r\n    </tr>\r\n  </table>\r\n  <br/>\r\n  "),""}function a(e,t){var r,n;return t.buffer.push("\r\n        "),t.buffer.push(f((r=s.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},r?r.call(e,"locale.onlinetill:customer.search",n):g.call(e,"loc","locale.onlinetill:customer.search",n)))),t.buffer.push("\r\n        "),""}function i(e,t){var r;return t.buffer.push("\r\n            <tr>\r\n              <td>"),r=s._triageMustache.call(e,"item.printerName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(r||0===r)&&t.buffer.push(r),t.buffer.push("</td>\r\n              <td>"),r=s._triageMustache.call(e,"item.printerTypeName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(r||0===r)&&t.buffer.push(r),t.buffer.push("</td>\r\n              <td>"),r=s._triageMustache.call(e,"item.assetTag",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(r||0===r)&&t.buffer.push(r),t.buffer.push("</td>\r\n              <td>"),r=s._triageMustache.call(e,"item.ipAddress",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(r||0===r)&&t.buffer.push(r),t.buffer.push("</td>\r\n              <td>\r\n                "),r=s.view.call(e,"Komodo.Controls.Button",{hash:{action:"assignPrinterToUser",size:"xs",tabindex:"3"},hashTypes:{action:"STRING",size:"STRING",tabindex:"STRING"},hashContexts:{action:e,size:e,tabindex:e},inverse:m.noop,fn:m.program(5,l,t),contexts:[e],types:["ID"],data:t}),(r||0===r)&&t.buffer.push(r),t.buffer.push("\r\n\r\n                "),r=s.view.call(e,"Komodo.Controls.Button",{hash:{action:"unassignPrinterToUser",size:"xs",tabindex:"4"},hashTypes:{action:"STRING",size:"STRING",tabindex:"STRING"},hashContexts:{action:e,size:e,tabindex:e},inverse:m.noop,fn:m.program(7,h,t),contexts:[e],types:["ID"],data:t}),(r||0===r)&&t.buffer.push(r),t.buffer.push("\r\n              </td>\r\n            </tr>\r\n            "),""}function l(e,t){var r,n;return t.buffer.push("\r\n                "),t.buffer.push(f((r=s.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},r?r.call(e,"locale.printing:home.assignPrinter",n):g.call(e,"loc","locale.printing:home.assignPrinter",n)))),t.buffer.push("\r\n                "),""}function h(e,t){var r,n;return t.buffer.push("\r\n                "),t.buffer.push(f((r=s.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},r?r.call(e,"locale.printing:home.unassignPrinter",n):g.call(e,"loc","locale.printing:home.unassignPrinter",n)))),t.buffer.push("\r\n                "),""}function d(e,t){return t.buffer.push("\r\n        "),t.buffer.push(f(s.view.call(e,"Komodo.Controls.Pager",{hash:{mode:"virtual",contentLengthBinding:"contentLength",pageSelectedAction:"pageSelected",itemsPerPage:"10",visiblePageCount:"2"},hashTypes:{mode:"STRING",contentLengthBinding:"STRING",pageSelectedAction:"STRING",itemsPerPage:"STRING",visiblePageCount:"STRING"},hashContexts:{mode:e,contentLengthBinding:e,pageSelectedAction:e,itemsPerPage:e,visiblePageCount:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),""}this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),n=n||{};var p,u,c,g=s.helperMissing,f=this.escapeExpression,m=this;return n.buffer.push('<div class="no-banner-padding">\r\n  <table width="100%">\r\n    <tr>\r\n      <td>\r\n        <p class="komodo-heading">'),n.buffer.push(f((u=s.loc||t&&t.loc,c={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:n},u?u.call(t,"locale.printing:home.assignPrinterUseCaseTitle",c):g.call(t,"loc","locale.printing:home.assignPrinterUseCaseTitle",c)))),n.buffer.push('</p>\r\n      </td>\r\n      <td align="right">\r\n        '),n.buffer.push(f(s.view.call(t,"Komodo.Controls.Link",{hash:{tabindex:"4",text:"~locale.onlinetill:home.back~",href:"#/home"},hashTypes:{tabindex:"STRING",text:"STRING",href:"STRING"},hashContexts:{tabindex:t,text:t,href:t},contexts:[t],types:["ID"],data:n}))),n.buffer.push("\r\n      </td>\r\n    </tr>\r\n  </table>\r\n  <hr />\r\n  "),p=s.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.printing:home.ctitle~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:m.noop,fn:m.program(1,o,n),contexts:[t],types:["ID"],data:n}),(p||0===p)&&n.buffer.push(p),n.buffer.push("\r\n</div>"),""}),Ember.TEMPLATES.EditPrinterView=Ember.Handlebars.template(function(e,t,s,r,n){function o(e,t){var r;return t.buffer.push("\r\n  \x3c!--Column 1--\x3e\r\n  "),r=s.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:g.noop,fn:g.program(2,a,t),contexts:[e],types:["ID"],data:t}),(r||0===r)&&t.buffer.push(r),t.buffer.push("\r\n  \x3c!--Column 2--\x3e\r\n  "),r=s.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:g.noop,fn:g.program(4,i,t),contexts:[e],types:["ID"],data:t}),(r||0===r)&&t.buffer.push(r),t.buffer.push("\r\n  "),""}function a(e,t){return t.buffer.push("\r\n  "),t.buffer.push(c(s.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"1",valueBinding:"data.printerType",contentBinding:"printerTypes",optionLabelPath:"content.name",optionValuePath:"content.UID",prompt:"~locale.printing:home.selectPrinterType~",label:"~locale.printing:home.printerType~",validatorBinding:"validators.printerTypeValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),t.buffer.push(c(s.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"2",valueBinding:"data.printerName",label:"~locale.printing:home.printerName~",validatorBinding:"validators.printerNameValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),t.buffer.push(c(s.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"3",valueBinding:"data.assetTag",label:"~locale.printing:home.assetTag~",validatorBinding:"validators.assetTagValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),t.buffer.push(c(s.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"4",valueBinding:"data.ipAddress",label:"~locale.printing:home.ipAddress~",validatorBinding:"validators.ipAddressValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),t.buffer.push(c(s.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.printing:home.isActive~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),t.buffer.push(c(s.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"data.isActive",tabindex:"5"},hashTypes:{checkedBinding:"STRING",tabindex:"STRING"},hashContexts:{checkedBinding:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function i(e,t){
return t.buffer.push("\r\n  "),t.buffer.push(c(s.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.printing:home.printerLayout~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(":<br/>\r\n    "),t.buffer.push(c(s.view.call(e,"Komodo.Controls.CoreTextArea",{hash:{tabindex:"6",valueBinding:"data.printerLayout",rows:"22",class:"col-xs-12",validatorBinding:"validators.printerLayoutValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",rows:"STRING",class:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,rows:e,class:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br/>\r\n  "),t.buffer.push(c(s.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.printerLayoutValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function l(e,t){var r;return t.buffer.push("\r\n      "),r=s.view.call(e,"Komodo.Controls.Button",{hash:{tabindex:"7",action:"updatePrinter"},hashTypes:{tabindex:"STRING",action:"STRING"},hashContexts:{tabindex:e,action:e},inverse:g.noop,fn:g.program(7,h,t),contexts:[e],types:["ID"],data:t}),(r||0===r)&&t.buffer.push(r),t.buffer.push("\r\n    "),""}function h(e,t){var r,n;return t.buffer.push("\r\n      "),t.buffer.push(c((r=s.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},r?r.call(e,"locale.printing:home.updatePrinter",n):f.call(e,"loc","locale.printing:home.updatePrinter",n)))),t.buffer.push("\r\n      "),""}function d(e,t){var r;return t.buffer.push("\r\n      "),r=s.view.call(e,"Komodo.Controls.Button",{hash:{tabindex:"8",action:"addPrinter"},hashTypes:{tabindex:"STRING",action:"STRING"},hashContexts:{tabindex:e,action:e},inverse:g.noop,fn:g.program(10,p,t),contexts:[e],types:["ID"],data:t}),(r||0===r)&&t.buffer.push(r),t.buffer.push("\r\n    "),""}function p(e,t){var r,n;return t.buffer.push("\r\n      "),t.buffer.push(c((r=s.loc||e&&e.loc,n={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},r?r.call(e,"locale.printing:home.addPrinter",n):f.call(e,"loc","locale.printing:home.addPrinter",n)))),t.buffer.push("\r\n      "),""}this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,Ember.Handlebars.helpers),n=n||{};var u,c=this.escapeExpression,g=this,f=s.helperMissing;return n.buffer.push('<div class="modal-max-size" style="overflow-x: auto;">\r\n  '),u=s.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:g.noop,fn:g.program(1,o,n),contexts:[t],types:["ID"],data:n}),(u||0===u)&&n.buffer.push(u),n.buffer.push("\r\n\r\n  <div>\r\n    "),u=s.if.call(t,"data.isUpdateButtonVisible",{hash:{},hashTypes:{},hashContexts:{},inverse:g.program(9,d,n),fn:g.program(6,l,n),contexts:[t],types:["ID"],data:n}),(u||0===u)&&n.buffer.push(u),n.buffer.push("\r\n  </div>\r\n</div>"),""}),Komodo.Models.Printing=Ember.Namespace.createWithMixins(LoggingMixin,{name:"Komodo.Models.Printing"}),Komodo.Models.Printing.PrinterUser=Ember.Object.extend({init:function(){this.printerId="",this.userId="",this.userName="",this.isSelected="",this._super()}}),Komodo.Models.Printing.PrintingModel=Ember.Object.extend({_localeBase:"locale.printing:",init:function(){this.UID="",this.printerName="",this.printerType="",this.printerTypeName="",this.assetTag="",this.ipAddress="",this.isActive=!1,this.printerLayout="",this.searchAssetTag="",this.userName="",this.printerUsers=[],this._super()},selectedGridItem:void 0,commandGridItem:void 0,commandGridItemType:void 0,isUpdateButtonVisible:!1,printers:[]}),Komodo.Application.UnassignPrinterToUserView=Komodo.UI.View.extend({viewKey:"UnassignPrinterToUserView"}),Komodo.Application.AssignPrinterView=Komodo.UI.View.extend({viewKey:"AssignPrinterView"}),Komodo.Application.AssignPrinterToUserView=Komodo.UI.View.extend({viewKey:"AssignPrinterToUserView"}),Komodo.Application.EditPrinterView=Komodo.UI.View.extend({viewKey:"EditPrinterView"}),Komodo.Models.Printing.PrinterTypesModel=Ember.Object.extend({init:function(){this.UID="",this.name="",this.isActive=!1,this._super()}}),Komodo.Application.PrinterManagementView=Komodo.UI.View.extend({viewKey:"PrinterManagementView"}),Komodo.Application.PrinterManagementController=Komodo.UI.Controller.extend({_localeBase:"locale.printing:",pageSize:20,itemsPerPage:10,init:function(){Komodo.log("Constructing Manage Printers controller"),this.set("processVersion","v1.1"),this.set("processName","Manage Printers process"),this._super()},start:function(){this._super(),this.registerModel("data",Komodo.Models.OnlineTill.PrintingModel),this.clearModelData();var e=this.get("data");this.registerValidator(e,"printerType",{isRequired:!0,type:"string"}),this.registerValidator(e,"printerName",{isRequired:!0,type:"string",minLength:2,maxLength:50,regExPattern:"^[0-9a-zA-Z \\\\\\/_-]*$",functions:Komodo.UI.Validators.shouldNotStartWithSpace}),this.registerValidator(e,"assetTag",{isRequired:!0,type:"string",minLength:2,maxLength:100,regExPattern:"^[0-9a-zA-Z \\\\\\/_-]*$",functions:Komodo.UI.Validators.shouldNotStartWithSpace}),this.registerValidator(e,"ipAddress",{isRequired:!0,type:"string",regExPattern:"^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$"}),this.registerValidator(e,"printerLayout",{isRequired:!0,displayName:kl.value(this._localeBase+"home.printerLayout")}),void 0===this.get("printerTypes")&&this.retrievePrinterTypesEvent(!0)},stop:function(){this._super()},clearModelData:function(){var e=this.get("data");e.set("UID",""),e.set("printerName",""),e.set("assetTag",""),e.set("ipAddress",""),e.set("isActive",!0),e.set("printerLayout",""),e.set("searchAssetTag",""),e.set("userName",""),e.set("isUpdateButtonVisible",!1),e.set("printers",[])},userName:function(){return Komodo.Services.securityService.get("domainUserName").substring(3)},setCountryUserName:function(e){var t=Komodo.Services.uiService.getController("application").get("_selectedCountryId");e.set("Country",t),e.set("UserName",this.userName())},addPrinter:function(){var e=this,t=e.get("data");t.set("UID",""),t.set("printerType",""),t.set("printerName",""),t.set("assetTag",""),t.set("ipAddress",""),t.set("printerLayout",""),t.set("isActive",!0),t.set("isUpdateButtonVisible",!1),Komodo.Services.uiService.showModalPopup(kl.value(e._localeBase+"home.addPrinter"),"editPrinter",{canUserClose:!0,shouldStartAndStopController:!1,context:e})},editPrinter:function(e){var t=this,s=t.get("data");s.set("commandGridItem",e._parentView.content),t.retrievePrinterEvent(s.commandGridItem.UID,!0)},validatePrinter:function(){var e=!0,t=this,s=this.get("data"),r=this.get("_validationService");return r.clearErrors(),!1!==r.validateModel(this,s,this.get("validators"))&&(void 0===s.printerLayout||""===s.printerLayout?(Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"home.addPrinterUseCaseTitle"),kl.value(t._localeBase+"home.msgLayoutValidation"),Komodo.Controls.MessageBoxOkButtons,this,"modelPrinter","danger"),e=!1):(void 0===s.UID&&$(s.printers).each(function(r,n){return n.PrinterName===s.printerName?(Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"home.addPrinterUseCaseTitle"),kl.value(t._localeBase+"home.msgNameValidation"),Komodo.Controls.MessageBoxOkButtons,this,"modelPrinter","danger"),void(e=!1)):n.AssetTag===s.assetTag?(Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"home.addPrinterUseCaseTitle"),kl.value(t._localeBase+"home.msgAssetTagValidation"),Komodo.Controls.MessageBoxOkButtons,this,"modelPrinter","danger"),void(e=!1)):n.IPAddress===s.ipAddress?(Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"home.addPrinterUseCaseTitle"),kl.value(t._localeBase+"home.msgIPAddressValidation"),Komodo.Controls.MessageBoxOkButtons,this,"modelPrinter","danger"),void(e=!1)):void 0}),void 0!==s.isActive&&""!==s.isActive||s.set("isActive",!1)),e)},searchPrinters:function(){var e=this.get("data");e.set("printers",[]),this.set("pageNumber",0),this.searchText=e.searchAssetTag,this.retrievePrintersEvent(1,!0)},populatePrinterTypeModel:function(e){var t=[];return $($.makeArray(e)).each(function(e,s){var r=Komodo.Models.Printing.PrinterTypesModel.create();r.set("UID",s.Id),r.set("name",s.Name),r.set("isActive",s.IsActive),t.pushObject(r)}),t},populatePrinterModel:function(e){var t=[],s=this;return $($.makeArray(e)).each(function(e,r){var n=Komodo.Models.Printing.PrintingModel.create();if(n.set("UID",r.Id),n.set("printerName",r.PrinterName),n.set("assetTag",r.AssetTag),n.set("ipAddress",r.IPAddress),n.set("isActive",r.IsActive),n.set("printerLayout",r.DefaultLayout),n.set("printerUsers",r.PrinterUsers),void 0!==s.printerTypes){var o=$.grep(s.printerTypes,function(e){return e.UID.toString()===r.PrinterType.toString()});o.length>0&&(n.set("printerType",o[0]),n.set("printerTypeName",o[0].name))}t.pushObject(n)}),t},printersChanged:function(){var e=this,t=e.get("data");void 0===t||null===t||void 0===t.printers||null===t.printers||0===t.printers.length?(e.set("virtualPrintersPagerPageContent",Ember.A()),e.set("contentLength",1)):(e.set("contentLength",t.printers.length),t.printers.length<=e.itemsPerPage&&this.set("virtualPrintersPagerPageContent",this.get("data.printers")))}.observes("data.printers"),showPager:function(){var e=this;return e.contentLength>e.itemsPerPage}.property("contentLength"),showErrorPopup:function(e,t){var s=this,r=JSON.stringify(t);Komodo.log(e+" ajax call failed. Error: "+r),t&&"string"===$.type(t.responseJSON)?Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),t.responseJSON,Komodo.Controls.MessageBoxOkButtons,s,"id5446673","danger"):t.responseJSON&&t.responseJSON.ExceptionMessage?Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),t.responseJSON.ExceptionMessage,Komodo.Controls.MessageBoxOkButtons,s,"id5446673","danger"):t.statusText?Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),t.statusText,Komodo.Controls.MessageBoxOkButtons,s,"id5446673","danger"):Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),JSON.stringify(t),Komodo.Controls.MessageBoxOkButtons,s,"id5446673","danger")},showBlockingBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,15e3,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},retrievePrinterTypesEvent:function(e){var t=this;e&&t.showBlockingBusyIndicator(),Komodo.Services.queryService.getJSON("/PointOfSale/RetrievePrinterTypes").done(function(e){void 0!==e&&null!==e&&void 0!==e.PrinterTypes?t.set("printerTypes",t.populatePrinterTypeModel(e.PrinterTypes)):t.set("printerTypes",void 0),t.hideBusyIndicator()}).error(function(e){var s=JSON.stringify(e);Komodo.log("retrievePrinterTypes ajax call failed. Error: "+s),t.hideBusyIndicator()})},messagePrinterTypesRetrievedEventReceived:function(e){if(void 0!==e.ResponseMessage.Payload.PrinterTypes){var t=[];$($.makeArray(e.ResponseMessage.Payload.PrinterTypes)).each(function(e,s){var r=Komodo.Models.Printing.PrinterTypesModel.create();r.set("UID",s.UID),r.set("name",s.Name),r.set("isActive",s.IsActive),t.pushObject(r)}),this.set("printerTypes",t),this.hideBusyIndicator()}else this.set("printerTypes",void 0)},retrievePrinterEvent:function(e,t){var s=this,r=s.get("data");t&&s.showBlockingBusyIndicator();var n="printerId="+e+"&deepLoad=true&page=0&pageSize=0";Komodo.Services.queryService.getJSON("/PointOfSale/RetrievePrinters?"+n).done(function(e){if(s.hideBusyIndicator(),void 0!==e&&null!==e&&void 0!==e.Printers){var t=s.populatePrinterModel(e.Printers);t&&t.length>0&&(r.set("UID",t[0].UID),r.set("printerType",t[0].printerType.UID),r.set("printerName",t[0].printerName),r.set("assetTag",t[0].assetTag),r.set("ipAddress",t[0].ipAddress),r.set("printerLayout",unescape(void 0===t[0].printerLayout?"":t[0].printerLayout)),r.set("isActive","true"===t[0].isActive||!0===t[0].isActive),r.set("isUpdateButtonVisible",!0),Komodo.Services.uiService.showModalPopup(kl.value(s._localeBase+"home.updatePrinter"),"editPrinter",{canUserClose:!0,shouldStartAndStopController:!1,context:s}))}}).error(function(e){s.showErrorPopup("retrievePrinter",e),s.hideBusyIndicator()})},retrievePrintersEvent:function(e,t){var s=this,r=s.get("data");t&&s.showBlockingBusyIndicator();var n="assetTag="+s.searchText+"&deepLoad=false";n=n+"&page="+e+"&pageSize="+s.pageSize,Komodo.Services.queryService.getJSON("/PointOfSale/RetrievePrinters?"+n).done(function(n){if(void 0!==n&&null!==n){var o=r.get("printers");void 0!==n.Printers&&r.set("printers",o.concat(s.populatePrinterModel(n.Printers))),!0!==n.More&&"true"!==n.More||s.retrievePrintersEvent(e+1,!1)}t&&s.hideBusyIndicator()}).error(function(e){s.showErrorPopup("retrievePrinters",e),s.hideBusyIndicator()})},messagePrintersRetrievedEventReceived:function(e){var t=this,s=t.get("data").printers;s.clear(),void 0!==e.ResponseMessage.Payload.Printers?$(e.ResponseMessage.Payload.Printers).each(function(e,r){var n=Komodo.Models.Printing.PrintingModel.create();if(n.set("UID",r.UID),n.set("printerName",r.PrinterName),n.set("assetTag",r.AssetTag),n.set("ipAddress",r.IPAddress),n.set("isActive",r.IsActive),n.set("printerLayout",r.Layout),n.set("printerUsers",r.PrinterUsers),void 0!==t.printerTypes){var o=$.grep(t.printerTypes,function(e){return e.UID===r.PrinterType});o.length>0&&(n.set("printerType",o[0]),n.set("printerTypeName",o[0].Name))}s.pushObject(n)}):Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"home.assignPrinterUseCaseTitle"),kl.value(t._localeBase+"home.msgNoPrinterValidation"),Komodo.Controls.MessageBoxOkButtons,this,"modelPrinter"),this.hideBusyIndicator()},addUpdatePrinter:function(){if(this.validatePrinter()){var e=this.get("data"),t=Komodo.Models.AddUpdateOLTPrinter.create();Komodo.canonicalFacadeFactory(t,["Country","UserName","UID","PrinterType","PrinterName","AssetTag","IPAddress","IsActive","PrinterLayout"]),this.setCountryUserName(t),t.set("UID",void 0!==e.UID&&""!==e.UID?e.UID:"0"),t.set("PrinterType",e.printerType),t.set("PrinterName",e.printerName),t.set("AssetTag",e.assetTag),t.set("IPAddress",e.ipAddress),t.set("IsActive",e.isActive),t.set("PrinterLayout",escape(e.printerLayout)),(new Komodo.Services.PrintingService).publishPrintingEvent(this,t,"AddUpdatePrinterEvent","v1",!1),this.showBlockingBusyIndicator()}},messagePrinterAddedUpdatedEventReceived:function(){var e=this;e.get("data").set("printers",[]),e.retrievePrintersEvent(1,!1),Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"home.addPrinterUseCaseTitle"),kl.value(e._localeBase+"home.msgPrinterAddedUpdated"),Komodo.Controls.MessageBoxOkButtons,this,"modelPrinter","success"),e.hideBusyIndicator()},messageFailureMessageEventReceived:function(e){var t=this;t.hideBusyIndicator();var s=kl.value(t._localeBase+"home.technicalError");void 0!==e.ResponseMessage.Payload&&void 0!==e.ResponseMessage.Payload.ListOfErrorDetails&&(s="",$(e.ResponseMessage.Payload.ListOfErrorDetails).each(function(e,t){s+=t.ErrorDescription})),Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"home.addPrinterUseCaseTitle"),s,Komodo.Controls.MessageBoxOkButtons,this,"modelPrinter","danger")},messageReceived:function(e){this.hideBusyIndicator(),Komodo.UI.log("[PrinterManagementController.messageReceived] : event name = "+e.ResponseMessage.EventName)},messageDeliveryFailure:function(e){this.hideBusyIndicator(),Komodo.UI.warn("[PrinterManagementController.messageDeliveryFailure] : messageId = "+e.messageId)},messageFault:function(e){this.hideBusyIndicator(),Komodo.UI.error("[PrinterManagementController.messageFault] : messageId = "+e.messageId)},contentLength:1,pageNumber:0,virtualPrintersPagerPageContent:Ember.A(),actions:{newProcess:function(){this.startNewProcess()},showBlockingBusyIndicator:function(){this.showBlockingBusyIndicator()},hideBusyIndicator:function(){this.hideBusyIndicator()},searchPrinters:function(){this.searchPrinters()},addNewPrinter:function(){this.addPrinter()},editPrinter:function(e){this.editPrinter(e)},addPrinter:function(){this.addUpdatePrinter()},updatePrinter:function(){this.addUpdatePrinter()},pageSelected:function(e){this.get("pageNumber")!==e.pageNumber&&(this.set("virtualPrintersPagerPageContent",this.get("data.printers").slice(e.from,e.to)),this.get("data.printers")&&this.get("data.printers").length>0&&this.set("pageNumber",e.pageNumber))}}}),Komodo.Application.AssignPrinterController=Komodo.UI.Controller.extend({_localeBase:"locale.printing:",needs:["payment"],pageSize:20,itemsPerPage:10,init:function(){Komodo.log("Constructing Assign Printer controller"),this.set("processVersion","v1.1"),this.set("processName","Assign Printer process"),this._super()},start:function(){this._super(),this.registerModel("data",Komodo.Models.OnlineTill.PrintingModel);var e=this.get("model");this.registerValidator(e,"printerName",{isRequired:!0,type:"string"}),this.registerValidator(e,"assetTag",{isRequired:!0,type:"string"}),this.registerValidator(e,"ipAddress",{isRequired:!0,type:"string"}),this.registerValidator(e,"printerLayout",{isRequired:!0,type:"string"}),void 0===this.get("printerTypes")&&this.retrievePrinterTypesEvent(!0)},stop:function(){this._super()},userName:function(){return Komodo.Services.securityService.get("domainUserName").substring(3)},setCountryUserName:function(e){var t=Komodo.Services.uiService.getController("application").get("_selectedCountryId");e.set("Country",t),e.set("UserName",this.userName())},showBlockingBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,15e3,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},assignPrinterToUser:function(e){var t=this,s=t.get("data");s.set("commandGridItem",e._parentView.content),t.retrievePrinterEvent(s.commandGridItem.UID,"AssignPrinter",!0)},unassignPrinterToUser:function(e){var t=this,s=t.get("data");s.set("commandGridItem",e._parentView.content),t.retrievePrinterEvent(s.commandGridItem.UID,"UnassignPrinter",!0)},populatePrinterTypeModel:function(e){var t=[];return $($.makeArray(e)).each(function(e,s){var r=Komodo.Models.Printing.PrinterTypesModel.create();r.set("UID",s.Id),r.set("name",s.Name),r.set("isActive",s.IsActive),t.pushObject(r)}),t},populatePrinterModel:function(e){var t=[],s=this;return $($.makeArray(e)).each(function(e,r){var n=Komodo.Models.Printing.PrintingModel.create();if(n.set("UID",r.Id),n.set("printerName",r.PrinterName),n.set("assetTag",r.AssetTag),n.set("ipAddress",r.IPAddress),n.set("isActive",r.IsActive),n.set("printerLayout",r.DefaultLayout),n.set("printerUsers",r.PrinterUsers),void 0!==s.printerTypes){var o=$.grep(s.printerTypes,function(e){return e.UID.toString()===r.PrinterType.toString()});o.length>0&&(n.set("printerType",o[0]),n.set("printerTypeName",o[0].name))}t.pushObject(n)}),t},searchPrinters:function(){var e=this.get("data");e.set("printers",[]),this.set("pageNumber",0),this.searchText=e.searchAssetTag,this.retrievePrintersEvent(1,!0)},printersChanged:function(){var e=this,t=e.get("data");void 0===t||null===t||void 0===t.printers||null===t.printers||0===t.printers.length?(e.set("virtualPrintersPagerPageContent",Ember.A()),e.set("contentLength",1)):(e.set("contentLength",t.printers.length),t.printers.length<=e.itemsPerPage&&this.set("virtualPrintersPagerPageContent",this.get("data.printers")))}.observes("data.printers"),showPager:function(){var e=this;return e.contentLength>e.itemsPerPage}.property("contentLength"),showErrorPopup:function(e,t){var s=this,r=JSON.stringify(t);Komodo.log(e+" ajax call failed. Error: "+r),t&&"string"===$.type(t.responseJSON)?Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),t.responseJSON,Komodo.Controls.MessageBoxOkButtons,s,"id5446673","danger"):t.responseJSON&&t.responseJSON.ExceptionMessage?Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),t.responseJSON.ExceptionMessage,Komodo.Controls.MessageBoxOkButtons,s,"id5446673","danger"):t.statusText?Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),t.statusText,Komodo.Controls.MessageBoxOkButtons,s,"id5446673","danger"):Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),JSON.stringify(t),Komodo.Controls.MessageBoxOkButtons,s,"id5446673","danger")},retrievePrinterTypesEvent:function(e){var t=this;e&&t.showBlockingBusyIndicator(),Komodo.Services.queryService.getJSON("/PointOfSale/RetrievePrinterTypes").done(function(e){void 0!==e&&null!==e&&void 0!==e.PrinterTypes?t.set("printerTypes",t.populatePrinterTypeModel(e.PrinterTypes)):t.set("printerTypes",void 0),t.hideBusyIndicator()}).error(function(e){var s=JSON.stringify(e);Komodo.log("retrievePrinterTypes ajax call failed. Error: "+s),t.hideBusyIndicator()})},messagePrinterTypesRetrievedEventReceived:function(e){if(void 0!==e.ResponseMessage.Payload.PrinterTypes){var t=[];$($.makeArray(e.ResponseMessage.Payload.PrinterTypes)).each(function(e,s){var r=Komodo.Models.Printing.PrinterTypesModel.create();r.set("UID",s.UID),r.set("name",s.Name),r.set("isActive",s.IsActive),t.pushObject(r)}),this.set("printerTypes",t)}else this.set("printerTypes",void 0)},retrievePrinterEvent:function(e,t,s){var r=this,n=r.get("data");s&&r.showBlockingBusyIndicator();var o="printerId="+e+"&deepLoad=true&page=0&pageSize=0";Komodo.Services.queryService.getJSON("/PointOfSale/RetrievePrinters?"+o).done(function(e){if(r.hideBusyIndicator(),void 0!==e&&null!==e&&void 0!==e.Printers){var s=r.populatePrinterModel(e.Printers);if(void 0!==s&&s.length>0){var o;if("AssignPrinter"===t&&(n.set("UID",s[0].UID),n.set("printerName",s[0].printerName),n.set("printerTypeName",s[0].printerTypeName),n.set("assetTag",s[0].assetTag),n.set("ipAddress",s[0].ipAddress),n.set("printerLayout",s[0].printerLayout),n.set("userName",""),o=Komodo.Application.ModalPaneController.create(),o.popup(kl.value(r._localeBase+"home.assignPrinterTitle"),"assignPrinterToUser",{context:{data:n,assignPrinter:function(){r.assignPrintersToUserEvent(!0),o.close()}}})),"UnassignPrinter"===t)if(n.set("UID",s[0].UID),n.set("printerName",s[0].printerName),n.set("printerTypeName",s[0].printerTypeName),n.set("assetTag",s[0].assetTag),n.set("ipAddress",s[0].ipAddress),n.set("printerLayout",s[0].printerLayout),n.set("userName",""),void 0!==s[0].printerUsers){var a=[];$(s[0].printerUsers).each(function(e,t){var s=Komodo.Models.Printing.PrinterUser.create();s.set("userId",t.Id),s.set("userName",t.UserName),s.set("isSelected",!1),a.pushObject(s)}),o=Komodo.Application.ModalPaneController.create(),o.popup(kl.value(r._localeBase+"home.unassignPrinterTitle"),"unassignPrinterToUser",{context:{data:n,printerUsers:a,unassignPrinter:function(){var e=this,t="";$(e.printerUsers).each(function(e,s){!0===s.isSelected&&(t=t+","+s.userId)}),r.unassignPrintersFromUserEvent(t,!0),o.close()}}})}else Komodo.Controls.MessageBoxController.show(kl.value(r._localeBase+"home.assignPrinterUseCaseTitle"),kl.value(r._localeBase+"home.msgNoUserAssignedValidation"),Komodo.Controls.MessageBoxOkButtons,this,"modelPrinter")}}}).error(function(e){r.showErrorPopup("retrievePrinter",e),r.hideBusyIndicator()})},retrievePrintersEvent:function(e,t){var s=this,r=s.get("data");t&&s.showBlockingBusyIndicator();var n="assetTag="+s.searchText+"&deepLoad=false";n=n+"&page="+e+"&pageSize="+s.pageSize,Komodo.Services.queryService.getJSON("/PointOfSale/RetrievePrinters?"+n).done(function(n){if(void 0!==n&&null!==n){var o=r.get("printers");void 0!==n.Printers&&r.set("printers",o.concat(s.populatePrinterModel(n.Printers))),!0!==n.More&&"true"!==n.More||s.retrievePrintersEvent(e+1,!1)}t&&s.hideBusyIndicator()}).error(function(e){s.showErrorPopup("retrievePrinters",e),s.hideBusyIndicator()})},messagePrintersRetrievedEventReceived:function(e){var t=this,s=t.get("data").printers;s.clear(),void 0!==e.ResponseMessage.Payload.Printers?$(e.ResponseMessage.Payload.Printers).each(function(e,r){var n=Komodo.Models.Printing.PrintingModel.create();if(n.set("UID",r.UID),n.set("printerName",r.PrinterName),n.set("assetTag",r.AssetTag),n.set("ipAddress",r.IPAddress),n.set("isActive",r.IsActive),n.set("printerLayout",r.Layout),n.set("printerUsers",r.PrinterUsers),void 0!==t.printerTypes){var o=$.grep(t.printerTypes,function(e){return e.UID===r.PrinterType});o.length>0&&(n.set("printerType",o[0]),n.set("printerTypeName",o[0].Name))}s.pushObject(n)}):Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"home.assignPrinterUseCaseTitle"),kl.value(t._localeBase+"home.msgNoPrinterValidation"),Komodo.Controls.MessageBoxOkButtons,this,"modelPrinter"),this.hideBusyIndicator()},assignPrintersToUserEvent:function(e){var t=this,s=t.get("data");if(void 0===s.UID||null===s.UID||""===s.UID)Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"home.assignPrinterUseCaseTitle"),kl.value(t._localeBase+"home.msgNoPrinterSelectedValidation"),Komodo.Controls.MessageBoxOkButtons,this,"modelPrinter","danger");else if(void 0===s.userName||null===s.userName||""===s.userName)Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"home.assignPrinterUseCaseTitle"),kl.value(t._localeBase+"home.msgValidUserValidation"),Komodo.Controls.MessageBoxOkButtons,this,"modelPrinter","danger");else{var r=Komodo.Models.AssignOLTPrintersToUsers.create();Komodo.canonicalFacadeFactory(r,["Country","UserName","PrinterIds","UserNames"]),this.setCountryUserName(r);var n=[];n.push(s.UID);var o=[];o.push(s.userName),r.set("PrinterIds",n),r.set("UserNames",o),(new Komodo.Services.PrintingService).publishPrintingEvent(this,r,"AssignPrintersToUsersEvent","v1",!1),e&&this.showBlockingBusyIndicator()}},messagePrintersAssignedToUsersEventReceived:function(e){var t=this,s=t.get("data");if(void 0!==e.ResponseMessage&&void 0!==e.ResponseMessage.Payload&&null!==e.ResponseMessage.Payload&&void 0!==e.ResponseMessage.Payload.Message&&null!==e.ResponseMessage.Payload.Message&&""!==e.ResponseMessage.Payload.Message)Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"home.assignPrinterUseCaseTitle"),e.ResponseMessage.Payload.Message,Komodo.Controls.MessageBoxOkButtons,this,"modelPrinter","danger");else{s.set("printers",[]),t.retrievePrintersEvent(1,!1),Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"home.assignPrinterUseCaseTitle"),kl.value(t._localeBase+"home.msgPrinterAssigned"),Komodo.Controls.MessageBoxOkButtons,this,"modelPrinter","success")}t.hideBusyIndicator()},unassignPrintersFromUserEvent:function(e,t){var s=this,r=s.get("data");if(void 0===r.UID||null===r.UID||""===r.UID)Komodo.Controls.MessageBoxController.show(kl.value(s._localeBase+"home.assignPrinterUseCaseTitle"),kl.value(s._localeBase+"home.msgNoPrinterSelectedValidation"),Komodo.Controls.MessageBoxOkButtons,this,"modelPrinter","danger");else if(void 0===e||null===e||0===e.length)Komodo.Controls.MessageBoxController.show(kl.value(s._localeBase+"home.assignPrinterUseCaseTitle"),kl.value(s._localeBase+"home.msgNoUserSelectedValidation"),Komodo.Controls.MessageBoxOkButtons,this,"modelPrinter","danger");else{var n=Komodo.Models.UnassignOLTPrintersToUsers.create(),o=Komodo.canonicalFacadeFactory(n,["Country","Username","PrinterIDs","UserIDs"]);this.setCountryUserName(o);var a=[];a.push(r.UID),this.set("printerIds",r.UID),o.set("Username",this.userName()),o.set("PrinterIDs",a),o.set("UserIDs",e),(new Komodo.Services.PrintingService).publishPrintingEvent(this,n,"UnassignPrintersFromUsersEvent","v1",!1),t&&this.showBlockingBusyIndicator()}},messagePrintersUnassignedFromUsersEventReceived:function(e){var t=this,s=t.get("data");if(void 0!==e.ResponseMessage&&void 0!==e.ResponseMessage.Payload&&null!==e.ResponseMessage.Payload&&void 0!==e.ResponseMessage.Payload.Message&&null!==e.ResponseMessage.Payload.Message&&""!==e.ResponseMessage.Payload.Message)Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"home.assignPrinterUseCaseTitle"),e.ResponseMessage.Payload.Message,Komodo.Controls.MessageBoxOkButtons,this,"modelPrinter","danger");else{if(s.set("printers",[]),t.retrievePrintersEvent(1,!1),Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"home.assignPrinterUseCaseTitle"),kl.value(t._localeBase+"home.msgPrinterUnassigned"),Komodo.Controls.MessageBoxOkButtons,this,"modelPrinter","success"),void 0!==t.get("controllers.payment")&&void 0!==t.get("controllers.payment").shiftdata){var r=t.get("controllers.payment").shiftdata;if(void 0!==r.printers&&r.printers.length>0){var n=r.printers.filter(function(e){return e.UID!==t.printerIds});r.set("printers",n)}}}t.hideBusyIndicator()},messageFailureMessageEventReceived:function(e){var t=this;t.hideBusyIndicator();var s=kl.value(t._localeBase+"home.technicalError");void 0!==e.ResponseMessage.Payload&&void 0!==e.ResponseMessage.Payload.ListOfErrorDetails&&(s="",$(e.ResponseMessage.Payload.ListOfErrorDetails).each(function(e,t){s+=t.ErrorDescription})),Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"home.assignPrinterUseCaseTitle"),s,Komodo.Controls.MessageBoxOkButtons,this,"modelPrinter","danger")},messageReceived:function(e){this.hideBusyIndicator(),Komodo.UI.log("[AssignPrinterController.messageReceived] : event name = "+e.ResponseMessage.EventName)},messageDeliveryFailure:function(e){this.hideBusyIndicator(),Komodo.UI.warn("[AssignPrinterController.messageDeliveryFailure] : messageId = "+e.messageId)},messageFault:function(e){this.hideBusyIndicator(),Komodo.UI.error("[AssignPrinterController.messageFault] : messageId = "+e.messageId)},printerIds:void 0,contentLength:1,pageNumber:0,virtualPrintersPagerPageContent:Ember.A(),actions:{newProcess:function(){this.startNewProcess()},showBlockingBusyIndicator:function(){this.showBlockingBusyIndicator()},hideBusyIndicator:function(){this.hideBusyIndicator()},searchPrinters:function(){this.searchPrinters()},assignPrinterToUser:function(e){this.assignPrinterToUser(e)},unassignPrinterToUser:function(e){this.unassignPrinterToUser(e)},pageSelected:function(e){this.get("pageNumber")!==e.pageNumber&&(this.set("virtualPrintersPagerPageContent",this.get("data.printers").slice(e.from,e.to)),this.get("data.printers")&&this.get("data.printers").length>0&&this.set("pageNumber",e.pageNumber))}}}),Komodo.Services.localizationService.registerNamespace("locale.printing");