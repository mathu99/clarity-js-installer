Komodo.Models.ReturnsModel=Ember.Object.extend({init:function(){this._super(),this.quoteDeviceNumber="",this.isSalesOrderGridVisible=!1,this.lblSalesOrder="---",this.gridQuoteDeviceHistory=[],this.gridTotalQuoteDeviceHistory=[],this.Reason=""}}),Ember.TEMPLATES.ViewScheduledChangesView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:d.noop,fn:d.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  \r\n  \r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:d.noop,fn:d.program(4,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function n(e,t){return t.buffer.push("\r\n  \x3c!--Event--\x3e\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:scheduledChanges.event~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  \x3c!--Scheduled Date--\x3e\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:scheduledChanges.scheduledDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  \x3c!--Reason--\x3e\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:scheduledChanges.reason~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  \x3c!--Created By--\x3e\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:scheduledChanges.createdBy~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  \x3c!--Details--\x3e\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:scheduledChanges.details~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),""}function i(e,t){return t.buffer.push("\r\n  \x3c!--Event--\x3e\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.event"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  \x3c!--Scheduled Date--\x3e\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.scheduledDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  \x3c!--Reason--\x3e\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.reason"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  \x3c!--Created By--\x3e\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.createdBy"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  \x3c!--Details--\x3e\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.details"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var c,l=this.escapeExpression,d=this;return s.buffer.push('<div  class="modal-max-size" style="width:550px;">\r\n    <br/><br/>\r\n  '),c=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:d.noop,fn:d.program(1,r,s),contexts:[t],types:["ID"],data:s}),(c||0===c)&&s.buffer.push(c),s.buffer.push("\r\n</div>"),""}),Ember.TEMPLATES.SwapMaterialAvailabilityView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n    "),o=a.if.call(e,"_SAGrid",{hash:{},hashTypes:{},hashContexts:{},inverse:D.program(5,c,t),fn:D.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n    <table width="100%">\r\n      <tr>\r\n        <td width="50%" colspan="2">\r\n          '),t.buffer.push(C(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"dataModel.Category",label:"~locale.manageStock:swapMaterialAvailability.customerReportedFaults~",contentBinding:"_dropDownCategoryList",optionLabelPath:"content.CanonicalValue",optionValuePath:"content.CanonicalKey",prompt:"Select an option..."},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n        <td width="50%">\r\n          '),t.buffer.push(C(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"dataModel.Reason",label:"~locale.manageStock:swapMaterialAvailability.csrObservation~",contentBinding:"_dropDownReasonList",optionLabelPath:"content.CanonicalValue",optionValuePath:"content.CanonicalKey",prompt:"Select an option..."},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n    </table>\r\n    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"checkAvailability",class:"float-right"},hashTypes:{action:"STRING",class:"STRING"},hashContexts:{action:e,class:e},inverse:D.noop,fn:D.program(7,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    <br />\r\n    <br />\r\n    "),""}function n(e,t){var o,s,r;return t.buffer.push('\r\n    <table id="SAGridDataTable" class="table table-bordered komodo-datagrid">\r\n      <tr>\r\n        <th>'),t.buffer.push(C((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:swapMaterialAvailability.deviceName",r):S.call(e,"loc","locale.manageStock:swapMaterialAvailability.deviceName",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(C((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:swapMaterialAvailability.deviceNumber",r):S.call(e,"loc","locale.manageStock:swapMaterialAvailability.deviceNumber",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(C((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:swapMaterialAvailability.deviceStatus",r):S.call(e,"loc","locale.manageStock:swapMaterialAvailability.deviceStatus",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(C((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:swapMaterialAvailability.insurance",r):S.call(e,"loc","locale.manageStock:swapMaterialAvailability.insurance",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(C((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:swapMaterialAvailability.insuranceStartDate",r):S.call(e,"loc","locale.manageStock:swapMaterialAvailability.insuranceStartDate",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(C((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:swapMaterialAvailability.linkedSmartcard",r):S.call(e,"loc","locale.manageStock:swapMaterialAvailability.linkedSmartcard",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(C((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:swapMaterialAvailability.swap",r):S.call(e,"loc","locale.manageStock:swapMaterialAvailability.swap",r)))),t.buffer.push("</th>\r\n      </tr>\r\n      "),o=a.each.call(e,"item","in","dataModel.SAGridData",{hash:{},hashTypes:{},hashContexts:{},inverse:D.noop,fn:D.program(3,i,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </table>\r\n    "),""}function i(e,t){var o;return t.buffer.push("\r\n      <tr>\r\n        <td>\r\n          "),o=a._triageMustache.call(e,"item.HardwareModelDesc",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),o=a._triageMustache.call(e,"item.deviceSerialNo",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),o=a._triageMustache.call(e,"item.deviceStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),o=a._triageMustache.call(e,"item.InsuranceStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),o=a._triageMustache.call(e,"item.insuranceStartDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),o=a._triageMustache.call(e,"item.LinkedSC",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{contentBinding:"item.radioType",displayPath:"title",valuePath:"value",valueBinding:"_selectedRadioGridSA",orientation:"horizontal"},hashTypes:{contentBinding:"STRING",displayPath:"STRING",valuePath:"STRING",valueBinding:"STRING",orientation:"STRING"},hashContexts:{contentBinding:e,displayPath:e,valuePath:e,valueBinding:e,orientation:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n      "),""}function c(e,t){return t.buffer.push('\r\n    <table width="100%">\r\n      <tr>\r\n        <td colspan="3">\r\n          '),t.buffer.push(C(a.view.call(e,"Komodo.Controls.DataGrid",{hash:{canSort:"false",pageSize:"10",canSelect:"true",performsValidation:"false",selectedItemBinding:"dataModel.selectedDeviceGridItem",commandItemBinding:"dataModel.commandGridItem",contentBinding:"dataModel.deviceData",columnsBinding:"_columnDeviceDataGrid"},hashTypes:{canSort:"STRING",pageSize:"STRING",canSelect:"STRING",performsValidation:"STRING",selectedItemBinding:"STRING",commandItemBinding:"STRING",contentBinding:"STRING",columnsBinding:"STRING"},hashContexts:{canSort:e,pageSize:e,canSelect:e,performsValidation:e,selectedItemBinding:e,commandItemBinding:e,contentBinding:e,columnsBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n      </tr>\r\n    </table>\r\n    <table width="50%">\r\n      <tr>\r\n        <td align="left" width="3%">\r\n          '),t.buffer.push(C(a.view.call(e,"Komodo.Controls.Checkbox",{hash:{valueBinding:"dataModel.boolPairedDevice",disabledBinding:"dataModel.enablePairedDevice"},hashTypes:{valueBinding:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n        <td align="left" width="10%">\r\n          '),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:swapMaterialAvailability.pairedSwap~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n        <td align="left" width="50%">\r\n          '),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dataModel.DecoderSr"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n          <img src="Content\\Images\\link\\l.svg" style="padding:0 30px 0 20px;" />\r\n          '),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dataModel.SmartCardSr"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td>\r\n          <br />\r\n        </td>\r\n      </tr>\r\n    </table>\r\n    "),""}function l(e,t){var o,s;t.buffer.push(C((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:swapMaterialAvailability.checkAvailability",s):S.call(e,"loc","locale.manageStock:swapMaterialAvailability.checkAvailability",s))))}function d(e,t){var o;return t.buffer.push("\r\n    <br />\r\n      <b>"),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:swapMaterialAvailability.preQuoteDetails~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</b>\r\n    <br />\r\n    <table width="100%">\r\n      <tr>\r\n        <td colspan="3" width="100%">\r\n          '),t.buffer.push(C(a.view.call(e,"Komodo.Controls.DataGrid",{hash:{canSort:"true",pageSize:"10",performsValidation:"false",contentBinding:"dataModel.quoteData",columnsBinding:"_columnQuoteDataGrid"},hashTypes:{canSort:"STRING",pageSize:"STRING",performsValidation:"STRING",contentBinding:"STRING",columnsBinding:"STRING"},hashContexts:{canSort:e,pageSize:e,performsValidation:e,contentBinding:e,columnsBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td width="30%">\r\n          '),t.buffer.push(C(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"dataModel.communicationType",label:"~locale.manageStock:swapMaterialAvailability.sendQuoteVia~",contentBinding:"_dropDownCommunicationList",optionLabelPath:"content.Value",optionValuePath:"content.Key",prompt:"Select..."},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n        <td width="30%">\r\n          '),t.buffer.push(C(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"dataModel.communicationLanguage",label:"~locale.manageStock:swapMaterialAvailability.communicationLanguage~",contentBinding:"_dropDownCommunicationLanguageList",optionLabelPath:"content.Value",optionValuePath:"content.Key",prompt:"Select..."},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n        <td width="30%">\r\n          '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"sendQuotationSwap",visibleBinding:"dataModel.isSendQuotationVisible",class:"btn-success"},hashTypes:{action:"STRING",visibleBinding:"STRING",class:"STRING"},hashContexts:{action:e,visibleBinding:e,class:e},inverse:D.noop,fn:D.program(10,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n        </td>\r\n      </tr>\r\n      <br/>\r\n      <tr>\r\n        <td colspan="3" align="right" width="100%">\r\n          '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"supervisorOverride",disabledBinding:"dataModel.cannotOverrideCharge"},hashTypes:{action:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,disabledBinding:e},inverse:D.noop,fn:D.program(12,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"generateSwapQuote",disabledBinding:"dataModel.showGenerateSwapQuote"},hashTypes:{action:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,disabledBinding:e},inverse:D.noop,fn:D.program(14,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n    </table>\r\n    "),""}function u(e,t){var o,s;return t.buffer.push("\r\n          "),t.buffer.push(C((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:swapMaterialAvailability.btnSend",s):S.call(e,"loc","locale.manageStock:swapMaterialAvailability.btnSend",s)))),t.buffer.push("\r\n          "),""}function h(e,t){var o,s;t.buffer.push(C((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:swapMaterialAvailability.chargeOverride",s):S.call(e,"loc","locale.manageStock:swapMaterialAvailability.chargeOverride",s))))}function m(e,t){var o,s;t.buffer.push(C((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:swapMaterialAvailability.generateSwapQuote",s):S.call(e,"loc","locale.manageStock:swapMaterialAvailability.generateSwapQuote",s))))}function g(e,t){var o;return t.buffer.push("\r\n      "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:swapMaterialAvailability.quoteNumber~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dataModel.QuoteNumber",class:"sub-heading"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br />\r\n      "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:swapMaterialAvailability.quoteStatus~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dataModel.QuoteStatus",class:"sub-heading"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br />\r\n      "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"makePaymentSwap",disabledBinding:"dataModel.showMakePayment",class:"float-right"},hashTypes:{action:"STRING",disabledBinding:"STRING",class:"STRING"},hashContexts:{action:e,disabledBinding:e,class:e},inverse:D.noop,fn:D.program(17,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      <br />\r\n      <br />\r\n    "),""}function p(e,t){var o,s;t.buffer.push(C((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:swapMaterialAvailability.acceptQuote",s):S.call(e,"loc","locale.manageStock:swapMaterialAvailability.acceptQuote",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var v,f,b,C=this.escapeExpression,S=a.helperMissing,D=this;return s.buffer.push("<div "),s.buffer.push(C(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(C((f=a.loc||t&&t.loc,b={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},f?f.call(t,"locale.manageStock:swapMaterialAvailability.title",b):S.call(t,"loc","locale.manageStock:swapMaterialAvailability.title",b)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/manageViewing">&lt;'),s.buffer.push(C((f=a.loc||t&&t.loc,b={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},f?f.call(t,"locale.manageStock:swapMaterialAvailability.back",b):S.call(t,"loc","locale.manageStock:swapMaterialAvailability.back",b)))),s.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr />\r\n  <div>\r\n    "),v=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageStock:swapMaterialAvailability.gridTitle~",isCollapsed:"false"},hashTypes:{title:"STRING",isCollapsed:"STRING"},hashContexts:{title:t,isCollapsed:t},inverse:D.noop,fn:D.program(1,r,s),contexts:[t],types:["ID"],data:s}),(v||0===v)&&s.buffer.push(v),s.buffer.push("\r\n    <br />\r\n    "),v=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{isVisibleBinding:"dataModel.boolAcceptQuoteView",title:"~locale.manageStock:swapMaterialAvailability.tabAccept~",isCollapsed:"false"},hashTypes:{isVisibleBinding:"STRING",title:"STRING",isCollapsed:"STRING"},hashContexts:{isVisibleBinding:t,title:t,isCollapsed:t},inverse:D.noop,fn:D.program(9,d,s),contexts:[t],types:["ID"],data:s}),(v||0===v)&&s.buffer.push(v),s.buffer.push("\r\n    <br /><br />\r\n    "),v=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{isVisibleBinding:"dataModel.showQuoteDetails",title:"~locale.manageStock:swapMaterialAvailability.quoteDetails~",isCollapsed:"false"},hashTypes:{isVisibleBinding:"STRING",title:"STRING",isCollapsed:"STRING"},hashContexts:{isVisibleBinding:t,title:t,isCollapsed:t},inverse:D.noop,fn:D.program(16,g,s),contexts:[t],types:["ID"],data:s}),(v||0===v)&&s.buffer.push(v),s.buffer.push("\r\n  </div>\r\n</div>\r\n"),""}),Ember.TEMPLATES.SwapMaterialAvailabilitySingleView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n    <tr>\r\n      <td>\r\n        "),o=a._triageMustache.call(e,"item.materialDescription",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td>\r\n      <td>\r\n        "),o=a._triageMustache.call(e,"item.quantityService",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td>\r\n      <td>\r\n        "),o=a._triageMustache.call(e,"item.displayPrice",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td>\r\n      <td>\r\n        "),t.buffer.push(d(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{contentBinding:"item.radioType",valuePath:"value",valueBinding:"_selectedSwapMaterialAvailability",orientation:"horizontal",disabledBinding:"item.hasPrice"},hashTypes:{contentBinding:"STRING",valuePath:"STRING",valueBinding:"STRING",orientation:"STRING",disabledBinding:"STRING"},hashContexts:{contentBinding:e,valuePath:e,valueBinding:e,orientation:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      </td>\r\n    </tr>\r\n    "),""}function n(e,t){var o,s;return t.buffer.push("\r\n    "),t.buffer.push(d((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:swapMaterialAvailability.selectDevice",s):u.call(e,"loc","locale.manageStock:swapMaterialAvailability.selectDevice",s)))),t.buffer.push("\r\n    "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var i,c,l,d=this.escapeExpression,u=a.helperMissing,h=this;return s.buffer.push('<div class="modal-max-size">\r\n  <br/>\r\n  '),s.buffer.push(d(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:swapMaterialAvailability.hardwareLocation~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:t,class:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push(":\r\n  "),s.buffer.push(d(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dataModel.hardwareLocation",class:"sub-heading"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:t,class:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push('\r\n  <br/>\r\n  <br/>\r\n  <table id="GridDataTable" class="table table-bordered komodo-datagrid">\r\n    <tr>\r\n      <th>'),s.buffer.push(d((c=a.loc||t&&t.loc,l={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},c?c.call(t,"locale.manageStock:swapMaterialAvailability.materialDescription",l):u.call(t,"loc","locale.manageStock:swapMaterialAvailability.materialDescription",l)))),s.buffer.push("</th>\r\n      <th>"),s.buffer.push(d((c=a.loc||t&&t.loc,l={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},c?c.call(t,"locale.manageStock:swapMaterialAvailability.quantity",l):u.call(t,"loc","locale.manageStock:swapMaterialAvailability.quantity",l)))),s.buffer.push("</th>\r\n      <th>"),s.buffer.push(d((c=a.loc||t&&t.loc,l={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},c?c.call(t,"locale.manageStock:swapMaterialAvailability.price",l):u.call(t,"loc","locale.manageStock:swapMaterialAvailability.price",l)))),s.buffer.push("</th>\r\n      <th></th>\r\n    </tr>\r\n    "),i=a.each.call(t,"item","in","dataModel.SwapMaterialAvailabilityData",{hash:{},hashTypes:{},hashContexts:{},inverse:h.noop,fn:h.program(1,r,s),contexts:[t,t,t],types:["ID","ID","ID"],data:s}),(i||0===i)&&s.buffer.push(i),s.buffer.push("\r\n  </table>\r\n  <br/>\r\n  <div>\r\n    "),s.buffer.push(d(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:swapMaterialAvailability.pleaseSelectADevice~",class:"error-text",visibleBinding:"dataModel.hasSelectedSwapMaterial"},hashTypes:{text:"STRING",class:"STRING",visibleBinding:"STRING"},hashContexts:{text:t,class:t,visibleBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push('\r\n  </div>\r\n  <div class="float-right">\r\n    '),i=a.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"3",action:"selectSwapMaterialAvailability",disabledBinding:"dataModel.hasSelectedSwapMaterial"},hashTypes:{tabindex:"STRING",action:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:t,action:t,disabledBinding:t},inverse:h.noop,fn:h.program(3,n,s),contexts:[t],types:["ID"],data:s}),(i||0===i)&&s.buffer.push(i),s.buffer.push("\r\n  </div>\r\n  <br/>\r\n</div>\r\n"),""}),Ember.TEMPLATES.SwapMaterialAvailabilityOverrideView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function n(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-12"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:m.noop,fn:m.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function i(e,t){var o;return t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"dataModel.chargeOverrideUsername",disabledBinding:"dataModel.chargeOverrideAuthenticating",validatorBinding:"validators.chargeOverrideUsernameValidator",label:"~locale.manageStock:swapMaterialAvailability.supervisorUsername~"},hashTypes:{valueBinding:"STRING",disabledBinding:"STRING",validatorBinding:"STRING",label:"STRING"},hashContexts:{valueBinding:e,disabledBinding:e,validatorBinding:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.TextField",{hash:{type:"password",valueBinding:"dataModel.chargeOverridePassword",disabledBinding:"dataModel.chargeOverrideAuthenticating",validatorBinding:"validators.chargeOverridePasswordValidator",label:"~login.password~"},hashTypes:{type:"STRING",valueBinding:"STRING",disabledBinding:"STRING",validatorBinding:"STRING",label:"STRING"},hashContexts:{type:e,valueBinding:e,disabledBinding:e,validatorBinding:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  <div>\r\n    "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:swapMaterialAvailability.comment~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br/>\r\n    "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextArea",{hash:{rows:"6",class:"textarea-large",valueBinding:"dataModel.chargeOverrideComment"},hashTypes:{rows:"STRING",class:"STRING",valueBinding:"STRING"},hashContexts:{rows:e,class:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br/>\r\n    "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.chargeOverrideCommentValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n  </div>\r\n\r\n  <br/>\r\n\r\n  <div class="float-right">\r\n    '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"approveChargeOverride"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:m.noop,fn:m.program(4,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"cancelChargeOverride",type:"inverse"},hashTypes:{action:"STRING",type:"STRING"},hashContexts:{action:e,type:e},inverse:m.noop,fn:m.program(6,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  </div>\r\n  "),""}function c(e,t){var o,s;return t.buffer.push(" "),t.buffer.push(h((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:swapMaterialAvailability.chargeOverrideApprove",s):u.call(e,"loc","locale.manageStock:swapMaterialAvailability.chargeOverrideApprove",s)))),t.buffer.push("\r\n    "),""}function l(e,t){var o,s;return t.buffer.push(" "),t.buffer.push(h((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.komodo:controls.messageBox.cancel",s):u.call(e,"loc","locale.komodo:controls.messageBox.cancel",s)))),t.buffer.push("\r\n    "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var d,u=a.helperMissing,h=this.escapeExpression,m=this;return s.buffer.push('<div class="modal-max-size">\r\n  '),d=a.view.call(t,"Komodo.Controls.FormView",{hash:{action:"approveChargeOverride",disableBinding:"dataModel.chargeOverrideAuthenticating"},hashTypes:{action:"STRING",disableBinding:"STRING"},hashContexts:{action:t,disableBinding:t},inverse:m.noop,fn:m.program(1,r,s),contexts:[t],types:["ID"],data:s}),(d||0===d)&&s.buffer.push(d),s.buffer.push("\r\n</div>\r\n"),""}),Ember.TEMPLATES.SetToStolenView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push('\r\n    <table width="100%">\r\n      <tr>\r\n        <td colspan="3">\r\n          '),
t.buffer.push(h(a.view.call(e,"Komodo.Controls.DataGrid",{hash:{canSort:!1,pageSize:10,canSelect:!0,performsValidation:!1,selectedItemBinding:"dataModel.selectedGridItem",commandItemBinding:"dataModel.commandGridItem",contentBinding:"dataModel.deviceData",columnsBinding:"dataGridColumns"},hashTypes:{canSort:"BOOLEAN",pageSize:"INTEGER",canSelect:"BOOLEAN",performsValidation:"BOOLEAN",selectedItemBinding:"STRING",commandItemBinding:"STRING",contentBinding:"STRING",columnsBinding:"STRING"},hashContexts:{canSort:e,pageSize:e,canSelect:e,performsValidation:e,selectedItemBinding:e,commandItemBinding:e,contentBinding:e,columnsBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n      </tr>\r\n    </table>\r\n    <table width="100%">\r\n      '),o=a.if.call(e,"dataModel.DDCCSwapFlag",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n    </table>\r\n    <table width="100%">\r\n      <tr>\r\n        <td>\r\n          <b>'),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:setToStolen.caseDetails~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</b>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td>\r\n          "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"dataModel.caseNumber",label:"~locale.manageStock:setToStolen.policeCaseNumber~",validatorBinding:"validators.caseNumberValidator"},hashTypes:{valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"dataModel.policeStation",label:"~locale.manageStock:setToStolen.policeStation~",validatorBinding:"validators.policeStationValidator"},hashTypes:{valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td>\r\n          "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{tabindex:"6",valueBinding:"dataModel.boundUpperDate",label:"~locale.manageStock:setToStolen.caseDate~",validatorBinding:"validators.boundUpperDateValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),t.buffer.push(h(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"dataModel.claimNr",label:"~locale.manageStock:setToStolen.claimNumber~",validatorBinding:"validators.claimNrValidator",isVisibleBinding:"_isVisibleClaimNumber"},hashTypes:{valueBinding:"STRING",label:"STRING",validatorBinding:"STRING",isVisibleBinding:"STRING"},hashContexts:{valueBinding:e,label:e,validatorBinding:e,isVisibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n    </table>\r\n    "),""}function n(e,t){return t.buffer.push('\r\n      <tr>\r\n        <td align="left" width="10%">\r\n          '),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:setToStolen.DDCCSwap~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n        <td align="left" width="40%">\r\n          '),t.buffer.push(h(a.view.call(e,"Komodo.Controls.Checkbox",{hash:{valueBinding:"dataModel.boolPairedDevice"},hashTypes:{valueBinding:"STRING"},hashContexts:{valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n        <td align="left" width="100%" >\r\n          '),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dataModel.DecoderSr"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n          <img src="Content\\Images\\link\\l.svg" style="padding:0 30px 0 20px;" />\r\n          '),t.buffer.push(h(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dataModel.SmartCardSr"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n      "),""}function i(e,t){var o,s;return t.buffer.push("\r\n      "),t.buffer.push(h((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:modal.popUp",s):g.call(e,"loc","locale.manageStock:modal.popUp",s)))),t.buffer.push("\r\n      "),""}function c(e,t){var o,s;t.buffer.push(h((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:setToStolen.setToStolen",s):g.call(e,"loc","locale.manageStock:setToStolen.setToStolen",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var l,d,u,h=this.escapeExpression,m=this,g=a.helperMissing;return s.buffer.push("<div "),s.buffer.push(h(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(h((d=a.loc||t&&t.loc,u={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},d?d.call(t,"locale.manageStock:setToStolen.title",u):g.call(t,"loc","locale.manageStock:setToStolen.title",u)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/manageViewing">&lt;BACK</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr />\r\n  <div>\r\n    '),l=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageStock:setToStolen.gridTitle~",isCollapsedBinding:"data.isSelectHardware"},hashTypes:{title:"STRING",isCollapsedBinding:"STRING"},hashContexts:{title:t,isCollapsedBinding:t},inverse:m.noop,fn:m.program(1,r,s),contexts:[t],types:["ID"],data:s}),(l||0===l)&&s.buffer.push(l),s.buffer.push('\r\n    <br />\r\n    <div class="float-left">\r\n      '),s.buffer.push(h((d=a.loc||t&&t.loc,u={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},d?d.call(t,"locale.manageStock:modal.buttonLabel",u):g.call(t,"loc","locale.manageStock:modal.buttonLabel",u)))),s.buffer.push("\r\n      "),l=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"customerDocumentsModal"},hashTypes:{action:"STRING"},hashContexts:{action:t},inverse:m.noop,fn:m.program(4,i,s),contexts:[t],types:["ID"],data:s}),(l||0===l)&&s.buffer.push(l),s.buffer.push("\r\n      "),l=a.view.call(t,"Komodo.Controls.Button",{hash:{class:"float-right",action:"SetToStolen",contentBinding:"dataModel.selectedGridItem"},hashTypes:{class:"STRING",action:"STRING",contentBinding:"STRING"},hashContexts:{class:t,action:t,contentBinding:t},inverse:m.noop,fn:m.program(6,c,s),contexts:[t],types:["ID"],data:s}),(l||0===l)&&s.buffer.push(l),s.buffer.push("\r\n    </div>\r\n  </div>"),""}),Ember.TEMPLATES.SearchPromptView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){t.buffer.push("Search")}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var n,i=this.escapeExpression,c=this;return s.buffer.push('<div style="display: table; height: 200px;width:300px; #position: relative; overflow: hidden;">\r\n  <div style="#position: absolute; #top: 50%; display: table-cell; vertical-align: middle;">\r\n    \x3c!--This is case information view--\x3e\r\n    <table width="100%">\r\n      <tr>\r\n        <td width="70%">'),s.buffer.push(i(a.view.call(t,"Komodo.Controls.TextField",{hash:{valueBinding:"searchPromptModel.customerUID"},hashTypes:{valueBinding:"STRING"},hashContexts:{valueBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push('</td>\r\n        <td width="20%">'),n=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"searchCustomer",tabindex:"1"},hashTypes:{action:"STRING",tabindex:"STRING"},hashContexts:{action:t,tabindex:t},inverse:c.noop,fn:c.program(1,r,s),contexts:[t],types:["ID"],data:s}),(n||0===n)&&s.buffer.push(n),s.buffer.push("</td>\r\n      </tr>\r\n    </table>\r\n  </div>\r\n</div>\r\n"),""}),Ember.TEMPLATES.ScheduledChangesView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n"),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:f.noop,fn:f.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function n(e,t){var o,s,r;return t.buffer.push('\r\n    <div class="table-responsive">\r\n   <table id="tableScheduleChanges" class="table table-bordered komodo-datagrid" >\r\n    <tr>\r\n\t    <th>'),t.buffer.push(v((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:scheduledChanges.event",r):p.call(e,"loc","locale.manageviewing:scheduledChanges.event",r)))),t.buffer.push("</th>\r\n      <th>"),t.buffer.push(v((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:scheduledChanges.details",r):p.call(e,"loc","locale.manageviewing:scheduledChanges.details",r)))),t.buffer.push("</th>\r\n      <th>"),t.buffer.push(v((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:scheduledChanges.creationDate",r):p.call(e,"loc","locale.manageviewing:scheduledChanges.creationDate",r)))),t.buffer.push("</th>\r\n      <th>"),t.buffer.push(v((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:scheduledChanges.scheduledDate",r):p.call(e,"loc","locale.manageviewing:scheduledChanges.scheduledDate",r)))),t.buffer.push("</th>\r\n      <th>"),t.buffer.push(v((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:scheduledChanges.actions",r):p.call(e,"loc","locale.manageviewing:scheduledChanges.actions",r)))),t.buffer.push("</th>\r\n    </tr>\r\n    "),o=a.each.call(e,"item","in","scheduledChangesModel.scheduledChangesDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:f.noop,fn:f.program(3,i,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  </table>\r\n  "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.TablePager",{hash:{tableId:"tableScheduleChanges",contentBinding:"scheduledChangesModel.scheduledChangesDetails",itemsPerPage:"5",headerRows:"1",visibleBinding:"isScheduledChangesExist"},hashTypes:{tableId:"STRING",contentBinding:"STRING",itemsPerPage:"STRING",headerRows:"STRING",visibleBinding:"STRING"},hashContexts:{tableId:e,contentBinding:e,itemsPerPage:e,headerRows:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  </div>\r\n"),""}function i(e,t){var o;return t.buffer.push("\r\n    <tr>\r\n\t"),o=a.with.call(e,"item",{hash:{},hashTypes:{},hashContexts:{},inverse:f.noop,fn:f.program(4,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      <td>\r\n        "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"actionViewChanges",size:"xs",type:"success",contentBinding:"item",disabledBinding:"isViewButtonDisable"},hashTypes:{action:"STRING",size:"STRING",type:"STRING",contentBinding:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,size:e,type:e,contentBinding:e,disabledBinding:e},inverse:f.noop,fn:f.program(6,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("&nbsp;&nbsp;\r\n        "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"EditChanges",size:"xs",type:"success",contentBinding:"item",visibleBinding:"canEditScheduledChanges"},hashTypes:{action:"STRING",size:"STRING",type:"STRING",contentBinding:"STRING",visibleBinding:"STRING"},hashContexts:{action:e,size:e,type:e,contentBinding:e,visibleBinding:e},inverse:f.noop,fn:f.program(8,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        &nbsp;&nbsp;"),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"DeleteChanges",size:"xs",type:"danger",contentBinding:"item",disabledBinding:"isDeleteButtonDisable"},hashTypes:{action:"STRING",size:"STRING",type:"STRING",contentBinding:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,size:e,type:e,contentBinding:e,disabledBinding:e},inverse:f.noop,fn:f.program(10,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td>\r\n    </tr>\r\n    "),""}function c(e,t){var o;return t.buffer.push("\r\n\t    <td>"),o=a._triageMustache.call(e,"item.event",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n      <td>"),o=a._triageMustache.call(e,"item.details",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n      <td>"),o=a._triageMustache.call(e,"item.creationDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n      <td>"),o=a._triageMustache.call(e,"item.scheduledDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n\t  "),""}function l(e,t){var o,s;t.buffer.push(v((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:scheduledChanges.actionView",s):p.call(e,"loc","locale.manageviewing:scheduledChanges.actionView",s))))}function d(e,t){var o,s;t.buffer.push(v((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:scheduledChanges.actionEdit",s):p.call(e,"loc","locale.manageviewing:scheduledChanges.actionEdit",s))))}function u(e,t){var o,s;t.buffer.push(v((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:scheduledChanges.actionDelete",s):p.call(e,"loc","locale.manageviewing:scheduledChanges.actionDelete",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var h,m,g,p=a.helperMissing,v=this.escapeExpression,f=this;return s.buffer.push("<div "),s.buffer.push(v(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(v((m=a.loc||t&&t.loc,g={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},m?m.call(t,"locale.manageviewing:scheduledChanges.scheduledChangesTitle",g):p.call(t,"loc","locale.manageviewing:scheduledChanges.scheduledChangesTitle",g)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/manageViewing">&lt;'),s.buffer.push(v((m=a.loc||t&&t.loc,g={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},m?m.call(t,"locale.manageviewing:scheduledChanges.back",g):p.call(t,"loc","locale.manageviewing:scheduledChanges.back",g)))),s.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n\r\n"),h=a.if.call(t,"isScheduledChangesExist",{hash:{},hashTypes:{},hashContexts:{},inverse:f.noop,fn:f.program(1,r,s),contexts:[t],types:["ID"],data:s}),(h||0===h)&&s.buffer.push(h),s.buffer.push("\r\n    "),s.buffer.push(v(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:scheduledChanges.noSchedulesFound~",visibleBinding:"isScheduledChangesExistError"},hashTypes:{text:"STRING",visibleBinding:"STRING"},hashContexts:{text:t,visibleBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n</div>"),""}),Ember.TEMPLATES.ReturnsView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o,s,r;return t.buffer.push('\r\n        <table width="100%">\r\n            <tr>\r\n                <td>\r\n                    <b>'),t.buffer.push(g((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:returns.retrieveSalesOrder",r):m.call(e,"loc","locale.manageStock:returns.retrieveSalesOrder",r)))),t.buffer.push("</b>\r\n                    "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.TextField",{hash:{label:"~locale.manageStock:returns.quoteOrDeviceNumber~",valueBinding:"data.quoteDeviceNumber"},hashTypes:{label:"STRING",valueBinding:"STRING"},hashContexts:{label:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"retrieveOrder"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:p.noop,fn:p.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n        <br>\r\n        <hr />\r\n        <table width="100%">\r\n            <tr>\r\n                <td>\r\n                    '),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:returns.salesOrder~",isVisibleBinding:"data.isSalesOrderGridVisible"},hashTypes:{text:"STRING",isVisibleBinding:"STRING"},hashContexts:{text:e,isVisibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(":\r\n                    "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.lblSalesOrder",isVisibleBinding:"data.isSalesOrderGridVisible"},hashTypes:{textBinding:"STRING",isVisibleBinding:"STRING"},hashContexts:{textBinding:e,isVisibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td>\r\n                    <table id="gridQuoteDataTable" class="table table-bordered komodo-datagrid">\r\n                        <col width="19%">\r\n                        <col width="19%">\r\n                        <col width="19%">\r\n                        <col width="19%">\r\n                        <col width="19%">\r\n                        <col width="5%">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>'),t.buffer.push(g((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:returns.item",r):m.call(e,"loc","locale.manageStock:returns.item",r)))),t.buffer.push("</th>\r\n                                <th>"),t.buffer.push(g((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:returns.deviceNumber",r):m.call(e,"loc","locale.manageStock:returns.deviceNumber",r)))),t.buffer.push("</th>\r\n                                <th>"),t.buffer.push(g((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:returns.deviceCost",r):m.call(e,"loc","locale.manageStock:returns.deviceCost",r)))),t.buffer.push("</th>\r\n                                <th>"),t.buffer.push(g((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:returns.tax",r):m.call(e,"loc","locale.manageStock:returns.tax",r)))),t.buffer.push("</th>\r\n                                <th>"),t.buffer.push(g((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:returns.total",r):m.call(e,"loc","locale.manageStock:returns.total",r)))),t.buffer.push("</th>\r\n                                <th>"),t.buffer.push(g((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:returns.returnItem",r):m.call(e,"loc","locale.manageStock:returns.returnItem",r)))),t.buffer.push("</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            "),o=a.each.call(e,"item","in","data.gridQuoteDeviceHistory",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(4,i,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                        </tbody>\r\n                    </table>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td>\r\n                    <table id="gridTotalQuoteDeviceHistory" class="table table-bordered komodo-datagrid">\r\n                        <col width="19%">\r\n                        <col width="19%">\r\n                        <col width="19%">\r\n                        <col width="19%">\r\n                        <col width="19%">\r\n                        <col width="5%">\r\n                        <tbody>\r\n                            '),o=a.each.call(e,"item","in","data.gridTotalQuoteDeviceHistory",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(6,c,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                        </tbody>\r\n                    </table>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td colspan="2" style="text-align: right;">\r\n                    '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"createReturnOrder",isVisibleBinding:"data.isSalesOrderGridVisible"},hashTypes:{action:"STRING",isVisibleBinding:"STRING"},hashContexts:{action:e,isVisibleBinding:e},inverse:p.noop,fn:p.program(8,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n            </tr>\r\n        </table>\r\n        "),""}function n(e,t){var o,s;return t.buffer.push("\r\n                    "),t.buffer.push(g((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:returns.retrieveOrder",s):m.call(e,"loc","locale.manageStock:returns.retrieveOrder",s)))),t.buffer.push("\r\n                </td>\r\n                <td>\r\n                    "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"data.Reason",isVisibleBinding:"_useReturnReason",label:"~locale.manageStock:returns.reasonforReturn~",contentBinding:"_hardwareSaleReturnCodes",optionLabelPath:"content.value",optionValuePath:"content.key",prompt:"~locale.manageStock:returns.reasonDropDefault~"},hashTypes:{valueBinding:"STRING",isVisibleBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING"},hashContexts:{valueBinding:e,isVisibleBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                </td>\r\n            </tr>\r\n        </table>\r\n        "),""}function i(e,t){var o;return t.buffer.push("\r\n                            <tr>\r\n                                <td>\r\n                                    "),o=a._triageMustache.call(e,"item.FromModel",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                                </td>\r\n                                <td>\r\n                                    "),o=a._triageMustache.call(e,"item.DeviceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                                </td>\r\n                                <td style="text-align: right">\r\n                                    '),o=a._triageMustache.call(e,"item.deviceCost",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                                </td>\r\n                                <td style="text-align: right">\r\n                                    '),o=a._triageMustache.call(e,"item.totalTax",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                                </td>\r\n                                <td style="text-align: right">\r\n                                    '),o=a._triageMustache.call(e,"item.totalPrice",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                                </td>\r\n                                <td style="text-align: center">\r\n                                    '),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"item.checked"},hashTypes:{checkedBinding:"STRING"},hashContexts:{checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                                </td>\r\n                            </tr>\r\n                            "),""}function c(e,t){var o;return t.buffer.push("\r\n                            <tr>\r\n                                <td>\r\n                                    <b>"),o=a._triageMustache.call(e,"item.FromModel",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</b>\r\n                                </td>\r\n                                <td>\r\n                                    <b>"),o=a._triageMustache.call(e,"item.DeviceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</b>\r\n                                </td>\r\n                                <td style="text-align: right">\r\n                                    <b>'),o=a._triageMustache.call(e,"item.deviceCost",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</b>\r\n                                </td>\r\n                                <td style="text-align: right">\r\n                                    <b>'),o=a._triageMustache.call(e,"item.totalTax",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</b>\r\n                                </td>\r\n                                <td style="text-align: right">\r\n                                    <b>'),o=a._triageMustache.call(e,"item.totalPrice",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</b>\r\n                                </td>\r\n                                <td></td>\r\n                            </tr>\r\n                            "),""}function l(e,t){var o,s;return t.buffer.push("\r\n                    "),t.buffer.push(g((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:returns.processReturn",s):m.call(e,"loc","locale.manageStock:returns.processReturn",s)))),t.buffer.push("\r\n                    "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var d,u,h,m=a.helperMissing,g=this.escapeExpression,p=this;return s.buffer.push("<div "),s.buffer.push(g(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n    <div width="90%">\r\n        <span class="komodo-heading">'),s.buffer.push(g((u=a.loc||t&&t.loc,h={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},u?u.call(t,"locale.manageStock:returns.title",h):m.call(t,"loc","locale.manageStock:returns.title",h)))),s.buffer.push('</span>\r\n        <span class="float-right">\r\n            <b>\r\n                <a href="#/manageViewing">&lt;BACK</a>\r\n            </b>\r\n        </span>\r\n    </div>\r\n    <hr />\r\n    <div>\r\n        '),d=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageStock:returns.gridTitle~",isCollapsedBinding:"false"},hashTypes:{title:"STRING",isCollapsedBinding:"STRING"},hashContexts:{title:t,isCollapsedBinding:t},inverse:p.noop,fn:p.program(1,r,s),contexts:[t],types:["ID"],data:s}),(d||0===d)&&s.buffer.push(d),s.buffer.push("\r\n    </div>\r\n</div>"),""}),Ember.TEMPLATES.RetrieveHardwareSingleView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:h.noop,fn:h.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:h.noop,fn:h.program(4,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function n(e,t){return t.buffer.push("\r\n  "),t.buffer.push(u(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"1",valueBinding:"dataModel.commercialSerialNumber",label:"Device serial:",validatorBinding:"validators.commercialSerialNumberValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function i(e,t){t.buffer.push("\r\n  <br/>\r\n  ")}function c(e,t){var o,s;return t.buffer.push("\r\n    "),t.buffer.push(u((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"Back",s):m.call(e,"loc","Back",s)))),t.buffer.push("\r\n    "),""}function l(e,t){var o,s;return t.buffer.push("\r\n    "),t.buffer.push(u((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"Search",s):m.call(e,"loc","Search",s)))),t.buffer.push("\r\n    "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var d,u=this.escapeExpression,h=this,m=a.helperMissing;return s.buffer.push("<div>\r\n  "),d=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:h.noop,fn:h.program(1,r,s),contexts:[t],types:["ID"],data:s}),(d||0===d)&&s.buffer.push(d),s.buffer.push('\r\n  <br/>\r\n  <div class="float-right">\r\n    '),d=a.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"2",action:"backDeviceSingle"},hashTypes:{tabindex:"STRING",action:"STRING"},hashContexts:{tabindex:t,action:t},inverse:h.noop,fn:h.program(6,c,s),contexts:[t],types:["ID"],data:s}),(d||0===d)&&s.buffer.push(d),s.buffer.push("\r\n    "),d=a.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"3",action:"searchDeviceSingle"},hashTypes:{tabindex:"STRING",action:"STRING"},hashContexts:{tabindex:t,action:t},inverse:h.noop,fn:h.program(8,l,s),contexts:[t],types:["ID"],data:s}),(d||0===d)&&s.buffer.push(d),s.buffer.push("\r\n  </div>\r\n</div>"),""}),Ember.TEMPLATES.RecoverStolenDeviceView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push('\r\n        <table width="100%">\r\n            <tbody>\r\n                <tr>\r\n                    <td>\r\n                        '),t.buffer.push(u(a.view.call(e,"Komodo.Controls.TextField",{hash:{
label:"~locale.manageviewing:recoverStolenDevice.deviceSerialNumber~",valueBinding:"rsdDataModel.DecoderSerialNumber"},hashTypes:{label:"STRING",valueBinding:"STRING"},hashContexts:{label:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                    </td>\r\n                    <td>\r\n                        "),t.buffer.push(u(a.view.call(e,"Komodo.Controls.TextField",{hash:{label:"~locale.manageviewing:recoverStolenDevice.smartcardSerialNumber~",valueBinding:"rsdDataModel.SmartcardSerialNumber"},hashTypes:{label:"STRING",valueBinding:"STRING"},hashContexts:{label:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td></td>\r\n                    <td style="float:right;">\r\n                        '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"recoverStolenDevice",contentBinding:"reconnectHardwareAndService"},hashTypes:{action:"STRING",contentBinding:"STRING"},hashContexts:{action:e,contentBinding:e},inverse:h.noop,fn:h.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n        "),""}function n(e,t){var o,s;t.buffer.push(u((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:recoverStolenDevice.btnRecover",s):d.call(e,"loc","locale.manageviewing:recoverStolenDevice.btnRecover",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var i,c,l,d=a.helperMissing,u=this.escapeExpression,h=this;return s.buffer.push("<div "),s.buffer.push(u(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n    <div >\r\n        <div width="90%">\r\n            <span class="komodo-heading">'),s.buffer.push(u((c=a.loc||t&&t.loc,l={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},c?c.call(t,"locale.manageviewing:recoverStolenDevice.useCaseTitle",l):d.call(t,"loc","locale.manageviewing:recoverStolenDevice.useCaseTitle",l)))),s.buffer.push('</span>\r\n            <span class="float-right">\r\n                <b>\r\n                    <a href="#/manageViewing">&lt;'),s.buffer.push(u((c=a.loc||t&&t.loc,l={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},c?c.call(t,"locale.manageviewing:recoverStolenDevice.back",l):d.call(t,"loc","locale.manageviewing:recoverStolenDevice.back",l)))),s.buffer.push("</a>\r\n                </b>\r\n            </span>\r\n        </div>\r\n        <hr />\r\n\r\n        "),i=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:recoverStolenDevice.findDevice~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:h.noop,fn:h.program(1,r,s),contexts:[t],types:["ID"],data:s}),(i||0===i)&&s.buffer.push(i),s.buffer.push("\r\n    </div>\r\n</div>"),""}),Ember.TEMPLATES.ReconnectView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n  "),o=a.if.call(e,"currentReconnectModel.isReconnectPackageVisible",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function n(e,t){var o,s;return t.buffer.push('\r\n  <div style="padding:20px 20px 0px 20px">\r\n    <div width="90%">\r\n      <span class="komodo-heading"> '),t.buffer.push(we((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:reconnect.reconnectTitle",s):ye.call(e,"loc","locale.manageviewing:reconnect.reconnectTitle",s)))),t.buffer.push("</span>\r\n    </div>\r\n    <br/>\r\n  </div>\r\n  "),""}function i(e,t){var o;return t.buffer.push("\r\n  "),o=a.if.call(e,"Komodo.Services.customerProfileService.isBannerOpen",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.program(7,l,t),fn:Ie.program(5,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function c(e,t){var o,s;return t.buffer.push('\r\n  <div style="padding:140px 20px 0px 20px">\r\n    <div width="90%">\r\n      <span class="komodo-heading"> '),t.buffer.push(we((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:reconnect.reconnectTitle",s):ye.call(e,"loc","locale.manageviewing:reconnect.reconnectTitle",s)))),t.buffer.push('</span>\r\n      <span class="float-right">\r\n        <b>\r\n          <a href="#/manageViewing">&lt; '),t.buffer.push(we((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:reconnect.back",s):ye.call(e,"loc","locale.manageviewing:reconnect.back",s)))),t.buffer.push("</a>\r\n        </b>\r\n      </span>\r\n    </div>\r\n    <hr/>\r\n  </div>\r\n  "),""}function l(e,t){var o,s;return t.buffer.push('\r\n  <div style="padding:20px 20px 0px 20px">\r\n    <div width="90%">\r\n      <span class="komodo-heading"> '),t.buffer.push(we((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:reconnect.reconnectTitle",s):ye.call(e,"loc","locale.manageviewing:reconnect.reconnectTitle",s)))),t.buffer.push('</span>\r\n      <span class="float-right">\r\n        <b>\r\n          <a href="#/manageViewing">&lt; '),t.buffer.push(we((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:reconnect.back",s):ye.call(e,"loc","locale.manageviewing:reconnect.back",s)))),t.buffer.push("</a>\r\n        </b>\r\n      </span>\r\n    </div>\r\n    <hr/>\r\n  </div>\r\n  "),""}function d(e,t){return t.buffer.push("\r\n    "),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{visibleBinding:"noResidentialcustomermsg",text:"~locale.manageviewing:reconnect.noResidentialCustomerErrormsg~"},hashTypes:{visibleBinding:"STRING",text:"STRING"},hashContexts:{visibleBinding:e,text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function u(e,t){var o;return t.buffer.push("\r\n\r\n\r\n    "),o=a.if.call(e,"currentReconnectModel.isHolidayHome",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.program(14,m,t),fn:Ie.program(12,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    \x3c!-- Reconnect Package --\x3e\r\n    "),o=a.if.call(e,"isShowReconnectPanelForHH",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.program(27,y,t),fn:Ie.program(17,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function h(e,t){t.buffer.push("\r\n    ")}function m(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:reconnect.selectSmartcard~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:e,isCollapsed:e},inverse:Ie.noop,fn:Ie.program(15,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function g(e,t){return t.buffer.push("\r\n    "),t.buffer.push(we(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"currentReconnectModel.smartCards",tabindex:"1",class:"info-heading",contentBinding:"smartcardsList",optionLabelPath:"content.Key",optionValuePath:"content",label:"~locale.manageviewing:reconnect.lstSmartcards~",prompt:"~locale.manageviewing:reconnect.SmartcardPrompt~"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",class:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",label:"STRING",prompt:"STRING"},hashContexts:{valueBinding:e,tabindex:e,class:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,label:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function p(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{id:"reconnectCollapsibleView",title:"~locale.manageviewing:reconnect.reconnectPackages~",isCollapsed:!1},hashTypes:{id:"STRING",title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{id:e,title:e,isCollapsed:e},inverse:Ie.noop,fn:Ie.program(18,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function v(e,t){var o,s,r;return t.buffer.push('\r\n    <table style="width:100%">\r\n      <tbody>\r\n        <tr>\r\n          <td>\r\n            <table border="1" class="full-width">\r\n              <tbody>\r\n                <tr style="height:30px;">\r\n                  <td style="width:25%;" bgcolor= "#eeeeee">\r\n                    <b>'),t.buffer.push(we((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:reconnect.smartCardDeviceNumber",r):ye.call(e,"loc","locale.manageviewing:reconnect.smartCardDeviceNumber",r)))),t.buffer.push('</b>\r\n                  </td>\r\n                  <td style="width:45%;" bgcolor= "#eeeeee">\r\n                    <b>'),t.buffer.push(we((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:reconnect.package",r):ye.call(e,"loc","locale.manageviewing:reconnect.package",r)))),t.buffer.push('</b>\r\n                  </td>\r\n                  <td style="width:15%;" bgcolor= "#eeeeee">\r\n                    <b>'),t.buffer.push(we((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:reconnect.action",r):ye.call(e,"loc","locale.manageviewing:reconnect.action",r)))),t.buffer.push("</b>\r\n                  </td>\r\n                </tr>\r\n                "),o=a.each.call(e,"item","in","reconnectHHPackages",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(19,f,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              </tbody>\r\n            </table>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <br/>\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(21,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),""}function f(e,t){var o;return t.buffer.push('\r\n                <tr>\r\n                  <td width="25%">\r\n                    '),o=a._triageMustache.call(e,"item.deviceSerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                  </td>\r\n                  <td width="45%">\r\n                    '),o=a._triageMustache.call(e,"item.packageName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                  </td>\r\n                  <td width="15%">\r\n                    '),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"item.isReconnectService"},hashTypes:{checkedBinding:"STRING"},hashContexts:{checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                  </td>\r\n                </tr>\r\n                "),""}function b(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(22,C,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(24,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function C(e,t){return t.buffer.push("\r\n    "),t.buffer.push(we(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"defaultDay",contentBinding:"dayList",optionLabelPath:"content",optionValuePath:"content",label:"~locale.manageviewing:reconnect.noOfDays~"},hashTypes:{valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",label:"STRING"},hashContexts:{valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function S(e,t){var o;return t.buffer.push('\r\n    <div  style="float: right;">\r\n      <br/>\r\n      '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"actionPreActivateHHPrepaid",tabindex:"11",contentBinding:"reconnectHHPackages",disabledBinding:"currentReconnectModel.disablePreActivate"},hashTypes:{action:"STRING",tabindex:"STRING",contentBinding:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,tabindex:e,contentBinding:e,disabledBinding:e},inverse:Ie.noop,fn:Ie.program(25,D,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </div>\r\n    "),""}function D(e,t){var o,s;return t.buffer.push("\r\n      "),t.buffer.push(we((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:reconnect.preActivateQuoteButton",s):ye.call(e,"loc","locale.manageviewing:reconnect.preActivateQuoteButton",s)))),t.buffer.push("\r\n      "),""}function y(e,t){var o;return t.buffer.push("\r\n    "),o=a.if.call(e,"currentReconnectModel.isReconnectPackageVisible",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(28,w,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.if.call(e,"currentReconnectModel.isDataAvail",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(77,ee,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function w(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{id:"reconnectCollapsibleView",title:"~locale.manageviewing:reconnect.reconnectPackages~",isCollapsed:!1},hashTypes:{id:"STRING",title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{id:e,title:e,isCollapsed:e},inverse:Ie.noop,fn:Ie.program(29,I,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function I(e,t){var o;return t.buffer.push("\r\n    "),o=a.if.call(e,"currentReconnectModel.isMultipleReconnect",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.program(53,V,t),fn:Ie.program(30,x,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function x(e,t){var o,s,r;return t.buffer.push('\r\n    <table class="full-width">\r\n      <tbody>\r\n        <tr>\r\n          <td class="column-width">\r\n            '),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"paymentAlreadyDoneAll",tabindex:"1",disabledBinding:"disablePaymentAlreadyDoneAll"},hashTypes:{checkedBinding:"STRING",tabindex:"STRING",disabledBinding:"STRING"},hashContexts:{checkedBinding:e,tabindex:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:reconnect.paymentAlreadyDone~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('<br/>\r\n          </td>\r\n          <td class="column-width">\r\n            '),t.buffer.push(we(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"defaultDay",tabindex:"2",disabledBinding:"disableNoOfDays",contentBinding:"dayList",optionLabelPath:"content",optionValuePath:"content",label:"~locale.manageviewing:reconnect.noOfDays~"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",disabledBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",label:"STRING"},hashContexts:{valueBinding:e,tabindex:e,disabledBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n\r\n    <table id="tableReconnectAll" class="table table-bordered komodo-datagrid">\r\n      <thead>\r\n        <tr>\r\n          <th width="25%">'),t.buffer.push(we((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:reconnect.smartcardDeviceNumber",r):ye.call(e,"loc","locale.manageviewing:reconnect.smartcardDeviceNumber",r)))),t.buffer.push('</th>\r\n          <th width="25%">'),t.buffer.push(we((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:reconnect.principalPackage",r):ye.call(e,"loc","locale.manageviewing:reconnect.principalPackage",r)))),t.buffer.push('</th>\r\n          <th width="20%">'),t.buffer.push(we((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:reconnect.addon",r):ye.call(e,"loc","locale.manageviewing:reconnect.addon",r)))),t.buffer.push('</th>\r\n          <th width="20%">'),t.buffer.push(we((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:reconnect.access",r):ye.call(e,"loc","locale.manageviewing:reconnect.access",r)))),t.buffer.push('</th>\r\n          <th width="10%">\r\n            '),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"reconnectAllToggle",appearance:"switch",disabledBinding:"disableReconnectAllToggle"},hashTypes:{checkedBinding:"STRING",appearance:"STRING",disabledBinding:"STRING"},hashContexts:{checkedBinding:e,appearance:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n          </th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        "),o=a.each.call(e,"item","in","currentReconnectModel.allHardwares",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(31,M,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </tbody>\r\n    </table>\r\n\r\n    "),t.buffer.push(we(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{tabindex:"3",label:"~locale.manageviewing:reconnect.reconnectDate~",valueBinding:"bindReconnectAllDate",validatorBinding:"validators.bindReconnectAllDateValidator",disabledBinding:"disableReconnectAllDate"},hashTypes:{tabindex:"STRING",label:"STRING",valueBinding:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:e,label:e,valueBinding:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <hr/>\r\n\r\n    "),o=a.if.call(e,"currentReconnectModel.showUnfairAllDisconnect",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(40,B,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n\r\n\r\n    <table class="full-width">\r\n      <tbody>\r\n        '),o=a.if.call(e,"currentReconnectModel.disconnectServicesCheck",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(47,G,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n        <tr>\r\n          <td class="column-width"></td>\r\n          <td class="column-width" style="float:right;">\r\n            '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"submiReconnectAll",tabindex:"6",contentBinding:"currentReconnectModel.allHardwares",disabledBinding:"disableSubmitReconnectAll"},hashTypes:{action:"STRING",tabindex:"STRING",contentBinding:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,tabindex:e,contentBinding:e,disabledBinding:e},inverse:Ie.noop,fn:Ie.program(49,L,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n            "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"refreshQuote",tabindex:"7",contentBinding:"currentReconnectModel.allHardwares",disabledBinding:"disableRefreshAll",class:"btn-inverse"},hashTypes:{action:"STRING",tabindex:"STRING",contentBinding:"STRING",disabledBinding:"STRING",class:"STRING"},hashContexts:{action:e,tabindex:e,contentBinding:e,disabledBinding:e,class:e},inverse:Ie.noop,fn:Ie.program(51,E,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n\r\n    "),""}function M(e,t){var o;return t.buffer.push("\r\n        "),o=a.if.call(e,"item.checkPrincAvailable",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(32,T,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n        "),o=a.each.call(e,"addon","in","item.listOfAddOnServices",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(34,N,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n        "),o=a.each.call(e,"access","in","item.listOfAccessService",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(36,P,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n        "),o=a.if.call(e,"item.insuranceServiceStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(38,O,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n        "),""}function T(e,t){var o;return t.buffer.push('\r\n        <tr>\r\n          <td width="25%">\r\n            '),o=a._triageMustache.call(e,"item.SerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("  "),o=a._triageMustache.call(e,"item.linkedSmartCard",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n          </td>\r\n          <td width="25%">\r\n            '),o=a._triageMustache.call(e,"item.principalServiceName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n          </td>\r\n          <td width="20%">\r\n            -\r\n          </td>\r\n          <td width="20%">\r\n            -\r\n          </td>\r\n          <td width="10%">\r\n            '),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"item.stateOfToggleButtonOfPrincipleService",appearance:"switch",disabledBinding:"item.stateOfToggleButtonPrinc"},hashTypes:{checkedBinding:"STRING",appearance:"STRING",disabledBinding:"STRING"},hashContexts:{checkedBinding:e,appearance:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n          </td>\r\n        </tr>\r\n        "),""}function N(e,t){var o;return t.buffer.push('\r\n        <tr>\r\n          <td width="25%">\r\n            '),o=a._triageMustache.call(e,"item.SerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("  "),o=a._triageMustache.call(e,"item.linkedSmartCard",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n          </td>\r\n          <td width="25%">\r\n            -\r\n          </td>\r\n          <td width="20%">\r\n            '),o=a._triageMustache.call(e,"addon.serviceName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n          </td>\r\n          <td width="20%">\r\n            -\r\n          </td>\r\n          <td width="10%">\r\n            '),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"addon.stateOfToggleButtonOfService",appearance:"switch",disabledBinding:"addon.stateOfToggleButton"},hashTypes:{checkedBinding:"STRING",appearance:"STRING",disabledBinding:"STRING"},hashContexts:{checkedBinding:e,appearance:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n          </td>\r\n        </tr>\r\n        "),""}function P(e,t){var o;return t.buffer.push('\r\n        <tr>\r\n          <td width="25%">\r\n            '),o=a._triageMustache.call(e,"item.SerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("  "),o=a._triageMustache.call(e,"item.linkedSmartCard",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n          </td>\r\n          <td width="25%">\r\n            -\r\n          </td>\r\n          <td width="20%">\r\n            -\r\n          </td>\r\n          <td width="20%">\r\n            '),o=a._triageMustache.call(e,"access.serviceName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n          </td>\r\n          <td width="10%">\r\n            '),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"access.stateOfToggleButtonOfService",appearance:"switch",disabledBinding:"access.stateOfToggleButton"},hashTypes:{checkedBinding:"STRING",appearance:"STRING",disabledBinding:"STRING"},hashContexts:{checkedBinding:e,appearance:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n          </td>\r\n        </tr>\r\n        "),""}function O(e,t){var o;return t.buffer.push("\r\n        <tr>\r\n          <td>\r\n            "),o=a._triageMustache.call(e,"item.SerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("  "),o=a._triageMustache.call(e,"item.linkedSmartCard",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </td>\r\n          <td>\r\n            -\r\n          </td>\r\n          <td>\r\n            -\r\n          </td>\r\n          <td>\r\n            "),o=a._triageMustache.call(e,"item.insuranceServiceName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </td>\r\n          <td>\r\n            "),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"item.stateOfToggleButtonOfInsuranceService",appearance:"switch",disabledBinding:"item.stateOfToggleButtonDCC"},hashTypes:{checkedBinding:"STRING",appearance:"STRING",disabledBinding:"STRING"},hashContexts:{checkedBinding:e,appearance:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n          </td>\r\n        </tr>\r\n        "),""}function B(e,t){var o;return t.buffer.push('\r\n    <table class="full-width">\r\n      <tbody>\r\n        <tr>\r\n          <td style="width:30%;vertical-align:middle;">\r\n            '),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{tabindex:"6",checkedBinding:"isUnfairAllDisconnect",disabledBinding:"isunfairAllcheckboxEnabledOrDisabled"},hashTypes:{tabindex:"STRING",checkedBinding:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:e,checkedBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            "),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:reconnect.unfairDisconnect~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <br/>\r\n    "),o=a.if.call(e,"currentReconnectModel.showUnfairDisnotes",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(41,R,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    <hr></hr>\r\n    "),""}function R(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(42,k,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    <br/>\r\n    "),""}function k(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(43,A,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-10"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:Ie.noop,fn:Ie.program(45,K,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function A(e,t){return t.buffer.push("\r\n    "),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:reconnect.notes~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function K(e,t){return t.buffer.push("\r\n    "),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreTextArea",{hash:{valueBinding:"unfairDiscNotes",class:"textarea-large",maxlength:"1000",rows:"6",validatorBinding:"validators.unfairDiscNotesValidator"},hashTypes:{valueBinding:"STRING",class:"STRING",maxlength:"STRING",rows:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,class:e,maxlength:e,rows:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.unfairDiscNotesValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function G(e,t){return t.buffer.push('\r\n        <tr>\r\n          <td class="column-width">\r\n            '),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"isScheduleDisconnectionAll",disabledBinding:"disableScheduleDisconnectionAll"},hashTypes:{checkedBinding:"STRING",disabledBinding:"STRING"},hashContexts:{checkedBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:reconnect.scheduleDisconnectionAll~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('<br/>\r\n          </td>\r\n          <td class="column-width">\r\n            '),t.buffer.push(we(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{tabindex:"5",label:"~locale.manageviewing:reconnect.scheduleDisconnectionDate~",valueBinding:"dateScheduleDisconnectionAll",validatorBinding:"validators.dateScheduleDisconnectionAllValidator",disabledBinding:"disableDateScheduleDisconnectionAll"},hashTypes:{tabindex:"STRING",label:"STRING",valueBinding:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:e,label:e,valueBinding:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n          </td>\r\n        </tr>\r\n        "),""}function L(e,t){var o,s;t.buffer.push(we((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:reconnect.quote",s):ye.call(e,"loc","locale.manageviewing:reconnect.quote",s))))}function E(e,t){var o,s;t.buffer.push(we((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:reconnect.refresh",s):ye.call(e,"loc","locale.manageviewing:reconnect.refresh",s))))}function V(e,t){var o,s,r
;return t.buffer.push('\r\n    <table style="width: 100%">\r\n      <tbody>\r\n        <tr>\r\n          <td>\r\n            <table style="width: 100%" >\r\n              <tbody>\r\n                <tr>\r\n                  <td width="30%">\r\n                    '),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"currentReconnectModel.sctemp",class:"sub-heading"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                  </td>\r\n                  <td align="left" width="20%">\r\n                    '),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{tabindex:"1",disabledBinding:"currentReconnectModel.checkPreActivateQuote",checkedBinding:"currentReconnectModel.checkPreAct",id:"checkBoxPreActivate"},hashTypes:{tabindex:"STRING",disabledBinding:"STRING",checkedBinding:"STRING",id:"STRING"},hashContexts:{tabindex:e,disabledBinding:e,checkedBinding:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                    "),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:reconnect.paymentAlready~",id:"textEnable"},hashTypes:{text:"STRING",id:"STRING"},hashContexts:{text:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                  </td>\r\n                  <td align="left" width="40%">\r\n\r\n                    '),t.buffer.push(we(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"defaultDay",contentBinding:"dayList",optionValuePath:"content",optionLabelPath:"content",disabledBinding:"checkPreActivateQuoteDays",label:"~locale.manageviewing:reconnect.noOfDays~",id:"dayId"},hashTypes:{valueBinding:"STRING",contentBinding:"STRING",optionValuePath:"STRING",optionLabelPath:"STRING",disabledBinding:"STRING",label:"STRING",id:"STRING"},hashContexts:{valueBinding:e,contentBinding:e,optionValuePath:e,optionLabelPath:e,disabledBinding:e,label:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td>\r\n            &nbsp;\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td>\r\n            <table style="width: 100%" >\r\n              <tbody>\r\n                <tr>\r\n                  <td width="30%">\r\n\r\n                  </td>\r\n                  <td align="left" width="20%">\r\n\r\n                  </td>\r\n                  <td align="left" width="40%">\r\n                    <b>'),t.buffer.push(we((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:reconnect.date",r):ye.call(e,"loc","locale.manageviewing:reconnect.date",r)))),t.buffer.push(" </b>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td>\r\n            "),o=a.each.call(e,"reconnectHardwareAndService","in","currentReconnectModel.allHardwares",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(54,H,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    "),""}function H(e,t){var o;return t.buffer.push('\r\n\r\n            <table style="width:100%">\r\n              <tbody>\r\n                '),o=a.if.call(e,"reconnectHardwareAndService.checkPrincAvailable",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(55,F,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                "),o=a.each.call(e,"reconnectAddOnService","in","reconnectHardwareAndService.listOfAddOnServices",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(57,U,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n                "),o=a.each.call(e,"reconnectAccessService","in","reconnectHardwareAndService.listOfAccessService",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(59,_,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n                \x3c!--DDCC--\x3e\r\n                "),o=a.if.call(e,"reconnectHardwareAndService.insuranceServiceStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(61,Q,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n              </tbody>\r\n            </table>\r\n            <hr/>\r\n\r\n            <table class="full-width">\r\n              <tbody>\r\n                <tr>\r\n                  <td style="width:30%;vertical-align:middle;">\r\n                    '),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{tabindex:"6",checkedBinding:"currentReconnectModel.isReconnectAll",disabledBinding:"currentReconnectModel.checkQuoteThere"},hashTypes:{tabindex:"STRING",checkedBinding:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:e,checkedBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                    "),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:reconnect.reconnectAll~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                  </td>\r\n                  <td style="width:20%"></td>\r\n                  <td style="width:40%;">\r\n                    '),t.buffer.push(we(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{tabindex:"7",label:"~locale.manageviewing:reconnect.date~",valueBinding:"currentReconnectModel.dateReconnectAll",validatorBinding:"validators.dateReconnectAllValidator",disabledBinding:"currentReconnectModel.reconnectDateEnDis"},hashTypes:{tabindex:"STRING",label:"STRING",valueBinding:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:e,label:e,valueBinding:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n            "),o=a.if.call(e,"currentReconnectModel.showUnfairDisconnect",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(63,q,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            <hr/>\r\n            "),o=a.if.call(e,"currentReconnectModel.disconnectServicesCheck",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(70,Y,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),o=a.if.call(e,"currentReconnectModel.isQuoteButtonRequired",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(72,X,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),""}function F(e,t){var o;return t.buffer.push('\r\n                <tr style="height:40px;">\r\n                  <td style="vertical-align:text-middle;width:30%">'),o=a._triageMustache.call(e,"reconnectHardwareAndService.principalServiceName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n                  <td style="vertical-align:text-middle;width:20%"> '),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"reconnectHardwareAndService.stateOfToggleButtonOfPrincipleService",appearance:"switch",disabledBinding:"reconnectHardwareAndService.stateOfToggleButtonPrinc"},hashTypes:{checkedBinding:"STRING",appearance:"STRING",disabledBinding:"STRING"},hashContexts:{checkedBinding:e,appearance:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</td>\r\n                  <td style="vertical-align:text-middle;width:40%">\r\n                    '),t.buffer.push(we(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{tabindex:"2",disabledBinding:"reconnectHardwareAndService.PrincCalender",valueBinding:"reconnectHardwareAndService.princDate",validatorBinding:"reconnectHardwareAndService.princDateValidator"},hashTypes:{tabindex:"STRING",disabledBinding:"STRING",valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,disabledBinding:e,valueBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                  </td>\r\n                </tr>\r\n                "),""}function U(e,t){var o;return t.buffer.push('\r\n                <tr style="height:40px;">\r\n                  <td style="vertical-align:text-middle;width:30%">'),o=a._triageMustache.call(e,"reconnectAddOnService.serviceName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n                  <td style="vertical-align:text-middle;width:20%"> '),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"reconnectAddOnService.stateOfToggleButtonOfService",appearance:"switch",disabledBinding:"reconnectAddOnService.stateOfToggleButton"},hashTypes:{checkedBinding:"STRING",appearance:"STRING",disabledBinding:"STRING"},hashContexts:{checkedBinding:e,appearance:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</td>\r\n                  <td style="vertical-align:text-middle;width:40%"> '),t.buffer.push(we(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{tabindex:"3",disabledBinding:"reconnectAddOnService.stateOfToggleCalender",valueBinding:"reconnectAddOnService.tempDate",validatorBinding:"reconnectAddOnService.tempDateValidator"},hashTypes:{tabindex:"STRING",disabledBinding:"STRING",valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,disabledBinding:e,valueBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n                </tr>\r\n                "),""}function _(e,t){var o;return t.buffer.push('\r\n                <tr style="height:40px;">\r\n                  <td style="vertical-align:text-middle;width:30%">'),o=a._triageMustache.call(e,"reconnectAccessService.serviceName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n                  <td style="vertical-align:text-middle;width:20%"> '),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"reconnectAccessService.stateOfToggleButtonOfService",appearance:"switch",disabledBinding:"reconnectAccessService.stateOfToggleButton"},hashTypes:{checkedBinding:"STRING",appearance:"STRING",disabledBinding:"STRING"},hashContexts:{checkedBinding:e,appearance:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</td>\r\n                  <td style="vertical-align:text-middle;width:40%">'),t.buffer.push(we(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{tabindex:"3",disabledBinding:"reconnectAccessService.stateOfToggleCalender",valueBinding:"reconnectAccessService.tempDate",validatorBinding:"reconnectAccessService.tempDateValidator"},hashTypes:{tabindex:"STRING",disabledBinding:"STRING",valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,disabledBinding:e,valueBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n                </tr>\r\n                "),""}function Q(e,t){var o;return t.buffer.push('\r\n                <tr style="height:40px;">\r\n                  <td style="vertical-align:text-middle;width:30%">'),o=a._triageMustache.call(e,"reconnectHardwareAndService.insuranceServiceName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n                  <td style="vertical-align:text-middle;width:20%"> '),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"reconnectHardwareAndService.stateOfToggleButtonOfInsuranceService",appearance:"switch",disabledBinding:"reconnectHardwareAndService.stateOfToggleButtonDCC"},hashTypes:{checkedBinding:"STRING",appearance:"STRING",disabledBinding:"STRING"},hashContexts:{checkedBinding:e,appearance:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</td>\r\n                  <td style="vertical-align:text-middle;width:40%">\r\n                    '),t.buffer.push(we(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{tabindex:"2",disabledBinding:"reconnectHardwareAndService.DCCCalender",valueBinding:"reconnectHardwareAndService.InsuranceCUD",validatorBinding:"reconnectHardwareAndService.insuranceCUDValidator"},hashTypes:{tabindex:"STRING",disabledBinding:"STRING",valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,disabledBinding:e,valueBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                  </td>\r\n                </tr>\r\n                "),""}function q(e,t){var o;return t.buffer.push('\r\n            <hr/>\r\n            <table>\r\n              <tbody>\r\n                <tr>\r\n                  <td style="width:30%;vertical-align:middle;">\r\n                    '),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{tabindex:"6",checkedBinding:"currentReconnectModel.isUnfairDisconnect",disabledBinding:"reconnectHardwareAndService.isReqControlEnabledOnDisconnect"},hashTypes:{tabindex:"STRING",checkedBinding:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:e,checkedBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                    "),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:reconnect.unfairDisconnect~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                  </td>\r\n                </tr>\r\n\r\n              </tbody>\r\n            </table>\r\n            <br/>\r\n            "),o=a.if.call(e,"currentReconnectModel.showUnfairDisnotes",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(64,$,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),""}function $(e,t){var o;return t.buffer.push("\r\n            "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(65,j,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            <br/>\r\n            "),""}function j(e,t){var o;return t.buffer.push("\r\n            "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(66,J,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-10"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:Ie.noop,fn:Ie.program(68,z,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n            "),""}function J(e,t){return t.buffer.push("\r\n            "),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:reconnect.notes~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            "),""}function z(e,t){return t.buffer.push("\r\n            "),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreTextArea",{hash:{valueBinding:"currentReconnectModel.unfairDiscNotes",class:"textarea-large",maxlength:"1000",rows:"6",validatorBinding:"validators.unfairDiscNotesValidator"},hashTypes:{valueBinding:"STRING",class:"STRING",maxlength:"STRING",rows:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,class:e,maxlength:e,rows:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            "),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.unfairDiscNotesValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            "),""}function Y(e,t){return t.buffer.push('\r\n            <table class="full-width">\r\n              <tbody>\r\n                <tr>\r\n                  <td style="width:30%;vertical-align:middle;">\r\n                    '),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{tabindex:"8",checkedBinding:"currentReconnectModel.isScheduleDisconnection",disabledBinding:"reconnectHardwareAndService.isReqControlEnabledOrDisconnectOnPric"},hashTypes:{tabindex:"STRING",checkedBinding:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:e,checkedBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                    "),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:reconnect.scheduleDisconnection~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                  </td>\r\n                  <td style="width:20%"></td>\r\n                  <td style="width:40%;">\r\n                    '),t.buffer.push(we(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{tabindex:"9",label:"~locale.manageviewing:reconnect.date~",valueBinding:"currentReconnectModel.dateScheduleDisconnection",validatorBinding:"validators.dateScheduleDisconnectionValidator",disabledBinding:"currentReconnectModel.diconnectDateEnDis"},hashTypes:{tabindex:"STRING",label:"STRING",valueBinding:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:e,label:e,valueBinding:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n            "),""}function X(e,t){var o;return t.buffer.push('\r\n            <div style="float:right;">\r\n              <table>\r\n                <tr>\r\n                  <td width="80%">\r\n                    '),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"currentReconnectModel.scnotes",class:"sub-heading"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                  </td>\r\n                  <td width="10%" align="right">\r\n                    '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"submiReconnect",tabindex:"11",contentBinding:"reconnectHardwareAndService",disabledBinding:"reconnectHardwareAndService.isReqControlEnabledOnDisconnect"},hashTypes:{action:"STRING",tabindex:"STRING",contentBinding:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,tabindex:e,contentBinding:e,disabledBinding:e},inverse:Ie.noop,fn:Ie.program(73,W,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                  </td>\r\n                  <td width="10%">\r\n                    '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"refreshQuote",tabindex:"11",contentBinding:"reconnectHardwareAndService",disabledBinding:"currentReconnectModel.refreshQuoteCheck",class:"btn-inverse"},hashTypes:{action:"STRING",tabindex:"STRING",contentBinding:"STRING",disabledBinding:"STRING",class:"STRING"},hashContexts:{action:e,tabindex:e,contentBinding:e,disabledBinding:e,class:e},inverse:Ie.noop,fn:Ie.program(75,Z,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                  </td>\r\n                </tr>\r\n              </table>\r\n            </div>\r\n            "),""}function W(e,t){var o,s;return t.buffer.push("\r\n                    "),t.buffer.push(we((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:reconnect.quote",s):ye.call(e,"loc","locale.manageviewing:reconnect.quote",s)))),""}function Z(e,t){var o,s;return t.buffer.push("\r\n                    "),t.buffer.push(we((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:reconnect.refresh",s):ye.call(e,"loc","locale.manageviewing:reconnect.refresh",s)))),""}function ee(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:reconnect.quoteSummary~"},hashTypes:{title:"STRING"},hashContexts:{title:e},inverse:Ie.noop,fn:Ie.program(78,te,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function te(e,t){var o;return t.buffer.push("\r\n\r\n    "),o=a.if.call(e,"currentReconnectModel.suspendedFlag",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(79,ae,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),o=a.if.call(e,"currentReconnectModel.quoteDataAvailable",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(83,re,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.if.call(e,"currentReconnectModel.quoteDataAvailableForMultipleSmarcard",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(98,pe,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),""}function ae(e,t){var o,s,r;return t.buffer.push("\r\n    <b>"),t.buffer.push(we((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:reconnect.note",r):ye.call(e,"loc","locale.manageviewing:reconnect.note",r)))),t.buffer.push(" "),o=a._triageMustache.call(e,"currentReconnectModel.suspendNotes",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</b>\r\n\r\n    <br /><br />\r\n    <table border="1" class="full-width">\r\n      <tbody>\r\n        <tr style="height:30px;">\r\n          <th style="width:55%;" align="left" bgcolor= "#eeeeee">\r\n            <b> '),t.buffer.push(we((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:reconnect.serviceName",r):ye.call(e,"loc","locale.manageviewing:reconnect.serviceName",r)))),t.buffer.push('</b>\r\n          </th>\r\n          <th style="width:25%;" align="left" bgcolor= "#eeeeee">\r\n            <b>'),t.buffer.push(we((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:reconnect.reconnectionDate",r):ye.call(e,"loc","locale.manageviewing:reconnect.reconnectionDate",r)))),t.buffer.push('</b>\r\n          </th>\r\n          <th style="width:20%;" align="left" bgcolor= "#eeeeee">\r\n            <b>'),t.buffer.push(we((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:reconnect.action",r):ye.call(e,"loc","locale.manageviewing:reconnect.action",r)))),t.buffer.push("</b>\r\n          </th>\r\n        </tr>\r\n        "),o=a.each.call(e,"reconnectItemSuspended","in","currentReconnectModel.suspendedData",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(80,oe,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </tbody>\r\n    </table>\r\n    <br />\r\n    "),""}function oe(e,t){var o;return t.buffer.push('\r\n        <tr style="height:30px;">\r\n          <td style="width:55%;" align="left">\r\n            '),o=a._triageMustache.call(e,"reconnectItemSuspended.serviceName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n          </td>\r\n          <td style="width:25%;" align="left">\r\n            '),o=a._triageMustache.call(e,"reconnectItemSuspended.displayDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n          </td>\r\n          <td style="width:20%;" align="center">\r\n            '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"actionSuspendReconnect",tabindex:"11",contentBinding:"reconnectItemSuspended",size:"xs"},hashTypes:{action:"STRING",tabindex:"STRING",contentBinding:"STRING",size:"STRING"},hashContexts:{action:e,tabindex:e,contentBinding:e,size:e},inverse:Ie.noop,fn:Ie.program(81,se,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </td>\r\n        </tr>\r\n        "),""}function se(e,t){var o,s;return t.buffer.push("\r\n            "),t.buffer.push(we((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:reconnect.acceptReconnect",s):ye.call(e,"loc","locale.manageviewing:reconnect.acceptReconnect",s)))),t.buffer.push("\r\n            "),""}function re(e,t){var o,s,r;return t.buffer.push('\r\n    <table style="width:100%">\r\n      <tbody>\r\n        <tr>\r\n          <td>\r\n\r\n            <table border="1" class="full-width">\r\n              <tbody>\r\n                <tr style="height:30px;">\r\n                  <td style="width:25%;" bgcolor= "#eeeeee">\r\n                    <b>'),t.buffer.push(we((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:reconnect.smartCardDeviceNumber",r):ye.call(e,"loc","locale.manageviewing:reconnect.smartCardDeviceNumber",r)))),t.buffer.push('</b>\r\n                  </td>\r\n                  <td style="width:45%;" bgcolor= "#eeeeee">\r\n                    <b>'),t.buffer.push(we((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:reconnect.invoiceDescription",r):ye.call(e,"loc","locale.manageviewing:reconnect.invoiceDescription",r)))),t.buffer.push('</b>\r\n                  </td>\r\n                  <td style="width:15%;" bgcolor= "#eeeeee">\r\n                    <b>'),t.buffer.push(we((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:reconnect.amount",r):ye.call(e,"loc","locale.manageviewing:reconnect.amount",r)))),t.buffer.push('</b>\r\n                  </td>\r\n                  <td style="width:15%;" bgcolor= "#eeeeee">\r\n                    <b>'),t.buffer.push(we((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:reconnect.action",r):ye.call(e,"loc","locale.manageviewing:reconnect.action",r)))),t.buffer.push("</b>\r\n                  </td>\r\n                </tr>\r\n                "),o=a.each.call(e,"reconnectItemNewQuote","in","currentReconnectModel.newQuoteData",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(84,ne,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                <tr style="height:30px;">\r\n                  <td style="width:25%;">\r\n\r\n                  </td>\r\n                  <td style="width:45%;" >\r\n                    <b>'),t.buffer.push(we((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:reconnect.total",r):ye.call(e,"loc","locale.manageviewing:reconnect.total",r)))),t.buffer.push('</b>\r\n                  </td>\r\n\r\n                  <td style="width:15%;" align="right">\r\n                    '),o=a._triageMustache.call(e,"currentReconnectModel.priceTotalAmt",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                  </td>\r\n                  <td style="width:15%;">\r\n\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n            <br />\r\n\r\n            <div style="float:right;">\r\n              <b style="color:#0082be;">\r\n                '),t.buffer.push(we((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:reconnect.totalAmountRequired",r):ye.call(e,"loc","locale.manageviewing:reconnect.totalAmountRequired",r)))),t.buffer.push("\r\n                "),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"currentReconnectModel.finalAmountRequired",class:"quoteTotalCss"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n              </b>\r\n            </div>\r\n\r\n            <br />\r\n            <br />\r\n\r\n            <div style="float: right;">\r\n\r\n              '),o=a.if.call(e,"currentReconnectModel.suffInsuff",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.program(93,he,t),fn:Ie.program(88,le,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n            </div>\r\n\r\n            <br />\r\n            <br />\r\n\r\n\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    "),""}function ne(e,t){var o;return t.buffer.push("\r\n                "),o=a.each.call(e,"reconnectItemLineItem","in","reconnectItemNewQuote.lineItems",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(85,ie,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                "),""}function ie(e,t){var o;return t.buffer.push('\r\n                <tr style="height:30px;">\r\n                  <td style="width:25%;">\r\n                    '),o=a._triageMustache.call(e,"currentReconnectModel.smartCards.Value",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                  </td>\r\n                  <td style="width:45%;">\r\n                    '),o=a._triageMustache.call(e,"reconnectItemLineItem.invoiceText",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                  </td>\r\n                  <td style="width:15%;" align="right">\r\n                    '),o=a._triageMustache.call(e,"reconnectItemLineItem.amount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                  </td>\r\n                  <td style="width:15%; vertical-align:center;" align="center">\r\n                    '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"actionNewViewQuoteDetails",tabindex:"11",contentBinding:"reconnectItemLineItem",size:"xs"},hashTypes:{action:"STRING",tabindex:"STRING",contentBinding:"STRING",size:"STRING"},hashContexts:{action:e,tabindex:e,contentBinding:e,size:e},inverse:Ie.noop,fn:Ie.program(86,ce,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                  </td>\r\n                </tr>\r\n                "),""}function ce(e,t){var o,s;return t.buffer.push("\r\n                    "),t.buffer.push(we((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:reconnect.viewQuote",s):ye.call(e,"loc","locale.manageviewing:reconnect.viewQuote",s)))),t.buffer.push("\r\n                    "),""}function le(e,t){var o;return t.buffer.push("\r\n              "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"acceptReconnect",tabindex:"11",contentBinding:"currentReconnectModel.newQuoteData",disabledBinding:"currentReconnectModel.enabledOrNot"},hashTypes:{
action:"STRING",tabindex:"STRING",contentBinding:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,tabindex:e,contentBinding:e,disabledBinding:e},inverse:Ie.noop,fn:Ie.program(89,de,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"rejectReconnect",tabindex:"11",contentBinding:"currentReconnectModel.newQuoteData",disabledBinding:"currentReconnectModel.disableReject"},hashTypes:{action:"STRING",tabindex:"STRING",contentBinding:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,tabindex:e,contentBinding:e,disabledBinding:e},inverse:Ie.noop,fn:Ie.program(91,ue,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              "),""}function de(e,t){var o,s;t.buffer.push(we((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:reconnect.acceptReconnect",s):ye.call(e,"loc","locale.manageviewing:reconnect.acceptReconnect",s))))}function ue(e,t){var o,s;t.buffer.push(we((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:reconnect.rejectQuote",s):ye.call(e,"loc","locale.manageviewing:reconnect.rejectQuote",s))))}function he(e,t){var o;return t.buffer.push("\r\n              "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"acceptReconnect",tabindex:"11",contentBinding:"currentReconnectModel.newQuoteData",disabledBinding:"currentReconnectModel.disableAcceptReconnect"},hashTypes:{action:"STRING",tabindex:"STRING",contentBinding:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,tabindex:e,contentBinding:e,disabledBinding:e},inverse:Ie.noop,fn:Ie.program(89,de,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"payViaDebitOrder",tabindex:"13",disabledBinding:"adHocDebitOrderButton"},hashTypes:{action:"STRING",tabindex:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,tabindex:e,disabledBinding:e},inverse:Ie.noop,fn:Ie.program(94,me,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"payNow",tabindex:"14",visibleBinding:"payNowVisible"},hashTypes:{action:"STRING",tabindex:"STRING",visibleBinding:"STRING"},hashContexts:{action:e,tabindex:e,visibleBinding:e},inverse:Ie.noop,fn:Ie.program(96,ge,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"rejectReconnect",tabindex:"11",contentBinding:"currentReconnectModel.newQuoteData",disabledBinding:"currentReconnectModel.disableReject"},hashTypes:{action:"STRING",tabindex:"STRING",contentBinding:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,tabindex:e,contentBinding:e,disabledBinding:e},inverse:Ie.noop,fn:Ie.program(91,ue,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              "),""}function me(e,t){var o,s;t.buffer.push(we((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:reconnect.payViaAdhocDebitOrder",s):ye.call(e,"loc","locale.manageviewing:reconnect.payViaAdhocDebitOrder",s))))}function ge(e,t){var o,s;t.buffer.push(we((o=a.loc||e&&e.loc,s={hash:{disabledBinding:"currentReconnectModel.enabledOrNot",id:"reconnectPayNowButton"},hashTypes:{disabledBinding:"STRING",id:"STRING"},hashContexts:{disabledBinding:e,id:e},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:reconnect.payNow",s):ye.call(e,"loc","locale.manageviewing:reconnect.payNow",s))))}function pe(e,t){var o,s,r;return t.buffer.push('\r\n    <table style="width:100%">\r\n      <tbody>\r\n        <tr>\r\n          <td>\r\n            <table border="1" class="full-width">\r\n              <tbody>\r\n                <tr style="height:30px;">\r\n                  <td style="width:25%;" bgcolor= "#eeeeee">\r\n                    <b>'),t.buffer.push(we((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:quoteDetails.quoteID",r):ye.call(e,"loc","locale.manageviewing:quoteDetails.quoteID",r)))),t.buffer.push('</b>\r\n                  </td>\r\n                  <td style="width:45%;" bgcolor= "#eeeeee">\r\n                    <b>'),t.buffer.push(we((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:reconnect.invoiceDescription",r):ye.call(e,"loc","locale.manageviewing:reconnect.invoiceDescription",r)))),t.buffer.push('</b>\r\n                  </td>\r\n                  <td style="width:15%;" bgcolor= "#eeeeee">\r\n                    <b>'),t.buffer.push(we((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:reconnect.amount",r):ye.call(e,"loc","locale.manageviewing:reconnect.amount",r)))),t.buffer.push('</b>\r\n                  </td>\r\n                  <td style="width:15%;" bgcolor= "#eeeeee">\r\n                    <b>'),t.buffer.push(we((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:reconnect.action",r):ye.call(e,"loc","locale.manageviewing:reconnect.action",r)))),t.buffer.push("</b>\r\n                  </td>\r\n                </tr>\r\n\r\n                "),o=a.each.call(e,"reconnectItemNewQuote","in","currentReconnectModel.QuoteArray",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(99,ve,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n\r\n\r\n\r\n                <tr style="height:30px;">\r\n                  <td style="width:25%;">\r\n\r\n                  </td>\r\n                  <td style="width:45%;" >\r\n                    <b>'),t.buffer.push(we((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:reconnect.total",r):ye.call(e,"loc","locale.manageviewing:reconnect.total",r)))),t.buffer.push('</b>\r\n                  </td>\r\n\r\n                  <td style="width:15%;" align="right">\r\n                    '),o=a._triageMustache.call(e,"currentReconnectModel.priceTotalAmt",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                  </td>\r\n                  <td style="width:15%;">\r\n\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n            <br />\r\n\r\n            <div style="float:right;">\r\n              <b style="color:#0082be;">\r\n                '),t.buffer.push(we((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:reconnect.totalAmountRequired",r):ye.call(e,"loc","locale.manageviewing:reconnect.totalAmountRequired",r)))),t.buffer.push("\r\n                "),t.buffer.push(we(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"currentReconnectModel.finalAmountRequired",class:"quoteTotalCss"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n              </b>\r\n            </div>\r\n\r\n            <br />\r\n            <br />\r\n\r\n            <div style="float: right;">\r\n\r\n              '),o=a.if.call(e,"currentReconnectModel.suffInsuff",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.program(106,Se,t),fn:Ie.program(104,Ce,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n            </div>\r\n\r\n            <br />\r\n            <br />\r\n\r\n\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    "),""}function ve(e,t){var o;return t.buffer.push('\r\n                <tr style="height:30px;">\r\n                  <td style="width:25%;">\r\n                    '),o=a._triageMustache.call(e,"reconnectItemNewQuote.deviceSerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                  </td>\r\n                  <td style="width:45%;">\r\n                    '),o=a.each.call(e,"reconnectlineItem","in","reconnectItemNewQuote.lineItems",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(100,fe,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                  </td>\r\n                  <td style="width:15%;" align="right">\r\n                    '),o=a.each.call(e,"reconnectlineItem","in","reconnectItemNewQuote.lineItems",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.noop,fn:Ie.program(102,be,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                  </td>\r\n                  <td style="width:15%; vertical-align:center;" align="center">\r\n                    '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"QuoteDetailsForMultipleSmartcard",tabindex:"11",contentBinding:"reconnectItemNewQuote",size:"xs"},hashTypes:{action:"STRING",tabindex:"STRING",contentBinding:"STRING",size:"STRING"},hashContexts:{action:e,tabindex:e,contentBinding:e,size:e},inverse:Ie.noop,fn:Ie.program(86,ce,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                  </td>\r\n                </tr>\r\n                "),""}function fe(e,t){var o;return t.buffer.push("\r\n                    "),o=a._triageMustache.call(e,"reconnectlineItem.invoiceText",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    <br />\r\n                    "),""}function be(e,t){var o;return t.buffer.push("\r\n                    "),o=a._triageMustache.call(e,"reconnectlineItem.amount",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    <br />\r\n                    "),""}function Ce(e,t){var o;return t.buffer.push("\r\n              "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"acceptMultipleReconnect",tabindex:"11",contentBinding:"currentReconnectModel.newQuoteData",disabledBinding:"currentReconnectModel.enabledOrNot"},hashTypes:{action:"STRING",tabindex:"STRING",contentBinding:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,tabindex:e,contentBinding:e,disabledBinding:e},inverse:Ie.noop,fn:Ie.program(89,de,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"rejectMultipleReconnect",tabindex:"11",contentBinding:"currentReconnectModel.newQuoteData",disabledBinding:"currentReconnectModel.disableReject"},hashTypes:{action:"STRING",tabindex:"STRING",contentBinding:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,tabindex:e,contentBinding:e,disabledBinding:e},inverse:Ie.noop,fn:Ie.program(91,ue,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              "),""}function Se(e,t){var o;return t.buffer.push("\r\n              "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"acceptMultipleReconnect",tabindex:"11",contentBinding:"currentReconnectModel.newQuoteData",disabledBinding:"currentReconnectModel.disableAcceptReconnect"},hashTypes:{action:"STRING",tabindex:"STRING",contentBinding:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,tabindex:e,contentBinding:e,disabledBinding:e},inverse:Ie.noop,fn:Ie.program(89,de,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"payViaDebitOrder",tabindex:"13",disabledBinding:"adHocDebitOrderButton"},hashTypes:{action:"STRING",tabindex:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,tabindex:e,disabledBinding:e},inverse:Ie.noop,fn:Ie.program(94,me,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"payNow",tabindex:"14",visibleBinding:"payNowVisible"},hashTypes:{action:"STRING",tabindex:"STRING",visibleBinding:"STRING"},hashContexts:{action:e,tabindex:e,visibleBinding:e},inverse:Ie.noop,fn:Ie.program(96,ge,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"rejectMultipleReconnect",tabindex:"11",contentBinding:"currentReconnectModel.newQuoteData",disabledBinding:"currentReconnectModel.disableReject"},hashTypes:{action:"STRING",tabindex:"STRING",contentBinding:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,tabindex:e,contentBinding:e,disabledBinding:e},inverse:Ie.noop,fn:Ie.program(91,ue,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var De,ye=a.helperMissing,we=this.escapeExpression,Ie=this;return s.buffer.push("<div>\r\n  "),De=a.if.call(t,"currentReconnectModel.isHolidayHome",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.program(4,i,s),fn:Ie.program(1,r,s),contexts:[t],types:["ID"],data:s}),(De||0===De)&&s.buffer.push(De),s.buffer.push("\r\n  <div>\r\n    \x3c!--<div "),s.buffer.push(we(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push(" >--\x3e\r\n    "),De=a.if.call(t,"currentReconnectModel.noResidentialCustomerErrormsg",{hash:{},hashTypes:{},hashContexts:{},inverse:Ie.program(11,u,s),fn:Ie.program(9,d,s),contexts:[t],types:["ID"],data:s}),(De||0===De)&&s.buffer.push(De),s.buffer.push("\r\n  </div>\r\n</div>"),""}),Ember.TEMPLATES.QuoteDetailView=Ember.Handlebars.template(function(e,t,a,o,s){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var r=this.escapeExpression;return s.buffer.push('<div >  \r\n  <table>\r\n    <tr style="height:30px;">\r\n      <td class="quotetd">\r\n        '),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:quoteDetails.quoteID~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:t,class:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push('\r\n      </td>\r\n      <td class="quotesptd">\r\n        '),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.quoteID"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push('\r\n      </td>\r\n      <td class="quotetd">\r\n        '),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:quoteDetails.status~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:t,class:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push('\r\n      </td>\r\n      <td class="quotetd">\r\n        '),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.status"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push('\r\n      </td>\r\n    </tr>\r\n\r\n    <tr style="height:30px;">\r\n      <td class="quotetd">\r\n        '),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:quoteDetails.invoiceText~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:t,class:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push('\r\n      </td>\r\n      <td class="quotesptd">\r\n        '),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.invoiceText"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push('\r\n      </td>\r\n      <td class="quotetd">\r\n        '),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:quoteDetails.noOfUnits~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:t,class:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push('\r\n      </td>\r\n      <td class="quotetd">\r\n        '),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.noOfUnits"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push('\r\n      </td>\r\n    </tr>\r\n\r\n    <tr style="height:30px;">\r\n      <td class="quotetd">\r\n        '),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:quoteDetails.startDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:t,class:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push('\r\n      </td>\r\n      <td class="quotesptd">\r\n        '),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.startDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push('\r\n      </td>\r\n      <td class="quotetd">\r\n        '),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:quoteDetails.endDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:t,class:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push('\r\n      </td>\r\n      <td class="quotetd">\r\n        '),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.endDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push('\r\n      </td>\r\n    </tr>\r\n    \r\n    <tr style="height:30px;">\r\n      <td class="quotetd">\r\n        '),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:quoteDetails.amount~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:t,class:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push('\r\n      </td>\r\n      <td class="quotesptd">\r\n        '),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.amountRequired",class:"sub-heading"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:t,class:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push('\r\n      </td>\r\n      <td class="quotetd">\r\n        '),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:quoteDetails.tax~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:t,class:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push('\r\n      </td>\r\n      <td class="quotetd">\r\n        '),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.tax"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n      </td>\r\n    </tr>  \r\n  </table>\r\n\r\n</div>\r\n"),""}),Ember.TEMPLATES.PreRepairPopupView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o,s;t.buffer.push(h((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:createRepairsOrder.swapDecoder",s):u.call(e,"loc","locale.manageStock:createRepairsOrder.swapDecoder",s))))}function n(e,t){var o,s;t.buffer.push(h((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:createRepairsOrder.btnNewDecoder",s):u.call(e,"loc","locale.manageStock:createRepairsOrder.btnNewDecoder",s))))}function i(e,t){var o,s;return t.buffer.push("\r\n                            "),t.buffer.push(h((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"Ok",s):u.call(e,"loc","Ok",s)))),t.buffer.push("\r\n                            "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var c,l,d,u=a.helperMissing,h=this.escapeExpression,m=this;return s.buffer.push('<table border="0" cellspacing="2" cellpadding="2" width="100%">\r\n    <tr>\r\n        <td>\r\n            <fieldset>\r\n                <span class="komodo-heading">'),s.buffer.push(h((l=a.loc||t&&t.loc,d={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},l?l.call(t,"locale.manageStock:createRepairsOrder.popupRepairErrorMessageTitle",d):u.call(t,"loc","locale.manageStock:createRepairsOrder.popupRepairErrorMessageTitle",d)))),s.buffer.push('</span>\r\n                <hr />\r\n            </fieldset>\r\n             <table border="0" cellspacing="5" cellpadding="5" width="100%">\r\n                    <tr colspan="2">\r\n                        <td style="padding-right:10px">\r\n                           '),s.buffer.push(h(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.ErrorMessage",class:"sub-heading"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:t,class:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>\r\n                            <br />\r\n                            "),c=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"moveToSwap",tabindex:"1"},hashTypes:{action:"STRING",tabindex:"STRING"},hashContexts:{action:t,tabindex:t},inverse:m.noop,fn:m.program(1,r,s),contexts:[t],types:["ID"],data:s}),(c||0===c)&&s.buffer.push(c),s.buffer.push("\r\n                            "),c=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"moveToCashSale",tabindex:"2"},hashTypes:{action:"STRING",tabindex:"STRING"},hashContexts:{action:t,tabindex:t},inverse:m.noop,fn:m.program(3,n,s),contexts:[t],types:["ID"],data:s}),(c||0===c)&&s.buffer.push(c),s.buffer.push('\r\n                        </td>\r\n                        <td align="right">\r\n                            \x3c!--'),c=a.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"204",action:"ok"},hashTypes:{tabindex:"STRING",action:"STRING"},hashContexts:{tabindex:t,action:t},inverse:m.noop,fn:m.program(5,i,s),contexts:[t],types:["ID"],data:s}),(c||0===c)&&s.buffer.push(c),s.buffer.push("--\x3e\r\n                        </td>\r\n                    </tr>\r\n                    <tr></tr>\r\n                </table>\r\n        </td>\r\n    </tr>\r\n</table>"),""}),Ember.TEMPLATES.PerformSwapView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n    "),o=a.if.call(e,"_SAGrid",{hash:{},hashTypes:{},hashContexts:{},inverse:C.program(5,c,t),fn:C.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n    <table width="100%">\r\n      <tr>\r\n        <td width="50%" colspan="2">\r\n          '),t.buffer.push(f(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"dataModel.Category",label:"~locale.manageStock:performSwap.category~",contentBinding:"_dropDownCategoryList",optionLabelPath:"content.CanonicalValue",optionValuePath:"content.CanonicalKey",prompt:"Select a Category..."},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n        <td width="50%">\r\n          '),t.buffer.push(f(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"dataModel.Reason",label:"~locale.manageStock:performSwap.reason~",contentBinding:"_dropDownReasonList",optionLabelPath:"content.CanonicalValue",optionValuePath:"content.CanonicalKey",prompt:"Select a Reason..."},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n    </table>\r\n    "),""}function n(e,t){var o,s,r;return t.buffer.push('\r\n    <table id="SAGridDataTable" class="table table-bordered komodo-datagrid">\r\n      <tr>\r\n        <th>'),t.buffer.push(f((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:performSwap.deviceName",r):b.call(e,"loc","locale.manageStock:performSwap.deviceName",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(f((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:performSwap.deviceNumber",r):b.call(e,"loc","locale.manageStock:performSwap.deviceNumber",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(f((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:performSwap.deviceStatus",r):b.call(e,"loc","locale.manageStock:performSwap.deviceStatus",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(f((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:performSwap.insurance",r):b.call(e,"loc","locale.manageStock:performSwap.insurance",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(f((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:performSwap.insuranceStartDate",r):b.call(e,"loc","locale.manageStock:performSwap.insuranceStartDate",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(f((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:performSwap.linkedSmartcard",r):b.call(e,"loc","locale.manageStock:performSwap.linkedSmartcard",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(f((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:performSwap.swap",r):b.call(e,"loc","locale.manageStock:performSwap.swap",r)))),t.buffer.push("</th>\r\n      </tr>\r\n      "),o=a.each.call(e,"item","in","dataModel.SAGridData",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(3,i,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </table>\r\n    "),""}function i(e,t){var o;return t.buffer.push("\r\n      <tr>\r\n        <td>\r\n          "),o=a._triageMustache.call(e,"item.HardwareModelDesc",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),o=a._triageMustache.call(e,"item.deviceSerialNo",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),o=a._triageMustache.call(e,"item.deviceStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),o=a._triageMustache.call(e,"item.InsuranceStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),o=a._triageMustache.call(e,"item.insuranceStartDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),o=a._triageMustache.call(e,"item.LinkedSC",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),t.buffer.push(f(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{contentBinding:"item.radioType",displayPath:"title",valuePath:"value",valueBinding:"_selectedRadioGridSA",orientation:"horizontal"},hashTypes:{contentBinding:"STRING",displayPath:"STRING",valuePath:"STRING",valueBinding:"STRING",orientation:"STRING"},hashContexts:{contentBinding:e,displayPath:e,valuePath:e,valueBinding:e,orientation:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n      "),""}function c(e,t){return t.buffer.push('\r\n    <table width="100%">\r\n      <tr>\r\n        <td colspan="3">\r\n          '),t.buffer.push(f(a.view.call(e,"Komodo.Controls.DataGrid",{hash:{canSort:"false",pageSize:"10",canSelect:"true",performsValidation:"false",selectedItemBinding:"dataModel.selectedDeviceGridItem",commandItemBinding:"dataModel.commandGridItem",contentBinding:"dataModel.deviceData",columnsBinding:"_columnDeviceDataGrid"},hashTypes:{canSort:"STRING",pageSize:"STRING",canSelect:"STRING",performsValidation:"STRING",selectedItemBinding:"STRING",commandItemBinding:"STRING",contentBinding:"STRING",columnsBinding:"STRING"},hashContexts:{canSort:e,pageSize:e,canSelect:e,performsValidation:e,selectedItemBinding:e,commandItemBinding:e,contentBinding:e,columnsBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n      </tr>\r\n    </table>\r\n    <table width="50%">\r\n      <tr>\r\n        <td align="left" width="3%">\r\n          '),t.buffer.push(f(a.view.call(e,"Komodo.Controls.Checkbox",{hash:{valueBinding:"dataModel.boolPairedDevice",disabledBinding:"dataModel.enablePairedDevice"},hashTypes:{valueBinding:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n        <td align="left" width="10%">\r\n          '),t.buffer.push(f(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:performSwap.pairedSwap~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n        <td align="left" width="50%">\r\n          '),t.buffer.push(f(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dataModel.DecoderSr"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n          <img src="Content\\Images\\link\\l.svg" style="padding:0 30px 0 20px;" />\r\n          '),t.buffer.push(f(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dataModel.SmartCardSr"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td>\r\n          <br />\r\n        </td>\r\n      </tr>\r\n    </table>\r\n    "),""}function l(e,t){var o,s;t.buffer.push(f((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:performSwap.generateSwapQuote",s):b.call(e,"loc","locale.manageStock:performSwap.generateSwapQuote",s))))}function d(e,t){return t.buffer.push("\r\n    "),t.buffer.push(f(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:performSwap.quoteNumber~",class:"sub-heading"},
hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),t.buffer.push(f(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dataModel.QuoteNumber",class:"sub-heading"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(f(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:performSwap.quoteStatus~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),t.buffer.push(f(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dataModel.QuoteStatus",class:"sub-heading"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),""}function u(e,t){var o;return t.buffer.push('\r\n    <table width="100%">\r\n      <tr>\r\n        <td colspan="3" width="100%">\r\n          '),t.buffer.push(f(a.view.call(e,"Komodo.Controls.DataGrid",{hash:{canSort:"true",pageSize:"10",performsValidation:"false",contentBinding:"dataModel.quoteData",columnsBinding:"_columnQuoteDataGrid"},hashTypes:{canSort:"STRING",pageSize:"STRING",performsValidation:"STRING",contentBinding:"STRING",columnsBinding:"STRING"},hashContexts:{canSort:e,pageSize:e,performsValidation:e,contentBinding:e,columnsBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td width="30%">\r\n          '),t.buffer.push(f(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"dataModel.communicationType",label:"~locale.manageStock:performSwap.sendQuoteVia~",contentBinding:"_dropDownCommunicationList",optionLabelPath:"content.Value",optionValuePath:"content.Key",prompt:"Select..."},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n        <td width="30%">\r\n          '),t.buffer.push(f(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"dataModel.communicationLanguage",label:"~locale.manageStock:performSwap.communicationLanguage~",contentBinding:"_dropDownCommunicationLanguageList",optionLabelPath:"content.Value",optionValuePath:"content.Key",prompt:"Select..."},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n        <td width="30%">\r\n          '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"sendQuotationSwap",visibleBinding:"dataModel.isSendQuotationVisible",class:"btn-success"},hashTypes:{action:"STRING",visibleBinding:"STRING",class:"STRING"},hashContexts:{action:e,visibleBinding:e,class:e},inverse:C.noop,fn:C.program(12,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n        </td>\r\n      </tr>\r\n      <br/>\r\n      <tr>\r\n        <td colspan="3" align="right" width="100%">\r\n          '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"makePaymentSwap"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:C.noop,fn:C.program(14,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n    </table>\r\n    "),""}function h(e,t){var o,s;return t.buffer.push("\r\n          "),t.buffer.push(f((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:performSwap.btnSend",s):b.call(e,"loc","locale.manageStock:performSwap.btnSend",s)))),t.buffer.push("\r\n          "),""}function m(e,t){var o,s;return t.buffer.push("\r\n          "),t.buffer.push(f((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:performSwap.payNow",s):b.call(e,"loc","locale.manageStock:performSwap.payNow",s)))),t.buffer.push("\r\n          "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var g,p,v,f=this.escapeExpression,b=a.helperMissing,C=this;return s.buffer.push("<div "),s.buffer.push(f(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(f((p=a.loc||t&&t.loc,v={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},p?p.call(t,"locale.manageStock:performSwap.title",v):b.call(t,"loc","locale.manageStock:performSwap.title",v)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/manageViewing">&lt;BACK</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr />\r\n  <div>\r\n    '),g=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageStock:performSwap.gridTitle~",isCollapsed:"false"},hashTypes:{title:"STRING",isCollapsed:"STRING"},hashContexts:{title:t,isCollapsed:t},inverse:C.noop,fn:C.program(1,r,s),contexts:[t],types:["ID"],data:s}),(g||0===g)&&s.buffer.push(g),s.buffer.push('\r\n    <br />\r\n    <div class="float-right">\r\n      '),g=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"generateSwapQuote"},hashTypes:{action:"STRING"},hashContexts:{action:t},inverse:C.noop,fn:C.program(7,l,s),contexts:[t],types:["ID"],data:s}),(g||0===g)&&s.buffer.push(g),s.buffer.push("\r\n    </div>\r\n    <br /><br />\r\n    "),g=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{isVisibleBinding:"dataModel.showQuoteDetails",title:"~locale.manageStock:performSwap.quoteDetails~",isCollapsed:"false"},hashTypes:{isVisibleBinding:"STRING",title:"STRING",isCollapsed:"STRING"},hashContexts:{isVisibleBinding:t,title:t,isCollapsed:t},inverse:C.noop,fn:C.program(9,d,s),contexts:[t],types:["ID"],data:s}),(g||0===g)&&s.buffer.push(g),s.buffer.push("\r\n    <br />\r\n    "),g=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{isVisibleBinding:"dataModel.boolAcceptQuoteView",title:"~locale.manageStock:performSwap.tabAccept~",isCollapsed:"false"},hashTypes:{isVisibleBinding:"STRING",title:"STRING",isCollapsed:"STRING"},hashContexts:{isVisibleBinding:t,title:t,isCollapsed:t},inverse:C.noop,fn:C.program(11,u,s),contexts:[t],types:["ID"],data:s}),(g||0===g)&&s.buffer.push(g),s.buffer.push("\r\n  </div>\r\n</div>"),""}),Ember.TEMPLATES.MultipleQuoteDetailView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n    <tr>\r\n      <td>\r\n        "),o=a._triageMustache.call(e,"Quote.quoteID",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td>\r\n      <td>\r\n        "),o=a._triageMustache.call(e,"Quote.status",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td>\r\n      <td>\r\n        "),o=a._triageMustache.call(e,"Quote.invoiceText",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td>\r\n      <td>\r\n        "),o=a._triageMustache.call(e,"Quote.noOfUnits",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td >\r\n      <td>\r\n        "),o=a._triageMustache.call(e,"Quote.startDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td>\r\n      <td>\r\n        "),o=a._triageMustache.call(e,"Quote.endDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td>\r\n      <td>\r\n        "),o=a._triageMustache.call(e,"Quote.amountRequired",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td>\r\n      <td>\r\n        "),o=a._triageMustache.call(e,"Quote.tax",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </td>\r\n    </tr>\r\n    "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var n,i,c,l=a.helperMissing,d=this.escapeExpression,u=this;return s.buffer.push('<div >\r\n  <table id="manageviewGrid" class="table table-bordered komodo-datagrid">\r\n  <tbody>\r\n    <tr>\r\n      <th>'),s.buffer.push(d((i=a.loc||t&&t.loc,c={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},i?i.call(t,"locale.manageviewing:quoteDetails.quoteID",c):l.call(t,"loc","locale.manageviewing:quoteDetails.quoteID",c)))),s.buffer.push("</th>\r\n      <th>"),s.buffer.push(d((i=a.loc||t&&t.loc,c={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},i?i.call(t,"locale.manageviewing:quoteDetails.status",c):l.call(t,"loc","locale.manageviewing:quoteDetails.status",c)))),s.buffer.push("</th>\r\n      <th>"),s.buffer.push(d((i=a.loc||t&&t.loc,c={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},i?i.call(t,"locale.manageviewing:quoteDetails.invoiceText",c):l.call(t,"loc","locale.manageviewing:quoteDetails.invoiceText",c)))),s.buffer.push("</th>\r\n      <th>"),s.buffer.push(d((i=a.loc||t&&t.loc,c={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},i?i.call(t,"locale.manageviewing:quoteDetails.noOfUnits",c):l.call(t,"loc","locale.manageviewing:quoteDetails.noOfUnits",c)))),s.buffer.push("</th>\r\n      <th>"),s.buffer.push(d((i=a.loc||t&&t.loc,c={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},i?i.call(t,"locale.manageviewing:quoteDetails.startDate",c):l.call(t,"loc","locale.manageviewing:quoteDetails.startDate",c)))),s.buffer.push("</th>\r\n      <th>"),s.buffer.push(d((i=a.loc||t&&t.loc,c={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},i?i.call(t,"locale.manageviewing:quoteDetails.endDate",c):l.call(t,"loc","locale.manageviewing:quoteDetails.endDate",c)))),s.buffer.push("</th>\r\n      <th>"),s.buffer.push(d((i=a.loc||t&&t.loc,c={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},i?i.call(t,"locale.manageviewing:quoteDetails.amount",c):l.call(t,"loc","locale.manageviewing:quoteDetails.amount",c)))),s.buffer.push("</th>\r\n      <th>"),s.buffer.push(d((i=a.loc||t&&t.loc,c={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},i?i.call(t,"locale.manageviewing:quoteDetails.tax",c):l.call(t,"loc","locale.manageviewing:quoteDetails.tax",c)))),s.buffer.push("</th>\r\n    </tr>\r\n    "),n=a.each.call(t,"Quote","in","view.context.data",{hash:{},hashTypes:{},hashContexts:{},inverse:u.noop,fn:u.program(1,r,s),contexts:[t,t,t],types:["ID","ID","ID"],data:s}),(n||0===n)&&s.buffer.push(n),s.buffer.push("\r\n  </tbody>\r\n</table>\r\n</div>\r\n"),""});var KomodoGraceDayRolesConfig={OneGraceDayAllowedConfiguration:{OneGraceDayAllowedConfiguration:{OneGraceDayAllowed:[{UserRole:"Clarity-CustomerService",MaxGraceDays:"1",GraceAllowedWithInDays:"30"}]}},GraceDayAllowedConfiguration:{GraceDayAllowedConfiguration:{GraceDayAllowed:[{UserRole:"Clarity-MasterUser",MaxGraceDays:"2",GraceAllowedWithInDays:"30"},{UserRole:"Clarity-SuperUser",MaxGraceDays:"2",GraceAllowedWithInDays:"30"},{UserRole:"Clarity-Supervisor",MaxGraceDays:"2",GraceAllowedWithInDays:"30"},{UserRole:"Clarity-AgencySupervisor",MaxGraceDays:"2",GraceAllowedWithInDays:"30"}]}},MaxGraceDayAllowedConfiguration:{MaxGraceDayAllowedConfiguration:{MaxGraceDayAllowed:[{MaxGraceDay:"3",GraceLimitCheck:"2",GraceAllowedWithInDays:"30",ActionCode:"1"}]}},SearchFiltersConfiguration:{SearchFiltersConfiguration:{SearchFilters:[{CustomerNumber:"4",SmartcardNumber:"26",FromDate:"27",ToDate:"28"}]}}};Ember.TEMPLATES.ManageViewingView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o,s,r;return t.buffer.push("\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n\r\n  <hr/>\r\n  <br/>\r\n  <tbody>\r\n    <table id="manageviewGrid" class="table table-bordered komodo-datagrid">\r\n      <tr>\r\n        <th style="display: none">'),t.buffer.push(Be((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:viewingGridColumnHeaders.accountNumber",r):ke.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.accountNumber",r)))),t.buffer.push('</th>\r\n        <th style="display: none">'),t.buffer.push(Be((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:viewingGridColumnHeaders.agreementNumber",r):ke.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.agreementNumber",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(Be((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:viewingGridColumnHeaders.deviceNumber",r):ke.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.deviceNumber",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(Be((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:viewingGridColumnHeaders.principalPackageName",r):ke.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.principalPackageName",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(Be((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:viewingGridColumnHeaders.princpalStatus",r):ke.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.princpalStatus",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(Be((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:viewingGridColumnHeaders.addonPackageName",r):ke.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.addonPackageName",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(Be((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:viewingGridColumnHeaders.addonStatus",r):ke.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.addonStatus",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(Be((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:viewingGridColumnHeaders.services",r):ke.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.services",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(Be((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:viewingGridColumnHeaders.servicesStatus",r):ke.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.servicesStatus",r)))),t.buffer.push("</th>\r\n          "),o=a.if.call(e,"isDisableChargePeriod",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(7,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        <th>"),t.buffer.push(Be((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:viewingGridColumnHeaders.viewingPeriod",r):ke.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.viewingPeriod",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(Be((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:viewingGridColumnHeaders.actions",r):ke.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.actions",r)))),t.buffer.push("</th>\r\n      </tr>\r\n\r\n      "),o=a.each.call(e,"item","in","gridData",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(9,d,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    </table>\r\n  </tbody>\r\n  \r\n  "),t.buffer.push(Be(a.view.call(e,"Komodo.Controls.TablePager",{hash:{tableId:"manageviewGrid",contentBinding:"gridData",itemsPerPage:"10",headerRows:"1",visibleBinding:"isTablePagerVisible"},hashTypes:{tableId:"STRING",contentBinding:"STRING",itemsPerPage:"STRING",headerRows:"STRING",visibleBinding:"STRING"},hashContexts:{tableId:e,contentBinding:e,itemsPerPage:e,headerRows:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function n(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:Re.noop,fn:Re.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:Re.noop,fn:Re.program(5,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function i(e,t){return t.buffer.push("\r\n  "),t.buffer.push(Be(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{tabindex:"1",text:"~locale.manageviewing:general.filterList~",class:"sub-heading"},hashTypes:{tabindex:"STRING",text:"STRING",class:"STRING"},hashContexts:{tabindex:e,text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(Be(a.view.call(e,"Komodo.Controls.Select",{hash:{label:"~locale.manageviewing:general.principalPackage~",prompt:"~locale.manageviewing:general.principalPackagePrompt~",valueBinding:"manageViewingGridModel.prinPckName",contentBinding:"principalPkgList",optionLabelPath:"content.Value",optionValuePath:"content.Key"},hashTypes:{label:"STRING",prompt:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{label:e,prompt:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function c(e,t){return t.buffer.push("\r\n  "),t.buffer.push(Be(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(Be(a.view.call(e,"Komodo.Controls.Select",{hash:{label:"~locale.manageviewing:general.principalStatus~",prompt:"~locale.manageviewing:general.principalStatusPrompt~",valueBinding:"manageViewingGridModel.prinPckStatus",contentBinding:"principalStatusList",optionLabelPath:"content.Value",optionValuePath:"content.Key"},hashTypes:{label:"STRING",prompt:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{label:e,prompt:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function l(e,t){var o,s;return t.buffer.push("\r\n                <th>"),t.buffer.push(Be((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:viewingGridColumnHeaders.agreementPeriod",s):ke.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.agreementPeriod",s)))),t.buffer.push("</th>\r\n          "),""}function d(e,t){var o;return t.buffer.push('\r\n      <tr>\r\n        <td style="display: none">'),t.buffer.push(Be(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"item.accountNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</td>\r\n        <td style="display: none">'),t.buffer.push(Be(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"item.agreementNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n        "),o=a.if.call(e,"item.isXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(12,h,t),fn:Re.program(10,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n \r\n        "),o=a.if.call(e,"item.isXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(23,C,t),fn:Re.program(18,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        \r\n        "),o=a.if.call(e,"item.isXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(37,N,t),fn:Re.program(32,x,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        \r\n        \r\n          \r\n        "),o=a.if.call(e,"item.isXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(49,G,t),fn:Re.program(46,A,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        \r\n        "),o=a.if.call(e,"item.isXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(62,q,t),fn:Re.program(59,_,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        \r\n        "),o=a.if.call(e,"item.isXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(76,ee,t),fn:Re.program(71,X,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        \r\n        "),o=a.if.call(e,"item.isXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(87,ie,t),fn:Re.program(82,se,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n       \r\n      "),o=a.if.call(e,"isDisableChargePeriod",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(92,de,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" \r\n \r\n\r\n\r\n        "),o=a.if.call(e,"item.isXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(102,fe,t),fn:Re.program(99,pe,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        \r\n        "),o=a.if.call(e,"item.isXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(114,xe,t),fn:Re.program(111,we,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </tr>\r\n      "),""}function u(e,t){var o;return t.buffer.push('\r\n        <td style="border-bottom-color:white; font-weight: bold; padding-left:11px;">'),o=a._triageMustache.call(e,"item.deviceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("  "),o=a._triageMustache.call(e,"item.smartCardNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n          "),""}function h(e,t){var o;return t.buffer.push("\r\n         "),o=a.if.call(e,"item.isSecondaryXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(15,g,t),fn:Re.program(13,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function m(e,t){var o;return t.buffer.push('\r\n          <td style="border-bottom-color:white">\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                '),o=a._triageMustache.call(e,"item.deviceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("  "),o=a._triageMustache.call(e,"item.smartCardNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n              </td>  \r\n            <td>\r\n                <img src="./Content/Images/link/l.svg" style="width:20px;padding-top:4px">\r\n              </td>\r\n            </tr>\r\n          </table>\r\n        </td>\r\n        '),""}function g(e,t){var o;return t.buffer.push("\r\n        <td>\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                "),o=a._triageMustache.call(e,"item.deviceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("  "),o=a._triageMustache.call(e,"item.smartCardNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              </td>\r\n              "),o=a.if.call(e,"item.isXtraviewServiceForSecondaryDevice",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(16,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </tr>\r\n          </table>\r\n        </td>\r\n        "),""}function p(e,t){t.buffer.push('\r\n              <td>\r\n                <img src="./Content/Images/link/l.svg" style="width:20px;padding-top:4px"></img>\r\n              </td>\r\n              ')}function v(e,t){var o;return t.buffer.push('\r\n        <td style="border-bottom-color:white;">\r\n          <div>\r\n            <div>'),o=a._triageMustache.call(e,"item.prinPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n            <table>\r\n              <tbody>\r\n              "),o=a.each.call(e,"principalItem","in","item.principalPackageNames",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(19,f,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              </tbody>            \r\n            </table>\r\n          </div>\r\n          "),o=a.each.call(e,"freeViewItem","in","item.freeViewPckName",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(21,b,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n           "),""}function f(e,t){var o;return t.buffer.push("              \r\n                <tr>\r\n                  <td>\r\n                    <div>"),o=a._triageMustache.call(e,"principalItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n                  </td>\r\n                </tr>\r\n              "),""}function b(e,t){var o;return t.buffer.push("\r\n          <div>"),o=a._triageMustache.call(e,"freeViewItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n          "),""}function C(e,t){var o;return t.buffer.push("\r\n        "),o=a.if.call(e,"item.isSecondaryXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(26,D,t),fn:Re.program(24,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function S(e,t){var o;return t.buffer.push('\r\n        <td style="font-size:0;border-bottom-color:white">\r\n          <div>\r\n            <div>'),o=a._triageMustache.call(e,"item.prinPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n            <table>\r\n              <tbody>\r\n              "),o=a.each.call(e,"principalItem","in","item.principalPackageNames",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(19,f,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              </tbody>              \r\n            </table>\r\n\r\n          </div>\r\n          "),o=a.each.call(e,"freeViewItem","in","item.freeViewPckName",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(21,b,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        "),""}function D(e,t){var o;return t.buffer.push("\r\n        "),o=a.if.call(e,"item.isXtraviewServiceForSecondaryDevice",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(30,I,t),fn:Re.program(27,y,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function y(e,t){var o;return t.buffer.push('\r\n        <td style="font-size:0;">\r\n          <div>\r\n            <div>'),o=a._triageMustache.call(e,"item.prinPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n            <table>\r\n              <tbody>\r\n              "),o=a.each.call(e,"principalItem","in","item.principalPackageNames",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(28,w,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </tbody>\r\n            </table>\r\n          </div>\r\n          "),o=a.each.call(e,"freeViewItem","in","item.freeViewPckName",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(21,b,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        "),""}function w(e,t){var o;return t.buffer.push("              \r\n                <tr>\r\n                  <td>\r\n                    <div>"),o=a._triageMustache.call(e,"principalItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n                  </td>\r\n                </tr>              \r\n              "),""}function I(e,t){var o;return t.buffer.push("\r\n        <td>\r\n          <div>\r\n            <div>"),o=a._triageMustache.call(e,"item.prinPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n\r\n            <table>\r\n              <tbody>\r\n              "),o=a.each.call(e,"principalItem","in","item.principalPackageNames",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(28,w,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n             </tbody>\r\n            </table>\r\n          </div>\r\n          "),o=a.each.call(e,"freeViewItem","in","item.freeViewPckName",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(21,b,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        "),""}function x(e,t){var o;return t.buffer.push('\r\n        <td style="border-bottom-color:white; ">\r\n          <table>\r\n            <tbody>              \r\n          <div>\r\n            '),o=a._triageMustache.call(e,"item.prinPckStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),o=a.each.call(e,"principalStatusItem","in","item.principalPackageStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(33,M,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </div>\r\n              "),o=a.each.call(e,"freeViewStatus","in","item.freeViewPckStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(35,T,t),contexts:[e,e,e],
types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </tbody>\r\n          </table>\r\n        </td>\r\n        "),""}function M(e,t){var o;return t.buffer.push("\r\n            <table>\r\n              <tbody>\r\n                <tr>\r\n                  <td>\r\n                    <div>\r\n                      "),o=a._triageMustache.call(e,"principalStatusItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n            "),""}function T(e,t){var o;return t.buffer.push("\r\n              <div>"),o=a._triageMustache.call(e,"freeViewStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n              "),""}function N(e,t){var o;return t.buffer.push("\r\n         "),o=a.if.call(e,"item.isSecondaryXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(40,O,t),fn:Re.program(38,P,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function P(e,t){var o;return t.buffer.push('\r\n        <td style="font-size:0;border-bottom-color:white">\r\n          <table>\r\n            <tbody>              \r\n          <div>\r\n            '),o=a._triageMustache.call(e,"item.prinPckStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),o=a.each.call(e,"principalStatusItem","in","item.principalPackageStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(33,M,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </div>\r\n              "),o=a.each.call(e,"freeViewStatus","in","item.freeViewPckStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(35,T,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </tbody>\r\n          </table>\r\n        </td>\r\n         "),""}function O(e,t){var o;return t.buffer.push("\r\n        "),o=a.if.call(e,"item.isXtraviewServiceForSecondaryDevice",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(43,R,t),fn:Re.program(41,B,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function B(e,t){var o;return t.buffer.push('\r\n        <td style="font-size:0;">\r\n          <table>\r\n            <tbody>              \r\n          <div>\r\n            '),o=a._triageMustache.call(e,"item.prinPckStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),o=a.each.call(e,"principalStatusItem","in","item.principalPackageStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(33,M,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </div>\r\n              "),o=a.each.call(e,"freeViewStatus","in","item.freeViewPckStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(35,T,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </tbody>\r\n          </table>\r\n        </td>\r\n        "),""}function R(e,t){var o;return t.buffer.push("\r\n        <td >\r\n          <div>\r\n            "),o=a._triageMustache.call(e,"item.prinPckStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),o=a.each.call(e,"principalStatusItem","in","item.principalPackageStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(33,M,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </div>\r\n          "),o=a.each.call(e,"freeViewStatus","in","item.freeViewPckStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(44,k,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        "),""}function k(e,t){var o;return t.buffer.push("\r\n          <div>"),o=a._triageMustache.call(e,"freeViewStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n          "),""}function A(e,t){var o;return t.buffer.push('\r\n        <td style="border-bottom-color:white; ">\r\n          <div>\r\n            '),o=a._triageMustache.call(e,"item.addOnPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            <table>              \r\n              <tbody>\r\n                <tr>\r\n                  <td>\r\n                    "),o=a.each.call(e,"addonNameItem","in","item.addOnPackageNames",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(47,K,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n             \r\n\r\n            </table>\r\n          </div>\r\n        </td>\r\n        "),""}function K(e,t){var o;return t.buffer.push("\r\n                    <div>"),o=a._triageMustache.call(e,"addonNameItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n                   "),""}function G(e,t){var o;return t.buffer.push("\r\n         "),o=a.if.call(e,"item.isSecondaryXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(53,V,t),fn:Re.program(50,L,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function L(e,t){var o;return t.buffer.push('\r\n        <td  style="font-size:0;border-bottom-color:white">\r\n          <div>\r\n            '),o=a._triageMustache.call(e,"item.addOnPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            <table>\r\n             <tbody>\r\n              "),o=a.each.call(e,"addonNameItem","in","item.addOnPackageNames",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(51,E,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n             </tbody>\r\n            </table>\r\n          </div>\r\n        </td>\r\n        "),""}function E(e,t){var o;return t.buffer.push("              \r\n                <tr>\r\n                  <td>\r\n                    <div>"),o=a._triageMustache.call(e,"addonNameItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n                  </td>\r\n                </tr>              \r\n              "),""}function V(e,t){var o;return t.buffer.push("\r\n        "),o=a.if.call(e,"item.isXtraviewServiceForSecondaryDevice",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(56,F,t),fn:Re.program(54,H,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function H(e,t){var o;return t.buffer.push('\r\n        <td style="font-size:0;">\r\n          <div>\r\n            '),o=a._triageMustache.call(e,"item.addOnPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            <table>\r\n             <tbody>\r\n              "),o=a.each.call(e,"addonNameItem","in","item.addOnPackageNames",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(51,E,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n             </tbody>\r\n            </table>\r\n          </div>\r\n        </td>\r\n        "),""}function F(e,t){var o;return t.buffer.push("\r\n        <td >\r\n          <div>\r\n            "),o=a._triageMustache.call(e,"item.addOnPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            <table>              \r\n              <tbody>\r\n                <tr>\r\n                  <td>\r\n                    "),o=a.each.call(e,"addonNameItem","in","item.addOnPackageNames",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(57,U,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                  </td>\r\n                </tr>\r\n              </tbody>              \r\n            </table>\r\n          </div>\r\n        </td>\r\n        "),""}function U(e,t){var o;return t.buffer.push("\r\n                    <div>"),o=a._triageMustache.call(e,"addonNameItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n                    "),""}function _(e,t){var o;return t.buffer.push('\r\n        <td style="border-bottom-color:white; ">\r\n          <div>\r\n            '),o=a._triageMustache.call(e,"item.addOnPckStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("            \r\n            <table>\r\n              <tbody>\r\n                <tr>\r\n                  <td>\r\n                    <div> \r\n                      "),o=a.each.call(e,"addonStatusItem","in","item.addOnPackageStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(60,Q,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n            <br/>           \r\n          </div>\r\n        </td>\r\n         "),""}function Q(e,t){var o;return t.buffer.push("\r\n                      "),o=a._triageMustache.call(e,"addonStatusItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                      <br/>\r\n                       "),""}function q(e,t){var o;return t.buffer.push("\r\n        "),o=a.if.call(e,"item.isSecondaryXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(65,j,t),fn:Re.program(63,$,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function $(e,t){var o;return t.buffer.push('\r\n        <td style="font-size:0;border-bottom-color:white">\r\n          <div>\r\n            '),o=a._triageMustache.call(e,"item.addOnPckStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            \r\n            <table>\r\n              <tbody>\r\n                <tr>\r\n                  <td>\r\n                    <div>\r\n                      "),o=a.each.call(e,"addonStatusItem","in","item.addOnPackageStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(60,Q,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n            <br/>         \r\n          </div>\r\n        </td>\r\n        "),""}function j(e,t){var o;return t.buffer.push("\r\n        "),o=a.if.call(e,"item.isXtraviewServiceForSecondaryDevice",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(69,Y,t),fn:Re.program(66,J,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function J(e,t){var o;return t.buffer.push('\r\n        <td style="font-size:0;">\r\n          <div>\r\n            '),o=a._triageMustache.call(e,"item.addOnPckStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("            \r\n            <table>\r\n              <tbody>\r\n                <tr>\r\n                  <td>\r\n                    <div>\r\n                      "),o=a.each.call(e,"addonStatusItem","in","item.addOnPackageStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(67,z,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n            <br/>          \r\n          </div>\r\n        </td>\r\n        "),""}function z(e,t){var o;return t.buffer.push("\r\n                      "),o=a._triageMustache.call(e,"addonStatusItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                      <br/>\r\n                      "),""}function Y(e,t){var o;return t.buffer.push("\r\n        <td >\r\n          <div>\r\n            "),o=a._triageMustache.call(e,"item.addOnPckStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("          \r\n            <table>\r\n              <tbody>\r\n                <tr>\r\n                  <td>\r\n                    <div>\r\n                      "),o=a.each.call(e,"addonStatusItem","in","item.addOnPackageStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(67,z,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n            <br/>          \r\n          </div>\r\n        </td>\r\n        "),""}function X(e,t){var o;return t.buffer.push('\r\n        <td style="border-bottom-color:white; ">\r\n          <table>\r\n          <tbody>\r\n          <div>'),o=a._triageMustache.call(e,"item.xtraviewService",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.insuranceServices",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.boxOffice",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>          \r\n          <div>"),o=a._triageMustache.call(e,"item.accessService",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          "),o=a.each.call(e,"accessNameItem","in","item.accessServiceNames",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(72,W,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          <div>"),o=a._triageMustache.call(e,"item.DPP24Service",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          "),o=a.each.call(e,"DPPNameItem","in","item.DPP24ServiceNames",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(74,Z,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n           </tbody>\r\n        </table>  \r\n        </td>           \r\n        "),""}function W(e,t){var o;return t.buffer.push("\r\n          <div>"),o=a._triageMustache.call(e,"accessNameItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n          "),""}function Z(e,t){var o;return t.buffer.push("\r\n          <div>\r\n            "),o=a._triageMustache.call(e,"DPPNameItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </div>\r\n          "),""}function ee(e,t){var o;return t.buffer.push("\r\n         "),o=a.if.call(e,"item.isSecondaryXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(79,ae,t),fn:Re.program(77,te,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function te(e,t){var o;return t.buffer.push('     \r\n        <td style="border-bottom-color:white">\r\n          <table>\r\n          <tbody>\r\n          <div>'),o=a._triageMustache.call(e,"item.xtraviewService",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.insuranceServices",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.boxOffice",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.accessService",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          "),o=a.each.call(e,"accessNameItem","in","item.accessServiceNames",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(72,W,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          <div>"),o=a._triageMustache.call(e,"item.DPP24Service",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          "),o=a.each.call(e,"DPPNameItem","in","item.DPP24ServiceNames",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(74,Z,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </tbody>\r\n            </table>\r\n        </td>\r\n        "),""}function ae(e,t){var o;return t.buffer.push("\r\n        <td>\r\n         <table>\r\n          <tbody>\r\n          <div>"),o=a._triageMustache.call(e,"item.xtraviewService",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.insuranceServices",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.boxOffice",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.showMax",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.accessService",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          "),o=a.each.call(e,"accessNameItem","in","item.accessServiceNames",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(72,W,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          <div>"),o=a._triageMustache.call(e,"item.DPP24Service",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          "),o=a.each.call(e,"DPPNameItem","in","item.DPP24ServiceNames",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(80,oe,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("         \r\n          </tbody>\r\n         </table>\r\n        </td>\r\n        "),""}function oe(e,t){var o;return t.buffer.push("\r\n\r\n          <div>\r\n            "),o=a._triageMustache.call(e,"DPPNameItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </div>\r\n          "),""}function se(e,t){var o;return t.buffer.push('                      \r\n        <td style="border-bottom-color:white; ">\r\n          <table>\r\n          <tbody> \r\n          <div>'),o=a._triageMustache.call(e,"item.xtraviewServiceStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.insuranceServicesStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.boxOfficeStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.accessServiceStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          "),o=a.each.call(e,"accessStatusItem","in","item.accessServiceStatusAll",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(83,re,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n           <div>"),o=a._triageMustache.call(e,"item.DPP24ServiceStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          "),o=a.each.call(e,"DPPStatusItem","in","item.DPP24ServiceStatusAll",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(85,ne,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n         </tbody>\r\n        </table>\r\n        </td>\r\n         "),""}function re(e,t){var o;return t.buffer.push("\r\n          <div>\r\n            "),o=a._triageMustache.call(e,"accessStatusItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </div>\r\n          "),""}function ne(e,t){var o;return t.buffer.push("\r\n          <div>\r\n            "),o=a._triageMustache.call(e,"DPPStatusItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </div>\r\n          "),""}function ie(e,t){var o;return t.buffer.push("\r\n          "),o=a.if.call(e,"item.isSecondaryXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(90,le,t),fn:Re.program(88,ce,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function ce(e,t){var o;return t.buffer.push(' \r\n        <td style="border-bottom-color:white">\r\n          <table>\r\n          <tbody> \r\n          <div>'),o=a._triageMustache.call(e,"item.xtraviewServiceStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.insuranceServicesStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.boxOfficeStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.accessServiceStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          "),o=a.each.call(e,"accessStatusItem","in","item.accessServiceStatusAll",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(83,re,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n           <div>"),o=a._triageMustache.call(e,"item.DPP24ServiceStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          "),o=a.each.call(e,"DPPStatusItem","in","item.DPP24ServiceStatusAll",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(85,ne,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </tbody>\r\n        </table>\r\n        </td>\r\n        "),""}function le(e,t){var o;return t.buffer.push("\r\n        <td>\r\n          <table>\r\n          <tbody> \r\n          <div>"),o=a._triageMustache.call(e,"item.xtraviewServiceStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.insuranceServicesStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.boxOfficeStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.showMaxStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.accessServiceStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          "),o=a.each.call(e,"accessStatusItem","in","item.accessServiceStatusAll",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(83,re,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n           <div>"),o=a._triageMustache.call(e,"item.DPP24ServiceStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          "),o=a.each.call(e,"DPPStatusItem","in","item.DPP24ServiceStatusAll",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(85,ne,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </tbody>\r\n        </table>\r\n        </td>\r\n        "),""}function de(e,t){var o;return t.buffer.push("\r\n                "),o=a.if.call(e,"item.isXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(95,he,t),fn:Re.program(93,ue,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n       "),""}function ue(e,t){var o;return t.buffer.push("\r\n                <td>\r\n                    "),o=a._triageMustache.call(e,"item.agreementChargePeriod",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                "),""}function he(e,t){var o;return t.buffer.push("\r\n                "),o=a.if.call(e,"item.isSecondaryXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(96,me,t),fn:Re.program(93,ue,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n       "),""}function me(e,t){var o;return t.buffer.push("\r\n                "),o=a.if.call(e,"item.isXtraviewServiceForSecondaryDevice",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(97,ge,t),fn:Re.program(93,ue,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function ge(e,t){var o;return t.buffer.push("\r\n                <td>\r\n                    "),o=a._triageMustache.call(e,"item.agreementChargePeriod",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n     "),""}function pe(e,t){var o;return t.buffer.push('\r\n        <td style="border-bottom-color:white; ">\r\n          <table>\r\n        <tbody>\r\n          '),o=a.each.call(e,"viewperiod","in","item.viewingPeriod",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(100,ve,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </tbody>\r\n          </table>\r\n        </td>\r\n        "),""}function ve(e,t){var o;return t.buffer.push("\r\n          <div>\r\n            "),o=a._triageMustache.call(e,"viewperiod",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </div>\r\n          "),""}function fe(e,t){var o;return t.buffer.push("\r\n        "),o=a.if.call(e,"item.isSecondaryXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(105,Ce,t),fn:Re.program(103,be,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function be(e,t){var o;return t.buffer.push('\r\n        <td style="font-size:0;border-bottom-color:white">\r\n          <table>\r\n            <tbody>                       \r\n          '),o=a.each.call(e,"viewperiod","in","item.viewingPeriod",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(100,ve,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </tbody>\r\n          </table>\r\n        </td>\r\n        "),""}function Ce(e,t){var o;return t.buffer.push("\r\n        "),o=a.if.call(e,"item.isXtraviewServiceForSecondaryDevice",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(109,ye,t),fn:Re.program(106,Se,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function Se(e,t){var o;return t.buffer.push('\r\n        <td style="font-size:0;">\r\n          <table>\r\n            <tbody>\r\n              '),o=a.each.call(e,"viewperiod","in","item.viewingPeriod",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(107,De,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </tbody>\r\n          </table>\r\n        </td>\r\n        "),""}function De(e,t){var o;return t.buffer.push("\r\n              <div>\r\n                "),o=a._triageMustache.call(e,"viewperiod",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              </div>\r\n              "),""}function ye(e,t){var o;return t.buffer.push("\r\n        <td>\r\n          <table>\r\n            <tbody>                        \r\n          "),o=a.each.call(e,"viewperiod","in","item.viewingPeriod",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(100,ve,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </tbody>\r\n          </table>\r\n        </td>\r\n        "),""}function we(e,t){var o;return t.buffer.push('\r\n        <td style="border-bottom-color:white;">\r\n          '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"viewDeviceInformation",size:"xs",disableBinding:"item.isPCBO"},hashTypes:{action:"STRING",size:"STRING",disableBinding:"STRING"},hashContexts:{action:e,size:e,disableBinding:e},inverse:Re.noop,fn:Re.program(112,Ie,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n         "),""}function Ie(e,t){var o,s;t.buffer.push(Be((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:viewingGridColumnHeaders.view",s):ke.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.view",s))))}function xe(e,t){var o;return t.buffer.push("\r\n          "),
o=a.if.call(e,"item.isSecondaryXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(117,Te,t),fn:Re.program(115,Me,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function Me(e,t){var o;return t.buffer.push('\r\n        <td style="border-bottom-color:white;">\r\n          '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"viewDeviceInformation",size:"xs",disableBinding:"item.isPCBO"},hashTypes:{action:"STRING",size:"STRING",disableBinding:"STRING"},hashContexts:{action:e,size:e,disableBinding:e},inverse:Re.noop,fn:Re.program(112,Ie,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        "),""}function Te(e,t){var o;return t.buffer.push("\r\n        <td>"),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"viewDeviceInformation",size:"xs",disableBinding:"item.isPCBO"},hashTypes:{action:"STRING",size:"STRING",disableBinding:"STRING"},hashContexts:{action:e,size:e,disableBinding:e},inverse:Re.noop,fn:Re.program(112,Ie,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var Ne,Pe,Oe,Be=this.escapeExpression,Re=this,ke=a.helperMissing;return s.buffer.push("<div "),s.buffer.push(Be(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(Be((Pe=a.loc||t&&t.loc,Oe={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},Pe?Pe.call(t,"locale.manageviewing:general.manageViewTile",Oe):ke.call(t,"loc","locale.manageviewing:general.manageViewTile",Oe)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/customerProfile">&lt;'),s.buffer.push(Be((Pe=a.loc||t&&t.loc,Oe={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},Pe?Pe.call(t,"locale.manageAccount.editPaymentDetails:general.backLink",Oe):ke.call(t,"loc","locale.manageAccount.editPaymentDetails:general.backLink",Oe)))),s.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n  "),Ne=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.customerprofile.customerprofile:general.packageInformationTitle~",linksBinding:"collapsibleAccountInfoLinks",visibleBinding:"isGridDataAvailable"},hashTypes:{title:"STRING",linksBinding:"STRING",visibleBinding:"STRING"},hashContexts:{title:t,linksBinding:t,visibleBinding:t},inverse:Re.noop,fn:Re.program(1,r,s),contexts:[t],types:["ID"],data:s}),(Ne||0===Ne)&&s.buffer.push(Ne),s.buffer.push("\r\n  "),s.buffer.push(Be(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:general.noserviceErrorMessage~",visibleBinding:"isDeviceOrPackageExist"},hashTypes:{text:"STRING",visibleBinding:"STRING"},hashContexts:{text:t,visibleBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n  <br/>\r\n\r\n\r\n</div>"),""}),Ember.TEMPLATES.LinkDelinkView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o,s,r;return t.buffer.push('\r\n    <table width="100%">\r\n      <tr>\r\n        <td>\r\n          '),t.buffer.push(m((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:linkDelink.deviceNumber",r):h.call(e,"loc","locale.manageStock:linkDelink.deviceNumber",r)))),t.buffer.push(m(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"dataModel.deviceNumber",disableBinding:"dataModel.invalidAddDevice"},hashTypes:{valueBinding:"STRING",disableBinding:"STRING"},hashContexts:{valueBinding:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n          "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"addDevice"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:g.noop,fn:g.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td>\r\n          <hr />\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td colspan="3">\r\n          '),t.buffer.push(m(a.view.call(e,"Komodo.Controls.DataGrid",{hash:{canSort:"false",pageSize:"10",canSelect:"true",performsValidation:"false",selectedItemBinding:"dataModel.selectedDeviceGridItem",commandItemBinding:"dataModel.commandGridItem",contentBinding:"dataModel.deviceData",columnsBinding:"_columnDeviceDataGrid"},hashTypes:{canSort:"STRING",pageSize:"STRING",canSelect:"STRING",performsValidation:"STRING",selectedItemBinding:"STRING",commandItemBinding:"STRING",contentBinding:"STRING",columnsBinding:"STRING"},hashContexts:{canSort:e,pageSize:e,canSelect:e,performsValidation:e,selectedItemBinding:e,commandItemBinding:e,contentBinding:e,columnsBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n    </table>\r\n    "),""}function n(e,t){var o,s;t.buffer.push(m((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:linkDelink.addDevice",s):h.call(e,"loc","locale.manageStock:linkDelink.addDevice",s))))}function i(e,t){var o;return t.buffer.push('\r\n    <table width="100%">\r\n      <tr>\r\n        <td width="30%">\r\n          '),t.buffer.push(m(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"dataModel.fromDevice",label:"~locale.manageStock:linkDelink.fromDevice~",contentBinding:"_dropDownFromDeviceList",optionLabelPath:"content.Value",optionValuePath:"content.Key",prompt:"Select device"},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n        <td width="20%">\r\n          <img src="Content\\Images\\link\\blue-arrow.svg" style="padding:0 30px 0 20px;" />\r\n        </td>\r\n        <td width="30%">\r\n          '),t.buffer.push(m(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"dataModel.toDevice",label:"~locale.manageStock:linkDelink.toDevice~",contentBinding:"_dropDownToDeviceList",optionLabelPath:"content.Value",optionValuePath:"content.Key",prompt:"Select device"},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td colspan="3" align="right"  width="100%">\r\n          '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"movePackages"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:g.noop,fn:g.program(5,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n    </table>\r\n    "),""}function c(e,t){var o,s;t.buffer.push(m((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:linkDelink.movePackages",s):h.call(e,"loc","locale.manageStock:linkDelink.movePackages",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var l,d,u,h=a.helperMissing,m=this.escapeExpression,g=this;return s.buffer.push("<div "),s.buffer.push(m(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(m((d=a.loc||t&&t.loc,u={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},d?d.call(t,"locale.manageStock:linkDelink.title",u):h.call(t,"loc","locale.manageStock:linkDelink.title",u)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/manageViewing">&lt;BACK</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr />\r\n  <div>\r\n    '),l=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageStock:linkDelink.gridTitle~",isCollapsed:"false"},hashTypes:{title:"STRING",isCollapsed:"STRING"},hashContexts:{title:t,isCollapsed:t},inverse:g.noop,fn:g.program(1,r,s),contexts:[t],types:["ID"],data:s}),(l||0===l)&&s.buffer.push(l),s.buffer.push("\r\n    "),l=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageStock:linkDelink.gridTitle2~",isCollapsed:"false"},hashTypes:{title:"STRING",isCollapsed:"STRING"},hashContexts:{title:t,isCollapsed:t},inverse:g.noop,fn:g.program(4,i,s),contexts:[t],types:["ID"],data:s}),(l||0===l)&&s.buffer.push(l),s.buffer.push("\r\n  </div>\r\n</div>"),""}),Ember.TEMPLATES.IssueHardwareAgainstSwapOrderView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n      "),t.buffer.push(p(a.view.call(e,"Komodo.Controls.TextField",{hash:{label:"~locale.manageStock:issueHardwareAgainstServiceOrder.quoteNumber~",valueBinding:"rcModelData.quoteNumber",validationBinding:"rcModelData.quoteNumber.error",validatorBinding:"validators.quoteNumberValidator"},hashTypes:{label:"STRING",valueBinding:"STRING",validationBinding:"STRING",validatorBinding:"STRING"},hashContexts:{label:e,valueBinding:e,validationBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"searchQuoteRepair"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:v.noop,fn:v.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function n(e,t){var o,s;return t.buffer.push("\r\n        "),t.buffer.push(p((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:issueHardwareAgainstSwapOrder.retrieveQuote",s):g.call(e,"loc","locale.manageStock:issueHardwareAgainstSwapOrder.retrieveQuote",s)))),t.buffer.push("\r\n      "),""}function i(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageStock:issueHardwareAgainstSwapOrder.issueStock~",isCollapsedBinding:"data.isSelectHardware"},hashTypes:{title:"STRING",isCollapsedBinding:"STRING"},hashContexts:{title:e,isCollapsedBinding:e},inverse:v.noop,fn:v.program(5,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function c(e,t){var o;return t.buffer.push("\r\n    "),t.buffer.push(p(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:issueHardwareAgainstSwapOrder.reason~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\t"),t.buffer.push(p(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"rcModelData.Reason"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n\t<br><br>\r\n    <table width="100%">\r\n      <tbody>\r\n      <tr>\r\n        <td>'),t.buffer.push(p(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:issueHardwareAgainstSwapOrder.deviceModel~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n        <td>"),t.buffer.push(p(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"rcModelData.FaultySerialNumber",class:"sub-heading"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n        <td>"),t.buffer.push(p(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:issueHardwareAgainstSwapOrder.smartCardNumber~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n      </tr>\r\n      "),o=a.each.call(e,"replDeviceInfo","in","rcModelData.modelsAndDevices",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(6,l,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </tbody>\r\n    </table>\r\n    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"IssueHardwareRepair"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:v.noop,fn:v.program(8,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function l(e,t){return t.buffer.push("\r\n      <tr>\r\n        <td>"),t.buffer.push(p(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"replDeviceInfo.replmodel"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n        <td>"),t.buffer.push(p(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"replDeviceInfo.fauldevice",disableBinding:"_isFauldDisabled"},hashTypes:{valueBinding:"STRING",disableBinding:"STRING"},hashContexts:{valueBinding:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n        <td>"),t.buffer.push(p(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"replDeviceInfo.faulSerialNumber",disableBinding:"_isFauldDisabled"},hashTypes:{valueBinding:"STRING",disableBinding:"STRING"},hashContexts:{valueBinding:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n      </tr>\r\n        "),""}function d(e,t){var o,s;return t.buffer.push("\r\n    "),t.buffer.push(p((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:issueHardwareAgainstSwapOrder.issueHardware",s):g.call(e,"loc","locale.manageStock:issueHardwareAgainstSwapOrder.issueHardware",s)))),t.buffer.push("\r\n    "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var u,h,m,g=a.helperMissing,p=this.escapeExpression,v=this;return s.buffer.push('<div class="no-banner-padding">\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(p((h=a.loc||t&&t.loc,m={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},h?h.call(t,"locale.manageStock:issueHardwareAgainstSwapOrder.title",m):g.call(t,"loc","locale.manageStock:issueHardwareAgainstSwapOrder.title",m)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/manageViewing">&lt;'),s.buffer.push(p((h=a.loc||t&&t.loc,m={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},h?h.call(t,"locale.manageStock:back",m):g.call(t,"loc","locale.manageStock:back",m)))),s.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr />\r\n  <div>\r\n    "),u=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageStock:issueHardwareAgainstSwapOrder.findIssuedStock~",isCollapsedBinding:"data.isSelectHardware"},hashTypes:{title:"STRING",isCollapsedBinding:"STRING"},hashContexts:{title:t,isCollapsedBinding:t},inverse:v.noop,fn:v.program(1,r,s),contexts:[t],types:["ID"],data:s}),(u||0===u)&&s.buffer.push(u),s.buffer.push("\r\n\r\n    "),u=a.if.call(t,"rcModelData.modelsAndDevices.length",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(4,i,s),contexts:[t],types:["ID"],data:s}),(u||0===u)&&s.buffer.push(u),s.buffer.push("\r\n  </div>\r\n</div>\r\n"),""}),Komodo.Models.AddGraceDaysModel=Ember.Object.extend({init:function(){this.MaxGraceDays=void 0,this.ListOfaccount=[],this.ListOfSmartcards=[],this.IsAllSmartcardSelect=void 0,this.SelectedAccount=void 0,this.SelectedGraceDay=void 0,this.MultipleSelectedValues=void 0,this._super()}}),Komodo.Models.AddGraceDaysService=Ember.Object.extend({init:function(){this.UID=void 0,this.Status=void 0,this.Description=void 0,this.Type=void 0,this._super()}}),Komodo.Models.AddGraceDaysListOfService=Ember.Object.extend({init:function(){this.AddGraceDaysService=[],this._super()}}),Komodo.Models.AddGraceDaysSmartcard=Ember.Object.extend({init:function(){this.SmartcardID=void 0,this.IsSmartcardSelected=void 0,this.ListOfServices=Komodo.Models.AddGraceDaysListOfService(),this._super()}}),Komodo.Models.AddGraceDaysListOfSmartcard=Ember.Object.extend({init:function(){this.AddGraceDaysSmartcard=[],this._super()}}),Komodo.Models.AddGraceDaysAccount=Ember.Object.extend({init:function(){this.AccountID=void 0,this.IsSmartCardsPresent=void 0,this.ListOfSmartcard=Komodo.Models.AddGraceDaysListOfSmartcard(),this._super()}}),Komodo.Models.AddGraceDaysListOfAccount=Ember.Object.extend({init:function(){this.AddGraceDaysAccount=[],this._super()}}),Komodo.Models.BoxOfficeModel=Ember.Object.extend({init:function(){this._super(),this.hasBoxOffice=!1,this.customerDetails=void 0,this.newBoxOfficeProfile=[],this.phoneNumberTypes=[],this.boxOfficePhoneNumbers=Ember.A(),this.activatePhoneNumbers=Ember.A(),this.boxOfficePhoneNumbersAll=Ember.A(),this.listOfSmartCards=Ember.A(),this.boxOfficeUpdatePhoneNumbers=Ember.A(),this.maxNumbers=4,this.minNumbers=1,this.canAddNumbers=!0,this.canDeleteNumbers=!0,this.disableSaveNumbers=!1,this.disableCancel=!1,this.accounts=void 0,this.selectAccount=void 0,this.selectedTransaction=void 0,this.selectedNumber=void 0,this.boundUpperDateValue=new Date(Date.UTC((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())),this.boxOfficeTransactions=[],this.boxOfficeOriginalTransactions=[],this.boxOfficeRentalHistory=[],this.filterByDate=void 0,this.transactionStatusList=[],this.isQueryingTransaction=void 0,this.confirmationCode=void 0,this.customerBoxOfficePin=void 0,this.rentalCode=void 0,this.rentalSelectedPhone=void 0,this.smartcardNumbers=[],this.sectorHistory=[],this.unallocatedRentalCodes=[]}}),Komodo.Models.BulkChangeDeviceOwnershipModel=Ember.Object.extend({init:function(){this._super(),this.productData=[],this.error=void 0,this.deviceSerialNo=void 0,this.LinkedSC=void 0,this.FromModel=void 0,this.deviceStatus=void 0,this.FromProductName=void 0,this.LinkedSCModel=void 0,this.boundUpperDate=void 0,this.defaultValueDate=new Date,this.DeviceData=[],this.customerDocumentData=[],this.set("pageNumber",1),this.set("totalRows",0),this.customerID=null,this.hasDocument=!1,this.screenSelectionFileUpload=[{title:"Custom Selection",value:"true"},{title:"File Upload",value:"false"}],this.screenSelectedOption=!0}}),Komodo.Models.CancelPackagesModel=Ember.Object.extend({init:function(){this.smartcards=void 0,this.date=void 0,this.reason=void 0,this.hardwareAndServices=[],this.prinServiceList=[],this.addonServiceList=[],this.accessServiceList=[],this.isDisconnectPackageVisible=!0,this.isDisconnectAll=!1,this.isScheduleReconnection=!1,this.dateCancelAll=void 0,this.dateScheduleReconnection=void 0,this.serialNumber=void 0,this.isCancel=!0,this.smartcardInformation=void 0,this.allHardwares=[],this.princPre=!1,this.reasonForCancellation=void 0,this.dppServiceAvailable=!1,this.searchDeviceText=void 0,this.scheduledChangesList=[],this.deleteScheduleList=[],this.getSelectedProductIds=[],this._super(),this.defaultDate=void 0,this.reasonCodes=void 0,this.reasonCodesList=[],this.dissableBindingCancelReason=!1}}),Komodo.Models.CancelServiceOrderModel=Ember.Object.extend({init:function(){this._super(),this.quoteNumber="",this.customerID=void 0,this.countryISO=void 0,this.showServiceOrder=!1,this.showCancelButton=!1,this.createDate=void 0,this.customerQuoteUID=void 0,this.expiryDate=void 0,this.totalPrice=void 0,this.quoteData=[]}}),Komodo.Models.ChangeDeviceOwnershipModel=Ember.Object.extend({init:function(){this.productData=[],this.deviceData=[],this._super(),this.error=void 0,this.deviceSerialNo=void 0,this.LinkedSC=void 0,this.FromModel=void 0,this.deviceStatus=void 0,this.FromProductName=void 0,this.LinkedSCModel=void 0,this.flag=void 0,this.disabledRequestButton=!0,this.boundUpperDate=void 0,this.defaultValueDate=new Date,this.disabledDate=!0,this.commercialSerialNumber=null}}),Komodo.Models.ChangeOfCountryModel=Ember.Object.extend({init:function(){this._super(),this.CountryISO=null,this.CustomerId=null,this.DeviceSerialNumber=null,this.SmartcardSerialNumber=null,this.NewSmartcardSerialNumber=null,this.TargetPlant=null,this.emptyNewSmartcardSerialNumber=!1,this.maxNewSmartcardSerialNumber=!1,this.businessUnits=[{title:"GOtv",value:"2"},{title:"DStv",value:"5"}],this.screenSelectedBusinessUnits=null,this.businessUnitFlag=!1}}),Komodo.Models.CommercialDeviceInfoModel=Ember.Object.extend({init:function(){this.chargePeriod=void 0,this.deviceName=void 0,this.deviceNumber=void 0,this.deviceStatus=void 0,this.warrantyEndDate=void 0,this.smartcardName=void 0,this.smartcardNumber=void 0,this.smartcardStatus=void 0,this.viewingPeriod=void 0,this.principalPackage=void 0,this.principalStatus=void 0,this.addOnPackage=void 0,this.addOnStatus=void 0,this.services=void 0,this.contractStartDate=void 0,this.contractEndDate=void 0,this.chargeUntilDate=void 0,this.quoteBasedDisconnectDate=void 0,this.isDisableSubmitButton=!0,this.csiLogs=[],this.defaultChargePer=void 0,this.tempDis=!0,this.deviceAddress=[],this.displayAddress=void 0,this.showDeviceAddress=!1,this.city=void 0,this.postalCode=void 0,this.country=void 0,this.province=void 0,this.suburb=void 0,this.streetName=void 0,this.streetNumber=void 0,this.buildingName=void 0,this.unitNumber=void 0,this.privateBag=void 0,this.isCountryReadOnly=!0,this.type=void 0,this.isPrimary=void 0,this.isPrimaryString=void 0,this.isVerified=void 0,this._super()}}),Komodo.Models.CommercialManageViewingModel=Ember.Object.extend({init:function(){this.customerClass=void 0,this.customerType=void 0,this.paymentGroup=void 0,this.viewingLocation=void 0,this.agreementType=void 0,this.establishmentName=void 0,this.viewingPlatform=void 0,this.viewingPoints=void 0,this.contractStartDate=void 0,this.contractEndDate=(new moment).format(KomodoConfiguration.dateFormat),this.chargePeriod=void 0,this.errorReasonCode=void 0,this.allSmartcardSelected=!1,this.dateDisconnectAll=void 0,this.disconnectReconnectAll=!1,this.disconnectReason=void 0,this.reconnectReason=void 0,this.accountId=void 0,this.agreementId=void 0,this.disconnectAllPackages=void 0,this.disconnectAllSmartcards=void 0,this.reconnectAllPackages=void 0,this.reconnectAllSmartcards=void 0,this.accounts=[],this.establishments=[],this.viewingLocations=[],this.selectedproductData=[],this.smartcardsData=[],this.principalPackagesData=[],this.addOnPackagesData=[],this.searchDeviceText=void 0,this.searchAgreementDeviceText=void 0,this.agreementAddressString=void 0,this.billingAddressString=void 0,this.copyBillingAddress=!1,this._super()}}),Komodo.Models.SmartcardModel=Ember.Object.extend({init:function(){this.serialNumber=void 0,this.name=void 0,this.description=void 0,this.isSelected=!1,this._super()}}),Komodo.Models.AgreementAddressDataGridModel=Ember.Object.extend({init:function(){this.addressType="",this.addressString="",this.agreementId="",this._super()}}),Komodo.Models.ConfirmSwapAvailabilityModel=Ember.Object.extend({init:function(){this._super(),this.modelsAndDevices=[],this.DeviceNumber=void 0,this.serialNumber=void 0,this.quoteNumber=void 0,this.FaultySerialNumber="",this.ServiceOrderNumber="",this.CustomerID=null}}),Komodo.Models.ConfirmSwapModel=Ember.Object.extend({init:function(){this._super(),this.OldModel=void 0,this.OldSerial=void 0,this.lblFaultyDevice=void 0,this.lblServiceDevice=void 0,this.lblFaultyModel=void 0,this.lblServiceModel=void 0,this.boolSwapBtn=!0,this.receiptNumber=void 0,this.quoteNumber=void 0,this.lblFaultyDevice2=void 0,this.lblServiceDevice2=void 0,this.lblFaultyModel2=void 0,this.lblServiceModel2=void 0,this.hardwareItem=void 0,this.isLinked=!1}}),Komodo.Models.CreateRepairsOrderModel=Ember.Object.extend({init:function(){this._super(),this.deviceData=[],this.Reason="",this.Category="",this.ReferenceID="",this.isVisibleReferenceID="",this.commercialSerialNumber=null}}),Komodo.Models.RepairMaterialQuote=Ember.Object.extend({init:function(){this.Plant=void 0,this.PlantDescription=void 0,this.Material=void 0,this.MaterialDescription=void 0,this.Price=void 0,this._super()}}),Komodo.Models.RepairMaterialQuotePrice=Ember.Object.extend({init:function(){this.NetValue=void 0,this.TaxValue=void 0,this.GrossValue=void 0,this.Currency=void 0,this.TaxDetail=[],this._super()}}),Komodo.Models.RepairMaterialQuotePriceTaxDetail=Ember.Object.extend({init:function(){this.TaxCode=void 0,this.Value=void 0,this._super()}}),Komodo.Models.OverridePreRepairQuoteModel=Ember.Object.extend({init:function(){this.supervisorUsername="",this.passCode="",this.comment="",this.disableAction=!1,this._super()}}),Komodo.Models.CsiAllLogDetailsModel=Ember.Object.extend({init:function(){this.historyID=void 0,this.date=void 0,this.username=void 0,this.eventNumber=void 0,this.eventDate=void 0,this.eventDescription=void 0,this.action=void 0,this.customerNumber=void 0,this.hostName=void 0,this.serialNumber=void 0,this.reason=void 0,this.messageTrackingId=void 0,this.message=void 0,this._super()}}),Komodo.Models.CsiLogDetailsModel=Ember.Object.extend({init:function(){this.historyID=void 0,this.date=void 0,this.username=void 0,this.eventNumber=void 0,this.eventDate=void 0,this.eventDescription=void 0,this.action=void 0,this.customerNumber=void 0,this.hostName=void 0,this.serialNumber=void 0,this.reason=void 0,this.messageTrackingId=void 0,this.message=void 0,this._super()}}),Komodo.Models.CsiManageViewingModel=Ember.Object.extend({init:function(){this.customerClass=void 0,this.customerType=void 0,this.paymentGroup=void 0,this.viewingLocation=void 0,this.agreementType=void 0,this.establishmentName=void 0,this.viewingPlatform=void 0,this.viewingPoints=void 0,this.contractStartDate=void 0,this.contractEndDate=(new moment).format(KomodoConfiguration.dateFormat),this.chargePeriod=void 0,this.errorReasonCode=void 0,this.allSmartcardSelected=!1,this.dateDisconnectAll=void 0,this.disconnectReconnectAll=!1,this.disconnectReason=void 0,this.reconnectReason=void 0,this.accountId=void 0,this.agreementId=void 0,this.accounts=[],this.establishments=[],this.viewingLocations=[],this.selectedproductData=[],this._super()}}),Komodo.Models.SmartcardModel=Ember.Object.extend({init:function(){this.serialNumber=void 0,this.name=void 0,this.description=void 0,this.isSelected=!1,this._super()}}),Komodo.Models.CustomerDocumentsDataGridModel=Ember.Object.extend({init:function(){this._super(),this.documentURL,this.documentType,this.documentFulfill,this.documentAction}}),Komodo.Models.CustomerUnwanted=Ember.Object.extend({init:function(){this._super(),this.deviceData=[],this.commercialSerialNumber=null}}),Komodo.Models.DccClaimDetailsModel=Ember.Object.extend({init:function(){this._super(),this.deviceNumber=void 0,this.accountNumber=void 0,this.deviceName=void 0,this.smartcardNumber=void 0,this.policeStation=void 0,this.policeCaseNumber=void 0,this.caseDate=void 0,this.caseDateValue=void 0,this.claimType=void 0,this.dateOfTheft=void 0,this.dateOfTheftValue=void 0,this.claimDate=void 0,this.claimDateValue=void 0,this.claimStatus=void 0,this.otherInsurance=void 0,this.otherInsuranceValue=void 0,this.insurerName=void 0,this.insurerPolicyNumber=void 0,this.dispatchBranch=void 0,this.dispatchBranchValue=void 0,this.claimTypeValue=void 0,this.sameAsPhysical=void 0,this.country=void 0,this.province=void 0,this.city=void 0,this.suburb=void 0,this.postalCode=void 0,this.unitNumber=void 0,this.buildingName=void 0,this.streetNumber=void 0,this.streetName=void 0,this.deliveryAddress=void 0,this.isClaimProcessed=void 0,this.customerName=void 0,this.customerSurname=void 0,this.customerUID=void 0,this.category=void 0,this.subCategory=void 0,this.interactionType=void 0,this.queryType=void 0,this.outcome=void 0,this.priority=void 0,this.statusId=void 0,this.isSetToStolen=void 0,this.customerCases=void 0,this.customerSetToStolenCases=void 0,this.retrieveCasesError=void 0,this.isClaimProcessed=void 0,this.claimUID=void 0,this.interacteeName=void 0,this.interactionLocation=void 0,this.interactionMedium=void 0,this.resolutionReason=void 0,this.smartcardModel=void 0,this.dccPolicyNumber=void 0,this.isAddressOverride=void 0}}),Komodo.Models.DccClaimDetailsOldModel=Ember.Object.extend({init:function(){this._super(),this.deviceNumber=void 0,this.accountNumber=void 0,this.deviceName=void 0,this.smartcardNumber=void 0,this.policeStation=void 0,this.policeCaseNumber=void 0,this.caseDate=void 0,this.caseDateValue=void 0,this.claimType=void 0,this.dateOfTheft=void 0,this.dateOfTheftValue=void 0,this.claimDate=void 0,this.claimDateValue=void 0,this.claimStatus=void 0,this.otherInsurance=void 0,this.otherInsuranceValue=void 0,this.insurerName=void 0,this.insurerPolicyNumber=void 0,this.dispatchBranch=void 0,this.dispatchBranchValue=void 0,this.claimTypeValue=void 0,this.sameAsPhysical=void 0,this.country=void 0,this.province=void 0,this.city=void 0,this.suburb=void 0,this.postalCode=void 0,this.unitNumber=void 0,this.buildingName=void 0,this.streetNumber=void 0,this.streetName=void 0,this.deliveryAddress=void 0,this.isClaimProcessed=void 0,this.customerName=void 0,this.customerSurname=void 0,this.customerUID=void 0,this.category=void 0,this.subCategory=void 0,this.interactionType=void 0,this.queryType=void 0,this.outcome=void 0,this.priority=void 0,this.statusId=void 0,this.isSetToStolen=void 0,this.customerCases=void 0,this.customerSetToStolenCases=void 0,this.retrieveCasesError=void 0,this.isClaimProcessed=void 0,this.claimUID=void 0,this.interacteeName=void 0,this.interactionLocation=void 0,this.interactionMedium=void 0,this.resolutionReason=void 0,this.smartcardModel=void 0,this.dccPolicyNumber=void 0,this.email=void 0,this.isAddressOverride=void 0}}),Komodo.Models.DccClaimsModel=Ember.Object.extend({init:function(){this._super(),this.deviceNumber=void 0,this.accountNumber=void 0,this.deviceName=void 0,this.smartcardNumber=void 0,this.policeStation=void 0,this.policeCaseNumber=void 0,this.caseDate=void 0,this.caseDateValue=void 0,this.claimType=void 0,this.dateOfTheft=void 0,this.claimDate=void 0,this.claimStatus=void 0,this.otherInsurance=void 0,this.insurerName=void 0,this.insurerPolicyNumber=void 0,this.dispatchBranch=void 0,this.sameAsPhysical=void 0,this.country=void 0,this.province=void 0,this.city=void 0,this.suburb=void 0,this.postalCode=void 0,this.unitNumber=void 0,this.buildingName=void 0,this.streetNumber=void 0,this.streetName=void 0,this.deliveryAddress=void 0,this.isAddressOverride=void 0,this.customerName=void 0,this.customerSurname=void 0,this.customerUID=void 0,this.category=void 0,this.subCategory=void 0,this.interactionType=void 0,this.queryType=void 0,this.outcome=void 0,this.priority=void 0,this.statusId=void 0,this.isSetToStolen=void 0,this.customerCases=void 0,this.customerSetToStolenCases=void 0,this.retrieveCasesError=void 0,this.isClaimProcessed=void 0,this.dccClaimGridData=[],this.dccClaimGridFilterData=[],this.claimUID=void 0,this.interacteeName=void 0,this.interactionLocation=void 0,this.interactionMedium=void 0,this.selectedGridItem=void 0,this.commandGridItem=void 0,this.dccClaimGridStatus=void 0,this.dccPolicyNumber=void 0}}),Komodo.Models.DCCDocumentModel=Ember.Object.extend({init:function(){this.documentName="",this.documentSize="",this.uploadPercentage="",this.uploadStatus="",this.documentUrl="",this.documentTypes=[],this.documentSerialNumber="",this.documentAlreadyUploaded=!1,this.isDocumentTypeDisable=!1,this._super()},documentType:void 0}),
Komodo.Models.DeviceAgreementManagementModel=Ember.Object.extend({init:function(){this._super(),this.GridDeviceAgreementDataGrid=[],this.fromDevice=void 0,this.toAgreement=void 0}}),Komodo.Models.DeviceInfoModel=Ember.Object.extend({init:function(){this.chargePeriod=void 0,this.contractPeriod="24 months",this.contractPeriodlst=[{title:"None",value:"None"},{title:"24 months",value:"24 months"}],this.deviceName=void 0,this.deviceNumber=void 0,this.deviceStatus=void 0,this.warrantyEndDate=void 0,this.smartcardName=void 0,this.smartcardNumber=void 0,this.smartcardStatus=void 0,this.viewingPeriod=void 0,this.principalPackage=void 0,this.principalStatus=void 0,this.addOnPackage=void 0,this.addOnStatus=void 0,this.addOnPackageNames=[],this.addOnPackageStatus=[],this.services=void 0,this.contractStartDate=void 0,this.contractEndDate=void 0,this.chargeUntilDate=void 0,this.quoteBasedDisconnectDate=void 0,this.isDisableSubmitButton=!0,this.csiLogs=[],this.defaultChargePer=void 0,this.tempDis=!0,this.deviceAddress=[],this.displayAddress=void 0,this.showDeviceAddress=!1,this.city=void 0,this.postalCode=void 0,this.country=void 0,this.province=void 0,this.suburb=void 0,this.streetName=void 0,this.streetNumber=void 0,this.buildingName=void 0,this.unitNumber=void 0,this.privateBag=void 0,this.isCountryReadOnly=!0,this.type=void 0,this.isPrimary=void 0,this.isPrimaryString=void 0,this.isVerify=void 0,this._super(),this.isControlsVisible=!0,this.type=void 0,this.firstName=void 0,this.lastName=void 0,this.isQuoteSummaryVisible=!1,this.isFundsAvailable=!1,this.totalAmountRequired=void 0,this.isDisableChargeButton=!0,this.isDisableChargeDropdown=!1,this.isVisibleContractPeriod=!1,this.isDisableContractPeriodDropdown=!1,this.isDisableChargeDropdownGotvOpen=!1,this.isgotvopenproduct=!1,this.quoteSummary=[],this.gotvopenchargeperiod=void 0,this.quoteSummaryCommandItemType=void 0,this.quoteSummaryCommandItem=void 0,this.quoteSummarySelectedItem=void 0,this.viewAllCSILogs=void 0,this.csiInformation=Ember.A(),this.isonlygotvopenproduct=!0}}),Komodo.Models.CsiLogs=Ember.Object.extend({init:function(){this.historyID=void 0,this.date=void 0,this.dateTime=void 0,this.message=void 0,this.messageCropped=void 0,this.eventDescription=void 0,this.customerNumber=void 0,this.reason=void 0,this.view=void 0,this.eventDate=void 0,this.username=void 0,this.eventNumber=void 0,this.hostName=void 0,this.serialNumber=void 0,this.messageTrackingId=void 0,this.isDisableResend=void 0,this._super()}}),Komodo.Models.QuoteSummaryModel=Ember.Object.extend({init:function(){this.status=void 0,this.smartcardNumber=void 0,this.fromPackage=void 0,this.toPackage=void 0,this.amountRequired=void 0,this.quoteId=void 0,this.invoiceText=void 0,this.startDate=void 0,this.tax=void 0,this.noOfUnits=void 0,this.endDate=void 0,this.lineItemId=void 0,this.balanceAvailable=void 0,this.currencyMnemonic=void 0,this.quoteStatus=void 0,this.financialAccountId=void 0,this.invoiceDescription=void 0,this._super()}}),Komodo.Models.DeviceLinkModel=Ember.Object.extend({init:function(){this.customerUID=void 0,this.customerClass=void 0,this.selectedProduct=void 0,this.selectedDevice=void 0,this.selectedAgreement=void 0,this.devices=[],this.services=[],this.agreements=[],this.filterDevices=[],this.filterServices=[],this.searchAgreementDeviceText=void 0,this.commandGridItem=void 0,this.commandGridItemType=void 0,this.linkAllDevices=!1,this._super()}}),Komodo.Models.DeviceProductModel=Ember.Object.extend({init:function(){this.showNoDeviceProductsLabel=void 0,this.serviceColumns=void 0,this.services=[],this._super()}}),Komodo.Models.DisconnectModel=Ember.Object.extend({init:function(){this.smartcards=void 0,this.date=void 0,this.reason=void 0,this.hardwareAndServices=[],this.prinServiceList=[],this.addonServiceList=[],this.accessServiceList=[],this.isDisconnectPackageVisible=!0,this.isDisconnectAll=!1,this.isScheduleReconnection=!1,this.dateDisconnectAll=void 0,this.dateScheduleReconnection=void 0,this.noResidentialCustomerErrormsg=void 0,this.allHardwares=[],this.isHolidayHome=!1,this.princDate=void 0,this.annualSmartcards=[],this.isDPPProducts=!1,this.checkDisconnectDPPAllowed=!0,this.scheduledChangesList=[],this.isScheduledChangesExist=!1,this.isDeleteScheduleAllowed=!1,this.deleteScheduleList=[],this.getSelectedProductIds=[],this._super()}}),Komodo.Models.EditScheduledChangeDetailsModel=Ember.Object.extend({init:function(){this.UID=void 0,this.event=void 0,this.details=void 0,this.creationDate=void 0,this.scheduledDate=void 0,this.reason=void 0,this.createdBy=void 0,this.effectiveDate=void 0,this._super()}}),Komodo.Models.HardwareAndServicesModel=Ember.Object.extend({init:function(){this.collapsibleHeader,this.decoderName,this.linkedSmartCard,this.principalServiceUid,this.principalServiceName,this.principalServiceStatus,this.principalServiceCancellationDate,this.stateOfToggleButtonOfInsuranceService=!0,this.stateOfToggleButtonOfDPPService=!0,this.stateOfToggleButtonOfPrincipleService=!0,this.stateOfDatePickerPrincipleService=!0,this.stateOfDatePickerInsuranceService=!0,this.stateOfDatePickerAddonAccessService=!0,this.stateOfDatePickerDPPService=!0,this.listOfPrincipalServices=[],this.listOfAddOnServices=[],this.listOfAccessServices=[],this.insuranceServiceName=void 0,this.insuranceServiceStatus=!1,this.insuranceOnDeviceNumber=void 0,this.insuranceCudDate=void 0,this.disableDCCforCancellation=void 0,this.onlyDCCCancellationAllowed=void 0,this.insuranceServiceProductId=void 0,this.dppServiceName=void 0,this.dppServiceStatus=!1,this.dppOnDeviceNumber=void 0,this.dppCudDate=void 0,this.disableStateOfToggleButtonOfDPPService=!1,this.dppServiceProductId=void 0,this.selectedService,this.selectedMonthOfPrimary=void 0,this.notes=void 0,this.selectedDateOfPrincipal,this.principalServiceChargedUntilDate=void 0,this.principalCUD=void 0,this.cudValidation=void 0,this.InsuranceCUD=void 0,this.reasonArry=[],this.monthArry=[],this.upDownToServices=[],this.principalServiceCancellationDate,this.isPrincipalAvailable=!0,this.isScheduleSuspensionDisabled=!1,this.isMonthlyAgreement=void 0,this.ProductChargePeriod=void 0,this._super()},isReqControlEnabledOnDisconnect:function(){var e,t=!0,a=this.get("listOfAddOnServices"),o=this.get("listOfAccessServices"),s=this.get("listOfPrincipalServices"),r=this.get("isScheduleSuspensionDisabled"),n=Komodo.Services.uiService.getController("disconnect"),i=Komodo.Services.uiService.getController("cancelPackages");for(e=0;e<s.length;e++)if(!1===s[e].get("stateOfToggleButtonOfService")){this.get("isDisconnectAll")?s[e].set("stateOfDatePickerPrincipleService",!0):s[e].set("stateOfDatePickerPrincipleService",!1),this.set("stateOfToggleButtonOfPrincipleService",!1);for(var c=0;c<s.length;c++)s[c].serviceType.toLowerCase()==="FREETOAIR".toLowerCase()&&(s[c].set("stateOfToggleButtonOfService",!1),s[c].set("stateOfDatePickerPrincipleService",!0),s[c].set("disabletoggleforPrincipalService",!0))}else{s[e].set("stateOfDatePickerPrincipleService",!0),s[e].set("serviceCUD",void 0),this.set("stateOfToggleButtonOfPrincipleService",!0);for(var c=0;c<s.length;c++)s[c].serviceType.toLowerCase()==="FREETOAIR".toLowerCase()&&(s[c].set("stateOfToggleButtonOfService",!0),s[c].set("stateOfDatePickerPrincipleService",!0),s[c].set("disabletoggleforPrincipalService",!0))}if(!1===this.get("stateOfToggleButtonOfPrincipleService")){if(Ember.isEmpty(n)||Ember.isEmpty(n.disconnectModel)||(n.disconnectModel.checkDisconnectDPPAllowed||Ember.isEmpty(n.DPPListProduct)||!n.DPPListProduct.contains(n.hardwareAndServicesArray[0].principalServiceUid)?this.get("isDisconnectAll")?this.set("stateOfDatePickerPrincipleService",!0):this.set("stateOfDatePickerPrincipleService",!1):(this.set("principalCUD",XDates.getformatedDateforDatepicker(new Date)),n.disconnectModel.isDisconnectAll&&n.set("dateDisconnectAllDisable",!0)),n.get("immediateDisconnectDPPAllowed")||n.set("dateDisconnectAllDisable",!1)),r)for(this.set("stateOfDatePickerPrincipleService",!0),this.set("principalCUD",new Date(Date.UTC((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()))),e=0;e<s.length;e++)s[e].set("stateOfDatePickerPrincipleService",!0),s[e].set("serviceCUD",new Date(Date.UTC((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())));for(e=0;e<a.length;e++)Ember.isEmpty(n)||Ember.isEmpty(n.disconnectModel)||Ember.isEmpty(n.DPPListProduct)||!n.DPPListProduct.contains(a[e].serviceUid)?a[e].set("stateOfDatePickerAddonAccessService",!!this.get("isDisconnectAll")):(a[e].set("serviceCUD",XDates.getformatedDateforDatepicker(new Date)),n.disconnectModel.isDisconnectAll&&n.set("dateDisconnectAllDisable",!0)),a[e].set("stateOfToggleButtonOfService",!1),r&&(a[e].set("stateOfDatePickerAddonAccessService",!0),a[e].set("serviceCUD",new Date(Date.UTC((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()))));for(e=0;e<o.length;e++)Ember.isEmpty(n)||Ember.isEmpty(n.disconnectModel)||Ember.isEmpty(n.DPPListProduct)||!n.DPPListProduct.contains(o[e].serviceUid)?o[e].set("stateOfDatePickerAddonAccessService",!!this.get("isDisconnectAll")):(o[e].set("serviceCUD",XDates.getformatedDateforDatepicker(new Date)),n.disconnectModel.isDisconnectAll&&n.set("dateDisconnectAllDisable",!0)),o[e].set("stateOfToggleButtonOfService",!1),r&&(o[e].set("stateOfDatePickerAddonAccessService",!0),o[e].set("serviceCUD",new Date(Date.UTC((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()))));if(0==this.onlyDCCCancellationAllowed){for(e=0;e<s.length;e++)s[e].set("disabletoggleforPrincipalService",!0),s[e].set("stateOfDatePickerPrincipleService",!0);this.set("disablecheckboxfordcc",!0),this.set("isScheduleCancellationDisabled",!0)}t=!1}else if(0==this.onlyDCCCancellationAllowed){for(e=0;e<s.length;e++)s[e].set("disabletoggleforPrincipalService",!0),s[e].set("stateOfDatePickerPrincipleService",!0),s[e].set("disabletoggleforPrincipalService",!0),s[e].set("stateOfDatePickerPrincipleService",!0);this.set("disabletoggleforPrincipalService",!0),this.set("stateOfDatePickerPrincipleService",!0),this.set("disablecheckboxfordcc",!0),this.set("isScheduleCancellationDisabled",!1)}else{for(e=0;e<s.length;e++)s[e].set("stateOfDatePickerPrincipleService",!0),s[e].set("serviceCUD",void 0);this.set("stateOfDatePickerPrincipleService",!0),Ember.isEmpty(n)||Ember.isEmpty(n.disconnectModel)||(n.disconnectModel.checkDisconnectDPPAllowed?this.set("principalCUD",void 0):this.get("stateOfToggleButtonOfPrincipleService")&&!1===this.get("isDisconnectAll")&&this.set("principalCUD",void 0))}if(Ember.isEmpty(this.get("insuranceServiceName"))||0==this.get("stateOfToggleButtonOfInsuranceService")&&(t=!1),Ember.isEmpty(this.get("dppServiceName"))||this.get("disableStateOfToggleButtonOfDPPService")||0==this.get("stateOfToggleButtonOfDPPService")&&(t=!1),1==this.get("isDisconnectAll")){if(0==this.disableDCCforCancellation&&(this.set("stateOfDatePickerInsuranceService",!0),this.set("stateOftoggleforInsuranceService",!0)),1==this.get("isDPPProducts"))for(this.set("stateOfToggleButtonOfPrincipleService",!0),e=0;e<s.length;e++)s[e].set("stateOfToggleButtonOfService",!0);else for(this.set("stateOfToggleButtonOfPrincipleService",!1),e=0;e<s.length;e++)s[e].set("stateOfToggleButtonOfService",!1);if(this.set("stateOfToggleButtonOfInsuranceService",!1),this.get("disableStateOfToggleButtonOfDPPService")?this.set("stateOfToggleButtonOfDPPService",!0):this.set("stateOfToggleButtonOfDPPService",!1),r)for(this.set("principalCUD",void 0),e=0;e<s.length;e++)s[e].set("serviceCUD",void 0);for(e=0;e<a.length;e++)Ember.isEmpty(n)||Ember.isEmpty(n.disconnectModel)||Ember.isEmpty(n.DPPListProduct)||!n.DPPListProduct.contains(a[e].serviceUid)?a[e].set("stateOfToggleButtonOfService",!1):(a[e].set("serviceCUD",XDates.getformatedDateforDatepicker(new Date)),a[e].set("stateOfDatePickerAddonAccessService",!0),n.disconnectModel.isDisconnectAll&&n.set("dateDisconnectAllDisable",!0)),r&&a[e].set("serviceCUD",void 0);for(e=0;e<o.length;e++)Ember.isEmpty(n)||Ember.isEmpty(n.disconnectModel)||Ember.isEmpty(n.DPPListProduct)||!n.DPPListProduct.contains(o[e].serviceUid)||!1!==this.get("stateOfToggleButtonOfPrincipleService")?o[e].set("stateOfToggleButtonOfService",!1):(o[e].set("serviceCUD",XDates.getformatedDateforDatepicker(new Date)),o[e].set("stateOfDatePickerAddonAccessService",!0),n.disconnectModel.isDisconnectAll&&n.set("dateDisconnectAllDisable",!0)),r&&o[e].set("serviceCUD",void 0);t=!1}else{for(!0===this.get("stateOfToggleButtonOfInsuranceService")?(this.set("InsuranceCUD",void 0),this.set("stateOfDatePickerInsuranceService",!0),0==this.disableDCCforCancellation&&(this.set("stateOfDatePickerInsuranceService",!0),this.set("stateOftoggleforInsuranceService",!0))):this.set("stateOfDatePickerInsuranceService",!1),!0===this.get("stateOfToggleButtonOfDPPService")?this.set("dppCudDate",void 0):this.get("disableStateOfToggleButtonOfDPPService")?this.set("stateOfToggleButtonOfDPPService",!0):this.set("dppCudDate",new Date(Date.UTC((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()))),e=0;e<a.length;e++){!1===a[e].get("stateOfToggleButtonOfService")?(Ember.isEmpty(n)||Ember.isEmpty(n.disconnectModel)||Ember.isEmpty(n.DPPListProduct)||!n.DPPListProduct.contains(a[e].serviceUid)||!1!==this.get("stateOfToggleButtonOfPrincipleService")?a[e].set("stateOfDatePickerAddonAccessService",!1):(a[e].set("serviceCUD",XDates.getformatedDateforDatepicker(new Date)),a[e].set("stateOfDatePickerAddonAccessService",!0),n.disconnectModel.isDisconnectAll&&n.set("dateDisconnectAllDisable",!0)),t=!1,r&&(a[e].set("stateOfDatePickerAddonAccessService",!0),a[e].set("serviceCUD",new Date(Date.UTC((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()))))):(0==this.onlyDCCCancellationAllowed?a[e].set("disabletoggleAddonService",!0):a[e].set("serviceCUD",void 0),a[e].set("stateOfDatePickerAddonAccessService",!0));var l=GetClarityConstants("ManageViewingConstants","manageViewingConstants.cancel.DPPMwebAddon");!Ember.isEmpty(l)&&l.contains(a[e].serviceName.toLowerCase())&&(a[e].set("disabletoggleAddonService",!0),a[e].set("stateOfDatePickerAddonAccessService",!0),this.get("stateOfToggleButtonOfPrincipleService")&&a[e].set("stateOfToggleButtonOfService",!0))}for(e=0;e<o.length;e++)!1===o[e].get("stateOfToggleButtonOfService")?(Ember.isEmpty(n)||Ember.isEmpty(n.disconnectModel)||Ember.isEmpty(n.DPPListProduct)||!n.DPPListProduct.contains(o[e].serviceUid)||!1!==this.get("stateOfToggleButtonOfPrincipleService")?o[e].set("stateOfDatePickerAddonAccessService",!1):(o[e].set("serviceCUD",XDates.getformatedDateforDatepicker(new Date)),o[e].set("stateOfDatePickerAddonAccessService",!0),n.disconnectModel.isDisconnectAll&&n.set("dateDisconnectAllDisable",!0)),t=!1,r&&(o[e].set("stateOfDatePickerAddonAccessService",!0),o[e].set("serviceCUD",new Date(Date.UTC((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()))))):(0==this.onlyDCCCancellationAllowed?o[e].set("disabletoggleAccessService",!0):o[e].set("serviceCUD",void 0),o[e].set("stateOfDatePickerAddonAccessService",!0))}this.set("SplPrincipalpackagesList",[]),this.set("SplPrincipalpackagesList",GetClarityConstants("ManageViewingConstants","manageViewingConstants.suspend.SPLproductIDs")||[""]);var d=this.get("SplPrincipalpackagesList"),u=!1;if(d.length>0&&s.length>0)for(var h=0;h<d.length;h++)for(var m=0;m<s.length;m++)s[m].stateOfToggleButtonOfService||d[h].toString().toLowerCase()==s[m].serviceUid.toString().toLowerCase()&&(u=!0);return i.set("dissableBindingCancelReason",!u),t}.property("isDisconnectAll","stateOfToggleButtonOfPrincipleService","listOfPrincipalServices.@each.stateOfToggleButtonOfService","stateOfToggleButtonOfDPPService","stateOfToggleButtonOfInsuranceService","listOfAddOnServices.@each.stateOfToggleButtonOfService","listOfAccessServices.@each.stateOfToggleButtonOfService"),isContinueButtonDisabledOnReconnect:function(){var e,t=!0,a=this.get("listOfAddOnServices");if(!0===this.get("stateOfToggleButtonOfPrincipleService"))return!1;for(e=0;e<a.length;e++)if(!0===a[e].get("stateOfToggleButtonOfService")){t=!1;break}return t}.property("stateOfToggleButtonOfPrincipleService","listOfAddOnServices.@each.stateOfToggleButtonOfService"),showDowngradeDate:function(){var e=!1,t=this.get("selectedService");return void 0!=t&&null!=t&&"false"==t.get("isUpgrade")&&(e=!0),e}.property("selectedService.isUpgrade.value","selectedService"),showUpgradeDate:function(){var e=!1,t=this.get("selectedService");return void 0!=t&&null!=t&&"true"==t.get("isUpgrade")&&(e=!0),e}.property("selectedService.isUpgrade.value","selectedService"),disableOnPrincipleServiceToggleButton:function(){return this.get("stateOfToggleButtonOfPrincipleService")}.property("stateOfToggleButtonOfPrincipleService.value"),isValidCUDForDisconnect:function(){}.property("principalCUD")}),Komodo.Models.MonthModel=Ember.Object.extend({init:function(){this.monthName,this.monthKey,this._super()}}),Komodo.Models.ReasonModel=Ember.Object.extend({init:function(){this.reasonText,this.reasonKey,this._super()}}),Komodo.Models.AddOnsModel=Ember.Object.extend({init:function(){this.addOnComProductId,this.addOnsName,this.addOnStatus,this._super()}}),Komodo.Models.ServiceModel=Ember.Object.extend({init:function(){this.serviceUid,this.serviceName,this.serviceStatus,this.serviceType,this.serviceCUD,this.serviceCancellationDate,this.stateOfToggleButtonOfService=!1,this.stateOfToggleCalender=!0,this.selectedMonthOfService,this.selectedDateOfService,this.serviceCancellationDate,this._super()},disableOnAddonServiceToggleButton:function(){return this.get("stateOfToggleButtonOfService")}.property("stateOfToggleButtonOfService.value")}),Komodo.Models.HardwaresDataGridMVModel=Ember.Object.extend({init:function(){this._super(),this.accountNo,this.hardware,this.primaryproducts,this.addonproducts,this.accessproducts,this.insurance,this.FromProductName,this.ToProductName,this.productPrice,this.deviceSerialNo,this.deviceStatus,this.FromModel,this.ToModel,this.LinkedSC,this.deviceCost,this.totalPrice,this.totalTax,this.subscriptionCost,this.Swap,this.LinkedSCModel,this.isPrimary,this.LinkedSCProduct,this.name,this.UID,this.productQuantity,this.deviceType,this.DeviceWarranty,this.InsuranceStatus}}),Komodo.Models.HolidayHomesModel=Ember.Object.extend({init:function(){this.fromdevice=void 0,this.todevice=void 0,this.scheduledDate=void 0,this.hardwareAndServices=[],this.hardwareAndServicesArray=[],this.fromdeviceSmartcardList=[],this.todeviceSmartCardList=[],this.isActivefromdevice=void 0,this.isActivetodevice=void 0,this.fromDeviceSerialNumber=void 0,this.toDeviceserialnumber=void 0,this.serviceId=void 0,this.serviceName=void 0,this.productIdListToLink=[],this.allHardwares=[],this.shownoSmartcardsLabel=void 0,this.noResidentialcustomermsg=void 0,this.isActiveService=void 0,this.isSwitch="",this.viewDays=void 0,this.isSwitching=void 0,this.isDailyPrepaid=void 0,this.isUpgradeorDowngrade=void 0,this.isDisconnect=void 0,this.isReconnect=void 0,this.areAllServicesCancelled=void 0,this.switchOnDate=void 0,this.switchOffDate=void 0,this.dateForSuccessMsg=void 0,this.annualSmartcards=[],this.validNumberOfHolidayHomes=void 0,this.standaloneAvailable=void 0,this.number_general=void 0,this.number_holidayHomes=void 0,this.noSwitchingAllowed=void 0,this.equalGeneralHolidayHomes=void 0,this.switchingAvailable=void 0,this.holidayHomesGeneralSmartcards=void 0,this.holidayHomesGeneralSmartcardsList=[],this.generalSmartcards=void 0,this.suspendedOrDiscHolidayhomesList=[],this.isHolidayHomesSuspended=void 0,this.equalOrGreaterGeneral=void 0,this.switchedSmartcardSelected=void 0,this.generalSwitchedSmartcard=void 0,this.generalSwitchedAgreementsSmartcardList=[],this.smartcardAgreementList=[],this._super()}}),Komodo.Models.HolidayHomesGridModel=Ember.Object.extend({init:function(){this.deviceNumber,this.secondaryDeviceNumber=[],this.prinPckName,this.freeViewPckName,this.addOnPckNames=[],this.accessService,this.insuranceServices,this.accessServiceStatus,this.prinPckStatus,this.freeViewPckStatus,this.addOnPckStatus=[],this.insuranceServicesStatus,this.viewingDaysLeft,this.isXtraview=!1,this.smartCardNumber,this.prinPckQBD,this.freeViewQBD,this.addonQBD=[],this.accessServiceQBD,this.boxOfficeQBD,this.insuranceServicesQBD,this.quoteBasedDisconnect,this.type,this._super()}}),Komodo.Models.ManageHolidayHomesXtraviewModel=Ember.Object.extend({init:function(){this.CustomerId,this.IsTransferProducts=null,this.AgreementFrom,this.AgreementTo,this.FromDeviceSerialNumber,this.ToDeviceSerialNumber,this.SwitchServiceConfiguration=[],this.EffectiveDate,this.ReverteDate,this.IsSwitchBack,this.ParentProductDetails,this.ChildProductDetails=[],this.IsXtraviewQuoteRequired,this.IsParentChildRelationSet=null,this.TransferReason=null,this.ValidateSchedules=null,this._super()}}),Komodo.Models.SwitchServiceConfiguration=Ember.Object.extend({init:function(){this.CommercialProductCategoryIdsToExclude=[],this.DeviceLinkReason,this.DeviceUnlinkReason,this.DisconnectProductReason,this.NumberOfGraceDays,this.UpdateProductQuantityReason,this.UpdateProductStatusWithGraceDaysReason,this._super()}}),Komodo.Models.ScheduleDetail=Ember.Object.extend({init:function(){this.productId,this.scheduledDate,this._super()}}),Komodo.Models.InvalidPackagesModel=Ember.Object.extend({init:function(){this.smartcards=void 0,this.date=void 0,this.reason=void 0,this.hardwareAndServices=[],this.prinServiceList=[],this.addonServiceList=[],this.accessServiceList=[],this.isDisconnectPackageVisible=!0,this.isDisconnectAll=!1,this.isScheduleReconnection=!1,this.dateCancelAll=void 0,this.dateScheduleReconnection=void 0,this.serialNumber=void 0,this.isCancel=!1,this.smartcardInformation=void 0,this.allHardwares=[],this.princPre=!1,this._super()}}),Komodo.Models.ServiceDetails=Ember.Object.extend({init:function(){this.serviceName=void 0,this.serviceType=void 0,this.stateOfToggleButton=void 0,this._super()}}),Komodo.Models.IssueHardwareAgainstSalesOrderModel=Ember.Object.extend({init:function(){this._super(),this.QuoteID=void 0,this.modelsAndDevices=[],this.DeviceNumber=void 0,this.quoteNumber=void 0}}),Komodo.Models.IssueHardwareAgainstSwapAvailabilityModel=Ember.Object.extend({init:function(){this._super(),this.modelsAndDevices=[],this.DeviceNumber=void 0,this.serialNumber=void 0,this.quoteNumber=void 0,this.FaultySerialNumber="",this.FaultySmartcardNumber="",this.ServiceOrderNumber="",this.CustomerID=null}}),Komodo.Models.IssueHardwareAgainstSwapOrderModel=Ember.Object.extend({init:function(){this._super(),this.QuoteID=void 0,this.modelsAndDevices=[],this.DeviceNumber=void 0,this.faultyDevice=[],this.serialNumber=void 0,this.quoteNumber=void 0,this.Reason="",this.isVisibleRepldevice=void 0,this.FaultySerialNumber="",this.CustomerID=null}}),Komodo.Models.LinkDelinkModel=Ember.Object.extend({init:function(){this._super(),this.deviceData=[],this.fromDevice=void 0,this.toDevice=void 0,this.commercialSerialNumber=null,this.deviceNumber=null,this.invalidAddDevice=!1}}),Komodo.Models.ManageViewingModel=Ember.Object.extend({init:function(){this._super()}}),Komodo.Models.ManageViewingGridModel=Ember.Object.extend({init:function(){this.agreementId="",this.accountNumber="",this.smartCardName="",this.smartCardNumber="",this.deviceName="",this.deviceNumber="",this.packageName="",this.prinPckName="",this.principalPackageNames=[],this.prinPckStatus="",this.principalPackageStatus=[],this.addOnPckName="",this.addOnPackageNames=[],this.addOnPckStatus="",this.addOnPackageStatus=[],this.accessServiceNames=[],this.accessServiceStatusAll=[],this.DPP24ServiceNames=[],this.DPP24ServiceStatusAll=[],this.fromDate="",this.endDate="",this.accessServiceName="",this.insuranceServices="",this.viewingPeriod=[],this.primaryBoxoffice,this.actualSelectedState=!1,this.isSelected=!1,this.isAddon=void 0,this.xtraviewServiceStatus="",this.isXtraviewService=!1,this.isXtraviewServiceForSecondaryDevice=!1,this.isSecondaryXtraviewService=!1,this.insuranceServicesStatus="",this.boxOfficeStatus="",this.accessServiceStatus="",this.freeViewPckName="",this.freeViewPckStatus="",this.quoteBasedDisconnectDate=[],this.chargeUntilDate=[],this.chargePeriod="",this.gotvopenchargePeriod="",this.deviceName="",this.MACAddress="",this.deviceStatus="",this.smartcardName="",this.smartcardStatus="",this.agreementType="",this.agreementChargePeriod="",this.linkedSmartCardNumber="",this.showMax="",this.showMaxStatus="",this.isHolidayHome=!1,this._super()}}),Komodo.Models.PerformSwapModel=Ember.Object.extend({init:function(){this._super(),this.boolAcceptQuoteView=!1,this.swapData=[],this.quoteData=[],this.deviceData=[],this.pairing=[],this.FaultyModel=void 0,this.FaultyProduct=void 0,this.countryCode=void 0,this.phone=void 0,this.email=void 0,this.firstName=void 0,this.lastName=void 0,this.ConfirmedSerialNo=void 0,this.ConfirmedModel=void 0,this.SelectedModel=void 0,this.SelectedProduct=void 0,this.OldModel=void 0,this.OldSerial=void 0,this.BoolSwapTypeButton=!0,this.BoolAcceptQuoteButton=!0,this.QuoteStatus="---",this.QuoteNumber="No quote generated",this.PairedDevice="No linked device",this.DecoderSr=void 0,this.SmartCardSr=void 0,this.SmartCardModel=void 0,this.DecoderModel=void 0,this.DecoderProduct=void 0,this.SmartCardProduct=void 0,this.Reason="",this.Category="",this.confirmDevice="",this.confirmDeviceLbl="",this.communicationLanguage=null,this.communicationType=null,this.LinkSmartcard=void 0,this.boolPairedDevice=!1,this.isSendQuotationVisible=!0,this.showQuoteDetails=!1,this.commercialSerialNumber=null,this.enablePairedDevice=!0,this.customerUID=void 0,this.countryISO=void 0,this.SAGridData=[],this.searchString="",this.SearchDeviceData=[],this.isDeviceToSendForRepair=!1}}),Komodo.Models.PreRepairQuoteModel=Ember.Object.extend({init:function(){this.disableAction=!1,this.ErrorMessage=""}}),Komodo.Models.QuoteDetailModel=Ember.Object.extend({init:function(){this.quoteID=void 0,this.status=void 0,this.invoiceText=void 0,this.noOfUnits=void 0,this.startDate=void 0,this.endDate=void 0,this.quoteTotal=void 0,this.balanceAvailable=void 0,this.tax=void 0,this.amountRequired=void 0,this.amount=void 0,this._super()}}),Komodo.Models.ReconnectModel=Ember.Object.extend({init:function(){this.quoteSummaryFundAvailArr=[],this.quoteSummaryFundNotAvailArr=[],this.smartCards=void 0,this.selectedSmartCrad=void 0,this.pkgOnOff=void 0,this.totalAmountRequired=void 0,this.isFundAvail=!1,this.isFundNotAvail=!1,this.isDataAvail=!1,this.quoteID=void 0,this.status=void 0,this.invoiceText=void 0,this.noOfUnits=void 0,this.startDate=void 0,this.endDate=void 0,this.quoteTotal=void 0,this.balanceAvailable=void 0,this.tax=void 0,this.gridEditMode="custom",this.isQuoteSummaryVisible=!1,this.isReconnectPackageVisible=!1,this.isReconnectAll=!1,this.isScheduleDisconnection=!1,this.dateReconnectAll=void 0,this.dateScheduleDisconnection=void 0,this.prinServiceList=[],this.addonServiceList=[],this.accessServiceList=[],this.hardwareAndServices=[],this.allHardwares=[],this.sctemp=void 0,this.scnotes=void 0,this.suspendNotes=void 0,this.suspendedFlag=!1,this.reconnectDateEnDis=!0,this.diconnectDateEnDis=!0,this.quoteSummary=[],this.newQuoteData=[],this.suspendedData=[],this.totalAmountForGrid=void 0,this.commandGridItem=void 0,this.quoteDone=!1,this.checkQuoteThere=!1,this.disableAcceptReconnect=!1,this.quoteData=void 0,this.disconnectServicesCheck=!0,this.refreshQuoteCheck=!0,this.checkPreActivateQuote=!1,this.checkPreAct=!1,this.day=0,this.disableReject=!1,this.isQuoteButtonRequired=!0,this.princDate=void 0,this.isHolidayHome=!1,this.annualSmartcards=[],this.suspendedOrDiscHolidayhomes=[],this.noResidentialCustomerErrormsg=void 0,this.showUnfairDisconnect=!1,this.isUnfairDisconnect=!1,this.unfairDiscNotes=void 0,this.showUnfairDisnotes=!1,this.unfairDisconnectflag=void 0,this.unfairSelected=!1,this.dppArray=[],this.dppAddonAccess=!1,this.dppPrinciArray=[],this.dppPrinc=!1,this.dccFlag=!1,this.isquoteDisable=!0,this.isSelectall=!1,this.isReconnectMultiplePackageVisible=!1,this.isScheduleAllDisconnection=!1,this.isAllServicesSuspended=!1,this.ischeckAllPreActivateQuoteDisabled=!1,this.isUnfairAllDisconnect=!1,this.suspendedAllFlag=!1,this.suspendePackageName=[],this.suspededReconnectDate=void 0,this.isSelectAllDisabled=!1,this.isToggleButtonsDisabled=!1,this.isQouteforMultipleSmartcard=!1,this.quoteDataAvailableForMultipleSmarcard=!1,this.quoteDataAvailable=!1,this.isunfairAllcheckboxEnabledOrDisabled=!0,this.isScheduleAllDisconnectionDisabled=!0,this.showUnfairAllDisconnect=!1,this.checkPreActAll=!1,this.stopSelectAll=!1,this.isDayListdropdownDisabled=!0,this.SuspendedSmartcardServcieArray=new Array,this.QuoteArray=new Array,this._super()}}),Komodo.Models.QuoteSummaryFundNotAvail=Ember.Object.extend({init:function(){this.smartcardNumber=void 0,this.packageName=void 0,this.price=void 0,this.amountRequired=void 0,this.Id=void 0,this.InvText=void 0,this.sDate=void 0,this.qTotal=void 0,this.availBal=void 0,this.tax=void 0,this.status=void 0,this.noofunit=void 0,this.eDate=void 0,this.aReq=void 0,this.financialAccountId=void 0,this.currencyMnemonic=void 0,this._super()}}),Komodo.Models.NewQuoteGridData=Ember.Object.extend({init:function(){this.serialnumber=void 0,this.createdByUserId=void 0,this.customerId=void 0,this.earmarkedAmount=void 0,this.earmarkedOn=void 0,this.exportDate=void 0,this.extended=void 0,this.financialAccountBalance=void 0,this.financialAccountCurrentBalance=void 0,this.financialAccountId=void 0,this.fulfillmentDate=void 0,this.id=void 0,this.invoiceRunId=void 0,this.lineItems=[],this.matchedAmount=void 0,this.matchingPaymentId=void 0,this.quoteDate=void 0,this.quoteGenerationMethod=void 0,this.quoteStatus=void 0,this.quoteStatusId=void 0,this.quoteType=void 0,this.replacedByQuoteId=void 0,this.totalAmount=void 0,this.suffInsuff=!1,this.enabledOrNot=!1,this.priceTotalAmt=0,this.finalAmountRequired=0,this.executionDate=void 0,this._super()}}),Komodo.Models.LineItems=Ember.Object.extend({init:function(){this.adjustmentAmount=0,this.amount=0,this.baseAmount=0,this.createdByInvoiceRun=!1,this.currencyId=0,this.currencyMnemonic=void 0,this.endDate=void 0,this.entityId=void 0,this.entityType=void 0,this.eventId=0,this.extended=void 0,this.id=void 0,this.invoiceText=void 0,this.isProrated=!1,this.listPriceConditionId=void 0,this.listPriceTypeId=void 0,this.numberOfUnits=void 0,this.priceAdjustmentId=void 0,this.quoteInvoiceId=void 0,this.reversal=void 0,this.startDate=void 0,this.taxAmount=void 0,this._super()}}),Komodo.Models.QuoteSummaryFundAvail=Ember.Object.extend({init:function(){this.smartCardNo=void 0,this.servicePackage=void 0,this.amountRequired=void 0,this._super()}}),Komodo.Models.SuspendedServiceData=Ember.Object.extend({init:function(){this.serviceName=void 0,this.displayDate=void 0,this.reconnectionDate=void 0,this.disconnectionDate=void 0,this._super()}}),Komodo.Models.PreActivateHolidayHomeRequest=Ember.Object.extend({init:function(){this.DeviceSerialNumber=void 0,this.PackageNames=[],this.DaysToAdd=void 0,this.Operation,this._super()}}),Komodo.Models.PreActivatePackage=Ember.Object.extend({init:function(){this.deviceSerialNumber,this.packageName=void 0,this.isReconnectService=!1,this._super()}}),Komodo.Models.RecoverStolenDeviceModel=Ember.Object.extend({init:function(){this._super(),this.CustomerId=void 0,this.Country=void 0,this.DecoderSerialNumber=void 0,this.SmartcardSerialNumber=void 0}}),Ember.TEMPLATES.UpgradeOrDowngradeView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n    "),o=a.if.call(e,"upgradeOrDowngradeModel.isChangePackageVisible",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function n(e,t){var o,s;return t.buffer.push('\r\n    <div style="padding:20px 20px 0px 20px">\r\n        <div width="90%">\r\n            <span class="komodo-heading">'),
t.buffer.push(Y((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:upgradeOrDowngrade.upgradeOrDowngrade",s):z.call(e,"loc","locale.manageviewing:upgradeOrDowngrade.upgradeOrDowngrade",s)))),t.buffer.push("</span>\r\n        </div>\r\n        <br />\r\n    </div>\r\n    "),""}function i(e,t){var o;return t.buffer.push("\r\n    "),o=a.if.call(e,"Komodo.Services.customerProfileService.isBannerOpen",{hash:{},hashTypes:{},hashContexts:{},inverse:X.program(7,l,t),fn:X.program(5,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function c(e,t){var o,s;return t.buffer.push('\r\n    <div style="padding:140px 20px 0px 20px">\r\n        <div width="90%">\r\n            <span class="komodo-heading">'),t.buffer.push(Y((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:upgradeOrDowngrade.upgradeOrDowngrade",s):z.call(e,"loc","locale.manageviewing:upgradeOrDowngrade.upgradeOrDowngrade",s)))),t.buffer.push('</span>\r\n            <span class="float-right">\r\n                <b>\r\n                    <a href="#/manageViewing">&lt;'),t.buffer.push(Y((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:upgradeOrDowngrade.back",s):z.call(e,"loc","locale.manageviewing:upgradeOrDowngrade.back",s)))),t.buffer.push("</a>\r\n                </b>\r\n            </span>\r\n        </div>\r\n        <hr />\r\n    </div>\r\n    "),""}function l(e,t){var o,s;return t.buffer.push('\r\n    <div style="padding:20px 20px 0px 20px">\r\n        <div width="90%">\r\n            <span class="komodo-heading">'),t.buffer.push(Y((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:upgradeOrDowngrade.upgradeOrDowngrade",s):z.call(e,"loc","locale.manageviewing:upgradeOrDowngrade.upgradeOrDowngrade",s)))),t.buffer.push('</span>\r\n            <span class="float-right">\r\n                <b>\r\n                    <a href="#/manageViewing">&lt;'),t.buffer.push(Y((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:upgradeOrDowngrade.back",s):z.call(e,"loc","locale.manageviewing:upgradeOrDowngrade.back",s)))),t.buffer.push("</a>\r\n                </b>\r\n            </span>\r\n        </div>\r\n        <hr />\r\n    </div>\r\n    "),""}function d(e,t){t.buffer.push("\r\n        ")}function u(e,t){var o;return t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:upgradeOrDowngrade.selectSmartcardTitle~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:e,isCollapsed:e},inverse:X.noop,fn:X.program(12,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function h(e,t){return t.buffer.push("\r\n        "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.Select",{hash:{label:"~locale.manageviewing:upgradeOrDowngrade.listOfSmartcards~",prompt:"~locale.manageviewing:upgradeOrDowngrade.selectSmartcard~",valueBinding:"upgradeOrDowngradeModel.smartcards",contentBinding:"smartcardList",optionLabelPath:"content.Key",optionValuePath:"content"},hashTypes:{label:"STRING",prompt:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{label:e,prompt:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        <br />\r\n        "),""}function m(e,t){var o;return t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:upgradeOrDowngrade.changePackage~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:e,isCollapsed:e},inverse:X.noop,fn:X.program(15,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function g(e,t){var o;return t.buffer.push("\r\n\r\n        "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"upgradeOrDowngradeModel.smartCardInformation",class:"sub-heading"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n        <br /><br />\r\n        \x3c!-- Principle--\x3e\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(16,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        \x3c!-- Principle end--\x3e\r\n        "),o=a.if.call(e,"upgradeOrDowngradeModel.addOnVisibility",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(31,x,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        <br />\r\n\r\n        \x3c!--<Access label>--\x3e\r\n        "),o=a.if.call(e,"upgradeOrDowngradeModel.acessVisibility",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(40,B,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n        <br />\r\n        <div style="float:right;">\r\n            '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"acceptQuote",tabindex:"11",disabledBinding:"quoteButtonDisable"},hashTypes:{action:"STRING",tabindex:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,tabindex:e,disabledBinding:e},inverse:X.noop,fn:X.program(49,L,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("&nbsp;\r\n            "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"refreshQuote",tabindex:"11",disabledBinding:"refreshButtonDisable",class:"btn-inverse"},hashTypes:{action:"STRING",tabindex:"STRING",disabledBinding:"STRING",class:"STRING"},hashContexts:{action:e,tabindex:e,disabledBinding:e,class:e},inverse:X.noop,fn:X.program(51,E,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </div>\r\n        <br /><br /><br />\r\n        "),""}function p(e,t){var o;return t.buffer.push("\r\n        "),o=a.each.call(e,"upPrincipalPackage","in","currentPrincipalService",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(17,v,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function v(e,t){var o;return t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-2"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:X.noop,fn:X.program(18,f,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-1"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:X.noop,fn:X.program(20,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-1"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:X.noop,fn:X.program(23,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-4"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:X.noop,fn:X.program(25,D,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-4"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:X.noop,fn:X.program(28,w,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function f(e,t){return t.buffer.push("\r\n        "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.LabelField",{hash:{valueBinding:"upPrincipalPackage",label:"~locale.manageviewing:upgradeOrDowngrade.from~"},hashTypes:{valueBinding:"STRING",label:"STRING"},hashContexts:{valueBinding:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),""}function b(e,t){var o;return t.buffer.push("\r\n        <br />\r\n        "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"",class:"btn-success btn-xs"},hashTypes:{action:"STRING",class:"STRING"},hashContexts:{action:e,class:e},inverse:X.noop,fn:X.program(21,C,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function C(e,t){var o,s;t.buffer.push(Y((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"Active",s):z.call(e,"loc","Active",s))))}function S(e,t){t.buffer.push('\r\n        <br />\r\n        <img src="Content\\Images\\link\\blue-arrow.svg" />\r\n        ')}function D(e,t){var o;return t.buffer.push("\r\n        "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.Select",{hash:{label:"~locale.manageviewing:upgradeOrDowngrade.to~",prompt:"Select",valueBinding:"upgradeOrDowngradeModel.changeToPackage",disabledBinding:"toDropdownDisable",contentBinding:"changeToPackageList",optionLabelPath:"content.Value",optionValuePath:"content"},hashTypes:{label:"STRING",prompt:"STRING",valueBinding:"STRING",disabledBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{label:e,prompt:e,valueBinding:e,disabledBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),o=a.if.call(e,"isChargePeriodApplicable",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(26,y,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function y(e,t){return t.buffer.push("\r\n        "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.Select",{hash:{label:"~locale.manageviewing:deviceInfo.chargePeriod~",contentBinding:"chargePeriodlst",valueBinding:"upgradeOrDowngradeModel.chargePeriod",optionLabelPath:"content.value",optionValuePath:"content.key",class:"info-heading"},hashTypes:{label:"STRING",contentBinding:"STRING",valueBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",class:"STRING"},hashContexts:{label:e,contentBinding:e,valueBinding:e,optionLabelPath:e,optionValuePath:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),""}function w(e,t){var o;return t.buffer.push("\r\n        "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{label:"~locale.manageviewing:upgradeOrDowngrade.date~",valueBinding:"upgradeOrDowngradeModel.dateForChangePackage",disabledBinding:"datePickerDisable",validatorBinding:"validators.dateForChangePackageValidator"},hashTypes:{label:"STRING",valueBinding:"STRING",disabledBinding:"STRING",validatorBinding:"STRING"},hashContexts:{label:e,valueBinding:e,disabledBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),o=a.if.call(e,"showSTSPackages",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(29,I,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function I(e,t){return t.buffer.push("\r\n        "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.Select",{hash:{label:"Short term subscription viewing periods",prompt:"Short Term Subscription",valueBinding:"upgradeOrDowngradeModel.selectedShortTermSubscriptionId",contentBinding:"shortTermSubscriptionPackages",optionLabelPath:"content.value",optionValuePath:"content.key",disableBinding:"disableSTSPackages"},hashTypes:{label:"STRING",prompt:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",disableBinding:"STRING"},hashContexts:{label:e,prompt:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),""}function x(e,t){var o;return t.buffer.push("\r\n        "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:upgradeOrDowngrade.addOn~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        <br />\r\n        \x3c!-- Add on--\x3e\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(32,M,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        \x3c!-- Add on end--\x3e\r\n        "),""}function M(e,t){var o;return t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-2"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:X.noop,fn:X.program(33,T,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-1"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:X.noop,fn:X.program(20,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-1"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:X.noop,fn:X.program(23,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-4"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:X.noop,fn:X.program(36,P,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-4"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:X.noop,fn:X.program(38,O,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function T(e,t){var o;return t.buffer.push("\r\n        "),o=a.each.call(e,"udCurrentAddOn","in","currentAddOnService",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(34,N,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function N(e,t){return t.buffer.push("\r\n        <br />\r\n        "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"udCurrentAddOn"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        <br />\r\n        "),""}function P(e,t){return t.buffer.push("\r\n        "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.Select",{hash:{label:"~locale.manageviewing:upgradeOrDowngrade.to~",prompt:"Select",valueBinding:"upgradeOrDowngradeModel.changeToAddonPackage",disabledBinding:"toAddonDropdownDisable",contentBinding:"changeToAddOnPackageList",optionLabelPath:"content.Value",optionValuePath:"content"},hashTypes:{label:"STRING",prompt:"STRING",valueBinding:"STRING",disabledBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{label:e,prompt:e,valueBinding:e,disabledBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),""}function O(e,t){return t.buffer.push("\r\n        "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{label:"~locale.manageviewing:upgradeOrDowngrade.date~",valueBinding:"upgradeOrDowngradeModel.dateForChangeAddonPackage",disabledBinding:"addondatePickerDisable",validatorBinding:"validators.dateForChangeAddonPackageValidator"},hashTypes:{label:"STRING",valueBinding:"STRING",disabledBinding:"STRING",validatorBinding:"STRING"},hashContexts:{label:e,valueBinding:e,disabledBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),""}function B(e,t){var o;return t.buffer.push("\r\n        "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:upgradeOrDowngrade.access~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        <br />\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(41,R,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        \x3c!--<Access label end>--\x3e\r\n        "),""}function R(e,t){var o;return t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-2"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:X.noop,fn:X.program(42,k,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-1"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:X.noop,fn:X.program(20,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-1"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:X.noop,fn:X.program(23,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-4"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:X.noop,fn:X.program(45,K,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-4"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:X.noop,fn:X.program(47,G,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function k(e,t){var o;return t.buffer.push("\r\n        "),o=a.each.call(e,"udAccessService","in","currentAccessService",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(43,A,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function A(e,t){return t.buffer.push("\r\n        <br />\r\n        "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"udAccessService"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        <br />\r\n        "),""}function K(e,t){return t.buffer.push("\r\n        "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.Select",{hash:{label:"~locale.manageviewing:upgradeOrDowngrade.to~",prompt:"Select",valueBinding:"upgradeOrDowngradeModel.changeToAccessPackage",disabledBinding:"toAccessDropdownDisable",contentBinding:"changeToAccessPackageList",optionLabelPath:"content.Value",optionValuePath:"content"},hashTypes:{label:"STRING",prompt:"STRING",valueBinding:"STRING",disabledBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{label:e,prompt:e,valueBinding:e,disabledBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),""}function G(e,t){return t.buffer.push("\r\n        "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{label:"~locale.manageviewing:upgradeOrDowngrade.date~",valueBinding:"upgradeOrDowngradeModel.dateForChangeAccessPackage",disabledBinding:"accessdatePickerDisable",validatorBinding:"validators.dateForChangeAccessPackageValidator"},hashTypes:{label:"STRING",valueBinding:"STRING",disabledBinding:"STRING",validatorBinding:"STRING"},hashContexts:{label:e,valueBinding:e,disabledBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),""}function L(e,t){var o,s;t.buffer.push(Y((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:upgradeOrDowngrade.quote",s):z.call(e,"loc","locale.manageviewing:upgradeOrDowngrade.quote",s))))}function E(e,t){var o,s;t.buffer.push(Y((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:upgradeOrDowngrade.refresh",s):z.call(e,"loc","locale.manageviewing:upgradeOrDowngrade.refresh",s))))}function V(e,t){var o;return t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:upgradeOrDowngrade.quoteSummary~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:e,isCollapsed:e},inverse:X.noop,fn:X.program(54,H,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n\r\n        <br />\r\n        <div style="float:right;">\r\n            '),o=a.if.call(e,"upgradeOrDowngradeModel.isFundsAvailable",{hash:{},hashTypes:{},hashContexts:{},inverse:X.program(63,q,t),fn:X.program(56,F,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n        </div>\r\n        "),""}function H(e,t){return t.buffer.push("\r\n\r\n        "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.DataGrid",{hash:{canSort:!0,pageSize:10,performsValidation:!1,canDelete:!1,canEdit:!1,canSelect:!0,contentBinding:"upgradeOrDowngradeModel.quoteSummary",columnsBinding:"dataGridColumnsQuoteSummary",selectedItemBinding:"upgradeOrDowngradeModel.quoteSummarySelectedItem",commandItemBinding:"upgradeOrDowngradeModel.quoteSummaryCommandItem",commandItemTypeBinding:"upgradeOrDowngradeModel.quoteSummaryCommandItemType",showFooter:!0,footersBinding:"dataGridFooters"},hashTypes:{canSort:"BOOLEAN",pageSize:"INTEGER",performsValidation:"BOOLEAN",canDelete:"BOOLEAN",canEdit:"BOOLEAN",canSelect:"BOOLEAN",contentBinding:"STRING",columnsBinding:"STRING",selectedItemBinding:"STRING",commandItemBinding:"STRING",commandItemTypeBinding:"STRING",showFooter:"BOOLEAN",footersBinding:"STRING"},hashContexts:{canSort:e,pageSize:e,performsValidation:e,canDelete:e,canEdit:e,canSelect:e,contentBinding:e,columnsBinding:e,selectedItemBinding:e,commandItemBinding:e,commandItemTypeBinding:e,showFooter:e,footersBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n\r\n\r\n        <div style="float:right;">\r\n            <b style="color:#0082be;">\r\n                '),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:upgradeOrDowngrade.totalAmountRequired~",class:"quoteTotalCss"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"upgradeOrDowngradeModel.totalAmountRequired",class:"quoteTotalCss"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            </b>\r\n        </div>\r\n        <br />\r\n        "),""}function F(e,t){var o;return t.buffer.push("\r\n            <table>\r\n                <tr>\r\n                    <td> "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"completePackageChange",visibleBinding:"completePackageVisible",disabledBinding:"completePackageDisable"},hashTypes:{action:"STRING",visibleBinding:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,visibleBinding:e,disabledBinding:e},inverse:X.noop,fn:X.program(57,U,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" &nbsp;&nbsp;</td>\r\n                    <td>"),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"preActivate",visibleBinding:"preActivateVisible",disabledBinding:"preActivateDisable"},hashTypes:{action:"STRING",visibleBinding:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,visibleBinding:e,disabledBinding:e},inverse:X.noop,fn:X.program(59,_,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" &nbsp;&nbsp;</td>\r\n                    <td> "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"rejectQuote"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:X.noop,fn:X.program(61,Q,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                </tr>\r\n            </table>\r\n            "),""}function U(e,t){var o,s;t.buffer.push(Y((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:upgradeOrDowngrade.completePackageChange",s):z.call(e,"loc","locale.manageviewing:upgradeOrDowngrade.completePackageChange",s))))}function _(e,t){var o,s;t.buffer.push(Y((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:upgradeOrDowngrade.preActivate",s):z.call(e,"loc","locale.manageviewing:upgradeOrDowngrade.preActivate",s))))}function Q(e,t){var o,s;t.buffer.push(Y((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:upgradeOrDowngrade.rQuote",s):z.call(e,"loc","locale.manageviewing:upgradeOrDowngrade.rQuote",s))))}function q(e,t){var o;return t.buffer.push("\r\n            "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"completePackageChange",disabledBinding:"completePackageDisable",visibleBinding:"completePackageVisible"},hashTypes:{action:"STRING",disabledBinding:"STRING",visibleBinding:"STRING"},hashContexts:{action:e,disabledBinding:e,visibleBinding:e},inverse:X.noop,fn:X.program(57,U,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"payViaDebitOrder",visibleBinding:"payNowDOVisible",disabledBinding:"adHocDebitOrderButton"},hashTypes:{action:"STRING",visibleBinding:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,visibleBinding:e,disabledBinding:e},inverse:X.noop,fn:X.program(64,$,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"payNow",visibleBinding:"payNowVisible"},hashTypes:{action:"STRING",visibleBinding:"STRING"},hashContexts:{action:e,visibleBinding:e},inverse:X.noop,fn:X.program(66,j,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"preActivate",visibleBinding:"preActivateVisible",disabledBinding:"preActivateDisable"},hashTypes:{action:"STRING",visibleBinding:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,visibleBinding:e,disabledBinding:e},inverse:X.noop,fn:X.program(59,_,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"rejectQuote"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:X.noop,fn:X.program(61,Q,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),""}function $(e,t){var o,s;t.buffer.push(Y((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:upgradeOrDowngrade.payViaAdhocDebitOrder",s):z.call(e,"loc","locale.manageviewing:upgradeOrDowngrade.payViaAdhocDebitOrder",s))))}function j(e,t){var o,s;t.buffer.push(Y((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:upgradeOrDowngrade.payNow",s):z.call(e,"loc","locale.manageviewing:upgradeOrDowngrade.payNow",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var J,z=a.helperMissing,Y=this.escapeExpression,X=this;return s.buffer.push("<div>\r\n\r\n    "),J=a.if.call(t,"upgradeOrDowngradeModel.isHolidayHome",{hash:{},hashTypes:{},hashContexts:{},inverse:X.program(4,i,s),fn:X.program(1,r,s),contexts:[t],types:["ID"],data:s}),(J||0===J)&&s.buffer.push(J),s.buffer.push("\r\n\r\n    <div>\r\n        "),J=a.if.call(t,"upgradeOrDowngradeModel.isHolidayHome",{hash:{},hashTypes:{},hashContexts:{},inverse:X.program(11,u,s),fn:X.program(9,d,s),contexts:[t],types:["ID"],data:s}),(J||0===J)&&s.buffer.push(J),s.buffer.push("\r\n\r\n        "),J=a.if.call(t,"upgradeOrDowngradeModel.isChangePackageVisible",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(14,m,s),contexts:[t],types:["ID"],data:s}),(J||0===J)&&s.buffer.push(J),s.buffer.push("\r\n        \x3c!--Quote Summary --\x3e\r\n        "),J=a.if.call(t,"upgradeOrDowngradeModel.isQuoteSummaryVisible",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(53,V,s),contexts:[t],types:["ID"],data:s}),(J||0===J)&&s.buffer.push(J),s.buffer.push("\r\n    </div>\r\n</div>"),""}),Komodo.Models.ScheduledChangesModel=Ember.Object.extend({init:function(){this.scheduledChangesDetails=[],this._super()}}),Komodo.Models.ScheduledChangesDetails=Ember.Object.extend({init:function(){this.scheduleId=void 0,this.event=void 0,this.details=void 0,this.creationDate=void 0,this.scheduledDate=void 0,this.reason=void 0,this.effectiveDate=void 0,this.createdBy=void 0,this.eventId=void 0,this._super()}}),Komodo.Models.SearchPromptModel=Ember.Object.extend({init:function(){this.customerUID=void 0,this._super()}}),Komodo.Models.SetToStolenModel=Ember.Object.extend({init:function(){this.swapData=[],this.productData=[],this.deviceData=[],this.pairing=[],this._super(),this.error=void 0,this.deviceSerialNo=void 0,this.LinkedSC=void 0,this.confirmDeviceLbl=void 0,this.ConfirmedSerialNo=void 0,this.ConfirmedModel=void 0,this.SelectedModel=void 0,this.SelectedProduct=void 0,this.OldModel=void 0,this.OldSerial=void 0,this.BoolSwapTypeButton=!0,this.BoolAcceptQuoteButton=!0,this.BoolConfirmSwapButton=!0,this.PairedDevice=void 0,this.DecoderSr=void 0,this.SmartCardSr=void 0,this.SmartCardModel=void 0,this.DecoderModel=void 0,this.DecoderProduct=void 0,this.SmartCardProduct=void 0,this.CaseDate=void 0,this.DDCCSwapFlag=!1,this.boundUpperDate=void 0,this.caseNumber=void 0,this.claimNr=void 0,this.policeStation=void 0,this.confirmDevice=void 0,this.confirmDeviceLbl=void 0,this.boolPairedDevice=void 0,this.LinkSmartcard=void 0,this.commercialSerialNumber=null}}),Komodo.Models.SupervisorApprovalModel=Ember.Object.extend({init:function(){this.supervisorUsername="",this.passCode="",this.disableAction=!1,this._super()}}),Komodo.Models.SwapMaterialAvailabilityModel=Ember.Object.extend({init:function(){this._super(),this.swapData=[],this.deviceData=[],this.pairing=[],this.FaultyModel=void 0,this.FaultyProduct=void 0,this.countryCode=void 0,this.phone=void 0,this.email=void 0,this.firstName=void 0,this.lastName=void 0,this.ConfirmedSerialNo=void 0,this.ConfirmedModel=void 0,this.SelectedModel=void 0,this.SelectedProduct=void 0,this.OldModel=void 0,this.OldSerial=void 0,this.BoolSwapTypeButton=!0,this.BoolAcceptQuoteButton=!0,this.PairedDevice="No linked device",this.DecoderSr=void 0,this.SmartCardSr=void 0,this.SmartCardModel=void 0,this.DecoderModel=void 0,this.DecoderProduct=void 0,this.SmartCardProduct=void 0,this.Reason="",this.Category="",this.confirmDevice="",this.confirmDeviceLbl="",this.communicationLanguage=null,this.communicationType=null,this.LinkSmartcard=void 0,this.boolPairedDevice=!1,this.commercialSerialNumber=null,this.enablePairedDevice=!0,this.customerUID=void 0,this.countryISO=void 0,this.SAGridData=[],this.SwapMaterialAvailabilityData=[],this.hasSelectedSwapMaterial=!0,this.hardwareLocation=void 0,this.selectedDeviceGridItemType=void 0,this.quoteData=[],this.businessUnit=null,this.checkAvailabilityDefaults()},cannotOverrideCharge:function(){return!this.get("hasCharge")||this.get("chargeOverrideApproved")||this.get("showGenerateSwapQuote")}.property("chargeOverrideApproved","hasCharge","showGenerateSwapQuote"),checkAvailabilityDefaults:function(){
this.set("boolAcceptQuoteView",!1),this.set("showQuoteDetails",!1),this.set("QuoteNumber","No quote generated"),this.set("QuoteStatus","---"),this.get("quoteData").clear(),this.set("isSendQuotationVisible",!1),this.set("showGenerateSwapQuote",!0),this.set("showMakePayment",!1),this.set("hasCharge",!1),this.set("chargeOverrideApproved",!1),this.set("chargeOverrideComment",void 0)}}),Komodo.Models.UpgradeOrDowngradeModel=Ember.Object.extend({init:function(){this.smartcards=void 0,this.quoteSummary=[],this.totalAmountRequired=void 0,this.changeToPackage=void 0,this.dateForChangePackage=void 0,this.isFundsAvailable=!1,this.isQuoteSummaryVisible=!1,this.isChangePackageVisible=!1,this.scnotes=void 0,this.myVar=null,this.quoteSummaryCommandItemType=void 0,this.quoteSummaryCommandItem=void 0,this.quoteSummarySelectedItem=void 0,this.principalCudDate=void 0,this.smartCardInformation=void 0,this.addOnVisibility=!0,this.acessVisibility=!0,this.isHolidayHome=!1,this.annualSmartcards=[],this.cancelHDAddonForUpDowngrade=void 0,this.dppArray=[],this.dppAddonAccess=void 0,this.dppPrinciArray=[],this.dppPrinc=void 0,this.dateForDowngrade=void 0,this.principalServiceList=[],this.isScheduledChangesExist=!1,this.isDeleteScheduleAllowed=!1,this.deleteScheduleList=[],this.scheduledChangesList=[],this.selctedProductIds=[],this._super()}}),Komodo.Models.QuoteSummaryModel=Ember.Object.extend({init:function(){this.status=void 0,this.smartcardNumber=void 0,this.fromPackage=void 0,this.toPackage=void 0,this.amountRequired=void 0,this.quoteId=void 0,this.invoiceText=void 0,this.startDate=void 0,this.tax=void 0,this.noOfUnits=void 0,this.endDate=void 0,this.lineItemId=void 0,this.balanceAvailable=void 0,this.currencyMnemonic=void 0,this.quoteStatus=void 0,this._super()}}),Komodo.Models.ViewingLocationModel=Ember.Object.extend({init:function(){this._super(),this.paymentGroup=void 0,this.location=void 0,this.accountId=void 0,this.addressTypeKey=void 0,this.addressTypeValue=void 0,this.isPrimary=void 0,this.isPrimaryString=void 0,this.IsMarketingEnabled=void 0,this.country=void 0,this.province=void 0,this.city=void 0,this.suburb=void 0,this.postalCode=void 0,this.unit=void 0,this.building=void 0,this.streetNo=void 0,this.streetName=void 0,this.privateBag=void 0,this.billing=void 0,this.countryCanonicalKey=void 0,this.provinceCanonicalKey=void 0,this.cityCanonicalKey=void 0,this.suburbCanonicalKey=void 0,this.countryKey=void 0,this.paymentDetailAsMainLocation=void 0,this.methodOfPayment=void 0,this.payerName=void 0,this.payerID=void 0,this.accountType=void 0,this.bank=void 0,this.branchCode=void 0,this.accountNo=void 0,this.debitOrderDay=void 0,this.paymentGroupVatNumber=void 0,this.email=void 0,this.accounts=[],this.paymentGroups=[]}}),Komodo.Models.PaymentGroupDataGridModel=Ember.Object.extend({init:function(){this._super(),this.accountNumber="",this.paymentGroup="",this.addressType="",this.addressString="",this.isPrimaryString="",this.isDefault=void 0}}),Ember.TEMPLATES.IssueHardwareAgainstSwapAvailabilityView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n    "),o=a.if.call(e,"useQuoteDropDown",{hash:{},hashTypes:{},hashContexts:{},inverse:D.program(4,i,t),fn:D.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"searchQuoteSwap"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:D.noop,fn:D.program(6,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function n(e,t){return t.buffer.push("\r\n    "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.Select",{hash:{label:"~locale.manageStock:issueHardwareAgainstSwapAvailability.quoteNumber~",prompt:"~locale.manageStock:issueHardwareAgainstSwapAvailability.sQuoteNumber~",valueBinding:"rcModelData.quoteNumber",contentBinding:"quotenumberslst",optionLabelPath:"content.UID",optionValuePath:"content.UID",validatorBinding:"validators.quoteNumberValidator",disabledBinding:"quoteInputBox"},hashTypes:{label:"STRING",prompt:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{label:e,prompt:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function i(e,t){return t.buffer.push("\r\n    "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.TextField",{hash:{label:"~locale.manageStock:issueHardwareAgainstSwapAvailability.quoteNumber~",valueBinding:"rcModelData.quoteNumber",validationBinding:"rcModelData.quoteNumber.error",validatorBinding:"validators.quoteNumberValidator",disabledBinding:"quoteInputBox"},hashTypes:{label:"STRING",valueBinding:"STRING",validationBinding:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{label:e,valueBinding:e,validationBinding:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function c(e,t){var o,s;return t.buffer.push("\r\n    "),t.buffer.push(C((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:issueHardwareAgainstSwapAvailability.retrieveQuote",s):S.call(e,"loc","locale.manageStock:issueHardwareAgainstSwapAvailability.retrieveQuote",s)))),t.buffer.push("\r\n    "),""}function l(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageStock:issueHardwareAgainstSwapAvailability.issueStock~",isCollapsedBinding:"data.isSelectHardware"},hashTypes:{title:"STRING",isCollapsedBinding:"STRING"},hashContexts:{title:e,isCollapsedBinding:e},inverse:D.noop,fn:D.program(9,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function d(e,t){var o;return t.buffer.push('\r\n    <br/>\r\n    <table width="100%">\r\n      <tbody>\r\n      <tr>\r\n        <td>'),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:issueHardwareAgainstSwapAvailability.faultyDevice~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n        <td>"),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:issueHardwareAgainstSwapAvailability.faultySerialNumber~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n        <td>"),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:issueHardwareAgainstSwapAvailability.replacementDevice~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n        <td>"),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:issueHardwareAgainstSwapAvailability.replacementSerialNumber~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n      </tr>\r\n      "),o=a.each.call(e,"replDeviceInfo","in","rcModelData.modelsAndDevices",{hash:{},hashTypes:{},hashContexts:{},inverse:D.noop,fn:D.program(10,u,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </tbody>\r\n    </table>\r\n    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"IssueHardwareSwap"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:D.noop,fn:D.program(16,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function u(e,t){var o;return t.buffer.push("\r\n      <tr>\r\n        "),o=a.if.call(e,"replDeviceInfo.serialized",{hash:{},hashTypes:{},hashContexts:{},inverse:D.program(14,g,t),fn:D.program(11,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </tr>\r\n        "),""}function h(e,t){var o;return t.buffer.push("\r\n          <td>"),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"replDeviceInfo.faultyDevice"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n          <td>\r\n              "),o=a.if.call(e,"replDeviceInfo.displayFaultySerial",{hash:{},hashTypes:{},hashContexts:{},inverse:D.noop,fn:D.program(12,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </td>\r\n          <td>"),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"replDeviceInfo.replacementDevice"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n          <td>"),t.buffer.push(C(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"replDeviceInfo.replacementSerial"},hashTypes:{valueBinding:"STRING"},hashContexts:{valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n        "),""}function m(e,t){return t.buffer.push("\r\n              "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"replDeviceInfo.faultySerial"},hashTypes:{valueBinding:"STRING"},hashContexts:{valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n              "),""}function g(e,t){return t.buffer.push("\r\n          <td></td>\r\n          <td></td>\r\n          <td>"),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"replDeviceInfo.replacementDevice"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n          <td>"),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"replDeviceInfo.quantity"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n        "),""}function p(e,t){var o,s;return t.buffer.push("\r\n    "),t.buffer.push(C((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:issueHardwareAgainstSwapAvailability.issueHardware",s):S.call(e,"loc","locale.manageStock:issueHardwareAgainstSwapAvailability.issueHardware",s)))),t.buffer.push("\r\n    "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var v,f,b,C=this.escapeExpression,S=a.helperMissing,D=this;return s.buffer.push('<div class="no-banner-padding">\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(C((f=a.loc||t&&t.loc,b={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},f?f.call(t,"locale.manageStock:issueHardwareAgainstSwapAvailability.title",b):S.call(t,"loc","locale.manageStock:issueHardwareAgainstSwapAvailability.title",b)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/manageStock">&lt;BACK</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr />\r\n  <div>\r\n    '),v=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageStock:issueHardwareAgainstSwapAvailability.findIssuedStock~",isCollapsedBinding:"data.isSelectHardware"},hashTypes:{title:"STRING",isCollapsedBinding:"STRING"},hashContexts:{title:t,isCollapsedBinding:t},inverse:D.noop,fn:D.program(1,r,s),contexts:[t],types:["ID"],data:s}),(v||0===v)&&s.buffer.push(v),s.buffer.push("\r\n\r\n    "),v=a.if.call(t,"rcModelData.modelsAndDevices.length",{hash:{},hashTypes:{},hashContexts:{},inverse:D.noop,fn:D.program(8,l,s),contexts:[t],types:["ID"],data:s}),(v||0===v)&&s.buffer.push(v),s.buffer.push("\r\n  </div>\r\n</div>\r\n"),""}),Komodo.Application.ManageViewingRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"manageViewing",useCaseDisplayName:kl.value("locale.manageviewing:general.manageViewTile"),renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("manageViewing",{controller:"manageViewing"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageviewing:general.manageViewTile"),Komodo.Services.eventAggregator.subscribe("RedirectToManageViewing",function(){Komodo.Services.uiService.transitionTo("manageViewing")}),Komodo.Services.eventAggregator.subscribe("deviceInfoRedirect",function(){Komodo.Services.navigationService.activateGroup({groupName:Komodo.NavigationGroupNames.ManageViewing,useCaseName:"deviceInfo"}),Komodo.Services.uiService.getRoute("application").transitionTo("deviceInfo")}),this._super()}}),Komodo.UI.Route.registerRoutes(function(){this.resource("manageViewing"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"manageViewing",title:kl.value("locale.manageviewing:general.manageViewTile"),type:Komodo.NavigationTypes.HomeTile,display:!1,imageurl:"Content/Images/Home/ManageViewing.svg",desiredLocation:3,conditionalCallback:function(e){if(Komodo.Services.ProductAndServiceMaintenanceHelper.create().isCustomerIdIsAvailableToRetriveData()){var t=Komodo.Services.customerProfileService.getCustomerPersonalDetail();return void 0!=t&&("commercial"==t.customerClass.toLowerCase()||"1"==t.customerClass||"national deal"==t.customerClass.toLowerCase()||"9"==t.customerClass?(Komodo.Services.eventAggregator.publish(Komodo.EventNames.customTypeChanged,"commercial"),Komodo.Services.uiService.transitionTo("commercialManageViewing")):"csi"==t.customerClass.toLowerCase()||"4"==t.customerClass?(Komodo.Services.eventAggregator.publish(Komodo.EventNames.customTypeChanged,"csi"),Komodo.Services.uiService.transitionTo("csiManageViewing")):("specialist"==t.customerClass.toLowerCase()||"3"==t.customerClass?Komodo.Services.eventAggregator.publish(Komodo.EventNames.customTypeChanged,"specialist"):"residential"!=t.customerClass.toLowerCase()&&"2"!=t.customerClass||Komodo.Services.eventAggregator.publish(Komodo.EventNames.customTypeChanged,"residential"),Komodo.Services.uiService.transitionTo("manageViewing"))),!1}Komodo.Services.uiService.showModalPopup(kl.value("locale.manageviewing:general.customerProfilePopup"),"searchPrompt",{closeCallback:function(){Komodo.Services.uiService.getController("searchPrompt").set("searchPromptModel.customerUID",void 0),Komodo.Services.uiService.transitionTo("home")},canUserClose:!0,shouldStartAndStopController:!1});return!1}}),this.resource("deviceInfo"),this.resource("upgradeOrDowngrade"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"upgradeOrDowngrade",title:kl.value("locale.manageviewing:upgradeOrDowngrade.upgradeOrDowngrade"),desiredLocation:2}),this.resource("disconnect"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"disconnect",title:kl.value("locale.manageviewing:disconnect.disconnectTitle"),desiredLocation:3}),this.resource("reconnect"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"reconnect",title:kl.value("locale.manageviewing:reconnect.reconnectTitle"),desiredLocation:4}),this.resource("cancelPackages"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"cancelPackages",title:kl.value("locale.manageviewing:disconnect.cancelPackages"),type:Komodo.NavigationTypes.Normal,desiredLocation:5}),this.resource("createRepairsOrder"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"createRepairsOrder",title:kl.value("locale.manageviewing:disconnect.repairs"),desiredLocation:5}),this.resource("dccClaims"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"dccClaims",title:kl.value("locale.manageviewing:dccClaims.useCaseTitle"),desiredLocation:6}),this.resource("dccClaimDetails"),this.resource("setToStolen"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"setToStolen",title:kl.value("locale.manageviewing:disconnect.stolenDevice"),desiredLocation:8}),this.resource("recoverStolenDevice"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"recoverStolenDevice",title:kl.value("locale.manageviewing:recoverStolenDevice.useCaseTitle"),desiredLocation:8}),this.resource("performSwap"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"performSwap",title:kl.value("locale.manageviewing:disconnect.swap"),desiredLocation:9}),this.resource("swapMaterialAvailability"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"swapMaterialAvailability",title:kl.value("locale.manageviewing:disconnect.swapMaterialAvailability"),desiredLocation:9}),this.resource("cancelServiceOrder"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"cancelServiceOrder",title:kl.value("locale.manageviewing:disconnect.cancelServiceOrder"),desiredLocation:10}),this.resource("confirmSwap"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"confirmSwap",title:kl.value("locale.manageviewing:disconnect.confirmSwap"),desiredLocation:10}),this.resource("confirmSwapAvailability"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"confirmSwapAvailability",title:kl.value("locale.manageviewing:disconnect.confirmSwapAvailability"),desiredLocation:10}),this.resource("changeDeviceOwnership"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"changeDeviceOwnership",title:kl.value("locale.manageviewing:disconnect.changeOfOwnership"),desiredLocation:11}),this.resource("linkDelink"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"linkDelink",title:kl.value("locale.manageviewing:disconnect.changeDevice"),desiredLocation:12}),this.resource("deviceAgreementManagement"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"deviceAgreementManagement",title:kl.value("locale.manageviewing:disconnect.deviceAgreementManagement"),desiredLocation:13}),this.resource("returns"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"returns",title:kl.value("locale.manageviewing:disconnect.returns"),desiredLocation:14}),this.resource("scheduledChanges"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"scheduledChanges",title:kl.value("locale.manageviewing:disconnect.schedulChanges"),type:Komodo.NavigationTypes.Normal,desiredLocation:16}),this.resource("commercialDeviceInfo"),this.resource("commercialEditViewing"),this.resource("commercialManageViewing"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"commercialManageViewing",title:kl.value("locale.manageviewing:commercial.manageViewTitle"),desiredLocation:21,customType:Komodo.NavigationGroupNames.CustomerSubType.Commercial,display:!1}),this.resource("commercialViewingLocation"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"commercialViewingLocation",title:kl.value("locale.manageviewing:commercial.viewLoactionTitle"),desiredLocation:22,customType:Komodo.NavigationGroupNames.CustomerSubType.Commercial,display:!1}),this.resource("commercialErrorCodes"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"commercialErrorCodes",title:kl.value("locale.manageviewing:commercial.clearErrorCodeTitle"),desiredLocation:23,customType:Komodo.NavigationGroupNames.CustomerSubType.Commercial,display:!1}),this.resource("commercialDisconnect"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"commercialDisconnect",title:kl.value("locale.manageviewing:commercial.disconnectTitle"),desiredLocation:24,customType:Komodo.NavigationGroupNames.CustomerSubType.Commercial,display:!1}),this.resource("commercialReconnect"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"commercialReconnect",title:kl.value("locale.manageviewing:commercial.reconnectTitle"),desiredLocation:25,customType:Komodo.NavigationGroupNames.CustomerSubType.Commercial,display:!1}),this.resource("bulkChangeDeviceOwnership"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"bulkChangeDeviceOwnership",title:kl.value("locale.manageviewing:commercial.bulkChangeOfOwnership"),desiredLocation:26,customType:Komodo.NavigationGroupNames.CustomerSubType.Commercial,display:!1}),this.resource("csiDeviceInfo"),this.resource("csiEditViewing"),this.resource("csiManageViewing"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"csiManageViewing",title:kl.value("locale.manageviewing:csi.manageViewTitle"),desiredLocation:27,customType:Komodo.NavigationGroupNames.CustomerSubType.Csi,display:!1}),this.resource("csiViewingLocation"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"csiViewingLocation",title:kl.value("locale.manageviewing:csi.viewLoactionTitle"),desiredLocation:28,customType:Komodo.NavigationGroupNames.CustomerSubType.Csi,display:!1}),this.resource("csiErrorCodes"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"csiErrorCodes",title:kl.value("locale.manageviewing:csi.clearErrorCodeTitle"),desiredLocation:29,customType:Komodo.NavigationGroupNames.CustomerSubType.Csi,display:!1}),this.resource("csiDisconnect"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"csiDisconnect",title:kl.value("locale.manageviewing:csi.disconnectTitle"),desiredLocation:30,customType:Komodo.NavigationGroupNames.CustomerSubType.Csi,display:!1}),this.resource("csiReconnect"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"csiReconnect",title:kl.value("locale.manageviewing:csi.reconnectTitle"),desiredLocation:31,customType:Komodo.NavigationGroupNames.CustomerSubType.Csi,display:!1}),this.resource("boxOffice"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"boxOffice",title:"BoxOffice",desiredLocation:17}),this.resource("invalidPackages"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"invalidPackages",title:kl.value("locale.manageviewing:invalidPackages.invalidPackagesTitle"),desiredLocation:18}),this.resource("deviceLink"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"deviceLink",title:kl.value("locale.manageviewing:deviceLink.useCaseTitle"),desiredLocation:19}),this.resource("holidayHomes"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"holidayHomes",title:kl.value("locale.manageviewing:holidayHomes.useCaseTitle"),desiredLocation:32}),this.resource("changeResidenceType"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"changeResidenceType",title:kl.value("locale.manageviewing:changeResidenceType.useCaseTitle"),desiredLocation:34}),this.resource("addGraceDays"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"addGraceDays",title:kl.value("locale.manageviewing:addGraceDays.useCaseTitle"),desiredLocation:35})}),Komodo.Application.InvalidPackagesRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"invalidPackages",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("invalidPackages",{controller:"invalidPackages"})},init:function(){this.useCaseDisplayName="Invalid Packages",this._super()}}),Komodo.Application.CreateRepairsOrderRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"createRepairsOrder",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("createRepairsOrder",{controller:"createRepairsOrder"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageviewing:disconnect.createRepairsOrder"),this._super()}}),Komodo.Application.DccClaimsRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"dccClaims",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("dccClaims",{controller:"dccClaims"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageviewing:dccClaims.useCaseTitle"),this._super()}}),Komodo.Application.DccClaimDetailsRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"dccClaimDetails",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("dccClaimDetails",{controller:"dccClaimDetails"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageviewing:dccClaims.dccTitle"),this._super()}}),Komodo.Application.SetToStolenRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"setToStolen",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("setToStolen",{controller:"setToStolen"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageviewing:disconnect.setDevice"),this._super()}}),Komodo.Application.RecoverStolenDeviceRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"recoverStolenDevice",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("recoverStolenDevice",{controller:"recoverStolenDevice"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageviewing:disconnect.recoverStolenDevice"),this._super()}}),Komodo.Application.ReturnsRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"returns",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("returns",{controller:"returns"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageviewing:disconnect.returns"),this._super()}}),Komodo.Application.LinkDelinkRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"linkDelink",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("linkDelink",{controller:"linkDelink"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageviewing:disconnect.linkDelink"),this._super()}}),Komodo.Application.DeviceAgreementManagementRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"deviceAgreementManagement",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("deviceAgreementManagement",{controller:"deviceAgreementManagement"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageviewing:disconnect.deviceAgreementManagement"),this._super()}}),Komodo.Application.PerformSwapRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"performSwap",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("performSwap",{controller:"performSwap"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageviewing:disconnect.cancelServiceOrder"),this._super()}}),Komodo.Application.SwapMaterialAvailabilityRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"swapMaterialAvailability",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("swapMaterialAvailability",{controller:"swapMaterialAvailability"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageviewing:disconnect.performsSwap"),this._super()}}),Komodo.Application.CancelServiceOrderRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"cancelServiceOrder",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("cancelServiceOrder",{controller:"cancelServiceOrder"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageviewing:disconnect.performsSwap"),this._super()}}),Komodo.Application.ConfirmSwapRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"confirmSwap",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("confirmSwap",{controller:"confirmSwap"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageviewing:disconnect.confirmSwap"),this._super()}}),Komodo.Application.ConfirmSwapAvailabilityRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"confirmSwapAvailability",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("confirmSwapAvailability",{controller:"confirmSwapAvailability"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageviewing:disconnect.confirmSwapAvailability"),this._super()}}),Komodo.Application.ChangeDeviceOwnershipRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"changeDeviceOwnership",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("changeDeviceOwnership",{controller:"changeDeviceOwnership"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageviewing:disconnect.changeDeviceOwnership"),this._super()}}),Komodo.Application.BulkChangeDeviceOwnershipRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"bulkChangeDeviceOwnership",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("bulkChangeDeviceOwnership",{controller:"bulkChangeDeviceOwnership"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageviewing:commercial.bulkChangeOfOwnership"),this._super()}}),Komodo.Application.DeviceInfoRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"deviceInfo",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("deviceInfo",{controller:"deviceInfo"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageviewing:disconnect.getDeviceInfo"),this._super()}}),Komodo.Application.ReconnectRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"reconnect",useCaseDisplayName:void 0,renderTemplate:function(){
this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("reconnect",{controller:"reconnect"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageviewing:disconnect.reconnect"),this._super()}}),Komodo.Application.CancelPackagesRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"cancelPackages",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("cancelPackages",{controller:"cancelPackages"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageviewing:disconnect.cancelPackages"),this._super()}}),Komodo.Application.UpgradeOrDowngradeRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"upgradeOrDowngrade",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("upgradeOrDowngrade",{controller:"upgradeOrDowngrade"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageviewing:upgradeOrDowngrade.upgradeOrDowngrade"),this._super()}}),Komodo.Application.DisconnectRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"disconnect",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("disconnect",{controller:"disconnect"})},init:function(){this.useCaseDisplayName="Disconnect",Komodo.Services.eventAggregator.subscribe("redirectToManageViewing",function(){Komodo.Services.navigationService.activateGroup({groupName:Komodo.NavigationGroupNames.ManageViewing,useCaseName:"manageViewing"}),Komodo.Services.uiService.getRoute("application").transitionTo("manageViewing")}),this._super()}}),Komodo.Application.ScheduledChangesRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"scheduledChanges",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("scheduledChanges",{controller:"scheduledChanges"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageviewing:disconnect.schedulChanges"),this._super()}}),Komodo.Application.CommercialManageViewingRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"commercialManageViewing",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("commercialManageViewing",{controller:"commercialManageViewing"})},init:function(){this._super()}}),Komodo.Application.CommercialEditViewingRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"commercialEditViewing",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("commercialEditViewing",{controller:"commercialEditViewing"})},init:function(){this._super()}}),Komodo.Application.CommercialViewingLocationRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"commercialViewingLocation",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("commercialViewingLocation",{controller:"commercialViewingLocation"})},init:function(){this._super()}}),Komodo.Application.CommercialErrorCodesRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"commercialErrorCodes",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("commercialErrorCodes",{controller:"commercialErrorCodes"})},init:function(){this._super()}}),Komodo.Application.CommercialDisconnectRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"commercialDisconnect",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("commercialDisconnect",{controller:"commercialDisconnect"})},init:function(){this._super()}}),Komodo.Application.CommercialReconnectRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"commercialReconnect",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("commercialReconnect",{controller:"commercialReconnect"})},init:function(){this._super()}}),Komodo.Application.CommercialDeviceInfoRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"commercialDeviceInfo",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("commercialDeviceInfo",{controller:"commercialDeviceInfo"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageviewing:disconnect.getCommercialDeviceInfo"),this._super()}}),Komodo.Application.CsiManageViewingRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"csiManageViewing",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("csiManageViewing",{controller:"csiManageViewing"})},init:function(){this._super()}}),Komodo.Application.CsiEditViewingRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"csiEditViewing",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("csiEditViewing",{controller:"csiEditViewing"})},init:function(){this._super()}}),Komodo.Application.CsiViewingLocationRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"csiViewingLocation",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("csiViewingLocation",{controller:"csiViewingLocation"})},init:function(){this._super()}}),Komodo.Application.CsiErrorCodesRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"csiErrorCodes",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("csiErrorCodes",{controller:"csiErrorCodes"})},init:function(){this._super()}}),Komodo.Application.CsiDisconnectRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"csiDisconnect",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("csiDisconnect",{controller:"csiDisconnect"})},init:function(){this._super()}}),Komodo.Application.CsiReconnectRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"csiReconnect",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("csiReconnect",{controller:"csiReconnect"})},init:function(){this._super()}}),Komodo.Application.CsiDeviceInfoRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"csiDeviceInfo",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("csiDeviceInfo",{controller:"csiDeviceInfo"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageviewing:disconnect.getCsiDeviceInfo"),this._super()}}),Komodo.Application.BoxOfficeRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"boxOffice",useCaseDisplayName:void 0,init:function(){this.useCaseDisplayName=kl.value("locale.manageviewing.boxOffice:boxOffice.tile"),this._super()},renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("boxOffice",{controller:"boxOffice"})}}),Komodo.Application.DeviceLinkRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"deviceLink",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("deviceLink",{controller:"deviceLink"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageviewing:deviceLink.useCaseTitle"),this._super()}}),Komodo.Application.HolidayHomesRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"holidayHomes",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("holidayHomes",{controller:"holidayHomes"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageviewing:holidayHomes.useCaseTitle"),this._super()}}),Komodo.Application.ChangeResidenceTypeRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"changeResidenceType",useCaseDisplayName:void 0,renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("changeResidenceType",{controller:"changeResidenceType"})},init:function(){this.useCaseDisplayName=kl.value("locale.manageviewing:changeResidenceType.useCaseTitle"),this._super()}}),Komodo.Application.AddGraceDaysRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"addGraceDays",renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("addGraceDays",{controller:"addGraceDays"})},init:function(){kl.value("locale.manageviewing:addGraceDays.useCaseTitle"),this._super()}}),Komodo.Services.BoxOfficeService=Ember.Object.extend(Komodo.Dependency,{init:function(){this.requiresDependency("_queryService",{singleton:Komodo.Services.queryService})},getQueryService:function(){return this.get("_queryService")},_getJSON:function(e){var t=$.Deferred();return this.getQueryService().getJSON("BoxOffice/"+e).done(function(e){t.resolve(e)}).fail(function(e,a,o){t.reject(o)}),t},fetchProfile:function(e){return Komodo.guard.againstUndefined(e,"customerNumber"),this._getJSON("GetProfile?customerNumber="+e)},fetchTransactionHistory:function(e){return Komodo.guard.againstUndefined(e,"customerNumber"),this._getJSON("GetTransactionHistory?customerNumber="+e)},fetchRentalHistory:function(e){return Komodo.guard.againstUndefined(e,"customerNumber"),this._getJSON("GetRentalHistory?customerNumber="+e)},fetchUnallocatedRentalCodes:function(e){return Komodo.guard.againstUndefined(e,"customerNumber"),this._getJSON("UnallocatedRentalCode?customerNumber="+e)},fetchSectorHistory:function(e,t){return Komodo.guard.againstUndefined(e,"customerNumber"),Komodo.guard.againstUndefined(t,"smartcardNumber"),this._getJSON("GetSectorHistory?customernumber="+e+"&smartCardNumber="+t)}}),Komodo.Services.boxOfficeService=Komodo.Services.BoxOfficeService.create(),Komodo.Services.ManageViewingService=Ember.Object.extend(Komodo.Dependency,{currentFinancialAccounts:void 0,currentCustomerDetails:void 0,currentFinancialTransaction:void 0,currentCustomerInteractions:void 0,personalDetails:void 0,NotifyGetCSILogsMsg:void 0,NotifyGetCSILogsErrorMsg:void 0,disconnectedPackagesError:void 0,disconnectedPackages:void 0,reconnectedPackagesError:void 0,reconnectedPackages:void 0,scheduledChanges:void 0,scheduledChangesError:void 0,packagesForDisconnect:void 0,packagesForDisconnectError:void 0,financialTransactions:void 0,productConstant:void 0,customerConstant:void 0,init:function(){this.set("titles",[]),this.set("languages",[]),this.set("identificationTypes",[]),this.set("addressTypes",[]),this.set("contactDetailTypes",[]),this.set("communicationMethods",[]),this.set("locationInfo",void 0),this.set("householdMemberRelations",[]),this.set("mop",[]),this.set("accountStatus",[]),this.set("householdMemberRelations",[]),this.set("customerStatus",[]),this.set("customerType",[]),this.set("customerClass",[]),this.set("customerNo","505050"),this.set("isBannerOpen",!0),this.requiresDependency("_securityService",{singleton:Komodo.Services.securityService}),this.requiresDependency("_eventAggregator",{singleton:Komodo.Services.eventAggregator}),this.requiresDependency("_featureToggleService",{singleton:Komodo.Services.featureToggleService}),this.requiresDependency("_cachedDataService",{singleton:Komodo.Services.cachedDataService}),this.requiresDependency("_uiService",{singleton:Komodo.Services.uiService}),this.getEventAggregator().subscribe(Komodo.EventNames.applicationInitialized,this,this._configure),this.getEventAggregator().subscribe(Komodo.EventNames.userLoggedIn,this,this._configure),this.fetchConstantDataSetFromAdele("ManageViewingConstants"),this.fetchConstantDataSetFromAdele("ManageCustomerConstants")},publishEvent:function(e,t,a,o){var s=$.Deferred(),r={eventName:a,eventVersion:o,eventValidityInMinutes:0,eventPriority:null};return e.sendMessage(t,r).done(function(){s.resolve()}).fail(function(e,t){Komodo.log("Publish "+a+" Event : failed. Error: "+e),s.fail(e)}),s},retrievedFinancialAccounts:function(e){this.set("currentFinancialAccounts",e)},retrievedCustomerDetails:function(e){this.set("currentCustomerDetails",e)},retrievedFinancialTransaction:function(e){this.set("currentFinancialTransaction",e)},retrieveInteractions:function(e){this.set("currentCustomerInteractions",e)},isFinancialAccountsAvailable:function(){return Komodo.Services.ManageViewingService.currentFinancialAccounts&&Komodo.Services.ManageViewingService.currentFinancialAccounts.ResponseMessage&&Komodo.Services.ManageViewingService.currentFinancialAccounts.ResponseMessage.Payload&&Komodo.Services.ManageViewingService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount&&Komodo.Services.ManageViewingService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account},isFinancialTansactionAvailable:function(){return Komodo.Services.ManageViewingService.currentFinancialTransaction&&Komodo.Services.ManageViewingService.currentFinancialTransaction.ResponseMessage&&Komodo.Services.ManageViewingService.currentFinancialTransaction.ResponseMessage.Payload&&Komodo.Services.ManageViewingService.currentFinancialTransaction.ResponseMessage.Payload.ListOfFinancialTransaction&&Komodo.Services.ManageViewingService.currentFinancialTransaction.ResponseMessage.Payload.ListOfFinancialTransaction.FinancialTransaction},isCustomerDetailsAvailable:function(){return Komodo.Services.ManageViewingService.currentCustomerDetails&&Komodo.Services.ManageViewingService.currentCustomerDetails.ResponseMessage&&Komodo.Services.ManageViewingService.currentCustomerDetails.ResponseMessage.Payload&&Komodo.Services.ManageViewingService.currentCustomerDetails.ResponseMessage.Payload.CustomerDetail},isCustomerInteractionsAvailable:function(){return Komodo.Services.ManageViewingService.currentCustomerInteractions&&Komodo.Services.ManageViewingService.currentCustomerInteractions.ResponseMessage&&Komodo.Services.ManageViewingService.currentCustomerInteractions.ResponseMessage.Payload&&Komodo.Services.ManageViewingService.currentCustomerInteractions.ResponseMessage.Payload.ListOfCase},getCustomerDetails:function(){return jQuery.extend(!0,{},this.currentCustomerDetails)},getFinancialTransactions:function(){return jQuery.extend(!0,{},this.currentFinancialTransaction)},getFinancialAccounts:function(){return jQuery.extend(!0,{},this.currentFinancialAccounts)},setCustomerPersonalDetail:function(e){this.set("personalDetails",e)},getCustomerPersonalDetail:function(){return this.get("personalDetails")},getBannerState:function(){return this.get("isBannerOpen")},setBannerState:function(e){return this.set("isBannerOpen",e)},setNotifyGetCSILogsMsg:function(e){this.set("NotifyGetCSILogsMsg",e)},setNotifyGetCSILogsErrorMsg:function(e){this.set("NotifyGetCSILogsErrorMsg",e)},setDisconnectedPackagesResult:function(e){this.set("disconnectedPackages",e)},setDisconnectedPackagesError:function(e){this.set("disconnectedPackagesError",e)},setPackagesForDisconnectResult:function(e){this.set("packagesForDisconnect",e)},setPackagesForDisconnectError:function(e){this.set("packagesForDisconnectError",e)},setReconnectedPackagesResult:function(e){this.set("reconnectedPackages",e)},setReconnectedPackagesError:function(e){this.set("reconnectedPackagesError",e)},setScheduledChangesResult:function(e){this.set("scheduledChanges",e)},setScheduledChangesError:function(e){this.set("scheduledChangesError",e)},getSecurityService:function(){return this.get("_securityService")},getEventAggregator:function(){return this.get("_eventAggregator")},getFeatureToggleService:function(){return this.get("_featureToggleService")},getCachedDataService:function(){return this.get("_cachedDataService")},getUIService:function(){return this.get("_uiService")},_configure:function(){var e=this;this.getFeatureToggleService().isEnabled("CustomerGlobal","EnableCSICustomer").done(function(t){Ember.run(function(){t||(e.getSecurityService().overrideRouteAccess({routeName:"csiDeviceInfo",permissionType:"HIDE"}),e.getSecurityService().overrideRouteAccess({routeName:"csiEditViewing",permissionType:"HIDE"}),e.getSecurityService().overrideRouteAccess({routeName:"csiManageViewing",permissionType:"HIDE"}),e.getSecurityService().overrideRouteAccess({routeName:"csiViewingLocation",permissionType:"HIDE"}),e.getSecurityService().overrideRouteAccess({routeName:"csiErrorCodes",permissionType:"HIDE"}),e.getSecurityService().overrideRouteAccess({routeName:"csiDisconnect",permissionType:"HIDE"}),e.getSecurityService().overrideRouteAccess({routeName:"csiReconnect",permissionType:"HIDE"}))})})},fetchConstantDataSetFromAdele:function(e){var t=this,a=$.Deferred();return Ember.isEmpty(t.get("productConstant"))||Ember.isEmpty(t.get("customerConstant"))?function(e){t.getCachedDataService().fetch(e,{domain:t.getUIService().getController("application").get("_selectedCountryId"),qualifier:"global"}).done(function(o){t.set("ManageViewingConstants"===e?"productConstant":"customerConstant",o),a.resolve(o)}).fail(function(t){Komodo.error("[CLARITY CONSTANT SERVICE ERROR] : failed to retrieve data for dataset :"+e+"ERROR : "+t),a.reject(t)})}(e):a.resolve(t.get("ManageViewingConstants"===e?"productConstant":"customerConstant")),a},getValueFromConstant:function(e,t){var a=this,o=void 0;try{var s=a.get("ProductsConstants"===e?"productConstant":"customerConstant");Ember.isEmpty(a.get("productConstant"))||Ember.isEmpty(a.get("customerConstant"))?Komodo.error("[CLARITY CONSTANT ERROR] : constant dataset empty: "+e):o=$.grep(s,function(e){return e.key==t})[0].value}catch(e){Komodo.error("[CLARITY CONSTANT ERROR] : failed to retrieve data for "+t+" ERROR: "+e)}return o="null"===o?"":"undefined"===o?void 0:o},destroy:function(){this.getEventAggregator().unsubscribe(Komodo.EventNames.applicationInitialized,this,this._configure),this._super()}}),Komodo.Services.ManageViewingService=Komodo.Services.ManageViewingService.create(),Ember.TEMPLATES.AddGraceDaysView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("  \r\n\t"),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function n(e,t){var o;return t.buffer.push("\r\n\r\n\t\t"),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(6,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),""}function i(e,t){var o;return t.buffer.push("\r\n\t\t\t"),t.buffer.push(x(a.view.call(e,"Komodo.Controls.Select",{hash:{label:"~locale.manageviewing:addGraceDays.accountNumber~",valueBinding:"addGraceDaysModel.SelectedAccount",contentBinding:"addGraceDaysModel.ListOfaccount",optionLabelPath:"content.value",optionValuePath:"content.key"},hashTypes:{label:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{label:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\t\t\t"),o=a.if.call(e,"isAllSmartcardSelectdisabled",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(4,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"addGraceDaysModel.IsAllSmartcardSelect",disabledBinding:"isAllSmartcardSelectdisabled"},hashTypes:{checkedBinding:"STRING",disabledBinding:"STRING"},hashContexts:{checkedBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:addGraceDays.selectAllSmartcards~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function c(e,t){return t.buffer.push("\r\n\t\t\t\t"),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"errorMessage",class:"ember-view error-text"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br/>\r\n      "),""}function l(e,t){return t.buffer.push("\r\n      "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"addGraceDaysModel.MultipleSelectedValues",label:"~locale.manageviewing:addGraceDays.listOfSmartcards~",contentBinding:"lstOfSmartcardsNumbers",optionLabelPath:"content",optionValuePath:"content",size:"5",multiple:"true",disabledBinding:"addGraceDaysModel.IsAllSmartcardSelect",visibleBinding:"isSmartcardPanelVisible"},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",size:"STRING",multiple:"STRING",disabledBinding:"STRING",visibleBinding:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,size:e,multiple:e,disabledBinding:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  \r\n  \x3c!--"),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"addGraceDaysModel.IsAllSmartcardSelect",disabledBinding:"isAllSmartcardSelectdisabled"},hashTypes:{checkedBinding:"STRING",disabledBinding:"STRING"},hashContexts:{checkedBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:addGraceDays.selectAllSmartcards~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("--\x3e\r\n  "),""}function d(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:addGraceDays.addGraceDays~"},hashTypes:{title:"STRING"},hashContexts:{title:e},inverse:M.noop,fn:M.program(9,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n"),""}function u(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(10,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  \r\n \r\n  \r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(16,f,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(19,C,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),""}function h(e,t){var o;return t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-12"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:M.noop,fn:M.program(11,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\t    "),""}function m(e,t){var o;return t.buffer.push('\r\n       <div style="width: 100%">\r\n            '),o=a.each.call(e,"smartcard","in","listOfSelectedSmartcards",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(12,g,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("         \r\n        </div>\r\n  "),""}function g(e,t){var o;return t.buffer.push('\r\n               <div class="add-grace-days-tile">\r\n                 \r\n                 '),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:addGraceDays.smartcardNumber~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" &nbsp;\r\n                 "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"smartcard.SmartcardID",class:"sub-heading"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" <br/> <br/>\r\n\r\n                 "),o=a.each.call(e,"services","in","smartcard.ListOfServices.AddGraceDaysService",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(13,p,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n               </div>\r\n            "),""}function p(e,t){var o;return t.buffer.push('\r\n                   <div style="width: 80%; float: left; display: inline-block; padding-top: 3%;">\r\n                     '),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"services.Description"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('                   \r\n                   </div>\r\n                   <div style="width: 20%; float: left; display: inline-block; padding-top: 3%;"> \r\n                     '),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:addGraceDays.activeLableText~",class:"add-grace-days-lable"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                     \x3c!--"),o=a.view.call(e,"Komodo.Controls.Button",{hash:{class:"btn-success btn-nextto-control",size:"xs",action:"saveCustomerInformation",disabledBinding:"showGraceDaysPanel"},hashTypes:{class:"STRING",size:"STRING",action:"STRING",disabledBinding:"STRING"},hashContexts:{class:e,size:e,action:e,disabledBinding:e},inverse:M.noop,fn:M.program(14,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("--\x3e\r\n                   </div>                 \r\n                 "),""}function v(e,t){var o,s;t.buffer.push(x((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"Active",s):T.call(e,"loc","Active",s))))}function f(e,t){var o;return t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-12"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:M.noop,fn:M.program(17,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function b(e,t){return t.buffer.push("\r\n      <br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.Select",{hash:{label:"~locale.manageviewing:addGraceDays.noOfDays~",valueBinding:"addGraceDaysModel.SelectedGraceDay",prompt:"~locale.manageviewing:addGraceDays.empty~",contentBinding:"maxAddGraceDays",optionLabelPath:"content.value",optionValuePath:"content.key",validatorBinding:"validators.SelectedGraceDayValidator",disabledBinding:"isNoOfDaysDisabled"},hashTypes:{label:"STRING",valueBinding:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{label:e,valueBinding:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function C(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-12"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:M.noop,fn:M.program(20,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\t    "),""}function S(e,t){var o;return t.buffer.push('\r\n  <div style="float:right;">\r\n\t\t\t     '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"addGraceDaysAction",disabledBinding:"isAddGraceDaysDisabled"},hashTypes:{action:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,disabledBinding:e},inverse:M.noop,fn:M.program(21,D,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\t\r\n\t\t\t    </div>\r\n\t    "),""}function D(e,t){var o,s;t.buffer.push(x((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:addGraceDays.addGraceDays",s):T.call(e,"loc","locale.manageviewing:addGraceDays.addGraceDays",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var y,w,I,x=this.escapeExpression,M=this,T=a.helperMissing;return s.buffer.push("<div "),s.buffer.push(x(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(x((w=a.loc||t&&t.loc,I={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},w?w.call(t,"locale.manageviewing:addGraceDays.useCaseTitle",I):T.call(t,"loc","locale.manageviewing:addGraceDays.useCaseTitle",I)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/manageViewing">&lt;'),s.buffer.push(x((w=a.loc||t&&t.loc,I={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},w?w.call(t,"locale.manageviewing:addGraceDays.back",I):T.call(t,"loc","locale.manageviewing:addGraceDays.back",I)))),s.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n\r\n"),y=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:addGraceDays.selectSmartcard~"},hashTypes:{title:"STRING"},hashContexts:{title:t},inverse:M.noop,fn:M.program(1,r,s),contexts:[t],types:["ID"],data:s}),(y||0===y)&&s.buffer.push(y),s.buffer.push("\r\n\r\n  "),y=a.if.call(t,"showGraceDaysPanel",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(8,d,s),contexts:[t],types:["ID"],data:s}),(y||0===y)&&s.buffer.push(y),s.buffer.push("\r\n</div>\r\n"),""}),Ember.TEMPLATES.BoxOfficeQueryView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o,s;t.buffer.push(c((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing.boxOffice:boxoffice.queryPage.entitleType",s):i.call(e,"loc","locale.manageviewing.boxOffice:boxoffice.queryPage.entitleType",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var n,i=a.helperMissing,c=this.escapeExpression,l=this;return s.buffer.push("<div>\r\n  "),s.buffer.push(c(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing.boxOffice:boxoffice.queryPage.confirmCode~"},hashTypes:{
text:"STRING"},hashContexts:{text:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("<br/>\r\n  "),s.buffer.push(c(a.view.call(t,"Komodo.Controls.CoreTextField",{hash:{tabindex:"2",valueBinding:"data.confirmationCode"},hashTypes:{tabindex:"STRING",valueBinding:"STRING"},hashContexts:{tabindex:t,valueBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push(" &nbsp; "),n=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"reEntitleRental",size:"nextto-control"},hashTypes:{action:"STRING",size:"STRING"},hashContexts:{action:t,size:t},inverse:l.noop,fn:l.program(1,r,s),contexts:[t],types:["ID"],data:s}),(n||0===n)&&s.buffer.push(n),s.buffer.push(" &nbsp;\r\n<br/>\r\n  "),s.buffer.push(c(a.view.call(t,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.confirmationCodeValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n</div>\r\n\r\n"),""}),Ember.TEMPLATES.BoxOfficeRentTitleView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:u.noop,fn:u.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:u.noop,fn:u.program(4,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function n(e,t){return t.buffer.push("\r\n  "),t.buffer.push(d(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"1",valueBinding:"data.rentalCode",label:"~locale.manageviewing.boxOffice:boxoffice.rentTitlePage.rentalCode~",validatorBinding:"validators.rentalCodeValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function i(e,t){return t.buffer.push("\r\n\r\n  "),t.buffer.push(d(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"1",valueBinding:"_selectedPhoneNumber",contentBinding:"data.boxOfficePhoneNumbers",label:"~locale.manageviewing.boxOffice:boxoffice.rentTitlePage.phoneNumber~",optionLabelPath:"content.full",optionValuePath:"content",selectionBinding:"_selectedPhoneNumber"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",contentBinding:"STRING",label:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",selectionBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,contentBinding:e,label:e,optionLabelPath:e,optionValuePath:e,selectionBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  <br/>\r\n  "),""}function c(e,t){var o,s;return t.buffer.push("\r\n    "),t.buffer.push(d((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing.boxOffice:boxoffice.rentTitlePage.rentBtn",s):h.call(e,"loc","locale.manageviewing.boxOffice:boxoffice.rentTitlePage.rentBtn",s)))),t.buffer.push("\r\n    "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var l,d=this.escapeExpression,u=this,h=a.helperMissing;return s.buffer.push("<div>\r\n  "),l=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:u.noop,fn:u.program(1,r,s),contexts:[t],types:["ID"],data:s}),(l||0===l)&&s.buffer.push(l),s.buffer.push('\r\n  <br/>\r\n  <div class="float-right">\r\n    '),l=a.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"3",action:"submitRental"},hashTypes:{tabindex:"STRING",action:"STRING"},hashContexts:{tabindex:t,action:t},inverse:u.noop,fn:u.program(6,c,s),contexts:[t],types:["ID"],data:s}),(l||0===l)&&s.buffer.push(l),s.buffer.push("\r\n  </div>\r\n</div>\r\n\r\n"),""}),Ember.TEMPLATES.BoxOfficeSectorView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n        <tr>\r\n          <td>"),o=a._triageMustache.call(e,"item.SmartCardNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n          <td>"),o=a._triageMustache.call(e,"item.ActionDatetime",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n          <td>"),o=a._triageMustache.call(e,"item.CreateSectorStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        </tr>\r\n      "),""}function n(e,t){var o,s;return t.buffer.push("\r\n    "),t.buffer.push(u((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing.boxOffice:boxoffice.sectorPage.createSectorBtn",s):d.call(e,"loc","locale.manageviewing.boxOffice:boxoffice.sectorPage.createSectorBtn",s)))),t.buffer.push("\r\n    "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var i,c,l,d=a.helperMissing,u=this.escapeExpression,h=this;return s.buffer.push('<div class="modal-max-size">\r\n  '),s.buffer.push(u(a.view.call(t,"Komodo.Controls.Select",{hash:{tabindex:"1",valueBinding:"smartcards",contentBinding:"data.listOfSmartCards",label:"~locale.manageviewing.boxOffice:boxoffice.sectorPage.smartcardNumber~",optionLabelPath:"content",optionValuePath:"content",selectionBinding:"_selectedSmartcard"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",contentBinding:"STRING",label:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",selectionBinding:"STRING"},hashContexts:{tabindex:t,valueBinding:t,contentBinding:t,label:t,optionLabelPath:t,optionValuePath:t,selectionBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push('\r\n\r\n  <hr/>\r\n  <br/>\r\n  <p class="sub-heading">'),s.buffer.push(u((c=a.loc||t&&t.loc,l={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},c?c.call(t,"locale.manageviewing.boxOffice:boxoffice.sectorPage.sectorHistoryTitle",l):d.call(t,"loc","locale.manageviewing.boxOffice:boxoffice.sectorPage.sectorHistoryTitle",l)))),s.buffer.push('</p>\r\n  <table id="sectorHistoryTable" class="table table-bordered komodo-datagrid">\r\n    <tr>\r\n        <th>'),s.buffer.push(u((c=a.loc||t&&t.loc,l={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},c?c.call(t,"locale.manageviewing.boxOffice:boxoffice.sectorPage.smartcardNumber",l):d.call(t,"loc","locale.manageviewing.boxOffice:boxoffice.sectorPage.smartcardNumber",l)))),s.buffer.push("</th>\r\n        <th>"),s.buffer.push(u((c=a.loc||t&&t.loc,l={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},c?c.call(t,"locale.manageviewing.boxOffice:boxoffice.sectorPage.historyDate",l):d.call(t,"loc","locale.manageviewing.boxOffice:boxoffice.sectorPage.historyDate",l)))),s.buffer.push("</th>\r\n        <th>"),s.buffer.push(u((c=a.loc||t&&t.loc,l={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},c?c.call(t,"locale.manageviewing.boxOffice:boxoffice.sectorPage.status",l):d.call(t,"loc","locale.manageviewing.boxOffice:boxoffice.sectorPage.status",l)))),s.buffer.push("</th>\r\n      </tr>\r\n      "),i=a.each.call(t,"item","in","data.sectorHistory",{hash:{},hashTypes:{},hashContexts:{},inverse:h.noop,fn:h.program(1,r,s),contexts:[t,t,t],types:["ID","ID","ID"],data:s}),(i||0===i)&&s.buffer.push(i),s.buffer.push("\r\n  </table>\r\n  <br/>\r\n  "),s.buffer.push(u(a.view.call(t,"Komodo.Controls.TablePager",{hash:{tableId:"sectorHistoryTable",contentBinding:"data.sectorHistory",itemsPerPage:"10",headerRows:"1"},hashTypes:{tableId:"STRING",contentBinding:"STRING",itemsPerPage:"STRING",headerRows:"STRING"},hashContexts:{tableId:t,contentBinding:t,itemsPerPage:t,headerRows:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push('\r\n  <br/>\r\n  <div class="float-right">\r\n    '),i=a.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"3",action:"submitSector"},hashTypes:{tabindex:"STRING",action:"STRING"},hashContexts:{tabindex:t,action:t},inverse:h.noop,fn:h.program(3,n,s),contexts:[t],types:["ID"],data:s}),(i||0===i)&&s.buffer.push(i),s.buffer.push("\r\n  </div>\r\n</div>\r\n\r\n"),""}),Ember.TEMPLATES.BoxOfficeTransactionDetailsView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\t"),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(4,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n"),""}function n(e,t){var o;return t.buffer.push("\r\n\t\t"),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing.boxOffice:boxoffice.transactionDetails.transactionDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br/>\r\n\t\t"),o=a._triageMustache.call(e,"data.selectedTransaction.TransactionDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("<br/>\r\n\t\t<br/>\r\n\t\t"),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing.boxOffice:boxoffice.transactionDetails.status~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br/>\r\n\t\t"),o=a._triageMustache.call(e,"data.selectedTransaction.Status",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("<br/>\r\n  <br/>\r\n\t"),""}function i(e,t){var o;return t.buffer.push("\r\n\t\t"),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing.boxOffice:boxoffice.transactionDetails.playlistTitle~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br/>\r\n\t\t"),o=a._triageMustache.call(e,"data.selectedTransaction.PlayListTitle",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("<br/>\r\n\t\t<br/>\r\n\t\t"),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing.boxOffice:boxoffice.transactionDetails.smartcardNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br/>\r\n\t\t"),o=a._triageMustache.call(e,"data.selectedTransaction.SmartCardNr",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("<br/>\r\n\t\t<br/>\r\n\t"),""}function c(e,t){var o;return t.buffer.push("\r\n        <tr>\r\n\t\t\t    <td>"),o=a._triageMustache.call(e,"item.HistoryDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n\t\t\t    <td>"),o=a._triageMustache.call(e,"item.Details",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n\t\t\t    <td>"),o=a._triageMustache.call(e,"item.StatusDescription",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n\t\t    </tr>\r\n        "),""}function l(e,t){var o,s;return t.buffer.push(" "),t.buffer.push(g((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing.boxOffice:boxoffice.transactionDetails.queryTransation",s):v.call(e,"loc","locale.manageviewing.boxOffice:boxoffice.transactionDetails.queryTransation",s)))),t.buffer.push(" "),""}function d(e,t){return t.buffer.push("\r\n\t\t    <hr/>\r\n\t\t    "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing.boxOffice:boxoffice.queryPage.modalHeading~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\t\t    <br/>\r\n        <br/>\r\n\t\t    "),t.buffer.push(g(a.view.call(e,"Komodo.Application.BoxOfficeQueryView",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\t    "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var u,h,m,g=this.escapeExpression,p=this,v=a.helperMissing;return s.buffer.push('<div class="modal-max-size"> \r\n'),u=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(1,r,s),contexts:[t],types:["ID"],data:s}),(u||0===u)&&s.buffer.push(u),s.buffer.push('\r\n\r\n\t    <p class="sub-heading">'),s.buffer.push(g((h=a.loc||t&&t.loc,m={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},h?h.call(t,"locale.manageviewing.boxOffice:boxoffice.transactionDetails.detailsTitle",m):v.call(t,"loc","locale.manageviewing.boxOffice:boxoffice.transactionDetails.detailsTitle",m)))),s.buffer.push('</p>\r\n\t    <table id="boxOfficeDetailsTable" class="table table-bordered komodo-datagrid">\r\n            <tr>\r\n                <th>'),s.buffer.push(g((h=a.loc||t&&t.loc,m={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},h?h.call(t,"locale.manageviewing.boxOffice:boxoffice.transactionDetails.detailsDate",m):v.call(t,"loc","locale.manageviewing.boxOffice:boxoffice.transactionDetails.detailsDate",m)))),s.buffer.push("</th>\r\n                <th>"),s.buffer.push(g((h=a.loc||t&&t.loc,m={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},h?h.call(t,"locale.manageviewing.boxOffice:boxoffice.transactionDetails.detailsInfo",m):v.call(t,"loc","locale.manageviewing.boxOffice:boxoffice.transactionDetails.detailsInfo",m)))),s.buffer.push("</th>\r\n                <th>"),s.buffer.push(g((h=a.loc||t&&t.loc,m={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},h?h.call(t,"locale.manageviewing.boxOffice:boxoffice.transactionDetails.detailsStatus",m):v.call(t,"loc","locale.manageviewing.boxOffice:boxoffice.transactionDetails.detailsStatus",m)))),s.buffer.push("</th>\r\n            </tr>\r\n        "),u=a.each.call(t,"item","in","data.boxOfficeRentalHistory",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(6,c,s),contexts:[t,t,t],types:["ID","ID","ID"],data:s}),(u||0===u)&&s.buffer.push(u),s.buffer.push("\r\n\t    </table>\r\n      <br/>\r\n      "),s.buffer.push(g(a.view.call(t,"Komodo.Controls.TablePager",{hash:{tableId:"boxOfficeDetailsTable",contentBinding:"data.boxOfficeRentalHistory",itemsPerPage:"10",headerRows:"1"},hashTypes:{tableId:"STRING",contentBinding:"STRING",itemsPerPage:"STRING",headerRows:"STRING"},hashContexts:{tableId:t,contentBinding:t,itemsPerPage:t,headerRows:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push('\r\n      <br/>\r\n      <div class="float-right">\r\n\t\t\t    '),u=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"queryTransaction"},hashTypes:{action:"STRING"},hashContexts:{action:t},inverse:p.noop,fn:p.program(8,l,s),contexts:[t],types:["ID"],data:s}),(u||0===u)&&s.buffer.push(u),s.buffer.push("\r\n\t    </div>\r\n\t\r\n\t    <br/>\r\n\t    <br/>\t\r\n\t    "),u=a.if.call(t,"data.isQueryingTransaction",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(10,d,s),contexts:[t],types:["ID"],data:s}),(u||0===u)&&s.buffer.push(u),s.buffer.push("\r\n\r\n</div>\r\n\r\n\r\n"),""}),Ember.TEMPLATES.BoxOfficeUnallocatedView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n    <tr>\r\n          <td>"),o=a._triageMustache.call(e,"item.RentalDateTime",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n          <td>"),o=a._triageMustache.call(e,"item.RentalCode",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n          <td>"),o=a._triageMustache.call(e,"item.RentalStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n          <td>"),o=a._triageMustache.call(e,"item.RentalStatusDescription",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        </tr>\r\n      "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var n,i,c,l=a.helperMissing,d=this.escapeExpression,u=this;return s.buffer.push('<div class="modal-max-size">\r\n  <p class="sub-heading">'),s.buffer.push(d((i=a.loc||t&&t.loc,c={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},i?i.call(t,"locale.manageviewing.boxOffice:boxoffice.unallocatedRentalsPage.unallocatedListHeading",c):l.call(t,"loc","locale.manageviewing.boxOffice:boxoffice.unallocatedRentalsPage.unallocatedListHeading",c)))),s.buffer.push('</p>\r\n  <table class="table table-bordered komodo-datagrid" id="unallocateRentalTable">\r\n    <tr>\r\n        <th>'),s.buffer.push(d((i=a.loc||t&&t.loc,c={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},i?i.call(t,"locale.manageviewing.boxOffice:boxoffice.unallocatedRentalsPage.date",c):l.call(t,"loc","locale.manageviewing.boxOffice:boxoffice.unallocatedRentalsPage.date",c)))),s.buffer.push("</th>\r\n        <th>"),s.buffer.push(d((i=a.loc||t&&t.loc,c={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},i?i.call(t,"locale.manageviewing.boxOffice:boxoffice.unallocatedRentalsPage.rentalCode",c):l.call(t,"loc","locale.manageviewing.boxOffice:boxoffice.unallocatedRentalsPage.rentalCode",c)))),s.buffer.push("</th>\r\n        <th>"),s.buffer.push(d((i=a.loc||t&&t.loc,c={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},i?i.call(t,"locale.manageviewing.boxOffice:boxoffice.unallocatedRentalsPage.details",c):l.call(t,"loc","locale.manageviewing.boxOffice:boxoffice.unallocatedRentalsPage.details",c)))),s.buffer.push("</th>\r\n        <th>"),s.buffer.push(d((i=a.loc||t&&t.loc,c={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},i?i.call(t,"locale.manageviewing.boxOffice:boxoffice.unallocatedRentalsPage.statusDescription",c):l.call(t,"loc","locale.manageviewing.boxOffice:boxoffice.unallocatedRentalsPage.statusDescription",c)))),s.buffer.push("</th>\r\n      </tr>\r\n    "),n=a.each.call(t,"item","in","data.unallocatedRentalCodes",{hash:{},hashTypes:{},hashContexts:{},inverse:u.noop,fn:u.program(1,r,s),contexts:[t,t,t],types:["ID","ID","ID"],data:s}),(n||0===n)&&s.buffer.push(n),s.buffer.push("\r\n  </table>\r\n  <br/>\r\n  "),s.buffer.push(d(a.view.call(t,"Komodo.Controls.TablePager",{hash:{tableId:"unallocateRentalTable",contentBinding:"data.unallocatedRentalCodes",itemsPerPage:"10",headerRows:"1"},hashTypes:{tableId:"STRING",contentBinding:"STRING",itemsPerPage:"STRING",headerRows:"STRING"},hashContexts:{tableId:t,contentBinding:t,itemsPerPage:t,headerRows:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n</div>\r\n\r\n"),""}),Ember.TEMPLATES.BoxOfficeView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n    "),o=a.if.call(e,"data.hasBoxOffice",{hash:{},hashTypes:{},hashContexts:{},inverse:A.program(33,M,t),fn:A.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function n(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing.boxOffice:boxoffice.mainPage.mobileNumbersHeading~"},hashTypes:{title:"STRING"},hashContexts:{title:e},inverse:A.noop,fn:A.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing.boxOffice:boxoffice.mainPage.transactionHeading~"},hashTypes:{title:"STRING"},hashContexts:{title:e},inverse:A.noop,fn:A.program(15,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n\t<br/>\r\n\t\r\n    \r\n    <div class="float-right">     \r\n      '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"rentTitle"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:A.noop,fn:A.program(29,I,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"viewUnallocated"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:A.noop,fn:A.program(31,x,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </div>\r\n  "),""}function i(e,t){var o;return t.buffer.push("\r\n\t"),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:A.noop,fn:A.program(4,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n    <div class="float-right">\r\n        '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{tabindex:"3",action:"saveChanges",disabledBinding:"data.disableSaveNumbers"},hashTypes:{tabindex:"STRING",action:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:e,action:e,disabledBinding:e},inverse:A.noop,fn:A.program(11,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{tabindex:"4",action:"cancelChanges",type:"inverse",disabledBinding:"data.disableCancel"},hashTypes:{tabindex:"STRING",action:"STRING",type:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:e,action:e,type:e,disabledBinding:e},inverse:A.noop,fn:A.program(13,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </div>\r\n    <br />\r\n    <br />\r\n    "),""}function c(e,t){var o;return t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-sm-12 col-md-9"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:A.noop,fn:A.program(5,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\t "),""}function l(e,t){var o;return t.buffer.push("\r\n    "),t.buffer.push(R(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{tabindex:"2",text:"~locale.manageviewing.boxOffice:boxoffice.mainPage.phoneNumber~",class:"sub-heading"},hashTypes:{tabindex:"STRING",text:"STRING",class:"STRING"},hashContexts:{tabindex:e,text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("&nbsp;&nbsp;"),o=a.if.call(e,"data.canAddNumbers",{hash:{},hashTypes:{},hashContexts:{},inverse:A.noop,fn:A.program(6,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    <br />\r\n  "),o=a.each.call(e,"phone","in","data.boxOfficePhoneNumbers",{hash:{},hashTypes:{},hashContexts:{},inverse:A.noop,fn:A.program(8,u,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    <br />\r\n\t "),""}function d(e,t){t.buffer.push(R(a.view.call(e,"Komodo.Controls.Link",{hash:{action:"addNumber",text:"~locale.manageviewing.boxOffice:boxoffice.mainPage.addLink~"},hashTypes:{action:"STRING",text:"STRING"},hashContexts:{action:e,text:e},contexts:[e],types:["ID"],data:t})))}function u(e,t){var o,s,r;return t.buffer.push("\r\n  "),t.buffer.push(R(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{valueBinding:"numberTypes",contentBinding:"data.phoneNumberTypes",optionLabelPath:"content.value",optionValuePath:"content.key",class:"phone-dropdown",disable:"true"},hashTypes:{valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",class:"STRING",disable:"STRING"},hashContexts:{valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,class:e,disable:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("+\r\n  "),t.buffer.push(R(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{class:"phone-code",valueBinding:"phone.code",disabledBinding:"phone.isPrimary"},hashTypes:{class:"STRING",valueBinding:"STRING",disabledBinding:"STRING"},hashContexts:{class:e,valueBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),t.buffer.push(R(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{class:"phone-number",valueBinding:"phone.number",disabledBinding:"phone.isPrimary"},hashTypes:{class:"STRING",valueBinding:"STRING",disabledBinding:"STRING"},hashContexts:{class:e,valueBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  &nbsp;"),t.buffer.push(R(a.view.call(e,"Komodo.Controls.CoreRadioButton",{hash:{valueBinding:"data.selectedNumber",optionValueBinding:"phone.count",name:"boPrimary"},hashTypes:{valueBinding:"STRING",optionValueBinding:"STRING",name:"STRING"},hashContexts:{valueBinding:e,optionValueBinding:e,name:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" "),t.buffer.push(R((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing.boxOffice:boxoffice.mainPage.primary",r):k.call(e,"loc","locale.manageviewing.boxOffice:boxoffice.mainPage.primary",r)))),t.buffer.push("\r\n    "),o=a.if.call(e,"data.canDeleteNumbers",{hash:{},hashTypes:{},hashContexts:{},inverse:A.noop,fn:A.program(9,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" <br />\r\n\t"),t.buffer.push(R(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{valueBinding:"phone.Code",validatorBinding:"phone.codeValidator"},hashTypes:{valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),t.buffer.push(R(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{valueBinding:"phone.Number",validatorBinding:"phone.numberValidator"},hashTypes:{valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" <br/>\r\n    "),""}function h(e,t){t.buffer.push(R(a.view.call(e,"Komodo.Controls.Link",{hash:{action:"deleteNumber",text:"~locale.manageviewing.boxOffice:boxoffice.mainPage.deleteLink~",contentBinding:"phone"},hashTypes:{action:"STRING",text:"STRING",contentBinding:"STRING"},hashContexts:{action:e,text:e,contentBinding:e},contexts:[e],types:["ID"],data:t})))}function m(e,t){var o,s;return t.buffer.push("\r\n        "),t.buffer.push(R((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing.boxOffice:boxoffice.mainPage.saveBtn",s):k.call(e,"loc","locale.manageviewing.boxOffice:boxoffice.mainPage.saveBtn",s)))),t.buffer.push("\r\n        "),""}function g(e,t){var o,s;return t.buffer.push("\r\n        "),t.buffer.push(R((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing.boxOffice:boxoffice.mainPage.cancelBtn",s):k.call(e,"loc","locale.manageviewing.boxOffice:boxoffice.mainPage.cancelBtn",s)))),t.buffer.push("\r\n        "),""}function p(e,t){var o,s,r;return t.buffer.push("\r\n\t  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:A.noop,fn:A.program(16,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:A.noop,fn:A.program(19,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n\t \r\n\t\t\t<br/>\r\n\t\t\t<hr/>\r\n\t\t\t<br/>\r\n\t\t\t<table id="boxOfficeTable" class="table table-bordered komodo-datagrid">\r\n        <tr>\r\n            <th>'),t.buffer.push(R((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing.boxOffice:boxoffice.mainPage.transactionDate",r):k.call(e,"loc","locale.manageviewing.boxOffice:boxoffice.mainPage.transactionDate",r)))),t.buffer.push("</th>\r\n            <th>"),t.buffer.push(R((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing.boxOffice:boxoffice.mainPage.smartcardNumber",r):k.call(e,"loc","locale.manageviewing.boxOffice:boxoffice.mainPage.smartcardNumber",r)))),t.buffer.push("</th>\r\n            <th>"),t.buffer.push(R((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing.boxOffice:boxoffice.mainPage.playlistTitle",r):k.call(e,"loc","locale.manageviewing.boxOffice:boxoffice.mainPage.playlistTitle",r)))),t.buffer.push("</th>\r\n            <th>"),t.buffer.push(R((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing.boxOffice:boxoffice.mainPage.status",r):k.call(e,"loc","locale.manageviewing.boxOffice:boxoffice.mainPage.status",r)))),t.buffer.push("</th>\r\n            <th>"),t.buffer.push(R((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing.boxOffice:boxoffice.mainPage.price",r):k.call(e,"loc","locale.manageviewing.boxOffice:boxoffice.mainPage.price",r)))),t.buffer.push("</th>\r\n            <th>"),t.buffer.push(R((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing.boxOffice:boxoffice.mainPage.actions",r):k.call(e,"loc","locale.manageviewing.boxOffice:boxoffice.mainPage.actions",r)))),t.buffer.push("</th>\r\n        </tr>\r\n        "),o=a.each.call(e,"item","in","filteredRentalHistory",{hash:{},hashTypes:{},hashContexts:{},inverse:A.noop,fn:A.program(26,y,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </table>\r\n\r\n\t"),t.buffer.push(R(a.view.call(e,"Komodo.Controls.TablePager",{hash:{tableId:"boxOfficeTable",contentBinding:"filteredRentalHistory",itemsPerPage:"10",headerRows:"1"},hashTypes:{tableId:"STRING",contentBinding:"STRING",itemsPerPage:"STRING",headerRows:"STRING"},hashContexts:{tableId:e,contentBinding:e,itemsPerPage:e,headerRows:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),""}function v(e,t){var o;return t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-sm-12 col-md-9"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:A.noop,fn:A.program(17,f,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function f(e,t){var o,s;return t.buffer.push('\r\n\t\t\t<p class="sub-heading">'),t.buffer.push(R((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing.boxOffice:boxoffice.mainPage.filterListOfTransaction",s):k.call(e,"loc","locale.manageviewing.boxOffice:boxoffice.mainPage.filterListOfTransaction",s)))),t.buffer.push("</p>\r\n\t\t"),""}function b(e,t){var o;return t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-4"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:A.noop,fn:A.program(20,C,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-4"},hashTypes:{
classNames:"STRING"},hashContexts:{classNames:e},inverse:A.noop,fn:A.program(22,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-4"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:A.noop,fn:A.program(24,D,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function C(e,t){return t.buffer.push("\r\n            "),t.buffer.push(R(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"1",valueBinding:"_selectedSmartcard",contentBinding:"data.listOfSmartCards",label:"~locale.manageviewing.boxOffice:boxoffice.mainPage.smartcardNumber~",optionLabelPath:"content",optionValuePath:"content",selectionBinding:"_selectedSmartcard"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",contentBinding:"STRING",label:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",selectionBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,contentBinding:e,label:e,optionLabelPath:e,optionValuePath:e,selectionBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),""}function S(e,t){return t.buffer.push("\r\n            "),t.buffer.push(R(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"2",valueBinding:"_selectedTransactionStatus",contentBinding:"data.transactionStatusList",label:"~locale.manageviewing.boxOffice:boxoffice.mainPage.status~",optionLabelPath:"content.value",optionValuePath:"content.key",selectionBinding:"content.key"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",contentBinding:"STRING",label:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",selectionBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,contentBinding:e,label:e,optionLabelPath:e,optionValuePath:e,selectionBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),""}function D(e,t){return t.buffer.push("\r\n            "),t.buffer.push(R(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{valueBinding:"data.filterByDate",label:"~locale.manageviewing.boxOffice:boxoffice.mainPage.transactionDate~",validatorBinding:"validators.filterByDateValidator"},hashTypes:{valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),""}function y(e,t){var o;return t.buffer.push("\r\n        <tr>\r\n            <td>"),o=a._triageMustache.call(e,"item.TransactionDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n            <td>"),o=a._triageMustache.call(e,"item.SmartCardNr",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n            <td>"),o=a._triageMustache.call(e,"item.PlayListTitle",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n            <td>"),o=a._triageMustache.call(e,"item.StatusDescription",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n            <td class="komodo-decimal">'),o=a._triageMustache.call(e,"item.Price",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n            <td>\r\n                "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"viewTransaction",contentBinding:"item",class:"btn-xs"},hashTypes:{action:"STRING",contentBinding:"STRING",class:"STRING"},hashContexts:{action:e,contentBinding:e,class:e},inverse:A.noop,fn:A.program(27,w,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </td>\r\n        </tr>\r\n        "),""}function w(e,t){var o,s;return t.buffer.push(" "),t.buffer.push(R((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing.boxOffice:boxoffice.mainPage.viewBtn",s):k.call(e,"loc","locale.manageviewing.boxOffice:boxoffice.mainPage.viewBtn",s)))),t.buffer.push("\r\n                "),""}function I(e,t){var o,s;return t.buffer.push("\r\n      "),t.buffer.push(R((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing.boxOffice:boxoffice.rentTitlePage.rentBtn",s):k.call(e,"loc","locale.manageviewing.boxOffice:boxoffice.rentTitlePage.rentBtn",s)))),t.buffer.push("\r\n      "),""}function x(e,t){var o,s;return t.buffer.push("\r\n      "),t.buffer.push(R((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing.boxOffice:boxoffice.unallocatedRentalsPage.unallocatedRentalsBtn",s):k.call(e,"loc","locale.manageviewing.boxOffice:boxoffice.unallocatedRentalsPage.unallocatedRentalsBtn",s)))),t.buffer.push("\r\n      "),""}function M(e,t){var o,s,r;return t.buffer.push("\r\n  "),t.buffer.push(R((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing.boxOffice:boxoffice.mainPage.noBoxOfficeMessage",r):k.call(e,"loc","locale.manageviewing.boxOffice:boxoffice.mainPage.noBoxOfficeMessage",r)))),t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"activateBoxOffice",size:"nextto-control",disabledBinding:"isactivateBoxOfficeButton"},hashTypes:{action:"STRING",size:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,size:e,disabledBinding:e},inverse:A.noop,fn:A.program(34,T,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function T(e,t){var o,s;return t.buffer.push("\r\n  "),t.buffer.push(R((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing.boxOffice:boxoffice.mainPage.activateBtn",s):k.call(e,"loc","locale.manageviewing.boxOffice:boxoffice.mainPage.activateBtn",s)))),t.buffer.push("\r\n  "),""}function N(e,t){var o,s;return t.buffer.push("\r\n  "),t.buffer.push(R((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing.boxOffice:boxoffice.mainPage.noSelectedCustomerMessage",s):k.call(e,"loc","locale.manageviewing.boxOffice:boxoffice.mainPage.noSelectedCustomerMessage",s)))),t.buffer.push("\r\n  "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var P,O,B,R=this.escapeExpression,k=a.helperMissing,A=this;return s.buffer.push("<div "),s.buffer.push(R(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n    <p class="komodo-heading">'),s.buffer.push(R((O=a.loc||t&&t.loc,B={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},O?O.call(t,"locale.manageviewing.boxOffice:boxoffice.title",B):k.call(t,"loc","locale.manageviewing.boxOffice:boxoffice.title",B)))),s.buffer.push("</p>\r\n    <hr />\r\n    "),P=a.if.call(t,"hasSelectedCustomer",{hash:{},hashTypes:{},hashContexts:{},inverse:A.program(36,N,s),fn:A.program(1,r,s),contexts:[t],types:["ID"],data:s}),(P||0===P)&&s.buffer.push(P),s.buffer.push("\r\n</div>\r\n"),""}),Ember.TEMPLATES.BulkChangeDeviceOwnershipView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){return t.buffer.push("\r\n    <div>\r\n        "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.FileReader",{hash:{action:"readTextFile"},hashTypes:{action:"STRING"},hashContexts:{action:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    </div>\r\n    <br />\r\n    "),""}function n(e,t){var o,s,r;return t.buffer.push('\r\n    <table id="DeviceDataTable" '),t.buffer.push(v(a["bind-attr"].call(e,{hash:{class:":table :table-bordered :komodo-datagrid _filtering:komodo-hidden"},hashTypes:{class:"STRING"},hashContexts:{class:e},contexts:[],types:[],data:t}))),t.buffer.push(">\r\n        <tr>\r\n            <th>"),t.buffer.push(v((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:bulkChangeDeviceOwnership.deviceName",r):f.call(e,"loc","locale.manageStock:bulkChangeDeviceOwnership.deviceName",r)))),t.buffer.push("</th>\r\n            <th>"),t.buffer.push(v((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:bulkChangeDeviceOwnership.deviceModel",r):f.call(e,"loc","locale.manageStock:bulkChangeDeviceOwnership.deviceModel",r)))),t.buffer.push("</th>\r\n            <th>"),t.buffer.push(v((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:bulkChangeDeviceOwnership.deviceNumber",r):f.call(e,"loc","locale.manageStock:bulkChangeDeviceOwnership.deviceNumber",r)))),t.buffer.push("</th>\r\n            <th>"),t.buffer.push(v((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:bulkChangeDeviceOwnership.deviceStatus",r):f.call(e,"loc","locale.manageStock:bulkChangeDeviceOwnership.deviceStatus",r)))),t.buffer.push("</th>\r\n            <th>"),t.buffer.push(v((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:bulkChangeDeviceOwnership.linkedSmartcard",r):f.call(e,"loc","locale.manageStock:bulkChangeDeviceOwnership.linkedSmartcard",r)))),t.buffer.push("</th>\r\n        </tr>\r\n        "),o=a.each.call(e,"item","in","dataModel.DeviceData",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(4,i,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </table>\r\n    "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.Pager",{hash:{mode:"virtual",contentLengthBinding:"dataModel.totalRows",pageSelectedAction:"pageSelected",itemsPerPageBinding:"dataModel.itemsPerPage",visiblePageCountBinding:"dataModel.visiblePageCount"},hashTypes:{mode:"STRING",contentLengthBinding:"STRING",pageSelectedAction:"STRING",itemsPerPageBinding:"STRING",visiblePageCountBinding:"STRING"},hashContexts:{mode:e,contentLengthBinding:e,pageSelectedAction:e,itemsPerPageBinding:e,visiblePageCountBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function i(e,t){var o;return t.buffer.push("\r\n        <tr>\r\n            <td>\r\n                "),o=a._triageMustache.call(e,"item.deviceName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </td>\r\n            <td>\r\n                "),o=a._triageMustache.call(e,"item.deviceModel",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </td>\r\n            <td>\r\n                "),o=a._triageMustache.call(e,"item.deviceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </td>\r\n            <td>\r\n                "),o=a._triageMustache.call(e,"item.deviceStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </td>\r\n            <td>\r\n                "),o=a._triageMustache.call(e,"item.linkedSmartcard",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </td>\r\n            <td>\r\n                "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"item.checkboxSelected","data-title":"item.value",class:"radiobutton"},hashTypes:{checkedBinding:"STRING","data-title":"STRING",class:"STRING"},hashContexts:{checkedBinding:e,"data-title":e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            </td>\r\n        </tr>\r\n        "),""}function c(e,t){var o;return t.buffer.push('\r\n        <tr>\r\n            <td width="25%">\r\n                '),o=a._triageMustache.call(e,"item.documentType",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </td>\r\n            "),o=a.if.call(e,"item.documentFulfill",{hash:{},hashTypes:{},hashContexts:{},inverse:b.program(9,d,t),fn:b.program(7,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </tr>\r\n        "),""}function l(e,t){var o;return t.buffer.push('\r\n            <td width="25%">\r\n                <a href="'),o=a._triageMustache.call(e,"item.documentURL",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('">View</a>\r\n            </td>\r\n            <td width="25%">\r\n                <img src="Content\\Images\\MessageBox\\icon-success.svg" height="50%" />\r\n            </td>\r\n            <td width="25%"></td>\r\n            '),""}function d(e,t){var o;return t.buffer.push('\r\n            <td width="25%"></td>\r\n            <td width="25%">\r\n                <img src="Content\\Images\\MessageBox\\icon-error.svg" height="50%" />\r\n            </td>\r\n            <td width="25%">\r\n                '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"customerDocumentsModal"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:b.noop,fn:b.program(10,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </td>\r\n            "),""}function u(e,t){var o,s;return t.buffer.push("\r\n                "),t.buffer.push(v((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:modal.popUp",s):f.call(e,"loc","locale.manageStock:modal.popUp",s)))),t.buffer.push("\r\n                "),""}function h(e,t){var o,s;return t.buffer.push("\r\n        "),t.buffer.push(v((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:bulkChangeDeviceOwnership.changeDeviceOwnership",s):f.call(e,"loc","locale.manageStock:bulkChangeDeviceOwnership.changeDeviceOwnership",s)))),t.buffer.push("\r\n        "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var m,g,p,v=this.escapeExpression,f=a.helperMissing,b=this;return s.buffer.push("<div "),s.buffer.push(v(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n    <div width="90%">\r\n        <span class="komodo-heading">'),s.buffer.push(v((g=a.loc||t&&t.loc,p={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},g?g.call(t,"locale.manageStock:bulkChangeDeviceOwnership.title",p):f.call(t,"loc","locale.manageStock:bulkChangeDeviceOwnership.title",p)))),s.buffer.push('</span>\r\n        <span class="float-right">\r\n            <b>\r\n                <a href="#/manageViewing">&lt;'),s.buffer.push(v((g=a.loc||t&&t.loc,p={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},g?g.call(t,"locale.manageStock:bulkChangeDeviceOwnership.back",p):f.call(t,"loc","locale.manageStock:bulkChangeDeviceOwnership.back",p)))),s.buffer.push("</a>\r\n            </b>\r\n        </span>\r\n    </div>\r\n    <hr />\r\n    "),s.buffer.push(v(a.view.call(t,"Komodo.Controls.RadioButtonGroup",{hash:{contentBinding:"dataModel.screenSelectionFileUpload",displayPath:"title",valuePath:"value",valueBinding:"dataModel.screenSelectedOption"},hashTypes:{contentBinding:"STRING",displayPath:"STRING",valuePath:"STRING",valueBinding:"STRING"},hashContexts:{contentBinding:t,displayPath:t,valuePath:t,valueBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n    <hr />\r\n    "),m=a.unless.call(t,"dataModel.screenSelectedOption",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(1,r,s),contexts:[t],types:["ID"],data:s}),(m||0===m)&&s.buffer.push(m),s.buffer.push("\r\n    "),m=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageStock:bulkChangeDeviceOwnership.gridTitle~"},hashTypes:{title:"STRING"},hashContexts:{title:t},inverse:b.noop,fn:b.program(3,n,s),contexts:[t],types:["ID"],data:s}),(m||0===m)&&s.buffer.push(m),s.buffer.push('\r\n    <hr />\r\n    <br />\r\n    <table id="BCODocumentGridDataTable" class="table table-bordered komodo-datagrid">\r\n        <tr>\r\n            <th>'),s.buffer.push(v((g=a.loc||t&&t.loc,p={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},g?g.call(t,"locale.manageStock:bulkChangeDeviceOwnership.documentGridType",p):f.call(t,"loc","locale.manageStock:bulkChangeDeviceOwnership.documentGridType",p)))),s.buffer.push("</th>\r\n            <th>"),s.buffer.push(v((g=a.loc||t&&t.loc,p={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},g?g.call(t,"locale.manageStock:bulkChangeDeviceOwnership.documentGridView",p):f.call(t,"loc","locale.manageStock:bulkChangeDeviceOwnership.documentGridView",p)))),s.buffer.push("</th>\r\n            <th>"),s.buffer.push(v((g=a.loc||t&&t.loc,p={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},g?g.call(t,"locale.manageStock:bulkChangeDeviceOwnership.documentGridFulfill",p):f.call(t,"loc","locale.manageStock:bulkChangeDeviceOwnership.documentGridFulfill",p)))),s.buffer.push("</th>\r\n            <th>"),s.buffer.push(v((g=a.loc||t&&t.loc,p={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},g?g.call(t,"locale.manageStock:bulkChangeDeviceOwnership.documentGridAction",p):f.call(t,"loc","locale.manageStock:bulkChangeDeviceOwnership.documentGridAction",p)))),s.buffer.push("</th>\r\n        </tr>\r\n        "),m=a.each.call(t,"item","in","dataModel.customerDocumentData",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(6,c,s),contexts:[t,t,t],types:["ID","ID","ID"],data:s}),(m||0===m)&&s.buffer.push(m),s.buffer.push('\r\n    </table>\r\n    <br />\r\n    <div width="100%" class="float-left">\r\n        '),m=a.view.call(t,"Komodo.Controls.Button",{hash:{class:"float-right",action:"bulkChangeDeviceOwnership",contentBinding:"dataModel.selectedGridItem"},hashTypes:{class:"STRING",action:"STRING",contentBinding:"STRING"},hashContexts:{class:t,action:t,contentBinding:t},inverse:b.noop,fn:b.program(12,h,s),contexts:[t],types:["ID"],data:s}),(m||0===m)&&s.buffer.push(m),s.buffer.push("\r\n    </div>\r\n</div>\r\n"),""}),Ember.TEMPLATES.CancelPackagesView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n  \x3c!-- Select Smartcard --\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:cancelPackages.selectSmartcard~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:e,isCollapsed:e},inverse:V.noop,fn:V.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),o=a.if.call(e,"cancelPackagesModel.isDisconnectPackageVisible",{hash:{},hashTypes:{},hashContexts:{},inverse:V.noop,fn:V.program(9,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function n(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:V.noop,fn:V.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function i(e,t){var o;return t.buffer.push("\r\n  \x3c!--Column 1--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:V.noop,fn:V.program(4,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  \x3c!--Column 2--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:V.noop,fn:V.program(6,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function c(e,t){return t.buffer.push("\r\n  "),t.buffer.push(L(a.view.call(e,"Komodo.Controls.Select",{hash:{label:"~locale.manageviewing:cancelPackages.listOfSmartcards~",prompt:"~locale.manageviewing:cancelPackages.listOfSmartcardsPrompt~",valueBinding:"cancelPackagesModel.smartcards",contentBinding:"smartcardsList",optionLabelPath:"content.Key",optionValuePath:"content.Value",class:"info-heading"},hashTypes:{label:"STRING",prompt:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",class:"STRING"},hashContexts:{label:e,prompt:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function l(e,t){var o;return t.buffer.push("\r\n  "),t.buffer.push(L(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:cancelPackages.smartcardDevice~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br />\r\n  "),t.buffer.push(L(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{tabindex:"1",placeholder:"searchPlaceHolder",valueBinding:"cancelPackagesModel.searchDeviceText"},hashTypes:{tabindex:"STRING",placeholder:"ID",valueBinding:"STRING"},hashContexts:{tabindex:e,placeholder:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("&nbsp;\r\n  "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{tabindex:"2",action:"findDeviceSmartcard",size:"xs",class:"button-no-margin"},hashTypes:{tabindex:"STRING",action:"STRING",size:"STRING",class:"STRING"},hashContexts:{tabindex:e,action:e,size:e,class:e},inverse:V.noop,fn:V.program(7,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <br />\r\n  "),t.buffer.push(L(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.searchDeviceTextValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function d(e,t){var o,s;return t.buffer.push("\r\n  "),t.buffer.push(L((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceLink.search",s):E.call(e,"loc","locale.manageviewing:deviceLink.search",s)))),t.buffer.push("\r\n  "),""}function u(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:cancelPackages.cancelPackages~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:e,isCollapsed:e},inverse:V.noop,fn:V.program(10,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function h(e,t){var o;return t.buffer.push('\r\n\r\n  <table width="100%">\r\n    <tbody>\r\n      <tr>\r\n        <td>\r\n          '),t.buffer.push(L(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"cancelPackagesModel.smartcardInformation",class:"sub-heading"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n          "),o=a.each.call(e,"hardwareAndService","in","cancelPackagesModel.allHardwares",{hash:{},hashTypes:{},hashContexts:{},inverse:V.noop,fn:V.program(11,m,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n  "),""}function m(e,t){var o;return t.buffer.push('\r\n\r\n\r\n          \x3c!-- Principal Services --\x3e\r\n          <table style="width:100%">\r\n            <tbody>\r\n              '),o=a.if.call(e,"hardwareAndService.dppServiceStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:V.noop,fn:V.program(12,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              "),o=a.if.call(e,"cancelPackagesModel.princPre",{hash:{},hashTypes:{},hashContexts:{},inverse:V.noop,fn:V.program(14,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              \x3c!-- Addon Services --\x3e\r\n              "),o=a.each.call(e,"addOnService","in","hardwareAndService.listOfAddOnServices",{hash:{},hashTypes:{},hashContexts:{},inverse:V.noop,fn:V.program(17,f,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n              \x3c!-- Access Services --\x3e\r\n              "),o=a.each.call(e,"accessService","in","hardwareAndService.listOfAccessServices",{hash:{},hashTypes:{},hashContexts:{},inverse:V.noop,fn:V.program(19,b,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n              \x3c!--DDCC--\x3e\r\n              "),o=a.if.call(e,"hardwareAndService.insuranceServiceStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:V.noop,fn:V.program(21,C,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n\r\n            </tbody>\r\n          </table>\r\n          <hr></hr>\r\n          \x3c!-- Disconnect All --\x3e\r\n          <table style="width:100%">\r\n            <tbody>\r\n              <tr>\r\n                <td style="width:50%">\r\n                  '),t.buffer.push(L(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"cancelPackagesModel.isDisconnectAll",disabledBinding:"hardwareAndService.disablecheckboxfordcc"},hashTypes:{checkedBinding:"STRING",disabledBinding:"STRING"},hashContexts:{checkedBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                  "),t.buffer.push(L(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:cancelPackages.cancelAll~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                </td>\r\n                "),o=a.if.call(e,"cancelPackagesModel.isDisconnectAll",{hash:{},hashTypes:{},hashContexts:{},inverse:V.program(25,D,t),fn:V.program(23,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n\r\n          \x3c!-- Reason for cancellation --\x3e\r\n          \r\n          <hr></hr>\r\n          <table style="width:100%">\r\n            <tbody>\r\n              <tr>\r\n                <td style="width:100%; float:left;">\r\n                  '),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:V.noop,fn:V.program(27,y,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n          \r\n\r\n          \x3c!-- Disconnect Button --\x3e\r\n          <div style="float:right;">\r\n            '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"submitDisconnect",contentBinding:"hardwareAndService",disabledBinding:"hardwareAndService.isReqControlEnabledOnDisconnect"},hashTypes:{action:"STRING",contentBinding:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,contentBinding:e,disabledBinding:e},inverse:V.noop,fn:V.program(29,w,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </div>\r\n          "),""}function g(e,t){var o;return t.buffer.push('\r\n              <tr>\r\n                <td style="vertical-align:middle;width:30%">'),o=a._triageMustache.call(e,"hardwareAndService.dppServiceName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n                <td style="vertical-align:middle;width:20%">\r\n                  '),t.buffer.push(L(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"hardwareAndService.stateOfToggleButtonOfDPPService",disabledBinding:"hardwareAndService.disabletoggleforDPP",appearance:"switch"},hashTypes:{checkedBinding:"STRING",disabledBinding:"STRING",appearance:"STRING"},hashContexts:{checkedBinding:e,disabledBinding:e,appearance:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                </td>\r\n                <td style="vertical-align:bottom;width:37%">\r\n                  '),t.buffer.push(L(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{valueBinding:"hardwareAndService.dppCudDate",validatorBinding:"hardwareAndService.dppCudDateValidator",disabledBinding:"hardwareAndService.stateOfDatePickerDPPService"},hashTypes:{valueBinding:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                </td>\r\n              </tr>\r\n              "),""}function p(e,t){var o;return t.buffer.push("\r\n              "),o=a.each.call(e,"principalService","in","hardwareAndService.listOfPrincipalServices",{hash:{},hashTypes:{},hashContexts:{},inverse:V.noop,fn:V.program(15,v,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              "),""}function v(e,t){var o;return t.buffer.push('\r\n              <tr>\r\n                <td style="vertical-align:middle;width:30%">'),o=a._triageMustache.call(e,"principalService.serviceName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n                <td style="vertical-align:middle;width:20%">\r\n                  '),t.buffer.push(L(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"principalService.stateOfToggleButtonOfService",disabledBinding:"principalService.disabletoggleforPrincipalService",appearance:"switch"},hashTypes:{checkedBinding:"STRING",disabledBinding:"STRING",appearance:"STRING"},hashContexts:{checkedBinding:e,disabledBinding:e,appearance:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                </td>\r\n                <td style="vertical-align:bottom;width:37%">\r\n                  '),t.buffer.push(L(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{valueBinding:"principalService.serviceCUD",validatorBinding:"principalService.serviceCUDValidator",disableBinding:"principalService.stateOfDatePickerPrincipleService"},hashTypes:{valueBinding:"STRING",validatorBinding:"STRING",disableBinding:"STRING"},hashContexts:{valueBinding:e,validatorBinding:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                </td>\r\n              </tr>\r\n              "),""}function f(e,t){var o;return t.buffer.push('\r\n              <tr>\r\n                <td style="vertical-align:middle;width:30%">'),o=a._triageMustache.call(e,"addOnService.serviceName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n                <td style="vertical-align:middle;width:20%">\r\n                  '),t.buffer.push(L(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"addOnService.stateOfToggleButtonOfService",disabledBinding:"addOnService.disabletoggleAddonService",appearance:"switch"},hashTypes:{
checkedBinding:"STRING",disabledBinding:"STRING",appearance:"STRING"},hashContexts:{checkedBinding:e,disabledBinding:e,appearance:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                </td>\r\n                <td style="vertical-align:bottom;width:37%">\r\n                  '),t.buffer.push(L(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{valueBinding:"addOnService.serviceCUD",validatorBinding:"addOnService.serviceCUDValidator",disableBinding:"addOnService.stateOfDatePickerAddonAccessService"},hashTypes:{valueBinding:"STRING",validatorBinding:"STRING",disableBinding:"STRING"},hashContexts:{valueBinding:e,validatorBinding:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                </td>\r\n              </tr>\r\n              "),""}function b(e,t){var o;return t.buffer.push('\r\n              <tr>\r\n                <td style="vertical-align:middle;width:30%">'),o=a._triageMustache.call(e,"accessService.serviceName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n                <td style="vertical-align:middle;width:20%">\r\n                  '),t.buffer.push(L(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"accessService.stateOfToggleButtonOfService",disabledBinding:"accessService.disabletoggleAccessService",appearance:"switch"},hashTypes:{checkedBinding:"STRING",disabledBinding:"STRING",appearance:"STRING"},hashContexts:{checkedBinding:e,disabledBinding:e,appearance:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                </td>\r\n                <td style="vertical-align:bottom;width:37%">\r\n                  '),t.buffer.push(L(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{valueBinding:"accessService.serviceCUD",validatorBinding:"accessService.serviceAccessCUDValidator",disableBinding:"accessService.stateOfDatePickerAddonAccessService"},hashTypes:{valueBinding:"STRING",validatorBinding:"STRING",disableBinding:"STRING"},hashContexts:{valueBinding:e,validatorBinding:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                </td>\r\n              </tr>\r\n              "),""}function C(e,t){var o;return t.buffer.push('\r\n              <tr>\r\n                <td style="vertical-align:middle;width:30%">'),o=a._triageMustache.call(e,"hardwareAndService.insuranceServiceName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n                <td style="vertical-align:middle;width:20%">\r\n                  '),t.buffer.push(L(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"hardwareAndService.stateOfToggleButtonOfInsuranceService",disabledBinding:"hardwareAndService.stateOftoggleforInsuranceService",appearance:"switch"},hashTypes:{checkedBinding:"STRING",disabledBinding:"STRING",appearance:"STRING"},hashContexts:{checkedBinding:e,disabledBinding:e,appearance:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                </td>\r\n                <td style="vertical-align:bottom;width:37%">\r\n                  '),t.buffer.push(L(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{valueBinding:"hardwareAndService.InsuranceCUD",validatorBinding:"hardwareAndService.insuranceCUDValidator",disabledBinding:"hardwareAndService.stateOfDatePickerInsuranceService"},hashTypes:{valueBinding:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                </td>\r\n              </tr>\r\n              "),""}function S(e,t){return t.buffer.push('\r\n                <td style="width:37%">\r\n                  '),t.buffer.push(L(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{label:"~locale.manageviewing:disconnect.date~",valueBinding:"cancelPackagesModel.dateDisconnectAll",disabledBinding:"cancelPackagesModel.isScheduleCancellationDisabled",validatorBinding:"validators.dateDisconnectAllValidator",class:"info-heading"},hashTypes:{label:"STRING",valueBinding:"STRING",disabledBinding:"STRING",validatorBinding:"STRING",class:"STRING"},hashContexts:{label:e,valueBinding:e,disabledBinding:e,validatorBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                </td>\r\n                "),""}function D(e,t){return t.buffer.push('\r\n                <td style="width:37%">\r\n                  '),t.buffer.push(L(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{label:"~locale.manageviewing:disconnect.date~",valueBinding:"cancelPackagesModel.dateDisconnectAll",disabled:!0,validatorBinding:"validators.dateDisconnectAllValidator",class:"info-heading"},hashTypes:{label:"STRING",valueBinding:"STRING",disabled:"BOOLEAN",validatorBinding:"STRING",class:"STRING"},hashContexts:{label:e,valueBinding:e,disabled:e,validatorBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                </td>\r\n                "),""}function y(e,t){return t.buffer.push("\r\n                  "),t.buffer.push(L(a.view.call(e,"Komodo.Controls.Select",{hash:{label:"~locale.manageviewing:cancelPackages.listOfCancelReasons~",prompt:"~locale.manageviewing:cancelPackages.reasonPrompt~",valueBinding:"cancelPackagesModel.reasonCodes",contentBinding:"cancelPackagesModel.reasonCodesList",optionLabelPath:"content.Key",optionValuePath:"content.Value",class:"info-heading",disabledBinding:"dissableBindingCancelReason"},hashTypes:{label:"STRING",prompt:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",class:"STRING",disabledBinding:"STRING"},hashContexts:{label:e,prompt:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,class:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                  "),""}function w(e,t){var o,s;t.buffer.push(L((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:cancelPackages.btnCancelPackages",s):E.call(e,"loc","locale.manageviewing:cancelPackages.btnCancelPackages",s))))}function I(e,t){var o;return t.buffer.push("\r\n  \x3c!-- Select Smartcard --\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:cancelPackages.selectSmartcard~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:e,isCollapsed:e},inverse:V.noop,fn:V.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),o=a.if.call(e,"cancelPackagesModel.isDisconnectPackageVisible",{hash:{},hashTypes:{},hashContexts:{},inverse:V.noop,fn:V.program(32,x,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function x(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:cancelPackages.suspendPackages~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:e,isCollapsed:e},inverse:V.noop,fn:V.program(33,M,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function M(e,t){var o;return t.buffer.push('\r\n\r\n  <table width="100%">\r\n    <tbody>\r\n      <tr>\r\n        <td>\r\n          '),t.buffer.push(L(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"cancelPackagesModel.smartcardInformation",class:"sub-heading"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n          "),o=a.each.call(e,"hardwareAndService","in","cancelPackagesModel.allHardwares",{hash:{},hashTypes:{},hashContexts:{},inverse:V.noop,fn:V.program(34,T,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n  "),""}function T(e,t){var o;return t.buffer.push('\r\n\r\n\r\n          \x3c!-- Principal Services --\x3e\r\n          <table style="width:100%">\r\n            <tbody>\r\n              '),o=a.if.call(e,"cancelPackagesModel.princPre",{hash:{},hashTypes:{},hashContexts:{},inverse:V.noop,fn:V.program(35,N,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              \x3c!-- Addon Services --\x3e\r\n              "),o=a.each.call(e,"addOnService","in","hardwareAndService.listOfAddOnServices",{hash:{},hashTypes:{},hashContexts:{},inverse:V.noop,fn:V.program(38,O,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n              \x3c!-- Access Services --\x3e\r\n              "),o=a.each.call(e,"accessService","in","hardwareAndService.listOfAccessServices",{hash:{},hashTypes:{},hashContexts:{},inverse:V.noop,fn:V.program(40,B,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n            </tbody>\r\n          </table>\r\n          <hr></hr>\r\n          \x3c!-- Disconnect All --\x3e\r\n          <table style="width:100%" >\r\n            <tbody>\r\n              <tr>\r\n                <td style="width:50%">\r\n                  '),t.buffer.push(L(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"cancelPackagesModel.isDisconnectAll"},hashTypes:{checkedBinding:"STRING"},hashContexts:{checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                  "),t.buffer.push(L(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:cancelPackages.suspendAll~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                </td>\r\n                "),o=a.if.call(e,"cancelPackagesModel.isDisconnectAll",{hash:{},hashTypes:{},hashContexts:{},inverse:V.program(25,D,t),fn:V.program(42,R,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n\r\n          \x3c!-- suspension Button --\x3e\r\n          <div style="float:right;">\r\n            '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"submitSuspension",contentBinding:"hardwareAndService",disabledBinding:"hardwareAndService.isReqControlEnabledOnDisconnect"},hashTypes:{action:"STRING",contentBinding:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,contentBinding:e,disabledBinding:e},inverse:V.noop,fn:V.program(44,k,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </div>\r\n          "),""}function N(e,t){var o;return t.buffer.push("\r\n              "),o=a.each.call(e,"principalService","in","hardwareAndService.listOfPrincipalServices",{hash:{},hashTypes:{},hashContexts:{},inverse:V.noop,fn:V.program(36,P,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              "),""}function P(e,t){var o;return t.buffer.push('\r\n              <tr>\r\n                <td style="vertical-align:middle;width:30%">'),o=a._triageMustache.call(e,"principalService.serviceName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n                <td style="vertical-align:middle;width:20%">\r\n                  '),t.buffer.push(L(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"principalService.stateOfToggleButtonOfService",appearance:"switch"},hashTypes:{checkedBinding:"STRING",appearance:"STRING"},hashContexts:{checkedBinding:e,appearance:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                </td>\r\n                <td style="vertical-align:bottom;width:37%">\r\n                  '),t.buffer.push(L(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{valueBinding:"principalService.serviceCUD",validatorBinding:"principalService.serviceCUDValidator",disableBinding:"principalService.stateOfDatePickerPrincipleService",class:"info-heading"},hashTypes:{valueBinding:"STRING",validatorBinding:"STRING",disableBinding:"STRING",class:"STRING"},hashContexts:{valueBinding:e,validatorBinding:e,disableBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                </td>\r\n              </tr>\r\n              "),""}function O(e,t){var o;return t.buffer.push('\r\n              <tr>\r\n                <td style="vertical-align:middle;width:30%">'),o=a._triageMustache.call(e,"addOnService.serviceName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n                <td style="vertical-align:middle;width:20%"> '),t.buffer.push(L(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"addOnService.stateOfToggleButtonOfService",appearance:"switch"},hashTypes:{checkedBinding:"STRING",appearance:"STRING"},hashContexts:{checkedBinding:e,appearance:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</td>\r\n                <td style="vertical-align:bottom;width:37%">\r\n                  '),t.buffer.push(L(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{valueBinding:"addOnService.serviceCUD",validatorBinding:"addOnService.serviceCUDValidator",class:"info-heading",disableBinding:"addOnService.stateOfDatePickerAddonAccessService"},hashTypes:{valueBinding:"STRING",validatorBinding:"STRING",class:"STRING",disableBinding:"STRING"},hashContexts:{valueBinding:e,validatorBinding:e,class:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                </td>\r\n              </tr>\r\n              "),""}function B(e,t){var o;return t.buffer.push('\r\n              <tr>\r\n                <td style="vertical-align:middle;width:30%">'),o=a._triageMustache.call(e,"accessService.serviceName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n                <td style="vertical-align:middle;width:20%">\r\n                  '),t.buffer.push(L(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"accessService.stateOfToggleButtonOfService",appearance:"switch"},hashTypes:{checkedBinding:"STRING",appearance:"STRING"},hashContexts:{checkedBinding:e,appearance:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                </td>\r\n                <td style="vertical-align:bottom;width:37%">\r\n                  '),t.buffer.push(L(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{valueBinding:"accessService.serviceCUD",validatorBinding:"accessService.serviceAccessCUDValidator",class:"info-heading",disableBinding:"accessService.stateOfDatePickerAddonAccessService"},hashTypes:{valueBinding:"STRING",validatorBinding:"STRING",class:"STRING",disableBinding:"STRING"},hashContexts:{valueBinding:e,validatorBinding:e,class:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                </td>\r\n              </tr>\r\n              "),""}function R(e,t){return t.buffer.push('\r\n                <td style="width:37%">\r\n                  '),t.buffer.push(L(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{label:"~locale.manageviewing:disconnect.date~",valueBinding:"cancelPackagesModel.dateDisconnectAll",disableBinding:"isScheduleSuspensionDisabled",validatorBinding:"validators.dateDisconnectAllValidator",class:"info-heading"},hashTypes:{label:"STRING",valueBinding:"STRING",disableBinding:"STRING",validatorBinding:"STRING",class:"STRING"},hashContexts:{label:e,valueBinding:e,disableBinding:e,validatorBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                </td>\r\n                "),""}function k(e,t){var o,s;t.buffer.push(L((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:cancelPackages.btnSuspendPackages",s):E.call(e,"loc","locale.manageviewing:cancelPackages.btnSuspendPackages",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var A,K,G,L=this.escapeExpression,E=a.helperMissing,V=this;return s.buffer.push("<div "),s.buffer.push(L(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(L((K=a.loc||t&&t.loc,G={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},K?K.call(t,"locale.manageviewing:cancelPackages.cancelPackagesTitle",G):E.call(t,"loc","locale.manageviewing:cancelPackages.cancelPackagesTitle",G)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/manageViewing">&lt;'),s.buffer.push(L((K=a.loc||t&&t.loc,G={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},K?K.call(t,"locale.manageviewing:cancelPackages.back",G):E.call(t,"loc","locale.manageviewing:cancelPackages.back",G)))),s.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n\r\n  "),s.buffer.push(L(a.view.call(t,"Komodo.Controls.RadioButtonGroup",{hash:{contentBinding:"suspendOrCancel",displayPath:"title",valuePath:"value",valueBinding:"cancelPackagesModel.isCancel"},hashTypes:{contentBinding:"STRING",displayPath:"STRING",valuePath:"STRING",valueBinding:"STRING"},hashContexts:{contentBinding:t,displayPath:t,valuePath:t,valueBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n\r\n  "),A=a.if.call(t,"isCancelPackage",{hash:{},hashTypes:{},hashContexts:{},inverse:V.noop,fn:V.program(1,r,s),contexts:[t],types:["ID"],data:s}),(A||0===A)&&s.buffer.push(A),s.buffer.push("\r\n  "),A=a.if.call(t,"isSuspendPackage",{hash:{},hashTypes:{},hashContexts:{},inverse:V.noop,fn:V.program(31,I,s),contexts:[t],types:["ID"],data:s}),(A||0===A)&&s.buffer.push(A),s.buffer.push("\r\n</div>\r\n"),""}),Ember.TEMPLATES.CancelServiceOrderView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push('\r\n    <table style="width: 100%;">\r\n      <tr>\r\n        <td>\r\n        </td>\r\n        <td>\r\n          '),t.buffer.push(g(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"dataModel.quoteNumber",label:"~locale.manageStock:cancelServiceOrder.quoteNumber~",validationBinding:"dataModel.quoteNumber.error"},hashTypes:{valueBinding:"STRING",label:"STRING",validationBinding:"STRING"},hashContexts:{valueBinding:e,label:e,validationBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td></td>\r\n        <td style="float: right;">\r\n          '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"searchServiceOrder"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:p.noop,fn:p.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n    </table>\r\n    "),""}function n(e,t){var o,s;t.buffer.push(g((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:cancelServiceOrder.search",s):m.call(e,"loc","locale.manageStock:cancelServiceOrder.search",s))))}function i(e,t){var o,s,r;return t.buffer.push('\r\n    <table style="width: 100%;">\r\n     <tr>\r\n        <td>\r\n          <b>'),t.buffer.push(g((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:cancelServiceOrder.createDate",r):m.call(e,"loc","locale.manageStock:cancelServiceOrder.createDate",r)))),t.buffer.push("</b>\r\n        </td>\r\n        <td>\r\n          <b>"),t.buffer.push(g((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:cancelServiceOrder.customerQuoteUID",r):m.call(e,"loc","locale.manageStock:cancelServiceOrder.customerQuoteUID",r)))),t.buffer.push("</b>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td>"),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dataModel.createDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n        <td>"),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dataModel.customerQuoteUID"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n      </tr>\r\n      <tr>\r\n        <td>\r\n          <br />\r\n        </td>\r\n      </tr>\r\n\t<tr>\r\n        <td>\r\n          <b>"),t.buffer.push(g((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:cancelServiceOrder.expiryDate",r):m.call(e,"loc","locale.manageStock:cancelServiceOrder.expiryDate",r)))),t.buffer.push("</b>\r\n        </td>\r\n        <td>\r\n          <b>"),t.buffer.push(g((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:cancelServiceOrder.totalPrice",r):m.call(e,"loc","locale.manageStock:cancelServiceOrder.totalPrice",r)))),t.buffer.push("</b>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td>"),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dataModel.expiryDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n        <td>"),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dataModel.totalPrice"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n      </tr>\r\n      <tr>\r\n        <td>\r\n          <br />\r\n        </td>\r\n      </tr>\r\n\t<tr>\r\n\t\t<td>\r\n\t\t\t<b>"),t.buffer.push(g((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:cancelServiceOrder.quoteItems",r):m.call(e,"loc","locale.manageStock:cancelServiceOrder.quoteItems",r)))),t.buffer.push("</b>\r\n\t\t</td>\r\n\t\t<td>\r\n\t\t</td>\r\n\t</tr>\r\n\t"),o=a.each.call(e,"modelsAndDevice","in","dataModel.quoteData",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(5,c,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n\t<tr>\r\n        <td>\r\n          <br />\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td></td>\r\n        <td style="float: right;">\r\n            '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"cancelServiceOrder",isVisibleBinding:"dataModel.showCancelButton"},hashTypes:{action:"STRING",isVisibleBinding:"STRING"},hashContexts:{action:e,isVisibleBinding:e},inverse:p.noop,fn:p.program(7,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n    </table>\r\n    "),""}function c(e,t){var o,s;return t.buffer.push("\r\n\t<tr>\r\n\t\t<td>\r\n\t\t\t<b>"),t.buffer.push(g((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:cancelServiceOrder.name",s):m.call(e,"loc","locale.manageStock:cancelServiceOrder.name",s)))),t.buffer.push("</b>\r\n\t\t</td>\r\n\t\t<td>\r\n\t\t\t<b>"),t.buffer.push(g((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:cancelServiceOrder.model",s):m.call(e,"loc","locale.manageStock:cancelServiceOrder.model",s)))),t.buffer.push("</b>\r\n\t\t</td>\r\n\t</tr>\r\n\t<tr>\r\n\t\t<td>"),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"modelsAndDevice.Name"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n\t\t<td>"),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"modelsAndDevice.Model"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n\t</tr>\r\n\t"),""}function l(e,t){var o,s;t.buffer.push(g((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:cancelServiceOrder.submit",s):m.call(e,"loc","locale.manageStock:cancelServiceOrder.submit",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var d,u,h,m=a.helperMissing,g=this.escapeExpression,p=this;return s.buffer.push("<div "),s.buffer.push(g(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(g((u=a.loc||t&&t.loc,h={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},u?u.call(t,"locale.manageStock:cancelServiceOrder.title",h):m.call(t,"loc","locale.manageStock:cancelServiceOrder.title",h)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/manageViewing">&lt;'),s.buffer.push(g((u=a.loc||t&&t.loc,h={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},u?u.call(t,"locale.manageStock:cancelServiceOrder.back",h):m.call(t,"loc","locale.manageStock:cancelServiceOrder.back",h)))),s.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr />\r\n  <div>\r\n    "),d=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageStock:cancelServiceOrder.searchGridTitle~",isCollapsedBinding:"false"},hashTypes:{title:"STRING",isCollapsedBinding:"STRING"},hashContexts:{title:t,isCollapsedBinding:t},inverse:p.noop,fn:p.program(1,r,s),contexts:[t],types:["ID"],data:s}),(d||0===d)&&s.buffer.push(d),s.buffer.push("\r\n    <br />\r\n    "),d=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageStock:cancelServiceOrder.gridTitle~",isCollapsedBinding:"false",isVisibleBinding:"dataModel.showServiceOrder"},hashTypes:{title:"STRING",isCollapsedBinding:"STRING",isVisibleBinding:"STRING"},hashContexts:{title:t,isCollapsedBinding:t,isVisibleBinding:t},inverse:p.noop,fn:p.program(4,i,s),contexts:[t],types:["ID"],data:s}),(d||0===d)&&s.buffer.push(d),s.buffer.push("\r\n    </div>\r\n</div>\r\n"),""}),Ember.TEMPLATES.ChangeDeviceOwnershipView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){return t.buffer.push('\r\n    <table width="100%">\r\n      <tr>\r\n        <td colspan="2">\r\n          '),t.buffer.push(u(a.view.call(e,"Komodo.Controls.DataGrid",{hash:{canSort:!1,pageSize:10,canSelect:!0,performsValidation:!1,selectedItemBinding:"dataModel.selectedGridItem",commandItemBinding:"dataModel.commandGridItem",contentBinding:"dataModel.deviceData",columnsBinding:"dataGridColumns"},hashTypes:{canSort:"BOOLEAN",pageSize:"INTEGER",canSelect:"BOOLEAN",performsValidation:"BOOLEAN",selectedItemBinding:"STRING",commandItemBinding:"STRING",contentBinding:"STRING",columnsBinding:"STRING"},hashContexts:{canSort:e,pageSize:e,canSelect:e,performsValidation:e,selectedItemBinding:e,commandItemBinding:e,contentBinding:e,columnsBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td>\r\n          "),t.buffer.push(u(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{tabindex:"6",valueBinding:"dataModel.boundUpperDate",label:"~locale.manageStock:changeDeviceOwnership.date~",disableBinding:"dataModel.disabledDate"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",disableBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n    </table>\r\n    "),""}function n(e,t){var o,s;return t.buffer.push("\r\n      "),t.buffer.push(u((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:modal.popUp",s):h.call(e,"loc","locale.manageStock:modal.popUp",s)))),t.buffer.push("\r\n      "),""}function i(e,t){var o,s;return t.buffer.push("\r\n      "),t.buffer.push(u((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:changeDeviceOwnership.changeDeviceOwnership",s):h.call(e,"loc","locale.manageStock:changeDeviceOwnership.changeDeviceOwnership",s)))),t.buffer.push("\r\n      "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var c,l,d,u=this.escapeExpression,h=a.helperMissing,m=this;return s.buffer.push("<div "),s.buffer.push(u(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(u((l=a.loc||t&&t.loc,d={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},l?l.call(t,"locale.manageStock:changeDeviceOwnership.title",d):h.call(t,"loc","locale.manageStock:changeDeviceOwnership.title",d)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/manageViewing">&lt;BACK</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr />\r\n  <div>\r\n    '),c=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageStock:changeDeviceOwnership.gridTitle~",isCollapsedBinding:"data.isSelectHardware"},hashTypes:{title:"STRING",isCollapsedBinding:"STRING"},hashContexts:{title:t,isCollapsedBinding:t},inverse:m.noop,fn:m.program(1,r,s),contexts:[t],types:["ID"],data:s}),(c||0===c)&&s.buffer.push(c),s.buffer.push('\r\n    <br />\r\n    <div width="100%" class="float-left">\r\n      '),s.buffer.push(u((l=a.loc||t&&t.loc,d={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},l?l.call(t,"locale.manageStock:modal.buttonLabel",d):h.call(t,"loc","locale.manageStock:modal.buttonLabel",d)))),s.buffer.push("\r\n      "),c=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"customerDocumentsModal"},hashTypes:{action:"STRING"},hashContexts:{action:t},inverse:m.noop,fn:m.program(3,n,s),contexts:[t],types:["ID"],data:s}),(c||0===c)&&s.buffer.push(c),s.buffer.push("\r\n      "),c=a.view.call(t,"Komodo.Controls.Button",{hash:{class:"float-right",action:"ChangeDeviceOwnership",contentBinding:"dataModel.selectedGridItem",disableBinding:"dataModel.disabledRequestButton"},hashTypes:{class:"STRING",action:"STRING",contentBinding:"STRING",disableBinding:"STRING"},hashContexts:{class:t,action:t,contentBinding:t,disableBinding:t},inverse:m.noop,fn:m.program(5,i,s),contexts:[t],types:["ID"],data:s}),(c||0===c)&&s.buffer.push(c),s.buffer.push("\r\n    </div>\r\n  </div>\r\n</div>"),""}),Ember.TEMPLATES.ChangeOfCountrySwapView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o,s;return t.buffer.push("\r\n            "),t.buffer.push(c((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:changeOfCountry.swap",s):i.call(e,"loc","locale.manageStock:changeOfCountry.swap",s)))),t.buffer.push("\r\n        "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var n,i=a.helperMissing,c=this.escapeExpression,l=this;return s.buffer.push('<div class="modal-max-size">\r\n    <br />\r\n    <table>\r\n        <tr>\r\n            <td>'),s.buffer.push(c(a.view.call(t,"Komodo.Controls.TextField",{hash:{
label:"~locale.manageStock:changeOfCountry.decoderSerialNumber~",valueBinding:"dataModel.DeviceSerialNumber",disabled:"true"},hashTypes:{label:"STRING",valueBinding:"STRING",disabled:"STRING"},hashContexts:{label:t,valueBinding:t,disabled:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("</td>\r\n            <td>"),s.buffer.push(c(a.view.call(t,"Komodo.Controls.TextField",{hash:{label:"~locale.manageStock:changeOfCountry.smartcardNumber~",valueBinding:"dataModel.SmartcardSerialNumber",disabled:"true"},hashTypes:{label:"STRING",valueBinding:"STRING",disabled:"STRING"},hashContexts:{label:t,valueBinding:t,disabled:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("</td>\r\n        </tr>\r\n        <tr>\r\n            <td>"),s.buffer.push(c(a.view.call(t,"Komodo.Controls.TextField",{hash:{label:"~locale.manageStock:changeOfCountry.newSmartcardSerialNumber~",valueBinding:"dataModel.NewSmartcardSerialNumber"},hashTypes:{label:"STRING",valueBinding:"STRING"},hashContexts:{label:t,valueBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("</td>\r\n            <td></td>\r\n        </tr>\r\n    </table>\r\n    <br />\r\n    <div>\r\n        "),s.buffer.push(c(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:changeOfCountry.enterSmartcard~",class:"error-text",visibleBinding:"dataModel.emptyNewSmartcardSerialNumber"},hashTypes:{text:"STRING",class:"STRING",visibleBinding:"STRING"},hashContexts:{text:t,class:t,visibleBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n\t\t"),s.buffer.push(c(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:changeOfCountry.smartcardLessThan~",class:"error-text",visibleBinding:"dataModel.maxNewSmartcardSerialNumber"},hashTypes:{text:"STRING",class:"STRING",visibleBinding:"STRING"},hashContexts:{text:t,class:t,visibleBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push('\r\n    </div>\r\n    <div class="float-right">\r\n        '),n=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"swap",class:"float-right"},hashTypes:{action:"STRING",class:"STRING"},hashContexts:{action:t,class:t},inverse:l.noop,fn:l.program(1,r,s),contexts:[t],types:["ID"],data:s}),(n||0===n)&&s.buffer.push(n),s.buffer.push("\r\n    </div>\r\n    <br />\r\n</div>\r\n"),""}),Ember.TEMPLATES.ChangeOfCountryView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){return t.buffer.push("\r\n    <div>\r\n        <br />\r\n        <hr />\r\n        "),t.buffer.push(u(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{label:"~locale.manageStock:changeOfCountry.selectBusinessUnit~",contentBinding:"dataModel.businessUnits",displayPath:"title",valuePath:"value",valueBinding:"dataModel.screenSelectedBusinessUnits",visibleBinding:"dataModel.businessUnitFlag"},hashTypes:{label:"STRING",contentBinding:"STRING",displayPath:"STRING",valuePath:"STRING",valueBinding:"STRING",visibleBinding:"STRING"},hashContexts:{label:e,contentBinding:e,displayPath:e,valuePath:e,valueBinding:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    </div>\r\n    "),""}function n(e,t){var o;return t.buffer.push('\r\n        <table width="100%">\r\n            <tr>\r\n                <td>\r\n                    '),t.buffer.push(u(a.view.call(e,"Komodo.Controls.TextField",{hash:{label:"~locale.manageStock:changeOfCountry.deviceSerialNumber~",valueBinding:"dataModel.DeviceSerialNumber"},hashTypes:{label:"STRING",valueBinding:"STRING"},hashContexts:{label:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                </td>\r\n                <td>\r\n                    "),t.buffer.push(u(a.view.call(e,"Komodo.Controls.TextField",{hash:{label:"~locale.manageStock:changeOfCountry.smartcardSerialNumber~",valueBinding:"dataModel.SmartcardSerialNumber"},hashTypes:{label:"STRING",valueBinding:"STRING"},hashContexts:{label:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                </td>\r\n            </tr>\r\n        </table>\r\n        "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"transfer",class:"float-right"},hashTypes:{action:"STRING",class:"STRING"},hashContexts:{action:e,class:e},inverse:m.noop,fn:m.program(4,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        <br />\r\n        <br />\r\n        "),""}function i(e,t){var o,s;return t.buffer.push("\r\n            "),t.buffer.push(u((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:changeOfCountry.transfer",s):h.call(e,"loc","locale.manageStock:changeOfCountry.transfer",s)))),t.buffer.push("\r\n        "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var c,l,d,u=this.escapeExpression,h=a.helperMissing,m=this;return s.buffer.push('<div class="no-banner-padding">\r\n    <div width="90%">\r\n        <span class="komodo-heading">'),s.buffer.push(u((l=a.loc||t&&t.loc,d={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},l?l.call(t,"locale.manageStock:changeOfCountry.title",d):h.call(t,"loc","locale.manageStock:changeOfCountry.title",d)))),s.buffer.push('</span>\r\n        <span class="float-right">\r\n            <b>\r\n                <a href="#/manageViewing">&lt;BACK</a>\r\n            </b>\r\n        </span>\r\n    </div>\r\n    '),c=a.if.call(t,"dataModel.businessUnitFlag",{hash:{},hashTypes:{},hashContexts:{},inverse:m.noop,fn:m.program(1,r,s),contexts:[t],types:["ID"],data:s}),(c||0===c)&&s.buffer.push(c),s.buffer.push("\r\n    <hr />\r\n    <div>\r\n        "),c=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageStock:changeOfCountry.viewTitle~"},hashTypes:{title:"STRING"},hashContexts:{title:t},inverse:m.noop,fn:m.program(3,n,s),contexts:[t],types:["ID"],data:s}),(c||0===c)&&s.buffer.push(c),s.buffer.push("\r\n    </div>\r\n</div>\r\n"),""}),Ember.TEMPLATES.ChangeResidenceTypeView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o,s,r;return t.buffer.push('\r\n\r\n    <table id="tableExistingProducts" class="table table-bordered komodo-datagrid" width="100%">\r\n        <tbody>\r\n            <tr>\r\n                <th>'),t.buffer.push(S((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:changeResidenceType.device",r):D.call(e,"loc","locale.manageviewing:changeResidenceType.device",r)))),t.buffer.push("</th>\r\n                <th>"),t.buffer.push(S((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:changeResidenceType.address",r):D.call(e,"loc","locale.manageviewing:changeResidenceType.address",r)))),t.buffer.push("</th>\r\n                <th>"),t.buffer.push(S((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:changeResidenceType.residenceType",r):D.call(e,"loc","locale.manageviewing:changeResidenceType.residenceType",r)))),t.buffer.push("</th>\r\n                <th>"),t.buffer.push(S((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:changeResidenceType.action",r):D.call(e,"loc","locale.manageviewing:changeResidenceType.action",r)))),t.buffer.push("</th>\r\n            </tr>\r\n            "),o=a.if.call(e,"showGridData",{hash:{},hashTypes:{},hashContexts:{},inverse:y.program(5,c,t),fn:y.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </tbody>\r\n    </table>\r\n   \r\n    "),o=a.if.call(e,"isDeviceSelected",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(7,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),""}function n(e,t){var o;return t.buffer.push("\r\n            "),o=a.each.call(e,"device","in","gridData",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(3,i,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),""}function i(e,t){var o,s,r;return t.buffer.push("\r\n            <tr>\r\n                <td>"),o=a._triageMustache.call(e,"device.deviceName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" "),o=a._triageMustache.call(e,"device.deviceSerialNo",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                <td>"),o=a._triageMustache.call(e,"device.addressDetails.dlAddress",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                <td>"),o=a._triageMustache.call(e,"device.locationDetails",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n                <td>\r\n                    "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.CoreRadioButton",{hash:{valueBinding:"selectedDevice",optionValueBinding:"device.deviceSerialNo"},hashTypes:{valueBinding:"STRING",optionValueBinding:"STRING"},hashContexts:{valueBinding:e,optionValueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(S((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:changeResidenceType.change",r):D.call(e,"loc","locale.manageviewing:changeResidenceType.change",r)))),t.buffer.push("<br />\r\n\r\n                </td>\r\n            </tr>\r\n            "),""}function c(e,t){return t.buffer.push('\r\n            <tr>\r\n                <td colspan="4" class="sub-heading" style="text-align: center;">\r\n                    <i>'),t.buffer.push(S(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:changeResidenceType.noDeviceAvailable~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</i>\r\n                </td>\r\n            </tr>\r\n            "),""}function l(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(8,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.if.call(e,"isOtherLocation",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(16,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function d(e,t){var o;return t.buffer.push("\r\n    "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{visibleBinding:"isChangeAgreementVisible",checkedBinding:"convertAddress"},hashTypes:{visibleBinding:"STRING",checkedBinding:"STRING"},hashContexts:{visibleBinding:e,checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(S(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{visibleBinding:"isChangeAgreementVisible",textBinding:"changeAgreementText"},hashTypes:{visibleBinding:"STRING",textBinding:"STRING"},hashContexts:{visibleBinding:e,textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <hr /><br />\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(9,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(14,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function u(e,t){var o;return t.buffer.push("\r\n    "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{displayPath:"value",valuePath:"key",disableBinding:"disableChargePeriod",contentBinding:"chargePeriods",valueBinding:"selectedChargePeriod",label:"~locale.manageviewing:changeResidenceType.chargePeriod~"},hashTypes:{displayPath:"STRING",valuePath:"STRING",disableBinding:"STRING",contentBinding:"STRING",valueBinding:"STRING",label:"STRING"},hashContexts:{displayPath:e,valuePath:e,disableBinding:e,contentBinding:e,valueBinding:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),o=a.if.call(e,"isMOPRequiredForHH",{hash:{},hashTypes:{},hashContexts:{},inverse:y.program(12,m,t),fn:y.program(10,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"1",label:"~locale.manageviewing:changeResidenceType.newLocation~",contentBinding:"listOfNewAddresses",valueBinding:"selectedNewAddress",disableBinding:"disableNewAddress",visibleBinding:"isNewLocationVisible",optionLabelPath:"content.dlAddress",optionValuePath:"content",prompt:"~locale.manageviewing:changeResidenceType.selectAddress~"},hashTypes:{tabindex:"STRING",label:"STRING",contentBinding:"STRING",valueBinding:"STRING",disableBinding:"STRING",visibleBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING"},hashContexts:{tabindex:e,label:e,contentBinding:e,valueBinding:e,disableBinding:e,visibleBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n\r\n    "),""}function h(e,t){t.buffer.push("\r\n    ")}function m(e,t){return t.buffer.push("\r\n    "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"1",label:"~locale.manageviewing:changeResidenceType.paymentDay~",contentBinding:"debitOderDays",valueBinding:"paymentDay",disableBinding:"disablePaymentDay",optionLabelPath:"content.value",optionValuePath:"content.key"},hashTypes:{tabindex:"STRING",label:"STRING",contentBinding:"STRING",valueBinding:"STRING",disableBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,label:e,contentBinding:e,valueBinding:e,disableBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function g(e,t){return t.buffer.push("\r\n    "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{label:"~locale.manageviewing:changeResidenceType.methodOfPayment~",displayPath:"title",valuePath:"value",contentBinding:"paymentTypesList",valueBinding:"selectedMOP",disableBinding:"disableMethodOfPayment"},hashTypes:{label:"STRING",displayPath:"STRING",valuePath:"STRING",contentBinding:"STRING",valueBinding:"STRING",disableBinding:"STRING"},hashContexts:{label:e,displayPath:e,valuePath:e,contentBinding:e,valueBinding:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:changeResidenceType.changeMOPNote~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br /><br />\r\n    "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"1",label:"~locale.manageviewing:changeResidenceType.residenceType~",contentBinding:"residenceTypes",valueBinding:"selectedNewResidenceType",disableBinding:"disableResidenceType",optionLabelPath:"content.CanonicalValue",optionValuePath:"content.CanonicalKey",prompt:"~locale.manageviewing:changeResidenceType.selectResidenceType~"},hashTypes:{tabindex:"STRING",label:"STRING",contentBinding:"STRING",valueBinding:"STRING",disableBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING"},hashContexts:{tabindex:e,label:e,contentBinding:e,valueBinding:e,disableBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),""}function p(e,t){return t.buffer.push("\r\n    "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.Address",{hash:{addressBinding:"addressInformation",multipleAddress:!1},hashTypes:{addressBinding:"STRING",multipleAddress:"BOOLEAN"},hashContexts:{addressBinding:e,multipleAddress:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function v(e,t){var o,s;t.buffer.push(S((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:changeResidenceType.changeResidence",s):D.call(e,"loc","locale.manageviewing:changeResidenceType.changeResidence",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var f,b,C,S=this.escapeExpression,D=a.helperMissing,y=this;return s.buffer.push("<div "),s.buffer.push(S(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n    <span class="komodo-heading">'),s.buffer.push(S((b=a.loc||t&&t.loc,C={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},b?b.call(t,"locale.manageviewing:changeResidenceType.useCaseTitle",C):D.call(t,"loc","locale.manageviewing:changeResidenceType.useCaseTitle",C)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n        <b>\r\n            <a href="#/manageViewing">&lt;'),s.buffer.push(S((b=a.loc||t&&t.loc,C={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},b?b.call(t,"locale.manageviewing:changeResidenceType.back",C):D.call(t,"loc","locale.manageviewing:changeResidenceType.back",C)))),s.buffer.push("</a>\r\n        </b>\r\n    </span>\r\n    <hr />\r\n    "),f=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:changeResidenceType.deviceLocation~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:y.noop,fn:y.program(1,r,s),contexts:[t],types:["ID"],data:s}),(f||0===f)&&s.buffer.push(f),s.buffer.push('\r\n    <br />\r\n    <div style="float:right;">\r\n        '),f=a.view.call(t,"Komodo.Controls.Button",{hash:{class:"btn-success",action:"publishUpdateEstablishmentTypeEvent",disableBinding:"disableChangeResidenceButton",tabindex:"28"},hashTypes:{class:"STRING",action:"STRING",disableBinding:"STRING",tabindex:"STRING"},hashContexts:{class:t,action:t,disableBinding:t,tabindex:t},inverse:y.noop,fn:y.program(18,v,s),contexts:[t],types:["ID"],data:s}),(f||0===f)&&s.buffer.push(f),s.buffer.push("\r\n    </div>\r\n</div>\r\n"),""}),Ember.TEMPLATES.CommercialDeviceInfoView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n  \x3c!--This is Device and Smartcard Details view--\x3e\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{class:"sub-heading",text:"~locale.manageviewing:deviceInfo.deviceAndSmartcardDetails~"},hashTypes:{class:"STRING",text:"STRING"},hashContexts:{class:e,text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  <hr/>\r\n\r\n  \x3c!--This is Product Details view--\x3e\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{class:"sub-heading",text:"~locale.manageviewing:deviceInfo.productDetails~"},hashTypes:{class:"STRING",text:"STRING"},hashContexts:{class:e,text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(7,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <hr/>\r\n\r\n  \x3c!--This is Other Details view--\x3e\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{class:"sub-heading",text:"~locale.manageviewing:deviceInfo.otherDetails~"},hashTypes:{class:"STRING",text:"STRING"},hashContexts:{class:e,text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(14,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function n(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:M.noop,fn:M.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:M.noop,fn:M.program(5,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function i(e,t){return t.buffer.push("\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.deviceName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.deviceName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.deviceStatus~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.deviceStatus"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.smartcardName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.smartcardName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.smartcardStatus~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.smartcardStatus"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),""}function c(e,t){return t.buffer.push("\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.deviceNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.deviceNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.warrantyEndDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.warrantyEndDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.smartcardNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.smartcardNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.viewingPeriod~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.viewingPeriod"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),""}function l(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:M.noop,fn:M.program(8,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:M.noop,fn:M.program(11,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function d(e,t){var o;return t.buffer.push("\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.principalPackage~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.principalPackage"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.addOnPackage~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <table>\r\n    <tbody>\r\n    "),o=a.each.call(e,"item","in","deviceInfoModel.addOnPackage",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(9,u,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </tbody>\r\n  </table>\r\n  <br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.services~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.services"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),""}function u(e,t){return t.buffer.push('\r\n    <tr>\r\n      <td style="padding: 0">\r\n        '),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"item",id:"addOnPackage"},hashTypes:{textBinding:"STRING",id:"STRING"},hashContexts:{textBinding:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      </td>\r\n    </tr>\r\n    "),""}function h(e,t){var o;return t.buffer.push("\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.principalStatus~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.principalStatus"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.addOnStatus~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <table>\r\n    <tbody>\r\n    "),o=a.each.call(e,"item","in","deviceInfoModel.addOnStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(12,m,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </tbody>\r\n  </table>\r\n  <br/>\r\n  "),""}function m(e,t){return t.buffer.push('\r\n    <tr>\r\n      <td style="padding: 0">\r\n        '),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"item",id:"addOnStatus"},hashTypes:{textBinding:"STRING",id:"STRING"},hashContexts:{textBinding:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      </td>\r\n    </tr>\r\n    "),""}function g(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:M.noop,fn:M.program(15,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:M.noop,fn:M.program(17,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function p(e,t){return t.buffer.push("\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"1",label:"~locale.manageviewing:deviceInfo.chargePeriod~",valueBinding:"deviceInfoModel.chargePeriod",contentBinding:"chargePeriodlst",optionLabelPath:"content.value",optionValuePath:"content.key",class:"info-heading",disabledBinding:"deviceInfoModel.disableChargePeriod"},hashTypes:{tabindex:"STRING",label:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",class:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:e,label:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,class:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.contractEndDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.contractEndDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.quoteBasedDisconnectDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),
t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.quoteBasedDisconnectDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),""}function v(e,t){return t.buffer.push("\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.contractStartDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.contractStartDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.chargeUntilDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.chargeUntilDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),""}function f(e,t){var o,s,r;return t.buffer.push('\r\n  <table width="100%">\r\n    <tr>\r\n      <td>\r\n        <table class="table table-bordered komodo-datagrid">\r\n          <tr>\r\n            <th width="10%">'),t.buffer.push(x((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addressInformation.type",r):T.call(e,"loc","locale.commercialcustomer:addressInformation.type",r)))),t.buffer.push('</th>\r\n            <th width="70%">'),t.buffer.push(x((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addressInformation.addAddress",r):T.call(e,"loc","locale.commercialcustomer:addressInformation.addAddress",r)))),t.buffer.push('</th>\r\n            <th width="10%">'),t.buffer.push(x((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addressInformation.primary",r):T.call(e,"loc","locale.commercialcustomer:addressInformation.primary",r)))),t.buffer.push('</th>\r\n            <th width="10%">'),t.buffer.push(x((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.actions",r):T.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.actions",r)))),t.buffer.push("</th>\r\n          </tr>\r\n          <tr>\r\n            <td>"),o=a._triageMustache.call(e,"deviceInfoModel.type",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n            <td>"),o=a._triageMustache.call(e,"deviceInfoModel.displayAddress",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n            <td>"),o=a._triageMustache.call(e,"deviceInfoModel.isPrimaryString",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n            <td>"),t.buffer.push(x(a.view.call(e,"Komodo.Controls.Link",{hash:{action:"editAddress",text:"~locale.commercialcustomer:addDevicesAndPackages.edit~",contentBinding:"deviceInfoModel"},hashTypes:{action:"STRING",text:"STRING",contentBinding:"STRING"},hashContexts:{action:e,text:e,contentBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</td>\r\n          </tr>\r\n        </table>\r\n      </td>\r\n    </tr>\r\n  </table>\r\n\r\n  <div id="commercialDeviceInfoAddressPanel" style="display: none;">\r\n    '),t.buffer.push(x(a.view.call(e,"Komodo.Controls.Address",{hash:{addressBinding:"addressInformation",multipleAddress:!1},hashTypes:{addressBinding:"STRING",multipleAddress:"BOOLEAN"},hashContexts:{addressBinding:e,multipleAddress:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n\r\n    <div style="float:right;">\r\n      '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"updateAgreementAddress",class:"btn-success"},hashTypes:{action:"STRING",class:"STRING"},hashContexts:{action:e,class:e},inverse:M.noop,fn:M.program(20,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </div>\r\n    <br/>\r\n  </div>\r\n  "),""}function b(e,t){var o,s;t.buffer.push(x((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.customer:customerInformation.submit",s):T.call(e,"loc","locale.customer:customerInformation.submit",s))))}function C(e,t){var o;return t.buffer.push("\r\n  "),o=a.if.call(e,"showGrid",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(23,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function S(e,t){return t.buffer.push("\r\n  "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.DataGrid",{hash:{canSort:!0,pageSize:5,performsValidation:!0,canDelete:!1,canEdit:!1,editMode:"cell",canSelect:!0,commandItemBinding:"deviceInfoModel.commandGridItem",commandItemTypeBinding:"deviceInfoModel.commandGridItemType",contentBinding:"deviceInfoModel.csiLogs",columnsBinding:"dataGridColumnsDeviceInfo"},hashTypes:{canSort:"BOOLEAN",pageSize:"INTEGER",performsValidation:"BOOLEAN",canDelete:"BOOLEAN",canEdit:"BOOLEAN",editMode:"STRING",canSelect:"BOOLEAN",commandItemBinding:"STRING",commandItemTypeBinding:"STRING",contentBinding:"STRING",columnsBinding:"STRING"},hashContexts:{canSort:e,pageSize:e,performsValidation:e,canDelete:e,canEdit:e,editMode:e,canSelect:e,commandItemBinding:e,commandItemTypeBinding:e,contentBinding:e,columnsBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function D(e,t){var o,s;t.buffer.push(x((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceInfo.btnCancel",s):T.call(e,"loc","locale.manageviewing:deviceInfo.btnCancel",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var y,w,I,x=this.escapeExpression,M=this,T=a.helperMissing;return s.buffer.push("<div "),s.buffer.push(x(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(x((w=a.loc||t&&t.loc,I={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},w?w.call(t,"locale.manageviewing:deviceInfo.deviceInfoTitle",I):T.call(t,"loc","locale.manageviewing:deviceInfo.deviceInfoTitle",I)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/commercialManageViewing">&lt;'),s.buffer.push(x((w=a.loc||t&&t.loc,I={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},w?w.call(t,"locale.manageviewing:deviceInfo.back",I):T.call(t,"loc","locale.manageviewing:deviceInfo.back",I)))),s.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n\r\n  \x3c!--This is Full Device Information view--\x3e\r\n  "),y=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:deviceInfo.fullDeviceInformation~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:M.noop,fn:M.program(1,r,s),contexts:[t],types:["ID"],data:s}),(y||0===y)&&s.buffer.push(y),s.buffer.push("\r\n\r\n\r\n  \x3c!--Device Address view--\x3e\r\n  "),y=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.commercialcustomer:addressInformation.aiTitle~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:M.noop,fn:M.program(19,f,s),contexts:[t],types:["ID"],data:s}),(y||0===y)&&s.buffer.push(y),s.buffer.push(" \r\n  \r\n  \x3c!--This is Grid for CSI Log--\x3e\r\n  "),y=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:deviceInfo.cSILogs~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:M.noop,fn:M.program(22,C,s),contexts:[t],types:["ID"],data:s}),(y||0===y)&&s.buffer.push(y),s.buffer.push('\r\n  <br/>\r\n  \x3c!--Button--\x3e\r\n  <div style="float:right;">\r\n    '),y=a.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"3",action:"cancel",class:"btn-inverse"},hashTypes:{tabindex:"STRING",action:"STRING",class:"STRING"},hashContexts:{tabindex:t,action:t,class:t},inverse:M.noop,fn:M.program(25,D,s),contexts:[t],types:["ID"],data:s}),(y||0===y)&&s.buffer.push(y),s.buffer.push("\r\n  </div>\r\n</div>\r\n"),""}),Ember.TEMPLATES.CommercialDisconnectView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n\r\n  \x3c!--Viewing Information Start--\x3e\r\n  "),t.buffer.push(Q(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:viewingInformation.viewingFilter~",id:"viewLabel",class:"sub-heading"},hashTypes:{text:"STRING",id:"STRING",class:"STRING"},hashContexts:{text:e,id:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:q.noop,fn:q.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  \r\n  "),o=a.if.call(e,"showDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:q.program(42,K,t),fn:q.program(7,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function n(e,t){var o;return t.buffer.push("\r\n  \x3c!--Column 1--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:q.noop,fn:q.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  \x3c!--Column 2--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:q.noop,fn:q.program(5,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function i(e,t){return t.buffer.push("\r\n  "),t.buffer.push(Q(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:customerprofile.establishmentName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(Q(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"1",valueBinding:"viewModel.establishmentName",prompt:"~locale.commercialcustomer:viewingInformation.establishmentPrompt~",contentBinding:"viewModel.establishments",optionLabelPath:"content",optionValuePath:"content"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,valueBinding:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),""}function c(e,t){return t.buffer.push("\r\n  "),t.buffer.push(Q(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:viewingInformation.viewingLocation~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(Q(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"2",valueBinding:"viewModel.viewingLocation",prompt:"~locale.commercialcustomer:viewingInformation.viewingLocationPrompt~",contentBinding:"viewModel.viewingLocations",optionLabelPath:"content",optionValuePath:"content"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,valueBinding:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),""}function l(e,t){var o;return t.buffer.push("  \r\n  <hr />\r\n  "),o=a.if.call(e,"commercialDisconnectDetailView",{hash:{},hashTypes:{},hashContexts:{},inverse:q.program(30,M,t),fn:q.program(8,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <hr />\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:q.noop,fn:q.program(36,B,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function d(e,t){var o;return t.buffer.push("\r\n  \x3c!--Disconnect Package View - South Africa - Information Start--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:q.noop,fn:q.program(9,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  \x3c!--Disconnect Package View - South Africa - Information End--\x3e\r\n  "),""}function u(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-12"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:q.noop,fn:q.program(10,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function h(e,t){var o;return t.buffer.push("\r\n  "),t.buffer.push(Q(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:addDevicesAndPackages.packageInformation~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  "),o=a.if.call(e,"showPrincipalPackagesData",{hash:{},hashTypes:{},hashContexts:{},inverse:q.noop,fn:q.program(11,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),o=a.if.call(e,"showAddOnPackagesData",{hash:{},hashTypes:{},hashContexts:{},inverse:q.noop,fn:q.program(19,C,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  "),t.buffer.push(Q(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"viewModel.disconnectAllPackages"},hashTypes:{checkedBinding:"STRING"},hashContexts:{checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" "),t.buffer.push(Q(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:addDevicesAndPackages.disconnectAllPackages~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <hr/>\r\n  "),t.buffer.push(Q(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:addDevicesAndPackages.disconnectSmartcards~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:q.noop,fn:q.program(25,w,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  "),t.buffer.push(Q(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"viewModel.disconnectAllSmartcards"},hashTypes:{checkedBinding:"STRING"},hashContexts:{checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" "),t.buffer.push(Q(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:addDevicesAndPackages.disconnectAllSmartcards~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function m(e,t){var o;return t.buffer.push("\r\n  "),t.buffer.push(Q(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:addDevicesAndPackages.principalPackage~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:q.noop,fn:q.program(12,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <br/>\r\n  "),""}function g(e,t){var o;return t.buffer.push("\r\n  \x3c!--Column 1--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-6"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:q.noop,fn:q.program(13,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  \x3c!--Column 2--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-6"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:q.noop,fn:q.program(16,f,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function p(e,t){var o;return t.buffer.push("\r\n  "),o=a.each.call(e,"smartcard","in","principalPackagesDataFirstColumn",{hash:{},hashTypes:{},hashContexts:{},inverse:q.noop,fn:q.program(14,v,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function v(e,t){return t.buffer.push("\r\n  "),t.buffer.push(Q(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"smartcard.isSelected",tabindex:"5"},hashTypes:{checkedBinding:"STRING",tabindex:"STRING"},hashContexts:{checkedBinding:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(Q(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"smartcard.description"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br/>\r\n  "),""}function f(e,t){var o;return t.buffer.push("\r\n  "),o=a.each.call(e,"smartcard","in","principalPackagesDataSecondColumn",{hash:{},hashTypes:{},hashContexts:{},inverse:q.noop,fn:q.program(17,b,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function b(e,t){return t.buffer.push("\r\n  "),t.buffer.push(Q(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"smartcard.isSelected",tabindex:"6"},hashTypes:{checkedBinding:"STRING",tabindex:"STRING"},hashContexts:{checkedBinding:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(Q(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"smartcard.description"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br/>\r\n  "),""}function C(e,t){var o;return t.buffer.push("\r\n  "),t.buffer.push(Q(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:addDevicesAndPackages.addOnPackages~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:q.noop,fn:q.program(20,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function S(e,t){var o;return t.buffer.push("\r\n  \x3c!--Column 1--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-6"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:q.noop,fn:q.program(21,D,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  \x3c!--Column 2--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-6"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:q.noop,fn:q.program(23,y,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function D(e,t){var o;return t.buffer.push("\r\n  "),o=a.each.call(e,"smartcard","in","addOnPackagesDataFirstColumn",{hash:{},hashTypes:{},hashContexts:{},inverse:q.noop,fn:q.program(14,v,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function y(e,t){var o;return t.buffer.push("\r\n  "),o=a.each.call(e,"smartcard","in","addOnPackagesDataSecondColumn",{hash:{},hashTypes:{},hashContexts:{},inverse:q.noop,fn:q.program(17,b,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function w(e,t){var o;return t.buffer.push("\r\n  \x3c!--Column 1--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-6"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:q.noop,fn:q.program(26,I,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  \x3c!--Column 2--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-6"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:q.noop,fn:q.program(28,x,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function I(e,t){var o;return t.buffer.push("\r\n  "),o=a.each.call(e,"smartcard","in","smartcardsDataFirstColumn",{hash:{},hashTypes:{},hashContexts:{},inverse:q.noop,fn:q.program(14,v,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function x(e,t){var o;return t.buffer.push("\r\n  "),o=a.each.call(e,"smartcard","in","smartcardsDataSecondColumn",{hash:{},hashTypes:{},hashContexts:{},inverse:q.noop,fn:q.program(17,b,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function M(e,t){var o;return t.buffer.push("\r\n  \x3c!--Disconnect Package View - Africa - Information Start--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:q.noop,fn:q.program(31,T,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  \x3c!--Disconnect Package View - Africa - Information End--\x3e\r\n  "),""}function T(e,t){var o;return t.buffer.push("\r\n  \x3c!--Column 1--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-12"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:q.noop,fn:q.program(32,N,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function N(e,t){var o,s,r;return t.buffer.push("\r\n  \x3c!--Devices Information Start--\x3e\r\n  "),t.buffer.push(Q(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:viewingInformation.viewingDevices~",id:"deviceLabel",class:"sub-heading"},hashTypes:{text:"STRING",id:"STRING",class:"STRING"},hashContexts:{text:e,id:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n  <table id="packageGrid" class="table table-bordered komodo-datagrid">\r\n      <tr>\r\n        <th>'),t.buffer.push(Q((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.deviceNumber",r):$.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.deviceNumber",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(Q((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.smartcardNumber",r):$.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.smartcardNumber",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(Q((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.principalPackage",r):$.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.principalPackage",r)))),t.buffer.push('</th>\r\n        <th style="text-align:center">'),t.buffer.push(Q((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"Is Add-on",r):$.call(e,"loc","Is Add-on",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(Q((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"Status",r):$.call(e,"loc","Status",r)))),t.buffer.push('</th>        \r\n        <th style="text-align:center;vertical-align:middle;">\r\n          '),t.buffer.push(Q(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"viewModel.disconnectReconnectAll",appearance:"switch"},hashTypes:{checkedBinding:"STRING",appearance:"STRING"},hashContexts:{checkedBinding:e,appearance:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </th>\r\n      </tr>\r\n      "),o=a.each.call(e,"item","in","viewModel.selectedproductData",{hash:{},hashTypes:{},hashContexts:{},inverse:q.noop,fn:q.program(33,P,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </table>\r\n  "),""}function P(e,t){var o;return t.buffer.push("\r\n      <tr>\r\n        <td>"),o=a._triageMustache.call(e,"item.deviceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        <td>"),o=a._triageMustache.call(e,"item.smartCardNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        <td>"),o=a._triageMustache.call(e,"item.prinPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>        \r\n        <td style="text-align:center">'),o=a._triageMustache.call(e,"item.isAddon",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        <td>"),o=a._triageMustache.call(e,"item.prinPckStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n        <td style="text-align:center;vertical-align:middle;">\r\n          '),o=a.view.call(e,"Komodo.Controls.ActionView",{hash:{action:"toggleLineItem",target:"controller",contextBinding:"item"},hashTypes:{action:"STRING",target:"STRING",contextBinding:"STRING"},hashContexts:{action:e,target:e,contextBinding:e},inverse:q.noop,fn:q.program(34,O,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n      "),""}function O(e,t){return t.buffer.push("\r\n          "),t.buffer.push(Q(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"item.isSelected",appearance:"switch"},hashTypes:{checkedBinding:"STRING",appearance:"STRING"},hashContexts:{checkedBinding:e,appearance:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n          "),""}function B(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:q.noop,fn:q.program(37,R,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:q.noop,fn:q.program(39,k,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function R(e,t){return t.buffer.push("\r\n  "),t.buffer.push(Q(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{tabindex:"3",label:"~locale.manageviewing:disconnect.date~",valueBinding:"viewModel.contractEndDate",class:"info-heading",validatorBinding:"validators.contractEndDateValidator"},hashTypes:{tabindex:"STRING",label:"STRING",valueBinding:"STRING",class:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,label:e,valueBinding:e,class:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function k(e,t){var o;return t.buffer.push("\r\n  "),o=a.unless.call(e,"commercialDisconnectDetailView",{hash:{},hashTypes:{},hashContexts:{},inverse:q.noop,fn:q.program(40,A,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function A(e,t){return t.buffer.push("\r\n  "),t.buffer.push(Q(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"4",valueBinding:"viewModel.disconnectReason",label:"~locale.manageviewing:disconnect.disconnectReason~",validatorBinding:"validators.disconnectReasonValidator",contentBinding:"disconnectReasons",optionLabelPath:"content.CanonicalValue",optionValuePath:"content"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function K(e,t){var o;return t.buffer.push("\r\n  "),o=a.if.call(e,"showNoDataLabel",{hash:{},hashTypes:{},hashContexts:{},inverse:q.noop,fn:q.program(43,G,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function G(e,t){var o;return t.buffer.push("\r\n  <hr />\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:q.noop,fn:q.program(44,L,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function L(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:q.noop,fn:q.program(45,E,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function E(e,t){return t.buffer.push("\r\n  "),t.buffer.push(Q(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:disconnect.messageDisconnect~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function V(e,t){var o;return t.buffer.push('\r\n  <br/>\r\n  <div style="float:right;">\r\n    '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{tabindex:"5",action:"disconnect"},hashTypes:{tabindex:"STRING",action:"STRING"},hashContexts:{tabindex:e,action:e},inverse:q.noop,fn:q.program(48,H,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  </div>\r\n  "),""}function H(e,t){var o,s;return t.buffer.push("\r\n    "),t.buffer.push(Q((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:disconnect.disconnectTitle",s):$.call(e,"loc","locale.manageviewing:disconnect.disconnectTitle",s)))),t.buffer.push("\r\n    "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var F,U,_,Q=this.escapeExpression,q=this,$=a.helperMissing;return s.buffer.push("<div "),s.buffer.push(Q(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),
s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(Q((U=a.loc||t&&t.loc,_={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},U?U.call(t,"locale.manageviewing:commercial.disconnectTitle",_):$.call(t,"loc","locale.manageviewing:commercial.disconnectTitle",_)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/commercialManageViewing">&lt;'),s.buffer.push(Q((U=a.loc||t&&t.loc,_={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},U?U.call(t,"locale.manageviewing:disconnect.back",_):$.call(t,"loc","locale.manageviewing:disconnect.back",_)))),s.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n  "),F=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:commercial.disconnectPackages~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:q.noop,fn:q.program(1,r,s),contexts:[t],types:["ID"],data:s}),(F||0===F)&&s.buffer.push(F),s.buffer.push("\r\n  "),F=a.if.call(t,"showDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:q.noop,fn:q.program(47,V,s),contexts:[t],types:["ID"],data:s}),(F||0===F)&&s.buffer.push(F),s.buffer.push("\r\n</div>\r\n"),""}),Ember.TEMPLATES.CommercialEditViewingView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n      \x3c!--Viewing Information Start--\x3e\r\n      "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:viewingInformation.viewingFilter~",id:"viewLabel",class:"sub-heading"},hashTypes:{text:"STRING",id:"STRING",class:"STRING"},hashContexts:{text:e,id:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      <br/>\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),o=a.if.call(e,"showDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(7,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.Pager",{hash:{mode:"content",contentBinding:"viewModel.selectedproductData",pageContentBinding:"virtualProductDataPageContent",itemsPerPage:"10"},hashTypes:{mode:"STRING",contentBinding:"STRING",pageContentBinding:"STRING",itemsPerPage:"STRING"},hashContexts:{mode:e,contentBinding:e,pageContentBinding:e,itemsPerPage:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function n(e,t){var o;return t.buffer.push("\r\n        \x3c!--Column 1--\x3e\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:T.noop,fn:T.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        \x3c!--Column 2--\x3e\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:T.noop,fn:T.program(5,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function i(e,t){return t.buffer.push("\r\n            "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"viewModel.establishmentName",tabindex:"1",label:"~locale.commercialcustomer:customerprofile.establishmentName~",validatorBinding:"validators.establishmentNameValidator"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,tabindex:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),""}function c(e,t){return t.buffer.push("\r\n            "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:viewingInformation.viewingLocation~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewModel.viewingLocation"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n        "),""}function l(e,t){var o,s,r;return t.buffer.push("\r\n      <hr />  \r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(8,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      <hr />\r\n      "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.customer:customerInformation.addresslblGridColumn~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(13,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      \x3c!--Viewing Information End--\x3e\r\n      <hr />\r\n      \x3c!--Devices Information Start--\x3e\r\n      "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:viewingInformation.viewingDevices~",id:"deviceLabel",class:"sub-heading"},hashTypes:{text:"STRING",id:"STRING",class:"STRING"},hashContexts:{text:e,id:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" "),o=a.if.call(e,"showCommercialAddDevice",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(18,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      <br /><br />\r\n      "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{tabindex:"1",placeholderBinding:"viewModel.searchTextPlaceholder",valueBinding:"viewModel.searchDeviceText"},hashTypes:{tabindex:"STRING",placeholderBinding:"STRING",valueBinding:"STRING"},hashContexts:{tabindex:e,placeholderBinding:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("&nbsp;\r\n      "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{tabindex:"2",action:"findDeviceSmartcard",size:"xs",class:"button-no-margin"},hashTypes:{tabindex:"STRING",action:"STRING",size:"STRING",class:"STRING"},hashContexts:{tabindex:e,action:e,size:e,class:e},inverse:T.noop,fn:T.program(20,f,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n      <br /><br />\r\n      <table id="packageGrid" class="table table-bordered komodo-datagrid">\r\n        <tr>\r\n          <th>'),t.buffer.push(M((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.deviceNumber",r):N.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.deviceNumber",r)))),t.buffer.push("</th>\r\n          <th>"),t.buffer.push(M((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.smartcardNumber",r):N.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.smartcardNumber",r)))),t.buffer.push("</th>\r\n          <th>"),t.buffer.push(M((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.principalPackage",r):N.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.principalPackage",r)))),t.buffer.push("</th>\r\n          <th>"),t.buffer.push(M((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.principalStatus",r):N.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.principalStatus",r)))),t.buffer.push("</th>\r\n          <th>"),t.buffer.push(M((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.addOnChannels",r):N.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.addOnChannels",r)))),t.buffer.push("</th>\r\n          <th>"),t.buffer.push(M((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.addOnStatus",r):N.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.addOnStatus",r)))),t.buffer.push("</th>\r\n          "),o=a.if.call(e,"isInsuranceAvailable",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(22,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </tr>\r\n        "),o=a.each.call(e,"item","in","virtualProductDataPageContent",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(24,C,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </table>\r\n      \x3c!--Devices Information End--\x3e\r\n      "),""}function d(e,t){var o;return t.buffer.push("\r\n        \x3c!--Column 1--\x3e\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:T.noop,fn:T.program(9,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        \x3c!--Column 2--\x3e\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:T.noop,fn:T.program(11,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function u(e,t){return t.buffer.push("\r\n            "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:paymentGroup.paymentGroup~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewModel.paymentGroup.Name"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            <br/>\r\n            "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:customerprofile.contractStartDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewModel.contractStartDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            <br/>\r\n            "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.chargePeriod~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"2",valueBinding:"viewModel.chargePeriod",contentBinding:"chargePeriods",optionLabelPath:"content.title",optionValuePath:"content.title"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n        "),""}function h(e,t){return t.buffer.push("\r\n            "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:customerprofile.viewingPlatform~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewModel.viewingPlatform"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            <br/>\r\n            "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:customerprofile.contractEndDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewModel.contractEndDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            <br/>\r\n            "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:customerprofile.viewingPoints~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{valueBinding:"viewModel.viewingPoints",tabindex:"3",validatorBinding:"validators.viewingPointsValidator"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,tabindex:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n        "),""}function m(e,t){var o;return t.buffer.push("\r\n         \x3c!--Agreement Address Information Start--\x3e\r\n         "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.DataGrid",{hash:{canSort:!1,performsValidation:!1,canSelect:!0,canDelete:!1,canEdit:!1,editMode:!1,pageSize:10,contentBinding:"agreementAddresses",columnsBinding:"agreementAddressGridColumns",commandItemBinding:"commandGridItem"},hashTypes:{canSort:"BOOLEAN",performsValidation:"BOOLEAN",canSelect:"BOOLEAN",canDelete:"BOOLEAN",canEdit:"BOOLEAN",editMode:"BOOLEAN",pageSize:"INTEGER",contentBinding:"STRING",columnsBinding:"STRING",commandItemBinding:"STRING"},hashContexts:{canSort:e,performsValidation:e,canSelect:e,canDelete:e,canEdit:e,editMode:e,pageSize:e,contentBinding:e,columnsBinding:e,commandItemBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n         <div id="commercialManageViewingEditPanel" style="display: none;">\r\n            \x3c!--Address Information--\x3e\r\n            <div id="commercialManageViewingAddressPanel">\r\n                '),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(14,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                <br />\r\n                "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.Address",{hash:{addressBinding:"addressInformation",multipleAddress:!1},hashTypes:{addressBinding:"STRING",multipleAddress:"BOOLEAN"},hashContexts:{addressBinding:e,multipleAddress:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                <div style="float:right;">\r\n                    '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"cancelAddressChanges",tabindex:"5",size:"xs",class:"button-no-margin",type:"inverse"},hashTypes:{action:"STRING",tabindex:"STRING",size:"STRING",class:"STRING",type:"STRING"},hashContexts:{action:e,tabindex:e,size:e,class:e,type:e},inverse:T.noop,fn:T.program(16,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </div>\r\n            </div>\r\n            \x3c!--Address Information End--\x3e\r\n       </div>\r\n       \x3c!--Agreement Address Information End--\x3e\r\n      "),""}function g(e,t){return t.buffer.push("\r\n                      "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"viewModel.copyBillingAddress",disabledBinding:"isCopyBillingAddressDisable",tabindex:"4"},hashTypes:{checkedBinding:"STRING",disabledBinding:"STRING",tabindex:"STRING"},hashContexts:{checkedBinding:e,disabledBinding:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:customerprofile.copyPaymentGroupAddress~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("&nbsp;&nbsp;&nbsp;"),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewModel.billingAddressString",class:"info-heading"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                "),""}function p(e,t){var o,s;t.buffer.push(M((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.customer:customerInformation.btnCancelHouseholdMemberAndAuthority",s):N.call(e,"loc","locale.customer:customerInformation.btnCancelHouseholdMemberAndAuthority",s))))}function v(e,t){return t.buffer.push(" "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.Link",{hash:{tabindex:"5",action:"addDevice",text:"~locale.customer:customerInformation.addButton~"},hashTypes:{tabindex:"STRING",action:"STRING",text:"STRING"},hashContexts:{tabindex:e,action:e,text:e},contexts:[e],types:["ID"],data:t}))),""}function f(e,t){var o,s;return t.buffer.push("\r\n      "),t.buffer.push(M((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.commercialcustomer:customerInformation.search",s):N.call(e,"loc","locale.commercialcustomer:customerInformation.search",s)))),t.buffer.push("\r\n      "),""}function b(e,t){var o,s;return t.buffer.push("\r\n          <th>"),t.buffer.push(M((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.commercialcustomer:addDevicesAndPackages.services",s):N.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.services",s)))),t.buffer.push("</th>\r\n          <th>"),t.buffer.push(M((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.commercialcustomer:addDevicesAndPackages.servicesStatus",s):N.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.servicesStatus",s)))),t.buffer.push("</th>\r\n          "),""}function C(e,t){var o;return t.buffer.push("\r\n        <tr>\r\n          <td>"),o=a._triageMustache.call(e,"item.deviceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n          <td>"),o=a._triageMustache.call(e,"item.smartCardNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n          <td>\r\n            <div>"),o=a._triageMustache.call(e,"item.prinPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n          </td>\r\n          <td>"),o=a._triageMustache.call(e,"item.prinPckStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n          <td>\r\n            <div>"),o=a._triageMustache.call(e,"item.addOnPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n          </td>\r\n          <td>"),o=a._triageMustache.call(e,"item.addOnPckStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n          "),o=a.if.call(e,"isInsuranceAvailable",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(25,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </tr>\r\n        "),""}function S(e,t){var o;return t.buffer.push("\r\n          <td>\r\n              <div>"),o=a._triageMustache.call(e,"item.insuranceServices",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n          </td>\r\n          <td>\r\n              "),o=a._triageMustache.call(e,"item.insuranceServicesStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </td>\r\n          "),""}function D(e,t){var o,s;t.buffer.push(M((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.commercialcustomer:customerInformation.save",s):N.call(e,"loc","locale.commercialcustomer:customerInformation.save",s))))}function y(e,t){var o,s;t.buffer.push(M((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.commercialcustomer:customerInformation.cancel",s):N.call(e,"loc","locale.commercialcustomer:customerInformation.cancel",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var w,I,x,M=this.escapeExpression,T=this,N=a.helperMissing;return s.buffer.push("<div "),s.buffer.push(M(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(M((I=a.loc||t&&t.loc,x={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},I?I.call(t,"locale.manageviewing:commercial.editViewTitle",x):N.call(t,"loc","locale.manageviewing:commercial.editViewTitle",x)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/commercialCustomerProfile">&lt;'),s.buffer.push(M((I=a.loc||t&&t.loc,x={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},I?I.call(t,"locale.manageAccount.editPaymentDetails:general.backLink",x):N.call(t,"loc","locale.manageAccount.editPaymentDetails:general.backLink",x)))),s.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n  "),w=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.commercialcustomer:viewingInformation.viewingInformationTitle~"},hashTypes:{title:"STRING"},hashContexts:{title:t},inverse:T.noop,fn:T.program(1,r,s),contexts:[t],types:["ID"],data:s}),(w||0===w)&&s.buffer.push(w),s.buffer.push('\r\n  <br/>\r\n  <div style="float:right;">\r\n    '),w=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"saveChanges",tabindex:"6",disabledBinding:"isButtonDisable"},hashTypes:{action:"STRING",tabindex:"STRING",disabledBinding:"STRING"},hashContexts:{action:t,tabindex:t,disabledBinding:t},inverse:T.noop,fn:T.program(27,D,s),contexts:[t],types:["ID"],data:s}),(w||0===w)&&s.buffer.push(w),s.buffer.push("\r\n    "),w=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"cancelChanges",tabindex:"7",type:"inverse"},hashTypes:{action:"STRING",tabindex:"STRING",type:"STRING"},hashContexts:{action:t,tabindex:t,type:t},inverse:T.noop,fn:T.program(29,y,s),contexts:[t],types:["ID"],data:s}),(w||0===w)&&s.buffer.push(w),s.buffer.push("\r\n  </div>\r\n  <br/>\r\n</div>"),""}),Ember.TEMPLATES.CommercialErrorCodesView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n      \x3c!--Clear Error Codes Information Start--\x3e\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),o=a.if.call(e,"showDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(7,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      \x3c!--Clear Error Codes Information End--\x3e\r\n  "),""}function n(e,t){var o;return t.buffer.push("\r\n        \x3c!--Column 1--\x3e\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:M.noop,fn:M.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        \x3c!--Column 2--\x3e\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:M.noop,fn:M.program(5,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function i(e,t){return t.buffer.push("\r\n            "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:customerprofile.establishmentName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"1",valueBinding:"viewModel.establishmentName",prompt:"~locale.commercialcustomer:viewingInformation.establishmentPrompt~",contentBinding:"viewModel.establishments",optionLabelPath:"content",optionValuePath:"content"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,valueBinding:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n        "),""}function c(e,t){return t.buffer.push("\r\n            "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:viewingInformation.viewingLocation~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"2",valueBinding:"viewModel.viewingLocation",prompt:"~locale.commercialcustomer:viewingInformation.viewingLocationPrompt~",contentBinding:"viewModel.viewingLocations",optionLabelPath:"content",optionValuePath:"content"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,valueBinding:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n        "),""}function l(e,t){var o;return t.buffer.push("\r\n      <hr />\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(8,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      <hr />\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(17,f,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      <hr />\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(20,C,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function d(e,t){var o;return t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-12"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:M.noop,fn:M.program(9,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function u(e,t){var o;return t.buffer.push("\r\n      "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:errorCodes.smartcards~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(10,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function h(e,t){var o;return t.buffer.push("\r\n      \x3c!--Column 1--\x3e\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-6"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:M.noop,fn:M.program(11,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      \x3c!--Column 2--\x3e\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-6"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:M.noop,fn:M.program(14,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function m(e,t){var o;return t.buffer.push("\r\n      "),o=a.each.call(e,"smartcard","in","smartCardsFirstColumn",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(12,g,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function g(e,t){return t.buffer.push("\r\n      "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"smartcard.isSelected",tabindex:"5"},hashTypes:{checkedBinding:"STRING",tabindex:"STRING"},hashContexts:{checkedBinding:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"smartcard.description"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br/>\r\n      "),""}function p(e,t){var o;return t.buffer.push("\r\n      "),o=a.each.call(e,"smartcard","in","smartCardsSecondColumn",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(15,v,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function v(e,t){return t.buffer.push("\r\n      "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"smartcard.isSelected",tabindex:"6"},hashTypes:{checkedBinding:"STRING",tabindex:"STRING"},hashContexts:{checkedBinding:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"smartcard.description"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br/>\r\n      "),""}function f(e,t){var o;return t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-12"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:M.noop,fn:M.program(18,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function b(e,t){return t.buffer.push("\r\n      <br />\r\n      "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{tabindex:"4",checkedBinding:"viewModel.allSmartcardSelected"},
hashTypes:{tabindex:"STRING",checkedBinding:"STRING"},hashContexts:{tabindex:e,checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:errorCodes.allSmartCards~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      <br/>\r\n      "),""}function C(e,t){var o;return t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-12"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:M.noop,fn:M.program(21,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function S(e,t){return t.buffer.push("\r\n      "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:errorCodes.errorCode~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"3",valueBinding:"viewModel.errorReasonCode",optionLabelPath:"content.CanonicalValue",optionValuePath:"content.CanonicalKey",contentBinding:"errorReasonCodes"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",contentBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,optionLabelPath:e,optionValuePath:e,contentBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      <br/>\r\n      "),""}function D(e,t){var o,s;t.buffer.push(x((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.commercialcustomer:errorCodes.clearErrors",s):T.call(e,"loc","locale.commercialcustomer:errorCodes.clearErrors",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var y,w,I,x=this.escapeExpression,M=this,T=a.helperMissing;return s.buffer.push("<div "),s.buffer.push(x(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(x((w=a.loc||t&&t.loc,I={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},w?w.call(t,"locale.manageviewing:commercial.clearErrorCodeTitle",I):T.call(t,"loc","locale.manageviewing:commercial.clearErrorCodeTitle",I)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/commercialManageViewing">&lt;'),s.buffer.push(x((w=a.loc||t&&t.loc,I={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},w?w.call(t,"locale.manageAccount.editPaymentDetails:general.backLink",I):T.call(t,"loc","locale.manageAccount.editPaymentDetails:general.backLink",I)))),s.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n  "),y=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.commercialcustomer:errorCodes.errorCodesTitle~"},hashTypes:{title:"STRING"},hashContexts:{title:t},inverse:M.noop,fn:M.program(1,r,s),contexts:[t],types:["ID"],data:s}),(y||0===y)&&s.buffer.push(y),s.buffer.push('\r\n  <br/>\r\n  <div style="float:right;">\r\n    '),y=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"clearErrorCodes",tabindex:"20",disabledBinding:"isButtonDisable"},hashTypes:{action:"STRING",tabindex:"STRING",disabledBinding:"STRING"},hashContexts:{action:t,tabindex:t,disabledBinding:t},inverse:M.noop,fn:M.program(23,D,s),contexts:[t],types:["ID"],data:s}),(y||0===y)&&s.buffer.push(y),s.buffer.push("\r\n  </div>\r\n  <br/>\r\n</div>"),""}),Ember.TEMPLATES.CommercialManageViewingView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n      \x3c!--Viewing Information Start--\x3e\r\n      "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:viewingInformation.viewingFilter~",id:"viewLabel",class:"sub-heading"},hashTypes:{text:"STRING",id:"STRING",class:"STRING"},hashContexts:{text:e,id:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      <br/>\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:O.noop,fn:O.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      <br />\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:O.noop,fn:O.program(6,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),o=a.if.call(e,"showDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:O.noop,fn:O.program(11,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      \x3c!--Devices Information Start--\x3e\r\n      "),o=a.if.call(e,"isDevicesVisible",{hash:{},hashTypes:{},hashContexts:{},inverse:O.noop,fn:O.program(20,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      \x3c!--Devices Information End--\x3e\r\n    "),""}function n(e,t){var o;return t.buffer.push("\r\n        \x3c!--Column 1--\x3e\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:O.noop,fn:O.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function i(e,t){var o;return t.buffer.push("\r\n            "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.decoderSmartcardNo~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br />\r\n            "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{tabindex:"1",placeholderBinding:"viewModel.searchTextPlaceholder",valueBinding:"viewModel.searchAgreementDeviceText"},hashTypes:{tabindex:"STRING",placeholderBinding:"STRING",valueBinding:"STRING"},hashContexts:{tabindex:e,placeholderBinding:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("&nbsp;\r\n            "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{tabindex:"2",action:"findAgreementDeviceSmartcard",size:"xs",class:"button-no-margin"},hashTypes:{tabindex:"STRING",action:"STRING",size:"STRING",class:"STRING"},hashContexts:{tabindex:e,action:e,size:e,class:e},inverse:O.noop,fn:O.program(4,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            <br />\r\n            "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.searchAgreementDeviceTextValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),""}function c(e,t){var o,s;return t.buffer.push("\r\n            "),t.buffer.push(P((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.commercialcustomer:customerInformation.search",s):N.call(e,"loc","locale.commercialcustomer:customerInformation.search",s)))),t.buffer.push("\r\n            "),""}function l(e,t){var o;return t.buffer.push("\r\n        \x3c!--Column 1--\x3e\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:O.noop,fn:O.program(7,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        \x3c!--Column 2--\x3e\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:O.noop,fn:O.program(9,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function d(e,t){return t.buffer.push("\r\n            "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:customerprofile.establishmentName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"3",valueBinding:"viewModel.establishmentName",prompt:"~locale.commercialcustomer:viewingInformation.establishmentPrompt~",contentBinding:"viewModel.establishments",optionLabelPath:"content",optionValuePath:"content"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,valueBinding:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n        "),""}function u(e,t){return t.buffer.push("\r\n            "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:viewingInformation.viewingLocation~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"4",valueBinding:"viewModel.viewingLocation",prompt:"~locale.commercialcustomer:viewingInformation.viewingLocationPrompt~",contentBinding:"viewModel.viewingLocations",optionLabelPath:"content",optionValuePath:"content"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,valueBinding:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n        "),""}function h(e,t){var o;return t.buffer.push("\r\n      <hr />  \r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:O.noop,fn:O.program(12,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:O.noop,fn:O.program(17,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      \x3c!--Viewing Information End--\x3e\r\n      <hr />\r\n      "),""}function m(e,t){var o;return t.buffer.push("\r\n        \x3c!--Column 1--\x3e\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:O.noop,fn:O.program(13,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        \x3c!--Column 2--\x3e\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:O.noop,fn:O.program(15,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function g(e,t){return t.buffer.push("\r\n            "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:paymentGroup.paymentGroup~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewModel.paymentGroup.Name",id:"nameData"},hashTypes:{textBinding:"STRING",id:"STRING"},hashContexts:{textBinding:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            <br/>\r\n            "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:customerprofile.contractStartDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewModel.contractStartDate",id:"nameData"},hashTypes:{textBinding:"STRING",id:"STRING"},hashContexts:{textBinding:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            <br/>\r\n            "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.chargePeriod~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewModel.chargePeriod",id:"nameData"},hashTypes:{textBinding:"STRING",id:"STRING"},hashContexts:{textBinding:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n        "),""}function p(e,t){return t.buffer.push("\r\n            "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:customerprofile.viewingPlatform~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewModel.viewingPlatform",id:"nameData"},hashTypes:{textBinding:"STRING",id:"STRING"},hashContexts:{textBinding:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            <br/>\r\n            "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:customerprofile.contractEndDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewModel.contractEndDate",id:"nameData"},hashTypes:{textBinding:"STRING",id:"STRING"},hashContexts:{textBinding:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            <br/>\r\n            "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:customerprofile.viewingPoints~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewModel.viewingPoints",id:"customerNumberData"},hashTypes:{textBinding:"STRING",id:"STRING"},hashContexts:{textBinding:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n        "),""}function v(e,t){var o;return t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:O.noop,fn:O.program(18,f,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function f(e,t){return t.buffer.push("\r\n         \x3c!--Agreement Address Information End--\x3e\r\n         <br/>\r\n         "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.customer:customerInformation.addresslblGridColumn~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n         <br/>\r\n         "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewModel.agreementAddressString",id:"customerNumberData"},hashTypes:{textBinding:"STRING",id:"STRING"},hashContexts:{textBinding:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n         <br/>\r\n         \x3c!--Agreement Address Information End--\x3e\r\n        "),""}function b(e,t){var o,s,r;return t.buffer.push("\r\n      "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:viewingInformation.viewingDevices~",id:"deviceLabel",class:"sub-heading",visibleBinding:"isDevicesVisible"},hashTypes:{text:"STRING",id:"STRING",class:"STRING",visibleBinding:"STRING"},hashContexts:{text:e,id:e,class:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br /><br />\r\n      "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{tabindex:"5",placeholderBinding:"viewModel.searchTextPlaceholder",valueBinding:"viewModel.searchDeviceText"},hashTypes:{tabindex:"STRING",placeholderBinding:"STRING",valueBinding:"STRING"},hashContexts:{tabindex:e,placeholderBinding:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("&nbsp;\r\n      "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{tabindex:"6",action:"findDeviceSmartcard",size:"xs",class:"button-no-margin"},hashTypes:{tabindex:"STRING",action:"STRING",size:"STRING",class:"STRING"},hashContexts:{tabindex:e,action:e,size:e,class:e},inverse:O.noop,fn:O.program(21,C,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      <br />\r\n      "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.searchDeviceTextValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      <br /><br />\r\n      <div class="table-responsive">\r\n        <table id="packageGrid" class="table table-bordered komodo-datagrid">\r\n            <tr>\r\n                <th>'),t.buffer.push(P((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.deviceNumber",r):N.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.deviceNumber",r)))),t.buffer.push("</th>\r\n                <th>"),t.buffer.push(P((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.smartcardNumber",r):N.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.smartcardNumber",r)))),t.buffer.push("</th>\r\n                <th>"),t.buffer.push(P((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.principalPackage",r):N.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.principalPackage",r)))),t.buffer.push("</th>\r\n                <th>"),t.buffer.push(P((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.principalStatus",r):N.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.principalStatus",r)))),t.buffer.push("</th>\r\n                <th>"),t.buffer.push(P((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.addOnChannels",r):N.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.addOnChannels",r)))),t.buffer.push("</th>\r\n                <th>"),t.buffer.push(P((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.addOnStatus",r):N.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.addOnStatus",r)))),t.buffer.push("</th>\r\n                "),o=a.if.call(e,"isInsuranceAvailable",{hash:{},hashTypes:{},hashContexts:{},inverse:O.noop,fn:O.program(23,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                <th>"),t.buffer.push(P((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.actions",r):N.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.actions",r)))),t.buffer.push("</th>\r\n            </tr>\r\n            "),o=a.each.call(e,"item","in","virtualProductDataPageContent",{hash:{},hashTypes:{},hashContexts:{},inverse:O.noop,fn:O.program(25,D,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </table>\r\n        "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.Pager",{hash:{mode:"content",contentBinding:"viewModel.selectedproductData",pageContentBinding:"virtualProductDataPageContent",itemsPerPage:"10",visibleBinding:"isDevicesVisible"},hashTypes:{mode:"STRING",contentBinding:"STRING",pageContentBinding:"STRING",itemsPerPage:"STRING",visibleBinding:"STRING"},hashContexts:{mode:e,contentBinding:e,pageContentBinding:e,itemsPerPage:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      </div>\r\n      "),""}function C(e,t){var o,s;return t.buffer.push("\r\n      "),t.buffer.push(P((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.commercialcustomer:customerInformation.search",s):N.call(e,"loc","locale.commercialcustomer:customerInformation.search",s)))),t.buffer.push("\r\n      "),""}function S(e,t){var o,s;return t.buffer.push("\r\n                <th>"),t.buffer.push(P((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.commercialcustomer:addDevicesAndPackages.services",s):N.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.services",s)))),t.buffer.push("</th>\r\n                <th>"),t.buffer.push(P((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.commercialcustomer:addDevicesAndPackages.servicesStatus",s):N.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.servicesStatus",s)))),t.buffer.push("</th>\r\n                "),""}function D(e,t){var o;return t.buffer.push("\r\n            <tr>\r\n                <td>\r\n                    "),o=a._triageMustache.call(e,"item.deviceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                <td>\r\n                    "),o=a._triageMustache.call(e,"item.smartCardNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                <td>\r\n                    <div>"),o=a._triageMustache.call(e,"item.prinPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n                </td>\r\n                <td>\r\n                    "),o=a._triageMustache.call(e,"item.prinPckStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                <td>\r\n                    <div>"),o=a._triageMustache.call(e,"item.addOnPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n                </td>\r\n                <td>\r\n                    "),o=a._triageMustache.call(e,"item.addOnPckStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                "),o=a.if.call(e,"isInsuranceAvailable",{hash:{},hashTypes:{},hashContexts:{},inverse:O.noop,fn:O.program(26,y,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                <td>\r\n                    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"editDeviceInformation",size:"xs",type:"success"},hashTypes:{action:"STRING",size:"STRING",type:"STRING"},hashContexts:{action:e,size:e,type:e},inverse:O.noop,fn:O.program(28,w,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"viewDeviceInformation",size:"xs"},hashTypes:{action:"STRING",size:"STRING"},hashContexts:{action:e,size:e},inverse:O.noop,fn:O.program(30,I,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n            </tr>\r\n            "),""}function y(e,t){var o;return t.buffer.push("\r\n                <td>\r\n                    <div>"),o=a._triageMustache.call(e,"item.insuranceServices",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n                </td>\r\n                <td>\r\n                    "),o=a._triageMustache.call(e,"item.insuranceServicesStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                "),""}function w(e,t){var o,s;t.buffer.push(P((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.commercialcustomer:addDevicesAndPackages.edit",s):N.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.edit",s))))}function I(e,t){var o,s;t.buffer.push(P((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.commercialcustomer:addDevicesAndPackages.view",s):N.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.view",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var x,M,T,N=a.helperMissing,P=this.escapeExpression,O=this;return s.buffer.push("<div "),s.buffer.push(P(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(P((M=a.loc||t&&t.loc,T={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},M?M.call(t,"locale.manageviewing:commercial.manageViewTitle",T):N.call(t,"loc","locale.manageviewing:commercial.manageViewTitle",T)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/commercialCustomerProfile">&lt;'),s.buffer.push(P((M=a.loc||t&&t.loc,T={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},M?M.call(t,"locale.manageAccount.editPaymentDetails:general.backLink",T):N.call(t,"loc","locale.manageAccount.editPaymentDetails:general.backLink",T)))),s.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n  "),x=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.commercialcustomer:viewingInformation.viewingInformationTitle~",linksBinding:"collapsibleEditInfoLinks"},hashTypes:{title:"STRING",linksBinding:"STRING"},hashContexts:{title:t,linksBinding:t},inverse:O.noop,fn:O.program(1,r,s),contexts:[t],types:["ID"],data:s}),(x||0===x)&&s.buffer.push(x),s.buffer.push("\r\n</div>"),""}),Ember.TEMPLATES.CommercialReconnectView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n\r\n  \x3c!--Viewing Information Start--\x3e\r\n  "),t.buffer.push($(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:viewingInformation.viewingFilter~",id:"viewLabel",class:"sub-heading"},hashTypes:{text:"STRING",id:"STRING",class:"STRING"},hashContexts:{text:e,id:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:j.noop,fn:j.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),o=a.if.call(e,"showDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:j.program(44,L,t),fn:j.program(7,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function n(e,t){var o;return t.buffer.push("\r\n  \x3c!--Column 1--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:j.noop,fn:j.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  \x3c!--Column 2--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:j.noop,fn:j.program(5,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function i(e,t){return t.buffer.push("\r\n  "),t.buffer.push($(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:customerprofile.establishmentName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push($(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"1",valueBinding:"viewModel.establishmentName",prompt:"~locale.commercialcustomer:viewingInformation.establishmentPrompt~",contentBinding:"viewModel.establishments",optionLabelPath:"content",optionValuePath:"content"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,valueBinding:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),""}function c(e,t){return t.buffer.push("\r\n  "),t.buffer.push($(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:viewingInformation.viewingLocation~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push($(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"2",valueBinding:"viewModel.viewingLocation",prompt:"~locale.commercialcustomer:viewingInformation.viewingLocationPrompt~",contentBinding:"viewModel.viewingLocations",optionLabelPath:"content",optionValuePath:"content"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,valueBinding:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),""}function l(e,t){var o;return t.buffer.push("\r\n  <hr />\r\n  "),o=a.if.call(e,"commercialReconnectDetailView",{hash:{},hashTypes:{},hashContexts:{},inverse:j.program(32,N,t),fn:j.program(8,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <hr />\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:j.noop,fn:j.program(38,k,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function d(e,t){var o
;return t.buffer.push("\r\n  \x3c!--Reconnect Package View - South Africa - Information Start--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:j.noop,fn:j.program(9,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  \x3c!--Reconnect Package View - South Africa - Information End--\x3e\r\n  "),""}function u(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-12"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:j.noop,fn:j.program(10,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function h(e,t){var o;return t.buffer.push("\r\n  "),o=a.if.call(e,"showPackageData",{hash:{},hashTypes:{},hashContexts:{},inverse:j.noop,fn:j.program(11,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),o=a.if.call(e,"showSmartcardData",{hash:{},hashTypes:{},hashContexts:{},inverse:j.noop,fn:j.program(26,I,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function m(e,t){var o;return t.buffer.push("\r\n  "),t.buffer.push($(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:addDevicesAndPackages.packageInformation~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  "),o=a.if.call(e,"showPrincipalPackagesData",{hash:{},hashTypes:{},hashContexts:{},inverse:j.noop,fn:j.program(12,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),o=a.if.call(e,"showAddOnPackagesData",{hash:{},hashTypes:{},hashContexts:{},inverse:j.noop,fn:j.program(20,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  "),t.buffer.push($(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"viewModel.reconnectAllPackages"},hashTypes:{checkedBinding:"STRING"},hashContexts:{checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" "),t.buffer.push($(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:addDevicesAndPackages.reconnectAllPackages~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <hr/>\r\n  "),""}function g(e,t){var o;return t.buffer.push("\r\n  "),t.buffer.push($(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:addDevicesAndPackages.principalPackage~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:j.noop,fn:j.program(13,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <br/>\r\n  "),""}function p(e,t){var o;return t.buffer.push("\r\n  \x3c!--Column 1--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-6"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:j.noop,fn:j.program(14,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  \x3c!--Column 2--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-6"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:j.noop,fn:j.program(17,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function v(e,t){var o;return t.buffer.push("\r\n  "),o=a.each.call(e,"smartcard","in","principalPackagesDataFirstColumn",{hash:{},hashTypes:{},hashContexts:{},inverse:j.noop,fn:j.program(15,f,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function f(e,t){return t.buffer.push("\r\n  "),t.buffer.push($(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"smartcard.isSelected",tabindex:"5"},hashTypes:{checkedBinding:"STRING",tabindex:"STRING"},hashContexts:{checkedBinding:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push($(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"smartcard.description"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br/>\r\n  "),""}function b(e,t){var o;return t.buffer.push("\r\n  "),o=a.each.call(e,"smartcard","in","principalPackagesDataSecondColumn",{hash:{},hashTypes:{},hashContexts:{},inverse:j.noop,fn:j.program(18,C,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function C(e,t){return t.buffer.push("\r\n  "),t.buffer.push($(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"smartcard.isSelected",tabindex:"6"},hashTypes:{checkedBinding:"STRING",tabindex:"STRING"},hashContexts:{checkedBinding:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push($(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"smartcard.description"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br/>\r\n  "),""}function S(e,t){var o;return t.buffer.push("\r\n  "),t.buffer.push($(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:addDevicesAndPackages.addOnPackages~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:j.noop,fn:j.program(21,D,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function D(e,t){var o;return t.buffer.push("\r\n  \x3c!--Column 1--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-6"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:j.noop,fn:j.program(22,y,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  \x3c!--Column 2--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-6"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:j.noop,fn:j.program(24,w,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function y(e,t){var o;return t.buffer.push("\r\n  "),o=a.each.call(e,"smartcard","in","addOnPackagesDataFirstColumn",{hash:{},hashTypes:{},hashContexts:{},inverse:j.noop,fn:j.program(15,f,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function w(e,t){var o;return t.buffer.push("\r\n  "),o=a.each.call(e,"smartcard","in","addOnPackagesDataSecondColumn",{hash:{},hashTypes:{},hashContexts:{},inverse:j.noop,fn:j.program(18,C,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function I(e,t){var o;return t.buffer.push("\r\n  "),t.buffer.push($(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:addDevicesAndPackages.reconnectSmartcards~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:j.noop,fn:j.program(27,x,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  "),t.buffer.push($(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"viewModel.reconnectAllSmartcards"},hashTypes:{checkedBinding:"STRING"},hashContexts:{checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" "),t.buffer.push($(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:addDevicesAndPackages.reconnectAllSmartcards~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function x(e,t){var o;return t.buffer.push("\r\n  \x3c!--Column 1--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-6"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:j.noop,fn:j.program(28,M,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  \x3c!--Column 2--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-6"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:j.noop,fn:j.program(30,T,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function M(e,t){var o;return t.buffer.push("\r\n  "),o=a.each.call(e,"smartcard","in","smartcardsDataFirstColumn",{hash:{},hashTypes:{},hashContexts:{},inverse:j.noop,fn:j.program(15,f,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function T(e,t){var o;return t.buffer.push("\r\n  "),o=a.each.call(e,"smartcard","in","smartcardsDataSecondColumn",{hash:{},hashTypes:{},hashContexts:{},inverse:j.noop,fn:j.program(18,C,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function N(e,t){var o;return t.buffer.push("\r\n  \x3c!--Reconnect Package View - Africa - Information Start--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:j.noop,fn:j.program(33,P,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  \x3c!--Reconnect Package View - Africa - Information End--\x3e\r\n  "),""}function P(e,t){var o;return t.buffer.push("\r\n    \x3c!--Column 1--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-12"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:j.noop,fn:j.program(34,O,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function O(e,t){var o,s,r;return t.buffer.push("\r\n  \x3c!--Devices Information Start--\x3e\r\n  "),t.buffer.push($(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:viewingInformation.viewingDevices~",id:"deviceLabel",class:"sub-heading"},hashTypes:{text:"STRING",id:"STRING",class:"STRING"},hashContexts:{text:e,id:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n  <table id="packageGrid" class="table table-bordered komodo-datagrid">\r\n      <tr>\r\n        <th>'),t.buffer.push($((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.deviceNumber",r):J.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.deviceNumber",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push($((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.smartcardNumber",r):J.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.smartcardNumber",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push($((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.principalPackage",r):J.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.principalPackage",r)))),t.buffer.push('</th>\r\n        <th style="text-align:center">'),t.buffer.push($((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"Is Add-on",r):J.call(e,"loc","Is Add-on",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push($((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"Status",r):J.call(e,"loc","Status",r)))),t.buffer.push('</th>        \r\n        <th style="text-align:center;vertical-align:middle;">\r\n          '),t.buffer.push($(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"viewModel.disconnectReconnectAll",appearance:"switch"},hashTypes:{checkedBinding:"STRING",appearance:"STRING"},hashContexts:{checkedBinding:e,appearance:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </th>\r\n      </tr>\r\n      "),o=a.each.call(e,"item","in","viewModel.selectedproductData",{hash:{},hashTypes:{},hashContexts:{},inverse:j.noop,fn:j.program(35,B,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </table>\r\n  "),""}function B(e,t){var o;return t.buffer.push("\r\n      <tr>\r\n        <td>"),o=a._triageMustache.call(e,"item.deviceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        <td>"),o=a._triageMustache.call(e,"item.smartCardNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        <td>"),o=a._triageMustache.call(e,"item.prinPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>        \r\n        <td style="text-align:center">'),o=a._triageMustache.call(e,"item.isAddon",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        <td>"),o=a._triageMustache.call(e,"item.prinPckStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n        <td style="text-align:center;vertical-align:middle;">\r\n          '),o=a.view.call(e,"Komodo.Controls.ActionView",{hash:{action:"toggleLineItem",target:"controller",contextBinding:"item"},hashTypes:{action:"STRING",target:"STRING",contextBinding:"STRING"},hashContexts:{action:e,target:e,contextBinding:e},inverse:j.noop,fn:j.program(36,R,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n      "),""}function R(e,t){return t.buffer.push("\r\n          "),t.buffer.push($(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"item.isSelected",appearance:"switch"},hashTypes:{checkedBinding:"STRING",appearance:"STRING"},hashContexts:{checkedBinding:e,appearance:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n          "),""}function k(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:j.noop,fn:j.program(39,A,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:j.noop,fn:j.program(41,K,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function A(e,t){return t.buffer.push("\r\n  "),t.buffer.push($(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{tabindex:"3",label:"~locale.manageviewing:disconnect.date~",valueBinding:"viewModel.contractEndDate",class:"info-heading",validatorBinding:"validators.contractEndDateValidator"},hashTypes:{tabindex:"STRING",label:"STRING",valueBinding:"STRING",class:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,label:e,valueBinding:e,class:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function K(e,t){var o;return t.buffer.push("\r\n  "),o=a.unless.call(e,"commercialReconnectDetailView",{hash:{},hashTypes:{},hashContexts:{},inverse:j.noop,fn:j.program(42,G,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function G(e,t){return t.buffer.push("\r\n  "),t.buffer.push($(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"4",valueBinding:"viewModel.reconnectReason",label:"~locale.manageviewing:reconnect.reconnectReason~",validatorBinding:"validators.reconnectReasonsValidator",contentBinding:"reconnectReasons",optionLabelPath:"content.CanonicalValue",optionValuePath:"content"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function L(e,t){var o;return t.buffer.push("\r\n  "),o=a.if.call(e,"showNoDataLabel",{hash:{},hashTypes:{},hashContexts:{},inverse:j.noop,fn:j.program(45,E,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function E(e,t){var o;return t.buffer.push("\r\n  <hr />\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:j.noop,fn:j.program(46,V,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function V(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:j.noop,fn:j.program(47,H,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function H(e,t){return t.buffer.push("\r\n  "),t.buffer.push($(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:reconnect.messageReconnect~",class:"sub-heading",visibleBinding:"showNoData"},hashTypes:{text:"STRING",class:"STRING",visibleBinding:"STRING"},hashContexts:{text:e,class:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function F(e,t){var o;return t.buffer.push('\r\n  <br/>\r\n  <div style="float:right;">\r\n    '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{tabindex:"5",action:"reconnect"},hashTypes:{tabindex:"STRING",action:"STRING"},hashContexts:{tabindex:e,action:e},inverse:j.noop,fn:j.program(50,U,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  </div>\r\n  "),""}function U(e,t){var o,s;return t.buffer.push("\r\n    "),t.buffer.push($((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:reconnect.reconnectTitle",s):J.call(e,"loc","locale.manageviewing:reconnect.reconnectTitle",s)))),t.buffer.push("\r\n    "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var _,Q,q,$=this.escapeExpression,j=this,J=a.helperMissing;return s.buffer.push("<div "),s.buffer.push($(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push($((Q=a.loc||t&&t.loc,q={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},Q?Q.call(t,"locale.manageviewing:commercial.reconnectTitle",q):J.call(t,"loc","locale.manageviewing:commercial.reconnectTitle",q)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/commercialManageViewing">&lt;'),s.buffer.push($((Q=a.loc||t&&t.loc,q={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},Q?Q.call(t,"locale.manageviewing:reconnect.back",q):J.call(t,"loc","locale.manageviewing:reconnect.back",q)))),s.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n  "),_=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:commercial.reconnectPackages~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:j.noop,fn:j.program(1,r,s),contexts:[t],types:["ID"],data:s}),(_||0===_)&&s.buffer.push(_),s.buffer.push("\r\n  "),_=a.if.call(t,"showDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:j.noop,fn:j.program(49,F,s),contexts:[t],types:["ID"],data:s}),(_||0===_)&&s.buffer.push(_),s.buffer.push("\r\n</div>\r\n"),""}),Ember.TEMPLATES.CommercialViewingLocationView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n    \x3c!--Viewing Location Information Start--\x3e\r\n    "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:paymentGroup.addPaymentGroup~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.Link",{hash:{tabindex:"1",action:"addPaymentGroup",text:"~locale.customer:customerInformation.addButton~"},hashTypes:{tabindex:"STRING",action:"STRING",text:"STRING"},hashContexts:{tabindex:e,action:e,text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br/>\r\n    "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.DataGrid",{hash:{canSort:!0,performsValidation:!0,canDelete:!1,canEdit:!1,editMode:!1,canSelect:!0,pageSize:10,canSelect:!0,selectedItemBinding:"selectedGridItem",contentBinding:"viewModel.paymentGroups",columnsBinding:"paymentGroupGridColumns",commandItemBinding:"commandGridItem",commandItemTypeBinding:"deleteGridItem"},hashTypes:{canSort:"BOOLEAN",performsValidation:"BOOLEAN",canDelete:"BOOLEAN",canEdit:"BOOLEAN",editMode:"BOOLEAN",canSelect:"BOOLEAN",pageSize:"INTEGER",canSelect:"BOOLEAN",selectedItemBinding:"STRING",contentBinding:"STRING",columnsBinding:"STRING",commandItemBinding:"STRING",commandItemTypeBinding:"STRING"},hashContexts:{canSort:e,performsValidation:e,canDelete:e,canEdit:e,editMode:e,canSelect:e,pageSize:e,canSelect:e,selectedItemBinding:e,contentBinding:e,columnsBinding:e,commandItemBinding:e,commandItemTypeBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n    \x3c!--Viewing Location Information End--\x3e\r\n\r\n    \x3c!--Add Viewing Location Information Start--\x3e\r\n    <div id="commercialManageViewingEditPanel" style="display: none;">\r\n    '),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:O.noop,fn:O.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:O.noop,fn:O.program(5,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    \r\n    \x3c!--Address Information--\x3e\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:O.noop,fn:O.program(10,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n    \r\n    <div id="commercialManageViewingAddressPanel" style="display: none;">\r\n    '),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:O.noop,fn:O.program(13,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.Address",{hash:{addressBinding:"addressInformation",multipleAddress:!1},hashTypes:{addressBinding:"STRING",multipleAddress:"BOOLEAN"},hashContexts:{addressBinding:e,multipleAddress:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    </div>\r\n    \x3c!--Address Information End--\x3e\r\n    <hr/>\r\n\r\n    \x3c!--Finance Information--\x3e\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:O.noop,fn:O.program(16,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n    <div style="float:right;">\r\n      '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"savePaymentGroup",tabindex:"32",class:"btn-success"},hashTypes:{action:"STRING",tabindex:"STRING",class:"STRING"},hashContexts:{action:e,tabindex:e,class:e},inverse:O.noop,fn:O.program(29,I,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </div>\r\n    <br/>\r\n  </div>\r\n  \x3c!--Add Viewing Location Information End--\x3e\r\n  "),""}function n(e,t){var o;return t.buffer.push("\r\n    \x3c!--Column 1--\x3e\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:O.noop,fn:O.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function i(e,t){return t.buffer.push("\r\n        "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"2",valueBinding:"viewModel.paymentGroup",label:"~locale.commercialcustomer:paymentGroup.paymentGroup~",validatorBinding:"validators.paymentGroupValidator",disabledBinding:"editPaymentGroup"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function c(e,t){var o;return t.buffer.push("\r\n    \x3c!--Column 1--\x3e\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:O.noop,fn:O.program(6,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    \x3c!--Column 2--\x3e\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:O.noop,fn:O.program(8,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function l(e,t){return t.buffer.push("\r\n    "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"3",valueBinding:"viewModel.paymentGroupVatNumber",label:"~locale.customer:customerInformation.vatNumber~",validatorBinding:"validators.paymentGroupVatNumberValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function d(e,t){return t.buffer.push("\r\n    "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"4",valueBinding:"viewModel.email",label:"~locale.customer:customerInformation.email~",validatorBinding:"validators.emailValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function u(e,t){var o;return t.buffer.push("\r\n    \x3c!--Column 1--\x3e\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:O.noop,fn:O.program(11,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function h(e,t){return t.buffer.push("\r\n      "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{valueBinding:"viewModel.location",contentBinding:"locations",displayPath:"value",valuePath:"key",tabindex:"5",label:"~locale.commercialcustomer:paymentGroup.paymentGroupLoaction~",disabledBinding:"isEdit"},hashTypes:{valueBinding:"STRING",contentBinding:"STRING",displayPath:"STRING",valuePath:"STRING",tabindex:"STRING",label:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,contentBinding:e,displayPath:e,valuePath:e,tabindex:e,label:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function m(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:O.noop,fn:O.program(14,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function g(e,t){return t.buffer.push("\r\n    "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{valueBinding:"viewModel.addressTypeKey",contentBinding:"addressTypes",displayPath:"value",valuePath:"key",label:"~locale.addressControl:addressType~",tabindexBinding:"6"},hashTypes:{valueBinding:"STRING",contentBinding:"STRING",displayPath:"STRING",valuePath:"STRING",label:"STRING",tabindexBinding:"STRING"},hashContexts:{valueBinding:e,contentBinding:e,displayPath:e,valuePath:e,label:e,tabindexBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function p(e,t){var o;return t.buffer.push("\r\n    \x3c!--Column 1--\x3e\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:O.noop,fn:O.program(17,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    \x3c!--Column 2--\x3e\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:O.noop,fn:O.program(23,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function v(e,t){var o;return t.buffer.push("\r\n      "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{valueBinding:"viewModel.paymentDetailAsMainLocation",tabindex:"21",contentBinding:"paymentDetails",label:"~locale.commercialcustomer:paymentGroup.paymentDetails~",displayPath:"title",valuePath:"value",disabledBinding:"isEdit"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",contentBinding:"STRING",label:"STRING",displayPath:"STRING",valuePath:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,tabindex:e,contentBinding:e,label:e,displayPath:e,valuePath:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      "),o=a.if.call(e,"showPaymentDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:O.noop,fn:O.program(18,f,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function f(e,t){var o;return t.buffer.push("\r\n      "),o=a.if.call(e,"showDebitOrderDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:O.program(21,C,t),fn:O.program(19,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function b(e,t){return t.buffer.push("\r\n        "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"23",valueBinding:"viewModel.payerName",label:"~locale.commercialcustomer:customerInformation.payerName~",validatorBinding:"validators.payerNameValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"viewModel.accountType",tabindex:"25",contentBinding:"paymentMethods",label:"~locale.customer:customerInformation.accountType~",optionLabelPath:"content.value",optionValuePath:"content",prompt:"~locale.customer:customerInformation.selectAccountType~",validatorBinding:"validators.accountTypeValidator"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",contentBinding:"STRING",label:"STRING",optionLabelPath:"STRING",
optionValuePath:"STRING",prompt:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,tabindex:e,contentBinding:e,label:e,optionLabelPath:e,optionValuePath:e,prompt:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"viewModel.branchCode",label:"~locale.customer:customerInformation.branchName~",tabindex:"27",contentBinding:"bankBranches",optionLabelPath:"content.CanonicalValue",optionValuePath:"content",prompt:"~locale.customer:customerInformation.branchNamePrompt~",validatorBinding:"validators.branchCodeValidator"},hashTypes:{valueBinding:"STRING",label:"STRING",tabindex:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,label:e,tabindex:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"viewModel.accountNo",label:"~locale.customer:customerInformation.accountNumber~",tabindex:"29",validatorBinding:"validators.accountNoValidator"},hashTypes:{valueBinding:"STRING",label:"STRING",tabindex:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,label:e,tabindex:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      "),""}function C(e,t){return t.buffer.push("\r\n        "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"viewModel.debitOrderDay",tabindex:"31",labelBinding:"debitOrderDaylabel",promptBinding:"paymentDayPrompt",contentBinding:"invoiceDays",validatorBinding:"validators.debitOrderDayValidator",optionLabelPath:"content.value",optionValuePath:"content.key"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",labelBinding:"STRING",promptBinding:"STRING",contentBinding:"STRING",validatorBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{valueBinding:e,tabindex:e,labelBinding:e,promptBinding:e,contentBinding:e,validatorBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      "),""}function S(e,t){var o;return t.buffer.push("\r\n      "),o=a.if.call(e,"showPaymentDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:O.noop,fn:O.program(24,D,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),o=a.if.call(e,"showPaymentDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:O.noop,fn:O.program(26,y,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function D(e,t){return t.buffer.push("\r\n        "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"viewModel.methodOfPayment",tabindex:"22",contentBinding:"paymentMethodList",label:"~locale.customer:customerInformation.methodOfPayment~",optionLabelPath:"content.title",optionValuePath:"content.value"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",contentBinding:"STRING",label:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{valueBinding:e,tabindex:e,contentBinding:e,label:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      "),""}function y(e,t){var o;return t.buffer.push("\r\n      "),o=a.if.call(e,"showDebitOrderDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:O.noop,fn:O.program(27,w,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function w(e,t){return t.buffer.push("\r\n        "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"24",valueBinding:"viewModel.payerID",label:"~locale.customer:customerInformation.payerID~",validatorBinding:"validators.payerIDValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"viewModel.bank",tabindex:"26",contentBinding:"banks",label:"~locale.customer:customerInformation.bank~",optionLabelPath:"content.CanonicalValue",optionValuePath:"content",prompt:"~locale.customer:customerInformation.bankPrompt~",validatorBinding:"validators.bankValidator"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",contentBinding:"STRING",label:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,tabindex:e,contentBinding:e,label:e,optionLabelPath:e,optionValuePath:e,prompt:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"viewModel.branchCode.BranchCode",label:"~locale.customer:customerInformation.branchCodeText~",tabindex:"28",disabled:"true",validatorBinding:"validators.branchCodeTextValidator"},hashTypes:{valueBinding:"STRING",label:"STRING",tabindex:"STRING",disabled:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,label:e,tabindex:e,disabled:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(P(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"viewModel.debitOrderDay",tabindex:"30",labelBinding:"debitOrderDaylabel",promptBinding:"paymentDayPrompt",contentBinding:"invoiceDays",validatorBinding:"validators.debitOrderDayValidator",optionLabelPath:"content.value",optionValuePath:"content.key"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",labelBinding:"STRING",promptBinding:"STRING",contentBinding:"STRING",validatorBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{valueBinding:e,tabindex:e,labelBinding:e,promptBinding:e,contentBinding:e,validatorBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      "),""}function I(e,t){var o,s;t.buffer.push(P((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.customer:customerInformation.submit",s):B.call(e,"loc","locale.customer:customerInformation.submit",s))))}function x(e,t){var o,s;t.buffer.push(P((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.commercialcustomer:paymentGroup.addDevicesAndPackages",s):B.call(e,"loc","locale.commercialcustomer:paymentGroup.addDevicesAndPackages",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var M,T,N,P=this.escapeExpression,O=this,B=a.helperMissing;return s.buffer.push("<div "),s.buffer.push(P(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(P((T=a.loc||t&&t.loc,N={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},T?T.call(t,"locale.manageviewing:commercial.viewLoactionTitle",N):B.call(t,"loc","locale.manageviewing:commercial.viewLoactionTitle",N)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/commercialCustomerProfile">&lt;'),s.buffer.push(P((T=a.loc||t&&t.loc,N={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},T?T.call(t,"locale.manageAccount.editPaymentDetails:general.backLink",N):B.call(t,"loc","locale.manageAccount.editPaymentDetails:general.backLink",N)))),s.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n  "),M=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.commercialcustomer:viewingInformation.viewingLocationInformationTitle~",linksBinding:"collapsibleAccountInfoLinks"},hashTypes:{title:"STRING",linksBinding:"STRING"},hashContexts:{title:t,linksBinding:t},inverse:O.noop,fn:O.program(1,r,s),contexts:[t],types:["ID"],data:s}),(M||0===M)&&s.buffer.push(M),s.buffer.push('\r\n  <br/>\r\n  <div style="float:right;">\r\n    '),M=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"addDevicesAndPackages",tabindex:"33",disabledBinding:"isCreateCustomerButtonDisable"},hashTypes:{action:"STRING",tabindex:"STRING",disabledBinding:"STRING"},hashContexts:{action:t,tabindex:t,disabledBinding:t},inverse:O.noop,fn:O.program(31,x,s),contexts:[t],types:["ID"],data:s}),(M||0===M)&&s.buffer.push(M),s.buffer.push("\r\n  </div>\r\n</div>"),""}),Ember.TEMPLATES.ConfirmSwapAvailabilityView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n    "),o=a.if.call(e,"useQuoteDropDown",{hash:{},hashTypes:{},hashContexts:{},inverse:D.program(4,i,t),fn:D.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"searchQuoteSwap"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:D.noop,fn:D.program(6,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function n(e,t){return t.buffer.push("\r\n    "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.Select",{hash:{label:"~locale.manageStock:confirmSwapAvailability.quoteNumber~",prompt:"~locale.manageStock:confirmSwapAvailability.sQuoteNumber~",valueBinding:"rcModelData.quoteNumber",contentBinding:"quotenumberslst",optionLabelPath:"content.UID",optionValuePath:"content.UID",validatorBinding:"validators.quoteNumberValidator",disabledBinding:"quoteInputBox"},hashTypes:{label:"STRING",prompt:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{label:e,prompt:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function i(e,t){return t.buffer.push("\r\n    "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.TextField",{hash:{label:"~locale.manageStock:confirmSwapAvailability.quoteNumber~",valueBinding:"rcModelData.quoteNumber",validationBinding:"rcModelData.quoteNumber.error",validatorBinding:"validators.quoteNumberValidator",disabledBinding:"quoteInputBox"},hashTypes:{label:"STRING",valueBinding:"STRING",validationBinding:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{label:e,valueBinding:e,validationBinding:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function c(e,t){var o,s;return t.buffer.push("\r\n    "),t.buffer.push(C((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:confirmSwapAvailability.retrieveQuote",s):S.call(e,"loc","locale.manageStock:confirmSwapAvailability.retrieveQuote",s)))),t.buffer.push("\r\n    "),""}function l(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageStock:confirmSwapAvailability.issueStock~",isCollapsedBinding:"data.isSelectHardware"},hashTypes:{title:"STRING",isCollapsedBinding:"STRING"},hashContexts:{title:e,isCollapsedBinding:e},inverse:D.noop,fn:D.program(9,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function d(e,t){var o;return t.buffer.push('\r\n    <br/>\r\n    <table width="100%">\r\n      <tbody>\r\n        <tr>\r\n          <td>'),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:confirmSwapAvailability.faultyDevice~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n          <td>"),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:confirmSwapAvailability.faultySerialNumber~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n          <td></td>\r\n          <td>"),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:confirmSwapAvailability.replacementDevice~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n          <td>"),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:confirmSwapAvailability.replacementSerialNumber~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n        </tr>\r\n        "),o=a.each.call(e,"replDeviceInfo","in","rcModelData.modelsAndDevices",{hash:{},hashTypes:{},hashContexts:{},inverse:D.noop,fn:D.program(10,u,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </tbody>\r\n    </table>\r\n    <br/><br/>\r\n    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"PerformHardwareSwap"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:D.noop,fn:D.program(17,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function u(e,t){var o;return t.buffer.push("\r\n        <tr>\r\n          <td>\r\n            "),o=a.if.call(e,"replDeviceInfo.isFaultySerial",{hash:{},hashTypes:{},hashContexts:{},inverse:D.noop,fn:D.program(11,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </td>\r\n          <td>\r\n            "),o=a.if.call(e,"replDeviceInfo.isFaultySerial",{hash:{},hashTypes:{},hashContexts:{},inverse:D.noop,fn:D.program(13,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </td>\r\n          <td>\r\n            "),o=a.if.call(e,"replDeviceInfo.isFaultySerial",{hash:{},hashTypes:{},hashContexts:{},inverse:D.noop,fn:D.program(15,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </td>\r\n          <td>"),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"replDeviceInfo.replacementDevice"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n          <td>"),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"replDeviceInfo.displayReplacementSerial"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n        </tr>\r\n        "),""}function h(e,t){return t.buffer.push("\r\n            "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"replDeviceInfo.faultyDevice"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            "),""}function m(e,t){return t.buffer.push("\r\n            "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"replDeviceInfo.displayFaultySerial"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            "),""}function g(e,t){t.buffer.push('\r\n            <img src="Content\\Images\\link\\blue-arrow.svg" style="padding:0 30px 0 20px;" />\r\n            ')}function p(e,t){var o,s;return t.buffer.push("\r\n    "),t.buffer.push(C((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:confirmSwapAvailability.performHardwareSwap",s):S.call(e,"loc","locale.manageStock:confirmSwapAvailability.performHardwareSwap",s)))),t.buffer.push("\r\n    "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var v,f,b,C=this.escapeExpression,S=a.helperMissing,D=this;return s.buffer.push("<div "),s.buffer.push(C(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(C((f=a.loc||t&&t.loc,b={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},f?f.call(t,"locale.manageStock:confirmSwapAvailability.title",b):S.call(t,"loc","locale.manageStock:confirmSwapAvailability.title",b)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/manageViewing">&lt;BACK</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr />\r\n  <div>\r\n    '),v=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageStock:confirmSwapAvailability.findIssuedStock~",isCollapsedBinding:"data.isSelectHardware"},hashTypes:{title:"STRING",isCollapsedBinding:"STRING"},hashContexts:{title:t,isCollapsedBinding:t},inverse:D.noop,fn:D.program(1,r,s),contexts:[t],types:["ID"],data:s}),(v||0===v)&&s.buffer.push(v),s.buffer.push("\r\n\r\n    "),v=a.if.call(t,"rcModelData.modelsAndDevices.length",{hash:{},hashTypes:{},hashContexts:{},inverse:D.noop,fn:D.program(8,l,s),contexts:[t],types:["ID"],data:s}),(v||0===v)&&s.buffer.push(v),s.buffer.push("\r\n  </div>\r\n</div>\r\n"),""}),Ember.TEMPLATES.ConfirmSwapView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push('\r\n    <table style="width: 100%;">\r\n      <tr>\r\n        <td>\r\n        </td>\r\n        <td>\r\n          '),t.buffer.push(g(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"rcModelData.quoteNumber",label:"~locale.manageStock:confirmSwap.quoteNumber~",validationBinding:"rcModelData.quoteNumber.error"},hashTypes:{valueBinding:"STRING",label:"STRING",validationBinding:"STRING"},hashContexts:{valueBinding:e,label:e,validationBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td></td>\r\n        <td style="float: right;">\r\n          '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"FindSwapDevices"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:p.noop,fn:p.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n    </table>\r\n    "),""}function n(e,t){var o,s;t.buffer.push(g((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:confirmSwap.submit",s):m.call(e,"loc","locale.manageStock:confirmSwap.submit",s))))}function i(e,t){var o;return t.buffer.push('\r\n    <table width="100%">\r\n      <tr>\r\n        <td width="40%">'),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:confirmSwap.oldDevice~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</td>\r\n        <td width="20%"/>\r\n        <td width="40%">'),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:confirmSwap.replacementDevice~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</td>\r\n      </tr>\r\n      <tr>\r\n        <td width="40%">'),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"rcModelData.lblFaultyDevice"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" - "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"rcModelData.lblFaultyModel"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</td>\r\n        <td width="20%">\r\n          <img src="Content\\Images\\link\\blue-arrow.svg" style="padding:0 30px 0 20px;" />\r\n        </td>\r\n        <td width="40%">'),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"rcModelData.lblServiceDevice"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" - "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"rcModelData.lblServiceModel"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n      </tr>\r\n      "),o=a.if.call(e,"rcModelData.isLinked",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(5,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </table>\r\n    "),""}function c(e,t){return t.buffer.push('\r\n      <tr>\r\n        <td width="40%">'),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"rcModelData.lblFaultyDevice2"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" - "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"rcModelData.lblFaultyModel2"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</td>\r\n        <td width="20%">\r\n          <img src="Content\\Images\\link\\blue-arrow.svg" style="padding:0 30px 0 20px;" />\r\n        </td>\r\n        <td width="40%">'),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"rcModelData.lblServiceDevice2"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" - "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"rcModelData.lblServiceModel2"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n      </tr>\r\n      "),""}function l(e,t){var o,s;t.buffer.push(g((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:confirmSwap.confirmSwap",s):m.call(e,"loc","locale.manageStock:confirmSwap.confirmSwap",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var d,u,h,m=a.helperMissing,g=this.escapeExpression,p=this;return s.buffer.push("<div "),s.buffer.push(g(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(g((u=a.loc||t&&t.loc,h={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},u?u.call(t,"locale.manageStock:confirmSwap.title",h):m.call(t,"loc","locale.manageStock:confirmSwap.title",h)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/manageViewing">&lt;BACK</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr />\r\n  <div>\r\n    '),d=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageStock:confirmSwap.gridTitle~",isCollapsedBinding:"data.isSelectHardware"},hashTypes:{title:"STRING",isCollapsedBinding:"STRING"},hashContexts:{title:t,isCollapsedBinding:t},inverse:p.noop,fn:p.program(1,r,s),contexts:[t],types:["ID"],data:s}),(d||0===d)&&s.buffer.push(d),s.buffer.push("\r\n    "),d=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageStock:confirmSwap.gridTitle2~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:p.noop,fn:p.program(4,i,s),contexts:[t],types:["ID"],data:s}),(d||0===d)&&s.buffer.push(d),s.buffer.push('\r\n    <br />\r\n    <div class="float-right">\r\n      '),d=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"ConfirmSwap",disableBinding:"rcModelData.boolSwapBtn"},hashTypes:{action:"STRING",disableBinding:"STRING"},hashContexts:{action:t,disableBinding:t},inverse:p.noop,fn:p.program(7,l,s),contexts:[t],types:["ID"],data:s}),(d||0===d)&&s.buffer.push(d),s.buffer.push("\r\n    </div>\r\n  </div>\r\n</div>"),""}),Ember.TEMPLATES.CreateRepairsOrderOverrideView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o,s;return t.buffer.push("\r\n      "),t.buffer.push(l((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:createRepairsOrder.approve",s):c.call(e,"loc","locale.manageStock:createRepairsOrder.approve",s)))),t.buffer.push("\r\n      "),""}function n(e,t){var o,s;return t.buffer.push("\r\n      "),t.buffer.push(l((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:createRepairsOrder.cancel",s):c.call(e,"loc","locale.manageStock:createRepairsOrder.cancel",s)))),t.buffer.push("\r\n      "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var i,c=a.helperMissing,l=this.escapeExpression,d=this;return s.buffer.push('<table border="0" cellSpacing="2" cellPadding="2" width="100%">\r\n  <tr>\r\n    <td>\r\n      <fieldset>\r\n        \x3c!--'),s.buffer.push(l(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:createRepairsOrder.overrideTitle~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:t,class:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push('\r\n        <hr />--\x3e\r\n        <table border="0" cellSpacing="5" cellPadding="5" width="100%">\r\n            <tr>\r\n                <td style="padding-right:10px">\r\n                  '),s.buffer.push(l(a.view.call(t,"Komodo.Controls.TextField",{hash:{tabindex:"200",valueBinding:"data.supervisorUsername",label:"~locale.manageStock:createRepairsOrder.supervisorName~",validatorBinding:"view.context.validators.supervisorUsernameValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:t,valueBinding:t,label:t,validatorBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n                </td>\r\n                <td>\r\n                  "),s.buffer.push(l(a.view.call(t,"Komodo.Controls.TextField",{hash:{type:"password",tabindex:"201",valueBinding:"data.passCode",label:"~locale.manageStock:createRepairsOrder.passCode~",validatorBinding:"view.context.validators.passCodeValidator"},hashTypes:{type:"STRING",tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{type:t,tabindex:t,valueBinding:t,label:t,validatorBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push('\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td colspan="2">\r\n                  '),s.buffer.push(l(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:createRepairsOrder.comment~",validatorBinding:"view.context.validators.commentValidator"},hashTypes:{text:"STRING",validatorBinding:"STRING"},hashContexts:{text:t,validatorBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("<br/>\r\n                    "),s.buffer.push(l(a.view.call(t,"Komodo.Controls.CoreTextArea",{hash:{tabindex:"202",valueBinding:"data.comment",validatorBinding:"view.context.validators.commentValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:t,valueBinding:t,validatorBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("<br/>\r\n\t                "),s.buffer.push(l(a.view.call(t,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"view.context.validators.commentValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push('\r\n                </td>\r\n            </tr>\r\n        </table>\r\n      </fieldset>\r\n    </td>\r\n  </tr>\r\n  <tr>\r\n    <td align="right">\r\n      '),i=a.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"203",action:"overridequote",disabledBinding:"view.context.data.disableAction"},hashTypes:{tabindex:"STRING",action:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:t,action:t,disabledBinding:t},inverse:d.noop,fn:d.program(1,r,s),contexts:[t],types:["ID"],data:s}),(i||0===i)&&s.buffer.push(i),s.buffer.push("\r\n      "),i=a.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"204",action:"cancel"},hashTypes:{tabindex:"STRING",action:"STRING"},hashContexts:{tabindex:t,action:t},inverse:d.noop,fn:d.program(3,n,s),contexts:[t],types:["ID"],data:s}),(i||0===i)&&s.buffer.push(i),s.buffer.push("\r\n    </td>\r\n  </tr>\r\n</table>\r\n"),""}),Ember.TEMPLATES.CreateRepairsOrderView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push('\r\n    <table width="100%">\r\n      <tr>\r\n              <td colspan="6">\r\n                  <div style="float:left;">\r\n                      '),t.buffer.push(L(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:createRepairsOrder.filterDeviceChange~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br /><br />\r\n                      "),t.buffer.push(L(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:createRepairsOrder.SrSCNoLabel~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n                    "),t.buffer.push(L(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{valueBinding:"dataModel.searchString",placeholder:"Type your search here",tabindex:"1",class:"info-heading"},hashTypes:{valueBinding:"STRING",placeholder:"STRING",tabindex:"STRING",class:"STRING"},hashContexts:{valueBinding:e,placeholder:e,tabindex:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n<br/>\r\n                    "),t.buffer.push(L(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.searchStringValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                  </div>\r\n              </td>\r\n          </tr>\r\n          <tr>\r\n              <td colspan="6">\r\n                  <div style="float:right;">\r\n                      '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"actionFilterDevice",tabindex:"2"},hashTypes:{action:"STRING",tabindex:"STRING"},hashContexts:{action:e,tabindex:e},inverse:E.noop,fn:E.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                      "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"actionClearDevice",tabindex:"3"},hashTypes:{action:"STRING",tabindex:"STRING"},hashContexts:{action:e,tabindex:e},inverse:E.noop,fn:E.program(4,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                  </div>\r\n              </td>\r\n          </tr>\r\n          <tr>\r\n              <td colspan="6">\r\n                  <hr />\r\n              </td>\r\n\r\n          </tr>\r\n          <tr>\r\n              <td>\r\n                  '),t.buffer.push(L(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:createRepairsOrder.devices~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),
t.buffer.push('\r\n              </td>\r\n              <td colspan="5"></td>\r\n          </tr>\r\n          <tr>\r\n              <td colspan="6" align="center">\r\n                  '),t.buffer.push(L(a.view.call(e,"Komodo.Controls.DataGrid",{hash:{canSort:"false",pageSize:"10",canSelect:"true",performsValidation:"false",selectedItemBinding:"dataModel.selectedDeviceGridItem",commandItemBinding:"dataModel.commandGridItem",contentBinding:"dataModel.deviceData",columnsBinding:"_columnDeviceDataGrid"},hashTypes:{canSort:"STRING",pageSize:"STRING",canSelect:"STRING",performsValidation:"STRING",selectedItemBinding:"STRING",commandItemBinding:"STRING",contentBinding:"STRING",columnsBinding:"STRING"},hashContexts:{canSort:e,pageSize:e,canSelect:e,performsValidation:e,selectedItemBinding:e,commandItemBinding:e,contentBinding:e,columnsBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                 \r\n              </td>\r\n          </tr>\r\n       \r\n         \r\n      </table>\r\n    "),""}function n(e,t){var o,s;t.buffer.push(L((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceLink.search",s):G.call(e,"loc","locale.manageviewing:deviceLink.search",s))))}function i(e,t){var o,s;t.buffer.push(L((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageCase:caseHistory.clear",s):G.call(e,"loc","locale.manageCase:caseHistory.clear",s))))}function c(e,t){var o;return t.buffer.push("\r\n\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:E.noop,fn:E.program(7,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:E.noop,fn:E.program(14,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:E.noop,fn:E.program(22,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:E.noop,fn:E.program(27,D,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:E.noop,fn:E.program(30,w,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      <br />\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:E.noop,fn:E.program(33,x,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:E.noop,fn:E.program(36,T,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function l(e,t){var o;return t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-4"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:E.noop,fn:E.program(8,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-4"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:E.noop,fn:E.program(10,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-4"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:E.noop,fn:E.program(12,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function d(e,t){return t.buffer.push("\r\n      "),t.buffer.push(L(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"dataModel.CustomerReportedFault",label:"~locale.manageStock:createRepairsOrder.reportedfault~",contentBinding:"_dropDowncustomerreportedfaultList",optionLabelPath:"content.value",optionValuePath:"content.key",prompt:"~locale.manageStock:createRepairsOrder.ddlfault~"},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      "),""}function u(e,t){return t.buffer.push("\r\n      "),t.buffer.push(L(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"dataModel.RepairType",label:"~locale.manageStock:createRepairsOrder.repairtype~",contentBinding:"_dropDownrepairtypeList",optionLabelPath:"content.value",optionValuePath:"content.key",prompt:"~locale.manageStock:createRepairsOrder.ddlRepairType~"},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      "),""}function h(e,t){return t.buffer.push("\r\n      "),t.buffer.push(L(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"dataModel.CSRObservation",label:"~locale.manageStock:createRepairsOrder.observation~",contentBinding:"_dropDowncsrobservationList",optionLabelPath:"content.value",optionValuePath:"content.key",visibleBinding:"dataModel.isCSRObservation",prompt:"~locale.manageStock:createRepairsOrder.ddlCsrObser~"},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",visibleBinding:"STRING",prompt:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,visibleBinding:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      "),t.buffer.push(L(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"dataModel.Outcome",label:"~locale.manageStock:createRepairsOrder.outcome~",contentBinding:"_dropDownoutcomeList",optionLabelPath:"content.value",optionValuePath:"content.key",visibleBinding:"dataModel.isOutcome",prompt:"~locale.manageStock:createRepairsOrder.ddlOutcome~"},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",visibleBinding:"STRING",prompt:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,visibleBinding:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      "),""}function m(e,t){var o;return t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-4"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:E.noop,fn:E.program(15,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-4"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:E.noop,fn:E.program(15,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-4"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:E.noop,fn:E.program(17,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function g(e,t){t.buffer.push("\r\n\r\n      ")}function p(e,t){var o;return t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"createCustomerRepairOrder",visibleBinding:"dataModel.isRepairQuote"},hashTypes:{action:"STRING",visibleBinding:"STRING"},hashContexts:{action:e,visibleBinding:e},inverse:E.noop,fn:E.program(18,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"createCSRRepair",visibleBinding:"dataModel.isCreateRepair"},hashTypes:{action:"STRING",visibleBinding:"STRING"},hashContexts:{action:e,visibleBinding:e},inverse:E.noop,fn:E.program(20,f,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function v(e,t){var o,s;t.buffer.push(L((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:createRepairsOrder.sendForRepairQuote",s):G.call(e,"loc","locale.manageStock:createRepairsOrder.sendForRepairQuote",s))))}function f(e,t){var o,s;t.buffer.push(L((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:createRepairsOrder.sendForRepair",s):G.call(e,"loc","locale.manageStock:createRepairsOrder.sendForRepair",s))))}function b(e,t){var o;return t.buffer.push("\r\n         "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-4"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:E.noop,fn:E.program(23,C,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-4"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:E.noop,fn:E.program(23,C,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-4"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:E.noop,fn:E.program(25,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n       \r\n        "),""}function C(e,t){t.buffer.push("\r\n      ")}function S(e,t){return t.buffer.push("\r\n         "),t.buffer.push(L(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"dataModel.CollectionPoint",label:"~locale.manageStock:createRepairsOrder.collectionPoint~",contentBinding:"_dropDownCollectionPoint",optionLabelPath:"content.value",optionValuePath:"content.key",visibleBinding:"dataModel.isCollectionPoint",prompt:"~locale.manageStock:createRepairsOrder.ddlCollecPoint~"},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",visibleBinding:"STRING",prompt:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,visibleBinding:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      "),""}function D(e,t){var o;return t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-4"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:E.noop,fn:E.program(15,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-4"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:E.noop,fn:E.program(15,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-4"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:E.noop,fn:E.program(28,y,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function y(e,t){return t.buffer.push("\r\n      "),t.buffer.push(L(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dataModel.ResponseMessageFromMiddele",visibleBinding:"dataModel.isResponseMeessageFromMiddel",class:"sub-heading"},hashTypes:{textBinding:"STRING",visibleBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,visibleBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      "),""}function w(e,t){var o;return t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-4"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:E.noop,fn:E.program(15,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-4"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:E.noop,fn:E.program(15,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"col-md-4"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:E.noop,fn:E.program(31,I,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function I(e,t){return t.buffer.push("\r\n      "),t.buffer.push(L(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dataModel.ResponseFinalQuote",visibleBinding:"dataModel.isFinalQuote",class:"sub-heading"},hashTypes:{textBinding:"STRING",visibleBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,visibleBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      "),""}function x(e,t){var o;return t.buffer.push("\r\n         "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:E.noop,fn:E.program(34,M,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function M(e,t){t.buffer.push("\r\n\r\n        ")}function T(e,t){var o;return t.buffer.push("\r\n     \r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"float-right"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:E.noop,fn:E.program(37,N,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function N(e,t){var o;return t.buffer.push('\r\n <div style="float: right;">\r\n      '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"generateQuote",visibleBinding:"dataModel.isGenerateQuote"},hashTypes:{action:"STRING",visibleBinding:"STRING"},hashContexts:{action:e,visibleBinding:e},inverse:E.noop,fn:E.program(38,P,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"override",visibleBinding:"dataModel.isOverride"},hashTypes:{action:"STRING",visibleBinding:"STRING"},hashContexts:{action:e,visibleBinding:e},inverse:E.noop,fn:E.program(40,O,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"moveToSwap",visibleBinding:"dataModel.isMoveToSwap"},hashTypes:{action:"STRING",visibleBinding:"STRING"},hashContexts:{action:e,visibleBinding:e},inverse:E.noop,fn:E.program(42,B,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"moveToCashSale",visibleBinding:"dataModel.isMoveToCashSale"},hashTypes:{action:"STRING",visibleBinding:"STRING"},hashContexts:{action:e,visibleBinding:e},inverse:E.noop,fn:E.program(44,R,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n </div>\r\n      "),""}function P(e,t){var o,s;t.buffer.push(L((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:createRepairsOrder.generateQuoteTitle",s):G.call(e,"loc","locale.manageStock:createRepairsOrder.generateQuoteTitle",s))))}function O(e,t){var o,s;t.buffer.push(L((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:createRepairsOrder.overrideQuoteTitle",s):G.call(e,"loc","locale.manageStock:createRepairsOrder.overrideQuoteTitle",s))))}function B(e,t){var o,s;t.buffer.push(L((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:createRepairsOrder.moveToSwap",s):G.call(e,"loc","locale.manageStock:createRepairsOrder.moveToSwap",s))))}function R(e,t){var o,s;t.buffer.push(L((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:createRepairsOrder.moveToCashSale",s):G.call(e,"loc","locale.manageStock:createRepairsOrder.moveToCashSale",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var k,A,K,G=a.helperMissing,L=this.escapeExpression,E=this;return s.buffer.push("<div "),s.buffer.push(L(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(L((A=a.loc||t&&t.loc,K={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},A?A.call(t,"locale.manageStock:createRepairsOrder.title",K):G.call(t,"loc","locale.manageStock:createRepairsOrder.title",K)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/manageViewing">&lt;'),s.buffer.push(L((A=a.loc||t&&t.loc,K={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},A?A.call(t,"locale.manageStock:back",K):G.call(t,"loc","locale.manageStock:back",K)))),s.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr />\r\n  <div>\r\n    "),k=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageStock:createRepairsOrder.gridTitle~",isCollapsed:"false",visibleBinding:"dataModel.isDeviceToSendForRepair"},hashTypes:{title:"STRING",isCollapsed:"STRING",visibleBinding:"STRING"},hashContexts:{title:t,isCollapsed:t,visibleBinding:t},inverse:E.noop,fn:E.program(1,r,s),contexts:[t],types:["ID"],data:s}),(k||0===k)&&s.buffer.push(k),s.buffer.push("\r\n   \r\n   \r\n    <div>\r\n      "),k=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageStock:createRepairsOrder.RepairDetailsTitle~",isCollapsed:"false",visibleBinding:"dataModel.isRepairDetails"},hashTypes:{title:"STRING",isCollapsed:"STRING",visibleBinding:"STRING"},hashContexts:{title:t,isCollapsed:t,visibleBinding:t},inverse:E.noop,fn:E.program(6,c,s),contexts:[t],types:["ID"],data:s}),(k||0===k)&&s.buffer.push(k),s.buffer.push("\r\n    </div>\r\n   \r\n  </div>\r\n</div>"),""}),Ember.TEMPLATES.CsiAllLogDetailsView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:d.noop,fn:d.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  \x3c!--Column 2--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:d.noop,fn:d.program(4,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function n(e,t){return t.buffer.push("\r\n\r\n  \x3c!--History Id--\x3e          \r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:csiLogDetails.historyID~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.historyID"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  \x3c!--Event Number--\x3e\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:csiLogDetails.eventNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.eventNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  \x3c!--Event Description--\x3e\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:csiLogDetails.eventDescription~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.eventDescription"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  \x3c!--Customer Number--\x3e\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:csiLogDetails.customerNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.customerNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  \x3c!--Host--\x3e\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:csiLogDetails.hostName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.hostName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  \x3c!--Reason--\x3e\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:csiLogDetails.reason~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.reason"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  \x3c!--Message Text--\x3e\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:csiLogDetails.message~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.message"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  "),""}function i(e,t){return t.buffer.push("\r\n  \x3c!--Date--\x3e\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:csiLogDetails.date~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.dateTime"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  \x3c!--Log Event Date--\x3e\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:csiLogDetails.eventDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.eventDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  \x3c!--Action--\x3e\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:csiLogDetails.action~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.action"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  \x3c!--User Name--\x3e\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:csiLogDetails.username~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.username"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  \x3c!--Serial Number--\x3e\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:csiLogDetails.serialNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.serialNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  \x3c!--Message Id--\x3e\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:csiLogDetails.messageTrackingId~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.messageTrackingId"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var c,l=this.escapeExpression,d=this;return s.buffer.push('<div class="modal-max-size">\r\n\r\n  '),c=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:d.noop,fn:d.program(1,r,s),contexts:[t],types:["ID"],data:s}),(c||0===c)&&s.buffer.push(c),s.buffer.push("\r\n\r\n\r\n</div>\r\n"),""}),Ember.TEMPLATES.CsiDeviceInfoView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n  \x3c!--This is Device and Smartcard Details view--\x3e\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{class:"sub-heading",text:"~locale.manageviewing:deviceInfo.deviceAndSmartcardDetails~"},hashTypes:{class:"STRING",text:"STRING"},hashContexts:{class:e,text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:x.noop,fn:x.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  <hr/>\r\n\r\n  \x3c!--This is Product Details view--\x3e\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{class:"sub-heading",text:"~locale.manageviewing:deviceInfo.productDetails~"},hashTypes:{class:"STRING",text:"STRING"},hashContexts:{class:e,text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:x.noop,fn:x.program(7,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <hr/>\r\n\r\n  \x3c!--This is Other Details view--\x3e\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{class:"sub-heading",text:"~locale.manageviewing:deviceInfo.otherDetails~"},hashTypes:{class:"STRING",text:"STRING"},hashContexts:{class:e,text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:x.noop,fn:x.program(14,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function n(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:x.noop,fn:x.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:x.noop,fn:x.program(5,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function i(e,t){return t.buffer.push("\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.deviceName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.deviceName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.deviceStatus~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.deviceStatus"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.smartcardName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.smartcardName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.smartcardStatus~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.smartcardStatus"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),""}function c(e,t){return t.buffer.push("\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.deviceNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),
t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.deviceNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.warrantyEndDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.warrantyEndDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.smartcardNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.smartcardNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.viewingPeriod~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.viewingPeriod"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),""}function l(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:x.noop,fn:x.program(8,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:x.noop,fn:x.program(11,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function d(e,t){var o;return t.buffer.push("\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.principalPackage~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.principalPackage"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.addOnPackage~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <table>\r\n    <tbody>\r\n    "),o=a.each.call(e,"item","in","deviceInfoModel.addOnPackage",{hash:{},hashTypes:{},hashContexts:{},inverse:x.noop,fn:x.program(9,u,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </tbody>\r\n  </table>\r\n  <br/>\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.services~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.services"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),""}function u(e,t){return t.buffer.push('\r\n    <tr>\r\n      <td style="padding: 0">\r\n        '),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"item",id:"addOnPackage"},hashTypes:{textBinding:"STRING",id:"STRING"},hashContexts:{textBinding:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      </td>\r\n    </tr>\r\n    "),""}function h(e,t){var o;return t.buffer.push("\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.principalStatus~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.principalStatus"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.addOnStatus~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <table>\r\n    <tbody>\r\n    "),o=a.each.call(e,"item","in","deviceInfoModel.addOnStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:x.noop,fn:x.program(12,m,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </tbody>\r\n  </table>\r\n  <br/>\r\n  "),""}function m(e,t){return t.buffer.push('\r\n    <tr>\r\n      <td style="padding: 0">\r\n        '),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"item",id:"addOnStatus"},hashTypes:{textBinding:"STRING",id:"STRING"},hashContexts:{textBinding:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      </td>\r\n    </tr>\r\n    "),""}function g(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:x.noop,fn:x.program(15,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:x.noop,fn:x.program(17,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function p(e,t){return t.buffer.push("\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"1",label:"~locale.manageviewing:deviceInfo.chargePeriod~",valueBinding:"deviceInfoModel.chargePeriod",contentBinding:"chargePeriodlst",optionLabelPath:"content.value",optionValuePath:"content.key",class:"info-heading",disabledBinding:"deviceInfoModel.disableChargePeriod"},hashTypes:{tabindex:"STRING",label:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",class:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:e,label:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,class:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.contractEndDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.contractEndDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.quoteBasedDisconnectDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.quoteBasedDisconnectDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),""}function v(e,t){return t.buffer.push("\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.contractStartDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.contractStartDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.chargeUntilDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.chargeUntilDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),""}function f(e,t){var o,s,r;return t.buffer.push('\r\n  <table width="100%">\r\n    <tr>\r\n      <td>\r\n        <table class="table table-bordered komodo-datagrid">\r\n          <tr>\r\n            <th>'),t.buffer.push(I((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.csicustomer:addressInformation.addAddress",r):M.call(e,"loc","locale.csicustomer:addressInformation.addAddress",r)))),t.buffer.push("</th>\r\n          </tr>\r\n          <tr>\r\n            <td>"),o=a._triageMustache.call(e,"deviceInfoModel.displayAddress",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n          </tr>\r\n        </table>\r\n      </td>\r\n    </tr>\r\n  </table>\r\n  "),""}function b(e,t){var o;return t.buffer.push("\r\n  "),o=a.if.call(e,"showGrid",{hash:{},hashTypes:{},hashContexts:{},inverse:x.noop,fn:x.program(22,C,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function C(e,t){return t.buffer.push("\r\n  "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.DataGrid",{hash:{canSort:!0,pageSize:5,performsValidation:!0,canDelete:!1,canEdit:!1,editMode:"cell",canSelect:!0,commandItemBinding:"deviceInfoModel.commandGridItem",commandItemTypeBinding:"deviceInfoModel.commandGridItemType",contentBinding:"deviceInfoModel.csiLogs",columnsBinding:"dataGridColumnsDeviceInfo"},hashTypes:{canSort:"BOOLEAN",pageSize:"INTEGER",performsValidation:"BOOLEAN",canDelete:"BOOLEAN",canEdit:"BOOLEAN",editMode:"STRING",canSelect:"BOOLEAN",commandItemBinding:"STRING",commandItemTypeBinding:"STRING",contentBinding:"STRING",columnsBinding:"STRING"},hashContexts:{canSort:e,pageSize:e,performsValidation:e,canDelete:e,canEdit:e,editMode:e,canSelect:e,commandItemBinding:e,commandItemTypeBinding:e,contentBinding:e,columnsBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function S(e,t){var o,s;t.buffer.push(I((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceInfo.btnCancel",s):M.call(e,"loc","locale.manageviewing:deviceInfo.btnCancel",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var D,y,w,I=this.escapeExpression,x=this,M=a.helperMissing;return s.buffer.push("<div "),s.buffer.push(I(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(I((y=a.loc||t&&t.loc,w={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},y?y.call(t,"locale.manageviewing:deviceInfo.deviceInfoTitle",w):M.call(t,"loc","locale.manageviewing:deviceInfo.deviceInfoTitle",w)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/csiManageViewing">&lt;'),s.buffer.push(I((y=a.loc||t&&t.loc,w={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},y?y.call(t,"locale.manageviewing:deviceInfo.back",w):M.call(t,"loc","locale.manageviewing:deviceInfo.back",w)))),s.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n\r\n  \x3c!--This is Full Device Information view--\x3e\r\n  "),D=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:deviceInfo.fullDeviceInformation~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:x.noop,fn:x.program(1,r,s),contexts:[t],types:["ID"],data:s}),(D||0===D)&&s.buffer.push(D),s.buffer.push("\r\n\r\n\r\n  \x3c!--Device Address view--\x3e\r\n  "),D=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.csicustomer:addressInformation.aiTitle~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:x.noop,fn:x.program(19,f,s),contexts:[t],types:["ID"],data:s}),(D||0===D)&&s.buffer.push(D),s.buffer.push(" \r\n  \r\n  \x3c!--This is Grid for CSI Log--\x3e\r\n  "),D=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:deviceInfo.cSILogs~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:x.noop,fn:x.program(21,b,s),contexts:[t],types:["ID"],data:s}),(D||0===D)&&s.buffer.push(D),s.buffer.push('\r\n  <br/>\r\n  \x3c!--Button--\x3e\r\n  <div style="float:right;">\r\n    '),D=a.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"3",action:"cancel",class:"btn-inverse"},hashTypes:{tabindex:"STRING",action:"STRING",class:"STRING"},hashContexts:{tabindex:t,action:t,class:t},inverse:x.noop,fn:x.program(24,S,s),contexts:[t],types:["ID"],data:s}),(D||0===D)&&s.buffer.push(D),s.buffer.push("\r\n  </div>\r\n</div>\r\n"),""}),Ember.TEMPLATES.CsiDisconnectView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n\r\n  \x3c!--Viewing Information Start--\x3e\r\n  "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:viewingInformation.viewingFilter~",id:"viewLabel",class:"sub-heading"},hashTypes:{text:"STRING",id:"STRING",class:"STRING"},hashContexts:{text:e,id:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  \r\n  "),o=a.if.call(e,"showDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:T.program(18,f,t),fn:T.program(7,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function n(e,t){var o;return t.buffer.push("\r\n  \x3c!--Column 1--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:T.noop,fn:T.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  \x3c!--Column 2--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:T.noop,fn:T.program(5,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function i(e,t){return t.buffer.push("\r\n  "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:customerprofile.establishmentName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"1",valueBinding:"viewModel.establishmentName",prompt:"~locale.commercialcustomer:viewingInformation.establishmentPrompt~",contentBinding:"viewModel.establishments",optionLabelPath:"content",optionValuePath:"content"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,valueBinding:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),""}function c(e,t){return t.buffer.push("\r\n  "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:viewingInformation.viewingLocation~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"2",valueBinding:"viewModel.viewingLocation",prompt:"~locale.commercialcustomer:viewingInformation.viewingLocationPrompt~",contentBinding:"viewModel.viewingLocations",optionLabelPath:"content",optionValuePath:"content"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,valueBinding:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),""}function l(e,t){var o;return t.buffer.push("  \r\n  <hr />\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(8,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <hr />\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(13,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function d(e,t){var o;return t.buffer.push("\r\n  \x3c!--Column 1--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-12"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:T.noop,fn:T.program(9,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function u(e,t){var o,s,r;return t.buffer.push("\r\n  \x3c!--Devices Information Start--\x3e\r\n  "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:viewingInformation.viewingDevices~",id:"deviceLabel",class:"sub-heading"},hashTypes:{text:"STRING",id:"STRING",class:"STRING"},hashContexts:{text:e,id:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n  <table id="packageGrid" class="table table-bordered komodo-datagrid">\r\n      <tr>\r\n        <th>'),t.buffer.push(M((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.deviceNumber",r):N.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.deviceNumber",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(M((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.smartcardNumber",r):N.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.smartcardNumber",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(M((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.principalPackage",r):N.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.principalPackage",r)))),t.buffer.push('</th>\r\n        <th style="text-align:center">'),t.buffer.push(M((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"Is Add-on",r):N.call(e,"loc","Is Add-on",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(M((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"Status",r):N.call(e,"loc","Status",r)))),t.buffer.push('</th>        \r\n        <th style="text-align:center;vertical-align:middle;">\r\n          '),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"viewModel.disconnectReconnectAll",appearance:"switch"},hashTypes:{checkedBinding:"STRING",appearance:"STRING"},hashContexts:{checkedBinding:e,appearance:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </th>\r\n      </tr>\r\n      "),o=a.each.call(e,"item","in","viewModel.selectedproductData",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(10,h,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </table>\r\n  "),""}function h(e,t){var o;return t.buffer.push("\r\n      <tr>\r\n        <td>"),o=a._triageMustache.call(e,"item.deviceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        <td>"),o=a._triageMustache.call(e,"item.smartCardNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        <td>"),o=a._triageMustache.call(e,"item.prinPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>        \r\n        <td style="text-align:center">'),o=a._triageMustache.call(e,"item.isAddon",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        <td>"),o=a._triageMustache.call(e,"item.prinPckStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n        <td style="text-align:center;vertical-align:middle;">\r\n          '),o=a.view.call(e,"Komodo.Controls.ActionView",{hash:{action:"toggleLineItem",target:"controller",contextBinding:"item"},hashTypes:{action:"STRING",target:"STRING",contextBinding:"STRING"},hashContexts:{action:e,target:e,contextBinding:e},inverse:T.noop,fn:T.program(11,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n      "),""}function m(e,t){return t.buffer.push("\r\n          "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"item.isSelected",appearance:"switch"},hashTypes:{checkedBinding:"STRING",appearance:"STRING"},hashContexts:{checkedBinding:e,appearance:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n          "),""}function g(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:T.noop,fn:T.program(14,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:T.noop,fn:T.program(16,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function p(e,t){return t.buffer.push("\r\n  "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{tabindex:"3",label:"~locale.manageviewing:disconnect.date~",valueBinding:"viewModel.contractEndDate",class:"info-heading",validatorBinding:"validators.contractEndDateValidator"},hashTypes:{tabindex:"STRING",label:"STRING",valueBinding:"STRING",class:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,label:e,valueBinding:e,class:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function v(e,t){return t.buffer.push("\r\n  "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"4",valueBinding:"viewModel.disconnectReason",label:"~locale.manageviewing:disconnect.disconnectReason~",validatorBinding:"validators.disconnectReasonValidator",contentBinding:"disconnectReasons",optionLabelPath:"content.CanonicalValue",optionValuePath:"content"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function f(e,t){var o;return t.buffer.push("\r\n  "),o=a.if.call(e,"showNoDataLabel",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(19,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function b(e,t){var o;return t.buffer.push("\r\n  <hr />\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(20,C,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function C(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:T.noop,fn:T.program(21,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function S(e,t){return t.buffer.push("\r\n  "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:disconnect.messageDisconnect~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function D(e,t){var o;return t.buffer.push('\r\n  <br/>\r\n  <div style="float:right;">\r\n    '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{tabindex:"5",action:"disconnect"},hashTypes:{tabindex:"STRING",action:"STRING"},hashContexts:{tabindex:e,action:e},inverse:T.noop,fn:T.program(24,y,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  </div>\r\n  "),""}function y(e,t){var o,s;return t.buffer.push("\r\n    "),t.buffer.push(M((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:disconnect.disconnectTitle",s):N.call(e,"loc","locale.manageviewing:disconnect.disconnectTitle",s)))),t.buffer.push("\r\n    "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var w,I,x,M=this.escapeExpression,T=this,N=a.helperMissing;return s.buffer.push("<div "),s.buffer.push(M(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(M((I=a.loc||t&&t.loc,x={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},I?I.call(t,"locale.manageviewing:csi.disconnectTitle",x):N.call(t,"loc","locale.manageviewing:csi.disconnectTitle",x)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/csiManageViewing">&lt;'),s.buffer.push(M((I=a.loc||t&&t.loc,x={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},I?I.call(t,"locale.manageviewing:disconnect.back",x):N.call(t,"loc","locale.manageviewing:disconnect.back",x)))),s.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n  "),w=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:commercial.disconnectPackages~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:T.noop,fn:T.program(1,r,s),contexts:[t],types:["ID"],data:s}),(w||0===w)&&s.buffer.push(w),s.buffer.push("\r\n  "),w=a.if.call(t,"showDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(23,D,s),contexts:[t],types:["ID"],data:s}),(w||0===w)&&s.buffer.push(w),s.buffer.push("\r\n</div>\r\n"),""}),Ember.TEMPLATES.CsiEditViewingView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n      \x3c!--Viewing Information Start--\x3e\r\n      "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.csicustomer:viewingInformation.viewingFilter~",id:"viewLabel",class:"sub-heading"},hashTypes:{text:"STRING",id:"STRING",class:"STRING"},hashContexts:{text:e,id:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      <br/>\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:S.noop,fn:S.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),o=a.if.call(e,"showDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:S.noop,fn:S.program(7,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function n(e,t){var o;return t.buffer.push("\r\n        \x3c!--Column 1--\x3e\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:S.noop,fn:S.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        \x3c!--Column 2--\x3e\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:S.noop,fn:S.program(5,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function i(e,t){return t.buffer.push("\r\n            "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.csicustomer:customerprofile.establishmentName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"1",valueBinding:"viewModel.establishmentName",prompt:"~locale.csicustomer:viewingInformation.establishmentPrompt~",contentBinding:"viewModel.establishments",optionLabelPath:"content",optionValuePath:"content",disableBinding:"controlsDisabled"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",disableBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n        "),""}function c(e,t){return t.buffer.push("\r\n            "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{
text:"~locale.csicustomer:viewingInformation.viewingLocation~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"2",valueBinding:"viewModel.viewingLocation",prompt:"~locale.csicustomer:viewingInformation.viewingLocationPrompt~",contentBinding:"viewModel.viewingLocations",optionLabelPath:"content",optionValuePath:"content",disableBinding:"controlsDisabled"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",disableBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n        "),""}function l(e,t){var o,s,r;return t.buffer.push("\r\n      <hr />  \r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:S.noop,fn:S.program(8,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      \x3c!--Viewing Information End--\x3e\r\n      <hr />\r\n      \x3c!--Devices Information Start--\x3e\r\n      "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.csicustomer:viewingInformation.viewingDevices~",id:"deviceLabel",class:"sub-heading"},hashTypes:{text:"STRING",id:"STRING",class:"STRING"},hashContexts:{text:e,id:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      <table id="packageGrid" class="table table-bordered komodo-datagrid">\r\n        <tr>\r\n          <th>'),t.buffer.push(C((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.csicustomer:addDevicesAndPackages.deviceNumber",r):D.call(e,"loc","locale.csicustomer:addDevicesAndPackages.deviceNumber",r)))),t.buffer.push("</th>\r\n          <th>"),t.buffer.push(C((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.csicustomer:addDevicesAndPackages.smartcardNumber",r):D.call(e,"loc","locale.csicustomer:addDevicesAndPackages.smartcardNumber",r)))),t.buffer.push("</th>\r\n          <th>"),t.buffer.push(C((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.csicustomer:addDevicesAndPackages.principalPackage",r):D.call(e,"loc","locale.csicustomer:addDevicesAndPackages.principalPackage",r)))),t.buffer.push("</th>\r\n          <th>"),t.buffer.push(C((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.csicustomer:addDevicesAndPackages.principalStatus",r):D.call(e,"loc","locale.csicustomer:addDevicesAndPackages.principalStatus",r)))),t.buffer.push("</th>\r\n          <th>"),t.buffer.push(C((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.csicustomer:addDevicesAndPackages.addOnChannels",r):D.call(e,"loc","locale.csicustomer:addDevicesAndPackages.addOnChannels",r)))),t.buffer.push("</th>\r\n          <th>"),t.buffer.push(C((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.csicustomer:addDevicesAndPackages.addOnStatus",r):D.call(e,"loc","locale.csicustomer:addDevicesAndPackages.addOnStatus",r)))),t.buffer.push("</th>\r\n        </tr>\r\n        "),o=a.each.call(e,"item","in","viewModel.selectedproductData",{hash:{},hashTypes:{},hashContexts:{},inverse:S.noop,fn:S.program(13,m,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </table>\r\n      \x3c!--Devices Information End--\x3e\r\n      "),""}function d(e,t){var o;return t.buffer.push("\r\n        \x3c!--Column 1--\x3e\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:S.noop,fn:S.program(9,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        \x3c!--Column 2--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:S.noop,fn:S.program(11,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function u(e,t){return t.buffer.push("\r\n            "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.csicustomer:customerprofile.viewingPlatform~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewModel.viewingPlatform"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            <br/>\r\n            "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.csicustomer:customerprofile.contractStartDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewModel.contractStartDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            <br/>\r\n            "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.chargePeriod~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n  "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"4",valueBinding:"viewModel.chargePeriod",contentBinding:"chargePeriods",optionLabelPath:"content.title",optionValuePath:"content.title",disabledBinding:"disablechargePeriod"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n        "),""}function h(e,t){return t.buffer.push("\r\n  "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"viewModel.viewingPoints",tabindex:"3",label:"~locale.csicustomer:customerprofile.viewingPoints~",validatorBinding:"validators.viewingPointsValidator",class:"info-heading",disabledBinding:"disableViewingPoints"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",label:"STRING",validatorBinding:"STRING",class:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,tabindex:e,label:e,validatorBinding:e,class:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n            <br/>\r\n            "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.csicustomer:customerprofile.contractEndDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(C(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewModel.contractEndDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n        "),""}function m(e,t){var o;return t.buffer.push("\r\n        <tr>\r\n          <td>"),o=a._triageMustache.call(e,"item.deviceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n          <td>"),o=a._triageMustache.call(e,"item.smartCardNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n          <td>\r\n            <div>"),o=a._triageMustache.call(e,"item.prinPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n          </td>\r\n          <td>"),o=a._triageMustache.call(e,"item.prinPckStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n          <td>\r\n            <div>"),o=a._triageMustache.call(e,"item.addOnPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n          </td>\r\n          <td>"),o=a._triageMustache.call(e,"item.addOnPckStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        </tr>\r\n        "),""}function g(e,t){var o,s;t.buffer.push(C((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.csicustomer:customerInformation.save",s):D.call(e,"loc","locale.csicustomer:customerInformation.save",s))))}function p(e,t){var o,s;t.buffer.push(C((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.csicustomer:customerInformation.cancel",s):D.call(e,"loc","locale.csicustomer:customerInformation.cancel",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var v,f,b,C=this.escapeExpression,S=this,D=a.helperMissing;return s.buffer.push("<div "),s.buffer.push(C(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(C((f=a.loc||t&&t.loc,b={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},f?f.call(t,"locale.manageviewing:csi.editViewTitle",b):D.call(t,"loc","locale.manageviewing:csi.editViewTitle",b)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/csiCustomerProfile">&lt;'),s.buffer.push(C((f=a.loc||t&&t.loc,b={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},f?f.call(t,"locale.manageAccount.editPaymentDetails:general.backLink",b):D.call(t,"loc","locale.manageAccount.editPaymentDetails:general.backLink",b)))),s.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n  "),v=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.csicustomer:viewingInformation.viewingInformationTitle~"},hashTypes:{title:"STRING"},hashContexts:{title:t},inverse:S.noop,fn:S.program(1,r,s),contexts:[t],types:["ID"],data:s}),(v||0===v)&&s.buffer.push(v),s.buffer.push('\r\n  <br/>\r\n  <div style="float:right;">\r\n    '),v=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"saveChanges",tabindex:"50",disabledBinding:"isButtonDisable"},hashTypes:{action:"STRING",tabindex:"STRING",disabledBinding:"STRING"},hashContexts:{action:t,tabindex:t,disabledBinding:t},inverse:S.noop,fn:S.program(15,g,s),contexts:[t],types:["ID"],data:s}),(v||0===v)&&s.buffer.push(v),s.buffer.push("\r\n    "),v=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"cancelChanges",tabindex:"51",type:"inverse"},hashTypes:{action:"STRING",tabindex:"STRING",type:"STRING"},hashContexts:{action:t,tabindex:t,type:t},inverse:S.noop,fn:S.program(17,p,s),contexts:[t],types:["ID"],data:s}),(v||0===v)&&s.buffer.push(v),s.buffer.push("\r\n  </div>\r\n  <br/>\r\n</div>"),""}),Ember.TEMPLATES.CsiErrorCodesView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n      \x3c!--Clear Error Codes Information Start--\x3e\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),o=a.if.call(e,"showDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(7,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      \x3c!--Clear Error Codes Information End--\x3e\r\n  "),""}function n(e,t){var o;return t.buffer.push("\r\n        \x3c!--Column 1--\x3e\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:M.noop,fn:M.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        \x3c!--Column 2--\x3e\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:M.noop,fn:M.program(5,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function i(e,t){return t.buffer.push("\r\n            "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:customerprofile.establishmentName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"1",valueBinding:"viewModel.establishmentName",prompt:"~locale.commercialcustomer:viewingInformation.establishmentPrompt~",contentBinding:"viewModel.establishments",optionLabelPath:"content",optionValuePath:"content"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,valueBinding:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n        "),""}function c(e,t){return t.buffer.push("\r\n            "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:viewingInformation.viewingLocation~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"2",valueBinding:"viewModel.viewingLocation",prompt:"~locale.commercialcustomer:viewingInformation.viewingLocationPrompt~",contentBinding:"viewModel.viewingLocations",optionLabelPath:"content",optionValuePath:"content"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,valueBinding:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n        "),""}function l(e,t){var o;return t.buffer.push("\r\n      <hr />\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(8,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      <hr />\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(17,f,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      <hr />\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(20,C,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function d(e,t){var o;return t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-12"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:M.noop,fn:M.program(9,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function u(e,t){var o;return t.buffer.push("\r\n      "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:errorCodes.smartcards~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(10,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function h(e,t){var o;return t.buffer.push("\r\n      \x3c!--Column 1--\x3e\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-6"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:M.noop,fn:M.program(11,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      \x3c!--Column 2--\x3e\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-6"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:M.noop,fn:M.program(14,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function m(e,t){var o;return t.buffer.push("\r\n      "),o=a.each.call(e,"smartcard","in","smartCardsFirstColumn",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(12,g,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function g(e,t){return t.buffer.push("\r\n      "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"smartcard.isSelected",tabindex:"5"},hashTypes:{checkedBinding:"STRING",tabindex:"STRING"},hashContexts:{checkedBinding:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"smartcard.description"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n      "),""}function p(e,t){var o;return t.buffer.push("\r\n      "),o=a.each.call(e,"smartcard","in","smartCardsSecondColumn",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(15,v,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function v(e,t){return t.buffer.push("\r\n      "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"smartcard.isSelected",tabindex:"6"},hashTypes:{checkedBinding:"STRING",tabindex:"STRING"},hashContexts:{checkedBinding:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"smartcard.description"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n      "),""}function f(e,t){var o;return t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-12"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:M.noop,fn:M.program(18,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function b(e,t){return t.buffer.push("\r\n      <br />\r\n      "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{tabindex:"4",checkedBinding:"viewModel.allSmartcardSelected"},hashTypes:{tabindex:"STRING",checkedBinding:"STRING"},hashContexts:{tabindex:e,checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:errorCodes.allSmartCards~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br />\r\n      <br />\r\n      "),""}function C(e,t){var o;return t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-12"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:M.noop,fn:M.program(21,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function S(e,t){return t.buffer.push("\r\n      "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:errorCodes.errorCode~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br />\r\n      "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"3",valueBinding:"viewModel.errorReasonCode",optionLabelPath:"content.CanonicalValue",optionValuePath:"content.CanonicalKey",contentBinding:"errorReasonCodes"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",contentBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,optionLabelPath:e,optionValuePath:e,contentBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br />\r\n      <br />\r\n      "),""}function D(e,t){var o,s;t.buffer.push(x((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.commercialcustomer:errorCodes.clearErrors",s):T.call(e,"loc","locale.commercialcustomer:errorCodes.clearErrors",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var y,w,I,x=this.escapeExpression,M=this,T=a.helperMissing;return s.buffer.push("<div "),s.buffer.push(x(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(x((w=a.loc||t&&t.loc,I={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},w?w.call(t,"locale.manageviewing:csi.clearErrorCodeTitle",I):T.call(t,"loc","locale.manageviewing:csi.clearErrorCodeTitle",I)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/csiManageViewing">&lt;'),s.buffer.push(x((w=a.loc||t&&t.loc,I={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},w?w.call(t,"locale.manageAccount.editPaymentDetails:general.backLink",I):T.call(t,"loc","locale.manageAccount.editPaymentDetails:general.backLink",I)))),s.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n  "),y=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.commercialcustomer:errorCodes.errorCodesTitle~"},hashTypes:{title:"STRING"},hashContexts:{title:t},inverse:M.noop,fn:M.program(1,r,s),contexts:[t],types:["ID"],data:s}),(y||0===y)&&s.buffer.push(y),s.buffer.push('\r\n  <br/>\r\n  <div style="float:right;">\r\n    '),y=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"clearErrorCodes",tabindex:"20",disabledBinding:"isButtonDisable"},hashTypes:{action:"STRING",tabindex:"STRING",disabledBinding:"STRING"},hashContexts:{action:t,tabindex:t,disabledBinding:t},inverse:M.noop,fn:M.program(23,D,s),contexts:[t],types:["ID"],data:s}),(y||0===y)&&s.buffer.push(y),s.buffer.push("\r\n  </div>\r\n  <br/>\r\n</div>"),""}),Ember.TEMPLATES.CsiLogDetailsView=Ember.Handlebars.template(function(e,t,a,o,s){this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var r=this.escapeExpression;return s.buffer.push('<div class="modal-max-size">\r\n\r\n  <table width="100%">\r\n    \x3c!--History ID--\x3e\r\n    <tr>\r\n      <td width="150px" valign="top">\r\n        '),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:csiLogDetails.historyID~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:t,class:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n      </td>\r\n      <td>\r\n        "),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.historyID"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n      </td>\r\n    </tr>\r\n\r\n    \x3c!--Date/Time--\x3e\r\n    <tr>\r\n      <td>\r\n        "),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:csiLogDetails.date~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:t,class:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n      </td>\r\n      <td>\r\n        "),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.dateTime"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n      </td>\r\n    </tr>\r\n\r\n    \x3c!--Username--\x3e\r\n    <tr>\r\n      <td>\r\n        "),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:csiLogDetails.username~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:t,class:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n      </td>\r\n      <td>\r\n        "),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.username"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n      </td>\r\n    </tr>\r\n\r\n    \x3c!--Event Number--\x3e\r\n    <tr>\r\n      <td>\r\n        "),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:csiLogDetails.eventNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:t,class:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n      </td>\r\n      <td>\r\n        "),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.eventNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n      </td>\r\n    </tr>\r\n\r\n    \x3c!--Host Name--\x3e\r\n    <tr>\r\n      <td>\r\n        "),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:csiLogDetails.hostName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:t,class:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n      </td>\r\n      <td>\r\n        "),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.hostName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n      </td>\r\n    </tr>\r\n\r\n    \x3c!--Serial Number--\x3e\r\n    <tr>\r\n      <td>\r\n        "),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:csiLogDetails.serialNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:t,class:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n      </td>\r\n      <td>\r\n        "),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.serialNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n      </td>\r\n    </tr>\r\n\r\n    \x3c!--Reason--\x3e\r\n    <tr>\r\n      <td>\r\n        "),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:csiLogDetails.reason~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:t,class:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n      </td>\r\n      <td>\r\n        "),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.reason"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n      </td>\r\n    </tr>\r\n\r\n    \x3c!--Message Tracking ID--\x3e\r\n    <tr>\r\n      <td>\r\n        "),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:csiLogDetails.messageTrackingId~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:t,class:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n      </td>\r\n      <td>\r\n        "),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.messageTrackingId"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push('\r\n      </td>\r\n    </tr>\r\n\r\n    \x3c!--Message--\x3e\r\n    <tr>\r\n      <td width="150px" valign="top">\r\n        '),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:csiLogDetails.message~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:t,class:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n      </td>\r\n      <td>\r\n        "),s.buffer.push(r(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.message"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n      </td>\r\n    </tr>\r\n  </table>\r\n\r\n</div>\r\n"),""}),Ember.TEMPLATES.CsiManageViewingView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n      \x3c!--Viewing Information Start--\x3e\r\n      "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:viewingInformation.viewingFilter~",id:"viewLabel",class:"sub-heading"},hashTypes:{text:"STRING",id:"STRING",class:"STRING"},hashContexts:{text:e,id:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      <br/>\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:D.noop,fn:D.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),o=a.if.call(e,"showDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:D.noop,fn:D.program(7,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      \x3c!--Devices Information Start--\x3e\r\n      "),o=a.if.call(e,"isDevicesVisible",{hash:{},hashTypes:{},hashContexts:{},inverse:D.noop,fn:D.program(13,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      \x3c!--Devices Information End--\x3e\r\n    "),""}function n(e,t){var o;return t.buffer.push("\r\n        \x3c!--Column 1--\x3e\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:D.noop,fn:D.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        \x3c!--Column 2--\x3e\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:D.noop,fn:D.program(5,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function i(e,t){
return t.buffer.push("\r\n            "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:customerprofile.establishmentName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"1",valueBinding:"viewModel.establishmentName",prompt:"~locale.commercialcustomer:viewingInformation.establishmentPrompt~",contentBinding:"viewModel.establishments",optionLabelPath:"content",optionValuePath:"content"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,valueBinding:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n        "),""}function c(e,t){return t.buffer.push("\r\n            "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:viewingInformation.viewingLocation~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"2",valueBinding:"viewModel.viewingLocation",prompt:"~locale.commercialcustomer:viewingInformation.viewingLocationPrompt~",contentBinding:"viewModel.viewingLocations",optionLabelPath:"content",optionValuePath:"content"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,valueBinding:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n        "),""}function l(e,t){var o;return t.buffer.push("\r\n      <hr />  \r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:D.noop,fn:D.program(8,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      \x3c!--Viewing Information End--\x3e\r\n      <hr />\r\n      "),""}function d(e,t){var o;return t.buffer.push("\r\n        \x3c!--Column 1--\x3e\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:D.noop,fn:D.program(9,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        \x3c!--Column 2--\x3e\r\n        "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:D.noop,fn:D.program(11,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function u(e,t){return t.buffer.push("\r\n            "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:customerprofile.viewingPlatform~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewModel.viewingPlatform",id:"nameData"},hashTypes:{textBinding:"STRING",id:"STRING"},hashContexts:{textBinding:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            <br/>\r\n            "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:customerprofile.contractStartDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewModel.contractStartDate",id:"nameData"},hashTypes:{textBinding:"STRING",id:"STRING"},hashContexts:{textBinding:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            <br/>\r\n            "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.chargePeriod~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewModel.chargePeriod",id:"nameData"},hashTypes:{textBinding:"STRING",id:"STRING"},hashContexts:{textBinding:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n        "),""}function h(e,t){return t.buffer.push("\r\n            "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:customerprofile.viewingPoints~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewModel.viewingPoints",id:"customerNumberData"},hashTypes:{textBinding:"STRING",id:"STRING"},hashContexts:{textBinding:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            <br/>\r\n            "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:customerprofile.contractEndDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n            "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewModel.contractEndDate",id:"nameData"},hashTypes:{textBinding:"STRING",id:"STRING"},hashContexts:{textBinding:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n        "),""}function m(e,t){var o,s,r;return t.buffer.push("\r\n      "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:viewingInformation.viewingDevices~",id:"deviceLabel",class:"sub-heading",visibleBinding:"isDevicesVisible"},hashTypes:{text:"STRING",id:"STRING",class:"STRING",visibleBinding:"STRING"},hashContexts:{text:e,id:e,class:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n      <div class="table-responsive">\r\n        <table id="packageGrid" class="table table-bordered komodo-datagrid">\r\n            <tr>\r\n                <th>'),t.buffer.push(S((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.deviceNumber",r):y.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.deviceNumber",r)))),t.buffer.push("</th>\r\n                <th>"),t.buffer.push(S((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.smartcardNumber",r):y.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.smartcardNumber",r)))),t.buffer.push("</th>\r\n                <th>"),t.buffer.push(S((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.principalPackage",r):y.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.principalPackage",r)))),t.buffer.push("</th>\r\n                <th>"),t.buffer.push(S((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.principalStatus",r):y.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.principalStatus",r)))),t.buffer.push("</th>\r\n                <th>"),t.buffer.push(S((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.addOnChannels",r):y.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.addOnChannels",r)))),t.buffer.push("</th>\r\n                <th>"),t.buffer.push(S((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.addOnStatus",r):y.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.addOnStatus",r)))),t.buffer.push("</th>\r\n                <th>"),t.buffer.push(S((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.actions",r):y.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.actions",r)))),t.buffer.push("</th>\r\n            </tr>\r\n            "),o=a.each.call(e,"item","in","viewModel.selectedproductData",{hash:{},hashTypes:{},hashContexts:{},inverse:D.noop,fn:D.program(14,g,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </table>\r\n        "),t.buffer.push(S(a.view.call(e,"Komodo.Controls.TablePager",{hash:{tableId:"packageGrid",contentBinding:"viewModel.selectedproductData",itemsPerPage:"10",headerRows:"1",visibleBinding:"isDevicesVisible"},hashTypes:{tableId:"STRING",contentBinding:"STRING",itemsPerPage:"STRING",headerRows:"STRING",visibleBinding:"STRING"},hashContexts:{tableId:e,contentBinding:e,itemsPerPage:e,headerRows:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      </div>\r\n      "),""}function g(e,t){var o;return t.buffer.push("\r\n            <tr>\r\n                <td>\r\n                    "),o=a._triageMustache.call(e,"item.deviceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                <td>\r\n                    "),o=a._triageMustache.call(e,"item.smartCardNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                <td>\r\n                    <div>"),o=a._triageMustache.call(e,"item.prinPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n                </td>\r\n                <td>\r\n                    "),o=a._triageMustache.call(e,"item.prinPckStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                <td>\r\n                    <div>"),o=a._triageMustache.call(e,"item.addOnPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n                </td>\r\n                <td>\r\n                    "),o=a._triageMustache.call(e,"item.addOnPckStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                <td>\r\n                    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"editDeviceInformation",size:"xs",type:"success"},hashTypes:{action:"STRING",size:"STRING",type:"STRING"},hashContexts:{action:e,size:e,type:e},inverse:D.noop,fn:D.program(15,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"viewDeviceInformation",size:"xs"},hashTypes:{action:"STRING",size:"STRING"},hashContexts:{action:e,size:e},inverse:D.noop,fn:D.program(17,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n            </tr>\r\n            "),""}function p(e,t){var o,s;t.buffer.push(S((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.commercialcustomer:addDevicesAndPackages.edit",s):y.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.edit",s))))}function v(e,t){var o,s;t.buffer.push(S((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.commercialcustomer:addDevicesAndPackages.view",s):y.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.view",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var f,b,C,S=this.escapeExpression,D=this,y=a.helperMissing;return s.buffer.push("<div "),s.buffer.push(S(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(S((b=a.loc||t&&t.loc,C={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},b?b.call(t,"locale.manageviewing:csi.manageViewTitle",C):y.call(t,"loc","locale.manageviewing:csi.manageViewTitle",C)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/csiCustomerProfile">&lt;'),s.buffer.push(S((b=a.loc||t&&t.loc,C={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},b?b.call(t,"locale.manageAccount.editPaymentDetails:general.backLink",C):y.call(t,"loc","locale.manageAccount.editPaymentDetails:general.backLink",C)))),s.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n  "),f=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.commercialcustomer:viewingInformation.viewingInformationTitle~",linksBinding:"collapsibleEditInfoLinks"},hashTypes:{title:"STRING",linksBinding:"STRING"},hashContexts:{title:t,linksBinding:t},inverse:D.noop,fn:D.program(1,r,s),contexts:[t],types:["ID"],data:s}),(f||0===f)&&s.buffer.push(f),s.buffer.push("\r\n</div>"),""}),Ember.TEMPLATES.CsiReconnectView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n\r\n  \x3c!--Viewing Information Start--\x3e\r\n  "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:viewingInformation.viewingFilter~",id:"viewLabel",class:"sub-heading"},hashTypes:{text:"STRING",id:"STRING",class:"STRING"},hashContexts:{text:e,id:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),o=a.if.call(e,"showDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:T.program(18,f,t),fn:T.program(7,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function n(e,t){var o;return t.buffer.push("\r\n  \x3c!--Column 1--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:T.noop,fn:T.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  \x3c!--Column 2--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:T.noop,fn:T.program(5,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function i(e,t){return t.buffer.push("\r\n  "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:customerprofile.establishmentName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"1",valueBinding:"viewModel.establishmentName",prompt:"~locale.commercialcustomer:viewingInformation.establishmentPrompt~",contentBinding:"viewModel.establishments",optionLabelPath:"content",optionValuePath:"content"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,valueBinding:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),""}function c(e,t){return t.buffer.push("\r\n  "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:viewingInformation.viewingLocation~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"2",valueBinding:"viewModel.viewingLocation",prompt:"~locale.commercialcustomer:viewingInformation.viewingLocationPrompt~",contentBinding:"viewModel.viewingLocations",optionLabelPath:"content",optionValuePath:"content"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,valueBinding:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),""}function l(e,t){var o;return t.buffer.push("\r\n  <hr />\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(8,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <hr />\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(13,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function d(e,t){var o;return t.buffer.push("\r\n  \x3c!--Column 1--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"col-md-12"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:T.noop,fn:T.program(9,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function u(e,t){var o,s,r;return t.buffer.push("\r\n  \x3c!--Devices Information Start--\x3e\r\n  "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:viewingInformation.viewingDevices~",id:"deviceLabel",class:"sub-heading"},hashTypes:{text:"STRING",id:"STRING",class:"STRING"},hashContexts:{text:e,id:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n  <table id="packageGrid" class="table table-bordered komodo-datagrid">\r\n      <tr>\r\n        <th>'),t.buffer.push(M((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.deviceNumber",r):N.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.deviceNumber",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(M((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.smartcardNumber",r):N.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.smartcardNumber",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(M((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.principalPackage",r):N.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.principalPackage",r)))),t.buffer.push('</th>\r\n        <th style="text-align:center">'),t.buffer.push(M((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"Is Add-on",r):N.call(e,"loc","Is Add-on",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(M((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"Status",r):N.call(e,"loc","Status",r)))),t.buffer.push('</th>        \r\n        <th style="text-align:center;vertical-align:middle;">\r\n          '),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"viewModel.disconnectReconnectAll",appearance:"switch"},hashTypes:{checkedBinding:"STRING",appearance:"STRING"},hashContexts:{checkedBinding:e,appearance:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </th>\r\n      </tr>\r\n      "),o=a.each.call(e,"item","in","viewModel.selectedproductData",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(10,h,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </table>\r\n  "),""}function h(e,t){var o;return t.buffer.push("\r\n      <tr>\r\n        <td>"),o=a._triageMustache.call(e,"item.deviceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        <td>"),o=a._triageMustache.call(e,"item.smartCardNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        <td>"),o=a._triageMustache.call(e,"item.prinPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>        \r\n        <td style="text-align:center">'),o=a._triageMustache.call(e,"item.isAddon",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        <td>"),o=a._triageMustache.call(e,"item.prinPckStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n        <td style="text-align:center;vertical-align:middle;">\r\n          '),o=a.view.call(e,"Komodo.Controls.ActionView",{hash:{action:"toggleLineItem",target:"controller",contextBinding:"item"},hashTypes:{action:"STRING",target:"STRING",contextBinding:"STRING"},hashContexts:{action:e,target:e,contextBinding:e},inverse:T.noop,fn:T.program(11,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n      "),""}function m(e,t){return t.buffer.push("\r\n          "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"item.isSelected",appearance:"switch"},hashTypes:{checkedBinding:"STRING",appearance:"STRING"},hashContexts:{checkedBinding:e,appearance:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n          "),""}function g(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:T.noop,fn:T.program(14,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:T.noop,fn:T.program(16,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function p(e,t){return t.buffer.push("\r\n  "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{tabindex:"3",label:"~locale.manageviewing:disconnect.date~",valueBinding:"viewModel.contractEndDate",class:"info-heading",validatorBinding:"validators.contractEndDateValidator"},hashTypes:{tabindex:"STRING",label:"STRING",valueBinding:"STRING",class:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,label:e,valueBinding:e,class:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function v(e,t){return t.buffer.push("\r\n  "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"4",valueBinding:"viewModel.reconnectReason",label:"~locale.manageviewing:reconnect.reconnectReason~",validatorBinding:"validators.reconnectReasonsValidator",contentBinding:"reconnectReasons",optionLabelPath:"content.CanonicalValue",optionValuePath:"content"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function f(e,t){var o;return t.buffer.push("\r\n  "),o=a.if.call(e,"showNoDataLabel",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(19,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function b(e,t){var o;return t.buffer.push("\r\n  <hr />\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(20,C,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function C(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:T.noop,fn:T.program(21,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function S(e,t){return t.buffer.push("\r\n  "),t.buffer.push(M(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:reconnect.messageReconnect~",class:"sub-heading",visibleBinding:"showNoData"},hashTypes:{text:"STRING",class:"STRING",visibleBinding:"STRING"},hashContexts:{text:e,class:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function D(e,t){var o;return t.buffer.push('\r\n  <br/>\r\n  <div style="float:right;">\r\n    '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{tabindex:"5",action:"reconnect"},hashTypes:{tabindex:"STRING",action:"STRING"},hashContexts:{tabindex:e,action:e},inverse:T.noop,fn:T.program(24,y,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  </div>\r\n  "),""}function y(e,t){var o,s;return t.buffer.push("\r\n    "),t.buffer.push(M((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:reconnect.reconnectTitle",s):N.call(e,"loc","locale.manageviewing:reconnect.reconnectTitle",s)))),t.buffer.push("\r\n    "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var w,I,x,M=this.escapeExpression,T=this,N=a.helperMissing;return s.buffer.push("<div "),s.buffer.push(M(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(M((I=a.loc||t&&t.loc,x={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},I?I.call(t,"locale.manageviewing:csi.reconnectTitle",x):N.call(t,"loc","locale.manageviewing:csi.reconnectTitle",x)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/csiManageViewing">&lt;'),s.buffer.push(M((I=a.loc||t&&t.loc,x={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},I?I.call(t,"locale.manageviewing:reconnect.back",x):N.call(t,"loc","locale.manageviewing:reconnect.back",x)))),s.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n  "),w=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:commercial.reconnectPackages~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:T.noop,fn:T.program(1,r,s),contexts:[t],types:["ID"],data:s}),(w||0===w)&&s.buffer.push(w),s.buffer.push("\r\n  "),w=a.if.call(t,"showDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:T.noop,fn:T.program(23,D,s),contexts:[t],types:["ID"],data:s}),(w||0===w)&&s.buffer.push(w),s.buffer.push("\r\n</div>\r\n"),""}),Ember.TEMPLATES.CsiViewingLocationView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n    \x3c!--Viewing Location Information Start--\x3e\r\n    "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.csicustomer:paymentGroup.addPaymentGroup~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br/>\r\n    "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.DataGrid",{hash:{canSort:!0,performsValidation:!0,canDelete:!1,canEdit:!1,editMode:!1,canSelect:!0,pageSize:10,canSelect:!0,selectedItemBinding:"selectedGridItem",contentBinding:"viewModel.paymentGroups",columnsBinding:"paymentGroupGridColumns",commandItemBinding:"commandGridItem",commandItemTypeBinding:"deleteGridItem"},hashTypes:{canSort:"BOOLEAN",performsValidation:"BOOLEAN",canDelete:"BOOLEAN",canEdit:"BOOLEAN",editMode:"BOOLEAN",canSelect:"BOOLEAN",pageSize:"INTEGER",canSelect:"BOOLEAN",selectedItemBinding:"STRING",contentBinding:"STRING",columnsBinding:"STRING",commandItemBinding:"STRING",commandItemTypeBinding:"STRING"},hashContexts:{canSort:e,performsValidation:e,canDelete:e,canEdit:e,editMode:e,canSelect:e,pageSize:e,canSelect:e,selectedItemBinding:e,contentBinding:e,columnsBinding:e,commandItemBinding:e,commandItemTypeBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n    \x3c!--Viewing Location Information End--\x3e\r\n\r\n    \x3c!--Add Viewing Location Information Start--\x3e\r\n    <div id="csiManageViewingEditPanel" style="display: none;">\r\n    '),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    \r\n    \x3c!--Address Information--\x3e\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(5,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n\r\n    <div id="csiManageViewingAddressPanel" style="display: none;">\r\n        '),t.buffer.push(x(a.view.call(e,"Komodo.Controls.Address",{hash:{addressBinding:"addressInformation",multipleAddress:!1},hashTypes:{addressBinding:"STRING",multipleAddress:"BOOLEAN"},hashContexts:{addressBinding:e,multipleAddress:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    </div>\r\n    \x3c!--Address Information End--\x3e\r\n\r\n    \x3c!--Finance Information--\x3e\r\n    "),o=a.if.call(e,"hide",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(8,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n    <div style="float:right;">\r\n      '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"savePaymentGroup",tabindex:"32",class:"btn-success"},hashTypes:{action:"STRING",tabindex:"STRING",class:"STRING"},hashContexts:{action:e,tabindex:e,class:e},inverse:M.noop,fn:M.program(22,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),
t.buffer.push("\r\n    </div>\r\n    <br/>\r\n  </div>\r\n  \x3c!--Add Viewing Location Information End--\x3e\r\n  "),""}function n(e,t){var o;return t.buffer.push("\r\n    \x3c!--Column 1--\x3e\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:M.noop,fn:M.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function i(e,t){return t.buffer.push("\r\n        "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"2",valueBinding:"viewModel.paymentGroup",label:"~locale.csicustomer:paymentGroup.paymentGroup~",validatorBinding:"validators.paymentGroupValidator",disabledBinding:"editPaymentGroup"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function c(e,t){var o;return t.buffer.push("\r\n    \x3c!--Column 1--\x3e\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:M.noop,fn:M.program(6,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function l(e,t){return t.buffer.push("\r\n    "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{valueBinding:"viewModel.location",contentBinding:"locations",displayPath:"value",valuePath:"key",tabindex:"3",label:"~locale.commercialcustomer:paymentGroup.paymentGroupLoaction~",disabledBinding:"isEdit"},hashTypes:{valueBinding:"STRING",contentBinding:"STRING",displayPath:"STRING",valuePath:"STRING",tabindex:"STRING",label:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,contentBinding:e,displayPath:e,valuePath:e,tabindex:e,label:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function d(e,t){var o;return t.buffer.push("\r\n    <hr />\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(9,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function u(e,t){var o;return t.buffer.push("\r\n    \x3c!--Column 1--\x3e\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:M.noop,fn:M.program(10,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    \x3c!--Column 2--\x3e\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:M.noop,fn:M.program(16,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function h(e,t){var o;return t.buffer.push("\r\n      "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{valueBinding:"viewModel.paymentDetailAsMainLocation",tabindex:"21",contentBinding:"paymentDetails",label:"~locale.csicustomer:paymentGroup.paymentDetails~",displayPath:"title",valuePath:"value",disabledBinding:"isEdit"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",contentBinding:"STRING",label:"STRING",displayPath:"STRING",valuePath:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,tabindex:e,contentBinding:e,label:e,displayPath:e,valuePath:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      "),o=a.if.call(e,"showPaymentDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(11,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function m(e,t){var o;return t.buffer.push("\r\n      "),o=a.if.call(e,"showDebitOrderDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:M.program(14,p,t),fn:M.program(12,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function g(e,t){return t.buffer.push("\r\n        "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"23",valueBinding:"viewModel.payerName",label:"~locale.csicustomer:customerInformation.payerName~",validatorBinding:"validators.payerNameValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"viewModel.accountType",tabindex:"25",contentBinding:"paymentMethods",label:"~locale.customer:customerInformation.accountType~",optionLabelPath:"content.value",optionValuePath:"content",prompt:"~locale.customer:customerInformation.selectAccountType~",validatorBinding:"validators.accountTypeValidator"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",contentBinding:"STRING",label:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,tabindex:e,contentBinding:e,label:e,optionLabelPath:e,optionValuePath:e,prompt:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"viewModel.branchCode",label:"~locale.customer:customerInformation.branchName~",tabindex:"27",contentBinding:"bankBranches",optionLabelPath:"content.CanonicalValue",optionValuePath:"content",prompt:"~locale.customer:customerInformation.branchNamePrompt~",validatorBinding:"validators.branchCodeValidator"},hashTypes:{valueBinding:"STRING",label:"STRING",tabindex:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,label:e,tabindex:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"viewModel.accountNo",label:"~locale.customer:customerInformation.accountNumber~",tabindex:"29",validatorBinding:"validators.accountNoValidator"},hashTypes:{valueBinding:"STRING",label:"STRING",tabindex:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,label:e,tabindex:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      "),""}function p(e,t){return t.buffer.push("\r\n        "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"viewModel.debitOrderDay",tabindex:"31",labelBinding:"debitOrderDaylabel",promptBinding:"paymentDayPrompt",contentBinding:"invoiceDays",validatorBinding:"validators.debitOrderDayValidator",optionLabelPath:"content.value",optionValuePath:"content.key"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",labelBinding:"STRING",promptBinding:"STRING",contentBinding:"STRING",validatorBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{valueBinding:e,tabindex:e,labelBinding:e,promptBinding:e,contentBinding:e,validatorBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      "),""}function v(e,t){var o;return t.buffer.push("\r\n      "),o=a.if.call(e,"showPaymentDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(17,f,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),o=a.if.call(e,"showPaymentDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(19,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function f(e,t){return t.buffer.push("\r\n        "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{valueBinding:"viewModel.methodOfPayment",tabindex:"22",contentBinding:"paymentMethodList",label:"~locale.customer:customerInformation.methodOfPayment~",displayPath:"title",valuePath:"value",selectionBinding:"selectedpaymentMethod"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",contentBinding:"STRING",label:"STRING",displayPath:"STRING",valuePath:"STRING",selectionBinding:"STRING"},hashContexts:{valueBinding:e,tabindex:e,contentBinding:e,label:e,displayPath:e,valuePath:e,selectionBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      "),""}function b(e,t){var o;return t.buffer.push("\r\n      "),o=a.if.call(e,"showDebitOrderDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:M.noop,fn:M.program(20,C,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function C(e,t){return t.buffer.push("\r\n        "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"24",valueBinding:"viewModel.payerID",label:"~locale.customer:customerInformation.payerID~",validatorBinding:"validators.payerIDValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"viewModel.bank",tabindex:"26",contentBinding:"banks",label:"~locale.customer:customerInformation.bank~",optionLabelPath:"content.CanonicalValue",optionValuePath:"content",prompt:"~locale.customer:customerInformation.bankPrompt~",validatorBinding:"validators.bankValidator"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",contentBinding:"STRING",label:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,tabindex:e,contentBinding:e,label:e,optionLabelPath:e,optionValuePath:e,prompt:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"viewModel.branchCode.BranchCode",label:"~locale.customer:customerInformation.branchCodeText~",tabindex:"28",disabled:"true",validatorBinding:"validators.branchCodeTextValidator"},hashTypes:{valueBinding:"STRING",label:"STRING",tabindex:"STRING",disabled:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,label:e,tabindex:e,disabled:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),t.buffer.push(x(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"viewModel.debitOrderDay",tabindex:"30",labelBinding:"debitOrderDaylabel",promptBinding:"paymentDayPrompt",contentBinding:"invoiceDays",validatorBinding:"validators.debitOrderDayValidator",optionLabelPath:"content.value",optionValuePath:"content.key"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",labelBinding:"STRING",promptBinding:"STRING",contentBinding:"STRING",validatorBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{valueBinding:e,tabindex:e,labelBinding:e,promptBinding:e,contentBinding:e,validatorBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      "),""}function S(e,t){var o,s;t.buffer.push(x((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.customer:customerInformation.submit",s):T.call(e,"loc","locale.customer:customerInformation.submit",s))))}function D(e,t){var o,s;t.buffer.push(x((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.csicustomer:paymentGroup.addDevicesAndPackages",s):T.call(e,"loc","locale.csicustomer:paymentGroup.addDevicesAndPackages",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var y,w,I,x=this.escapeExpression,M=this,T=a.helperMissing;return s.buffer.push("<div "),s.buffer.push(x(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(x((w=a.loc||t&&t.loc,I={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},w?w.call(t,"locale.manageviewing:csi.viewLoactionTitle",I):T.call(t,"loc","locale.manageviewing:csi.viewLoactionTitle",I)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/csiCustomerProfile">&lt;'),s.buffer.push(x((w=a.loc||t&&t.loc,I={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},w?w.call(t,"locale.manageAccount.editPaymentDetails:general.backLink",I):T.call(t,"loc","locale.manageAccount.editPaymentDetails:general.backLink",I)))),s.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n  "),y=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.csicustomer:viewingInformation.viewingLocationInformationTitle~",linksBinding:"collapsibleAccountInfoLinks"},hashTypes:{title:"STRING",linksBinding:"STRING"},hashContexts:{title:t,linksBinding:t},inverse:M.noop,fn:M.program(1,r,s),contexts:[t],types:["ID"],data:s}),(y||0===y)&&s.buffer.push(y),s.buffer.push('\r\n  <br/>\r\n  <div style="float:right;">\r\n    '),y=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"addDevicesAndPackages",tabindex:"33",disabledBinding:"isCreateCustomerButtonDisable"},hashTypes:{action:"STRING",tabindex:"STRING",disabledBinding:"STRING"},hashContexts:{action:t,tabindex:t,disabledBinding:t},inverse:M.noop,fn:M.program(24,D,s),contexts:[t],types:["ID"],data:s}),(y||0===y)&&s.buffer.push(y),s.buffer.push("\r\n  </div>\r\n</div>"),""}),Ember.TEMPLATES.CustomerUnwantedView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push('\r\n\t\t<table width="100%">\r\n\t\t\t<tr>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<div style="float:left;">\r\n\t\t\t\t\t\t'),t.buffer.push(p(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:createRepairsOrder.filterDeviceChange~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br /><br />\r\n\t\t\t\t\t\t"),t.buffer.push(p(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:createRepairsOrder.SrSCNoLabel~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n\t\t\t\t\t\t"),t.buffer.push(p(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{valueBinding:"_searchString",tabindex:"1",class:"info-heading"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",class:"STRING"},hashContexts:{valueBinding:e,tabindex:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t"),t.buffer.push(p(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators._searchStringValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td colspan="6">\r\n\t\t\t\t\t<div style="float:right;">\r\n\t\t\t\t\t\t'),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"actionFilterDevice",tabindex:"2"},hashTypes:{action:"STRING",tabindex:"STRING"},hashContexts:{action:e,tabindex:e},inverse:v.noop,fn:v.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\t\t\t\t\t\t"),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"actionClearDevice",tabindex:"3"},hashTypes:{action:"STRING",tabindex:"STRING"},hashContexts:{action:e,tabindex:e},inverse:v.noop,fn:v.program(4,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</td>\r\n\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<hr />\r\n\t\t\t\t</td>\r\n\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t"),t.buffer.push(p(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:createRepairsOrder.devices~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t"),t.buffer.push(p(a.view.call(e,"Komodo.Controls.DataGrid",{hash:{canSort:"false",pageSize:"10",canSelect:"true",performsValidation:"false",selectedItemBinding:"dataModel.selectedDeviceGridItem",commandItemBinding:"dataModel.commandGridItem",contentBinding:"dataModel.deviceData",columnsBinding:"_columnDeviceDataGrid"},hashTypes:{canSort:"STRING",pageSize:"STRING",canSelect:"STRING",performsValidation:"STRING",selectedItemBinding:"STRING",commandItemBinding:"STRING",contentBinding:"STRING",columnsBinding:"STRING"},hashContexts:{canSort:e,pageSize:e,canSelect:e,performsValidation:e,selectedItemBinding:e,commandItemBinding:e,contentBinding:e,columnsBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t</table>\r\n\t\t"),""}function n(e,t){var o,s;t.buffer.push(p((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceLink.search",s):g.call(e,"loc","locale.manageviewing:deviceLink.search",s))))}function i(e,t){var o,s;t.buffer.push(p((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageCase:caseHistory.clear",s):g.call(e,"loc","locale.manageCase:caseHistory.clear",s))))}function c(e,t){var o;return t.buffer.push("\r\n\t"),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"float-right"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:v.noop,fn:v.program(7,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\t"),""}function l(e,t){var o;return t.buffer.push('\r\n\t<div style="float:right;">\r\n\t\t<br />\r\n\t\t'),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"actionReturnDevice",tabindex:"4",visibleBinding:"_isReturnDevice"},hashTypes:{action:"STRING",tabindex:"STRING",visibleBinding:"STRING"},hashContexts:{action:e,tabindex:e,visibleBinding:e},inverse:v.noop,fn:v.program(8,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\t</div>\r\n\t"),""}function d(e,t){var o,s;t.buffer.push(p((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:CustomerUnwanted.returnDevice",s):g.call(e,"loc","locale.manageStock:CustomerUnwanted.returnDevice",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var u,h,m,g=a.helperMissing,p=this.escapeExpression,v=this;return s.buffer.push("<div "),s.buffer.push(p(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n\t<div width="90%">\r\n\t\t<span class="komodo-heading">'),s.buffer.push(p((h=a.loc||t&&t.loc,m={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},h?h.call(t,"locale.manageStock:CustomerUnwanted.title",m):g.call(t,"loc","locale.manageStock:CustomerUnwanted.title",m)))),s.buffer.push('</span>\r\n\t\t<span class="float-right">\r\n\t\t\t<b>\r\n\t\t\t\t<a href="#/deviceInformation">&lt;'),s.buffer.push(p((h=a.loc||t&&t.loc,m={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},h?h.call(t,"locale.manageStock:back",m):g.call(t,"loc","locale.manageStock:back",m)))),s.buffer.push('</a>\r\n\t\t\t</b>\r\n\t\t</span>\r\n\t</div>\r\n\t<hr />\r\n\t<div style="width:100%;">\r\n\t\t'),u=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageStock:CustomerUnwanted.subtitle~",isCollapsable:"false",visibleBinding:"_isCollapsableCustomerUnwanted"},hashTypes:{title:"STRING",isCollapsable:"STRING",visibleBinding:"STRING"},hashContexts:{title:t,isCollapsable:t,visibleBinding:t},inverse:v.noop,fn:v.program(1,r,s),contexts:[t],types:["ID"],data:s}),(u||0===u)&&s.buffer.push(u),s.buffer.push("\r\n\t</div>\r\n\t"),u=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(6,c,s),contexts:[t],types:["ID"],data:s}),(u||0===u)&&s.buffer.push(u),s.buffer.push("\r\n\r\n</div>"),""}),Ember.TEMPLATES.IssueHardwareAgainstSalesOrderView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n    "),t.buffer.push(p(a.view.call(e,"Komodo.Controls.TextField",{hash:{label:"~locale.manageStock:issueHardwareAgainstServiceOrder.quoteNumber~",valueBinding:"rcModelData.quoteNumber",validationBinding:"rcModelData.quoteNumber.error",validatorBinding:"validators.quoteNumberValidator"},hashTypes:{label:"STRING",valueBinding:"STRING",validationBinding:"STRING",validatorBinding:"STRING"},hashContexts:{label:e,valueBinding:e,validationBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"searchQuoteSales"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:v.noop,fn:v.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function n(e,t){var o,s;t.buffer.push(p((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:issueHardwareAgainstServiceOrder.retrieveQuote",s):g.call(e,"loc","locale.manageStock:issueHardwareAgainstServiceOrder.retrieveQuote",s))))}function i(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageStock:issueHardwareAgainstServiceOrder.issueStock~"},hashTypes:{title:"STRING"},hashContexts:{title:e},inverse:v.noop,fn:v.program(5,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function c(e,t){var o;return t.buffer.push('\r\n    <table width="100%">\r\n      <tbody>\r\n        <tr>\r\n          <td width="20%" align="left">'),t.buffer.push(p(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:issueHardwareAgainstServiceOrder.deviceModel~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</td>\r\n          <td width="80%" align="left">'),t.buffer.push(p(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:issueHardwareAgainstServiceOrder.serviceDevice~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n        </tr>\r\n        "),o=a.each.call(e,"modelsAndDevice","in","rcModelData.modelsAndDevices",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(6,l,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n        <tr>\r\n          <td width="20%" align="left"></td>\r\n          <td width="80%" align="left" >\r\n            '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"IssueHardwareSales"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:v.noop,fn:v.program(8,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    "),""}function l(e,t){return t.buffer.push('\r\n        <tr>\r\n          <td width="20%" align="left" >\r\n            '),t.buffer.push(p(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"modelsAndDevice.modelDisplay"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n          </td>\r\n          <td width="80%" align="left" >\r\n            '),t.buffer.push(p(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"modelsAndDevice.device",validatorBinding:"rcModelData.DeviceNumber.error",disableBinding:"modelsAndDevice.canEdit"},hashTypes:{valueBinding:"STRING",validatorBinding:"STRING",disableBinding:"STRING"},hashContexts:{valueBinding:e,validatorBinding:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n          </td>\r\n        </tr>\r\n        "),""}function d(e,t){var o,s;t.buffer.push(p((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:issueHardwareAgainstServiceOrder.issueHardware",s):g.call(e,"loc","locale.manageStock:issueHardwareAgainstServiceOrder.issueHardware",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var u,h,m,g=a.helperMissing,p=this.escapeExpression,v=this;return s.buffer.push('<div class="no-banner-padding">\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(p((h=a.loc||t&&t.loc,m={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},h?h.call(t,"locale.manageStock:issueHardwareAgainstServiceOrder.title",m):g.call(t,"loc","locale.manageStock:issueHardwareAgainstServiceOrder.title",m)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/manageViewing">&lt;BACK</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr />\r\n  <div>\r\n    '),u=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageStock:issueHardwareAgainstServiceOrder.findIssuedStock~",isCollapsedBinding:"data.isSelectHardware"},hashTypes:{title:"STRING",isCollapsedBinding:"STRING"},hashContexts:{title:t,isCollapsedBinding:t},inverse:v.noop,fn:v.program(1,r,s),contexts:[t],types:["ID"],data:s}),(u||0===u)&&s.buffer.push(u),s.buffer.push("\r\n    \r\n    "),u=a.if.call(t,"rcModelData.modelsAndDevices.length",{hash:{},hashTypes:{},hashContexts:{},inverse:v.noop,fn:v.program(4,i,s),contexts:[t],types:["ID"],data:s}),(u||0===u)&&s.buffer.push(u),s.buffer.push("\r\n  </div>\r\n</div>\r\n"),""}),Ember.TEMPLATES.DccClaimDetailsView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <br/>\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(5,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <hr/>\r\n  "),o=a.if.call(e,"isSetToStolenVisible",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(10,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(19,f,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <br/>\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(22,C,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <hr/>\r\n  "),o=a.if.call(e,"isDeliveryAddressEditable",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(29,I,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n  <div id="DCCClaimDetailDeliveryAddressPanel" style="display: none;">\r\n  '),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(33,T,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.Address",{hash:{addressBinding:"addressInformation",multipleAddress:!1},hashTypes:{addressBinding:"STRING",multipleAddress:"BOOLEAN"},hashContexts:{addressBinding:e,multipleAddress:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n</div>\r\n\r\n  <hr/>\r\n  "),o=a.if.call(e,"isAddSupportingDocumentVisible",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(36,P,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),o=a.if.call(e,"isDeliveryAddressJustViewable",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(50,H,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n\r\n  "),""}function n(e,t){var o;return t.buffer.push("\r\n  \x3c!--Device Information--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:X.noop,fn:X.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function i(e,t){return t.buffer.push("\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.deviceInformation~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function c(e,t){var o;return t.buffer.push("\r\n  \x3c!--Column 1 Start - Account Number--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:X.noop,fn:X.program(6,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  \x3c!--Column 2 Start - Device Name--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:X.noop,fn:X.program(8,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function l(e,t){return t.buffer.push("\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.accountNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dccClaimDetailsModel.accountNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.deviceName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dccClaimDetailsModel.deviceName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.smartcardNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dccClaimDetailsModel.smartcardNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],
data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),""}function d(e,t){return t.buffer.push("\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.policyNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dccClaimDetailsModel.dccPolicyNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.deviceNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dccClaimDetailsModel.deviceNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),""}function u(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(11,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <br/>\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(14,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <hr/>\r\n  "),""}function h(e,t){var o;return t.buffer.push("\r\n  \x3c!--Set To Stolen Information--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:X.noop,fn:X.program(12,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function m(e,t){return t.buffer.push("\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.setToStolenInformation~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function g(e,t){var o;return t.buffer.push("\r\n  \x3c!--Column 1 Start - Police Station--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:X.noop,fn:X.program(15,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  \x3c!--Column 2 Start - Police Case Number--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:X.noop,fn:X.program(17,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function p(e,t){return t.buffer.push("\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.policeStation~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dccClaimDetailsModel.policeStation"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.caseDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dccClaimDetailsModel.caseDateValue"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),""}function v(e,t){return t.buffer.push("\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.policeCaseNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dccClaimDetailsModel.policeCaseNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function f(e,t){var o;return t.buffer.push("\r\n  \x3c!--Claim Information--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:X.noop,fn:X.program(20,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function b(e,t){return t.buffer.push("\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.claimInformation~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function C(e,t){var o;return t.buffer.push("\r\n  \x3c!--Column 1 Start - Claim Number--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:X.noop,fn:X.program(23,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  \x3c!--Column 2 Start - Claim Type--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:X.noop,fn:X.program(26,y,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function S(e,t){var o;return t.buffer.push("\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.claimNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dccClaimDetailsModel.claimUID"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/> <br/>\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.claimStatus~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dccClaimDetailsModel.claimStatus"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/> <br/>\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.claimDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dccClaimDetailsModel.claimDateValue"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/> <br/>\r\n  "),o=a.if.call(e,"isOtherInsuranceFieldsVisible",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(24,D,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function D(e,t){return t.buffer.push("\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.insurerName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dccClaimDetailsModel.insurerName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function y(e,t){var o;return t.buffer.push("\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.claimType~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dccClaimDetailsModel.claimType"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/> <br/>\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.dateOfTheft~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dccClaimDetailsModel.dateOfTheftValue"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/> <br/>\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.otherInsurance~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dccClaimDetailsModel.otherInsuranceValue"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/> <br/>\r\n  "),o=a.if.call(e,"isOtherInsuranceFieldsVisible",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(27,w,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function w(e,t){return t.buffer.push("\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.insurerPolicyNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dccClaimDetailsModel.insurerPolicyNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function I(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(30,x,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function x(e,t){var o;return t.buffer.push("\r\n  \x3c!--Delivery Information Editable View--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:X.noop,fn:X.program(31,M,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function M(e,t){return t.buffer.push("\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.deliveryInformation~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"1",label:"~locale.manageviewing:dccClaims.dispatchBranch~",prompt:"~locale.manageviewing:dccClaims.dispatchBranchPrompt~",valueBinding:"dccClaimDetailsModel.dispatchBranch",contentBinding:"dispatchBranchlst",optionLabelPath:"content.value",optionValuePath:"content.value"},hashTypes:{tabindex:"STRING",label:"STRING",prompt:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,label:e,prompt:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function T(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:X.noop,fn:X.program(34,N,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function N(e,t){return t.buffer.push("\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.deliveryAddress~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{tabindex:"2",checkedBinding:"dccClaimDetailsModel.sameAsPhysical"},hashTypes:{tabindex:"STRING",checkedBinding:"STRING"},hashContexts:{tabindex:e,checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.sameAsPhysical~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/> <br/>\r\n  "),""}function P(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(37,O,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(42,A,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <hr/>\r\n  "),""}function O(e,t){var o;return t.buffer.push("\r\n  \x3c!--Supported Documents--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:X.noop,fn:X.program(38,B,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function B(e,t){var o;return t.buffer.push("\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.addsupportingdocuments~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),o=a.if.call(e,"isAddDocumentButtonVisible",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(39,R,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function R(e,t){var o;return t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{id:"pickfiles",disabledBinding:"isAddDocumentButton",tabindex:"9"},hashTypes:{id:"STRING",disabledBinding:"STRING",tabindex:"STRING"},hashContexts:{id:e,disabledBinding:e,tabindex:e},inverse:X.noop,fn:X.program(40,k,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function k(e,t){var o,s;return t.buffer.push("\r\n  "),t.buffer.push(Y((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"Add Documents",s):W.call(e,"loc","Add Documents",s)))),t.buffer.push("\r\n  "),""}function A(e,t){var o,s,r;return t.buffer.push('\r\n  \x3c!--Grid--\x3e\r\n  <table width="100%" '),t.buffer.push(Y(a["bind-attr"].call(e,{hash:{class:":table :table-bordered :komodo-datagrid"},hashTypes:{class:"STRING"},hashContexts:{class:e},contexts:[],types:[],data:t}))),t.buffer.push('>\r\n    <thead>\r\n      <tr>\r\n        <th width="50%">'),t.buffer.push(Y((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"Document",r):W.call(e,"loc","Document",r)))),t.buffer.push('</th>\r\n        <th width="20%">'),t.buffer.push(Y((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"Type",r):W.call(e,"loc","Type",r)))),t.buffer.push('</th>\r\n        <th width="10%">'),t.buffer.push(Y((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"Size",r):W.call(e,"loc","Size",r)))),t.buffer.push('</th>\r\n        <th width="10%">'),t.buffer.push(Y((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"Serial Number",r):W.call(e,"loc","Serial Number",r)))),t.buffer.push('</th>\r\n        <th width="10%">'),t.buffer.push(Y((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"Percentage",r):W.call(e,"loc","Percentage",r)))),t.buffer.push('</th>\r\n        <th width="10%">'),t.buffer.push(Y((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"Status",r):W.call(e,"loc","Status",r)))),t.buffer.push('</th>\r\n        <th width="10%">'),t.buffer.push(Y((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"Action",r):W.call(e,"loc","Action",r)))),t.buffer.push("</th>\r\n      </tr>\r\n    </thead>\r\n    "),o=a.each.call(e,"row","in","data.customerDocuments",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(43,K,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  </table>\r\n  "),""}function K(e,t){var o;return t.buffer.push("\r\n    <tbody>\r\n      <tr>\r\n        <td>\r\n          "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"row.documentName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{valueBinding:"row.documentType",contentBinding:"row.documentTypes",optionLabelPath:"content.value",optionValuePath:"content.value",tabindex:"10",class:"komodo-grid-edit",disabledBinding:"row.isDocumentTypeDisable"},hashTypes:{valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",tabindex:"STRING",class:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,tabindex:e,class:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),o=a._triageMustache.call(e,"row.documentSize",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"row.documentSerialNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),o=a._triageMustache.call(e,"row.uploadPercentage",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),o=a._triageMustache.call(e,"row.uploadStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),o=a.if.call(e,"row.documentAlreadyUploaded",{hash:{},hashTypes:{},hashContexts:{},inverse:X.program(47,E,t),fn:X.program(44,G,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n    "),""}function G(e,t){var o;return t.buffer.push("\r\n          "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"viewDocument",size:"xs",type:"success",tabindex:"11"},hashTypes:{action:"STRING",size:"STRING",type:"STRING",tabindex:"STRING"},hashContexts:{action:e,size:e,type:e,tabindex:e},inverse:X.noop,fn:X.program(45,L,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          "),""}function L(e,t){var o,s;return t.buffer.push("\r\n          "),t.buffer.push(Y((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:dccClaims.view",s):W.call(e,"loc","locale.manageviewing:dccClaims.view",s)))),t.buffer.push("\r\n          "),""}function E(e,t){var o;return t.buffer.push("\r\n          "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"removeDocument",size:"xs",type:"danger",tabindex:"12"},hashTypes:{action:"STRING",size:"STRING",type:"STRING",tabindex:"STRING"},hashContexts:{action:e,size:e,type:e,tabindex:e},inverse:X.noop,fn:X.program(48,V,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          "),""}function V(e,t){var o,s;return t.buffer.push("\r\n          "),t.buffer.push(Y((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:dccClaims.delete",s):W.call(e,"loc","locale.manageviewing:dccClaims.delete",s)))),t.buffer.push("\r\n          "),""}function H(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:X.noop,fn:X.program(51,F,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function F(e,t){var o;return t.buffer.push("\r\n  \x3c!--Delivery Information Viewable Only--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:X.noop,fn:X.program(52,U,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function U(e,t){return t.buffer.push("\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.deliveryInformation~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.dispatchBranch~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dccClaimDetailsModel.dispatchBranch"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/> <br/>\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.deliveryAddress~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(Y(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dccClaimDetailsModel.deliveryAddress"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function _(e,t){var o,s;t.buffer.push(Y((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:dccClaims.processClaim",s):W.call(e,"loc","locale.manageviewing:dccClaims.processClaim",s))))}function Q(e,t){var o,s;t.buffer.push(Y((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:dccClaims.printClaim",s):W.call(e,"loc","locale.manageviewing:dccClaims.printClaim",s))))}function q(e,t){var o,s;t.buffer.push(Y((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:dccClaims.emailClaim",s):W.call(e,"loc","locale.manageviewing:dccClaims.emailClaim",s))))}function $(e,t){var o,s;t.buffer.push(Y((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:dccClaims.cancelClaim",s):W.call(e,"loc","locale.manageviewing:dccClaims.cancelClaim",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var j,J,z,Y=this.escapeExpression,X=this,W=a.helperMissing;return s.buffer.push("<div "),s.buffer.push(Y(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(Y((J=a.loc||t&&t.loc,z={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},J?J.call(t,"locale.manageviewing:dccClaims.dccClaimTitle",z):W.call(t,"loc","locale.manageviewing:dccClaims.dccClaimTitle",z)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/dccClaims">&lt;'),s.buffer.push(Y((J=a.loc||t&&t.loc,z={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},J?J.call(t,"locale.manageviewing:dccClaims.backLink",z):W.call(t,"loc","locale.manageviewing:dccClaims.backLink",z)))),s.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n  \x3c!--DCC Claims Detail Start--\x3e\r\n  "),j=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:dccClaims.dccClaimDetailsTitle~"},hashTypes:{title:"STRING"},hashContexts:{title:t},inverse:X.noop,fn:X.program(1,r,s),contexts:[t],types:["ID"],data:s}),(j||0===j)&&s.buffer.push(j),s.buffer.push('\r\n  <div style="float:right;">\r\n    '),j=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"processClaim",tabindex:"13",disabledBinding:"isProcessClaimButtonDisable",visibleBinding:"isDeliveryAddressEditable"},hashTypes:{action:"STRING",tabindex:"STRING",disabledBinding:"STRING",visibleBinding:"STRING"},hashContexts:{action:t,tabindex:t,disabledBinding:t,visibleBinding:t},inverse:X.noop,fn:X.program(54,_,s),contexts:[t],types:["ID"],data:s}),(j||0===j)&&s.buffer.push(j),s.buffer.push("\r\n    "),j=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"printClaim",tabindex:"14",disabledBinding:"isPrintClaimButtonDisable",visibleBinding:"isDeliveryAddressEditable"},hashTypes:{action:"STRING",tabindex:"STRING",disabledBinding:"STRING",visibleBinding:"STRING"},hashContexts:{action:t,tabindex:t,disabledBinding:t,visibleBinding:t},inverse:X.noop,fn:X.program(56,Q,s),contexts:[t],types:["ID"],data:s}),(j||0===j)&&s.buffer.push(j),s.buffer.push("\r\n    "),j=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"emailClaim",tabindex:"15",disabledBinding:"isEmailClaimButtonDisable",visibleBinding:"isDeliveryAddressEditable"},hashTypes:{action:"STRING",tabindex:"STRING",disabledBinding:"STRING",visibleBinding:"STRING"},hashContexts:{action:t,tabindex:t,disabledBinding:t,visibleBinding:t},inverse:X.noop,fn:X.program(58,q,s),contexts:[t],types:["ID"],data:s}),(j||0===j)&&s.buffer.push(j),s.buffer.push("\r\n    "),j=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"cancelClaim",tabindex:"16",disabledBinding:"isCancelClaimButtonDisable",class:"btn-inverse",visibleBinding:"isDeliveryAddressEditable"},hashTypes:{action:"STRING",tabindex:"STRING",disabledBinding:"STRING",class:"STRING",visibleBinding:"STRING"},hashContexts:{action:t,tabindex:t,disabledBinding:t,class:t,visibleBinding:t},inverse:X.noop,fn:X.program(60,$,s),contexts:[t],types:["ID"],data:s}),(j||0===j)&&s.buffer.push(j),s.buffer.push("\r\n  </div>\r\n</div>"),""}),Ember.TEMPLATES.DccClaimsView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:Q.noop,fn:Q.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <hr/>\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{visibleBinding:"isDCCClaimGridDataAvailable"},hashTypes:{visibleBinding:"STRING"},hashContexts:{visibleBinding:e},inverse:Q.noop,fn:Q.program(5,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{visibleBinding:"dccClaimGridDataNotAvailable"},hashTypes:{visibleBinding:"STRING"},hashContexts:{visibleBinding:e},inverse:Q.noop,fn:Q.program(7,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function n(e,t){var o;return t.buffer.push("\r\n  \x3c!--Column 1 Start--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:Q.noop,fn:Q.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function i(e,t){return t.buffer.push("\r\n  "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.filterListOfClaimBy~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"1",label:"~locale.manageviewing:dccClaims.status~",prompt:"~locale.manageviewing:dccClaims.all~",valueBinding:"dccClaimsModel.dccClaimGridStatus",contentBinding:"claimStatuslst",optionLabelPath:"content.value",optionValuePath:"content"},hashTypes:{tabindex:"STRING",label:"STRING",prompt:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,label:e,prompt:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  \x3c!--Column 1 End--\x3e\r\n  "),""}function c(e,t){return t.buffer.push("\r\n  \x3c!--Grid--\x3e\r\n  "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.DataGrid",{hash:{tabindex:"2",canSort:!0,performsValidation:!0,canDelete:!1,canEdit:!1,editMode:"cell",canSelect:!0,selectedItemBinding:"dccClaimsModel.selectedGridItem",commandItemBinding:"dccClaimsModel.commandGridItem",contentBinding:"dccClaimsModel.dccClaimGridFilterData",columnsBinding:"dccClaimGridGridColumns",pageSize:5},hashTypes:{tabindex:"STRING",canSort:"BOOLEAN",performsValidation:"BOOLEAN",canDelete:"BOOLEAN",canEdit:"BOOLEAN",editMode:"STRING",canSelect:"BOOLEAN",selectedItemBinding:"STRING",commandItemBinding:"STRING",contentBinding:"STRING",columnsBinding:"STRING",pageSize:"INTEGER"},hashContexts:{tabindex:e,canSort:e,performsValidation:e,canDelete:e,canEdit:e,editMode:e,canSelect:e,selectedItemBinding:e,commandItemBinding:e,contentBinding:e,columnsBinding:e,pageSize:e},
contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  "),""}function l(e,t){return t.buffer.push("\r\n  "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.noDCCClaimErrorMessage~",visibleBinding:"dccClaimGridDataNotAvailable"},hashTypes:{text:"STRING",visibleBinding:"STRING"},hashContexts:{text:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function d(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:Q.noop,fn:Q.program(10,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n  <div id="DCCClaimDeviceNoChangeSection" style="display: none;">\r\n<hr/>\r\n  <br/>\r\n '),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:Q.noop,fn:Q.program(13,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n <br/>\r\n "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:Q.noop,fn:Q.program(16,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n<hr/>\r\n  "),o=a.if.call(e,"isSetToStolenVisible",{hash:{},hashTypes:{},hashContexts:{},inverse:Q.noop,fn:Q.program(21,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n"),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:Q.noop,fn:Q.program(30,I,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n<br/>\r\n "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:Q.noop,fn:Q.program(33,M,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <hr/>\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:Q.noop,fn:Q.program(38,P,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <br/>\r\n  <br />\r\n "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:Q.noop,fn:Q.program(42,R,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n<hr/>\r\n  \r\n"),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:Q.noop,fn:Q.program(46,K,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n  \r\n<div id="DCCClaimDeliveryAddressPanel" style="display: none;">\r\n  '),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:Q.noop,fn:Q.program(49,L,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.Address",{hash:{addressBinding:"addressInformation",multipleAddress:!1},hashTypes:{addressBinding:"STRING",multipleAddress:"BOOLEAN"},hashContexts:{addressBinding:e,multipleAddress:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n</div>\r\n  "),""}function u(e,t){var o;return t.buffer.push("\r\n  \x3c!--Column 1 Start - DeviceNumber--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:Q.noop,fn:Q.program(11,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function h(e,t){return t.buffer.push("\r\n  "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"3",label:"~locale.manageviewing:dccClaims.deviceNumber~",prompt:"~locale.manageviewing:dccClaims.deviceNumberPrompt~",valueBinding:"dccClaimsModel.deviceNumber",contentBinding:"deviceNumberlst",optionLabelPath:"content.Key",optionValuePath:"content"},hashTypes:{tabindex:"STRING",label:"STRING",prompt:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,label:e,prompt:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  \x3c!--Column 1 End - DeviceNumber--\x3e\r\n  "),""}function m(e,t){var o;return t.buffer.push("\r\n \x3c!--Device Information--\x3e\r\n "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:Q.noop,fn:Q.program(14,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n "),""}function g(e,t){return t.buffer.push("\r\n "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.deviceInformation~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n "),""}function p(e,t){var o;return t.buffer.push("\r\n \x3c!--Column 1 Start - Account Number--\x3e\r\n "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:Q.noop,fn:Q.program(17,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n \x3c!--Column 2 Start - Device Name--\x3e\r\n "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:Q.noop,fn:Q.program(19,f,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n "),""}function v(e,t){return t.buffer.push("\r\n  "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.accountNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dccClaimsModel.accountNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.smartcardNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dccClaimsModel.smartcardNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n<br/><br/>\r\n "),""}function f(e,t){return t.buffer.push("\r\n  "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.deviceName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dccClaimsModel.deviceName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n   <br/><br/>\r\n  "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.policyNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dccClaimsModel.dccPolicyNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n<br/><br/>\r\n "),""}function b(e,t){var o;return t.buffer.push("\r\n "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:Q.noop,fn:Q.program(22,C,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n<br/>\r\n\r\n "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:Q.noop,fn:Q.program(25,D,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n <hr/>\r\n "),""}function C(e,t){var o;return t.buffer.push("\r\n \x3c!--Set To Stolen Information--\x3e\r\n "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:Q.noop,fn:Q.program(23,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n "),""}function S(e,t){return t.buffer.push("\r\n "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.setToStolenInformation~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n "),""}function D(e,t){var o;return t.buffer.push("\r\n \x3c!--Column 1 Start - Police Station--\x3e\r\n "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:Q.noop,fn:Q.program(26,y,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n \x3c!--Column 2 Start - Police Case Number--\x3e\r\n "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:Q.noop,fn:Q.program(28,w,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n "),""}function y(e,t){return t.buffer.push("\r\n  "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.policeStation~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dccClaimsModel.policeStation"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.caseDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dccClaimsModel.caseDateValue"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n "),""}function w(e,t){return t.buffer.push("\r\n  "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.policeCaseNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"dccClaimsModel.policeCaseNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n "),""}function I(e,t){var o;return t.buffer.push("\r\n \x3c!--Claim Information--\x3e\r\n "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:Q.noop,fn:Q.program(31,x,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n "),""}function x(e,t){return t.buffer.push("\r\n "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.claimInformation~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n "),""}function M(e,t){var o;return t.buffer.push("\r\n \x3c!--Column 1 Start - Claim Type--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:Q.noop,fn:Q.program(34,T,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  \x3c!--Column 2 Start - Claim Date--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:Q.noop,fn:Q.program(36,N,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function T(e,t){return t.buffer.push("\r\n  "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"4",label:"~locale.manageviewing:dccClaims.claimType~",prompt:"~locale.manageviewing:dccClaims.claimTypePrompt~",validatorBinding:"validators.claimTypeValidator",valueBinding:"dccClaimsModel.claimType",contentBinding:"claimTypelst",optionLabelPath:"content.value",optionValuePath:"content.value"},hashTypes:{tabindex:"STRING",label:"STRING",prompt:"STRING",validatorBinding:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,label:e,prompt:e,validatorBinding:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{tabindex:"6",valueBinding:"dccClaimsModel.dateOfTheft",label:"~locale.manageviewing:dccClaims.dateOfTheft~",validatorBinding:"validators.dateOfTheftValidator",disabledBinding:"isDateOfTheftDisable"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"8",valueBinding:"dccClaimsModel.insurerName",label:"~locale.manageviewing:dccClaims.insurerName~",validatorBinding:"validators.insurerNameValidator",visibleBinding:"isOtherInsuranceFieldsVisible"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING",visibleBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function N(e,t){return t.buffer.push("\r\n  "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{tabindex:"5",valueBinding:"dccClaimsModel.claimDate",label:"~locale.manageviewing:dccClaims.claimDate~",validatorBinding:"validators.claimDateValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.Checkbox",{hash:{tabindex:"7",valueBinding:"dccClaimsModel.otherInsurance",label:"~locale.manageviewing:dccClaims.otherInsurance~",validatorBinding:"validators.otherInsurnaceValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"9",valueBinding:"dccClaimsModel.insurerPolicyNumber",label:"~locale.manageviewing:dccClaims.insurerPolicyNumber~",validatorBinding:"validators.insurerPolicyNumberValidator",visibleBinding:"isOtherInsuranceFieldsVisible"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING",visibleBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function P(e,t){var o;return t.buffer.push("\r\n  \x3c!--Supported Documents--\x3e\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:Q.noop,fn:Q.program(39,O,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n "),""}function O(e,t){var o;return t.buffer.push("\r\n  "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.addsupportingdocuments~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{id:"pickfiles",disabledBinding:"isAddDocumentButton",tabindex:"10"},hashTypes:{id:"STRING",disabledBinding:"STRING",tabindex:"STRING"},hashContexts:{id:e,disabledBinding:e,tabindex:e},inverse:Q.noop,fn:Q.program(40,B,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function B(e,t){var o,s;return t.buffer.push("\r\n  "),t.buffer.push(_((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"Add Documents",s):q.call(e,"loc","Add Documents",s)))),t.buffer.push("\r\n  "),""}function R(e,t){var o,s,r;return t.buffer.push('\r\n  \x3c!--Grid--\x3e\r\n  <table width="100%" '),t.buffer.push(_(a["bind-attr"].call(e,{hash:{class:":table :table-bordered :komodo-datagrid"},hashTypes:{class:"STRING"},hashContexts:{class:e},contexts:[],types:[],data:t}))),t.buffer.push('>\r\n    <thead>\r\n      <tr>\r\n        <th width="50%">'),t.buffer.push(_((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"Document",r):q.call(e,"loc","Document",r)))),t.buffer.push('</th>\r\n        <th width="20%">'),t.buffer.push(_((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"Type",r):q.call(e,"loc","Type",r)))),t.buffer.push('</th>\r\n        <th width="10%">'),t.buffer.push(_((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"Size",r):q.call(e,"loc","Size",r)))),t.buffer.push('</th>\r\n        <th width="10%">'),t.buffer.push(_((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"Serial Number",r):q.call(e,"loc","Serial Number",r)))),t.buffer.push('</th>\r\n        <th width="10%">'),t.buffer.push(_((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"Percentage",r):q.call(e,"loc","Percentage",r)))),t.buffer.push('</th>\r\n        <th width="10%">'),t.buffer.push(_((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"Status",r):q.call(e,"loc","Status",r)))),t.buffer.push('</th>\r\n        <th width="10%">'),t.buffer.push(_((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"Action",r):q.call(e,"loc","Action",r)))),t.buffer.push("</th>\r\n      </tr>\r\n    </thead>\r\n    "),o=a.each.call(e,"row","in","data.customerDocuments",{hash:{},hashTypes:{},hashContexts:{},inverse:Q.noop,fn:Q.program(43,k,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  </table>\r\n"),""}function k(e,t){var o;return t.buffer.push("\r\n    <tbody>\r\n      <tr>\r\n        <td>\r\n          "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"row.documentName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{valueBinding:"row.documentType",contentBinding:"row.documentTypes",optionLabelPath:"content.value",optionValuePath:"content.value",tabindex:"11",class:"komodo-grid-edit"},hashTypes:{valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",tabindex:"STRING",class:"STRING"},hashContexts:{valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,tabindex:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),o=a._triageMustache.call(e,"row.documentSize",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"row.documentSerialNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),o=a._triageMustache.call(e,"row.uploadPercentage",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),o=a._triageMustache.call(e,"row.uploadStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"removeDocument",size:"xs",type:"danger",tabindex:"12"},hashTypes:{action:"STRING",size:"STRING",type:"STRING",tabindex:"STRING"},hashContexts:{action:e,size:e,type:e,tabindex:e},inverse:Q.noop,fn:Q.program(44,A,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n    "),""}function A(e,t){var o,s;return t.buffer.push("\r\n          "),t.buffer.push(_((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:dccClaims.delete",s):q.call(e,"loc","locale.manageviewing:dccClaims.delete",s)))),t.buffer.push("\r\n          "),""}function K(e,t){var o;return t.buffer.push("\r\n \x3c!--Delivery Information--\x3e\r\n "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:Q.noop,fn:Q.program(47,G,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function G(e,t){return t.buffer.push("\r\n "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.deliveryInformation~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n<br/><br/>\r\n  "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"13",label:"~locale.manageviewing:dccClaims.dispatchBranch~",prompt:"~locale.manageviewing:dccClaims.dispatchBranchPrompt~",valueBinding:"dccClaimsModel.dispatchBranch",contentBinding:"dispatchBranchlst",optionLabelPath:"content.value",optionValuePath:"content.value"},hashTypes:{tabindex:"STRING",label:"STRING",prompt:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,label:e,prompt:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function L(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:Q.noop,fn:Q.program(50,E,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function E(e,t){return t.buffer.push("\r\n  "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.deliveryAddress~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{tabindex:"14",checkedBinding:"dccClaimsModel.sameAsPhysical"},hashTypes:{tabindex:"STRING",checkedBinding:"STRING"},hashContexts:{tabindex:e,checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" "),t.buffer.push(_(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.sameAsPhysical~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>  <br/>\r\n  "),""}function V(e,t){var o,s;t.buffer.push(_((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:dccClaims.createClaim",s):q.call(e,"loc","locale.manageviewing:dccClaims.createClaim",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var H,F,U,_=this.escapeExpression,Q=this,q=a.helperMissing;return s.buffer.push("\r\n<div "),s.buffer.push(_(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(_((F=a.loc||t&&t.loc,U={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},F?F.call(t,"locale.manageviewing:dccClaims.useCaseTitle",U):q.call(t,"loc","locale.manageviewing:dccClaims.useCaseTitle",U)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/customerProfile">&lt;'),s.buffer.push(_((F=a.loc||t&&t.loc,U={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},F?F.call(t,"locale.manageviewing:dccClaims.backLink",U):q.call(t,"loc","locale.manageviewing:dccClaims.backLink",U)))),s.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n  \x3c!--DCC Claims Start--\x3e\r\n  "),H=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:dccClaims.dccClaimTitle~",visibleBinding:"isDCCClaimGridDataAvailable"},hashTypes:{title:"STRING",visibleBinding:"STRING"},hashContexts:{title:t,visibleBinding:t},inverse:Q.noop,fn:Q.program(1,r,s),contexts:[t],types:["ID"],data:s}),(H||0===H)&&s.buffer.push(H),s.buffer.push("\r\n  \x3c!--DCC Claims End--\x3e\r\n\r\n  \x3c!--Create DCC Claim Start--\x3e\r\n  "),H=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:dccClaims.createDCCClaimTitle~",visibleBinding:"isDCCPackageSectionVisible"},hashTypes:{title:"STRING",visibleBinding:"STRING"},hashContexts:{title:t,visibleBinding:t},inverse:Q.noop,fn:Q.program(9,d,s),contexts:[t],types:["ID"],data:s}),(H||0===H)&&s.buffer.push(H),s.buffer.push('\r\n  <br/>\r\n    <div style="float:right;">\r\n      '),H=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"createClaim",tabindex:"15",disabledBinding:"isCreateClaimButton",visibleBinding:"isCreateClaimButtonVisible"},hashTypes:{action:"STRING",tabindex:"STRING",disabledBinding:"STRING",visibleBinding:"STRING"},hashContexts:{action:t,tabindex:t,disabledBinding:t,visibleBinding:t},inverse:Q.noop,fn:Q.program(52,V,s),contexts:[t],types:["ID"],data:s}),(H||0===H)&&s.buffer.push(H),s.buffer.push("\r\n    </div>\r\n  </div>\r\n  "),s.buffer.push(_(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:dccClaims.noserviceErrorMessage~",visibleBinding:"isDCCPackageNotAvailable"},hashTypes:{text:"STRING",visibleBinding:"STRING"},hashContexts:{text:t,visibleBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n</div>"),""}),Ember.TEMPLATES.DeviceAgreementManagementView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){return t.buffer.push('\r\n    <table width="100%">\r\n      <tr>\r\n        <td colspan="2">\r\n          '),t.buffer.push(u(a.view.call(e,"Komodo.Controls.DataGrid",{hash:{canSort:"false",pageSize:"10",canSelect:"true",performsValidation:"false",contentBinding:"rcModelData.GridDeviceAgreementDataGrid",columnsBinding:"_columnDeviceAgreementDataGrid"},hashTypes:{canSort:"STRING",pageSize:"STRING",canSelect:"STRING",performsValidation:"STRING",contentBinding:"STRING",columnsBinding:"STRING"},hashContexts:{canSort:e,pageSize:e,canSelect:e,performsValidation:e,contentBinding:e,columnsBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n    </table>\r\n    "),""}function n(e,t){var o;return t.buffer.push('\r\n    <table width="100%">\r\n      <tr>\r\n        <td width="30%">\r\n          '),t.buffer.push(u(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"rcModelData.fromDevice",label:"~locale.manageStock:deviceAgreementManagement.fromDevice~",contentBinding:"_dropDownFromDeviceList",optionLabelPath:"content.Value",optionValuePath:"content.Key",prompt:"Select device"},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n        <td width="20%">\r\n          <img src="Content\\Images\\link\\blue-arrow.svg" style="padding:0 30px 0 20px;" />\r\n        </td>\r\n        <td width="30%">\r\n          '),t.buffer.push(u(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"rcModelData.toAgreement",label:"~locale.manageStock:deviceAgreementManagement.toAgreement~",contentBinding:"_dropDownToAgreementList",optionLabelPath:"content.Value",optionValuePath:"content.Key",prompt:"Select group"},hashTypes:{valueBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING"},hashContexts:{valueBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td colspan="3" align="right"  width="100%">\r\n          '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"moveDeviceAgreement"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:m.noop,fn:m.program(4,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n    </table>\r\n    "),""}function i(e,t){var o,s;t.buffer.push(u((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:deviceAgreementManagement.moveDevice",s):h.call(e,"loc","locale.manageStock:deviceAgreementManagement.moveDevice",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var c,l,d,u=this.escapeExpression,h=a.helperMissing,m=this;return s.buffer.push("<div "),s.buffer.push(u(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(u((l=a.loc||t&&t.loc,d={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},
l?l.call(t,"locale.manageStock:deviceAgreementManagement.title",d):h.call(t,"loc","locale.manageStock:deviceAgreementManagement.title",d)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/manageViewing">&lt;BACK</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr />\r\n  <div>\r\n    '),c=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageStock:deviceAgreementManagement.gridTitle~",isCollapsed:"false"},hashTypes:{title:"STRING",isCollapsed:"STRING"},hashContexts:{title:t,isCollapsed:t},inverse:m.noop,fn:m.program(1,r,s),contexts:[t],types:["ID"],data:s}),(c||0===c)&&s.buffer.push(c),s.buffer.push("\r\n    "),c=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageStock:deviceAgreementManagement.gridTitle2~",isCollapsed:"false"},hashTypes:{title:"STRING",isCollapsed:"STRING"},hashContexts:{title:t,isCollapsed:t},inverse:m.noop,fn:m.program(3,n,s),contexts:[t],types:["ID"],data:s}),(c||0===c)&&s.buffer.push(c),s.buffer.push("\r\n  </div>\r\n</div>\r\n"),""}),Ember.TEMPLATES.DeviceInfoView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n  \x3c!--This is Device and Smartcard Details view--\x3e\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{class:"sub-heading",text:"~locale.manageviewing:deviceInfo.deviceAndSmartcardDetails~"},hashTypes:{class:"STRING",text:"STRING"},hashContexts:{class:e,text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <hr/>\r\n  "),o=a.if.call(e,"isDisableChargePeriod",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(8,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    \r\n  \x3c!--This is Product Details view--\x3e\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{class:"sub-heading",text:"~locale.manageviewing:deviceInfo.productDetails~"},hashTypes:{class:"STRING",text:"STRING"},hashContexts:{class:e,text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(12,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <hr/>\r\n\r\n\r\n  \x3c!--This is Other Details view--\x3e\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{class:"sub-heading",text:"~locale.manageviewing:deviceInfo.otherDetails~"},hashTypes:{class:"STRING",text:"STRING"},hashContexts:{class:e,text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(23,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n  <div style="float:right;">\r\n    '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"changeChargePeriod",disabledBinding:"deviceInfoModel.isDisableChargeButton"},hashTypes:{action:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,disabledBinding:e},inverse:se.noop,fn:se.program(34,T,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  </div>\r\n  <br/><br/>\r\n  "),o=a.if.call(e,"deviceInfoModel.isQuoteSummaryVisible",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(36,N,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),""}function n(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:se.noop,fn:se.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:se.noop,fn:se.program(5,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function i(e,t){return t.buffer.push("\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.deviceName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.deviceName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.deviceStatus~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.deviceStatus"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.smartcardName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.smartcardName"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.smartcardStatus~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.smartcardStatus"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n\r\n  "),""}function c(e,t){var o;return t.buffer.push("\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.deviceNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.deviceNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.warrantyEndDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.warrantyEndDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.smartcardNumber~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.smartcardNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.viewingPeriod~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),o=a.each.call(e,"viewperiod","in","deviceInfoModel.viewingPeriod",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(6,l,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("  \r\n  \x3c!--"),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"newViewingPeriod"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("--\x3e\r\n  <br/>\r\n  "),""}function l(e,t){var o;return t.buffer.push("\r\n  <div>"),o=a._triageMustache.call(e,"viewperiod",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n  "),""}function d(e,t){var o;return t.buffer.push("\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{class:"sub-heading",text:"~locale.manageviewing:deviceInfo.agreementChargePeriodTitle~"},hashTypes:{class:"STRING",text:"STRING"},hashContexts:{class:e,text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br /><br />\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(9,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    <hr />\r\n    "),""}function u(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:se.noop,fn:se.program(10,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function h(e,t){var o;return t.buffer.push("\r\n   "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.chargePeriod~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n   <br />\r\n   <div>"),o=a._triageMustache.call(e,"agreementChargePeriod",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n    "),""}function m(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:se.noop,fn:se.program(13,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:se.noop,fn:se.program(18,f,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function g(e,t){var o;return t.buffer.push("\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.principalPackage~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.princiPackage"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),o=a.each.call(e,"Principal","in","deviceInfoModel.principalPackage",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(14,p,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.addOnPackage~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.addOnPackage"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),o=a.each.call(e,"addonNameItem","in","deviceInfoModel.addOnPackageNames",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(16,v,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.services~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.services"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),""}function p(e,t){var o;return t.buffer.push("\r\n  <div>"),o=a._triageMustache.call(e,"Principal",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n  "),""}function v(e,t){var o;return t.buffer.push("\r\n  <div>"),o=a._triageMustache.call(e,"addonNameItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n  "),""}function f(e,t){var o;return t.buffer.push("\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.principalStatus~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.princiserviceStatus"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),o=a.each.call(e,"Princistatus","in","deviceInfoModel.principalStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(19,b,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.addOnStatus~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.addOnStatus"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),o=a.each.call(e,"addonStatusItem","in","deviceInfoModel.addOnPackageStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(21,C,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  <br/>\r\n  "),""}function b(e,t){var o;return t.buffer.push("\r\n  <div>"),o=a._triageMustache.call(e,"Princistatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n  "),""}function C(e,t){var o;return t.buffer.push("\r\n  <div>"),o=a._triageMustache.call(e,"addonStatusItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n  "),""}function S(e,t){var o;return t.buffer.push("\r\n      "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:se.noop,fn:se.program(24,D,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:se.noop,fn:se.program(31,x,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function D(e,t){var o;return t.buffer.push("\r\n          "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.chargePeriod~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n              "),o=a.if.call(e,"deviceInfoModel.isgotvopenproduct",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(25,y,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n              "),o=a.if.call(e,"deviceInfoModel.isonlygotvopenproduct",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(27,w,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n              "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.quoteBasedDisconnectDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n              <br/>\r\n              "),o=a.each.call(e,"QBD","in","deviceInfoModel.quoteBasedDisconnectDate",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(29,I,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              <br/>\r\n    "),""}function y(e,t){return t.buffer.push("\r\n              <div>\r\n                "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"1",valueBinding:"deviceInfoModel.gotvopenchargeperiod",contentBinding:"chargePeriodlst",optionLabelPath:"content.value",optionValuePath:"content.key",class:"info-heading",disabledBinding:"deviceInfoModel.isDisableChargeDropdownGotvOpen"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",class:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,class:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n              </div>\r\n              "),""}function w(e,t){return t.buffer.push("\r\n                  <div>\r\n                    "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"1",valueBinding:"deviceInfoModel.chargePeriod",contentBinding:"chargePeriodlst",optionLabelPath:"content.value",optionValuePath:"content.key",class:"info-heading",disabledBinding:"deviceInfoModel.isDisableChargeDropdown"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",class:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,class:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                  </div>\r\n              "),""}function I(e,t){var o;return t.buffer.push("\r\n              <div>"),o=a._triageMustache.call(e,"QBD",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n              "),""}function x(e,t){var o;return t.buffer.push("\r\n        "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.chargeUntilDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n                "),o=a.each.call(e,"CUD","in","deviceInfoModel.chargeUntilDate",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(32,M,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            <br/>\r\n            <br/>\r\n              "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"1",label:"~locale.manageviewing:deviceInfo.contractPeriod~",valueBinding:"deviceInfoModel.contractPeriod",contentBinding:"deviceInfoModel.contractPeriodlst",optionLabelPath:"content.value",optionValuePath:"content.title",class:"info-heading",disabledBinding:"deviceInfoModel.isDisableContractPeriodDropdown",visibleBinding:"deviceInfoModel.isVisibleContractPeriod"},hashTypes:{tabindex:"STRING",label:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",class:"STRING",disabledBinding:"STRING",visibleBinding:"STRING"},hashContexts:{tabindex:e,label:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,class:e,disabledBinding:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n            <br/>\r\n    "),""}function M(e,t){var o;return t.buffer.push("\r\n                <div>"),o=a._triageMustache.call(e,"CUD",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n                "),""}function T(e,t){var o,s;t.buffer.push(oe((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceInfo.ChangeChargePeriod",s):re.call(e,"loc","locale.manageviewing:deviceInfo.ChangeChargePeriod",s))))}function N(e,t){var o;return t.buffer.push("\r\n  <hr/><br/>\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.DataGrid",{hash:{canSort:!0,pageSize:10,performsValidation:!1,canDelete:!1,canEdit:!1,canSelect:!0,contentBinding:"deviceInfoModel.quoteSummary",columnsBinding:"dataGridColumnsChangeChargePeriod",selectedItemBinding:"deviceInfoModel.quoteSummarySelectedItem",commandItemBinding:"deviceInfoModel.quoteSummaryCommandItem",commandItemTypeBinding:"deviceInfoModel.quoteSummaryCommandItemType",showFooter:!0,footersBinding:"dataGridFooters"},hashTypes:{canSort:"BOOLEAN",pageSize:"INTEGER",performsValidation:"BOOLEAN",canDelete:"BOOLEAN",canEdit:"BOOLEAN",canSelect:"BOOLEAN",contentBinding:"STRING",columnsBinding:"STRING",selectedItemBinding:"STRING",commandItemBinding:"STRING",commandItemTypeBinding:"STRING",showFooter:"BOOLEAN",footersBinding:"STRING"},hashContexts:{canSort:e,pageSize:e,performsValidation:e,canDelete:e,canEdit:e,canSelect:e,contentBinding:e,columnsBinding:e,selectedItemBinding:e,commandItemBinding:e,commandItemTypeBinding:e,showFooter:e,footersBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n\r\n  <div style="float:right;">\r\n    <b style="color:#00a4e1;">\r\n      '),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceInfo.totalAmountRequired~",class:"quoteTotalCss"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"deviceInfoModel.totalAmountRequired",class:"quoteTotalCss"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n    </b>\r\n  </div>\r\n  <br/><br/>\r\n\r\n  <div style="float:right;">\r\n    '),o=a.if.call(e,"deviceInfoModel.isFundsAvailable",{hash:{},hashTypes:{},hashContexts:{},inverse:se.program(42,R,t),fn:se.program(37,P,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  </div>\r\n  <br/><br/>\r\n  "),""}function P(e,t){var o;return t.buffer.push("\r\n    <table>\r\n      <tr>\r\n        <td> "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"acceptQuote"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:se.noop,fn:se.program(38,O,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" &nbsp;&nbsp;</td>\r\n\r\n        <td> "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"rejectQuote"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:se.noop,fn:se.program(40,B,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n      </tr>\r\n    </table>\r\n    "),""}function O(e,t){var o,s;t.buffer.push(oe((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceInfo.acceptQuote",s):re.call(e,"loc","locale.manageviewing:deviceInfo.acceptQuote",s))))}function B(e,t){var o,s;t.buffer.push(oe((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceInfo.rejectQuote",s):re.call(e,"loc","locale.manageviewing:deviceInfo.rejectQuote",s))))}function R(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"payViaDebitOrder",disabledBinding:"adHocDebitOrderButton"},hashTypes:{action:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,disabledBinding:e},inverse:se.noop,fn:se.program(43,k,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"payNow",visibleBinding:"isShowPayNowButton"},hashTypes:{action:"STRING",visibleBinding:"STRING"},hashContexts:{action:e,visibleBinding:e},inverse:se.noop,fn:se.program(45,A,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"rejectQuote"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:se.noop,fn:se.program(40,B,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),""}function k(e,t){var o,s;t.buffer.push(oe((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceInfo.payViaAdhocDebitOrder",s):re.call(e,"loc","locale.manageviewing:deviceInfo.payViaAdhocDebitOrder",s))))}function A(e,t){var o,s;t.buffer.push(oe((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceInfo.payNow",s):re.call(e,"loc","locale.manageviewing:deviceInfo.payNow",s))))}function K(e,t){var o;return t.buffer.push("\r\n\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:general.whoUsing~",displayPath:"value"},hashTypes:{text:"STRING",displayPath:"STRING"},hashContexts:{text:e,displayPath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br/>\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{valueBinding:"deviceInfoModel.type",contentBinding:"userData",displayPath:"value",valuePath:"key",disableBinding:"disableAddressInfo"},hashTypes:{valueBinding:"STRING",contentBinding:"STRING",displayPath:"STRING",valuePath:"STRING",disableBinding:"STRING"},hashContexts:{valueBinding:e,contentBinding:e,displayPath:e,valuePath:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  "),o=a.if.call(e,"deviceInfoModel.isControlsVisible",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(48,G,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n\r\n  \x3c!--This is Address table--\x3e\r\n  <table width="100%">\r\n    <tr>\r\n      <td>\r\n        <table class="table table-bordered komodo-datagrid">\r\n          <tr>\r\n            <th>Address</th>\r\n            <th>Actions</th>\r\n          </tr>\r\n          <tr>\r\n            <td> '),o=a._triageMustache.call(e,"deviceInfoModel.displayAddress",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n            <td>\r\n              "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{type:"small",disableBinding:"disableAddressInfo",action:"selectViewItem"},hashTypes:{type:"STRING",disableBinding:"STRING",action:"STRING"},hashContexts:{type:e,disableBinding:e,action:e},inverse:se.noop,fn:se.program(54,H,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n            </td>\r\n          </tr>\r\n        </table>\r\n      </td>\r\n    </tr>\r\n  </table>\r\n\r\n\r\n\r\n  <div id="deviceInfoAddressPanel" style="display: none;">\r\n    '),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.Address",{hash:{addressBinding:"addressInformation",multipleAddress:!1},hashTypes:{addressBinding:"STRING",multipleAddress:"BOOLEAN"},hashContexts:{addressBinding:e,multipleAddress:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n    <div style="float:right;">\r\n      '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"saveAddressInforamtion",type:"small",class:"btn-success"},hashTypes:{action:"STRING",type:"STRING",class:"STRING"},hashContexts:{action:e,type:e,class:e},inverse:se.noop,fn:se.program(56,F,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </div>\r\n    <br/>\r\n  </div>\r\n\r\n  "),""}function G(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(49,L,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function L(e,t){var o;return t.buffer.push("\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:se.noop,fn:se.program(50,E,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:se.noop,fn:se.program(52,V,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),""}function E(e,t){return t.buffer.push("\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"deviceInfoModel.firstName",label:"~locale.manageviewing:deviceInfo.firstName~",validatorBinding:"validators.firstNameValidator",disableBinding:"disableAddressInfo"},hashTypes:{valueBinding:"STRING",label:"STRING",validatorBinding:"STRING",disableBinding:"STRING"},hashContexts:{valueBinding:e,label:e,validatorBinding:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function V(e,t){return t.buffer.push("\r\n  "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.TextField",{hash:{label:"~locale.manageviewing:deviceInfo.lastName~",valueBinding:"deviceInfoModel.lastName",validatorBinding:"validators.lastNameValidator",disableBinding:"disableAddressInfo"},hashTypes:{label:"STRING",valueBinding:"STRING",validatorBinding:"STRING",disableBinding:"STRING"},hashContexts:{label:e,valueBinding:e,validatorBinding:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function H(e,t){var o,s;t.buffer.push(oe((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceInfo.edit",s):re.call(e,"loc","locale.manageviewing:deviceInfo.edit",s))))}function F(e,t){var o,s;t.buffer.push(oe((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},
hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceInfo.save",s):re.call(e,"loc","locale.manageviewing:deviceInfo.save",s))))}function U(e,t){var o;return t.buffer.push("\r\n  <div "),t.buffer.push(oe(a["bind-attr"].call(e,{hash:{class:"showGrid:table-responsive:komodo-hidden"},hashTypes:{class:"STRING"},hashContexts:{class:e},contexts:[],types:[],data:t}))),t.buffer.push(">\r\n    <table "),t.buffer.push(oe(a["bind-attr"].call(e,{hash:{class:":table :table-bordered :komodo-datagrid"},hashTypes:{class:"STRING"},hashContexts:{class:e},contexts:[],types:[],data:t}))),t.buffer.push(">\r\n      <thead>\r\n        "),o=a.if.call(e,"deviceInfoModel.viewAllCSILogs",{hash:{},hashTypes:{},hashContexts:{},inverse:se.program(61,Q,t),fn:se.program(59,_,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n      </thead>\r\n      "),o=a.each.call(e,"row","in","deviceInfoModel.csiInformation",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(63,q,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </table>\r\n    <div>\r\n      "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.Pager",{hash:{mode:"content",contentBinding:"deviceInfoModel.csiLogs",pageContentBinding:"deviceInfoModel.csiInformation",itemsPerPage:"5"},hashTypes:{mode:"STRING",contentBinding:"STRING",pageContentBinding:"STRING",itemsPerPage:"STRING"},hashContexts:{mode:e,contentBinding:e,pageContentBinding:e,itemsPerPage:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    </div>\r\n   \r\n  </div>\r\n  "),""}function _(e,t){var o,s;return t.buffer.push('\r\n        <tr>\r\n          <th width="10%">'),t.buffer.push(oe((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceInfo.historyID",s):re.call(e,"loc","locale.manageviewing:deviceInfo.historyID",s)))),t.buffer.push('</th>\r\n          <th width="12%">'),t.buffer.push(oe((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceInfo.date",s):re.call(e,"loc","locale.manageviewing:deviceInfo.date",s)))),t.buffer.push('</th>\r\n          <th width="13%">'),t.buffer.push(oe((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceInfo.eventDate",s):re.call(e,"loc","locale.manageviewing:deviceInfo.eventDate",s)))),t.buffer.push('</th>\r\n          <th width="10%">'),t.buffer.push(oe((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceInfo.username",s):re.call(e,"loc","locale.manageviewing:deviceInfo.username",s)))),t.buffer.push('</th>\r\n          <th width="30%">'),t.buffer.push(oe((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceInfo.messageCropped",s):re.call(e,"loc","locale.manageviewing:deviceInfo.messageCropped",s)))),t.buffer.push('</th>\r\n          <th width="10%">'),t.buffer.push(oe((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceInfo.eventDescription",s):re.call(e,"loc","locale.manageviewing:deviceInfo.eventDescription",s)))),t.buffer.push('</th>\r\n          <th width="5%">'),t.buffer.push(oe((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceInfo.reason",s):re.call(e,"loc","locale.manageviewing:deviceInfo.reason",s)))),t.buffer.push('</th>\r\n          <th width="5%">'),t.buffer.push(oe((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceInfo.view",s):re.call(e,"loc","locale.manageviewing:deviceInfo.view",s)))),t.buffer.push('</th>\r\n          <th width="5%">'),t.buffer.push(oe((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceInfo.resend",s):re.call(e,"loc","locale.manageviewing:deviceInfo.resend",s)))),t.buffer.push("</th>\r\n        </tr>\r\n        "),""}function Q(e,t){var o,s;return t.buffer.push('\r\n        <tr>\r\n          <th width="10%">'),t.buffer.push(oe((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceInfo.historyID",s):re.call(e,"loc","locale.manageviewing:deviceInfo.historyID",s)))),t.buffer.push('</th>\r\n          <th width="15%">'),t.buffer.push(oe((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceInfo.date",s):re.call(e,"loc","locale.manageviewing:deviceInfo.date",s)))),t.buffer.push('</th>\r\n          <th width="30%">'),t.buffer.push(oe((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceInfo.messageCropped",s):re.call(e,"loc","locale.manageviewing:deviceInfo.messageCropped",s)))),t.buffer.push('</th>\r\n          <th width="10%">'),t.buffer.push(oe((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceInfo.eventDescription",s):re.call(e,"loc","locale.manageviewing:deviceInfo.eventDescription",s)))),t.buffer.push('</th>\r\n          <th width="5%">'),t.buffer.push(oe((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceInfo.reason",s):re.call(e,"loc","locale.manageviewing:deviceInfo.reason",s)))),t.buffer.push('</th>\r\n          <th width="5%">'),t.buffer.push(oe((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceInfo.view",s):re.call(e,"loc","locale.manageviewing:deviceInfo.view",s)))),t.buffer.push("</th>\r\n        </tr>\r\n        "),""}function q(e,t){var o;return t.buffer.push("\r\n      <tbody>\r\n        "),o=a.if.call(e,"deviceInfoModel.viewAllCSILogs",{hash:{},hashTypes:{},hashContexts:{},inverse:se.program(71,X,t),fn:se.program(64,$,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </tbody>\r\n      "),""}function $(e,t){var o;return t.buffer.push("\r\n        <tr>\r\n          <td>\r\n            "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"row.historyID"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n          </td>\r\n          <td>\r\n            "),o=a._triageMustache.call(e,"row.date",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </td>\r\n          <td>\r\n            "),o=a._triageMustache.call(e,"row.eventDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </td>\r\n          <td>\r\n            "),o=a._triageMustache.call(e,"row.username",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </td>\r\n          <td>\r\n            "),o=a._triageMustache.call(e,"row.messageCropped",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </td>\r\n          <td>\r\n            "),o=a._triageMustache.call(e,"row.eventDescription",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </td>\r\n          <td>\r\n            "),o=a._triageMustache.call(e,"row.reason",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </td>\r\n          <td>\r\n            "),o=a.view.call(e,"Komodo.Controls.ActionView",{hash:{contentBinding:"row",action:"View"},hashTypes:{contentBinding:"STRING",action:"STRING"},hashContexts:{contentBinding:e,action:e},inverse:se.noop,fn:se.program(65,j,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </td>\r\n          <td>\r\n            "),o=a.view.call(e,"Komodo.Controls.ActionView",{hash:{contentBinding:"row",action:"Resend"},hashTypes:{contentBinding:"STRING",action:"STRING"},hashContexts:{contentBinding:e,action:e},inverse:se.noop,fn:se.program(68,z,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </td>\r\n        </tr>\r\n        "),""}function j(e,t){var o;return t.buffer.push("\r\n            "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{size:"xs"},hashTypes:{size:"STRING"},hashContexts:{size:e},inverse:se.noop,fn:se.program(66,J,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),""}function J(e,t){var o,s;return t.buffer.push("\r\n            "),t.buffer.push(oe((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceInfo.views",s):re.call(e,"loc","locale.manageviewing:deviceInfo.views",s)))),t.buffer.push("\r\n            "),""}function z(e,t){var o;return t.buffer.push("\r\n            "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{size:"xs",disableBinding:"row.isDisableResend"},hashTypes:{size:"STRING",disableBinding:"STRING"},hashContexts:{size:e,disableBinding:e},inverse:se.noop,fn:se.program(69,Y,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),""}function Y(e,t){var o,s;return t.buffer.push("\r\n            "),t.buffer.push(oe((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceInfo.resend",s):re.call(e,"loc","locale.manageviewing:deviceInfo.resend",s)))),t.buffer.push("\r\n            "),""}function X(e,t){var o;return t.buffer.push("\r\n        <tr>\r\n          <td>\r\n            "),t.buffer.push(oe(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"row.historyID"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n          </td>\r\n          <td>\r\n            "),o=a._triageMustache.call(e,"row.date",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </td>\r\n          <td>\r\n            "),o=a._triageMustache.call(e,"row.message",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </td>\r\n          <td>\r\n            "),o=a._triageMustache.call(e,"row.eventDescription",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </td>\r\n          <td>\r\n            "),o=a._triageMustache.call(e,"row.reason",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </td>\r\n          <td>\r\n            "),o=a.view.call(e,"Komodo.Controls.ActionView",{hash:{contentBinding:"row",action:"View"},hashTypes:{contentBinding:"STRING",action:"STRING"},hashContexts:{contentBinding:e,action:e},inverse:se.noop,fn:se.program(65,j,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </td>\r\n        </tr>\r\n        "),""}function W(e,t){var o,s;t.buffer.push(oe((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceInfo.btnSaveDetails",s):re.call(e,"loc","locale.manageviewing:deviceInfo.btnSaveDetails",s))))}function Z(e,t){var o,s;t.buffer.push(oe((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceInfo.btnCancel",s):re.call(e,"loc","locale.manageviewing:deviceInfo.btnCancel",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var ee,te,ae,oe=this.escapeExpression,se=this,re=a.helperMissing;return s.buffer.push("<div "),s.buffer.push(oe(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(oe((te=a.loc||t&&t.loc,ae={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},te?te.call(t,"locale.manageviewing:deviceInfo.deviceInfoTitle",ae):re.call(t,"loc","locale.manageviewing:deviceInfo.deviceInfoTitle",ae)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/manageViewing">&lt;'),s.buffer.push(oe((te=a.loc||t&&t.loc,ae={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},te?te.call(t,"locale.manageviewing:deviceInfo.back",ae):re.call(t,"loc","locale.manageviewing:deviceInfo.back",ae)))),s.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n  \x3c!--This is Full Device Information view--\x3e\r\n  "),ee=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:deviceInfo.fullDeviceInformation~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:se.noop,fn:se.program(1,r,s),contexts:[t],types:["ID"],data:s}),(ee||0===ee)&&s.buffer.push(ee),s.buffer.push("\r\n\r\n  "),ee=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:general.addressInfoTab~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:se.noop,fn:se.program(47,K,s),contexts:[t],types:["ID"],data:s}),(ee||0===ee)&&s.buffer.push(ee),s.buffer.push("\r\n\r\n  "),ee=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:deviceInfo.cSILogs~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:se.noop,fn:se.program(58,U,s),contexts:[t],types:["ID"],data:s}),(ee||0===ee)&&s.buffer.push(ee),s.buffer.push('\r\n  \x3c!--Save Details and Cancel button--\x3e\r\n  <br/>\r\n  <div style="float:right;">\r\n    '),ee=a.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"2",action:"saveDetails",disabledBinding:"deviceInfoModel.isDisableSubmitButton"},hashTypes:{tabindex:"STRING",action:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:t,action:t,disabledBinding:t},inverse:se.noop,fn:se.program(73,W,s),contexts:[t],types:["ID"],data:s}),(ee||0===ee)&&s.buffer.push(ee),s.buffer.push("\r\n    "),ee=a.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"3",action:"cancel",class:"btn-inverse",disabledBinding:"deviceInfoModel.isDisableSubmitButton"},hashTypes:{tabindex:"STRING",action:"STRING",class:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:t,action:t,class:t,disabledBinding:t},inverse:se.noop,fn:se.program(75,Z,s),contexts:[t],types:["ID"],data:s}),(ee||0===ee)&&s.buffer.push(ee),s.buffer.push("\r\n  </div>\r\n</div>\r\n"),""}),Ember.TEMPLATES.DeviceLinkView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){return t.buffer.push("\r\n  "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{visibleBinding:"showNoProductsLabel",textBinding:"productLabel"},hashTypes:{visibleBinding:"STRING",textBinding:"STRING"},hashContexts:{visibleBinding:e,textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function n(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:deviceLink.collapsibleHeader~"},hashTypes:{title:"STRING"},hashContexts:{title:e},inverse:b.noop,fn:b.program(4,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n  <br/>\r\n  <div style="float:right;">\r\n    '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"updateLinks",tabindex:"3"},hashTypes:{action:"STRING",tabindex:"STRING"},hashContexts:{action:e,tabindex:e},inverse:b.noop,fn:b.program(11,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  </div>\r\n  <br/>\r\n  "),""}function i(e,t){var o,s,r;return t.buffer.push("\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:b.noop,fn:b.program(5,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.DataGrid",{hash:{title:"~locale.manageviewing:deviceLink.productsTitle~",canSort:!0,pageSize:10,performsValidation:!1,canDelete:!1,canEdit:!1,canSelect:!1,contentBinding:"data.filterServices",columnsBinding:"serviceColumns"},hashTypes:{title:"STRING",canSort:"BOOLEAN",pageSize:"INTEGER",performsValidation:"BOOLEAN",canDelete:"BOOLEAN",canEdit:"BOOLEAN",canSelect:"BOOLEAN",contentBinding:"STRING",columnsBinding:"STRING"},hashContexts:{title:e,canSort:e,pageSize:e,performsValidation:e,canDelete:e,canEdit:e,canSelect:e,contentBinding:e,columnsBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  <h4>"),t.buffer.push(v((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:deviceLink.devicesTitle",r):f.call(e,"loc","locale.manageviewing:deviceLink.devicesTitle",r)))),t.buffer.push("</h4>\r\n  "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"data.linkAllDevices"},hashTypes:{checkedBinding:"STRING"},hashContexts:{checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceLink.linkAllDevices~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.DataGrid",{hash:{canSort:!0,pageSize:25,performsValidation:!1,canDelete:!1,canEdit:!1,canSelect:!1,commandItemBinding:"data.commandGridItem",commandItemTypeBinding:"data.commandGridItemType",contentBinding:"data.filterDevices",columnsBinding:"deviceColumns"},hashTypes:{canSort:"BOOLEAN",pageSize:"INTEGER",performsValidation:"BOOLEAN",canDelete:"BOOLEAN",canEdit:"BOOLEAN",canSelect:"BOOLEAN",commandItemBinding:"STRING",commandItemTypeBinding:"STRING",contentBinding:"STRING",columnsBinding:"STRING"},hashContexts:{canSort:e,pageSize:e,performsValidation:e,canDelete:e,canEdit:e,canSelect:e,commandItemBinding:e,commandItemTypeBinding:e,contentBinding:e,columnsBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function c(e,t){var o;return t.buffer.push("\r\n    \x3c!--Column 1--\x3e\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:b.noop,fn:b.program(6,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    \x3c!--Column 2--\x3e\r\n    "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:b.noop,fn:b.program(8,d,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function l(e,t){return t.buffer.push("\r\n      "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"1",valueBinding:"data.selectedAgreement",contentBinding:"data.agreements",optionLabelPath:"content.agreement",optionValuePath:"content",label:"~locale.manageviewing:deviceLink.agreementTitle~"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",label:"STRING"},hashContexts:{tabindex:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function d(e,t){var o;return t.buffer.push("\r\n        "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceLink.decoderSmartcardNo~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        <br />\r\n        "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{tabindex:"1",placeholder:"Type your search here",valueBinding:"data.searchAgreementDeviceText"},hashTypes:{tabindex:"STRING",placeholder:"STRING",valueBinding:"STRING"},hashContexts:{tabindex:e,placeholder:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("&nbsp;\r\n        "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{tabindex:"2",action:"findAgreementDeviceSmartcard",size:"xs",class:"button-no-margin"},hashTypes:{tabindex:"STRING",action:"STRING",size:"STRING",class:"STRING"},hashContexts:{tabindex:e,action:e,size:e,class:e},inverse:b.noop,fn:b.program(9,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        <br />\r\n        "),t.buffer.push(v(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.searchAgreementDeviceTextValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function u(e,t){var o,s;return t.buffer.push("\r\n        "),t.buffer.push(v((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceLink.search",s):f.call(e,"loc","locale.manageviewing:deviceLink.search",s)))),t.buffer.push("\r\n        "),""}function h(e,t){var o,s;t.buffer.push(v((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:deviceLink.updateLinksAction",s):f.call(e,"loc","locale.manageviewing:deviceLink.updateLinksAction",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var m,g,p,v=this.escapeExpression,f=a.helperMissing,b=this;return s.buffer.push("<div "),s.buffer.push(v(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <span class="komodo-heading">'),s.buffer.push(v((g=a.loc||t&&t.loc,p={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},g?g.call(t,"locale.manageviewing:deviceLink.title",p):f.call(t,"loc","locale.manageviewing:deviceLink.title",p)))),s.buffer.push('</span>\r\n  <span class="float-right">\r\n    <b>\r\n      <a href="#/manageViewing">&lt;'),s.buffer.push(v((g=a.loc||t&&t.loc,p={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},g?g.call(t,"locale.customerprofile.customerinformation:general.back",p):f.call(t,"loc","locale.customerprofile.customerinformation:general.back",p)))),s.buffer.push("</a>\r\n    </b>\r\n  </span>\r\n  <hr/>\r\n  "),m=a.if.call(t,"showNoProductsLabel",{hash:{},hashTypes:{},hashContexts:{},inverse:b.program(3,n,s),fn:b.program(1,r,s),contexts:[t],types:["ID"],data:s}),(m||0===m)&&s.buffer.push(m),s.buffer.push("\r\n</div>"),""}),Ember.TEMPLATES.DeviceProductView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){return t.buffer.push("\r\n    <br />\r\n    "),t.buffer.push(c(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:deviceLink.noDeviceProducts~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br />\r\n    "),""}function n(e,t){return t.buffer.push("\r\n    <br/>\r\n    <br />\r\n    "),t.buffer.push(c(a.view.call(e,"Komodo.Controls.DataGrid",{hash:{canSort:!0,pageSize:10,performsValidation:!1,canDelete:!1,canEdit:!1,canSelect:!1,contentBinding:"data.services",columnsBinding:"data.serviceColumns"},hashTypes:{canSort:"BOOLEAN",pageSize:"INTEGER",performsValidation:"BOOLEAN",canDelete:"BOOLEAN",canEdit:"BOOLEAN",canSelect:"BOOLEAN",contentBinding:"STRING",columnsBinding:"STRING"},hashContexts:{canSort:e,pageSize:e,performsValidation:e,canDelete:e,canEdit:e,canSelect:e,contentBinding:e,columnsBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var i,c=this.escapeExpression,l=this;return s.buffer.push('  <div class="modal-max-size">\r\n    '),i=a.if.call(t,"data.showNoDeviceProductsLabel",{hash:{},hashTypes:{},hashContexts:{},inverse:l.program(3,n,s),fn:l.program(1,r,s),contexts:[t],types:["ID"],data:s}),(i||0===i)&&s.buffer.push(i),s.buffer.push("\r\n</div>"),""}),Ember.TEMPLATES.DisconnectView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o;return t.buffer.push("\r\n  "),o=a.if.call(e,"disconnectModel.isDisconnectPackageVisible",{hash:{},hashTypes:{},hashContexts:{},inverse:B.noop,fn:B.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function n(e,t){var o,s;return t.buffer.push('\r\n  <div style="padding:20px 20px 0px 20px">\r\n    <div width="90%">\r\n      <span class="komodo-heading">'),t.buffer.push(O((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:disconnect.disconnectTitle",s):P.call(e,"loc","locale.manageviewing:disconnect.disconnectTitle",s)))),t.buffer.push("</span>\r\n    </div>\r\n    <br/>\r\n  </div>\r\n  "),""}function i(e,t){var o;return t.buffer.push("\r\n  "),o=a.if.call(e,"Komodo.Services.customerProfileService.isBannerOpen",{hash:{},hashTypes:{},hashContexts:{},inverse:B.program(7,l,t),fn:B.program(5,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function c(e,t){var o,s;return t.buffer.push("\r\n  \x3c!--<div "),t.buffer.push(O(a["bind-attr"].call(e,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:e},contexts:[],types:[],data:t}))),t.buffer.push('>--\x3e\r\n      <div style="padding:140px 20px 0px 20px">\r\n        <div width="90%">\r\n          <span class="komodo-heading">'),t.buffer.push(O((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:disconnect.disconnectTitle",s):P.call(e,"loc","locale.manageviewing:disconnect.disconnectTitle",s)))),t.buffer.push('</span>\r\n          <span class="float-right">\r\n            <b>\r\n              <a href="#/manageViewing">&lt;'),t.buffer.push(O((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:disconnect.back",s):P.call(e,"loc","locale.manageviewing:disconnect.back",s)))),t.buffer.push("</a>\r\n            </b>\r\n          </span>\r\n        </div>\r\n        <hr/>\r\n      </div>\r\n  "),""}function l(e,t){var o,s;return t.buffer.push("\r\n    \x3c!--<div "),t.buffer.push(O(a["bind-attr"].call(e,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:e},contexts:[],types:[],data:t}))),t.buffer.push('>--\x3e\r\n    <div style="padding:20px 20px 0px 20px">\r\n      <div width="90%">\r\n        <span class="komodo-heading">'),t.buffer.push(O((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:disconnect.disconnectTitle",s):P.call(e,"loc","locale.manageviewing:disconnect.disconnectTitle",s)))),t.buffer.push('</span>\r\n        <span class="float-right">\r\n          <b>\r\n            <a href="#/manageViewing">&lt;'),t.buffer.push(O((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:disconnect.back",s):P.call(e,"loc","locale.manageviewing:disconnect.back",s)))),t.buffer.push("</a>\r\n          </b>\r\n        </span>\r\n      </div>\r\n      <hr/>\r\n  </div>\r\n  "),""}function d(e,t){return t.buffer.push("\r\n  "),t.buffer.push(O(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{visibleBinding:"noResidentialCustomerErrormsg",text:"~locale.manageviewing:disconnect.noResidentialCustomerErrormsg~"},hashTypes:{visibleBinding:"STRING",text:"STRING"},hashContexts:{visibleBinding:e,text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function u(e,t){var o;return t.buffer.push("\r\n\r\n  "),o=a.if.call(e,"disconnectModel.isHolidayHome",{hash:{},hashTypes:{},hashContexts:{},inverse:B.program(14,m,t),fn:B.program(12,h,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  \r\n  "),o=a.if.call(e,"disconnectModel.isDisconnectPackageVisible",{hash:{},hashTypes:{},hashContexts:{},inverse:B.noop,fn:B.program(17,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function h(e,t){t.buffer.push("\r\n  ")}function m(e,t){var o;return t.buffer.push("\r\n    "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:disconnect.selectSmartcard~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:e,isCollapsed:e},inverse:B.noop,fn:B.program(15,g,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function g(e,t){return t.buffer.push("\r\n    "),t.buffer.push(O(a.view.call(e,"Komodo.Controls.Select",{hash:{label:"~locale.manageviewing:disconnect.listOfSmartcards~",prompt:"~locale.manageviewing:disconnect.listOfSmartcardsPrompt~",valueBinding:"disconnectModel.smartcards",contentBinding:"smartcardsList",optionLabelPath:"content.Key",optionValuePath:"content.Value",class:"info-heading"},hashTypes:{label:"STRING",prompt:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",class:"STRING"},hashContexts:{label:e,prompt:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function p(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:disconnect.disconnectPackages~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:e,isCollapsed:e},inverse:B.noop,fn:B.program(18,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function v(e,t){var o;return t.buffer.push('\r\n  <table width="100%">\r\n    <tbody>\r\n      <tr>\r\n        <td>\r\n          '),o=a.each.call(e,"hardwareAndService","in","disconnectModel.allHardwares",{hash:{},hashTypes:{},hashContexts:{},inverse:B.noop,fn:B.program(19,f,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n  "),""}function f(e,t){var o;return t.buffer.push("\r\n          "),t.buffer.push(O(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:disconnect.smartcard~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" "),
t.buffer.push(O(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"disconnectModel.smartcards",class:"sub-heading"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n\r\n          \x3c!-- Principal Services --\x3e\r\n        <table style="width:100%">\r\n          <tbody>\r\n            '),o=a.if.call(e,"hardwareAndService.isPrincipalAvailable",{hash:{},hashTypes:{},hashContexts:{},inverse:B.noop,fn:B.program(20,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n            \x3c!-- Addon Services --\x3e\r\n            "),o=a.each.call(e,"addOnService","in","hardwareAndService.listOfAddOnServices",{hash:{},hashTypes:{},hashContexts:{},inverse:B.noop,fn:B.program(22,C,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n            \x3c!-- Access Services --\x3e\r\n            "),o=a.each.call(e,"accessService","in","hardwareAndService.listOfAccessServices",{hash:{},hashTypes:{},hashContexts:{},inverse:B.noop,fn:B.program(24,S,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n          </tbody>\r\n        </table>\r\n\r\n        \x3c!-- Disconnect All --\x3e\r\n        <table style="width:100%">\r\n          <tbody>\r\n            <tr>\r\n              <td style="width:50%">'),t.buffer.push(O(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"disconnectModel.isDisconnectAll",disabledBinding:"disconnectAllEnable"},hashTypes:{checkedBinding:"STRING",disabledBinding:"STRING"},hashContexts:{checkedBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(O(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:disconnect.disconnectAll~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>              \r\n              "),o=a.if.call(e,"disconnectModel.isDisconnectAll",{hash:{},hashTypes:{},hashContexts:{},inverse:B.program(28,y,t),fn:B.program(26,D,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n          "),o=a.if.call(e,"disconnectModel.checkDisconnectDPPAllowed",{hash:{},hashTypes:{},hashContexts:{},inverse:B.noop,fn:B.program(30,w,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n\r\n          \x3c!-- Schedule Reconnection --\x3e\r\n        <table style="width:100%">\r\n          <tbody>\r\n            '),o=a.if.call(e,"disconnectModel.checkDisconnectDPPAllowed",{hash:{},hashTypes:{},hashContexts:{},inverse:B.noop,fn:B.program(32,I,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n          </tbody>\r\n        </table>\r\n\r\n          \x3c!-- Disconnect Button --\x3e\r\n          <div style="float:right;">\r\n            '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"submitDisconnect",contentBinding:"hardwareAndService",disabledBinding:"hardwareAndService.isReqControlEnabledOnDisconnect"},hashTypes:{action:"STRING",contentBinding:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,contentBinding:e,disabledBinding:e},inverse:B.noop,fn:B.program(37,T,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </div>\r\n          "),""}function b(e,t){var o;return t.buffer.push('\r\n            <tr>\r\n              <td style="vertical-align:middle;width:30%">'),o=a._triageMustache.call(e,"hardwareAndService.principalServiceName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n              <td style="vertical-align:middle;width:20%"> '),t.buffer.push(O(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"hardwareAndService.stateOfToggleButtonOfPrincipleService",appearance:"switch",disabledBinding:"isDisablePrincipleServiceDisConnectButton"},hashTypes:{checkedBinding:"STRING",appearance:"STRING",disabledBinding:"STRING"},hashContexts:{checkedBinding:e,appearance:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</td>\r\n              <td style="vertical-align:bottom;width:37%">'),t.buffer.push(O(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{valueBinding:"hardwareAndService.principalCUD",validatorBinding:"hardwareAndService.principalCUDValidator",disabledBinding:"hardwareAndService.stateOfDatePickerPrincipleService"},hashTypes:{valueBinding:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n              \r\n            </tr>\r\n            "),""}function C(e,t){var o;return t.buffer.push('\r\n            <tr>\r\n              <td style="vertical-align:middle;width:30%">'),o=a._triageMustache.call(e,"addOnService.serviceName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n              <td style="vertical-align:middle;width:20%"> '),t.buffer.push(O(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"addOnService.stateOfToggleButtonOfService",appearance:"switch",disabledBinding:"addOnService.disabletoggleAddonService"},hashTypes:{checkedBinding:"STRING",appearance:"STRING",disabledBinding:"STRING"},hashContexts:{checkedBinding:e,appearance:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</td>\r\n              <td style="vertical-align:bottom;width:37%">'),t.buffer.push(O(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{valueBinding:"addOnService.serviceCUD",validatorBinding:"addOnService.serviceCUDValidator",disabledBinding:"addOnService.stateOfDatePickerAddonAccessService"},hashTypes:{valueBinding:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n            </tr>\r\n            "),""}function S(e,t){var o;return t.buffer.push('\r\n            <tr>\r\n              <td style="vertical-align:middle;width:30%">'),o=a._triageMustache.call(e,"accessService.serviceName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n              <td style="vertical-align:middle;width:20%"> '),t.buffer.push(O(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"accessService.stateOfToggleButtonOfService",appearance:"switch"},hashTypes:{checkedBinding:"STRING",appearance:"STRING"},hashContexts:{checkedBinding:e,appearance:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</td>\r\n              <td style="vertical-align:bottom;width:37%">'),t.buffer.push(O(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{valueBinding:"accessService.serviceCUD",validatorBinding:"accessService.serviceCUDValidator",disabledBinding:"accessService.stateOfDatePickerAddonAccessService"},hashTypes:{valueBinding:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{valueBinding:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n            </tr>\r\n            "),""}function D(e,t){return t.buffer.push('              \r\n              <td style="width:37%">'),t.buffer.push(O(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{label:"~locale.manageviewing:disconnect.date~",valueBinding:"disconnectModel.dateDisconnectAll",disableBinding:"dateDisconnectAllDisable",validatorBinding:"validators.dateDisconnectAllValidator",class:"info-heading"},hashTypes:{label:"STRING",valueBinding:"STRING",disableBinding:"STRING",validatorBinding:"STRING",class:"STRING"},hashContexts:{label:e,valueBinding:e,disableBinding:e,validatorBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n              "),""}function y(e,t){return t.buffer.push('\r\n              <td style="width:37%">'),t.buffer.push(O(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{label:"~locale.manageviewing:disconnect.date~",valueBinding:"disconnectModel.dateDisconnectAll",disabled:!0,validatorBinding:"validators.dateDisconnectAllValidator",class:"info-heading"},hashTypes:{label:"STRING",valueBinding:"STRING",disabled:"BOOLEAN",validatorBinding:"STRING",class:"STRING"},hashContexts:{label:e,valueBinding:e,disabled:e,validatorBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n              "),""}function w(e,t){t.buffer.push("\r\n          <hr/>\r\n          ")}function I(e,t){var o;return t.buffer.push('\r\n            <tr>\r\n              <td style="width:50%">'),t.buffer.push(O(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"disconnectModel.isScheduleReconnection",disabledBinding:"hardwareAndService.isReqControlEnabledOnDisconnect"},hashTypes:{checkedBinding:"STRING",disabledBinding:"STRING"},hashContexts:{checkedBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(O(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:disconnect.scheduleReconnection~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n              "),o=a.if.call(e,"disconnectModel.isScheduleReconnection",{hash:{},hashTypes:{},hashContexts:{},inverse:B.program(35,M,t),fn:B.program(33,x,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </tr>\r\n            "),""}function x(e,t){return t.buffer.push('\r\n              <td style="width:37%">'),t.buffer.push(O(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{label:"~locale.manageviewing:disconnect.date~",valueBinding:"disconnectModel.dateScheduleReconnection",disabled:!1,validatorBinding:"validators.dateScheduleReconnectionValidator",class:"info-heading"},hashTypes:{label:"STRING",valueBinding:"STRING",disabled:"BOOLEAN",validatorBinding:"STRING",class:"STRING"},hashContexts:{label:e,valueBinding:e,disabled:e,validatorBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n              "),""}function M(e,t){return t.buffer.push('\r\n              <td style="width:37%">'),t.buffer.push(O(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{label:"~locale.manageviewing:disconnect.date~",valueBinding:"disconnectModel.dateScheduleReconnection",disabled:!0,validatorBinding:"validators.dateScheduleReconnectionValidator",class:"info-heading"},hashTypes:{label:"STRING",valueBinding:"STRING",disabled:"BOOLEAN",validatorBinding:"STRING",class:"STRING"},hashContexts:{label:e,valueBinding:e,disabled:e,validatorBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n              "),""}function T(e,t){var o,s;t.buffer.push(O((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:disconnect.btnDisconnect",s):P.call(e,"loc","locale.manageviewing:disconnect.btnDisconnect",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var N,P=a.helperMissing,O=this.escapeExpression,B=this;return s.buffer.push("<div>\r\n  "),N=a.if.call(t,"disconnectModel.isHolidayHome",{hash:{},hashTypes:{},hashContexts:{},inverse:B.program(4,i,s),fn:B.program(1,r,s),contexts:[t],types:["ID"],data:s}),(N||0===N)&&s.buffer.push(N),s.buffer.push("\r\n\r\n<div>\r\n  \x3c!-- Select Smartcard --\x3e\r\n  "),N=a.if.call(t,"disconnectModel.noResidentialCustomerErrormsg",{hash:{},hashTypes:{},hashContexts:{},inverse:B.program(11,u,s),fn:B.program(9,d,s),contexts:[t],types:["ID"],data:s}),(N||0===N)&&s.buffer.push(N),s.buffer.push("\r\n</div>\r\n</div>"),""}),Ember.TEMPLATES.EditScheduledChangesView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o,s;t.buffer.push(c((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:scheduledChanges.saveChanges",s):i.call(e,"loc","locale.manageviewing:scheduledChanges.saveChanges",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var n,i=a.helperMissing,c=this.escapeExpression,l=this;return s.buffer.push("<div>\r\n  <table>\r\n    \x3c!--Event--\x3e\r\n    <tr>\r\n      <td>\r\n        "),s.buffer.push(c(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:scheduledChanges.event~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:t,class:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push(" &nbsp;&nbsp;\r\n      </td>\r\n      <td>\r\n        "),s.buffer.push(c(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.event"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n      </td>\r\n    </tr>\r\n\r\n    \x3c!--Scheduled Date--\x3e\r\n    <tr>\r\n      <td>\r\n        "),s.buffer.push(c(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:scheduledChanges.scheduledDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:t,class:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("&nbsp;&nbsp;\r\n      </td>\r\n      <td>\r\n        "),s.buffer.push(c(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.scheduledDate"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n      </td>\r\n    </tr>\r\n\r\n    \x3c!--Reason--\x3e\r\n    <tr>\r\n      <td>\r\n        "),s.buffer.push(c(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:scheduledChanges.reason~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:t,class:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("&nbsp;&nbsp;\r\n      </td>\r\n      <td>\r\n        "),s.buffer.push(c(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.reason"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n      </td>\r\n    </tr>\r\n\r\n    \x3c!--Details--\x3e\r\n    <tr>\r\n      <td>\r\n        "),s.buffer.push(c(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:scheduledChanges.details~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:t,class:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("&nbsp;&nbsp;\r\n      </td>\r\n      <td>\r\n        "),s.buffer.push(c(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"view.context.data.details"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n      </td>\r\n    </tr>\r\n\r\n    \x3c!--Effective Date--\x3e\r\n    <tr>\r\n      <td >\r\n        "),s.buffer.push(c(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:scheduledChanges.effectiveDate~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:t,class:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("&nbsp;&nbsp;\r\n      </td>\r\n      <td >\r\n        "),s.buffer.push(c(a.view.call(t,"Komodo.Controls.DatePicker",{hash:{tabindex:"1",valueBinding:"view.context.data.effectiveDate",validatorBinding:"view.context.validators.effectiveDateValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:t,valueBinding:t,validatorBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push('\r\n      </td>\r\n    </tr>\r\n\r\n  </table>\r\n  <br/>\r\n\r\n  \x3c!--Save Changes--\x3e\r\n  <div style="float:right;">\r\n    '),n=a.view.call(t,"Komodo.Controls.Button",{hash:{tabindex:"3",action:"saveChanges"},hashTypes:{tabindex:"STRING",action:"STRING"},hashContexts:{tabindex:t,action:t},inverse:l.noop,fn:l.program(1,r,s),contexts:[t],types:["ID"],data:s}),(n||0===n)&&s.buffer.push(n),s.buffer.push("\r\n  </div>\r\n\r\n</div>"),""}),Ember.TEMPLATES.HolidayHomesView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){return t.buffer.push("\r\n  "),t.buffer.push(k(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{visibleBinding:"noResidentialcustomermsg",text:"~locale.manageviewing:holidayHomes.noResidentialCustomer~"},hashTypes:{visibleBinding:"STRING",text:"STRING"},hashContexts:{visibleBinding:e,text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function n(e,t){var o,s,r;return t.buffer.push('\r\n  <br/>\r\n  <table id="hhviewGrid" class="table table-bordered komodo-datagrid">\r\n    <tbody>\r\n      <tr>\r\n        <th>'),t.buffer.push(k((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:viewingGridHolidayHomesColumnHeaders.deviceNumber",r):A.call(e,"loc","locale.manageviewing:viewingGridHolidayHomesColumnHeaders.deviceNumber",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(k((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:viewingGridHolidayHomesColumnHeaders.linkedPackages",r):A.call(e,"loc","locale.manageviewing:viewingGridHolidayHomesColumnHeaders.linkedPackages",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(k((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:viewingGridHolidayHomesColumnHeaders.packageStatus",r):A.call(e,"loc","locale.manageviewing:viewingGridHolidayHomesColumnHeaders.packageStatus",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(k((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:viewingGridHolidayHomesColumnHeaders.type",r):A.call(e,"loc","locale.manageviewing:viewingGridHolidayHomesColumnHeaders.type",r)))),t.buffer.push("</th>\r\n        "),o=a.if.call(e,"_idHolidayHomeForSA",{hash:{},hashTypes:{},hashContexts:{},inverse:K.program(6,c,t),fn:K.program(4,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </tr>\r\n      "),o=a.each.call(e,"item","in","gridData",{hash:{},hashTypes:{},hashContexts:{},inverse:K.noop,fn:K.program(8,l,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    </tbody>\r\n  </table>\r\n\r\n  "),t.buffer.push(k(a.view.call(e,"Komodo.Controls.TablePager",{hash:{tableId:"hhviewGrid",contentBinding:"gridData",itemsPerPage:"10",headerRows:"1"},hashTypes:{tableId:"STRING",contentBinding:"STRING",itemsPerPage:"STRING",headerRows:"STRING"},hashContexts:{tableId:e,contentBinding:e,itemsPerPage:e,headerRows:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n\r\n  "),t.buffer.push(k(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:holidayHomes.selectSmartcard~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  "),t.buffer.push(k(a.view.call(e,"Komodo.Controls.Select",{hash:{prompt:"~locale.manageviewing:holidayHomes.listOfDevicesPrompt~",valueBinding:"holidayHomesModel.holidayHomesGeneralSmartcards",contentBinding:"holidayHomesModel.holidayHomesGeneralSmartcardsList",optionLabelPath:"content.Value",optionValuePath:"content.Key",class:"info-heading"},hashTypes:{prompt:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",class:"STRING"},hashContexts:{prompt:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),o=a.if.call(e,"holidayHomesModel.isSwitching",{hash:{},hashTypes:{},hashContexts:{},inverse:K.noop,fn:K.program(20,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n\r\n  "),o=a.if.call(e,"holidayHomesModel.isDailyPrepaid",{hash:{},hashTypes:{},hashContexts:{},inverse:K.noop,fn:K.program(35,x,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n\r\n  "),""}function i(e,t){var o,s;return t.buffer.push("\r\n        <th>"),t.buffer.push(k((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:viewingGridHolidayHomesColumnHeaders.disconnectDate",s):A.call(e,"loc","locale.manageviewing:viewingGridHolidayHomesColumnHeaders.disconnectDate",s)))),t.buffer.push("</th>\r\n        "),""}function c(e,t){var o,s;return t.buffer.push("\r\n        <th>"),t.buffer.push(k((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:viewingGridHolidayHomesColumnHeaders.viewingDaysLeft",s):A.call(e,"loc","locale.manageviewing:viewingGridHolidayHomesColumnHeaders.viewingDaysLeft",s)))),t.buffer.push("</th>\r\n        "),""}function l(e,t){var o;return t.buffer.push("\r\n      <tr>\r\n        <td>\r\n          <table>\r\n            <tbody>\r\n              <tr>\r\n                <td>\r\n                  "),o=a._triageMustache.call(e,"item.deviceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n              </tr>\r\n              "),o=a.each.call(e,"secondaryDeviceNumber","in","item.secondaryDeviceNumber",{hash:{},hashTypes:{},hashContexts:{},inverse:K.noop,fn:K.program(9,d,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </tbody>\r\n          </table>\r\n        </td>\r\n        <td>\r\n          <div>"),o=a._triageMustache.call(e,"item.prinPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n          <div>"),o=a._triageMustache.call(e,"item.freeViewPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n          "),o=a.each.call(e,"addonNameItem","in","item.addOnPckNames",{hash:{},hashTypes:{},hashContexts:{},inverse:K.noop,fn:K.program(11,u,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          <div>"),o=a._triageMustache.call(e,"item.accessService",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n          <div>"),o=a._triageMustache.call(e,"item.boxOffice",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n          <div>"),o=a._triageMustache.call(e,"item.insuranceServices",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n        </td>\r\n        <td>\r\n          <div>"),o=a._triageMustache.call(e,"item.prinPckStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n          <div>"),o=a._triageMustache.call(e,"item.freeViewPckStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n          "),o=a.each.call(e,"addonStatusItem","in","item.addOnPckStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:K.noop,fn:K.program(13,h,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          <div>"),o=a._triageMustache.call(e,"item.accessServiceStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n          <div>"),o=a._triageMustache.call(e,"item.boxOfficeStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n          <div>"),o=a._triageMustache.call(e,"item.insuranceServicesStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n        </td>\r\n        <td>\r\n          "),o=a._triageMustache.call(e,"item.type",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n\r\n        "),o=a.if.call(e,"_idHolidayHomeForSA",{hash:{},hashTypes:{},hashContexts:{},inverse:K.program(18,p,t),fn:K.program(15,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </tr>\r\n      "),""}function d(e,t){var o;return t.buffer.push("\r\n              <tr>\r\n                <td>\r\n                  "),o=a._triageMustache.call(e,"secondaryDeviceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                </td>\r\n                <td>\r\n                  <img src="./Content/Images/link/l.svg" style="width:20px;padding-top:4px"></img>\r\n                </td>\r\n              </tr>\r\n              '),""}function u(e,t){var o;return t.buffer.push("\r\n          <div>"),o=a._triageMustache.call(e,"addonNameItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n          "),""}function h(e,t){var o;return t.buffer.push("\r\n          <div>"),o=a._triageMustache.call(e,"addonStatusItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n          "),""}function m(e,t){var o;return t.buffer.push("\r\n        <td>\r\n          <div>"),o=a._triageMustache.call(e,"item.prinPckQBD",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n          <div>"),o=a._triageMustache.call(e,"item.freeViewQBD",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n          "),o=a.each.call(e,"addonQBDItem","in","item.addonQBD",{hash:{},hashTypes:{},hashContexts:{},inverse:K.noop,fn:K.program(16,g,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          <div>"),o=a._triageMustache.call(e,"item.accessServiceQBD",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n          <div>"),o=a._triageMustache.call(e,"item.boxOfficeQBD",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n          <div>"),o=a._triageMustache.call(e,"item.insuranceServicesQBD",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n        </td>\r\n        "),""}function g(e,t){var o;return t.buffer.push("\r\n          <div>"),o=a._triageMustache.call(e,"addonQBDItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n          "),""}function p(e,t){var o;return t.buffer.push("\r\n        <td>\r\n          "),o=a._triageMustache.call(e,"item.viewingDaysLeft",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        "),""}function v(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:holidayHomes.holidayhomeInfo~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:e,isCollapsed:e},inverse:K.noop,fn:K.program(21,f,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function f(e,t){var o;return t.buffer.push('\r\n\r\n  <table style="width:100%">\r\n    <tbody>\r\n      <tr>\r\n        <td width="30%">\r\n          '),t.buffer.push(k(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:holidayHomes.fromdevice~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n        <td width="10%"></td>\r\n\r\n        <td width="30%">\r\n          '),t.buffer.push(k(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:holidayHomes.todevice~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n        <td width="30%">\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td width="30%">\r\n          '),t.buffer.push(k(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"holidayHomesModel.generalSmartcards"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n        <td width="10%">\r\n          <img src="Content\\Images\\link\\blue-arrow.svg"  />\r\n        </td>\r\n        '),o=a.if.call(e,"holidayHomesModel.switchedSmartcardSelected",{hash:{},hashTypes:{},hashContexts:{},inverse:K.program(24,C,t),fn:K.program(22,b,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),o=a.if.call(e,"_isXtraViewCheckBoxVisible",{hash:{},hashTypes:{},hashContexts:{},inverse:K.noop,fn:K.program(26,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n\r\n  <hr></hr>\r\n  "),o=a.if.call(e,"holidayHomesModel.switchedSmartcardSelected",{hash:{},hashTypes:{},hashContexts:{},inverse:K.program(31,w,t),fn:K.program(29,y,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n\r\n  <br/>\r\n  <div style="float:right;">\r\n    '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"switchviewing",contentBinding:"holidayHomesModel"},hashTypes:{action:"STRING",contentBinding:"STRING"},hashContexts:{action:e,contentBinding:e},inverse:K.noop,fn:K.program(33,I,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  </div>\r\n  <br/><br/>\r\n  "),""}function b(e,t){return t.buffer.push('\r\n        <td width="30%">\r\n          '),t.buffer.push(k(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"holidayHomesModel.generalSwitchedSmartcard"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n        "),""}function C(e,t){return t.buffer.push('\r\n        <td width="30%">\r\n          '),t.buffer.push(k(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{prompt:"~locale.manageviewing:holidayHomes.listOfDevicesPrompt~",valueBinding:"holidayHomesModel.todevices",contentBinding:"holidayHomesModel.todeviceSmartCardList",optionLabelPath:"content.Key",optionValuePath:"content.Value"},hashTypes:{prompt:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{prompt:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n        "),""}function S(e,t){var o;return t.buffer.push("\r\n        <td>\r\n          "),t.buffer.push(k(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:holidayHomes.holidayHomeXtraview~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),
t.buffer.push('\r\n          <table  style="width:100%">\r\n            <tbody>\r\n              '),o=a.each.call(e,"item","in","_holidayHomeXtraViewArray",{hash:{},hashTypes:{},hashContexts:{},inverse:K.noop,fn:K.program(27,D,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </tbody>\r\n          </table>\r\n        </td>\r\n        "),""}function D(e,t){var o;return t.buffer.push('\r\n              <tr>\r\n                <td width="5%">\r\n                  '),t.buffer.push(k(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{dataTitleBinding:"item.deviceNumber",checkedBinding:"item.isDeviceSelected"},hashTypes:{dataTitleBinding:"STRING",checkedBinding:"STRING"},hashContexts:{dataTitleBinding:e,checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                </td>\r\n                <td width="90%">\r\n                  '),o=a._triageMustache.call(e,"item.deviceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n              </tr>\r\n              "),""}function y(e,t){return t.buffer.push('\r\n  <table style="width:100%">\r\n    <tbody>\r\n      <tr>\r\n        <td width="30%">'),t.buffer.push(k(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:holidayHomes.switchOn~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</td>\r\n        <td width="10%">\r\n        </td>\r\n        <td width="60%">   '),t.buffer.push(k(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:holidayHomes.switchOff~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(' </td>\r\n      </tr>\r\n      <tr>\r\n        <td width="30%">'),t.buffer.push(k(a.view.call(e,"Komodo.Controls.CoreDatePicker",{hash:{label:"~locale.manageviewing:holidayHomes.switchOn~",disabled:!0},hashTypes:{label:"STRING",disabled:"BOOLEAN"},hashContexts:{label:e,disabled:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</td>\r\n        <td width="10%">\r\n        </td>\r\n        <td width="60%"> '),t.buffer.push(k(a.view.call(e,"Komodo.Controls.CoreDatePicker",{hash:{valueBinding:"currentDateforSwitchOn",label:"~locale.manageviewing:holidayHomes.switchOff~",disabled:!0},hashTypes:{valueBinding:"STRING",label:"STRING",disabled:"BOOLEAN"},hashContexts:{valueBinding:e,label:e,disabled:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n  "),""}function w(e,t){return t.buffer.push('\r\n  <table style="width:100%">\r\n    <tbody>\r\n      <tr>\r\n        <td width="30%"></td>\r\n        <td width="10%">\r\n        </td>\r\n        <td width="60%"> </td>\r\n      </tr>\r\n      <tr>\r\n        <td width="30%">'),t.buffer.push(k(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{label:"~locale.manageviewing:holidayHomes.switchOn~",valueBinding:"holidayHomesModel.switchOnDate",validatorBinding:"validators.switchOnDateValidator",disabledBinding:"_disableOnOffDate"},hashTypes:{label:"STRING",valueBinding:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{label:e,valueBinding:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</td>\r\n        <td width="10%">\r\n        </td>\r\n        <td width="60%"> '),t.buffer.push(k(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{label:"~locale.manageviewing:holidayHomes.switchOff~",valueBinding:"holidayHomesModel.switchOffDate",validatorBinding:"validators.switchOffDateValidator",disabledBinding:"_disableOnOffDate"},hashTypes:{label:"STRING",valueBinding:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{label:e,valueBinding:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n  "),""}function I(e,t){var o,s;t.buffer.push(k((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:holidayHomes.switchviewing",s):A.call(e,"loc","locale.manageviewing:holidayHomes.switchviewing",s))))}function x(e,t){var o;return t.buffer.push("\r\n  <div>\r\n    "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{id:"holidayHomesCollapsibleView",title:"~locale.manageviewing:holidayHomes.dailyprepaid~",isCollapsed:!1,linksBinding:"collapsibleViewLinks"},hashTypes:{id:"STRING",title:"STRING",isCollapsed:"BOOLEAN",linksBinding:"STRING"},hashContexts:{id:e,title:e,isCollapsed:e,linksBinding:e},inverse:K.noop,fn:K.program(36,M,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  </div>\r\n\r\n  <div>\r\n    "),o=a.if.call(e,"holidayHomesModel.isUpgradeorDowngrade",{hash:{},hashTypes:{},hashContexts:{},inverse:K.noop,fn:K.program(38,T,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),o=a.if.call(e,"holidayHomesModel.isDisconnect",{hash:{},hashTypes:{},hashContexts:{},inverse:K.noop,fn:K.program(40,N,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n    "),o=a.if.call(e,"holidayHomesModel.isReconnect",{hash:{},hashTypes:{},hashContexts:{},inverse:K.noop,fn:K.program(42,P,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  </div>\r\n  "),""}function M(e,t){t.buffer.push("\r\n    ")}function T(e,t){var o,s;return t.buffer.push("\r\n    <div>\r\n      "),t.buffer.push(k((o=a.render||e&&e.render,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"upgradeOrDowngrade",s):A.call(e,"render","upgradeOrDowngrade",s)))),t.buffer.push("\r\n    </div>\r\n    "),""}function N(e,t){var o,s;return t.buffer.push("\r\n    <div>\r\n      "),t.buffer.push(k((o=a.render||e&&e.render,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"disconnect",s):A.call(e,"render","disconnect",s)))),t.buffer.push("\r\n    </div>\r\n    "),""}function P(e,t){var o,s;return t.buffer.push("\r\n    <div>\r\n      "),t.buffer.push(k((o=a.render||e&&e.render,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"reconnect",s):A.call(e,"render","reconnect",s)))),t.buffer.push("\r\n    </div>\r\n    "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var O,B,R,k=this.escapeExpression,A=a.helperMissing,K=this;return s.buffer.push("<div "),s.buffer.push(k(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(k((B=a.loc||t&&t.loc,R={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},B?B.call(t,"locale.manageviewing:holidayHomes.holidayHomesTitle",R):A.call(t,"loc","locale.manageviewing:holidayHomes.holidayHomesTitle",R)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/manageViewing">&lt;'),s.buffer.push(k((B=a.loc||t&&t.loc,R={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},B?B.call(t,"locale.manageviewing:holidayHomes.back",R):A.call(t,"loc","locale.manageviewing:holidayHomes.back",R)))),s.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n\r\n  "),O=a.if.call(t,"holidayHomesModel.noResidentialcustomermsg",{hash:{},hashTypes:{},hashContexts:{},inverse:K.program(3,n,s),fn:K.program(1,r,s),contexts:[t],types:["ID"],data:s}),(O||0===O)&&s.buffer.push(O),s.buffer.push("\r\n\r\n\r\n</div>"),""}),Ember.TEMPLATES.InvalidPackagesView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){return t.buffer.push("\r\n  "),t.buffer.push(m(a.view.call(e,"Komodo.Controls.Select",{hash:{label:"~locale.manageviewing:invalidPackages.listOfSmartcards~",prompt:"~locale.manageviewing:invalidPackages.listOfSmartcardsPrompt~",valueBinding:"invalidPackagesModel.smartcards",contentBinding:"smartcardsList",optionLabelPath:"content.Key",optionValuePath:"content.Value",class:"info-heading"},hashTypes:{label:"STRING",prompt:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",class:"STRING"},hashContexts:{label:e,prompt:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function n(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:invalidPackages.cancelPackages~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:e,isCollapsed:e},inverse:p.noop,fn:p.program(4,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  \r\n  "),""}function i(e,t){var o;return t.buffer.push('\r\n\r\n  <table width="100%">\r\n    <tbody>\r\n      <tr>\r\n        <td>\r\n          '),t.buffer.push(m(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"invalidPackagesModel.smartcardInformation",class:"sub-heading"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n          "),o=a.each.call(e,"getService","in","serviceUnderSmartcard",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(5,c,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n          <hr />\r\n          <div style="float:right;">\r\n            '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"submitCancel",contentBinding:"serviceUnderSmartcard"},hashTypes:{action:"STRING",contentBinding:"STRING"},hashContexts:{action:e,contentBinding:e},inverse:p.noop,fn:p.program(7,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </div>      \r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>       \r\n  "),""}function c(e,t){var o;return t.buffer.push('\r\n          <table width="100%">\r\n          <tbody>\r\n            \r\n            <tr>\r\n              <td style="vertical-align:middle;width:30%">'),o=a._triageMustache.call(e,"getService.serviceName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</td>\r\n              <td style="vertical-align:middle;width:20%">\r\n                '),o=a._triageMustache.call(e,"getService.serviceType",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n              </td>\r\n              <td style="vertical-align:bottom;width:37%">\r\n                '),t.buffer.push(m(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"getService.stateOfToggleButton",appearance:"switch"},hashTypes:{checkedBinding:"STRING",appearance:"STRING"},hashContexts:{checkedBinding:e,appearance:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n          "),""}function l(e,t){var o,s;t.buffer.push(m((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:invalidPackages.btnCancelPackages",s):g.call(e,"loc","locale.manageviewing:invalidPackages.btnCancelPackages",s))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var d,u,h,m=this.escapeExpression,g=a.helperMissing,p=this;return s.buffer.push("<div "),s.buffer.push(m(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(m((u=a.loc||t&&t.loc,h={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},u?u.call(t,"locale.manageviewing:invalidPackages.invalidPackagesTitle",h):g.call(t,"loc","locale.manageviewing:invalidPackages.invalidPackagesTitle",h)))),s.buffer.push('</span>\r\n    <span class="float-right">      \r\n    </span>\r\n  </div>\r\n  <hr/>\r\n  \r\n  \x3c!-- Select Smartcard --\x3e\r\n  '),d=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageviewing:invalidPackages.selectSmartcard~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:p.noop,fn:p.program(1,r,s),contexts:[t],types:["ID"],data:s}),(d||0===d)&&s.buffer.push(d),s.buffer.push("\r\n \r\n     "),d=a.if.call(t,"invalidPackagesModel.isDisconnectPackageVisible",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(3,n,s),contexts:[t],types:["ID"],data:s}),(d||0===d)&&s.buffer.push(d),s.buffer.push("\r\n</div>\r\n"),""}),Komodo.Application.IssueHardwareAgainstSwapAvailabilityView=Komodo.UI.View.extend({viewKey:"IssueHardwareAgainstSwapAvailabilityView",templateName:"IssueHardwareAgainstSwapAvailabilityView"}),Komodo.Application.ScheduledChangesView=Komodo.UI.View.extend({viewKey:"ScheduledChangesView",templateName:"ScheduledChangesView"}),Komodo.Application.CancelServiceOrderView=Komodo.UI.View.extend({viewKey:"CancelServiceOrderView",templateName:"CancelServiceOrderView"}),Komodo.Application.IssueHardwareAgainstSwapOrderView=Komodo.UI.View.extend({viewKey:"IssueHardwareAgainstSwapOrderView",templateName:"IssueHardwareAgainstSwapOrderView"}),Komodo.Application.ChangeDeviceOwnershipView=Komodo.UI.View.extend({viewKey:"ChangeDeviceOwnershipView"}),Komodo.Application.CsiEditViewingController=Komodo.UI.Controller.extend({_viewingLocaleBase:"locale.manageviewing:",_csiLocaleBase:"locale.csicustomer:",needs:["csiManageViewing"],init:function(){this._super(),Komodo.log("Constructing CSI Customer Edit Viewing controller"),this.set("processVersion","v1.1"),this.set("processName","CSI Customer Edit Viewing process"),this.set("devicesGridColumns",[Komodo.Controls.DataGridColumn.create({name:"deviceNumber",title:kl.value(this._csiLocaleBase+"addDevicesAndPackages.deviceNumber"),canEdit:!1}),Komodo.Controls.DataGridColumn.create({name:"linkedSmartcard",title:kl.value(this._csiLocaleBase+"addDevicesAndPackages.linkedSmartcard"),canEdit:!1}),Komodo.Controls.DataGridColumn.create({name:"principalPackage",title:kl.value(this._csiLocaleBase+"addDevicesAndPackages.principalPackage"),canEdit:!1}),Komodo.Controls.DataGridColumn.create({name:"addonChannels",title:kl.value(this._csiLocaleBase+"addDevicesAndPackages.addOnChannels"),canEdit:!1}),Komodo.Controls.DataGridCommandColumn.create({title:kl.value(this._csiLocaleBase+"addDevicesAndPackages.delete"),displayText:kl.value(this._csiLocaleBase+"addDevicesAndPackages.delete"),width:"30px",action:"deleteDevicesGridItem",displayType:"link"})])},start:function(){var e=this;e.createCDMData(),e.registerModel("viewModel",Komodo.Models.CommercialManageViewingModel),e.registerValidation(),e.set("viewTitle",kl.value(e._viewingLocaleBase+"csi.editViewTitle")),e.clearFormData(),e.set("disableViewingPoints",!0),e.set("disablechargePeriod",!0);var t=!1,a=e.get("controllers.csiManageViewing");if(void 0!==a&&void 0!==a.viewModel&&(e.set("customerNo",a.customerNo),e.set("companyName",a.companyName),e.set("showDetails",a.showDetails),e.viewModel.set("customerClass",a.viewModel.customerClass),e.viewModel.set("customerType",a.viewModel.customerType),e.viewModel.set("paymentGroup",a.viewModel.paymentGroup),e.viewModel.set("viewingLocation",a.viewModel.viewingLocation),e.viewModel.set("agreementId",a.viewModel.agreementId),e.viewModel.set("agreementType",a.viewModel.agreementType),e.viewModel.set("establishmentName",a.viewModel.establishmentName),e.viewModel.set("viewingPlatform",a.viewModel.viewingPlatform),e.viewModel.set("viewingPoints",a.viewModel.viewingPoints),e.viewModel.set("contractStartDate",a.viewModel.contractStartDate),e.viewModel.set("contractEndDate",a.viewModel.contractEndDate),e.viewModel.set("chargePeriod",a.viewModel.chargePeriod),e.viewModel.set("accounts",a.viewModel.accounts),e.viewModel.set("establishments",a.viewModel.establishments),e.viewModel.set("viewingLocations",a.viewModel.viewingLocations),e.viewModel.set("selectedproductData",a.viewModel.selectedproductData),void 0!==e.viewModel.establishmentName&&void 0!==e.viewModel.viewingPlatform&&e.set("isButtonDisable",!1),t=!0),!1===t){Komodo.Controls.MessageBoxController.show(kl.value(e._csiLocaleBase+"customerprofile.customerNotFoundTitle"),kl.value(e._csiLocaleBase+"customerprofile.customerNotFound"),Komodo.Controls.MessageOKButtons,e,"id5446673","warning").response=function(e){if("ok"===e)return void Komodo.Services.uiService.transitionTo("home")}}e._super()},stop:function(){this.hideBusyIndicator(),this._super()},createCDMData:function(){var e=this,t=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),a=Komodo.Services.localizationService.getCurrentLanguage();e.set("loggedInCountryId",t),e.getHierachicalCDMData(t,a,"Location",e.countries)},getStaticCDMData:function(e,t,a,o){Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){o.clear(),$.each(e,function(e,t){o.addObject(t)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve static CDM data for "+a)})},getHierachicalCDMData:function(e,t,a,o){Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){var t=JSON.parse(e);switch(o.clear(),a){case"Location":$.each($.makeArray(t.Countries.Country),function(e,t){o.addObject(t)});break;default:Komodo.log("[ERROR] : Unknown Hierachical dataset: "+a)}}).fail(function(){Komodo.log("[ERROR] : could not retrieve hierarchical CDM data for "+a)})},registerValidation:function(){var e=this;e.registerValidator(e.get("viewModel"),"viewingPoints",{type:"string",isRequired:!0,displayName:kl.value(e._csiLocaleBase+"customerprofile.viewingPoints"),minLength:1,maxLength:10,functions:Komodo.UI.Validators.numericValidator})},clearAgreementData:function(){var e=this;e.viewModel.set("viewingPlatform",void 0),e.viewModel.set("viewingPoints",void 0),e.viewModel.set("contractStartDate",void 0),e.viewModel.set("contractEndDate",void 0),e.viewModel.set("chargePeriod",void 0),e.viewModel.set("selectedproductData",[]),e.set("showDetails",!1)},clearFormData:function(){var e=this;e.viewModel.set("customerClass",void 0),e.viewModel.set("customerType",void 0),e.viewModel.set("paymentGroup",void 0),e.viewModel.set("viewingLocation",void 0),e.viewModel.set("agreementType",void 0),e.viewModel.set("establishmentName",void 0),e.viewModel.set("viewingPlatform",void 0),e.viewModel.set("viewingPoints",void 0),e.viewModel.set("contractStartDate",void 0),e.viewModel.set("contractEndDate",void 0),e.viewModel.set("chargePeriod",void 0),e.viewModel.set("accounts",[]),e.viewModel.set("establishments",[]),e.viewModel.set("viewingLocations",[]),e.viewModel.set("selectedproductData",[]),e.set("isButtonDisable",!0)},getListOfAccount:function(){var e=this,t=[];if(void 0!==e.viewModel.paymentGroup){var a=e.viewModel.paymentGroup,o=Komodo.Models.Account.create(),s=Komodo.canonicalFacadeFactory(o,["UID","StartDate","EndDate","PaymentDetail","ListOfAgreement_Agreement"]);s.set("UID",a.UID),s.set("StartDate",a.StartDate),s.set("EndDate",a.EndDate),s.set("PaymentDetail",e.getPaymentDetail(a)),s.set("ListOfAgreement_Agreement",e.getListOfAgreement(a)),t.push(o)}return t},getPaymentDetail:function(e){var t,a=Komodo.Models.PaymentDetail.create();return void 0!==e.PaymentDetail&&("1"===e.PaymentDetail.MethodOfPayment?(t=Komodo.canonicalFacadeFactory(a,["MethodOfPayment","DebitOrderDay"]),t.set("MethodOfPayment",e.PaymentDetail.MethodOfPayment),t.set("DebitOrderDay",e.PaymentDetail.DebitOrderDay)):e.PaymentDetail.MethodOfPayment>"1"&&(t=Komodo.canonicalFacadeFactory(a,["MethodOfPayment","AccountNumber","BankName","BranchName","BranchCode","DebitOrderDay","PayerName","PayerSurname","PayerIDType","PayerIDNumber"]),t.set("MethodOfPayment",e.PaymentDetail.MethodOfPayment),t.set("AccountNumber",e.PaymentDetail.AccountNumber),t.set("BankName",e.PaymentDetail.BranchName),t.set("BranchName",e.PaymentDetail.branchName),t.set("BranchCode",e.PaymentDetail.BranchCode),t.set("DebitOrderDay",e.PaymentDetail.DebitOrderDay),t.set("PayerName",e.PaymentDetail.PayerName),t.set("PayerIDNumber",e.PaymentDetail.PayerIDNumber))),a},getListOfAgreement:function(e){var t=this,a=[];if(void 0!==e){var o=Komodo.Models.Agreement.create(),s=Komodo.canonicalFacadeFactory(o,["UID","Name","Type","StartDate","ActivationDate","TermOfPayment","ConsumerDetail","ConsumerAddress","ListOfHardware_Hardware","NumberOfViewingPoints","LocationIndicator","InstallationType"]);s.set("UID",t.viewModel.agreementId),s.set("Name",t.viewModel.establishmentName),s.set("Type",t.viewModel.agreementType),s.set("TermOfPayment","Monthly"===t.viewModel.chargePeriod?1:12),s.set("ConsumerDetail",t.getConsumerDetail()),s.set("ConsumerAddress",t.getAddress(e)),s.set("NumberOfViewingPoints",t.viewModel.viewingPoints),s.set("InstallationType",t.viewModel.installationType),a.push(o)}return a},getConsumerDetail:function(){var e=this,t=Komodo.Models.PersonalDetail.create();return Komodo.canonicalFacadeFactory(t,["FirstName","Surname"]).set("Surname",e.companyName),t},getAddress:function(e){var t=Komodo.Models.Address.create(),a=Komodo.canonicalFacadeFactory(t,["Type","BuildingNumber","BuildingName","Street","Suburb","City","Province","Country","PostCode","PostBoxNumber"]);return e&&e.BillingAddress&&(a.set("Type","Agreement"),a.set("Street",e.BillingAddress.Street),a.set("Suburb",e.BillingAddress.Suburb),a.set("City",e.BillingAddress.City),a.set("Province",e.BillingAddress.Province),a.set("Country",e.BillingAddress.Country),a.set("PostCode",e.BillingAddress.PostCode),a.set("PostBoxNumber",e.BillingAddress.PostBoxNumber),a.set("BuildingNumber",e.BillingAddress.BuildingNumber),a.set("BuildingName",e.BillingAddress.BuildingName)),t},getNewProcessID:function(){this.startNewProcess()},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,3e4,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},actions:{saveChanges:function(){var e=this;!1!==e.canSubmitData(e.viewModel,e.viewTitle,{showInModal:!0})&&e.publishAssociateProductsEvent()},cancelChanges:function(){var e=this;Komodo.Services.uiService.getController("csiManageViewing").setAgreementData(e.viewModel.establishmentName,e.viewModel.viewingLocation),Komodo.Services.uiService.getRoute("application").transitionTo("csiManageViewing")}},publishAssociateProductsEvent:function(){var e=this,t=Komodo.Models.AddCommercialProducts.create(),a=Komodo.canonicalFacadeFactory(t,["Country","CustomerUID","ListOfAccount_Account"]);a.set("Country",e.get("loggedInCountryId")),a.set("CustomerUID",e.customerNo),a.set("ListOfAccount_Account",e.getListOfAccount()),e.getNewProcessID(),Komodo.Services.AssociateProductsService.associateCommercialProducts(e,t).done(function(){e.showBusyIndicator(),e.set("isButtonDisable",!0),Komodo.log("publishAssociateProductsEvent() : Link CSI Products event has been published.")}).fail(function(){e.hideBusyIndicator(),Komodo.log("publishAssociateProductsEvent() : Link CSI Products event has failed.")})},messageCommercialProductsAddedReceived:function(e){var t=this,a=!0;if(t.hideBusyIndicator(),void 0!==e.ResponseMessage.Payload.ListOfAccount&&void 0!==e.ResponseMessage.Payload.ListOfAccount.Account){var o=e.ResponseMessage.Payload.CustomerUID,s=e.ResponseMessage.Payload.ListOfAccount.Account;if(void 0!==s.ListOfAgreement&&void 0!==s.ListOfAgreement.Agreement){if(o){Komodo.Application.SharedObjectController.create().retrieveFinancialAccounts(o)}Komodo.Services.uiService.getController("csiManageViewing").setAgreementData(t.viewModel.establishmentName,t.viewModel.viewingLocation),Komodo.Services.uiService.getRoute("application").transitionTo("csiManageViewing"),t.clearFormData(),a=!1}}!0===a&&Komodo.Controls.MessageBoxController.show(t.viewTitle,kl.value(t._localeBase+"messgProductLinkFail"))},messageFailureMessageEventReceived:function(e){this.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButton,this,"id544246673","danger")},messageReceived:function(e){this.hideBusyIndicator(),Komodo.UI.log("[CsiEditViewingController.messageReceived] : event name = "+e.ResponseMessage.EventName)},messageDeliveryFailure:function(e){this.hideBusyIndicator(),Komodo.UI.warn("[CsiEditViewingController.messageDeliveryFailure] : messageId = "+e.messageId)},messageFault:function(e){this.hideBusyIndicator(),Komodo.UI.error("[CsiEditViewingController.messageFault] : messageId = "+e.messageId)},disableViewingPoints:!0,disablechargePeriod:!0,countries:[],agreementTypes:[],showDetails:!1,controlsDisabled:!0,isButtonDisable:!0,chargePeriods:[Komodo.ChargePeriodCollection.MONTHLY,Komodo.ChargePeriodCollection.ANNUALLY]}),Komodo.Application.ChangeOfCountrySwapView=Komodo.UI.View.extend({viewKey:"ChangeOfCountrySwapView",templateName:"ChangeOfCountrySwapView"}),Komodo.Application.CancelPackagesView=Komodo.UI.View.extend({viewKey:"CancelPackagesView",templateName:"CancelPackagesView"}),Komodo.Application.ChangeOfCountryView=Komodo.UI.View.extend({viewKey:"ChangeOfCountryView",templateName:"ChangeOfCountryView"}),Komodo.Application.CsiManageViewingController=Komodo.UI.Controller.extend({_viewingLocaleBase:"locale.manageviewing:",_csiLocaleBase:"locale.csicustomer:",_addOnCategoryFilterString:"ACCESS:ADDON:ADD ON",init:function(){this._super(),Komodo.log("Constructing CSI Customer Manage Viewing controller"),this.set("processVersion","v1.1"),this.set("processName","CSI Customer Manage Viewing process"),this.set("devicesGridColumns",[Komodo.Controls.DataGridColumn.create({name:"deviceNumber",title:kl.value(this._csiLocaleBase+"addDevicesAndPackages.deviceNumber"),canEdit:!1}),Komodo.Controls.DataGridColumn.create({name:"linkedSmartcard",title:kl.value(this._csiLocaleBase+"addDevicesAndPackages.linkedSmartcard"),canEdit:!1}),Komodo.Controls.DataGridColumn.create({name:"principalPackage",title:kl.value(this._csiLocaleBase+"addDevicesAndPackages.principalPackage"),canEdit:!1}),Komodo.Controls.DataGridColumn.create({name:"addonChannels",title:kl.value(this._csiLocaleBase+"addDevicesAndPackages.addOnChannels"),canEdit:!1}),Komodo.Controls.DataGridCommandColumn.create({title:kl.value(this._csiLocaleBase+"addDevicesAndPackages.delete"),displayText:kl.value(this._csiLocaleBase+"addDevicesAndPackages.delete"),width:"30px",action:"deleteDevicesGridItem",displayType:"link"})])},start:function(){var e=this;Komodo.Services.navigationService.activateGroup(Komodo.NavigationGroupNames.ManageViewing),e.createCDMData(),e.registerModel("viewModel",Komodo.Models.CommercialManageViewingModel),Komodo.UI.cacheDataService.getAddOnProductTypes(e._addOnCategoryFilterString,e.arrayOfProductTypes),e.set("viewTitle",kl.value(e._csiLocaleBase+"csi.manageViewTitle")),e.clearFormData(),Komodo.Services.customerProfileService.validateCustomerClass(e.csiClassId).done(function(t){if(void 0!==t&&null!==t&&void 0!==t.CustomerDetail&&null!==t.CustomerDetail)e.set("customerNo",t.CustomerNumber),e.set("companyName",t.CustomerDetail.CompanyName),e.viewModel.set("customerClass",t.CustomerDetail.Class),e.viewModel.set("customerType",t.CustomerDetail.Type),e.retrieveFinancialDetails(e.customerNo);else{Komodo.Controls.MessageBoxController.show(kl.value(e._csiLocaleBase+"customerprofile.customerNotFoundTitle"),kl.value(e._csiLocaleBase+"customerprofile.customerNotFound"),Komodo.Controls.MessageOKButtons,e,"id5446673","warning").response=function(e){if("ok"===e)return void Komodo.Services.uiService.transitionTo("home")}}}),Komodo.Services.uiService.getController("CsiAddProducts").start(),e._super()},stop:function(){this.hideBusyIndicator(),this._super()},createCDMData:function(){var e=this,t=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),a=Komodo.Services.uiService.getController("application").get("_selectedCountryDescription"),o=Komodo.Services.localizationService.getCurrentLanguage();e.set("country",a),e.set("loggedInCountryId",t),e.getHierachicalCDMData(t,o,"AgreementCustomerType",e.customerAgreementTypes)},getStaticCDMData:function(e,t,a,o){Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){o.clear(),$.each(e,function(e,t){o.addObject(t)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve static CDM data for "+a)})},getHierachicalCDMData:function(e,t,a,o){Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){var t=JSON.parse(e);switch(o.clear(),a){case"AgreementCustomerType":$.each(t.CustomerClasses.CustomerClass,function(e,t){o.addObject(t)});break;default:Komodo.log("[ERROR] : Unknown Hierachical dataset: "+a)}}).fail(function(){Komodo.log("[ERROR] : could not retrieve hierarchical CDM data for "+a)})},getAgreementType:function(e){var t=this;if(void 0!==t.customerAgreementTypes&&t.customerAgreementTypes.length>0){var a=$.grep($.makeArray(t.customerAgreementTypes),function(e){return e.CanonicalKey===t.viewModel.customerClass});if(a.length>0){var o=$.grep($.makeArray(a[0].CustomerTypes.CustomerType),function(e){return e.CanonicalKey===t.viewModel.customerType});if(o.length>0){var s=$.grep($.makeArray(o[0].AgreementCustomerTypes.AgreementCustomerType),function(t){return t.CanonicalValue===e});if(s.length>0)return s[0].CanonicalKey}}}return""},clearAgreementData:function(){var e=this;e.viewModel.set("accountId",void 0),e.viewModel.set("agreementId",void 0),e.viewModel.set("viewingPlatform",void 0),e.viewModel.set("viewingPoints",void 0),e.viewModel.set("contractStartDate",void 0),e.viewModel.set("contractEndDate",void 0),e.viewModel.set("chargePeriod",void 0),e.viewModel.set("selectedproductData",[]),e.set("selectedAgreement",void 0),e.set("isDevicesVisible",!1),e.set("showDetails",!1)},clearFormData:function(){var e=this;e.viewModel.set("customerClass",void 0),e.viewModel.set("customerType",void 0),e.viewModel.set("paymentGroup",void 0),e.viewModel.set("viewingLocation",void 0),e.viewModel.set("agreementType",void 0),e.viewModel.set("establishmentName",void 0),e.viewModel.set("viewingPlatform",void 0),e.viewModel.set("viewingPoints",void 0),e.viewModel.set("contractStartDate",void 0),e.viewModel.set("contractEndDate",void 0),e.viewModel.set("chargePeriod",void 0),e.viewModel.set("accounts",[]),e.viewModel.set("establishments",[]),e.viewModel.set("viewingLocations",[]),e.viewModel.set("selectedproductData",[])},setAgreementData:function(e,t){var a=this;a.set("establishmentName",e),a.set("viewingLocation",t)},getNewProcessID:function(){this.startNewProcess()},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,3e4,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},establishmentNameChanged:function(){var e=this;e.clearAgreementData(),e.viewModel.viewingLocations.clear(),e.viewModel.set("viewingLocation",void 0),$.each(e.viewModel.accounts,function(t,a){void 0!==a.ListOfAgreement&&void 0!==a.ListOfAgreement.Agreement&&$.each(a.ListOfAgreement.Agreement,function(t,o){o.Name===e.viewModel.establishmentName&&(e.viewModel.viewingLocations.addObject(o.LocationIndicator),e.viewModel.set("paymentGroup",a))})}),
void 0!==e.viewModel.establishmentName&&null!==e.viewModel.establishmentName&&void 0!==e.viewingLocation&&null!==e.viewingLocation&&(e.viewModel.set("viewingLocation",e.viewingLocation),e.set("viewingLocation",void 0))}.observes("viewModel.establishmentName"),viewingLocationChanged:function(){var e=this;e.clearAgreementData(),$.each(e.viewModel.accounts,function(t,a){void 0!==a.ListOfAgreement&&void 0!==a.ListOfAgreement.Agreement&&$.each(a.ListOfAgreement.Agreement,function(t,a){if(a.Name===e.viewModel.establishmentName&&a.LocationIndicator===e.viewModel.viewingLocation){e.set("selectedAgreement",a),e.viewModel.set("viewingPlatform",a.InstallationType),e.viewModel.set("viewingPoints",a.NumberOfViewingPoints),e.viewModel.set("contractStartDate",moment(a.StartDate).format(e.dateFormat)),e.viewModel.set("contractEndDate",moment(a.EndDate).format(e.dateFormat)),e.viewModel.set("agreementType",e.getAgreementType(a.LocationIndicator)),e.viewModel.set("agreementId",a.UID);var o=$.grep(e.chargePeriods,function(e){return e.value===a.TermOfPayment});if(o.length>0&&e.viewModel.set("chargePeriod",o[0].title),void 0!==a.ListOfHardware&&void 0!==a.ListOfHardware.Hardware){var s=[];$.each($.makeArray(a.ListOfHardware.Hardware),function(t,a){if(void 0!==a.ListOfService&&void 0!==a.ListOfService.Service){var o,r=[];$.each($.makeArray(a.ListOfService.Service),function(t,s){void 0!==s.ProductDetail&&(o=Komodo.Models.ManageViewingGridModel.create(),o.set("smartCardNumber",a.LinkedSmartcard?a.LinkedSmartcard:"-"),o.set("deviceNumber",a.SerialNumber?a.SerialNumber:"-"),o.set("applyStyleForPrin",!1),o.set("applyStyleForAddOn",!1),"PRINCIPAL"===s.ProductDetail.Type.toUpperCase()&&(o.set("prinPckName",s.ProductDetail.Description),o.set("prinPckStatus",s.Status),o.set("addOnPckName","-"),o.set("addOnPckStatus","-"),o.set("applyStyleForPrin",!0)),$.inArray(s.ProductDetail.Type.toUpperCase(),e.arrayOfProductTypes)>-1&&(o.set("addOnPckName",s.ProductDetail.Description),o.set("addOnPckStatus",s.Status),o.set("prinPckName","-"),o.set("prinPckStatus","-"),o.set("applyStyleForAddOn",!0)),r.addObject(o))}),r.length<1&&(a.LinkedSmartcard||a.SerialNumber)&&(o=Komodo.Models.ManageViewingGridModel.create(),o.set("smartCardNumber",a.LinkedSmartcard?a.LinkedSmartcard:"-"),o.set("deviceNumber",a.SerialNumber?a.SerialNumber:"-"),o.set("applyStyleForPrin",!1),o.set("applyStyleForAddOn",!1),o.set("prinPckName","-"),o.set("prinPckStatus","-"),o.set("addOnPckName","-"),o.set("addOnPckStatus","-"),o.set("insuranceServices","-"),o.set("insuranceServicesStatus","-"),r.addObject(o)),$.merge(s,r.sort(function(e,t){return e.smartCardNumber===t.smartCardNumber&&e.prinPckName>t.prinPckName?-1:e.smartCardNumber===t.smartCardNumber&&e.prinPckName<t.prinPckName?1:0}))}}),e.viewModel.set("selectedproductData",s),void 0!==e.viewModel.selectedproductData&&e.viewModel.selectedproductData.length>0&&e.set("isDevicesVisible",!0)}return e.set("showDetails",!0),!1}return!0})})}.observes("viewModel.viewingLocation"),collapsibleEditInfoLinks:function(){return[{href:"#/csiEditViewing",title:kl.value(this._csiLocaleBase+"addDevicesAndPackages.edit")}]}.property(),actions:{editDeviceInformation:function(e){var t=this,a=e._parentView.get("content");void 0!==a&&void 0!==t.selectedAgreement&&void 0!==t.selectedAgreement.ListOfHardware&&void 0!==t.selectedAgreement.ListOfHardware.Hardware&&$.each($.makeArray(t.selectedAgreement.ListOfHardware.Hardware),function(e,o){if(o.SerialNumber===a.deviceNumber&&o.LinkedSmartcard===a.smartCardNumber){var s=o.ProductDetail&&o.ProductDetail.ProductFeatures?o.ProductDetail.ProductFeatures.Description:"",r=o.SerialNumber,n=o.SmartcardDetail?o.SmartcardDetail.Type:"",i=o.LinkedSmartcard,c=o.ProductDetail?o.ProductDetail.Type:"",l="";if(void 0!==o.ProductDetail&&void 0!==o.ProductDetail.Model){var d=o.ProductDetail.Model.split(" ");d&&d.length>0&&(l=d[0])}Komodo.Services.uiService.getController("csiAddProducts").setData(t.viewModel.paymentGroup,t.viewModel.establishmentName,t.viewModel.viewingLocation,l,s,r,n,i,c),Komodo.Services.uiService.getRoute("application").transitionTo("csiAddProducts")}})},viewDeviceInformation:function(e){var t=this,a=e._parentView.get("content");if(a&&t.selectedAgreement&&t.viewModel&&t.viewModel.get("paymentGroup")){var o=Komodo.Services.uiService.getController("csiDeviceInfo");o.set("accountId",t.viewModel.get("paymentGroup").UID),o.set("agreementId",t.selectedAgreement.UID),o.set("deviceId",a.deviceNumber),o.set("smartCardNumber",a.smartCardNumber),o.set("establishmentName",t.viewModel.establishmentName),o.set("viewingLocation",t.viewModel.viewingLocation),o.set("accounts",t.viewModel.accounts),Komodo.Services.uiService.getRoute("application").transitionTo("csiDeviceInfo")}}},retrieveFinancialDetails:function(e){var t=this;t.viewModel.accounts.clear(),t.viewModel.establishments.clear();var a=Komodo.Services.customerProfileService.getFinancialAccounts();a&&a.ResponseMessage&&a.ResponseMessage.Payload&&a.ResponseMessage.Payload.ListOfAccount&&a.ResponseMessage.Payload.ListOfAccount.Account&&a.ResponseMessage.Payload.ListOfAccount.Account.length>0&&a.ResponseMessage.Payload.ListOfAccount.Account[0].ListOfAgreement&&a.ResponseMessage.Payload.ListOfAccount.Account[0].ListOfAgreement.Agreement?($.each(a.ResponseMessage.Payload.ListOfAccount.Account,function(e,a){t.viewModel.accounts.addObject(a),void 0!==a.ListOfAgreement&&void 0!==a.ListOfAgreement.Agreement&&$.each(a.ListOfAgreement.Agreement,function(e,a){a.Name.toUpperCase().indexOf(" - DCC")<=0&&a.Type!==Komodo.AgreementTypes.DCC&&"ACTIVE"===a.AgreementStatus.toUpperCase()&&t.viewModel.establishments.addObject(a.Name)})}),void 0!==t.establishmentName&&null!==t.establishmentName&&(t.viewModel.set("establishmentName",t.establishmentName),t.set("establishmentName",void 0))):Komodo.Services.queryService.getJSON("/AccountProfile/?id="+e).done(function(e){e&&e.Account&&($.each(e.Account,function(e,a){t.viewModel.accounts.addObject(a),void 0!==a.ListOfAgreement&&void 0!==a.ListOfAgreement.Agreement&&$.each(a.ListOfAgreement.Agreement,function(e,a){a.Name.toUpperCase().indexOf(" - DCC")<=0&&a.Type!==Komodo.AgreementTypes.DCC&&"ACTIVE"===a.AgreementStatus.toUpperCase()&&t.viewModel.establishments.addObject(a.Name)})}),void 0!==t.establishmentName&&null!==t.establishmentName&&(t.viewModel.set("establishmentName",t.establishmentName),t.set("establishmentName",void 0)))}).error(function(e){var t=JSON.stringify(e);Komodo.log("retrieveFinancialAccounts ajax call failed. Error: "+t)})},arrayOfProductTypes:[],csiClassId:Komodo.CustomerClass.CSI,customerAgreementTypes:[],showDetails:!1,country:void 0,isDevicesVisible:!1,dateFormat:"DD-MM-YYYY",chargePeriods:[Komodo.ChargePeriodCollection.MONTHLY,Komodo.ChargePeriodCollection.ANNUALLY]}),Komodo.Application.ChangeResidenceTypeView=Komodo.UI.View.extend({viewKey:"ChangeResidenceTypeView"}),Ember.TEMPLATES.ReturnsView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o,s,r;return t.buffer.push('\r\n        <table width="100%">\r\n            <tr>\r\n                <td>\r\n                    <b>'),t.buffer.push(g((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:returns.retrieveSalesOrder",r):m.call(e,"loc","locale.manageStock:returns.retrieveSalesOrder",r)))),t.buffer.push("</b>\r\n                    "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.TextField",{hash:{label:"~locale.manageStock:returns.quoteOrDeviceNumber~",valueBinding:"data.quoteDeviceNumber"},hashTypes:{label:"STRING",valueBinding:"STRING"},hashContexts:{label:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                    "),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"retrieveOrder"},hashTypes:{action:"STRING"},hashContexts:{action:e},inverse:p.noop,fn:p.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n        <br>\r\n        <hr />\r\n        <table width="100%">\r\n            <tr>\r\n                <td>\r\n                    '),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageStock:returns.salesOrder~",isVisibleBinding:"data.isSalesOrderGridVisible"},hashTypes:{text:"STRING",isVisibleBinding:"STRING"},hashContexts:{text:e,isVisibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(":\r\n                    "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.lblSalesOrder",isVisibleBinding:"data.isSalesOrderGridVisible"},hashTypes:{textBinding:"STRING",isVisibleBinding:"STRING"},hashContexts:{textBinding:e,isVisibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td>\r\n                    <table id="gridQuoteDataTable" class="table table-bordered komodo-datagrid">\r\n                        <col width="19%">\r\n                        <col width="19%">\r\n                        <col width="19%">\r\n                        <col width="19%">\r\n                        <col width="19%">\r\n                        <col width="5%">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>'),t.buffer.push(g((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:returns.item",r):m.call(e,"loc","locale.manageStock:returns.item",r)))),t.buffer.push("</th>\r\n                                <th>"),t.buffer.push(g((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:returns.deviceNumber",r):m.call(e,"loc","locale.manageStock:returns.deviceNumber",r)))),t.buffer.push("</th>\r\n                                <th>"),t.buffer.push(g((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:returns.deviceCost",r):m.call(e,"loc","locale.manageStock:returns.deviceCost",r)))),t.buffer.push("</th>\r\n                                <th>"),t.buffer.push(g((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:returns.tax",r):m.call(e,"loc","locale.manageStock:returns.tax",r)))),t.buffer.push("</th>\r\n                                <th>"),t.buffer.push(g((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:returns.total",r):m.call(e,"loc","locale.manageStock:returns.total",r)))),t.buffer.push("</th>\r\n                                <th>"),t.buffer.push(g((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageStock:returns.returnItem",r):m.call(e,"loc","locale.manageStock:returns.returnItem",r)))),t.buffer.push("</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            "),o=a.each.call(e,"item","in","data.gridQuoteDeviceHistory",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(4,i,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                        </tbody>\r\n                    </table>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td>\r\n                    <table id="gridTotalQuoteDeviceHistory" class="table table-bordered komodo-datagrid">\r\n                        <col width="19%">\r\n                        <col width="19%">\r\n                        <col width="19%">\r\n                        <col width="19%">\r\n                        <col width="19%">\r\n                        <col width="5%">\r\n                        <tbody>\r\n                            '),o=a.each.call(e,"item","in","data.gridTotalQuoteDeviceHistory",{hash:{},hashTypes:{},hashContexts:{},inverse:p.noop,fn:p.program(6,c,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                        </tbody>\r\n                    </table>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td colspan="2" style="text-align: right;">\r\n                    '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"createReturnOrder",isVisibleBinding:"data.isSalesOrderGridVisible"},hashTypes:{action:"STRING",isVisibleBinding:"STRING"},hashContexts:{action:e,isVisibleBinding:e},inverse:p.noop,fn:p.program(8,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n            </tr>\r\n        </table>\r\n        "),""}function n(e,t){var o,s;return t.buffer.push("\r\n                    "),t.buffer.push(g((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:returns.retrieveOrder",s):m.call(e,"loc","locale.manageStock:returns.retrieveOrder",s)))),t.buffer.push("\r\n                </td>\r\n                <td>\r\n                    "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"data.Reason",isVisibleBinding:"_useReturnReason",label:"~locale.manageStock:returns.reasonforReturn~",contentBinding:"_hardwareSaleReturnCodes",optionLabelPath:"content.value",optionValuePath:"content.key",prompt:"~locale.manageStock:returns.reasonDropDefault~"},hashTypes:{valueBinding:"STRING",isVisibleBinding:"STRING",label:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING"},hashContexts:{valueBinding:e,isVisibleBinding:e,label:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                </td>\r\n            </tr>\r\n        </table>\r\n        "),""}function i(e,t){var o;return t.buffer.push("\r\n                            <tr>\r\n                                <td>\r\n                                    "),o=a._triageMustache.call(e,"item.FromModel",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                                </td>\r\n                                <td>\r\n                                    "),o=a._triageMustache.call(e,"item.DeviceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                                </td>\r\n                                <td style="text-align: right">\r\n                                    '),o=a._triageMustache.call(e,"item.deviceCost",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                                </td>\r\n                                <td style="text-align: right">\r\n                                    '),o=a._triageMustache.call(e,"item.totalTax",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                                </td>\r\n                                <td style="text-align: right">\r\n                                    '),o=a._triageMustache.call(e,"item.totalPrice",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n                                </td>\r\n                                <td style="text-align: center">\r\n                                    '),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"item.checked"},hashTypes:{checkedBinding:"STRING"},hashContexts:{checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                                </td>\r\n                            </tr>\r\n                            "),""}function c(e,t){var o;return t.buffer.push("\r\n                            <tr>\r\n                                <td>\r\n                                    <b>"),o=a._triageMustache.call(e,"item.FromModel",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</b>\r\n                                </td>\r\n                                <td>\r\n                                    <b>"),o=a._triageMustache.call(e,"item.DeviceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</b>\r\n                                </td>\r\n                                <td style="text-align: right">\r\n                                    <b>'),o=a._triageMustache.call(e,"item.deviceCost",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</b>\r\n                                </td>\r\n                                <td style="text-align: right">\r\n                                    <b>'),o=a._triageMustache.call(e,"item.totalTax",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('</b>\r\n                                </td>\r\n                                <td style="text-align: right">\r\n                                    <b>'),o=a._triageMustache.call(e,"item.totalPrice",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</b>\r\n                                </td>\r\n                                <td></td>\r\n                            </tr>\r\n                            "),""}function l(e,t){var o,s;return t.buffer.push("\r\n                    "),t.buffer.push(g((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageStock:returns.processReturn",s):m.call(e,"loc","locale.manageStock:returns.processReturn",s)))),t.buffer.push("\r\n                    "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var d,u,h,m=a.helperMissing,g=this.escapeExpression,p=this;return s.buffer.push("<div "),s.buffer.push(g(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n    <div width="90%">\r\n        <span class="komodo-heading">'),s.buffer.push(g((u=a.loc||t&&t.loc,h={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},u?u.call(t,"locale.manageStock:returns.title",h):m.call(t,"loc","locale.manageStock:returns.title",h)))),s.buffer.push('</span>\r\n        <span class="float-right">\r\n            <b>\r\n                <a href="#/manageViewing">&lt;BACK</a>\r\n            </b>\r\n        </span>\r\n    </div>\r\n    <hr />\r\n    <div>\r\n        '),d=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.manageStock:returns.gridTitle~",isCollapsedBinding:"false"},hashTypes:{title:"STRING",isCollapsedBinding:"STRING"},hashContexts:{title:t,isCollapsedBinding:t},inverse:p.noop,fn:p.program(1,r,s),contexts:[t],types:["ID"],data:s}),(d||0===d)&&s.buffer.push(d),s.buffer.push("\r\n    </div>\r\n</div>"),""}),Komodo.Application.ReturnsView=Komodo.UI.View.extend({viewKey:"ReturnsView"}),Komodo.Application.CommercialDeviceInfoView=Komodo.UI.View.extend({viewKey:"CommercialDeviceInfoView",templateName:"CommercialDeviceInfoView"}),Komodo.Application.SwapMaterialAvailabilitySingleView=Komodo.UI.View.extend({viewKey:"SwapMaterialAvailabilitySingleView",templateName:"SwapMaterialAvailabilitySingleView"}),Komodo.Application.CommercialDisconnectView=Komodo.UI.View.extend({viewKey:"CommercialDisconnectView",templateName:"CommercialDisconnectView"}),Komodo.Application.RetrieveHardwareSingleView=Komodo.UI.View.extend({viewKey:"RetrieveHardwareSingleView",templateName:"RetrieveHardwareSingleView"}),Komodo.Application.CommercialEditViewingView=Komodo.UI.View.extend({viewKey:"CommercialEditViewingView"}),Komodo.Application.CommercialEditViewingController=Komodo.UI.Controller.extend({_localeBase:"locale.associateProducts:associateProducts.",_viewingLocaleBase:"locale.manageviewing:",_commercialLocaleBase:"locale.commercialcustomer:",_localeCustomerInformation:"locale.customer:customerInformation.",_commercialDeviceBase:"locale.commercialcustomer:addDevicesAndPackages.",needs:["commercialManageViewing"],_hardwareCategoryName:"HARDWARE",init:function(){this._super(),Komodo.log("Constructing Commercial Customer Edit Viewing controller"),this.set("processVersion","v1.1"),this.set("processName","Commercial Customer Edit Viewing process"),this.set("agreementAddressGridColumns",[Komodo.Controls.DataGridColumn.create({name:"addressType",title:kl.value(this._localeCustomerInformation+"type"),canEdit:!1,width:"15%"}),Komodo.Controls.DataGridColumn.create({name:"addressString",title:kl.value(this._localeCustomerInformation+"addresslblGridColumn"),canEdit:!1,width:"70%"}),Komodo.Controls.DataGridCommandColumn.create({title:kl.value(this._localeCustomerInformation+"editButton"),displayText:kl.value(this._localeCustomerInformation+"editButton"),width:"15%",action:"editAgreementAddressItem",displayType:"link"})]),this.set("devicesGridColumns",[Komodo.Controls.DataGridColumn.create({name:"deviceNumber",title:kl.value(this._commercialLocaleBase+"addDevicesAndPackages.deviceNumber"),canEdit:!1}),Komodo.Controls.DataGridColumn.create({name:"linkedSmartcard",title:kl.value(this._commercialLocaleBase+"addDevicesAndPackages.linkedSmartcard"),canEdit:!1}),Komodo.Controls.DataGridColumn.create({name:"principalPackage",title:kl.value(this._commercialLocaleBase+"addDevicesAndPackages.principalPackage"),canEdit:!1}),Komodo.Controls.DataGridColumn.create({name:"addonChannels",title:kl.value(this._commercialLocaleBase+"addDevicesAndPackages.addOnChannels"),canEdit:!1}),Komodo.Controls.DataGridCommandColumn.create({title:kl.value(this._commercialLocaleBase+"addDevicesAndPackages.delete"),displayText:kl.value(this._commercialLocaleBase+"addDevicesAndPackages.delete"),width:"30px",action:"deleteDevicesGridItem",displayType:"link"})])},start:function(){var e=this;e.createCDMData(),e.registerModel("viewModel",Komodo.Models.CommercialManageViewingModel),e.set("addressInformation",Komodo.Models.AddressModel.create()),e._setFeatureToggles(),e.set("showAddEdit",!1),e.set("viewTitle",kl.value(e._viewingLocaleBase+"commercial.editViewTitle")),e.clearFormData();var t=!1,a=e.get("controllers.commercialManageViewing");if(void 0!==a&&void 0!==a.viewModel&&(e.set("customerNo",a.customerNo),e.set("companyName",a.companyName),e.set("showDetails",a.showDetails),e.viewModel.set("customerClass",a.viewModel.customerClass),e.viewModel.set("customerType",a.viewModel.customerType),e.viewModel.set("paymentGroup",a.viewModel.paymentGroup),e.viewModel.set("viewingLocation",a.viewModel.viewingLocation),e.viewModel.set("agreementId",a.viewModel.agreementId),e.viewModel.set("agreementType",a.viewModel.agreementType),e.viewModel.set("establishmentName",a.viewModel.establishmentName),e.viewModel.set("viewingPlatform",a.viewModel.viewingPlatform),e.viewModel.set("viewingPoints",a.viewModel.viewingPoints),e.viewModel.set("contractStartDate",a.viewModel.contractStartDate),e.viewModel.set("contractEndDate",a.viewModel.contractEndDate),e.viewModel.set("chargePeriod",a.viewModel.chargePeriod),e.viewModel.set("accounts",a.viewModel.accounts),e.viewModel.set("establishments",a.viewModel.establishments),e.viewModel.set("viewingLocations",a.viewModel.viewingLocations),e.viewModel.set("selectedproductData",a.productDeviceData),e.set("productDeviceData",a.productDeviceData),e.createAgreementAddressDataGridModel(e.viewModel.get("paymentGroup"),e.viewModel.get("agreementId")),void 0!==e.viewModel.establishmentName&&void 0!==e.viewModel.viewingPlatform&&e.set("isButtonDisable",!1),e.createProductData(a.viewModel.customerClass),e.registerModel("originalViewModel",Komodo.Models.CommercialManageViewingModel),e.originalViewModel.set("establishmentName",a.viewModel.establishmentName),e.originalViewModel.set("viewingPoints",a.viewModel.viewingPoints),e.originalViewModel.set("chargePeriod",a.viewModel.chargePeriod),t=!0),!1===t){Komodo.Controls.MessageBoxController.show(kl.value(e._commercialLocaleBase+"customerprofile.customerNotFoundTitle"),kl.value(e._commercialLocaleBase+"customerprofile.customerNotFound"),Komodo.Controls.MessageOKButtons,e,"id5446673","warning").response=function(e){if("ok"===e)return void Komodo.Services.uiService.transitionTo("home")}}e.registerValidation(),e.set("viewModel.searchTextPlaceholder",kl.value("locale.onlinetill:customer.searchPlaceholder")),e._super()},stop:function(){this.hideBusyIndicator(),this._super()},_setFeatureToggles:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("AssociateProducts","UseOptimizedVersion").done(function(t){e.set("viewModel.useOptimizedVersion",t)}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)}),Komodo.Services.featureToggleService.isEnabled("AssociateProducts","UseOptimizedAddDeviceVersion").done(function(t){e.set("viewModel.useOptimizedAddDeviceVersion",t)}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)}),Komodo.Services.featureToggleService.isEnabled("CustomerGlobal","EnableAddressOverRide").done(function(t){e.set("enableAddressOverRide",t)}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)})},createCDMData:function(){var e=this,t=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),a=(Komodo.Services.uiService.getController("application").get("_selectedCountryDescription"),Komodo.Services.localizationService.getCurrentLanguage());e.set("loggedInCountryId",t),e.set("maximumAllowedViewingPoints",-1),e.getStaticCDMData(t,"global","ViewingPointConstants",[]),e.getStaticCDMData(t,a,"AddressType",e.addressTypes),e.getHierachicalCDMData(t,a,"Location",e.countries),e.getHierachicalCDMData(t,a,"HardwareModelDetail",e.devicePairs),Komodo.Services.featureToggleService.isEnabled("AssociateProducts","CommercialAddDeviceView").done(function(t){e.set("showCommercialAddDevice",t)}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)}),Komodo.Services.featureToggleService.isEnabled("AssociateProducts","IsInsuranceAvailable").done(function(t){e.set("isInsuranceAvailable",t)}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)})},getStaticCDMData:function(e,t,a,o){var s=this;Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){switch(o.clear(),a){case"AddressType":e.sort(function(e,t){return e.key<t.key?1:e.key>t.key?-1:0}),$.each(e,function(e,t){t.key!==Komodo.CanonicalValues.AddressTypes.Physical&&t.key!==Komodo.CanonicalValues.AddressTypes.Postal||o.addObject(t)});break;case"ViewingPointConstants":$.each(e,function(e,t){s.set("maximumAllowedViewingPoints",t.value)}),s.registerValidator(s.get("viewModel"),"viewingPoints",{type:"string",isRequired:!0,displayName:kl.value(s._commercialLocaleBase+"customerprofile.viewingPoints"),maximumAllowedViewingPoints:s.maximumAllowedViewingPoints,minLength:1,maxLength:10,functions:[Komodo.UI.Validators.numericValidator,Komodo.UI.Validators.viewingPointsValidator]});break;default:$.each(e,function(e,t){o.addObject(t)})}}).fail(function(){Komodo.log("[ERROR] : could not retrieve static CDM data for "+a)})},getHierachicalCDMData:function(e,t,a,o){Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){var t=JSON.parse(e);switch(o.clear(),a){case"Location":$.each($.makeArray(t.Countries.Country),function(e,t){o.addObject(t)});break;default:Komodo.log("[ERROR] : Unknown Hierachical dataset: "+a)}}).fail(function(){Komodo.log("[ERROR] : could not retrieve hierarchical CDM data for "+a)})},createProductData:function(e){var t=this,a=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),o=Komodo.Services.localizationService.getCurrentLanguage(),s=t.getProductPriceDetailDatasetName(e);t.productCategoryAndProducts.clear(),t.allProductCategories.clear(),Komodo.UI.cacheDataService.getProductCategoryAndProductsDataset(s,a,o,t.productCategoryAndProducts,t.allProductCategories)},getProductPriceDetailDatasetName:function(e){var t="";switch(e){case 1:case"1":t="Commercial";break;case 9:case"9":t="NationalDeal"}return t=t+GetCustomerTypesConstants("DefaultCurrencyQualifier","QUALIFIER")+"ProductPriceDetail"},registerValidation:function(){var e=this;e.registerValidator(e.get("viewModel"),"viewingPoints",{type:"string",isRequired:!0,displayName:kl.value(e._commercialLocaleBase+"customerprofile.viewingPoints"),maximumAllowedViewingPoints:e.maximumAllowedViewingPoints,minLength:1,maxLength:10,functions:[Komodo.UI.Validators.numericValidator,Komodo.UI.Validators.viewingPointsValidator]}),e.registerValidator(e.get("viewModel"),"establishmentName",{type:"string",isRequired:!0,originalEstablishmentName:e.originalViewModel.establishmentName,commercialLocaleBase:e._commercialLocaleBase,displayName:kl.value(e._commercialLocaleBase+"customerprofile.establishmentName"),functions:this.registerCustomValidation})},registerCustomValidation:function(e,t,a){var o=Ember.A(),s=void 0;e[Object.keys(e)[0]];a=a||{};var r=a.displayName,n=a.originalEstablishmentName,i=a.commercialLocaleBase;if(void 0!==t&&void 0!=t.establishments&&t.establishments.length>0&&(s=t.establishments,$.each(s,function(e,t){s[e]=t.toLowerCase()}),Ember.isEmpty(n)||(s=$.grep(s,function(e){return e!=n.toLowerCase()}))),e.hasOwnProperty("establishmentName")){if(void 0===t.establishmentName||""===t.establishmentName.trim())return o.addObject(kl.value(i+"customerprofile.establishmentNameRequired",{displayName:r})),o;if(void 0!==t.establishmentName&&""!==t.establishmentName.trim()&&void 0!==s&&s.length>0&&-1!==$.inArray(t.establishmentName.toLowerCase(),s))return o.addObject(kl.value(i+"customerprofile.establishmentNameDuplication",{displayName:r})),o}return o},clearAgreementData:function(){var e=this;e.viewModel.set("viewingPlatform",void 0),e.viewModel.set("viewingPoints",void 0),e.viewModel.set("contractStartDate",void 0),e.viewModel.set("contractEndDate",void 0),e.viewModel.set("chargePeriod",void 0),e.viewModel.set("selectedproductData",[]),e.set("productDeviceData",[]),e.set("showDetails",!1)},clearFormData:function(){var e=this;e.viewModel.set("customerClass",void 0),e.viewModel.set("customerType",void 0),e.viewModel.set("paymentGroup",void 0),e.viewModel.set("viewingLocation",void 0),e.viewModel.set("agreementType",void 0),e.viewModel.set("establishmentName",void 0),e.viewModel.set("viewingPlatform",void 0),e.viewModel.set("viewingPoints",void 0),e.viewModel.set("contractStartDate",void 0),e.viewModel.set("contractEndDate",void 0),e.viewModel.set("chargePeriod",void 0),e.viewModel.set("accounts",[]),e.viewModel.set("establishments",[]),e.viewModel.set("viewingLocations",[]),e.viewModel.set("selectedproductData",[]),e.set("productDeviceData",[]),e.set("isButtonDisable",!0),e.set("showAddEdit",!1)},createAgreementAddressDataGridModel:function(e,t){var a=this,o=null,s=Komodo.Models.AgreementAddressDataGridModel.create(),r=[];if(void 0!==e&&null!==e){var n=$.grep($.makeArray(e.ListOfAgreement.Agreement),function(e){return e.UID===t});n&&n.length>0&&(s.set("agreementId",t),n[0].ListOfAddress&&n[0].ListOfAddress.Address&&n[0].ListOfAddress.Address.length>0&&(o=n[0].ListOfAddress.Address[0],o.TypeDescription=a.addressTypes[1].value)),o&&(s.set("addressType",o.Type),s.set("addressString",a.getAddressString(o)))}r.addObject(s),a.set("agreementAddresses",r)},getAddressString:function(e){var t=this,a=""
;if(e){void 0!==e.HouseNumber&&null!==e.HouseNumber&&""!==$.trim(e.HouseNumber)&&(a+=$.trim(e.HouseNumber)+", "),void 0!==e.BuildingName&&null!==e.BuildingName&&""!==$.trim(e.BuildingName)&&(a+=$.trim(e.BuildingName)+", "),void 0!==e.Street&&null!==e.Street&&""!==$.trim(e.Street)&&(a+=$.trim(e.Street)+", "),void 0!==e.PostBoxNumber&&null!==e.PostBoxNumber&&""!==$.trim(e.PostBoxNumber)&&(a+=$.trim(e.PostBoxNumber)+", ");var o=t.getCitySuburbText(e.Country,e.Province,e.City,e.Suburb);o&&void 0!==o.Suburb&&null!==o.Suburb&&""!==$.trim(o.Suburb)&&(a+=$.trim(o.Suburb)+", "),o&&void 0!==o.City&&null!==o.City&&""!==$.trim(o.City)&&(a+=$.trim(o.City)+", ");var s=$.grep($.makeArray(t.countries),function(t){return t.CanonicalKey.toUpperCase()===e.Country.toUpperCase()});if(s.length>0){var r=$.grep($.makeArray(s[0].Provinces.Province),function(t){return t.CanonicalKey.toUpperCase()===e.Province.toUpperCase()});r.length>0&&(a+=$.trim(r[0].CanonicalValue)+", "),a+=$.trim(s[0].CanonicalValue)+", "}void 0!==e.PostCode&&null!==e.PostCode&&""!==$.trim(e.PostCode)&&(a+=$.trim(e.PostCode)+", "),a=$.trim(a).replace(/^,|,$/g,"")}return a},getCitySuburbText:function(e,t,a,o){var s=this;if(e&&t&&a&&o&&(a=s.capitaliseFirstLetter(a),o=s.capitaliseFirstLetter(o),!s.get("enableAddressOverRide"))){var r=$.grep($.makeArray(s.countries),function(t){return t.CanonicalKey.toUpperCase()===e.toUpperCase()});if(r.length>0){var n=$.grep($.makeArray(r[0].Provinces.Province),function(e){return e.CanonicalKey.toUpperCase()===t.toUpperCase()});if(n.length>0&&n[0].Cities&&n[0].Cities.City){var i=$.grep($.makeArray(n[0].Cities.City),function(e){return e.CanonicalValue.toUpperCase()===a.toUpperCase()});if(i.length>0&&(a=i[0].CanonicalValue,i[0].Suburbs&&i[0].Suburbs.Suburb)){var c=$.grep($.makeArray(i[0].Suburbs.Suburb),function(e){return e.CanonicalValue.toUpperCase()===o.toUpperCase()});c.length>0&&(o=c[0].CanonicalValue)}}}}return{City:a,Suburb:o}},capitaliseFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.toLowerCase().slice(1)},showAddEditChanged:function(){this.get("showAddEdit")?$("#commercialManageViewingEditPanel").show():$("#commercialManageViewingEditPanel").hide(),$("#commercialManageViewingEditPanel input:radio").attr("disabled",!0)}.observes("showAddEdit"),copyBillingAddressChanged:function(){var e=this,t=e.viewModel.get("paymentGroup"),a=e.viewModel.get("agreementId"),o=null;if(e.viewModel.get("copyBillingAddress"))Ember.isEmpty(t)||Ember.isEmpty(t.BillingAddress)||(o=t.BillingAddress,o.TypeDescription=e.addressTypes[0].value,e.mapAddressInformation(o));else if(!Ember.isEmpty(t)&&!Ember.isEmpty(t.ListOfAgreement)){var s=$.grep($.makeArray(t.ListOfAgreement.Agreement),function(e){return e.UID===a});s&&s.length>0&&(s[0].ListOfAddress&&s[0].ListOfAddress.Address&&s[0].ListOfAddress.Address.length>0&&(o=s[0].ListOfAddress.Address[0],o.TypeDescription=e.addressTypes[0].value),o&&e.mapAddressInformation(o))}}.observes("viewModel.copyBillingAddress"),mapAddressInformation:function(e){var t=this;if(e){var a=t.addressTypes[0],o=e.TypeDescription?e.TypeDescription:t.addressTypes[0].value,s=$.grep($.makeArray(t.get("addressTypes")),function(e){return e.value.toUpperCase()===o.toUpperCase()});if(s.length>0&&(a=s[0],t.viewModel.set("addressTypeKey",a.key)),"POSTAL"===o.toUpperCase()){var r=e.Street;if(-1!==r.replace(/\s/g,"").indexOf("PO BOX")){var n=r.split(" ");t.get("addressInformation").set("privateBag",n[2]),t.get("addressInformation").set("boxType",Komodo.BoxTypes.PO_BOX)}else if(-1!==r.indexOf("SUITE")){var n=r.split(" ");t.get("addressInformation").set("privateBag",n[1]),t.get("addressInformation").set("boxType",Komodo.BoxTypes.SUITE)}else if(-1!==r.replace(/\s/g,"").indexOf("PRIVATE BAG")){var n=r.split(" ");t.get("addressInformation").set("privateBag",n[2]),t.get("addressInformation").set("boxType",Komodo.BoxTypes.PRIVATE_BAG)}t.get("addressInformation").set("streetNumber",void 0),t.get("addressInformation").set("streetName",void 0)}else{var i=Komodo.UI.addressFunctions.splitStreetNumberName(e.Street);t.get("addressInformation").set("streetNumber",i.streetNumber),t.get("addressInformation").set("streetName",i.streetName),t.get("addressInformation").set("privateBag",void 0),t.get("addressInformation").set("boxType",void 0)}t.get("addressInformation").set("isAddressOverride",!t.get("enableAddressOverRide")||!!e.IsVerified&&!e.IsVerified),t.get("addressInformation").set("addressTypeText",a.value),t.get("addressInformation").set("addressType",a.key),t.get("addressInformation").set("country",e.Country),t.get("addressInformation").set("province",e.Province);var c=t.getCitySuburbText(e.Country,e.Province,e.City,e.Suburb);t.get("addressInformation").set("city",c.City),t.get("addressInformation").set("suburb",c.Suburb),t.get("addressInformation").set("postalCode",e.PostCode),t.get("addressInformation").set("building",e.BuildingName),t.get("addressInformation").set("unit",e.HouseNumber),t.get("addressInformation").set("isPrimary",!1),t.get("addressInformation").set("isPrimaryString","No"),t.get("addressInformation").set("isMarketingEnabled",!1),t.get("addressInformation").set("addressString","")}},getAgreementAddress:function(){var e=this,t=Komodo.Models.Address.create();return t=Komodo.UI.addressFunctions.getAddress(e.get("addressInformation")),t.IsBillingAddress=!0,t.Type="Agreement",t},getListOfAccount:function(){var e=this,t=[];if(void 0!==e.viewModel.paymentGroup){var a=e.viewModel.paymentGroup,o=Komodo.Models.Account.create(),s=Komodo.canonicalFacadeFactory(o,["UID","StartDate","EndDate","PaymentDetail","ListOfAgreement_Agreement"]);s.set("UID",a.UID),s.set("StartDate",a.StartDate),s.set("EndDate",a.EndDate),s.set("PaymentDetail",e.getPaymentDetail(a)),s.set("ListOfAgreement_Agreement",e.getListOfAgreement(a)),t.push(o)}return t},getPaymentDetail:function(e){var t,a=Komodo.Models.PaymentDetail.create();return void 0!==e.PaymentDetail&&("1"===e.PaymentDetail.MethodOfPayment?(t=Komodo.canonicalFacadeFactory(a,["MethodOfPayment","DebitOrderDay"]),t.set("MethodOfPayment",e.PaymentDetail.MethodOfPayment),t.set("DebitOrderDay",e.PaymentDetail.DebitOrderDay)):e.PaymentDetail.MethodOfPayment>"1"&&(t=Komodo.canonicalFacadeFactory(a,["MethodOfPayment","AccountNumber","BankName","BranchName","BranchCode","DebitOrderDay","PayerName","PayerSurname","PayerIDType","PayerIDNumber"]),t.set("MethodOfPayment",e.PaymentDetail.MethodOfPayment),t.set("AccountNumber",e.PaymentDetail.AccountNumber),t.set("BankName",e.PaymentDetail.BranchName),t.set("BranchName",e.PaymentDetail.branchName),t.set("BranchCode",e.PaymentDetail.BranchCode),t.set("DebitOrderDay",e.PaymentDetail.DebitOrderDay),t.set("PayerName",e.PaymentDetail.PayerName),t.set("PayerIDNumber",e.PaymentDetail.PayerIDNumber))),a},getListOfAgreement:function(e){var t=this,a=Komodo.Services.systemService,o=[];if(void 0!==e){var s=Komodo.Models.Agreement.create(),r=Komodo.canonicalFacadeFactory(s,["UID","Name","Type","StartDate","ActivationDate","TermOfPayment","ConsumerDetail","ConsumerAddress","ListOfHardware_Hardware","NumberOfViewingPoints","LocationIndicator","InstallationType"]);r.set("UID",t.viewModel.agreementId),r.set("Name",t.viewModel.establishmentName),r.set("Type",t.viewModel.agreementType),r.set("TermOfPayment","Monthly"===t.viewModel.chargePeriod?1:12),r.set("ConsumerDetail",t.getConsumerDetail()),r.set("ConsumerAddress",t.getAddress(e)),r.set("NumberOfViewingPoints",t.viewModel.viewingPoints),r.set("InstallationType",t.viewModel.installationType),t.addAgreementDeviceData&&t.addAgreementDeviceData.length>0&&(r.set("ActivationDate",a.universalDateString(new Date)),r.set("ListOfHardware_Hardware",t.getListOfHardware())),o.push(s)}return o},getConsumerDetail:function(){var e=this,t=Komodo.Models.PersonalDetail.create();return Komodo.canonicalFacadeFactory(t,["FirstName","Surname"]).set("Surname",e.companyName),t},getAddress:function(e){var t=Komodo.Models.Address.create(),a=Komodo.canonicalFacadeFactory(t,["Type","BuildingNumber","BuildingName","Street","Suburb","City","Province","Country","PostCode","PostBoxNumber"]);return e&&e.BillingAddress&&(a.set("Type","Agreement"),a.set("Street",e.BillingAddress.Street),a.set("Suburb",e.BillingAddress.Suburb),a.set("City",e.BillingAddress.City),a.set("Province",e.BillingAddress.Province),a.set("Country",e.BillingAddress.Country),a.set("PostCode",e.BillingAddress.PostCode),a.set("PostBoxNumber",e.BillingAddress.PostBoxNumber),a.set("BuildingNumber",e.BillingAddress.BuildingNumber),a.set("BuildingName",e.BillingAddress.BuildingName)),t},getListOfHardware:function(){var e=this,t=[];return e.addAgreementDeviceData.forEach(function(a){var o=Komodo.Models.Hardware.create(),s=Komodo.canonicalFacadeFactory(o,["SerialNumber","LinkedSmartcard","SmartcardDetail","ProductDetail","ListOfService","SecondaryHardware","InsuranceStatus","WarrantyStatus","IsAwaitingInstallation"]);s.set("SerialNumber",a.decoderSerialNumber),s.set("LinkedSmartcard",a.smartcardSerialNumber),s.set("InsuranceStatus",a.insurance?"Yes":"No"),s.set("SmartcardDetail",e.getSmartcardDetail(a)),s.set("ProductDetail",e.getHardwareProductDetail(a)),t.push(o)}),t},getSmartcardDetail:function(e){var t=Komodo.Models.ProductDetail.create(),a=Komodo.canonicalFacadeFactory(t,["UID","Type","Name","Model","Description"]);return void 0!==e&&(a.set("UID",e.smartcardSerialNumber),a.set("Type",e.smartcardType)),t},getHardwareProductDetail:function(e){var t=this,a=Komodo.Models.ProductDetail.create(),o=Komodo.canonicalFacadeFactory(a,["UID","Type","Name","Model","Description"]);return void 0!==e&&(o.set("UID",e.decoderSerialNumber),o.set("Type",t.getDeviceType(e.decoderCpcType)),o.set("Model",e.decoderModel)),a},getDeviceType:function(e){var t=this,a=void 0,o=Komodo.UI.cacheDataService.getProductsForCategory(t._hardwareCategoryName,!1,t.productCategoryAndProducts);if(!Ember.isEmpty(o)){var s=o[0].value;$.each(s,function(t,o){return o.SystemKey!==e||(a=o.CanonicalValue,!1)})}return a},matchingDeviceNotFound:function(e){var t=this,a=void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.Type?e.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.Type.toLowerCase():"device",o=e.ResponseMessage.Payload.ListOfHardware.Hardware.SerialNumber;Komodo.Controls.MessageBoxController.show(t.viewTitle,kl.value(t._localeBase+"paireDeviceNotFound")+a+kl.value(t._localeBase+"withSerialNumber")+o+" "+kl.value(t._localeBase+"findothermachingDevice"),Komodo.Controls.MessageBoxYesNoButtons,t,"id54456673","warning").response=function(e){"yes"===e&&t.showDevicePair()}},availableForUse:function(e){var t=this,a=kl.value(t._localeBase+"isTheDevice")+" "+e.ResponseMessage.Payload.ListOfHardware.Hardware.SerialNumber+" ";void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.SmartcardDetail&&null!==e.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcard&&(a=a+kl.value(t._localeBase+"andSmartCard")+" "+e.ResponseMessage.Payload.ListOfHardware.Hardware.SmartcardDetail.Type+" ",void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcard&&(a=a+e.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcard+" ")),a+=kl.value(t._localeBase+"numbersCorrect");var o=kl.value(t._localeBase+"confirmDevicePair");Komodo.Controls.MessageBoxController.show(o,a,Komodo.Controls.MessageBoxYesNoButtons,t,"id5446673","warning").response=function(a){"yes"===a&&(t.addHardwareToList(e.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.Model,e.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.ProductFeatures.Description,void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.SerialNumber?e.ResponseMessage.Payload.ListOfHardware.Hardware.SerialNumber:void 0,void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.SmartcardDetail?e.ResponseMessage.Payload.ListOfHardware.Hardware.SmartcardDetail.Type:void 0,void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcard?e.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcard:void 0,e.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.Type,!1,!0),t.set("smartcardDeviceNumber",void 0),t.saveChanges())}},showDevicePair:function(){var e=this;e.registerModel("hardwarePair",Komodo.Models.SavePairModel),e.registerValidator(e.get("hardwarePair"),"smartCardSerialNumber",{isRequired:!0,displayName:kl.value(e._localeBase+"smartcardNumber"),minLength:10,maxLength:10,functions:Komodo.UI.Validators.alphanumericValidator}),e.registerValidator(e.get("hardwarePair"),"decoderSerialNumber",{isRequired:!0,displayName:kl.value(e._localeBase+"deviceNumber"),minLength:10,maxLength:10,functions:Komodo.UI.Validators.alphanumericValidator});var t=Komodo.Application.ModalPaneController.create();t.popup(kl.value(e._localeBase+"updateDevice"),null,{context:{data:e.get("hardwarePair"),validators:e.validators,savepair:function(){!1!==e.canSubmitData(e.hardwarePair,kl.value(e._localeBase+"useCaseTitle"),{showInModal:!1})&&(e.set("popupaction","savepair"),t.close())}},closeCallback:function(){"savepair"===e.get("popupaction")&&(e.viewModel.useOptimizedVersion?Komodo.Services.queryService.getJSON("/Device/PairDevice?decoderSerialNumber="+e.get("hardwarePair.decoderSerialNumber")+"&smartcardSerialNumber="+e.get("hardwarePair.smartCardSerialNumber")).done(function(t){e.publishValidateHardwarePairingEvent(e.get("hardwarePair.decoderSerialNumber"),e.get("hardwarePair.smartCardSerialNumber"))}).error(function(t){var a=JSON.stringify(t);Komodo.log("retrieveProductOffers ajax call failed. Error: "+a),t&&t.responseJSON&&t.responseJSON.Message?Komodo.Controls.MessageBoxController.show(e.viewTitle,t.responseJSON.Message,Komodo.Controls.MessageBoxOkButton,e,"id544246673","danger"):t&&t.responseText?Komodo.Controls.MessageBoxController.show(e.viewTitle,t.responseText,Komodo.Controls.MessageBoxOkButton,e,"id544246673","danger"):Komodo.Controls.MessageBoxController.show(e.viewTitle,a,Komodo.Controls.MessageBoxOkButton,e,"id544246673","danger")}):e.publishValidateHardwarePairingEvent(e.get("hardwarePair.decoderSerialNumber"),e.get("hardwarePair.smartCardSerialNumber")),e.set("popupaction",void 0))},view:Komodo.Application.SavePairView})},addHardwareToList:function(e,t,a,o,s,r,n,i){var c=this,l=Ember.Object.extend({init:function(){this._super(),this.display=t+"-"+a,this.decoderType=t,this.decoderSerialNumber=a,this.smartcardType=o,this.smartcardSerialNumber=s,this.decoderModel=e,this.selectedSecondaryDecoderno=void 0,this.decoderCpcType=r,this.insurance=n}}).create();i&&c.addAgreementDeviceData.pushObject(l),$.each(c.devicePairs,function(e,t){t.CanonicalKey===l.decoderModel&&c.primaryDevicesList.pushObject(l)})},saveChanges:function(){var e=this;!1!==e.canSubmitData(e.viewModel,e.viewTitle,{showInModal:!0})&&e.publishAssociateProductsEvent()},cancelChanges:function(){var e=this;Komodo.Services.uiService.getController("commercialManageViewing").setAgreementData(e.viewModel.establishmentName,e.viewModel.viewingLocation),Komodo.Services.uiService.getRoute("application").transitionTo("commercialManageViewing")},addDevice:function(){var e=this;e.registerModel("deviceModel",Komodo.Models.AddDeviceModel),e.registerValidator(e.get("deviceModel"),"smartcardDeviceNumber",{isRequired:!0,displayName:kl.value(e._localeBase+"smartcardNumber"),minLength:6,maxLength:10,functions:Komodo.UI.Validators.alphanumericValidator});var t=Komodo.Services.uiService.showModalPopup(kl.value(e._commercialLocaleBase+"addDevice.popupTitle"),null,{view:Komodo.Application.AddDeviceView,context:{data:e.get("deviceModel"),validators:e.validators,addAgreementDevice:function(){var a=e.get("deviceModel");!1!==e.canSubmitData(a,e.viewTitle,{showInModal:!0})&&(t.close(),e.publishValidateHardwarePairingEvent(void 0,a.get("smartcardDeviceNumber")))},close:function(){e.set("popupaction","close"),t.close()}},canUserClose:!0})},getNewProcessID:function(){this.startNewProcess()},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,3e4,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},actions:{saveChanges:function(){this.saveChanges()},cancelChanges:function(){this.cancelChanges()},addDevice:function(){var e=this;e.set("addAgreementDeviceData",[]),e.addDevice()},findDeviceSmartcard:function(){var e=this,t=[];e.productDeviceData&&(e.viewModel.searchDeviceText?($(e.productDeviceData).each(function(a,o){(o.deviceNumber&&o.deviceNumber.toString()===e.viewModel.searchDeviceText||o.smartCardNumber&&o.smartCardNumber.toString()===e.viewModel.searchDeviceText)&&t.pushObject(o)}),e.viewModel.set("selectedproductData",t)):e.viewModel.set("selectedproductData",e.productDeviceData))},editAgreementAddressItem:function(){var e=this;e.viewModel.set("copyBillingAddress",!1);var t=e.viewModel.get("paymentGroup");if(!Ember.isEmpty(t)&&!Ember.isEmpty(e.commandGridItem)&&!Ember.isEmpty(e.commandGridItem.agreementId)){var a=$.grep($.makeArray(t.ListOfAgreement.Agreement),function(t){return t.UID===e.commandGridItem.agreementId});if(a&&a.length>0&&a[0].ListOfAddress&&a[0].ListOfAddress.Address&&a[0].ListOfAddress.Address.length>0&&(item=a[0].ListOfAddress.Address[0],item.TypeDescription=e.addressTypes[0].value),item&&(e.set("showAddEdit",!0),e.mapAddressInformation(item)),Ember.isEmpty(t)||Ember.isEmpty(t.BillingAddress))e.set("isCopyBillingAddressDisable",!0);else{var o=e.getAddressString(t.BillingAddress);Ember.isEmpty(o)?(e.viewModel.set("billingAddressString",""),e.set("isCopyBillingAddressDisable",!0)):(e.viewModel.set("billingAddressString","( "+o+" )"),e.set("isCopyBillingAddressDisable",!1))}}},cancelAddressChanges:function(){this.set("showAddEdit",!1)}},publishValidateHardwarePairingEvent:function(e,t){var a=this;if(a.viewModel.useOptimizedAddDeviceVersion){var o=[];o.push(t),Komodo.Services.queryService.postJSON("/Device/ValidateHardware",{data:o}).done(function(e){if(e&&e.length&&e.length>0){$.each($.makeArray(e),function(e,t){t.ProductDetail.ProductFeatures={Description:t.ProductDetail.Description}});var t={ResponseMessage:{Payload:{ListOfHardware:{Hardware:e[0]}}}};a.messageHardwareRetrievedReceived(t)}}).error(function(e){var t=JSON.stringify(e);Komodo.log("retrieveProductOffers ajax call failed. Error: "+t),e&&e.responseJSON&&e.responseJSON.Message?Komodo.Controls.MessageBoxController.show(a.viewTitle,e.responseJSON.Message,Komodo.Controls.MessageBoxOkButton,a,"id544246673","danger"):e&&e.responseText&&Komodo.Controls.MessageBoxController.show(a.viewTitle,e.responseText,Komodo.Controls.MessageBoxOkButton,a,"id544246673","danger")})}else{var s=Komodo.Models.ValidateHardwarePairing.create(),r=Komodo.canonicalFacadeFactory(s,["Country","DecoderSerialNumber","SmartcardSerialNumber"]);r.set("Country",a.get("loggedInCountryId")),void 0!==e&&null!==e&&r.set("DecoderSerialNumber",e),void 0!==t&&null!==t&&r.set("SmartcardSerialNumber",t),a.getNewProcessID(),Komodo.Services.AssociateProductsService.seachHardware(a,s).done(function(){a.showBusyIndicator(),Komodo.log("publishValidateHardwarePairingEvent() : ValidateHardwarePairing event has been published.")}).fail(function(){Komodo.log("publishValidateHardwarePairingEvent() : ValidateHardwarePairing event has failed.")})}},messageHardwareRetrievedReceived:function(e){var t=this,a=!1;t.hideBusyIndicator();var o=kl.value(t._commercialDeviceBase+"messageValidation");if(void 0!==e.ResponseMessage.Payload.ListOfHardware&&void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware&&void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.Status){var s=e.ResponseMessage.Payload.ListOfHardware.Hardware;switch(o=kl.value(t._commercialDeviceBase+"messageDeviceValidation"),o=o+"<br />"+kl.value(t._localeBase+"device")+": "+s.SerialNumber+" - "+kl.value(t._commercialDeviceBase+"status")+": "+s.Status,s.Status.toUpperCase()){case"MATCHING DEVICE NOT FOUND":a=!0,t.matchingDeviceNotFound(e);break;case"AVAILABLE FOR USE":if(void 0!==s.LinkedSmartcardStatus)switch(s.LinkedSmartcardStatus.toUpperCase()){case"MATCHING DEVICE NOT FOUND":a=!0,t.matchingDeviceNotFound(e);break;case"AVAILABLE FOR USE":a=!0,t.availableForUse(e);break;default:o=o+"<br />"+kl.value(t._localeBase+"smartcard")+": "+s.LinkedSmartcard+" - "+kl.value(t._commercialDeviceBase+"status")+": "+s.LinkedSmartcardStatus}else o=o+"<br />"+kl.value(t._localeBase+"smartcard")+": "+s.LinkedSmartcard+" - "+kl.value(t._commercialDeviceBase+"status")+": "+s.LinkedSmartcardStatus}}!1===a&&Komodo.Controls.MessageBoxController.show(t.viewTitle,o,Komodo.Controls.MessageBoxOkButton,t,"id5556673","danger")},publishAssociateProductsEvent:function(){var e=this;if(e.viewModel.useOptimizedAddDeviceVersion){var t=e.getListOfAccount(),a=[];$.each($.makeArray(t),function(t,o){var s=[];$.each($.makeArray(o.get("ListOfAgreement.Agreement")),function(t,a){var r=[];$.each($.makeArray(a.get("ListOfHardware.Hardware")),function(e,t){var a=[];$.each($.makeArray(t.get("ListOfService.Service")),function(e,t){var o=[];$.each($.makeArray(t.get("ProductDetail.Offers")),function(e,t){o.push({Id:t.get("UID"),OfferDescription:t.get("Name")})}),a.push({UID:t.get("UID"),Offers:o})}),r.push({SerialNumber:t.get("SerialNumber"),Status:t.get("Status"),InsuranceStatus:t.get("InsuranceStatus"),IsInsured:!1,LinkedSmartcard:t.get("LinkedSmartcard"),LinkedSmartcardStatus:t.get("LinkedSmartcardStatus"),Services:a})});var n=[];e.get("showAddEdit")&&n.pushObject(e.getAgreementAddress(e.get("addressInformation"))),s.push({AgreementNumber:a.get("UID"),Name:a.get("Name"),Type:a.get("Type"),StartDate:a.get("ActivationDate"),EndDate:a.get("EndDate"),Status:a.get("Status"),TermOfPayment:a.get("TermOfPayment"),FinancialAccountId:o.get("UID"),InstallationType:a.get("InstallationType"),TypeName:"",NumberOfViewingPoints:a.get("NumberOfViewingPoints"),Devices:r,ListOfAddress:n})}),a.push({Number:o.get("UID"),CustomerId:e.customerNo,Agreements:s})}),e.getNewProcessID(),e.showBusyIndicator(),e.set("isDisableActiveButton",!0),Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+e.customerNo),Komodo.Services.queryService.postJSON("/Device/AddDevicesAndPackages",{data:a}).done(function(t){if(t&&t.length&&t.length>0){var a={ResponseMessage:{Payload:{CustomerUID:e.customerNo,ListOfAccount:{Account:e.getListOfAccount()[0]}}}};e.messageCommercialProductsAddedReceived(a),e.publishCreateInteraction(e.customerNo)}else e.hideBusyIndicator()}).error(function(t){e.hideBusyIndicator();var a=JSON.stringify(t);Komodo.log("retrieveProductOffers ajax call failed. Error: "+a),t&&t.responseJSON&&t.responseJSON.Message?Komodo.Controls.MessageBoxController.show(e.viewTitle,t.responseJSON.Message,Komodo.Controls.MessageBoxOkButton,e,"id544246673","danger"):t&&t.responseText&&Komodo.Controls.MessageBoxController.show(e.viewTitle,t.responseText,Komodo.Controls.MessageBoxOkButton,e,"id544246673","danger")})}else{var o=Komodo.Models.AddCommercialProducts.create(),s=Komodo.canonicalFacadeFactory(o,["Country","CustomerUID","ListOfAccount_Account"]);s.set("Country",e.get("loggedInCountryId")),s.set("CustomerUID",e.customerNo),s.set("ListOfAccount_Account",e.getListOfAccount()),e.getNewProcessID(),Komodo.Services.AssociateProductsService.associateCommercialProducts(e,o).done(function(){e.showBusyIndicator(),e.set("isButtonDisable",!0),Komodo.log("publishAssociateProductsEvent() : Link Commercial Products event has been published.")}).fail(function(){e.hideBusyIndicator(),Komodo.log("publishAssociateProductsEvent() : Link Commercial Products event has failed.")})}},publishCreateInteraction:function(e){var t="",a=Komodo.Models.CreateInteraction.create(),o=Komodo.Models.Case.create();o.set("InteracteeName",Komodo.Services.securityService.session.domainUserName),o.set("InteractionLocation",this.get("loggedInCountryId")),o.set("InteractionMedium","5"),o.set("CustomerUID",e),o.set("QueryType",6),o.set("Category",4),o.set("SubCategory",1),o.set("Outcome",114),o.set("Status","1"),void 0!==this.viewModel&&void 0!=this.originalViewModel&&(void 0!=this.originalViewModel.establishmentName&&this.originalViewModel.establishmentName!=this.viewModel.establishmentName&&(t+="\nEstablishment Name changed from '"+this.originalViewModel.establishmentName+"' to '"+this.viewModel.establishmentName+"'."),void 0!==this.originalViewModel.viewingPoints&&this.originalViewModel.viewingPoints!=this.viewModel.viewingPoints&&(t+="\nViewing Points changed from "+this.originalViewModel.viewingPoints+" to "+this.viewModel.viewingPoints+"."),void 0!==this.originalViewModel.chargePeriod&&this.originalViewModel.chargePeriod!=this.viewModel.chargePeriod&&(t+="\nCharge Period changed from "+this.originalViewModel.chargePeriod+" to "+this.viewModel.chargePeriod+".")),o.set("Notes","Products linked successfully."+t);var s=Komodo.canonicalFacadeFactory(a,["Country","Case"]);s.set("Country",this.get("loggedInCountryId")),s.set("Case",o),Komodo.Services.CustomerService.publishCustomerEvent(this,a,"CreateInteraction","v1",!0)},messageCommercialProductsAddedReceived:function(e){var t=this,a=!0;if(t.hideBusyIndicator(),void 0!==e.ResponseMessage.Payload.ListOfAccount&&void 0!==e.ResponseMessage.Payload.ListOfAccount.Account){var o=e.ResponseMessage.Payload.CustomerUID,s=e.ResponseMessage.Payload.ListOfAccount.Account;if(void 0!==s.ListOfAgreement&&void 0!==s.ListOfAgreement.Agreement){if(o){Komodo.Application.SharedObjectController.create().retrieveCustomerProfile(o).done(function(e){Komodo.Services.uiService.getController("commercialManageViewing").setAgreementData(t.viewModel.establishmentName,t.viewModel.viewingLocation),Komodo.Services.uiService.getRoute("application").transitionTo("commercialManageViewing"),t.clearFormData()})}a=!1}}!0===a&&Komodo.Controls.MessageBoxController.show(t.viewTitle,kl.value(t._localeBase+"messgProductLinkFail"))},messageFailureMessageEventReceived:function(e){this.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButton,this,"id544246673","danger")},messageReceived:function(e){this.hideBusyIndicator(),Komodo.UI.log("[CommercialEditViewingController.messageReceived] : event name = "+e.ResponseMessage.EventName)},messageDeliveryFailure:function(e){this.hideBusyIndicator(),Komodo.UI.warn("[CommercialEditViewingController.messageDeliveryFailure] : messageId = "+e.messageId)},messageFault:function(e){this.hideBusyIndicator(),Komodo.UI.error("[CommercialEditViewingController.messageFault] : messageId = "+e.messageId)},productCategoryAndProducts:[],allProductCategories:[],countries:[],agreementTypes:[],devicePairs:[],primaryDevicesList:[],addAgreementDeviceData:[],showDetails:!1,controlsDisabled:!0,isButtonDisable:!0,showCommercialAddDevice:!1,isInsuranceAvailable:!1,productDeviceData:[],virtualProductDataPageContent:Ember.A(),chargePeriods:[Komodo.ChargePeriodCollection.MONTHLY,Komodo.ChargePeriodCollection.ANNUALLY],enableAddressOverRide:!1,countries:[],addressTypes:[],agreementAddresses:[],commandGridItem:void 0,showAddEdit:!1,isCopyBillingAddressDisable:!1,maximumAllowedViewingPoints:-1});Komodo.Application.CommercialErrorCodesView=Komodo.UI.View.extend({viewKey:"CommercialErrorCodesView"}),Komodo.Application.RecoverStolenDeviceView=Komodo.UI.View.extend({viewKey:"RecoverStolenDeviceView",templateName:"RecoverStolenDeviceView"}),Komodo.Application.CommercialManageViewingView=Komodo.UI.View.extend({viewKey:"CommercialManageViewingView"}),Komodo.Application.UpgradeOrDowngradeView=Komodo.UI.View.extend({viewKey:"UpgradeOrDowngradeView",templateName:"UpgradeOrDowngradeView"}),Komodo.Application.CommercialReconnectView=Komodo.UI.View.extend({viewKey:"CommercialReconnectView",templateName:"CommercialReconnectView"}),Komodo.Application.ReconnectView=Komodo.UI.View.extend({viewKey:"ReconnectView",templateName:"ReconnectView"}),Komodo.Application.CommercialViewingLocationView=Komodo.UI.View.extend({viewKey:"CommercialViewingLocationView"}),Komodo.Application.DeviceLinkController=Komodo.UI.Controller.extend({_localeGeneral:"locale.customerprofile.customerprofile:general.",_localeBase:"locale.manageviewing:deviceLink.",init:function(){this._super(),Komodo.log("Constructing Device Link controller"),this.hardwareAndServicesArray=[],this.set("processVersion","v1.1"),this.set("processName","Device Link service")},start:function(){this._super(),this.set("data",Komodo.Models.DeviceLinkModel.create()),this.registerValidator(this.get("data"),"searchAgreementDeviceText",{type:"string",displayName:kl.value(this._localeBase+"decoderSmartcardNo"),minLength:7,maxLength:10,functions:Komodo.UI.Validators.alphanumericValidator}),this.createCDMData();var e=Komodo.Services.ProductAndServiceMaintenanceHelper.create();if(!e.isCustomerIdIsAvailableToRetriveData())return this.set("productLabel",kl.value(this._localeBase+"noProducts")),void Komodo.Controls.MessageBoxController.show(kl.value(this._localeGeneral+"custNotFoundHeader"),kl.value(this._localeGeneral+"custNotFoundMessage"));var t=e.getCustomerIdToRetrieveData(),a=Komodo.Services.customerProfileService.getCustomerPersonalDetail(),o=this.get("data");o.set("customerUID",t),o.set("customerClass",a?a.customerClass:""),this.retrieveCustomerAgreementDetails(t,!0),this.set("serviceColumns",[Komodo.Controls.DataGridRadioButtonColumn.create({name:"selected",title:kl.value(this._localeBase+"select"),canEdit:!0,isAlwaysEditing:!0,type:"bool",width:"5%",customClass:"text-center"}),Komodo.Controls.DataGridColumn.create({name:"serviceName",title:kl.value(this._localeBase+"packageName"),canEdit:!1,width:"15%"}),Komodo.Controls.DataGridColumn.create({name:"serviceDescription",title:kl.value(this._localeBase+"packageDescription"),canEdit:!1,width:"15%"}),Komodo.Controls.DataGridColumn.create({name:"serviceType",title:kl.value(this._localeBase+"packageType"),canEdit:!1,width:"10%"}),Komodo.Controls.DataGridColumn.create({name:"serviceStatus",title:kl.value(this._localeBase+"packageStatus"),canEdit:!1,width:"15%"}),Komodo.Controls.DataGridColumn.create({name:"agreement",title:kl.value(this._localeBase+"agreement"),canEdit:!1,width:"20%"}),Komodo.Controls.DataGridColumn.create({name:"agreementType",title:kl.value(this._localeBase+"agreementType"),canEdit:!1,width:"10%"}),Komodo.Controls.DataGridColumn.create({name:"agreementviewingPoints",title:kl.value(this._localeBase+"viewingPoints"),canEdit:!1,width:"10%"})]),this.set("deviceColumns",[Komodo.Controls.DataGridCheckBox.create({name:"selected",title:kl.value(this._localeBase+"linkUnlink"),canEdit:!0,isAlwaysEditing:!0,type:"bool",width:"5%",customClass:"text-center"}),Komodo.Controls.DataGridColumn.create({name:"serialNumber",title:kl.value(this._localeBase+"deviceNumber"),canEdit:!1,width:"15%"}),Komodo.Controls.DataGridColumn.create({name:"deviceDescription",title:kl.value(this._localeBase+"deviceDescription"),canEdit:!1,width:"17%"}),Komodo.Controls.DataGridColumn.create({name:"linkedSmartCard",title:kl.value(this._localeBase+"smartcardNumber"),canEdit:!1,width:"15%"}),Komodo.Controls.DataGridColumn.create({name:"smartcardDescription",title:kl.value(this._localeBase+"smartcardDescription"),canEdit:!1,width:"17%"}),Komodo.Controls.DataGridColumn.create({name:"agreement",title:kl.value(this._localeBase+"agreement"),canEdit:!1,width:"15%"}),Komodo.Controls.DataGridColumn.create({name:"agreementType",title:kl.value(this._localeBase+"agreementType"),canEdit:!1,width:"5%"}),Komodo.Controls.DataGridColumn.create({name:"agreementviewingPoints",title:kl.value(this._localeBase+"viewingPoints"),canEdit:!1,width:"5%"}),Komodo.Controls.DataGridCommandColumn.create({title:kl.value(this._localeBase+"products"),width:"6%",displayText:kl.value(this._localeBase+"products"),action:"viewProducts",displayType:"button"})])},stop:function(){this._super()},createCDMData:function(){var e=this,t=void 0,a=void 0
;Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(o){t=o.data.countryId,a=Komodo.Services.localizationService.getCurrentLanguage(),e.set("country",o.data.countryDescription),e.set("loggedInCountryId",o.data.countryId),e.getStaticCDMData(t,a,"AgreementType",e.agreementTypes)})},getStaticCDMData:function(e,t,a,o){Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){o.clear(),$.each(e,function(e,t){o.addObject(t)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve static CDM data for "+a)})},clearFormData:function(){var e=this,t=this.get("data");e.set("showNoProductsLabel",!0),e.set("hardwareAndServices",[]),t.set("customerUID",void 0),t.set("selectedProduct",void 0),t.set("selectedDevice",void 0),t.set("devices",[]),t.set("services",[])},mapDeviceData:function(e){var t=this,a=[];$.each($.makeArray(e.Services),function(e,o){o.ServiceId&&o.ServiceId>0&&(o.Type&&"INSURANCE"===o.Type.toUpperCase()||a.pushObject(t.mapServiceData(o)))});var o=$.grep($.makeArray(t.agreementTypes),function(t){return!(!t.key||!e.DeviceAgreementType)&&t.key.toString()===e.DeviceAgreementType.toString()}),s="-";if(t.agreements){var r=$.grep($.makeArray(t.agreements),function(t){return!(!t.UID||!e.DeviceAgreementId)&&t.UID.toString()===e.DeviceAgreementId.toString()});r.length>0&&(s=r[0].NumberOfViewingPoints)}var n="";return n+=e.SmartcardName?e.SmartcardName:"",n+=e.SmartcardName&&e.SmartcardModelName?" - ":"",n+=e.SmartcardModelName?e.SmartcardModelName:"",Ember.Object.create({deviceId:e.DeviceId,serialNumber:e.SerialNumber,deviceDescription:e.DeviceName+" - "+e.DeviceModelDescription,linkedSmartCard:e.LinkedSmartcard,smartcardDescription:n,services:a,agreement:e.DeviceAgreementId+(e.DeviceAgreementName?" - "+e.DeviceAgreementName:""),agreementId:e.DeviceAgreementId,agreementName:e.DeviceAgreementName,agreementType:o.length>0?o[0].value:"",agreementviewingPoints:s,selected:!1})},mapServiceData:function(e){var t=this,a=$.grep($.makeArray(t.agreementTypes),function(t){return!(!t.key||!e.ServiceAgreementType)&&t.key.toString()===e.ServiceAgreementType.toString()}),o="-";if(t.agreements){var s=$.grep($.makeArray(t.agreements),function(t){return!(!t.UID||!e.ServiceAgreementId)&&t.UID.toString()===e.ServiceAgreementId.toString()});s.length>0&&(o=s[0].NumberOfViewingPoints)}return Ember.Object.create({serviceId:e.UID,serviceName:e.ServiceName,serviceDescription:e.Description,serviceStatus:e.Status,serviceType:e.Type,agreement:e.ServiceAgreementId+(e.ServiceAgreementName?" - "+e.ServiceAgreementName:""),agreementId:e.ServiceAgreementId,agreementName:e.ServiceAgreementName,agreementType:a.length>0?a[0].value:"",agreementviewingPoints:o,provisionedDevices:e.ProvisionedDevices,selected:!1})},mapAgreementData:function(e){var t=this,a=$.grep($.makeArray(t.agreementTypes),function(t){return!(!t.key||!e.ServiceAgreementType)&&t.key.toString()===e.ServiceAgreementType.toString()}),o=a.length>0?a[0].value:"",s="-";if(t.agreements){var r=$.grep($.makeArray(t.agreements),function(t){return!(!t.UID||!e.ServiceAgreementId)&&t.UID.toString()===e.ServiceAgreementId.toString()});r.length>0&&(s=r[0].NumberOfViewingPoints)}return Ember.Object.create({agreement:e.ServiceAgreementId+(e.ServiceAgreementName?" - "+e.ServiceAgreementName:"")+(o?" - "+o:""),agreementId:e.ServiceAgreementId,agreementName:e.ServiceAgreementName,agreementType:o,agreementviewingPoints:s})},findAgreementDeviceSmartcard:function(){var e=this,t=!1,a=e.get("data");if(a&&a.devices){var o=a.searchAgreementDeviceText;o?(a.set("filterDevices",[]),a.set("selectedAgreement",void 0),$.each($.makeArray(a.devices),function(s,r){if(r.serialNumber&&r.serialNumber.toString()===o||r.linkedSmartCard&&r.linkedSmartCard.toString()===o){t=!0,e.set("searchText",o);var n=$.grep($.makeArray(a.agreements),function(e){return e.agreementId.toString()===r.agreementId.toString()});n.length>0&&a.set("selectedAgreement",n[0]),a.set("searchAgreementDeviceText",o)}})):(t=!0,e.selectedAgreementChanged())}!1===t&&Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),kl.value(e._localeBase+"searchResult"),Komodo.Controls.MessageBoxOkButton,e,"idDeviceLink")},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,35e3,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},serviceChanged:function(){var e=this.get("data");e&&(e.set("selectedProduct",void 0),$(e.services).each(function(t,a){!0===a.selected&&e.set("selectedProduct",a)}))}.observes("data.services.@each.selected"),selectedProductChanged:function(){var e=this,t=e.get("data");if($.each($.makeArray(t.devices),function(e,t){t.set("selected",!1)}),void 0!==t.selectedProduct&&null!==t.selectedProduct){var a=void 0===t.selectedProduct.provisionedDevices?[]:t.selectedProduct.provisionedDevices.split(";");a.length&&a.length>0&&$.each(a,function(e,a){$.each(t.devices,function(e,t){return a!==t.linkedSmartCard&&a!==t.serialNumber||(t.set("selected",!0),!1)})})}}.observes("data.selectedProduct"),selectedAgreementChanged:function(){var e=this,t=e.get("data");t.set("filterServices",[]),t.set("filterDevices",[]),t.set("searchAgreementDeviceText",void 0),t.selectedAgreement&&($(t.services).each(function(e,t){!0===t.selected&&t.set("selected",!1)}),0!==t.selectedAgreement.agreementId&&"-All-"!==t.selectedAgreement.agreement?($.each($.makeArray(t.services),function(e,a){a.agreementId.toString()===t.selectedAgreement.agreementId.toString()&&t.filterServices.push(a)}),$.each($.makeArray(t.devices),function(a,o){o.agreementId.toString()===t.selectedAgreement.agreementId.toString()&&(e.searchText?(o.serialNumber&&o.serialNumber.toString()===e.searchText||o.linkedSmartCard&&o.linkedSmartCard.toString()===e.searchText)&&t.filterDevices.push(o):t.filterDevices.push(o))}),e.set("searchText",void 0)):(t.set("filterServices",t.services),t.set("filterDevices",t.devices)),t.filterServices.length>0&&(t.filterServices.sort(function(e,t){if(e.agreementId!==t.agreementId)return e.agreementId-t.agreementId;var a=e.serviceName?e.serviceName.toLowerCase():"",o=t.serviceName?t.serviceName.toLowerCase():"";return a>o?1:a<o?-1:0}),t.filterServices[0].set("selected",!0),t.set("selectedProduct",t.filterServices[0])),t.filterDevices.length>0&&t.filterDevices.sort(function(e,t){return e.agreementId!==t.agreementId?e.agreementId-t.agreementId:t.serialNumber-e.serialNumber}))}.observes("data.selectedAgreement"),linkAllDevices:function(){var e=this,t=e.get("data");t&&t.filterDevices&&$.each(t.filterDevices,function(e,a){a.set("selected",t.linkAllDevices)})}.observes("data.linkAllDevices"),actions:{updateLinks:function(){var e=this,t=!0,a=kl.value(e._localeBase+"messageInputValidate"),o=this.get("data");void 0!==o.customerUID&&null!==o.customerUID&&""!==o.customerUID||(t=!1,a=kl.value(e._localeBase+"messageCustomerValidate")),void 0!==o.selectedProduct&&null!==o.selectedProduct&&""!==o.selectedProduct||(t=!1,a=kl.value(e._localeBase+"messageProductValidate"));var s=[];$.each($.makeArray(o.devices),function(e,t){t.selected&&s.pushObject(t.linkedSmartCard?t.linkedSmartCard:t.serialNumber)});var r=new Object;r.CustomerNumber=o.customerUID,r.ServiceId=o.selectedProduct?o.selectedProduct.serviceId:void 0,r.DeviceSerialNumbers=s,void 0!==r.CustomerNumber&&void 0!==r.ServiceId||(t=!1),t?e.updateDeviceLinks(r):Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),a,Komodo.Controls.MessageBoxOkButtons,e,"id5556673","danger")},viewProducts:function(){var e=this,t=this.get("data"),a=Komodo.Models.DeviceProductModel.create();if(t&&t.commandGridItem){t.commandGridItem.services&&t.commandGridItem.services.length>0?(a.set("showNoDeviceProductsLabel",!1),a.set("serviceColumns",[Komodo.Controls.DataGridColumn.create({name:"serviceName",title:kl.value(e._localeBase+"packageName"),canEdit:!1,width:"15%"}),Komodo.Controls.DataGridColumn.create({name:"serviceDescription",title:kl.value(e._localeBase+"packageDescription"),canEdit:!1,width:"15%"}),Komodo.Controls.DataGridColumn.create({name:"serviceType",title:kl.value(e._localeBase+"packageType"),canEdit:!1,width:"15%"}),Komodo.Controls.DataGridColumn.create({name:"serviceStatus",title:kl.value(e._localeBase+"packageStatus"),canEdit:!1,width:"15%"}),Komodo.Controls.DataGridColumn.create({name:"agreement",title:kl.value(e._localeBase+"agreement"),canEdit:!1,width:"20%"}),Komodo.Controls.DataGridColumn.create({name:"agreementType",title:kl.value(e._localeBase+"agreementType"),canEdit:!1,width:"10%"}),Komodo.Controls.DataGridColumn.create({name:"agreementviewingPoints",title:kl.value(this._localeBase+"viewingPoints"),canEdit:!1,width:"10%"})]),a.set("services",t.commandGridItem.services.sort(function(e,t){if(e.agreementId!==t.agreementId)return e.agreementId-t.agreementId;var a=e.serviceName?e.serviceName.toLowerCase():"",o=t.serviceName?t.serviceName.toLowerCase():"";return a>o?1:a<o?-1:0}))):a.set("showNoDeviceProductsLabel",!0);Komodo.Application.ModalPaneController.create().popup(kl.value(e._localeBase+"linkedProducts"),"deviceProduct",{context:{data:a}})}},findAgreementDeviceSmartcard:function(){var e=this,t=e.get("validators.searchAgreementDeviceTextValidator");if(t.validate(),t.errors&&t.errors.length>0){var a=kl.value("controller.invalidDataMessage")+"<br />"+t.errors[0];Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),a,Komodo.Controls.MessageBoxOkButtons,this,"idSearchAgreementDeviceTextValidator","warning")}else e.findAgreementDeviceSmartcard()}},retrieveCustomerAgreementDetails:function(e,t){var a=this,o=a.get("data");t&&a.showBusyIndicator(),a.set("showNoProductsLabel",!0),a.set("productLabel",kl.value(a._localeBase+"retrieveProducts")),a.set("agreements",[]);var s;s=o.customerClass===Komodo.CustomerClass.COMMERCIAL||o.customerClass===Komodo.CustomerClass.NATIONAL_DEAL?Komodo.Services.customerProfileService.getCustomerProfile():Komodo.Services.customerProfileService.getFinancialAccounts(),s&&s.ResponseMessage&&s.ResponseMessage.Payload&&s.ResponseMessage.Payload.ListOfAccount&&s.ResponseMessage.Payload.ListOfAccount.Account&&s.ResponseMessage.Payload.ListOfAccount.Account.length>0&&s.ResponseMessage.Payload.ListOfAccount.Account[0].ListOfAgreement&&s.ResponseMessage.Payload.ListOfAccount.Account[0].ListOfAgreement.Agreement&&$.each(s.ResponseMessage.Payload.ListOfAccount.Account,function(e,t){void 0!==t.ListOfAgreement&&void 0!==t.ListOfAgreement.Agreement&&$.each(t.ListOfAgreement.Agreement,function(e,t){a.agreements.addObject(t)})}),Komodo.Services.queryService.getJSON("/Device/GetCustomerLinkedUnlinkedProducts?customerNumber="+e).done(function(e){if(e){if(e.Devices){a.set("hardwareAndServices",e.Devices);var t=[];$.each($.makeArray(e.Devices),function(e,o){o.Status&&"AT CUSTOMER"===o.Status.toUpperCase()&&o.DeviceId&&o.DeviceId>0&&((o.LinkedSmartcard&&""!==o.LinkedSmartcard||o.SerialNumber&&""!==o.SerialNumber)&&t.pushObject(a.mapDeviceData(o)),void 0!==o.SecondaryDevices&&$.each($.makeArray(o.SecondaryDevices),function(e,o){o.Status&&"AT CUSTOMER"===o.Status.toUpperCase()&&o.DeviceId&&o.DeviceId>0&&(o.LinkedSmartcard&&""!==o.LinkedSmartcard||o.SerialNumber&&""!==o.SerialNumber)&&t.pushObject(a.mapDeviceData(o))}))}),o.set("devices",t)}if(e.Services){var s=[],r=[];r.pushObject(Ember.Object.create({agreement:"-All-",agreementId:0,agreementName:"",agreementType:""})),$.each($.makeArray(e.Services),function(e,t){if(t.Status&&"CANCELLED"!==t.Status.toUpperCase()&&t.ServiceId&&t.ServiceId>0&&(!t.Type||"INSURANCE"!==t.Type.toUpperCase())){s.pushObject(a.mapServiceData(t));$.grep($.makeArray(r),function(e){return!(!e.agreementId||!t.ServiceAgreementId)&&e.agreementId.toString()===t.ServiceAgreementId.toString()}).length<=0&&r.pushObject(a.mapAgreementData(t))}}),r.sort(function(e,t){return e.agreementId-t.agreementId}),o.set("services",s),o.set("agreements",r),r.length>0&&o.set("selectedAgreement",r[0])}(e.Devices&&e.Devices.length>0||e.Services&&e.Services.length>0)&&a.set("showNoProductsLabel",!1)}a.hideBusyIndicator()}).error(function(e){var t=JSON.stringify(e);Komodo.log("[ERROR] : retrieveCustomerAgreementDetails ajax call failed. Error: "+t),a.set("productLabel",kl.value(a._localeBase+"noProducts")),a.hideBusyIndicator()})},updateDeviceLinks:function(e){var t=this;Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+t.get("data").customerUID),Komodo.Services.queryService.postJSON("/Device/UpdateDeviceLink",{data:e}).done(function(e){e?(Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),kl.value(t._localeBase+"messageUpdateSuccess"),Komodo.Controls.MessageBoxOkButton,t,"id5556673","success"),t.retrieveCustomerAgreementDetails(t.get("data").customerUID,!1)):Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),kl.value(t._localeBase+"messageUpdateFailure"),Komodo.Controls.MessageBoxOkButton,t,"id5556673","danger")}).error(function(e){e&&"string"===$.type(e.responseJSON)?Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),e.responseJSON,Komodo.Controls.MessageBoxOkButtons,t,"id5556673","danger"):e.responseJSON&&e.responseJSON.ExceptionMessage?Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),e.responseJSON.ExceptionMessage,Komodo.Controls.MessageBoxOkButtons,t,"id5556673","danger"):e.responseJSON&&e.responseJSON.Message?Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),e.responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,t,"id5556673","danger"):e.statusText?Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),e.statusText,Komodo.Controls.MessageBoxOkButtons,t,"id5556673","danger"):Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),JSON.stringify(e),Komodo.Controls.MessageBoxOkButtons,t,"id5556673","danger")})},showNoProductsLabel:!0,hardwareAndServices:[],agreementTypes:[],agreements:[]}),Komodo.Application.ConfirmSwapAvailabilityView=Komodo.UI.View.extend({viewKey:"ConfirmSwapAvailabilityView",templateName:"ConfirmSwapAvailabilityView"}),Komodo.Application.CommercialManageViewingController=Komodo.UI.Controller.extend({_viewingLocaleBase:"locale.manageviewing:",_commercialLocaleBase:"locale.commercialcustomer:",_addOnCategoryFilterString:"ADDON:ADD ON",init:function(){this._super(),Komodo.log("Constructing Commercial Customer Manage Viewing controller"),this.set("processVersion","v1.1"),this.set("processName","Commercial Customer Manage Viewing process"),this.set("devicesGridColumns",[Komodo.Controls.DataGridColumn.create({name:"deviceNumber",title:kl.value(this._commercialLocaleBase+"addDevicesAndPackages.deviceNumber"),canEdit:!1}),Komodo.Controls.DataGridColumn.create({name:"linkedSmartcard",title:kl.value(this._commercialLocaleBase+"addDevicesAndPackages.linkedSmartcard"),canEdit:!1}),Komodo.Controls.DataGridColumn.create({name:"principalPackage",title:kl.value(this._commercialLocaleBase+"addDevicesAndPackages.principalPackage"),canEdit:!1}),Komodo.Controls.DataGridColumn.create({name:"addonChannels",title:kl.value(this._commercialLocaleBase+"addDevicesAndPackages.addOnChannels"),canEdit:!1}),Komodo.Controls.DataGridCommandColumn.create({title:kl.value(this._commercialLocaleBase+"addDevicesAndPackages.delete"),displayText:kl.value(this._commercialLocaleBase+"addDevicesAndPackages.delete"),width:"30px",action:"deleteDevicesGridItem",displayType:"link"})])},start:function(){var e=this;Komodo.Services.navigationService.activateGroup(Komodo.NavigationGroupNames.ManageViewing),e.createCDMData(),e.registerModel("viewModel",Komodo.Models.CommercialManageViewingModel),e.registerValidation(),Komodo.UI.cacheDataService.getAddOnProductTypes(e._addOnCategoryFilterString,e.arrayOfProductTypes),e.set("viewTitle",kl.value(e._commercialLocaleBase+"commercial.manageViewTitle")),e.clearFormData(),Komodo.Services.customerProfileService.validateCustomerClass(e.commercialClassId).done(function(t){if(void 0!==t&&null!==t&&void 0!==t.CustomerDetail&&null!==t.CustomerDetail)e.set("customerNo",t.CustomerNumber),e.set("companyName",t.CustomerDetail.CompanyName),e.viewModel.set("customerClass",t.CustomerDetail.Class),e.viewModel.set("customerType",t.CustomerDetail.Type),e.retrieveCustomerProfile(e.customerNo),e.mapEstablishments();else{Komodo.Controls.MessageBoxController.show(kl.value(e._commercialLocaleBase+"customerprofile.customerNotFoundTitle"),kl.value(e._commercialLocaleBase+"customerprofile.customerNotFound"),Komodo.Controls.MessageOKButtons,e,"id5446673","warning").response=function(e){if("ok"===e)return void Komodo.Services.uiService.transitionTo("home")}}});var t=Komodo.Services.uiService.getController("commercialAddProducts");t.start(),e.set("viewModel.searchTextPlaceholder",kl.value("locale.onlinetill:customer.searchPlaceholder")),t.set("viewModel.searchTextPlaceholder",kl.value("locale.onlinetill:customer.searchPlaceholder")),e._super()},stop:function(){this.hideBusyIndicator(),this._super()},createCDMData:function(){var e=this,t=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),a=Komodo.Services.uiService.getController("application").get("_selectedCountryDescription"),o=Komodo.Services.localizationService.getCurrentLanguage();e.set("country",a),e.set("loggedInCountryId",t),e.getHierachicalCDMData(t,o,"AgreementCustomerType",e.customerAgreementTypes),e.getHierachicalCDMData(t,o,"Location",e.countries),Komodo.Services.featureToggleService.isEnabled("AssociateProducts","IsInsuranceAvailable").done(function(t){e.set("isInsuranceAvailable",t)}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)})},getStaticCDMData:function(e,t,a,o){Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){o.clear(),$.each(e,function(e,t){o.addObject(t)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve static CDM data for "+a)})},getHierachicalCDMData:function(e,t,a,o){Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){var t=JSON.parse(e);switch(o.clear(),a){case"Location":$.each($.makeArray(t.Countries.Country),function(e,t){o.addObject(t)});break;case"AgreementCustomerType":$.each(t.CustomerClasses.CustomerClass,function(e,t){o.addObject(t)});break;default:Komodo.log("[ERROR] : Unknown Hierachical dataset: "+a)}}).fail(function(){Komodo.log("[ERROR] : could not retrieve hierarchical CDM data for "+a)})},registerValidation:function(){var e=this;e.registerValidator(e.get("viewModel"),"searchDeviceText",{type:"string",displayName:kl.value("locale.associateProducts:associateProducts.smartCardOrDeviceNo"),minLength:7,maxLength:10,functions:Komodo.UI.Validators.alphanumericValidator}),e.registerValidator(e.get("viewModel"),"searchAgreementDeviceText",{type:"string",displayName:kl.value("locale.associateProducts:associateProducts.smartCardOrDeviceNo"),minLength:7,maxLength:10,functions:Komodo.UI.Validators.alphanumericValidator})},getAgreementType:function(e){var t=this;if(void 0!==t.customerAgreementTypes&&t.customerAgreementTypes.length>0){var a=$.grep($.makeArray(t.customerAgreementTypes),function(e){return e.CanonicalKey===t.viewModel.customerClass});if(a.length>0){var o=$.grep($.makeArray(a[0].CustomerTypes.CustomerType),function(e){return e.CanonicalKey===t.viewModel.customerType});if(o.length>0){var s=$.grep($.makeArray(o[0].AgreementCustomerTypes.AgreementCustomerType),function(t){return t.CanonicalValue===e});if(s.length>0)return s[0].CanonicalKey}}}return""},clearAgreementData:function(){var e=this;e.viewModel.set("accountId",void 0),e.viewModel.set("agreementId",void 0),e.viewModel.set("viewingPlatform",void 0),e.viewModel.set("viewingPoints",void 0),e.viewModel.set("contractStartDate",void 0),e.viewModel.set("contractEndDate",void 0),e.viewModel.set("chargePeriod",void 0),e.viewModel.set("selectedproductData",[]),e.viewModel.set("searchDeviceText",void 0),e.viewModel.set("searchAgreementDeviceText",void 0),e.set("productDeviceData",[]),e.set("selectedAgreement",void 0),e.set("isDevicesVisible",!1),e.set("showDetails",!1)},clearFormData:function(){var e=this;e.viewModel.set("customerClass",void 0),e.viewModel.set("customerType",void 0),e.viewModel.set("paymentGroup",void 0),e.viewModel.set("viewingLocation",void 0),e.viewModel.set("agreementType",void 0),e.viewModel.set("establishmentName",void 0),e.viewModel.set("viewingPlatform",void 0),e.viewModel.set("viewingPoints",void 0),e.viewModel.set("contractStartDate",void 0),e.viewModel.set("contractEndDate",void 0),e.viewModel.set("chargePeriod",void 0),e.viewModel.set("accounts",[]),e.viewModel.set("establishments",[]),e.viewModel.set("viewingLocations",[]),e.viewModel.set("selectedproductData",[]),e.set("productDeviceData",[])},setAgreementData:function(e,t){var a=this;a.set("establishmentName",e),a.set("viewingLocation",t)},findDeviceSmartcard:function(){var e=this,t=[];e.viewModel&&e.productDeviceData&&(e.viewModel.set("selectedproductData",[]),e.viewModel.searchDeviceText?($(e.productDeviceData).each(function(a,o){(o.deviceNumber&&o.deviceNumber.toString()===e.viewModel.searchDeviceText||o.smartCardNumber&&o.smartCardNumber.toString()===e.viewModel.searchDeviceText)&&t.pushObject(o)}),e.viewModel.set("selectedproductData",t),0===t.length&&Komodo.Controls.MessageBoxController.show(kl.value(e._viewingLocaleBase+"commercial.manageViewTitle"),kl.value(e._commercialLocaleBase+"viewingInformation.searchResult"),Komodo.Controls.MessageBoxOkButton,e,"idManageViewing")):e.viewModel.set("selectedproductData",e.productDeviceData))},findAgreementDeviceSmartcard:function(){var e=this;if(e.viewModel.searchAgreementDeviceText){e.showBusyIndicator();var t=e.viewModel.searchAgreementDeviceText;Komodo.Application.SharedObjectController.create().retrieveCustomerDeviceProfile(e.customerNo,0,0,t).done(function(a){var o=!1;if(a&&a.Account&&a.Account.length>0&&a.Account[0].ListOfAgreement&&a.Account[0].ListOfAgreement.Agreement){e.viewModel.set("establishmentName",void 0),e.viewModel.set("viewingLocation",void 0),e.retrieveCustomerProfile(e.customerNo);var s=$.grep(e.viewModel.accounts,function(e){return e.UID===a.Account[0].UID});if(s.length>0){var r=$.grep(s[0].ListOfAgreement.Agreement,function(e){return e.UID===a.Account[0].ListOfAgreement.Agreement[0].UID});if(r.length>0){o=!0;var n=r[0];e.viewModel.set("establishmentName",n.Name),e.viewModel.set("viewingLocation",n.LocationIndicator),e.viewModel.set("searchDeviceText",t),e.viewModel.set("searchAgreementDeviceText",t),e.findDeviceSmartcard()}}}e.hideBusyIndicator(),!1===o&&Komodo.Controls.MessageBoxController.show(kl.value(e._viewingLocaleBase+"commercial.manageViewTitle"),kl.value(e._commercialLocaleBase+"viewingInformation.searchResult"),Komodo.Controls.MessageBoxOkButton,e,"idManageViewing")})}},mapEstablishments:function(){var e=this;e.viewModel.establishments.clear(),$.each(e.viewModel.accounts,function(t,a){void 0!==a.ListOfAgreement&&void 0!==a.ListOfAgreement.Agreement&&$.each(a.ListOfAgreement.Agreement,function(t,a){a.Name.toUpperCase().indexOf(" - DCC")<=0&&a.Type!==Komodo.AgreementTypes.DCC&&"ACTIVE"===a.AgreementStatus.toUpperCase()&&e.viewModel.establishments.addObject(a.Name)})}),e.viewModel.establishments&&e.viewModel.establishments.sort(function(e,t){return e<t?-1:e>t?1:0}),e.establishmentName&&(e.viewModel.set("establishmentName",e.establishmentName),e.set("establishmentName",void 0))},getAgreementDetails:function(e,t){var a=this,o=a.getCurrentProcessID();if(a.showBusyIndicator(o),void 0===t.ListOfHardware||void 0===t.ListOfHardware.Hardware||0===t.ListOfHardware.Hardware.length){Komodo.Application.SharedObjectController.create().retrieveCustomerDeviceProfile(e.CustomerId,e.UID,t.UID).done(function(s){a.retrieveCustomerProfile(e.CustomerId),a.mapAgreementDetails(t),a.hideBusyIndicator(o)})}else a.mapAgreementDetails(t),a.hideBusyIndicator(o)},mapAgreementDetails:function(e){var t=this,a=null;t.set("selectedAgreement",e),t.viewModel.set("viewingPlatform",e.InstallationType),t.viewModel.set("viewingPoints",e.NumberOfViewingPoints),t.viewModel.set("contractStartDate",moment(e.StartDate).format(t.dateFormat)),t.viewModel.set("contractEndDate",moment(e.EndDate).format(t.dateFormat)),t.viewModel.set("agreementType",t.getAgreementType(e.LocationIndicator)),t.viewModel.set("agreementId",e.UID),t.viewModel.set("agreementAddressString","-");var o=$.grep(t.chargePeriods,function(t){return t.value===e.TermOfPayment});if(o.length>0&&t.viewModel.set("chargePeriod",o[0].title),void 0!==e.ListOfHardware&&void 0!==e.ListOfHardware.Hardware){var s=[];$.each($.makeArray(e.ListOfHardware.Hardware),function(e,a){if(void 0!==a.ListOfService&&void 0!==a.ListOfService.Service){var o,r=[];$.each($.makeArray(a.ListOfService.Service),function(e,s){void 0!==s.ProductDetail&&(o=Komodo.Models.ManageViewingGridModel.create(),o.set("smartCardNumber",a.LinkedSmartcard?a.LinkedSmartcard:"-"),o.set("deviceNumber",a.SerialNumber?a.SerialNumber:"-"),o.set("applyStyleForPrin",!1),o.set("applyStyleForAddOn",!1),"PRINCIPAL"===s.ProductDetail.Type.toUpperCase()&&(o.set("prinPckName",s.ProductDetail.Description),o.set("prinPckStatus",s.Status),o.set("addOnPckName","-"),o.set("addOnPckStatus","-"),o.set("insuranceServices","-"),o.set("insuranceServicesStatus","-"),o.set("applyStyleForPrin",!0)),$.inArray(s.ProductDetail.Type.toUpperCase(),t.arrayOfProductTypes)>-1&&(o.set("addOnPckName",s.ProductDetail.Description),o.set("addOnPckStatus",s.Status),o.set("prinPckName","-"),o.set("prinPckStatus","-"),o.set("insuranceServices","-"),o.set("insuranceServicesStatus","-"),o.set("applyStyleForAddOn",!0)),"INSURANCE"!==s.ProductDetail.Type.toUpperCase()&&r.addObject(o))}),a.InsuranceStatus&&"TRUE"===a.InsuranceStatus.toUpperCase()&&a.InsuranceDetail&&(o=Komodo.Models.ManageViewingGridModel.create(),o.set("smartCardNumber",a.LinkedSmartcard?a.LinkedSmartcard:"-"),o.set("deviceNumber",a.SerialNumber?a.SerialNumber:"-"),o.set("applyStyleForPrin",!1),o.set("applyStyleForAddOn",!1),o.set("prinPckName","-"),o.set("prinPckStatus","-"),o.set("addOnPckName","-"),o.set("addOnPckStatus","-"),o.set("insuranceServices",a.InsuranceDetail.Name),o.set("insuranceServicesStatus",a.InsuranceDetail.Status),r.addObject(o)),r.length<1&&(a.LinkedSmartcard||a.SerialNumber)&&(o=Komodo.Models.ManageViewingGridModel.create(),o.set("smartCardNumber",a.LinkedSmartcard?a.LinkedSmartcard:"-"),o.set("deviceNumber",a.SerialNumber?a.SerialNumber:"-"),o.set("applyStyleForPrin",!1),o.set("applyStyleForAddOn",!1),o.set("prinPckName","-"),o.set("prinPckStatus","-"),o.set("addOnPckName","-"),o.set("addOnPckStatus","-"),o.set("insuranceServices","-"),o.set("insuranceServicesStatus","-"),r.addObject(o)),$.merge(s,r.sort(function(e,t){return e.smartCardNumber===t.smartCardNumber&&e.prinPckName>t.prinPckName?-1:e.smartCardNumber===t.smartCardNumber&&e.prinPckName<t.prinPckName?1:0}))}}),t.viewModel.set("selectedproductData",s),t.set("productDeviceData",s),void 0!==t.viewModel.selectedproductData&&t.viewModel.selectedproductData.length>0&&t.set("isDevicesVisible",!0)}e.ListOfAddress&&e.ListOfAddress.Address&&e.ListOfAddress.Address.length>0&&(a=e.ListOfAddress.Address[0]),a&&t.viewModel.set("agreementAddressString",t.getAddressString(a)),t.set("showDetails",!0)},getAddressString:function(e){var t=this,a="";if(e){void 0!==e.HouseNumber&&null!==e.HouseNumber&&""!==$.trim(e.HouseNumber)&&(a+=$.trim(e.HouseNumber)+", "),void 0!==e.BuildingName&&null!==e.BuildingName&&""!==$.trim(e.BuildingName)&&(a+=$.trim(e.BuildingName)+", "),void 0!==e.Street&&null!==e.Street&&""!==$.trim(e.Street)&&(a+=$.trim(e.Street)+", "),void 0!==e.PostBoxNumber&&null!==e.PostBoxNumber&&""!==$.trim(e.PostBoxNumber)&&(a+=$.trim(e.PostBoxNumber)+", ");var o=t.getCitySuburbText(e.Country,e.Province,e.City,e.Suburb);o&&void 0!==o.Suburb&&null!==o.Suburb&&""!==$.trim(o.Suburb)&&(a+=$.trim(o.Suburb)+", "),o&&void 0!==o.City&&null!==o.City&&""!==$.trim(o.City)&&(a+=$.trim(o.City)+", ");var s=$.grep($.makeArray(t.countries),function(t){return t.CanonicalKey.toUpperCase()===e.Country.toUpperCase()});if(s.length>0){var r=$.grep($.makeArray(s[0].Provinces.Province),function(t){return t.CanonicalKey.toUpperCase()===e.Province.toUpperCase()});r.length>0&&(a+=$.trim(r[0].CanonicalValue)+", "),a+=$.trim(s[0].CanonicalValue)+", "}void 0!==e.PostCode&&null!==e.PostCode&&""!==$.trim(e.PostCode)&&(a+=$.trim(e.PostCode)+", "),a=$.trim(a).replace(/^,|,$/g,"")}return a},getCitySuburbText:function(e,t,a,o){var s=this;if(e&&t&&a&&o){a=s.capitaliseFirstLetter(a),o=s.capitaliseFirstLetter(o);var r=$.grep($.makeArray(s.countries),function(t){return t.CanonicalKey.toUpperCase()===e.toUpperCase()});if(r.length>0){var n=$.grep($.makeArray(r[0].Provinces.Province),function(e){return e.CanonicalKey.toUpperCase()===t.toUpperCase()});if(n.length>0&&n[0].Cities&&n[0].Cities.City){var i=$.grep($.makeArray(n[0].Cities.City),function(e){return e.CanonicalValue.toUpperCase()===a.toUpperCase()});if(i.length>0&&(a=i[0].CanonicalValue,i[0].Suburbs&&i[0].Suburbs.Suburb)){var c=$.grep($.makeArray(i[0].Suburbs.Suburb),function(e){return e.CanonicalValue.toUpperCase()===o.toUpperCase()});c.length>0&&(o=c[0].CanonicalValue)}}}}return{City:a,Suburb:o}},capitaliseFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.toLowerCase().slice(1)},getCurrentProcessID:function(){var e=this.get("processId");return e||(this.startNewProcess(),e=this.get("processId")),e},getNewProcessID:function(){this.startNewProcess()},showBusyIndicator:function(e){e||(e=this.get("processId")),Komodo.Services.busyService.start(!0,e,Komodo.Services.busyIndicatorTypes.Busy,1e4,"blocking",this)},hideBusyIndicator:function(e){e||(e=this.get("processId")),Komodo.Services.busyService.stop(e,"blocking")},establishmentNameChanged:function(){var e=this;e.clearAgreementData(),e.viewModel.viewingLocations.clear(),e.viewModel.set("viewingLocation",void 0),$.each(e.viewModel.accounts,function(t,a){void 0!==a.ListOfAgreement&&void 0!==a.ListOfAgreement.Agreement&&$.each(a.ListOfAgreement.Agreement,function(t,o){o.Name===e.viewModel.establishmentName&&(e.viewModel.viewingLocations.addObject(o.LocationIndicator),e.viewModel.set("paymentGroup",a))})}),void 0!==e.viewModel.establishmentName&&null!==e.viewModel.establishmentName&&void 0!==e.viewingLocation&&null!==e.viewingLocation&&(e.viewModel.set("viewingLocation",e.viewingLocation),e.set("viewingLocation",void 0))}.observes("viewModel.establishmentName"),viewingLocationChanged:function(){var e=this;e.clearAgreementData(),$.each(e.viewModel.accounts,function(t,a){void 0!==a.ListOfAgreement&&void 0!==a.ListOfAgreement.Agreement&&$.each(a.ListOfAgreement.Agreement,function(t,o){return o.Name!==e.viewModel.establishmentName||o.LocationIndicator!==e.viewModel.viewingLocation||(e.getAgreementDetails(a,o),!1)})})}.observes("viewModel.viewingLocation"),collapsibleEditInfoLinks:function(){return[{href:"#/commercialEditViewing",title:kl.value(this._commercialLocaleBase+"addDevicesAndPackages.edit")}]}.property(),actions:{editDeviceInformation:function(e){var t=this,a=e._parentView.get("content");void 0!==a&&void 0!==t.selectedAgreement&&void 0!==t.selectedAgreement.ListOfHardware&&void 0!==t.selectedAgreement.ListOfHardware.Hardware&&$.each($.makeArray(t.selectedAgreement.ListOfHardware.Hardware),function(e,o){if(o.SerialNumber===a.deviceNumber&&o.LinkedSmartcard===a.smartCardNumber){var s=o.ProductDetail&&o.ProductDetail.ProductFeatures?o.ProductDetail.ProductFeatures.Description:"",r=o.SerialNumber,n=o.SmartcardDetail?o.SmartcardDetail.Type:"",i=o.LinkedSmartcard,c=o.ProductDetail?o.ProductDetail.Type:"",l="";if(void 0!==o.ProductDetail&&void 0!==o.ProductDetail.Model){var d=o.ProductDetail.Model.split(" ");d&&d.length>0&&(l=d[0])}
Komodo.Services.uiService.getController("commercialAddProducts").setData(t.viewModel.paymentGroup,t.viewModel.establishmentName,t.viewModel.viewingLocation,l,s,r,n,i,c),Komodo.Services.uiService.getRoute("application").transitionTo("commercialAddProducts")}})},viewDeviceInformation:function(e){var t=this,a=e._parentView.get("content");if(a&&t.selectedAgreement&&t.viewModel&&t.viewModel.get("paymentGroup")){var o=Komodo.Services.uiService.getController("commercialDeviceInfo");o.set("customerNo",t.get("customerNo")),o.set("accountId",t.viewModel.get("paymentGroup").UID),o.set("agreementId",t.selectedAgreement.UID),o.set("deviceId",a.deviceNumber),o.set("smartCardNumber",a.smartCardNumber),o.set("establishmentName",t.viewModel.establishmentName),o.set("viewingLocation",t.viewModel.viewingLocation),o.set("accounts",t.viewModel.accounts),Komodo.Services.uiService.getRoute("application").transitionTo("commercialDeviceInfo")}},findDeviceSmartcard:function(){var e=this,t=e.get("validators.searchDeviceTextValidator");if(t.validate(),t.errors&&t.errors.length>0){var a=kl.value("controller.invalidDataMessage")+"<br />"+t.errors[0];Komodo.Controls.MessageBoxController.show(kl.value(e._viewingLocaleBase+"commercial.manageViewTitle"),a,Komodo.Controls.MessageBoxOkButtons,this,"idSearchDeviceTextValidator","warning")}else e.findDeviceSmartcard()},findAgreementDeviceSmartcard:function(){var e=this,t=e.get("validators.searchAgreementDeviceTextValidator");if(t.validate(),t.errors&&t.errors.length>0){var a=kl.value("controller.invalidDataMessage")+"<br />"+t.errors[0];Komodo.Controls.MessageBoxController.show(kl.value(e._viewingLocaleBase+"commercial.manageViewTitle"),a,Komodo.Controls.MessageBoxOkButtons,this,"idSearchAgreementDeviceTextValidator","warning")}else e.findAgreementDeviceSmartcard()}},retrieveCustomerProfile:function(e){var t=this;t.viewModel.accounts.clear();var a=Komodo.Services.customerProfileService.getCustomerProfile();a&&a.ResponseMessage&&a.ResponseMessage.Payload&&a.ResponseMessage.Payload.ListOfAccount&&a.ResponseMessage.Payload.ListOfAccount.Account&&$.each(a.ResponseMessage.Payload.ListOfAccount.Account,function(e,a){t.viewModel.accounts.addObject(a)})},arrayOfProductTypes:[],commercialClassId:[Komodo.CustomerClass.COMMERCIAL,Komodo.CustomerClass.NATIONAL_DEAL],customerAgreementTypes:[],showDetails:!1,country:void 0,isDevicesVisible:!1,isInsuranceAvailable:!1,dateFormat:"DD-MM-YYYY",productDeviceData:[],virtualProductDataPageContent:Ember.A(),chargePeriods:[Komodo.ChargePeriodCollection.MONTHLY,Komodo.ChargePeriodCollection.ANNUALLY],countries:[]}),Komodo.Application.ConfirmSwapView=Komodo.UI.View.extend({viewKey:"ConfirmSwapView",templateName:"ConfirmSwapView"}),Komodo.Application.QuoteDetailView=Komodo.UI.View.extend({viewKey:"QuoteDetailView",templateName:"QuoteDetailView"}),Komodo.Application.CreateRepairsOrderOverrideView=Komodo.UI.View.extend({viewKey:"CreateRepairsOrderOverrideView",templateName:"CreateRepairsOrderOverrideView"}),Komodo.Application.SwapMaterialAvailabilityOverrideView=Komodo.UI.View.extend({viewKey:"SwapMaterialAvailabilityOverrideView",templateName:"SwapMaterialAvailabilityOverrideView"}),Komodo.Application.CreateRepairsOrderView=Komodo.UI.View.extend({viewKey:"CreateRepairsOrderView"}),Komodo.Application.PreRepairPopupView=Komodo.UI.View.extend({viewKey:"PreRepairPopupView",templateName:"PreRepairPopupView"}),Komodo.Application.CsiAllLogDetailsView=Komodo.UI.View.extend({viewKey:"CsiAllLogDetailsView",templateName:"CsiAllLogDetailsView"}),Komodo.Application.ViewScheduledChangesView=Komodo.UI.View.extend({viewKey:"ViewScheduledChangesView",templateName:"ViewScheduledChangesView"}),Komodo.Application.CsiDeviceInfoView=Komodo.UI.View.extend({viewKey:"CsiDeviceInfoView",templateName:"CsiDeviceInfoView"}),Komodo.Application.PerformSwapView=Komodo.UI.View.extend({viewKey:"PerformSwapView",templateName:"PerformSwapView"}),Komodo.Application.CsiDisconnectView=Komodo.UI.View.extend({viewKey:"CsiDisconnectView",templateName:"CsiDisconnectView"}),Komodo.Application.SetToStolenView=Komodo.UI.View.extend({viewKey:"SetToStolenView",templateName:"SetToStolenView"}),Komodo.Application.CsiEditViewingView=Komodo.UI.View.extend({viewKey:"CsiEditViewingView"}),Komodo.Application.SwapMaterialAvailabilityView=Komodo.UI.View.extend({viewKey:"SwapMaterialAvailabilityView",templateName:"SwapMaterialAvailabilityView"}),Komodo.Application.CsiErrorCodesView=Komodo.UI.View.extend({viewKey:"CsiErrorCodesView"}),Komodo.Application.ManageViewingController=Komodo.UI.Controller.extend({localeGeneral:"locale.manageviewing:general.",columnHeaders:"locale.manageviewing:viewingGridColumnHeaders.",provinces:[],init:function(){this.set("helperFunction",Komodo.Services.ProductAndServiceMaintenanceHelper.create()),this.set("gridData",[]),this.set("isDeviceOrPackageExist",!1),this.set("isGridDataAvailable",!1),this.set("principalPkgList",[]),this.set("principalStatusList",[]),this.set("startDate",""),this.set("endDate",""),this.set("viewingPeriod",[]),this.set("isFilteredDataAvailable",!1),this.set("isTablePagerVisible",!1),this.set("currentprinPkgName",""),this.set("currentprinPkgStatus",""),this.set("boxofficeAccount",[]),this.subscribeFinancialAccountsForManageViewingRetrievedReceived(),this.subscribeFinancialAccountsForManageViewingErrorReceived(),this._super(),this.set("loggedInCountryName",""),this.getLoggedIncountry(),this.set("chargePeriods",[]),this.getLookUpData()},start:function(){if(this.set("helperFunction",Komodo.Services.ProductAndServiceMaintenanceHelper.create()),this.registerModel("manageViewingGridModel",Komodo.Models.ManageViewingGridModel),!this.helperFunction.isCustomerIdIsAvailableToRetriveData())return Komodo.Controls.MessageBoxController.show(kl.value(this.localeGeneral+"customerNotFoundPopupTitle"),kl.value(this.localeGeneral+"customerNotFoundPopupMessage")),void this.transitionToRoute("/manageViewing");Komodo.Services.uiService.getController("customerProfileContainer").getPotentialOffers();var e=Komodo.Services.customerProfileService.getCustomerPersonalDetail();if(void 0!==e){if("commercial"===e.customerClass.toLowerCase()||"1"===e.customerClass||"national deal"===e.customerClass.toLowerCase()||"9"===e.customerClass)return void Komodo.Services.uiService.transitionTo("commercialManageViewing");if("csi"===e.customerClass.toLowerCase()||"4"===e.customerClass)return void Komodo.Services.uiService.transitionTo("csiManageViewing")}var t=this.helperFunction.getCustomerIdToRetrieveData(),a=Komodo.Application.ManageViewingSharedObjectController.create();this.getNewProcessID(),this.showBlockingBusyIndicator(),this.checkHHforSA(),this.checkAgreementforSA(),a.retrieveFinancialAccountsForManageViewing(t),Komodo.Services.navigationService.activateGroup(Komodo.NavigationGroupNames.ManageViewing),this._super()},stop:function(){this.set("gridData",[]),this.set("principalPkgList",[]),this.set("principalStatusList",[]),this.set("startDate",""),this.set("endDate",""),this.set("viewingPeriod",[]),this.set("isFilteredDataAvailable",!1),this.set("isTablePagerVisible",!1),this.set("currentprinPkgName",""),this.set("currentprinPkgStatus",""),this.set("boxofficeAccount",[]),this.set("isSAHolidayHome",!1),this._super()},checkHHforSA:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("ManageViewing","isHHPrepaidSA").done(function(t){e.set("isSAHolidayHome",!!t)}).fail(function(t){e.set("isSAHolidayHome",!1)})},checkAgreementforSA:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("manageViewing","IsDisableChargePeriod").done(function(t){e.set("isDisableChargePeriod",!!t)}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)})},principalPackageChanged:function(){currentprinPkgName=this.get("manageViewingGridModel.prinPckName"),currentprinPkgStatus=this.get("manageViewingGridModel.prinPckStatus"),this.filterGrid()}.observes("manageViewingGridModel.prinPckName"),principalStatusChanged:function(){currentprinPkgName=this.get("manageViewingGridModel.prinPckName"),currentprinPkgStatus=this.get("manageViewingGridModel.prinPckStatus"),this.filterGrid()}.observes("manageViewingGridModel.prinPckStatus"),getManageViewingController:function(){return Komodo.Services.uiService.getController("manageViewing")},subscribeFinancialAccountsForManageViewingRetrievedReceived:function(){var e=this;Komodo.Services.eventAggregator.subscribe("FinancialAccountsForManageViewingRetrievedReceived",function(){var t=e.getManageViewingController();t&&(t.hideBusyIndicator(),t.bindPrincipalPackagesAndPrincipalStatus(),t.bindViewingGrid())})},subscribeFinancialAccountsForManageViewingErrorReceived:function(){var e=this;Komodo.Services.eventAggregator.subscribe("FinancialAccountsForManageViewingErrorReceived",function(){var t=e.getManageViewingController();t&&(t.hideBusyIndicator(),e.set("gridData",[]),0===e.get("gridData").length?(e.set("isDeviceOrPackageExist",!0),e.set("isGridDataAvailable",!1)):(e.set("isDeviceOrPackageExist",!1),e.set("isGridDataAvailable",!0)))})},bindViewingGrid:function(){var e=this;e.set("gridData",[]);var t=Komodo.Services.customerProfileService.currentFinancialAccounts;if(t){for(var a=t.ResponseMessage.Payload.ListOfAccount,o=e.helperFunction.createArrayForSingleElement(a.Account),s=0;s<o.length;s++)if(o[s]){var r=e.helperFunction.createArrayForSingleElement(o[s].ListOfAgreement.Agreement),n=o[s].UID;if(r)for(var i=0;i<r.length;i++)e.mapAgreementInformation(r[i],n,o[s].AccountTypeDescription)}e.updateBoxOfficeInformation()}0===this.get("gridData").length?(this.set("isDeviceOrPackageExist",!0),this.set("isGridDataAvailable",!1)):(this.set("isDeviceOrPackageExist",!1),this.set("isGridDataAvailable",!0))},mapAgreementInformation:function(e,t,a){var o=this,s=o.helperFunction.createArrayForSingleElement(e);if(s)for(var r=0;r<s.length;r++)void 0!==s[r].ListOfHardware&&void 0!==s[r].ListOfHardware.Hardware&&o.mapHardwareDetails(s[r].ListOfHardware.Hardware,s[r].UID,t,s[r].Type,s[r].TermOfPayment,a)},mapHardwareDetails:function(e,t,a,o,s,r){var n=this,i=n.helperFunction.createArrayForSingleElement(e),c=!1;if(null!==i)for(var l=0;l<i.length;l++)if(((!Ember.isEmpty(i[l].LinkedSmartcard)||!Ember.isEmpty(i[l].SerialNumber))&&!Ember.isEmpty(i[l].ListOfService)&&void 0!=i[l].ListOfService.Service||!Ember.isEmpty(o)&&o===Komodo.AgreementTypes.SHOWMAX)&&(n.collectServiceDetails(i[l].ListOfService.Service,i[l],i,t,a,!1,o,s,c),i[l].SecondaryHardware.Hardware.length>0)){i[l].SecondaryHardware.Hardware.length>1&&(c=!0);for(var d=0;d<i[l].SecondaryHardware.Hardware.length;d++)1===d&&(c=!1),"box office"!==r.toLowerCase()?n.collectServiceDetails(i[l].SecondaryHardware.Hardware[d].ListOfService.Service,i[l].SecondaryHardware.Hardware[d],i,t,a,!0,o,s,c):"box office"===r.toLowerCase()&&i[l].SecondaryHardware.Hardware[d].ListOfService.Service.length>0&&n.collectServiceDetails(i[l].SecondaryHardware.Hardware[d].ListOfService.Service,i[l].SecondaryHardware.Hardware[d],i,t,a,!0,o,s,c)}},getAgreementChargePeriodFromLookUp:function(e){var t=this,a="",o=t.get("chargePeriods");if(!Ember.isEmpty(o))for(var s=0;s<o.length;s++)if(e.trim()===o[s].key.trim()){a=o[s].value;break}return a},getLookUpData:function(){var e=this;Komodo.Services.cachedDataService.fetch("InvoicePeriod",{}).done(function(t){$.each(t,function(t,a){"NONE"!==a.value.toUpperCase()&&e.get("chargePeriods").addObject(a)})}).fail(function(){Komodo.error("[ERROR] : could not retrieve InvoicePeriod domain = "+quoteCountry+"/ qualifier = "+language)})},collectServiceDetails:function(e,t,a,o,s,r,n,i,c){var l=this;void 0!==i&&null!==i&&(i=l.getAgreementChargePeriodFromLookUp(i));var d=l.helperFunction.createArrayForSingleElement(e);l.set("isFilteredDataAvailable",!0);var u=d.filter(function(e){return"principal"===e.ProductDetail.Type.toString().toLowerCase()})[0];if(u&&u.length>1)var h=$.makeArray(u.sort(function(e,t){return new Date(t.ChargeUntilDate)-new Date(e.ChargeUntilDate)})),m=$.makeArray(h[0]);else m=$.makeArray(u);h&&h.length>1&&$.each(h,function(e,t){"Active"===t.Status&&0!==e&&m.addObject(t)});var g=d.filter(function(e){return"freetoair"===e.ProductDetail.Type.toString().toLowerCase()});g&&g.length>1&&(g=$.makeArray(g.sort(function(e,t){return new Date(t.ChargeUntilDate)-new Date(e.ChargeUntilDate)})));var p=d.filter(function(e){return"insurance"===e.ProductDetail.Type.toString().toLowerCase()});p&&p.length>1&&(p=$.makeArray(p)[0]);var v=d.filter(function(e){return e.ProductDetail.Type.toString().toUpperCase()===GetClarityConstants("ManageViewingConstants","productsConstants.productType.thirdParty").toString()&&e.ProductDetail.UID===GetClarityConstants("ManageViewingConstants","productsConstants.products.showMax").toString()}),f=d.filter(function(e){return"principal"===e.ProductDetail.Type.toString().toLowerCase()&&("boxoffice"===e.ProductDetail.Name.toString().toLowerCase()||"bo"===e.ProductDetail.Name.toString().toLowerCase()||"pcbo"===e.ProductDetail.Name.toString().toLowerCase())});if(f.length>0)if(l.boxofficeAccount.length>0){var b=l.boxofficeAccount.filter(function(e){return e.Key===t.LinkedSmartcard});0===b.length&&l.boxofficeAccount.push({Key:t.LinkedSmartcard,Value:f[0].Status})}else l.boxofficeAccount.push({Key:t.LinkedSmartcard,Value:f[0].Status});else if(n===Komodo.AgreementTypes.SHOWMAX&&v.length>0)l.addRowInViewingGridForShowMaxProducts(s,o,v);else{var C=d.filter(function(e){return"addon"===e.ProductDetail.Type.toString().toLowerCase()||"high definition addon"===e.ProductDetail.Type.toString().toLowerCase()||"hd add-ons"===e.ProductDetail.Type.toString().toLowerCase()||"free to air add-on"===e.ProductDetail.Type.toString().toLowerCase()});if(C&&C.length>1){var S=$.makeArray(C.sort(function(e,t){return new Date(t.ChargeUntilDate)-new Date(e.ChargeUntilDate)}));S&&S.length>1&&(S=$.makeArray(S.sort(function(e,t){return new Date(t.ActivationDate)-new Date(e.ActivationDate)})));var D=$.makeArray(S)}else D=$.makeArray(C);Komodo.Services.featureToggleService.isEnabled("ManageViewing","DisplayInactiveAddons").done(function(e){e&&D&&D.length>1&&$.each(D,function(e,t){t.Status!==Komodo.ProductStatusCollection.Active.value&&0!==e&&D.removeObject(t)})}).fail(function(e){Komodo.Services.log("Error while checking feature toggle. Error Details:"+e)});var y=d.filter(function(e){return"access"===e.ProductDetail.Type.toString().toLowerCase()});if(y&&y.length>1)var w=$.makeArray(y.sort(function(e,t){return new Date(t.ChargeUntilDate)-new Date(e.ChargeUntilDate)})),I=$.makeArray(w[0]);else I=$.makeArray(y);y&&y.length>1&&$.each(y,function(e,t){"Active"===t.Status&&0!==e&&I.addObject(t)});var x=d.filter(function(e){return"decoder payment plan"===e.ProductDetail.Type.toString().toLowerCase()});if(x&&x.length>1)var M=$.makeArray(x.sort(function(e,t){return new Date(t.ChargeUntilDate)-new Date(e.ChargeUntilDate)})),T=$.makeArray(M[0]);else T=$.makeArray(x);x&&x.length>1&&$.each(x,function(e,t){"Active"===t.Status&&0!==e&&T.addObject(t)}),l.boxofficeAccount.length>0&&l.boxofficeAccount.filter(function(e){return e.Key&&e.Key.toString().toLowerCase()===t.LinkedSmartcard.toString().toLowerCase()});var N=Komodo.Models.ManageViewingGridModel.create();if(N.set("accountNumber",""===s?"-":s),N.set("agreementNumber",""===o?"-":o),N.set("agreementType",""===n?"-":n),N.set("isHolidayHome","13"===n),N.set("agreementChargePeriod",""===i?"-":i),""!==t.LinkedSmartcard&&null!==t.LinkedSmartcard&&void 0!==t.LinkedSmartcard&&""!==t.SerialNumber&&null!==t.SerialNumber&&void 0!==t.SerialNumber?(N.set("deviceNumber",t.SerialNumber),N.set("smartCardNumber","- "+t.LinkedSmartcard)):""!==t.SerialNumber&&null!==t.SerialNumber&&void 0!==t.SerialNumber?N.set("deviceNumber",t.SerialNumber):""!==t.LinkedSmartcard&&null!==t.LinkedSmartcard&&void 0!==t.LinkedSmartcard?N.set("smartCardNumber",t.LinkedSmartcard):N.set("deviceNumber","-"),N.set("linkedSmartCardNumber",l.checkEmptyAndReplace(t.LinkedSmartcard)),t.ProductDetail&&t.ProductDetail.ProductFeatures&&t.ProductDetail.ProductFeatures.length>0){for(var P=0;P<t.ProductDetail.ProductFeatures.length;P++)if("devicemodeldescription"===t.ProductDetail.ProductFeatures[P].Description.toString().toLowerCase()){N.set("deviceName",l.checkEmptyAndReplace(t.ProductDetail.ProductFeatures[P].Value));break}}else N.set("deviceName",l.checkEmptyAndReplace(t.ProductDetail.Model));if(N.set("smartcardName",t.SmartcardDetail?l.checkEmptyAndReplace(t.SmartcardDetail.Name):"-"),N.set("smartcardStatus",l.checkEmptyAndReplace(t.LinkedSmartcardStatus)),N.set("deviceStatus",l.checkEmptyAndReplace(t.Status)),N.set("MACAddress",l.checkEmptyAndReplace(t.MACAddress)),N.set("prinPckName","-"),N.set("prinPckStatus","-"),m&&m.length>0){m&&m.length>1?m.map(function(e){null!==e.ProductDetail||void 0!==e.ProductDetail?(N.set("prinPckName",""),N.set("prinPckStatus",""),N.get("principalPackageNames").push(e.ProductDetail.Description),N.get("principalPackageStatus").push(e.Status),N.get("chargeUntilDate").push(l.getformatedDateforUI(new Date(e.ChargeUntilDate))),N.get("quoteBasedDisconnectDate").push(l.getFormattedQBD(e.QuotebasedDisconnectDate))):(N.set("prinPckName",""),N.set("prinPckStatus",""),N.set("chargePeriod",""))}):(N.set("prinPckName",m[0].ProductDetail?l.checkEmptyAndReplace(m[0].ProductDetail.Description):"-"),N.set("prinPckStatus",l.checkEmptyAndReplace(m[0].Status)),N.get("chargeUntilDate").push(l.checkEmptyAndReplace(l.getformatedDateforUI(new Date(m[0].ChargeUntilDate)))),N.get("quoteBasedDisconnectDate").push(l.checkEmptyAndReplace(l.getFormattedQBD(m[0].QuotebasedDisconnectDate))));for(var O=GetClarityConstants("ManageViewingConstants","manageViewingConstants.deviceInfo.gotvFreeProductForChargePeriod"),B=0;B<m.length;B++){!Ember.isEmpty(O)&&O.contains(m[B].ProductDetail.Name.toString())?N.set("gotvopenchargePeriod",l.checkEmptyAndReplace(m[B].ChargePeriod.toString())):N.set("chargePeriod",l.checkEmptyAndReplace(m[B].ChargePeriod.toString()));var R=Komodo.ManageViewingContants.disableDPPProduct;if(R&&R.length>0&&m[B].ProductDetail&&m[B].ProductDetail.Name)for(var k=0;k<R.length;k++)if(m[B].ProductDetail.Name.toString().toLowerCase()===R[k].toString().toLowerCase()){N.set("chargePeriod","-");break}}}else N.set("chargePeriod","-"),N.set("prinPckName","-"),N.set("prinPckStatus","-");if(g&&g.length>0&&("-"===N.get("prinPckName")&&(N.set("prinPckName",""),N.set("prinPckStatus",""),N.set("chargePeriod",l.checkEmptyAndReplace(g[0].ChargePeriod)),N.get("chargeUntilDate").push(l.checkEmptyAndReplace(l.getformatedDateforUI(new Date(g[0].ChargeUntilDate)))),N.get("quoteBasedDisconnectDate").push(l.checkEmptyAndReplace(l.getFormattedQBD(g[0].QuotebasedDisconnectDate)))),N.set("freeViewPckName",[]),N.set("freeViewPckStatus",[]),g.map(function(e){Ember.isEmpty(e.ProductDetail)||(N.get("freeViewPckName").pushObject(e.ProductDetail?l.checkEmptyAndReplace(e.ProductDetail.Description):"-"),N.get("freeViewPckStatus").pushObject(l.checkEmptyAndReplace(e.Status)))})),0!==t.SecondaryHardware.Hardware.length||!0===r?(N.set("xtraviewService","XtraView"),m&&m.length>0?N.set("xtraviewServiceStatus",l.checkEmptyAndReplace(m[0].Status)):N.set("xtraviewServiceStatus","-")):(N.set("xtraviewService","-"),N.set("xtraviewServiceStatus","-")),t.SecondaryHardware.Hardware.length>0&&!1===r?N.set("isXtraviewService",!0):N.set("isXtraviewService",!1),!0===c&&N.set("isSecondaryXtraviewService",!0),N.set("isXtraviewServiceForSecondaryDevice",r),N.set("boxOffice","-"),N.set("boxOfficeStatus","-"),N.set("showMax",""),N.set("showMaxStatus",""),N.set("addOnPckName","-"),N.set("addOnPckStatus","-"),D&&D.length>0?D.map(function(e){null!==e.ProductDetail||void 0!==e.ProductDetail?(N.set("addOnPckName",""),N.set("addOnPckStatus",""),N.get("addOnPackageNames").push(e.ProductDetail.Description),N.get("addOnPackageStatus").push(e.Status)):(N.set("addOnPckName",""),N.set("addOnPckStatus","")),0===N.get("chargeUntilDate").length&&N.get("chargeUntilDate").push(l.checkEmptyAndReplace(l.getformatedDateforUI(new Date(e.ChargeUntilDate)))),"-"===N.get("chargePeriod")&&N.set("chargePeriod",l.checkEmptyAndReplace(e.ChargePeriod)),"-"===N.get("prinPckName")&&""===N.get("freeViewPckName")?N.get("quoteBasedDisconnectDate").push(l.getFormattedQBD(e.QuotebasedDisconnectDate)):""===N.get("prinPckName")&&"-"===N.get("freeViewPckName")&&N.get("quoteBasedDisconnectDate").push(l.getFormattedQBD(e.QuotebasedDisconnectDate))}):(N.set("addOnPckName","-"),N.set("addOnPckStatus","-")),T&&T.length>0?T.map(function(e){null!==e.ProductDetail||void 0!==e.ProductDetail?(N.set("DPP24Service",""),N.set("DPP24ServiceStatus",""),N.get("DPP24ServiceNames").push(e.ProductDetail.Description),N.get("DPP24ServiceStatusAll").push(l.checkEmptyAndReplace(e.Status)),"-"===N.get("chargeUntilDate")&&N.get("chargeUntilDate").push(l.checkEmptyAndReplace(l.getformatedDateforUI(new Date(e.ChargeUntilDate)))),"-"===N.get("chargePeriod")&&N.set("chargePeriod",l.checkEmptyAndReplace(e.ChargePeriod)),"-"===N.get("prinPckName")&&""===N.get("freeViewPckName")?N.get("quoteBasedDisconnectDate").push(l.getFormattedQBD(e.QuotebasedDisconnectDate)):""===N.get("prinPckName")&&"-"===N.get("freeViewPckName")&&N.get("quoteBasedDisconnectDate").push(l.getFormattedQBD(e.QuotebasedDisconnectDate))):(N.set("DPP24Service",""),N.set("DPP24ServiceStatus",""))}):(N.set("DPP24Service","-"),N.set("DPP24ServiceStatus","-")),I&&I.length>0?I.map(function(e){null!==e.ProductDetail||void 0!==e.ProductDetail?(N.set("accessService",""),N.set("accessServiceStatus",""),N.get("accessServiceNames").push(e.ProductDetail.Description),N.get("accessServiceStatusAll").push(l.checkEmptyAndReplace(e.Status)),0===N.get("chargeUntilDate").length&&N.get("chargeUntilDate").push(l.checkEmptyAndReplace(l.getformatedDateforUI(new Date(e.ChargeUntilDate)))),"-"===N.get("chargePeriod")&&N.set("chargePeriod",l.checkEmptyAndReplace(e.ChargePeriod)),"-"===N.get("prinPckName")&&""===N.get("freeViewPckName")?N.get("quoteBasedDisconnectDate").push(l.getFormattedQBD(e.QuotebasedDisconnectDate)):""===N.get("prinPckName")&&"-"===N.get("freeViewPckName")&&N.get("quoteBasedDisconnectDate").push(l.getFormattedQBD(e.QuotebasedDisconnectDate))):(N.set("accessService",""),N.set("accessServiceStatus",""))}):(N.set("accessService","-"),N.set("accessServiceStatus","-")),"True"===t.InsuranceStatus&&null!==t.InsuranceDetail?(N.set("insuranceServices","Insurance"),N.set("insuranceServicesStatus",l.checkEmptyAndReplace(t.InsuranceDetail.Status)),p&&p.length>0&&("-"===N.get("chargePeriod")&&N.set("chargePeriod",l.checkEmptyAndReplace(p[0].ChargePeriod.toString())),0===N.get("chargeUntilDate").length&&N.get("chargeUntilDate").push(l.checkEmptyAndReplace(l.getformatedDateforUI(new Date(p[0].ChargeUntilDate)))),0===N.get("quoteBasedDisconnectDate").length&&N.get("quoteBasedDisconnectDate").push(l.checkEmptyAndReplace(l.getFormattedQBD(p[0].QuotebasedDisconnectDate))))):(N.set("insuranceServices","-"),N.set("insuranceServicesStatus","-")),l.set("viewingPeriod",[]),m&&m.length>0)for(var A=0;A<m.length;A++)"0001-01-01T00:00:00"===m[A].NewChargeUntilDate&&"0001-01-01T00:00:00"===m[A].PreviousChargeUntilDate||N.get("viewingPeriod").push(XDates.getDateFromJavascriptDate(new Date(m[A].PreviousChargeUntilDate))+" to "+XDates.getDateFromJavascriptDate(new Date(m[A].NewChargeUntilDate)));else D&&D.length>0?"0001-01-01T00:00:00"===D[0].NewChargeUntilDate&&"0001-01-01T00:00:00"===D[0].PreviousChargeUntilDate||l.get("viewingPeriod").push(XDates.getDateFromJavascriptDate(new Date(D[0].PreviousChargeUntilDate))+" to "+XDates.getDateFromJavascriptDate(new Date(D[0].NewChargeUntilDate))):l.set("viewingPeriod",[]);N.get("isHolidayHome")&&l.get("isSAHolidayHome")&&(N.set("viewingPeriod",[]),N.get("viewingPeriod").push("-")),"-"===N.get("boxOffice")&&"-"===N.get("xtraviewService")&&"-"===N.get("accessService")&&"-"===N.get("insuranceServices")?(N.set("insuranceServices",""),N.set("boxOffice","-"),N.set("xtraviewService",""),N.set("accessService",""),N.set("DPP24Service",""),N.set("insuranceServicesStatus",""),N.set("boxOfficeStatus","-"),N.set("xtraviewServiceStatus",""),N.set("accessServiceStatus",""),N.set("DPP24ServiceStatus","")):"-"===N.get("boxOffice")&&"-"===N.get("xtraviewService")&&"-"===N.get("accessService")&&"-"===N.get("insuranceServices")||("-"===N.get("boxOffice")&&(N.set("boxOffice",""),N.set("boxOfficeStatus","")),"-"===N.get("xtraviewService")&&(N.set("xtraviewService",""),N.set("xtraviewServiceStatus","")),"-"===N.get("accessService")&&(N.set("accessService",""),N.set("accessServiceStatus","")),"-"===N.get("DPP24Service")&&(N.set("DPP24Service",""),N.set("DPP24ServiceStatus","")),"-"===N.get("insuranceServices")&&(N.set("insuranceServices",""),N.set("insuranceServicesStatus",""))),N.set("isPCBO",!1),l.get("gridData").push(N)}null!==f&&void 0!==f&&f.length>0&&null!==t&&(null!==t.LinkedSmartcard&&"-"===t.SerialNumber||null!==t.SerialNumber&&"-"===t.SerialNumber)&&l.addRowInViewingGridForBoxOfficeProducts(s,o,f)},addRowInViewingGridForBoxOfficeProducts:function(e,t,a){var o=a.map(function(a){var o=Komodo.Models.ManageViewingGridModel.create();return o.set("accountNumber",""===e?"-":e),o.set("agreementNumber",""===t?"-":t),o.set("smartCardNumber","-"),o.set("deviceName","-"),o.set("deviceNumber",""),o.set("prinPckName","-"),o.set("prinPckStatus","-"),o.set("freeViewPckName",""),o.set("freeViewPckStatus",""),o.set("insuranceServices",""),o.set("insuranceServicesStatus",""),o.set("xtraviewService",""),o.set("xtraviewServiceStatus",""),o.set("boxOffice",a.ProductDetail.Description),o.set("boxOfficeStatus",a.Status),o.set("accessService",""),o.set("accessServiceStatus",""),o.set("addOnPckName","-"),o.set("addOnPckStatus","-"),o.set("isPCBO",!0),"0001-01-01T00:00:00"!==a.NewChargeUntilDate||"0001-01-01T00:00:00"!==a.PreviousChargeUntilDate?o.get("viewingPeriod").push(XDates.getDateFromJavascriptDate(new Date(a.PreviousChargeUntilDate))+" to "+XDates.getDateFromJavascriptDate(new Date(a.NewChargeUntilDate))):o.set("viewingPeriod",[]),o});this.set("gridData",this.get("gridData").concat(o))},addRowInViewingGridForShowMaxProducts:function(e,t,a){var o=a.map(function(a){var o=Komodo.Models.ManageViewingGridModel.create();return o.set("accountNumber",""===e?"-":e),o.set("agreementNumber",""===t?"-":t),o.set("smartCardNumber","-"),o.set("deviceName","-"),o.set("deviceNumber",""),o.set("prinPckName","-"),o.set("prinPckStatus","-"),o.set("freeViewPckName",""),o.set("freeViewPckStatus",""),o.set("insuranceServices",""),o.set("insuranceServicesStatus",""),o.set("xtraviewService",""),o.set("xtraviewServiceStatus",""),o.set("boxOffice",""),o.set("boxOfficeStatus",""),o.set("accessService",""),o.set("accessServiceStatus",""),o.set("addOnPckName","-"),o.set("addOnPckStatus","-"),o.set("showMax",a.ProductDetail.Description),o.set("showMaxStatus",a.Status),o.set("isPCBO",!0),"0001-01-01T00:00:00"!==a.NewChargeUntilDate||"0001-01-01T00:00:00"!==a.PreviousChargeUntilDate?o.get("viewingPeriod").push(XDates.getDateFromJavascriptDate(new Date(a.PreviousChargeUntilDate))+" to "+XDates.getDateFromJavascriptDate(new Date(a.NewChargeUntilDate))):o.set("viewingPeriod",[]),o});this.set("gridData",this.get("gridData").concat(o))},updateBoxOfficeInformation:function(){if(this.gridData&&this.gridData.length>0&&this.boxofficeAccount&&this.boxofficeAccount.length>0){that=this;for(var e=0;e<that.gridData.length;e++){var t=that.boxofficeAccount.filter(function(t){return t.Key&&that.gridData[e].linkedSmartCardNumber&&t.Key.toString().toLowerCase()===that.gridData[e].linkedSmartCardNumber.toString().toLowerCase()});t&&t.length>0&&(that.gridData[e].boxOffice="Box Office",that.gridData[e].boxOfficeStatus=t[0].Value)}}},bindPrincipalPackagesAndPrincipalStatus:function(){var e=this;e.set("principalPkgs",[]),e.set("principalStatus",[]);var t=Komodo.Services.customerProfileService.currentFinancialAccounts;if(t)for(var a=e.helperFunction.createArrayForSingleElement(t.ResponseMessage.Payload.ListOfAccount.Account),o=0;o<a.length;o++)for(var s=e.helperFunction.createArrayForSingleElement(a[o].ListOfAgreement.Agreement),r=0;r<s.length;r++)if(void 0!==s[r].ListOfHardware&&void 0!==s[r].ListOfHardware.Hardware)for(var n=e.helperFunction.createArrayForSingleElement(s[r].ListOfHardware.Hardware),i=0;i<n.length;i++)if(n[i].ListOfService&&n[i].ListOfService.Service){var c=e.helperFunction.createArrayForSingleElement(n[i].ListOfService.Service);if(c.length>0){var l=c.filter(function(e){return"principal"===e.ProductDetail.Type.toString().toLowerCase()&&"boxoffice"!==e.ProductDetail.Name.toString().toLowerCase()}),d=l.filter(function(e){return"bo"!==e.ProductDetail.Name.toString().toLowerCase()}),u=d.filter(function(e){return"pcbo"!==e.ProductDetail.Name.toString().toLowerCase()});if(u&&u.length>0)for(var h=0;h<u.length;h++)if(e.principalPkgs.length>0){var m=e.principalPkgs.filter(function(e){return e.Key===u[h].ProductDetail.Description});0===m.length&&e.principalPkgs.push({Key:u[h].ProductDetail.Description.toString().trim(),Value:u[h].ProductDetail.Description.toString().trim()})}else e.principalPkgs.push({Key:u[h].ProductDetail.Description.toString().trim(),Value:u[h].ProductDetail.Description.toString().trim()});if(u&&u.length>0)for(var g=0;g<u.length;g++)if(e.principalStatus.length>0){var p=e.principalStatus.filter(function(e){return e.Key===u[g].Status});0===p.length&&e.principalStatus.push({Key:u[g].Status.toString().trim(),Value:u[g].Status.toString().trim()})}else e.principalStatus.push({Key:u[g].Status.toString().trim(),Value:u[g].Status.toString().trim()})}}e.set("principalPkgList",this.principalPkgs),e.set("principalStatusList",this.principalStatus)},filterGrid:function(){var e=this;if(this.bindViewingGrid(),null!==currentprinPkgName&&void 0!==currentprinPkgName&&""!==currentprinPkgName&&null!==currentprinPkgStatus&&void 0!==currentprinPkgStatus&&""!==currentprinPkgStatus){var t=e.get("gridData").filter(function(e){return(e.prinPckName||e.principalPackageNames[1])===currentprinPkgName&&(e.prinPckStatus||e.principalPackageStatus[1])===currentprinPkgStatus||(e.prinPckName||e.principalPackageNames[0])===currentprinPkgName&&(e.prinPckStatus||e.principalPackageStatus[0])===currentprinPkgStatus});e.get("gridData").clear(),e.get("gridData").addObjects(t)}else null!==currentprinPkgName&&void 0!==currentprinPkgName&&""!==currentprinPkgName||null===currentprinPkgStatus||void 0===currentprinPkgStatus||""===currentprinPkgStatus?null===currentprinPkgName||void 0===currentprinPkgName||""===currentprinPkgName||null!==currentprinPkgStatus&&void 0!==currentprinPkgStatus&&""!==currentprinPkgStatus||(t=e.get("gridData").filter(function(e){return(e.prinPckName||e.principalPackageNames[1])===currentprinPkgName||(e.prinPckName||e.principalPackageNames[0])===currentprinPkgName}),e.get("gridData").clear(),e.get("gridData").addObjects(t)):(t=e.get("gridData").filter(function(e){return(e.prinPckStatus||e.principalPackageStatus[1])===currentprinPkgStatus||(e.prinPckStatus||e.principalPackageStatus[0])===currentprinPkgStatus}),e.get("gridData").clear(),e.get("gridData").addObjects(t));0===this.get("gridData").length&&!1===this.get("isFilteredDataAvailable")?(this.set("isDeviceOrPackageExist",!0),this.set("isGridDataAvailable",!1)):0===this.get("gridData").length&&!0===this.get("isFilteredDataAvailable")?(this.set("isDeviceOrPackageExist",!1),this.set("isGridDataAvailable",!0),this.set("isTablePagerVisible",!1)):this.get("gridData").length>0&&(this.set("isDeviceOrPackageExist",!1),this.set("isGridDataAvailable",!0),this.set("isTablePagerVisible",!0))},getLoggedIncountry:function(){var e=this;Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(t){quoteCountry=t.data.countryId,language=Komodo.Services.localizationService.getCurrentLanguage(),e.set("loggedInCountryName",t.data.countryId)})},viewDeviceInformation:function(e){var t=Komodo.Services.uiService.getController("deviceInfo")
;t.set("accountId",e._parentView.templateData.keywords.item.accountNumber),t.set("agreementId",e._parentView.templateData.keywords.item.agreementNumber),t.set("agreementChargePeriod",e._parentView.templateData.keywords.item.agreementChargePeriod),t.set("isBoxOffice","Box Office"===e._parentView.templateData.keywords.item.boxOffice),t.set("isXtraview","XtraView"===e._parentView.templateData.keywords.item.xtraviewService),t.set("isInsurance","Insurance"===e._parentView.templateData.keywords.item.insuranceServices),t.set("isAccesss",!!(e._parentView.templateData.keywords.item.accessServiceNames&&e._parentView.templateData.keywords.item.accessServiceNames.length>0)),t.set("isDPP24",!!(e._parentView.templateData.keywords.item.DPP24ServiceNames&&e._parentView.templateData.keywords.item.DPP24ServiceNames.length>0)),!0===t.get("isDPP24")&&t.set("DPP24ServiceNames",e._parentView.templateData.keywords.item.DPP24ServiceNames);var a=GetClarityConstants("ManageViewingConstants","manageViewingConstants.deviceInfo.gotvFreeProductForChargePeriod");e._parentView.templateData.keywords.item.principalPackageNames.length>1?(t.set("principalServiceName",e._parentView.templateData.keywords.item.principalPackageNames),t.set("serviceStatus",e._parentView.templateData.keywords.item.principalPackageStatus),t.set("gotvopenchargePeriod",e._parentView.templateData.keywords.item.gotvopenchargePeriod)):!Ember.isEmpty(a)&&a.contains(e._parentView.templateData.keywords.item.prinPckName.toString())?(t.set("gotvopenchargePeriod",e._parentView.templateData.keywords.item.gotvopenchargePeriod),t.set("principalServiceName",[]),t.set("serviceStatus",[]),t.set("princiServiceName",e._parentView.templateData.keywords.item.prinPckName),t.set("princiserviceStatus",e._parentView.templateData.keywords.item.prinPckStatus)):""!==e._parentView.templateData.keywords.item.prinPckName?(t.set("principalServiceName",[]),t.set("serviceStatus",[]),t.set("princiServiceName",e._parentView.templateData.keywords.item.prinPckName),t.set("princiserviceStatus",e._parentView.templateData.keywords.item.prinPckStatus)):(t.set("princiServiceName",e._parentView.templateData.keywords.item.freeViewPckName),t.set("princiserviceStatus",e._parentView.templateData.keywords.item.freeViewPckStatus)),t.set("chargeUntilDate",e._parentView.templateData.keywords.item.chargeUntilDate),t.set("quoteBasedDisconnectDate",e._parentView.templateData.keywords.item.quoteBasedDisconnectDate),t.set("deviceSerialNumber",e._parentView.templateData.keywords.item.deviceNumber),""===e._parentView.templateData.keywords.item.deviceNumber||"-"===e._parentView.templateData.keywords.item.deviceNumber?t.set("smartCard",e._parentView.templateData.keywords.item.smartCardNumber):e._parentView.templateData.keywords.item.smartCardNumber&&e._parentView.templateData.keywords.item.smartCardNumber.length>2?t.set("smartCard",e._parentView.templateData.keywords.item.smartCardNumber.substring(2,e._parentView.templateData.keywords.item.smartCardNumber.length)):t.set("smartCard",e._parentView.templateData.keywords.item.smartCardNumber),t.set("newViewingPeriod",e._parentView.templateData.keywords.item.viewingPeriod),t.set("addOnServiceName",e._parentView.templateData.keywords.item.addOnPckName),t.set("addOnServiceStatus",e._parentView.templateData.keywords.item.addOnPckStatus),t.set("addOnPackageNames",e._parentView.templateData.keywords.item.addOnPackageNames),t.set("addOnPackageStatus",e._parentView.templateData.keywords.item.addOnPackageStatus),t.set("deviceName",e._parentView.templateData.keywords.item.deviceName),t.set("smartcardName",e._parentView.templateData.keywords.item.smartcardName),t.set("smartcardStatus",e._parentView.templateData.keywords.item.smartcardStatus),t.set("deviceStatus",e._parentView.templateData.keywords.item.deviceStatus),t.set("MACAddress",e._parentView.templateData.keywords.item.MACAddress),t.set("chargePeriod",e._parentView.templateData.keywords.item.chargePeriod),this.transitionToRoute("/deviceInfo")},showBlockingBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,6e3,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},getNewProcessID:function(){this.startNewProcess()},actions:{viewDeviceInformation:function(e){this.viewDeviceInformation(e)}},checkEmptyAndReplace:function(e){return null===e||void 0===e||""===e||"Nan-Nan-Nan"===e?"-":e},getFormattedQBD:function(e){if(null!==e&&void 0!==e&&""!==e){var t=e.split("T"),a=new Date(t[0]);return a.setDate(a.getDate()),this.checkEmptyAndReplace(this.getformatedDateforUI(a))}return"-"},getformatedDateforUI:function(e){function t(e){var t=e.toString();return t.length<2?"0"+t:t}if(void 0!==e&&""!==e){var a=e.getFullYear(),o=t(e.getMonth()+1);return t(e.getDate())+"-"+o+"-"+a}}}),Komodo.Application.CsiLogDetailsView=Komodo.UI.View.extend({viewKey:"CsiLogDetailsView",templateName:"CsiLogDetailsView"}),Komodo.Application.AddGraceDaysView=Komodo.UI.View.extend({viewKey:"AddGraceDaysView",templateName:"AddGraceDaysView"}),Komodo.Application.CsiManageViewingView=Komodo.UI.View.extend({viewKey:"CsiManageViewingView"}),Komodo.Application.ManageViewingSharedObjectController=Komodo.UI.Controller.extend({sessionId:void 0,domainUserName:void 0,self:void 0,localeBase:"locale.manageviewing:scheduledChanges.",init:function(){Komodo.log("Constructing ManageViewingSharedObjectController..."),this.set("processVersion","v1.0"),this.set("processName","Manage Viewing Shared Object Controller"),this._super(),sessionId=Komodo.Services.securityService.get("sessionToken"),domainUserName=Komodo.Services.securityService.get("domainUserName"),self=this,this.getCustomerId(),this.getLoggedIncountry(),this.getCacheData(),this.start()},stop:function(){this._super()},getCacheData:function(){var e=this,t=$.Deferred();return Komodo.Services.cachedDataService.fetch("AccountStatus",{domain:e.loggedInCountryId,qualifier:e.language}).done(function(t){e.set("accountStatuses",[]),e.set("accountStatuses",t)}).fail(function(){Komodo.log("[ERROR] : could not retrieve Account Status domain = "+e.loggedInCountryId+"/ qualifier = "+e.language)}),Komodo.Services.cachedDataService.fetch("AccountType",{domain:e.loggedInCountryId,qualifier:e.language}).done(function(t){e.set("accountTypes",[]),e.set("accountTypes",t)}).fail(function(){Komodo.log("[ERROR] : could not retrieve Account Type domain = "+e.loggedInCountryId+"/ qualifier = "+e.language)}),Komodo.Services.cachedDataService.fetch("MethodOfPayment",{domain:e.loggedInCountryId,qualifier:e.language}).done(function(t){e.set("paymentMethods",[]),e.set("paymentMethods",t)}).fail(function(){Komodo.log("[ERROR] : could not retrieve MethodOfPayment domain = "+e.loggedInCountryId+"/ qualifier = "+e.language)}),t},getLoggedIncountry:function(){var e=this;Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(t){quoteCountry=t.data.countryId,language=Komodo.Services.localizationService.getCurrentLanguage(),e.set("language",Komodo.Services.localizationService.getCurrentLanguage()),e.set("loggedInCountryId",t.data.countryId),e.set("loggedInCountryName",t.data.countryDescription)})},getCustomerId:function(){Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(e){var t=Komodo.Services.ProductAndServiceMaintenanceHelper.create();t.getCustomerIdToRetrieveData()})},retrieveCustomerFinancialTransactions:function(e){var t=this,a=this.resultFTMessage;a.ResponseMessage.Payload.ListOfFinancialTransaction.FinancialTransaction.clear(),Komodo.Services.queryService.getJSON("/FinancialTransaction/?id="+e).done(function(e){a.ResponseMessage.Payload.ListOfFinancialTransaction.FinancialTransaction.clear(),e&&e.FinancialTransaction.length&&0!=e.FinancialTransaction.length&&(e.FinancialTransaction.length>1?a.ResponseMessage.Payload.ListOfFinancialTransaction.FinancialTransaction.addObjects(e.FinancialTransaction):a.ResponseMessage.Payload.ListOfFinancialTransaction.FinancialTransaction.addObject(e.FinancialTransaction[0])),t.messageFinancialTransactionsRetrievedReceived(a)}).error(function(e){var t=JSON.stringify(e);Komodo.log("retrieveCustomerFinancialTransactions ajax call failed. Error: "+t)})},resultFTMessage:{ResponseMessage:{Payload:{ListOfFinancialTransaction:{FinancialTransaction:[]}}}},messageFinancialTransactionsRetrievedReceived:function(e){var t=Komodo.Services.ManageViewingService;t.retrievedFinancialTransaction(void 0),void 0!=e&&(t.retrievedFinancialTransaction(e),Komodo.Services.eventAggregator.publish("FinancialTransactionsForManageViewingRetrievedReceived"))},getCSILogs:function(e){var t=this,a=Komodo.Services.QueryService.create();a.retrieveSelectedCountry();var o=Komodo.Services.ProductAndServiceMaintenanceHelper.create();if(null!=o.getCustomerIdToRetrieveData()&&void 0!=o.getCustomerIdToRetrieveData()&&""!=o.getCustomerIdToRetrieveData()){o.getCustomerIdToRetrieveData();a.getJSON("/Log/GetCommunicationLogEntriesForSerialNumber?serialnumber="+e+"&customerId="+o.getCustomerIdToRetrieveData()).done(function(e){t.messageNotifyGetCSILogs(e)}).error(function(e){var a=JSON.stringify(e);t.messageNotifyGetCSILogsError(a),Komodo.log("Notify get CSI log call failed. Error: "+a)})}},messageNotifyGetCSILogs:function(e){Komodo.Services.ManageViewingService.setNotifyGetCSILogsMsg(e),Komodo.Services.eventAggregator.publish("NotifyGetCSILogs")},messageNotifyGetCSILogsError:function(e){Komodo.Services.ManageViewingService.setNotifyGetCSILogsErrorMsg(e),Komodo.Services.eventAggregator.publish("NotifyGetCSILogsError")},retrieveUserInfo:function(e,t){var a=Komodo.Services.securityService.get("sessionToken"),o=Komodo.Services.securityService.get("domainUserName");void 0!=t&&$.ajax({url:KomodoConfiguration.ibsApiUrl+"deves02/UsersConfiguration?id="+e,dataType:"json",type:"GET",beforeSend:function(e){e.setRequestHeader("mca.sessionid",a),e.setRequestHeader("mca.domainUserName",o)}}).done(function(a){var o=19;if(a&&a.Id&&a.Id==e){(1==a.DefaultStockhandlerIdSpecified||"True"==a.DefaultStockhandlerIdSpecified)&&(o=a.DefaultStockhandlerId)}t(o)}).error(function(e){var a=JSON.stringify(e);Komodo.log("UsersConfiguration ajax call failed. Error: "+a),t(19)})},disconnectPackages:function(e,t){var a=Komodo.Services.ProductAndServiceMaintenanceHelper.create();Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+a.getCustomerIdToRetrieveData()),Komodo.Services.queryService.postJSON("/Device/DisconnectAllPackages",{data:e}).done(function(e){switch(t){case"Reconnect":self.messagePackagesDisconnectedReceived(e);break;case"Disconnect":self.messagePackagesForDisconnectReceived(e)}}).error(function(e){var a=JSON.stringify(e);switch(t){case"Reconnect":self.messagePackagesDisconnectedError(a);break;case"Disconnect":self.messagePackagesForDisconnectError(a)}Komodo.log("Disconnect Packages ajax call failed. Error: "+a)})},messagePackagesDisconnectedReceived:function(e){Komodo.Services.ManageViewingService.setDisconnectedPackagesResult(e),Komodo.Services.eventAggregator.publish("PackagesDisconnectedReceived")},messagePackagesDisconnectedError:function(e){Komodo.Services.ManageViewingService.setDisconnectedPackagesError(e),Komodo.Services.eventAggregator.publish("PackagesDisconnectedError")},messagePackagesForDisconnectReceived:function(e){Komodo.Services.ManageViewingService.setPackagesForDisconnectResult(e),Komodo.Services.eventAggregator.publish("PackagesForDisconnectReceived")},messagePackagesForDisconnectError:function(e){Komodo.Services.ManageViewingService.setPackagesForDisconnectError(e),Komodo.Services.eventAggregator.publish("PackagesForDisconnectError")},messagePackagesReconnectedReceived:function(e){Komodo.Services.ManageViewingService.setReconnectedPackagesResult(e),Komodo.Services.eventAggregator.publish("PackagesReconnectedReceived")},messagePackagesReconnectedError:function(e){Komodo.Services.ManageViewingService.setReconnectedPackagesError(e),Komodo.Services.eventAggregator.publish("PackagesReconnectedError")},retrieveScheduledChanges:function(e){Komodo.Services.queryService.getJSON("/ScheduledChanges/GetScheduledChanges?customerNumber="+e).done(function(e){self.messageScheduledChangesRetrievedReceived(e)}).error(function(e){self.messageScheduledChangesError(e)})},messageScheduledChangesRetrievedReceived:function(e){Komodo.Services.ManageViewingService.setScheduledChangesResult(e),Komodo.Services.eventAggregator.publish("ScheduledChangesReceived")},messageScheduledChangesError:function(e){Komodo.Services.ManageViewingService.setScheduledChangesError(e),Komodo.Services.eventAggregator.publish("ScheduledChangesError")},reloadScheduledChanges:function(){Komodo.Services.uiService.getController("scheduledChanges").getScheduledChanges()},deleteScheduledChanges:function(e){var t=this;Komodo.Services.queryService.getJSON("/ScheduledChanges/DeleteScheduledChanges?scheduleId="+e).done(function(e){Komodo.Controls.MessageBoxController.show(kl.value(t.localeBase+"successMessage"),kl.value(t.localeBase+"scheduleDeletedSuccessfully"),Komodo.Controls.MessageBoxOkButton,t,"id5446673","success"),t.reloadScheduledChanges()}).error(function(e){var a=JSON.stringify(e);null!=e.responseJSON||void 0!=e.responseJSON?Komodo.Controls.MessageBoxController.show(kl.value(t.localeBase+"technicalError"),e.responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,t,"id5446673","danger"):Komodo.Controls.MessageBoxController.show(kl.value(t.localeBase+"technicalError"),kl.value(t.localeBase+"technicalErrorMsg"),Komodo.Controls.MessageBoxOkButtons,t,"id5446673","danger"),Komodo.log("Delete Scheduled Changes ajax call failed. Error: "+a)})},deleteMultipleScheduledChanges:function(e,t){var a=this;Komodo.Services.queryService.postJSON("/ScheduledChanges/DeleteMultipleScheduledChanges",{data:e}).done(function(e){t&&Komodo.Controls.MessageBoxController.show(kl.value(a.localeBase+"successMessage"),kl.value(a.localeBase+"scheduleDeletedSuccessfully"),Komodo.Controls.MessageBoxOkButton,a,"id5446673","success")}).error(function(e){var t=JSON.stringify(e);null!=e.responseJSON||void 0!=e.responseJSON?Komodo.Controls.MessageBoxController.show(kl.value(a.localeBase+"technicalError"),e.responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,a,"id5446673","danger"):Komodo.Controls.MessageBoxController.show(kl.value(a.localeBase+"technicalError"),kl.value(a.localeBase+"technicalErrorMsg"),Komodo.Controls.MessageBoxOkButtons,a,"id5446673","danger"),Komodo.log("Delete Scheduled Changes ajax call failed. Error: "+t)})},updateScheduledChanges:function(e){Komodo.Services.queryService.postJSON("/ScheduledChanges/UpdateScheduledChanges",{data:e}).done(function(e){e>0?(Komodo.Controls.MessageBoxController.show("Success","Scheduled change has been modified and saved!",Komodo.Controls.MessageBoxOkButton,this,"id5446673","success"),self.reloadScheduledChanges()):Komodo.Controls.MessageBoxController.show("Error","Error Updating scheduled change.",Komodo.Controls.MessageBoxOkButton,this,"id5446673","error")}).error(function(e){var t=JSON.stringify(e);null!=e.responseJSON||void 0!=e.responseJSON?Komodo.Controls.MessageBoxController.show("Technical Error",e.responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","error"):Komodo.Controls.MessageBoxController.show("Technical Error","Technical error has been occurred please contact administrator.",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","error"),Komodo.log("Update Scheduled Changes ajax call failed. Error: "+t)})},payNow:function(){this.RedirectToPayNow()},RedirectToPayNow:function(){var e=this,t=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),a=t.getCustomerIdToRetrieveData();Komodo.Services.queryService.getJSON("/Quote/GetCustomerQuotes?customerId="+a+"&deviceSerialNumber=&quoteCurrentStatus=4&quoteCategory=0").done(function(t){that=this;var a=0,o=0,s="",r="",n=0;if(t&&t.Quote.length&&0!=t.Quote.length){if(t.Quote.length>0){for(var i=0;i<t.Quote.length;i++){t.Quote.isDisableButton=!0,t.Quote[i].QuoteDate=XDates.getformatedDateforUI(new Date(t.Quote[i].QuoteDate)),n=0;for(var c=0;c<t.Quote[i].LineItems.length;c++)t.Quote[i].LineItems[c].StartDate=XDates.getformatedDateforUI(new Date(t.Quote[i].LineItems[c].StartDate))+"  to  "+XDates.getformatedDateforUI(new Date(t.Quote[i].LineItems[c].EndDate)),r=e.getCurrencyForCustomer(t.Quote[i].LineItems[c].CurrencyId),n=parseFloat(parseFloat(n)+parseFloat(t.Quote[i].LineItems[c].Amount)).toFixed(2),t.Quote[i].LineItems[c].Amount=r+" "+parseFloat(t.Quote[i].LineItems[c].Amount).toFixed(2);t.Quote[i].quoteAmountTotal=r+" "+n,t.Quote[i].isChecked=!0,t.Quote.isDisableButton=!1,o+=parseFloat(t.Quote[i].FinancialAccountBalance).toFixed(2),a+=parseFloat(t.Quote[i].TotalAmount).toFixed(2),s=e.getQuotationType(t.Quote[i].QuoteType),t.Quote[i].QuoteType=s}t.Quote.FinancialAccountBalance=r+" "+parseFloat(o).toFixed(2),t.Quote.SubTotal=r+" "+parseFloat(a).toFixed(2),AmountToPay=a+o,t.Quote.AmountToPay=r+" "+parseFloat(AmountToPay).toFixed(2),e.set("filteredQuotes",t.Quote);var l=e.amountPay();l.length>1?(Komodo.Services.navigationService.activateGroup(Komodo.NavigationGroupNames.OnlineTill),Komodo.Services.uiService.transitionTo("splitPayment"),Komodo.Services.eventAggregator.publish("PublishSplitPayment",l)):(Komodo.Services.navigationService.activateGroup(Komodo.NavigationGroupNames.OnlineTill),Komodo.Services.uiService.transitionTo("customerPayment"),Komodo.Services.eventAggregator.publish("PublishCustomerPayment",l))}}else Komodo.Controls.MessageBoxController.show(kl.value(e.localeAmountPayable+"information"),kl.value(e.localeAmountPayable+"noQuotesMessage"))}).error(function(t){var a=JSON.stringify(t);Komodo.log("Retrieve FinancialAccounts ajax call failed. Error: "+a),Komodo.Controls.MessageBoxController.show(kl.value(e.localeAmountPayable+"amountToPay"),t.responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,e,"authmbx3","danger")})},amountPay:function(){var e=this,t=new Array,a=void 0,o=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),s=Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount;if(null==s.Account&&void 0==s.Account||(a=o.createArrayForSingleElement(s.Account)),void 0!=a||null!=a){for(var r=0;r<a.length;r++){for(var n=new Array,i=new Array,c=0,l=0;l<e.filteredQuotes.length;l++)e.filteredQuotes[l].FinancialAccountId==a[r].UID&&(e.filteredQuotes[l].isChecked?n.push({quoteId:e.filteredQuotes[l].Id,financialAccountId:e.filteredQuotes[l].FinancialAccountId,isChecked:"true",payTotal:Ember.get(e.filteredQuotes[l],"TotalAmount")}):i.push({quoteId:e.filteredQuotes[l].Id,financialAccountId:e.filteredQuotes[l].FinancialAccountId,isChecked:"false",payTotal:Ember.get(e.filteredQuotes[l],"TotalAmount")}));var d=e.accountStatuses.find(function(e){return e.key===a[r].Status}),u=e.accountTypes.find(function(e){return e.key===a[r].Type}),h=void 0;void 0!=a[r].PaymentDetail&&(h=e.paymentMethods.find(function(e){return e.key===a[r].PaymentDetail.MethodOfPayment}));for(var l=0;l<n.length;l++){var m=n[l];m.financialAccountId==a[r].UID&&(c+=parseFloat(m.payTotal))}0!==c&&t.push({financialAccountId:a[r].UID,totalAmountToPay:c,type:u.value,methodOfPayment:h.value,status:d.value,displayText:a[r].UID+": "+a[r].AccountTypeDescription,chargeuntildate:e.getDueDateOfAnAccount(a[r].PaymentDetail.DebitOrderDay),currencyCode:a[r].Balance.CurrencyCode,isDefault:a[r].IsDefault,overdue:parseFloat(a[r].Balance.Value).toFixed(2),products:e.populateProductModel(a[r]),isChecked:!0})}for(var g=new Array,l=0;l<a.length;l++){var p,v=e.accountStatuses.find(function(e){return e.key===a[l].Status}),f=e.accountTypes.find(function(e){return e.key===a[l].Type}),b=void 0;for(void 0!=a[l].PaymentDetail&&(b=e.paymentMethods.find(function(e){return e.key===a[l].PaymentDetail.MethodOfPayment})),p=0;p<t.length;p++)if(a[l].id==t[p].financialAccountId){var C={financialAccountId:t[p].financialAccountId,totalAmountToPay:t[p].totalAmountToPay,type:t[p].type,methodOfPayment:t[p].methodOfPayment.value,status:t[p].status,displayText:t[p].displayText,chargeuntildate:t[p].chargeuntildate,currencyCode:t[p].currencyCode,isDefault:t[p].isDefault,overdue:t[p].overdue,products:t[p].products,isChecked:t[p].isChecked};g.push(C);break}if(p==t.length){var C={financialAccountId:a[l].UID,totalAmountToPay:a[l].Balance.Value,type:f.value,methodOfPayment:b.value,status:v.value,displayText:a[l].UID+": "+a[l].AccountTypeDescription,chargeuntildate:e.getDueDateOfAnAccount(a[l].PaymentDetail.DebitOrderDay),currencyCode:a[l].Balance.CurrencyCode,isDefault:a[l].IsDefault,overdue:parseFloat(a[l].Balance.Value).toFixed(2),products:e.populateProductModel(a[l]),isChecked:!0};g.push(C)}}for(var S=Komodo.Services.customerProfileService.personalDetails,D=[],l=0;l<t.length;l++){var y=Komodo.Models.OnlineTill.CustomerModel.create();y.set("customerNumber",S.customerNo),y.set("title",S.title),y.set("customerFirstname",S.firstName),y.set("customerSurname",S.lastName);var w="";w=void 0===S.title||null===S.title?"":S.title,w+=void 0===S.firstName||null===S.firstName?"":" "+S.firstName,w+=void 0===S.lastName||null===S.lastName?"":" "+S.lastName,y.set("customerName",w),y.set("customerClass",S.customerClassText),y.set("customerType",S.customerTypeText),y.set("telNo",S.telNo),y.set("mobileNo",S.mobileNo),y.set("locationIndicator",S.locationIndicator),y.set("email",S.email),y.set("isActiveCustomer",S.isActiveCustomer),y.set("isDstv",S.isDstv),y.set("isGotv",S.isGotv),y.set("businessUnit",void 0!==S.viewPlatform?S.viewPlatform.toUpperCase():""),y.set("customerStatus",S.customerStatus);for(var I=[],p=0;p<g.length;p++){var x=Komodo.Models.OnlineTill.AccountModel.create();x.set("accountNumber",g[p].financialAccountId),x.set("balance",g[p].totalAmountToPay),x.set("type",g[p].type),x.set("methodOfPayment",g[p].methodOfPayment),x.set("status",g[p].status),x.set("displayText",g[p].displayText),x.set("chargeuntildate",g[p].chargeuntildate),x.set("overdue",g[p].overdue),x.set("currencyCode",g[p].currencyCode),x.set("isDefault",g[p].isDefault),x.set("products",g[p].products),x.set("selected",g[p].isChecked);for(var M=[],T=0;T<e.filteredQuotes.length;T++)if(e.filteredQuotes[T].FinancialAccountId==g[p].financialAccountId){var N=Komodo.Models.OnlineTill.SRQModel.create();N.set("quoteId",e.filteredQuotes[T].Id.toString()),N.set("createdByUser",e.filteredQuotes[T].CreatedByUserId.toString()),N.set("financialAccountId",e.filteredQuotes[T].FinancialAccountId.toString()),N.set("fulfillmentDate",new moment(e.filteredQuotes[T].FulfillmentDate).format(KomodoConfiguration.dateFormat)),N.set("quoteDateTime",e.filteredQuotes[T].QuoteDate),N.set("replacedByQuoteId",e.filteredQuotes[T].ReplacedByQuoteId.toString()),N.set("totalAmount",e.filteredQuotes[T].TotalAmount),N.set("isSelected",e.filteredQuotes[T].isChecked),N.set("previousIsSelectedState",e.filteredQuotes[T].isChecked),N.set("srqStatus","No");for(var P=[],O=0;O<e.filteredQuotes[T].LineItems.length;O++){var B=Komodo.Models.OnlineTill.SRQLineItemModel.create();0===O?B.set("isFirst",!0):B.set("isFirst",!1),B.set("quoteLineItemId",e.filteredQuotes[T].LineItems[O].Id),B.set("adjustmentAmount",e.filteredQuotes[T].LineItems[O].AdjustmentAmount),B.set("amount",e.filteredQuotes[T].LineItems[O].Amount),B.set("baseAmount",e.filteredQuotes[T].LineItems[O].BaseAmount),B.set("startDate",e.filteredQuotes[T].LineItems[O].StartDate),B.set("endDate",e.filteredQuotes[T].LineItems[O].EndDate),B.set("period",new moment(e.filteredQuotes[T].StartDate).format(KomodoConfiguration.dateFormat)+" to "+new moment(e.filteredQuotes[T].EndDate).format(KomodoConfiguration.dateFormat)),B.set("invoiceText",e.filteredQuotes[T].LineItems[O].InvoiceText),B.set("taxAmount",e.filteredQuotes[T].LineItems[O].TaxAmount),P.push(B)}N.set("quoteLineItems",P),M.push(N)}x.set("quotes",M),I.push(x)}y.set("accounts",I);var R=e.getAllQuotes(e.filteredQuotes);y.set("quotes",e.getAllQuotes(e.filteredQuotes)),R&&R.length&&R.length>0&&y.set("disableQuoteDetails",!1);for(var k=[],T=0;T<e.filteredQuotes.length;T++)if(e.filteredQuotes[T].FinancialAccountId==t[l].financialAccountId){var N=Komodo.Models.OnlineTill.SRQModel.create();N.set("quoteId",e.filteredQuotes[T].Id.toString()),N.set("createdByUser",e.filteredQuotes[T].CreatedByUserId.toString()),N.set("financialAccountId",e.filteredQuotes[T].FinancialAccountId.toString()),N.set("fulfillmentDate",new moment(e.filteredQuotes[T].FulfillmentDate).format(KomodoConfiguration.dateFormat)),N.set("quoteDateTime",e.filteredQuotes[T].QuoteDate),N.set("replacedByQuoteId",e.filteredQuotes[T].ReplacedByQuoteId.toString()),N.set("totalAmount",e.filteredQuotes[T].TotalAmount),N.set("isSelected",e.filteredQuotes[T].isChecked),N.set("previousIsSelectedState",e.filteredQuotes[T].isChecked),N.set("srqStatus","No");for(var A=[],O=0;O<e.filteredQuotes[T].LineItems.length;O++){var B=Komodo.Models.OnlineTill.SRQLineItemModel.create();0===O?B.set("isFirst",!0):B.set("isFirst",!1),B.set("quoteLineItemId",e.filteredQuotes[T].LineItems[O].Id),B.set("adjustmentAmount",e.filteredQuotes[T].LineItems[O].AdjustmentAmount),B.set("amount",e.filteredQuotes[T].LineItems[O].Amount),B.set("baseAmount",e.filteredQuotes[T].LineItems[O].BaseAmount),B.set("startDate",e.filteredQuotes[T].LineItems[O].StartDate),B.set("endDate",e.filteredQuotes[T].LineItems[O].EndDate),B.set("period",new moment(e.filteredQuotes[T].StartDate).format(KomodoConfiguration.dateFormat)+" to "+new moment(e.filteredQuotes[T].EndDate).format(KomodoConfiguration.dateFormat)),B.set("invoiceText",e.filteredQuotes[T].LineItems[O].InvoiceText),B.set("taxAmount",e.filteredQuotes[T].LineItems[O].TaxAmount),A.push(B)}N.set("quoteLineItems",A),k.push(N)}y.set("quote",k);var K=Komodo.Models.OnlineTill.AccountModel.create();K.set("accountNumber",t[l].financialAccountId),K.set("balance",t[l].totalAmountToPay),K.set("type",t[l].type),K.set("methodOfPayment",t[l].methodOfPayment),K.set("status",t[l].status),K.set("displayText",t[l].displayText),K.set("chargeuntildate",t[l].chargeuntildate),K.set("currencyCode",t[l].currencyCode),K.set("isDefault",t[l].isDefault),K.set("balance",t[l].totalAmountToPay),y.set("account",K),y.set("payAmount",parseFloat(t[l].totalAmountToPay)+parseFloat(t[l].overdue)),D.push(y)}return D}},getAllQuotes:function(e){for(var t=[],a=0;a<e.length;a++){var o=Komodo.Models.OnlineTill.SRQModel.create();o.set("quoteId",e[a].Id.toString()),o.set("createdByUser",e[a].CreatedByUserId.toString()),o.set("financialAccountId",e[a].FinancialAccountId.toString()),o.set("fulfillmentDate",new moment(e[a].FulfillmentDate).format(KomodoConfiguration.dateFormat)),o.set("quoteDateTime",e[a].QuoteDate),o.set("replacedByQuoteId",e[a].ReplacedByQuoteId.toString()),o.set("totalAmount",e[a].TotalAmount),o.set("isSelected",e[a].isChecked),o.set("previousIsSelectedState",e[a].isChecked),o.set("srqStatus","No");for(var s=[],r=0;r<e[a].LineItems.length;r++){var n=Komodo.Models.OnlineTill.SRQLineItemModel.create();0===r?n.set("isFirst",!0):n.set("isFirst",!1),n.set("quoteLineItemId",e[a].LineItems[r].Id),n.set("adjustmentAmount",e[a].LineItems[r].AdjustmentAmount),n.set("amount",e[a].LineItems[r].Amount),n.set("baseAmount",e[a].LineItems[r].BaseAmount),n.set("startDate",e[a].LineItems[r].StartDate),n.set("endDate",e[a].LineItems[r].EndDate),n.set("period",new moment(e[a].StartDate).format(KomodoConfiguration.dateFormat)+" to "+new moment(e[a].EndDate).format(KomodoConfiguration.dateFormat)),n.set("invoiceText",e[a].LineItems[r].InvoiceText),n.set("taxAmount",e[a].LineItems[r].TaxAmount),s.push(n)}o.set("quoteLineItems",s),t.push(o)}return t},populateProductModel:function(e){var t=[];return void 0!==e.ListOfAgreement&&null!==e.ListOfAgreement&&$(e.ListOfAgreement.Agreement).each(function(a,o){void 0!==o.ListOfHardware&&$(o.ListOfHardware.Hardware).each(function(a,o){void 0!==o.ListOfService&&null!==o.ListOfService&&$(o.ListOfService.Service).each(function(a,s){var r=Komodo.Models.OnlineTill.ProductModel.create();r.set("accountNumber",e.UID),r.set("productId",s.UID),r.set("productStatus",s.Status),r.set("hardware",o.ProductDetail.Name),r.set("productName",s.ProductDetail.Name),r.set("productType",s.ProductDetail.Type),r.set("smartcardNumber",o.LinkedSmartcard),t.push(r)})})}),t},getDueDateOfAnAccount:function(e){var t=parseInt(e,10),a=null,o=new Date,s=new Date(o.getFullYear(),o.getMonth(),t);return a=1===XDates.compare(o,s)?XDates.getNextMonthDateForDay(e):s,XDates.getDateFromJavascriptDate(a)},getQuotationType:function(e){for(var t=Komodo.Services.customerProfileService.get("quotationType"),a=0;a<t.length;a++)if(t[a].key==e)return t[a].value;return""},getCurrencyForCustomer:function(e){for(var t=Komodo.Services.customerProfileService.get("currency"),a=0;a<t.length;a++)if(t[a].key==e)return t[a].value;return""},getAccountTypeText:function(e){var t=Komodo.Services.customerProfileService.get("accountType");if(t&&null!=e)for(var a=t.AccountTypes.AccountType,o=0;o<a.length;o++)if(a[o].CanonicalKey==e)return a[o].AccountTypeDescription;return null},resultAccountMessage:{ResponseMessage:{Payload:{ListOfAccount:{Account:[]}}}},retrieveFinancialAccountsForManageViewing:function(e){var t=this,a=this.resultAccountMessage;t.getLoggedIncountry(),a.ResponseMessage.Payload.ListOfAccount.Account.clear(),Komodo.Services.queryService.getJSON("/AccountProfile/GetAccountProfileWithViewingPeriod?id="+e+"&dummy="+e.toString()).done(function(e){a.ResponseMessage.Payload.ListOfAccount.Account.clear(),e&&e.Account.length&&0!=e.Account.length&&(e.Account.length>1?a.ResponseMessage.Payload.ListOfAccount.Account.addObjects(e.Account):a.ResponseMessage.Payload.ListOfAccount.Account.addObject(e.Account[0])),t.messageFinancialAccountsForManageViewingRetrievedReceived(a)}).error(function(e){var a=JSON.stringify(e);t.messageFinancialAccountsForManageViewingErrorReceived(e),Komodo.log("retrieveFinancialAccounts ajax call failed. Error: "+a)})},messageFinancialAccountsForManageViewingRetrievedReceived:function(e){var t=Komodo.Services.customerProfileService;t.retrievedFinancialAccounts(void 0);var a=e.ResponseMessage.Payload.ListOfAccount;a&&a.Account&&(t.retrievedFinancialAccounts(e),Komodo.Services.eventAggregator.publish("FinancialAccountsForManageViewingRetrievedReceived"))},messageFinancialAccountsForManageViewingErrorReceived:function(e){Komodo.Services.eventAggregator.publish("FinancialAccountsForManageViewingErrorReceived")},disconnectMultipleSmartcards:function(e,t){Komodo.Services.queryService.postJSON("/Device/DisconnectMultipleSmartcards",{data:e}).done(function(e){switch(t){case"Reconnect":self.messageMultipleSmartcardsDisconnectedReceived(e)}}).error(function(e){var a=JSON.stringify(e);switch(t){case"Reconnect":self.messageMultipleSmartcardsDisconnectedError(a)}Komodo.log("Disconnect Packages ajax call failed. Error: "+a)})},messageMultipleSmartcardsDisconnectedReceived:function(e){Komodo.Services.ManageViewingService.setDisconnectedPackagesResult(e),Komodo.Services.eventAggregator.publish("MultipleSmartcardsDisconnectedReceived")},messageMultipleSmartcardsDisconnectedError:function(e){Komodo.Services.ManageViewingService.setDisconnectedPackagesError(e),Komodo.Services.eventAggregator.publish("MultipleSmartcardsDisconnectedReceived")}}),Komodo.Application.CsiReconnectView=Komodo.UI.View.extend({viewKey:"CsiReconnectView",templateName:"CsiReconnectView"}),Komodo.Application.BoxOfficeQueryView=Komodo.UI.View.extend({viewKey:"BoxOfficeQueryView",templateName:"BoxOfficeQueryView"}),Komodo.Application.CsiViewingLocationView=Komodo.UI.View.extend({viewKey:"CsiViewingLocationView"}),Komodo.Application.MultipleQuoteDetailView=Komodo.UI.View.extend({viewKey:"MultipleQuoteDetailView",templateName:"MultipleQuoteDetailView"}),Komodo.Application.CustomerUnwantedView=Komodo.UI.View.extend({viewKey:"CustomerUnwantedView"}),Komodo.Application.BoxOfficeRentTitleView=Komodo.UI.View.extend({
viewKey:"BoxOfficeRentTitleView",templateName:"BoxOfficeRentTitleView"}),Komodo.Application.SearchPromptView=Komodo.UI.View.extend({viewKey:"SearchPromptView",templateName:"SearchPromptView"}),Komodo.Application.BoxOfficeSectorView=Komodo.UI.View.extend({viewKey:"BoxOfficeSectorView",templateName:"BoxOfficeSectorView"}),Komodo.Application.IssueHardwareAgainstSalesOrderView=Komodo.UI.View.extend({viewKey:"IssueHardwareAgainstSalesOrderView",templateName:"IssueHardwareAgainstSalesOrderView"}),Ember.TEMPLATES.ManageViewingView=Ember.Handlebars.template(function(e,t,a,o,s){function r(e,t){var o,s,r;return t.buffer.push("\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(2,n,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n\r\n  <hr/>\r\n  <br/>\r\n  <tbody>\r\n    <table id="manageviewGrid" class="table table-bordered komodo-datagrid">\r\n      <tr>\r\n        <th style="display: none">'),t.buffer.push(Be((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:viewingGridColumnHeaders.accountNumber",r):ke.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.accountNumber",r)))),t.buffer.push('</th>\r\n        <th style="display: none">'),t.buffer.push(Be((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:viewingGridColumnHeaders.agreementNumber",r):ke.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.agreementNumber",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(Be((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:viewingGridColumnHeaders.deviceNumber",r):ke.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.deviceNumber",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(Be((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:viewingGridColumnHeaders.principalPackageName",r):ke.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.principalPackageName",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(Be((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:viewingGridColumnHeaders.princpalStatus",r):ke.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.princpalStatus",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(Be((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:viewingGridColumnHeaders.addonPackageName",r):ke.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.addonPackageName",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(Be((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:viewingGridColumnHeaders.addonStatus",r):ke.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.addonStatus",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(Be((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:viewingGridColumnHeaders.services",r):ke.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.services",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(Be((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:viewingGridColumnHeaders.servicesStatus",r):ke.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.servicesStatus",r)))),t.buffer.push("</th>\r\n          "),o=a.if.call(e,"isDisableChargePeriod",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(7,l,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        <th>"),t.buffer.push(Be((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:viewingGridColumnHeaders.viewingPeriod",r):ke.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.viewingPeriod",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(Be((s=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.manageviewing:viewingGridColumnHeaders.actions",r):ke.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.actions",r)))),t.buffer.push("</th>\r\n      </tr>\r\n\r\n      "),o=a.each.call(e,"item","in","gridData",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(9,d,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n    </table>\r\n  </tbody>\r\n  \r\n  "),t.buffer.push(Be(a.view.call(e,"Komodo.Controls.TablePager",{hash:{tableId:"manageviewGrid",contentBinding:"gridData",itemsPerPage:"10",headerRows:"1",visibleBinding:"isTablePagerVisible"},hashTypes:{tableId:"STRING",contentBinding:"STRING",itemsPerPage:"STRING",headerRows:"STRING",visibleBinding:"STRING"},hashContexts:{tableId:e,contentBinding:e,itemsPerPage:e,headerRows:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function n(e,t){var o;return t.buffer.push("\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:Re.noop,fn:Re.program(3,i,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n  "),o=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:Re.noop,fn:Re.program(5,c,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n  "),""}function i(e,t){return t.buffer.push("\r\n  "),t.buffer.push(Be(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{tabindex:"1",text:"~locale.manageviewing:general.filterList~",class:"sub-heading"},hashTypes:{tabindex:"STRING",text:"STRING",class:"STRING"},hashContexts:{tabindex:e,text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(Be(a.view.call(e,"Komodo.Controls.Select",{hash:{label:"~locale.manageviewing:general.principalPackage~",prompt:"~locale.manageviewing:general.principalPackagePrompt~",valueBinding:"manageViewingGridModel.prinPckName",contentBinding:"principalPkgList",optionLabelPath:"content.Value",optionValuePath:"content.Key"},hashTypes:{label:"STRING",prompt:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{label:e,prompt:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function c(e,t){return t.buffer.push("\r\n  "),t.buffer.push(Be(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(Be(a.view.call(e,"Komodo.Controls.Select",{hash:{label:"~locale.manageviewing:general.principalStatus~",prompt:"~locale.manageviewing:general.principalStatusPrompt~",valueBinding:"manageViewingGridModel.prinPckStatus",contentBinding:"principalStatusList",optionLabelPath:"content.Value",optionValuePath:"content.Key"},hashTypes:{label:"STRING",prompt:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{label:e,prompt:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function l(e,t){var o,s;return t.buffer.push("\r\n                <th>"),t.buffer.push(Be((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:viewingGridColumnHeaders.agreementPeriod",s):ke.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.agreementPeriod",s)))),t.buffer.push("</th>\r\n          "),""}function d(e,t){var o;return t.buffer.push('\r\n      <tr>\r\n        <td style="display: none">'),t.buffer.push(Be(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"item.accountNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</td>\r\n        <td style="display: none">'),t.buffer.push(Be(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"item.agreementNumber"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n        "),o=a.if.call(e,"item.isXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(12,h,t),fn:Re.program(10,u,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n \r\n        "),o=a.if.call(e,"item.isXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(23,C,t),fn:Re.program(18,v,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        \r\n        "),o=a.if.call(e,"item.isXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(37,N,t),fn:Re.program(32,x,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        \r\n        \r\n          \r\n        "),o=a.if.call(e,"item.isXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(49,G,t),fn:Re.program(46,A,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        \r\n        "),o=a.if.call(e,"item.isXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(62,q,t),fn:Re.program(59,_,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        \r\n        "),o=a.if.call(e,"item.isXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(76,ee,t),fn:Re.program(71,X,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        \r\n        "),o=a.if.call(e,"item.isXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(87,ie,t),fn:Re.program(82,se,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n\r\n       \r\n      "),o=a.if.call(e,"isDisableChargePeriod",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(92,de,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" \r\n \r\n\r\n\r\n        "),o=a.if.call(e,"item.isXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(102,fe,t),fn:Re.program(99,pe,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        \r\n        "),o=a.if.call(e,"item.isXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(114,xe,t),fn:Re.program(111,we,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      </tr>\r\n      "),""}function u(e,t){var o;return t.buffer.push('\r\n        <td style="border-bottom-color:white; font-weight: bold; padding-left:11px;">'),o=a._triageMustache.call(e,"item.deviceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("  "),o=a._triageMustache.call(e,"item.smartCardNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n          "),""}function h(e,t){var o;return t.buffer.push("\r\n         "),o=a.if.call(e,"item.isSecondaryXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(15,g,t),fn:Re.program(13,m,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function m(e,t){var o;return t.buffer.push('\r\n          <td style="border-bottom-color:white">\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                '),o=a._triageMustache.call(e,"item.deviceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("  "),o=a._triageMustache.call(e,"item.smartCardNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push('\r\n              </td>  \r\n            <td>\r\n                <img src="./Content/Images/link/l.svg" style="width:20px;padding-top:4px">\r\n              </td>\r\n            </tr>\r\n          </table>\r\n        </td>\r\n        '),""}function g(e,t){var o;return t.buffer.push("\r\n        <td>\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                "),o=a._triageMustache.call(e,"item.deviceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("  "),o=a._triageMustache.call(e,"item.smartCardNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              </td>\r\n              "),o=a.if.call(e,"item.isXtraviewServiceForSecondaryDevice",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(16,p,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </tr>\r\n          </table>\r\n        </td>\r\n        "),""}function p(e,t){t.buffer.push('\r\n              <td>\r\n                <img src="./Content/Images/link/l.svg" style="width:20px;padding-top:4px"></img>\r\n              </td>\r\n              ')}function v(e,t){var o;return t.buffer.push('\r\n        <td style="border-bottom-color:white;">\r\n          <div>\r\n            <div>'),o=a._triageMustache.call(e,"item.prinPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n            <table>\r\n              <tbody>\r\n              "),o=a.each.call(e,"principalItem","in","item.principalPackageNames",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(19,f,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              </tbody>            \r\n            </table>\r\n          </div>\r\n          "),o=a.each.call(e,"freeViewItem","in","item.freeViewPckName",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(21,b,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n           "),""}function f(e,t){var o;return t.buffer.push("              \r\n                <tr>\r\n                  <td>\r\n                    <div>"),o=a._triageMustache.call(e,"principalItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n                  </td>\r\n                </tr>\r\n              "),""}function b(e,t){var o;return t.buffer.push("\r\n          <div>"),o=a._triageMustache.call(e,"freeViewItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n          "),""}function C(e,t){var o;return t.buffer.push("\r\n        "),o=a.if.call(e,"item.isSecondaryXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(26,D,t),fn:Re.program(24,S,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function S(e,t){var o;return t.buffer.push('\r\n        <td style="font-size:0;border-bottom-color:white">\r\n          <div>\r\n            <div>'),o=a._triageMustache.call(e,"item.prinPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n            <table>\r\n              <tbody>\r\n              "),o=a.each.call(e,"principalItem","in","item.principalPackageNames",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(19,f,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              </tbody>              \r\n            </table>\r\n\r\n          </div>\r\n          "),o=a.each.call(e,"freeViewItem","in","item.freeViewPckName",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(21,b,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        "),""}function D(e,t){var o;return t.buffer.push("\r\n        "),o=a.if.call(e,"item.isXtraviewServiceForSecondaryDevice",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(30,I,t),fn:Re.program(27,y,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function y(e,t){var o;return t.buffer.push('\r\n        <td style="font-size:0;">\r\n          <div>\r\n            <div>'),o=a._triageMustache.call(e,"item.prinPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n            <table>\r\n              <tbody>\r\n              "),o=a.each.call(e,"principalItem","in","item.principalPackageNames",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(28,w,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </tbody>\r\n            </table>\r\n          </div>\r\n          "),o=a.each.call(e,"freeViewItem","in","item.freeViewPckName",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(21,b,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        "),""}function w(e,t){var o;return t.buffer.push("              \r\n                <tr>\r\n                  <td>\r\n                    <div>"),o=a._triageMustache.call(e,"principalItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n                  </td>\r\n                </tr>              \r\n              "),""}function I(e,t){var o;return t.buffer.push("\r\n        <td>\r\n          <div>\r\n            <div>"),o=a._triageMustache.call(e,"item.prinPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n\r\n            <table>\r\n              <tbody>\r\n              "),o=a.each.call(e,"principalItem","in","item.principalPackageNames",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(28,w,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n             </tbody>\r\n            </table>\r\n          </div>\r\n          "),o=a.each.call(e,"freeViewItem","in","item.freeViewPckName",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(21,b,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        "),""}function x(e,t){var o;return t.buffer.push('\r\n        <td style="border-bottom-color:white; ">\r\n          <table>\r\n            <tbody>              \r\n          <div>\r\n            '),o=a._triageMustache.call(e,"item.prinPckStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),o=a.each.call(e,"principalStatusItem","in","item.principalPackageStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(33,M,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </div>\r\n              "),o=a.each.call(e,"freeViewStatus","in","item.freeViewPckStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(35,T,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </tbody>\r\n          </table>\r\n        </td>\r\n        "),""}function M(e,t){var o;return t.buffer.push("\r\n            <table>\r\n              <tbody>\r\n                <tr>\r\n                  <td>\r\n                    <div>\r\n                      "),o=a._triageMustache.call(e,"principalStatusItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n            "),""}function T(e,t){var o;return t.buffer.push("\r\n              <div>"),o=a._triageMustache.call(e,"freeViewStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n              "),""}function N(e,t){var o;return t.buffer.push("\r\n         "),o=a.if.call(e,"item.isSecondaryXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(40,O,t),fn:Re.program(38,P,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function P(e,t){var o;return t.buffer.push('\r\n        <td style="font-size:0;border-bottom-color:white">\r\n          <table>\r\n            <tbody>              \r\n          <div>\r\n            '),o=a._triageMustache.call(e,"item.prinPckStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),o=a.each.call(e,"principalStatusItem","in","item.principalPackageStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(33,M,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </div>\r\n              "),o=a.each.call(e,"freeViewStatus","in","item.freeViewPckStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(35,T,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </tbody>\r\n          </table>\r\n        </td>\r\n         "),""}function O(e,t){var o;return t.buffer.push("\r\n        "),o=a.if.call(e,"item.isXtraviewServiceForSecondaryDevice",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(43,R,t),fn:Re.program(41,B,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function B(e,t){var o;return t.buffer.push('\r\n        <td style="font-size:0;">\r\n          <table>\r\n            <tbody>              \r\n          <div>\r\n            '),o=a._triageMustache.call(e,"item.prinPckStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),o=a.each.call(e,"principalStatusItem","in","item.principalPackageStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(33,M,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </div>\r\n              "),o=a.each.call(e,"freeViewStatus","in","item.freeViewPckStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(35,T,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </tbody>\r\n          </table>\r\n        </td>\r\n        "),""}function R(e,t){var o;return t.buffer.push("\r\n        <td >\r\n          <div>\r\n            "),o=a._triageMustache.call(e,"item.prinPckStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            "),o=a.each.call(e,"principalStatusItem","in","item.principalPackageStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(33,M,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </div>\r\n          "),o=a.each.call(e,"freeViewStatus","in","item.freeViewPckStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(44,k,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        "),""}function k(e,t){var o;return t.buffer.push("\r\n          <div>"),o=a._triageMustache.call(e,"freeViewStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n          "),""}function A(e,t){var o;return t.buffer.push('\r\n        <td style="border-bottom-color:white; ">\r\n          <div>\r\n            '),o=a._triageMustache.call(e,"item.addOnPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            <table>              \r\n              <tbody>\r\n                <tr>\r\n                  <td>\r\n                    "),o=a.each.call(e,"addonNameItem","in","item.addOnPackageNames",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(47,K,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n             \r\n\r\n            </table>\r\n          </div>\r\n        </td>\r\n        "),""}function K(e,t){var o;return t.buffer.push("\r\n                    <div>"),o=a._triageMustache.call(e,"addonNameItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n                   "),""}function G(e,t){var o;return t.buffer.push("\r\n         "),o=a.if.call(e,"item.isSecondaryXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(53,V,t),fn:Re.program(50,L,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function L(e,t){var o;return t.buffer.push('\r\n        <td  style="font-size:0;border-bottom-color:white">\r\n          <div>\r\n            '),o=a._triageMustache.call(e,"item.addOnPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            <table>\r\n             <tbody>\r\n              "),o=a.each.call(e,"addonNameItem","in","item.addOnPackageNames",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(51,E,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n             </tbody>\r\n            </table>\r\n          </div>\r\n        </td>\r\n        "),""}function E(e,t){var o;return t.buffer.push("              \r\n                <tr>\r\n                  <td>\r\n                    <div>"),o=a._triageMustache.call(e,"addonNameItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n                  </td>\r\n                </tr>              \r\n              "),""}function V(e,t){var o;return t.buffer.push("\r\n        "),o=a.if.call(e,"item.isXtraviewServiceForSecondaryDevice",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(56,F,t),fn:Re.program(54,H,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function H(e,t){var o;return t.buffer.push('\r\n        <td style="font-size:0;">\r\n          <div>\r\n            '),o=a._triageMustache.call(e,"item.addOnPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            <table>\r\n             <tbody>\r\n              "),o=a.each.call(e,"addonNameItem","in","item.addOnPackageNames",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(51,E,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n             </tbody>\r\n            </table>\r\n          </div>\r\n        </td>\r\n        "),""}function F(e,t){var o;return t.buffer.push("\r\n        <td >\r\n          <div>\r\n            "),o=a._triageMustache.call(e,"item.addOnPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            <table>              \r\n              <tbody>\r\n                <tr>\r\n                  <td>\r\n                    "),o=a.each.call(e,"addonNameItem","in","item.addOnPackageNames",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(57,U,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                  </td>\r\n                </tr>\r\n              </tbody>              \r\n            </table>\r\n          </div>\r\n        </td>\r\n        "),""}function U(e,t){var o;return t.buffer.push("\r\n                    <div>"),o=a._triageMustache.call(e,"addonNameItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n                    "),""}function _(e,t){var o;return t.buffer.push('\r\n        <td style="border-bottom-color:white; ">\r\n          <div>\r\n            '),o=a._triageMustache.call(e,"item.addOnPckStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("            \r\n            <table>\r\n              <tbody>\r\n                <tr>\r\n                  <td>\r\n                    <div> \r\n                      "),o=a.each.call(e,"addonStatusItem","in","item.addOnPackageStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(60,Q,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n            <br/>           \r\n          </div>\r\n        </td>\r\n         "),""}function Q(e,t){var o;return t.buffer.push("\r\n                      "),o=a._triageMustache.call(e,"addonStatusItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                      <br/>\r\n                       "),""}function q(e,t){var o;return t.buffer.push("\r\n        "),o=a.if.call(e,"item.isSecondaryXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(65,j,t),fn:Re.program(63,$,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function $(e,t){var o;return t.buffer.push('\r\n        <td style="font-size:0;border-bottom-color:white">\r\n          <div>\r\n            '),o=a._triageMustache.call(e,"item.addOnPckStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            \r\n            <table>\r\n              <tbody>\r\n                <tr>\r\n                  <td>\r\n                    <div>\r\n                      "),o=a.each.call(e,"addonStatusItem","in","item.addOnPackageStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(60,Q,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n            <br/>         \r\n          </div>\r\n        </td>\r\n        "),""}function j(e,t){var o;return t.buffer.push("\r\n        "),o=a.if.call(e,"item.isXtraviewServiceForSecondaryDevice",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(69,Y,t),fn:Re.program(66,J,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function J(e,t){var o
;return t.buffer.push('\r\n        <td style="font-size:0;">\r\n          <div>\r\n            '),o=a._triageMustache.call(e,"item.addOnPckStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("            \r\n            <table>\r\n              <tbody>\r\n                <tr>\r\n                  <td>\r\n                    <div>\r\n                      "),o=a.each.call(e,"addonStatusItem","in","item.addOnPackageStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(67,z,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n            <br/>          \r\n          </div>\r\n        </td>\r\n        "),""}function z(e,t){var o;return t.buffer.push("\r\n                      "),o=a._triageMustache.call(e,"addonStatusItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                      <br/>\r\n                      "),""}function Y(e,t){var o;return t.buffer.push("\r\n        <td >\r\n          <div>\r\n            "),o=a._triageMustache.call(e,"item.addOnPckStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("          \r\n            <table>\r\n              <tbody>\r\n                <tr>\r\n                  <td>\r\n                    <div>\r\n                      "),o=a.each.call(e,"addonStatusItem","in","item.addOnPackageStatus",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(67,z,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n            <br/>          \r\n          </div>\r\n        </td>\r\n        "),""}function X(e,t){var o;return t.buffer.push('\r\n        <td style="border-bottom-color:white; ">\r\n          <table>\r\n          <tbody>\r\n          <div>'),o=a._triageMustache.call(e,"item.xtraviewService",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.insuranceServices",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.boxOffice",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>          \r\n          <div>"),o=a._triageMustache.call(e,"item.accessService",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          "),o=a.each.call(e,"accessNameItem","in","item.accessServiceNames",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(72,W,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          <div>"),o=a._triageMustache.call(e,"item.DPP24Service",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          "),o=a.each.call(e,"DPPNameItem","in","item.DPP24ServiceNames",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(74,Z,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n           </tbody>\r\n        </table>  \r\n        </td>           \r\n        "),""}function W(e,t){var o;return t.buffer.push("\r\n          <div>"),o=a._triageMustache.call(e,"accessNameItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</div>\r\n          "),""}function Z(e,t){var o;return t.buffer.push("\r\n          <div>\r\n            "),o=a._triageMustache.call(e,"DPPNameItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </div>\r\n          "),""}function ee(e,t){var o;return t.buffer.push("\r\n         "),o=a.if.call(e,"item.isSecondaryXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(79,ae,t),fn:Re.program(77,te,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function te(e,t){var o;return t.buffer.push('     \r\n        <td style="border-bottom-color:white">\r\n          <table>\r\n          <tbody>\r\n          <div>'),o=a._triageMustache.call(e,"item.xtraviewService",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.insuranceServices",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.boxOffice",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.accessService",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          "),o=a.each.call(e,"accessNameItem","in","item.accessServiceNames",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(72,W,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          <div>"),o=a._triageMustache.call(e,"item.DPP24Service",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          "),o=a.each.call(e,"DPPNameItem","in","item.DPP24ServiceNames",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(74,Z,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </tbody>\r\n            </table>\r\n        </td>\r\n        "),""}function ae(e,t){var o;return t.buffer.push("\r\n        <td>\r\n         <table>\r\n          <tbody>\r\n          <div>"),o=a._triageMustache.call(e,"item.xtraviewService",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.insuranceServices",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.boxOffice",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.showMax",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.accessService",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          "),o=a.each.call(e,"accessNameItem","in","item.accessServiceNames",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(72,W,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          <div>"),o=a._triageMustache.call(e,"item.DPP24Service",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          "),o=a.each.call(e,"DPPNameItem","in","item.DPP24ServiceNames",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(80,oe,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("         \r\n          </tbody>\r\n         </table>\r\n        </td>\r\n        "),""}function oe(e,t){var o;return t.buffer.push("\r\n\r\n          <div>\r\n            "),o=a._triageMustache.call(e,"DPPNameItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </div>\r\n          "),""}function se(e,t){var o;return t.buffer.push('                      \r\n        <td style="border-bottom-color:white; ">\r\n          <table>\r\n          <tbody> \r\n          <div>'),o=a._triageMustache.call(e,"item.xtraviewServiceStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.insuranceServicesStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.boxOfficeStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.accessServiceStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          "),o=a.each.call(e,"accessStatusItem","in","item.accessServiceStatusAll",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(83,re,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n           <div>"),o=a._triageMustache.call(e,"item.DPP24ServiceStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          "),o=a.each.call(e,"DPPStatusItem","in","item.DPP24ServiceStatusAll",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(85,ne,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n         </tbody>\r\n        </table>\r\n        </td>\r\n         "),""}function re(e,t){var o;return t.buffer.push("\r\n          <div>\r\n            "),o=a._triageMustache.call(e,"accessStatusItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </div>\r\n          "),""}function ne(e,t){var o;return t.buffer.push("\r\n          <div>\r\n            "),o=a._triageMustache.call(e,"DPPStatusItem",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </div>\r\n          "),""}function ie(e,t){var o;return t.buffer.push("\r\n          "),o=a.if.call(e,"item.isSecondaryXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(90,le,t),fn:Re.program(88,ce,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function ce(e,t){var o;return t.buffer.push(' \r\n        <td style="border-bottom-color:white">\r\n          <table>\r\n          <tbody> \r\n          <div>'),o=a._triageMustache.call(e,"item.xtraviewServiceStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.insuranceServicesStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.boxOfficeStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.accessServiceStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          "),o=a.each.call(e,"accessStatusItem","in","item.accessServiceStatusAll",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(83,re,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n           <div>"),o=a._triageMustache.call(e,"item.DPP24ServiceStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          "),o=a.each.call(e,"DPPStatusItem","in","item.DPP24ServiceStatusAll",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(85,ne,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </tbody>\r\n        </table>\r\n        </td>\r\n        "),""}function le(e,t){var o;return t.buffer.push("\r\n        <td>\r\n          <table>\r\n          <tbody> \r\n          <div>"),o=a._triageMustache.call(e,"item.xtraviewServiceStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.insuranceServicesStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.boxOfficeStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.showMaxStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          <div>"),o=a._triageMustache.call(e,"item.accessServiceStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          "),o=a.each.call(e,"accessStatusItem","in","item.accessServiceStatusAll",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(83,re,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n           <div>"),o=a._triageMustache.call(e,"item.DPP24ServiceStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push(" </div>\r\n          "),o=a.each.call(e,"DPPStatusItem","in","item.DPP24ServiceStatusAll",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(85,ne,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </tbody>\r\n        </table>\r\n        </td>\r\n        "),""}function de(e,t){var o;return t.buffer.push("\r\n                "),o=a.if.call(e,"item.isXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(95,he,t),fn:Re.program(93,ue,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n       "),""}function ue(e,t){var o;return t.buffer.push("\r\n                <td>\r\n                    "),o=a._triageMustache.call(e,"item.agreementChargePeriod",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n                "),""}function he(e,t){var o;return t.buffer.push("\r\n                "),o=a.if.call(e,"item.isSecondaryXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(96,me,t),fn:Re.program(93,ue,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n       "),""}function me(e,t){var o;return t.buffer.push("\r\n                "),o=a.if.call(e,"item.isXtraviewServiceForSecondaryDevice",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(97,ge,t),fn:Re.program(93,ue,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n      "),""}function ge(e,t){var o;return t.buffer.push("\r\n                <td>\r\n                    "),o=a._triageMustache.call(e,"item.agreementChargePeriod",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n                </td>\r\n     "),""}function pe(e,t){var o;return t.buffer.push('\r\n        <td style="border-bottom-color:white; ">\r\n          <table>\r\n        <tbody>\r\n          '),o=a.each.call(e,"viewperiod","in","item.viewingPeriod",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(100,ve,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </tbody>\r\n          </table>\r\n        </td>\r\n        "),""}function ve(e,t){var o;return t.buffer.push("\r\n          <div>\r\n            "),o=a._triageMustache.call(e,"viewperiod",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </div>\r\n          "),""}function fe(e,t){var o;return t.buffer.push("\r\n        "),o=a.if.call(e,"item.isSecondaryXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(105,Ce,t),fn:Re.program(103,be,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function be(e,t){var o;return t.buffer.push('\r\n        <td style="font-size:0;border-bottom-color:white">\r\n          <table>\r\n            <tbody>                       \r\n          '),o=a.each.call(e,"viewperiod","in","item.viewingPeriod",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(100,ve,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </tbody>\r\n          </table>\r\n        </td>\r\n        "),""}function Ce(e,t){var o;return t.buffer.push("\r\n        "),o=a.if.call(e,"item.isXtraviewServiceForSecondaryDevice",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(109,ye,t),fn:Re.program(106,Se,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function Se(e,t){var o;return t.buffer.push('\r\n        <td style="font-size:0;">\r\n          <table>\r\n            <tbody>\r\n              '),o=a.each.call(e,"viewperiod","in","item.viewingPeriod",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(107,De,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n            </tbody>\r\n          </table>\r\n        </td>\r\n        "),""}function De(e,t){var o;return t.buffer.push("\r\n              <div>\r\n                "),o=a._triageMustache.call(e,"viewperiod",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n              </div>\r\n              "),""}function ye(e,t){var o;return t.buffer.push("\r\n        <td>\r\n          <table>\r\n            <tbody>                        \r\n          "),o=a.each.call(e,"viewperiod","in","item.viewingPeriod",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.noop,fn:Re.program(100,ve,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n          </tbody>\r\n          </table>\r\n        </td>\r\n        "),""}function we(e,t){var o;return t.buffer.push('\r\n        <td style="border-bottom-color:white;">\r\n          '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"viewDeviceInformation",size:"xs",disableBinding:"item.isPCBO"},hashTypes:{action:"STRING",size:"STRING",disableBinding:"STRING"},hashContexts:{action:e,size:e,disableBinding:e},inverse:Re.noop,fn:Re.program(112,Ie,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n         "),""}function Ie(e,t){var o,s;t.buffer.push(Be((o=a.loc||e&&e.loc,s={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:viewingGridColumnHeaders.view",s):ke.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.view",s))))}function xe(e,t){var o;return t.buffer.push("\r\n          "),o=a.if.call(e,"item.isSecondaryXtraviewService",{hash:{},hashTypes:{},hashContexts:{},inverse:Re.program(117,Te,t),fn:Re.program(115,Me,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        "),""}function Me(e,t){var o;return t.buffer.push('\r\n        <td style="border-bottom-color:white;">\r\n          '),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"viewDeviceInformation",size:"xs",disableBinding:"item.isPCBO"},hashTypes:{action:"STRING",size:"STRING",disableBinding:"STRING"},hashContexts:{action:e,size:e,disableBinding:e},inverse:Re.noop,fn:Re.program(112,Ie,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("\r\n        </td>\r\n        "),""}function Te(e,t){var o;return t.buffer.push("\r\n        <td>"),o=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"viewDeviceInformation",size:"xs",disableBinding:"item.isPCBO"},hashTypes:{action:"STRING",size:"STRING",disableBinding:"STRING"},hashContexts:{action:e,size:e,disableBinding:e},inverse:Re.noop,fn:Re.program(112,Ie,t),contexts:[e],types:["ID"],data:t}),(o||0===o)&&t.buffer.push(o),t.buffer.push("</td>\r\n        "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),s=s||{};var Ne,Pe,Oe,Be=this.escapeExpression,Re=this,ke=a.helperMissing;return s.buffer.push("<div "),s.buffer.push(Be(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:s}))),s.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),s.buffer.push(Be((Pe=a.loc||t&&t.loc,Oe={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},Pe?Pe.call(t,"locale.manageviewing:general.manageViewTile",Oe):ke.call(t,"loc","locale.manageviewing:general.manageViewTile",Oe)))),s.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/customerProfile">&lt;'),s.buffer.push(Be((Pe=a.loc||t&&t.loc,Oe={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:s},Pe?Pe.call(t,"locale.manageAccount.editPaymentDetails:general.backLink",Oe):ke.call(t,"loc","locale.manageAccount.editPaymentDetails:general.backLink",Oe)))),s.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n  "),Ne=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.customerprofile.customerprofile:general.packageInformationTitle~",linksBinding:"collapsibleAccountInfoLinks",visibleBinding:"isGridDataAvailable"},hashTypes:{title:"STRING",linksBinding:"STRING",visibleBinding:"STRING"},hashContexts:{title:t,linksBinding:t,visibleBinding:t},inverse:Re.noop,fn:Re.program(1,r,s),contexts:[t],types:["ID"],data:s}),(Ne||0===Ne)&&s.buffer.push(Ne),s.buffer.push("\r\n  "),s.buffer.push(Be(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.manageviewing:general.noserviceErrorMessage~",visibleBinding:"isDeviceOrPackageExist"},hashTypes:{text:"STRING",visibleBinding:"STRING"},hashContexts:{text:t,visibleBinding:t},contexts:[t],types:["ID"],data:s}))),s.buffer.push("\r\n  <br/>\r\n\r\n\r\n</div>"),""}),Komodo.Application.ManageViewingView=Komodo.UI.View.extend({viewKey:"ManageViewingView"}),Komodo.Application.DeviceAgreementManagementView=Komodo.UI.View.extend({viewKey:"DeviceAgreementManagementView",templateName:"DeviceAgreementManagementView"}),Komodo.Application.BoxOfficeTransactionDetailsView=Komodo.UI.View.extend({viewKey:"BoxOfficeTransactionDetailsView",templateName:"BoxOfficeTransactionDetailsView"}),Komodo.Application.DeviceInfoView=Komodo.UI.View.extend({viewKey:"DeviceInfoView",templateName:"DeviceInfoView"}),Komodo.Application.ReturnsController=Komodo.UI.Controller.extend({_locale:"",_checkBoxTrigger:!1,_hardwareSaleReturnCodes:[],_useReturnReason:!1,init:function(){try{this._super();var e=this;Komodo.log("Constructing Returns controller."),e.set("processVersion","v1.1"),e.set("processName","Returns"),this.requiresDependency("_stockService",{singleton:Komodo.Services.stockService})}catch(e){this.handleException("init - Returns",e,!0,!0)}},start:function(){try{this._super();var e=this;e._locale="locale.manageStock:returns.",e.registerModel("data",Komodo.Models.ReturnsModel),this.getStockService().setCustomerID(this,this.get("data"),"customerID","/manageViewing",null),e.data.set("isSalesOrderGridVisible",!1),this.getStockService().setCountryISO(this.get("data"),"countryISO",null),Komodo.Services.featureToggleService.isEnabled("HardwareSale","IgnoreReturnReason").done(function(t){Ember.run(function(){e.set("_useReturnReason",!t)}),e._useReturnReason&&e.getStockService().fillObjectFromCachedFileServiceArray(e,"_hardwareSaleReturnCodes","HardwareSaleReturnCodes")})}catch(e){this.handleException("start",e,!0,!0)}},stop:function(){this._super()},actions:{retrieveOrder:function(){try{var e=this;if(void 0==e.data.quoteDeviceNumber||""==e.data.quoteDeviceNumber)return void Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"returns"),"<strong>"+kl.value(e._locale+"deviceNumber")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning");if(e._useReturnReason&&(void 0==e.data.Reason||""==e.data.Reason))return void Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"returns"),"<strong>"+kl.value(e._locale+"reasonCode")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning");e.data.set("isSalesOrderGridVisible",!1),e.data.set("lblSalesOrder",""),e.data.gridQuoteDeviceHistory.clear(),e.data.gridTotalQuoteDeviceHistory.clear(),e.retrieveReturns()}catch(e){Komodo.Controls.MessageBoxController.show("Error","Error: "+e,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}},createReturnOrder:function(){try{var e=this,t={};t.ListOfHardware={},t.ListOfHardware.Hardware=[],t.MethodOfPayment=null,t.LocationID=null,t.Username=null,t.Country=this.get("data.countryISO"),t.ReturnReason=e._useReturnReason?this.get("data.Reason"):null,e.data.get("gridQuoteDeviceHistory").forEach(function(e){if(1==e.checked){t.ReferenceID=e.UID;var a={};null!=e.DeviceNumber&&""!=e.DeviceNumber&&(a.SerialNumber=e.DeviceNumber),a.ProductDetail={},a.ProductDetail.Model=e.FromModel,t.ListOfHardware.Hardware.push(a)}}),t.ListOfHardware.Hardware.length>0?this.getStockService().publishRequestOnBus(this,this.get("processId"),t,"CreateReturnOrder","v1"):Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"returns"),"<strong>"+kl.value(e._locale+"deviceForprocessing")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning")}catch(e){Komodo.Controls.MessageBoxController.show("Error","Error: "+e,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}}},checkedRow:function(){if(0==this._checkBoxTrigger)try{this._checkBoxTrigger=!0;var e=this,t=0,a=0,o=0;e.data.gridTotalQuoteDeviceHistory.clear(),e.data.get("gridQuoteDeviceHistory").forEach(function(e){1==e.checked&&(t+=parseFloat(e.deviceCost),a+=parseFloat(e.totalTax),o+=parseFloat(e.totalPrice))}),e.data.get("gridTotalQuoteDeviceHistory").pushObject(Komodo.Models.HardwaresDataGridMVModel.create({FromModel:kl.value(e._locale+"total"),deviceCost:(Math.round(100*t)/100).toFixed(2),totalTax:(Math.round(100*a)/100).toFixed(2),totalPrice:(Math.round(100*o)/100).toFixed(2),checked:!1}))}catch(e){this.handleException("checkedRow",e,!0,!0)}finally{this._checkBoxTrigger=!1}}.observes("data.gridQuoteDeviceHistory.@each.checked"),retrieveReturns:function(){try{var e=this;this.getStockService().retrieveReturns(this,e.get("processId"),e.data.get("quoteDeviceNumber"),e.data.get("customerID"),function(t){e.data.set("isSalesOrderGridVisible",!0),e.data.set("lblSalesOrder",e.data.get("quoteDeviceNumber"));var a,o=Komodo.canonicalFacadeFactory(t.Payload,["ListOfHardware"]),s=o.get("ListOfHardware");if(a=e.getArrayItem(s),!(a.length>0))return Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"noDevicesLoaded"),kl.value(e._locale+"customerRequired"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"),void this.transitionToRoute("/manageViewing");null!=s?a.forEach(function(a){if(null!=a){var o=null;if(null!=a.ProductDetail&&null!=a.ProductDetail.Price&&null!=a.ProductDetail.Price.ListOfTax){var s=a.ProductDetail.Price.ListOfTax;s.length>0&&(o=s[0].Amount)}e.data.get("gridQuoteDeviceHistory").pushObject(Komodo.Models.HardwaresDataGridMVModel.create({DeviceNumber:a.SerialNumber,FromModel:e.getStockService().guardAgainstNullValue(a,"ProductDetail.Model"),deviceCost:(-Math.abs(e.getStockService().guardAgainstNullValue(a,"ProductDetail.Price.ValueWithoutTax"))).toFixed(2),totalTax:(-Math.abs(o)).toFixed(2),totalPrice:(-Math.abs(e.getStockService().guardAgainstNullValue(a,"ProductDetail.Price.Value"))).toFixed(2),UID:e.getStockService().guardAgainstNullValue(t,"Payload.CustomerUID"),checked:!1}))}}):Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"setDeviceStolen"),"<strong>"+kl.value(e._locale+"noDeviceFound")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")})}catch(e){Komodo.Controls.MessageBoxController.show("Error","Error: "+e,Komodo.Controls.MessageBoxOkButtons,this,"retrieveHardwareError","danger")}},getStockService:function(){return this.get("_stockService")},messageReturnOrderCreatedReceived:function(e){try{var t=this;Komodo.Services.busyService.stop(this.get("processId"),"blocking");Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"returns"),"<strong>"+kl.value(t._locale+"returnCreatedSuccessfully")+"'"+e.ResponseMessage.Payload.ReturnOrderID+"'</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","success").response=function(e){"ok"==e&&t.transitionToRoute("/manageViewing")}}catch(e){this.handleException("messageReturnOrderCreatedReceived",e,!0,!0)}},getArrayItem:function(e){try{return $.makeArray(e)}catch(e){this.handleException("getArrayItem",e,!0,!0)}},handleException:function(e,t,a,o){try{var s="Error in function ["+e+"]. Exception: "+t+".";a&&(Komodo.log(s),null!=t&&null!=t.stack&&Komodo.log(t.stack)),o&&Komodo.Controls.MessageBoxController.show("An error has occurred",s,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}catch(e){Komodo.log(e)}},messageFailureMessageEventReceived:function(e){try{var t=this;Komodo.Services.busyService.stop(this.get("processId"),"blocking"),"CreateInteraction"!=e.ResponseMessage.Payload.OriginatedEventName?Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"):Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,kl.value(t._locale+"problemCRM"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}catch(e){this.handleException("messageFailureMessageEventReceived",e,!0,!0)}},messageHandle:function(e,t){try{var a=this;Komodo.Services.busyService.stop(this.get("processId"),"blocking"),null!=e&&null!=e.payload&&null!=e.payload.Header?Komodo.Controls.MessageBoxController.show(kl.value(a._locale+"messageReceivedFailure"),t+" Message type: '"+e.payload.Header.EventName+"', Process: '"+e.payload.Header.ProcessName+"'.",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"):(Komodo.UI.error("[messageHandle.messageFault] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(a._locale+"aProblemOccurred"),kl.value(a._locale+"messageEventName")+e.messageId,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"))}catch(e){this.handleException("messageHandle",e,!0,!0)}},messageReceived:function(e){try{var t=this;this.messageHandle(e,kl.value(t._locale+"successfulMessage"))}catch(e){this.handleException("messageReceived",e,!0,!0)}},messageDeliveryFailure:function(e){try{var t=this
;this.messageHandle(e,kl.value(t._locale+"communicationFailure"))}catch(e){this.handleException("messageDeliveryFailure",e,!0,!0)}},messageFault:function(e){try{var t=this;this.messageHandle(e,kl.value(t._locale+"faultException"))}catch(e){this.handleException("messageFault",e,!0,!0)}},publishRequestOnBus:function(e,t,a){try{var o=this;Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,6e4,"blocking",this),Komodo.Services.customerProfileService.publishEvent(this,e,t,a).done(function(){Komodo.log("Event Message for '"+t+"' has published successfully.")}).fail(function(e){Komodo.log("Event Message for '"+t+"' has failed."),Komodo.Services.busyService.stop(this.get("processId"),"blocking"),Komodo.Controls.MessageBoxController.show(kl.value(o._locale+"eventFailed")+t,e,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")})}catch(e){Komodo.Services.busyService.stop(this.get("processId"),"blocking"),this.handleException("publishRequestOnBus",e,!0,!0)}}}),Komodo.Application.DeviceLinkView=Komodo.UI.View.extend({viewKey:"DeviceLinkView",templateName:"DeviceLinkView"}),Komodo.Application.BoxOfficeUnallocatedView=Komodo.UI.View.extend({viewKey:"BoxOfficeUnallocatedView",templateName:"BoxOfficeUnallocatedView"}),Komodo.Application.DeviceProductView=Komodo.UI.View.extend({viewKey:"DeviceProductView",templateName:"DeviceProductView"}),Komodo.Application.ChangeResidenceTypeController=Komodo.UI.Controller.extend({init:function(){var e=this;e.registerModel("data",Komodo.Models.AssociateProductsModel),e.set("data.customerRefNo",void 0),e._super()},start:function(){var e=this;e.getLookUpData().done(function(){e.set("addressInformation",Komodo.Models.AddressModel.create()),Komodo.Services.featureToggleService.isEnabled("AssociateProducts","AlignHMOPToGeneral").done(function(t){e.set("isMOPRequiredForHH",t)}).fail(function(e){Komodo.Services.log("Error while checking feature toggle. Error Details:"+e)}),e.getCustomerDetails()}),e.set("paymentTypesList",[{value:Komodo.MOP.DEBIT_ORDER,title:kl.value(e.localeBase+"debitOrder")},{value:Komodo.MOP.CASH,title:kl.value(e.localeBase+"cash")}]),this._super()},getValueFromConstant:function(e,t){return Komodo.Services.ManageViewingService.getValueFromConstant(e,t)},getLookUpData:function(){var e=this,t=void 0,a=void 0,o=void 0,s=$.Deferred();return t=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),a=Komodo.Services.localizationService.getCurrentLanguage(),Komodo.Services.cachedDataService.fetch("InvoicePeriod",{}).done(function(r){e.set("chargePeriods",[]),$.each(r,function(t,a){"NONE"!==a.value.toUpperCase()&&"QUARTERLY"!==a.value.toUpperCase()&&e.get("chargePeriods").addObject(a)}),Komodo.UI.cacheDataService.getHardwareCpc(),Komodo.Services.cachedDataService.fetch("Location").done(function(r){var n=JSON.parse(r);e.set("countries",[]),$.each($.makeArray(n.Countries.Country),function(t,a){e.get("countries").addObject(a)}),Komodo.Services.cachedDataService.fetch("Country").done(function(r){e.set("isoData",[]),e.set("isoData",r),e.isoData.forEach(function(e){t===e.key&&(o=e.key)}),void 0!==o&&e.set("country",o),Komodo.Services.cachedDataService.fetch("MethodOfPayment").done(function(o){$.each(o,function(t,a){a.key===Komodo.MOP.CASH&&e.methodsOfPaymentCanonical.addObject(a)}),Komodo.Services.featureToggleService.isEnabled("EditPaymentDetails","RemovePaymentDay1").done(function(o){Komodo.Services.cachedDataService.fetch("InvoiceDay",{domain:t,qualifier:a}).done(function(t){t=t.sort(function(e,t){return parseInt(e.key,10)>parseInt(t.key,10)?1:parseInt(e.key,10)<parseInt(t.key,10)?-1:0}),$.each(t,function(t,a){"29"!==a.key&&("1"===a.key?o||e.get("debitOderDays").addObject(a):e.get("debitOderDays").addObject(a))}),Komodo.Services.featureToggleService.isEnabled("CustomerGlobal","EnableAddressOverRide").done(function(t){e.set("_enableAddressOverRide",t),Komodo.Services.cachedDataService.fetch("ProductCategoryAndProductDetail").done(function(t){e.set("productCategoryAndProductDetail",[]),e.set("productCategoryAndProductDetail",JSON.parse(t).ProductCategories.ProductCategory),e.populateHierachicalCDMDataSet("EstablishmentTypeRelationship",e.residenceTypes),e.set("resTypeIncludingHH",e.get("residenceTypes")),e.set("resTypeExcludingHH",$.grep(e.get("residenceTypes"),function(t){return t.CanonicalKey!==e.getValueFromConstant("ProductsConstants","productsConstants.products.HOLIDAYHOME_CANONICALKEY")})),s.resolve()}).fail(function(){Komodo.error("[ERROR] : could not retrieve feature toggle ProductCategoryAndProductDetail")})}).fail(function(){Komodo.error("[ERROR] : could not retrieve feature toggle CustomerGlobal.EnableAddressOverRide")})}).fail(function(){Komodo.error("[ERROR] : could not retrieve hierarchical CDM data for InvoiceDay")})}).fail(function(){Komodo.error("[ERROR] : could not retrieve toggle feature RemovePaymentDay1")})}).fail(function(){Komodo.error("[ERROR] : could not retrieve MethodOfPayment")})}).fail(function(){Komodo.error("[ERROR] : could not retrieve CountryISO ")})}).fail(function(){Komodo.error("[ERROR] : could not retrieve Location ")})}).fail(function(){Komodo.error("[ERROR] : could not retrieve InvoicePeriod ")}),s},getCustomerDetails:function(){var e=this,t=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),a=Komodo.Services.customerProfileService.getCustomerPersonalDetail();if(void 0!==a&&void 0!==a.customerNo&&(e.get("customerPersonalDetails").pushObject({firstName:a.firstName,surname:a.lastName,residenceType:void 0,deviceUsage:"Customer"}),e.set("_customerClassSelected",a.customerClass),e.set("_customerTypeSelected",a.typeId)),t.isCustomerIdIsAvailableToRetriveData()){if(e.set("data.customerRefNo",t.getCustomerIdToRetrieveData()),Ember.isEmpty(Komodo.Services.customerProfileService.getFinancialAccounts().ResponseMessage)||Ember.isEmpty(Komodo.Services.customerProfileService.getFinancialAccounts().ResponseMessage.Payload.ListOfAccount.Account)){var o=Komodo.Controls.MessageBoxController.show(kl.value(e.localeBase+"useCaseTitle"),kl.value(e.localeBase+"noFinancialAccount"),Komodo.Controls.MessageBoxOkButtons,e,"id123456","danger");o.response=function(e){"ok"===e&&Komodo.Services.uiService.transitionTo("/account")}}else{var s=void 0,r=void 0;e.hardwareAddressDetails.clear(),e.getAgreementDetails(Komodo.Services.customerProfileService.getFinancialAccounts().ResponseMessage.Payload.ListOfAccount.Account),$.each(Komodo.Services.customerProfileService.getFinancialAccounts().ResponseMessage.Payload.ListOfAccount.Account,function(t,o){e.get("activeGeneralCount")>0&&$.each(o.ListOfAgreement.Agreement,function(t,n){Ember.isEmpty(n.ListOfHardware.Hardware)||n.Type!==Komodo.AgreementTypes.BOX_OFFICE&&(r=void 0!==n.PersonalDetail?{firstName:n.PersonalDetail.FirstName,surname:n.PersonalDetail.Surname}:{firstName:a.firstName,surname:a.lastName},s=void 0!==n.ListOfAddress.Address[0]?e.addressMapper(n.ListOfAddress.Address[0],n.Type):void 0,$.grep(e.get("listOfAddresses"),function(e){return e.dlAddress===s.dlAddress}).length>0?$.grep(e.get("listOfAddresses"),function(e){return e.dlAddress===s.dlAddress})[0].numberOfDecoders=$.grep(e.get("listOfAddresses"),function(e){return e.dlAddress===s.dlAddress})[0].numberOfDecoders+1:e.get("listOfAddresses").pushObject(s),$.each(n.ListOfHardware.Hardware,function(t,a){0===a.SecondaryHardware.Hardware.length&&e.extractHardwareDetails(a,n,o.PaymentDetail,s,r,!1)}))})}),Ember.isEmpty(e.get("gridData"))?e.set("showGridData",!1):e.set("showGridData",!0)}return!0}var o=Komodo.Controls.MessageBoxController.show(kl.value(e.localeBase+"customerNotFound"),kl.value(e.localeBase+"searchCustomer"),Komodo.Controls.MessageBoxOkButtons,e,"id123456","danger");return o.response=function(e){"ok"==e&&Komodo.Services.uiService.transitionTo("/home")},!1},getAgreementDetails:function(e){var t=this;$.each(e,function(e,a){$.each(a.ListOfAgreement.Agreement,function(e,a){Ember.isEmpty(a.ListOfHardware.Hardware)||(a.Type===Komodo.AgreementTypes.GENERAL||a.Type===Komodo.AgreementTypes.EMPLOYEE?(t.set("generalCount",t.generalCount+1),$.each(a.ListOfHardware.Hardware,function(e,a){$.each(a.ListOfService.Service,function(e,a){Ember.isEmpty(a)||a.ProductDetail.Type!==t.getValueFromConstant("ProductsConstants","productsConstants.products.PRINCIPAL_CATEGORY")||a.Status.toUpperCase()!==t.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_ACTIVE")||t.set("activeGeneralCount",t.activeGeneralCount+1)})})):a.Type===Komodo.AgreementTypes.HOLIDAY_HOME&&t.set("holidayHomeCount",t.holidayHomeCount+1))})})},extractHardwareDetails:function(e,t,a,o,s,r){var n,i,c,l,d,u,h,m,g,p=this,v=void 0,f=0;n=void 0!==e.ProductDetail.Model?e.ProductDetail.Model.split(" ")[0]:"",i=void 0!==e.ProductDetail.Name?e.ProductDetail.Name:"",c=void 0!==e.SerialNumber?e.SerialNumber:void 0,l=void 0!==e.SmartcardDetail&&void 0!==e.SmartcardDetail.Model&&null!==e.SmartcardDetail.Model?e.SmartcardDetail.Model.split(" ")[1]:void 0,void 0!==e.ListOfService&&void 0!==e.ListOfService.Service&&e.ListOfService.Service.length>0&&(v=e.ListOfService),h=e.ProductDetail.UID,m=e.InsuranceStatus,g=t.TermOfPayment,u=void 0!==h&&null!==h?p.getDecoderCpcByproductId(h):void 0,Komodo.UI.cacheDataService.isGotvDevice(u)?(d=void 0!==e.MACAddress?e.MACAddress:void 0,f=3):Komodo.UI.cacheDataService.isMobileDevice(u)?(d=void 0!==e.MACAddress?e.MACAddress:void 0,f=2):(d=void 0!==e.LinkedSmartcard?e.LinkedSmartcard:void 0,f=1),c&&(p.addDecoderInList(n,i,c,l,d,u,v,h,m,t,g,o,void 0!==a?a:void 0,s,!1,f,r),(Ember.isEmpty(v)&&!Ember.isEmpty(t.UID)||!Ember.isEmpty(v)&&1===v.Service.length&&(v.Service[0].ProductDetail.Type===p.getValueFromConstant("ProductsConstants","productsConstants.products.INSURANCE_CATEGORY")||v.Service[0].ProductDetail.Description===p.getValueFromConstant("ProductsConstants","productsConstants.products.BOX_OFFICE")))&&(t.Type===Komodo.AgreementTypes.HOLIDAY_HOME?p.gridData.pushObject({deviceName:i,deviceSerialNo:c,addressDetails:o,locationDetails:t.LocationIndicator,deviceSelected:!1}):t.Type!==Komodo.AgreementTypes.GENERAL&&t.Type!==Komodo.AgreementTypes.EMPLOYEE||2===f||p.gridData.pushObject({deviceName:i,deviceSerialNo:c,addressDetails:o,locationDetails:t.LocationIndicator,deviceSelected:!1})))},addDecoderInList:function(e,t,a,o,s,r,n,i,c,l,d,u,h,m,g,p){var v=this;if(void 0===v.getDeviceDetails(a,!0)){var f=Ember.Object.extend({init:function(){this._super();var g=this;g.display=t+"-"+a,g.decoderType=t,g.decoderSerialNumber=a,g.smartcardType=o,g.isSmartcardTypePresent=void 0!==o,g.smartcardSerialNumber=s,g.decoderModel=e,g.selectedSecondaryDecoderno=void 0,g.decoderCpcType=r,g.servicesDetails=n,g.insurance=c,g.principal=void 0,g.addOn=void 0,g.access=void 0,g.changeAgreement=!1,g.agreemntUId=void 0===l?void 0:l.UID,g.set("isGotvDecoder",3===p),g.set("isMobileDecoder",2===p),g.agreemntTypeID=void 0===l?void 0:l.Type,g.agreemntTypeID===Komodo.AgreementTypes.HOLIDAY_HOME&&(g.isHoliDayHome=!0),g.termOfPayment=d,g.UID=i,g.isPrimaryDecoder=!0,g.addressDetails=u,g.paymentDetail=h,g.principalProductCount=0,g.customerPersonalDetails=m,g.set("isPrincipalPresent",!1),g.set("isAddOnPresent",!1),g.set("isHdAddOnPresent",!1),g.set("isAccessPresent",!1),g.set("hasAccessPresent",!1),g.set("isInsurenceStatusPresent",!1),g.isDisconnected=void 0,g.isPrincipleNotActive=void 0,g.isAddonNotActive=void 0,g.isHdAddonNotActive=void 0,g.isAccessNotActive=void 0,g.isPrincipalActive=!1,g.set("isStolenSuspended",!1),void 0===g.agreemntUId?g.set("isExisting",!0):g.set("isExisting",!1),g.startDate=void 0,g.modifiable="Y",g.schedule="N",void 0!==g.servicesDetails&&void 0!==g.servicesDetails.Service?g.productLength=g.servicesDetails.Service.length:g.productLength=0,g.isPrincipleNotActive&&g.isAddonNotActive&&g.isAccessNotActive?(g.isDisconnected=!0,g.servicesDetails=void 0):g.isDisconnected=!1,void 0!==g.startDate&&new Date(g.startDate)>=new Date?g.startDate=new Date(g.startDate):g.startDate=new Date,g.dd=g.startDate.getUTCDate()<=9?"0"+g.startDate.getUTCDate():g.startDate.getUTCDate(),g.mm=1*g.startDate.getUTCMonth()+1<=9?"0"+(1*g.startDate.getUTCMonth()+1):1*g.startDate.getUTCMonth()+1,g.yyyy=g.startDate.getUTCFullYear(),g.startDate=g.dd+"-"+g.mm+"-"+g.yyyy,void 0===g.principal?g.principal="":g.principal=g.principal,void 0===g.addOn?g.addOn="":g.addOn=g.addOn,void 0===g.access?g.access="":g.access=g.access,Ember.isEmpty(c)||g.set("isInsurenceStatusPresent",!0)},disable:function(){var e=!0,t=this.get("secondaryDevicesList");return Ember.isEmpty(t)||t.length>0&&(e=!1),e}.property()}).create();v.get("data.selectedproductData").pushObject(f)}},getDeviceDetails:function(e,t){var a=this,o=void 0;return $.each(a.get("data.selectedproductData"),function(a,s){return e!==s.decoderSerialNumber||t?e===s.decoderSerialNumber&&t&&(o=s):o=s.agreemntUId,void 0===o}),o},addressMapper:function(e,t){var a={country:""!==e.Country&&void 0!==e.Country?e.Country:void 0,province:""!==e.Province&&void 0!==e.Province?e.Province:void 0,city:""!==e.City&&void 0!==e.City?e.City:void 0,suburb:""!==e.Suburb&&void 0!==e.Suburb?e.Suburb:void 0,postalCode:""!==e.PostCode&&void 0!==e.PostCode?e.PostCode:void 0,building:""!==e.BuildingName&&void 0!==e.BuildingName?e.BuildingName:void 0,streetName:""!==e.Street&&void 0!==e.Street?e.Street:void 0,boxOrSuite:""!==e.PostBoxNumber&&void 0!==e.PostBoxNumber?e.PostBoxNumber:void 0,unit:""!==e.HouseNumber?e.HouseNumber:void 0,dlAddress:void 0,isAddressOverride:!this.get("_enableAddressOverRide")||!e.IsVerified,agreementType:t===Komodo.AgreementTypes.EMPLOYEE?Komodo.AgreementTypes.GENERAL:t,numberOfDecoders:1},o=void 0!==a.boxOrSuite&&null!==a.boxOrSuite?a.boxOrSuite+", ":"",s=void 0!==a.streetName&&null!==a.streetName?a.streetName+", ":"",r=void 0!==a.unit&&null!==a.unit?a.unit+", ":"",n=void 0!==a.building&&null!==a.building?a.building+", ":"",i=void 0!==a.suburb&&null!==a.suburb?a.suburb+", ":"",c=void 0!==a.city&&null!==a.city?a.city+", ":"",l=void 0!==a.postalCode&&null!==a.postalCode?a.postalCode:"",d=void 0!==a.province&&null!==a.province?this.getProvienceNameById(a.province,a.country)+", ":"",u=void 0!==a.country&&null!==a.country?this.getCountryNameById(a.country):"";return a.dlAddress=o+r+n+s+i+c+d+u+l,Ember.isEmpty($.grep(this.get("hardwareAddressDetails"),function(e){return e.dlAddress.toUpperCase()===a.dlAddress.toUpperCase()}))&&this.hardwareAddressDetails.pushObject(a),a},getCountryNameById:function(e){var t=this,a=void 0;return void 0!==e&&void 0!==t.get("countries")&&$.each(t.get("countries"),function(t,o){o.CanonicalKey===e&&(a=o.CanonicalValue)}),a},getProvienceNameById:function(e,t){var a=this,o=void 0;return void 0!==t&&void 0!==a.get("countries")&&$.each(a.get("countries"),function(a,s){s.CanonicalKey===t&&s.Provinces&&s.Provinces.Province&&$.isArray(s.Provinces.Province)&&$.each(s.Provinces.Province,function(t,a){a.CanonicalKey===e&&(o=a.CanonicalValue)})}),o},getDecoderCpcByproductId:function(e){var t=this,a=!0,o=void 0;return $.each(t.productCategoryAndProductDetail,function(t,s){return void 0===s.Products.Product.length&&(s.Products.Product=[s.Products.Product]),$.each(s.Products.Product,function(t,o){return o.CanonicalKey===e&&(a=!1),a}),a||(o=s.CanonicalKey),a}),o},populateHierachicalCDMDataSet:function(e,t){Komodo.Services.cachedDataService.fetch(e,{domain:Komodo.Services.uiService.getController("application").get("_selectedCountryId"),qualifier:Komodo.Services.localizationService.getCurrentLanguage()}).done(function(a){var o=JSON.parse(a);switch(t.clear(),e){case"EstablishmentTypeRelationship":$.each(o.CustomerClasses.CustomerClass,function(e,a){"Residential"===a.CanonicalValue&&"General"===a.CustomerTypes.CustomerType.CanonicalValue&&$.each(a.CustomerTypes.CustomerType.EstablishmentTypes.EstablishmentType,function(e,a){t.addObject(a)})});break;default:Komodo.error("[ERROR] : Unknown Hierarchical dataset: "+e)}}).fail(function(){Komodo.error("[ERROR] : could not retrieve hierarchical CDM data for "+e)})},getNewProcessID:function(){this.startNewProcess()},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,12e5,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},selectedExsitingAddressData:function(){var e=this,t=new Date;if(e.set("selectedNewAddress",void 0),e.set("isOtherLocation",!1),e.set("listOfNewAddresses",[]),e.set("selectedChargePeriod","1"),e.set("disableMOP",!0),e.set("disableChargePeriod",!1),e.set("convertAddress",!1),e.set("disableChangeResidenceButton",!0),e.set("debitOrderCount",0),e.set("cashCount",0),e.populateListOfNewAddress(),e.get("selectedDevice")){var a=Komodo.Services.customerProfileService.getFinancialAccounts().ResponseMessage.Payload.ListOfAccount.Account;$.each($.grep(a,function(e){return e.PaymentDetail.MethodOfPayment===Komodo.MOP.CASH&&e.Status===Komodo.AccountStatus.OPEN}),function(t,a){$.each(a.ListOfAgreement.Agreement,function(t,a){$.each(a.ListOfHardware.Hardware,function(t,a){$.each(a.ListOfService.Service,function(t,a){e.getValueFromConstant("ProductsConstants","productsConstants.products.PRINCIPAL_CATEGORY")!==a.ProductDetail.Type||a.Status.toUpperCase()!==e.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_ACTIVE")&&a.Status.toUpperCase()!==e.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_PENDING_REMOVAL")&&a.Status.toUpperCase()!==e.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_AWAITING_PAYMENT")||e.set("cashCount",e.get("cashCount")+1)})})})}),$.each($.grep(a,function(e){return e.PaymentDetail.MethodOfPayment!==Komodo.MethodOfPayment.PAYROLL&&e.PaymentDetail.MethodOfPayment!==Komodo.MethodOfPayment.CASH&&e.Status===Komodo.AccountStatus.OPEN}),function(t,a){$.each(a.ListOfAgreement.Agreement,function(t,a){$.each(a.ListOfHardware.Hardware,function(t,a){$.each(a.ListOfService.Service,function(t,a){e.getValueFromConstant("ProductsConstants","productsConstants.products.PRINCIPAL_CATEGORY")!==a.ProductDetail.Type||a.Status.toUpperCase()!==e.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_ACTIVE")&&a.Status.toUpperCase()!==e.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_PENDING_REMOVAL")&&a.Status.toUpperCase()!==e.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_AWAITING_PAYMENT")||e.set("debitOrderCount",e.get("debitOrderCount")+1)})})})}),e.get("debitOrderCount")>0&&Komodo.AgreementTypes.GENERAL!==$.grep(e.get("data.selectedproductData"),function(t){return t.decoderSerialNumber===e.get("selectedDevice")})[0].agreemntTypeID?e.set("selectedMOP",Komodo.MOP.DEBIT_ORDER):e.set("selectedMOP",Komodo.MOP.CASH),e.get("isMOPRequiredForHH")&&Komodo.AgreementTypes.HOLIDAY_HOME!==$.grep(e.get("data.selectedproductData"),function(t){return t.decoderSerialNumber===e.get("selectedDevice")})[0].agreemntTypeID&&($.grep(e.get("data.selectedproductData"),function(e){return e.agreemntTypeID===Komodo.AgreementTypes.HOLIDAY_HOME&&e.paymentDetail.MethodOfPayment===Komodo.MOP.CASH}).length>0?e.set("selectedMOP",Komodo.MOP.CASH):$.grep(e.get("data.selectedproductData"),function(e){return e.agreemntTypeID===Komodo.AgreementTypes.GENERAL&&e.paymentDetail.MethodOfPayment===Komodo.MOP.CASH}).length>0?e.set("selectedMOP",Komodo.MOP.CASH):e.set("selectedMOP",Komodo.MOP.DEBIT_ORDER)),$.each(e.get("gridData"),function(t,a){e.get("selectedDevice")===a.deviceSerialNo?(1===$.grep(e.get("listOfAddresses"),function(e){return e.dlAddress===a.addressDetails.dlAddress})[0].numberOfDecoders?e.set("isChangeAgreementVisible",!0):e.set("isChangeAgreementVisible",!1),a.addressDetails.agreementType===Komodo.AgreementTypes.HOLIDAY_HOME?(e.set("changeAgreementText",kl.value(e.localeBase+"convertToResidence")),e.set("disableChargePeriod",!1),e.set("residenceTypes",e.get("resTypeExcludingHH")),e.set("disableResidenceType",!1)):(e.set("changeAgreementText",kl.value(e.localeBase+"convertToHolidayHome")),e.set("disableChargePeriod",!0),e.set("residenceTypes",e.get("resTypeIncludingHH")),e.set("selectedNewResidenceType",e.getValueFromConstant("ProductsConstants","productsConstants.products.HOLIDAYHOME_CANONICALKEY")),e.set("disableResidenceType",!0))):a.deviceSelected=!1}),e.set("isDeviceSelected",!0),e.get("debitOderDays").forEach(function(a){t.getDate()>=29?t.getDate()+1==a.key&&e.set("paymentDay",a.key):t.getDate()==a.key&&e.set("paymentDay",a.key)}),Ember.isEmpty($.grep(e.get("data.selectedproductData"),function(t){return t.decoderSerialNumber===e.selectedDevice&&t.paymentDetail.MethodOfPayment===Komodo.MOP.CASH}))||(e.set("paymentDay",$.grep(e.get("data.selectedproductData"),function(t){return t.decoderSerialNumber===e.selectedDevice&&t.paymentDetail.MethodOfPayment===Komodo.MOP.CASH})[0].paymentDetail.DebitOrderDay),e.set("disablePaymentDay",!1))}}.observes("selectedDevice"),selectedNewAddressData:function(){var e=this;"Other"===e.get("selectedNewAddress.dlAddress")?(e.set("isOtherLocation",!0),e.set("disableChangeResidenceButton",!1)):Ember.isEmpty(e.get("selectedNewAddress.dlAddress"))?(e.set("isOtherLocation",!1),e.set("disableChangeResidenceButton",!0)):(e.set("isOtherLocation",!1),e.set("disableChangeResidenceButton",!1))}.observes("selectedNewAddress"),convertAddressSelected:function(){var e=this;e.get("convertAddress")?(e.set("listOfNewAddresses",[]),e.get("listOfNewAddresses").pushObject($.grep(e.get("gridData"),function(t){return t.deviceSerialNo===e.get("selectedDevice")})[0].addressDetails),e.set("selectedNewAddress",$.grep(e.get("gridData"),function(t){return t.deviceSerialNo===e.get("selectedDevice")})[0].addressDetails),e.set("isNewLocationVisible",!1),e.set("disableChangeResidenceButton",!1)):(e.populateListOfNewAddress(),e.set("selectedNewAddress",void 0),e.set("isNewLocationVisible",!0),e.set("disableChangeResidenceButton",!0))}.observes("convertAddress"),getListOfAccount:function(e,t,a){var o=this,s=[],r=Komodo.Models.Account.create(),n=Komodo.canonicalFacadeFactory(r,["StartDate","EndDate","PaymentDetail","ListOfAgreement_Agreement"]);return n.set("StartDate",$.grep(o.get("data.selectedproductData"),function(e){return e.decoderSerialNumber===o.selectedDevice})[0].startDate),n.set("StartDate",Komodo.Services.systemService.universalDateString(new Date(n.get("StartDate").replace(/(\d{2})-(\d{2})-(\d{4})/,"$2/$1/$3")))),n.set("EndDate",void 0),n.set("PaymentDetail",o.getcustomerPaymentDetail()),n.set("ListOfAgreement_Agreement",o.getListOfAgreement()),s.push(r),s},getListOfAccountFromFA:function(e){var t=this,a=[],o=Komodo.Models.Account.create(),s=Komodo.canonicalFacadeFactory(o,["StartDate","EndDate","PaymentDetail","ListOfAgreement_Agreement"]);return s.set("StartDate",e.startDate),s.set("EndDate",e.EndDate),t.get("debitOrderCount")>0&&t.get("selectedNewResidenceType")===t.getValueFromConstant("ProductsConstants","productsConstants.products.HOLIDAYHOME_CANONICALKEY")&&t.get("isMOPRequiredForHH")&&(e.PaymentDetail.AHVStatus=Komodo.AHVOverride.AHV_Override),s.set("PaymentDetail",e.PaymentDetail),s.set("ListOfAgreement_Agreement",t.getListOfAgreement()),a.push(o),a},getcustomerPaymentDetail:function(){var e=this,t=Komodo.Models.PaymentDetail.create(),a=Komodo.canonicalFacadeFactory(t,["MethodOfPayment","DebitOrderDay"]);return a.set("MethodOfPayment",e.get("selectedMOP")),a.set("DebitOrderDay",e.get("paymentDay")),t},getListOfAgreement:function(){var e=this,t=(Komodo.Services.systemService,[]),a=Komodo.Models.Agreement.create(),o=Komodo.canonicalFacadeFactory(a,["StartDate","UID","ActivationDate","TermOfPayment","ConsumerDetail","ConsumerAddress","ListOfHardware_Hardware","IsViewAtHome","LocationIndicator"]);return o.set("TermOfPayment",e.get("selectedChargePeriod")),o.set("StartDate",$.grep(e.get("data.selectedproductData"),function(t){return t.decoderSerialNumber===e.selectedDevice})[0].startDate),o.set("StartDate",Komodo.Services.systemService.universalDateString(new Date(o.get("StartDate").replace(/(\d{2})-(\d{2})-(\d{4})/,"$2/$1/$3")))),o.set("UID",$.grep(e.get("data.selectedproductData"),function(t){return t.decoderSerialNumber===e.selectedDevice})[0].agreemntUId),o.set("ActivationDate",$.grep(e.get("data.selectedproductData"),function(t){return t.decoderSerialNumber===e.selectedDevice})[0].startDate),o.set("ActivationDate",Komodo.Services.systemService.universalDateString(new Date(o.get("ActivationDate").replace(/(\d{2})-(\d{2})-(\d{4})/,"$2/$1/$3")))),o.set("ConsumerDetail",e.getConsumerDetail()),o.set("ConsumerAddress",e.getConsumerAddress()),o.set("ListOfHardware_Hardware",e.getListOfHardware()),o.set("LocationIndicator",e.selectedNewResidenceType),t.push(a),t},getConsumerDetail:function(){var e=this,t=Komodo.Models.PersonalDetail.create(),a=Komodo.canonicalFacadeFactory(t,["FirstName","Surname"]);return a.set("FirstName",$.grep(e.get("data.selectedproductData"),function(t){return t.decoderSerialNumber===e.selectedDevice})[0].customerPersonalDetails.firstName),a.set("Surname",$.grep(e.get("data.selectedproductData"),function(t){return t.decoderSerialNumber===e.selectedDevice})[0].customerPersonalDetails.surname),t},getConsumerAddress:function(){var e=this,t=Komodo.Models.Address.create(),a=Komodo.canonicalFacadeFactory(t,["Type","HouseNumber","BuildingName","Street","Suburb","City","Province","Country","PostCode","PostBoxNumber","IsVerified"]);return a.set("Type","Agreement"),"other"===e.selectedNewAddress.dlAddress.toLowerCase()?e.validateData()||(a.set("Street",e.addressInformation.streetName),a.set("Suburb",e.addressInformation.suburb),a.set("City",e.addressInformation.city),a.set("Province",e.addressInformation.province),a.set("Country",e.addressInformation.country),a.set("PostCode",e.addressInformation.postalCode),a.set("PostBoxNumber",e.addressInformation.boxOrSuite),a.set("HouseNumber",e.addressInformation.unit),a.set("BuildingName",e.addressInformation.building),a.set("IsVerified",!0)):(a.set("Street",e.selectedNewAddress.streetName),a.set("Suburb",e.selectedNewAddress.suburb),a.set("City",e.selectedNewAddress.city),a.set("Province",e.selectedNewAddress.province),a.set("Country",e.selectedNewAddress.country),a.set("PostCode",e.selectedNewAddress.postalCode),a.set("PostBoxNumber",e.selectedNewAddress.boxOrSuite),a.set("HouseNumber",e.selectedNewAddress.unit),a.set("BuildingName",e.selectedNewAddress.building),a.set("IsVerified",!0)),t},getListOfHardware:function(){var e=this,t=$.grep(e.get("data.selectedproductData"),function(t){return t.decoderSerialNumber===e.selectedDevice})[0],a=[];if(void 0!=t){var o=Komodo.Models.Hardware.create(),s=Komodo.canonicalFacadeFactory(o,["SerialNumber","LinkedSmartcard","SmartcardDetail","ProductDetail","ListOfService","SecondaryHardware","WarrantyStatus","IsAwaitingInstallation"]);s.set("SerialNumber",t.decoderSerialNumber),s.set("LinkedSmartcard",t.smartcardSerialNumber),s.set("SmartcardDetail",e.getSmartcardDetail(t.smartcardSerialNumber,t.smartcardType)),s.set("ProductDetail",e.getDecoderDetail(t)),s.set("IsAwaitingInstallation",!1),a.push(o)}return a},getSmartcardDetail:function(e,t){var a=Komodo.Models.ProductDetail.create(),o=Komodo.canonicalFacadeFactory(a,["UID","Type","Name","Model","Description"]);return o.set("UID",e),o.set("Type",t),o.set("Name",void 0),o.set("Model",void 0),o.set("Description",void 0),a},getDecoderDetail:function(e){var t=Komodo.Models.ProductDetail.create(),a=Komodo.canonicalFacadeFactory(t,["UID","Type","Name","Model","Description","ProductFeatures"]);return a.set("UID",e.decoderSerialNumber),a.set("Type",Komodo.UI.cacheDataService.getDeviceType(e.decoderCpcType)),a.set("Name",void 0),a.set("Model",void 0),a.set("Description",void 0),t},validateData:function(){var e="",t=this,a=!1,o=Object.keys(t.get("validators"));return"zaf"===t.get("addressInformation.country")?$.each(o,function(o,s){var r="validators."+s;if(t.get(r).model===t.get("addressInformation")){var n=r+".errors";t.get(n).length>0&&$.each(t.get(n),function(t,o){e+=o+"<br />",a=!0})}}):(e+=kl.value(t.get("localeBase")+"invalidCountry"),a=!0),a&&Komodo.Controls.MessageBoxController.show(kl.value(t.get("localeBase")+"useCaseTitle"),kl.value("controller.invalidDataMessage")+"<br />"+e,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"),a},populateListOfNewAddress:function(){var e=this;e.get("selectedDevice")&&$.each(e.get("gridData"),function(t,a){e.get("selectedDevice")===a.deviceSerialNo&&(e.set("listOfNewAddresses",$.grep(e.get("listOfAddresses"),function(e){return e.agreementType!==a.addressDetails.agreementType})),e.get("listOfNewAddresses").pushObject({dlAddress:"Other"}))})},messageEstablishmentTypeUpdatedReceived:function(e){var t=this;if(t.hideBusyIndicator(),!Ember.isEmpty(e.ResponseMessage)){if(e.ResponseMessage.Payload.ListOfAccount.Account.Type===Komodo.AgreementTypes.HOLIDAY_HOME)var a=Komodo.Controls.MessageBoxController.show(kl.value(t.localeBase+"useCaseTitle"),kl.value(t.localeBase+"residenceTypeChangedToHH"),Komodo.Controls.MessageBoxOkButtons,t,"id123456","success");else var a=Komodo.Controls.MessageBoxController.show(kl.value(t.localeBase+"useCaseTitle"),kl.value(t.localeBase+"residenceTypeChangedToResidential"),Komodo.Controls.MessageBoxOkButtons,t,"id123456","success");a.response=function(e){"ok"===e&&Komodo.Services.uiService.transitionTo("/manageViewing")}}},messageReceived:function(){var e=this;e.set("disableChangeResidenceButton",!1),e.hideBusyIndicator()},messageUpdateEstablishmentTypeDeliveryFailure:function(e){this.hideBusyIndicator(),this.set("disableChangeResidenceButton",!1),Komodo.UI.warn("[ChangeResidenceTypeController.messageUpdateEstablishmentTypeDeliveryFailure] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"useCaseTitle"),kl.value(this.localeBase+"messageUpdateEstablishmentTypeDeliveryFailure"),Komodo.Controls.MessageBoxOkButtons,this,"id5098673","danger")},messageFailureMessageEventReceived:function(e){this.hideBusyIndicator(),this.set("disableChangeResidenceButton",!1),Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")},messageFault:function(e){this.hideBusyIndicator(),this.set("disableChangeResidenceButton",!1),Komodo.UI.warn("[ChangeResidenceTypeController.messageFault] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"useCaseTitle"),kl.value(this.localeBase+"messageUpdateEstablishmentTypeDeliveryFailure"),Komodo.Controls.MessageBoxOkButtons,this,"id5098673","danger")},messageDeliveryFailure:function(e){this.hideBusyIndicator(),this.set("disableChangeResidenceButton",!1),Komodo.UI.warn("[ChangeResidenceTypeController.messageDeliveryFailure] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"useCaseTitle"),kl.value(this.localeBase+"messageUpdateEstablishmentTypeDeliveryFailure"),Komodo.Controls.MessageBoxOkButtons,this,"id5098673","danger")},actions:{publishUpdateEstablishmentTypeEvent:function(){var e=this,t=!1,a=Komodo.Models.AddProducts.create();if(0===$.grep(e.get("data.selectedproductData"),function(t){return t.agreemntTypeID===Komodo.AgreementTypes.EMPLOYEE&&t.decoderSerialNumber===e.selectedDevice}).length){if(!("other"===e.selectedNewAddress.dlAddress.toLowerCase()&&e.validateData()||(Ember.isEmpty(e.get("listOfAddresses"))||Ember.isEmpty(e.get("addressInformation"))||"other"!==e.selectedNewAddress.dlAddress.toLowerCase()||$.each(e.get("listOfAddresses"),function(a,o){
if(!(Ember.isEmpty(o.city)||Ember.isEmpty(e.get("addressInformation.city"))||Ember.isEmpty(o.suburb)||Ember.isEmpty(e.get("addressInformation.suburb"))||Ember.isEmpty(o.postalCode)||Ember.isEmpty(e.get("addressInformation.postalCode")))&&o.city.toUpperCase()===e.get("addressInformation.city").toUpperCase()&&o.suburb.toUpperCase()===e.get("addressInformation.suburb").toUpperCase()&&o.postalCode===e.get("addressInformation.postalCode")&&(Ember.isEmpty(o.streetName)&&Ember.isEmpty(e.get("addressInformation.streetName"))||o.streetName.toUpperCase()===e.get("addressInformation.streetName").toUpperCase())&&o.agreementType===$.grep(e.get("data.selectedproductData"),function(t){return t.decoderSerialNumber===e.get("selectedDevice")})[0].addressDetails.agreementType)return o.agreementType===Komodo.AgreementTypes.HOLIDAY_HOME?Komodo.Controls.MessageBoxController.show(kl.value(e.localeBase+"useCaseTitle"),kl.value(e.localeBase+"msgHHAddressExists"),Komodo.Controls.MessageBoxOkButtons,e,"id5446673","warning"):Komodo.Controls.MessageBoxController.show(kl.value(e.localeBase+"useCaseTitle"),kl.value(e.localeBase+"msgResAddressExists"),Komodo.Controls.MessageBoxOkButtons,e,"id5446673","warning"),void(t=!0)}),t))){var o=Komodo.canonicalFacadeFactory(a,["Country","CustomerUID","ListOfAccount_Account"]);if(!Ember.isEmpty(e.get("data.customerRefNo"))){if(o.set("Country",e.country),o.set("CustomerUID",e.get("data.customerRefNo")),e.get("debitOrderCount")>0&&e.get("selectedNewResidenceType")!==e.getValueFromConstant("ProductsConstants","productsConstants.products.HOLIDAYHOME_CANONICALKEY"))$.each($.grep(Komodo.Services.customerProfileService.getFinancialAccounts().ResponseMessage.Payload.ListOfAccount.Account,function(e){return e.PaymentDetail.MethodOfPayment!==Komodo.MethodOfPayment.PAYROLL&&e.PaymentDetail.MethodOfPayment!==Komodo.MethodOfPayment.CASH&&e.Status===Komodo.AccountStatus.OPEN}),function(t,a){$.each(a.ListOfAgreement.Agreement,function(t,s){$.each(s.ListOfHardware.Hardware,function(t,s){$.grep(s.ListOfService.Service,function(t){return e.getValueFromConstant("ProductsConstants","productsConstants.products.PRINCIPAL_CATEGORY")===t.ProductDetail.Type&&(t.Status.toUpperCase()===e.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_ACTIVE")||t.Status.toUpperCase()===e.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_PENDING_REMOVAL")||t.Status.toUpperCase()===e.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_AWAITING_PAYMENT"))}).length>0&&o.set("ListOfAccount_Account",e.getListOfAccountFromFA(a))})})});else if(e.get("debitOrderCount")>0&&e.get("selectedNewResidenceType")===e.getValueFromConstant("ProductsConstants","productsConstants.products.HOLIDAYHOME_CANONICALKEY")&&e.get("isMOPRequiredForHH")&&e.get("selectedMOP")!==Komodo.MOP.CASH)$.each($.grep(Komodo.Services.customerProfileService.getFinancialAccounts().ResponseMessage.Payload.ListOfAccount.Account,function(e){return e.PaymentDetail.MethodOfPayment!==Komodo.MethodOfPayment.PAYROLL&&e.PaymentDetail.MethodOfPayment!==Komodo.MethodOfPayment.CASH&&e.Status===Komodo.AccountStatus.OPEN}),function(t,a){$.each(a.ListOfAgreement.Agreement,function(t,s){$.each(s.ListOfHardware.Hardware,function(t,s){$.grep(s.ListOfService.Service,function(t){return e.getValueFromConstant("ProductsConstants","productsConstants.products.PRINCIPAL_CATEGORY")===t.ProductDetail.Type&&(t.Status.toUpperCase()===e.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_ACTIVE")||t.Status.toUpperCase()===e.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_PENDING_REMOVAL")||t.Status.toUpperCase()===e.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_AWAITING_PAYMENT"))}).length>0&&o.set("ListOfAccount_Account",e.getListOfAccountFromFA(a))})})});else if(!Ember.isEmpty($.grep(e.get("data.selectedproductData"),function(t){return t.decoderSerialNumber===e.selectedDevice}))){var s=e.getListOfAccount(e.get("methodsOfPaymentCanonical"),$.grep(e.get("data.selectedproductData"),function(t){return t.decoderSerialNumber===e.selectedDevice})[0],e.get("_enableAddressOverRide"));o.set("ListOfAccount_Account",s)}var r=Komodo.Services.ManageViewingService;e.getNewProcessID(),Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo),r.publishEvent(e,a,"UpdateEstablishmentType","v1").done(function(){e.set("disableChangeResidenceButton",!0),e.showBusyIndicator(),Komodo.log("publish Change Residence Type Event : done")}).fail(function(e){Komodo.log("publish Change Residence Type Event : failed. Error: "+e)})}}}else Komodo.Controls.MessageBoxController.show(kl.value(e.localeBase+"useCaseTitle"),kl.value(e.localeBase+"notAllowEmployeeToHH"),Komodo.Controls.MessageBoxOkButtons,e,"id5446673","warning")}},stop:function(){this.hardwareAddressDetails.clear(),this.data.selectedproductData.clear(),this.listOfAddresses.clear(),this.set("isOtherLocation",!1),this.set("gridData",[]),this.set("selectedDevice",void 0),this.set("methodsOfPaymentCanonical",[]),this.set("debitOderDays",[]),this.set("chargePeriods",[]),this.set("customerPersonalDetails",[]),this.set("hardwareAddressDetails",[]),this.set("productCategoryAndProductDetail",[]),this.set("residenceTypes",[]),this.set("listOfNewAddresses",[]),this.set("selectedNewAddress",void 0),this.set("convertAddress",!1),this.set("isDeviceSelected",!1),this.set("isChangeAgreementVisible",!1),this.set("selectedChargePeriod",void 0),this.set("disableChargePeriod",!1),this.set("disableNewAddress",!1),this.set("isNewLocationVisible",!0),this.set("paymentDay",void 0),this.set("disablePaymentDay",!1),this.set("disableResidenceType",!1),this.set("selectedNewResidenceType",void 0),this.set("generalCount",0),this.set("activeGeneralCount",0),this.set("holidayHomeCount",0),this.set("resTypeIncludingHH",[]),this.set("resTypeExcludingHH",[]),this.set("showGridData",!1),this.set("residenceTypeForHH",void 0),this._super()},localeBase:"locale.manageviewing:changeResidenceType.",methodsOfPaymentCanonical:[],debitOderDays:[],chargePeriods:[],customerPersonalDetails:[],_customerClassSelected:void 0,_customerTypeSelected:void 0,hardwareAddressDetails:[],productCategoryAndProductDetail:[],residenceTypes:[],selectedNewResidenceType:void 0,listOfAddresses:[],listOfNewAddresses:[],gridData:[],selectedDevice:void 0,selectedNewAddress:void 0,isOtherLocation:!1,isDeviceSelected:!1,isChangeAgreementVisible:!1,convertAddress:!1,selectedChargePeriod:void 0,disableChargePeriod:!1,disableNewAddress:!1,paymentDay:void 0,isNewLocationVisible:!0,disablePaymentDay:!1,disableChangeResidenceButton:!0,addressInformation:[],disableResidenceType:!1,generalCount:0,activeGeneralCount:0,holidayHomeCount:0,resTypeIncludingHH:[],resTypeExcludingHH:[],showGridData:!1,cashCount:0,debitOrderCount:0,selectedMOP:void 0,isMOPRequiredForHH:void 0}),Komodo.Application.DisconnectView=Komodo.UI.View.extend({viewKey:"DisconnectView",templateName:"DisconnectView"}),Komodo.Application.BoxOfficeView=Komodo.UI.View.extend({viewKey:"BoxOfficeView",templateName:"BoxOfficeView"}),Komodo.Application.EditScheduledChangesView=Komodo.UI.View.extend({viewKey:"EditScheduledChangesView",templateName:"EditScheduledChangesView"}),Komodo.Application.SearchPromptController=Komodo.UI.Controller.extend({init:function(){this._super(),Komodo.log("Constructing Search Prompt controller"),this.requiresDependency("_eventAggregator",{singleton:Komodo.Services.eventAggregator}),this.set("processVersion","v1.1"),this.set("processName","Search Prompt"),this.set("searchPromptModel",Komodo.Models.SearchPromptModel.create())},start:function(){this.set("searchPromptModel",Komodo.Models.SearchPromptModel.create()),this._super()},actions:{searchCustomer:function(){var e=this.get("searchPromptModel.customerUID");void 0==e||""==e.trim()?alert("Please provide Input for Search"):this.getEventAggregator().publish(Komodo.EventNames.searchRequested,{searchTerm:this.get("searchPromptModel.customerUID"),searchType:"general"})}},getEventAggregator:function(){return this.get("_eventAggregator")},stop:function(){this._super()}}),Komodo.Application.HolidayHomesView=Komodo.UI.View.extend({viewKey:"HolidayHomesView",templateName:"HolidayHomesView",didInsertElement:function(){Komodo.Services.uiService.getController("holidayHomes").currentHolidayHomesView=this},startChildController:function(e){var t=Komodo.Services.uiService.getController("upgradeOrDowngrade"),a=Komodo.Services.uiService.getController("disconnect"),o=Komodo.Services.uiService.getController("reconnect");"upgradeOrDowngrade"==e?(o._isStarted&&o.stop(),a._isStarted&&a.stop(),t._isStarted||(t.navigationFrom="FromHolidayHome",t.start())):"reconnect"==e?(t._isStarted&&t.stop(),a._isStarted&&a.stop(),o._isStarted||(o.navigationFrom="FromHolidayHome",o.start())):"disconnect"==e&&(o._isStarted&&o.stop(),t._isStarted&&t.stop(),a._isStarted||(a.navigationFrom="FromHolidayHome",a.start()))},stopChildController:function(){var e=Komodo.Services.uiService.getController("upgradeOrDowngrade"),t=Komodo.Services.uiService.getController("disconnect"),a=Komodo.Services.uiService.getController("reconnect");a._isStarted&&a.stop(),e._isStarted&&e.stop(),t._isStarted&&t.stop()}}),Komodo.Application.BulkChangeDeviceOwnershipView=Komodo.UI.View.extend({viewKey:"BulkChangeDeviceOwnershipView"}),Komodo.Application.InvalidPackagesView=Komodo.UI.View.extend({viewKey:"InvalidPackagesView",templateName:"InvalidPackagesView"}),Komodo.Application.LinkDelinkView=Komodo.UI.View.extend({viewKey:"LinkDelinkView",templateName:"LinkDelinkView"}),Komodo.Application.DccClaimsView=Komodo.UI.View.extend({viewKey:"DccClaimsView",templateName:"DccClaimsView",didInsertElement:function(){this._super();var e=Komodo.Services.ProductAndServiceMaintenanceHelper.create().getCustomerIdToRetrieveData(),t=new plupload.Uploader({runtimes:"html5,flash,silverlight,html4",browse_button:"pickfiles",url:KomodoConfiguration.ibsApiUrl+this.get("controller.loggedInCountryName")+"/uploaddownload/UploadCaseDocuments?caseNumber="+this.get("controller.caseNumber")+"&documentType=",headers:{"komodo-sessiontoken":Komodo.Services.securityService.get("sessionToken")},filters:{max_file_size:"10mb",mime_types:[{title:"Image files",extensions:"jpg,gif,png,jpeg,JPG,GIF,PNG,JPEG"},{title:"Adobe And Document Files",extensions:"pdf,doc,xls,docx,xlsx"}]},init:{PostInit:function(){$("#filelist > tbody").html(""),$("input:file").parent().width(0).height(0).css("visibility","hidden"),$("#uploadfiles").click(function(){return $(t.files).each(function(e,t){2!==t.status&&4!==t.status||(t.status=1)}),t.uploadCanceled=!1,t.start(),!1})},FilesAdded:function(e,t){var a=(this.dccClaimsController,this.dccClaimsController.get("data"));plupload.each(t,function(t){var o=!1;if($(a.customerDocuments).each(function(e,a){a.get("documentName")===t.name&&(o=!0)}),o)e.removeFile(t);else{var s=Komodo.Models.DCCDocumentModel.create();s.set("documentName",t.name),s.set("documentSize",plupload.formatSize(t.size)),s.set("uploadPercentage",""),s.set("documentTypes",a.get("documentTypes")),s.set("documentType",void 0),s.set("documentSerialNumber",a.get("documentSerialNumber")),s.set("documentAlreadyUploaded",!1),s.set("uploadStatus","QUEUED"),a.get("customerDocuments").pushObject(s)}})},UploadProgress:function(e,t){!1===e.uploadCanceled&&e.changeFileStatus(this.dccClaimsController.get("data"),t)},FileUploaded:function(e,t,a){var o=JSON.parse(a.response)[0];e.changeFileStatus(this.dccClaimsController.get("data"),t,o)},Error:function(e,t){Komodo.Controls.MessageBoxController.show(kl.value(this.dccClaimsController._localeBase+"dccClaims.uploadTitle"),kl.value(this.dccClaimsController._localeBase+"dccClaims.fileUploadError")+" "+t.code+" : "+t.message+(void 0===t.response||null===t.response?"":t.response),Komodo.Controls.MessageBoxOkButtons,this,"modelCustomerDocuments","danger"),e.uploadCanceled=!0,e.changeFileStatus(this.dccClaimsController.get("data"),t.file)},BeforeUpload:function(e,t){if(!1===e.uploadCanceled){var a=this.dccClaimsController;e.settings.url=KomodoConfiguration.ibsApiUrl+a.get("loggedInCountryName")+"/UploadDownload/UploadCaseDocuments?caseNumber="+a.get("caseNumber")+"&documentType=",Komodo.log("[Create DCC Claim]:beforeUpload called for the document."+t.name);var o=this.dccClaimsController.get("data");$(o.customerDocuments).each(function(o,s){if(s.get("documentName")===t.name){var r=s.get("documentType");if(void 0!==r&&null!==r&&""!==r||(Komodo.Controls.MessageBoxController.show(kl.value(a._localeBase+"dccClaims.uploadTitle"),"Please specify the document type",Komodo.Controls.MessageBoxOkButtons,this,"modelCustomerDocuments","danger"),e.stop(),e.uploadCanceled=!0),0==e.uploadCanceled&&"dcc claim form"==r.toLowerCase()){var n=s.get("documentSerialNumber");void 0!=n&&null!=n&&""!=n&&"N/A"!=n||(Komodo.Controls.MessageBoxController.show(kl.value(a._localeBase+"dccClaims.uploadTitle"),"Please specify the document serial number",Komodo.Controls.MessageBoxOkButtons,this,"modelCustomerDocuments","danger"),e.stop(),e.uploadCanceled=!0)}if(0==e.uploadCanceled&&"dcc affidavit"==r.toLowerCase()){var n=s.get("documentSerialNumber");void 0!=n&&null!=n&&""!=n&&"N/A"!=n||(Komodo.Controls.MessageBoxController.show(kl.value(a._localeBase+"dccClaims.uploadTitle"),"Please specify the document serial number",Komodo.Controls.MessageBoxOkButtons,this,"modelCustomerDocuments","danger"),e.stop(),e.uploadCanceled=!0)}}}),!1===e.uploadCanceled&&$(o.customerDocuments).each(function(a,o){if(o.get("documentName")===t.name){var s="";"dcc claim form"==o.get("documentType").toLowerCase()&&(s="&serialNumber="+o.get("documentSerialNumber")),"dcc affidavit"==o.get("documentType").toLowerCase()&&(s="&serialNumber="+o.get("documentSerialNumber")),e.settings.url=e.settings.url+o.get("documentType")+s}})}else e.stop()},UploadComplete:function(t,a){t.uploadCanceled=!1;var o=this.dccClaimsController.get("caseNumber"),s=Komodo.Models.SaveDocument.create(),r=Komodo.canonicalFacadeFactory(s,["ListOfDocument"]),n=[],i="",c=!0;$(this.dccClaimsController.get("data.customerDocuments")).each(function(t,a){if("FAILED"!=a.uploadStatus){var s=Komodo.Models.Document.create();s.set("FileType",a.get("documentType")),s.set("DocumentURL",a.get("documentUrl"));var r=[],l=Komodo.Models.DocumentMetaData.create();l.set("DocumentMetaDataValueUri","CustomerId"),l.set("Value",e),r.pushObject(l);var d=Komodo.Models.DocumentMetaData.create();d.set("DocumentMetaDataValueUri","CaseId"),d.set("Value",o),r.pushObject(d);var u=Komodo.Models.DocumentMetaData.create();u.set("DocumentMetaDataValueUri","DocumentType"),u.set("Value",a.get("documentType")),r.pushObject(u);var h=Komodo.Models.DocumentMetaData.create();h.set("DocumentMetaDataValueUri","DocumentSerial"),h.set("Value",o),r.pushObject(h),s.set("ListOfDocumentMetaData",r),n.pushObject(s),Komodo.log("[Create DCC Claim]:Document -"+a.documentName+"is sucessfully uploaded to server")}else c=!1,Komodo.log("[Create DCC Claim]:Document -"+a.documentName+"is failed to upload on server");i=i+a.documentName+" - "+a.uploadStatus+"<br/>"}),n.length>0&&(s.set("Country",this.dccClaimsController.get("country")),r.set("ListOfDocument",n),Komodo.Services.CustomerService.publishCustomerEvent(this.dccClaimsController,s,"SaveCustomerDocumentEvent","v2",!1)),this.dccClaimsController.displayDCCClaimCreatedMessage(i,c)}}});t.dccClaimsController=this.get("controller"),this.get("controller.data").set("fileUploader",t),t.uploadCanceled=!1,t.changeFileStatus=this.fileUploadStatus,t.dccClaimsController.dccClaimFileUploader=t,t.init()},messageFailureMessageEventReceived:function(e){var t=this.get("controller"),a="",o="";void 0!==e.ResponseMessage.Payload&&void 0!==e.ResponseMessage.Payload.ListOfErrorDetails&&$(e.ResponseMessage.Payload.ListOfErrorDetails).each(function(e,t){a+=t.ErrorDescription,o=t.ErrorCode}),""!==a&&"null"!==a&&void 0!==a||(a=kl.value(t._localeBase+"dccClaims.technicalError")),Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"dccClaims.title"),a,Komodo.Controls.MessageBoxOkButtons,t,"modelPayment","danger")},fileUploadStatus:function(e,t,a){$(e.customerDocuments).each(function(e,o){o.get("documentName")===t.name&&(o.set("uploadPercentage",t.percent+" %"),2===t.status?o.set("uploadStatus","UPLOADING"):4===t.status?(o.set("uploadStatus","FAILED"),o.set("uploadPercentage","0 %")):5===t.status&&(o.set("uploadStatus","DONE"),o.set("documentUrl",a)))})}}),Komodo.Application.AddGraceDaysController=Komodo.UI.Controller.extend({init:function(){this._super(),this.requiresDependency("_queryService",{singleton:Komodo.Services.queryService}),this.getCDMData()},start:function(){this.initializeGraceDaysConstants();var e=Komodo.Services.customerProfileService.getCustomerDetails();if(null!=e.ResponseMessage&&null!=e.ResponseMessage.Payload&&null!=e.ResponseMessage.Payload.CustomerDetail){if(2!=e.ResponseMessage.Payload.CustomerDetail.Class){var t=kl.value("locale.manageviewing:addGraceDays.onlyForResidentialHeader"),a=kl.value("locale.manageviewing:addGraceDays.onlyForResidential");Komodo.Controls.MessageBoxController.show(t,a,Komodo.Controls.MessageOKButtons,this,"id5446673","warning").response=function(e){if("ok"==e)return void Komodo.Services.uiService.transitionTo("manageViewing")}}var o=Komodo.Models.AddGraceDaysModel.create();o.IsAllSmartcardSelect=!1,o.MaxGraceDays=this.get("maxDays"),this.registerModel("addGraceDaysModel",o),this.registerValidator(this.get("addGraceDaysModel"),"SelectedGraceDay",{type:"string",isRequired:!0}),this.set("isNoOfDaysDisabled",!1),this.set("showGraceDaysPanel",!1),this.set("isAddGraceDaysDisabled",!0),this.set("maxAddGraceDays",[]);var s=this.get("maxDays");if(s)for(var r=1;r<=s;r++)this.maxAddGraceDays.push({key:r,value:r});this.setAllAccounts(),this.runGraceRules(),this.registerValidator(this.get("AddGraceDaysModel"),"title",{type:"string",isRequired:!0})}this._super()},stop:function(){this.unInitializeGraceDaysConstants(),this._super()},initializeGraceDaysConstants:function(){this.set("maxDays",GetClarityConstants("ManageViewingConstants","config.komodoConfiguration.preActivateQuote.maxDays").toString()),this.set("maxGraceDayAllowedActionCode",GetClarityConstants("ManageViewingConstants","manageGraceDayConfiguration.maxGraceDayAllowedConfiguration.maxGraceDayAllowed.actionCode").toString()),this.set("preActivateQuoteReason",GetClarityConstants("ManageViewingConstants","config.komodoConfiguration.preActivateQuote.reason").toString()),this.set("maxGraceDayAllowedMaxGraceDay",GetClarityConstants("ManageViewingConstants","manageGraceDayConfiguration.maxGraceDayAllowedConfiguration.maxGraceDayAllowed.maxGraceDay").toString()),this.set("maxGraceDayAllowedGraceLimitCheck",GetClarityConstants("ManageViewingConstants","manageGraceDayConfiguration.maxGraceDayAllowedConfiguration.maxGraceDayAllowed.graceLimitCheck").toString()),this.set("maxGraceDayAllowedGraceAllowedWithInDays",GetClarityConstants("ManageViewingConstants","manageGraceDayConfiguration.maxGraceDayAllowedConfiguration.maxGraceDayAllowed.graceAllowedWithInDays").toString()),this.set("searchFiltersCustomerNumber",GetClarityConstants("ManageViewingConstants","manageGraceDayConfiguration.searchFiltersConfiguration.searchFilters.customerNumber").toString()),this.set("searchFiltersFromDate",GetClarityConstants("ManageViewingConstants","manageGraceDayConfiguration.searchFiltersConfiguration.searchFilters.fromDate").toString()),this.set("searchFiltersToDate",GetClarityConstants("ManageViewingConstants","manageGraceDayConfiguration.searchFiltersConfiguration.searchFilters.toDate").toString())},unInitializeGraceDaysConstants:function(){this.set("maxDays",void 0),this.set("maxGraceDayAllowedActionCode",void 0),this.set("preActivateQuoteReason",void 0),this.set("maxGraceDayAllowedMaxGraceDay",void 0),this.set("maxGraceDayAllowedGraceLimitCheck",void 0),this.set("maxGraceDayAllowedGraceAllowedWithInDays",void 0),this.set("searchFiltersCustomerNumber",void 0),this.set("searchFiltersFromDate",void 0),this.set("searchFiltersToDate",void 0)},setAllAccounts:function(){this.get("addGraceDaysModel").set("ListOfaccount",[]);var e=Komodo.Models.AddGraceDaysListOfAccount.create(),t=[],a=Komodo.Services.customerProfileService.currentFinancialAccounts;if(a){if(a.ResponseMessage&&a.ResponseMessage.Payload&&a.ResponseMessage.Payload.ListOfAccount&&a.ResponseMessage.Payload.ListOfAccount.Account){var o=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),s=o.createArrayForSingleElement(a.ResponseMessage.Payload.ListOfAccount.Account);if(null!=s&&s.length>0){for(var r=0;r<s.length;r++)3!=s[r].Type&&7!=s[r].Type||t.pushObject(s[r]);if(t=this.sortAccounts(t),t.length>0){for(var n=[],r=0;r<t.length;r++){var i=Komodo.Models.AddGraceDaysAccount.create(),c=Komodo.canonicalFacadeFactory(i,["AccountID","ListOfSmartcard"]),l=Komodo.Models.AddGraceDaysListOfSmartcard.create();c.set("AccountID",t[r].UID),l=this.SearchSmartcardByAccount(t[r]),c.set("ListOfSmartcard",l),e.AddGraceDaysAccount.push(i),n.pushObject({key:t[r].UID,value:t[r].UID+" - "+t[r].AccountTypeDescription})}this.set("accountsArray",e),this.get("addGraceDaysModel").set("ListOfaccount",n),this.setSmartcarts(t[0].UID)}else this.set("isAllSmartcardSelectdisabled",!0),this.set("isSmartcardPanelVisible",!1),this.set("errorMessage",kl.value("locale.manageviewing:addGraceDays.noAccount"))}}else this.set("isAllSmartcardSelectdisabled",!0),this.set("isSmartcardPanelVisible",!1),this.set("errorMessage",kl.value("locale.manageviewing:addGraceDays.noAccount"))}},sortAccounts:function(e){for(var t=[],a=0;a<e.length;a++)t.pushObject(e[a]),0!=a&&e[a].IsDefault&&(t[0]=[t[a],t[a]=t[0]][0]);if(t.length>1){var o=t[0];t.shift(),t=t.sort(function(e,t){return parseInt(e,10)>parseInt(t,10)}),t.unshift(o)}return t},sortServices:function(e){var t=Komodo.Models.AddGraceDaysListOfService.create(),a=Komodo.Models.AddGraceDaysListOfService.create(),o=Komodo.Models.AddGraceDaysListOfService.create();if(null!=e&&e.length>1){for(var s=0;s<e.length;s++)"Principal"==e[s].Type&&t.AddGraceDaysService.push(e[s]),"Addon"!=e[s].Type&&"High Definition Addon"!=e[s].Type||a.AddGraceDaysService.push(e[s]),"Access"==e[s].Type&&o.AddGraceDaysService.push(e[s]);e.clear();for(var s=0;s<t.AddGraceDaysService.length;s++)e.push(t.AddGraceDaysService[s]);for(var s=0;s<a.AddGraceDaysService.length;s++)e.push(a.AddGraceDaysService[s]);for(var s=0;s<o.AddGraceDaysService.length;s++)e.push(o.AddGraceDaysService[s])}return e},setSmartcarts:function(e){var t=[];if(this.set("lstOfSmartcardsNumbers",[]),e){var a=this.get("accountsArray");if(a&&a.AddGraceDaysAccount)for(var o=0;o<a.AddGraceDaysAccount.length;o++){var s=a.AddGraceDaysAccount[o];if(s.AccountID==e){var r=s.ListOfSmartcard;if(r&&r.AddGraceDaysSmartcard&&r.AddGraceDaysSmartcard.length>0){for(var n=0;n<r.AddGraceDaysSmartcard.length;n++){var i=r.AddGraceDaysSmartcard[n].ListOfServices;i&&i.AddGraceDaysService&&i.AddGraceDaysService.length>0&&t.push(r.AddGraceDaysSmartcard[n])}if(t.length>0){this.get("addGraceDaysModel").set("ListOfSmartcards",t),this.set("listOfSelectedSmartcards",t);for(var c=0;c<t.length;c++)this.get("lstOfSmartcardsNumbers").push(t[c].SmartcardID);this.set("isAllSmartcardSelectdisabled",!1),this.set("isSmartcardPanelVisible",!0),this.set("errorMessage","")}else this.set("isAllSmartcardSelectdisabled",!0),this.set("isSmartcardPanelVisible",!1),this.set("errorMessage",kl.value("locale.manageviewing:addGraceDays.noActiveServies")),this.set("showGraceDaysPanel",!1)}else this.set("isAllSmartcardSelectdisabled",!0),this.set("isSmartcardPanelVisible",!1),this.set("errorMessage",kl.value("locale.manageviewing:addGraceDays.noDevice")),this.set("showGraceDaysPanel",!1);break}}}},SearchSmartcardByAccount:function(e){var t=Komodo.Models.AddGraceDaysListOfSmartcard.create(),a=Komodo.Application.CustomerProfileMapper.create(),o=a.mapAccountInformation(e);if(o&&o.smartcardno&&o.smartcardno.string){var s=o.smartcardno.string.split("<br>");if(null!=s)for(var r=0;r<s.length;r++){var n=this.searchServicesBySmartcard(e,s[r]);if(n.SmartcardID&&t.AddGraceDaysSmartcard.push(n),7==e.Type){var i=this.searchServicesForGOtvDevice(e,s[r]);null!=i&&i.SmartcardID&&t.AddGraceDaysSmartcard.push(i)}}var c=this.searchServicesForMobileDevice(e);null!=c&&c.SmartcardID&&t.AddGraceDaysSmartcard.push(c)}return t},searchServicesBySmartcard:function(e,t){var a=Komodo.Models.AddGraceDaysSmartcard.create(),o=Komodo.canonicalFacadeFactory(a,["SmartcardID","ListOfServices"]);if(null!=e&&e.ListOfAgreement&&e.ListOfAgreement.Agreement&&e.ListOfAgreement.Agreement.length>0&&t){t=t.trim();for(var s=0;s<e.ListOfAgreement.Agreement.length;s++){var r=e.ListOfAgreement.Agreement[s].ListOfHardware;if(r&&r.Hardware)for(var n=0;n<r.Hardware.length;n++){var i=Komodo.Models.AddGraceDaysListOfService.create();r.Hardware[n].LinkedSmartcard==t&&(i=this.getServices(r.Hardware[n],!1),o.set("SmartcardID",t),o.set("ListOfServices",i))}}}return a},searchServicesForMobileDevice:function(e){var t=Komodo.Models.AddGraceDaysSmartcard.create(),a=Komodo.canonicalFacadeFactory(t,["SmartcardID","ListOfServices"]);if(null!=e&&e.ListOfAgreement&&e.ListOfAgreement.Agreement)for(var o=0;o<e.ListOfAgreement.Agreement.length;o++){var s=e.ListOfAgreement.Agreement[o].ListOfHardware;if(s&&s.Hardware)for(var r=0;r<s.Hardware.length;r++){var n=s.Hardware[r],i=Komodo.Models.AddGraceDaysListOfService.create();null!=n.MACAddress&&"DStv Mobile Devices"==n.ProductDetail.Description&&(i=this.getServices(n,!0),a.set("SmartcardID",n.SerialNumber),a.set("ListOfServices",i))}}return t},searchServicesForGOtvDevice:function(e,t){var a=Komodo.Models.AddGraceDaysSmartcard.create(),o=Komodo.canonicalFacadeFactory(a,["SmartcardID","ListOfServices"]);if(e&&e.ListOfAgreement&&e.ListOfAgreement.Agreement)for(var s=0;s<e.ListOfAgreement.Agreement.length;s++){var r=e.ListOfAgreement.Agreement[s];if(r.ListOfHardware&&r.ListOfHardware.Hardware)for(var n=0;n<r.ListOfHardware.Hardware.length;n++){var i=r.ListOfHardware.Hardware[n],c=Komodo.Models.AddGraceDaysListOfService.create();null!=i.MACAddress&&i.SerialNumber==t&&"GOtv DEVICE"==i.ProductDetail.Description&&(c=this.getServices(i,!1),o.set("SmartcardID",i.SerialNumber),o.set("ListOfServices",c))}}return a},getServices:function(e,t){var a=Komodo.Models.AddGraceDaysListOfService.create();if(e.ListOfService&&e.ListOfService.Service){for(var o=0;o<e.ListOfService.Service.length;o++){var s=e.ListOfService.Service[o];if(!t&&"Principal"==s.ProductDetail.Type&&"Active"!=s.Status){a.AddGraceDaysService.clear();break}if("Active"==s.Status&&"Insurance"!=s.ProductDetail.Type){var r=Komodo.Models.AddGraceDaysService.create(),n=Komodo.canonicalFacadeFactory(r,["UID","Status","Description","Type"]);n.set("UID",s.UID),n.set("Status",s.Status),n.set("Description",s.ProductDetail.Description),n.set("Type",s.ProductDetail.Type),a.AddGraceDaysService.push(r)}}a.AddGraceDaysService.length>1&&(a.AddGraceDaysService=this.sortServices(a.AddGraceDaysService))}return a},addGraceDaysAction:function(e){var t=[],a=[],o=e.get("listOfSelectedSmartcards"),s="",r=e.get("addGraceDaysModel.SelectedGraceDay");if(o&&o.length>0){for(var n=0;n<o.length;n++)if(o[n].ListOfServices&&o[n].ListOfServices.AddGraceDaysService&&o[n].ListOfServices.AddGraceDaysService.length>0){for(var i=0;i<o[n].ListOfServices.AddGraceDaysService.length;i++)t.push(o[n].ListOfServices.AddGraceDaysService[i].UID);0==n?(s=o[0].SmartcardID,a.push(o[0].SmartcardID)):(s=s+","+o[n].SmartcardID,a.push(o[n].SmartcardID))}if(t.length>0){var c=Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo,l=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),d=l.toLocaleDateString("sv-SE"),u=Komodo.Services.securityService.roles,h=[];u.forEach(function(e,t){var a=e.split("/");h[t]=a[a.length-1]});var m={CustomerUID:c,ListOfSmartCardNumber:a,LastGraceDayGivenOn:d,NumberOfGraceDaysGiven:r,ListOfRole:h,Action:e.get("maxGraceDayAllowedActionCode")};Komodo.Services.queryService.postJSON("/CustomerProfile/AddGraceDays",{data:m}).done(function(a){if(t.length>0){var o={AgreementDetailID:t,DaysToAdd:r,ReasonId:e.get("preActivateQuoteReason")};Komodo.Services.queryService.postJSON("/AccountProfile/UpdateManualDisconnectDate",{data:o}).done(function(t){var a=r+" grace days applied on smartcard(s) "+s+" by "+Komodo.Services.securityService.session.domainUserName;e.publishCreateInteraction(45,241,782,a),Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing:addGraceDays.useCaseTitle"),kl.value("locale.manageviewing:addGraceDays.graceDayAddedSuccess"),Komodo.Controls.MessageBoxOkButtons,self,"authmbx3","success")}).error(function(e){var t=JSON.stringify(e);Komodo.log("Add Grace days- UpdateManualDisconnectDate ajax call failed. Error: "+t),Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing:addGraceDays.useCaseTitle"),e.responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,self,"authmbx3","danger")}),e.get("addGraceDaysModel").set("MultipleSelectedValues",[]),e.set("showGraceDaysPanel",!1),e.get("addGraceDaysModel").set("IsAllSmartcardSelect",!1),e.set("graceDayAdded",1),e.get("addGraceDaysModel").set("SelectedGraceDay",void 0)}}).error(function(e){var t=JSON.stringify(e);Komodo.log("Add Grace days- AddGraceDays ajax call failed. Error: "+t),Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing:addGraceDays.useCaseTitle"),e.responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,self,"authmbx3","danger")})}}},publishCreateInteraction:function(e,t,a,o){var s=Komodo.Models.CreateInteraction.create(),r=Komodo.Models.Case.create(),n=Komodo.Services.customerProfileService.getCustomerPersonalDetail(),i=Komodo.Services.customerProfileService;r.set("InteracteeName",Komodo.Services.securityService.session.domainUserName),r.set("InteractionLocation",Komodo.Services.customerProfileService.get("selectedCountry").countryDescription),r.set("InteractionMedium","1"),r.set("CustomerUID",n.customerNo),r.set("Category",e),r.set("SubCategory",t),r.set("Outcome",a),r.set("Status","1"),r.set("Notes",o);var c=Komodo.canonicalFacadeFactory(s,["Country","Case"]);c.set("Country",this.loggedInCountryId),c.set("Case",r),i.publishEvent(this,s,"CreateInteraction","v1").done(function(){Komodo.log("publish CreateInteraction Event for add Grace days : done")}).fail(function(e){Komodo.log("publish UpdateDStvCustomer Event for add Grace days : failed. Error: "+e)})},getCDMData:function(){this.set("loggedInCountryId",this.getQueryService().getSelectedCountryId())},getQueryService:function(){return this.get("_queryService")},smartcardValueChanged:function(){var e=this.get("addGraceDaysModel.MultipleSelectedValues"),t=this.get("addGraceDaysModel.ListOfSmartcards");if(e&&t&&t.length>0){for(var a=0;a<e.length;a++)e[a]||e.removeAt(a);if(this.setListOfSelectedSmartcards(e,t),1===e.length)this.runGraceRules();else if(e.length>1&&this.graceGivenCount>=this.get("maxGraceDayAllowedMaxGraceDay")){Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing:addGraceDays.useCaseTitle"),kl.value("locale.manageviewing:addGraceDays.maxGraceGiven"),Komodo.Controls.MessageOKButtons,this,"id5446673","warning");this.set("showGraceDaysPanel",!1)}}else this.set("showGraceDaysPanel",!1)}.observes("addGraceDaysModel.MultipleSelectedValues.@each"),setListOfSelectedSmartcards:function(e,t){if(e.length>0){this.set("listOfSelectedSmartcards",[]);for(var a=0;a<e.length;a++)for(var o=0;o<t.length;o++)if(e[a]==t[o].SmartcardID){this.get("listOfSelectedSmartcards").push(t[o]),this.set("showGraceDaysPanel",!0);break}}},AllSmartcardSelectedValueChanged:function(){this.get("addGraceDaysModel").set("SelectedGraceDay",null),this.get("addGraceDaysModel").IsAllSmartcardSelect?(this.runGraceRules(),
1===this.graceDayAdded&&this.set("graceDayAdded",0),this.get("flagGraceLimitReached")||(this.get("addGraceDaysModel").set("MultipleSelectedValues",[]),this.setSmartcarts(this.get("addGraceDaysModel.SelectedAccount")))):(this.get("addGraceDaysModel").set("MultipleSelectedValues",[]),this.set("showGraceDaysPanel",!1))}.observes("addGraceDaysModel.IsAllSmartcardSelect"),accountValueChanged:function(){var e=this.get("addGraceDaysModel").SelectedAccount;e&&(this.get("addGraceDaysModel").set("IsAllSmartcardSelect",!1),this.setSmartcarts(e),this.set("showGraceDaysPanel",!1))}.observes("addGraceDaysModel.SelectedAccount"),GraceDayValueChanged:function(){this.get("addGraceDaysModel.SelectedGraceDay")?this.set("isAddGraceDaysDisabled",!1):this.set("isAddGraceDaysDisabled",!0)}.observes("addGraceDaysModel.SelectedGraceDay"),runGraceRules:function(e){var t=this,a=Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo,o=t.get("addGraceDaysModel.SelectedGraceDay")||0,s={customerNo:a,giveDays:o};Komodo.UI.graceRules.checkGraceLimit(s,function(a){a.graceAllowed?e&&e(t):Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing:addGraceDays.useCaseTitle"),a.error,Komodo.Controls.MessageBoxOkButtons,t,"authmbx3","warning"),t.set("graceGivenCount",a.timesGiven),t.set("flagGraceLimitReached",0==a.daysLeft),t.set("isNoOfDaysDisabled",!a.graceAllowed);var o=t.get("addGraceDaysModel");(o.SelectedGraceDay||o.IsAllSmartcardSelect)&&t.set("showGraceDaysPanel",a.graceAllowed)})},actions:{addGraceDaysAction:function(){this.runGraceRules(this.addGraceDaysAction)}},showGraceDaysPanel:!1,isAllSmartcardSelectdisabled:!1,isAddGraceDaysDisabled:!0,isSmartcardPanelVisible:!0,maxAddGraceDays:[],smartcardValueChange:void 0,lstOfSmartcardsNumbers:[],listOfSelectedSmartcards:[],accountsArray:void 0,loggedInCountryId:void 0,errorMessage:void 0,graceGivenCount:0,graceGivenDetails:void 0,graceDayAdded:0,flagGraceLimitReached:!1}),Komodo.Application.BoxOfficeController=Komodo.UI.Controller.extend({_validatorCount:0,_currentCustomerNumber:void 0,_selectedSmartcard:void 0,_selectedPhoneNumber:void 0,_selectedTransactionStatus:void 0,_selectedCountry:void 0,primaryPhoneNumber:void 0,_phoneNumberCount:0,_hasDebitOrder:!1,init:function(){this._super(),this.requiresDependency("_uiService",{singleton:Komodo.Services.uiService}),this.requiresDependency("_cachedDataService",{singleton:Komodo.Services.cachedDataService}),this.requiresDependency("_cacheRepository",{singleton:Komodo.Repositories.cacheRepository}),this.requiresDependency("_komodoConfiguration",{singleton:KomodoConfiguration}),this.requiresDependency("_localizationService",{singleton:Komodo.Services.localizationService}),this.requiresDependency("_customerProfileService",{singleton:Komodo.Services.customerProfileService}),this.requiresDependency("_boxOfficeService",{singleton:Komodo.Services.boxOfficeService}),this.requiresDependency("_busyService",{singleton:Komodo.Services.busyService}),this.requiresDependency("_queryService",{singleton:Komodo.Services.queryService})},start:function(){this._super(),this.loadData()},stop:function(){this._super()},loadData:function(){var e=this;this.set("data",void 0),this.set("_currentCustomerNumber",this.getCustomerProfileService().get("personalDetails.customerNo")),this.set("_selectedCountry",Komodo.Services.uiService.getController("application").get("_selectedCountryId")),this.get("hasSelectedCustomer")&&(this.registerModel("data",Komodo.Models.BoxOfficeModel),this.getCachedDataService().fetch("BoxOfficeTransactionStatus").done(function(t){e.set("data.transactionStatusList",t.sortBy("key"))}),this.guardAgainstNullObject(this.getCustomerProfileService(),"currentCustomerDetails.ResponseMessage.Payload")&&(this.set("data.customerDetails",this.getCustomerProfileService().currentCustomerDetails.ResponseMessage.Payload),this.retrieveProfile()))},guardAgainstNullObject:function(e,t){for(var a=t.split("."),o=0,s=a.length;o<s;o++){var r=a[o];if(!(null!==e&&"object"==typeof e&&r in e))return!1;e=e[r]}return!0},hasDuplicates:function(){for(var e=this.get("data.boxOfficePhoneNumbers"),t={},a=0;a<e.length;++a){var o=e[a].number;if(Object.prototype.hasOwnProperty.call(t,o))return!0;t[o]=!0}return!1},convertDate:function(e){function t(e){return e<10?"0"+e:e}var a=moment(e).format("YYYY-MM-DDT00:00:00")+"Z",o=new Date(a);return[t(o.getDate()),t(o.getMonth()+1),o.getFullYear()].join("-")},getValidatorName:function(e){var t=this.get("_validatorCount");return Komodo.guard.againstUndefined(e,"name"),t+=1,this.set("_validatorCount",t),e+"_"+t},hasSelectedCustomer:function(){return void 0!=this.get("_currentCustomerNumber")&&void 0!=this.getCustomerProfileService().currentCustomerDetails}.property("_currentCustomerNumber"),getUIService:function(){return this.get("_uiService")},getCachedDataService:function(){return this.get("_cachedDataService")},getCacheRepository:function(){return this.get("_cacheRepository")},getKomodoConfiguration:function(){return this.get("_komodoConfiguration")},getLocalizationService:function(){return this.get("_localizationService")},getCustomerProfileService:function(){return this.get("_customerProfileService")},getBoxOfficeService:function(){return this.get("_boxOfficeService")},getCustomerNumber:function(){return this.get("_currentCustomerNumber")},getBusyService:function(){return this.get("_busyService")},getQueryService:function(){return this.get("_queryService")},registerValidations:function(){this.registerValidator(this.get("data"),"confirmationCode",{isRequired:!0,displayName:kl.value("locale.manageviewing.boxOffice:boxoffice.queryPage.confirmCode"),minLength:18,maxLength:18,groups:"rentals"}),this.registerValidator(this.get("data"),"rentalCode",{isRequired:!0,displayName:kl.value("locale.manageviewing.boxOffice:boxoffice.rentTitlePage.rentalCode"),minLength:18,maxLength:18,groups:"rentTitle"}),this.registerValidator(this.get("data"),"filterByDate",{type:"date",maxDate:this.get("data.boundUpperDateValue")})},numberTypes:function(){this.get("data.phoneNumberTypes")}.property("data.phoneNumberTypes"),getMethodOfPayment:function(){var e=this;e._hasDebitOrder=!1;var t=this.getCustomerProfileService().currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account;void 0!=t&&$.each(t,function(t,a){a.Type==Komodo.CanonicalValues.AccountType.BoxOffice&&(a.PaymentDetail.MethodOfPayment!=Komodo.CanonicalValues.MethodOfPayment.Current&&a.PaymentDetail.MethodOfPayment!=Komodo.CanonicalValues.MethodOfPayment.Savings&&a.PaymentDetail.MethodOfPayment!=Komodo.CanonicalValues.MethodOfPayment.Transmission&&a.PaymentDetail.MethodOfPayment!=Komodo.CanonicalValues.MethodOfPayment.DoCreditCard||(e._hasDebitOrder=!0))})},retrieveProfile:function(){var e=this;this.getBusyService().start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Loading,2e3,"retrieveBoxOfficeProfile",this),this.getBoxOfficeService().fetchProfile(this.getCustomerNumber()).done(function(t){null!=t?null!=t.Profile&&(t.Profile.IsActive?(e.set("data.hasBoxOffice",!0),e.guardAgainstNullObject(t,"Profile.SmartCardCollection.SmartCards")?(e.get("data.listOfSmartCards").clear(),$.each(t.Profile.SmartCardCollection.SmartCards,function(a,o){e.get("data.smartcardNumbers").push({SmartCardNumber:t.Profile.SmartCardCollection.SmartCards[a].SmartCardNumber,IsActive:t.Profile.SmartCardCollection.SmartCards[a].Active}),e.get("data.listOfSmartCards").push(o.SmartCardNumber)}),e.set("_selectedSmartcard",e.get("data.listOfSmartCards")[0]),e.retrieveTransactionHistory(),e.retrievePhoneNumbers(),e.retrievePhoneNumberTypes(),e.registerValidations(),e.set("data.disableSaveNumbers",!0),e.set("data.disableCancel",!0),e.set("_selectedTransactionStatus",e.get("data.transactionStatusList")[0].key)):Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.title"),kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.smartcardNumberError"),Komodo.Controls.MessageBoxOkButtons,this,"smartcardNumberError","danger")):e.set("data.hasBoxOffice",!1)):Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.title"),kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.offline"),Komodo.Controls.MessageBoxOkButtons,this,"offline","danger")}).fail(function(){e.set("data.hasBoxOffice",!1),Komodo.log("[ERROR] : could not retrieve any BoxOffice information for: "+e.get("_currentCustomerNumber"))})},retrievePhoneNumberTypes:function(){var e=this;this.getCachedDataService().fetch("ContactDetailType").done(function(t){e.set("data.phoneNumberTypes",t.sortBy("key"))}).fail(function(){Komodo.log("[ERROR] : could not retrieve cache data = '"+domain+"."+e.getLocalizationService().getCurrentLanguage()+".ContactDetailType'")})},addPhoneNumber:function(e,t,a,o,s,r,n,i){this._phoneNumberCount=this._phoneNumberCount+1;var c=Ember.Object.create({type:i,code:e,number:t,full:e+t,count:this._phoneNumberCount,isBoxOfficePrimary:a,extension:o,isBoxOfficeNumber:s,isMarketingEnabled:r,isPrimary:n,codeValidatorName:this.getValidatorName("codeValidator"),numberValidatorName:this.getValidatorName("numberValidator")}),l=!0,d=this.get("data.boxOfficePhoneNumbers");$.each(d,function(e,t){if(""==t.number)return void(l=!1)}),l?this.get("data.boxOfficePhoneNumbers").pushObject(c):Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.mobileNumbersHeading"),kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.enterPhoneCodeNumber"),Komodo.Controls.MessageBoxOkButtons,this,"enterPhoneCodeNumber","danger"),this.get("data.boxOfficePhoneNumbers").length>=this.get("data.maxNumbers")?(this.set("data.canAddNumbers",!1),this.set("data.canDeleteNumbers",!0)):(this.set("data.canAddNumbers",!0),this.set("data.canDeleteNumbers",!0)),this.registerValidator(c,"code",{type:"number",isRequired:!0,limitValueToType:!0,minLength:2,maxLength:4,displayName:kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.countryCode"),regExPattern:"^[0-9]{2,4}$",name:c.get("codeValidatorName"),groups:"phonenumbers"}),this.registerValidator(c,"number",{type:"number",isRequired:!0,limitValueToType:!0,displayName:kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.phoneNumber"),minLength:7,maxLength:10,regExPattern:"^[1-9][0-9]+$",name:c.get("numberValidatorName"),groups:"phonenumbers"}),c.set("codeValidator",this.get("validators")[c.get("codeValidatorName")]),c.set("numberValidator",this.get("validators")[c.get("numberValidatorName")])},refreshCustomerData:function(e){var t=this;Komodo.Application.SharedObjectController.create().retrieveCustomerSync(this._currentCustomerNumber).done(function(a){null!=a&&(t.set("data.customerDetails",a),t.displayUpdatedCustomerDetails(e))}).fail(function(e){this.hideBusyIndicator(),Komodo.UI.error("[BoxOfficeController.messageBoxOfficeProfileRetrieveRequestFault] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.activateBoxOfficeHeading"),kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.retrieveCustomerProfileFailure"),Komodo.Controls.MessageBoxOkButtons,this,"profileRetrieveFault","danger")})},displayUpdatedCustomerDetails:function(e){var t=this;this.hideBusyIndicator(),e.response=function(e){"ok"==e&&(t.loadData(),t.startNewProcess(),t.set("data.disableSaveNumbers",!0),t.set("data.disableCancel",!0))}},retrievePhoneNumbers:function(){var e=this;if(this.guardAgainstNullObject(this.get("data.customerDetails"),"CustomerDetail.ListOfPhoneNumber.PhoneNumber")){var t=this.get("data.customerDetails").CustomerDetail.ListOfPhoneNumber.PhoneNumber;if(void 0==t)return;var a;a=t.filterBy("IsBoxOfficeNumber",!0),e.get("data.boxOfficePhoneNumbers").clear(),a.forEach(function(t){if(e.addPhoneNumber(t.Code,t.Number,t.IsBoxOfficePrimary,t.Extension,t.IsBoxOfficeNumber,t.IsMarketingEnabled,t.IsPrimary,t.Type),t.IsBoxOfficePrimary){var a=e.get("data.boxOfficePhoneNumbers");$.each(a,function(t,a){if(""!=a.number)return void e.set("data.selectedNumber",a.count)})}}),e.set("data.disableSaveNumbers",!0),e.set("data.disableCancel",!0),e.set("data.boxOFficePhoneNumbersForRent",a),a.length<=e.get("data.maxNumbers")&&(e.set("data.canAddNumbers",!0),e.set("data.canDeleteNumbers",!0)),a.length==e.get("data.maxNumbers")&&e.set("data.canAddNumbers",!1),a.length==e.get("data.minNumbers")&&(e.set("data.canDeleteNumbers",!1),e.set("data.canAddNumbers",!0)),void 0!=e.get("data.boxOfficePhoneNumbers")[0]&&e.set("_selectedPhoneNumber",e.get("data.boxOfficePhoneNumbers")[0])}else Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.title"),kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.retrievePhoneNumberError"),Komodo.Controls.MessageBoxOkButtons,this,"retrievePhoneNumberError","danger")},retrieveSectorHistory:function(){var e=this,t=e.get("_selectedSmartcard");this.getBoxOfficeService().fetchSectorHistory(e.getCustomerNumber(),t).done(function(t){$.each(t.SectorHistory,function(t,a){a.ActionDatetime=e.convertDate(a.ActionDatetime)}),e.set("data.sectorHistory",$.makeArray(t.SectorHistory))}).fail(function(){e.get("data.sectorHistory").clear()})},retrieveTransactionHistory:function(){var e=this;this.getBoxOfficeService().fetchTransactionHistory(e.getCustomerNumber()).done(function(t){var a=$.makeArray(t.Transactions);$.each(a,function(t,a){a.TransactionDate=e.convertDate(a.TransactionDate)}),e.set("data.boxOfficeTransactions",a),e.set("data.boxOfficeOriginalTransactions",a)}).fail(function(){Komodo.log("[ERROR] : could not retrieve any BoxOffice Transactions for: "+e.get("_currentCustomerNumber")),Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.title"),kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.retrieveTransactionHistoryFailure",{customerNumber:e.get("_currentCustomerNumber")}),Komodo.Controls.MessageBoxOkButtons,this,"TransactionHistoryFailure","danger")})},retrieveRentalHistory:function(e){var t=this;this.getBoxOfficeService().fetchRentalHistory(t.getCustomerNumber()).done(function(a){var o=a.Rentals.filterBy("HistoryId",e);t.set("data.boxOfficeRentalHistory",o)}).fail(function(){Komodo.log("[ERROR] : could not retrieve any BoxOffice Rental History for: "+t.get("_currentCustomerNumber")),Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.rentTitlePage.modalHeading"),kl.value("locale.manageviewing.boxOffice:boxoffice.rentTitlePage.retrieveRentalHistoryFailure",{customerNumber:t.get("_currentCustomerNumber")}),Komodo.Controls.MessageBoxOkButtons,this,"RentalHistoryFailure","danger")})},publishReEntitleEvent:function(e){var t=this;if(this.canSubmitData(this.get("data"),kl.value("locale.manageviewing.boxOffice:boxoffice.queryPage.modalHeading"),{group:"rentals",showInModal:!1})){var a=(new moment).format("HH:mm:ss"),o={Country:this.get("_selectedCountry"),CodeGenerationTime:a,CommandRequestType:e,ConfirmationCode:t.get("data.confirmationCode"),CustomerUID:t.getCustomerNumber(),SmartCardNumber:t.get("data.selectedTransaction").SmartCardNr,TransactionId:t.get("data.selectedTransaction").TransactionId},s={eventName:"ReEntitleBoxOfficeProcess",eventVersion:"v1"};this.sendMessage(o,s).done(function(e){t.showBusyIndicator(),Komodo.UI.log("[BoxOfficeController.ReEntitleBoxOfficeProcess - message enqueued] : messageId = '"+e.data.message.ResponseMessage.EventMetaData.Event.EventId+"'")}).fail(function(e){t.hideBusyIndicator(),Komodo.UI.error("[BoxOfficeController.ReEntitleBoxOfficeProcess - could not enqueue message] : err = '"+e+"'")}),t.set("data.confirmationCode","")}},actions:{addNumber:function(){this.get("data.boxOfficePhoneNumbers").length<this.get("data.maxNumbers")&&(this.addPhoneNumber("","",!1),this.set("data.canDeleteNumbers",!0)),1==this.get("data.boxOfficePhoneNumbers").length&&this.set("data.canDeleteNumbers",!1),this.get("data.boxOfficePhoneNumbers").length==this.get("data.maxNumbers")&&(this.set("data.canAddNumbers",!1),this.set("data.canDeleteNumbers",!0)),this.get("data.boxOfficePhoneNumbers").length>0?this.set("data.disableSaveNumbers",!1):this.set("data.disableSaveNumbers",!0)},deleteNumber:function(e){this.get("data.boxOfficePhoneNumbers").length>this.get("data.minNumbers")&&(e.content.isBoxOfficePrimary&&this.set("data.selectedNumber",this.get("data.boxOfficePhoneNumbers")[0].count),e.content.isPrimary?Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.title"),kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.deletePrimaryNumber"),Komodo.Controls.MessageBoxOkButtons,this,"cannoteDelete","warning"):(this.get("data.boxOfficePhoneNumbers").removeObject(e.content),this.set("data.canDeleteNumbers",!0))),this.get("data.boxOfficePhoneNumbers").length==this.get("data.minNumbers")&&(this.set("data.canDeleteNumbers",!1),this.set("data.canAddNumbers",!0)),this.get("data.boxOfficePhoneNumbers").length<this.get("data.maxNumbers")&&this.set("data.canAddNumbers",!0),this.set("data.disableSaveNumbers",!1)},saveChanges:function(){for(var e=!0,t=this.get("data.boxOfficePhoneNumbers"),a=0;a<t.length;a++)if(!this.canSubmitData(t[a],kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.title"),{group:"phonenumbers",showInModal:!1}))return;$.each(t,function(t,a){if(""==a.number)return void(e=!1)}),e?this.hasDuplicates()?Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.mobileNumbersHeading"),kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.duplicatePhoneNumber"),Komodo.Controls.MessageBoxOkButtons,this,"enterPhoneCodeNumber","danger"):this.updateProfile():Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.mobileNumbersHeading"),kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.enterPhoneCodeNumber"),Komodo.Controls.MessageBoxOkButtons,this,"enterPhoneCodeNumber","danger")},cancelChanges:function(){this.set("data.boxOfficePhoneNumbers",[]),this.set("data.boxOfficePhoneNumbersAll",[]),this.retrievePhoneNumbers(),this.retrievePhoneNumberTypes()},viewTransaction:function(e){this.set("data.isQueryingTransaction",!1),this.set("data.selectedTransaction",e.content),this.retrieveRentalHistory(e.content.MessageId),this.getUIService().showModalPopup(kl.value("locale.manageviewing.boxOffice:boxoffice.transactionDetails.modalHeading"),void 0,{view:Komodo.Application.BoxOfficeTransactionDetailsView,canUserClose:!0,context:this,shouldStartAndStopController:!1})},queryTransaction:function(){this.set("data.isQueryingTransaction",!0)},reEntitleRental:function(){this.publishReEntitleEvent("ReEntitlement")},cancelRental:function(){this.publishReEntitleEvent("Cancellation")},rentTitle:function(){this.getUIService().showModalPopup(kl.value("locale.manageviewing.boxOffice:boxoffice.rentTitlePage.modalHeading"),void 0,{view:Komodo.Application.BoxOfficeRentTitleView,canUserClose:!0,context:this,shouldStartAndStopController:!1})},submitRental:function(){var e=this,t=this._selectedPhoneNumber.full,a={Country:this.get("_selectedCountry"),PhoneNumber:{Number:t},RentalCode:this.get("data.rentalCode")},o={eventName:"ProcessBoxOfficeRentalRequest",eventVersion:"v1"};this.canSubmitData(this.get("data"),kl.value("locale.manageviewing.boxOffice:boxoffice.queryPage.modalHeading"),{group:"rentTitle",showInModal:!1})&&this.sendMessage(a,o).done(function(){e.showBusyIndicator(),Komodo.log("publishProcessRentalRequestEvent() : ProcessRentalRequest event has been published")}).fail(function(t){e.hideBusyIndicator(),Komodo.log("publishProcessRentalRequestEvent() : ProcessRentalRequest event has failed"+t)})},createSector:function(){var e=this;e.showBusyIndicator();var t=e.get("_selectedSmartcard");e.getBoxOfficeService().fetchSectorHistory(e.getCustomerNumber(),t).done(function(t){$.each(t.SectorHistory,function(t,a){a.ActionDatetime=e.convertDate(a.ActionDatetime)}),e.set("data.sectorHistory",$.makeArray(t.SectorHistory)),e.hideBusyIndicator(),e.getUIService().showModalPopup(kl.value("locale.manageviewing.boxOffice:boxoffice.sectorPage.modalHeading"),void 0,{view:Komodo.Application.BoxOfficeSectorView,canUserClose:!0,context:e,shouldStartAndStopController:!1})}).fail(function(){e.get("data.sectorHistory").clear(),e.hideBusyIndicator(),e.getUIService().showModalPopup(kl.value("locale.manageviewing.boxOffice:boxoffice.sectorPage.modalHeading"),void 0,{view:Komodo.Application.BoxOfficeSectorView,canUserClose:!0,context:e,shouldStartAndStopController:!1})})},submitSector:function(){var e=this,t=this.get("_selectedSmartcard"),a={Country:this.get("_selectedCountry"),CustomerNumber:this.get("_currentCustomerNumber"),SmartCardNumber:t},o={eventName:"CreateBoxOfficeSector",eventVersion:"v1"};this.sendMessage(a,o).done(function(){e.showBusyIndicator(),Komodo.log("CreateBoxOfficeSectorEvent() : ProcessRentalRequest event has been published")}).fail(function(t){e.hideBusyIndicator(),Komodo.log("CreateBoxOfficeSectorEvent() : ProcessRentalRequest event has failed"+t)})},viewUnallocated:function(){var e=this;e.showBusyIndicator(),this.getBoxOfficeService().fetchUnallocatedRentalCodes(e.getCustomerNumber()).done(function(t){e.set("data.unallocatedRentalCodes",$.makeArray(t.RentalCodeLogs)),e.hideBusyIndicator(),e.getUIService().showModalPopup(kl.value("locale.manageviewing.boxOffice:boxoffice.unallocatedRentalsPage.modalHeading"),void 0,{view:Komodo.Application.BoxOfficeUnallocatedView,canUserClose:!0,context:e,shouldStartAndStopController:!1})}).fail(function(){e.get("data.unallocatedRentalCodes").clear(),e.hideBusyIndicator(),e.getUIService().showModalPopup(kl.value("locale.manageviewing.boxOffice:boxoffice.unallocatedRentalsPage.modalHeading"),void 0,{view:Komodo.Application.BoxOfficeUnallocatedView,canUserClose:!0,context:e,shouldStartAndStopController:!1})})},activateBoxOffice:function(){var e=this;e.set("isactivateBoxOfficeButton",!0);var t=this.getCustomerProfileService().currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account,a=Ember.A();t.forEach(function(e){a.pushObject(e)});var o=function(e,t){var a,s=[];for(key in e)e.hasOwnProperty(key)&&null!==(a=e[key])&&("object"==typeof a?$.merge(s,o(a,t)):key.toLowerCase()==t.toLowerCase()&&s.push(a));return s},s=o(a,"LinkedSmartCard");if(e.get("data.smartcardNumbers").clear(),void 0!=s){if(0==s.length)return void Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.activateBoxOfficeHeading"),kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.noSmartCards"),Komodo.Controls.MessageBoxOkButtons,this,"profileCreateFault","danger");$.each(s,function(t){if(""!=s[t])if(e.get("data.smartcardNumbers").length>0){var a=e.get("data.smartcardNumbers").filter(function(e){return e.SmartCardNumber===s[t]});0==a.length&&e.get("data.smartcardNumbers").push({SmartCardNumber:s[t],IsActive:!0})}else e.get("data.smartcardNumbers").push({SmartCardNumber:s[t],IsActive:!0})})}if(this.guardAgainstNullObject(this.get("data.customerDetails"),"CustomerDetail.ListOfPhoneNumber.PhoneNumber")){var r=this.get("data.customerDetails").CustomerDetail.ListOfPhoneNumber.PhoneNumber;if(void 0==r||0==r.length)return;var n=this.getCustomerProfileService().currentCustomerDetails.ResponseMessage.Payload.CustomerDetail.ListOfPhoneNumber.PhoneNumber.filterBy("Type","1");e.get("data.activatePhoneNumbers").clear(),void 0!=n&&$.each(n,function(t){n[t].IsBoxOfficeNumber=!0,1==n[t].IsPrimary&&(n[t].IsBoxOfficePrimary=!0),e.get("data.activatePhoneNumbers").push(n[t])}),$.each(r,function(t,a){var o=!1;$.each(n,function(t,s){if(a.Number==s.Number&&a.Code==s.Code)return a.IsPrimary!=s.IsPrimary&&(e.get("data.activatePhoneNumbers")[t].IsPrimary=a.IsPrimary,e.get("data.activatePhoneNumbers")[t].IsMarketingEnabled=a.IsMarketingEnabled),void(o=!0)}),o||("1"==a.Type?a.IsBoxOfficeNumber=!0:a.IsBoxOfficeNumber=!1,e.get("data.activatePhoneNumbers").push(a))}),e.getMethodOfPayment();var i={Country:this.get("_selectedCountry"),Balance:null,CustomerUID:this.get("_currentCustomerNumber"),IsDebitOrder:this._hasDebitOrder,ListOfSmartCard:{SmartCard:this.get("data.smartcardNumbers")},ListOfPhoneNumber:{PhoneNumber:this.get("data.activatePhoneNumbers")}},c={eventName:"CreateBoxOfficeProfile",eventVersion:"v1"};this.sendMessage(i,c).done(function(){e.showBusyIndicator(),Komodo.log("CreateBoxOfficeProfileEvent() : CreateBoxOfficeProfile event has been published")}).fail(function(t){e.hideBusyIndicator(),Komodo.log("CreateBoxOfficeProfileEvent() : CreateBoxOfficeProfile event has failed"+t)})}}},updateProfile:function(){var e=this;if(this.guardAgainstNullObject(this.get("data.customerDetails"),"CustomerDetail.ListOfPhoneNumber.PhoneNumber")){var t=this.get("data.customerDetails").CustomerDetail.ListOfPhoneNumber.PhoneNumber.filterBy("IsBoxOfficeNumber",!1);if(void 0==t)return;var a=e.get("data.boxOfficePhoneNumbers");e.get("data.boxOfficeUpdatePhoneNumbers").clear(),void 0!=a&&$.each(a,function(t,a){"undefined"==a.IsPrimary&&Ember.set(a,"isPrimary",!1),void 0==a.type&&Ember.set(a,"type","1"),void 0==a.isPrimary&&Ember.set(a,"isPrimary",!1),void 0==a.isMarketingEnabled&&Ember.set(a,"isMarketingEnabled",!1),void 0==a.isBoxOfficeNumber&&Ember.set(a,"isBoxOfficeNumber",!0),e.get("data.boxOfficeUpdatePhoneNumbers").push({Type:a.type,Code:a.code,Number:a.number,Extension:null,IsPrimary:a.isPrimary,IsMarketingEnabled:a.isMarketingEnabled,IsBoxOfficeNumber:a.isBoxOfficeNumber,IsBoxOfficePrimary:a.isBoxOfficePrimary})}),$.each(t,function(t,o){var s=!1;$.each(a,function(t,a){if(o.Number==a.number&&o.Code==a.code)return o.IsPrimary!=a.isPrimary&&(e.get("data.boxOfficeUpdatePhoneNumbers")[t].IsPrimary=o.IsPrimary,e.get("data.boxOfficeUpdatePhoneNumbers")[t].IsMarketingEnabled=o.IsMarketingEnabled),void(s=!0)}),s||e.get("data.boxOfficeUpdatePhoneNumbers").push(o)}),e.getMethodOfPayment();var o={Country:this.get("_selectedCountry"),CustomerUID:this.get("_currentCustomerNumber"),IsDebitOrder:this._hasDebitOrder,ListOfPhoneNumber:{PhoneNumber:e.get("data.boxOfficeUpdatePhoneNumbers")},ListOfSmartCard:{SmartCard:this.get("data.smartcardNumbers")}},s={eventName:"UpdateBoxOfficeProfile",eventVersion:"v1"};this.sendMessage(o,s).done(function(){e.showBusyIndicator(),Komodo.log("UpdateBoxOfficeProfileEvent() : UpdateBoxOfficeProfile event has been published")}).fail(function(t){e.hideBusyIndicator(),Komodo.log("[ERROR] : could not update customer details for customer number: "+e._currentCustomerNumber)})}},_boxOfficePhoneNumbers:function(){var e=this;if(e.get("data.selectedNumber")){var t=e.get("data.selectedNumber"),a=e.get("data.boxOfficePhoneNumbers");$.each(a,function(a,o){o.count==t?(o.isBoxOfficePrimary=!0,e.set("data.disableSaveNumbers",!1),e.set("data.disableCancel",!1)):(o.isBoxOfficePrimary=!1,e.set("data.disableSaveNumbers",!1),e.set("data.disableCancel",!1))})}}.observes("data.selectedNumber"),_boxOfficePhoneNumberArray:function(){if(this.get("data.boxOfficePhoneNumbers")){var e=this.get("data.boxOfficePhoneNumbers");$.each(e,function(e,t){var a=t.code+t.number;t.full!=a&&(t.full=a),void 0==this.get("data.selectedNumber")&&""==this.get("data.selectedNumber")||t.count==this.get("data.selectedNumber")&&(t.isBoxOfficePrimary=!0)}),this.set("data.disableSaveNumbers",!1),this.set("data.disableCancel",!1)}}.observes("data.boxOfficePhoneNumbers.@each.number"),_updateSectorHistory:function(){this.retrieveSectorHistory()}.observes("_selectedSmartcard"),filteredRentalHistory:function(){var e=this;if(this.get("data.boxOfficeOriginalTransactions").length>0){null!=this.get("_selectedSmartcard")&&this.set("data.boxOfficeTransactions",this.get("data.boxOfficeOriginalTransactions").filterBy("SmartCardNr",this.get("_selectedSmartcard"))),null!=this.get("_selectedTransactionStatus")&&-1!=this.get("_selectedTransactionStatus")&&this.set("data.boxOfficeTransactions",this.get("data.boxOfficeTransactions").filterBy("Status",this.get("_selectedTransactionStatus")));var t=this.get("data.boxOfficeTransactions");if(null!=this.get("data.filterByDate")||void 0!=this.get("data.filterByDate")){var a=new Date(this.get("data.filterByDate").setHours(0,0,0)),o=new Date(this.get("data.filterByDate").setHours(0,0,0));o.setDate(o.getDate()+1),this.set("data.boxOfficeTransactions",[]),t.forEach(function(t){var s=moment(t.TransactionDate,"DD/MM/YYYY");s>=a&s<=o&&e.get("data.boxOfficeTransactions").pushObject(t)})}}return this.get("data.boxOfficeTransactions")}.property("_selectedSmartcard","_selectedTransactionStatus","data.filterByDate","data.boxOfficeOriginalTransactions"),messageBoxOfficeRentalRequestProcessedReceived:function(e){this.hideBusyIndicator();var t=this;if("SUCCESS"==e.ResponseMessage.Payload.RentalStatusDescription){Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.rentTitlePage.modalHeading"),kl.value("locale.manageviewing.boxOffice:boxoffice.rentTitlePage.successMessage",{rentalCode:this.get("data.rentalCode")}),Komodo.Controls.MessageBoxOkButtons,this,"rentalSuccess","default").response=function(e){"ok"==e&&(t.startNewProcess(),t.retrieveTransactionHistory())}}else Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.rentTitlePage.modalHeading"),kl.value("locale.manageviewing.boxOffice:boxoffice.rentTitlePage.errorMessageTitle")+" Unable to rent a title.",Komodo.Controls.MessageBoxOkButtons,this,"rentalFailure","danger");this.set("data.rentalCode",void 0)},messageProcessBoxOfficeRentalRequestDeliveryFailure:function(e){this.hideBusyIndicator(),Komodo.UI.warn("[BoxOfficeController.messageProcessBoxOfficeRentalRequestDeliveryFailure] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.rentTitlePage.modalHeading"),kl.value("locale.manageviewing.boxOffice:boxoffice.rentTitlePage.messageDeliveryFailure"),Komodo.Controls.MessageBoxOkButtons,this,"rentalDeliveryFailure","warning")},messageProcessBoxOfficeRentalRequestFault:function(e){this.hideBusyIndicator(),Komodo.UI.error("[BoxOfficeController.messageProcessBoxOfficeRentalRequestFault] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.rentTitlePage.modalHeading"),kl.value("locale.manageviewing.boxOffice:boxoffice.rentTitlePage.errorMessageTitle")+" Unable to rent a title.",Komodo.Controls.MessageBoxOkButtons,this,"rentalFault","danger")},messageBoxOfficeSectorCreatedReceived:function(e){this.hideBusyIndicator();var t=this;Komodo.UI.log("[BoxOfficeController.messageBoxOfficeSectorCreatedReceived]"+e.ResponseMessage.EventMetaData.Event.EventId),Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.sectorPage.modalHeading"),kl.value("locale.manageviewing.boxOffice:boxoffice.sectorPage.sectorSentMessage")+" "+this.get("_selectedSmartcard"),Komodo.Controls.MessageBoxOkButtons,this,"sentSector","success").response=function(e){"ok"==e&&t.startNewProcess()}},messageCreateBoxOfficeSectorDeliveryFailure:function(e){this.hideBusyIndicator(),Komodo.UI.warn("[BoxOfficeController.messageCreateBoxOfficeSectorDeliveryFailure] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.sectorPage.modalHeading"),kl.value("locale.manageviewing.boxOffice:boxoffice.sectorPage.messageDeliveryFailure"),Komodo.Controls.MessageBoxOkButtons,this,"sectorDeliveryFailure","warning")},messageCreateBoxOfficeSectorFault:function(e){this.hideBusyIndicator(),Komodo.UI.error("[BoxOfficeController.messageCreateBoxOfficeSectorFault] : messageId = "+e.messageId),
Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.sectorPage.modalHeading"),kl.value("locale.manageviewing.boxOffice:boxoffice.sectorPage.messageDeliveryFault"),Komodo.Controls.MessageBoxOkButtons,this,"sectorFault","danger")},messageBoxOfficeProfileCreatedReceived:function(e){this.set("isactivateBoxOfficeButton",!1),Komodo.UI.log("[BoxOfficeController.messageBoxOfficeProfileCreatedReceived]"+e.ResponseMessage.EventMetaData.Event.EventId);var t=Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.title"),kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.activateBoxOffice"),Komodo.Controls.MessageBoxOkButtons,this,"activateBoxOffice","success");this.refreshCustomerData(t)},messageCreateBoxOfficeProfileDeliveryFailure:function(e){this.set("isactivateBoxOfficeButton",!1),this.hideBusyIndicator(),Komodo.UI.warn("[BoxOfficeController.messageBoxOfficeProfileCreatedDeliveryFailure] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.activateBoxOfficeHeading"),kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.profileCreateMessageDeliveryFailure"),Komodo.Controls.MessageBoxOkButtons,this,"profileCreateDeliveryFailure","warning")},messageCreateBoxOfficeProfileFault:function(e){this.set("isactivateBoxOfficeButton",!1),this.hideBusyIndicator(),Komodo.UI.error("[BoxOfficeController.messageBoxOfficeProfileCreatedRequestFault] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.activateBoxOfficeHeading"),kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.genericFailureMessage"),Komodo.Controls.MessageBoxOkButtons,this,"profileCreateFault","danger")},messageBoxOfficePhoneNumberUpdatedReceived:function(e){Komodo.UI.log("[BoxOfficeController.boxOfficePhoneNumberUpdatedReceived]"+e.ResponseMessage.EventMetaData.Event.EventId);var t=Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.updatePhoneNumbersHeading"),kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.updatePhoneNumbers"),Komodo.Controls.MessageBoxOkButtons,this,"updatePhoneNumbers","success");this.refreshCustomerData(t)},messageUpdateBoxOfficeProfileDeliveryFailure:function(e){this.hideBusyIndicator(),Komodo.UI.warn("[BoxOfficeController.messageBoxOfficePhoneNumberUpdatedDeliveryFailure] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.updateProfileHeading"),kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.genericFailureMessage"),Komodo.Controls.MessageBoxOkButtons,this,"updatedPhoneNumbersOnActivateDeliveryFailure","warning")},messageUpdateBoxOfficeProfileFault:function(e){this.hideBusyIndicator(),Komodo.UI.error("[BoxOfficeController.messageBoxOfficePhoneNumberUpdatedFault] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.updateProfileHeading"),kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.genericFailureMessage"),Komodo.Controls.MessageBoxOkButtons,this,"updatedPhoneNumbersOnActivateFault","danger")},messageReEntitleBoxOfficeProcessReceived:function(e){this.hideBusyIndicator(),0==e.ResponseType?Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.queryPage.modalHeading"),kl.value("locale.manageviewing.boxOffice:boxoffice.queryPage.reentitleSuccessMessage")+me.get("data.confirmationCode"),Komodo.Controls.MessageBoxOkButtons,this,"reentitleSuccess","success"):Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.queryPage.modalHeading"),kl.value("locale.manageviewing.boxOffice:boxoffice.queryPage.reentitleFailureMessage"),Komodo.Controls.MessageBoxOkButtons,this,"renentitleRentalFailure","danger"),this.set("data.isQueryingTransaction",!1)},messageReEntitleBoxOfficeProcessDeliveryFailure:function(e){this.hideBusyIndicator(),Komodo.UI.warn("[BoxOfficeController.messageReEntitleBoxOfficeProcessDeliveryFailure] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.queryPage.modalHeading"),kl.value("locale.manageviewing.boxOffice:boxoffice.queryPage.reentitleFailureMessage"),Komodo.Controls.MessageBoxOkButtons,this,"renentitleRentalFailure","danger"),this.set("data.isQueryingTransaction",!1)},messageReEntitleBoxOfficeProcessFault:function(e){this.hideBusyIndicator(),Komodo.UI.error("[BoxOfficeController.messageReEntitleBoxOfficeProcessFault] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.queryPage.modalHeading"),kl.value("locale.manageviewing.boxOffice:boxoffice.queryPage.reentitleFailureMessage"),Komodo.Controls.MessageBoxOkButtons,this,"renentitleRentalFailure","danger")},messageFailureMessageEventReceived:function(e){this.hideBusyIndicator(),Komodo.UI.log("[BoxOfficeController.messageFailureMessageEventReceived]");var t=new RegExp("\\[\\d+\\]"),a=t.exec(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription),o=!1;if(null!=a){var s="locale.manageviewing.boxOffice:boxoffice.errorCodes."+a[0];1==a.length&&kl.value(s)!=s&&(o=!0)}switch(e.ResponseMessage.Payload.OriginatedEventName){case"ProcessBoxOfficeRentalRequest":o?(Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.rentTitlePage.modalHeading"),kl.value("locale.manageviewing.boxOffice:boxoffice.errorCodes."+a[0],{rentalCode:this.get("data.rentalCode")}),Komodo.Controls.MessageBoxOkButtons,this,"ProcessBoxOfficeRentalRequestFailure","danger"),this.set("data.rentalCode",void 0)):(Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.rentTitlePage.modalHeading"),kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.genericFailureMessage",{rentalCode:this.get("data.rentalCode")}),Komodo.Controls.MessageBoxOkButtons,this,"ProcessBoxOfficeRentalRequestFailure","danger"),this.set("data.rentalCode",void 0));break;case"CreateBoxOfficeProfile":this.set("isactivateBoxOfficeButton",!1),o?Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.activateBoxOfficeHeading"),kl.value("locale.manageviewing.boxOffice:boxoffice.errorCodes."+a[0]),Komodo.Controls.MessageBoxOkButtons,this,"activateBoxOfficeFailure","danger"):Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.activateBoxOfficeHeading"),kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.genericFailureMessage"),Komodo.Controls.MessageBoxOkButtons,this,"activateBoxOfficeFailure","danger");break;case"UpdateBoxOfficePhoneNumber":Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.title"),kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.genericFailureMessage"),Komodo.Controls.MessageBoxOkButtons,this,"updatePhoneNumbersFailure","danger");break;case"UpdateBoxOfficeProfile":Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.title"),kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.genericFailureMessage"),Komodo.Controls.MessageBoxOkButtons,this,"updateBoxOfficeProfileFailure","danger");break;case"CreateBoxOfficeSector":Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.sectorPage.modalHeading"),kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.genericFailureMessage"),Komodo.Controls.MessageBoxOkButtons,this,"sectorFailure","danger");break;case"ReEntitleBoxOfficeProcess":o?Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.queryPage.modalHeading"),kl.value("locale.manageviewing.boxOffice:boxoffice.errorCodes."+a[0]),Komodo.Controls.MessageBoxOkButtons,this,"ProcessBoxOfficeRentalRequestFailure","danger"):Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.queryPage.modalHeading"),kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.genericFailureMessage"),Komodo.Controls.MessageBoxOkButtons,this,"genericMessageFailure","danger")}},messageReceived:function(e){Komodo.UI.log("[BoxOfficeController.messageReceived] : event name = "+e.ResponseMessage.EventName),Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.title"),kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.genericReceivedMessage"),Komodo.Controls.MessageBoxOkButtons,this,"genericMessageReceived","success")},messageDeliveryFailure:function(e){Komodo.UI.warn("[BoxOfficeCreateController.messageDeliveryFailure] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.title"),kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.genericDeliveryMessage"),Komodo.Controls.MessageBoxOkButtons,this,"genericDeliveryFailure","warning")},messageFault:function(e){Komodo.UI.error("[BoxOfficeController.messageFault] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing.boxOffice:boxoffice.title"),kl.value("locale.manageviewing.boxOffice:boxoffice.mainPage.genericFailureMessage"),Komodo.Controls.MessageBoxOkButtons,this,"genericFault","danger")},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,12e5,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")}}),Komodo.Application.CommercialErrorCodesController=Komodo.UI.Controller.extend({_viewingLocaleBase:"locale.manageviewing:",_commercialLocaleBase:"locale.commercialcustomer:",init:function(){this._super(),Komodo.log("Constructing Commercial Clear Error Codes controller"),this.set("processVersion","v1.1"),this.set("processName","Commercial Clear Error Codes process")},start:function(){var e=this;e.createCDMData(),e.registerModel("viewModel",Komodo.Models.CommercialManageViewingModel),e.set("viewTitle",kl.value(e._viewingLocaleBase+"commercial.clearErrorCodeTitle")),e.clearFormData(),Komodo.Services.customerProfileService.validateCustomerClass(e.commercialClassId).done(function(t){if(void 0!==t&&null!==t&&void 0!==t.CustomerDetail&&null!==t.CustomerDetail)e.set("customerNo",t.CustomerNumber),e.set("companyName",t.CustomerDetail.CompanyName),e.viewModel.set("customerClass",t.CustomerDetail.Class),e.viewModel.set("customerType",t.CustomerDetail.Type),e.retrieveCustomerProfile(e.customerNo),e.mapEstablishments();else{Komodo.Controls.MessageBoxController.show(kl.value(e._commercialLocaleBase+"customerprofile.customerNotFoundTitle"),kl.value(e._commercialLocaleBase+"customerprofile.customerNotFound"),Komodo.Controls.MessageOKButtons,e,"id5446673","warning").response=function(e){if("ok"===e)return void Komodo.Services.uiService.transitionTo("home")}}}),e._super()},stop:function(){this.hideBusyIndicator(),this._super()},createCDMData:function(){var e=this,t=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),a=Komodo.Services.uiService.getController("application").get("_selectedCountryDescription"),o=Komodo.Services.localizationService.getCurrentLanguage();e.set("country",a),e.set("loggedInCountryId",t),e.getHierachicalCDMData(t,o,"ErrorReasonRelationship",e.errorReasonRelationship)},getHierachicalCDMData:function(e,t,a,o){var s=this,r=$.Deferred();return Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){var t=JSON.parse(e);switch(o.clear(),s.get("errorReasonCodes").clear(),a){case"ErrorReasonRelationship":$.each(t.Errors.Error,function(e,t){o.addObject(t),s.get("errorReasonCodes").addObject(t)});break;default:Komodo.log("[ERROR] : Unknown Hierachical dataset: "+a)}}).fail(function(){Komodo.log("[ERROR] : could not retrieve hierarchical CDM data for "+a)}),r},clearFormData:function(){var e=this;e.viewModel.set("customerClass",void 0),e.viewModel.set("customerType",void 0),e.viewModel.set("paymentGroup",void 0),e.viewModel.set("viewingLocation",void 0),e.viewModel.set("agreementType",void 0),e.viewModel.set("establishmentName",void 0),e.viewModel.set("viewingPlatform",void 0),e.viewModel.set("viewingPoints",void 0),e.viewModel.set("contractStartDate",void 0),e.viewModel.set("contractEndDate",void 0),e.viewModel.set("chargePeriod",void 0),e.viewModel.set("accounts",[]),e.viewModel.set("establishments",[]),e.viewModel.set("viewingLocations",[]),e.viewModel.set("selectedproductData",[]),e.set("smartCards",[]),e.set("smartCardsFirstColumn",[]),e.set("smartCardsSecondColumn",[]),e.set("isButtonDisable",!0),e.set("showDetails",!1)},getListOfSerialNumber:function(){var e=this,t=[];return void 0!==e.smartCards&&e.smartCards.length>0&&$.each(e.smartCards,function(e,a){if(!0===a.isSelected){var o=Komodo.Models.ListOfSerialNumber.create();o.set("SerialNumber",a.serialNumber),t.push(o)}}),t},getErrorReasonCode:function(){var e=this,t=void 0,a=$.grep($.makeArray(e.errorReasonRelationship),function(t){return e.viewModel.errorReasonCode===t.CanonicalKey});return a.length>0&&(t=a[0].ErrorReasonKey),t},mapEstablishments:function(){var e=this;e.viewModel.establishments.clear(),$.each(e.viewModel.accounts,function(t,a){void 0!==a.ListOfAgreement&&void 0!==a.ListOfAgreement.Agreement&&$.each(a.ListOfAgreement.Agreement,function(t,a){a.Name.toUpperCase().indexOf(" - DCC")<=0&&a.Type!==Komodo.AgreementTypes.DCC&&"ACTIVE"===a.AgreementStatus.toUpperCase()&&e.viewModel.establishments.addObject(a.Name)})}),e.viewModel.establishments&&e.viewModel.establishments.sort(function(e,t){return e<t?-1:e>t?1:0}),e.establishmentName&&(e.viewModel.set("establishmentName",e.establishmentName),e.set("establishmentName",void 0))},getAgreementDetails:function(e,t){var a=this;if(a.showBusyIndicator(),void 0===t.ListOfHardware||void 0===t.ListOfHardware.Hardware||0===t.ListOfHardware.Hardware.length){Komodo.Application.SharedObjectController.create().retrieveCustomerDeviceProfile(e.CustomerId,e.UID,t.UID).done(function(o){a.retrieveCustomerProfile(e.CustomerId),a.mapAgreementDetails(t),a.hideBusyIndicator()})}else a.mapAgreementDetails(t),a.hideBusyIndicator()},mapAgreementDetails:function(e){var t=this;t.set("smartCards",[]),t.set("smartCardsFirstColumn",[]),t.set("smartCardsSecondColumn",[]),t.set("isButtonDisable",!0),t.set("showDetails",!1),void 0!==e.ListOfHardware&&void 0!==e.ListOfHardware.Hardware&&$.each($.makeArray(e.ListOfHardware.Hardware),function(e,a){if(void 0!==a.SmartcardDetail&&void 0!==a.LinkedSmartcard&&""!==a.LinkedSmartcard){var o=Komodo.Models.SmartcardModel.create();o.set("serialNumber",a.LinkedSmartcard),o.set("name",a.SmartcardDetail.Name),o.set("description",a.SmartcardDetail.Name+" "+a.LinkedSmartcard),o.set("isSelected",!1),t.smartCards.pushObject(o)}}),void 0!==t.smartCards&&t.smartCards.length>0&&(t.smartCards.sort(function(e,t){var a=e.description?e.description.toLowerCase():"",o=t.description?t.description.toLowerCase():"";return a>o?1:a<o?-1:0}),$.each(t.smartCards,function(e,a){e%2==0?t.smartCardsFirstColumn.push(a):t.smartCardsSecondColumn.push(a)}),t.set("isButtonDisable",!1),t.set("showDetails",!0),t.viewModel.set("allSmartcardSelected",!1))},getNewProcessID:function(){this.startNewProcess()},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,3e4,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},establishmentNameChanged:function(){var e=this;e.viewModel.viewingLocations.clear(),e.viewModel.set("viewingLocation",void 0),$.each(e.viewModel.accounts,function(t,a){void 0!==a.ListOfAgreement&&void 0!==a.ListOfAgreement.Agreement&&$.each(a.ListOfAgreement.Agreement,function(t,o){o.Name===e.viewModel.establishmentName&&(e.viewModel.viewingLocations.addObject(o.LocationIndicator),e.viewModel.set("paymentGroup",a))})})}.observes("viewModel.establishmentName"),viewingLocationChanged:function(){var e=this;$.each(e.viewModel.accounts,function(t,a){void 0!==a.ListOfAgreement&&void 0!==a.ListOfAgreement.Agreement&&$.each(a.ListOfAgreement.Agreement,function(t,o){return o.Name!==e.viewModel.establishmentName||o.LocationIndicator!==e.viewModel.viewingLocation||(e.getAgreementDetails(a,o),!1)})})}.observes("viewModel.viewingLocation"),allSmartcardSelectedChanged:function(){var e=this;void 0!==e.smartCards&&e.smartCards.length>0&&$.each(e.smartCards,function(t,a){a.set("isSelected",e.viewModel.allSmartcardSelected)})}.observes("viewModel.allSmartcardSelected"),actions:{clearErrorCodes:function(){var e=this;return void 0===e.viewModel.errorReasonCode||null===e.viewModel.errorReasonCode?void Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._commercialLocaleBase+"errorCodes.messageErrorCodeValidation"),Komodo.Controls.MessageBoxOkButton,e,"id5446883","danger"):$.grep($.makeArray(e.smartCards),function(e){return!0===e.isSelected}).length<=0?void Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._commercialLocaleBase+"errorCodes.messageSmartcardsValidation"),Komodo.Controls.MessageBoxOkButton,e,"id5446883","danger"):void e.publishClearMultipleDevicesErrorCodeEvent()}},retrieveCustomerProfile:function(e){var t=this;t.viewModel.accounts.clear();var a=Komodo.Services.customerProfileService.getCustomerProfile();a&&a.ResponseMessage&&a.ResponseMessage.Payload&&a.ResponseMessage.Payload.ListOfAccount&&a.ResponseMessage.Payload.ListOfAccount.Account&&$.each(a.ResponseMessage.Payload.ListOfAccount.Account,function(e,a){t.viewModel.accounts.addObject(a)})},publishClearMultipleDevicesErrorCodeEvent:function(){var e=this,t=Komodo.Models.ClearMultipleDevicesErrorCode.create(),a=Komodo.canonicalFacadeFactory(t,["Country","AgreementUID","ListOfSerialNumber","ErrorReasonCode"]);a.set("Country",e.get("loggedInCountryId")),a.set("ListOfSerialNumber",e.getListOfSerialNumber()),a.set("ErrorReasonCode",e.getErrorReasonCode());var o=Komodo.Services.ManageViewingService;e.getNewProcessID(),o.publishEvent(e,t,"ClearMultipleDevicesErrorCode","v1").done(function(){e.showBusyIndicator(),e.set("isButtonDisable",!0),Komodo.log("publishClearMultipleDevicesErrorCodeEvent() : Clear Multiple Devices Error Code event has been published.")}).fail(function(){e.hideBusyIndicator(),e.set("isButtonDisable",!1),Komodo.log("publishClearMultipleDevicesErrorCodeEvent() : Clear Multiple Devices Error Code event has failed.")})},messageMultipleDevicesErrorCodeClearedReceived:function(e){var t=this;if(t.hideBusyIndicator(),void 0!==e.ResponseMessage.Payload&&void 0!==e.ResponseMessage.Payload.ListOfSerialNumber){var a=Komodo.Controls.MessageBoxController.show(t.viewTitle,kl.value(t._commercialLocaleBase+"errorCodes.messgClearErrorCodesSuccess"),Komodo.Controls.MessageBoxOkButton,this,"id5446673","success");t.viewModel.set("establishmentName",void 0),a.response=function(e){if("ok"===e)return void Komodo.Services.uiService.transitionTo("commercialCustomerProfile")}}else Komodo.Controls.MessageBoxController.show(t.viewTitle,kl.value(t._commercialLocaleBase+"errorCodes.messgClearErrorCodesFail"))},messageFailureMessageEventReceived:function(e){var t=this;t.hideBusyIndicator(),t.set("isButtonDisable",!1),Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButton,this,"id544246673","danger")},messageReceived:function(e){this.hideBusyIndicator(),Komodo.UI.log("[CommercialErrorCodesController.messageReceived] : event name = "+e.ResponseMessage.EventName)},messageDeliveryFailure:function(e){this.hideBusyIndicator(),Komodo.UI.warn("[CommercialErrorCodesController.messageDeliveryFailure] : messageId = "+e.messageId)},messageFault:function(e){this.hideBusyIndicator(),Komodo.UI.error("[CommercialErrorCodesController.messageFault] : messageId = "+e.messageId)},commercialClassId:[Komodo.CustomerClass.COMMERCIAL,Komodo.CustomerClass.NATIONAL_DEAL],errorReasonCodes:[],errorReasonRelationship:[],smartCards:[],smartCardsFirstColumn:[],smartCardsSecondColumn:[],showDetails:!1,isButtonDisable:!0,country:void 0}),Komodo.Application.CommercialViewingLocationController=Komodo.UI.Controller.extend({_localeAssociateProducts:"locale.associateProducts:",_localecommercialCustomer:"locale.commercialcustomer:",_localeCustomerInformation:"locale.customer:customerInformation.",_localeManageViewing:"locale.manageviewing:commercial.",init:function(){this._super(),Komodo.log("Constructing Commercial Viewing Location controller"),this.set("processVersion","v1.1"),this.set("processName","Commercial Viewing Location process");var e=this;e.set("paymentGroupGridColumns",[Komodo.Controls.DataGridColumn.create({name:"paymentGroup",title:kl.value(this._localecommercialCustomer+"paymentGroup.paymentGroup"),canEdit:!1,width:"20%"}),Komodo.Controls.DataGridColumn.create({name:"addressType",title:kl.value(this._localeCustomerInformation+"type"),canEdit:!1,width:"10%"}),Komodo.Controls.DataGridColumn.create({name:"addressString",title:kl.value(this._localeCustomerInformation+"addresslblGridColumn"),canEdit:!1,width:"60%"}),Komodo.Controls.DataGridCommandColumn.create({title:kl.value(this._localeCustomerInformation+"editButton"),displayText:kl.value(this._localeCustomerInformation+"editButton"),width:"10%",action:"editPaymentGroupItem",displayType:"link"})]),Komodo.Services.eventAggregator.subscribe("CustomerProfileRetrievedReceived",function(){if(e.viewModel&&e.viewModel.accounts&&e.viewModel.paymentGroups){e.viewModel.accounts.clear(),e.viewModel.paymentGroups.clear();var t=Komodo.Services.customerProfileService.getCustomerProfile();t&&t.ResponseMessage&&t.ResponseMessage.Payload&&t.ResponseMessage.Payload.ListOfAccount&&t.ResponseMessage.Payload.ListOfAccount.Account&&e.populatePaymentGroups(t.ResponseMessage.Payload.ListOfAccount.Account)}})},start:function(){var e=this;e.createCDMData(),e.registerModel("viewModel",Komodo.Models.ViewingLocationModel),e.set("addressInformation",Komodo.Models.AddressModel.create()),e.registerValidation(),Komodo.Services.customerProfileService.validateCustomerClass(e.commercialClassId).done(function(t){if(void 0!==t&&null!==t)e.set("customerNo",t.CustomerNumber),e.retrieveFinancialDetails(e.customerNo);else{Komodo.Controls.MessageBoxController.show(kl.value(e._localecommercialCustomer+"customerprofile.customerNotFoundTitle"),kl.value(e._localecommercialCustomer+"customerprofile.customerNotFound"),Komodo.Controls.MessageOKButtons,e,"id5446673","warning").response=function(e){if("ok"===e)return void Komodo.Services.uiService.transitionTo("home")}}}),e.set("viewTitle",kl.value(e._localeManageViewing+"viewLoactionTitle")),e.set("showAddEdit",!1),e.set("isCreate",!0),e.viewModel.set("location","mainLocation"),e.viewModel.set("paymentDetailAsMainLocation","1"),Komodo.Services.featureToggleService.isEnabled("CustomerGlobal","EnableAddressOverRide").done(function(t){e.set("enableAddressOverRide",t)}),e._super()},stop:function(){this._super()},registerValidation:function(){var e=this;e.registerValidator(e.get("viewModel"),"paymentGroup",{type:"string",isRequired:!0,minLength:2,maxLength:50,regExPattern:"^[0-9a-zA-Z ()-]*$",functions:Komodo.UI.Validators.shouldNotStartWithSpace}),e.registerValidator(e.get("viewModel"),"paymentGroupVatNumber",{type:"string",minLength:3,maxLength:11}),e.registerValidator(e.get("viewModel"),"email",{type:"string",isRequired:!0,regExPattern:Komodo.UI.Validators.RegExPatterns.Email}),e.registerValidator(e.get("viewModel"),"accountType",{type:"string",displayName:kl.value(e.localeBase+"accountType")}),e.registerValidator(e.get("viewModel"),"debitOrderDay",{type:"string"}),e.registerValidator(e.get("viewModel"),"payerName",{type:"string",minLength:3,maxLength:101,regExPattern:"^[a-zA-Z ]*$",functions:Komodo.UI.Validators.shouldNotStartWithSpace}),e.registerValidator(e.get("viewModel"),"payerID",{type:"string",minLength:8,maxLength:13,functions:Komodo.UI.Validators.alphanumericValidator}),e.registerValidator(e.get("viewModel"),"accountNo",{type:"string",minLength:5,maxLength:34,functions:Komodo.UI.Validators.alphanumericValidator}),e.registerValidator(e.get("viewModel"),"bank",{type:"string"}),e.registerValidator(e.get("viewModel"),"branchCode",{type:"string"})},createCDMData:function(){var e=this,t=$.Deferred(),a=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),o=Komodo.Services.uiService.getController("application").get("_selectedCountryDescription"),s=Komodo.Services.localizationService.getCurrentLanguage();return e.set("country",o),e.set("loggedInCountryId",a),e.set("paymentMethodList",[]),e.getStaticCDMData(a,"global","PaymentMethodConstants",e.paymentMethodList),e.getStaticCDMData(a,s,"MethodOfPayment",e.paymentMethods),e.getStaticCDMData(a,s,"AddressType",e.addressTypes),e.getStaticCDMData(a,s,"InvoiceDayCommercial",e.invoiceDays),e.getStaticCDMData(a,s,"AccountType",e.accountTypes),e.getHierachicalCDMData(a,s,"BankDetail",e.banks),e.getHierachicalCDMData(a,s,"CountryDetail",e.countriesWithCodes),e.getHierachicalCDMData(a,s,"Location",e.countries).done(function(e){t.resolve(e)}),e.set("locations",[]),e.locations.push({key:"mainLocation",value:kl.value(e._localecommercialCustomer+"paymentGroup.mainLocation")}),e.locations.push({key:"anotherLocation",value:kl.value(e._localecommercialCustomer+"paymentGroup.anotherLocation")}),e.set("paymentDetails",[]),e.paymentDetails.push({title:kl.value(e._localeCustomerInformation+"yes"),value:"1"}),e.paymentDetails.push({title:kl.value(e._localeCustomerInformation+"no"),value:"0"}),t},getHierachicalCDMData:function(e,t,a,o){var s=$.Deferred();return Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){var t=JSON.parse(e);switch(o.clear(),a){case"BankDetail":$.each($.makeArray(t.Banks.Bank),function(e,t){o.addObject(t)});break;case"Location":$.each($.makeArray(t.Countries.Country),function(e,t){o.addObject(t)}),s.resolve(e);break;case"CountryDetail":$.each($.makeArray(t.Countries.Country),function(e,t){o.addObject(t)});break;default:Komodo.log("[ERROR] : Unknown Hierachical dataset: "+a)}}).fail(function(){Komodo.log("[ERROR] : could not retrieve hierarchical CDM data for "+a)}),s},getStaticCDMData:function(e,t,a,o){var s=this;Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){switch(o.clear(),a){case"AddressType":e.sort(function(e,t){return e.key<t.key?1:e.key>t.key?-1:0}),$.each(e,function(e,t){t.key!==Komodo.CanonicalValues.AddressTypes.Physical&&t.key!==Komodo.CanonicalValues.AddressTypes.Postal||o.addObject(t)});break;case"MethodOfPayment":$.each(e,function(e,t){"CASH"!==t.value.toUpperCase()&&"PAYROLL"!==t.value.toUpperCase()&&"AHV PENDING"!==t.value.toUpperCase()&&o.addObject(t)});break;case"PaymentMethodConstants":s.getPaymentMethodList(e);break;case"InvoiceDayCommercial":e=e.sort(function(e,t){return parseInt(e.key,10)>parseInt(t.key,10)?1:parseInt(e.key,10)<parseInt(t.key,10)?-1:0}),Komodo.Services.featureToggleService.isEnabled("CreateCustomer","LimitInvoiceDayCommercial").done(function(t){$.each(e,function(e,a){t&&a.key<=28&&o.addObject(a),!1===t&&o.addObject(a)}),s.invoiceDays&&s.invoiceDays.length>0&&s.viewModel&&s.viewModel.set("debitOrderDay",s.invoiceDays[0].key)}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)}),$.each(e,function(e,t){t.key<=28&&o.addObject(t)});break;default:$.each(e,function(e,t){o.addObject(t)})}}).fail(function(){"PaymentMethodConstants"===a&&s.getPaymentMethodList(void 0),Komodo.log("[ERROR] : could not retrieve static CDM data for "+a)})},getPaymentMethodList:function(e){var t=this,a=!0;if(Ember.isEmpty(e))Komodo.log("loading default value into paymentMethodList array - as response data empty");else try{$.each(e,function(e,o){if(!Ember.isEmpty(o.key)&&"commercialpaymentmethods"===o.key.toLowerCase()&&!Ember.isEmpty(o.value))return t.set("paymentMethodList",$.parseJSON(o.value)),a=!1,!1})}catch(e){Komodo.log("Error while fetching PaymentMethodConstants dataset. Error Details:"+e),Komodo.log("loading default value into paymentMethodList array - as got error in parsing the data value")}if(a){t.set("paymentMethodList",$.parseJSON('[{"title":"Cash", "value":"1"}, {"title":"Debit Order", "value":"0"}]'))}},createDependentProperty:function(e,t){var a=this;t.forEach(function(t){void 0!==a.get("validators."+e)&&a.get("validators."+e).functions.addObject(t)}),a.get("validators."+e).validate()},removeDependentProperty:function(e){var t=this;void 0!==t.get("validators."+e)&&(t.get("validators."+e).functions.clear(),t.get("validators."+e).validate())},createPaymentGroupDataGridModel:function(e){var t=this,a=Komodo.Models.PaymentGroupDataGridModel.create();return void 0!==e&&null!==e&&(a.set("accountNumber",e.UID),a.set("paymentGroup",e.Name),void 0!==e.BillingAddress&&null!==e.BillingAddress&&(a.set("addressType",e.BillingAddress.Type),a.set("addressString",t.getAddressString(e.BillingAddress)),a.set("isPrimaryString","true"===e.BillingAddress.IsPrimary?"Yes":"No"),a.set("isDefault",e.IsDefault))),a},getAddressString:function(e){var t=this,a="";if(e){void 0!==e.HouseNumber&&null!==e.HouseNumber&&""!==$.trim(e.HouseNumber)&&(a+=$.trim(e.HouseNumber)+", "),void 0!==e.BuildingName&&null!==e.BuildingName&&""!==$.trim(e.BuildingName)&&(a+=$.trim(e.BuildingName)+", "),void 0!==e.Street&&null!==e.Street&&""!==$.trim(e.Street)&&(a+=$.trim(e.Street)+", "),void 0!==e.PostBoxNumber&&null!==e.PostBoxNumber&&""!==$.trim(e.PostBoxNumber)&&(a+=$.trim(e.PostBoxNumber)+", ");var o=t.getCitySuburbText(e.Country,e.Province,e.City,e.Suburb);o&&void 0!==o.Suburb&&null!==o.Suburb&&""!==$.trim(o.Suburb)&&(a+=$.trim(o.Suburb)+", "),o&&void 0!==o.City&&null!==o.City&&""!==$.trim(o.City)&&(a+=$.trim(o.City)+", ");var s=$.grep($.makeArray(t.countries),function(t){return t.CanonicalKey.toUpperCase()===e.Country.toUpperCase()});if(s.length>0){var r=$.grep($.makeArray(s[0].Provinces.Province),function(t){return t.CanonicalKey.toUpperCase()===e.Province.toUpperCase()});r.length>0&&(a+=$.trim(r[0].CanonicalValue)+", "),a+=$.trim(s[0].CanonicalValue)+", "}void 0!==e.PostCode&&null!==e.PostCode&&""!==$.trim(e.PostCode)&&(a+=$.trim(e.PostCode)+", "),a=$.trim(a).replace(/^,|,$/g,"")}return a},getAccounts:function(){var e=this,t=Komodo.Models.Account.create(),a=Komodo.canonicalFacadeFactory(t,["Type","UID","Name","StartDate","EndDate","DunningLevel","Balance","TermOfPayment","Status","PaymentDetail","BillingAddress"]),o=new Date;a.set("StartDate",o);var s=$.grep(e.accountTypes,function(e){return"DMX"===e.value}),r=void 0;s.length>0&&(r=$.grep(e.viewModel.accounts,function(e){return e.Type===s[0].key})),void 0!==r&&r.length>0?a.set("Type",s[0].key):$(e.accountTypes).each(function(e,a){if("DStvComm"===a.value)return void t.set("Type",a.key)}),a.set("Name",e.viewModel.get("paymentGroup")),a.set("VatNumber",e.viewModel.get("paymentGroupVatNumber")),!1===e.isCreate&&a.set("UID",e.viewModel.get("accountId"));var n=e.getMainLocationAccount(),i=Komodo.Models.Price.create();void 0!==n&&void 0!==n.Balance&&i.set("CurrencyCode",n.Balance.CurrencyCode),a.set("Balance",i);var c=Komodo.Models.PaymentDetail.create();return"1"===e.viewModel.paymentDetailAsMainLocation?void 0!==n&&void 0!==n.PaymentDetail&&(c.set("MethodOfPayment",n.PaymentDetail.MethodOfPayment),c.set("DebitOrderDay",n.PaymentDetail.DebitOrderDay),c.set("AccountNumber",n.PaymentDetail.AccountNumber),c.set("BankName",n.PaymentDetail.BankName),c.set("BranchName",n.PaymentDetail.BranchName),c.set("BranchCode",n.PaymentDetail.BranchCode),c.set("PayerName",n.PaymentDetail.PayerName),
c.set("PayerIDNumber",n.PaymentDetail.PayerIDNumber)):void 0!==e.viewModel.get("methodOfPayment")&&"1"===e.viewModel.get("methodOfPayment")?(c.set("MethodOfPayment",e.viewModel.get("methodOfPayment")),void 0!==e.viewModel.get("debitOrderDay")&&c.set("DebitOrderDay",e.viewModel.get("debitOrderDay"))):(void 0!==e.viewModel.get("accountType")&&(c.set("MethodOfPayment",e.viewModel.get("accountType").key),c.set("BankAccountType",e.viewModel.get("accountType").value)),void 0!==e.viewModel.get("accountNo")&&c.set("AccountNumber",e.viewModel.get("accountNo")),null!==e.viewModel.get("branchCode")&&null!==e.viewModel.get("bank")&&(c.set("BranchCode",e.viewModel.get("branchCode").BranchCode),c.set("BankName",e.viewModel.get("bank").CanonicalKey),c.set("BranchName",e.viewModel.get("branchCode").CanonicalValue)),void 0!==e.viewModel.get("debitOrderDay")&&c.set("DebitOrderDay",e.viewModel.get("debitOrderDay")),void 0!==e.viewModel.payerName&&c.set("PayerName",e.viewModel.payerName),void 0!==e.viewModel.payerID&&c.set("PayerIDNumber",e.viewModel.payerID)),a.set("PaymentDetail",c),a.set("BillingAddress",e.getAddress()),t},getAddress:function(){var e=this,t=Komodo.Models.Address.create();if("mainLocation"===e.viewModel.location){var a=e.getMainLocationAccount();a&&a.BillingAddress&&(t.Type=a.BillingAddress.Type,t.IsPrimary=a.BillingAddress.IsPrimary,t.HouseNumber=a.BillingAddress.HouseNumber,t.BuildingName=a.BillingAddress.BuildingName,t.Street=a.BillingAddress.Street,t.Suburb=a.BillingAddress.Suburb,t.City=a.BillingAddress.City,t.Province=a.BillingAddress.Province,t.Country=a.BillingAddress.Country,t.PostCode=a.BillingAddress.PostCode,t.PostBoxNumber=a.BillingAddress.PostBoxNumber,t.Longitude=void 0,t.Latitude=void 0,t.BuildingNumber=void 0,t.IsMarketingEnabled=!1,t.IsBillingAddress=!0,t.TypeDescription=a.BillingAddress.TypeDescription)}else t=Komodo.UI.addressFunctions.getAddress(e.get("addressInformation")),t.IsBillingAddress=!0;return t.TypeDescription=e.get("viewModel.addressTypeValue"),t.Email=e.get("viewModel.email"),t},getMainLocationAccount:function(){var e=this,t=void 0;if(e.viewModel.accounts){if(t=$.grep(e.viewModel.accounts,function(e){return"Main Location"===e.Name}),t.length>0)return t[0];if(t=$.grep(e.viewModel.accounts,function(e){return!0===e.IsDefault}),t.length>0)return t[0]}return t},getPayload:function(){var e=this,t=void 0,a=void 0,o=void 0,s=void 0,r=e.getAccounts();return r&&(r.BillingAddress&&(o="POSTAL"===r.BillingAddress.TypeDescription.toUpperCase()?{Type:r.BillingAddress.Type,IsPrimary:r.BillingAddress.IsPrimary,HouseNumber:"",BuildingName:"",Street:r.BillingAddress.PostBoxNumber,Suburb:r.BillingAddress.Suburb,City:r.BillingAddress.City,Province:r.BillingAddress.Province,Country:r.BillingAddress.Country,PostCode:r.BillingAddress.PostCode,PostBoxNumber:r.BillingAddress.PostBoxNumber,Longitude:void 0,Latitude:void 0,BuildingNumber:void 0,IsMarketingEnabled:!1,IsBillingAddress:!0,Email:r.BillingAddress.Email,TypeDescription:r.BillingAddress.TypeDescription}:{Type:r.BillingAddress.Type,IsPrimary:r.BillingAddress.IsPrimary,HouseNumber:r.BillingAddress.HouseNumber,BuildingName:r.BillingAddress.BuildingName,Street:r.BillingAddress.Street,Suburb:r.BillingAddress.Suburb,City:r.BillingAddress.City,Province:r.BillingAddress.Province,Country:r.BillingAddress.Country,PostCode:r.BillingAddress.PostCode,PostBoxNumber:"",Longitude:void 0,Latitude:void 0,BuildingNumber:void 0,IsMarketingEnabled:!1,IsBillingAddress:!0,Email:r.BillingAddress.Email,TypeDescription:r.BillingAddress.TypeDescription}),r.PaymentDetail&&(s={MethodOfPayment:r.PaymentDetail.MethodOfPayment,DebitOrderDay:r.PaymentDetail.DebitOrderDay,AccountNumber:r.PaymentDetail.AccountNumber,BankName:r.PaymentDetail.BankName,BranchName:r.PaymentDetail.BranchName,BranchCode:r.PaymentDetail.BranchCode,PayerName:r.PaymentDetail.PayerName,PayerIDNumber:r.PaymentDetail.PayerIDNumber,BankAccountType:r.PaymentDetail.BankAccountType}),r.Balance&&(a={CurrencyCode:r.Balance.CurrencyCode}),t={CustomerId:e.get("customerNo"),VatNumber:e.get("viewModel.paymentGroupVatNumber"),Number:r.get("UID"),Type:r.get("Type"),AccountTypeId:r.get("Type"),Name:r.get("Name"),DunningLevel:0,InvoicingProfileId:r.get("PaymentDetail.DebitOrderDay"),Balance:a,PaymentDetail:s,BillingAddress:o}),t},mapAccountInformation:function(e){var t=this;if(void 0!==e&&null!==e&&void 0!==e.PaymentDetail&&null!==e.PaymentDetail)if("Main Location"===e.Name&&t.set("editPaymentGroup",!0),t.viewModel.set("paymentGroup",e.Name),t.viewModel.set("paymentGroupVatNumber",e.VatNumber),t.viewModel.set("accountId",e.UID),"1"===e.PaymentDetail.MethodOfPayment)t.viewModel.set("methodOfPayment",e.PaymentDetail.MethodOfPayment),t.viewModel.set("debitOrderDay",e.PaymentDetail.DebitOrderDay);else{t.viewModel.set("methodOfPayment","0"),t.viewModel.set("accountNo",e.PaymentDetail.AccountNumber),t.viewModel.set("debitOrderDay",e.PaymentDetail.DebitOrderDay),t.viewModel.set("payerName",e.PaymentDetail.PayerName),t.viewModel.set("payerID",e.PaymentDetail.PayerIDNumber);var a=$.grep($.makeArray(t.paymentMethods),function(t){return t.key===e.PaymentDetail.MethodOfPayment});a.length>0&&t.viewModel.set("accountType",a[0]);var o=$.grep($.makeArray(t.banks),function(t){return t.CanonicalKey===e.PaymentDetail.BankName});o.length>0&&t.viewModel.set("bank",o[0]);var s=$.grep($.makeArray(t.bankBranches),function(t){return t.BranchCode===e.PaymentDetail.BranchCode});s.length>0&&t.viewModel.set("branchCode",s[0])}},mapAddressInformation:function(e){var t=this;if(void 0!==e&&null!==e&&void 0!==e.BillingAddress&&null!==e.BillingAddress){var a=e.BillingAddress;t.viewModel.set("email",a.Email);var o=t.addressTypes[0],s=a.TypeDescription?a.TypeDescription:t.addressTypes[0].value,r=$.grep($.makeArray(t.get("addressTypes")),function(e){return e.value.toUpperCase()===s.toUpperCase()});if(r.length>0&&(o=r[0],t.viewModel.set("addressTypeKey",o.key)),"POSTAL"===s.toUpperCase()){var n=a.Street;if(-1!==n.replace(/\s/g,"").indexOf("PO BOX")){var i=n.split(" ");t.get("addressInformation").set("privateBag",i[2]),t.get("addressInformation").set("boxType",Komodo.BoxTypes.PO_BOX)}else if(-1!==n.indexOf("SUITE")){var i=n.split(" ");t.get("addressInformation").set("privateBag",i[1]),t.get("addressInformation").set("boxType",Komodo.BoxTypes.SUITE)}else if(-1!==n.replace(/\s/g,"").indexOf("PRIVATE BAG")){var i=n.split(" ");t.get("addressInformation").set("privateBag",i[2]),t.get("addressInformation").set("boxType",Komodo.BoxTypes.PRIVATE_BAG)}t.get("addressInformation").set("streetNumber",void 0),t.get("addressInformation").set("streetName",void 0)}else{var c=Komodo.UI.addressFunctions.splitStreetNumberName(a.Street);t.get("addressInformation").set("streetNumber",c.streetNumber),t.get("addressInformation").set("streetName",c.streetName),t.get("addressInformation").set("privateBag",void 0),t.get("addressInformation").set("boxType",void 0)}t.get("addressInformation").set("isAddressOverride",!t.get("enableAddressOverRide")||!!a.IsVerified&&!a.IsVerified),t.get("addressInformation").set("addressTypeText",o.value),t.get("addressInformation").set("addressType",o.key),t.get("addressInformation").set("country",a.Country),t.get("addressInformation").set("province",a.Province);var l=t.getCitySuburbText(a.Country,a.Province,a.City,a.Suburb);t.get("addressInformation").set("city",l.City),t.get("addressInformation").set("suburb",l.Suburb),t.get("addressInformation").set("postalCode",a.PostCode),t.get("addressInformation").set("building",a.BuildingName),t.get("addressInformation").set("unit",a.HouseNumber),t.get("addressInformation").set("isPrimary",!1),t.get("addressInformation").set("isPrimaryString","No"),t.get("addressInformation").set("isMarketingEnabled",!1),t.get("addressInformation").set("addressString","")}},clearFormData:function(){var e=this;e.set("showAddress",!1),e.set("showPaymentDetails",!1),e.set("showDebitOrderDetails",!1),e.set("showAddEdit",!1),e.set("isCreate",!0),e.viewModel.set("paymentGroup",void 0),e.viewModel.set("location",void 0),e.viewModel.set("addressTypeKey",void 0),e.viewModel.set("addressTypeValue",void 0),e.viewModel.set("isPrimary",void 0),e.viewModel.set("isPrimaryString",void 0),e.viewModel.set("IsMarketingEnabled",void 0),e.viewModel.set("country",void 0),e.viewModel.set("province",void 0),e.viewModel.set("city",void 0),e.viewModel.set("suburb",void 0),e.viewModel.set("postalCode",void 0),e.viewModel.set("unit",void 0),e.viewModel.set("building",void 0),e.viewModel.set("streetNo",void 0),e.viewModel.set("streetName",void 0),e.viewModel.set("privateBag",void 0),e.viewModel.set("billing",void 0),e.viewModel.set("countryCanonicalKey",void 0),e.viewModel.set("provinceCanonicalKey",void 0),e.viewModel.set("cityCanonicalKey",void 0),e.viewModel.set("suburbCanonicalKey",void 0),e.viewModel.set("countryKey",void 0),e.viewModel.set("paymentDetailAsMainLocation",void 0),e.viewModel.set("methodOfPayment",void 0),e.viewModel.set("payerName",void 0),e.viewModel.set("payerID",void 0),e.viewModel.set("accountType",void 0),e.viewModel.set("bank",void 0),e.viewModel.set("branchCode",void 0),e.viewModel.set("accountNo",void 0),e.viewModel.set("debitOrderDay",void 0),e.viewModel.set("paymentGroupVatNumber",void 0),e.viewModel.set("email",void 0),e.viewModel.set("addressType",void 0)},clearAddressInformation:function(){var e=this;e.get("addressInformation").set("isAddressOverride",!e.get("enableAddressOverRide")),e.get("addressInformation").set("addressTypeText",e.addressTypes[0].value),e.get("addressInformation").set("addressType",e.addressTypes[0].key),e.get("addressInformation").set("country",e.get("loggedInCountryId")),e.get("addressInformation").set("province",void 0),e.get("addressInformation").set("city",void 0),e.get("addressInformation").set("suburb",void 0),e.get("addressInformation").set("postalCode",void 0),e.get("addressInformation").set("unit",void 0),e.get("addressInformation").set("building",void 0),e.get("addressInformation").set("streetNumber",void 0),e.get("addressInformation").set("privateBag",void 0),e.get("addressInformation").set("boxType",void 0),e.get("addressInformation").set("streetName",void 0),e.get("addressInformation").set("isPrimary",!1),e.get("addressInformation").set("isPrimaryString","No"),e.get("addressInformation").set("isMarketingEnabled",!1),e.get("addressInformation").set("addressString",void 0)},clearAndRefreshview:function(){var e=this;if(e.clearFormData(),e.customerNo){var t=Komodo.Application.SharedObjectController.create();t.retrieveCustomerProfile(e.customerNo),t.retrieveFinancialAccounts(e.customerNo)}},getCitySuburbText:function(e,t,a,o){var s=this;if(e&&t&&a&&o&&(a=s.capitaliseFirstLetter(a),o=s.capitaliseFirstLetter(o),!s.get("enableAddressOverRide"))){var r=$.grep($.makeArray(s.countries),function(t){return t.CanonicalKey.toUpperCase()===e.toUpperCase()});if(r.length>0){var n=$.grep($.makeArray(r[0].Provinces.Province),function(e){return e.CanonicalKey.toUpperCase()===t.toUpperCase()});if(n.length>0&&n[0].Cities&&n[0].Cities.City){var i=$.grep($.makeArray(n[0].Cities.City),function(e){return e.CanonicalValue.toUpperCase()===a.toUpperCase()});if(i.length>0&&(a=i[0].CanonicalValue,i[0].Suburbs&&i[0].Suburbs.Suburb)){var c=$.grep($.makeArray(i[0].Suburbs.Suburb),function(e){return e.CanonicalValue.toUpperCase()===o.toUpperCase()});c.length>0&&(o=c[0].CanonicalValue)}}}}return{City:a,Suburb:o}},capitaliseFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.toLowerCase().slice(1)},populatePaymentGroups:function(e){var t=this;t.viewModel.accounts.clear(),t.viewModel.paymentGroups.clear(),e&&($.each(e,function(e,a){t.viewModel.accounts.addObject(a),t.viewModel.paymentGroups.addObject(t.createPaymentGroupDataGridModel(a))}),t.viewModel.paymentGroups.sort(function(e,t){var a=e.paymentGroup?e.paymentGroup.toLowerCase():"",o=t.paymentGroup?t.paymentGroup.toLowerCase():"";return e.isDefault!==t.isDefault?t.isDefault-e.isDefault:a>o?1:a<o?-1:0}))},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,15e3,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},locationChanged:function(){var e=this;if(void 0===e.get("viewModel.location")||"mainLocation"===e.get("viewModel.location"))e.set("showAddress",!1);else{e.set("showAddress",!0),e.get("addressInformation").set("addressTypeText",e.addressTypes[0].value),e.get("addressInformation").set("addressType",e.addressTypes[0].key),e.get("addressInformation").set("country",e.get("loggedInCountryId"));var t=$.grep(e.countries,function(t){return t.CanonicalKey===e.get("loggedInCountryId")});t.length>0&&e.viewModel.set("country",t[0])}}.observes("viewModel.location"),paymentDetailAsMainLocationChanged:function(){var e=this;void 0===e.get("viewModel.paymentDetailAsMainLocation")||"1"===e.get("viewModel.paymentDetailAsMainLocation")?(e.set("showPaymentDetails",!1),this.removeDependentProperty("debitOrderDayValidator"),this.removeDependentProperty("payerNameValidator"),this.removeDependentProperty("branchCodeValidator"),this.removeDependentProperty("accountNoValidator"),this.removeDependentProperty("bankValidator"),this.removeDependentProperty("accountTypeValidator")):(e.set("showPaymentDetails",!0),e.viewModel.set("methodOfPayment","1"))}.observes("viewModel.paymentDetailAsMainLocation"),methodOfPaymentChanged:function(){var e=this;if(void 0!==this.viewModel.methodOfPayment)switch(this.createDependentProperty("debitOrderDayValidator",[Komodo.UI.Validators.RequiredValidator]),this.viewModel.methodOfPayment){case"1":Ember.set(this,"debitOrderDaylabel",kl.value(e._localeCustomerInformation+"paymentDay")),Ember.set(this,"paymentDayPrompt",kl.value(e._localeCustomerInformation+"paymentDayPrompt")),this.set("showDebitOrderDetails",!1),this.removeDependentProperty("payerNameValidator"),this.removeDependentProperty("branchCodeValidator"),this.removeDependentProperty("accountNoValidator"),this.removeDependentProperty("bankValidator"),this.removeDependentProperty("accountTypeValidator");break;case"0":Ember.set(this,"debitOrderDaylabel",kl.value(e._localeCustomerInformation+"debitOrderDay")),Ember.set(this,"paymentDayPrompt",kl.value(e._localeCustomerInformation+"debitOrderDayPrompt")),this.set("showDebitOrderDetails",!0),this.createDependentProperty("payerNameValidator",[Komodo.UI.Validators.RequiredValidator]),this.createDependentProperty("branchCodeValidator",[Komodo.UI.Validators.RequiredValidator]),this.createDependentProperty("accountNoValidator",[Komodo.UI.Validators.RequiredValidator]),this.createDependentProperty("bankValidator",[Komodo.UI.Validators.RequiredValidator]),this.createDependentProperty("accountTypeValidator",[Komodo.UI.Validators.RequiredValidator])}}.observes("viewModel.methodOfPayment"),bankChanged:function(){var e=this;e.set("bankBranches",[]),Ember.set(e.viewModel,"branchCode",void 0),e.get("viewModel.bank")&&$.each(e.get("banks"),function(t,a){a.CanonicalKey===e.get("viewModel.bank").CanonicalKey&&a.Branches&&a.Branches.Branch&&($.isArray(a.Branches.Branch)?$.each(a.Branches.Branch,function(t,a){e.get("bankBranches").addObject(a)}):e.get("bankBranches").addObject(a.Branches.Branch))})}.observes("viewModel.bank"),addressTypeChanged:function(){var e=this;if(e.get("viewModel.addressTypeKey")){var t=$.grep($.makeArray(e.get("addressTypes")),function(t){return t.key===e.get("viewModel.addressTypeKey")});t.length>0&&(e.get("viewModel").set("addressTypeValue",t[0].value),e.get("addressInformation").set("addressTypeText",t[0].value),e.get("addressInformation").set("addressType",t[0].key))}}.observes("viewModel.addressTypeKey"),isEdit:function(){return!0!==this.isCreate}.property("isCreate"),showAddEditChanged:function(){this.get("showAddEdit")?$("#commercialManageViewingEditPanel").show():$("#commercialManageViewingEditPanel").hide()}.observes("showAddEdit"),showAddressChanged:function(){this.get("showAddress")?$("#commercialManageViewingAddressPanel").show():$("#commercialManageViewingAddressPanel").hide()}.observes("showAddress"),validateData:function(){var e="",t=this,a=!1,o=Object.keys(t.get("validators"));$.each(o,function(o,s){var r=t.get("validators."+s);if(r.model===t.get("viewModel")||"mainLocation"!==t.viewModel.location&&r.model===t.get("addressInformation")){var n="validators."+s+".errors";t.get(n).length>0&&$.each(t.get(n),function(t,o){e+=o+"<br />",a=!0})}});var s=t.getAccounts();return s&&(s.PaymentDetail&&s.PaymentDetail.MethodOfPayment||(e+=kl.value(t._localecommercialCustomer+"viewingInformation.messagePaymentDetailsValidation")+"<br />",a=!0),s.BillingAddress&&s.BillingAddress.Country||(e+=kl.value(t._localecommercialCustomer+"viewingInformation.messageBillingAddressValidation")+"<br />",a=!0)),a&&(e=kl.value("controller.invalidDataMessage")+"<br />"+e,Komodo.Controls.MessageBoxController.show(t.viewTitle,e,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning")),a},actions:{addPaymentGroup:function(){var e=this;e.clearFormData(),e.set("showAddEdit",!0),e.set("isCreate",!0),e.set("editPaymentGroup",!1),e.viewModel.set("location","mainLocation"),e.viewModel.set("addressTypeKey",e.addressTypes[0].key),e.viewModel.set("paymentDetailAsMainLocation","1"),e.clearAddressInformation()},editPaymentGroupItem:function(){var e=this;if(e.commandGridItem&&e.viewModel.accounts){var t=$.grep(e.viewModel.accounts,function(t){return t.UID===e.commandGridItem.accountNumber});t.length>0&&(e.set("showAddEdit",!0),e.set("isCreate",!1),e.set("editPaymentGroup",!1),e.viewModel.set("location","anotherLocation"),e.viewModel.set("addressTypeKey",e.addressTypes[0].key),e.viewModel.set("paymentDetailAsMainLocation","0"),e.mapAccountInformation(t[0]),e.mapAddressInformation(t[0]))}},savePaymentGroup:function(){var e=this,t=e.get("addressInformation");if(e.viewModel.set("addressType",t.get("addressTypeKey")),e.viewModel.set("country",t.get("country")),e.viewModel.set("province",t.get("province")),e.viewModel.set("city",t.get("city")),e.viewModel.set("suburb",t.get("suburb")),e.viewModel.set("postalCode",t.get("postalCode")),e.viewModel.set("unit",t.get("unit")),e.viewModel.set("building",t.get("building")),e.viewModel.set("streetNumber",t.get("streetNo")),e.viewModel.set("privateBag",t.get("privateBag")),e.viewModel.set("streetName",t.get("streetName")),void 0!==e.customerNo&&null!==e.customerNo){if(!0===e.validateData())return!1;!0===e.isCreate?e.publishCreateFinancialAccountEvent():e.publishUpdateFinancialAccountEvent()}else Komodo.Controls.MessageBoxController.show(kl.value(e._localecommercialCustomer+"customerprofile.customerNotFoundTitle"),kl.value(e._localecommercialCustomer+"customerprofile.customerNotFound"));return!1},addDevicesAndPackages:function(){Komodo.Services.uiService.transitionTo("commercialAssociateProducts")}},retrieveFinancialDetails:function(e){var t=this;t.viewModel.accounts.clear(),t.viewModel.paymentGroups.clear();var a=Komodo.Services.customerProfileService.getCustomerProfile();a&&a.ResponseMessage&&a.ResponseMessage.Payload&&a.ResponseMessage.Payload.ListOfAccount&&a.ResponseMessage.Payload.ListOfAccount.Account&&t.populatePaymentGroups(a.ResponseMessage.Payload.ListOfAccount.Account)},publishCreateFinancialAccountEvent:function(){var e=this;e.showBusyIndicator(),Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+e.customerNo),Komodo.Services.queryService.postJSON("/AccountProfile/CreatePaymentGroup",{data:e.getPayload()}).done(function(t){e.hideBusyIndicator(),t&&t.Number&&t.Number>0&&(e.clearAndRefreshview(),Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._localeManageViewing+"paymentGroupCreated"),Komodo.Controls.MessageBoxOkButton,this,"id5446673","success"))}).error(function(t){e.hideBusyIndicator();var a=JSON.stringify(t);Komodo.log("createPaymentGroup ajax call failed. Error: "+a),t&&t.responseJSON&&t.responseJSON.Message?Komodo.Controls.MessageBoxController.show(e.viewTitle,t.responseJSON.Message,Komodo.Controls.MessageBoxOkButton,e,"id544246673","danger"):t&&t.responseText&&Komodo.Controls.MessageBoxController.show(e.viewTitle,t.responseText,Komodo.Controls.MessageBoxOkButton,e,"id544246673","danger")})},messageFinancialAccountCreatedReceived:function(e){var t=this,a=e.ResponseMessage.Payload.Account;t.hideBusyIndicator(),void 0!==a.UID&&null!==a.UID&&""!==a.UID&&(t.clearAndRefreshview(),Komodo.Controls.MessageBoxController.show(t.viewTitle,kl.value(t._localeManageViewing+"paymentGroupCreated"),Komodo.Controls.MessageBoxOkButton,this,"id5446673","success"))},publishUpdateFinancialAccountEvent:function(){var e=this;e.showBusyIndicator(),Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+e.customerNo),Komodo.Services.queryService.postJSON("/AccountProfile/UpdatePaymentGroup",{data:e.getPayload()}).done(function(t){e.hideBusyIndicator(),t&&t.Number&&t.Number>0&&(e.clearAndRefreshview(),Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._localeManageViewing+"paymentGroupUpdated"),Komodo.Controls.MessageBoxOkButton,this,"id5446673","success"))}).error(function(t){e.hideBusyIndicator();var a=JSON.stringify(t);Komodo.log("updatePaymentGroup ajax call failed. Error: "+a),t&&t.responseJSON&&t.responseJSON.Message?Komodo.Controls.MessageBoxController.show(e.viewTitle,t.responseJSON.Message,Komodo.Controls.MessageBoxOkButton,e,"id544246673","danger"):t&&t.responseText&&Komodo.Controls.MessageBoxController.show(e.viewTitle,t.responseText,Komodo.Controls.MessageBoxOkButton,e,"id544246673","danger")})},messageFinancialAccountUpdatedReceived:function(e){var t=this,a=e.ResponseMessage.Payload.Account;t.hideBusyIndicator(),void 0!==a.UID&&null!==a.UID&&""!==a.UID&&(t.clearAndRefreshview(),Komodo.Controls.MessageBoxController.show(t.viewTitle,kl.value(t._localeManageViewing+"paymentGroupUpdated"),Komodo.Controls.MessageBoxOkButton,this,"id5446673","success"))},messageFailureMessageEventReceived:function(e){this.hideBusyIndicator(),this.set("isCreateCustomerButtonDisable",!1),Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButton,this,"id544246673","danger")},messageReceived:function(e){this.hideBusyIndicator(),Komodo.UI.log("[CommercialViewingLocationController.messageReceived] : event name = "+e.ResponseMessage.EventName)},messageDeliveryFailure:function(e){this.hideBusyIndicator(),Komodo.UI.warn("[CommercialViewingLocationController.messageDeliveryFailure] : messageId = "+e.messageId)},messageFault:function(e){this.hideBusyIndicator(),Komodo.UI.error("[CommercialViewingLocationController.messageFault] : messageId = "+e.messageId)},commercialClassId:[Komodo.CustomerClass.COMMERCIAL,Komodo.CustomerClass.NATIONAL_DEAL],viewTitle:void 0,customerNo:void 0,hide:!1,showAddress:!1,showPaymentDetails:!1,showDebitOrderDetails:!1,showAddEdit:!1,isCreate:!0,editPaymentGroup:!1,disablePostalCode:!0,enableAddressOverRide:!1,commandGridItem:void 0,selectedGridItem:void 0,deleteGridItem:void 0,addressInformation:void 0,country:void 0,accountTypes:[],paymentMethods:[],addressTypes:[],invoiceDays:[],banks:[],countriesWithCodes:[],countries:[],provinces:[],cities:[],suburbs:[],postalCodes:[],bankBranches:[],locations:[],paymentDetails:[],paymentMethodList:[]}),Komodo.Application.CsiDisconnectController=Komodo.UI.Controller.extend({showDetails:!1,showNoDataLabel:!1,_viewingLocaleBase:"locale.manageviewing:",_csiLocaleBase:"locale.csicustomer:",agreementTypes:[],customerAgreementTypes:[],disconnectReasons:[],chargePeriods:[Komodo.ChargePeriodCollection.MONTHLY,Komodo.ChargePeriodCollection.ANNUALLY],country:void 0,csiClassId:Komodo.CustomerClass.CSI,_addOnCategoryFilterString:"ACCESS:ADDON:ADD ON",arrayOfProductTypes:[],init:function(){this._super(),Komodo.log("Constructing CSI Customer Disconnect controller"),this.set("processVersion","v1.1"),this.set("processName","CSIDisconnect")},start:function(){var e=this;e.createCDMData(),e.registerModel("viewModel",Komodo.Models.CommercialManageViewingModel),e.set("sharedObject",Komodo.Application.ManageViewingSharedObjectController.create()),e.set("viewTitle",kl.value(e._viewingLocaleBase+"csi.disconnectTitle")),e.registerValidator(e.get("viewModel"),"contractEndDate",{isRequired:!0,minDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),functions:Komodo.UI.Validators.DatePickerValidator}),e.registerValidator(e.get("viewModel"),"disconnectReason",{isRequired:!0,type:"string"}),Komodo.UI.cacheDataService.getAddOnProductTypes(e._addOnCategoryFilterString,e.arrayOfProductTypes),e.clearFormData(),Komodo.Services.customerProfileService.validateCustomerClass(e.csiClassId).done(function(t){if(void 0!==t&&null!==t&&void 0!==t.CustomerDetail&&null!==t.CustomerDetail)e.set("customerNo",t.CustomerNumber),e.set("companyName",t.CustomerDetail.CompanyName),e.viewModel.set("customerClass",t.CustomerDetail.Class),e.viewModel.set("customerType",t.CustomerDetail.Type),e.retrieveFinancialDetails(e.customerNo);else{Komodo.Controls.MessageBoxController.show(kl.value(e._csiLocaleBase+"customerprofile.customerNotFoundTitle"),kl.value(e._csiLocaleBase+"customerprofile.customerNotFound"),Komodo.Controls.MessageOKButtons,e,"id5446673","warning").response=function(e){if("ok"===e)return void Komodo.Services.uiService.transitionTo("home")}}}),this._super()},actions:{toggleLineItem:function(e){var t=e._context;if("No"===t.isAddon&&!1===t.isSelected)$.each($.makeArray(this.viewModel.selectedproductData),function(e,a){a.deviceNumber===t.deviceNumber&&a.smartCardNumber===t.smartCardNumber&&"Active"===a.prinPckStatus&&a.set("isSelected",!1)});else if("Yes"===t.isAddon&&!0===t.isSelected){var a=$.grep($.makeArray(this.viewModel.selectedproductData),function(e){return e.deviceNumber===t.deviceNumber&&e.smartCardNumber===t.smartCardNumber&&"No"===e.isAddon&&"Active"===e.prinPckStatus});a.length>0&&t.set("isSelected",a[0].isSelected)}},disconnect:function(){var e=this;!1!==e.canSubmitData(e.viewModel,e.viewTitle,{showInModal:!0})&&e.submitDisconnectServices()}},stop:function(){this._super()},createCDMData:function(){var e=this,t=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),a=Komodo.Services.uiService.getController("application").get("_selectedCountryDescription"),o=Komodo.Services.localizationService.getCurrentLanguage();e.set("country",a),e.set("loggedInCountryId",t),e.getHierachicalCDMData(t,o,"AgreementCustomerType",e.customerAgreementTypes),e.getHierachicalCDMData(t,o,"DisconnectReason",e.disconnectReasons)},getStaticCDMData:function(e,t,a,o){Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){o.clear(),$.each(e,function(e,t){o.addObject(t)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve static CDM data for "+a)})},getHierachicalCDMData:function(e,t,a,o){var s=this;Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){var t=JSON.parse(e);switch(o.clear(),a){case"AgreementCustomerType":$.each($.makeArray(t.CustomerClasses.CustomerClass),function(e,t){o.addObject(t)});break;case"DisconnectReason":$.each($.makeArray(t.DisconnectReasons.DisconnectReason),function(e,t){if(t.AllowedCustomerClass){t.AllowedCustomerClass.split(",").contains(s.csiClassId)&&o.addObject(t)}});break;default:Komodo.log("[ERROR] : Unknown Hierachical dataset: "+a)}}).fail(function(){Komodo.log("[ERROR] : could not retrieve hierarchical CDM data for "+a)})},getAgreementType:function(e){var t=this;if(void 0!==t.customerAgreementTypes&&t.customerAgreementTypes.length>0){var a=$.grep($.makeArray(t.customerAgreementTypes),function(e){return e.CanonicalKey===t.viewModel.customerClass});if(a.length>0){var o=$.grep($.makeArray(a[0].CustomerTypes.CustomerType),function(e){return e.CanonicalKey===t.viewModel.customerType});if(o.length>0){var s=$.grep($.makeArray(o[0].AgreementCustomerTypes.AgreementCustomerType),function(t){return t.CanonicalValue===e});if(s.length>0)return s[0].CanonicalKey}}}return""},toggleDisconnectionReconnection:function(){var e=this.get("viewModel.disconnectReconnectAll");$.each($.makeArray(this.viewModel.selectedproductData),function(t,a){"Active"===a.prinPckStatus&&a.set("isSelected",e)})}.observes("viewModel.disconnectReconnectAll"),establishmentNameChanged:function(){var e=this;e.clearAgreementData(),e.viewModel.viewingLocations.clear(),$.each($.makeArray(e.viewModel.accounts),function(t,a){void 0!==a.ListOfAgreement&&void 0!==a.ListOfAgreement.Agreement&&$.each($.makeArray(a.ListOfAgreement.Agreement),function(t,o){o.Name===e.viewModel.establishmentName&&(e.viewModel.viewingLocations.addObject(o.LocationIndicator),e.viewModel.set("paymentGroup",a))})}),void 0!==e.viewModel.establishmentName&&null!==e.viewModel.establishmentName&&void 0!==e.viewingLocation&&null!==e.viewingLocation&&(e.viewModel.set("viewingLocation",e.viewingLocation),e.set("viewingLocation",void 0))}.observes("viewModel.establishmentName"),viewingLocationChanged:function(){var e=this;e.clearAgreementData(),$.each($.makeArray(e.viewModel.accounts),function(t,a){void 0!==a.ListOfAgreement&&void 0!==a.ListOfAgreement.Agreement&&$.each($.makeArray(a.ListOfAgreement.Agreement),function(t,a){if(a.Name===e.viewModel.establishmentName&&a.LocationIndicator===e.viewModel.viewingLocation){e.viewModel.set("viewingPlatform",a.InstallationType),e.viewModel.set("viewingPoints",a.NumberOfViewingPoints),e.viewModel.set("contractStartDate",new Date(a.StartDate)),e.viewModel.set("contractEndDate",new Date(a.EndDate)),e.viewModel.set("agreementType",e.getAgreementType(a.LocationIndicator));var o=$.grep($.makeArray(e.chargePeriods),function(e){return e.value===a.TermOfPayment});if(o.length>0&&e.viewModel.set("chargePeriod",o[0].title),void 0!==a.ListOfHardware&&void 0!==a.ListOfHardware.Hardware){var s=[];$.each($.makeArray(a.ListOfHardware.Hardware),function(t,o){void 0!==o.ListOfService&&void 0!==o.ListOfService.Service&&$.each($.makeArray(o.ListOfService.Service),function(t,r){if(void 0!==r.ProductDetail&&"Active"===r.Status){var n=Komodo.Models.ManageViewingGridModel.create();n.set("smartCardNumber",o.LinkedSmartcard),n.set("deviceNumber",o.SerialNumber),n.set("applyStyleForPrin",!1),n.set("applyStyleForAddOn",!1),n.set("endDate",r.ChargeUntilDate),n.set("prinPckName",r.ProductDetail.Description),n.set("prinPckStatus",r.Status),n.set("addOnPckName","-"),n.set("applyStyleForPrin",!0),n.set("packageName",r.ProductDetail.Name),n.set("agreementId",a.UID),"Active"===r.Status?n.set("isSelected",!0):n.set("isSelected",!1),n.set("actualSelectedState",n.isSelected),"PRINCIPAL"===r.ProductDetail.Type.toUpperCase()&&n.set("isAddon","No"),$.inArray(r.ProductDetail.Type.toUpperCase(),e.arrayOfProductTypes)>-1&&n.set("isAddon","Yes"),s.addObject(n)}})}),e.viewModel.set("selectedproductData",s.sort(function(e,t){return e.smartCardNumber===t.smartCardNumber&&e.deviceNumber===t.deviceNumber&&e.isAddon<t.isAddon?-1:e.smartCardNumber===t.smartCardNumber&&e.deviceNumber===t.deviceNumber&&e.isAddon>t.isAddon?1:0}))}return void 0===e.viewModel.selectedproductData||void 0===e.viewModel.selectedproductData.length||e.viewModel.selectedproductData.length<1?(e.set("showDetails",!1),e.set("showNoDataLabel",!0)):(e.set("showDetails",!0),e.set("showNoDataLabel",!1)),!1}return!0})}),$.each($.makeArray(e.viewModel.selectedproductData),function(t,a){if(!0===a.isSelected)return void e.viewModel.set("disconnectReconnectAll",!0)})}.observes("viewModel.viewingLocation"),clearFormData:function(){this.viewModel.set("establishments",[]),this.viewModel.set("viewingLocations",[])},clearAgreementData:function(){var e=this;e.viewModel.set("viewingPlatform",void 0),e.viewModel.set("viewingPoints",void 0),e.viewModel.set("contractStartDate",void 0),e.viewModel.set("contractEndDate",void 0),e.viewModel.set("chargePeriod",void 0),
e.viewModel.set("selectedproductData",[]),e.set("showDetails",!1),e.set("showNoDataLabel",!1)},retrieveFinancialDetails:function(e){var t=this;t.viewModel.accounts.clear(),t.viewModel.establishments.clear();var a=Komodo.Services.customerProfileService.getFinancialAccounts();a&&a.ResponseMessage&&a.ResponseMessage.Payload&&a.ResponseMessage.Payload.ListOfAccount&&a.ResponseMessage.Payload.ListOfAccount.Account&&a.ResponseMessage.Payload.ListOfAccount.Account.length>0&&a.ResponseMessage.Payload.ListOfAccount.Account[0].ListOfAgreement&&a.ResponseMessage.Payload.ListOfAccount.Account[0].ListOfAgreement.Agreement?($.each($.makeArray(a.ResponseMessage.Payload.ListOfAccount.Account),function(e,a){t.viewModel.accounts.addObject(a),void 0!==a.ListOfAgreement&&void 0!==a.ListOfAgreement.Agreement&&$.each($.makeArray(a.ListOfAgreement.Agreement),function(e,a){a.Name.toUpperCase().indexOf(" - DCC")<=0&&a.Type!==Komodo.AgreementTypes.DCC&&"ACTIVE"===a.AgreementStatus.toUpperCase()&&t.viewModel.establishments.addObject(a.Name)})}),void 0!==t.establishmentName&&null!==t.establishmentName&&(t.viewModel.set("establishmentName",t.establishmentName),t.set("establishmentName",void 0))):Komodo.Services.queryService.getJSON("/AccountProfile/?id="+e).done(function(e){e&&e.Account&&($.each($.makeArray(e.Account),function(e,a){t.viewModel.accounts.addObject(a),void 0!==a.ListOfAgreement&&void 0!==a.ListOfAgreement.Agreement&&$.each($.makeArray(a.ListOfAgreement.Agreement),function(e,a){a.Name.toUpperCase().indexOf(" - DCC")<=0&&a.Type!==Komodo.AgreementTypes.DCC&&"ACTIVE"===a.AgreementStatus.toUpperCase()&&t.viewModel.establishments.addObject(a.Name)})}),void 0!==t.establishmentName&&null!==t.establishmentName&&(t.viewModel.set("establishmentName",t.establishmentName),t.set("establishmentName",void 0)))}).error(function(e){var t=JSON.stringify(e);Komodo.log("retrieveFinancialAccounts ajax call failed. Error: "+t)})},submitDisconnectServices:function(){var e=this,t=!1;if($.each($.makeArray(e.viewModel.selectedproductData),function(e,a){if(a.isSelected!==a.actualSelectedState)return void(t=!0)}),t){Komodo.Controls.MessageBoxController.show(kl.value(e._csiLocaleBase+"disconnect.confirmMessageTitle"),kl.value(e._csiLocaleBase+"disconnect.confirmMessageText"),Komodo.Controls.MessageBoxYesNoButtons,e,"id5446673","warning").response=function(t){if("yes"===t){var a="";$.each($.makeArray(e.viewModel.selectedproductData),function(t,o){if(o.smartCardNumber!==a){a=o.smartCardNumber;var s=[];if($.each($.makeArray(e.viewModel.selectedproductData),function(e,t){t.smartCardNumber===a&&!1===t.isSelected&&"Active"===t.prinPckStatus&&s.push(t.packageName)}),void 0!==s.length&&s.length>0){var r=new Object;r.DeviceSerialNumber=o.smartCardNumber,r.PackageNames=s,r.DisconnectionReason=e.viewModel.get("disconnectReason.SystemKey");var n=new Date;moment(e.viewModel.contractEndDate).format(KomodoConfiguration.dateFormat)!==moment().format(KomodoConfiguration.dateFormat)&&(n=new Date(moment(e.viewModel.contractEndDate).format("MM/DD/YYYY"))),r.ScheduledDisconnectionDate=n.toLocaleDateString("sv-SE"),e.disconnectPackages(r)}}})}}}else Komodo.Controls.MessageBoxController.show(kl.value(e._viewingLocaleBase+"csi.disconnectTitle"),kl.value(e._csiLocaleBase+"disconnect.messageSelectService"),Komodo.Controls.MessageBoxOkButton,e,"id5446673","warning")},disconnectPackages:function(e){var t=this;Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+this.get("customerNo")),Komodo.Services.queryService.postJSON("/Device/DisconnectPackages",{data:e}).done(function(){Komodo.Controls.MessageBoxController.show(kl.value(t._viewingLocaleBase+"csi.disconnectTitle"),kl.value(t._csiLocaleBase+"disconnect.messageDisconnectSuccess"),Komodo.Controls.MessageBoxOkButton,t,"id5446673","success").response=function(e){if("ok"===e)return void Komodo.Services.uiService.transitionTo("csiCustomerProfile")}}).error(function(e){e&&"string"===$.type(e.responseJSON)?Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),e.responseJSON,Komodo.Controls.MessageBoxOkButtons,t,"id5446673","danger"):e.responseJSON&&e.responseJSON.ExceptionMessage?Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),e.responseJSON.ExceptionMessage,Komodo.Controls.MessageBoxOkButtons,t,"id5446673","danger"):e.statusText?Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),e.statusText,Komodo.Controls.MessageBoxOkButtons,t,"id5446673","danger"):Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),JSON.stringify(e),Komodo.Controls.MessageBoxOkButtons,t,"id5446673","danger")})}}),Komodo.Application.CsiErrorCodesController=Komodo.UI.Controller.extend({_viewingLocaleBase:"locale.manageviewing:",_csiLocaleBase:"locale.csicustomer:",init:function(){this._super(),Komodo.log("Constructing CSI Customer Clear Error Codes controller"),this.set("processVersion","v1.1"),this.set("processName","CSI Customer Clear Error Codes process")},start:function(){var e=this;e.createCDMData(),e.registerModel("viewModel",Komodo.Models.CommercialManageViewingModel),e.set("viewTitle",kl.value(e._viewingLocaleBase+"csi.clearErrorCodeTitle")),e.clearFormData(),Komodo.Services.customerProfileService.validateCustomerClass(e.csiClassId).done(function(t){if(void 0!==t&&null!==t&&void 0!==t.CustomerDetail&&null!==t.CustomerDetail)e.set("customerNo",t.CustomerNumber),e.set("companyName",t.CustomerDetail.CompanyName),e.viewModel.set("customerClass",t.CustomerDetail.Class),e.viewModel.set("customerType",t.CustomerDetail.Type),e.retrieveFinancialDetails(e.customerNo);else{Komodo.Controls.MessageBoxController.show(kl.value(e._csiLocaleBase+"customerprofile.customerNotFoundTitle"),kl.value(e._csiLocaleBase+"customerprofile.customerNotFound"),Komodo.Controls.MessageOKButtons,e,"id5446673","warning").response=function(e){if("ok"===e)return void Komodo.Services.uiService.transitionTo("home")}}}),e._super()},stop:function(){this.hideBusyIndicator(),this._super()},createCDMData:function(){var e=this,t=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),a=Komodo.Services.uiService.getController("application").get("_selectedCountryDescription"),o=Komodo.Services.localizationService.getCurrentLanguage();e.set("country",a),e.set("loggedInCountryId",t),e.getHierachicalCDMData(t,o,"ErrorReasonRelationship",e.errorReasonRelationship)},getHierachicalCDMData:function(e,t,a,o){var s=this,r=$.Deferred();return Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){var t=JSON.parse(e);switch(o.clear(),s.get("errorReasonCodes").clear(),a){case"ErrorReasonRelationship":$.each(t.Errors.Error,function(e,t){o.addObject(t),s.get("errorReasonCodes").addObject(t)});break;default:Komodo.log("[ERROR] : Unknown Hierachical dataset: "+a)}}).fail(function(){Komodo.log("[ERROR] : could not retrieve hierarchical CDM data for "+a)}),r},clearFormData:function(){var e=this;e.viewModel.set("customerClass",void 0),e.viewModel.set("customerType",void 0),e.viewModel.set("paymentGroup",void 0),e.viewModel.set("viewingLocation",void 0),e.viewModel.set("agreementType",void 0),e.viewModel.set("establishmentName",void 0),e.viewModel.set("viewingPlatform",void 0),e.viewModel.set("viewingPoints",void 0),e.viewModel.set("contractStartDate",void 0),e.viewModel.set("contractEndDate",void 0),e.viewModel.set("chargePeriod",void 0),e.viewModel.set("accounts",[]),e.viewModel.set("establishments",[]),e.viewModel.set("viewingLocations",[]),e.viewModel.set("selectedproductData",[]),e.set("isButtonDisable",!0),e.set("showDetails",!1)},getListOfSerialNumber:function(){var e=this,t=[];return void 0!==e.smartCards&&e.smartCards.length>0&&$.each(e.smartCards,function(e,a){if(!0===a.isSelected){var o=Komodo.Models.ListOfSerialNumber.create();o.set("SerialNumber",a.serialNumber),t.push(o)}}),t},getErrorReasonCode:function(){var e=this,t=void 0,a=$.grep($.makeArray(e.errorReasonRelationship),function(t){return e.viewModel.errorReasonCode===t.CanonicalKey});return a.length>0&&(t=a[0].ErrorReasonKey),t},getNewProcessID:function(){this.startNewProcess()},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,3e4,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},establishmentNameChanged:function(){var e=this;e.viewModel.viewingLocations.clear(),e.viewModel.set("viewingLocation",void 0),$.each(e.viewModel.accounts,function(t,a){void 0!==a.ListOfAgreement&&void 0!==a.ListOfAgreement.Agreement&&$.each(a.ListOfAgreement.Agreement,function(t,o){o.Name===e.viewModel.establishmentName&&(e.viewModel.viewingLocations.addObject(o.LocationIndicator),e.viewModel.set("paymentGroup",a))})})}.observes("viewModel.establishmentName"),viewingLocationChanged:function(){var e=this;e.set("smartCards",[]),e.set("smartCardsFirstColumn",[]),e.set("smartCardsSecondColumn",[]),e.set("isButtonDisable",!0),e.set("showDetails",!1),$.each(e.viewModel.accounts,function(t,a){void 0!==a.ListOfAgreement&&void 0!==a.ListOfAgreement.Agreement&&$.each(a.ListOfAgreement.Agreement,function(t,a){return a.Name!==e.viewModel.establishmentName||a.LocationIndicator!==e.viewModel.viewingLocation||(void 0!==a.ListOfHardware&&void 0!==a.ListOfHardware.Hardware&&$.each($.makeArray(a.ListOfHardware.Hardware),function(t,a){if(void 0!==a.SmartcardDetail&&void 0!==a.LinkedSmartcard&&""!==a.LinkedSmartcard){var o=Komodo.Models.SmartcardModel.create();o.set("serialNumber",a.LinkedSmartcard),o.set("name",a.SmartcardDetail.Name),o.set("description",a.SmartcardDetail.Name+" "+a.LinkedSmartcard),o.set("isSelected",!1),e.smartCards.pushObject(o)}}),!1)})}),void 0!==e.smartCards&&e.smartCards.length>0&&($.each(e.smartCards,function(t,a){t%2==0?e.smartCardsFirstColumn.push(a):e.smartCardsSecondColumn.push(a)}),e.set("isButtonDisable",!1),e.set("showDetails",!0),e.viewModel.set("allSmartcardSelected",!1))}.observes("viewModel.viewingLocation"),allSmartcardSelectedChanged:function(){var e=this;void 0!==e.smartCards&&e.smartCards.length>0&&$.each(e.smartCards,function(t,a){a.set("isSelected",e.viewModel.allSmartcardSelected)})}.observes("viewModel.allSmartcardSelected"),actions:{clearErrorCodes:function(){var e=this;return void 0===e.viewModel.errorReasonCode||null===e.viewModel.errorReasonCode?void Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._csiLocaleBase+"errorCodes.messageErrorCodeValidation"),Komodo.Controls.MessageBoxOkButton,e,"id5446883","danger"):$.grep($.makeArray(e.smartCards),function(e){return!0===e.isSelected}).length<=0?void Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._csiLocaleBase+"errorCodes.messageSmartcardsValidation"),Komodo.Controls.MessageBoxOkButton,e,"id5446883","danger"):void e.publishClearMultipleDevicesErrorCodeEvent()}},retrieveFinancialDetails:function(e){var t=this;t.viewModel.accounts.clear(),t.viewModel.establishments.clear();var a=Komodo.Services.customerProfileService.getFinancialAccounts();a&&a.ResponseMessage&&a.ResponseMessage.Payload&&a.ResponseMessage.Payload.ListOfAccount&&a.ResponseMessage.Payload.ListOfAccount.Account&&a.ResponseMessage.Payload.ListOfAccount.Account.length>0&&a.ResponseMessage.Payload.ListOfAccount.Account[0].ListOfAgreement&&a.ResponseMessage.Payload.ListOfAccount.Account[0].ListOfAgreement.Agreement?($.each(a.ResponseMessage.Payload.ListOfAccount.Account,function(e,a){t.viewModel.accounts.addObject(a),void 0!==a.ListOfAgreement&&void 0!==a.ListOfAgreement.Agreement&&$.each(a.ListOfAgreement.Agreement,function(e,a){a.Name.toUpperCase().indexOf(" - DCC")<=0&&a.Type!==Komodo.AgreementTypes.DCC&&"ACTIVE"===a.AgreementStatus.toUpperCase()&&t.viewModel.establishments.addObject(a.Name)})}),void 0!==t.establishmentName&&null!==t.establishmentName&&(t.viewModel.set("establishmentName",t.establishmentName),t.set("establishmentName",void 0))):Komodo.Services.queryService.getJSON("/AccountProfile/?id="+e).done(function(e){e&&e.Account&&($.each(e.Account,function(e,a){t.viewModel.accounts.addObject(a),void 0!==a.ListOfAgreement&&void 0!==a.ListOfAgreement.Agreement&&$.each(a.ListOfAgreement.Agreement,function(e,a){a.Name.toUpperCase().indexOf(" - DCC")<=0&&a.Type!==Komodo.AgreementTypes.DCC&&"ACTIVE"===a.AgreementStatus.toUpperCase()&&t.viewModel.establishments.addObject(a.Name)})}),void 0!==t.establishmentName&&null!==t.establishmentName&&(t.viewModel.set("establishmentName",t.establishmentName),t.set("establishmentName",void 0)))}).error(function(e){var t=JSON.stringify(e);Komodo.log("retrieveFinancialAccounts ajax call failed. Error: "+t)})},publishClearMultipleDevicesErrorCodeEvent:function(){var e=this,t=Komodo.Models.ClearMultipleDevicesErrorCode.create(),a=Komodo.canonicalFacadeFactory(t,["Country","AgreementUID","ListOfSerialNumber","ErrorReasonCode"]);a.set("Country",e.get("loggedInCountryId")),a.set("ListOfSerialNumber",e.getListOfSerialNumber()),a.set("ErrorReasonCode",e.getErrorReasonCode());var o=Komodo.Services.ManageViewingService;e.getNewProcessID(),o.publishEvent(e,t,"ClearMultipleDevicesErrorCode","v1").done(function(){e.showBusyIndicator(),e.set("isButtonDisable",!0),Komodo.log("publishClearMultipleDevicesErrorCodeEvent() : Clear Multiple Devices Error Code event has been published.")}).fail(function(){e.hideBusyIndicator(),e.set("isButtonDisable",!1),Komodo.log("publishClearMultipleDevicesErrorCodeEvent() : Clear Multiple Devices Error Code event has failed.")})},messageMultipleDevicesErrorCodeClearedReceived:function(e){var t=this;if(t.hideBusyIndicator(),void 0!==e.ResponseMessage.Payload&&void 0!==e.ResponseMessage.Payload.ListOfSerialNumber){var a=Komodo.Controls.MessageBoxController.show(t.viewTitle,kl.value(t._csiLocaleBase+"errorCodes.messgClearErrorCodesSuccess"),Komodo.Controls.MessageBoxOkButton,this,"id5446673","success");t.viewModel.set("establishmentName",void 0),a.response=function(e){if("ok"===e)return void Komodo.Services.uiService.transitionTo("csiCustomerProfile")}}else Komodo.Controls.MessageBoxController.show(t.viewTitle,kl.value(t._csiLocaleBase+"errorCodes.messgClearErrorCodesFail"))},messageFailureMessageEventReceived:function(e){var t=this;t.hideBusyIndicator(),t.set("isButtonDisable",!1),Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButton,this,"id544246673","danger")},messageReceived:function(e){this.hideBusyIndicator(),Komodo.UI.log("[CsiErrorCodesController.messageReceived] : event name = "+e.ResponseMessage.EventName)},messageDeliveryFailure:function(e){this.hideBusyIndicator(),Komodo.UI.warn("[CsiErrorCodesController.messageDeliveryFailure] : messageId = "+e.messageId)},messageFault:function(e){this.hideBusyIndicator(),Komodo.UI.error("[CsiErrorCodesController.messageFault] : messageId = "+e.messageId)},csiClassId:Komodo.CustomerClass.CSI,errorReasonCodes:[],errorReasonRelationship:[],smartCards:[],smartCardsFirstColumn:[],smartCardsSecondColumn:[],showDetails:!1,isButtonDisable:!0,country:void 0}),Komodo.Application.ScheduledChangesController=Komodo.UI.Controller.extend({localeBase:"locale.manageviewing:scheduledChanges.",customerId:void 0,canEditScheduledChanges:!1,isClarityRolesEnabled:!1,isDeleteButtonDisable:!1,isViewButtonDisable:!1,init:function(){this._super(),Komodo.log("Constructing Scheduled Changes controller"),this.set("processVersion","v1.1"),this.set("processName","Scheduled Changes")},start:function(){this.loadFeatureToggleItems(),this.initializeScheduledChanges(),this.set("canEditScheduledChanges",!1),this._super()},initializeScheduledChanges:function(){if(this.set("sharedObject",Komodo.Application.ManageViewingSharedObjectController.create()),this.set("helperFunction",Komodo.Services.ProductAndServiceMaintenanceHelper.create()),this.set("scheduledChangesModel",Komodo.Models.ScheduledChangesModel.create()),this.set("isScheduledChangesExist",!1),this.set("isScheduledChangesExistError",!1),!this.helperFunction.isCustomerIdIsAvailableToRetriveData())return void Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"customerNotFound"),kl.value(this.localeBase+"customerNotFoundErrMsg"),Komodo.Controls.MessageOKButtons,this,"id5446673","warning");customerId=this.helperFunction.getCustomerIdToRetrieveData(),this.getScheduledChanges(),this.subscribeScheduledChangesReceived(),this.subscribeScheduledChangesError()},subscribeScheduledChangesReceived:function(){Komodo.Services.eventAggregator.subscribe("ScheduledChangesReceived",function(){var e=Komodo.Services.uiService.getController("scheduledChanges");e&&e.bindScheduledChanges()})},subscribeScheduledChangesError:function(){var e=this;Komodo.Services.eventAggregator.subscribe("ScheduledChangesError",function(){var t=Komodo.Services.ManageViewingService.scheduledChangesError,a=JSON.stringify(t);null!==t.responseJSON||void 0!==t.responseJSON?Komodo.Controls.MessageBoxController.show(kl.value(e.localeBase+"technicalError"),t.responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,e,"id5446673","danger"):Komodo.Controls.MessageBoxController.show(kl.value(e.localeBase+"technicalError"),kl.value(e.localeBase+"technicalErrorMsg"),Komodo.Controls.MessageBoxOkButtons,e,"id5446673","danger"),Komodo.log("Retrieve Scheduled Changes ajax call failed. Error: "+a)})},getScheduledChanges:function(){this.get("sharedObject").retrieveScheduledChanges(customerId)},bindScheduledChanges:function(){var e=[],t=Komodo.Services.ManageViewingService.scheduledChanges;if(null!=t)if(t.ScheduleList.length>0){this.set("isScheduledChangesExist",!0);for(var a=0;a<t.ScheduleList.length;a++){var o=Komodo.Models.ScheduledChangesDetails.create();if(o.set("scheduleId",this.chkEmptyValue(t.ScheduleList[a].ScheduleId)),o.set("event",this.chkEmptyValue(t.ScheduleList[a].EventName)),o.set("details",this.chkEmptyValue(t.ScheduleList[a].Details)),Komodo.UI.propertyHelpers.isNullOrEmpty(t.ScheduleList[a].CreationDate))o.set("creationDate","-");else{var s=t.ScheduleList[a].CreationDate.split("T"),r=new Date(s[0]+" "+s[1]);o.set("creationDate",XDates.getDateFromJavascriptDate(r))}if(Komodo.UI.propertyHelpers.isNullOrEmpty(t.ScheduleList[a].ScheduledDate))o.set("scheduledDate","-");else{var n=t.ScheduleList[a].ScheduledDate.split("T"),i=new Date(n[0]+" "+n[1]);o.set("scheduledDate",XDates.getDateTimeFromJavascriptDate(i))}o.set("reason",this.chkEmptyValue(t.ScheduleList[a].Reason)),o.set("createdBy",this.chkEmptyValue(t.ScheduleList[a].Username)),o.set("eventId",this.chkEmptyValue(t.ScheduleList[a].EventId)),e.push(o)}this.get("scheduledChangesModel").set("scheduledChangesDetails",e),this.isClarityRolesEnabled?(this.set("isViewButtonDisable",!Komodo.Services.securityService.hasPermission("clarity://scheduledChanges/canView")),this.set("isDeleteButtonDisable",!Komodo.Services.securityService.hasPermission("clarity://scheduledChanges/canDelete"))):this.set("isDeleteButtonDisable",Komodo.Services.securityService.hasPermission("clarity://scheduledChanges/viewOnly"))}else this.set("isScheduledChangesExist",!1),this.set("isScheduledChangesExistError",!0)},EditScheduledChanges:function(e){var t=this;t.registerModel("scheduledChangeDetailsModel",Komodo.Models.ScheduledChangesDetails),t.registerValidator(t.get("scheduledChangeDetailsModel"),"effectiveDate",{isRequired:!0,displayName:"Effective Date",type:"date",minDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())}),this.scheduledChangeDetailsModel.set("scheduleId",e.get("content").scheduleId),this.scheduledChangeDetailsModel.set("event",e.get("content").event),this.scheduledChangeDetailsModel.set("scheduledDate",e.get("content").scheduledDate),this.scheduledChangeDetailsModel.set("creationDate",e.get("content").creationDate),this.scheduledChangeDetailsModel.set("reason",e.get("content").reason),this.scheduledChangeDetailsModel.set("details",e.get("content").details);var a=Komodo.Services.uiService.showModalPopup(kl.value(t.localeBase+"editScheduledChangeDetails"),null,{view:Komodo.Application.EditScheduledChangesView,context:{validators:t.validators,data:t.get("scheduledChangeDetailsModel"),saveChanges:function(){if(t.canSubmitData(t.scheduledChangeDetailsModel,kl.value(t.localeBase+"fillRequiredData"),{showInModal:!1})){a.close();Komodo.Controls.MessageBoxController.show(kl.value(t.localeBase+"confirmChanges"),kl.value(t.localeBase+"confirmChangesMsg"),Komodo.Controls.MessageBoxYesNoButtons,this,"id5446673","warning").response=function(a){if("yes"===a){var o=new Object;o.ScheduleId=e.get("content").scheduleId;var s=new Date(t.get("scheduledChangeDetailsModel.effectiveDate"));o.ScheduledDate=XDates.getDateinMonthDateFormat(s),o.CreationDate=e.get("content").creationDate,o.Details=e.get("content").details,o.EventName=e.get("content").event,o.Reason=e.get("content").reason;t.get("sharedObject").updateScheduledChanges(o)}}}}},canUserClose:!0})},DeleteScheduledChanges:function(e){var t=this.get("sharedObject");Komodo.Controls.MessageBoxController.show(kl.value(this.localeBase+"confirmDelete"),kl.value(this.localeBase+"confirmDeleteMsg"),Komodo.Controls.MessageBoxYesNoButtons,this,"id54456673","warning").response=function(a){if("yes"===a){var o=e.get("content").scheduleId;t.deleteScheduledChanges(o)}}},viewScheduledChanges:function(e){var t=this;t.registerModel("scheduledChangeDetailsModel",Komodo.Models.ScheduledChangesDetails),this.scheduledChangeDetailsModel.set("scheduleId",e.get("content").scheduleId),this.scheduledChangeDetailsModel.set("event",e.get("content").eventId+" "+e.get("content").event),this.scheduledChangeDetailsModel.set("scheduledDate",e.get("content").scheduledDate),this.scheduledChangeDetailsModel.set("reason",e.get("content").reason),this.scheduledChangeDetailsModel.set("createdBy",e.get("content").createdBy),this.scheduledChangeDetailsModel.set("details",e.get("content").details),Komodo.Services.uiService.showModalPopup(kl.value(t.localeBase+"viewScheduledChangeDetails"),null,{view:Komodo.Application.ViewScheduledChangesView,context:{data:t.get("scheduledChangeDetailsModel")},canUserClose:!0})},actions:{EditChanges:function(e){this.EditScheduledChanges(e)},DeleteChanges:function(e){this.DeleteScheduledChanges(e)},actionViewChanges:function(e){this.viewScheduledChanges(e)}},loadFeatureToggleItems:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("SAClarityRoles","RolesAndPermissions").done(function(t){e.set("isClarityRolesEnabled",t)}).fail(function(e){Komodo.Services.log("Error while checking feature toggle. Error Details:"+e)})},chkEmptyValue:function(e){return null===e||""===e||void 0===e?"-":e},stop:function(){this.set("isScheduledChangesExist",!0),this.set("isScheduledChangesExistError",!1),this.set("isViewButtonDisable",!1),this._super()}}),Komodo.Application.RecoverStolenDeviceController=Komodo.UI.Controller.extend({_locale:"",init:function(){var e=this;e._super(),Komodo.log("Constructing Recover Stolen Device."),e.set("processVersion","v1.1"),e.set("processName","RecoverStolenDevice"),e.requiresDependency("_stockService",{singleton:Komodo.Services.stockService}),e.requiresDependency("_uiService",{singleton:Komodo.Services.uiService})},start:function(){try{this._super();var e=this;e._locale="locale.manageviewing:recoverStolenDevice.",e.registerModel("rsdDataModel",Komodo.Models.RecoverStolenDeviceModel),e.set("rsdDataModel.CustomerId",Komodo.Services.customerProfileService.personalDetails.customerNo),e.set("rsdDataModel.Country",Komodo.Services.uiService.getController("application").get("_selectedCountryId"))}catch(e){this.getStockService().handleException("start",e,!0,!0)}},stop:function(){this._super()},actions:{recoverStolenDevice:function(){try{var t=this,a={};a.Hardware={},a.CustomerId=t.get("rsdDataModel.CustomerId"),a.Country=t.get("rsdDataModel.Country"),a.Hardware.SerialNumber=t.get("rsdDataModel.DecoderSerialNumber"),a.Hardware.Status=void 0,a.Hardware.StatusReason=void 0,a.Hardware.ManufactureDate=void 0,a.Hardware.MACAddress=void 0,a.Hardware.OriginalSmartcard=void 0,a.Hardware.SmartcardDetail={},a.Hardware.SmartcardDetail.UID=void 0,a.Hardware.SmartcardDetail.Type=void 0,a.Hardware.SmartcardDetail.Name=void 0,a.Hardware.SmartcardDetail.Model=void 0,a.Hardware.SmartcardDetail.Manufacturer=void 0,a.Hardware.SmartcardDetail.Description=void 0,a.Hardware.SmartcardDetail.Price={},a.Hardware.SmartcardDetail.Price.Currencycode=void 0,a.Hardware.SmartcardDetail.Price.Value=void 0,a.Hardware.SmartcardDetail.Price.ValueWithoutTax=void 0,a.Hardware.SmartcardDetail.Price.ListOfTax={},a.Hardware.InsuranceStartDate=void 0,a.Hardware.InsuranceStatus=void 0,a.Hardware.ManufacturerWarrantyStartDate=void 0,a.Hardware.ManufacturerWarrantyEndDate=void 0,a.Hardware.CustomerWarrantyStartDate=void 0,a.Hardware.CustomerWarrantyEndDate=void 0,a.Hardware.WarrantyStatus=void 0,a.Hardware.LinkedSmartcard=t.get("rsdDataModel.SmartcardSerialNumber"),a.Hardware.LinkedSmartcardStatus=void 0,a.Hardware.LinkedSmartcardStatusReason=void 0,t.verifyInput()?void 0==a.Hardware.LinkedSmartcard&&""===a.Hardware.LinkedSmartcard||void 0!=a.Hardware.SerialNumber&&""!==a.Hardware.SerialNumber?t.getStockService().publishRequestOnBus(this,t.get("processId"),a,"RecoverStolenDevice","v1"):(a.Hardware.SerialNumber=a.Hardware.LinkedSmartcard,a.Hardware.LinkedSmartcard=void 0,t.getStockService().publishRequestOnBus(this,t.get("processId"),a,"RecoverStolenDevice","v1")):Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"recoverStolenDevice"),"<strong>"+kl.value(t._locale+"serialNumberFilled")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning")}catch(t){this.getStockService().handleException("recoverStolenDevice",e,!0,!1)}}},getStockService:function(){return this.get("_stockService")},getUIService:function(){return this.get("_uiService")},verifyInput:function(){var e=this,t=!1;return""!==e.get("rsdDataModel.DecoderSerialNumber")&&void 0!==e.get("rsdDataModel.DecoderSerialNumber")?10===e.get("rsdDataModel.DecoderSerialNumber").length&&(t=!0):""!==e.get("rsdDataModel.SmartcardSerialNumber")&&void 0!==e.get("rsdDataModel.SmartcardSerialNumber")&&10===e.get("rsdDataModel.SmartcardSerialNumber").length&&(t=!0),t},trimToUpper:function(){try{var e=this;void 0!=e.rsdDataModel.get("DecoderSerialNumber")&&e.rsdDataModel.set("DecoderSerialNumber",e.rsdDataModel.get("DecoderSerialNumber").toUpperCase().trim()),void 0!=e.rsdDataModel.get("SmartcardSerialNumber")&&e.rsdDataModel.set("SmartcardSerialNumber",e.rsdDataModel.get("SmartcardSerialNumber").toUpperCase().trim())}catch(e){this.getStockService().handleException("trimToUpper",e,!0,!1)}}.observes("rsdDataModel.DecoderSerialNumber","rsdDataModel.SmartcardSerialNumber"),messageStolenDeviceRecoveredReceived:function(){try{var e=this;e.getStockService().hideBusyIndicator(e.get("processId"));Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"recoverStolenDevice"),kl.value(e._locale+"stolenDeviceRecoveredSuccessfully"),Komodo.Controls.MessageBoxOkButtons,null,"recoverStolenDevice","success").response=function(e){"ok"===e&&Komodo.Services.uiService.transitionTo("/manageViewing")}}catch(e){this.getStockService().handleException("messageRecoverStolenDeviceReceived",e,!0,!0)}},messageReceived:function(e){this.getStockService().messageReceived(e)},messageDeliveryFailure:function(e){this.getStockService().messageDeliveryFailure(e)},messageFault:function(e){this.getStockService().messageFault(e)},messageFailureMessageEventReceived:function(e){this.getStockService().messageFailureMessageEventReceived(this.get("processId"),e)},messageHandle:function(e){this.getStockService().messageHandle(this.get("processId"),e)}}),Komodo.Application.CsiReconnectController=Komodo.UI.Controller.extend({showDetails:!1,showNoDataLabel:!1,_viewingLocaleBase:"locale.manageviewing:",_csiLocaleBase:"locale.csicustomer:",agreementTypes:[],customerAgreementTypes:[],reconnectReasons:[],chargePeriods:[Komodo.ChargePeriodCollection.MONTHLY,Komodo.ChargePeriodCollection.ANNUALLY],country:void 0,csiClassId:Komodo.CustomerClass.CSI,_addOnCategoryFilterString:"ACCESS:ADDON:ADD ON",arrayOfProductTypes:[],init:function(){this._super(),Komodo.log("Constructing CSI Customer Reconnect controller"),this.set("processVersion","v1.1"),this.set("processName","CSIReconnect")},start:function(){var e=this;e.createCDMData(),e.registerModel("viewModel",Komodo.Models.CommercialManageViewingModel),e.set("sharedObject",Komodo.Application.ManageViewingSharedObjectController.create()),e.set("viewTitle",kl.value(e._viewingLocaleBase+"csi.reconnectTitle")),e.registerValidator(e.get("viewModel"),"contractEndDate",{isRequired:!0,minDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),functions:Komodo.UI.Validators.DatePickerValidator}),e.registerValidator(e.get("viewModel"),"reconnectReason",{isRequired:!0,type:"string"}),Komodo.UI.cacheDataService.getAddOnProductTypes(e._addOnCategoryFilterString,e.arrayOfProductTypes),e.clearFormData(),Komodo.Services.customerProfileService.validateCustomerClass(e.csiClassId).done(function(t){if(void 0!==t&&null!==t&&void 0!==t.CustomerDetail&&null!==t.CustomerDetail)e.set("customerNo",t.CustomerNumber),e.set("companyName",t.CustomerDetail.CompanyName),e.viewModel.set("customerClass",t.CustomerDetail.Class),e.viewModel.set("customerType",t.CustomerDetail.Type),e.retrieveFinancialDetails(e.customerNo);else{Komodo.Controls.MessageBoxController.show(kl.value(e._csiLocaleBase+"customerprofile.customerNotFoundTitle"),kl.value(e._csiLocaleBase+"customerprofile.customerNotFound"),Komodo.Controls.MessageOKButtons,e,"id5446673","warning").response=function(e){if("ok"===e)return void Komodo.Services.uiService.transitionTo("home")}}}),this._super()},actions:{toggleLineItem:function(e){var t=e._context;if("No"===t.isAddon&&!1===t.isSelected)$.each($.makeArray(this.viewModel.selectedproductData),function(e,a){a.deviceNumber===t.deviceNumber&&a.smartCardNumber===t.smartCardNumber&&a.set("isSelected",!1)});else if("Yes"===t.isAddon&&!0===t.isSelected){var a=$.grep($.makeArray(this.viewModel.selectedproductData),function(e){return e.deviceNumber===t.deviceNumber&&e.smartCardNumber===t.smartCardNumber&&"No"===e.isAddon});a.length>0&&a[0].set("isSelected",t.isSelected)}},reconnect:function(){var e=this;!1!==e.canSubmitData(e.viewModel,e.viewTitle,{showInModal:!0})&&e.submitReconnectServices()}},stop:function(){this._super()},createCDMData:function(){var e=this,t=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),a=Komodo.Services.uiService.getController("application").get("_selectedCountryDescription"),o=Komodo.Services.localizationService.getCurrentLanguage();e.set("country",a),e.set("loggedInCountryId",t),e.getHierachicalCDMData(t,o,"AgreementCustomerType",e.customerAgreementTypes),e.getHierachicalCDMData(t,o,"ReconnectReason",e.reconnectReasons)},getStaticCDMData:function(e,t,a,o){Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){o.clear(),$.each(e,function(e,t){o.addObject(t)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve static CDM data for "+a)})},getHierachicalCDMData:function(e,t,a,o){var s=this;Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){var t=JSON.parse(e);switch(o.clear(),a){case"AgreementCustomerType":$.each($.makeArray(t.CustomerClasses.CustomerClass),function(e,t){o.addObject(t)});break;case"ReconnectReason":$.each($.makeArray(t.ReconnectReasons.ReconnectReason),function(e,t){if(t.AllowedCustomerClass){t.AllowedCustomerClass.split(",").contains(s.csiClassId)&&o.addObject(t)}});break;default:Komodo.log("[ERROR] : Unknown Hierachical dataset: "+a)}}).fail(function(){Komodo.log("[ERROR] : could not retrieve hierarchical CDM data for "+a)})},getAgreementType:function(e){var t=this
;if(void 0!==t.customerAgreementTypes&&t.customerAgreementTypes.length>0){var a=$.grep($.makeArray(t.customerAgreementTypes),function(e){return e.CanonicalKey===t.viewModel.customerClass});if(a.length>0){var o=$.grep($.makeArray(a[0].CustomerTypes.CustomerType),function(e){return e.CanonicalKey===t.viewModel.customerType});if(o.length>0){var s=$.grep($.makeArray(o[0].AgreementCustomerTypes.AgreementCustomerType),function(t){return t.CanonicalValue===e});if(s.length>0)return s[0].CanonicalKey}}}return""},toggleDisconnectionReconnection:function(){var e=this.get("viewModel.disconnectReconnectAll");$.each($.makeArray(this.viewModel.selectedproductData),function(t,a){"Active"!==a.prinPckStatus&&a.set("isSelected",e)})}.observes("viewModel.disconnectReconnectAll"),establishmentNameChanged:function(){var e=this;e.clearAgreementData(),e.viewModel.viewingLocations.clear(),$.each($.makeArray(e.viewModel.accounts),function(t,a){void 0!==a.ListOfAgreement&&void 0!==a.ListOfAgreement.Agreement&&$.each($.makeArray(a.ListOfAgreement.Agreement),function(t,o){o.Name===e.viewModel.establishmentName&&(e.viewModel.viewingLocations.addObject(o.LocationIndicator),e.viewModel.set("paymentGroup",a))})}),void 0!==e.viewModel.establishmentName&&null!==e.viewModel.establishmentName&&void 0!==e.viewingLocation&&null!==e.viewingLocation&&(e.viewModel.set("viewingLocation",e.viewingLocation),e.set("viewingLocation",void 0))}.observes("viewModel.establishmentName"),viewingLocationChanged:function(){var e=this;e.clearAgreementData(),$.each($.makeArray(e.viewModel.accounts),function(t,a){void 0!==a.ListOfAgreement&&void 0!==a.ListOfAgreement.Agreement&&$.each($.makeArray(a.ListOfAgreement.Agreement),function(t,a){if(a.Name===e.viewModel.establishmentName&&a.LocationIndicator===e.viewModel.viewingLocation){e.viewModel.set("viewingPlatform",a.InstallationType),e.viewModel.set("viewingPoints",a.NumberOfViewingPoints),e.viewModel.set("contractStartDate",new Date(a.StartDate)),e.viewModel.set("contractEndDate",new Date(a.EndDate)),e.viewModel.set("agreementType",e.getAgreementType(a.LocationIndicator));var o=$.grep(e.chargePeriods,function(e){return e.value===a.TermOfPayment});if(o.length>0&&e.viewModel.set("chargePeriod",o[0].title),void 0!==a.ListOfHardware&&void 0!==a.ListOfHardware.Hardware){var s=[];$.each($.makeArray(a.ListOfHardware.Hardware),function(t,o){void 0!==o.ListOfService&&void 0!==o.ListOfService.Service&&$.each($.makeArray(o.ListOfService.Service),function(t,r){if(void 0!==r.ProductDetail&&"Active"!==r.Status){var n=Komodo.Models.ManageViewingGridModel.create();n.set("smartCardNumber",o.LinkedSmartcard),n.set("deviceNumber",o.SerialNumber),n.set("applyStyleForPrin",!1),n.set("applyStyleForAddOn",!1),n.set("endDate",r.ChargeUntilDate),n.set("prinPckName",r.ProductDetail.Description),n.set("prinPckStatus",r.Status),n.set("addOnPckName","-"),n.set("applyStyleForPrin",!0),n.set("packageName",r.ProductDetail.Name),n.set("agreementId",a.UID),"Active"===r.Status?n.set("isSelected",!0):n.set("isSelected",!1),n.set("actualSelectedState",n.isSelected),"PRINCIPAL"===r.ProductDetail.Type.toUpperCase()&&n.set("isAddon","No"),$.inArray(r.ProductDetail.Type.toUpperCase(),e.arrayOfProductTypes)>-1&&n.set("isAddon","Yes"),s.addObject(n)}})}),e.viewModel.set("selectedproductData",s.sort(function(e,t){return e.smartCardNumber===t.smartCardNumber&&e.deviceNumber===t.deviceNumber&&e.isAddon<t.isAddon?-1:e.smartCardNumber===t.smartCardNumber&&e.deviceNumber===t.deviceNumber&&e.isAddon>t.isAddon?1:0}))}return void 0===e.viewModel.selectedproductData||void 0===e.viewModel.selectedproductData.length||e.viewModel.selectedproductData.length<1?(e.set("showDetails",!1),e.set("showNoDataLabel",!0)):(e.set("showDetails",!0),e.set("showNoDataLabel",!1)),!1}return!0})}),$.each($.makeArray(e.viewModel.selectedproductData),function(t,a){if(!1===a.isSelected)return void e.viewModel.set("disconnectReconnectAll",!1)})}.observes("viewModel.viewingLocation"),clearFormData:function(){this.viewModel.set("establishments",[]),this.viewModel.set("viewingLocations",[])},clearAgreementData:function(){var e=this;e.viewModel.set("viewingPlatform",void 0),e.viewModel.set("viewingPoints",void 0),e.viewModel.set("contractStartDate",void 0),e.viewModel.set("contractEndDate",void 0),e.viewModel.set("chargePeriod",void 0),e.viewModel.set("selectedproductData",[]),e.set("showDetails",!1),e.set("showNoDataLabel",!1)},retrieveFinancialDetails:function(e){var t=this;t.viewModel.accounts.clear(),t.viewModel.establishments.clear();var a=Komodo.Services.customerProfileService.getFinancialAccounts();a&&a.ResponseMessage&&a.ResponseMessage.Payload&&a.ResponseMessage.Payload.ListOfAccount&&a.ResponseMessage.Payload.ListOfAccount.Account&&a.ResponseMessage.Payload.ListOfAccount.Account.length>0&&a.ResponseMessage.Payload.ListOfAccount.Account[0].ListOfAgreement&&a.ResponseMessage.Payload.ListOfAccount.Account[0].ListOfAgreement.Agreement?($.each($.makeArray(a.ResponseMessage.Payload.ListOfAccount.Account),function(e,a){t.viewModel.accounts.addObject(a),void 0!==a.ListOfAgreement&&void 0!==a.ListOfAgreement.Agreement&&$.each($.makeArray(a.ListOfAgreement.Agreement),function(e,a){a.Name.toUpperCase().indexOf(" - DCC")<=0&&a.Type!==Komodo.AgreementTypes.DCC&&"ACTIVE"===a.AgreementStatus.toUpperCase()&&t.viewModel.establishments.addObject(a.Name)})}),void 0!==t.establishmentName&&null!==t.establishmentName&&(t.viewModel.set("establishmentName",t.establishmentName),t.set("establishmentName",void 0))):Komodo.Services.queryService.getJSON("/AccountProfile/?id="+e).done(function(e){e&&e.Account&&($.each($.makeArray(e.Account),function(e,a){t.viewModel.accounts.addObject(a),void 0!==a.ListOfAgreement&&void 0!==a.ListOfAgreement.Agreement&&$.each($.makeArray(a.ListOfAgreement.Agreement),function(e,a){a.Name.toUpperCase().indexOf(" - DCC")<=0&&a.Type!==Komodo.AgreementTypes.DCC&&"ACTIVE"===a.AgreementStatus.toUpperCase()&&t.viewModel.establishments.addObject(a.Name)})}),void 0!==t.establishmentName&&null!==t.establishmentName&&(t.viewModel.set("establishmentName",t.establishmentName),t.set("establishmentName",void 0)))}).error(function(e){var t=JSON.stringify(e);Komodo.log("retrieveFinancialAccounts ajax call failed. Error: "+t)})},submitReconnectServices:function(){var e=this,t=!1;if($.each($.makeArray(e.viewModel.selectedproductData),function(e,a){if(a.isSelected!==a.actualSelectedState)return void(t=!0)}),t){Komodo.Controls.MessageBoxController.show(kl.value(e._csiLocaleBase+"reconnect.confirmMessageTitle"),kl.value(e._csiLocaleBase+"reconnect.confirmMessageText"),Komodo.Controls.MessageBoxYesNoButtons,e,"id5446673","warning").response=function(t){if("yes"===t){var a="";$.each($.makeArray(e.viewModel.selectedproductData),function(t,o){if(o.smartCardNumber!==a){a=o.smartCardNumber;var s=[];if($.each($.makeArray(e.viewModel.selectedproductData),function(e,t){t.smartCardNumber===a&&!0===t.isSelected&&"Active"!==t.prinPckStatus&&s.push(t.packageName)}),void 0!==s.length&&s.length>0){var r=new Object;r.DeviceSerialNumber=o.smartCardNumber,r.PackageNames=s,r.ReconnectionReason=e.viewModel.get("reconnectReason.SystemKey");var n=new Date;moment(e.viewModel.contractEndDate).format(KomodoConfiguration.dateFormat)!==moment().format(KomodoConfiguration.dateFormat)&&(n=new Date(moment(e.viewModel.contractEndDate).format("MM/DD/YYYY"))),r.ScheduledReconnectionDate=n.toLocaleDateString("sv-SE"),e.reconnectPackages(r)}}})}}}else Komodo.Controls.MessageBoxController.show(kl.value(e._viewingLocaleBase+"csi.reconnectTitle"),kl.value(e._csiLocaleBase+"reconnect.messageSelectService"),Komodo.Controls.MessageBoxOkButton,e,"id5446673","warning")},reconnectPackages:function(e){var t=this;Komodo.Services.queryService.postJSON("/Device/ReconnectPackages",{data:e}).done(function(){Komodo.Controls.MessageBoxController.show(kl.value(t._viewingLocaleBase+"csi.reconnectTitle"),kl.value(t._csiLocaleBase+"reconnect.messageReconnectSuccess"),Komodo.Controls.MessageBoxOkButton,t,"id5446673","success").response=function(e){if("ok"===e)return void Komodo.Services.uiService.transitionTo("csiCustomerProfile")}}).error(function(e){e&&"string"===$.type(e.responseJSON)?Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),e.responseJSON,Komodo.Controls.MessageBoxOkButtons,t,"id5446673","danger"):e.responseJSON&&e.responseJSON.ExceptionMessage?Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),e.responseJSON.ExceptionMessage,Komodo.Controls.MessageBoxOkButtons,t,"id5446673","danger"):e.statusText?Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),e.statusText,Komodo.Controls.MessageBoxOkButtons,t,"id5446673","danger"):Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),JSON.stringify(e),Komodo.Controls.MessageBoxOkButtons,t,"id5446673","danger")})}}),Komodo.Application.DccClaimDetailsView=Komodo.UI.View.extend({viewKey:"DccClaimDetailsView",templateName:"DccClaimDetailsView",didInsertElement:function(){this._super();var e=this.get("controller"),t=Komodo.Services.ProductAndServiceMaintenanceHelper.create().getCustomerIdToRetrieveData(),a=new plupload.Uploader({runtimes:"html5,flash,silverlight,html4",browse_button:"pickfiles",url:KomodoConfiguration.ibsApiUrl+e.get("loggedInCountryName")+"/uploaddownload/UploadCaseDocuments?caseNumber="+e.get("caseUID")+"&documentType=",headers:{"komodo-sessiontoken":Komodo.Services.securityService.get("sessionToken")},filters:{max_file_size:"10mb",mime_types:[{title:"Image files",extensions:"jpg,gif,png,jpeg,JPG,GIF,PNG,JPEG"},{title:"Adobe And Document Files",extensions:"pdf,doc,xls,docx,xlsx"}]},init:{PostInit:function(){$("#filelist > tbody").html(""),$("input:file").parent().width(0).height(0).css("visibility","hidden"),$("#uploadfiles").click(function(){return $(a.files).each(function(e,t){2!==t.status&&4!==t.status||(t.status=1)}),a.uploadCanceled=!1,a.start(),!1})},FilesAdded:function(e,t){var a=(this.dccClaimDetailsController,this.dccClaimDetailsController.get("data"));plupload.each(t,function(t){var o=!1;if($(a.customerDocuments).each(function(e,a){a.get("documentName")===t.name&&(o=!0)}),o)e.removeFile(t);else{var s=Komodo.Models.DCCDocumentModel.create();s.set("isDocumentTypeDisable",!1),s.set("documentName",t.name),s.set("documentSize",plupload.formatSize(t.size)),s.set("uploadPercentage",""),s.set("documentTypes",a.get("documentTypes")),s.set("documentType",void 0),s.set("documentSerialNumber",a.get("documentSerialNumber")),s.set("documentAlreadyUploaded",!1),s.set("uploadStatus","QUEUED"),a.get("customerDocuments").pushObject(s)}})},UploadProgress:function(e,t){!1===e.uploadCanceled&&e.changeFileStatus(this.dccClaimDetailsController.get("data"),t)},FileUploaded:function(e,t,a){var o=JSON.parse(a.response)[0];e.changeFileStatus(this.dccClaimDetailsController.get("data"),t,o)},Error:function(e,t){Komodo.Controls.MessageBoxController.show(kl.value(this.dccClaimDetailsController._localeBase+"dccClaims.uploadTitle"),kl.value(this.dccClaimDetailsController._localeBase+"dccClaims.fileUploadError")+" "+t.code+" : "+t.message+(void 0===t.response||null===t.response?"":t.response),Komodo.Controls.MessageBoxOkButtons,this,"modelCustomerDocuments","danger"),e.uploadCanceled=!0,e.changeFileStatus(this.dccClaimDetailsController.get("data"),t.file)},BeforeUpload:function(t,a){if(!1===t.uploadCanceled){var o=this.dccClaimDetailsController;t.settings.url=KomodoConfiguration.ibsApiUrl+o.get("loggedInCountryName")+"/UploadDownload/UploadCaseDocuments?caseNumber="+e.get("caseUID")+"&documentType=",Komodo.log("[Process DCC Claim]:beforeUpload called for the document."+a.name);var s=this.dccClaimDetailsController.get("data");$(s.customerDocuments).each(function(e,s){if(s.get("documentName")===a.name){var r=s.get("documentType");if(void 0!==r&&null!==r&&""!==r||(Komodo.Controls.MessageBoxController.show(kl.value(o._localeBase+"dccClaims.uploadTitle"),"Please specify the document type",Komodo.Controls.MessageBoxOkButtons,this,"modelCustomerDocuments","danger"),t.stop(),t.uploadCanceled=!0),0==t.uploadCanceled&&"dcc claim form"==r.toLowerCase()){var n=s.get("documentSerialNumber");void 0!=n&&null!=n&&""!=n&&"N/A"!=n||(Komodo.Controls.MessageBoxController.show(kl.value(o._localeBase+"dccClaims.uploadTitle"),"Please specify the document serial number",Komodo.Controls.MessageBoxOkButtons,this,"modelCustomerDocuments","danger"),t.stop(),t.uploadCanceled=!0)}if(0==t.uploadCanceled&&"dcc affidavit"==r.toLowerCase()){var n=s.get("documentSerialNumber");void 0!=n&&null!=n&&""!=n&&"N/A"!=n||(Komodo.Controls.MessageBoxController.show(kl.value(o._localeBase+"dccClaims.uploadTitle"),"Please specify the document serial number",Komodo.Controls.MessageBoxOkButtons,this,"modelCustomerDocuments","danger"),t.stop(),t.uploadCanceled=!0)}}}),!1===t.uploadCanceled&&$(s.customerDocuments).each(function(e,o){if(o.get("documentName")===a.name){var s="";"dcc claim form"==o.get("documentType").toLowerCase()&&(s="&serialNumber="+o.get("documentSerialNumber")),"dcc affidavit"==o.get("documentType").toLowerCase()&&(s="&serialNumber="+o.get("documentSerialNumber")),t.settings.url=t.settings.url+o.get("documentType")+s}})}else t.stop()},UploadComplete:function(a,o){a.uploadCanceled=!1;var s=e.get("caseUID"),r=Komodo.Models.SaveDocument.create(),n=Komodo.canonicalFacadeFactory(r,["ListOfDocument"]),i=[],c="",l=!1;$(this.dccClaimDetailsController.get("data.customerDocuments")).each(function(e,a){if(0==a.get("documentAlreadyUploaded"))if("FAILED"!==a.get("uploadStatus")){var o=Komodo.Models.Document.create();o.set("FileType",a.get("documentType")),o.set("DocumentURL",a.get("documentUrl"));var r=[],n=Komodo.Models.DocumentMetaData.create();n.set("DocumentMetaDataValueUri","CustomerId"),n.set("Value",t),r.pushObject(n);var d=Komodo.Models.DocumentMetaData.create();d.set("DocumentMetaDataValueUri","CaseId"),d.set("Value",s),r.pushObject(d);var u=Komodo.Models.DocumentMetaData.create();u.set("DocumentMetaDataValueUri","DocumentType"),u.set("Value",a.get("documentType")),r.pushObject(u);var h=Komodo.Models.DocumentMetaData.create();h.set("DocumentMetaDataValueUri","DocumentSerial"),h.set("Value",s),r.pushObject(h),o.set("ListOfDocumentMetaData",r),i.pushObject(o),c+="</br>"+a.get("documentName")+" - "+a.get("uploadStatus"),Komodo.log("[Process DCC Claim]:Document -"+a.documentName+"is sucessfully uploaded to server")}else l=!0,c+="</br>"+a.get("documentName")+" - "+a.get("uploadStatus")}),i.length>0&&(r.set("Country",this.dccClaimDetailsController.get("country")),n.set("ListOfDocument",i),Komodo.Services.CustomerService.publishCustomerEvent(this.dccClaimDetailsController,r,"SaveCustomerDocumentEvent","v2",!1),Komodo.log("[Process DCC Claim]:UploadComplete called for all documents")),this.dccClaimDetailsController.documentUploadedSucessResponse("",l)}}});a.dccClaimDetailsController=this.get("controller"),this.get("controller.data").set("fileUploader",a),a.uploadCanceled=!1,a.changeFileStatus=this.fileUploadStatus,a.init()},messageFailureMessageEventReceived:function(e){var t=this.get("controller"),a="",o="";void 0!==e.ResponseMessage.Payload&&void 0!==e.ResponseMessage.Payload.ListOfErrorDetails&&$(e.ResponseMessage.Payload.ListOfErrorDetails).each(function(e,t){a+=t.ErrorDescription,o=t.ErrorCode}),""!==a&&"null"!==a&&void 0!==a||(a=kl.value(t._localeBase+"dccClaims.technicalError")),Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"dccClaims.title"),a,Komodo.Controls.MessageBoxOkButtons,t,"modelPayment","danger")},fileUploadStatus:function(e,t,a){$(e.customerDocuments).each(function(e,o){o.get("documentName")===t.name&&(o.set("uploadPercentage",t.percent+" %"),2===t.status?o.set("uploadStatus","UPLOADING"):4===t.status?(o.set("uploadStatus","FAILED"),o.set("uploadPercentage","0 %")):5===t.status&&(o.set("uploadStatus","DONE"),o.set("documentUrl",a)))})}}),Komodo.Application.ReconnectController=Komodo.UI.Controller.extend({localeReconnect:"locale.manageviewing:reconnect.",localeDisconnect:"locale.manageviewing:disconnect.",payNowPermission:"clarity://Reconnect-payNow/Allowed",navigationFrom:void 0,init:function(){Komodo.log("Constructing Reconnect controller"),this.set("processVersion","v1.1"),this.set("processName","Reconnect"),this.set("smartcardsList",[]),this.set("hardwareAndServicesArray",[]),this.set("loggedInCountryId",""),this.set("prinCUD",void 0),this.set("isDCCReconnectionAllowed",!1),this.requiresDependency("_queryService",{singleton:Komodo.Services.queryService}),this.subscribePackagesDisconnectedReceived(),this.subscribeMultipleSmartcardsDisconnectedReceived(),this.subscribePackagesDisconnectedError(),this._super()},start:function(){this.registerModel("currentReconnectModel",Komodo.Models.ReconnectModel.create()),this.currentReconnectModel.set("day",GetClarityConstants("ManageViewingConstants","manageViewingConstants.reconnect.defaultDayForPreActivatedQuote")),this.set("defaultDay",parseInt(this.currentReconnectModel.get("day"))),this.set("loggedInCountryId",this.getQueryService().getSelectedCountryId()),this.currentReconnectModel.set("annualSmartcards",[]),this.currentReconnectModel.set("suspendedOrDiscHolidayhomes",[]),this.currentReconnectModel.set("disableAcceptReconnect",!0),this.checkPayNowPerm(),this.checkDCCCancellationPermisson(),this.set("isQuoteRetrieved",!1),this.set("checkPreactivateQuoteEnabled",!1),this.setCheckPreActivateQuote(!0),this.set("checkPreActivateQuoteDays",!0),this.setReconnectAllDisbled(!1),this.currentReconnectModel.set("allHardwares",[]),this.currentReconnectModel.set("insuranceProductIds",[]),this.set("cancelPackagesController",Komodo.Application.CancelPackagesController.create()),this.cancelPackagesController.start(),this.set("helperFunction",Komodo.Services.ProductAndServiceMaintenanceHelper.create()),this.set("userIsAllowed",!1);var e=Komodo.Services.ProductAndServiceMaintenanceHelper.create();if(!e.isCustomerIdIsAvailableToRetriveData())return void Komodo.Controls.MessageBoxController.show(kl.value(this.localeReconnect+"noCustomer"),kl.value(this.localeReconnect+"noFound"));var t=e.getCustomerIdToRetrieveData();this.set("customerId",t),this.isUnfairDisconnectVisible();var a=Komodo.Services.customerProfileService.getCustomerPersonalDetail();if("RESIDENTIAL"===a.customerClass.toUpperCase()||"2"===a.customerClass||"SPECIALIST"===a.customerClass.toUpperCase()||"3"===a.customerClass?(this.currentReconnectModel.set("noResidentialCustomerErrormsg",!1),this.bindPackagesInformation()):this.currentReconnectModel.set("noResidentialCustomerErrormsg",!0),"FromHolidayHome"===this.navigationFrom){this.currentReconnectModel.isHolidayHome=!0,this.currentReconnectModel.set("disablePreActivate",!0),this.checkHHReconnectPermission();var o=Komodo.Services.uiService.getController("holidayHomes"),s=o.holidayHomesModel.get("holidayHomesGeneralSmartcards"),r={Key:s,Value:s,Text:"Smartcard Number"};this.currentReconnectModel.set("smartCards",r),this.bindHolidayHomePackage()}else this.currentReconnectModel.isHolidayHome=!1,this.setIsScheduleDisconnectVisible();0===this.get("dayList").length&&this.populateNoOfDays(),this.set("ReasonForDisconnection",GetClarityConstants("ManageViewingConstants","productConstants.disconnectReason.customer_Request_Disconnect").toString()),this.set("reasonForCustomerRequestReconnect",GetClarityConstants("ManageViewingConstants","productConstants.reconnectReason.customer_Requested_Disconnect").toString()),this.set("reasonForNormalReconnection",GetClarityConstants("ManageViewingConstants","productConstants.reconnectReason.reconnect_a_Disconnected_Product").toString()),this.set("reasonForScheduledReconnection",GetClarityConstants("ManageViewingConstants","productConstants.reconnectReason.scheduled_Reconnect").toString()),this.set("reasonForSuspendToReconnection",GetClarityConstants("ManageViewingConstants","productConstants.reconnectReason.manually_End_Products_Suspension").toString()),this.set("reasonForReconnectWithoutPayment",GetClarityConstants("ManageViewingConstants","productConstants.reconnectReason.reconnect_Without_Payment").toString()),this.set("reasonForDPPReconnection",GetClarityConstants("ManageViewingConstants","productConstants.reconnectReason.reconnect_a_Disconnected_DPP_Product").toString()),this._super()},checkPayNowPerm:function(){var e=this,t=void 0;Komodo.Services.featureToggleService.isEnabled("ManageViewing","CheckPayNowPermission").done(function(a){if(!Ember.isEmpty(a)&&!0===a)return t=!0,void e.setPayNowVisibility(t);t=!1,e.setPayNowVisibility(t)}).fail(function(){this.set("PayNowAllowed",!1),e.setPayNowVisibility(t)})},checkHHReconnectPermission:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("ManageViewing","isHHPrepaidSA").done(function(t){if(t&&e.currentReconnectModel.get("isReconnectPackageVisible")){e.set("isShowReconnectPanelForHH",!0);var a=GetClarityConstants("ManageViewingConstants","manageViewingConstants.reconnect.defaultHHDaysForPreActivatedQuote");e.set("defaultDay",parseInt(a))}}).fail(function(){e.set("isShowReconnectPanelForHH",!1)})},checkDCCCancellationPermisson:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("ManageViewing","allowReconnectionOfDCC").done(function(t){if(!Ember.isEmpty(t)&&!0===t)return void e.set("isDCCReconnectionAllowed",!0);e.set("isDCCReconnectionAllowed",!1)}).fail(function(){e.set("isDCCReconnectionAllowed",!1)})},setPayNowVisibility:function(e){var t=this;e||Komodo.Services.securityService.hasPermission(t.payNowPermission)?t.set("payNowVisible",!0):t.set("payNowVisible",!1)},setIsScheduleDisconnectVisible:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("ManageViewing","IsScheduleDisconnectVisible").done(function(t){if(!Ember.isEmpty(t)&&!0===t)return void(e.currentReconnectModel.disconnectServicesCheck=!0);e.currentReconnectModel.disconnectServicesCheck=!1}).fail(function(){e.currentReconnectModel.disconnectServicesCheck=!1})},isUnfairDisconnectVisible:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("ManageViewing","IsUnfairDisconnectVisible").done(function(t){if(!Ember.isEmpty(t)&&!0===t)return void e.currentReconnectModel.set("unfairDisconnectflag",!0);e.currentReconnectModel.set("unfairDisconnectflag",!1)}).fail(function(){e.currentReconnectModel.set("unfairDisconnectflag",!1)})},populateNoOfDays:function(){var e,t=this,a=GetClarityConstants("ManageViewingConstants","manageViewingConstants.reconnect.minDaysForPreActivatedQuote");e=t.currentReconnectModel.isHolidayHome&&t.isShowReconnectPanelForHH?GetClarityConstants("ManageViewingConstants","manageViewingConstants.reconnect.maxHHDaysForPreActivatedQuote"):GetClarityConstants("ManageViewingConstants","manageViewingConstants.reconnect.maxDaysForPreActivatedQuote");for(var o=parseInt(a.toString());o<=parseInt(e.toString());o++)this.dayList.push(o)},createArrayForSingleElement:function(e){var t=null;return void 0!==e&&(void 0===e.length?(t=[],t[0]=e):t=e),t},getformatedDateforService:function(e){if(!Ember.isEmpty(e)){var t=this.getDateObjectFromString(this.get("prinCUD"));"FromHolidayHome"===this.navigationFrom&&(t=e);var a=t.getDate(),o=new Date(e.getFullYear(),e.getMonth()+1,0).getDate();o<a&&(a=o);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+a}},getQueryService:function(){return this.get("_queryService")},stop:function(){var e=this;e.set("smartcardsList",[]),e.set("newData",[]),e.currentReconnectModel.set("allHardwares",[]),e.set("getMyQuote",!1),e.set("suspendedFlagFor",!1),e.set("navigationFrom",void 0),e.set("ReasonForDisconnection",""),e.set("AllowedrolesforGracedayswithlimit",""),e.set("ReasonForReconnection",""),e.currentReconnectModel.set("unfairDisconnectflag",void 0),e.set("isDCCReconnectionAllowed",void 0),e.set("DPPReconnectionAllowed",!1),e.set("isShowReconnectPanelForHH",!1),e.set("dayList",[]),e._super()},checkAllDisconnectedServicesUnderSmartcard:function(){var e=this;e.currentReconnectModel.set("isReconnectPackageVisible",!1),e.currentReconnectModel.set("isMultipleReconnect",!1),e.currentReconnectModel.set("isQuoteSummaryVisible",!1),Komodo.Controls.MessageBoxController.show(kl.value(e.localeReconnect+"valSmartcard"),kl.value(e.localeReconnect+"noServiceAvail"),null,e,"id123456","warning"),e.currentReconnectModel.set("sctemp",void 0),e.set("isShowReconnectPanelForHH",!1)},bindPackagesInformation:function(){var e=this;e.set("hardwareAndServicesArray",e.getHardwareAndAllDisconnectedServicesOfCustomer()),e.currentReconnectModel.get("hardwareAndServices").length>0&&e.currentReconnectModel.get("hardwareAndServices").clear(),e.currentReconnectModel.get("hardwareAndServices").addObjects(e.hardwareAndServicesArray),null!==e.currentReconnectModel.smartCards&&void 0!==e.currentReconnectModel.smartCards?"ALL"!==e.currentReconnectModel.get("smartCards.Key").toUpperCase()?e.getRefreshData():e.getRefreshDataForMultipleSmartcard():(e.currentReconnectModel.set("isReconnectPackageVisible",!1),e.currentReconnectModel.set("isMultipleReconnect",!1)),"FromHolidayHome"===this.navigationFrom&&e.checkHHReconnectPermission()},bindHolidayHomePackage:function(){var e=this,t=this.currentReconnectModel.allHardwares,a=[];Ember.isEmpty(t)||(t.forEach(function(e){if(e.checkPrincAvailable){var t=Komodo.Models.PreActivatePackage.create();t.set("deviceSerialNumber",e.SerialNumber+e.linkedSmartCard),t.set("packageName",e.principalServiceName),a.pushObject(t)}if(Ember.isEmpty(e.listOfAddOnServices)||e.listOfAddOnServices.forEach(function(t){var o=Komodo.Models.PreActivatePackage.create();o.set("deviceSerialNumber",e.SerialNumber+e.linkedSmartCard),o.set("packageName",t.serviceName),a.pushObject(o)}),Ember.isEmpty(e.listOfAccessService)||e.listOfAccessService.forEach(function(t){var o=Komodo.Models.PreActivatePackage.create();o.set("deviceSerialNumber",e.SerialNumber+e.linkedSmartCard),o.set("packageName",t.serviceName),a.pushObject(o)}),e.insuranceServiceStatus){var o=Komodo.Models.PreActivatePackage.create();o.set("deviceSerialNumber",e.SerialNumber+e.linkedSmartCard),o.set("packageName",e.insuranceServiceName),a.pushObject(o)}}),e.set("reconnectHHPackages",a))},getFinancialData:function(){var e=this,t=[],a=null;e.getNewProcessID(),e.showBlockingBusyIndicator();var o=Komodo.Services.ProductAndServiceMaintenanceHelper.create();if(o.isCustomerIdIsAvailableToRetriveData()){var s=o.getCustomerIdToRetrieveData(),r=e.resultAccountMessage;r.ResponseMessage.Payload.ListOfAccount.Account.clear(),Komodo.Services.queryService.getJSON("/AccountProfile/?id="+s).done(function(o){r.ResponseMessage.Payload.ListOfAccount.Account.clear(),o&&o.Account.length&&0!==o.Account.length&&(o.Account.length>1?e.resultAccountMessage.ResponseMessage.Payload.ListOfAccount.Account.addObjects(o.Account):e.resultAccountMessage.ResponseMessage.Payload.ListOfAccount.Account.addObject(o.Account[0]));var s=e.helperFunction.createArrayForSingleElement(e.resultAccountMessage.ResponseMessage.Payload.ListOfAccount.Account);if("FromHolidayHome"!==e.navigationFrom)var n=$.grep(s,function(e){return"13"!==e.Type});s=n,e.set("newData",[]),e.set("newData",s);for(var i=0;i<s.length;i++)if("9"!==s[i].Type)for(var c=e.createArrayForSingleElement(s[i].ListOfAgreement.Agreement),l=0;l<c.length;l++)if(void 0!==c[l].ListOfHardware&&void 0!==c[l].ListOfHardware.Hardware)for(var d=e.createArrayForSingleElement(c[l].ListOfHardware.Hardware),u=0;u<d.length;u++){var h=[];if(d[u].ListOfService&&d[u].ListOfService.Service){a=Komodo.Models.CustomerHardwareAndServicesModel.create();var m=Ember.isEmpty(d[u].LinkedSmartcard)?d[u].SerialNumber:d[u].LinkedSmartcard;if(a=e.helperFunction.setDecoderDetail(a,d[u].ProductDetail.Name,m),e.get("isDCCReconnectionAllowed")&&!Ember.isEmpty(d[u].InsuranceDetail)){var g=GetClarityConstants("ManageViewingConstants","manageViewingConstants.reconnect.allowedStatusForDCC");!Ember.isEmpty(g)&&g.contains(d[u].InsuranceDetail.Status.toLowerCase())&&(a.insuranceServiceName=d[u].InsuranceDetail.Name,a.insuranceOnDeviceNumber=d[u].SerialNumber,a.insuranceCudDate=d[u].InsuranceDetail.ChargeUntilDate,a.insuranceServiceDiscon=d[u].InsuranceDetail.Status,a.insuranceServiceStatus=d[u].InsuranceStatus)}a.set("DPPPRMPrincipalArray",d[u].ListOfService.Service.filter(function(e){return h.contains(e.ProductDetail.Name.toLowerCase())&&e.ProductDetail.Type.toLowerCase()==="Principal".toLowerCase()})),a=e.helperFunction.setDisconnectServicesDetail(a,d[u].ListOfService.Service);var p=!1;(!Ember.isEmpty(a.principalServiceName)||a.listOfAccessService.length>0||a.listOfAddOnServices.length>0||!Ember.isEmpty(a.insuranceServiceName))&&(p=!0),p&&t.push(a)}if(!Ember.isEmpty(d[u].SecondaryHardware)&&!Ember.isEmpty(d[u].SecondaryHardware.Hardware))for(var v=e.createArrayForSingleElement(d[u].SecondaryHardware.Hardware),f=0;f<v.length;f++)if(!Ember.isEmpty(v[f].InsuranceDetail)){var b=Komodo.Models.CustomerHardwareAndServicesModel.create(),C=Ember.isEmpty(v[f].LinkedSmartcard)?v[f].SerialNumber:v[f].LinkedSmartcard,b=e.helperFunction.setDecoderDetail(b,v[f].ProductDetail.Name,C);if(b.set("DPPPRMPrincipalArray",v[f].ListOfService.Service.filter(function(e){return h.contains(e.ProductDetail.Name.toLowerCase())&&e.ProductDetail.Type.toLowerCase()==="Principal".toLowerCase()})),!0===e.get("isDCCReconnectionAllowed")&&!Ember.isEmpty(v[f].InsuranceDetail.Name&&!Ember.isEmpty(v[f].InsuranceDetail.Status))){var S=GetClarityConstants("ManageViewingConstants","manageViewingConstants.reconnect.allowedStatusForDCC");!Ember.isEmpty(S)&&S.contains(v[f].InsuranceDetail.Status.toLowerCase())&&(b.insuranceServiceName=v[f].InsuranceDetail.Name,b.insuranceOnDeviceNumber=v[f].SerialNumber,b.insuranceCudDate=v[f].InsuranceDetail.ChargeUntilDate,b.insuranceServiceDiscon=v[f].InsuranceDetail.Status,b.insuranceServiceStatus=!0,e.currentReconnectModel.insuranceProductIds.contains(v[f].InsuranceDetail.UID)||e.currentReconnectModel.insuranceProductIds.push(d[u].SecondaryHardware.InsuranceDetail.UID))}var D=!1;Ember.isEmpty(b.insuranceServiceName)||(D=!0),D&&t.push(b)}}e.hideBusyIndicator(),e.set("getMyQuote",!1),e.currentReconnectModel.get("hardwareAndServices").length>0&&e.currentReconnectModel.set("hardwareAndServices",[]),e.currentReconnectModel.get("hardwareAndServices").addObjects(t),Ember.isEmpty(e.currentReconnectModel.smartCards)?(e.currentReconnectModel.set("isReconnectPackageVisible",!1),e.currentReconnectModel.set("isReconnectMultiplePackageVisible",!1)):"All"!==e.currentReconnectModel.smartCards.Key?e.getRefreshData():e.getRefreshDataForMultipleSmartcard()}).error(function(t){var a=JSON.stringify(t);e.hideBusyIndicator(),Komodo.log("retrieveFinancialAccounts ajax call failed. Error: "+a)})}},getHardwareAndAllDisconnectedServicesOfCustomer:function(){var e=this,t=[],a=[];e.currentReconnectModel.set("annualSmartcards",[]),e.currentReconnectModel.set("suspendedOrDiscHolidayhomes",[]),e.smartcardsList.push({Key:"All",Value:"All",Text:"Device Number"}),e.newData.length>0?a=e.newData:Komodo.Services.customerProfileService.currentFinancialAccounts&&Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage&&Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload&&Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount&&Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account&&(a=e.helperFunction.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account));for(var o=0;o<a.length;o++)if("9"!==a[o].Type)for(var s=e.createArrayForSingleElement(a[o].ListOfAgreement.Agreement),r=0;r<s.length;r++)if(this.set("aggrId",s[r].UID),void 0!==s[r].ListOfHardware&&void 0!==s[r].ListOfHardware.Hardware){for(var n=e.createArrayForSingleElement(s[r].ListOfHardware.Hardware),i=0;i<n.length;i++){var c=[];if(Ember.isEmpty(n[i].LinkedSmartcard)){if(!Ember.isEmpty(n[i].SerialNumber)){var l={
Key:n[i].SerialNumber,Value:n[i].SerialNumber,Text:"Device Number"};e.smartcardsList.push(l)}}else{var d={Key:n[i].LinkedSmartcard,Value:n[i].LinkedSmartcard,Text:"Smartcard Number"};if("FromHolidayHome"===this.navigationFrom&&"13"===a[o].Type){if(e.smartcardsList.length>0){var u=e.smartcardsList.filter(function(e){return e.Key===d.Key});if(0===u.length&&!Ember.isEmpty(n[i].ListOfService.Service))for(var h=0;h<n[i].ListOfService.Service[0].ProductDetail.ProductFeatures.length;h++)if("AgreementId"===n[i].ListOfService.Service[0].ProductDetail.ProductFeatures[h].Description){var m=n[0].ListOfService.Service[0].ProductDetail.ProductFeatures[h].Value;if(Ember.isEmpty(n[i].ListOfService.Service)||m!==s[r].UID||e.smartcardsList.push(d),!Ember.isEmpty(n[i].ListOfService.Service))for(var g=0;g<n[i].ListOfService.Service.length;g++)("Principal"===n[i].ListOfService.Service[g].ProductDetail.Type&&"Suspended"===n[i].ListOfService.Service[g].Status||"Principal"===n[i].ListOfService.Service[g].ProductDetail.Type&&"Disconnected"===n[i].ListOfService.Service[g].Status)&&e.currentReconnectModel.suspendedOrDiscHolidayhomes.push(n[i].LinkedSmartcard)}}else if(!Ember.isEmpty(n[i].ListOfService.Service))for(var p=0;p<n[i].ListOfService.Service[0].ProductDetail.ProductFeatures.length;p++)if("AgreementId"===n[i].ListOfService.Service[0].ProductDetail.ProductFeatures[p].Description){var v=n[0].ListOfService.Service[0].ProductDetail.ProductFeatures[p].Value;if(Ember.isEmpty(n[i].ListOfService.Service)||v!==s[r].UID||e.smartcardsList.push(d),!Ember.isEmpty(n[i].ListOfService.Service))for(var f=0;f<n[i].ListOfService.Service.length;f++)("Principal"===n[i].ListOfService.Service[f].ProductDetail.Type&&"Suspended"===n[i].ListOfService.Service[f].Status||"Principal"===n[i].ListOfService.Service[f].ProductDetail.Type&&"Disconnected"===n[i].ListOfService.Service[f].Status)&&e.currentReconnectModel.suspendedOrDiscHolidayhomes.push(n[i].LinkedSmartcard)}"12"===s[r].TermOfPayment&&e.currentReconnectModel.annualSmartcards.push(n[i].LinkedSmartcard)}else if("13"!==a[o].Type&&"FromHolidayHome"!==this.navigationFrom)if(e.smartcardsList.length>0){var b=e.smartcardsList.filter(function(e){return e.Key===d.Key});0===b.length&&e.smartcardsList.push(d)}else e.smartcardsList.push(d)}if(n[i].ListOfService&&n[i].ListOfService.Service){var C=Komodo.Models.CustomerHardwareAndServicesModel.create(),S=Ember.isEmpty(n[i].LinkedSmartcard)?n[i].SerialNumber:n[i].LinkedSmartcard;if(C=e.helperFunction.setDecoderDetail(C,n[i].ProductDetail.Name,S),C.set("SerialNumber",n[i].SerialNumber+"-"),C.set("DPPPRMPrincipalArray",n[i].ListOfService.Service.filter(function(e){return c.contains(e.ProductDetail.Name.toLowerCase())&&e.ProductDetail.Type.toLowerCase()==="Principal".toLowerCase()})),C=e.helperFunction.setDisconnectServicesDetail(C,n[i].ListOfService.Service),C.set("agreementType",a[o].Type),!0===e.get("isDCCReconnectionAllowed")&&!Ember.isEmpty(n[i].InsuranceDetail)&&!Ember.isEmpty(n[i].InsuranceDetail.Name)&&!Ember.isEmpty(n[i].InsuranceDetail.Status)){var D=GetClarityConstants("ManageViewingConstants","manageViewingConstants.reconnect.allowedStatusForDCC");!Ember.isEmpty(D)&&D.contains(n[i].InsuranceDetail.Status.toLowerCase())&&(C.insuranceServiceName=n[i].InsuranceDetail.Name,C.insuranceOnDeviceNumber=n[i].SerialNumber,C.insuranceCudDate=n[i].InsuranceDetail.ChargeUntilDate,C.insuranceServiceDiscon=n[i].InsuranceDetail.Status,C.insuranceServiceStatus=!0,e.currentReconnectModel.insuranceProductIds.contains(n[i].InsuranceDetail.UID)||e.currentReconnectModel.insuranceProductIds.push(n[i].InsuranceDetail.UID))}var y=!1;(!Ember.isEmpty(C.principalServiceName)||C.listOfAccessService.length>0||C.listOfAddOnServices.length>0||!Ember.isEmpty(C.insuranceServiceName))&&(y=!0),y&&t.push(C)}if(!Ember.isEmpty(n[i].SecondaryHardware)&&void 0!==n[i].SecondaryHardware.Hardware)for(var w=null,I=e.createArrayForSingleElement(n[i].SecondaryHardware.Hardware),x=0;x<I.length;x++)if(!Ember.isEmpty(I[x].InsuranceDetail)){if(Ember.isEmpty(I[x].LinkedSmartcard)?Ember.isEmpty(I[x].SerialNumber)||(w={Key:I[x].SerialNumber,Value:I[x].SerialNumber,Text:"Device Number"}):w={Key:I[x].LinkedSmartcard,Value:I[x].LinkedSmartcard,Text:"Smartcard Number"},e.smartcardsList.length>0){var M=e.smartcardsList.filter(function(e){return e.Key===w.Key});0===M.length&&e.smartcardsList.push(w)}else e.smartcardsList.push(w);hardwareDetailOfSecondaryDevice=Komodo.Models.CustomerHardwareAndServicesModel.create();var T=Ember.isEmpty(I[x].LinkedSmartcard)?I[x].SerialNumber:I[x].LinkedSmartcard;if(hardwareDetailOfSecondaryDevice=e.helperFunction.setDecoderDetail(hardwareDetailOfSecondaryDevice,I[x].ProductDetail.Name,T),hardwareDetailOfSecondaryDevice.set("DPPPRMPrincipalArray",I[x].ListOfService.Service.filter(function(e){return c.contains(e.ProductDetail.Name.toLowerCase())&&e.ProductDetail.Type.toLowerCase()==="Principal".toLowerCase()})),!0===e.get("isDCCReconnectionAllowed")&&!Ember.isEmpty(I[x].InsuranceDetail.Name)&&!Ember.isEmpty(I[x].InsuranceDetail.Status)){var N=GetClarityConstants("ManageViewingConstants","manageViewingConstants.reconnect.allowedStatusForDCC");!Ember.isEmpty(N)&&N.contains(I[x].InsuranceDetail.Status.toLowerCase())&&(hardwareDetailOfSecondaryDevice.insuranceServiceName=I[x].InsuranceDetail.Name,hardwareDetailOfSecondaryDevice.insuranceOnDeviceNumber=I[x].SerialNumber,hardwareDetailOfSecondaryDevice.insuranceCudDate=I[x].InsuranceDetail.ChargeUntilDate,hardwareDetailOfSecondaryDevice.insuranceServiceDiscon=I[x].InsuranceDetail.Status,hardwareDetailOfSecondaryDevice.insuranceServiceStatus=!0,e.currentReconnectModel.insuranceProductIds.contains(I[x].InsuranceDetail.UID)||e.currentReconnectModel.insuranceProductIds.push(I[x].InsuranceDetail.UID))}var P=!1;Ember.isEmpty(hardwareDetailOfSecondaryDevice.insuranceServiceName)||(P=!0),P&&t.push(hardwareDetailOfSecondaryDevice)}if(!Ember.isEmpty(e.currentReconnectModel.smartCards)&&"ALL"===e.currentReconnectModel.get("smartCards.Key").toUpperCase()){var O=$.grep(t,function(e){return"13"===e.agreementType});O.forEach(function(e){t.removeObject(e)})}}e.set("checkSmartcardFilledAlready",!0)}return t},populateGrid:function(e,t,a,o){var s=this;s.currentReconnectModel.set("quoteDataAvailable",!1),s.currentReconnectModel.set("quoteDataAvailableForMultipleSmarcard",!1);var r=void 0;s.currentReconnectModel.set("quoteData",void 0),s.currentReconnectModel.set("newQuoteData",[]),s.currentReconnectModel.quoteSummary.clear();for(var n=0,i=!1,c=0;c<e.length;c++)if(void 0!==e[c].Id&&null!==e[c].Id&&(i=!0,n+=e[c].TotalAmount,c===e.length-1)){e[c].FinancialAccountBalance}for(var l=[],d=0;d<e.length;d++){s.set("currentQuoteModel",Komodo.Models.NewQuoteGridData.create()),s.currentQuoteModel.set("createdByUserId",e[d].CreatedByUserId),s.currentQuoteModel.set("customerId",e[d].CustomerId),s.currentQuoteModel.set("earmarkedAmount",e[d].EarmarkedAmount),s.currentQuoteModel.set("earmarkedOn",e[d].EarmarkedOn),s.currentQuoteModel.set("exportDate",e[d].ExportDate),s.currentQuoteModel.set("extended",e[d].Extended),s.currentQuoteModel.set("financialAccountBalance",e[d].FinancialAccountBalance),s.currentQuoteModel.set("financialAccountCurrentBalance",e[d].FinancialAccountCurrentBalance),s.currentQuoteModel.set("financialAccountId",e[d].FinancialAccountId),s.currentQuoteModel.set("fulfillmentDate",e[d].FulfillmentDate),s.currentQuoteModel.set("id",e[d].Id),s.currentQuoteModel.set("invoiceRunId",e[d].invoiceRunId),s.currentQuoteModel.set("matchedAmount",e[d].MatchedAmount),s.currentQuoteModel.set("matchingPaymentId",e[d].MatchingPaymentId),s.currentQuoteModel.set("quoteDate",e[d].QuoteDate),s.currentQuoteModel.set("quoteGenerationMethod",e[d].QuoteGenerationMethod),s.currentQuoteModel.set("quoteStatus",e[d].QuoteStatus),s.currentQuoteModel.set("quoteStatusId",e[d].QuoteStatusId),s.currentQuoteModel.set("quoteType",e[d].QuoteType),s.currentQuoteModel.set("replacedByQuoteId",e[d].ReplacedByQuoteId),s.currentQuoteModel.set("totalAmount",e[d].TotalAmount),s.currentQuoteModel.set("priceTotalAmt",0),s.currentQuoteModel.set("executionDate",e[d].ExecutionDate),s.currentQuoteModel.lineItems.clear();for(var u=0;u<e[d].LineItems.length;u++)s.set("currentLineItems",Komodo.Models.LineItems.create()),s.currentLineItems.set("adjustmentAmount",e[d].LineItems[u].AdjustmentAmount),s.currentLineItems.set("amount",e[d].LineItems[u].Amount),s.currentQuoteModel.set("priceTotalAmt",s.currentQuoteModel.priceTotalAmt+e[d].LineItems[u].Amount),s.currentLineItems.set("baseAmount",e[d].LineItems[u].BaseAmount),s.currentLineItems.set("createdByInvoiceRun",e[d].LineItems[u].CreatedByInvoiceRun),s.currentLineItems.set("currencyId",e[d].LineItems[u].CurrencyId),s.currentLineItems.set("currencyMnemonic",e[d].LineItems[u].CurrencyMnemonic),s.currentLineItems.set("endDate",e[d].LineItems[u].EndDate),s.currentLineItems.set("entityId",e[d].LineItems[u].EntityId),s.currentLineItems.set("entityType",e[d].LineItems[u].EntityType),s.currentLineItems.set("eventId",e[d].LineItems[u].EventId),s.currentLineItems.set("extended",e[d].LineItems[u].Extended),s.currentLineItems.set("id",e[d].LineItems[u].Id),s.currentLineItems.set("invoiceText",e[d].LineItems[u].InvoiceText),s.currentLineItems.set("isProrated",e[d].LineItems[u].IsProrated),s.currentLineItems.set("listPriceConditionId",e[d].LineItems[u].ListPriceConditionId),s.currentLineItems.set("listPriceTypeId",e[d].LineItems[u].ListPriceTypeId),s.currentLineItems.set("numberOfUnits",e[d].LineItems[u].NumberOfUnits),s.currentLineItems.set("priceAdjustmentId",e[d].LineItems[u].PriceAdjustmentId),s.currentLineItems.set("quoteInvoiceId",e[d].LineItems[u].QuoteInvoiceId),s.currentLineItems.set("reversal",e[d].LineItems[u].Reversal),s.currentLineItems.set("startDate",e[d].LineItems[u].StartDate),s.currentLineItems.set("taxAmount",e[d].LineItems[u].TaxAmount),s.currentQuoteModel.lineItems.pushObject(s.currentLineItems);s.currentQuoteModel.set("priceTotalAmt",s.currentQuoteModel.priceTotalAmt.toFixed(2)),l.pushObject(s.currentQuoteModel)}i?(s.currentReconnectModel.set("isFundAvail",!0),s.currentReconnectModel.set("isDataAvail",!0)):(s.currentReconnectModel.set("isDataAvail",!1),s.currentReconnectModel.set("isFundAvail",!1),s.get("currentReconnectModel").suspendedData.length>0&&s.currentReconnectModel.set("isDataAvail",!0));for(var h=[],m=0,g=!1,p=!1,v=GetClarityConstants("ManageViewingConstants","manageViewingConstants.reconnect.quoteButtonExcludedForStatus"),d=0;d<l.length;d++){for(var u=0;u<l[d].lineItems.length;u++)if(l[d].lineItems[u].amount=l[d].lineItems[u].amount.toFixed(2),l[d].lineItems[u].entityId==s.currentReconnectModel.get("allHardwares")[0].principalProductId)s.currentReconnectModel.get("allHardwares")[0].set("stateOfToggleButtonPrinc",!0),s.currentReconnectModel.get("allHardwares")[0].set("stateOfToggleButtonOfPrincipleService",!1),g=!0,p||h.pushObject(l[d]),m=d,s.currentReconnectModel.get("checkPreAct")||s.getDateFromJavascriptDate(new Date)===s.getFormattedDate(l[d].executionDate)||(l[d].enabledOrNot=!0),p=!0;else{for(var f=0;f<s.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices.length;f++)l[d].lineItems[u].entityId==s.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices[f].seviceProductId&&(s.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices[f].set("stateOfToggleButton",!0),s.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices[f].set("stateOfToggleButtonOfService",!1));for(var f=0;f<s.currentReconnectModel.get("allHardwares")[0].listOfAccessService.length;f++)l[d].lineItems[u].entityId==s.currentReconnectModel.get("allHardwares")[0].listOfAccessService[f].seviceProductId&&(s.currentReconnectModel.get("allHardwares")[0].listOfAccessService[f].set("stateOfToggleButton",!0),s.currentReconnectModel.get("allHardwares")[0].listOfAccessService[f].set("stateOfToggleButtonOfService",!1));s.currentReconnectModel.insuranceProductIds.contains(l[d].lineItems[u].entityId.toString())&&(s.currentReconnectModel.get("allHardwares")[0].set("stateOfToggleButtonDCC",!0),s.currentReconnectModel.get("allHardwares")[0].set("stateOfToggleButtonOfInsuranceService",!1))}if(-l[d].financialAccountCurrentBalance>=l[d].totalAmount){l[d].suffInsuff=!0;l[d].finalAmountRequired=(0).toFixed(2),Ember.isEmpty(s.currentReconnectModel.get("allHardwares")[0].principalServiceName)||Ember.isEmpty(v)||!v.contains(s.currentReconnectModel.get("allHardwares")[0].principalServiceStatus.toLowerCase())||(l[d].enabledOrNot=!1)}else s.currentReconnectModel.get("checkPreAct")?l[d].suffInsuff=!0:(l[d].suffInsuff=!1,Ember.isEmpty(s.currentReconnectModel.get("allHardwares")[0].principalServiceName)?s.currentReconnectModel.set("disableReject",!1):!Ember.isEmpty(v)&&v.contains(s.currentReconnectModel.get("allHardwares")[0].principalServiceStatus.toLowerCase())?s.currentReconnectModel.set("disableReject",!0):s.currentReconnectModel.set("disableReject",!1)),l[d].finalAmountRequired=l[d].totalAmount- -l[d].financialAccountCurrentBalance,l[d].finalAmountRequired=l[d].finalAmountRequired.toFixed(2)}if(g){s.currentReconnectModel.set("reconnectDateEnDis",!0),s.currentReconnectModel.set("diconnectDateEnDis",!0);for(var d=0;d<l.length;d++)if(d!==m){if(-l[d].financialAccountCurrentBalance>=l[d].totalAmount){l[d].suffInsuff=!0;var b=0;l[d].finalAmountRequired=b.toFixed(2)}else l[d].suffInsuff=!!s.currentReconnectModel.get("checkPreAct"),l[d].finalAmountRequired=l[d].totalAmount- -l[d].financialAccountCurrentBalance,l[d].finalAmountRequired=l[d].finalAmountRequired.toFixed(2);l[d].enabledOrNot=!0,h.pushObject(l[d])}for(var f=0;f<s.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices.length;f++)s.currentReconnectModel.set("scnotes","Add-on/access cannot be reconnected as a quote is pending for Premium Service. Kindly accept or reject the pending quote"),s.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices[f].set("stateOfToggleButton",!0),s.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices[f].set("stateOfToggleButtonOfService",!1);for(var f=0;f<s.currentReconnectModel.get("allHardwares")[0].listOfAccessService.length;f++)s.currentReconnectModel.set("scnotes","Add-on/access cannot be reconnected as a quote is pending for Premium Service. Kindly accept or reject the pending quote"),s.currentReconnectModel.get("allHardwares")[0].listOfAccessService[f].set("stateOfToggleButton",!0),s.currentReconnectModel.get("allHardwares")[0].listOfAccessService[f].set("stateOfToggleButtonOfService",!1)}else for(var d=0;d<l.length;d++){if(-l[d].financialAccountCurrentBalance>=l[d].totalAmount){l[d].suffInsuff=!0;var C=0;l[d].finalAmountRequired=C.toFixed(2)}else l[d].suffInsuff=!!s.currentReconnectModel.get("checkPreAct"),l[d].finalAmountRequired=l[d].totalAmount- -l[d].financialAccountCurrentBalance,l[d].finalAmountRequired=l[d].finalAmountRequired.toFixed(2);l[d].enabledOrNot=!1,s.currentReconnectModel.get("checkPreAct")||s.getDateFromJavascriptDate(new Date)===s.getFormattedDate(l[d].executionDate)||(l[d].enabledOrNot=!0),h.pushObject(l[d])}var S=0,r=!0,D=0;if(h.forEach(function(e){S+=e.totalAmount,D=e.financialAccountCurrentBalance.toFixed(2),e.enabledOrNot||(r=!1)}),0===(S=S.toFixed(2)))var y=D<=0;else var y=-D>=S;var w=S- -D;w=w.toFixed(2),w=w<=0?0:w,s.currentReconnectModel.set("newQuoteData",h),h.length>0&&(s.currentReconnectModel.set("quoteDataAvailable",!0),s.currentReconnectModel.set("quoteDataAvailableForMultipleSmarcard",!1)),s.currentReconnectModel.set("finalAmountRequired",w),s.currentReconnectModel.set("priceTotalAmt",S),s.currentReconnectModel.set("suffInsuff",y),s.currentReconnectModel.set("enabledOrNot",r),s.preActiveQuotesChanged(),s.hideBusyIndicator()},showBlockingBusyIndicator:function(){var e=this;Komodo.Services.busyService.start(!0,e.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,15e7,"blocking",e)},hideBusyIndicator:function(){var e=this;Komodo.Services.busyService.stop(e.get("processId"),"blocking")},qouteRetreival:function(e,t,a){var o=this,s=o.get("reasonForNormalReconnection"),r=o.get("reasonForScheduledReconnection");o.getNewProcessID(),o.showBlockingBusyIndicator();var n=[];o.set("quoteCount",e.length);var i=!1;o.currentReconnectModel.set("dccFlag",!1);for(var c=0;c<e.length;c++){if("Disconnected"===e[c].Key||"Request Disconnect"===e[c].Key){i=!0,o.currentReconnectModel.get("isUnfairDisconnect")&&o.currentReconnectModel.set("unfairSelected",!0);var l=[];l.push(e[c].Value);var d=t[c];"Request Disconnect"===e[c].Key?(s=o.get("reasonForCustomerRequestReconnect"),r=o.get("reasonForCustomerRequestReconnect")):"Disconnected"===e[c].Key&&o.currentReconnectModel.get("isUnfairDisconnect")&&(s="",r=""),d.toDateString()===(new Date).toDateString()?n.push({deviceSerialNumber:o.currentReconnectModel.get("smartCards.Key"),packageNames:l,scheduledReconnectionDate:"",reconnectionReason:s}):(d=d.toLocaleDateString("sv-SE"),n.push({deviceSerialNumber:o.currentReconnectModel.get("smartCards.Key"),packageNames:l,scheduledReconnectionDate:d,reconnectionReason:r}))}if("Suspended"===e[c].Key){o.currentReconnectModel.set("suspendedFlag",!0),o.currentReconnectModel.set("suspendNotes",kl.value(o.localeReconnect+"suspendNote")),o.set("currentSuspendModel",Komodo.Models.SuspendedServiceData.create()),o.currentSuspendModel.serviceName=e[c].Value;var u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],h=u[new Date(t[c]).getMonth()],m=new Date(t[c]).getDate();m<10&&(m="0"+m);var g=new Date(t[c]).getFullYear();o.currentSuspendModel.displayDate=m+"-"+h+"-"+g,o.currentSuspendModel.reconnectionDate=t[c],!Ember.isEmpty(a)&&a.length>0&&(o.currentSuspendModel.disconnectionDate=a[0]),o.get("currentReconnectModel").suspendedData.pushObject(o.get("currentSuspendModel"))}Ember.isEmpty(e[c].Value)||"DCC"!==e[c].Value.toUpperCase()||o.currentReconnectModel.set("dccFlag",!0)}if(o.set("tempPackageName",e),i)o.quoteRetrivalJsonCall(n,e,a,t);else{o.hideBusyIndicator(),o.currentReconnectModel.set("isDataAvail",!0),o.currentReconnectModel.set("quoteDataAvailable",!1);for(var p=0;p<o.get("currentReconnectModel").suspendedData.length;p++){o.currentReconnectModel.set("diconnectDateEnDis",!0),o.currentReconnectModel.set("reconnectDateEnDis",!0),o.currentReconnectModel.get("allHardwares")[0].principalServiceName===o.get("currentReconnectModel").suspendedData[p].serviceName&&(o.currentReconnectModel.get("allHardwares")[0].set("stateOfToggleButtonPrinc",!0),o.currentReconnectModel.get("allHardwares")[0].set("PrincCalender",!0),o.currentReconnectModel.get("allHardwares")[0].set("isReqControlEnabledOrDisconnectOnPric",!0)),o.currentReconnectModel.get("allHardwares")[0].set("isReqControlEnabledOnDisconnect",!0);for(var v=0;v<o.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices.length;v++)o.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices[v].serviceName===o.get("currentReconnectModel").suspendedData[p].serviceName&&(o.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices[v].set("stateOfToggleButton",!0),o.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices[v].set("stateOfToggleCalender",!0));for(var f=0;f<o.currentReconnectModel.get("allHardwares")[0].listOfAccessService.length;f++)o.currentReconnectModel.get("allHardwares")[0].listOfAccessService[f].serviceName===o.get("currentReconnectModel").suspendedData[p].serviceName&&(o.currentReconnectModel.get("allHardwares")[0].listOfAccessService[f].set("stateOfToggleButton",!0),o.currentReconnectModel.get("allHardwares")[0].listOfAccessService[f].set("stateOfToggleCalender",!0))}}},quoteRetrivalJsonCall:function(e,t,a,o){var s=this,r=s.currentReconnectModel.get("isUnfairDisconnect")?"/Device/ReconnectUnfairDisconnectedPackages":"/Device/ReconnectPackage";Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo),Komodo.Services.queryService.postJSON(r,{data:e}).done(function(e){if(e.length>0){for(var r="",n=!1,i=0;i<e.length;i++)if(!Ember.isEmpty(e[i]))if("Success"!==e[i]){var c=e[i].split("|");"~"===e[i].substring(0,1)&&c.length>1?(s.publishCreateActivityReconnectFailure(c[1],c[0].substring(1,c[0].length)),r+=c[1]+"<br />"):c.length>1&&(s.publishCreateActivityReconnectFailure(c[1],c[0]),r+=c[1]+"<br />")}else{var l=[];n=!0,s.currentReconnectModel.set("dateReconnectAll",""),s.currentReconnectModel.set("refreshQuoteCheck",!1),s.setReconnectAllDisbled(!0),s.currentReconnectModel.set("isReconnectAll",!1);var d=s.get("ReasonForDisconnection");if(s.currentReconnectModel.get("allHardwares")[0].set("isReqControlEnabledOnDisconnect",!0),!Ember.isEmpty(a)&&a.length>0){for(var u=0;u<t.length;u++)"DCC"!==t[u].Value&&l.push(t[u]);s.set("myTempPackageNames",l),s.set("myTempDisDate",a);for(var h=!1,m=[],g=!0,p=0;p<t.length;p++){var v=[];"DCC"!==t[p].Value?(v.push(t[p].Value),m.push({DeviceSerialNumber:s.currentReconnectModel.get("smartCards").Key,PackageNames:v,ScheduledDisconnectionDate:new Date(a[0]).toLocaleDateString("sv-SE"),DisconnectionReason:d})):(1===t.length&&(g=!1),h=!0)}if(h){var f=Komodo.Controls.MessageBoxController.show(kl.value(s.localeReconnect+"scheduleDisconnection"),kl.value(s.localeReconnect+"ScheduleDisconnectionOfDCC"),null,s,"id123456","warning");f.response=function(e){"ok"===e&&g&&("FromHolidayHome"===s.navigationFrom?s.suspendPackages(m):(s.set("sharedObject",Komodo.Application.ManageViewingSharedObjectController.create()),s.currentReconnectModel.get("dppprmArrayFlag")?s.showReconnectResultMessage(o,t,a,m):s.get("sharedObject").disconnectPackages(m,"Reconnect")))}}else"FromHolidayHome"===s.navigationFrom?s.suspendPackages(m):(s.set("sharedObject",Komodo.Application.ManageViewingSharedObjectController.create()),s.currentReconnectModel.get("dppprmArrayFlag")?s.showReconnectResultMessage(o,t,a,m):s.get("sharedObject").disconnectPackages(m,"Reconnect"))}}if(!Ember.isEmpty(r)){s.hideBusyIndicator();Komodo.Controls.MessageBoxController.show(kl.value(s.localeReconnect+"technicalErr"),r,Komodo.Controls.MessageBoxOkButtons,s,"authmbx","danger").response=function(){n&&(s.getNewProcessID(),s.showBlockingBusyIndicator())}}if(s.set("testNewPackageName",[]),s.currentReconnectModel.get("hardwareAndServices").length>0&&(s.get("currentReconnectModel").set("allHardwares",s.currentReconnectModel.get("hardwareAndServices").filter(function(e){return e.linkedSmartCard.toString().toLowerCase()===s.currentReconnectModel.smartCards.Value.toString().toLowerCase()})),!Ember.isEmpty(s.currentReconnectModel.get("allHardwares"))&&s.currentReconnectModel.get("allHardwares").length>0)){Ember.isEmpty(s.currentReconnectModel.get("allHardwares")[0].principalServiceName)||(s.testNewPackageName.pushObject(s.currentReconnectModel.get("allHardwares")[0].principalServiceName),s.currentReconnectModel.get("allHardwares")[0].set("stateOfToggleButtonPrinc",!0),s.currentReconnectModel.get("allHardwares")[0].set("stateOfToggleButtonOfPrincipleService",!1));for(var b=0;b<s.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices.length;b++)s.testNewPackageName.pushObject(s.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices[b].serviceName),s.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices[b].set("stateOfToggleButton",!0),s.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices[b].set("stateOfToggleButtonOfService",!1);for(var C=0;C<s.currentReconnectModel.get("allHardwares")[0].listOfAccessService.length;C++)s.testNewPackageName.pushObject(s.currentReconnectModel.get("allHardwares")[0].listOfAccessService[C].serviceName),s.currentReconnectModel.get("allHardwares")[0].listOfAccessService[C].set("stateOfToggleButton",!0),s.currentReconnectModel.get("allHardwares")[0].listOfAccessService[C].set("stateOfToggleButtonOfService",!1);Ember.isEmpty(s.currentReconnectModel.get("allHardwares")[0].insuranceServiceName)||(s.testNewPackageName.pushObject(s.currentReconnectModel.get("allHardwares")[0].insuranceServiceName),s.currentReconnectModel.get("allHardwares")[0].set("stateOfToggleButtonDCC",!0),s.currentReconnectModel.get("allHardwares")[0].set("stateOfToggleButtonOfInsuranceService",!1))}n&&(s.currentReconnectModel.get("dppprmArrayFlag")&&Ember.isEmpty(a)&&!s.currentReconnectModel.get("dccFlag")?s.showReconnectResultMessage(o,t,null,null):(s.currentReconnectModel.get("dppprmArrayFlag")&&Ember.isEmpty(a)&&s.currentReconnectModel.get("dccFlag")&&s.showReconnectResultMessage(o,t,null,null),s.retrieveICCQuotes(s.testNewPackageName,t,o,a)))}else Komodo.Controls.MessageBoxController.show(kl.value(s.localeReconnect+"quoteNotRetreived"),kl.value(s.localeReconnect+"quoteNotRetreivedMessage"),Komodo.Controls.MessageBoxOkButton,s,"id123456","danger")}).error(function(e){var t=JSON.stringify(e);Komodo.log("Notify Owner ajax call failed. Error: "+t),s.hideBusyIndicator(),s.setReconnectAllDisbled(!1),s.setCheckPreActivateQuote(!0),Komodo.Controls.MessageBoxController.show(kl.value(s.localeReconnect+"technicalErr"),t,Komodo.Controls.MessageBoxOkButtons,s,"authmbx","danger")})},retrieveICCQuotes:function(e,t,a,o){for(var s=[],r=[],n=this,i=!1,c=!1,l=void 0,d=void 0,u=void 0,h=!1,m=[],g=0;g<e.length;g++)"DCC"===e[g]?(s.addObject(e[g]),i=!0):(c=!0,r.addObject(e[g]));i&&Komodo.Services.queryService.postJSON("/Quote/RetrieveICCQuotes?serialnumber="+n.currentReconnectModel.allHardwares[0].insuranceOnDeviceNumber,{data:s}).done(function(s){if(0===s.length&&void 0!==u&&(n.set("isQuoteRetrieved",!1),Komodo.Controls.MessageBoxController.show(kl.value(n.localeReconnect+"quoteNotRetreived"),kl.value(n.localeReconnect+"quoteRefreshButtonAlert"),null,n,"id123456","warning")),n.set("isQuoteRetrieved",!0),d=s,1===e.length)n.populateGrid(s,t,a,o);else if(!h&&c&&i&&void 0!==u){l=s.concat(u);for(var r=0;r<=l.length;r++)m.concat(l[r]);n.populateGrid(l,t,a,o),h=!0}}).error(function(e){n.set("isQuoteRetrieved",!1);var t=JSON.stringify(e);Komodo.log("Notify Owner ajax call failed. Error: "+t),n.hideBusyIndicator(),n.setReconnectAllDisbled(!1),Komodo.Controls.MessageBoxController.show(kl.value(n.localeReconnect+"technicalErr"),t,Komodo.Controls.MessageBoxOkButtons,this,"authmbx","danger")}),c&&Komodo.Services.queryService.postJSON("/Quote/RetrieveICCQuotes?serialnumber="+n.currentReconnectModel.get("smartCards.Key"),{data:r}).done(function(e){if(0===e.length&&void 0!==d&&(n.set("isQuoteRetrieved",!1),Komodo.Controls.MessageBoxController.show(kl.value(n.localeReconnect+"quoteNotRetreived"),kl.value(n.localeReconnect+"quoteRefreshButtonAlert"),null,n,"id123456","warning")),u=e,n.set("isQuoteRetrieved",!0),c&&i&&void 0!==d){if(!h){l=e.concat(d);for(var s=0;s<=l.length;s++)m.concat(l[s]);n.populateGrid(l,t,a,o),h=!0}}else i||n.populateGrid(e,t,a,o)}).error(function(e){n.set("isQuoteRetrieved",!1);var t=JSON.stringify(e);Komodo.log("Notify Owner ajax call failed. Error: "+t),n.hideBusyIndicator(),n.setReconnectAllDisbled(!1),Komodo.Controls.MessageBoxController.show(kl.value(n.localeReconnect+"technicalErr"),t,Komodo.Controls.MessageBoxOkButtons,this,"authmbx","danger")})},suspendPackages:function(e){var t=this;t.set("suspensionErrorMessageForFail","");var a=[];e.forEach(function(e){a.push({DeviceSerialNumber:e.DeviceSerialNumber,PackageNames:e.PackageNames,StartDate:e.ScheduledDisconnectionDate})}),t.set("redirectFlag",!1),t.set("errorMessageForFail",""),t.set("errorMessage",[]),t.set("errorOnDate",[]);for(var o=a.length-1;o>=0;o--)Ember.isEmpty(a[o].StartDate)||new Date(a[o].StartDate).toLocaleDateString()===(new Date).toLocaleDateString()?(t.errorMessage.pushObject(a[o].PackageNames[0]+" not suspended immediately"),t.errorOnDate[o]=void 0):(t.errorMessage.pushObject(a[o].PackageNames[0]+" not scheduled for suspension on "+a[o].StartDate),t.errorOnDate[o]=a[o].StartDate,t.set("redirectFlag",!0));Komodo.Services.QueryService.create().retrieveSelectedCountry();for(var s=[],r=a.length-1;r>=0;r--)s.pushObject(a[r]);if(s.length>0){t.showBlockingBusyIndicator();var n=!1;Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo),Komodo.Services.queryService.postJSON("/Device/SuspendPackages",{data:s}).done(function(e){var a=t.helperFunction.getCustomerIdToRetrieveData();if(void 0!==e){t.hideBusyIndicator(),t.cancelPackagesController.start(),n=!0,t.cancelPackagesController.get("cancelPackagesModel").set("isCancel",!1);for(var o=0;o<e.length;o++)if(void 0!==e[o].Status&&0!==e[o].Status&&void 0!==e[o].ResponseMessage){t.errorMessageForFail+=t.errorMessage[o]+". Reason: "+e[o].ResponseMessage+"<br />",-1!==t.errorMessage[o].indexOf("immediately")?t.cancelPackagesController.publishCreateActivity(a,!1,t.errorMessage[o]+". Reason: "+e[o].ResponseMessage,t.errorOnDate[o]):t.cancelPackagesController.publishCreateActivity(t.helperFunction.getCustomerIdToRetrieveData(),!0,t.errorMessage[o]+". Reason: "+e[o].ResponseMessage,t.errorOnDate[o])}}if(n){var s=t.get("redirectFlag")?kl.value(t.localeDisconnect+"disconnectionScheduleSuccess"):kl.value(t.localeDisconnect+"disconnectionImmediateSuccess");Komodo.Controls.MessageBoxController.show(kl.value(t.localeDisconnect+"success"),s,Komodo.Controls.MessageBoxOkButton,t,"id5446676","success")}else Komodo.Controls.MessageBoxController.show(kl.value(t.localeDisconnect+"disconnectTitle"),t.errorMessageForFail,Komodo.Controls.MessageBoxOkButton,t,"id5446673","warning"),t.hideBusyIndicator()}).error(function(e){var a=JSON.stringify(e);Komodo.log("Suspension Packages ajax call failed. Error: "+a),t.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(t.localeDisconnect+"error"),$.parseJSON(a).responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,t,"id5446674","danger")})}},showSuccessAlertMessage:function(e){if(this.verifyAndGetBlankValue(e))for(var t=0;t<e.length;t++){var a=e[t].split(":");if("Success"===a[0])return!0}return!1},verifyAndGetBlankValue:function(e){return Ember.isEmpty(e)},subscribePackagesDisconnectedReceived:function(){var e,t=this;Komodo.Services.eventAggregator.subscribe("PackagesDisconnectedReceived",function(){var a=Komodo.Services.uiService.getController("reconnect"),o=Komodo.Services.ManageViewingService.disconnectedPackages;a.getServicesDisconnectionStatus(o);var s=a.showSuccessAlertMessage(o);a.hideBusyIndicator(),s?e=Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"success"),a.notes,Komodo.Controls.MessageBoxOkButton,t,"id5446676","success"):(e=Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"reconnectTitle"),a.notes,Komodo.Controls.MessageBoxOkButton,t,"id5446675","warning"),e.response=function(e){if("ok"===e){var o=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),s=o.getCustomerIdToRetrieveData();if(Ember.isEmpty(s))return void Komodo.Controls.MessageBoxController.show(kl.value(t.localeDisconnect+"error"),kl.value(t.localeDisconnect+"customerNotFound"));a.publishCreateActivityForDisconnection(s,!1),a.get("dppprmArrayFlag")&&!a.get("dccFlag")&&t.transitionToRoute("/manageViewing")}})})},getServicesDisconnectionStatus:function(e){var t=this.get("myTempPackageNames"),a=this.get("myTempDisDate");this.set("serviceDisconnectStatus",[]),this.set("notes","");var o,s,r,n;if(t&&a&&e&&t.length===e.length&&a.length>0){for(var i=0;i<t.length;i++){o=void 0,r=Ember.isEmpty(t[i].Value)?t[i]:t[i].Value;var c=e[i].split(":");n=1===a[0].length?new Date(a).toLocaleDateString("sv-SE"):new Date(a[0]).toLocaleDateString("sv-SE"),"Success"===c[0]?(this.serviceDisconnectStatus.push({status:c[0],reason:c[0],packageName:c[2],scheduledDisconnectionDate:n}),o=kl.value(this.localeDisconnect+"schedulenote",{serviceName:r,disconnectDate:n})):"ApplicationFailure"===c[0]||"TransientFailure "===c[0]?(this.serviceDisconnectStatus.push({status:c[0],reason:c[1],packageName:c[2],scheduledDisconnectionDate:n}),o=kl.value(this.localeDisconnect+"disconnectFail",{
serviceName:r,disconnectDate:n})):(s="Technical error occurred, while processing the request!<br><br>",s+="Below are the possible reasons:<br>",s+="1. Service(s) is not accessible or down.<br>",s+="2. Technical error occurred in request execution.<br>",s+="3. Request is invalid.",this.serviceDisconnectStatus.push({status:"ApplicationFailure",reason:s,packageName:r,scheduledDisconnectionDate:n})),o&&(this.notes=""===this.notes?"<br>"+o:this.notes+"<br>"+o)}s&&(this.notes=""!==s&&""===this.notes?s:this.notes+"<br>"+s)}},getDateObjectFromString:function(e){var t,a=new Date;return e&&(e.indexOf("-")>=0?(t=e.split("-"),a=new Date(new Date(parseInt(t[0],10),parseInt(t[1],10)-1,parseInt(t[2],10)))):e.indexOf("/")>=0&&(t=e.split("/"),a=new Date(new Date(parseInt(t[2],10),parseInt(t[1],10)-1,parseInt(t[0],10))))),a},publishCreateActivityForDisconnection:function(e,t){var a=this,o=a.get("myTempPackageNames"),s=a.get("myTempDisDate");Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(r){var n,i=Komodo.Models.CreateInteraction.create(),c=Komodo.Models.Case.create();c.set("InteracteeName",Komodo.Services.securityService.session.domainUserName),c.set("InteractionLocation",r.data.countryDescription),c.set("InteractionMedium","1"),c.set("CustomerUID",e),c.set("Category","1"),c.set("SubCategory","1"),c.set("Outcome","132"),c.set("Status","1");for(var l=0;l<o.length;l++){n=void 0;var d=o[l],u=1===s[0].length?new Date(s).toLocaleDateString("sv-SE"):new Date(s[0]).toLocaleDateString("sv-SE"),h=Komodo.Models.CaseData.create(),m=Komodo.canonicalFacadeFactory(h,["CaseDataValueUri","Value"]);if(!t&&a.serviceDisconnectStatus&&a.serviceDisconnectStatus[l].status)a.serviceDisconnectStatus[l].status.toUpperCase()!=="ApplicationFailure".toUpperCase()&&a.serviceDisconnectStatus[l].status.toUpperCase()!=="TransientFailure".toUpperCase()||(n=kl.value(a.localeReconnect+"scheduleNoteForDisconnectFail",{serviceName:d.Value,disconnectDate:u,failureMessage:a.serviceDisconnectStatus[l].reason}));else if(t){var g=Komodo.Services.ManageViewingService.disconnectedPackagesError;g&&(n=kl.value(a.localeReconnect+"scheduleNoteForDisconnectFail",{serviceName:d.Value,disconnectDate:u,failureMessage:$.parseJSON(g).responseJSON.Message}))}c.set("Notes",n);var p=Komodo.Models.ListOfCaseData.create();m.set("CaseDataValueUri","Disconnection date");var v=new Date(u);m.set("Value",v.toLocaleDateString("sv-SE")),p.CaseData.push(h),c.set("ListOfCaseData",p);var f=Komodo.canonicalFacadeFactory(i,["Country","Case"]);f.set("Country",r.data.countryId),f.set("Case",c),a.publishRequestOnBus(i,"CreateInteraction","v1")}})},subscribePackagesDisconnectedError:function(){Komodo.Services.eventAggregator.subscribe("PackagesDisconnectedError",function(){var e=Komodo.Services.uiService.getController("reconnect"),t=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),a=t.getCustomerIdToRetrieveData();e.publishCreateActivityForDisconnection(a,!0)})},submitReconnectServices:function(e){var t=this;if(Komodo.Services.featureToggleService.isEnabled("ManageViewing","isGraceDayApplicable").done(function(e){t.isgracedayapplicablecountryflag=e}).fail(function(){t.isgracedayapplicablecountryflag=!1}),t.validateInputForReconnect())t.currentReconnectModel.isUnfairDisconnect&&Ember.isEmpty(t.currentReconnectModel.unfairDiscNotes)&&Komodo.Controls.MessageBoxController.show("Validation Error","Notes is required",Komodo.Controls.MessageBoxOkButtons,t,"unfairNotes","warning");else{var a=Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerClass,o=Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo,s=t.get("defaultDay"),r={customerNo:o,giveDays:s};t.currentReconnectModel.checkPreAct&&"2"===a&&!0===t.isgracedayapplicablecountryflag?Komodo.UI.graceRules.checkGraceLimit(r,function(a){a.graceAllowed?t.generateQuoteforReconnect(e):Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing:addGraceDays.useCaseTitle"),a.error,Komodo.Controls.MessageBoxOkButtons,t,"authmbx3","warning")}):t.generateQuoteforReconnect(e)}},submitMultipleReconnectServices:function(e){var t,a=[],o=Ember.A(),s=this;if(s.set("ischeckAllPreActivateQuoteDisabledForDCC",!1),t=Ember.isEmpty(s.get("bindReconnectAllDate"))?new Date:new Date(s.get("bindReconnectAllDate")),s.get("isScheduleDisconnectionAll")){if(Ember.isEmpty(s.get("dateScheduleDisconnectionAll")))return void Komodo.Controls.MessageBoxController.show(kl.value(s.localeReconnect+"scheduleDisconnection"),kl.value(s.localeReconnect+"scheduleDisconnectionReq"),null,s,"id123456","warning");if(new Date(s.get("dateScheduleDisconnectionAll"))<=t)return void Komodo.Controls.MessageBoxController.show(kl.value(s.localeReconnect+"scheduleDisconnection"),kl.value(s.localeReconnect+"scheduleDisconnectionValid"),null,s,"id123456","warning")}if(s.isUnfairAllDisconnect&&Ember.isEmpty(s.unfairDiscNotes))return void Komodo.Controls.MessageBoxController.show(kl.value(s.localeReconnect+"validationError"),kl.value(s.localeReconnect+"noteRequired"),Komodo.Controls.MessageBoxOkButtons,s,"id123336","warning");if(s.isUnfairAllDisconnect&&s.get("disableAllForDCC"))return void Komodo.Controls.MessageBoxController.show(kl.value(s.localeReconnect+"validationError"),kl.value(s.localeReconnect+"DCCvalidationUnfair"),Komodo.Controls.MessageBoxOkButtons,s,"id123436","warning");if(s.isScheduleDisconnectionAll&&s.get("disableAllForDCC"))return void Komodo.Controls.MessageBoxController.show(kl.value(s.localeReconnect+"validationError"),kl.value(s.localeReconnect+"ScheduleDisconnectionOfDCC"),Komodo.Controls.MessageBoxOkButtons,s,"id123536","warning");var r=0;e.forEach(function(e){Ember.isEmpty(e)||(a=[],!Ember.isEmpty(e.principalServiceName)&&e.stateOfToggleButtonOfPrincipleService&&a.pushObject(e.principalServiceName),e.listOfAddOnServices.forEach(function(e){e.stateOfToggleButtonOfService&&a.pushObject(e.serviceName)}),e.listOfAccessService.forEach(function(e){e.stateOfToggleButtonOfService&&a.pushObject(e.serviceName)}),Ember.isEmpty(e.insuranceServiceName)||s.paymentAlreadyDoneAll||s.isUnfairAllDisconnect||!e.stateOfToggleButtonOfInsuranceService||(a.pushObject(e.insuranceServiceName),r++),Ember.isEmpty(a)||o.push({deviceSerialNumber:e.linkedSmartCard,packageNames:a}))}),s.set("ischeckAllPreActivateQuoteDisabledForDCC",!(o.length!==r||!o.contains("DCC"))),s.set("reconnectAllPackages",o);var n={CustomerNumber:s.customerId,ProductDetails:o,scheduledReconnectionDate:"",reconnectionReason:""};n&&s.qouteRetreivalForMultipleSmartcard(n,t,new Date(s.get("dateScheduleDisconnectionAll")))},qouteRetreivalForMultipleSmartcard:function(e,t,a){var o=this;o.getNewProcessID(),o.showBlockingBusyIndicator();var s=!1,r="/Device/ReconnectMultipleSmartcards";t.toDateString()===(new Date).toDateString()?(e.scheduledReconnectionDate="",o.get("isUnfairAllDisconnect")?(e.reconnectionReason="",r="/Device/ReconnectMultipleUnfairDisconnectedSmartcards"):e.reconnectionReason=o.get("reasonForNormalReconnection")):(e.reconnectionReason=o.get("reasonForScheduledReconnection"),e.scheduledReconnectionDate=t.toLocaleDateString("sv-SE")),Komodo.Services.queryService.postJSON(r,{data:e}).done(function(r){if(!Ember.isEmpty(r)){var n="";if(!Ember.isEmpty(r.ResponseMessage))if("Success"!==r.ResponseMessage)for(var i=0;i<r.ProductDetails.length;i++){var c="";if(t.toDateString()===(new Date).toDateString())for(var l=0;l<r.ProductDetails[i].PackageNames.length;l++)c=r.ProductDetails[i].PackageNames[l]+" of DeviceSerialNumber "+r.ProductDetails[i].DeviceSerialNumber+" failed to Reconnect immediately. Reason "+r.ResponseMessage,n+=c+"<br />";else for(var d=0;d<r.ProductDetails[i].PackageNames.length;d++)c=r.ProductDetails[i].PackageNames[d]+" of DeviceSerialNumber "+r.ProductDetails[i].DeviceSerialNumber+" not scheduled for Reconnection on "+o.getformatedDateforUI(t)+" Reason "+r.ResponseMessage,n+=c+"<br />";o.publishCreateActivityReconnectFailure(c,t.toLocaleDateString("sv-SE"))}else s=!0,o.set("refreshQuoteCheck",!1),o.set("disableSubmitReconnectAll",!0);if(!Ember.isEmpty(n)){o.hideBusyIndicator();Komodo.Controls.MessageBoxController.show(kl.value(o.localeReconnect+"technicalErr"),n,Komodo.Controls.MessageBoxOkButtons,o,"authmbx","danger")}if(s&&e){if(o.get("isScheduleDisconnectionAll")){var u=[];e.ProductDetails.forEach(function(e){var t=$.grep(e.packageNames,function(e){return e===GetClarityConstants("ManageViewingConstants","productConstants.reconnect.insurance_product").toString()});e.packageNames.removeObject(t.toString()),u.push({DeviceSerialNumber:e.deviceSerialNumber,PackageNames:e.packageNames,ScheduledDisconnectionDate:new Date(a).toLocaleDateString("sv-SE"),DisconnectionReason:o.get("ReasonForDisconnection")})}),o.set("sharedObject",Komodo.Application.ManageViewingSharedObjectController.create()),o.get("sharedObject").disconnectMultipleSmartcards(u,"Reconnect")}if(r.Quote.length>0)o.populateGridforMultipleSmartcard(r.Quote);else{Komodo.Controls.MessageBoxController.show(kl.value(o.localeReconnect+"quoteNotRetreived"),kl.value(o.localeReconnect+"quoteNotRetreivedMessage"),Komodo.Controls.MessageBoxOkButton,o,"id123456","warning").response=function(e){"ok"===e&&o.set("disableRefreshAll",!1)}}}}}).error(function(e){var t=JSON.stringify(e);Komodo.log("Notify Owner ajax call failed. Error: "+t),o.hideBusyIndicator(),o.setReconnectAllDisbled(!1),o.setCheckPreActivateQuote(!0),Komodo.Controls.MessageBoxController.show(kl.value(o.localeReconnect+"technicalErr"),t,Komodo.Controls.MessageBoxOkButtons,o,"authmbx","danger")})},populateGridforMultipleSmartcard:function(e){var t=this;t.currentReconnectModel.set("quoteDataAvailableForMultipleSmarcard",!1),t.currentReconnectModel.set("quoteData",void 0),t.currentReconnectModel.set("newQuoteData",[]),t.currentReconnectModel.set("disableAcceptReconnect",!0!==t.paymentAlreadyDoneAll),t.currentReconnectModel.quoteSummary.clear();var a=!1;Ember.isEmpty(e)||(a=!0);for(var o=[],s=0;s<e.length;s++){t.set("currentQuoteModel",Komodo.Models.NewQuoteGridData.create()),t.currentQuoteModel.set("serialnumber",e[s].Id),t.currentQuoteModel.set("createdByUserId",e[s].CreatedByUserId),t.currentQuoteModel.set("customerId",e[s].CustomerId),t.currentQuoteModel.set("earmarkedAmount",e[s].EarmarkedAmount),t.currentQuoteModel.set("earmarkedOn",e[s].EarmarkedOn),t.currentQuoteModel.set("exportDate",e[s].ExportDate),t.currentQuoteModel.set("extended",e[s].Extended),t.currentQuoteModel.set("financialAccountBalance",e[s].FinancialAccountBalance),t.currentQuoteModel.set("financialAccountCurrentBalance",e[s].FinancialAccountCurrentBalance),t.currentQuoteModel.set("financialAccountId",e[s].FinancialAccountId),t.currentQuoteModel.set("fulfillmentDate",e[s].FulfillmentDate),t.currentQuoteModel.set("id",e[s].Id),t.currentQuoteModel.set("invoiceRunId",e[s].invoiceRunId),t.currentQuoteModel.set("matchedAmount",e[s].MatchedAmount),t.currentQuoteModel.set("matchingPaymentId",e[s].MatchingPaymentId),t.currentQuoteModel.set("quoteDate",e[s].QuoteDate),t.currentQuoteModel.set("quoteGenerationMethod",e[s].QuoteGenerationMethod),t.currentQuoteModel.set("quoteStatus",e[s].QuoteStatus),t.currentQuoteModel.set("quoteStatusId",e[s].QuoteStatusId),t.currentQuoteModel.set("quoteType",e[s].QuoteType),t.currentQuoteModel.set("replacedByQuoteId",e[s].ReplacedByQuoteId),t.currentQuoteModel.set("totalAmount",e[s].TotalAmount),t.currentQuoteModel.set("priceTotalAmt",0),t.currentQuoteModel.set("executionDate",e[s].ExecutionDate),t.currentQuoteModel.lineItems.clear();for(var r=0;r<e[s].LineItems.length;r++)t.set("currentLineItems",Komodo.Models.LineItems.create()),t.currentLineItems.set("adjustmentAmount",e[s].LineItems[r].AdjustmentAmount),t.currentLineItems.set("amount",e[s].LineItems[r].Amount),t.currentQuoteModel.set("priceTotalAmt",t.currentQuoteModel.priceTotalAmt+e[s].LineItems[r].Amount),t.currentLineItems.set("baseAmount",e[s].LineItems[r].BaseAmount),t.currentLineItems.set("createdByInvoiceRun",e[s].LineItems[r].CreatedByInvoiceRun),t.currentLineItems.set("currencyId",e[s].LineItems[r].CurrencyId),t.currentLineItems.set("currencyMnemonic",e[s].LineItems[r].CurrencyMnemonic),t.currentLineItems.set("endDate",e[s].LineItems[r].EndDate),t.currentLineItems.set("entityId",e[s].LineItems[r].EntityId),t.currentLineItems.set("entityType",e[s].LineItems[r].EntityType),t.currentLineItems.set("eventId",e[s].LineItems[r].EventId),t.currentLineItems.set("extended",e[s].LineItems[r].Extended),t.currentLineItems.set("id",e[s].LineItems[r].Id),t.currentLineItems.set("invoiceText",e[s].LineItems[r].InvoiceText),t.currentLineItems.set("isProrated",e[s].LineItems[r].IsProrated),t.currentLineItems.set("listPriceConditionId",e[s].LineItems[r].ListPriceConditionId),t.currentLineItems.set("listPriceTypeId",e[s].LineItems[r].ListPriceTypeId),t.currentLineItems.set("numberOfUnits",e[s].LineItems[r].NumberOfUnits),t.currentLineItems.set("priceAdjustmentId",e[s].LineItems[r].PriceAdjustmentId),t.currentLineItems.set("quoteInvoiceId",e[s].LineItems[r].QuoteInvoiceId),t.currentLineItems.set("reversal",e[s].LineItems[r].Reversal),t.currentLineItems.set("startDate",e[s].LineItems[r].StartDate),t.currentLineItems.set("taxAmount",e[s].LineItems[r].TaxAmount),t.currentQuoteModel.lineItems.pushObject(t.currentLineItems);t.currentQuoteModel.set("priceTotalAmt",t.currentQuoteModel.priceTotalAmt.toFixed(2)),o.pushObject(t.currentQuoteModel)}a?(t.set("isQuoteRetrieved",!0),t.currentReconnectModel.set("isFundAvail",!0),t.currentReconnectModel.set("isDataAvail",!0),t.currentReconnectModel.set("refreshQuoteCheck",!0),t.set("disableReconnectAllDate",!0),t.set("disableDateScheduleDisconnectionAll",!0),t.set("disableReconnectAllToggle",!0),t.set("stateOfToggleButtonPrinc",!0),t.set("disableScheduleDisconnectionAll",!0),t.set("isunfairAllcheckboxEnabledOrDisabled",!0),t.set("stateOfToggleButtonPrinc",!0),t.set("stateOfToggleButtonDCC",!0)):(t.set("isQuoteRetrieved",!1),t.currentReconnectModel.set("isDataAvail",!1),t.currentReconnectModel.set("isFundAvail",!1),t.currentReconnectModel.set("refreshQuoteCheck",!1),t.set("disableReconnectAllToggle",!1),t.set("stateOfToggleButtonPrinc",!1),t.set("stateOfToggleButtonDCC",!1));for(var n=[],i=0,c=!1,l=!1,s=0;s<o.length;s++){for(var r=0;r<o[s].lineItems.length;r++)o[s].lineItems[r].amount=o[s].lineItems[r].amount.toFixed(2),o[s].lineItems[r].entityId==t.currentReconnectModel.get("allHardwares")[0].principalProductId&&(c=!0,l||n.pushObject(o[s]),i=s,t.get("paymentAlreadyDoneAll")||t.getDateFromJavascriptDate(new Date)===t.getFormattedDate(o[s].executionDate)||(o[s].enabledOrNot=!0),l=!0);if(-o[s].financialAccountCurrentBalance>=o[s].totalAmount){o[s].suffInsuff=!0;o[s].finalAmountRequired=(0).toFixed(2)}else o[s].suffInsuff=!!t.get("paymentAlreadyDoneAll"),o[s].finalAmountRequired=o[s].totalAmount- -o[s].financialAccountCurrentBalance,o[s].finalAmountRequired=o[s].finalAmountRequired.toFixed(2)}if(c){t.set("disableReconnectAllDate",!0),t.set("disableDateScheduleDisconnectionAll",!0);for(var s=0;s<o.length;s++)if(s!==i){if(-o[s].financialAccountCurrentBalance>=o[s].totalAmount){o[s].suffInsuff=!0;var d=0;o[s].finalAmountRequired=d.toFixed(2)}else o[s].suffInsuff=!!t.get("paymentAlreadyDoneAll"),o[s].finalAmountRequired=o[s].totalAmount- -o[s].financialAccountCurrentBalance,o[s].finalAmountRequired=o[s].finalAmountRequired.toFixed(2);o[s].enabledOrNot=!0,n.pushObject(o[s])}}else for(var s=0;s<o.length;s++){if(-o[s].financialAccountCurrentBalance>=o[s].totalAmount){o[s].suffInsuff=!0;var u=0;o[s].finalAmountRequired=u.toFixed(2)}else o[s].suffInsuff=!!t.get("paymentAlreadyDoneAll"),o[s].finalAmountRequired=o[s].totalAmount- -o[s].financialAccountCurrentBalance,o[s].finalAmountRequired=o[s].finalAmountRequired.toFixed(2);o[s].enabledOrNot=!1,t.get("paymentAlreadyDoneAll")||t.getDateFromJavascriptDate(new Date)===t.getFormattedDate(o[s].executionDate)||(o[s].enabledOrNot=!0),n.pushObject(o[s])}var h,m,g=0,p=!0,v=0;n.forEach(function(e){g+=e.totalAmount,v=e.financialAccountCurrentBalance.toFixed(2),e.enabledOrNot||(p=!1)}),g=g.toFixed(2),m=0==g?v<=0:-v>=g,h=g- -v,h=h.toFixed(2),h=h<=0?0:h,t.currentReconnectModel.set("newQuoteData",n);var f=[],b=[];t.currentReconnectModel.newQuoteData.length>0&&(b.addObjects(t.currentReconnectModel.newQuoteData[0].lineItems),f.push({deviceSerialNumber:t.currentReconnectModel.newQuoteData[0].serialnumber,lineItems:b}),t.currentReconnectModel.set("QuoteArray",f)),n.length>0&&(t.get("ischeckAllPreActivateQuoteDisabledForDCC")?t.set("disablePaymentAlreadyDoneAll",!0):t.set("disablePaymentAlreadyDoneAll",!1),t.set("isMultipleQuote",!0),t.currentReconnectModel.set("quoteDataAvailableForMultipleSmarcard",!0)),t.currentReconnectModel.set("finalAmountRequired",h),t.currentReconnectModel.set("priceTotalAmt",g),t.currentReconnectModel.set("suffInsuff",m),t.currentReconnectModel.set("enabledOrNot",p),t.hideBusyIndicator()},rejectMultipleQuote:function(e){for(var t=this,a=Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"rQuote"),kl.value(t.localeReconnect+"rejectQuoteMessage"),Komodo.Controls.MessageBoxYesNoButtons,t,"id123456","warning"),o=[],s=0;s<e.length;s++)o.push(e[s].id.toString());a.response=function(e){"yes"===e&&(t.getNewProcessID(),t.showBlockingBusyIndicator(),t.refreshAfterRejectQuote(o))}},refreshAfterRejectQuote:function(e){var t=this;Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo),Komodo.Services.queryService.postJSON("/Quote/RejectQuote",{data:e}).done(function(e){t.hideBusyIndicator(),Ember.isEmpty(e)||0!==e.Status||(t.currentReconnectModel.set("suspendedData",[]),t.currentReconnectModel.set("unfairSelected",!1),t.currentReconnectModel.set("newQuoteData",[]),Ember.isEmpty(t.currentReconnectModel.smartCards)||(t.set("disablePaymentAlreadyDoneAll",!1),t.set("paymentAlreadyDoneAll",!1),t.set("disableNoOfDays",!0),t.set("reconnectAllToggle",!1),t.set("isScheduleDisconnectionAll",!1),t.currentReconnectModel.set("quoteDataAvailableForMultipleSmarcard",!1),t.currentReconnectModel.set("checkQuoteThere",!0),t.set("disableReconnectAllToggle",!1),t.set("isQuoteRetrieved",!1),t.currentReconnectModel.set("isReconnectAll",!1),t.currentReconnectModel.set("sctemp","Smartcard / Device Number "+t.currentReconnectModel.smartCards.Value),t.set("checkSmartcardFilledAlready",!0),t.get("currentReconnectModel").set("isDataAvail",!1),t.getFinancialData(),t.set("bindReconnectAllDate",void 0),t.set("isUnfairAllDisconnect",!1),t.set("isunfairAllcheckboxEnabledOrDisabled",!0),t.currentReconnectModel.QuoteArray.clear(),t.currentReconnectModel.set("isMultipleReconnect",!0),t.currentReconnectModel.set("isReconnectPackageVisible",!0),t.set("dateScheduleDisconnectionAll",void 0)))}).error(function(e){t.hideBusyIndicator();var a=JSON.stringify(e);Komodo.log("Notify Owner ajax call failed. Error: "+a)})},QuoteDetailsForMultipleSmartcard:function(e){for(var t,a=this,o=[],s=0;s<e.lineItems.length;s++)t=Komodo.Models.QuoteDetailModel.create(),t.quoteID=e.lineItems[s].id,t.invoiceText=e.lineItems[s].invoiceText,t.startDate=XDates.getformatedDateforDatepicker(new Date(e.lineItems[s].startDate)),t.tax=e.lineItems[s].taxAmount.toFixed(2),t.amountRequired=e.lineItems[s].amount,t.status="Pending",t.noOfUnits=e.lineItems[s].numberOfUnits,t.endDate=XDates.getformatedDateforDatepicker(new Date(e.lineItems[s].endDate)),o.pushObject(t);a.set("quoteDetailsModel",o),popup=Komodo.Services.uiService.showModalPopup("Quote Details",null,{view:Komodo.Application.MultipleQuoteDetailView,context:{data:a.get("quoteDetailsModel")},canUserClose:!0})},acceptMultipleReconnect:function(e){var t=this,a=void 0,o=void 0;if(t.isUnfairAllDisconnect&&Ember.isEmpty(t.unfairDiscNotes))return void Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"validationError"),kl.value(t.localeReconnect+"noteRequired"),Komodo.Controls.MessageBoxOkButtons,t,"id123336","warning");for(var s=0;s<t.currentReconnectModel.get("allHardwares").length;s++)(!Ember.isEmpty(t.currentReconnectModel.get("allHardwares")[s].principalServiceName)||!Ember.isEmpty(t.currentReconnectModel.get("allHardwares")[s].listOfAddOnServices)&&t.currentReconnectModel.get("allHardwares")[s].listOfAddOnServices.length>0||!Ember.isEmpty(t.currentReconnectModel.get("allHardwares")[s].listOfAccessService)&&t.currentReconnectModel.get("allHardwares")[s].listOfAccessService.length>0)&&(o=Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"acceptReconnect"),kl.value(t.localeReconnect+"confirmReconnect"),Komodo.Controls.MessageBoxYesNoButtons,t));Ember.isEmpty(o)||(o.response=function(o){if("yes"===o){t.getNewProcessID(),t.showBlockingBusyIndicator();for(var s=0;s<e.length;s++)Komodo.Services.queryService.getJSON("/Quote/AcceptQuote?quoteId="+e[s].id+"&financialAccountId="+e[s].financialAccountId).done(function(e){if(t.hideBusyIndicator(),Ember.isEmpty(e)){var a=kl.value(t.localeReconnect+"scheduleReconnectionFailed")+e.ReasonPhrase;Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"acceptReconnect"),kl.value(t.localeReconnect+"errorOnQuote"+a),Komodo.Controls.MessageBoxOkButtons,t,"authmbx3","danger")}else{Ember.isEmpty(t.unfairDiscNotes)||t.publishCreateActivityReconnect(t.get("unfairDiscNotes")),t.currentReconnectModel.set("newQuoteData",[]);Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"acceptReconnect"),kl.value(t.localeReconnect+"scheduleSuccessfully"),Komodo.Controls.MessageBoxOkButtons,t,"authmbx2","success").response=function(){t.transitionToRoute("/manageViewing")}}}).error(function(e){t.hideBusyIndicator();var o=JSON.stringify(e);Ember.isEmpty(e)||Ember.isEmpty(e.responseJSON)||Ember.isEmpty(e.responseJSON.Message)||-1===e.responseJSON.Message.indexOf("TransientFailure")||(a=t.get("pkgNameListForAcceptReconnect").join(",")+kl.value(t.localeReconnect+"acceptReconnectFailed")+e.responseJSON.Message,t.publishCreateActivityReconnectFailure(a,(new Date).toLocaleDateString("sv-SE"))),Komodo.log("Notify Owner ajax call failed. Error: "+o),Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"acceptReconnect"),o,Komodo.Controls.MessageBoxOkButtons,t,"authmbx3","danger")})}})},subscribeMultipleSmartcardsDisconnectedReceived:function(){var e=this;Komodo.Services.eventAggregator.subscribe("MultipleSmartcardsDisconnectedReceived",function(){var t,a=Komodo.Services.uiService.getController("reconnect"),o=Komodo.Services.ManageViewingService.disconnectedPackages;a.getServicesMultipleSmartcardsDisconnectionStatus(o);var s=a.showSuccessAlertMessageMultipleSmartcardsDisconnectedReceived(o);a.hideBusyIndicator(),t=s?Komodo.Controls.MessageBoxController.show(kl.value(e.localeReconnect+"success"),a.notes,Komodo.Controls.MessageBoxOkButtons,e,"authmbx2","success"):Komodo.Controls.MessageBoxController.show(kl.value(e.localeReconnect+"reconnectTitle"),a.notes,Komodo.Controls.MessageBoxOkButtons,e,"id5446775","warning"),t.response=function(t){if("ok"===t){if(Ember.isEmpty(e.customerId))return void Komodo.Controls.MessageBoxController.show(kl.value(e.localeDisconnect+"error"),kl.value(e.localeDisconnect+"customerNotFound"));a.publishCreateActivityForMultipleSmartcardsDisconnection(e.customerId,!1)}}})},publishCreateActivityForMultipleSmartcardsDisconnection:function(e,t){var a=this,o=[];a.get("serviceDisconnectStatus").forEach(function(e){o.push(e.packageName)}),Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(s){var r,n=Komodo.Models.CreateInteraction.create(),i=Komodo.Models.Case.create();i.set("InteracteeName",Komodo.Services.securityService.session.domainUserName),i.set("InteractionLocation",s.data.countryDescription),i.set("InteractionMedium","1"),i.set("CustomerUID",e),i.set("Category","1"),i.set("SubCategory","1"),i.set("Outcome","132"),i.set("Status","1");for(var c=0;c<o.length;c++){r=void 0;var l=void 0;a.get("dateScheduleDisconnectionAll")&&(l=new Date(a.get("dateScheduleDisconnectionAll")).toLocaleDateString("sv-SE"));var d=Komodo.Models.CaseData.create(),u=Komodo.canonicalFacadeFactory(d,["CaseDataValueUri","Value"]);!t&&a.serviceDisconnectStatus&&a.serviceDisconnectStatus[c].status?r="ApplicationFailure"===a.serviceDisconnectStatus[c].status||"TransientFailure"===a.serviceDisconnectStatus[c].status?kl.value(a.localeReconnect+"scheduleNoteForDisconnectFail",{serviceName:o[c],disconnectDate:l,failureMessage:a.serviceDisconnectStatus[c].reason}):kl.value(a.localeReconnect+"schedulenote",{serviceName:o[c],disconnectDate:l}):t&&Komodo.Services.ManageViewingService.disconnectedPackagesError&&(r=kl.value(a.localeReconnect+"scheduleNoteForDisconnectFail",{serviceName:o[c],disconnectDate:l,failureMessage:$.parseJSON(errormsg).responseJSON.Message})),i.set("Notes",r);var h=Komodo.Models.ListOfCaseData.create();u.set("CaseDataValueUri","Disconnection date");var m=new Date(l);u.set("Value",m.toLocaleDateString("sv-SE")),h.CaseData.push(d),i.set("ListOfCaseData",h);var g=Komodo.canonicalFacadeFactory(n,["Country","Case"]);g.set("Country",s.data.countryId),g.set("Case",i),a.publishRequestOnBus(n,"CreateInteraction","v1")}})},getServicesMultipleSmartcardsDisconnectionStatus:function(e){var t=this;t.set("serviceDisconnectStatus",[]);var a=[];t.set("notes","");var o="",s=new Date(t.get("dateScheduleDisconnectionAll")).toLocaleDateString("sv-SE");e.forEach(function(e){$.each(e.dictionary,function(t,o){a.push({status:o,reason:e.ResponseMessage,packageName:t,scheduledDisconnectionDate:s})})}),a.forEach(function(e){o="Success"===e.status?kl.value(t.localeDisconnect+"schedulenote",{serviceName:e.packageName,disconnectDate:s}):kl.value(t.localeDisconnect+"disconnectFail",{serviceName:e.packageName,disconnectDate:s})+"Possible Reason:- "+e.reason,Ember.isEmpty(o)||(Ember.isEmpty(t.notes)?t.notes="<br>"+o:t.notes+="<br>"+o,Ember.isEmpty(void 0)||(""===t.notes?t.notes=void 0:t.notes+="<br>"+void 0))}),t.set("serviceDisconnectStatus",a)},showSuccessAlertMessageMultipleSmartcardsDisconnectedReceived:function(e){if(this.verifyAndGetBlankValue(e))for(var t=0;t<e.length;t++){var a=e[t].ResponseMessage;if("Success"===a)return!0}return!1},publishCreateActivity:function(e,t){var a=this;Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(o){var s=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),r=s.getCustomerIdToRetrieveData(),n=Komodo.Models.CreateInteraction.create(),i=Komodo.Models.Case.create(),c=e;i.set("InteracteeName",Komodo.Services.securityService.get("domainUserName").substring(3)),i.set("InteractionLocation",o.data.countryDescription),1===t&&(i.set("InteractionMedium","1"),i.set("Category","4"),i.set("SubCategory","12"),i.set("Outcome","44"),i.set("Status","1")),2===t&&(i.set("InteractionMedium","1"),i.set("Category","4"),i.set("SubCategory","1"),i.set("Outcome","43"),i.set("Status","1")),i.set("Notes",c),i.set("CustomerUID",r);var l=Komodo.canonicalFacadeFactory(n,["Country","Case"]);l.set("Country",a.get("loggedInCountryId")),l.set("Case",i),n.Country=o.data.countryId,a.publishRequestOnBus(n,"CreateInteraction","v1")})},publishRequestOnBus:function(e,t,a){var o=Komodo.Services.manageAccountService,s="Event Message for "+t+" ";o.publishEvent(this,e,t,a).done(function(){Komodo.log(s+" has been published successfully")}).fail(function(e){Komodo.log(s+" has been failed. Error: "+e)})},addGraceDays:function(){var e=[],t=this.get("defaultDay"),a=this;if(this.get("currentReconnectModel.smartCards")&&e.push(this.get("currentReconnectModel.smartCards").Value),e.length>0){var o=Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo,s=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),r=s.toLocaleDateString("sv-SE"),n=Komodo.Services.securityService.roles,i=[];n.forEach(function(e,t){var a=e.split("/");i[t]=a[a.length-1]});var c={CustomerUID:o,ListOfSmartCardNumber:e,LastGraceDayGivenOn:r,NumberOfGraceDaysGiven:t,ListOfRole:i,Action:a.get("maxGraceDayAllowedActionCode")};Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo),Komodo.Services.queryService.postJSON("/CustomerProfile/AddGraceDays",{data:c}).done(function(e){}).error(function(e){var t=JSON.stringify(e);Komodo.log("Add Grace days- AddGraceDays ajax call failed. Error: "+t),Komodo.Controls.MessageBoxController.show(kl.value("locale.manageviewing:addGraceDays.useCaseTitle"),e.responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,self,"authmbx3","danger")})}},acceptPreReconnect:function(e){var t=this;Komodo.Services.featureToggleService.isEnabled("ManageViewing","isGraceDayApplicable").done(function(e){t.isgracedayapplicablecountryflag=e}).fail(function(){t.isgracedayapplicablecountryflag=!1});var a=Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerClassText;Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"acceptReconnect"),kl.value(t.localeReconnect+"confirmReconnect"),Komodo.Controls.MessageBoxYesNoButtons,t).response=function(o){if("yes"===o){t.getNewProcessID(),t.showBlockingBusyIndicator(),Ember.isEmpty(t.get("defaultDay"))&&t.set("defaultDay",parseInt(GetClarityConstants("ManageViewingConstants","manageViewingConstants.reconnect.defaultDayForPreActivatedQuote")));for(var s=0;s<e.length;s++)Komodo.Services.queryService.getJSON("/Quote/PreActivateQuote?quoteId="+e[s].id+"&daysToAdd="+t.get("defaultDay")+"&reason="+t.get("reasonForReconnectWithoutPayment")).done(function(e){if(t.hideBusyIndicator(),Ember.isEmpty(e))Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"acceptReconnect"),kl.value(t.localeReconnect+"errorOnPreQuote"),Komodo.Controls.MessageBoxOkButtons,t,"authmbx3","danger");else if(e){Ember.isEmpty(t.unfairDiscNotes)||t.publishCreateActivityReconnect(t.get("unfairDiscNotes")),t.currentReconnectModel.set("newQuoteData",[]);var o=Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"acceptReconnect"),kl.value(t.localeReconnect+"scheduleSuccessfully"),Komodo.Controls.MessageBoxOkButtons,t,"authmbx2","success");"Residential"==a&&!0===t.isgracedayapplicablecountryflag&&t.addGraceDays(),o.response=function(){t.transitionToRoute("/manageViewing")}}else Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"acceptReconnect"),e,Komodo.Controls.MessageBoxOkButtons,t,"authmbx3","danger")}).error(function(e){t.hideBusyIndicator();var a=JSON.stringify(e);Komodo.log("Notify Owner ajax call failed. Error: "+a),Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"acceptReconnect"),a,Komodo.Controls.MessageBoxOkButtons,t,"authmbx3","danger")})}}},acceptReconnect:function(e){var t=this,a=!1,o=[],s=void 0,r=void 0,n=GetClarityConstants("ManageViewingConstants","manageViewingConstants.reconnect.quoteButtonExcludedForStatus");if(t.currentReconnectModel.isUnfairDisconnect&&Ember.isEmpty(t.currentReconnectModel.unfairDiscNotes))Komodo.Controls.MessageBoxController.show("Validation Error","Notes is required",Komodo.Controls.MessageBoxOkButtons,t,"unfairNotes","warning");else{if(t.currentReconnectModel.get("hardwareAndServices").length>0&&(t.get("currentReconnectModel").set("allHardwares",t.currentReconnectModel.get("hardwareAndServices").filter(function(e){return e.linkedSmartCard.toString().toLowerCase()===t.currentReconnectModel.smartCards.Value.toString().toLowerCase()})),!Ember.isEmpty(t.currentReconnectModel.get("allHardwares")&&t.currentReconnectModel.get("allHardwares").length>0))){Ember.isEmpty(t.currentReconnectModel.get("allHardwares")[0].principalServiceName)||(o.pushObject(t.currentReconnectModel.get("allHardwares")[0].principalServiceName),t.currentReconnectModel.get("allHardwares")[0].stateOfToggleButtonPrinc||(a=!0))
;for(var i=0;i<t.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices.length;i++)o.pushObject(t.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices[i].serviceName);for(var i=0;i<t.currentReconnectModel.get("allHardwares")[0].listOfAccessService.length;i++)o.pushObject(t.currentReconnectModel.get("allHardwares")[0].listOfAccessService[i].serviceName)}if(a)Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"acceptReconnect"),kl.value(t.localeReconnect+"confirmReconnectForPrincipal"),Komodo.Controls.MessageBoxOkButtons,t,"authmbx3","danger");else{var c;c=Ember.isEmpty(t.currentReconnectModel.get("allHardwares")[0].principalServiceName)?Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"acceptReconnect"),kl.value(t.localeReconnect+"confirmReconnect"),Komodo.Controls.MessageBoxYesNoButtons,t):!Ember.isEmpty(n)&&n.contains(t.currentReconnectModel.get("allHardwares")[0].principalServiceStatus.toLowerCase())?Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"acceptReconnect"),kl.value(t.localeReconnect+"confirmPdngInstallReconnect"),Komodo.Controls.MessageBoxYesNoButtons,t):Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"acceptReconnect"),kl.value(t.localeReconnect+"confirmReconnect"),Komodo.Controls.MessageBoxYesNoButtons,t),Ember.isEmpty(c)||(c.response=function(a){if("yes"===a){t.getNewProcessID(),t.showBlockingBusyIndicator();for(var n=0;n<e.length;n++)Komodo.Services.queryService.getJSON("/Quote/AcceptQuote?quoteId="+e[n].id+"&financialAccountId="+e[n].financialAccountId).done(function(e){if(t.hideBusyIndicator(),!Ember.isEmpty(e))if(e){Ember.isEmpty(t.currentReconnectModel.unfairDiscNotes)||t.publishCreateActivityReconnect(t.currentReconnectModel.get("unfairDiscNotes")),t.currentReconnectModel.set("newQuoteData",[]);var a=Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"acceptReconnect"),kl.value(t.localeReconnect+"scheduleSuccessfully"),Komodo.Controls.MessageBoxOkButtons,t,"authmbx2","success");a.response=function(){t.transitionToRoute("/manageViewing")}}else Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"acceptReconnect"),kl.value(t.localeReconnect+"errorOnQuote"),Komodo.Controls.MessageBoxOkButtons,t,"authmbx3","danger")}).error(function(e){t.hideBusyIndicator();var a=JSON.stringify(e);if(!Ember.isEmpty(e)&&!Ember.isEmpty(e.responseJSON)&&!Ember.isEmpty(e.responseJSON.Message)&&-1!==e.responseJSON.Message.indexOf("TransientFailure")){var n=(new Date).toLocaleDateString("sv-SE");r=o.join(","),s=r+" failed to Reconnect immediately. Reason: "+e.responseJSON.Message,t.publishCreateActivityReconnectFailure(s,n)}Komodo.log("Notify Owner ajax call failed. Error: "+a),Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"acceptReconnect"),a,Komodo.Controls.MessageBoxOkButtons,t,"authmbx3","danger")})}})}}},payNow:function(){var e=this;Komodo.Controls.MessageBoxController.show(kl.value(e.localeReconnect+"payNow"),kl.value(e.localeReconnect+"payNowConfirm"),Komodo.Controls.MessageBoxYesNoButtons,e,"id123456","warning").response=function(e){"yes"===e&&(Komodo.Services.navigationService.activateGroup(Komodo.NavigationGroupNames.OnlineTill),Komodo.Services.uiService.transitionTo("customerPayment"),Komodo.Services.eventAggregator.publish("PublishMakePayment",{value:"Customer Payment"}))}},newViewQuoteDetails:function(e){var t=this,a=Komodo.Models.QuoteDetailModel.create();a.quoteID=e.id,a.invoiceText=e.invoiceText,a.startDate=XDates.getformatedDateforDatepicker(new Date(e.startDate)),a.tax=e.taxAmount.toFixed(2),a.amountRequired=e.currencyMnemonic+"  "+e.amount,a.status="Pending",a.noOfUnits=e.numberOfUnits,a.endDate=XDates.getformatedDateforDatepicker(new Date(e.endDate)),t.set("quoteDetailsModel",a),Komodo.Services.uiService.showModalPopup("Quote Details",null,{view:Komodo.Application.QuoteDetailView,context:{data:t.get("quoteDetailsModel")},canUserClose:!0})},setCheckPreActivateQuote:function(e){this.checkPreactivateQuoteEnabled?this.currentReconnectModel.set("checkPreActivateQuote",e):this.currentReconnectModel.set("checkPreActivateQuote",!0)},smartcardSelectionChanged:function(){var e=this;e.currentReconnectModel.set("day",GetClarityConstants("ManageViewingConstants","manageViewingConstants.reconnect.defaultDayForPreActivatedQuote")),e.set("defaultDay",parseInt(e.currentReconnectModel.get("day")));var t=Komodo.Services.uiService.getController("holidayHomes");e.currentReconnectModel.set("scnotes",void 0);var a=t.maxLimitCount();e.currentReconnectModel.set("suspendNotes",void 0),e.currentReconnectModel.set("suspendedFlag",!1),e.currentReconnectModel.set("suspendedData",[]),e.currentReconnectModel.set("finalAmountRequired","0"),e.currentReconnectModel.set("isQuoteButtonRequired",!0),e.currentReconnectModel.set("checkPreAct",!1),e.currentReconnectModel.set("scnotes",void 0),e.set("checkPreactivateQuoteEnabled",!1),e.currentReconnectModel.set("isUnfairDisconnect",!1),e.currentReconnectModel.set("showUnfairDisconnect",!1),e.currentReconnectModel.set("showUnfairAllDisconnect",!1),e.currentReconnectModel.set("dppprmArrayFlag",!1),e.set("disableSubmitReconnectAll",!0),e.set("isMultipleQuote",!1),e.set("onlyDCCAvailable",!1),e.set("userIsAllowed",!1),e.setDefaultsforReconnectAll();for(var o=GetClarityConstants("ManageViewingConstants","manageViewingConstants.reconnect.paymentAlreadyDoneStatus"),s=0;s<e.currentReconnectModel.annualSmartcards.length;s++)if(!Ember.isEmpty(e.currentReconnectModel.smartCards)&&e.currentReconnectModel.smartCards.Value===e.currentReconnectModel.annualSmartcards[s])return Komodo.Controls.MessageBoxController.show(kl.value(e.localeReconnect+"reconnectTitle"),kl.value(e.localeReconnect+"noAnnualCustomer"),null,e,"id123456","warning"),e.currentReconnectModel.set("smartCards",void 0),void t.holidayHomesModel.set("viewDays","-");for(var r=0;r<e.currentReconnectModel.suspendedOrDiscHolidayhomes.length;r++)if(!Ember.isEmpty(e.currentReconnectModel.smartCards)&&e.currentReconnectModel.smartCards.Value===e.currentReconnectModel.suspendedOrDiscHolidayhomes[r]&&t.checkGeneralAndHHCountOnSwitching())return Komodo.Controls.MessageBoxController.show(kl.value(e.localeReconnect+"reconnectTitle"),kl.value(e.localeReconnect+"nosuspendedOrDiscHolidayhomes")+a,null,e,"id123456","warning"),e.currentReconnectModel.set("smartCards",void 0),void t.holidayHomesModel.set("viewDays","-");if(e.currentReconnectModel.get("newQuoteData").length>0&&(e.currentReconnectModel.set("newQuoteData",[]),e.currentReconnectModel.set("quoteDataAvailable",!1)),Ember.isEmpty(e.currentReconnectModel.smartCards))e.currentReconnectModel.set("isReconnectPackageVisible",!1),e.currentReconnectModel.set("isDataAvail",!1),e.currentReconnectModel.set("quoteDataAvailable",!1),t.holidayHomesModel.set("viewDays","-");else if("ALL"===e.currentReconnectModel.get("smartCards.Key").toUpperCase())e.currentReconnectModel.get("hardwareAndServices").length>0?(e.currentReconnectModel.set("isMultipleReconnect",!0),e.currentReconnectModel.set("isReconnectPackageVisible",!1),e.currentReconnectModel.set("quoteDataAvailable",!1),e.currentReconnectModel.set("isReconnectPackageVisible",!0),e.set("isScheduleDisconnectionAll",!1),e.set("disableScheduleDisconnectionAll",!0),e.set("isunfairAllcheckboxEnabledOrDisabled",!0),e.bindPackagesInformation(),this.currentReconnectModel.get("unfairDisconnectflag")&&e.currentReconnectModel.set("showUnfairAllDisconnect",!0)):(Komodo.Controls.MessageBoxController.show(kl.value(e.localeReconnect+"valSmartcard"),kl.value(e.localeReconnect+"noServiceAvail"),null,e,"id123456","warning"),e.currentReconnectModel.set("isReconnectPackageVisible",!1),e.currentReconnectModel.set("isMultipleReconnect",!1));else{e.currentReconnectModel.set("isMultipleReconnect",!1),e.currentReconnectModel.set("isReconnectPackageVisible",!0),e.currentReconnectModel.set("isReconnectAll",!1),e.currentReconnectModel.set("sctemp",e.currentReconnectModel.smartCards.Text+" "+e.currentReconnectModel.smartCards.Value),e.checkSmartcardFilledAlready=!0,e.get("currentReconnectModel").set("isDataAvail",!1),e.getMyQuote?e.getFinancialData():e.bindPackagesInformation(),e.set("suspendedFlagFor",!1),e.set("discSrev",!1),e.get("currentReconnectModel").set("allHardwares",e.currentReconnectModel.get("hardwareAndServices").filter(function(t){return t.linkedSmartCard.toString().toLowerCase()===e.currentReconnectModel.smartCards.Value.toString().toLowerCase()}));var n=e.currentReconnectModel.get("allHardwares"),i=Ember.A();if(!Ember.isEmpty(Komodo.Services.customerProfileService.currentFinancialAccounts)){var c=e.helperFunction.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account);Ember.isEmpty(c)||c.forEach(function(e){e.AccountTypeId.toString()!==GetClarityConstants("ManageViewingConstants","productConstants.reconnect.paymentPlanId").toString()||Ember.isEmpty(e.ListOfAgreement.Agreement)||e.ListOfAgreement.Agreement.forEach(function(e){Ember.isEmpty(e.ListOfHardware.Hardware)||e.ListOfHardware.Hardware.forEach(function(e){Ember.isEmpty(e.ListOfService.Service)||e.ListOfService.Service.forEach(function(e){i.push(e.ProductDetail.UID)})})})})}Ember.isEmpty(n)||n.forEach(function(t){if(!Ember.isEmpty(i)&&i.contains(t.principalServiceUid)||t.DPPPRMPrincipalArray.length>0){if(!Komodo.Services.securityService.permissions.contains("clarity://reconnect/AllowDPPReconnection"))return e.set("DPPReconnectionAllowed",!1),e.currentReconnectModel.set("isReconnectPackageVisible",!1),void Komodo.Controls.MessageBoxController.show(kl.value(e.localeReconnect+"reconnectionNotAllowedtitle"),kl.value(e.localeReconnect+"dppReconnectionNotAllowed"),Komodo.Controls.MessageBoxOkButton,e,"id5446673","warning");e.set("DPPReconnectionAllowed",!0),e.currentReconnectModel.set("dppprmArrayFlag",!0),e.currentReconnectModel.set("checkPreActivateQuote",!0),e.currentReconnectModel.set("checkPreactivateQuoteEnabled",!0),e.currentReconnectModel.set("graceDaysList",!0),e.currentReconnectModel.set("isReqControlEnabledOnDisconnect",!0),e.currentReconnectModel.set("isReconnectAll",!1),e.currentReconnectModel.set("showUnfairDisconnect",!1),e.currentReconnectModel.set("isUnfairDisconnect",!1),e.setReconnectAllDisbled(!0);var a=e.currentReconnectModel.get("allHardwares");Ember.isEmpty(a)||a.forEach(function(e){e.set("PrincCalender",!0),e.listOfAddOnServices.forEach(function(e){e.set("stateOfToggleButton",!0),e.set("tempDate",void 0),e.set("stateOfToggleCalender",!0)}),e.listOfAccessService.forEach(function(e){e.set("stateOfToggleButton",!0),e.set("tempDate",void 0),e.set("stateOfToggleCalender",!0)})})}});var l=!1;if(e.setDatepickerValidations(),!Ember.isEmpty(e.currentReconnectModel.get("allHardwares"))){if(e.currentReconnectModel.get("allHardwares").length>0){if(!Ember.isEmpty(e.currentReconnectModel.get("allHardwares")[0].principalServiceName)){l=!0,e.set("prinCUD",e.currentReconnectModel.get("allHardwares")[0].principalServiceChargedUntilDate);var d=GetClarityConstants("ManageViewingConstants","manageViewingConstants.reconnect.quoteButtonExcludedForStatus");if(d.contains(e.currentReconnectModel.get("allHardwares")[0].principalServiceStatus.toLowerCase())?(e.currentReconnectModel.set("disableReject",!0),e.currentReconnectModel.set("isQuoteButtonRequired",!1)):(e.currentReconnectModel.set("disableReject",!1),e.currentReconnectModel.set("isQuoteButtonRequired",!0)),"Suspended"===e.currentReconnectModel.get("allHardwares")[0].principalServiceStatus){e.set("suspendedFlagFor",!0),e.currentReconnectModel.set("scnotes",kl.value(e.localeReconnect+"SuspendedMessageFrame"));for(var s=0;s<e.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices.length;s++)e.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices[s].set("stateOfToggleButton",!0);for(var u=0;u<e.currentReconnectModel.get("allHardwares")[0].listOfAccessService.length;u++)e.currentReconnectModel.get("allHardwares")[0].listOfAccessService[u].set("stateOfToggleButton",!0)}"Disconnected"===e.currentReconnectModel.get("allHardwares")[0].principalServiceStatus&&e.set("discSrev",!0),!Ember.isEmpty(o)&&o.contains(e.currentReconnectModel.get("allHardwares")[0].principalServiceStatus.toLowerCase())&&e.set("checkPreactivateQuoteEnabled",!0)}if(Ember.isEmpty(e.currentReconnectModel.smartCards)||e.displayViewingDaysForReconnect(e.currentReconnectModel.smartCards.Value),!l){for(var s=0;s<e.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices.length;s++)"Suspended"===e.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices[s].serviceStatus&&e.set("suspendedFlagFor",!0),!Ember.isEmpty(o)&&o.contains(e.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices[s].serviceStatus.toLowerCase())&&e.set("checkPreactivateQuoteEnabled",!0);for(var u=0;u<e.currentReconnectModel.get("allHardwares")[0].listOfAccessService.length;u++)"Suspended"==e.currentReconnectModel.get("allHardwares")[0].listOfAccessService[u].serviceStatus&&e.set("suspendedFlagFor",!0),!Ember.isEmpty(o)&&o.contains(e.currentReconnectModel.get("allHardwares")[0].listOfAccessService[u].serviceStatus.toLowerCase())&&e.set("checkPreactivateQuoteEnabled",!0)}Ember.isEmpty(e.currentReconnectModel.get("allHardwares")[0].insuranceServiceName)||"disconnect pending reconnect"!==e.currentReconnectModel.get("allHardwares")[0].insuranceServiceDiscon.toLowerCase()||e.currentReconnectModel.get("allHardwares")[0].set("stateOfToggleButtonDCC",!0)}e.currentReconnectModel.get("allHardwares")[0].DPPPRMPrincipalArray.length>0&&e.currentReconnectModel.set("dppprmArrayFlag",!0)}e.currentReconnectModel.get("dppprmArrayFlag")?e.currentReconnectModel.set("checkPreActivateQuote",!0):e.setCheckPreActivateQuote(!e.checkPreactivateQuoteEnabled)}e.hideBusyIndicator()}.observes("currentReconnectModel.smartCards"),displayViewingDaysForReconnect:function(e){var t,a=this,o=Komodo.Services.uiService.getController("holidayHomes"),s=Komodo.Services.ProductAndServiceMaintenanceHelper.create();if(a.get("suspendedFlagFor")){var r=s.getCustomerIdToRetrieveData();Komodo.Services.queryService.getJSON("AccountProfile/GetNumberOfViewingDaysLeftForRecconect?customerId="+r).done(function(a){Ember.isEmpty(a)?Komodo.Controls.MessageBoxController.show("Holiday Homes","Unable to retrieve number of viewing days",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"):(Ember.isEmpty(a.ViewingDaysInfoPerDevice)||a.ViewingDaysInfoPerDevice.forEach(function(a){a.DeviceSerialNumber!==e||Ember.isEmpty(a.ServiceList)||(t=a.ServiceList[0].ViewingDaysLeft)}),o.holidayHomesModel.set("viewDays",t))}).error(function(e){var t=JSON.stringify(e);Komodo.log("GetNumberOfViewingDaysLeftForRecconect ajax call failed. Error: "+t)})}else a.get("discSrev")&&a.currentReconnectModel.get("isHolidayHome")?o.holidayHomesModel.set("viewDays",0):o.holidayHomesModel.set("viewDays","-")},setDatepickerValidations:function(){var e=this,t=e.get("currentReconnectModel.allHardwares");if(t.length>0){for(var a=0;a<t.length;a++){var o="princDateValidator"+(a+1);if(e.registerValidator(t[a],"princDate",{type:"date",isRequired:!1,displayName:"Reconnection Date",minDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),functions:Komodo.UI.Validators.DatePickerValidator,name:o}),t[a].set("princDateValidator",e.validators[o]),!Ember.isEmpty(t[a].listOfAddOnServices)&&t[a].listOfAddOnServices.length>0)for(var s=0;s<t[a].listOfAddOnServices.length;s++){var r="tempDateValidator"+(s+1);e.registerValidator(t[a].listOfAddOnServices[s],"tempDate",{type:"date",isRequired:!1,displayName:"Reconnection Date",minDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),functions:Komodo.UI.Validators.DatePickerValidator,name:r}),t[a].listOfAddOnServices[s].set("tempDateValidator",e.validators[r])}if(!Ember.isEmpty(t[a].listOfAccessService)&&t[a].listOfAccessService.length>0)for(var n=0;n<t[a].listOfAccessService.length;n++){var i="tempDateValidator"+(n+1);e.registerValidator(t[a].listOfAccessService[n],"tempDate",{type:"date",isRequired:!1,displayName:"Reconnection Date",minDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),functions:Komodo.UI.Validators.DatePickerValidator,name:i}),t[a].listOfAccessService[n].set("tempDateValidator",e.validators[i])}if(!Ember.isEmpty(t[0].insuranceServiceName)){var c="insuranceCUDValidator"+(a+1);e.registerValidator(t[a],"InsuranceCUD",{type:"date",isRequired:!1,displayName:"Reconnection Date",minDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),functions:Komodo.UI.Validators.DatePickerValidator,name:c}),t[a].set("insuranceCUDValidator",e.validators[c])}}e.get("currentReconnectModel").set("allHardwares",t),e.registerValidator(e.get("currentReconnectModel"),"dateReconnectAll",{type:"date",displayName:kl.value(e.localeReconnect+"reconnectAll"),isRequired:!1,minDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())}),e.registerValidator(e.get("currentReconnectModel"),"dateScheduleDisconnection",{type:"date",displayName:"Schedule Disconnection Date",isRequired:!1,minDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())})}},validateInputForReconnect:function(){var e,t=this,a=t.get("currentReconnectModel.allHardwares");if(a.length>0)for(var o=0;o<a.length;o++){if(a[o].princDateValidator&&a[o].princDateValidator.errors.length>0)return!0;if(!Ember.isEmpty(a[o].listOfAddOnServices)&&a[o].listOfAddOnServices.length>0)for(e=0;e<a[o].listOfAddOnServices.length;e++)if(a[o].listOfAddOnServices[e].tempDateValidator&&a[o].listOfAddOnServices[e].tempDateValidator.errors.length>0)return!0;if(!Ember.isEmpty(a[o].listOfAccessServices)&&a[o].listOfAccessServices.length>0)for(e=0;e<a[o].listOfAccessServices.length;e++)if(a[o].listOfAccessServices[e].tempDateValidator&&a[o].listOfAccessServices[e].tempDateValidator.errors.length>0)return!0}return!!(void 0!==this.validators.dateScheduleDisconnectionValidator&&this.validators.dateScheduleDisconnectionValidator.errors&&this.validators.dateScheduleDisconnectionValidator.errors.length>0)||(!!(void 0!==this.validators.dateReconnectAllValidator&&this.validators.dateReconnectAllValidator.errors&&this.validators.dateReconnectAllValidator.errors.length>0)||!!(void 0!==this.validators.unfairDiscNotesValidator&&this.validators.unfairDiscNotesValidator.errors&&this.validators.unfairDiscNotesValidator.errors.length>0))},getRefreshData:function(){var e=this,t=[],a=GetClarityConstants("ManageViewingConstants","manageViewingConstants.reconnect.paymentAlreadyDoneStatus");if(e.currentReconnectModel.get("hardwareAndServices").length>0)if(e.get("currentReconnectModel").set("allHardwares",e.currentReconnectModel.get("hardwareAndServices").filter(function(t){return t.linkedSmartCard.toString().toLowerCase()===e.currentReconnectModel.smartCards.Value.toString().toLowerCase()})),e.setDatepickerValidations(),!Ember.isEmpty(e.currentReconnectModel.get("allHardwares"))&&e.currentReconnectModel.get("allHardwares").length>0){if(e.currentReconnectModel.get("allHardwares")[0].checkPendingReconnectStatus=!1,e.currentReconnectModel.set("scnotes",void 0),!Ember.isEmpty(e.currentReconnectModel.get("allHardwares")[0].principalServiceName)||e.currentReconnectModel.get("allHardwares")[0].DPPPRMPrincipalArray.length>0){var o=e.currentReconnectModel.get("allHardwares")[0].DPPPRMPrincipalArray;Ember.isEmpty(o)?t.pushObject(e.currentReconnectModel.get("allHardwares")[0].principalServiceName):o.forEach(function(a){"Disconnected"===a.Status&&(t.pushObject(a.ProductDetail.Name),e.currentReconnectModel.get("allHardwares")[0].set("principalServiceName",a.ProductDetail.Name),e.currentReconnectModel.get("allHardwares")[0].set("principalServiceStatus",a.Status))}),"Disconnected"!==e.currentReconnectModel.get("allHardwares")[0].principalServiceStatus&&"Unfair Disconnection Pending"!==e.currentReconnectModel.get("allHardwares")[0].principalServiceStatus||!e.currentReconnectModel.get("unfairDisconnectflag")||0!==e.currentReconnectModel.get("allHardwares")[0].DPPPRMPrincipalArray.length||(e.currentReconnectModel.set("showUnfairDisconnect",!0),"Unfair Disconnection Pending"===e.currentReconnectModel.get("allHardwares")[0].principalServiceStatus&&(e.currentReconnectModel.set("isUnfairDisconnect",!0),e.currentReconnectModel.set("unfairSelected",!0))),Ember.isEmpty(e.currentReconnectModel.get("allHardwares")[0].principalServiceStatus)||Ember.isEmpty(a)||!a.contains(e.currentReconnectModel.get("allHardwares")[0].principalServiceStatus.toLowerCase())||e.set("checkPreactivateQuoteEnabled",!0)}for(var s=0;s<e.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices.length;s++)t.pushObject(e.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices[s].serviceName),"Disconnected"!==e.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices[s].serviceStatus&&"Unfair Disconnection Pending"!==e.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices[s].serviceStatus||!e.currentReconnectModel.get("unfairDisconnectflag")||0!==e.currentReconnectModel.get("allHardwares")[0].DPPPRMPrincipalArray.length||(e.currentReconnectModel.set("showUnfairDisconnect",!0),"Unfair Disconnection Pending"==e.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices[s].serviceStatus&&(e.currentReconnectModel.set("isUnfairDisconnect",!0),e.currentReconnectModel.set("unfairSelected",!0))),Ember.isEmpty(e.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices[s].serviceStatus)||Ember.isEmpty(a)||!a.contains(e.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices[s].serviceStatus.toLowerCase())||e.set("checkPreactivateQuoteEnabled",!0);for(var s=0;s<e.currentReconnectModel.get("allHardwares")[0].listOfAccessService.length;s++)t.pushObject(e.currentReconnectModel.get("allHardwares")[0].listOfAccessService[s].serviceName),"Disconnected"!==e.currentReconnectModel.get("allHardwares")[0].listOfAccessService[s].serviceStatus&&"Unfair Disconnection Pending"!==e.currentReconnectModel.get("allHardwares")[0].listOfAccessService[s].serviceStatus||!e.currentReconnectModel.get("unfairDisconnectflag")||0!==e.currentReconnectModel.get("allHardwares")[0].DPPPRMPrincipalArray.length||(e.currentReconnectModel.set("showUnfairDisconnect",!0),"Unfair Disconnection Pending"===e.currentReconnectModel.get("allHardwares")[0].listOfAccessService[s].serviceStatus&&(e.currentReconnectModel.set("isUnfairDisconnect",!0),e.currentReconnectModel.set("unfairSelected",!0))),Ember.isEmpty(e.currentReconnectModel.get("allHardwares")[0].listOfAccessService[s].serviceStatus)||Ember.isEmpty(a)||!a.contains(e.currentReconnectModel.get("allHardwares")[0].listOfAccessService[s].serviceStatus.toLowerCase())||e.set("checkPreactivateQuoteEnabled",!0);Ember.isEmpty(e.currentReconnectModel.get("allHardwares")[0].insuranceServiceName)||t.pushObject(e.currentReconnectModel.get("allHardwares")[0].insuranceServiceName),(!Ember.isEmpty(e.currentReconnectModel.get("allHardwares")[0].principalServiceName)||e.currentReconnectModel.get("allHardwares")[0].DPPPRMPrincipalArray.length>0)&&(e.currentReconnectModel.get("allHardwares")[0].checkPrincAvailable=!0)}else e.checkAllDisconnectedServicesUnderSmartcard();else e.checkAllDisconnectedServicesUnderSmartcard();if(t.length>0&&(e.getNewProcessID(),e.showBlockingBusyIndicator(),e.getIccQuoteOnSmartcard(t),e.currentReconnectModel.get("suspendedData").length>0&&(e.get("currentReconnectModel").set("allHardwares",e.currentReconnectModel.get("hardwareAndServices").filter(function(t){return t.linkedSmartCard.toString().toLowerCase()===e.currentReconnectModel.smartCards.Value.toString().toLowerCase()})),!Ember.isEmpty(e.currentReconnectModel.get("allHardwares"))&&e.currentReconnectModel.get("allHardwares").length>0&&(Ember.isEmpty(e.currentReconnectModel.get("allHardwares")[0].insuranceServiceName)||e.currentReconnectModel.get("allHardwares")[0].set("stateOfToggleButtonDCC",!0),Ember.isEmpty(e.currentReconnectModel.get("allHardwares")[0].principalServiceName))))){for(var r=0;r<e.currentReconnectModel.get("suspendedData").length;r++)for(var s=0;s<e.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices.length;s++)e.currentReconnectModel.get("suspendedData")[r].serviceName===e.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices[s].serviceName&&e.currentReconnectModel.get("allHardwares")[0].listOfAddOnServices[s].set("stateOfToggleButton",!0);for(var r=0;r<e.currentReconnectModel.get("suspendedData").length;r++)for(var s=0;s<e.currentReconnectModel.get("allHardwares")[0].listOfAccessService.length;s++)e.currentReconnectModel.get("suspendedData")[r].serviceName===e.currentReconnectModel.get("allHardwares")[0].listOfAccessService[s].serviceName&&e.currentReconnectModel.get("allHardwares")[0].listOfAccessService[s].set("stateOfToggleButton",!0)}},getRefreshDataForMultipleSmartcard:function(){var e=this,t=[],a=[],o=[];e.set("disableAllForDCC",!1);var s=[],r=GetClarityConstants("ManageViewingConstants","manageViewingConstants.reconnect.multipleReconnectAllowedStatus"),n=$.grep(e.currentReconnectModel.get("hardwareAndServices"),function(e){return Ember.isEmpty(e.principalServiceName)||Ember.isEmpty(r)||!r.contains(e.principalServiceStatus.toLowerCase())?$.grep(e.listOfAddOnServices,function(e){if(!Ember.isEmpty(e.serviceName)&&!Ember.isEmpty(r)&&r.contains(e.serviceStatus.toLowerCase()))return e}).length>0||$.grep(e.listOfAccessService,function(e){if(!Ember.isEmpty(e.serviceName)&&!Ember.isEmpty(r)&&r.contains(e.serviceStatus.toLowerCase()))return e}).length>0||!Ember.isEmpty(e.insuranceServiceName)&&e.insuranceServiceStatus&&!Ember.isEmpty(r)&&r.contains(e.insuranceServiceDiscon.toLowerCase())?e:void 0:e});e.get("currentReconnectModel").set("allHardwares",n),e.registerValidator(e,"bindReconnectAllDate",{type:"date",displayName:kl.value(e.localeReconnect+"reconnectAll"),isRequired:!1,minDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())}),e.registerValidator(e,"dateScheduleDisconnectionAll",{type:"date",displayName:kl.value(e.localeReconnect+"scheduleDisconnectionDate"),isRequired:!1,minDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())});var i=e.currentReconnectModel.get("allHardwares");!Ember.isEmpty(i)&&i.length>0?i.forEach(function(e){t=[],Ember.isEmpty(e.principalServiceName)||(e.checkPrincAvailable=!0,t.pushObject(e.principalServiceName),a.pushObject(e.principalServiceName)),Ember.isEmpty(e.listOfAddOnServices)||e.listOfAddOnServices.forEach(function(o){e.checkPrincAvailable&&(o.stateOfToggleButton=!0),t.pushObject(o.serviceName),a.pushObject(o.serviceName)}),Ember.isEmpty(e.listOfAccessService)||e.listOfAccessService.forEach(function(o){e.checkPrincAvailable&&(o.stateOfToggleButton=!0),t.pushObject(o.serviceName),a.pushObject(o.serviceName)}),Ember.isEmpty(e.insuranceServiceName)||(t.pushObject(e.insuranceServiceName),o.pushObject(e.insuranceServiceName),a.pushObject(e.insuranceServiceName)),s.push({deviceSerialNumber:e.linkedSmartCard,packageNames:t})}):e.checkAllDisconnectedServicesUnderSmartcard(),e.set("pkgNameListForAcceptReconnect",a),a.contains(GetClarityConstants("ManageViewingConstants","productConstants.reconnect.insurance_product").toString())&&a.length===o.length&&(e.set("disablePaymentAlreadyDoneAll",!0),e.set("isunfairAllcheckboxEnabledOrDisabled",!0),e.set("disableScheduleDisconnectionAll",!0),e.set("disableAllForDCC",!0)),{CustomerNumber:e.customerId,ProductDetails:s,scheduledReconnectionDate:"",reconnectionReason:""}.ProductDetails.length>0&&e.retrieveICCQuotesForMultipleSmartcard()},retrieveICCQuotesForMultipleSmartcard:function(){var e=this;e.getNewProcessID(),e.showBlockingBusyIndicator(),Komodo.Services.queryService.getJSON("/Quote/GetCustomerQuotes?customerId="+e.get("customerId")+"&quoteCurrentStatus=4&quoteCategory=0").done(function(t){if(!Ember.isEmpty(t)&&t.Quote.length>0){var a=[];if(t.Quote.forEach(function(e){"ProductReconnect"===e.SourceEvent&&a.push(e.Id.toString())}),a.length>0){Komodo.Controls.MessageBoxController.show(kl.value(e.localeReconnect+"quoteValidationMsg"),kl.value(e.localeReconnect+"quoteValidationMessage"),Komodo.Controls.MessageBoxYesNoButtons,e,"id123456","warning").response=function(t){"yes"===t?(e.getNewProcessID(),e.showBlockingBusyIndicator(),e.refreshAfterRejectQuote(a)):(e.currentReconnectModel.set("smartCards",void 0),e.currentReconnectModel.set("isReconnectPackageVisible",!1))}}}e.hideBusyIndicator()}).error(function(t){e.set("isQuoteRetrieved",!1);var a=JSON.stringify(t);Komodo.log("Notify Owner ajax call failed. Error: "+a),e.hideBusyIndicator(),e.setReconnectAllDisbled(!1),Komodo.Controls.MessageBoxController.show(kl.value(e.localeReconnect+"technicalErr"),a,Komodo.Controls.MessageBoxOkButtons,this,"authmbx","danger")})},getNewProcessID:function(){this.startNewProcess()},getIccQuoteOnSmartcard:function(e){for(var t=this,a=!1,o=!1,s=[],r=[],n=void 0,i=void 0,c=!0,l=0;l<e.length;l++)"DCC"===e[l]?(s.addObject(e[l]),a=!0):(r.addObject(e[l]),o=!0);o&&Komodo.Services.queryService.postJSON("/Quote/RetrieveICCQuotes?serialnumber="+t.currentReconnectModel.get("smartCards.Key"),{data:r,async:!1}).done(function(e){if(t.hideBusyIndicator(),e.length>0){t.set("isQuoteRetrieved",!0),t.setReconnectAllDisbled(!0),t.currentReconnectModel.set("isReconnectAll",!1);for(var a=0;a<e.length;a++)if(!Ember.isEmpty(e[a].Id)){e[a].LineItems.forEach(function(e){if(e.InvoiceText.toUpperCase()===GetClarityConstants("ManageViewingConstants","productConstants.reconnect.insurance_invoicetext").toString())return void(c=!1)}),i=e;break}}else t.set("isQuoteRetrieved",!1),t.setReconnectAllDisbled(!1),t.currentReconnectModel.set("checkPreAct",!1),t.get("suspendedFlagFor")&&t.setReconnectAllDisbled(!0)}).error(function(e){var a=JSON.stringify(e);t.hideBusyIndicator(),Komodo.log("Notify Owner ajax call failed. Error: "+a),t.set("isQuoteRetrieved",!1),t.setReconnectAllDisbled(!1),Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"technicalErr"),a,Komodo.Controls.MessageBoxOkButtons,this,"authmbx","danger")}),a&&!t.get("isMultipleQuote")&&c&&Komodo.Services.queryService.postJSON("/Quote/RetrieveICCQuotes?serialnumber="+t.currentReconnectModel.allHardwares[0].insuranceOnDeviceNumber,{data:s,async:!1}).done(function(e){if(t.hideBusyIndicator(),e.length>0){t.set("isQuoteRetrieved",!0),t.setReconnectAllDisbled(!0),t.currentReconnectModel.set("isReconnectAll",!1);for(var a=0;a<e.length;a++)if(!Ember.isEmpty(e[a].Id)){n=e,i=Ember.isEmpty(i)?n:i.concat(n);break}}else t.set("isQuoteRetrieved",!1),t.setReconnectAllDisbled(!1),t.currentReconnectModel.set("checkPreAct",!1),t.get("suspendedFlagFor")&&t.setReconnectAllDisbled(!0)}).error(function(e){var a=JSON.stringify(e);t.hideBusyIndicator(),Komodo.log("Notify Owner ajax call failed. Error: "+a),t.set("isQuoteRetrieved",!1),t.setReconnectAllDisbled(!1),Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"technicalErr"),a,Komodo.Controls.MessageBoxOkButtons,this,"authmbx","danger")}),Ember.isEmpty(i)||t.populateGrid(i,e,"","")},rejectQuote:function(e){var t=this;Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"rQuote"),kl.value(t.localeReconnect+"rejectQuoteMessage"),Komodo.Controls.MessageBoxYesNoButtons,t,"id123456","warning").response=function(a){if("yes"===a){t.getNewProcessID(),t.showBlockingBusyIndicator();for(var o=0;o<e.length;o++)Komodo.Services.queryService.getJSON("/Quote/RejectQuote?quoteId="+e[o].id).done(function(e){t.hideBusyIndicator(),!Ember.isEmpty(e)&&e&&(t.currentReconnectModel.set("suspendedData",[]),t.currentReconnectModel.set("unfairSelected",!1),t.currentReconnectModel.set("newQuoteData",[]),Ember.isEmpty(t.currentReconnectModel.smartCards)||(t.currentReconnectModel.set("isReconnectPackageVisible",!0),
t.currentReconnectModel.set("isReconnectAll",!1),t.currentReconnectModel.set("isScheduleDisconnection",!1),t.currentReconnectModel.set("isUnfairDisconnect",!1),t.currentReconnectModel.set("unfairDiscNotes",void 0),t.currentReconnectModel.set("sctemp","Smartcard / Device Number "+t.currentReconnectModel.smartCards.Value),t.set("checkSmartcardFilledAlready",!0),t.get("currentReconnectModel").set("isDataAvail",!1),t.currentReconnectModel.set("quoteDataAvailable",!1),t.setReconnectAllDisbled(!0),t.getFinancialData()))}).error(function(e){t.hideBusyIndicator();var a=JSON.stringify(e);Komodo.log("Notify Owner ajax call failed. Error: "+a)})}}},preActiveQuotesChanged:function(){var e=this,t=e.currentReconnectModel.get("allHardwares");if(e.get("isQuoteRetrieved"))return e.currentReconnectModel.set("disableAcceptReconnect",!e.currentReconnectModel.checkPreAct),void this.set("stateOfToggleButtonDCC",!0);if(e.currentReconnectModel.checkPreAct){e.setReconnectAllDisbled(!0),e.currentReconnectModel.set("isReconnectAll",!1),e.currentReconnectModel.set("dateReconnectAll",XDates.getformatedDateforDatepicker(new Date)),e.currentReconnectModel.set("reconnectDateEnDis",!0),e.set("checkPreActivateQuoteDays",!1);for(var a=0;a<t.length;a++){t[a].set("checkPreAct",e.currentReconnectModel.checkPreAct),t[a].set("princDate",void 0),t[a].set("PrincCalender",!0),t[a].set("stateOfToggleButtonOfPrincipleService",!0),t[a].set("stateOfToggleButtonPrinc",!0),t[a].set("isAllReconnect",!0),t[a].set("InsuranceCUD",void 0),t[a].set("DCCCalender",!0),t[a].set("stateOfToggleButtonOfInsuranceService",!0),t[a].set("stateOfToggleButtonDCC",!0);for(var o=t[a].listOfAddOnServices,s=t[a].listOfAccessService,r=0;r<o.length;r++)o[r].set("stateOfToggleButtonOfService",!0),o[r].set("stateOfToggleButton",!0),o[r].set("tempDate",void 0),o[r].set("stateOfToggleCalender",!0);for(var n=0;n<s.length;n++)s[n].set("stateOfToggleButtonOfService",!0),s[n].set("stateOfToggleButton",!0),s[n].set("tempDate",void 0),s[n].set("stateOfToggleCalender",!0)}e.get("currentReconnectModel").set("allHardwares",t)}else{if(e.currentReconnectModel.set("disableAcceptReconnect",!0),e.set("checkPreActivateQuoteDays",!0),e.setReconnectAllDisbled(!1),e.currentReconnectModel.set("reconnectDateEnDis",!0),e.currentReconnectModel.set("dateReconnectAll",void 0),e.currentReconnectModel.set("reconnectDateEnDis",!0),e.currentReconnectModel.set("isScheduleDisconnection",!1),e.set("scheduleDisconnectionDisable",!0),t.length>0)for(a=0;a<t.length;a++){t[a].set("checkPreAct",e.currentReconnectModel.checkPreAct),t[a].set("stateOfToggleButtonOfPrincipleService",!1),t[a].set("stateOfToggleButtonPrinc",!1),t[a].set("stateOfToggleButtonOfInsuranceService",!1),t[a].set("stateOfToggleButtonDCC",!1);var i=t[a].listOfAddOnServices,c=t[a].listOfAccessService;for(r=0;r<i.length;r++)i[r].set("stateOfToggleButtonOfService",!1),i[r].set("stateOfToggleButton",!1);for(r=0;r<c.length;r++)c[r].set("stateOfToggleButtonOfService",!1),c[r].set("stateOfToggleButton",!1);t[a].set("isAllReconnect",!1)}e.get("currentReconnectModel").set("allHardwares",t)}}.observes("currentReconnectModel.checkPreAct"),reconnectAllChanged:function(){var e=this,t=e.currentReconnectModel.get("allHardwares");if(e.currentReconnectModel.isReconnectAll){for(e.currentReconnectModel.set("reconnectDateEnDis",!(!e.currentReconnectModel.get("isUnfairDisconnect")&&!e.get("DPPReconnectionAllowed"))),e.currentReconnectModel.set("dateReconnectAll",e.get("DPPReconnectionAllowed")?XDates.getformatedDateforDatepicker(new Date):void 0),j=0;j<t.length;j++){t[j].set("checkPreAct",e.currentReconnectModel.checkPreAct),t[j].set("princDate",void 0),t[j].set("PrincCalender",!0),t[j].set("stateOfToggleButtonOfPrincipleService",!0),t[j].set("stateOfToggleButtonPrinc",!0),t[j].set("isAllReconnect",!0),t[j].set("stateOfToggleButtonOfInsuranceService",!0),t[j].set("stateOfToggleButtonDCC",!0),t[j].set("InsuranceCUD",void 0),t[j].set("DCCCalender",!0);var a=t[j].listOfAddOnServices,o=t[j].listOfAccessService;for(i=0;i<a.length;i++)a[i].set("stateOfToggleButtonOfService",!0),a[i].set("stateOfToggleButton",!0),a[i].set("tempDate",void 0),a[i].set("stateOfToggleCalender",!0);for(i=0;i<o.length;i++)o[i].set("stateOfToggleButtonOfService",!0),o[i].set("stateOfToggleButton",!0),o[i].set("tempDate",void 0),o[i].set("stateOfToggleCalender",!0)}e.get("currentReconnectModel").set("allHardwares",t)}else{if(e.currentReconnectModel.set("dateReconnectAll",void 0),e.currentReconnectModel.set("reconnectDateEnDis",!0),e.currentReconnectModel.set("isScheduleDisconnection",!1),e.set("scheduleDisconnectionDisable",!0),e.currentReconnectModel.get("unfairSelected")||e.currentReconnectModel.set("isUnfairDisconnect",!1),t.length>0)for(j=0;j<t.length;j++){t[j].set("checkPreAct",e.currentReconnectModel.checkPreAct),t[j].set("stateOfToggleButtonOfPrincipleService",!1),t[j].set("stateOfToggleButtonOfInsuranceService",!1),t[j].set("stateOfToggleButtonPrinc",!1),t[j].set("stateOfToggleButtonDCC",!1);var s=t[j].listOfAddOnServices,r=t[j].listOfAccessService;for(i=0;i<s.length;i++)s[i].set("stateOfToggleButtonOfService",!1),s[i].set("stateOfToggleButton",!!e.DPPReconnectionAllowed);for(i=0;i<r.length;i++)r[i].set("stateOfToggleButtonOfService",!1),r[i].set("stateOfToggleButton",!1);t[j].set("isAllReconnect",!1)}e.get("currentReconnectModel").set("allHardwares",t)}}.observes("currentReconnectModel.isReconnectAll"),scheduleDisonnectionChanged:function(){var e=this;if(e.currentReconnectModel.isScheduleDisconnection){e.currentReconnectModel.set("diconnectDateEnDis",!1);var t=e.currentReconnectModel.get("allHardwares");if(t.length>0){var a,o=t[0].listOfAddOnServices,s=t[0].listOfAccessService,r=[];if("FromHolidayHome"!==e.navigationFrom&&r.pushObject(e.getDateObjectFromString(t[0].principalServiceChargedUntilDate)),e.currentReconnectModel.get("dateReconnectAll"))r.pushObject(e.currentReconnectModel.get("dateReconnectAll"));else{for(r.pushObject(Ember.isEmpty(t[0].princDate)?new Date:t[0].princDate),a=0;a<o.length;a++)void 0!==o[a].tempDate&&r.push(o[a].tempDate);for(a=0;a<s.length;a++)void 0!==s[a].tempDate&&r.push(s[a].tempDate)}var n=new Date(e.getHighestDate(r));n.setHours(0,0,0,0),n.setDate(n.getDate()+1),e.set("validators.dateScheduleDisconnectionValidator.options.minDate",n)}}else e.currentReconnectModel.set("dateScheduleDisconnection",void 0),e.currentReconnectModel.set("diconnectDateEnDis",!0)}.observes("currentReconnectModel.isScheduleDisconnection"),isUnfairDisconnectChanged:function(){var e=this;if(e.currentReconnectModel.isUnfairDisconnect){e.currentReconnectModel.set("dateReconnectAll",void 0),e.currentReconnectModel.set("reconnectDateEnDis",!0);var t=e.currentReconnectModel.get("allHardwares");for(j=0;j<t.length;j++){t[j].set("princDate",void 0),t[j].set("PrincCalender",!0),t[j].set("InsuranceCUD",void 0),t[j].set("DCCCalender",!0),t[j].set("stateOfToggleButtonOfInsuranceService",!1),t[j].set("stateOfToggleButtonDCC",!0);var a=t[j].listOfAddOnServices,o=t[j].listOfAccessService;for(i=0;i<a.length;i++)a[i].set("tempDate",void 0),a[i].set("stateOfToggleCalender",!0);for(i=0;i<o.length;i++)o[i].set("tempDate",void 0),o[i].set("stateOfToggleCalender",!0)}e.currentReconnectModel.set("showUnfairDisnotes",!0),e.currentReconnectModel.set("unfairDiscNotes",void 0),e.registerValidator(e.get("currentReconnectModel"),"unfairDiscNotes",{type:"string",isRequired:!0,maxLength:1e3,displayName:kl.value(this.localeReconnect+"notes")})}else{if(e.currentReconnectModel.isReconnectAll)e.reconnectAllChanged();else if(!e.currentReconnectModel.checkPreAct){var t=e.currentReconnectModel.get("allHardwares");for(j=0;j<t.length;j++){t[j].set("princDate",void 0),t[j].set("PrincCalender",!1),t[j].set("PrincCalender",!t[j].get("stateOfToggleButtonOfPrincipleService")),t[j].set("stateOfToggleButtonOfInsuranceService",!1),t[j].set("stateOfToggleButtonDCC",!1);var a=t[j].listOfAddOnServices,o=t[j].listOfAccessService;for(i=0;i<a.length;i++)a[i].get("stateOfToggleButtonOfService")&&(a[i].set("tempDate",void 0),a[i].set("stateOfToggleCalender",!1));for(i=0;i<o.length;i++)o[i].set("stateOfToggleButtonOfService")&&(o[i].set("tempDate",void 0),o[i].set("stateOfToggleCalender",!1))}}e.currentReconnectModel.set("showUnfairDisnotes",!1),e.currentReconnectModel.set("unfairDiscNotes",void 0),e.deregisterValidator("unfairDiscNotesValidator")}}.observes("currentReconnectModel.isUnfairDisconnect"),getHighestDate:function(e){if(!Ember.isEmpty(e)){for(var t=e[0],a=0;a<e.length;a++)1===XDates.compare(e[a],t)&&(t=e[a]);if(!Ember.isEmpty(t))return t}return null},publishCreateActivityReconnectFailure:function(e,t){var a=this;Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(o){var s,r=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),n=r.getCustomerIdToRetrieveData(),i=Komodo.Models.CreateInteraction.create(),c=Komodo.Models.ListOfCaseData.create(),l=Komodo.Models.Case.create();l.set("InteracteeName",Komodo.Services.securityService.session.domainUserName),l.set("InteractionLocation",o.data.countryDescription),l.set("InteractionMedium","1"),l.set("CustomerUID",n),l.set("Category","4"),l.set("Status","1"),l.set("SubCategory","1"),"|"===e.substring(0,1)?l.set("Outcome","127"):l.set("Outcome","128"),s=e;var d=Komodo.Models.CaseData.create(),u=Komodo.canonicalFacadeFactory(d,["CaseDataValueUri","Value"]);u.set("CaseDataValueUri","Reconnect date"),u.set("Value",t),c.CaseData.push(d),l.set("ListOfCaseData",c),l.set("Notes",s);var h=Komodo.canonicalFacadeFactory(i,["Country","Case"]);h.set("Country",a.get("loggedInCountryId")),h.set("Case",l),i.Country=o.data.countryId,a.publishRequestOnBus(i,"CreateInteraction","v1")})},publishCreateActivityReconnect:function(e){var t=this;Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(a){var o,s=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),r=s.getCustomerIdToRetrieveData(),n=Komodo.Models.CreateInteraction.create(),i=Komodo.Models.Case.create();o="Note:"+e,i.set("InteracteeName",Komodo.Services.securityService.session.domainUserName),i.set("InteractionLocation",a.data.countryDescription),i.set("InteractionMedium","1"),i.set("CustomerUID",r),i.set("Category","6"),i.set("SubCategory","1"),i.set("Status","1"),i.set("Outcome","44"),i.set("Notes",o);var c=Komodo.canonicalFacadeFactory(n,["Country","Case"]);c.set("Country",a.data.countryId),c.set("Case",i),t.publishRequestOnBus(n,"CreateInteraction","v1")})},actionSuspendReconnect:function(e){var t=this,a=!1,o=t.get("currentReconnectModel.allHardwares"),s="";if(!Ember.isEmpty(o)){for(var r=0;r<o.length;r++){if(!Ember.isEmpty(o[r].principalServiceName)){s=o[r].principalServiceName,a=!0;break}if(a)break}if(a)if(e.serviceName===s){var n=Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"acceptReconnect"),kl.value(t.localeReconnect+"acceptSuspendedServiceMessage"),Komodo.Controls.MessageBoxYesNoButtons,t);n.response=function(a){"yes"===a&&(t.getNewProcessID(),t.showBlockingBusyIndicator(),Ember.isEmpty(e.disconnectionDate)?t.performSuspendedReconnection(e.serviceName,e.reconnectionDate,void 0):t.performSuspendedReconnection(e.serviceName,e.reconnectionDate,e.disconnectionDate))}}else Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"acceptReconnect"),"Primary Service has to be selected before accepting reconnection for suspended Add-on/Access service",Komodo.Controls.MessageBoxOkButtons,this,"authmbx","danger");else{var n=Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"acceptReconnect"),kl.value(t.localeReconnect+"confirmReconnect"),Komodo.Controls.MessageBoxYesNoButtons,t);n.response=function(a){"yes"===a&&(t.getNewProcessID(),t.showBlockingBusyIndicator(),Ember.isEmpty(e.disconnectionDate)?t.performSuspendedReconnection(e.serviceName,e.reconnectionDate,void 0):t.performSuspendedReconnection(e.serviceName,e.reconnectionDate,e.disconnectionDate))}}}},performSuspendedReconnection:function(e,t,a){var o=this,s=o.get("reasonForSuspendToReconnection"),r=[],n=[];n.push(e);var i=t;o.redirectDate=i,i.toDateString()===(new Date).toDateString()?r.push({deviceSerialNumber:o.currentReconnectModel.get("smartCards.Key"),packageNames:n,scheduledReconnectionDate:"",reconnectionReason:s}):(i=i.toLocaleDateString("sv-SE"),r.push({deviceSerialNumber:o.currentReconnectModel.get("smartCards.Key"),packageNames:n,scheduledReconnectionDate:i,reconnectionReason:s})),Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo),Komodo.Services.queryService.postJSON("/Device/ReconnectPackage",{data:r}).done(function(e){if(o.hideBusyIndicator(),e.length>0){for(var t=!1,s=0;s<e.length;s++)if(!Ember.isEmpty(e[s]))if("Success"!==e[s]){t=!0;var r=e[s].split("|");"~"===e[s].substring(0,1)?r.length>1&&o.publishCreateActivityReconnectFailure(r[1],r[0].substring(1,r[0].length)):r.length>1&&o.publishCreateActivityReconnectFailure(r[1],r[0])}else if(o.currentReconnectModel.set("dateReconnectAll",""),o.currentReconnectModel.set("refreshQuoteCheck",!1),!Ember.isEmpty(a)){var i=new Date(a).toLocaleDateString("sv-SE");o.set("myTempPackageNames",n),o.set("myTempDisDate",i);for(var c=o.get("ReasonForDisconnection"),l=[],d=0;d<n.length;d++){var u=[];Ember.isEmpty(n[d].Value)?u.push(n[d]):u.push(n[d].Value),l.push({DeviceSerialNumber:o.currentReconnectModel.get("smartCards").Key,PackageNames:u,ScheduledDisconnectionDate:i,DisconnectionReason:c})}}if(t)Komodo.Controls.MessageBoxController.show(kl.value(o.localeReconnect+"technicalErr"),kl.value(o.localeReconnect+"errorOnSuspendedReconnection"),Komodo.Controls.MessageBoxOkButtons,o,"authmbx","danger");else{var h="",m="";o.redirectDate.toDateString()===(new Date).toDateString()?(h="/manageViewing",m=kl.value(o.localeReconnect+"scheduleSuccessfully")):(h="/scheduledChanges",m=kl.value(o.localeReconnect+"schedulemsgSucessfully"));Komodo.Controls.MessageBoxController.show(kl.value(o.localeReconnect+"acceptReconnect"),m,Komodo.Controls.MessageBoxOkButtons,o,"authmbx2","success").response=function(e){Ember.isEmpty(a)||("FromHolidayHome"===o.navigationFrom?o.suspendPackages(l):(o.set("sharedObject",Komodo.Application.ManageViewingSharedObjectController.create()),o.get("sharedObject").disconnectPackages(l,"Reconnect"))),o.transitionToRoute(h)}}}}).error(function(e){var t=JSON.stringify(e);Komodo.log("Notify Owner ajax call failed. Error: "+t),o.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(o.localeReconnect+"technicalErr"),t,Komodo.Controls.MessageBoxOkButtons,o,"authmbx","danger")})},showReconnectResultMessage:function(e,t,a,o){var s,r=this,n=new Date,i="";r.hideBusyIndicator();for(var c=0;c<e.length;c++)if("DCC"!==t[c].Value)if(new Date(e[c]).setHours(0,0,0,0)>n.setHours(0,0,0,0)){var l=new Date(e[c]).toLocaleDateString("sv-SE");s=kl.value(r.localeReconnect+"reconnectionScheduleSuccess",{serviceName:t[c].Value,ReconnectDate:l})+"<br />",i+=s}else s=kl.value(r.localeReconnect+"reconnectionSuccess",{serviceName:t[c].Value})+"<br />",i+=s;if(""!==i){Komodo.Controls.MessageBoxController.show(kl.value(r.localeReconnect+"success"),i,Komodo.Controls.MessageBoxOkButton,r,"id5446676","success").response=function(e){Ember.isEmpty(a)?r.currentReconnectModel.get("dccFlag")||r.transitionToRoute("/manageViewing"):a.length>0&&r.get("sharedObject").disconnectPackages(o,"Reconnect")}}},performDPPReconnection:function(e){var t=this,a=[],o=Ember.A(),s="",r="";Ember.isEmpty(e.principalServiceName)||a.push(e.principalServiceName),Ember.isEmpty(e.listOfAddOnServices)||e.listOfAddOnServices.forEach(function(e){a.push(e.serviceName)}),Ember.isEmpty(e.listOfAccessServices)||e.listOfAddOnServices.forEach(function(e){a.push(e.serviceName)}),o.push({deviceSerialNumber:t.currentReconnectModel.get("smartCards.Key"),packageNames:a});var n={CustomerNumber:t.customerId,ProductDetails:o,scheduledReconnectionDate:(new Date).toLocaleDateString("sv-SE"),reconnectionReason:t.get("reasonForDPPReconnection")};Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"acceptReconnect"),kl.value(t.localeReconnect+"acceptSuspendedServiceMessage"),Komodo.Controls.MessageBoxYesNoButtons,t).response=function(e){"yes"===e&&(t.getNewProcessID(),t.showBlockingBusyIndicator(),Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo),Komodo.Services.queryService.postJSON("/Device/ReconnectMultipleSmartcards",{data:n}).done(function(e){if(t.hideBusyIndicator(),!Ember.isEmpty(e)){for(var a=0;a<e.ProductDetails.length;a++)Ember.isEmpty(e.ResponseMessage)||("Success"!==e.ResponseMessage?(r+=kl.value(t.localeReconnect+"reconnectfaild")+e.ProductDetails[a].DeviceSerialNumber+"<br/>",t.publishCreateActivityReconnectFailure(r,(new Date).toLocaleDateString("sv-SE"))):(s+=kl.value(t.localeReconnect+"reconnectSucess")+e.ProductDetails[a].DeviceSerialNumber+"<br/>",t.publishCreateActivityReconnectFailure(s,(new Date).toLocaleDateString("sv-SE"))));Ember.isEmpty(s)||(Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"acceptReconnect"),s,Komodo.Controls.MessageBoxOkButtons,t,"authmbx2","success").response=function(){t.transitionToRoute("/manageViewing")}),Ember.isEmpty(r)||Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"reconnectTitle"),kl.value(t.localeReconnect+"acceptReconnectFailed")+e.ResponseMessage,Komodo.Controls.MessageBoxOkButtons,t,"authmbx","danger")}}).error(function(e){var a=JSON.stringify(e);Komodo.log("Notify Owner ajax call failed. Error: "+a),t.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"technicalErr"),a,Komodo.Controls.MessageBoxOkButtons,t,"authmbx","danger")}))}},setReconnectAllDisbled:function(e){var t=this;Ember.isEmpty(t.currentReconnectModel)||t.currentReconnectModel.set("checkQuoteThere",e)},toggleButtonChanged:function(e){var t=this;t.currentReconnectModel.set("isScheduleDisconnection",!1),t.DPPReconnectionAllowed&&!t.currentReconnectModel.isReconnectAll&&($.grep(t.currentReconnectModel.get("allHardwares"),function(e){return e.linkedSmartCard===t.currentReconnectModel.smartCards.Key&&e.stateOfToggleButtonOfPrincipleService}).length>0?(t.currentReconnectModel.set("checkQuoteThere",!0),t.currentReconnectModel.get("allHardwares").forEach(function(e){e.set("PrincCalender",!0),e.set("isReqControlEnabledOrDisconnectOnPric",!0),e.set("princDate",XDates.getformatedDateforDatepicker(new Date)),e.listOfAddOnServices.forEach(function(e){e.set("stateOfToggleButton",!0),e.set("stateOfToggleButtonOfService",!0),e.set("stateOfToggleCalender",!0),e.set("tempDate",XDates.getformatedDateforDatepicker(new Date))}),e.listOfAccessService.forEach(function(e){e.set("stateOfToggleButton",!0),addon.set("stateOfToggleButtonOfService",!0),e.set("stateOfToggleCalender",!0),e.set("tempDate",XDates.getformatedDateforDatepicker(new Date))})})):(t.currentReconnectModel.set("checkQuoteThere",!1),t.currentReconnectModel.set("isReqControlEnabledOnDisconnect",!0),t.currentReconnectModel.get("allHardwares").forEach(function(e){e.set("princDate",void 0),e.listOfAddOnServices.forEach(function(e){e.set("stateOfToggleButtonOfService",!1),e.set("tempDate",void 0)}),e.listOfAccessService.forEach(function(e){e.set("stateOfToggleButtonOfService",!1),e.set("tempDate",void 0)})}))),t.currentReconnectModel.get("isMultipleReconnect")&&t.currentReconnectModel.get("allHardwares").forEach(function(e){e.checkPrincAvailable&&(e.listOfAddOnServices.forEach(function(t){e.stateOfToggleButtonOfPrincipleService||t.set("stateOfToggleButtonOfService",!1),t.set("stateOfToggleButton",!e.stateOfToggleButtonOfPrincipleService)}),e.listOfAccessService.forEach(function(t){e.stateOfToggleButtonOfPrincipleService||t.set("stateOfToggleButtonOfService",!1),t.set("stateOfToggleButton",!e.stateOfToggleButtonOfPrincipleService)}))})}.observes("currentReconnectModel.allHardwares.@each.stateOfToggleButtonOfPrincipleService"),refreshQuote:function(e){var t=this;t.currentReconnectModel.set("newQuoteData",[]),Ember.isEmpty(t.currentReconnectModel.smartCards)||("ALL"!==t.currentReconnectModel.get("smartCards.Key").toUpperCase()?(t.currentReconnectModel.set("isReconnectPackageVisible",!0),t.currentReconnectModel.set("isReconnectAll",!1),t.currentReconnectModel.set("isScheduleDisconnection",!1),t.currentReconnectModel.set("sctemp","Smartcard / Device Number "+t.currentReconnectModel.smartCards.Value),t.set("checkSmartcardFilledAlready",!0),t.get("currentReconnectModel").set("isDataAvail",!1),t.currentReconnectModel.set("quoteDataAvailable",!1),t.setReconnectAllDisbled(!0),t.getFinancialData()):(t.currentReconnectModel.set("isReconnectPackageVisible",!0),t.currentReconnectModel.set("isMultipleReconnect",!0),t.get("currentReconnectModel").set("isDataAvail",!1),t.currentReconnectModel.set("quoteDataAvailable",!1),t.showBlockingBusyIndicator(),Komodo.Services.queryService.getJSON("/Quote/GetCustomerQuotes?customerId="+t.get("customerId")+"&quoteCurrentStatus=4&quoteCategory=0").done(function(e){t.hideBusyIndicator(),!Ember.isEmpty(e)&&e.Quote.length>0&&e.Quote.forEach(function(a){"ProductReconnect"===a.SourceEvent&&(t.populateGridforMultipleSmartcard(e.Quote),t.set("disableRefreshAll",!0))})}).error(function(e){t.set("isQuoteRetrieved",!1);var a=JSON.stringify(e);Komodo.log("Notify Owner ajax call failed. Error: "+a),t.hideBusyIndicator(),t.setReconnectAllDisbled(!1),Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"technicalErr"),a,Komodo.Controls.MessageBoxOkButtons,this,"authmbx","danger")})))},getFormattedDate:function(e){var t="";if("0001-01-01T00:00:00"===e)return"";if(e){var a=e.split("T"),o=new Date(a[0]),s=o.getDate();s=s<10?"0"+s.toString():s.toString();var r=o.getMonth()+1;r=r<10?"0"+r.toString():r.toString();t=s+"-"+r+"-"+o.getFullYear()}return t},getDateFromJavascriptDate:function(e){function t(e){var t=e.toString();return t.length<2?"0"+t:t}var a=e.getFullYear(),o=t(e.getMonth()+1);return t(e.getDate())+"-"+o+"-"+a},getDCCQuotes:function(e){var t=this,a=[];return e.forEach(function(e){e.lineItems&&e.lineItems.length>0&&e.lineItems.forEach(function(o){if(t.currentReconnectModel.insuranceProductIds.contains(o.entityId.toString()))return void(a.contains(e)||a.push(e))})}),a},getNonDCCQuotes:function(e){var t=this,a=[];return e.forEach(function(e){e.lineItems&&e.lineItems.length>0&&e.lineItems.forEach(function(o){if(!t.currentReconnectModel.insuranceProductIds.contains(o.entityId.toString()))return void(a.contains(e)||a.push(e))})}),a},setDefaultsforReconnectAll:function(){var e=this;e.set("paymentAlreadyDoneAll",!1),e.set("disablePaymentAlreadyDoneAll",!1),e.set("disableNoOfDays",!0),e.set("reconnectAllToggle",!1),e.set("disableReconnectAllToggle",!1),e.set("bindReconnectAllDate",void 0),e.set("disableReconnectAllDate",!0),e.set("isScheduleDisconnectionAll",!1),e.set("disableScheduleDisconnectionAll",!0),e.set("isUnfairAllDisconnect",!1),e.set("isunfairAllcheckboxEnabledOrDisabled",!0),e.set("dateScheduleDisconnectionAll",void 0),e.set("disableDateScheduleDisconnectionAll",!0),e.set("disableSubmitReconnectAll",!0)},paymentAlreadyDoneAllChecked:function(){var e=this;if(e.get("isQuoteRetrieved"))return e.currentReconnectModel.set("disableAcceptReconnect",!e.paymentAlreadyDoneAll),void e.set("disableNoOfDays",!e.paymentAlreadyDoneAll);e.set("disableNoOfDays",!e.get("paymentAlreadyDoneAll")),e.set("reconnectAllToggle",!!e.get("paymentAlreadyDoneAll")),e.set("disableReconnectAllToggle",!!e.get("paymentAlreadyDoneAll")),e.set("disableReconnectAllDate",!0),e.set("bindReconnectAllDate",e.get("paymentAlreadyDoneAll")?XDates.getformatedDateforDatepicker(new Date):void 0),e.set("disableScheduleDisconnectionAll",!e.get("paymentAlreadyDoneAll")),e.set("isunfairAllcheckboxEnabledOrDisabled",!e.get("paymentAlreadyDoneAll")),e.set("isScheduleDisconnectionAll",!1),e.set("disableSubmitReconnectAll",!e.get("paymentAlreadyDoneAll"))}.observes("paymentAlreadyDoneAll"),generateQuoteforReconnect:function(e){var t=this,a=[],o=[],s=[],r=!1;if(t.currentReconnectModel.isReconnectAll)if(Ember.isEmpty(t.currentReconnectModel.get("dateReconnectAll"))){var n=new Date;if(Ember.isEmpty(t.currentReconnectModel.get("isScheduleDisconnection"))){if(e.checkPrincAvailable&&(a.push({Key:e.principalServiceStatus,Value:e.principalServiceName}),o.pushObject(n)),e.listOfAddOnServices&&e.listOfAddOnServices.length>0)for(var i=0;i<e.listOfAddOnServices.length;i++)a.push({Key:e.listOfAddOnServices[i].serviceStatus,Value:e.listOfAddOnServices[i].serviceName}),o.pushObject(n);if(e.listOfAccessService&&e.listOfAccessService.length>0)for(var c=0;c<e.listOfAccessService.length;c++)a.push({Key:e.listOfAccessService[c].serviceStatus,Value:e.listOfAccessService[c].serviceName}),o.pushObject(n);e.insuranceServiceStatus&&e.stateOfToggleButtonOfInsuranceService&&(a.push({Key:e.insuranceServiceDiscon,Value:e.insuranceServiceName}),o.pushObject(n)),r=!0}else if(t.currentReconnectModel.get("isScheduleDisconnection")){if(Ember.isEmpty(t.currentReconnectModel.get("dateScheduleDisconnection")))return void Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"scheduleDisconnection"),kl.value(t.localeReconnect+"scheduleDisconnectionReq"),Komodo.Controls.MessageBoxOkButtons,t,"authmbx3","danger");var l=new Date(t.currentReconnectModel.get("dateScheduleDisconnection"));if(l<=n)return void Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"scheduleDisconnection"),kl.value(t.localeReconnect+"scheduleDisconnectionValid"),null,t,"id123456","warning");if(e.checkPrincAvailable&&(a.push({Key:e.principalServiceStatus,Value:e.principalServiceName}),o.pushObject(n),s.pushObject(l)),e.listOfAddOnServices&&e.listOfAddOnServices.length>0)for(var d=0;d<e.listOfAddOnServices.length;d++)e.listOfAddOnServices[d].stateOfToggleButtonOfService&&(a.push({Key:e.listOfAddOnServices[d].serviceStatus,Value:e.listOfAddOnServices[d].serviceName}),o.pushObject(n),s.pushObject(l));if(e.listOfAccessService&&e.listOfAccessService.length>0)for(var u=0;u<e.listOfAccessService.length;u++)e.listOfAccessService[u].stateOfToggleButtonOfService&&(a.push({Key:e.listOfAccessService[u].serviceStatus,Value:e.listOfAccessService[u].serviceName}),o.pushObject(n),s.pushObject(l));e.insuranceServiceStatus&&e.stateOfToggleButtonOfInsuranceService&&(a.push({Key:e.insuranceServiceDiscon,Value:e.insuranceServiceName}),o.pushObject(n),s.pushObject(l)),r=!0}else{if(e.checkPrincAvailable&&(a.push({Key:e.principalServiceStatus,Value:e.principalServiceName}),o.pushObject(n)),e.listOfAddOnServices&&e.listOfAddOnServices.length>0)for(var h=0;h<e.listOfAddOnServices.length;h++)e.listOfAddOnServices[h].stateOfToggleButtonOfService&&(a.push({Key:e.listOfAddOnServices[h].serviceStatus,Value:e.listOfAddOnServices[h].serviceName}),o.pushObject(n));if(e.listOfAccessService&&e.listOfAccessService.length>0)for(var m=0;m<e.listOfAccessService.length;m++)e.listOfAccessService[m].stateOfToggleButtonOfService&&(a.push({Key:e.listOfAccessService[m].serviceStatus,Value:e.listOfAccessService[m].serviceName}),o.pushObject(n));e.insuranceServiceStatus&&e.stateOfToggleButtonOfInsuranceService&&(a.push({Key:e.insuranceServiceDiscon,Value:e.insuranceServiceName}),o.pushObject(n)),r=!0}}else{var g=new Date(t.currentReconnectModel.get("dateReconnectAll"));if(Ember.isEmpty(t.currentReconnectModel.get("isScheduleDisconnection"))){if(e.checkPrincAvailable&&(a.push({Key:e.principalServiceStatus,Value:e.principalServiceName}),o.pushObject(g)),e.listOfAddOnServices&&e.listOfAddOnServices.length>0)for(var p=0;p<e.listOfAddOnServices.length;p++)e.listOfAddOnServices[p].stateOfToggleButtonOfService&&(a.push({Key:e.listOfAddOnServices[p].serviceStatus,Value:e.listOfAddOnServices[p].serviceName}),o.pushObject(g));if(e.listOfAccessService&&e.listOfAccessService.length>0)for(var v=0;v<e.listOfAccessService.length;v++)e.listOfAccessService[v].stateOfToggleButtonOfService&&(a.push({Key:e.listOfAccessService[v].serviceStatus,Value:e.listOfAccessService[v].serviceName}),o.pushObject(g));e.insuranceServiceStatus&&e.stateOfToggleButtonOfInsuranceService&&(a.push({Key:e.insuranceServiceDiscon,Value:e.insuranceServiceName}),o.pushObject(g)),r=!0}else if(t.currentReconnectModel.get("isScheduleDisconnection")){if(Ember.isEmpty(t.currentReconnectModel.get("dateScheduleDisconnection")))return void Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"scheduleDisconnection"),kl.value(t.localeReconnect+"scheduleDisconnectionReq"),Komodo.Controls.MessageBoxOkButtons,t,"authmbx3","danger");var f=new Date(t.currentReconnectModel.get("dateScheduleDisconnection"));if(f<=g)return void Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"scheduleDisconnection"),kl.value(t.localeReconnect+"scheduleDisconnectionValid"),null,t,"id123456","warning");if(e.checkPrincAvailable&&(a.push({Key:e.principalServiceStatus,Value:e.principalServiceName}),o.pushObject(g),s.pushObject(f)),e.listOfAddOnServices&&e.listOfAddOnServices.length>0)for(var b=0;b<e.listOfAddOnServices.length;b++)e.listOfAddOnServices[b].stateOfToggleButtonOfService&&(a.push({Key:e.listOfAddOnServices[b].serviceStatus,Value:e.listOfAddOnServices[b].serviceName}),o.pushObject(g),s.pushObject(f));if(e.listOfAccessService&&e.listOfAccessService.length>0)for(var C=0;C<e.listOfAccessService.length;C++)e.listOfAccessService[C].stateOfToggleButtonOfService&&(a.push({Key:e.listOfAccessService[C].serviceStatus,Value:e.listOfAccessService[C].serviceName}),o.pushObject(g),s.pushObject(f));e.insuranceServiceStatus&&e.stateOfToggleButtonOfInsuranceService&&(a.push({Key:e.insuranceServiceDiscon,Value:e.insuranceServiceName}),o.pushObject(g),s.pushObject(f)),r=!0}else{if(e.checkPrincAvailable&&(a.push({Key:e.principalServiceStatus,Value:e.principalServiceName}),o.pushObject(g)),e.listOfAddOnServices&&e.listOfAddOnServices.length>0)for(var S=0;S<e.listOfAddOnServices.length;S++)e.listOfAddOnServices[S].stateOfToggleButtonOfService&&(a.push({Key:e.listOfAddOnServices[S].serviceStatus,Value:e.listOfAddOnServices[S].serviceName}),o.pushObject(g));if(e.listOfAccessService&&e.listOfAccessService.length>0)for(var D=0;D<e.listOfAccessService.length;D++)e.listOfAccessService[D].stateOfToggleButtonOfService&&(a.push({Key:e.listOfAccessService[D].serviceStatus,Value:e.listOfAccessService[D].serviceName}),o.pushObject(g));e.insuranceServiceStatus&&e.stateOfToggleButtonOfInsuranceService&&(a.push({Key:e.insuranceServiceDiscon,Value:e.insuranceServiceName}),o.pushObject(g)),r=!0}}else{var y="0",w=e.principalServiceName;if(e.stateOfToggleButtonOfPrincipleService&&(a.push({Key:e.principalServiceStatus,Value:w}),Ember.isEmpty(e.princDate)?o.pushObject(new Date):o.pushObject(e.princDate)),e.listOfAddOnServices&&e.listOfAddOnServices.length>0)for(var I=0;I<e.listOfAddOnServices.length;I++)e.listOfAddOnServices[I].stateOfToggleButtonOfService&&(a.push({Key:e.listOfAddOnServices[I].serviceStatus,Value:e.listOfAddOnServices[I].serviceName}),Ember.isEmpty(e.listOfAddOnServices[I].tempDate)?o.pushObject(new Date):o.pushObject(e.listOfAddOnServices[I].tempDate),y="1");if(e.listOfAccessService&&e.listOfAccessService.length>0)for(var x=0;x<e.listOfAccessService.length;x++)e.listOfAccessService[x].stateOfToggleButtonOfService&&(a.push({Key:e.listOfAccessService[x].serviceStatus,Value:e.listOfAccessService[x].serviceName}),Ember.isEmpty(e.listOfAccessService[x].tempDate)?o.pushObject(new Date):o.pushObject(e.listOfAccessService[x].tempDate),y="1");if(e.insuranceServiceStatus&&e.stateOfToggleButtonOfInsuranceService&&(a.push({Key:e.insuranceServiceDiscon,Value:e.insuranceServiceName}),Ember.isEmpty(e.InsuranceCUD)?o.pushObject(new Date):o.pushObject(e.InsuranceCUD),r=!0),Ember.isEmpty(w))if("0"===y){
if(!t.currentReconnectModel.isReconnectAll&&!Ember.isEmpty(w)){var M=!1,g=new Date;if(Ember.isEmpty(e.get("princDate"))||(g=new Date(e.get("princDate"))),e.listOfAddOnServices&&e.listOfAddOnServices.length>0)for(var T=0;T<e.listOfAddOnServices.length;T++)if(e.listOfAddOnServices[T].stateOfToggleButtonOfService&&(!Ember.isEmpty(e.listOfAddOnServices[T].tempDate)&&g<new Date(e.listOfAddOnServices[T].tempDate)||g<new Date)){M=!0;break}if(e.listOfAccessService&&e.listOfAccessService.length>0)for(var N=0;N<e.listOfAccessService.length;N++)if(e.listOfAccessService[N].stateOfToggleButtonOfService&&(!Ember.isEmpty(e.listOfAccessService[N].tempDate)&&g<new Date(e.listOfAccessService[N].tempDate)||g<new Date)){M=!0;break}if(M)return void Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"principalService"),kl.value(t.localeReconnect+"prDateGr"),Komodo.Controls.MessageBoxOkButtons,t,"authmbx3","danger");r=!0}}else{if(e.checkPrincAvailable){for(var P=!1,S=0;S<t.currentReconnectModel.get("newQuoteData").length;S++)for(var O=0;O<t.currentReconnectModel.get("newQuoteData")[S].lineItems.length;O++)t.that.currentReconnectModel.get("newQuoteData")[S].lineItems[O].entityId===t.currentReconnectModel.get("allHardwares")[0].principalProductId&&(P=!0);if(!P)return void Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"principalService"),kl.value(t.localeReconnect+"principalServiceValid"),Komodo.Controls.MessageBoxOkButtons,t,"authmbx3","danger");r=!0}else r=!0;if(!t.currentReconnectModel.isReconnectAll&&t.currentReconnectModel.get("isScheduleDisconnection")){var B=new Date,R=!1;if(Ember.isEmpty(t.currentReconnectModel.get("dateScheduleDisconnection")))Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"scheduleDisconnection"),kl.value(t.localeReconnect+"scheduleDisconnectionReq"),Komodo.Controls.MessageBoxOkButtons,t,"authmbx3","danger"),r=!1;else{if(B=new Date(t.currentReconnectModel.get("dateScheduleDisconnection")),e.listOfAddOnServices&&e.listOfAddOnServices.length>0)for(var k=0;k<e.listOfAddOnServices.length;k++)if(e.listOfAddOnServices[k].stateOfToggleButtonOfService&&(!Ember.isEmpty(e.listOfAddOnServices[k].tempDate)&&B<=new Date(e.listOfAddOnServices[k].tempDate)||B<=new Date)){R=!0;break}if(e.listOfAccessService&&e.listOfAccessService.length>0)for(var A=0;A<e.listOfAccessService.length;A++)if(e.listOfAccessService[A].stateOfToggleButtonOfService&&(!Ember.isEmpty(e.listOfAccessService[A].tempDate)&&B<=new Date(e.listOfAccessService[A].tempDate)||B<=new Date)){R=!0;break}R?(r=!1,Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"scheduleDisconnection"),kl.value(t.localeReconnect+"scheduleDisconnectionValid"),Komodo.Controls.MessageBoxOkButtons,t,"authmbx3","danger")):(s.pushObject(t.currentReconnectModel.get("dateScheduleDisconnection")),r=!0)}}else{var K=new Date;Ember.isEmpty(t.currentReconnectModel.get("dateReconnectAll"))||(K=new Date(t.currentReconnectModel.get("dateReconnectAll"))),t.currentReconnectModel.get("isScheduleDisconnection")&&(Ember.isEmpty(t.currentReconnectModel.get("dateScheduleDisconnection"))?(Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"scheduleDisconnection"),kl.value(t.localeReconnect+"scheduleDisconnectionReq"),Komodo.Controls.MessageBoxOkButtons,t,"authmbx3","danger"),r=!1):K>new Date(t.currentReconnectModel.get("dateScheduleDisconnection"))?(s.pushObject(t.currentReconnectModel.get("dateScheduleDisconnection")),r=!0):(Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"scheduleDisconnection"),kl.value(t.localeReconnect+"scheduleDisconnectionValid"),Komodo.Controls.MessageBoxOkButtons,t,"authmbx3","danger"),r=!1))}}else{var G=new Date;if(Ember.isEmpty(e.get("princDate")))if(Ember.isEmpty(t.currentReconnectModel.get("isScheduleDisconnection")))r=!0;else if(t.currentReconnectModel.get("isScheduleDisconnection")){if(Ember.isEmpty(t.currentReconnectModel.get("dateScheduleDisconnection")))return void Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"scheduleDisconnection"),kl.value(t.localeReconnect+"scheduleDisconnectionReq"),Komodo.Controls.MessageBoxOkButtons,t,"authmbx3","danger");var g=new Date,f=new Date(t.currentReconnectModel.get("dateScheduleDisconnection"));if(f<=g)return void Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"scheduleDisconnection"),kl.value(t.localeReconnect+"scheduleDisconnectionValid"),null,t,"id123456","warning");if(r=!0,s.pushObject(f),e.listOfAddOnServices&&e.listOfAddOnServices.length>0)for(var L=0;L<e.listOfAddOnServices.length;L++)if(e.listOfAddOnServices[L].stateOfToggleButtonOfService&&(!Ember.isEmpty(e.listOfAddOnServices[L].tempDate)&&f<=new Date(e.listOfAddOnServices[L].tempDate)||f<=new Date))return void Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"scheduleDisconnection"),kl.value(t.localeReconnect+"scheduleDisconnectionValid"),null,t,"id123456","warning");if(e.listOfAccessService&&e.listOfAccessService.length>0)for(var E=0;E<e.listOfAccessService.length;E++)if(e.listOfAccessService[E].stateOfToggleButtonOfService&&(!Ember.isEmpty(e.listOfAccessService[E].tempDate)&&f<=new Date(e.listOfAccessService[E].tempDate)||f<=new Date))return void Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"scheduleDisconnection"),kl.value(t.localeReconnect+"scheduleDisconnectionValid"),null,t,"id123456","warning")}else r=!0;else if(G=new Date(e.get("princDate")),!Ember.isEmpty(t.currentReconnectModel.get("isScheduleDisconnection")))if(t.currentReconnectModel.get("isScheduleDisconnection")){if(Ember.isEmpty(t.currentReconnectModel.get("dateScheduleDisconnection")))return void Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"scheduleDisconnection"),kl.value(t.localeReconnect+"scheduleDisconnectionReq"),Komodo.Controls.MessageBoxOkButtons,t,"authmbx3","danger");var g=new Date(e.get("princDate")),f=new Date(t.currentReconnectModel.get("dateScheduleDisconnection"));if(f<=g)return void Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"scheduleDisconnection"),kl.value(t.localeReconnect+"scheduleDisconnectionValid"),null,t,"id123456","warning");if(s.pushObject(f),r=!0,e.listOfAddOnServices&&e.listOfAddOnServices.length>0)for(var V=0;V<e.listOfAddOnServices.length;V++)if(e.listOfAddOnServices[V].stateOfToggleButtonOfService&&(!Ember.isEmpty(e.listOfAddOnServices[V].tempDate)&&f<=new Date(e.listOfAddOnServices[V].tempDate)||f<=new Date))return void Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"scheduleDisconnection"),kl.value(t.localeReconnect+"scheduleDisconnectionValid"),null,t,"id123456","warning");if(e.listOfAccessService&&e.listOfAccessService.length>0)for(var H=0;H<e.listOfAccessService.length;H++)if(e.listOfAccessService[H].stateOfToggleButtonOfService&&(!Ember.isEmpty(e.listOfAccessService[H].tempDate)&&f<=new Date(e.listOfAccessService[H].tempDate)||f<=new Date))return void Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"scheduleDisconnection"),kl.value(t.localeReconnect+"scheduleDisconnectionValid"),null,t,"id123456","warning")}else r=!0;var F=!1;G=new Date(G.toDateString());var U=!1;if(r=!0,e.listOfAddOnServices&&e.listOfAddOnServices.length>0)for(var _=0;_<e.listOfAddOnServices.length;_++)if(e.listOfAddOnServices[_].stateOfToggleButtonOfService&&(U=!0,!Ember.isEmpty(e.listOfAddOnServices[_].tempDate)&&G>new Date(e.listOfAddOnServices[_].tempDate)||G>new Date)){F=!0;break}if(e.listOfAccessService&&e.listOfAccessService.length>0)for(var Q=0;Q<e.listOfAccessService.length;Q++)if(e.listOfAccessService[Q].stateOfToggleButtonOfService&&(U=!0,!Ember.isEmpty(e.listOfAccessService[Q].tempDate)&&G>new Date(e.listOfAccessService[Q].tempDate)||G>new Date)){F=!0;break}if(U&&F)return void Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"principalService"),kl.value(t.localeReconnect+"prDateGr"),Komodo.Controls.MessageBoxOkButtons,t,"authmbx3","danger")}}if(r){if("FromHolidayHome"!==t.navigationFrom&&void 0!==s&&s.length>0){var q=new Date(t.getformatedDateforService(s[0]));1===XDates.compare(t.getHighestDate(o),q)&&(s[0]=t.getformatedDateforService(new Date(q.getFullYear(),q.getMonth()+1,q.getDate())))}t.set("getMyQuote",!0),t.setReconnectAllDisbled(!0),t.qouteRetreival(a,o,s)}},reconnectAllToggleChanged:function(){var e=this;e.currentReconnectModel.get("allHardwares").forEach(function(t){t.set("stateOfToggleButtonOfPrincipleService",!!e.get("reconnectAllToggle")),t.set("stateOfToggleButtonPrinc",!!e.get("reconnectAllToggle")),t.set("stateOfToggleButtonOfInsuranceService",!!e.get("reconnectAllToggle")),t.set("stateOfToggleButtonDCC",!!e.get("reconnectAllToggle"))}),e.set("disableScheduleDisconnectionAll",!!e.get("disableAllForDCC")),e.set("isunfairAllcheckboxEnabledOrDisabled",!!e.get("disableAllForDCC")),e.set("disableScheduleDisconnectionAll",!e.get("reconnectAllToggle")),e.set("isunfairAllcheckboxEnabledOrDisabled",!e.get("reconnectAllToggle")),e.set("isScheduleDisconnectionAll",!1),e.set("disableReconnectAllDate",!e.get("reconnectAllToggle")),e.set("disableSubmitReconnectAll",!e.get("reconnectAllToggle")),e.currentReconnectModel.get("allHardwares").forEach(function(t){t.listOfAddOnServices.forEach(function(a){a.set("stateOfToggleButtonOfService",!!e.get("reconnectAllToggle")),a.set("stateOfToggleButton",!(!t.checkPrincAvailable&&!e.get("reconnectAllToggle")))}),t.listOfAccessService.forEach(function(a){a.set("stateOfToggleButtonOfService",!!e.get("reconnectAllToggle")),a.set("stateOfToggleButton",!(!t.checkPrincAvailable&&!e.get("reconnectAllToggle")))})})}.observes("reconnectAllToggle"),scheduleDisconnectionChecked:function(){var e=this;e.set("disableDateScheduleDisconnectionAll",!e.get("isScheduleDisconnectionAll"))}.observes("isScheduleDisconnectionAll"),scheduleDisconnectEnableDisable:function(){var e=this;e.currentReconnectModel.get("isMultipleReconnect")&&($.grep(e.currentReconnectModel.get("allHardwares"),function(e){return e.stateOfToggleButtonOfPrincipleService||e.stateOfToggleButtonOfInsuranceService}).length>0?(e.set("disableScheduleDisconnectionAll",!1),e.set("disableSubmitReconnectAll",!1),e.set("disableReconnectAllDate",!1),e.set("disableScheduleDisconnectionAll",!(!e.get("disableAllForDCC")&&Ember.isEmpty(e.currentReconnectModel.QuoteArray))),e.set("isunfairAllcheckboxEnabledOrDisabled",!(!e.get("disableAllForDCC")&&Ember.isEmpty(e.currentReconnectModel.QuoteArray))),e.set("disableSubmitReconnectAll",!Ember.isEmpty(e.currentReconnectModel.QuoteArray))):(e.set("isScheduleDisconnectionAll",!1),e.set("disableScheduleDisconnectionAll",!0),e.set("disableSubmitReconnectAll",!0),e.set("disableReconnectAllDate",!0),e.set("isunfairAllcheckboxEnabledOrDisabled",!0)))}.observes("currentReconnectModel.allHardwares.@each.stateOfToggleButtonOfPrincipleService","currentReconnectModel.allHardwares.@each.stateOfToggleButtonOfInsuranceService"),isUnfairAllDisconnectChanged:function(){var e=this;e.currentReconnectModel.set("showUnfairDisnotes",!!e.get("isUnfairAllDisconnect")),e.set("unfairDiscNotes",void 0),e.set("bindReconnectAllDate",e.get("paymentAlreadyDoneAll")?XDates.getformatedDateforDatepicker(new Date):void 0),e.set("bindReconnectAllDate",e.get("isUnfairAllDisconnect")?XDates.getformatedDateforDatepicker(new Date):void 0),e.set("disableReconnectAllDate",!!e.get("paymentAlreadyDoneAll")),e.set("disableReconnectAllDate",!!e.get("isUnfairAllDisconnect")),e.isUnfairAllDisconnect?e.registerValidator(e,"unfairDiscNotes",{type:"string",isRequired:!0,maxLength:1e3,displayName:kl.value(this.localeReconnect+"notes")}):e.deregisterValidator("unfairDiscNotesValidator")}.observes("isUnfairAllDisconnect"),actions:{acceptReconnect:function(e){var t=this;if(t.currentReconnectModel.get("checkPreAct"))t.acceptPreReconnect(e.content);else if(t.get("paymentAlreadyDoneAll")){var a=t.getDCCQuotes(e.content);if(a.length>0){var o=Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"reconnectTitle"),kl.value(t.localeReconnect+"DCCPreActivateNotAllowed"),null,t,"id123456","warning");o.response=function(a){if("ok"===a){var o=t.getNonDCCQuotes(e.content);o.length>0&&t.acceptPreReconnect(o)}}}else t.acceptPreReconnect(e.content)}else t.acceptReconnect(e.content)},rejectReconnect:function(e){this.rejectQuote(e.content)},payNow:function(){this.payNow()},submiReconnect:function(e){this.get("DPPReconnectionAllowed")?this.performDPPReconnection(e.content):this.submitReconnectServices(e.content)},submiReconnectAll:function(e){this.submitMultipleReconnectServices(e.content)},rejectMultipleReconnect:function(e){this.rejectMultipleQuote(e.content)},acceptMultipleReconnect:function(e){var t=this;t.get("paymentAlreadyDoneAll")?t.acceptPreReconnect(e.content):t.acceptMultipleReconnect(e.content)},QuoteDetailsForMultipleSmartcard:function(e){this.QuoteDetailsForMultipleSmartcard(e.content)},actionSuspendReconnect:function(e){this.actionSuspendReconnect(e.content)},actionNewViewQuoteDetails:function(e){this.newViewQuoteDetails(e.content)},refreshQuote:function(e){this.refreshQuote(e.content)},actionPreActivateHHPrepaid:function(e){var t=this;if(t.checkPrimaryServiceOnAccount()){Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"confirm"),kl.value(t.localeReconnect+"confirmMessage")+kl.value(t.localeReconnect+"confirmMessage1")+t.defaultDay+kl.value(t.localeReconnect+"confirmMessage2"),Komodo.Controls.MessageBoxYesNoButtons,t).response=function(a){"yes"===a&&(t.getNewProcessID(),t.showBlockingBusyIndicator(),t.preActivateHolidayHome(e))}}else Komodo.Controls.MessageBoxController.show(kl.value(t.localeReconnect+"preActivateQuoteButton"),kl.value(t.localeReconnect+"preActivateMessageforPrimaryService"),Komodo.Controls.MessageBoxOkButtons,self,"authmbx3","danger")}},checkPrimaryServiceOnAccount:function(){for(var e=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),t=e.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account),a=0,o=t.length;a<o;a++)if(t[a].Type===Komodo.AccountTypes.DSTV_RES||t[a].Type===Komodo.AccountTypes.PAYMENT_PLAN)for(var s=e.createArrayForSingleElement(t[a].ListOfAgreement.Agreement),r=0,n=s.length;r<n;r++)if(void 0!==s[r].ListOfHardware&&void 0!==s[r].ListOfHardware.Hardware)for(var i=e.createArrayForSingleElement(s[r].ListOfHardware.Hardware),c=0,l=i.length;c<l;c++)if(i[c].ListOfService&&i[c].ListOfService.Service){var d=e.createArrayForSingleElement(i[c].ListOfService.Service);if(d.length>0)for(var u=0,h=d.length;u<h;u++)if("principal"===d[u].ProductDetail.Type.toString().toLowerCase()&&"active"===d[u].Status.toString().toLowerCase())return!0}return!1},preActivateHolidayHome:function(e){var t=e.content,a=[],o=this,s=t[0].deviceSerialNumber.split("-");t.forEach(function(e){e.isReconnectService&&a.pushObject(e.packageName)});var r=Komodo.Models.PreActivateHolidayHomeRequest.create();r.set("DeviceSerialNumber",s[1]),r.set("PackageNames",a),r.set("DaysToAdd",o.defaultDay),r.set("Operation",1),Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo),Komodo.Services.queryService.postJSON("/Device/PreActivateHolidayHome",{data:r}).done(function(e){if(o.hideBusyIndicator(),void 0!==e&&void 0!==e.Status&&0===e.Status){Komodo.Controls.MessageBoxController.show(kl.value(o.localeReconnect+"success"),kl.value(o.localeReconnect+"pacakgePreactivated"),Komodo.Controls.MessageBoxOkButton,o,"authmbx3","success").response=function(e){"ok"===e&&o.transitionToRoute("/manageViewing")}}else Komodo.Controls.MessageBoxController.show(kl.value(o.localeDisconnect+"error"),e.ResponseMessage,Komodo.Controls.MessageBoxOkButtons,o,"authmbx3","danger")}).error(function(e){o.hideBusyIndicator();var t=JSON.stringify(e);Komodo.Controls.MessageBoxController.show(kl.value(o.localeDisconnect+"error"),$.parseJSON(t).responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,o,"authmbx3","danger")})},setEnableDisablePreActivateButton:function(){var e=this,t=0;Ember.isEmpty(e.reconnectHHPackages)||(e.reconnectHHPackages.forEach(function(e){e.isReconnectService&&t++}),e.currentReconnectModel.set("disablePreActivate",!(t>0)))}.observes("reconnectHHPackages.@each.isReconnectService"),messageFailureMessageEventReceived:function(e){Komodo.log(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription)},createDependentProperty:function(e,t){var a=this;t.forEach(function(t){void 0!==a.get("validators."+e)&&a.get("validators."+e).functions.addObject(t)}),void 0!==a.get("validators."+e)&&a.get("validators."+e).validate()},removeDependentProperty:function(e){var t=this;void 0!==t.get("validators."+e)&&(t.get("validators."+e).functions.clear(),t.get("validators."+e).validate())},registerValidation:function(){var e=this;e.registerValidator(e.get("currentReconnectModel"),"isReconnectAll",{type:"bool",displayName:kl.value(e.localeReconnect+"reconnectAll"),isRequired:!1,minDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())}),e.registerValidator(e.get("currentReconnectModel"),"dateScheduleDisconnection",{type:"bool",displayName:"Schedule Disconnection Dat",isRequired:!1,minDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())})},suspendedFlagFor:!1,discSrev:!1,aggrId:void 0,dayList:[],defaultDay:void 0,reasonlst:[],myTempPackageNames:[],myTempDisDate:void 0,smartcardsList:[],scheduleDisconnectionDisable:!0,principalServicesDisable:!0,lstSmartcard:[],quoteSummary:[],quoteRequestObject:[],productListArray:[],dataGridFooters:[[],[]],redirectDate:void 0,tempPackageName:null,adHocDebitOrderButton:!0,checkSmartcardFilledAlready:!1,getMyQuote:!1,newData:[],serviceDisconnectStatus:[],quoteCount:0,testNewPackageName:[],statusChangeCheck:!1,isDCCReconnectionAllowed:void 0,checkPreactivateQuoteEnabled:void 0,isQuoteRetrieved:!1,DPPReconnectionAllowed:!1,customerId:void 0,paymentAlreadyDoneAll:!1,disablePaymentAlreadyDoneAll:!1,reconnectAllToggle:!1,disableReconnectAllToggle:!1,disableReconnectAllDate:!0,bindReconnectAllDate:void 0,isScheduleDisconnectionAll:!1,disableScheduleDisconnectionAll:!0,dateScheduleDisconnectionAll:void 0,disableDateScheduleDisconnectionAll:!0,ischeckAllPreActivateQuoteDisabledForDCC:!1,disableAllForDCC:!1,disableSubmitReconnectAll:!0,isMultipleQuote:!1,onlyDCCAvailable:!1,reconnectAllPackages:[],reasonForCustomerRequestReconnect:void 0,reasonForNormalReconnection:void 0,reasonForScheduledReconnection:void 0,reasonForSuspendToReconnection:void 0,reasonForReconnectWithoutPayment:void 0,reasonForDPPReconnection:void 0,disableRefreshAll:!0,resultAccountMessage:{ResponseMessage:{Payload:{ListOfAccount:{Account:[]}}}},isShowReconnectPanelForHH:!1,graceGivenCount:0,graceGivenDetails:void 0,graceDayAdded:0,flagGraceLimitReached:0,flagGraceGivenByCSR:!1,maxgracedaysGivenCustomer:!1,gracedaysAppliedbyCSR:!1,maxGraceGivenBySupervisor:!1,userIsAllowed:!1,isgracedayapplicablecountryflag:!1}),Komodo.Application.CsiViewingLocationController=Komodo.UI.Controller.extend({_localeAssociateProducts:"locale.associateProducts:",_localecsiCustomer:"locale.csicustomer:",_localeCustomerInformation:"locale.customer:customerInformation.",_localeManageViewing:"locale.manageviewing:csi.",init:function(){this._super(),Komodo.log("Constructing CSI Customer Viewing Location controller"),this.set("processVersion","v1.1"),this.set("processName","CSI Customer Viewing Location process");var e=this;e.set("paymentGroupGridColumns",[Komodo.Controls.DataGridColumn.create({name:"paymentGroup",title:kl.value(this._localecsiCustomer+"paymentGroup.paymentGroup"),canEdit:!1,width:"20%"}),Komodo.Controls.DataGridColumn.create({name:"addressType",title:kl.value(this._localeCustomerInformation+"type"),canEdit:!1,width:"10%"}),Komodo.Controls.DataGridColumn.create({name:"addressString",title:kl.value(this._localeCustomerInformation+"addresslblGridColumn"),canEdit:!1,width:"60%"}),Komodo.Controls.DataGridCommandColumn.create({title:kl.value(this._localeCustomerInformation+"editButton"),displayText:kl.value(this._localeCustomerInformation+"editButton"),width:"10%",action:"editPaymentGroupItem",displayType:"link"})]),Komodo.Services.eventAggregator.subscribe("FinancialAccountsRetrievedReceived",function(){if(e.viewModel&&e.viewModel.accounts&&e.viewModel.paymentGroups){e.viewModel.accounts.clear(),e.viewModel.paymentGroups.clear();var t=Komodo.Services.customerProfileService.getFinancialAccounts();t&&t.ResponseMessage&&t.ResponseMessage.Payload&&t.ResponseMessage.Payload.ListOfAccount&&t.ResponseMessage.Payload.ListOfAccount.Account&&$.each(t.ResponseMessage.Payload.ListOfAccount.Account,function(t,a){e.viewModel.accounts.addObject(a),e.viewModel.paymentGroups.addObject(e.createPaymentGroupDataGridModel(a))})}})},start:function(){var e=this;e.createCDMData(),e.registerModel("viewModel",Komodo.Models.ViewingLocationModel),e.set("addressInformation",Komodo.Models.AddressModel.create()),e.registerValidation(),Komodo.Services.customerProfileService.validateCustomerClass(e.csiClassId).done(function(t){if(void 0!==t&&null!==t)e.set("customerNo",t.CustomerNumber),e.retrieveFinancialDetails(e.customerNo);else{Komodo.Controls.MessageBoxController.show(kl.value(e._localecsiCustomer+"customerprofile.customerNotFoundTitle"),kl.value(e._localecsiCustomer+"customerprofile.customerNotFound"),Komodo.Controls.MessageOKButtons,e,"id5446673","warning").response=function(e){if("ok"===e)return void Komodo.Services.uiService.transitionTo("home")}}}),e.set("viewTitle",kl.value(e._localeManageViewing+"viewLoactionTitle")),e.set("showAddEdit",!1),e.set("isCreate",!0),e.viewModel.set("location","mainLocation"),e.viewModel.set("paymentDetailAsMainLocation","1"),Komodo.Services.featureToggleService.isEnabled("CustomerGlobal","EnableAddressOverRide").done(function(t){e.set("enableAddressOverRide",t)}),e._super()},stop:function(){this._super()},registerValidation:function(){var e=this;e.registerValidator(e.get("viewModel"),"paymentGroup",{type:"string",isRequired:!0,minLength:2,maxLength:50,regExPattern:"^[0-9a-zA-Z ()-]*$",functions:Komodo.UI.Validators.shouldNotStartWithSpace}),e.registerValidator(e.get("viewModel"),"accountType",{type:"string",displayName:kl.value(e.localeBase+"accountType")}),e.registerValidator(e.get("viewModel"),"debitOrderDay",{type:"string"}),e.registerValidator(e.get("viewModel"),"payerName",{type:"string",minLength:3,maxLength:101,regExPattern:"^[a-zA-Z ]*$",functions:Komodo.UI.Validators.shouldNotStartWithSpace}),e.registerValidator(e.get("viewModel"),"payerID",{type:"string",minLength:8,maxLength:13,functions:Komodo.UI.Validators.alphanumericValidator}),e.registerValidator(e.get("viewModel"),"accountNo",{type:"string",minLength:5,maxLength:34,functions:Komodo.UI.Validators.alphanumericValidator}),e.registerValidator(e.get("viewModel"),"bank",{type:"string"}),e.registerValidator(e.get("viewModel"),"branchCode",{type:"string"})},createCDMData:function(){var e=this,t=$.Deferred(),a=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),o=Komodo.Services.uiService.getController("application").get("_selectedCountryDescription"),s=Komodo.Services.localizationService.getCurrentLanguage();return e.set("country",o),e.set("loggedInCountryId",a),e.getStaticCDMData(a,s,"MethodOfPayment",e.paymentMethods),e.getStaticCDMData(a,s,"AddressType",e.addressTypes),e.getStaticCDMData(a,s,"AccountType",e.accountTypes),e.getHierachicalCDMData(a,s,"BankDetail",e.banks),e.getHierachicalCDMData(a,s,"CountryDetail",e.countriesWithCodes),e.getHierachicalCDMData(a,s,"Location",e.countries).done(function(e){t.resolve(e)}),e.set("locations",[]),e.locations.push({key:"mainLocation",value:kl.value(e._localecsiCustomer+"paymentGroup.mainLocation")}),e.locations.push({key:"anotherLocation",value:kl.value(e._localecsiCustomer+"paymentGroup.anotherLocation")}),e.set("paymentDetails",[]),e.paymentDetails.push({title:kl.value(e._localeCustomerInformation+"yes"),value:"1"}),e.paymentDetails.push({title:kl.value(e._localeCustomerInformation+"no"),value:"0"}),e.set("paymentMethodList",[]),e.paymentMethodList.push({title:"Cash",value:"1"}),e.paymentMethodList.push({title:"Debit Order",value:"0"}),t},getHierachicalCDMData:function(e,t,a,o){var s=$.Deferred();return Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){var t=JSON.parse(e);switch(o.clear(),a){case"BankDetail":$.each($.makeArray(t.Banks.Bank),function(e,t){o.addObject(t)});break;case"Location":$.each($.makeArray(t.Countries.Country),function(e,t){o.addObject(t)}),s.resolve(e);break;case"CountryDetail":$.each($.makeArray(t.Countries.Country),function(e,t){o.addObject(t)});break;default:Komodo.log("[ERROR] : Unknown Hierachical dataset: "+a)}}).fail(function(){Komodo.log("[ERROR] : could not retrieve hierarchical CDM data for "+a)}),s},getStaticCDMData:function(e,t,a,o){Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){switch(o.clear(),a){case"AddressType":$.each(e,function(e,t){t.key===Komodo.CanonicalValues.AddressTypes.Physical&&o.addObject(t)});break;case"MethodOfPayment":$.each(e,function(e,t){"CASH"!==t.value.toUpperCase()&&"PAYROLL"!==t.value.toUpperCase()&&"AHV PENDING"!==t.value.toUpperCase()&&o.addObject(t)});break;case"InvoiceDayCommercial":e=e.sort(function(e,t){return parseInt(e.key,10)>parseInt(t.key,10)?1:parseInt(e.key,10)<parseInt(t.key,10)?-1:0}),$.each(e,function(e,t){o.addObject(t)});break;default:$.each(e,function(e,t){o.addObject(t)})}}).fail(function(){Komodo.log("[ERROR] : could not retrieve static CDM data for "+a)})},createDependentProperty:function(e,t){var a=this;t.forEach(function(t){void 0!==a.get("validators."+e)&&a.get("validators."+e).functions.addObject(t)}),a.get("validators."+e).validate()},removeDependentProperty:function(e){var t=this;void 0!==t.get("validators."+e)&&(t.get("validators."+e).functions.clear(),t.get("validators."+e).validate())},createPaymentGroupDataGridModel:function(e){var t=this,a=Komodo.Models.PaymentGroupDataGridModel.create();return void 0!==e&&null!==e&&(a.set("accountNumber",e.UID),a.set("paymentGroup",e.Name),void 0!==e.BillingAddress&&null!==e.BillingAddress&&(a.set("addressType",e.BillingAddress.Type),a.set("addressString",t.getAddressString(e.BillingAddress)),a.set("isPrimaryString","true"===e.BillingAddress.IsPrimary?"Yes":"No"))),a},getAddressString:function(e){var t=this,a="";if(e){void 0!==e.HouseNumber&&null!==e.HouseNumber&&""!==$.trim(e.HouseNumber)&&(a+=$.trim(e.HouseNumber)+", "),void 0!==e.BuildingName&&null!==e.BuildingName&&""!==$.trim(e.BuildingName)&&(a+=$.trim(e.BuildingName)+", "),void 0!==e.Street&&null!==e.Street&&""!==$.trim(e.Street)&&(a+=$.trim(e.Street)+", "),void 0!==e.PostBoxNumber&&null!==e.PostBoxNumber&&""!==$.trim(e.PostBoxNumber)&&(a+=$.trim(e.PostBoxNumber)+", ");var o=t.getCitySuburbText(e.Country,e.Province,e.City,e.Suburb);o&&void 0!==o.Suburb&&null!==o.Suburb&&""!==$.trim(o.Suburb)&&(a+=$.trim(o.Suburb)+", "),o&&void 0!==o.City&&null!==o.City&&""!==$.trim(o.City)&&(a+=$.trim(o.City)+", ");var s=$.grep($.makeArray(t.countries),function(t){return t.CanonicalKey.toUpperCase()===e.Country.toUpperCase()});if(s.length>0){var r=$.grep($.makeArray(s[0].Provinces.Province),function(t){return t.CanonicalKey.toUpperCase()===e.Province.toUpperCase()});r.length>0&&(a+=$.trim(r[0].CanonicalValue)+", "),a+=$.trim(s[0].CanonicalValue)+", "}void 0!==e.PostCode&&null!==e.PostCode&&""!==$.trim(e.PostCode)&&(a+=$.trim(e.PostCode)+", "),a=$.trim(a).replace(/^,|,$/g,"")}return a},getAccounts:function(){var e=this,t=Komodo.Models.Account.create(),a=Komodo.canonicalFacadeFactory(t,["Type","UID","Name","StartDate","EndDate","DunningLevel","Balance","TermOfPayment","Status","PaymentDetail","BillingAddress"]),o=new Date;a.set("StartDate",o),$(e.accountTypes).each(function(e,a){if("DStvComm"===a.value)return void t.set("Type",a.key)}),a.set("Name",e.viewModel.get("paymentGroup")),!1===e.isCreate&&a.set("UID",e.viewModel.get("accountId"));var s=e.getMainLocationAccount(),r=Komodo.Models.Price.create();void 0!==s&&void 0!==s.Balance&&r.set("CurrencyCode",s.Balance.CurrencyCode),a.set("Balance",r);var n=Komodo.Models.PaymentDetail.create();return"1"===e.viewModel.paymentDetailAsMainLocation?void 0!==s&&void 0!==s.PaymentDetail&&(n.set("MethodOfPayment",s.PaymentDetail.MethodOfPayment),n.set("DebitOrderDay",s.PaymentDetail.DebitOrderDay),n.set("AccountNumber",s.PaymentDetail.AccountNumber),n.set("BankName",s.PaymentDetail.BankName),n.set("BranchName",s.PaymentDetail.BranchName),n.set("BranchCode",s.PaymentDetail.BranchCode),n.set("PayerName",s.PaymentDetail.PayerName),n.set("PayerIDNumber",s.PaymentDetail.PayerIDNumber)):void 0!==e.viewModel.get("methodOfPayment")&&"1"===e.viewModel.get("methodOfPayment")?(n.set("MethodOfPayment",e.viewModel.get("methodOfPayment")),void 0!==e.viewModel.get("debitOrderDay")&&n.set("DebitOrderDay",e.viewModel.get("debitOrderDay"))):(void 0!==e.viewModel.get("accountType")&&(n.set("MethodOfPayment",e.viewModel.get("accountType").key),n.set("BankAccountType",e.viewModel.get("accountType").value)),void 0!==e.viewModel.get("accountNo")&&n.set("AccountNumber",e.viewModel.get("accountNo")),null!==e.viewModel.get("branchCode")&&null!==e.viewModel.get("bank")&&(n.set("BranchCode",e.viewModel.get("branchCode").BranchCode),n.set("BankName",e.viewModel.get("bank").CanonicalKey),n.set("BranchName",e.viewModel.get("branchCode").CanonicalValue)),void 0!==e.viewModel.get("debitOrderDay")&&n.set("DebitOrderDay",e.viewModel.get("debitOrderDay")),void 0!==e.viewModel.payerName&&n.set("PayerName",e.viewModel.payerName),void 0!==e.viewModel.payerID&&n.set("PayerIDNumber",e.viewModel.payerID)),a.set("PaymentDetail",n),a.set("BillingAddress",e.getAddress()),t},getAddress:function(){var e=this,t=Komodo.Models.Address.create();if("mainLocation"===e.viewModel.location){var a=e.getMainLocationAccount();a&&a.BillingAddress&&(t.Type=a.BillingAddress.Type,t.IsPrimary=a.BillingAddress.IsPrimary,t.HouseNumber=a.BillingAddress.HouseNumber,t.BuildingName=a.BillingAddress.BuildingName,t.Street=a.BillingAddress.Street,t.Suburb=a.BillingAddress.Suburb,t.City=a.BillingAddress.City,t.Province=a.BillingAddress.Province,t.Country=a.BillingAddress.Country,t.PostCode=a.BillingAddress.PostCode,t.PostBoxNumber=a.BillingAddress.PostBoxNumber,t.Longitude=void 0,t.Latitude=void 0,t.BuildingNumber=void 0,t.IsMarketingEnabled=!1,t.IsBillingAddress=!0)}else t=Komodo.UI.addressFunctions.getAddress(e.get("addressInformation")),t.IsBillingAddress=!0;return t},getMainLocationAccount:function(){var e=this,t=void 0;if(e.viewModel.accounts){if(t=$.grep(e.viewModel.accounts,function(e){return"Main Location"===e.Name}),t.length>0)return t[0];if(t=$.grep(e.viewModel.accounts,function(e){return!0===e.IsDefault}),t.length>0)return t[0]}return t},mapAccountInformation:function(e){var t=this;if(void 0!==e&&null!==e&&void 0!==e.PaymentDetail&&null!==e.PaymentDetail)if("Main Location"===e.Name&&t.set("editPaymentGroup",!0),t.viewModel.set("paymentGroup",e.Name),t.viewModel.set("accountId",e.UID),"1"===e.PaymentDetail.MethodOfPayment)t.viewModel.set("methodOfPayment",e.PaymentDetail.MethodOfPayment),t.viewModel.set("debitOrderDay",e.PaymentDetail.DebitOrderDay);else{t.viewModel.set("methodOfPayment","0"),t.viewModel.set("accountNo",e.PaymentDetail.AccountNumber),t.viewModel.set("debitOrderDay",e.PaymentDetail.DebitOrderDay),t.viewModel.set("payerName",e.PaymentDetail.PayerName),t.viewModel.set("payerID",e.PaymentDetail.PayerIDNumber);var a=$.grep($.makeArray(t.paymentMethods),function(t){return t.key===e.PaymentDetail.MethodOfPayment});a.length>0&&t.viewModel.set("accountType",a[0]);var o=$.grep($.makeArray(t.banks),function(t){return t.CanonicalKey===e.PaymentDetail.BankName
});o.length>0&&t.viewModel.set("bank",o[0]);var s=$.grep($.makeArray(t.bankBranches),function(t){return t.BranchCode===e.PaymentDetail.BranchCode});s.length>0&&t.viewModel.set("branchCode",s[0])}},mapAddressInformation:function(e){var t=this;if(void 0!==e&&null!==e&&void 0!==e.BillingAddress&&null!==e.BillingAddress){var a=e.BillingAddress;t.get("addressInformation").set("isAddressOverride",!t.get("enableAddressOverRide")||!!a.IsVerified&&!a.IsVerified),t.get("addressInformation").set("addressTypeText",t.addressTypes[0].value),t.get("addressInformation").set("addressType",t.addressTypes[0].key),t.get("addressInformation").set("country",a.Country),t.get("addressInformation").set("province",a.Province);var o=t.getCitySuburbText(a.Country,a.Province,a.City,a.Suburb);t.get("addressInformation").set("city",o.City),t.get("addressInformation").set("suburb",o.Suburb),t.get("addressInformation").set("postalCode",a.PostCode),t.get("addressInformation").set("unit",a.HouseNumber),t.get("addressInformation").set("building",a.BuildingName);var s=Komodo.UI.addressFunctions.splitStreetNumberName(a.Street);t.get("addressInformation").set("streetNumber",s.streetNumber),t.get("addressInformation").set("streetName",s.streetName),t.get("addressInformation").set("privateBag",a.PostBoxNumber),t.get("addressInformation").set("boxType",""),t.get("addressInformation").set("isPrimary",!1),t.get("addressInformation").set("isPrimaryString","No"),t.get("addressInformation").set("isMarketingEnabled",!1),t.get("addressInformation").set("addressString","")}},clearFormData:function(){var e=this;e.set("showAddress",!1),e.set("showPaymentDetails",!1),e.set("showDebitOrderDetails",!1),e.set("showAddEdit",!1),e.set("isCreate",!0),e.viewModel.set("paymentGroup",void 0),e.viewModel.set("location",void 0),e.viewModel.set("addressTypeKey",void 0),e.viewModel.set("addressTypeValue",void 0),e.viewModel.set("isPrimary",void 0),e.viewModel.set("isPrimaryString",void 0),e.viewModel.set("IsMarketingEnabled",void 0),e.viewModel.set("country",void 0),e.viewModel.set("province",void 0),e.viewModel.set("city",void 0),e.viewModel.set("suburb",void 0),e.viewModel.set("postalCode",void 0),e.viewModel.set("unit",void 0),e.viewModel.set("building",void 0),e.viewModel.set("streetNo",void 0),e.viewModel.set("streetName",void 0),e.viewModel.set("privateBag",void 0),e.viewModel.set("billing",void 0),e.viewModel.set("countryCanonicalKey",void 0),e.viewModel.set("provinceCanonicalKey",void 0),e.viewModel.set("cityCanonicalKey",void 0),e.viewModel.set("suburbCanonicalKey",void 0),e.viewModel.set("countryKey",void 0),e.viewModel.set("paymentDetailAsMainLocation",void 0),e.viewModel.set("methodOfPayment",void 0),e.viewModel.set("payerName",void 0),e.viewModel.set("payerID",void 0),e.viewModel.set("accountType",void 0),e.viewModel.set("bank",void 0),e.viewModel.set("branchCode",void 0),e.viewModel.set("accountNo",void 0),e.viewModel.set("debitOrderDay",void 0)},clearAddressInformation:function(){var e=this;e.get("addressInformation").set("isAddressOverride",!e.get("enableAddressOverRide")),e.get("addressInformation").set("addressTypeText",e.addressTypes[0].value),e.get("addressInformation").set("addressType",e.addressTypes[0].key),e.get("addressInformation").set("country",e.get("loggedInCountryId")),e.get("addressInformation").set("province",void 0),e.get("addressInformation").set("city",void 0),e.get("addressInformation").set("suburb",void 0),e.get("addressInformation").set("postalCode",void 0),e.get("addressInformation").set("unit",void 0),e.get("addressInformation").set("building",void 0),e.get("addressInformation").set("streetNumber",void 0),e.get("addressInformation").set("privateBag",void 0),e.get("addressInformation").set("boxType",void 0),e.get("addressInformation").set("streetName",void 0),e.get("addressInformation").set("isPrimary",!1),e.get("addressInformation").set("isPrimaryString","No"),e.get("addressInformation").set("isMarketingEnabled",!1),e.get("addressInformation").set("addressString",void 0)},clearAndRefreshview:function(){var e=this;if(e.clearFormData(),e.customerNo){Komodo.Application.SharedObjectController.create().retrieveFinancialAccounts(e.customerNo)}},getCitySuburbText:function(e,t,a,o){var s=this;if(e&&t&&a&&o&&(a=s.capitaliseFirstLetter(a),o=s.capitaliseFirstLetter(o),!s.get("enableAddressOverRide"))){var r=$.grep($.makeArray(s.countries),function(t){return t.CanonicalKey.toUpperCase()===e.toUpperCase()});if(r.length>0){var n=$.grep($.makeArray(r[0].Provinces.Province),function(e){return e.CanonicalKey.toUpperCase()===t.toUpperCase()});if(n.length>0&&n[0].Cities&&n[0].Cities.City){var i=$.grep($.makeArray(n[0].Cities.City),function(e){return e.CanonicalValue.toUpperCase()===a.toUpperCase()});if(i.length>0&&(a=i[0].CanonicalValue,i[0].Suburbs&&i[0].Suburbs.Suburb)){var c=$.grep($.makeArray(i[0].Suburbs.Suburb),function(e){return e.CanonicalValue.toUpperCase()===o.toUpperCase()});c.length>0&&(o=c[0].CanonicalValue)}}}}return{City:a,Suburb:o}},capitaliseFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.toLowerCase().slice(1)},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,15e3,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},locationChanged:function(){var e=this;if(void 0===e.get("viewModel.location")||"mainLocation"===e.get("viewModel.location"))e.set("showAddress",!1);else{e.set("showAddress",!0),e.get("addressInformation").set("addressTypeText",e.addressTypes[0].value),e.get("addressInformation").set("addressType",e.addressTypes[0].key),e.get("addressInformation").set("country",e.get("loggedInCountryId"));var t=$.grep(e.countries,function(t){return t.CanonicalKey===e.get("loggedInCountryId")});t.length>0&&e.viewModel.set("country",t[0])}}.observes("viewModel.location"),paymentDetailAsMainLocationChanged:function(){var e=this;void 0===e.get("viewModel.paymentDetailAsMainLocation")||"1"===e.get("viewModel.paymentDetailAsMainLocation")?(e.set("showPaymentDetails",!1),this.removeDependentProperty("debitOrderDayValidator"),this.removeDependentProperty("payerNameValidator"),this.removeDependentProperty("branchCodeValidator"),this.removeDependentProperty("accountNoValidator"),this.removeDependentProperty("bankValidator"),this.removeDependentProperty("accountTypeValidator")):(e.set("showPaymentDetails",!0),e.viewModel.set("methodOfPayment","1"))}.observes("viewModel.paymentDetailAsMainLocation"),methodOfPaymentChanged:function(){var e=this;if(void 0!==this.viewModel.methodOfPayment)switch(this.viewModel.methodOfPayment){case"1":Ember.set(this,"debitOrderDaylabel",kl.value(e._localeCustomerInformation+"paymentDay")),Ember.set(this,"paymentDayPrompt",kl.value(e._localeCustomerInformation+"paymentDayPrompt")),this.set("showDebitOrderDetails",!1),this.removeDependentProperty("payerNameValidator"),this.removeDependentProperty("branchCodeValidator"),this.removeDependentProperty("accountNoValidator"),this.removeDependentProperty("bankValidator"),this.removeDependentProperty("accountTypeValidator");break;case"0":Ember.set(this,"debitOrderDaylabel",kl.value(e._localeCustomerInformation+"debitOrderDay")),Ember.set(this,"paymentDayPrompt",kl.value(e._localeCustomerInformation+"debitOrderDayPrompt")),this.set("showDebitOrderDetails",!0),this.createDependentProperty("payerNameValidator",[Komodo.UI.Validators.RequiredValidator]),this.createDependentProperty("branchCodeValidator",[Komodo.UI.Validators.RequiredValidator]),this.createDependentProperty("accountNoValidator",[Komodo.UI.Validators.RequiredValidator]),this.createDependentProperty("bankValidator",[Komodo.UI.Validators.RequiredValidator]),this.createDependentProperty("accountTypeValidator",[Komodo.UI.Validators.RequiredValidator])}}.observes("viewModel.methodOfPayment"),bankChanged:function(){var e=this;e.set("bankBranches",[]),Ember.set(e.viewModel,"branchCode",void 0),e.get("viewModel.bank")&&$.each(e.get("banks"),function(t,a){a.CanonicalKey===e.get("viewModel.bank").CanonicalKey&&a.Branches&&a.Branches.Branch&&($.isArray(a.Branches.Branch)?$.each(a.Branches.Branch,function(t,a){e.get("bankBranches").addObject(a)}):e.get("bankBranches").addObject(a.Branches.Branch))})}.observes("viewModel.bank"),isEdit:function(){return!0!==this.isCreate}.property("isCreate"),showAddEditChanged:function(){this.get("showAddEdit")?$("#csiManageViewingEditPanel").show():$("#csiManageViewingEditPanel").hide()}.observes("showAddEdit"),showAddressChanged:function(){this.get("showAddress")?$("#csiManageViewingAddressPanel").show():$("#csiManageViewingAddressPanel").hide()}.observes("showAddress"),validateData:function(){var e="",t=this,a=!1,o=Object.keys(t.get("validators"));$.each(o,function(o,s){var r=t.get("validators."+s);if(r.model===t.get("viewModel")||"mainLocation"!==t.viewModel.location&&r.model===t.get("addressInformation")){var n="validators."+s+".errors";t.get(n).length>0&&$.each(t.get(n),function(t,o){e+=o+"<br />",a=!0})}});var s=t.getAccounts();return s&&(s.PaymentDetail&&s.PaymentDetail.MethodOfPayment||(e+=kl.value(t._localecommercialCustomer+"viewingInformation.messagePaymentDetailsValidation")+"<br />",a=!0),s.BillingAddress&&s.BillingAddress.Country||(e+=kl.value(t._localecommercialCustomer+"viewingInformation.messageBillingAddressValidation")+"<br />",a=!0)),a&&(e=kl.value("controller.invalidDataMessage")+"<br />"+e,Komodo.Controls.MessageBoxController.show(t.viewTitle,e,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning")),a},actions:{addPaymentGroup:function(){var e=this;e.clearFormData(),e.set("showAddEdit",!0),e.set("isCreate",!0),e.set("editPaymentGroup",!1),e.viewModel.set("location","mainLocation"),e.viewModel.set("addressTypeKey",e.addressTypes[0].key),e.viewModel.set("paymentDetailAsMainLocation","1"),e.clearAddressInformation()},editPaymentGroupItem:function(){var e=this;if(e.commandGridItem&&e.viewModel.accounts){var t=$.grep(e.viewModel.accounts,function(t){return t.UID===e.commandGridItem.accountNumber});t.length>0&&(e.set("showAddEdit",!0),e.set("isCreate",!1),e.set("editPaymentGroup",!1),e.viewModel.set("location","anotherLocation"),e.viewModel.set("addressTypeKey",e.addressTypes[0].key),e.viewModel.set("paymentDetailAsMainLocation","0"),e.mapAccountInformation(t[0]),e.mapAddressInformation(t[0]))}},savePaymentGroup:function(){var e=this,t=e.get("addressInformation");if(e.viewModel.set("addressType",t.get("addressTypeKey")),e.viewModel.set("country",t.get("country")),e.viewModel.set("province",t.get("province")),e.viewModel.set("city",t.get("city")),e.viewModel.set("suburb",t.get("suburb")),e.viewModel.set("postalCode",t.get("postalCode")),e.viewModel.set("unit",t.get("unit")),e.viewModel.set("building",t.get("building")),e.viewModel.set("streetNumber",t.get("streetNo")),e.viewModel.set("privateBag",t.get("privateBag")),e.viewModel.set("streetName",t.get("streetName")),void 0!==e.customerNo&&null!==e.customerNo){if(!0===e.validateData())return!1;!0===e.isCreate?e.publishCreateFinancialAccountEvent():e.publishUpdateFinancialAccountEvent()}else Komodo.Controls.MessageBoxController.show(kl.value(e._localecsiCustomer+"customerprofile.customerNotFoundTitle"),kl.value(e._localecsiCustomer+"customerprofile.customerNotFound"));return!1},addDevicesAndPackages:function(){Komodo.Services.uiService.transitionTo("csiAssociateProducts")}},retrieveFinancialDetails:function(e){var t=this;t.viewModel.accounts.clear(),t.viewModel.paymentGroups.clear();var a=Komodo.Services.customerProfileService.getFinancialAccounts();a&&a.ResponseMessage&&a.ResponseMessage.Payload&&a.ResponseMessage.Payload.ListOfAccount&&a.ResponseMessage.Payload.ListOfAccount.Account?$.each(a.ResponseMessage.Payload.ListOfAccount.Account,function(e,a){t.viewModel.accounts.addObject(a),t.viewModel.paymentGroups.addObject(t.createPaymentGroupDataGridModel(a))}):Komodo.Services.queryService.getJSON("/AccountProfile/?id="+e).done(function(e){e&&e.Account&&$.each(e.Account,function(e,a){t.viewModel.accounts.addObject(a),t.viewModel.paymentGroups.addObject(t.createPaymentGroupDataGridModel(a))})}).error(function(e){var t=JSON.stringify(e);Komodo.log("retrieveFinancialAccounts ajax call failed. Error: "+t)})},publishCreateFinancialAccountEvent:function(){var e=this,t=Komodo.Models.CreateFinancialAccount.create(),a=Komodo.canonicalFacadeFactory(t,["Country","CustomerUID","Account"]);a.set("Country",e.get("loggedInCountryId")),a.set("CustomerUID",e.get("customerNo")),a.set("Account",e.getAccounts()),e.startNewProcess(),Komodo.Services.ManageViewingService.publishEvent(this,t,"CreateFinancialAccount","v2"),e.showBusyIndicator()},messageFinancialAccountCreatedReceived:function(e){var t=this,a=e.ResponseMessage.Payload.Account;t.hideBusyIndicator(),void 0!==a.UID&&null!==a.UID&&""!==a.UID&&(t.clearAndRefreshview(),Komodo.Controls.MessageBoxController.show(t.viewTitle,kl.value(t._localeManageViewing+"paymentGroupCreated"),Komodo.Controls.MessageBoxOkButton,this,"id5446673","success"))},publishUpdateFinancialAccountEvent:function(){var e=this,t=Komodo.Models.UpdateFinancialAccount.create(),a=Komodo.canonicalFacadeFactory(t,["Country","Account"]);a.set("Country",e.get("loggedInCountryId")),a.set("Account",e.getAccounts()),e.startNewProcess(),Komodo.Services.ManageViewingService.publishEvent(this,t,"UpdateFinancialAccount","v2"),e.showBusyIndicator()},messageFinancialAccountUpdatedReceived:function(e){var t=this,a=e.ResponseMessage.Payload.Account;t.hideBusyIndicator(),void 0!==a.UID&&null!==a.UID&&""!==a.UID&&(t.clearAndRefreshview(),Komodo.Controls.MessageBoxController.show(t.viewTitle,kl.value(t._localeManageViewing+"paymentGroupUpdated"),Komodo.Controls.MessageBoxOkButton,this,"id5446673","success"))},messageFailureMessageEventReceived:function(e){this.hideBusyIndicator(),this.set("isCreateCustomerButtonDisable",!1),Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButton,this,"id544246673","danger")},messageReceived:function(e){this.hideBusyIndicator(),Komodo.UI.log("[CsiViewingLocationController.messageReceived] : event name = "+e.ResponseMessage.EventName)},messageDeliveryFailure:function(e){this.hideBusyIndicator(),Komodo.UI.warn("[CsiViewingLocationController.messageDeliveryFailure] : messageId = "+e.messageId)},messageFault:function(e){this.hideBusyIndicator(),Komodo.UI.error("[CsiViewingLocationController.messageFault] : messageId = "+e.messageId)},csiClassId:Komodo.CustomerClass.CSI,viewTitle:void 0,customerNo:void 0,hide:!1,showAddress:!1,showPaymentDetails:!1,showDebitOrderDetails:!1,showAddEdit:!1,isCreate:!0,editPaymentGroup:!1,disablePostalCode:!0,enableAddressOverRide:!1,commandGridItem:void 0,selectedGridItem:void 0,deleteGridItem:void 0,addressInformation:void 0,country:void 0,accountTypes:[],paymentMethods:[],addressTypes:[],invoiceDays:[],banks:[],countriesWithCodes:[],countries:[],provinces:[],cities:[],suburbs:[],postalCodes:[],bankBranches:[],locations:[],paymentDetails:[],paymentMethodList:[]}),Komodo.Application.UpgradeOrDowngradeController=Komodo.UI.Controller.extend({localeUpgradeOrDowngrade:"locale.manageviewing:upgradeOrDowngrade.",payNowPermission:"clarity://UpDowngrade-payNow/Allowed",navigationFrom:void 0,init:function(){this._super(),Komodo.log("Constructing Upgrade/Downgrade Controller"),this.set("processVersion","v1.1"),this.set("processName","Upgrade/Downgrade"),this.initializeGrid(),this.set("changeToPackageList",[]),this.set("changeToAddOnPackageList",[]),this.set("changeToAccessPackageList",[]),this.set("fromAddOnPackageList",[]),this.set("fromAccessPackageList",[]),this.set("allowUseCredit",void 0),this.set("allowGOtv",void 0),this.set("completePackageVisible",void 0)},initializeGrid:function(){this.dataGridColumnsQuoteSummary=[Komodo.Controls.DataGridColumn.create({name:"smartcardNumber",title:kl.value(this.localeUpgradeOrDowngrade+"smartcardNumber"),canEdit:!1,width:"230px"}),Komodo.Controls.DataGridColumn.create({name:"invoiceDescription",title:kl.value(this.localeUpgradeOrDowngrade+"invoiceDescription"),canEdit:!1,width:"500px"}),Komodo.Controls.DataGridColumn.create({name:"amountRequired",title:kl.value(this.localeUpgradeOrDowngrade+"amountRequired"),canEdit:!1,width:"200px",customClass:"komodo-decimal"}),Komodo.Controls.DataGridCommandColumn.create({title:kl.value(this.localeUpgradeOrDowngrade+"actions"),width:"150px",displayText:kl.value(this.localeUpgradeOrDowngrade+"viewDetails"),action:"viewQuoteDetails"})]},start:function(){this.initializeUpgradeOrDowngradeConstants(),this.set("upgradeOrDowngradeModel",Komodo.Models.UpgradeOrDowngradeModel.create()),this.set("sharedObject",Komodo.Application.ManageViewingSharedObjectController.create()),this.set("viewQuote",Komodo.Models.QuoteSummaryModel.create()),this.set("allowMNetAnalogueCustomer",!1),this.set("chargePeriodlst",[]),this.set("disableSTSPackages",!0),this.set("shortTermSubscriptionPackages",[]),this.upgradeOrDowngradeModel.set("annualSmartcards",[]),this.upgradeOrDowngradeModel.set("dppArray",[]),this.upgradeOrDowngradeModel.set("dppPrinciArray",[]),this.upgradeOrDowngradeModel.set("dppAddonAccess",!1),this.upgradeOrDowngradeModel.set("dppPrinc",!1),this.set("completePackageVisible",!1),this.set("isMNetAnalogueCustomer",!1),this.set("customerClass",void 0),this.set("isHolidayHomePrepaidPreActivate",!1),this.set("isFromHolidayHome",!1),this.set("AllowedCompletePackageChange",!1);Komodo.Services.ProductAndServiceMaintenanceHelper.create(),Komodo.Services.securityService.session.domainUserName,Komodo.Services.securityService.roles;if(this._super(),this.clearHardwares(),this.clearServiceLists(),this.setGOtvPermission(),this.isCustomerExist(),this.registerValidation(),this.declareAndSetVariable(),this.createNewGridItem(),this.getLoggedIncountry(),this.checkPayNowPerm(),this.setAllowUseCredit(),"FromHolidayHome"==this.navigationFrom){this.upgradeOrDowngradeModel.isHolidayHome=!0;var e=Komodo.Services.uiService.getController("holidayHomes"),t=e.holidayHomesModel.get("holidayHomesGeneralSmartcards"),a={Key:t,Value:t,Text:"Smartcard Number"};this.upgradeOrDowngradeModel.set("smartcards",a),this.set("isFromHolidayHome",!0)}else this.set("isFromHolidayHome",!1),this.upgradeOrDowngradeModel.isHolidayHome=!1;this.loadFeatureToggleItems(),this.setMNetAnalogueCustomerAllowed(),this.IsMNetAnalogue(),this.populatechargePeriod()},initializeUpgradeOrDowngradeConstants:function(){this.set("bundleProduct",GetClarityConstants("ManageViewingConstants","manageViewingConstants.upgradeDowngrade.bundleProduct")||[""]),this.set("MNET",GetClarityConstants("ManageViewingConstants","productsConstants.products.MNET").toString()),this.set("DPPHardwareProductList",GetClarityConstants("ManageViewingConstants","manageViewingConstants.upgradeDowngrade.DPPHardwareProduct")||[""]),this.set("excludedProductList",GetClarityConstants("ManageViewingConstants","manageViewingConstants.upgradeDowngrade.excludedProductNames")||[""]),this.set("excludedMnetProductList",GetClarityConstants("ManageViewingConstants","manageViewingConstants.upgradeDowngrade.excludedMnetProducts")||[""]),this.set("CUSTOMERCLASS_RESIDENTIAL",GetClarityConstants("ManageViewingConstants","CustomerTypesConstants.CUSTOMERCLASS_RESIDENTIAL").toString()),this.set("productSubstitution",GetClarityConstants("ManageViewingConstants","manageViewingConstants.upgradeDowngrade.productSubstitution").toString()),this.set("awaitingPaymentStatus",GetClarityConstants("ManageViewingConstants","manageViewingConstants.upgradeDowngrade.awaitingPayment").toString()),this.set("AllowUpgradeDowngradeProductStatus",GetClarityConstants("ManageViewingConstants","manageViewingConstants.upgradeDowngrade.allowupgradeDowngradeProductStatus")||[""]),this.set("SplPrincipalpackagesList",GetClarityConstants("ManageViewingConstants","manageViewingConstants.suspend.SPLproductIDs")||[""])},uninitializeUpgradeOrDowngradeConstants:function(){this.set("bundleProduct",void 0),this.set("MNET",void 0),this.set("DPPHardwareProductList",void 0),this.set("excludedProductList",void 0),this.set("excludedMnetProductList",void 0),this.set("CUSTOMERCLASS_RESIDENTIAL",void 0),this.set("productSubstitution",void 0),this.set("awaitingPaymentStatus",void 0),this.set("AllowUpgradeDowngradeProductStatus",void 0),this.set("SplPrincipalpackagesList",void 0)},loadFeatureToggleItems:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("SAClarityRoles","RolesAndPermissions").done(function(t){e.set("isClarityRolesEnabled",t),e.checkDeleteScheduleAllowed()}).fail(function(e){Komodo.Services.log("Error while checking feature toggle. Error Details:"+e)}),Komodo.Services.featureToggleService.isEnabled("ManageViewing","isHHPrepaidSA").done(function(t){e.set("isHolidayHomePrepaidPreActivate",t),"true"===t.toString().toLowerCase()&&"true"===e.get("isFromHolidayHome").toString().toLocaleLowerCase()?(e.set("preActivateVisible",!0),e.set("payNowVisible",!1)):e.set("preActivateVisible",!1)}).fail(function(e){Komodo.Services.log("Error while checking isHHPrepaidSA feature toggle. Error Details:"+e)}),Komodo.Services.featureToggleService.isEnabled("ManageViewing","AllowedCompletePackageChangePrapaidHH").done(function(t){"false"===t.toString().toLowerCase()&&"true"===e.get("isFromHolidayHome").toString().toLowerCase()?(e.set("completePackageVisible",!1),e.set("AllowedCompletePackageChange",!1)):(e.set("completePackageVisible",!0),e.set("AllowedCompletePackageChange",!0))}).fail(function(e){Komodo.Services.log("Error while checking feature toggle. Error Details:"+e)})},checkDeleteScheduleAllowed:function(){var e=this;e.isClarityRolesEnabled?e.upgradeOrDowngradeModel.set("isDeleteScheduleAllowed",Komodo.Services.securityService.hasPermission("clarity://scheduledChanges/canDelete")):e.upgradeOrDowngradeModel.set("isDeleteScheduleAllowed",!Komodo.Services.securityService.hasPermission("clarity://scheduledChanges/viewOnly"))},declareAndSetVariable:function(){this.set("quoteButtonDisable",!0),this.set("refreshButtonDisable",!0),this.set("isUpgradeOrDowngrade",!1),this.set("isUpgradeOrDowngrade",!1)},setGOtvPermission:function(){var e=this;e.set("allowGOtv",!1),Komodo.Services.featureToggleService.isEnabled("ManageViewing","AllowGOtvUpgradeDowngrade").done(function(t){void 0==t&&""==t&&null==t||"true"==t.toString().toLowerCase()&&e.set("allowGOtv",!0)}).fail(function(t){e.set("allowGOtv",!1)})},setMNetAnalogueCustomerAllowed:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("ManageViewing","AllowMNetUpgradeDowngrade").done(function(t){Ember.isEmpty(t)||"true"==t.toString().toLowerCase()&&e.set("allowMNetAnalogueCustomer",!0)}).fail(function(t){e.set("allowMNetAnalogueCustomer",!1)})},setAllowUseCredit:function(){var e=this;e.set("allowUseCredit",!1),Komodo.Services.featureToggleService.isEnabled("ManageViewing","AllowUseCreditForUpDowngrade").done(function(t){void 0==t&&""==t&&null==t||"true"==t.toString().toLowerCase()&&e.set("allowUseCredit",!0)}).fail(function(t){e.set("allowUseCredit",!1)})},checkPayNowPerm:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("ManageViewing","CheckPayNowPermission").done(function(t){if((void 0!=t||""!=t||null!=t)&&"true"==t.toString().toLowerCase())return e.payNowPermissionAllowed=!0,void e.setPayNowVisibility(e.payNowPermissionAllowed);e.payNowPermissionAllowed=!1,e.setPayNowVisibility(e.payNowPermissionAllowed)}).fail(function(t){this.set("PayNowAllowed",!1),e.setPayNowVisibility(e.payNowPermissionAllowed)})},setPayNowVisibility:function(e){var t=this;e&&"false"===t.get("isHolidayHomePrepaidPreActivate").toString().toLowerCase()?t.set("payNowVisible",!0):Komodo.Services.securityService.hasPermission(t.payNowPermission)&&"false"===t.get("isHolidayHomePrepaidPreActivate").toString().toLowerCase()?t.set("payNowVisible",!0):t.set("payNowVisible",!1)},isCustomerExist:function(){var e=Komodo.Services.ProductAndServiceMaintenanceHelper.create();if(!e.isCustomerIdIsAvailableToRetriveData())return void Komodo.Controls.MessageBoxController.show(kl.value(this.localeUpgradeOrDowngrade+"customerSearchNotFound"),kl.value(this.localeUpgradeOrDowngrade+"customerSearchNotFoundMessage"),Komodo.Controls.MessageBoxOkButton,this,"id123456");customerId=e.getCustomerIdToRetrieveData();var t=Komodo.Services.customerProfileService.getCustomerPersonalDetail();Ember.isEmpty(t)||Ember.isEmpty(t.customerClass)||this.set("customerClass",t.customerClass),this.bindSmartcards()},IsMNetAnalogue:function(){var e=this;if(e.get("allowMNetAnalogueCustomer")){var t=[];t.push(e.get("MNET"));var a={CustomerNumber:customerId,CommercialProductIds:t};Komodo.Services.queryService.postJSON("/AccountProfile/GetCustomertProductDetails",{data:a}).done(function(t){!Ember.isEmpty(t)&&t.CustomerProducts.length>0&&e.set("isMNetAnalogueCustomer",!0)}).error(function(e){var t=JSON.stringify(e);Komodo.log("ajax call failed. Error: "+t)})}},bindSmartcards:function(){var e=this;e.upgradeOrDowngradeModel.set("annualSmartcards",[]);var t,a=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),o=Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount;if(null!=(t=a.createArrayForSingleElement(o.Account))&&t.length>0)for(var s=0;s<t.length;s++)"9"!=t[s].Type&&e.getAllHardwares(t[s])},getAllHardwares:function(e){if(e){var t=this,a=void 0,o=!1,s=Komodo.Services.ProductAndServiceMaintenanceHelper.create();if(null!=e.ListOfAgreement&&null!=e.ListOfAgreement.Agreement)for(var r=s.createArrayForSingleElement(e.ListOfAgreement.Agreement),n=0;n<r.length;n++)for(var i=s.createArrayForSingleElement(r[n].ListOfHardware.Hardware),c=0;c<i.length;c++)if(null!=i[c].LinkedSmartcard&&void 0!=i[c].LinkedSmartcard&&""!=i[c].LinkedSmartcard){o=!1,!Ember.isEmpty(i[c].SecondaryHardware)&&i[c].SecondaryHardware.Hardware.length>0&&(o=!0);var l={Key:i[c].LinkedSmartcard,Value:i[c].LinkedSmartcard,Text:"Smartcard Number",DTTDecoder:null,isDTTDecoder:a};if("FromHolidayHome"==this.navigationFrom&&e.Type==Komodo.AccountTypes.HOLIDAY_HOME){if(t.smartcardList.length>0){var d=t.smartcardList.filter(function(e){return e.Key===l.Key});if(0===d.length&&null!=i[c].ListOfService.Service&&void 0!=i[c].ListOfService.Service&&""!=i[c].ListOfService.Service){for(var u=0;u<i[c].ListOfService.Service[0].ProductDetail.ProductFeatures.length;u++)if("AgreementId"==i[c].ListOfService.Service[0].ProductDetail.ProductFeatures[u].Description){var h=i[0].ListOfService.Service[0].ProductDetail.ProductFeatures[u].Value;void 0!=i[c].ListOfService.Service&&null!=i[c].ListOfService.Service&&""!=i[c].ListOfService.Service&&h==r[n].UID&&t.smartcardList.push(l)}for(var m=0;m<i[c].ListOfService.Service.length;m++)!Ember.isEmpty(t.get("DPPHardwareProductList"))&&t.get("DPPHardwareProductList").contains(i[c].ListOfService.Service[m].ProductDetail.Name.toString().toLowerCase())&&t.upgradeOrDowngradeModel.dppArray.push(i[c].LinkedSmartcard),!Ember.isEmpty(t.get("bundleProduct"))&&t.get("bundleProduct").contains(i[c].ListOfService.Service[m].ProductDetail.Name.toString().toLowerCase())&&t.upgradeOrDowngradeModel.dppPrinciArray.push(i[c].LinkedSmartcard)}}else if(null!=i[c].ListOfService.Service&&void 0!=i[c].ListOfService.Service&&""!=i[c].ListOfService.Service){for(var m=0;m<i[c].ListOfService.Service.length;m++)t.get("DPPHardwareProductList").contains(i[c].ListOfService.Service[m].ProductDetail.Name.toString().toLowerCase())&&t.upgradeOrDowngradeModel.dppArray.push(i[c].LinkedSmartcard),!Ember.isEmpty(t.get("bundleProduct"))&&t.get("bundleProduct").contains(i[c].ListOfService.Service[m].ProductDetail.Name.toString().toLowerCase())&&t.upgradeOrDowngradeModel.dppPrinciArray.push(i[c].LinkedSmartcard);for(var u=0;u<i[c].ListOfService.Service[0].ProductDetail.ProductFeatures.length;u++)if("AgreementId"==i[c].ListOfService.Service[0].ProductDetail.ProductFeatures[u].Description){var h=i[0].ListOfService.Service[0].ProductDetail.ProductFeatures[u].Value;void 0!=i[c].ListOfService.Service&&null!=i[c].ListOfService.Service&&""!=i[c].ListOfService.Service&&h==r[n].UID&&t.smartcardList.push(l)}}"12"==r[n].TermOfPayment&&t.upgradeOrDowngradeModel.annualSmartcards.push(i[c].LinkedSmartcard)}else if(e.Type!=Komodo.AccountTypes.HOLIDAY_HOME&&"FromHolidayHome"!=this.navigationFrom)if(t.smartcardList.length>0){var d=t.smartcardList.filter(function(e){return e.Key===l.Key});if(0===d.length){if(o)var l={Key:i[c].LinkedSmartcard+" "+kl.value(this.localeUpgradeOrDowngrade+"XtraView"),Value:i[c].LinkedSmartcard,Text:"Smartcard Number",DTTDecoder:null,isDTTDecoder:a};t.smartcardList.push(l)}}else{if(o)var l={Key:i[c].LinkedSmartcard+" "+kl.value(this.localeUpgradeOrDowngrade+"XtraView"),Value:i[c].LinkedSmartcard,Text:"Smartcard Number",DTTDecoder:null,isDTTDecoder:a};t.smartcardList.push(l)}if(t.allHardwares.push(i[c]),null!=i[c].ListOfService.Service&&void 0!=i[c].ListOfService.Service&&""!=i[c].ListOfService.Service)for(var m=0;m<i[c].ListOfService.Service.length;m++)!Ember.isEmpty(t.get("DPPHardwareProductList"))&&t.get("DPPHardwareProductList").contains(i[c].ListOfService.Service[m].ProductDetail.Name.toString().toLowerCase())&&t.upgradeOrDowngradeModel.dppArray.push(i[c].LinkedSmartcard),!Ember.isEmpty(t.get("bundleProduct"))&&t.get("bundleProduct").contains(i[c].ListOfService.Service[m].ProductDetail.Name.toString().toLowerCase())&&t.upgradeOrDowngradeModel.dppPrinciArray.push(i[c].LinkedSmartcard)}else if(null!=i[c].SerialNumber&&void 0!=i[c].SerialNumber&&""!=i[c].SerialNumber){if(t.get("allowGOtv")&&i[c].ListOfService.Service.length>0)if("M-NET"==i[c].ListOfService.Service[0].ProductDetail.Name.toUpperCase()){var g=i.filter(function(e){return"dtt decoder"==e.ProductDetail.Name.toLowerCase()});if(a=!1,g.length>0){a=!0;var p=g[0].SerialNumber,l={Key:i[c].SerialNumber,Value:i[c].SerialNumber,Text:"Device Number",DTTDecoder:p,isDTTDecoder:a}}else var l={Key:i[c].SerialNumber,Value:i[c].SerialNumber,Text:"Device Number",DTTDecoder:null,isDTTDecoder:a}}else var l={Key:i[c].SerialNumber,Value:i[c].SerialNumber,Text:"Device Number",DTTDecoder:null,isDTTDecoder:a};else var l={Key:i[c].SerialNumber,Value:i[c].SerialNumber,Text:"Device Number",DTTDecoder:null,isDTTDecoder:a};t.smartcardList.push(l),t.allHardwares.push(i[c])}}},populatechargePeriod:function(){this.set("chargePeriodlst",[]);var e=Komodo.Services.customerProfileService.get("invoicePeriod");this.set("chargePeriodlst",e)},chargePeriodPaymentOfMethodChanged:function(){var e=this;"1000"===e.get("upgradeOrDowngradeModel.chargePeriod")?(e.set("showSTSPackages",!0),Komodo.Services.cachedDataService.fetch("ShortTermSubscriptionPeriod",{}).done(function(t){e.set("shortTermSubscriptionPackages",[]),$.each(t,function(t,a){e.get("shortTermSubscriptionPackages").addObject(a)})}),e.set("disableSTSPackages",!1)):(e.set("disableSTSPackages",!0),e.set("showSTSPackages",!1),e.set("shortTermSubscriptionPackages",[]))}.observes("upgradeOrDowngradeModel.chargePeriod"),getProductsBasedOnDecoder:function(){var e=this;if(e.checkBOMDevice(),void 0!==e.get("productAddOn")&&e.get("productAddOn").length>0&&e.isMultipleAddonAllowed&&$.each(e.get("productAddOn"),function(e,t){t.isChecked=!1,t.disableMultipleAddOnProducts=!1}),e.dataService.clearAllProducts(e),!Ember.isEmpty(e.get("data.selectedPrimaryDecoder"))&&e.get("data.selectedPrimaryDecoder").isDisconnected){var t=$.grep(e.get("data.selectedPrimaryDecoder").servicesDetails.Service,function(t){return t.Status.toUpperCase()===e.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_DISCONNECTED").toUpperCase()});if(t.length>0&&$.grep(t,function(t){return t.ProductDetail.Type.toUpperCase()===e.getValueFromConstant("ProductsConstants","productsConstants.products.PRINCIPAL_CATEGORY").toUpperCase()}).length>0){
Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),kl.value(e._localeBase+"disconnectedRedirect"),Komodo.Controls.MessageBoxYesNoButtons,e,"id54456673","warning").response=function(e){"yes"===e&&Komodo.Services.uiService.transitionTo("/reconnect")}}}switch(e.get("data.selectedPrimaryDecoder")){case void 0:case null:case"":break;default:if(e.getcustomerDetails(),e.set("servicesNotSelected",!0),e.set("showPrimaryDecodeServices",!0),e.set("showPaymentOfMethod",!0),e.set("showPackages",!0),e.set("isGoTvDeviceSelected",!1),e.set("disablePrincipalProducts",!1),e.set("disableAddOnProducts",!1),e.set("principalPackageText",kl.value(e._localeBase+"principalPackage")),e.get("data.selectedPrimaryDecoder.isGotvDecoder")&&e.set("isGoTvDeviceSelected",!0),e.populateDetailsBasedOnDecoder(e.data.selectedPrimaryDecoder.decoderModel,e.allProductService,e.productService,e.data.selectedPrimaryDecoder.decoderCpcType,!1),e.populateDetailsBasedOnDecoder(e.data.selectedPrimaryDecoder.decoderModel,e.allInsurance,e.primaryInsuranceproducts,e.data.selectedPrimaryDecoder.decoderCpcType,!0),e.populateDetailsBasedOnDecoder(e.data.selectedPrimaryDecoder.decoderModel,e.allAccessService,e.primaryAccessServices,e.data.selectedPrimaryDecoder.decoderCpcType,!1),this.get("isSASpecific")&&(Ember.isEmpty(e.get("data.selectedPrimaryDecoder").servicesDetails)||$.grep(e.get("data.selectedPrimaryDecoder").servicesDetails.Service,function(t){return t.ProductDetail.UID===e.getValueFromConstant("ProductsConstants","productsConstants.products.MNET_GO")||t.ProductDetail.UID===e.getValueFromConstant("ProductsConstants","productsConstants.products.MNDCSN1")}).length<1)&&$.grep(e.get("productService"),function(t){return t.product.details.productID===e.getValueFromConstant("ProductsConstants","productsConstants.products.MNET_GO")||t.product.details.productID===e.getValueFromConstant("ProductsConstants","productsConstants.products.MNDCSN1")}).length>0&&$.grep(Komodo.Services.securityService.roles,function(e){return e.indexOf("-DSTVi")>-1}).length<1&&e.get("productService").removeObject($.grep(e.get("productService"),function(t){return t.product.details.productID===e.getValueFromConstant("ProductsConstants","productsConstants.products.MNET_GO")||t.product.details.productID===e.getValueFromConstant("ProductsConstants","productsConstants.products.MNDCSN1")})[0]),(e.primaryInsuranceproducts.length>0||e.primaryAccessServices.length>0)&&(e.set("data.primaryDecoder",e.get("data.selectedPrimaryDecoder.decoderSerialNumber")+" "+e.get("data.selectedPrimaryDecoder.decoderType")),e.insuranceSelection?Komodo.Services.securityService.hasPermission(e.insurancepermission)?e.enableFlags(e.primaryInsuranceproducts,["isCheckedPrimaryInsurance","checkedPrimaryInsurance"],!1):e.enableFlags(e.primaryInsuranceproducts,["checkedPrimaryInsurance"],!0):e.enableFlags(e.primaryInsuranceproducts,["isCheckedPrimaryInsurance","checkedPrimaryInsurance"],!1),e.enableFlags(e.primaryAccessServices,["checkedPrimaryAccessService"],!0)),void 0!==e.get("data.selectedPrimaryDecoder.secondaryDecoder")&&void 0!==e.get("data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber")&&null!==e.get("data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber")){var a=!1;e.primaryDevicesList.forEach(function(t){t.decoderSerialNumber===e.get("data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber")&&(a=!0)}),!1===a&&(e.set("showSecondaryDecodeServices",!0),e.populateDetailsBasedOnDecoder(e.data.selectedPrimaryDecoder.secondaryDecoder.decoderModel,e.allInsurance,e.secondaryInsuranceproducts,e.data.selectedPrimaryDecoder.secondaryDecoder.decoderCpcType,!0),e.populateDetailsBasedOnDecoder(e.data.selectedPrimaryDecoder.secondaryDecoder.decoderModel,e.allAccessService,e.secondaryAccessServices,e.data.selectedPrimaryDecoder.secondaryDecoder.decoderCpcType,!1),(e.secondaryInsuranceproducts.length>0||e.secondaryAccessServices.length>0)&&(e.set("data.secondaryDecoder",e.data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber+" "+e.data.selectedPrimaryDecoder.secondaryDecoder.decoderType),e.insuranceSelection?Komodo.Services.securityService.hasPermission(e.insurancepermission)?e.enableFlags(e.secondaryInsuranceproducts,["isCheckedSecondaryInsurance","checkedSecondaryInsurance"],!1):e.enableFlags(e.secondaryInsuranceproducts,["checkedSecondaryInsurance"],!0):e.enableFlags(e.secondaryInsuranceproducts,["isCheckedSecondaryInsurance","checkedSecondaryInsurance"],!1),e.enableFlags(e.secondaryAccessServices,["checkedSecondaryAccessService"],!0)))}e.get("isGoTvDeviceSelected")?e.populateMobileAddOns():e.get("data.selectedPrimaryDecoder.isMobileDecoder")&&(e.set("principalPackageText",kl.value(e._localeBase+"mobilePackages")),e.populateMobileAddOns()),e.getDecoderServices(),!1===e.get("isCheckedSecondaryAccessService")?e.set("showSecondaryAccessService",!0):e.set("showSecondaryAccessService",!1),Ember.isEmpty(e.data.selectedPrimaryDecoder.secondaryDecoder)||Ember.isEmpty($.grep(e.primaryInsuranceproducts,function(e){return!1===e.checkedPrimaryInsurance}))?e.set("showInsurance",!0):e.set("showInsurance",!1),void 0===e.data.selectedPrimaryDecoder.agreemntUId?e._customerClassSelected===e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.CUSTOMERCLASS_SPECIALIST")?e._customerTypeSelected===e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.DIPLOMAT")?e.set("disableDeviceUsage",!1):$.inArray(e._customerTypeSelected,[e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.MULTICHOICE"),e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.NASPERS"),e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.AGENCIES"),e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.EMPLOYEE"),e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.VIP"),e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.PANELIST"),e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.SHAREHOLDERS")])>=0?e.set("disableDeviceUsage",!1):e.get("isAllowHHForFieldTrialsExternalDemoInternalDemo")&&e._customerTypeSelected===e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.FIELD_TRIALS")?e.set("disableDeviceUsage",!1):(e._customerTypeSelected===e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.FIELD_TRIALS")||e._customerTypeSelected===e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.EXTERNAL_DEMO")||e._customerTypeSelected===e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.INTERNAL_DEMO"))&&e.get("isSASpecific")?e.set("disableDeviceUsage",!1):e.set("disableDeviceUsage",!0):e.set("disableDeviceUsage",!1):e._customerClassSelected!==e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.CUSTOMERCLASS_SPECIALIST")||e._customerTypeSelected!==e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.FIELD_TRIALS")&&e._customerTypeSelected!==e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.EXTERNAL_DEMO")&&e._customerTypeSelected!==e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.INTERNAL_DEMO")||(e.get("isSASpecific")?e.set("disableDeviceUsage",!1):e.set("disableDeviceUsage",!0))}e.get("data.selectedPrimaryDecoder.isMobileDecoder")&&e.set("disableDeviceUsage",!0),e.get("data.selectedPrimaryDecoder.isGotvDecoder")&&e.get("isAllowHHForFieldTrialsExternalDemoInternalDemo")&&e._customerTypeSelected!==e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.FIELD_TRIALS")&&e.enableDisableDeviceLocation(),!Ember.isEmpty(e.get("data.selectedPrimaryDecoder.addressDetails"))&&$.grep(e.hardwareAddressDetails,function(t){return t.dlAddressKey===e.get("data.selectedPrimaryDecoder.addressDetails").dlAddressKey}).length>0&&e.set("tempValue",$.grep(e.hardwareAddressDetails,function(t){return t.dlAddressKey===e.get("data.selectedPrimaryDecoder.addressDetails").dlAddressKey})[0]),Ember.isEmpty(e.get("data.selectedPrimaryDecoder.servicesDetails"))||(e.set("disablePaymentOptions",!0),e.set("disableSTSPackages",!0))},getSTSProducts:function(){var e=this;if(e.set("productService",[]),e.set("productAddOn",[]),e.set("data.addOnProductSelection",void 0),e.set("disableSTSPackages",!1),!Ember.isEmpty(e.get("data.selectedShortTermSubscriptionId"))){e.getProductsBasedOnDecoder();for(var t=e.get("productService").length;t--;)0===$.grep(e.get("productService")[t].product.price,function(t){return t.stsId===e.get("data.selectedShortTermSubscriptionId")}).length&&e.get("productService").splice(t,1)}},getDateObjectFromString:function(e){var t,a=new Date;return e&&(e.indexOf("-")>=0?(t=e.split("-"),a=new Date(new Date(parseInt(t[2],10),parseInt(t[1],10)-1,parseInt(t[0],10)))):e.indexOf("/")>=0&&(t=e.split("/"),a=new Date(new Date(parseInt(t[2],10),parseInt(t[1],10)-1,parseInt(t[0],10))))),a},getDateFromJavascriptDate:function(e){function t(e){var t=e.toString();return t.length<2?"0"+t:t}var a=e.getFullYear(),o=t(e.getMonth()+1);return t(e.getDate())+"-"+o+"-"+a},getFormatedDateForPopup:function(e){var t,a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];if(e){if(e.indexOf("-")>=0)return t=e.split(),t[2]+"-"+a[t[1]-1]+"-"+t[0];if(e.indexOf("/")>=0)return t=e.split("/"),t[0]+"-"+a[t[1]-1]+"-"+t[2]}return null},showBlockingBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,6e3,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},createArrayForSingleElement:function(e){var t=null;return void 0!=e&&(void 0==e.length?(t=new Array,t[0]=e):t=e),t},getHardwareDetails:function(e){var t=this;for(void 0!==e&&t.setInvoicingProfileDay(e),s=0;s<t.upgradeOrDowngradeModel.dppArray.length;s++)null!=e&&void 0!=e&&""!=e&&e.Value==t.upgradeOrDowngradeModel.dppArray[s]&&t.upgradeOrDowngradeModel.set("dppAddonAccess",!0);for(s=0;s<t.upgradeOrDowngradeModel.dppPrinciArray.length;s++)null!=e&&void 0!=e&&""!=e&&e.Value==t.upgradeOrDowngradeModel.dppPrinciArray[s]&&t.upgradeOrDowngradeModel.set("dppPrinc",!0);if(t.get("allHardwares").length>0){var a=t.get("allHardwares").filter(function(t){if(void 0!=t&&null!=t&&null!=e.Value&&""!=e.Value&&void 0!=e.Value)return null!=t.LinkedSmartcard&&""!=t.LinkedSmartcard&&void 0!=t.LinkedSmartcard?t.LinkedSmartcard==e.Value:t.SerialNumber==e.Value});void 0!=t.currentPrincipalService&&t.currentPrincipalService.clear(),void 0!=t.currentAddOnService&&t.currentAddOnService.clear(),void 0!=t.currentAccessService&&t.currentAccessService.clear();for(var o=0;o<a.length;o++){if(a[o].ListOfService&&a[o].ListOfService.Service&&(t.set("services",t.createArrayForSingleElement(a[o].ListOfService.Service)),null!=t.get("services")&&void 0!=t.get("services")))if(t.get("services").length>0){t.set("servicesForMessage",t.get("services")),t.get("upgradeOrDowngradeModel").set("principalServiceList",t.get("services").filter(function(e){return!t.get("excludedProductList").contains(e.ProductDetail.Name.toLowerCase())&&"principal"===e.ProductDetail.Type.toString().toLowerCase()&&t.get("AllowUpgradeDowngradeProductStatus").contains(e.Status.toString().toLowerCase())})),t.quoteRetreivalObject.clear();for(var s=0;s<t.get("services").length;s++)t.quoteRetreivalObject.addObject(t.get("services")[s].ProductDetail.Name);if(null!=t.get("upgradeOrDowngradeModel").get("principalServiceList")&&void 0!=t.get("upgradeOrDowngradeModel").get("principalServiceList")&&t.get("upgradeOrDowngradeModel").get("principalServiceList").length>0){t.upgradeOrDowngradeModel.set("principalCudDate",new Date(t.get("upgradeOrDowngradeModel").get("principalServiceList")[0].ChargeUntilDate)),t.bindToPackage(t.upgradeOrDowngradeModel.get("principalServiceList")),t.currentPrincipalService.pushObjects(t.displayingServiceNames(t.upgradeOrDowngradeModel.get("principalServiceList")));var r=t.getDateObjectFromString(t.getDateFromJavascriptDate(new Date)),n=Komodo.Services.uiService.getController("holidayHomes");if(null!=t.upgradeOrDowngradeModel.get("principalCudDate")&&""!=t.upgradeOrDowngradeModel.get("principalCudDate")&&void 0!=t.upgradeOrDowngradeModel.get("principalCudDate")){var i=new Date(t.upgradeOrDowngradeModel.get("principalCudDate")),c=i.getTime()-r.getTime(),l=Math.round(Math.abs(c/864e5));n.holidayHomesModel.set("viewDays",l)}else n.holidayHomesModel.set("viewDays","-")}t.get("upgradeOrDowngradeModel").set("addonServiceList",t.get("services").filter(function(e){return"addon"===e.ProductDetail.Type.toString().toLowerCase()&&t.get("AllowUpgradeDowngradeProductStatus").contains(e.Status.toString().toLowerCase())&&e.ProductDetail.Name.toString().toLowerCase()!="DMMPRK".toLowerCase()})),t.currentAddOnService.pushObjects(t.displayingServiceNames(t.upgradeOrDowngradeModel.get("addonServiceList"))),0==t.currentAddOnService.length?t.upgradeOrDowngradeModel.set("addOnVisibility",!1):(null!=t.get("upgradeOrDowngradeModel").get("addonServiceList")&&void 0!=t.get("upgradeOrDowngradeModel").get("addonServiceList")&&t.get("upgradeOrDowngradeModel").get("addonServiceList").length>0&&(t.bindToAddOnPackage(t.upgradeOrDowngradeModel.get("addonServiceList")),t.upgradeOrDowngradeModel.get("principalServiceList").length>0&&t.bindToPrincipalcompatibleAddonsPackages(t.upgradeOrDowngradeModel.get("principalServiceList")[0].ProductDetail.Name)),t.upgradeOrDowngradeModel.set("addOnVisibility",!0)),t.get("upgradeOrDowngradeModel").set("accessServiceList",t.get("services").filter(function(e){return"access"===e.ProductDetail.Type.toString().toLowerCase()&&t.get("AllowUpgradeDowngradeProductStatus").contains(e.Status.toString().toLowerCase())})),t.currentAccessService.pushObjects(t.displayingServiceNames(t.upgradeOrDowngradeModel.get("accessServiceList"))),0==t.currentAccessService.length?t.upgradeOrDowngradeModel.set("acessVisibility",!1):(null!=t.get("upgradeOrDowngradeModel").get("accessServiceList")&&void 0!=t.get("upgradeOrDowngradeModel").get("accessServiceList")&&t.get("upgradeOrDowngradeModel").get("accessServiceList").length>0&&(t.bindToAccessPackage(t.upgradeOrDowngradeModel.get("accessServiceList")),t.upgradeOrDowngradeModel.get("principalServiceList").length>0&&t.bindToPrincipalcompatibleAccessPackages(t.upgradeOrDowngradeModel.get("principalServiceList")[0].ProductDetail.Name)),t.upgradeOrDowngradeModel.set("acessVisibility",!0))}else{var d=Komodo.Controls.MessageBoxController.show(kl.value(t.localeUpgradeOrDowngrade+"noServicesForUpgardeDowngradeTitle"),kl.value(t.localeUpgradeOrDowngrade+"noServicesForUpgardeDowngradeMessage"),Komodo.Controls.MessageBoxOkButton,t,"id123456","warning");d.response=function(e){if("ok"==e)return t.upgradeOrDowngradeModel.set("isChangePackageVisible",!1),t.upgradeOrDowngradeModel.set("smartcards",null),!1}}if(null!=t.get("upgradeOrDowngradeModel.principalServiceList")&&void 0!=t.get("upgradeOrDowngradeModel.principalServiceList")){if(0!==t.get("upgradeOrDowngradeModel.principalServiceList").length&&0!=e.isDTTDecoder)return t.upgradeOrDowngradeModel.set("isChangePackageVisible",!0),!0;var u=t,d=Komodo.Controls.MessageBoxController.show(kl.value(u.localeUpgradeOrDowngrade+"noServicesForUpgardeDowngradeTitle"),kl.value(u.localeUpgradeOrDowngrade+"noServicesForUpgardeDowngradeMessage"),Komodo.Controls.MessageBoxOkButton,u,"id123456","warning");d.response=function(e){if("ok"==e)return u.upgradeOrDowngradeModel.set("isChangePackageVisible",!1),u.upgradeOrDowngradeModel.set("smartcards",null),!1}}}}},setInvoicingProfileDay:function(e){var t=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),a=Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount,o=t.createArrayForSingleElement(a.Account);if(null!=o&&void 0!=o&&o.length>0)for(var s=0;s<o.length;s++)if(null!=o[s].ListOfAgreement&&null!=o[s].ListOfAgreement.Agreement&&o[s].ListOfAgreement.Agreement.length>0){var r=t.createArrayForSingleElement(o[s].ListOfAgreement.Agreement);if(null!=r&&void 0!=r&&""!=r)for(var n=0;n<r.length;n++)if(null!=r[n].ListOfHardware&&void 0!=r[n].ListOfHardware&&""!=r[n].ListOfHardware&&null!=r[n].ListOfHardware.Hardware&&r[n].ListOfHardware.Hardware.length>0){var i=t.createArrayForSingleElement(o[s].ListOfAgreement.Agreement[n].ListOfHardware.Hardware);if(null!=i&&void 0!=i&&""!=i)for(var c=0;c<i.length;c++)i[c].LinkedSmartcard==e.Value?this.set("ip",o[s].InvoiceDay):i[c].SerialNumber==e.Value&&this.set("ip",o[s].InvoiceDay)}}},formatCudDate:function(e){var t=new Date(e.setDate(e.getDate()+1));return new Date(new Date(t).setMonth(t.getMonth()+12))},displayingServiceNames:function(e){var t=[];if(null!=e&&e.length>0)for(index=0;index<e.length;index++)this.get("allowGOtv")?t.pushObject(e[index].ProductDetail.Name):t.pushObject(e[index].ProductDetail.Name.substring(e[index].ProductDetail.Name.indexOf("-")+1).trim());return t},clearHardwares:function(){this.smartcardList.clear()},clearServiceLists:function(){void 0!=this.currentPrincipalService&&this.currentPrincipalService.clear(),void 0!=this.currentAddOnService&&this.currentAddOnService.clear(),void 0!=this.changeToPackageList&&this.changeToPackageList.clear(),void 0!=this.changeToAddOnPackageList&&this.changeToAddOnPackageList.clear(),void 0!=this.changeToAccessPackageList&&this.changeToAccessPackageList.clear(),void 0!=this.allHardwares&&this.allHardwares.clear()},registerValidation:function(){var e=this;e.registerValidator(e.get("upgradeOrDowngradeModel"),"changeToPackage",{type:"string",isRequired:!0,functions:Komodo.UI.Validators.RequiredValidator,displayName:"To"}),e.registerValidator(e.get("upgradeOrDowngradeModel"),"dateForChangePackage",{type:"date",minDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),displayName:"Date"}),e.registerValidator(e.get("upgradeOrDowngradeModel"),"changeToAddonPackage",{type:"string",isRequired:!0,functions:Komodo.UI.Validators.RequiredValidator,displayName:"To"}),e.registerValidator(e.get("upgradeOrDowngradeModel"),"dateForChangeAddonPackage",{type:"date",minDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),displayName:"Date"}),e.registerValidator(e.get("upgradeOrDowngradeModel"),"changeToAccessPackage",{type:"string",isRequired:!0,functions:Komodo.UI.Validators.RequiredValidator,displayName:"To"}),e.registerValidator(e.get("upgradeOrDowngradeModel"),"dateForChangeAccessPackage",{type:"date",minDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),displayName:"Date"})},bindToPackage:function(e){var t=Komodo.Services.QueryService.create();t.retrieveSelectedCountry();var a=this;if(null!=e&&e.length>0)for(index=0;index<e.length;index++)t.getJSON("/Device/GetUpgradeDowngradePackages?fromPackageName="+encodeURIComponent(e[index].ProductDetail.Name)).done(function(e){if(e.length>0){a.set("changeToPackageList",[]),a.setVisibility(!1);for(var t=0;t<e.length;t++)("EMOBILE"!=a.upgradeOrDowngradeModel.principalServiceList[0].ProductDetail.Name&&"DMPRM"!=a.upgradeOrDowngradeModel.principalServiceList[0].ProductDetail.Name||"DMMPRK"!=e[t].ToPackageName)&&(a.get("isMNetAnalogueCustomer")&&a.get("customerClass")==a.get("CUSTOMERCLASS_RESIDENTIAL")||!a.get("excludedMnetProductList").contains(e[t].ToPackageName.toLowerCase()))&&(a.isSPLPrincipalPackage()||a.changeToPackageList.pushObject({Key:e[t].ToPackageName,Value:e[t].ToPackageName,IsUpgrade:e[t].IsUpgrade}));!Ember.isEmpty(a.get("bundleProduct"))&&a.get("bundleProduct").contains(a.upgradeOrDowngradeModel.principalServiceList[0].ProductDetail.Name.toLowerCase())&&Komodo.Controls.MessageBoxController.show(kl.value(a.localeUpgradeOrDowngrade+"UpgradeDowngradeDPPHeader"),kl.value(a.localeUpgradeOrDowngrade+"BundleProductsNotAvailable"),Komodo.Controls.MessageBoxOkButton,a,"id123456","warning")}else!Ember.isEmpty(a.get("bundleProduct"))&&a.get("bundleProduct").contains(a.upgradeOrDowngradeModel.principalServiceList[0].ProductDetail.Name.toLowerCase())?Komodo.Controls.MessageBoxController.show(kl.value(a.localeUpgradeOrDowngrade+"UpgradeDowngradeDPPHeader"),kl.value(a.localeUpgradeOrDowngrade+"BundleProductsNotAvailable"),Komodo.Controls.MessageBoxOkButton,a,"id123456","warning"):a.isSPLPrincipalPackage()||Komodo.Controls.MessageBoxController.show(kl.value(a.localeUpgradeOrDowngrade+"serviceNotFound"),kl.value(a.localeUpgradeOrDowngrade+"servicesNotAvailableForPrincipal"),Komodo.Controls.MessageBoxOkButton,a,"id123456","warning")}).error(function(e){var t=JSON.stringify(e);Komodo.log("Notify Owner ajax call failed. Error: "+t),a.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(a.localeUpgradeOrDowngrade+"technicalError"),t,Komodo.Controls.MessageBoxOkButton,a,"id123456","danger").response=function(e){}})},bindToAddOnPackage:function(e){var t=Komodo.Services.QueryService.create();t.retrieveSelectedCountry();var a=this;if(a.changeToAddOnPackageList.clear(),null!=e&&e.length>0)for(this.getNewProcessID(),index=0;index<e.length;index++)t.getJSON("/Device/GetUpgradeDowngradePackages?fromPackageName="+encodeURIComponent(e[index].ProductDetail.Name)).done(function(e){if(e.length>0){a.set("changeToAddOnPackageList",[]),a.set("fromAddOnPackageList",[]);for(var t=0;t<e.length;t++)a.changeToAddOnPackageList.pushObject({Key:e[t].ToPackageName,Value:e[t].ToPackageName,IsUpgrade:e[t].IsUpgrade}),a.fromAddOnPackageList.pushObject({Key:e[t].ToPackageName,Value:e[t].ToPackageName,IsUpgrade:e[t].IsUpgrade})}}).error(function(e){var t=JSON.stringify(e);Komodo.log("Notify Owner ajax call failed. Error: "+t),a.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(a.localeUpgradeOrDowngrade+"technicalError"),t,Komodo.Controls.MessageBoxOkButton,a,"id123456","danger").response=function(e){}})},bindToAccessPackage:function(e){var t=Komodo.Services.QueryService.create();t.retrieveSelectedCountry();var a=this;if(a.changeToAccessPackageList.clear(),null!=e&&e.length>0)for(this.getNewProcessID(),index=0;index<e.length;index++)t.getJSON("/Device/GetUpgradeDowngradePackages?fromPackageName="+encodeURIComponent(e[index].ProductDetail.Name)).done(function(e){if(e.length>0){a.set("changeToAccessPackageList",[]),a.set("fromAccessPackageList",[]);for(var t=0;t<e.length;t++)a.changeToAccessPackageList.pushObject({Key:e[t].ToPackageName,Value:e[t].ToPackageName,IsUpgrade:e[t].IsUpgrade}),a.fromAccessPackageList.pushObject({Key:e[t].ToPackageName,Value:e[t].ToPackageName,IsUpgrade:e[t].IsUpgrade})}else if(a.upgradeOrDowngradeModel.get("dppPrinc")){Komodo.Controls.MessageBoxController.show(kl.value(a.localeUpgradeOrDowngrade+"serviceNotFound"),kl.value(a.localeUpgradeOrDowngrade+"servicesNotAvailableForAccess"),Komodo.Controls.MessageBoxOkButton,a,"id123456","warning")}}).error(function(e){var t=JSON.stringify(e);Komodo.log("Notify Owner ajax call failed. Error: "+t),a.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(a.localeUpgradeOrDowngrade+"technicalError"),t,Komodo.Controls.MessageBoxOkButton,a,"id123456","danger").response=function(e){}})},bindToPrincipalcompatibleAddonsPackages:function(e){var t=Komodo.Services.QueryService.create();t.retrieveSelectedCountry();var a=this;null!=e&&void 0!=e&&(a.getNewProcessID(),t.getJSON("/Device/GetAddOnsByPrincipalPackage?principalPackage="+encodeURIComponent(e)).done(function(e){if(a.hideBusyIndicator(),e.length>0&&null!=e&&void 0!=e){var t=new Array;e.forEach(function(e){t.push(a.fromAddOnPackageList.filter(function(t){return e.Name===t.Key}))}),a.set("changeToAddOnPackageList",[]);for(var o=0;o<t.length;o++)null!=t.objectAt(o)&&void 0!=t.objectAt(o)&&0!=t.objectAt(o).length&&a.changeToAddOnPackageList.pushObject({Key:t.objectAt(o)[0].Key,Value:t.objectAt(o)[0].Value,IsUpgrade:t.objectAt(o)[0].IsUpgrade});null==a.changeToAddOnPackageList||void 0==a.changeToAddOnPackageList||0==a.changeToAddOnPackageList.length?a.setAddonVisibility(!0,!0):a.setAddonVisibility(!1,null)}else a.set("changeToAddOnPackageList",[]),a.setAddonVisibility(!0,!0)}).error(function(e){a.hideBusyIndicator();var t=JSON.stringify(e);Komodo.log("Notify Owner ajax call failed. Error: "+t),Komodo.Controls.MessageBoxController.show(kl.value(a.localeUpgradeOrDowngrade+"technicalError"),t,Komodo.Controls.MessageBoxOkButton,a,"id123456","danger").response=function(e){}}))},bindToPrincipalcompatibleAccessPackages:function(e){var t=Komodo.Services.QueryService.create();t.retrieveSelectedCountry();var a=this;null!=e&&void 0!=e&&(a.getNewProcessID(),t.getJSON("/Device/GetAccessByPrincipalPackage?principalPackage="+encodeURIComponent(e)).done(function(e){if(a.hideBusyIndicator(),e.length>0&&null!=e&&void 0!=e){var t=new Array;e.forEach(function(e){t.push(a.fromAccessPackageList.filter(function(t){return e.Name===t.Key}))}),a.set("changeToAccessPackageList",[]);for(var o=0;o<t.length;o++)null!=t.objectAt(o)&&void 0!=t.objectAt(o)&&0!=t.objectAt(o).length&&a.changeToAccessPackageList.pushObject({Key:t.objectAt(o)[0].Key,Value:t.objectAt(o)[0].Value,IsUpgrade:t.objectAt(o)[0].IsUpgrade});null==a.changeToAccessPackageList||void 0==a.changeToAccessPackageList||0==a.changeToAccessPackageList.length?a.setAccessVisibility(!0,!0):a.setAccessVisibility(!1,null)}else a.set("changeToAccessPackageList",[]),a.setAccessVisibility(!0,!0)}).error(function(e){a.hideBusyIndicator();var t=JSON.stringify(e);Komodo.log("Notify Owner ajax call failed. Error: "+t),Komodo.Controls.MessageBoxController.show(kl.value(a.localeUpgradeOrDowngrade+"technicalError"),t,Komodo.Controls.MessageBoxOkButton,a,"id123456","danger").response=function(e){}}))},qouteRetreival:function(e){var t=this,a=this.get("sharedObject");t.quoteRequestObject.clear(),Komodo.Services.queryService.postJSON("/Quote/RetrieveICCQuotes?serialNumber="+t.upgradeOrDowngradeModel.get("smartcards.Value"),{data:e}).done(function(e){t.hideBusyIndicator();var o=!1;if(!Ember.isEmpty(e)&&e.length>0&&e.forEach(function(a){void 0!=a.QuoteGenerationMethod&&""!=a.QuoteGenerationMethod&&null!=a.QuoteGenerationMethod&&a.QuoteGenerationMethod!=GetReason("QuoteGenerationMethod","Service_Retention_Quote")&&a.SourceEvent.toString().toLowerCase()==t.get("productSubstitution").toLowerCase()&&(e[0]=a,o=!0)}),o){if(new Date(e[0].ExecutionDate).setHours(0,0,0,0)>(new Date).setHours(0,0,0,0)?("true"==t.get("isHolidayHomePrepaidPreActivate").toString().toLowerCase()&&"true"==t.get("upgradeOrDowngradeModel.isHolidayHome").toString().toLowerCase()&&t.set("preActivateDisable",!0),t.set("completePackageDisable",!0)):("true"==t.get("isHolidayHomePrepaidPreActivate").toString().toLowerCase()&&"true"==t.get("upgradeOrDowngradeModel.isHolidayHome").toString().toLowerCase()&&t.set("preActivateDisable",!1),t.set("completePackageDisable",!1)),t.set("dataObject",e),t.populateGrid(e),t.set("toDropdownDisable",!0),t.set("datePickerDisable",!0),t.set("toAddonDropdownDisable",!0),t.set("addondatePickerDisable",!0),t.set("toAccessDropdownDisable",!0),t.set("accessdatePickerDisable",!0),t.upgradeOrDowngradeModel.get("isScheduledChangesExist")){var s=Komodo.Controls.MessageBoxController.show(kl.value(t.localeUpgradeOrDowngrade+"genericMessageTitle"),kl.value(t.localeUpgradeOrDowngrade+"confirmDeletePreviousSchedules"),Komodo.Controls.MessageBoxYesNoButtons,t,"id789679","warning");s.response=function(e){"yes"===e?t.upgradeOrDowngradeModel.get("isDeleteScheduleAllowed")?(t.getNewProcessID(),t.showBlockingBusyIndicator(),a.deleteMultipleScheduledChanges(t.upgradeOrDowngradeModel.deleteScheduleList,!0),t.hideBusyIndicator()):(Komodo.Controls.MessageBoxController.show(kl.value(t.localeUpgradeOrDowngrade+"deleteScheduleNotAllowedHeader"),kl.value(t.localeUpgradeOrDowngrade+"deleteScheduleNotAllowed"),Komodo.Controls.MessageBoxOkButton,t,"id5446673","warning"),"ok"===e&&(t.getNewProcessID(),t.showBlockingBusyIndicator(),t.rejectLatestQuote(),t.hideBusyIndicator())):(t.getNewProcessID(),t.showBlockingBusyIndicator(),t.rejectLatestQuote(),t.hideBusyIndicator())}}}else null==t.changeToPackageList||void 0==t.changeToPackageList||0==t.changeToPackageList.length?t.setVisibility(!0):t.setVisibility(!1),null==t.changeToAddOnPackageList||void 0==t.changeToAddOnPackageList||0==t.changeToAddOnPackageList.length?t.setAddonVisibility(!0,!0):t.setAddonVisibility(!1,null),null==t.changeToAccessPackageList||void 0==t.changeToAccessPackageList||0==t.changeToAccessPackageList.length?t.setAccessVisibility(!0,!0):t.setAccessVisibility(!1,null),t.get("isUpgradeOrDowngrade")&&(Komodo.Controls.MessageBoxController.show(kl.value(t.localeUpgradeOrDowngrade+"quoteNotRetreived"),kl.value(t.localeUpgradeOrDowngrade+"quoteNotRetreivedMessage"),Komodo.Controls.MessageBoxOkButton,t,"id123456","warning"),t.set("isUpgradeOrDowngrade",!1))}).error(function(e){t.hideBusyIndicator();var a=JSON.stringify(e);Komodo.log("Notify Owner ajax call failed. Error: "+a),Komodo.Controls.MessageBoxController.show(kl.value(t.localeUpgradeOrDowngrade+"technicalError"),a,Komodo.Controls.MessageBoxOkButton,t,"id123456","danger")})},setVisibility:function(e){var t=this;t.upgradeOrDowngradeModel.get("dppPrinc")?(t.set("toDropdownDisable",!0),t.set("datePickerDisable",!0)):(t.set("toDropdownDisable",e),t.set("datePickerDisable",e))},setAddonVisibility:function(e,t){var a=this;Ember.isEmpty(a.upgradeOrDowngradeModel)||(a.upgradeOrDowngradeModel.get("dppPrinc")?(a.set("toAddonDropdownDisable",e),a.set("addondatePickerDisable",t)):(a.set("toAddonDropdownDisable",e),null!=t&&a.set("addondatePickerDisable",t)))},setAccessVisibility:function(e,t){var a=this;null!=a.upgradeOrDowngradeModel&&""!=a.upgradeOrDowngradeModel&&void 0!=a.upgradeOrDowngradeModel&&(a.upgradeOrDowngradeModel.get("dppPrinc")?(a.set("toAccessDropdownDisable",!1),a.set("accessdatePickerDisable",!0),null!=a.get("changeToAddOnPackageList")&&void 0!=a.get("changeToAddOnPackageList")&&""!=a.get("changeToAddOnPackageList")?a.set("accessdatePickerDisable",!0):a.set("accessdatePickerDisable",!1)):(a.set("toAccessDropdownDisable",e),null!=t&&a.set("accessdatePickerDisable",t)))},setQuoteVisibility:function(e){this.set("quoteButtonDisable",e)},setVisibilityForPanels:function(e){this.upgradeOrDowngradeModel.set("isChangePackageVisible",e),this.upgradeOrDowngradeModel.set("isQuoteSummaryVisible",e)},qouteRetreivalForActive:function(){var e=this,t=new Array,a=new Array,o=new Object;e.set("isUpgrade",void 0),e.quoteRetreivalObject.clear(),null!=e.upgradeOrDowngradeModel.get("changeToPackage.Value")&&void 0!=e.upgradeOrDowngradeModel.get("changeToPackage.Value")&&""!=e.upgradeOrDowngradeModel.get("changeToPackage.Value")?(e.quoteRetreivalObject.addObject(e.upgradeOrDowngradeModel.principalServiceList[0].ProductDetail.Name),e.quoteRetreivalObject.addObject(e.upgradeOrDowngradeModel.get("changeToPackage.Value")),null!=e.upgradeOrDowngradeModel.dateForChangePackage&&void 0!=e.upgradeOrDowngradeModel.dateForChangePackage&&""!=e.upgradeOrDowngradeModel.dateForChangePackage&&(o.ScheduleUpgradeDowngradeDate=e.upgradeOrDowngradeModel.dateForChangePackage.toLocaleDateString("sv-SE"))):null!=e.upgradeOrDowngradeModel.get("changeToAddonPackage.Value")&&void 0!=e.upgradeOrDowngradeModel.get("changeToAddonPackage.Value")&&""!=e.upgradeOrDowngradeModel.get("changeToAddonPackage.Value")?(e.quoteRetreivalObject.addObject(e.upgradeOrDowngradeModel.addonServiceList[0].ProductDetail.Name),e.quoteRetreivalObject.addObject(e.upgradeOrDowngradeModel.get("changeToAddonPackage.Value")),
null!=e.upgradeOrDowngradeModel.dateForChangeAddonPackage&&void 0!=e.upgradeOrDowngradeModel.dateForChangeAddonPackage&&""!=e.upgradeOrDowngradeModel.dateForChangeAddonPackage&&(o.ScheduleUpgradeDowngradeDate=e.upgradeOrDowngradeModel.dateForChangeAddonPackage.toLocaleDateString("sv-SE"))):null!=e.upgradeOrDowngradeModel.get("changeToAccessPackage.Value")&&void 0!=e.upgradeOrDowngradeModel.get("changeToAccessPackage.Value")&&""!=e.upgradeOrDowngradeModel.get("changeToAccessPackage.Value")?(e.quoteRetreivalObject.addObject(e.upgradeOrDowngradeModel.accessServiceList[0].ProductDetail.Name),e.quoteRetreivalObject.addObject(e.upgradeOrDowngradeModel.get("changeToAccessPackage.Value")),null!=e.upgradeOrDowngradeModel.dateForChangeAccessPackage&&void 0!=e.upgradeOrDowngradeModel.dateForChangeAccessPackage&&""!=e.upgradeOrDowngradeModel.dateForChangeAccessPackage&&(o.ScheduleUpgradeDowngradeDate=e.upgradeOrDowngradeModel.dateForChangeAccessPackage.toLocaleDateString("sv-SE"))):o.ScheduleUpgradeDowngradeDate=null,null!=e.upgradeOrDowngradeModel.get("changeToPackage.Value")&&void 0!=e.upgradeOrDowngradeModel.get("changeToPackage.Value")&&""!=e.upgradeOrDowngradeModel.get("changeToPackage.Value")&&(a.pushObject(e.upgradeOrDowngradeModel.get("changeToPackage.Value")),t.pushObject(e.upgradeOrDowngradeModel.principalServiceList[0].ProductDetail.Name),e.set("isUpgrade",e.upgradeOrDowngradeModel.get("changeToPackage.IsUpgrade"))),null!=e.upgradeOrDowngradeModel.get("changeToAddonPackage.Value")&&void 0!=e.upgradeOrDowngradeModel.get("changeToAddonPackage.Value")&&""!=e.upgradeOrDowngradeModel.get("changeToAddonPackage.Value")&&(a.pushObject(e.upgradeOrDowngradeModel.get("changeToAddonPackage.Value")),t.pushObject(e.upgradeOrDowngradeModel.addonServiceList[0].ProductDetail.Name),1!=e.get("isUpgrade")&&null!=e.get("isUpgrade")&&void 0!=e.get("isUpgrade")&&""!==e.get("isUpgrade")||e.set("isUpgrade",e.upgradeOrDowngradeModel.get("changeToAddonPackage.IsUpgrade"))),null!=e.upgradeOrDowngradeModel.get("changeToAccessPackage.Value")&&void 0!=e.upgradeOrDowngradeModel.get("changeToAccessPackage.Value")&&""!=e.upgradeOrDowngradeModel.get("changeToAccessPackage.Value")&&(a.pushObject(e.upgradeOrDowngradeModel.get("changeToAccessPackage.Value")),t.pushObject(e.upgradeOrDowngradeModel.accessServiceList[0].ProductDetail.Name),1!=e.get("isUpgrade")&&null!=e.get("isUpgrade")&&void 0!=e.get("isUpgrade")&&""!==e.get("isUpgrade")||e.set("isUpgrade",e.upgradeOrDowngradeModel.get("changeToAccessPackage.IsUpgrade"))),e.get("allowGOtv")&&a.contains("M-Net DTT")&&e.upgradeOrDupgradeDowngradePostObjectowngradeModel.get("smartcards.isDTTDecoder")?o.DeviceSerialNumber=e.upgradeOrDowngradeModel.get("smartcards.DTTDecoder"):o.DeviceSerialNumber=e.upgradeOrDowngradeModel.get("smartcards.Value"),o.ToPackageNames=a.reverse(),o.FromPackageNames=t.reverse();var s=new Object;e.isChargePeriodApplicable&&(s.ChargePeriods=e.get("upgradeOrDowngradeModel.chargePeriod"),s.ShortTermSubscriptionPeriodId=e.get("upgradeOrDowngradeModel.selectedShortTermSubscriptionId")),o.ChargePeriod=s,e.getNewProcessID(),e.showBlockingBusyIndicator(),e.getScheduledChanges(),Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+customerId),Komodo.Services.queryService.postJSON("/Device/upgradeordowngradepackages",{data:o}).done(function(t){if(null!=t&&void 0!=t){var a=e.get("sharedObject"),s=Komodo.Services.ProductAndServiceMaintenanceHelper.create();if(a.retrieveFinancialAccountsForManageViewing(s.getCustomerIdToRetrieveData()),0==t.outcome.Status)e.upgradeOrDowngradeModel.dppPrinciArray.contains(o.DeviceSerialNumber)?(e.hideBusyIndicator(),e.showUpDowngradeResultMessage(o.ScheduleUpgradeDowngradeDate)):(e.set("refreshButtonDisable",!1),e.set("isUpgradeOrDowngrade",!0),e.qouteRetreival(e.quoteRetreivalObject));else{e.hideBusyIndicator();Komodo.Controls.MessageBoxController.show(kl.value(e.localeUpgradeOrDowngrade+"technicalError"),t.outcome.ResponseMessage,Komodo.Controls.MessageBoxOkButton,e,"id123456","danger").response=function(t){"ok"==t&&(e.upgradeOrDowngradeModel.set("changeToPackage",void 0),e.upgradeOrDowngradeModel.set("changeToAddonPackage",void 0),e.upgradeOrDowngradeModel.set("changeToAccessPackage",void 0),e.upgradeOrDowngradeModel.set("dateForChangePackage",null),e.upgradeOrDowngradeModel.set("dateForChangeAddonPackage",null),e.upgradeOrDowngradeModel.set("dateForChangeAccessPackage",null))}}}}).error(function(t){e.hideBusyIndicator();var a=JSON.stringify(t);if(Komodo.log("Notify Owner ajax call failed. Error: "+a),e.set("refreshButtonDisable",!0),null!=e.upgradeOrDowngradeModel.dateForChangePackage)for(var o=0;o<e.changeToPackageList.length;o++){if(e.changeToPackageList[o].Value==e.upgradeOrDowngradeModel.get("changeToPackage.Value")&&e.changeToPackageList[o].IsUpgrade){e.publishCreateActivityFaliure("scheduleUpgradeFailiure",e.upgradeOrDowngradeModel.dateForChangePackage.toLocaleDateString("sv-SE"),e.upgradeOrDowngradeModel.principalServiceList[0].ProductDetail.Name,a);break}if(e.changeToPackageList[o].Value==e.upgradeOrDowngradeModel.get("changeToPackage.Value")&&!e.changeToPackageList[o].IsUpgrade){e.publishCreateActivityFaliure("scheduleDowngradeFailiure",e.upgradeOrDowngradeModel.dateForChangePackage.toLocaleDateString("sv-SE"),e.upgradeOrDowngradeModel.principalServiceList[0].ProductDetail.Name,a);break}}else for(var o=0;o<e.changeToPackageList.length;o++){if(e.changeToPackageList[o].Value==e.upgradeOrDowngradeModel.get("changeToPackage.Value")&&e.changeToPackageList[o].IsUpgrade){e.publishCreateActivityFaliure("immediateUpgradeFailiure",(new Date).toLocaleDateString("sv-SE"),e.upgradeOrDowngradeModel.principalServiceList[0].ProductDetail.Name,a);break}if(e.changeToPackageList[o].Value==e.upgradeOrDowngradeModel.get("changeToPackage.Value")&&!e.changeToPackageList[o].IsUpgrade){e.publishCreateActivityFaliure("scheduleDowngradeFaliure",(new Date).toLocaleDateString("sv-SE"),e.upgradeOrDowngradeModel.principalServiceList[0].ProductDetail.Name,a);break}}Komodo.Controls.MessageBoxController.show(kl.value(e.localeUpgradeOrDowngrade+"technicalError"),a,Komodo.Controls.MessageBoxOkButton,e,"id123456","danger").response=function(t){"ok"==t&&e.setVisibility(!1)}})},serviceDataCheck:function(e){return null!=e&&void 0!=e&&""!=e},getPreviousSchedules:function(){var e=this;e.upgradeOrDowngradeModel.deleteScheduleList.clear(),e.upgradeOrDowngradeModel.set("isScheduledChangesExist",!1),!Ember.isEmpty(e.upgradeOrDowngradeModel.scheduledChangesList)&&e.upgradeOrDowngradeModel.scheduledChangesList.length>0&&e.upgradeOrDowngradeModel.selctedProductIds.forEach(function(t){e.upgradeOrDowngradeModel.scheduledChangesList.forEach(function(a){a.ChildSchedules.forEach(function(o){o.ProductId!=t||e.upgradeOrDowngradeModel.deleteScheduleList.contains(a.ScheduleId)||(e.upgradeOrDowngradeModel.set("isScheduledChangesExist",!0),e.upgradeOrDowngradeModel.deleteScheduleList.push(a.ScheduleId))})})})},getScheduledChanges:function(){var e=this;Komodo.Services.queryService.getJSON("/ScheduledChanges/GetScheduledChanges?customerNumber="+customerId,{async:!1}).done(function(t){!Ember.isEmpty(t.ScheduleList)&&t.ScheduleList.length>0&&(e.upgradeOrDowngradeModel.scheduledChangesList.clear(),e.upgradeOrDowngradeModel.scheduledChangesList.pushObjects(t.ScheduleList),e.getPreviousSchedules())}).error(function(t){var a=JSON.stringify(t);Komodo.log("Notify Owner ajax call failed. Error: "+a),Komodo.Controls.MessageBoxController.show(kl.value(e.localeUpgradeOrDowngrade+"technicalError"),a,Komodo.Controls.MessageBoxOkButton,e,"id123456","danger").response=function(e){}})},createNewGridItem:function(){var e=Komodo.Models.QuoteSummaryModel.create();this.set("newQuoteSummaryGridItem",e)},populateGrid:function(e){var t=this,a=void 0;if(this.lineItemArray.clear(),null!=e&&void 0!=e){if(e.length>0&&null!=e[0].LineItems&&e[0].LineItems.length>0){this.upgradeOrDowngradeModel.quoteSummary.clear();for(var o=0;o<e[0].LineItems.length>0;o++)t.newQuoteSummaryGridItem.set("smartcardNumber",t.upgradeOrDowngradeModel.get("smartcards.Value")),t.newQuoteSummaryGridItem.set("invoiceDescription",e[0].LineItems[o].InvoiceText),t.newQuoteSummaryGridItem.set("amountRequired",parseFloat(e[0].LineItems[o].Amount).toFixed(2)),t.newQuoteSummaryGridItem.set("startDate",XDates.getformatedDateforDatepicker(new Date(e[0].LineItems[o].StartDate))),t.newQuoteSummaryGridItem.set("tax",e[0].LineItems[o].TaxAmount),t.newQuoteSummaryGridItem.set("noOfUnits",e[0].LineItems[o].NumberOfUnits),t.newQuoteSummaryGridItem.set("endDate",XDates.getformatedDateforDatepicker(new Date(e[0].LineItems[o].EndDate))),t.newQuoteSummaryGridItem.set("lineItemId",e[0].LineItems[o].Id),t.newQuoteSummaryGridItem.set("balanceAvailable",e[0].LineItems[o].Amount),t.newQuoteSummaryGridItem.set("currencyMnemonic",e[0].LineItems[o].CurrencyMnemonic),a=e[0].LineItems[o].CurrencyMnemonic,t.addGridRow()}-e[0].FinancialAccountCurrentBalance>=e[0].TotalAmount?(this.upgradeOrDowngradeModel.set("isFundsAvailable",!0),this.upgradeOrDowngradeModel.set("totalAmountRequired",a+" 0.00")):(this.newQuoteSummaryGridItem.set("amountRequired",parseFloat(e[0].TotalAmount- -e[0].FinancialAccountCurrentBalance).toFixed(2)),parseFloat(e.TotalAmount- -e[0].FinancialAccountCurrentBalance).toFixed(2),this.upgradeOrDowngradeModel.set("isFundsAvailable",!1),this.upgradeOrDowngradeModel.set("totalAmountRequired",a+" "+parseFloat(e[0].FinancialAccountCurrentBalance+e[0].TotalAmount).toFixed(2)),t.allowUseCredit?"true"===t.get("isFromHolidayHome").toString().toLowerCase()?"true"===t.get("AllowedCompletePackageChange").toString().toLowerCase()?this.set("completePackageVisible",!0):this.set("completePackageVisible",!1):this.set("completePackageVisible",!0):this.set("completePackageVisible",!1))}void 0!=this.get("dataGridFooters")[0]&&this.get("dataGridFooters")[0].clear(),this.get("dataGridFooters")[0].addObject(Komodo.Controls.DataGridFooterColumn.create({content:void 0})),this.get("dataGridFooters")[0].addObject(Komodo.Controls.DataGridFooterColumn.create({content:"Total",columnSpan:1})),this.get("dataGridFooters")[0].addObject(Komodo.Controls.DataGridFooterColumn.create({content:parseFloat(e[0].TotalAmount).toFixed(2),columnSpan:1,customClass:"komodo-decimal"})),this.get("dataGridFooters")[0].addObject(Komodo.Controls.DataGridFooterColumn.create({content:void 0})),this.upgradeOrDowngradeModel.set("isQuoteSummaryVisible",!0),this.set("quoteButtonDisable",!0),this.viewQuote.set("quoteId",e[0].Id),this.quoteIDArray.addObject(this.viewQuote.get("quoteId")),this.viewQuote.set("financialAccountId",e[0].FinancialAccountId),this.viewQuote.set("quoteStatus",e[0].QuoteStatus)},getNewProcessID:function(){this.startNewProcess()},addGridRow:function(){0===this.upgradeOrDowngradeModel.quoteSummary.length?this.upgradeOrDowngradeModel.set("quoteSummary",[this.get("newQuoteSummaryGridItem")]):this.upgradeOrDowngradeModel.quoteSummary.pushObject(this.get("newQuoteSummaryGridItem")),this.createNewGridItem()},getLoggedIncountry:function(){var e=this;Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(t){quoteCountry=t.data.countryId,e.set("language",Komodo.Services.localizationService.getCurrentLanguage()),e.set("loggedInCountryName",t.data.countryId)})},smartcardSelectionChanged:function(){var e=this;if(e.changeToAccessPackageList.clear(),e.changeToAddOnPackageList.clear(),e.upgradeOrDowngradeModel.set("dppAddonAccess",!1),e.upgradeOrDowngradeModel.set("dppPrinc",!1),e.upgradeOrDowngradeModel.set("quoteButtonDisable",!0),e.upgradeOrDowngradeModel.principalServiceList.clear(),null!==e.upgradeOrDowngradeModel.smartcards&&void 0!==e.upgradeOrDowngradeModel.smartcards&&""!==e.upgradeOrDowngradeModel.smartcards){e.setVisibilityForPanels(!1),e.set("isUpgradeOrDowngrade",!1);var t=!1;if(t=e.getHardwareDetails(e.upgradeOrDowngradeModel.smartcards)){e.getNewProcessID(),e.showBlockingBusyIndicator(),e.isChargePeriodApplicable=!1,Komodo.Services.featureToggleService.isEnabled("ManageViewing","isOnlyGotvChargePeriodChange").done(function(t){e.allowedChargePeriod=t}).fail(function(){e.allowedChargePeriod=!1}),e.allowedChargePeriod||Komodo.Services.featureToggleService.isEnabled("ManageViewing","isChargePeriodApplicable").done(function(t){e.isChargePeriodApplicable=t}).fail(function(){e.isChargePeriodApplicable=!1});var a=GetClarityConstants("ManageViewingConstants","manageViewingConstants.upgradeDowngrade.allowedChargePeriod"),o=GetClarityConstants("ManageViewingConstants","manageViewingConstants.upgradeDowngrade.gotvProductList");if(e.allowedChargePeriod)for(var s=0;s<o.length;s++)e.upgradeOrDowngradeModel.principalServiceList[0].ProductDetail.UID!==o[s]&&e.upgradeOrDowngradeModel.principalServiceList[0].ChargePeriod.toString().toLowerCase()!==a[0].toString().toLowerCase()||(e.isChargePeriodApplicable=!0,e.showSTSPackages=!0);if(!o.includes(e.upgradeOrDowngradeModel.principalServiceList[0].ProductDetail.UID))for(var r=GetClarityConstants("ManageViewingConstants","manageViewingConstants.upgradeDowngrade.chargePeriodNotAllowed"),s=0;s<r.length;s++)e.set("chargePeriodlst",$.grep(e.chargePeriodlst,function(t){return t.key!=r[s]||t.key==e.upgradeOrDowngradeModel.principalServiceList[0].ChargePeriod}));e.isChargePeriodApplicable&&e.upgradeOrDowngradeModel.principalServiceList.length>0&&!Ember.isEmpty(e.upgradeOrDowngradeModel.principalServiceList[0].ChargePeriod)&&e.set("upgradeOrDowngradeModel.chargePeriod",""+e.upgradeOrDowngradeModel.principalServiceList[0].ChargePeriod),e.upgradeOrDowngradeModel.set("dateForChangePackage",null),e.upgradeOrDowngradeModel.set("dateForChangeAddonPackage",null),e.upgradeOrDowngradeModel.set("dateForChangeAccessPackage",null);for(var s=0;s<e.smartcardList.length;s++)e.smartcardList[s].Value==e.upgradeOrDowngradeModel.get("smartcards").Value&&e.upgradeOrDowngradeModel.set("smartCardInformation",e.smartcardList[s].Text+" "+e.smartcardList[s].Value);t?e.qouteRetreival(e.quoteRetreivalObject):e.setVisibility(!1)}}else{e.hideBusyIndicator(),e.upgradeOrDowngradeModel.set("isChangePackageVisible",!1),e.upgradeOrDowngradeModel.set("isQuoteSummaryVisible",!1);Komodo.Services.uiService.getController("holidayHomes").holidayHomesModel.set("viewDays","-")}for(s=0;s<e.upgradeOrDowngradeModel.annualSmartcards.length;s++)null!=e.upgradeOrDowngradeModel.smartcards&&void 0!=e.upgradeOrDowngradeModel.smartcards&&e.upgradeOrDowngradeModel.smartcards.Value==e.upgradeOrDowngradeModel.annualSmartcards[s]&&(Komodo.Controls.MessageBoxController.show(kl.value(e.localeUpgradeOrDowngrade+"upgradeOrDowngrade"),kl.value(e.localeUpgradeOrDowngrade+"noAnnualCustomer"),null,e,"id123456","warning"),e.upgradeOrDowngradeModel.set("smartcards",void 0));if(null!=e.upgradeOrDowngradeModel.smartcards&&void 0!=e.upgradeOrDowngradeModel.smartcards&&e.isSPLPrincipalPackage()){e.upgradeOrDowngradeModel.set("isChangePackageVisible",!1);Komodo.Controls.MessageBoxController.show(kl.value(e.localeUpgradeOrDowngrade+"valSmartcard"),kl.value(e.localeUpgradeOrDowngrade+"SplUpgradeorDowngradenotallowed"),Komodo.Controls.MessageBoxOkButton,e,"id5446673","warning");e.upgradeOrDowngradeModel.set("smartcards",null)}}.observes("upgradeOrDowngradeModel.smartcards"),payViaDebitOrder:function(){this.hideBusyIndicator(),this.setVisibility(!1)},payNow:function(){this.hideBusyIndicator(),this.setVisibility(!1),this.get("sharedObject").payNow()},isSPLPrincipalPackage:function(){var e=this,t=!1,a=e.get("SplPrincipalpackagesList"),o=e.upgradeOrDowngradeModel.get("principalServiceList");if(a.length>0&&o.length>0)for(var s=0;s<a.length;s++)for(var r=0;r<o.length;r++)o[r].ProductDetail.length>0&&a[s].toString().toLowerCase()==o[r].ProductDetail.UID.toString().toLowerCase()&&(t=!0);return t},rejectQuote:function(){var e=this;e.set("refreshButtonDisable",!0);var t=Komodo.Services.ProductAndServiceMaintenanceHelper.create();Komodo.Controls.MessageBoxController.show(kl.value(e.localeUpgradeOrDowngrade+"rQuote"),kl.value(e.localeUpgradeOrDowngrade+"rejectQuoteMessage"),Komodo.Controls.MessageBoxYesNoButtons,e,"id123456","warning").response=function(a){"yes"==a&&(e.getNewProcessID(),e.showBlockingBusyIndicator(),Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+customerId),Komodo.Services.queryService.postJSON("/Quote/RejectQuote",{data:e.quoteIDArray}).done(function(a){null!=a&&void 0!=a&&("0"==a.Status?(e.set("isReject",!0),e.updateBindSmartCards(t.getCustomerIdToRetrieveData(),"reject"),e.setVisibility(!1),e.setAddonVisibility(!1,!1),e.setAccessVisibility(!1,!1)):Komodo.Controls.MessageBoxController.show(kl.value(e.localeUpgradeOrDowngrade+"technicalError"),a.ResponseMessage,Komodo.Controls.MessageBoxOkButton,e,"id123456","danger"))}).error(function(t){var a=JSON.stringify(t);Komodo.log("Notify Owner ajax call failed. Error: "+a),e.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(e.localeUpgradeOrDowngrade+"technicalError"),a,Komodo.Controls.MessageBoxOkButton,e,"id123456","danger").response=function(t){"ok"==t&&(e.setVisibility(!1),e.setAddonVisibility(!1,!1),e.setAccessVisibility(!1,!1))}}))}},rejectLatestQuote:function(){var e=this,t=Komodo.Services.ProductAndServiceMaintenanceHelper.create();e.getNewProcessID(),e.showBlockingBusyIndicator(),Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+customerId),Komodo.Services.queryService.postJSON("/Quote/RejectQuote",{data:e.quoteIDArray}).done(function(a){null!=a&&void 0!=a&&("0"==a.Status?(e.set("isReject",!0),e.updateBindSmartCards(t.getCustomerIdToRetrieveData(),"reject"),e.setVisibility(!1),e.setAddonVisibility(!1,!1),e.setAccessVisibility(!1,!1),e.hideBusyIndicator()):(e.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(e.localeUpgradeOrDowngrade+"technicalError"),a.ResponseMessage,Komodo.Controls.MessageBoxOkButton,e,"id123456","danger")))}).error(function(t){var a=JSON.stringify(t);Komodo.log("Notify Owner ajax call failed. Error: "+a),e.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(e.localeUpgradeOrDowngrade+"technicalError"),a,Komodo.Controls.MessageBoxOkButton,e,"id123456","danger").response=function(t){"ok"==t&&(e.setVisibility(!1),e.setAddonVisibility(!1,!1),e.setAccessVisibility(!1,!1))}})},updateBindSmartCards:function(e,t){var a=Komodo.Services.QueryService.create();a.retrieveSelectedCountry();var o,s=this,r=this.resultAccountMessage,n=Komodo.Services.ProductAndServiceMaintenanceHelper.create();r.ResponseMessage.Payload.ListOfAccount.Account.clear(),a.getJSON("/AccountProfile?id="+e).done(function(e){if(r.ResponseMessage.Payload.ListOfAccount.Account.clear(),e&&e.Account.length&&0!=e.Account.length&&(e.Account.length>1?r.ResponseMessage.Payload.ListOfAccount.Account.addObjects(e.Account):r.ResponseMessage.Payload.ListOfAccount.Account.addObject(e.Account[0])),null!=(o=n.createArrayForSingleElement(r.ResponseMessage.Payload.ListOfAccount.Account))&&o.length>0){s.allHardwares.clear(),s.upgradeOrDowngradeModel.set("annualSmartcards",[]);for(var a=0;a<o.length;a++)o[a]&&s.getAllHardwares(o[a])}switch(s.hideBusyIndicator(),t){case"reject":Komodo.Controls.MessageBoxController.show(kl.value(s.localeUpgradeOrDowngrade+"rQuote"),kl.value(s.localeUpgradeOrDowngrade+"rejectQuoteSuccessMessage"),Komodo.Controls.MessageBoxOkButton,s,"id123456","success").response=function(e){"ok"==e&&(s.upgradeOrDowngradeModel.set("isQuoteSummaryVisible",!1),window.scrollTo(0,0),s.upgradeOrDowngradeModel.set("changeToPackage",null),s.upgradeOrDowngradeModel.set("dateForChangePackage",null),s.upgradeOrDowngradeModel.set("changeToAddonPackage",null),s.upgradeOrDowngradeModel.set("dateForChangeAddonPackage",null),s.upgradeOrDowngradeModel.set("changeToAccessPackage",null),s.upgradeOrDowngradeModel.set("dateForChangeAccessPackage",null))}}}).error(function(e){var t=JSON.stringify(e);Komodo.log("retrieveFinancialAccounts ajax call failed. Error: "+t),s.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(s.localeUpgradeOrDowngrade+"technicalError"),t,Komodo.Controls.MessageBoxOkButton,s,"id123456","danger").response=function(e){}})},publishCreateActivity:function(e,t,a){var o=this;Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(s){var r=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),n=r.getCustomerIdToRetrieveData(),i=Komodo.Models.CreateInteraction.create(),c=Komodo.Models.ListOfCaseData.create(),l=Komodo.Models.Case.create(),d=void 0;switch(l.set("InteracteeName",Komodo.Services.securityService.session.domainUserName),l.set("InteractionLocation",s.data.countryDescription),l.set("InteractionMedium","1"),l.set("CustomerUID",n),e){case"immediateUpgrade":l.set("Category","4"),l.set("SubCategory","1"),l.set("Outcome","64"),l.set("Status","1"),d=a+" is scheduled for upgrade on "+t+".";break;case"scheduleUpgrade":l.set("Category","7"),l.set("SubCategory","6"),l.set("Outcome","6"),l.set("Status","1"),d=a+" is scheduled for upgrade on "+t+".",payloadCaseData=Komodo.Models.CaseData.create();var u=Komodo.canonicalFacadeFactory(payloadCaseData,["CaseDataValueUri","Value"]);u.set("CaseDataValueUri","Scheduled upgrade date");var h=new Date(t);u.set("Value",h.toLocaleDateString("sv-SE")),c.CaseData.push(payloadCaseData),l.set("ListOfCaseData",c);break;case"scheduleDowngrade":l.set("Category","8"),l.set("SubCategory","7"),l.set("Outcome","7"),l.set("Status","1"),d=a+" is scheduled for downgrade on "+t+".",payloadCaseData=Komodo.Models.CaseData.create();var u=Komodo.canonicalFacadeFactory(payloadCaseData,["CaseDataValueUri","Value"]);u.set("CaseDataValueUri","Scheduled downgrade date");var h=new Date(t);u.set("Value",h.toLocaleDateString("sv-SE")),c.CaseData.push(payloadCaseData),l.set("ListOfCaseData",c)}l.set("Notes",d);var m=Komodo.canonicalFacadeFactory(i,["Country","Case"]);m.set("Country",o.get("loggedInCountryId")),m.set("Case",l),i.Country=s.data.countryId,o.publishRequestOnBus(i,"CreateInteraction","v1")})},publishCreateActivityFaliure:function(e,t,a,o){var s=this;Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(r){var n=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),i=n.getCustomerIdToRetrieveData(),c=Komodo.Models.CreateInteraction.create(),l=Komodo.Models.ListOfCaseData.create(),d=Komodo.Models.Case.create(),u=void 0;switch(d.set("InteracteeName",Komodo.Services.securityService.session.domainUserName),d.set("InteractionLocation","6"),d.set("InteractionMedium","1"),d.set("CustomerUID",i),e){case"immediateUpgradeFailiure":d.set("Category","4"),d.set("SubCategory","1"),d.set("Outcome","129"),d.set("Status","1"),u=a+" is scheduled for upgrade on "+t+".Reason:"+o;break;case"scheduleUpgradeFailiure":d.set("Category","4"),d.set("SubCategory","1"),d.set("Outcome","130"),d.set("Status","1"),u=a+" is scheduled for upgrade on "+t+".Reason:"+o,payloadCaseData=Komodo.Models.CaseData.create();var h=Komodo.canonicalFacadeFactory(payloadCaseData,["CaseDataValueUri","Value"]);h.set("CaseDataValueUri","Scheduled upgrade date");var m=new Date(t);h.set("Value",m.toLocaleDateString("sv-SE")),l.CaseData.push(payloadCaseData),d.set("ListOfCaseData",l);break;case"scheduleDowngradeFailiure":d.set("Category","4"),d.set("SubCategory","1"),d.set("Outcome","131"),d.set("Status","1"),u=a+" is scheduled for downgrade on "+t+".Reason:"+o,payloadCaseData=Komodo.Models.CaseData.create();var h=Komodo.canonicalFacadeFactory(payloadCaseData,["CaseDataValueUri","Value"]);h.set("CaseDataValueUri","Scheduled downgrade date");var m=new Date(t);h.set("Value",m.toLocaleDateString("sv-SE")),l.CaseData.push(payloadCaseData),d.set("ListOfCaseData",l)}d.set("Notes",u);var g=Komodo.canonicalFacadeFactory(c,["Country","Case"]);g.set("Country",s.get("loggedInCountryId")),g.set("Case",d),c.Country=r.data.countryId,s.publishRequestOnBus(c,"CreateInteraction","v1")})},publishRequestOnBus:function(e,t,a){var o=Komodo.Services.manageAccountService,s="Event Message for "+t+" ";o.publishEvent(this,e,t,a).done(function(){Komodo.log(s+" has been published successfully")}).fail(function(e,t){Komodo.log(s+" has been failed")})},showUpDowngradeResultMessage:function(e){var t=this,a=new Date,o=new Date,s=Komodo.Services.ProductAndServiceMaintenanceHelper.create();if(null!=e&&void 0!=e&&(o=new Date(e)),o.setHours(0,0,0,0)>a.setHours(0,0,0,0)){if(1==t.get("isUpgrade")){t.updateBindSmartCards(s.getCustomerIdToRetrieveData(),null),t.setVisibility(!1),t.upgradeOrDowngradeModel.set("smartcards",null),t.hideBusyIndicator();var r=Komodo.Controls.MessageBoxController.show(kl.value(t.localeUpgradeOrDowngrade+"scheduleUpgrade"),kl.value(t.localeUpgradeOrDowngrade+"packagesUpgrade")+XDates.getformatedDateforDatepicker(new Date(o))+".",Komodo.Controls.MessageBoxOkButton,t,"id123456","success");r.response=function(e){"ok"==e&&(t.set("isUpgrade",void 0),t.setVisibilityForPanels(!1),t.transitionToRoute("/scheduledChanges"))}}else if(0==t.get("isUpgrade")){t.updateBindSmartCards(s.getCustomerIdToRetrieveData(),null),t.upgradeOrDowngradeModel.set("smartcards",null),t.setVisibility(!1),t.hideBusyIndicator();var r=Komodo.Controls.MessageBoxController.show(kl.value(t.localeUpgradeOrDowngrade+"scheduleDowngrade"),kl.value(t.localeUpgradeOrDowngrade+"packagesDowngrade")+XDates.getformatedDateforDatepicker(new Date(o))+".",Komodo.Controls.MessageBoxOkButton,t,"id123456","success");r.response=function(e){"ok"==e&&(t.set("isUpgrade",void 0),t.setVisibilityForPanels(!1),t.transitionToRoute("/scheduledChanges"))}}else if(void 0==t.get("isUpgrade")){t.updateBindSmartCards(s.getCustomerIdToRetrieveData(),null),t.upgradeOrDowngradeModel.set("smartcards",null),t.setVisibility(!1),t.hideBusyIndicator();var r=Komodo.Controls.MessageBoxController.show(kl.value(t.localeUpgradeOrDowngrade+"genericMessageTitle"),kl.value(t.localeUpgradeOrDowngrade+"genericMessage"),Komodo.Controls.MessageBoxOkButton,t,"id123456","success");r.response=function(e){"ok"==e&&(t.set("isUpgrade",void 0),t.setVisibilityForPanels(!1),t.transitionToRoute("/scheduledChanges"))}}}else if(o.setHours(0,0,0,0)<=a.setHours(0,0,0,0))if(1==t.get("isUpgrade")){t.updateBindSmartCards(s.getCustomerIdToRetrieveData(),null),t.setVisibility(!1),t.upgradeOrDowngradeModel.set("smartcards",null),t.hideBusyIndicator();var r=Komodo.Controls.MessageBoxController.show(kl.value(t.localeUpgradeOrDowngrade+"upgradeSuccessful"),kl.value(t.localeUpgradeOrDowngrade+"packagesUpgraded"),Komodo.Controls.MessageBoxOkButton,t,"id123456","success");r.response=function(e){if("ok"==e){t.set("isUpgrade",void 0),t.setVisibilityForPanels(!1);var a=Komodo.Services.customerProfileService.getCustomerPersonalDetail();if(void 0!=a&&null!=a&&""!=a&&("SPECIALIST"==a.customerClass.toUpperCase()||"3"==a.customerClass))return Komodo.Services.customerProfileService.setCustomerPersonalDetail(a),Komodo.Services.customerProfileService.setCustomerDataSource("specialist-updated"),void t.transitionToRoute("/specialistCustomerProfile");t.transitionToRoute("/manageViewing")}}}else if(0==t.get("isUpgrade")||void 0==t.get("isUpgrade")){t.updateBindSmartCards(s.getCustomerIdToRetrieveData(),null),t.setVisibility(!1),t.upgradeOrDowngradeModel.set("smartcards",null);var r=Komodo.Controls.MessageBoxController.show(kl.value(t.localeUpgradeOrDowngrade+"downgradeSuccessful"),kl.value(t.localeUpgradeOrDowngrade+"packagesDowngradeImmediate")+XDates.getformatedDateforDatepicker(new Date(o))+".",Komodo.Controls.MessageBoxOkButton,t,"id123456","success");r.response=function(e){if("ok"==e){t.set("isUpgrade",void 0),t.setVisibilityForPanels(!1);var a=Komodo.Services.customerProfileService.getCustomerPersonalDetail();if(void 0!=a&&null!=a&&""!=a&&("SPECIALIST"==a.customerClass.toUpperCase()||"3"==a.customerClass))return Komodo.Services.customerProfileService.setCustomerPersonalDetail(a),Komodo.Services.customerProfileService.setCustomerDataSource("specialist-updated"),void t.transitionToRoute("/specialistCustomerProfile");t.transitionToRoute("/manageViewing")}}}},completePackageChange:function(){var e=this,t=Komodo.Services.QueryService.create();t.retrieveSelectedCountry();Komodo.Services.ProductAndServiceMaintenanceHelper.create();void 0==e.get("isUpgrade")&&(this.set("servicesForMessage",this.get("servicesForMessage").filter(function(e){return"principal"===e.ProductDetail.Type.toString().toLowerCase()&&("pending upgrade"==e.Status.toString().toLowerCase()||"active"==e.Status.toString().toLowerCase())||"addon"===e.ProductDetail.Type.toString().toLowerCase()&&("pending upgrade"==e.Status.toString().toLowerCase()||"active"==e.Status.toString().toLowerCase())||"access"===e.ProductDetail.Type.toString().toLowerCase()&&("pending upgrade"==e.Status.toString().toLowerCase()||"active"==e.Status.toString().toLowerCase())})),null!=this.get("servicesForMessage")&&void 0!=this.get("servicesForMessage")&&this.get("servicesForMessage").length>0&&e.set("isUpgrade",!0)),Komodo.Controls.MessageBoxController.show(kl.value(e.localeUpgradeOrDowngrade+"saveCustomerInformationTitle"),kl.value(e.localeUpgradeOrDowngrade+"saveCustomerInformationConfirmation"),Komodo.Controls.MessageBoxYesNoButtons,e,"id123456","warning").response=function(a){if("yes"==a){e.getNewProcessID(),e.showBlockingBusyIndicator();var o=Komodo.Services.ProductAndServiceMaintenanceHelper.create();t.getJSON("/Quote/AcceptQuote?quoteId="+e.viewQuote.get("quoteId")+"&financialAccountId="+e.viewQuote.get("financialAccountId")).done(function(t){var a=new Date,s=new Date(e.get("dataObject")[0].ExecutionDate);if(null!=t&&void 0!=t)if(s.setHours(0,0,0,0)>a.setHours(0,0,0,0)){if(1==e.get("isUpgrade")){e.updateBindSmartCards(o.getCustomerIdToRetrieveData(),null),e.setVisibility(!1),e.upgradeOrDowngradeModel.set("smartcards",null),e.hideBusyIndicator();var r=Komodo.Controls.MessageBoxController.show(kl.value(e.localeUpgradeOrDowngrade+"scheduleUpgrade"),kl.value(e.localeUpgradeOrDowngrade+"packagesUpgrade")+XDates.getformatedDateforDatepicker(new Date(e.get("dataObject")[0].ExecutionDate))+".",Komodo.Controls.MessageBoxOkButton,e,"id123456","success");r.response=function(t){"ok"==t&&(e.set("isUpgrade",void 0),e.setVisibilityForPanels(!1),e.transitionToRoute("/scheduledChanges"))}}else if(0==e.get("isUpgrade")){e.updateBindSmartCards(o.getCustomerIdToRetrieveData(),null),e.upgradeOrDowngradeModel.set("smartcards",null),e.setVisibility(!1),e.hideBusyIndicator();var r=Komodo.Controls.MessageBoxController.show(kl.value(e.localeUpgradeOrDowngrade+"scheduleDowngrade"),kl.value(e.localeUpgradeOrDowngrade+"packagesDowngrade")+XDates.getformatedDateforDatepicker(new Date(e.get("dataObject")[0].ExecutionDate))+".",Komodo.Controls.MessageBoxOkButton,e,"id123456","success");r.response=function(t){"ok"==t&&(e.set("isUpgrade",void 0),e.setVisibilityForPanels(!1),e.transitionToRoute("/scheduledChanges"))}}else if(void 0==e.get("isUpgrade")){e.updateBindSmartCards(o.getCustomerIdToRetrieveData(),null),e.upgradeOrDowngradeModel.set("smartcards",null),e.setVisibility(!1),e.hideBusyIndicator();var r=Komodo.Controls.MessageBoxController.show(kl.value(e.localeUpgradeOrDowngrade+"genericMessageTitle"),kl.value(e.localeUpgradeOrDowngrade+"genericMessage"),Komodo.Controls.MessageBoxOkButton,e,"id123456","success");r.response=function(t){"ok"==t&&(e.set("isUpgrade",void 0),e.setVisibilityForPanels(!1),e.transitionToRoute("/scheduledChanges"))}}}else if(s.setHours(0,0,0,0)<=a.setHours(0,0,0,0))if(1==e.get("isUpgrade")){e.updateBindSmartCards(o.getCustomerIdToRetrieveData(),null),e.setVisibility(!1),e.upgradeOrDowngradeModel.set("smartcards",null),e.hideBusyIndicator();var r=Komodo.Controls.MessageBoxController.show(kl.value(e.localeUpgradeOrDowngrade+"upgradeSuccessful"),kl.value(e.localeUpgradeOrDowngrade+"packagesUpgraded"),Komodo.Controls.MessageBoxOkButton,e,"id123456","success");r.response=function(t){if("ok"==t){e.set("isUpgrade",void 0),
e.setVisibilityForPanels(!1);var a=Komodo.Services.customerProfileService.getCustomerPersonalDetail();if(void 0!=a&&null!=a&&""!=a&&("SPECIALIST"==a.customerClass.toUpperCase()||"3"==a.customerClass))return Komodo.Services.customerProfileService.setCustomerPersonalDetail(a),Komodo.Services.customerProfileService.setCustomerDataSource("specialist-updated"),void e.transitionToRoute("/specialistCustomerProfile");e.transitionToRoute("/manageViewing")}}}else if(0==e.get("isUpgrade")||void 0==e.get("isUpgrade")){e.updateBindSmartCards(o.getCustomerIdToRetrieveData(),null),e.setVisibility(!1),e.upgradeOrDowngradeModel.set("smartcards",null);var r=Komodo.Controls.MessageBoxController.show(kl.value(e.localeUpgradeOrDowngrade+"downgradeSuccessful"),kl.value(e.localeUpgradeOrDowngrade+"packagesDowngradeImmediate")+XDates.getformatedDateforDatepicker(new Date(e.get("dataObject")[0].ExecutionDate))+".",Komodo.Controls.MessageBoxOkButton,e,"id123456","success");r.response=function(t){if("ok"==t){e.set("isUpgrade",void 0),e.setVisibilityForPanels(!1);var a=Komodo.Services.customerProfileService.getCustomerPersonalDetail();if(void 0!=a&&null!=a&&""!=a&&("SPECIALIST"==a.customerClass.toUpperCase()||"3"==a.customerClass))return Komodo.Services.customerProfileService.setCustomerPersonalDetail(a),Komodo.Services.customerProfileService.setCustomerDataSource("specialist-updated"),void e.transitionToRoute("/specialistCustomerProfile");e.transitionToRoute("/manageViewing")}}}}).error(function(t){var a="";null!=t&&void 0!=t&&""!=t&&null!=t.responseJSON&&void 0!=t.responseJSON&&""!=t.responseJSON&&null!=t.responseJSON.Message&&void 0!=t.responseJSON.Message&&""!=t.responseJSON.Message&&(a=t.responseJSON.Message),Komodo.log("Notify Owner ajax call failed. Error: "+JSON.stringify(t)),""==a&&(a=JSON.stringify(t)),e.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(e.localeUpgradeOrDowngrade+"technicalError"),a,Komodo.Controls.MessageBoxOkButton,e,"id123456","danger").response=function(t){"ok"==t&&(e.set("isUpgrade",void 0),e.setVisibility(!0))}})}}},messageFailureMessageEventReceived:function(e){Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription)},viewQuoteDetails:function(){var e=this.get("upgradeOrDowngradeModel.quoteSummaryCommandItem"),t=Komodo.Models.QuoteDetailModel.create();t.quoteID=this.viewQuote.get("quoteId"),t.invoiceText=e.get("invoiceDescription"),t.startDate=e.get("startDate"),t.tax=parseFloat(e.get("tax")).toFixed(2),t.status=this.viewQuote.get("quoteStatus"),t.noOfUnits=e.get("noOfUnits"),t.endDate=e.get("endDate"),t.amountRequired=e.get("currencyMnemonic")+" "+e.get("amountRequired"),t.balanceAvailable=e.get("balanceAvailable"),this.set("quoteDetailsModel",t);Komodo.Services.uiService.showModalPopup("Quote Details",null,{view:Komodo.Application.QuoteDetailView,context:{data:this.get("quoteDetailsModel")},canUserClose:!0})},showHideCustomerDetails:function(){var e=this,t=$("#komodo-show-details").css("top");"142px"!==t&&"114px"!==t||($("#komodo-customer-details").slideUp(500,function(){$("#otp-slide-item-customer").attr("class","otp-slide-close")}),$("#komodo-show-details").animate({top:40},500),$("#komodo-customer-page").animate({"padding-top":20},500,function(){e.showHideCustomerDetails()})),"40px"===t?($("#otp-slide-item").attr("class","otp-slide-open"),$("#komodo-customer-details").slideDown(500),$("#komodo-show-details").animate({top:136},{duration:500,queue:!1}),$("#komodo-customer-page").animate({"padding-top":100},{duration:500,queue:!1})):($("#komodo-customer-details").slideUp(500,function(){$("#otp-slide-item").attr("class","otp-slide-close")}),$("#komodo-show-details").animate({top:40},{duration:500,queue:!1}),$("#komodo-customer-page").animate({"padding-top":20},{duration:500,queue:!1}))},changeToPackage:function(){if(void 0!=this.upgradeOrDowngradeModel.get("changeToPackage")&&null!=this.upgradeOrDowngradeModel.get("changeToPackage")){var e=this.upgradeOrDowngradeModel.get("changeToPackage").Value;GetClarityConstants("ManageViewingConstants","manageViewingConstants.upgradeDowngrade.stsProduct");null!=this.get("upgradeOrDowngradeModel.addonServiceList")&&void 0!=this.get("upgradeOrDowngradeModel.addonServiceList")&&this.get("upgradeOrDowngradeModel.addonServiceList").length>0&&this.bindToPrincipalcompatibleAddonsPackages(e),null!=this.get("upgradeOrDowngradeModel.accessServiceList")&&void 0!=this.get("upgradeOrDowngradeModel.accessServiceList")&&this.get("upgradeOrDowngradeModel.accessServiceList").length>0&&this.bindToPrincipalcompatibleAccessPackages(e),this.upgradeOrDowngradeModel.set("dateForChangePackage",void 0),this.upgradeOrDowngradeModel.set("dateForChangeAddonPackage",void 0),this.upgradeOrDowngradeModel.set("dateForChangeAccessPackage",void 0),this.set("addondatePickerDisable",!0),this.set("accessdatePickerDisable",!0),this.set("quoteButtonDisable",!1),this.set("upgradeOrDowngradeModel.selectedShortTermSubscriptionId",void 0)}else null!=this.get("upgradeOrDowngradeModel.addonServiceList")&&void 0!=this.get("upgradeOrDowngradeModel.addonServiceList")&&this.get("upgradeOrDowngradeModel.addonServiceList").length>0&&this.bindToPrincipalcompatibleAddonsPackages(this.upgradeOrDowngradeModel.get("principalServiceList")[0].ProductDetail.Name),null!=this.get("upgradeOrDowngradeModel.accessServiceList")&&void 0!=this.get("upgradeOrDowngradeModel.accessServiceList")&&this.get("upgradeOrDowngradeModel.accessServiceList").length>0&&this.bindToPrincipalcompatibleAccessPackages(this.upgradeOrDowngradeModel.get("principalServiceList")[0].ProductDetail.Name),this.upgradeOrDowngradeModel.set("dateForChangePackage",void 0),this.upgradeOrDowngradeModel.set("dateForChangeAddonPackage",void 0),this.upgradeOrDowngradeModel.set("dateForChangeAccessPackage",void 0),this.set("addondatePickerDisable",!1),this.set("accessdatePickerDisable",!1),this.set("upgradeOrDowngradeModel.selectedShortTermSubscriptionId",void 0),this.set("quoteButtonDisable",!0)}.observes("upgradeOrDowngradeModel.changeToPackage"),changeToAddonPackage:function(){var e=this;null!=e.upgradeOrDowngradeModel.get("changeToAddonPackage")&&""!=e.upgradeOrDowngradeModel.get("changeToAddonPackage")&&void 0!=e.upgradeOrDowngradeModel.get("changeToAddonPackage")?e.set("quoteButtonDisable",!1):e.set("quoteButtonDisable",!0)}.observes("upgradeOrDowngradeModel.changeToAddonPackage"),changeToAccessPackage:function(){var e=this;null!=e.upgradeOrDowngradeModel.get("changeToAccessPackage")&&""!=e.upgradeOrDowngradeModel.get("changeToAccessPackage")&&void 0!=e.upgradeOrDowngradeModel.get("changeToAccessPackage")?e.set("quoteButtonDisable",!1):e.set("quoteButtonDisable",!0)}.observes("upgradeOrDowngradeModel.changeToAccessPackage"),refreshQuote:function(){var e=this;e.getNewProcessID(),e.showBlockingBusyIndicator(),e.refreshQuoteRetreivalObject.clear(),e.refreshQuoteRetreivalObject.addObject(e.upgradeOrDowngradeModel.principalServiceList[0].ProductDetail.Name),e.refreshQuoteRetreivalObject.addObject(e.upgradeOrDowngradeModel.get("changeToPackage.Value")),e.qouteRetreival(e.refreshQuoteRetreivalObject)},getDaysInMonth:function(e,t){return/8|3|5|10/.test(--e)?30:1==e?(t%4||!(t%100))&&t%400?28:29:31},getExecutionDate:function(e,t){var a=this,o=new Date(t.getMonth()+1+"/1/"+t.getFullYear()),s=new Date(t.getMonth()+1+"/1/"+t.getFullYear());s.setMonth(o.getMonth()+1);var r=a.getDaysInMonth(o.getMonth()+1,o.getFullYear()),n=a.getDaysInMonth(s.getMonth()+1,s.getFullYear()),i=t.getDate();switch(e){case 29:case 30:case 31:if(e==i.toString()){var c=new Date(new Date(t).getMonth()+1+"/"+e+"/"+new Date(t).getFullYear());return c}if(e>r){var c=new Date(new Date(t).getMonth()+1+"/"+r+"/"+new Date(t).getFullYear());return c}if(e<=r&&e>=i.toString()){var c=new Date(new Date(t).getMonth()+1+"/"+e+"/"+new Date(t).getFullYear());return c}if(e<=n){var c=new Date(new Date(s).getMonth()+1+"/"+e+"/"+new Date(s).getFullYear());return c}var c=new Date(new Date(s).getMonth()+1+"/"+n+"/"+new Date(s).getFullYear());return c;default:if(e>=i.toString()){var c=new Date(new Date(t).getMonth()+1+"/"+e+"/"+new Date(t).getFullYear());return c}if(e==i.toString()&&t.setHours(0,0,0,0)==(new Date).setHours(0,0,0,0)){var c=new Date(new Date(t).getMonth()+1+"/"+e+"/"+new Date(t).getFullYear());return c}var c=new Date(new Date(s).getMonth()+1+"/"+e+"/"+new Date(s).getFullYear());return c}},ConfirmationForActive:function(e){var t=this,a="";if(t.get("isUpgrade"))t.qouteRetreivalForActive();else{var o=t.getExecutionDate(t.get("ip"),new Date(new Date(t.upgradeOrDowngradeModel.dateForDowngrade).getMonth()+1+"/"+new Date(t.upgradeOrDowngradeModel.dateForDowngrade).getDate()+"/"+new Date(t.upgradeOrDowngradeModel.dateForDowngrade).getFullYear()));if(o.setHours(0,0,0,0)!=new Date(t.upgradeOrDowngradeModel.dateForDowngrade).setHours(0,0,0,0)){Ember.isEmpty(e)||e.forEach(function(e){a+=e+kl.value(t.localeUpgradeOrDowngrade+"downgradeMessage")+t.getFormatedDateForPopup(XDates.getformatedDateforDatepicker(o))+"<br>"});Komodo.Controls.MessageBoxController.show(kl.value(t.localeUpgradeOrDowngrade+"noDowngrade"),kl.value(t.localeUpgradeOrDowngrade+"noDowngradeMessage")+" "+a,Komodo.Controls.MessageBoxYesNoButtons,t,"id123456","warning").response=function(e){"yes"==e?(null!=t.upgradeOrDowngradeModel.get("changeToPackage.Value")&&""!=t.upgradeOrDowngradeModel.get("changeToPackage.Value")&&void 0!=t.upgradeOrDowngradeModel.get("changeToPackage.Value")&&t.upgradeOrDowngradeModel.set("dateForChangePackage",o),null!=t.upgradeOrDowngradeModel.get("changeToAddonPackage.Value")&&void 0!=t.upgradeOrDowngradeModel.get("changeToAddonPackage.Value")&&""!=t.upgradeOrDowngradeModel.get("changeToAddonPackage.Value")&&t.upgradeOrDowngradeModel.set("dateForChangeAddonPackage",o),null!=t.upgradeOrDowngradeModel.get("changeToAccessPackage.Value")&&void 0!=t.upgradeOrDowngradeModel.get("changeToAccessPackage.Value")&&""!=t.upgradeOrDowngradeModel.get("changeToAccessPackage.Value")&&t.upgradeOrDowngradeModel.set("dateForChangeAccessPackage",o),t.qouteRetreivalForActive()):(t.upgradeOrDowngradeModel.set("changeToPackage",null),t.upgradeOrDowngradeModel.set("changeToAddonPackage",null),t.upgradeOrDowngradeModel.set("changeToAccessPackage",null),t.upgradeOrDowngradeModel.set("dateForChangePackage",null),t.upgradeOrDowngradeModel.set("dateForChangeAddonPackage",null),t.upgradeOrDowngradeModel.set("dateForChangeAccessPackage",null))}}else t.qouteRetreivalForActive()}},actions:{quoteButtonActionFundsAvailable:function(){var e=this.get("upgradeOrDowngradeModel");this.canSubmitData(e,"Fill required data",{showInModal:!0})&&(this.populateGrid(),this.upgradeOrDowngradeModel.set("isQuoteSummaryVisible",!0),this.upgradeOrDowngradeModel.set("isFundsAvailable",!0))},quoteButtonActionFundsNotAvailable:function(){var e=this.get("upgradeOrDowngradeModel");this.canSubmitData(e,"Fill required data",{showInModal:!0})&&(this.upgradeOrDowngradeModel.set("isQuoteSummaryVisible",!0),this.upgradeOrDowngradeModel.set("isFundsAvailable",!1))},acceptQuote:function(){var e=this,t=[];if(e.upgradeOrDowngradeModel.selctedProductIds.clear(),e.set("isUpgrade",void 0),null!=e.upgradeOrDowngradeModel.get("changeToPackage.Value")&&void 0!=e.upgradeOrDowngradeModel.get("changeToPackage.Value")&&""!=e.upgradeOrDowngradeModel.get("changeToPackage.Value")&&e.set("isUpgrade",e.upgradeOrDowngradeModel.get("changeToPackage.IsUpgrade")),null!=e.upgradeOrDowngradeModel.get("changeToAddonPackage.Value")&&void 0!=e.upgradeOrDowngradeModel.get("changeToAddonPackage.Value")&&""!=e.upgradeOrDowngradeModel.get("changeToAddonPackage.Value")&&(1!=e.get("isUpgrade")&&null!=e.get("isUpgrade")&&void 0!=e.get("isUpgrade")&&""!==e.get("isUpgrade")||e.set("isUpgrade",e.upgradeOrDowngradeModel.get("changeToAddonPackage.IsUpgrade"))),null!=e.upgradeOrDowngradeModel.get("changeToAccessPackage.Value")&&void 0!=e.upgradeOrDowngradeModel.get("changeToAccessPackage.Value")&&""!=e.upgradeOrDowngradeModel.get("changeToAccessPackage.Value")&&(1!=e.get("isUpgrade")&&null!=e.get("isUpgrade")&&void 0!=e.get("isUpgrade")&&""!==e.get("isUpgrade")||e.set("isUpgrade",e.upgradeOrDowngradeModel.get("changeToAccessPackage.IsUpgrade"))),e.set("quoteButtonDisable",!0),this.validators.dateForChangePackageValidator.errors&&this.validators.dateForChangePackageValidator.errors.length>0){Komodo.Controls.MessageBoxController.show(kl.value(e.localeUpgradeOrDowngrade+"invalidDate"),kl.value(e.localeUpgradeOrDowngrade+"invalidDateMessage"),Komodo.Controls.MessageBoxOkButton,e,"id123456","danger").response=function(t){"ok"==t&&(e.upgradeOrDowngradeModel.set("dateForChangePackage",null),e.upgradeOrDowngradeModel.set("changeToPackage",null),e.upgradeOrDowngradeModel.set("changeToAddonPackage",null),e.upgradeOrDowngradeModel.set("changeToAccessPackage",null),e.changeToAddOnPackageList.clear(),e.changeToAccessPackageList.clear())}}else null!=e.upgradeOrDowngradeModel.get("changeToPackage.Value")&&void 0!=e.upgradeOrDowngradeModel.get("changeToPackage.Value")&&""!=e.upgradeOrDowngradeModel.get("changeToPackage.Value")?(Ember.isEmpty(e.upgradeOrDowngradeModel.get("principalServiceList"))||(t.push(e.upgradeOrDowngradeModel.principalServiceList[0].ProductDetail.Name.toString()),e.upgradeOrDowngradeModel.selctedProductIds.push(e.upgradeOrDowngradeModel.principalServiceList[0].UID)),null!=e.upgradeOrDowngradeModel.dateForChangePackage&&void 0!=e.upgradeOrDowngradeModel.dateForChangePackage&&""!=e.upgradeOrDowngradeModel.dateForChangePackage||e.upgradeOrDowngradeModel.set("dateForChangePackage",new Date),null!=e.upgradeOrDowngradeModel.dateForChangeAddonPackage&&void 0!=e.upgradeOrDowngradeModel.dateForChangeAddonPackage&&""!=e.upgradeOrDowngradeModel.dateForChangeAddonPackage||null!=e.upgradeOrDowngradeModel.get("changeToAddonPackage.Value")&&void 0!=e.upgradeOrDowngradeModel.get("changeToAddonPackage.Value")&&""!=e.upgradeOrDowngradeModel.get("changeToAddonPackage.Value")&&(Ember.isEmpty(e.upgradeOrDowngradeModel.get("addonServiceList"))||(t.push(e.upgradeOrDowngradeModel.addonServiceList[0].ProductDetail.Name.toString()),e.upgradeOrDowngradeModel.selctedProductIds.push(e.upgradeOrDowngradeModel.addonServiceList[0].UID)),e.upgradeOrDowngradeModel.set("dateForChangeAddonPackage",e.upgradeOrDowngradeModel.dateForChangePackage),null!=e.upgradeOrDowngradeModel.get("changeToPackage.Value")&&""!=e.upgradeOrDowngradeModel.get("changeToPackage.Value")&&void 0!=e.upgradeOrDowngradeModel.get("changeToPackage.Value")||e.upgradeOrDowngradeModel.set("dateForChangePackage",void 0))):null!=e.upgradeOrDowngradeModel.get("changeToAddonPackage.Value")&&void 0!=e.upgradeOrDowngradeModel.get("changeToAddonPackage.Value")&&""!=e.upgradeOrDowngradeModel.get("changeToAddonPackage.Value")&&(Ember.isEmpty(e.upgradeOrDowngradeModel.get("addonServiceList"))||(t.push(e.upgradeOrDowngradeModel.addonServiceList[0].ProductDetail.Name.toString()),e.upgradeOrDowngradeModel.selctedProductIds.push(e.upgradeOrDowngradeModel.addonServiceList[0].UID)),e.upgradeOrDowngradeModel.set("dateForChangeAddonPackage",e.upgradeOrDowngradeModel.dateForChangeAddonPackage),null!=e.upgradeOrDowngradeModel.get("changeToPackage.Value")&&""!=e.upgradeOrDowngradeModel.get("changeToPackage.Value")&&void 0!=e.upgradeOrDowngradeModel.get("changeToPackage.Value")||e.upgradeOrDowngradeModel.set("dateForChangePackage",void 0)),null!=e.upgradeOrDowngradeModel.get("changeToPackage.Value")&&void 0!=e.upgradeOrDowngradeModel.get("changeToPackage.Value")&&""!=e.upgradeOrDowngradeModel.get("changeToPackage.Value")?null!=e.upgradeOrDowngradeModel.dateForChangeAccessPackage&&void 0!=e.upgradeOrDowngradeModel.dateForChangeAccessPackage&&""!=e.upgradeOrDowngradeModel.dateForChangeAccessPackage||null!=e.upgradeOrDowngradeModel.get("changeToAccessPackage.Value")&&void 0!=e.upgradeOrDowngradeModel.get("changeToAccessPackage.Value")&&""!=e.upgradeOrDowngradeModel.get("changeToAccessPackage.Value")&&(Ember.isEmpty(e.upgradeOrDowngradeModel.get("accessServiceList"))||(t.push(e.upgradeOrDowngradeModel.accessServiceList[0].ProductDetail.Name.toString()),e.upgradeOrDowngradeModel.selctedProductIds.push(e.upgradeOrDowngradeModel.accessServiceList[0].UID)),e.upgradeOrDowngradeModel.set("dateForChangeAccessPackage",e.upgradeOrDowngradeModel.dateForChangePackage),null!=e.upgradeOrDowngradeModel.get("changeToAddonPackage.Value")&&void 0!=e.upgradeOrDowngradeModel.get("changeToAddonPackage.Value")&&""!=e.upgradeOrDowngradeModel.get("changeToAddonPackage.Value")&&(Ember.isEmpty(e.upgradeOrDowngradeModel.get("addonServiceList"))||(t.push(e.upgradeOrDowngradeModel.addonServiceList[0].ProductDetail.Name.toString()),e.upgradeOrDowngradeModel.selctedProductIds.push(e.upgradeOrDowngradeModel.addonServiceList[0].UID)),e.upgradeOrDowngradeModel.set("dateForChangeAccessPackage",e.upgradeOrDowngradeModel.dateForChangePackage)),null!=e.upgradeOrDowngradeModel.get("changeToPackage.Value")&&""!=e.upgradeOrDowngradeModel.get("changeToPackage.Value")&&void 0!=e.upgradeOrDowngradeModel.get("changeToPackage.Value")||e.upgradeOrDowngradeModel.set("dateForChangePackage",void 0)):null!=e.upgradeOrDowngradeModel.get("changeToAccessPackage.Value")&&void 0!=e.upgradeOrDowngradeModel.get("changeToAccessPackage.Value")&&""!=e.upgradeOrDowngradeModel.get("changeToAccessPackage.Value")&&(Ember.isEmpty(e.upgradeOrDowngradeModel.get("accessServiceList"))||(t.push(e.upgradeOrDowngradeModel.accessServiceList[0].ProductDetail.Name.toString()),e.upgradeOrDowngradeModel.selctedProductIds.push(e.upgradeOrDowngradeModel.accessServiceList[0].UID)),e.upgradeOrDowngradeModel.set("dateForChangeAccessPackage",e.upgradeOrDowngradeModel.dateForChangeAccessPackage),null!=e.upgradeOrDowngradeModel.get("changeToPackage.Value")&&""!=e.upgradeOrDowngradeModel.get("changeToPackage.Value")&&void 0!=e.upgradeOrDowngradeModel.get("changeToPackage.Value")||e.upgradeOrDowngradeModel.set("dateForChangePackage",void 0)),null==e.upgradeOrDowngradeModel.dateForChangePackage||void 0==e.upgradeOrDowngradeModel.dateForChangePackage||""==e.upgradeOrDowngradeModel.dateForChangePackage?null!=e.upgradeOrDowngradeModel.dateForChangeAddonPackage&&void 0!=e.upgradeOrDowngradeModel.dateForChangeAddonPackage&&""!=e.upgradeOrDowngradeModel.dateForChangeAddonPackage?e.upgradeOrDowngradeModel.set("dateForDowngrade",e.upgradeOrDowngradeModel.dateForChangeAddonPackage):null!=e.upgradeOrDowngradeModel.dateForChangeAccessPackage&&void 0!=e.upgradeOrDowngradeModel.dateForChangeAccessPackage&&""!=e.upgradeOrDowngradeModel.dateForChangeAccessPackage?e.upgradeOrDowngradeModel.set("dateForDowngrade",e.upgradeOrDowngradeModel.dateForChangeAccessPackage):e.upgradeOrDowngradeModel.set("dateForDowngrade",new Date):e.upgradeOrDowngradeModel.set("dateForDowngrade",e.upgradeOrDowngradeModel.dateForChangePackage),"active"==e.upgradeOrDowngradeModel.get("principalServiceList")[0].Status.toLowerCase()||e.upgradeOrDowngradeModel.get("principalServiceList")[0].Status.toLowerCase()==e.get("awaitingPaymentStatus")?null!=e.upgradeOrDowngradeModel.get("changeToPackage.Value")&&void 0!=e.upgradeOrDowngradeModel.get("changeToPackage.Value")&&""!=e.upgradeOrDowngradeModel.get("changeToPackage.Value")||null!=e.get("upgradeOrDowngradeModel").get("addonServiceList")&&void 0!=e.get("upgradeOrDowngradeModel").get("addonServiceList")&&e.get("upgradeOrDowngradeModel").get("addonServiceList").length>0&&"active"==e.upgradeOrDowngradeModel.addonServiceList[0].Status.toLowerCase()||e.upgradeOrDowngradeModel.addonServiceList[0].Status.toLowerCase()==e.get("awaitingPaymentStatus")||null!=e.get("upgradeOrDowngradeModel").get("accessServiceList")&&void 0!=e.get("upgradeOrDowngradeModel").get("accessServiceList")&&e.get("upgradeOrDowngradeModel").get("accessServiceList").length>0&&"active"==e.upgradeOrDowngradeModel.accessServiceList[0].Status.toLowerCase()||null!=e.get("upgradeOrDowngradeModel").get("accessServiceList")&&void 0!=e.get("upgradeOrDowngradeModel").get("accessServiceList")&&e.get("upgradeOrDowngradeModel").get("accessServiceList").length>0&&e.upgradeOrDowngradeModel.accessServiceList[0].Status.toLowerCase()===e.get("awaitingPaymentStatus")?e.ConfirmationForActive(t):e.qouteRetreivalForActive():"disconnected"==this.upgradeOrDowngradeModel.get("principalServiceList")[0].Status.toLowerCase()?(null==this.upgradeOrDowngradeModel.get("changeToPackage.Value")||void 0==this.upgradeOrDowngradeModel.get("changeToPackage.Value")||""==this.upgradeOrDowngradeModel.get("changeToPackage.Value"))&&null!=this.get("upgradeOrDowngradeModel").get("addonServiceList")&&void 0!=this.get("upgradeOrDowngradeModel").get("addonServiceList")&&this.get("upgradeOrDowngradeModel").get("addonServiceList").length>0&&"active"==this.upgradeOrDowngradeModel.addonServiceList[0].Status.toLowerCase()||null!=this.get("upgradeOrDowngradeModel").get("accessServiceList")&&void 0!=this.get("upgradeOrDowngradeModel").get("accessServiceList")&&this.get("upgradeOrDowngradeModel").get("accessServiceList").length>0&&"active"==this.upgradeOrDowngradeModel.accessServiceList[0].Status.toLowerCase()||"awaiting payment"==this.upgradeOrDowngradeModel.get("principalServiceList")[0].Status.toLowerCase()?e.ConfirmationForActive(t):e.qouteRetreivalForActive():(e.set("refreshButtonDisable",!1),e.set("isUpgradeOrDowngrade",!0),e.qouteRetreival(e.quoteRetreivalObject))},payViaDebitOrder:function(){this.payViaDebitOrder()},payNow:function(){this.payNow()},saveQuote:function(){this.saveQuote()},refreshQuote:function(){this.refreshQuote()},rejectQuote:function(){this.rejectQuote()},completePackageChange:function(){this.completePackageChange()},viewQuoteDetails:function(){this.viewQuoteDetails()},showHideCustomerDetails:function(){this.showHideCustomerDetails()},preActivate:function(){Komodo.Services.uiService.transitionTo("amountToPay")}},stop:function(){this.uninitializeUpgradeOrDowngradeConstants(),this.set("navigationFrom",void 0),this.set("completePackageVisible",!1),this.set("fromAddOnPackageList",[]),this.set("chargePeriodlst",[]),this.set("disableSTSPackages",!1),this.set("shortTermSubscriptionPackages",[]),this._super()},quoteSummary:[],services:[],smartcardList:[],qouteList:[],currentPrincipalService:[],currentAddOnService:[],currentAccessService:[],allHardwares:[],lineItems:[],productListArray:[],quoteRequestObject:[],dataGridFooters:[[],[]],quoteButtonDisable:!0,completePackageDisable:void 0,refreshButtonDisable:void 0,principalStatus:!1,toChangeStatus:!1,adHocDebitOrderButton:!0,isAddOnPresent:!1,sessionId:void 0,qouteID:void 0,lineItemArray:[],quoteIndex:void 0,loggedInCountryName:void 0,serviceStatus:void 0,quoteRetreivalObject:[],refreshQuoteRetreivalObject:[],quoteIDArray:[],toDropdownDisable:!0,datePickerDisable:!0,toAddonDropdownDisable:!0,addondatePickerDisable:!0,toAccessDropdownDisable:!0,accessdatePickerDisable:!0,rejectMessageBox:!1,sharedObject:void 0,isUpgrade:void 0,isReject:!1,isUpgradeOrDowngrade:!1,dataObject:void 0,servicesForMessage:[],ip:void 0,customerId:void 0,isChargePeriodApplicable:!1,allowedChargePeriod:!1,gotvproductlist:[],scheduleList:[],resultAccountMessage:{ResponseMessage:{Payload:{ListOfAccount:{Account:[]}}}}}),Komodo.Application.CommercialReconnectController=Komodo.UI.Controller.extend({showDetails:!1,showNoDataLabel:!1,_viewingLocaleBase:"locale.manageviewing:",_commercialLocaleBase:"locale.commercialcustomer:",agreementTypes:[],customerAgreementTypes:[],reconnectReasons:[],chargePeriods:[Komodo.ChargePeriodCollection.MONTHLY,Komodo.ChargePeriodCollection.ANNUALLY],country:void 0,commercialClassId:[Komodo.CustomerClass.COMMERCIAL,Komodo.CustomerClass.NATIONAL_DEAL],_supervisorClaim:"clarity://commercialManageViewing/supervisor",needs:["genericPayment"],_addOnCategoryFilterString:"ADDON:ADD ON",init:function(){this._super(),Komodo.log("Constructing Commercial Reconnect controller"),this.set("processVersion","v1.1"),this.set("processName","CommercialReconnect")},start:function(){var e=this;e.createCDMData(),e.registerModel("viewModel",Komodo.Models.CommercialManageViewingModel),e.set("sharedObject",Komodo.Application.ManageViewingSharedObjectController.create()),e.set("viewTitle",kl.value(e._viewingLocaleBase+"commercial.reconnectTitle")),e.registerValidator(e.get("viewModel"),"contractEndDate",{isRequired:!0,minDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),functions:Komodo.UI.Validators.DatePickerValidator}),e.registerValidator(e.get("viewModel"),"reconnectReason",{isRequired:!0,type:"string",displayName:kl.value(this._viewingLocaleBase+"reconnect.reconnectReason")}),Komodo.UI.cacheDataService.getAddOnProductTypes(e._addOnCategoryFilterString,e.arrayOfProductTypes),e.clearFormData(),Komodo.Services.customerProfileService.validateCustomerClass(e.commercialClassId).done(function(t){if(void 0!==t&&null!==t&&void 0!==t.CustomerDetail&&null!==t.CustomerDetail)e.set("customerNo",t.CustomerNumber),e.set("companyName",t.CustomerDetail.CompanyName),e.viewModel.set("customerClass",t.CustomerDetail.Class),e.viewModel.set("customerType",t.CustomerDetail.Type),e.retrieveCustomerProfile(e.customerNo),e.mapEstablishments();else{Komodo.Controls.MessageBoxController.show(kl.value(e._commercialLocaleBase+"customerprofile.customerNotFoundTitle"),kl.value(e._commercialLocaleBase+"customerprofile.customerNotFound"),Komodo.Controls.MessageOKButtons,e,"id5446673","warning").response=function(e){if("ok"===e)return void Komodo.Services.uiService.transitionTo("home")}}}),this._super()},actions:{toggleLineItem:function(e){var t=e._context;if("No"===t.isAddon&&!1===t.isSelected)$.each($.makeArray(this.viewModel.selectedproductData),function(e,a){a.deviceNumber===t.deviceNumber&&a.smartCardNumber===t.smartCardNumber&&a.set("isSelected",!1)});else if("Yes"===t.isAddon&&!0===t.isSelected){var a=$.grep($.makeArray(this.viewModel.selectedproductData),function(e){return e.deviceNumber===t.deviceNumber&&e.smartCardNumber===t.smartCardNumber&&"No"===e.isAddon});a.length>0&&a[0].set("isSelected",t.isSelected)}},reconnect:function(){var e=this;if(!0===e.commercialReconnectDetailView&&e.reconnectReasons&&e.reconnectReasons.length>0){var t=$.grep(e.reconnectReasons,function(t){return t.CanonicalKey.toString()===e.defaultReconnectReasonKey.toString()});t&&t.length>0&&e.viewModel.set("reconnectReason",t[0])}if(!1!==e.canSubmitData(e.viewModel,e.viewTitle,{showInModal:!0})){if(!0===e.commercialReconnectDetailView){var a=$.grep(e.viewModel.smartcardsData,function(e){return!0===e.isSelected}),o=$.grep(e.viewModel.principalPackagesData,function(e){return!0===e.isSelected}),s=$.grep(e.viewModel.addOnPackagesData,function(e){return!0===e.isSelected});if(a.length<=0&&o.length<=0&&s.length<=0)return void Komodo.Controls.MessageBoxController.show(kl.value(e._viewingLocaleBase+"commercial.reconnectTitle"),kl.value(e._commercialLocaleBase+"reconnect.messageSelectService"),Komodo.Controls.MessageBoxOkButton,e,"id5446673","warning");if(a.length>0&&(o.length>0||s.length>0))return void Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._commercialLocaleBase+"reconnect.messageReconnectValidate"),Komodo.Controls.MessageBoxOkButton,e,"id145456673","danger")}e.submitReconnectServices()}}},stop:function(){this._super()},createCDMData:function(){var e=this,t=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),a=Komodo.Services.uiService.getController("application").get("_selectedCountryDescription"),o=Komodo.Services.localizationService.getCurrentLanguage();e.set("country",a),e.set("loggedInCountryId",t),e.getHierachicalCDMData(t,o,"AgreementCustomerType",e.customerAgreementTypes),e.getHierachicalCDMData(t,o,"ReconnectReason",e.reconnectReasons),Komodo.Services.featureToggleService.isEnabled("ManageViewing","CommercialReconnectDetailView").done(function(t){e.set("commercialReconnectDetailView",t)})},getStaticCDMData:function(e,t,a,o){Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){o.clear(),$.each(e,function(e,t){o.addObject(t)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve static CDM data for "+a)})},getHierachicalCDMData:function(e,t,a,o){var s=this;Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){var t=JSON.parse(e);switch(o.clear(),a){case"AgreementCustomerType":$.each($.makeArray(t.CustomerClasses.CustomerClass),function(e,t){o.addObject(t)});break;case"ReconnectReason":$.each($.makeArray(t.ReconnectReasons.ReconnectReason),function(e,t){t.AllowedCustomerClass&&s.checkCustomerClass(s.commercialClassId,t.AllowedCustomerClass)&&o.addObject(t)});break;default:Komodo.log("[ERROR] : Unknown Hierachical dataset: "+a)}}).fail(function(){Komodo.log("[ERROR] : could not retrieve hierarchical CDM data for "+a)})},getAgreementType:function(e){var t=this;if(void 0!==t.customerAgreementTypes&&t.customerAgreementTypes.length>0){var a=$.grep($.makeArray(t.customerAgreementTypes),function(e){return e.CanonicalKey===t.viewModel.customerClass});if(a.length>0){var o=$.grep($.makeArray(a[0].CustomerTypes.CustomerType),function(e){return e.CanonicalKey===t.viewModel.customerType});if(o.length>0){var s=$.grep($.makeArray(o[0].AgreementCustomerTypes.AgreementCustomerType),function(t){return t.CanonicalValue===e});if(s.length>0)return s[0].CanonicalKey}}}return""},toggleDisconnectionReconnection:function(){var e=this.get("viewModel.disconnectReconnectAll");$.each($.makeArray(this.viewModel.selectedproductData),function(t,a){"Active"!==a.prinPckStatus&&a.set("isSelected",e)})}.observes("viewModel.disconnectReconnectAll"),establishmentNameChanged:function(){var e=this;e.clearAgreementData(),e.viewModel.viewingLocations.clear(),$.each($.makeArray(e.viewModel.accounts),function(t,a){void 0!==a.ListOfAgreement&&void 0!==a.ListOfAgreement.Agreement&&$.each($.makeArray(a.ListOfAgreement.Agreement),function(t,o){o.Name===e.viewModel.establishmentName&&(e.viewModel.viewingLocations.addObject(o.LocationIndicator),e.viewModel.set("paymentGroup",a))})}),void 0!==e.viewModel.establishmentName&&null!==e.viewModel.establishmentName&&void 0!==e.viewingLocation&&null!==e.viewingLocation?(e.viewModel.set("viewingLocation",e.viewingLocation),e.set("viewingLocation",void 0)):e.viewModel.set("viewingLocation",void 0)}.observes("viewModel.establishmentName"),viewingLocationChanged:function(){var e=this;e.clearAgreementData(),$.each($.makeArray(e.viewModel.accounts),function(t,a){void 0!==a.ListOfAgreement&&void 0!==a.ListOfAgreement.Agreement&&$.each($.makeArray(a.ListOfAgreement.Agreement),function(t,o){return o.Name!==e.viewModel.establishmentName||o.LocationIndicator!==e.viewModel.viewingLocation||(e.getAgreementDetails(a,o),!1)})})}.observes("viewModel.viewingLocation"),reconnectAllPackages:function(){var e=this;e.viewModel&&e.viewModel.principalPackagesData&&$.each(e.viewModel.principalPackagesData,function(t,a){a.set("isSelected",e.viewModel.reconnectAllPackages)}),e.viewModel&&e.viewModel.smartcardsData&&$.each(e.viewModel.addOnPackagesData,function(t,a){a.set("isSelected",e.viewModel.reconnectAllPackages)})}.observes("viewModel.reconnectAllPackages"),reconnectAllSmartcards:function(){var e=this;e.viewModel&&e.viewModel.smartcardsData&&$.each(e.viewModel.smartcardsData,function(t,a){a.set("isSelected",e.viewModel.reconnectAllSmartcards)})}.observes("viewModel.reconnectAllSmartcards"),showPrincipalPackagesData:function(){var e=this;return(e.viewModel&&e.viewModel.principalPackagesData&&e.viewModel.principalPackagesData.length)>0}.property("viewModel.principalPackagesData"),showAddOnPackagesData:function(){var e=this;return!!(e.viewModel&&e.viewModel.addOnPackagesData&&e.viewModel.addOnPackagesData.length>0)}.property("viewModel.addOnPackagesData"),clearFormData:function(){this.viewModel.set("establishments",[]),this.viewModel.set("viewingLocations",[])},clearAgreementData:function(){var e=this
;e.viewModel.set("viewingPlatform",void 0),e.viewModel.set("viewingPoints",void 0),e.viewModel.set("contractStartDate",void 0),e.viewModel.set("contractEndDate",void 0),e.viewModel.set("chargePeriod",void 0),e.viewModel.set("selectedproductData",[]),e.viewModel.set("smartcardsData",[]),e.viewModel.set("principalPackagesData",[]),e.viewModel.set("addOnPackagesData",[]),e.set("smartcardsDataFirstColumn",[]),e.set("smartcardsDataSecondColumn",[]),e.set("principalPackagesDataFirstColumn",[]),e.set("principalPackagesDataSecondColumn",[]),e.set("addOnPackagesDataFirstColumn",[]),e.set("addOnPackagesDataSecondColumn",[]),e.set("activeServices",[]),e.set("activeSmartcards",[]),e.set("showDetails",!1),e.set("showNoDataLabel",!1)},checkCustomerClass:function(e,t){var a=!1,o=t.split(",");return $.each($.makeArray(e),function(e,t){return!o.contains(t)||(a=!0,!1)}),a},retrieveCustomerProfile:function(e){var t=this;t.viewModel.accounts.clear();var a=Komodo.Services.customerProfileService.getCustomerProfile();a&&a.ResponseMessage&&a.ResponseMessage.Payload&&a.ResponseMessage.Payload.ListOfAccount&&a.ResponseMessage.Payload.ListOfAccount.Account&&$.each(a.ResponseMessage.Payload.ListOfAccount.Account,function(e,a){t.viewModel.accounts.addObject(a)})},mapEstablishments:function(){var e=this;e.viewModel.establishments.clear(),$.each(e.viewModel.accounts,function(t,a){void 0!==a.ListOfAgreement&&void 0!==a.ListOfAgreement.Agreement&&$.each(a.ListOfAgreement.Agreement,function(t,a){a.Name.toUpperCase().indexOf(" - DCC")<=0&&a.Type!==Komodo.AgreementTypes.DCC&&"ACTIVE"===a.AgreementStatus.toUpperCase()&&e.viewModel.establishments.addObject(a.Name)})}),e.viewModel.establishments&&e.viewModel.establishments.sort(function(e,t){return e<t?-1:e>t?1:0}),e.establishmentName&&(e.viewModel.set("establishmentName",e.establishmentName),e.set("establishmentName",void 0))},getAgreementDetails:function(e,t){var a=this;if(a.showBusyIndicator(),void 0===t.ListOfHardware||void 0===t.ListOfHardware.Hardware||0===t.ListOfHardware.Hardware.length){Komodo.Application.SharedObjectController.create().retrieveCustomerDeviceProfile(e.CustomerId,e.UID,t.UID).done(function(o){a.retrieveCustomerProfile(e.CustomerId),a.mapAgreementDetails(t),a.hideBusyIndicator()})}else a.mapAgreementDetails(t),a.hideBusyIndicator()},mapAgreementDetails:function(e){var t=this;t.viewModel.set("viewingPlatform",e.InstallationType),t.viewModel.set("viewingPoints",e.NumberOfViewingPoints),t.viewModel.set("contractStartDate",new Date(e.StartDate)),t.viewModel.set("contractEndDate",new Date(e.EndDate)),t.viewModel.set("agreementType",t.getAgreementType(e.LocationIndicator)),t.set("contractEndDate",new Date(e.EndDate));var a=$.grep($.makeArray(t.chargePeriods),function(t){return t.value===e.TermOfPayment});if(a.length>0&&t.viewModel.set("chargePeriod",a[0].title),void 0!==e.ListOfHardware&&void 0!==e.ListOfHardware.Hardware){var o,s=[];if($.each($.makeArray(e.ListOfHardware.Hardware),function(a,r){void 0!==r.ListOfService&&void 0!==r.ListOfService.Service&&$.each($.makeArray(r.ListOfService.Service),function(a,n){void 0!==n.ProductDetail&&"Active"!==n.Status?(o=Komodo.Models.ManageViewingGridModel.create(),o.set("smartCardName",r.SmartcardDetail.Name),o.set("smartCardNumber",r.LinkedSmartcard),o.set("deviceNumber",r.SerialNumber),o.set("applyStyleForPrin",!0),o.set("applyStyleForAddOn",!1),o.set("endDate",n.ChargeUntilDate),o.set("prinPckName",n.ProductDetail.Description),o.set("prinPckStatus",n.Status),o.set("addOnPckName","-"),o.set("packageName",n.ProductDetail.Name),o.set("agreementId",e.UID),"Active"===n.Status?o.set("isSelected",!0):o.set("isSelected",!1),o.set("actualSelectedState",o.isSelected),"PRINCIPAL"===n.ProductDetail.Type.toUpperCase()&&o.set("isAddon","No"),$.inArray(n.ProductDetail.Type.toUpperCase(),t.arrayOfProductTypes)>-1&&o.set("isAddon","Yes"),s.addObject(o)):void 0!==n.ProductDetail&&"Active"===n.Status&&(t.activeServices.push(n.ProductDetail.Name),t.activeSmartcards.push(r.LinkedSmartcard))}),!0===t.commercialReconnectDetailView&&(void 0===r.ListOfService||void 0===r.ListOfService.Service||r.ListOfService.Service.length<1)&&(o=Komodo.Models.ManageViewingGridModel.create(),o.set("smartCardName",r.SmartcardDetail.Name),o.set("smartCardNumber",r.LinkedSmartcard),o.set("deviceNumber",r.SerialNumber),o.set("applyStyleForPrin",!0),o.set("applyStyleForAddOn",!1),o.set("endDate","-"),o.set("prinPckName","-"),o.set("prinPckStatus","-"),o.set("addOnPckName","-"),o.set("packageName","-"),o.set("agreementId",e.UID),o.set("isSelected",!1),o.set("actualSelectedState",o.isSelected),o.set("isAddon","-"),s.addObject(o))}),t.viewModel.set("selectedproductData",s.sort(function(e,t){return e.smartCardNumber===t.smartCardNumber&&e.deviceNumber===t.deviceNumber&&e.isAddon<t.isAddon?-1:e.smartCardNumber===t.smartCardNumber&&e.deviceNumber===t.deviceNumber&&e.isAddon>t.isAddon?1:0})),$.each(t.viewModel.selectedproductData,function(e,a){!1===t.activeSmartcards.contains(a.smartCardNumber)&&(r=$.grep(t.viewModel.smartcardsData,function(e){return e.smartCardNumber===a.smartCardNumber}),0===r.length&&t.viewModel.smartcardsData.addObject(Ember.Object.create({smartCardNumber:a.smartCardNumber,description:a.smartCardName+" "+a.smartCardNumber,isSelected:!1}))),"No"===a.isAddon&&(r=$.grep(t.viewModel.principalPackagesData,function(e){return e.packageName===a.packageName}),0===r.length&&t.viewModel.principalPackagesData.addObject(Ember.Object.create({packageName:a.packageName,description:a.prinPckName,isSelected:!1}))),"Yes"===a.isAddon&&(r=$.grep(t.viewModel.addOnPackagesData,function(e){return e.packageName===a.packageName}),0===r.length&&t.viewModel.addOnPackagesData.addObject(Ember.Object.create({packageName:a.packageName,description:a.prinPckName,isSelected:!1})))}),!0===t.commercialReconnectDetailView){var r=[];if($.each(t.viewModel.selectedproductData,function(e,a){!1===t.activeSmartcards.contains(a.smartCardNumber)&&(r=$.grep(t.viewModel.smartcardsData,function(e){return e.smartCardNumber===a.smartCardNumber}),0===r.length&&t.viewModel.smartcardsData.addObject(Ember.Object.create({smartCardNumber:a.smartCardNumber,description:a.smartCardName+" "+a.smartCardNumber,isSelected:!1}))),"No"===a.isAddon&&(r=$.grep(t.viewModel.principalPackagesData,function(e){return e.packageName===a.packageName}),0===r.length&&t.viewModel.principalPackagesData.addObject(Ember.Object.create({packageName:a.packageName,description:a.prinPckName,isSelected:!1}))),"Yes"===a.isAddon&&(r=$.grep(t.viewModel.addOnPackagesData,function(e){return e.packageName===a.packageName}),0===r.length&&t.viewModel.addOnPackagesData.addObject(Ember.Object.create({packageName:a.packageName,description:a.prinPckName,isSelected:!1})))}),t.viewModel.principalPackagesData&&t.viewModel.principalPackagesData.length>0||t.viewModel.addOnPackagesData&&t.viewModel.addOnPackagesData.length>0||t.viewModel.smartcardsData&&t.viewModel.smartcardsData.length>0){if(void 0!==t.viewModel.smartcardsData&&t.viewModel.smartcardsData.length>0){t.viewModel.smartcardsData.sort(function(e,t){var a=e.description?e.description.toLowerCase():"",o=t.description?t.description.toLowerCase():"";return a>o?1:a<o?-1:0});var n=0;$.each(t.viewModel.smartcardsData,function(e,a){a.smartCardNumber&&""!==a.smartCardNumber&&(n%2==0?t.smartcardsDataFirstColumn.push(a):t.smartcardsDataSecondColumn.push(a),n++)})}void 0!==t.viewModel.principalPackagesData&&t.viewModel.principalPackagesData.length>0&&(t.viewModel.principalPackagesData.sort(function(e,t){var a=e.description?e.description.toLowerCase():"",o=t.description?t.description.toLowerCase():"";return a>o?1:a<o?-1:0}),$.each(t.viewModel.principalPackagesData,function(e,a){e%2==0?t.principalPackagesDataFirstColumn.push(a):t.principalPackagesDataSecondColumn.push(a)})),void 0!==t.viewModel.addOnPackagesData&&t.viewModel.addOnPackagesData.length>0&&(t.viewModel.addOnPackagesData.sort(function(e,t){var a=e.description?e.description.toLowerCase():"",o=t.description?t.description.toLowerCase():"";return a>o?1:a<o?-1:0}),$.each(t.viewModel.addOnPackagesData,function(e,a){e%2==0?t.addOnPackagesDataFirstColumn.push(a):t.addOnPackagesDataSecondColumn.push(a)}))}else t.viewModel.set("selectedproductData",[]);t.viewModel.principalPackagesData&&t.viewModel.principalPackagesData.length>0||t.viewModel.addOnPackagesData&&t.viewModel.addOnPackagesData.length>0?t.set("showPackageData",!0):t.set("showPackageData",!1),t.viewModel.smartcardsData&&t.viewModel.smartcardsData.length>0?t.set("showSmartcardData",!0):t.set("showSmartcardData",!1)}}void 0===t.viewModel.selectedproductData||void 0===t.viewModel.selectedproductData.length||t.viewModel.selectedproductData.length<1?(t.set("showDetails",!1),t.set("showNoDataLabel",!0)):(t.set("showDetails",!0),t.set("showNoDataLabel",!1)),$.each($.makeArray(t.viewModel.selectedproductData),function(e,a){if(!1===a.isSelected)return void t.viewModel.set("disconnectReconnectAll",!1)})},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,1e4,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},submitReconnectServices:function(e){var t,a=this,o=!1,s=new Date;if(moment(a.viewModel.contractEndDate).format(KomodoConfiguration.dateFormat)!==moment().format(KomodoConfiguration.dateFormat)&&(s=new Date(moment(a.viewModel.contractEndDate).format("MM/DD/YYYY"))),!0===a.commercialReconnectDetailView){var r=[],n=$.grep(a.viewModel.smartcardsData,function(e){return!0===e.isSelected}),i=$.grep(a.viewModel.principalPackagesData,function(e){return!0===e.isSelected}),c=$.grep(a.viewModel.addOnPackagesData,function(e){return!0===e.isSelected});if(n.length>0&&i.length<=0&&c.length<=0)return a.activeServices&&a.activeServices.length<=0?void Komodo.Controls.MessageBoxController.show(a.viewTitle,kl.value(a._commercialLocaleBase+"reconnect.messageReconnectSmartcardValidate"),Komodo.Controls.MessageBoxOkButton,a,"id145456673","danger"):(t=Komodo.Controls.MessageBoxController.show(kl.value(a._commercialLocaleBase+"reconnect.confirmMessageTitle"),kl.value(a._commercialLocaleBase+"reconnect.confirmMessageText"),Komodo.Controls.MessageBoxYesNoButtons,a,"id5446673","warning"),void(t.response=function(e){if("yes"===e){var t=a.activeServices.slice(0),o=a.activeSmartcards.slice(0);$.each($.makeArray(n),function(e,t){o.push(t.smartCardNumber)}),t=$.unique(t),o=$.unique(o);var r=new Object;r.CustomerNumber=a.customerNo,r.ServiceNames=t,r.DeviceSerialNumbers=o,r.ScheduleDate=s.toLocaleDateString("sv-SE"),r.CreateSchedule=s>new Date,void 0!==r.CustomerNumber&&a.reconnectSmartcards(r)}}));$.each($.makeArray(a.viewModel.selectedproductData),function(e,t){r=$.grep(a.viewModel.smartcardsData,function(e){return e.smartCardNumber===t.smartCardNumber&&!0===e.isSelected}),r.length>0&&t.set("isSelected",!0),r=$.grep(a.viewModel.principalPackagesData,function(e){return e.packageName===t.packageName&&!0===e.isSelected}),r.length>0&&t.set("isSelected",!0),r=$.grep(a.viewModel.addOnPackagesData,function(e){return e.packageName===t.packageName&&!0===e.isSelected}),r.length>0&&t.set("isSelected",!0)})}$.each($.makeArray(a.viewModel.selectedproductData),function(e,t){if(t.isSelected!==t.actualSelectedState)return void(o=!0)}),o?(t=Komodo.Controls.MessageBoxController.show(kl.value(a._commercialLocaleBase+"reconnect.confirmMessageTitle"),kl.value(a._commercialLocaleBase+"reconnect.confirmMessageText"),Komodo.Controls.MessageBoxYesNoButtons,a,"id5446673","warning"),t.response=function(t){if("yes"===t){var o="",r=[];$.each($.makeArray(a.viewModel.selectedproductData),function(e,t){if(t.smartCardNumber!==o){o=t.smartCardNumber;var n=[];if($.each($.makeArray(a.viewModel.selectedproductData),function(e,t){t.smartCardNumber===o&&!0===t.isSelected&&"Active"!==t.prinPckStatus&&n.push(t.packageName)}),void 0!==n.length&&n.length>0){var i=new Object;i.DeviceSerialNumber=t.smartCardNumber,i.PackageNames=n,i.ReconnectionReason=a.viewModel.get("reconnectReason.SystemKey"),i.ScheduledReconnectionDate=s.toLocaleDateString("sv-SE"),r.pushObject(i)}}}),r.length>0&&a.reconnectPackages(r,e)}}):Komodo.Controls.MessageBoxController.show(kl.value(a._viewingLocaleBase+"commercial.reconnectTitle"),kl.value(a._commercialLocaleBase+"reconnect.messageSelectService"),Komodo.Controls.MessageBoxOkButton,a,"id5446673","warning")},reconnectPackages:function(e,t){var a=this,o=void 0;t&&(Komodo.Services.queryService.set("_elevatedPrivilegeSessionToken",t),o=Komodo.Services.queryService.elevatedPrivilegeBeforeSend),a.showBusyIndicator(),Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+this.get("customerNo")),Komodo.Services.queryService.postJSON("/Device/CommercialReconnectAllPackages",{data:$.makeArray(e),beforeSend:o}).done(function(e){a.hideBusyIndicator();var t,o=!0,s=kl.value(a._commercialLocaleBase+"reconnect.reconnectFailErrorMessage");if(e&&e.length>0){s="";for(var r=0;r<e.length;r++){var n=e[r].split(":");"Success"!==n[0]&&(o=!1,s+="<br>"+n[1])}}o?(t="success",s=kl.value(a._commercialLocaleBase+"reconnect.messageReconnectSuccess")):(t="warning",s=s.substr(4)),Komodo.Controls.MessageBoxController.show(kl.value(a._viewingLocaleBase+"commercial.reconnectTitle"),s,Komodo.Controls.MessageBoxOkButton,a,"id5446673",t).response=function(e){if(o&&"ok"===e)return void Komodo.Services.uiService.transitionTo("commercialCustomerProfile")}}).error(function(e){a.hideBusyIndicator(),e&&"string"===$.type(e.responseJSON)?Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),e.responseJSON,Komodo.Controls.MessageBoxOkButtons,a,"id5446673","danger"):e.responseJSON&&e.responseJSON.ExceptionMessage?Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),e.responseJSON.ExceptionMessage,Komodo.Controls.MessageBoxOkButtons,a,"id5446673","danger"):e.statusText?Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),e.statusText,Komodo.Controls.MessageBoxOkButtons,a,"id5446673","danger"):Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),JSON.stringify(e),Komodo.Controls.MessageBoxOkButtons,a,"id5446673","danger")})},reconnectSmartcards:function(e){var t=this;t.showBusyIndicator(),Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+this.get("customerNo")),Komodo.Services.queryService.postJSON("/Device/UpdateDeviceLink",{data:e}).done(function(){t.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(t._viewingLocaleBase+"commercial.reconnectTitle"),kl.value(t._commercialLocaleBase+"reconnect.messageReconnectSuccess"),Komodo.Controls.MessageBoxOkButton,t,"id5446673","success").response=function(e){if("ok"===e)return void Komodo.Services.uiService.transitionTo("commercialCustomerProfile")}}).error(function(e){t.hideBusyIndicator(),e&&"string"===$.type(e.responseJSON)?Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),e.responseJSON,Komodo.Controls.MessageBoxOkButtons,t,"id5556673","danger"):e.responseJSON&&e.responseJSON.ExceptionMessage?Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),e.responseJSON.ExceptionMessage,Komodo.Controls.MessageBoxOkButtons,t,"id5556673","danger"):e.responseJSON&&e.responseJSON.Message?Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),e.responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,t,"id5556673","danger"):e.statusText?Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),e.statusText,Komodo.Controls.MessageBoxOkButtons,t,"id5556673","danger"):Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),JSON.stringify(e),Komodo.Controls.MessageBoxOkButtons,t,"id5556673","danger")})},arrayOfProductTypes:[],commercialReconnectDetailView:!1,showPackageData:!1,showSmartcardData:!1,defaultReconnectReasonKey:8,activeServices:[],activeSmartcards:[],smartcardsDataFirstColumn:[],smartcardsDataSecondColumn:[],principalPackagesDataFirstColumn:[],principalPackagesDataSecondColumn:[],addOnPackagesDataFirstColumn:[],addOnPackagesDataSecondColumn:[]}),Komodo.Application.CommercialDisconnectController=Komodo.UI.Controller.extend({showDetails:!1,showNoDataLabel:!1,_viewingLocaleBase:"locale.manageviewing:",_commercialLocaleBase:"locale.commercialcustomer:",agreementTypes:[],customerAgreementTypes:[],disconnectReasons:[],chargePeriods:[Komodo.ChargePeriodCollection.MONTHLY,Komodo.ChargePeriodCollection.ANNUALLY],country:void 0,commercialClassId:[Komodo.CustomerClass.COMMERCIAL,Komodo.CustomerClass.NATIONAL_DEAL],_supervisorClaim:["clarity://commercialManageViewing/supervisor"],needs:["genericPayment"],_addOnCategoryFilterString:"ADDON:ADD ON",init:function(){this._super(),Komodo.log("Constructing Commercial Disconnect controller"),this.set("processVersion","v1.1"),this.set("processName","CommercialDisconnect")},start:function(){var e=this;e.createCDMData(),e.registerModel("viewModel",Komodo.Models.CommercialManageViewingModel),e.set("sharedObject",Komodo.Application.ManageViewingSharedObjectController.create()),e.set("viewTitle",kl.value(e._viewingLocaleBase+"commercial.disconnectTitle")),e.registerValidator(e.get("viewModel"),"contractEndDate",{isRequired:!0,minDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),functions:Komodo.UI.Validators.DatePickerValidator}),e.registerValidator(e.get("viewModel"),"disconnectReason",{isRequired:!0,type:"string",displayName:kl.value(this._viewingLocaleBase+"disconnect.disconnectReason")}),Komodo.UI.cacheDataService.getAddOnProductTypes(e._addOnCategoryFilterString,e.arrayOfProductTypes),e.clearFormData(),Komodo.Services.customerProfileService.validateCustomerClass(e.commercialClassId).done(function(t){if(void 0!==t&&null!==t&&void 0!==t.CustomerDetail&&null!==t.CustomerDetail)e.set("customerNo",t.CustomerNumber),e.set("companyName",t.CustomerDetail.CompanyName),e.viewModel.set("customerClass",t.CustomerDetail.Class),e.viewModel.set("customerType",t.CustomerDetail.Type),e.retrieveCustomerProfile(e.customerNo),e.mapEstablishments();else{Komodo.Controls.MessageBoxController.show(kl.value(e._commercialLocaleBase+"customerprofile.customerNotFoundTitle"),kl.value(e._commercialLocaleBase+"customerprofile.customerNotFound"),Komodo.Controls.MessageOKButtons,e,"id5446673","warning").response=function(e){if("ok"===e)return void Komodo.Services.uiService.transitionTo("home")}}}),this._super()},actions:{toggleLineItem:function(e){var t=e._context;if("No"===t.isAddon&&!1===t.isSelected)$.each($.makeArray(this.viewModel.selectedproductData),function(e,a){a.deviceNumber===t.deviceNumber&&a.smartCardNumber===t.smartCardNumber&&"Active"===a.prinPckStatus&&a.set("isSelected",!1)});else if("Yes"===t.isAddon&&!0===t.isSelected){var a=$.grep($.makeArray(this.viewModel.selectedproductData),function(e){return e.deviceNumber===t.deviceNumber&&e.smartCardNumber===t.smartCardNumber&&"No"===e.isAddon&&"Active"===e.prinPckStatus});a.length>0&&t.set("isSelected",a[0].isSelected)}},disconnect:function(){var e=this;if(!0===e.commercialDisconnectDetailView&&e.disconnectReasons&&e.disconnectReasons.length>0){var t=$.grep(e.disconnectReasons,function(t){return t.CanonicalKey.toString()===e.defaultDisconnectReasonKey.toString()});t&&t.length>0&&e.viewModel.set("disconnectReason",t[0])}if(!1!==e.canSubmitData(e.viewModel,e.viewTitle,{showInModal:!0})){if(!0===e.commercialDisconnectDetailView){var a=$.grep(e.viewModel.smartcardsData,function(e){return!0===e.isSelected}),o=$.grep(e.viewModel.principalPackagesData,function(e){return!0===e.isSelected}),s=$.grep(e.viewModel.addOnPackagesData,function(e){return!0===e.isSelected});if(a.length<=0&&o.length<=0&&s.length<=0)return void Komodo.Controls.MessageBoxController.show(kl.value(e._viewingLocaleBase+"commercial.disconnectTitle"),kl.value(e._commercialLocaleBase+"disconnect.messageSelectService"),Komodo.Controls.MessageBoxOkButton,e,"id5446673","warning");if(a.length>0&&(o.length>0||s.length>0))return void Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._commercialLocaleBase+"disconnect.messageDisconnectValidate"),Komodo.Controls.MessageBoxOkButton,e,"id145456673","danger");var r=!1;if($.each(e.get("_supervisorClaim"),function(e,t){r=Komodo.Services.securityService.hasPermission(t)}),!r&&e.viewModel.contractEndDate<e.contractEndDate){var n=e.get("controllers.genericPayment"),i=Komodo.Models.SupervisorApprovalModel.create(),c=Komodo.Application.ModalPaneController.create();return void c.popup(kl.value(e._viewingLocaleBase+"commercial.disconnectTitle"),"supervisorApproval",{context:{data:i,ok:function(){var t=this;t.data.set("disableAction",!0),n.validateUserClaim(e.country,t.data.supervisorUsername,t.data.passCode,e._supervisorClaim).done(function(a){void 0!==a?(c.close(),e.submitDisconnectServices(a)):(t.data.set("disableAction",!1),alert(kl.value(e._commercialLocaleBase+"customer.messageAccessValidate")))})},cancel:function(){c.close()}}})}}e.submitDisconnectServices()}}},stop:function(){this._super()},createCDMData:function(){var e=this,t=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),a=Komodo.Services.uiService.getController("application").get("_selectedCountryDescription"),o=Komodo.Services.localizationService.getCurrentLanguage();e.set("country",a),e.set("loggedInCountryId",t),e.getHierachicalCDMData(t,o,"AgreementCustomerType",e.customerAgreementTypes),e.getHierachicalCDMData(t,o,"DisconnectReason",e.disconnectReasons),Komodo.Services.featureToggleService.isEnabled("ManageViewing","CommercialDisconnectDetailView").done(function(t){e.set("commercialDisconnectDetailView",t)})},getStaticCDMData:function(e,t,a,o){Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){o.clear(),$.each(e,function(e,t){o.addObject(t)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve static CDM data for "+a)})},getHierachicalCDMData:function(e,t,a,o){var s=this;Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){var t=JSON.parse(e);switch(o.clear(),a){case"AgreementCustomerType":$.each($.makeArray(t.CustomerClasses.CustomerClass),function(e,t){o.addObject(t)});break;case"DisconnectReason":$.each($.makeArray(t.DisconnectReasons.DisconnectReason),function(e,t){t.AllowedCustomerClass&&s.checkCustomerClass(s.commercialClassId,t.AllowedCustomerClass)&&o.addObject(t)});break;default:Komodo.log("[ERROR] : Unknown Hierachical dataset: "+a)}}).fail(function(){Komodo.log("[ERROR] : could not retrieve hierarchical CDM data for "+a)})},getAgreementType:function(e){var t=this;if(void 0!==t.customerAgreementTypes&&t.customerAgreementTypes.length>0){var a=$.grep($.makeArray(t.customerAgreementTypes),function(e){return e.CanonicalKey===t.viewModel.customerClass});if(a.length>0){var o=$.grep($.makeArray(a[0].CustomerTypes.CustomerType),function(e){return e.CanonicalKey===t.viewModel.customerType});if(o.length>0){var s=$.grep($.makeArray(o[0].AgreementCustomerTypes.AgreementCustomerType),function(t){return t.CanonicalValue===e});if(s.length>0)return s[0].CanonicalKey}}}return""},toggleDisconnectionReconnection:function(){var e=this.get("viewModel.disconnectReconnectAll");$.each($.makeArray(this.viewModel.selectedproductData),function(t,a){"Active"===a.prinPckStatus&&a.set("isSelected",e)})}.observes("viewModel.disconnectReconnectAll"),establishmentNameChanged:function(){var e=this;e.clearAgreementData(),e.viewModel.viewingLocations.clear(),$.each($.makeArray(e.viewModel.accounts),function(t,a){void 0!==a.ListOfAgreement&&void 0!==a.ListOfAgreement.Agreement&&$.each($.makeArray(a.ListOfAgreement.Agreement),function(t,o){o.Name===e.viewModel.establishmentName&&(e.viewModel.viewingLocations.addObject(o.LocationIndicator),e.viewModel.set("paymentGroup",a))})}),void 0!==e.viewModel.establishmentName&&null!==e.viewModel.establishmentName&&void 0!==e.viewingLocation&&null!==e.viewingLocation?(e.viewModel.set("viewingLocation",e.viewingLocation),e.set("viewingLocation",void 0)):e.viewModel.set("viewingLocation",void 0)}.observes("viewModel.establishmentName"),viewingLocationChanged:function(){var e=this;e.clearAgreementData(),$.each($.makeArray(e.viewModel.accounts),function(t,a){void 0!==a.ListOfAgreement&&void 0!==a.ListOfAgreement.Agreement&&$.each($.makeArray(a.ListOfAgreement.Agreement),function(t,o){return o.Name!==e.viewModel.establishmentName||o.LocationIndicator!==e.viewModel.viewingLocation||(e.getAgreementDetails(a,o),!1)})})}.observes("viewModel.viewingLocation"),disconnectAllPackages:function(){var e=this;e.viewModel&&e.viewModel.principalPackagesData&&$.each(e.viewModel.principalPackagesData,function(t,a){a.set("isSelected",e.viewModel.disconnectAllPackages)}),e.viewModel&&e.viewModel.smartcardsData&&$.each(e.viewModel.addOnPackagesData,function(t,a){a.set("isSelected",e.viewModel.disconnectAllPackages)})}.observes("viewModel.disconnectAllPackages"),disconnectAllSmartcards:function(){var e=this;e.viewModel&&e.viewModel.smartcardsData&&$.each(e.viewModel.smartcardsData,function(t,a){a.set("isSelected",e.viewModel.disconnectAllSmartcards)})}.observes("viewModel.disconnectAllSmartcards"),showPrincipalPackagesData:function(){var e=this;return!!(e.viewModel&&e.viewModel.principalPackagesData&&e.viewModel.principalPackagesData.length>0)}.property("viewModel.principalPackagesData"),showAddOnPackagesData:function(){var e=this;return!!(e.viewModel&&e.viewModel.addOnPackagesData&&e.viewModel.addOnPackagesData.length>0)}.property("viewModel.addOnPackagesData"),clearFormData:function(){this.viewModel.set("establishments",[]),this.viewModel.set("viewingLocations",[])},clearAgreementData:function(){var e=this;e.viewModel.set("viewingPlatform",void 0),e.viewModel.set("viewingPoints",void 0),e.viewModel.set("contractStartDate",void 0),e.viewModel.set("contractEndDate",void 0),e.viewModel.set("chargePeriod",void 0),e.viewModel.set("selectedproductData",[]),e.viewModel.set("smartcardsData",[]),e.viewModel.set("principalPackagesData",[]),e.viewModel.set("addOnPackagesData",[]),e.set("smartcardsDataFirstColumn",[]),e.set("smartcardsDataSecondColumn",[]),e.set("principalPackagesDataFirstColumn",[]),e.set("principalPackagesDataSecondColumn",[]),e.set("addOnPackagesDataFirstColumn",[]),e.set("addOnPackagesDataSecondColumn",[]),e.set("showDetails",!1),e.set("showNoDataLabel",!1)},checkCustomerClass:function(e,t){var a=!1,o=t.split(",");return $.each($.makeArray(e),function(e,t){return!o.contains(t)||(a=!0,!1)}),a},retrieveCustomerProfile:function(e){var t=this;t.viewModel.accounts.clear();var a=Komodo.Services.customerProfileService.getCustomerProfile();a&&a.ResponseMessage&&a.ResponseMessage.Payload&&a.ResponseMessage.Payload.ListOfAccount&&a.ResponseMessage.Payload.ListOfAccount.Account&&$.each(a.ResponseMessage.Payload.ListOfAccount.Account,function(e,a){t.viewModel.accounts.addObject(a)})},mapEstablishments:function(){var e=this;e.viewModel.establishments.clear(),$.each(e.viewModel.accounts,function(t,a){void 0!==a.ListOfAgreement&&void 0!==a.ListOfAgreement.Agreement&&$.each(a.ListOfAgreement.Agreement,function(t,a){a.Name.toUpperCase().indexOf(" - DCC")<=0&&a.Type!==Komodo.AgreementTypes.DCC&&"ACTIVE"===a.AgreementStatus.toUpperCase()&&e.viewModel.establishments.addObject(a.Name)})}),e.viewModel.establishments&&e.viewModel.establishments.sort(function(e,t){return e<t?-1:e>t?1:0}),e.establishmentName&&(e.viewModel.set("establishmentName",e.establishmentName),e.set("establishmentName",void 0))},getAgreementDetails:function(e,t){var a=this;if(a.showBusyIndicator(),void 0===t.ListOfHardware||void 0===t.ListOfHardware.Hardware||0===t.ListOfHardware.Hardware.length){Komodo.Application.SharedObjectController.create().retrieveCustomerDeviceProfile(e.CustomerId,e.UID,t.UID).done(function(o){a.retrieveCustomerProfile(e.CustomerId),a.mapAgreementDetails(t),a.hideBusyIndicator()})}else a.mapAgreementDetails(t),a.hideBusyIndicator()},mapAgreementDetails:function(e){var t=this;t.viewModel.set("viewingPlatform",e.InstallationType),t.viewModel.set("viewingPoints",e.NumberOfViewingPoints),t.viewModel.set("contractStartDate",new Date(e.StartDate)),t.viewModel.set("contractEndDate",new Date(e.EndDate)),t.viewModel.set("agreementType",t.getAgreementType(e.LocationIndicator)),t.set("contractEndDate",new Date(e.EndDate));var a=$.grep($.makeArray(t.chargePeriods),function(t){return t.value===e.TermOfPayment});if(a.length>0&&t.viewModel.set("chargePeriod",a[0].title),void 0!==e.ListOfHardware&&void 0!==e.ListOfHardware.Hardware){var o=[];if($.each($.makeArray(e.ListOfHardware.Hardware),function(a,s){void 0!==s.ListOfService&&void 0!==s.ListOfService.Service&&$.each($.makeArray(s.ListOfService.Service),function(a,r){if(void 0!==r.ProductDetail&&"Active"===r.Status){var n=Komodo.Models.ManageViewingGridModel.create();n.set("smartCardName",s.SmartcardDetail.Name),n.set("smartCardNumber",s.LinkedSmartcard),n.set("deviceNumber",s.SerialNumber),n.set("applyStyleForPrin",!0),n.set("applyStyleForAddOn",!1),n.set("endDate",r.ChargeUntilDate),n.set("prinPckName",r.ProductDetail.Description),n.set("prinPckStatus",r.Status),n.set("addOnPckName","-"),n.set("packageName",r.ProductDetail.Name),n.set("agreementId",e.UID),"Active"===r.Status?n.set("isSelected",!0):n.set("isSelected",!1),n.set("actualSelectedState",n.isSelected),"PRINCIPAL"===r.ProductDetail.Type.toUpperCase()&&n.set("isAddon","No"),$.inArray(r.ProductDetail.Type.toUpperCase(),t.arrayOfProductTypes)>-1&&n.set("isAddon","Yes"),o.addObject(n)}})}),t.viewModel.set("selectedproductData",o.sort(function(e,t){return e.smartCardNumber===t.smartCardNumber&&e.deviceNumber===t.deviceNumber&&e.isAddon<t.isAddon?-1:e.smartCardNumber===t.smartCardNumber&&e.deviceNumber===t.deviceNumber&&e.isAddon>t.isAddon?1:0})),!0===t.commercialDisconnectDetailView){var s=[];if($.each(t.viewModel.selectedproductData,function(e,a){s=$.grep(t.viewModel.smartcardsData,function(e){return e.smartCardNumber===a.smartCardNumber}),0===s.length&&t.viewModel.smartcardsData.addObject(Ember.Object.create({smartCardNumber:a.smartCardNumber,description:a.smartCardName+" "+a.smartCardNumber,isSelected:!1})),"No"===a.isAddon&&(s=$.grep(t.viewModel.principalPackagesData,function(e){return e.packageName===a.packageName}),0===s.length&&t.viewModel.principalPackagesData.addObject(Ember.Object.create({packageName:a.packageName,description:a.prinPckName,isSelected:!1}))),"Yes"===a.isAddon&&(s=$.grep(t.viewModel.addOnPackagesData,function(e){return e.packageName===a.packageName}),0===s.length&&t.viewModel.addOnPackagesData.addObject(Ember.Object.create({packageName:a.packageName,description:a.prinPckName,isSelected:!1})))}),t.viewModel.principalPackagesData&&t.viewModel.principalPackagesData.length>0||t.viewModel.addOnPackagesData&&t.viewModel.addOnPackagesData.length>0){if(void 0!==t.viewModel.smartcardsData&&t.viewModel.smartcardsData.length>0){t.viewModel.smartcardsData.sort(function(e,t){var a=e.description?e.description.toLowerCase():"",o=t.description?t.description.toLowerCase():"";return a>o?1:a<o?-1:0});var r=0;$.each(t.viewModel.smartcardsData,function(e,a){a.smartCardNumber&&""!==a.smartCardNumber&&(r%2==0?t.smartcardsDataFirstColumn.push(a):t.smartcardsDataSecondColumn.push(a),r++)})}void 0!==t.viewModel.principalPackagesData&&t.viewModel.principalPackagesData.length>0&&(t.viewModel.principalPackagesData.sort(function(e,t){var a=e.description?e.description.toLowerCase():"",o=t.description?t.description.toLowerCase():"";return a>o?1:a<o?-1:0}),$.each(t.viewModel.principalPackagesData,function(e,a){e%2==0?t.principalPackagesDataFirstColumn.push(a):t.principalPackagesDataSecondColumn.push(a)})),void 0!==t.viewModel.addOnPackagesData&&t.viewModel.addOnPackagesData.length>0&&(t.viewModel.addOnPackagesData.sort(function(e,t){var a=e.description?e.description.toLowerCase():"",o=t.description?t.description.toLowerCase():"";return a>o?1:a<o?-1:0}),
$.each(t.viewModel.addOnPackagesData,function(e,a){e%2==0?t.addOnPackagesDataFirstColumn.push(a):t.addOnPackagesDataSecondColumn.push(a)}))}else t.viewModel.set("selectedproductData",[])}}void 0===t.viewModel.selectedproductData||void 0===t.viewModel.selectedproductData.length||t.viewModel.selectedproductData.length<1?(t.set("showDetails",!1),t.set("showNoDataLabel",!0)):(t.set("showDetails",!0),t.set("showNoDataLabel",!1)),$.each($.makeArray(t.viewModel.selectedproductData),function(e,a){if(!0===a.isSelected)return void t.viewModel.set("disconnectReconnectAll",!0)})},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,1e4,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},submitDisconnectServices:function(e){var t,a=this,o=!1,s=new Date;if(moment(a.viewModel.contractEndDate).format(KomodoConfiguration.dateFormat)!==moment().format(KomodoConfiguration.dateFormat)&&(s=new Date(moment(a.viewModel.contractEndDate).format("MM/DD/YYYY"))),!0===a.commercialDisconnectDetailView){var r=[],n=$.grep(a.viewModel.smartcardsData,function(e){return!0===e.isSelected}),i=$.grep(a.viewModel.principalPackagesData,function(e){return!0===e.isSelected}),c=$.grep(a.viewModel.addOnPackagesData,function(e){return!0===e.isSelected});if(n.length>0&&i.length<=0&&c.length<=0&&n.length<a.viewModel.smartcardsData.length)return t=Komodo.Controls.MessageBoxController.show(kl.value(a._commercialLocaleBase+"disconnect.confirmMessageTitle"),kl.value(a._commercialLocaleBase+"disconnect.confirmMessageText"),Komodo.Controls.MessageBoxYesNoButtons,a,"id5446673","warning"),void(t.response=function(e){if("yes"===e){var t=[],o=[],r=[];$.each($.makeArray(n),function(e,t){r.push(t.smartCardNumber)}),$.each($.makeArray(a.viewModel.selectedproductData),function(e,a){r.contains(a.smartCardNumber)?t.push(a.packageName):o.push(a.smartCardNumber)}),t=$.unique(t),o=$.unique(o);var i=new Object;i.CustomerNumber=a.customerNo,i.ServiceNames=t,i.DeviceSerialNumbers=o,i.ScheduleDate=s.toLocaleDateString("sv-SE"),i.CreateSchedule=s>new Date,void 0!==i.CustomerNumber&&a.disconnectSmartcards(i)}});$.each($.makeArray(a.viewModel.selectedproductData),function(e,t){r=$.grep(a.viewModel.smartcardsData,function(e){return e.smartCardNumber===t.smartCardNumber&&!0===e.isSelected}),r.length>0&&t.set("isSelected",!1),r=$.grep(a.viewModel.principalPackagesData,function(e){return e.packageName===t.packageName&&!0===e.isSelected}),r.length>0&&t.set("isSelected",!1),r=$.grep(a.viewModel.addOnPackagesData,function(e){return e.packageName===t.packageName&&!0===e.isSelected}),r.length>0&&t.set("isSelected",!1)})}$.each($.makeArray(a.viewModel.selectedproductData),function(e,t){if(t.isSelected!==t.actualSelectedState)return void(o=!0)}),o?(t=Komodo.Controls.MessageBoxController.show(kl.value(a._commercialLocaleBase+"disconnect.confirmMessageTitle"),kl.value(a._commercialLocaleBase+"disconnect.confirmMessageText"),Komodo.Controls.MessageBoxYesNoButtons,a,"id5446673","warning"),t.response=function(t){if("yes"===t){var o="",r=[];$.each($.makeArray(a.viewModel.selectedproductData),function(e,t){if(t.smartCardNumber!==o){o=t.smartCardNumber;var n=[];if($.each($.makeArray(a.viewModel.selectedproductData),function(e,t){t.smartCardNumber===o&&!1===t.isSelected&&"Active"===t.prinPckStatus&&n.push(t.packageName)}),void 0!==n.length&&n.length>0){var i=new Object;i.DeviceSerialNumber=t.smartCardNumber,i.PackageNames=n,i.DisconnectionReason=a.viewModel.get("disconnectReason.SystemKey"),i.ScheduledDisconnectionDate=s.toLocaleDateString("sv-SE"),r.pushObject(i)}}}),r.length>0&&a.disconnectPackages(r,e)}}):Komodo.Controls.MessageBoxController.show(kl.value(a._viewingLocaleBase+"commercial.disconnectTitle"),kl.value(a._commercialLocaleBase+"disconnect.messageSelectService"),Komodo.Controls.MessageBoxOkButton,a,"id5446673","warning")},disconnectPackages:function(e,t){var a=this,o=void 0;t&&(Komodo.Services.queryService.set("_elevatedPrivilegeSessionToken",t),o=Komodo.Services.queryService.elevatedPrivilegeBeforeSend),a.showBusyIndicator(),Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+this.get("customerNo")),Komodo.Services.queryService.postJSON("/Device/CommercialDisconnectAllPackages",{data:$.makeArray(e),beforeSend:o}).done(function(e){a.hideBusyIndicator();var t,o=!0,s=kl.value(a._commercialLocaleBase+"disconnect.disconnectFailErrorMessage");if(e&&e.length>0){s="";for(var r=0;r<e.length;r++){var n=e[r].split(":");"Success"!==n[0]&&(o=!1,s+="<br>"+n[1])}}o?(t="success",s=kl.value(a._commercialLocaleBase+"disconnect.messageDisconnectSuccess")):(t="warning",s=s.substr(4)),Komodo.Controls.MessageBoxController.show(kl.value(a._viewingLocaleBase+"commercial.disconnectTitle"),s,Komodo.Controls.MessageBoxOkButton,a,"id5446673",t).response=function(e){if(o&&"ok"===e)return void Komodo.Services.uiService.transitionTo("commercialCustomerProfile")}}).error(function(e){a.hideBusyIndicator(),e&&"string"===$.type(e.responseJSON)?Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),e.responseJSON,Komodo.Controls.MessageBoxOkButtons,a,"id5446673","danger"):e.responseJSON&&e.responseJSON.ExceptionMessage?Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),e.responseJSON.ExceptionMessage,Komodo.Controls.MessageBoxOkButtons,a,"id5446673","danger"):e.statusText?Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),e.statusText,Komodo.Controls.MessageBoxOkButtons,a,"id5446673","danger"):Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),JSON.stringify(e),Komodo.Controls.MessageBoxOkButtons,a,"id5446673","danger")})},disconnectSmartcards:function(e){var t=this;t.showBusyIndicator(),Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+this.get("customerNo")),Komodo.Services.queryService.postJSON("/Device/UpdateDeviceLink",{data:e}).done(function(){t.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(t._viewingLocaleBase+"commercial.disconnectTitle"),kl.value(t._commercialLocaleBase+"disconnect.messageDisconnectSuccess"),Komodo.Controls.MessageBoxOkButton,t,"id5446673","success").response=function(e){if("ok"===e)return void Komodo.Services.uiService.transitionTo("commercialCustomerProfile")}}).error(function(e){t.hideBusyIndicator(),e&&"string"===$.type(e.responseJSON)?Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),e.responseJSON,Komodo.Controls.MessageBoxOkButtons,t,"id5556673","danger"):e.responseJSON&&e.responseJSON.ExceptionMessage?Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),e.responseJSON.ExceptionMessage,Komodo.Controls.MessageBoxOkButtons,t,"id5556673","danger"):e.responseJSON&&e.responseJSON.Message?Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),e.responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,t,"id5556673","danger"):e.statusText?Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),e.statusText,Komodo.Controls.MessageBoxOkButtons,t,"id5556673","danger"):Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),JSON.stringify(e),Komodo.Controls.MessageBoxOkButtons,t,"id5556673","danger")})},arrayOfProductTypes:[],commercialDisconnectDetailView:!1,defaultDisconnectReasonKey:4,smartcardsDataFirstColumn:[],smartcardsDataSecondColumn:[],principalPackagesDataFirstColumn:[],principalPackagesDataSecondColumn:[],addOnPackagesDataFirstColumn:[],addOnPackagesDataSecondColumn:[]}),Komodo.Application.DeviceInfoController=Komodo.UI.Controller.extend({localeError:"locale.errorcodes:errorCodes.",localeAddressInformationTab:"locale.manageviewing:deviceInfo.",localeDeviceInfo:"locale.manageviewing:deviceInfo.",deviceInfoViewOnlyPermission:"clarity://deviceInfo/viewOnly",init:function(){this._super(),Komodo.log("Constructing Device Info controller"),this.set("processVersion","v1.1"),this.set("processName","Device Info"),this.set("chargePeriodlst",[]),this.set("userData",[]),this.getNewProcessID(),this.initializeQuoteSummaryGrid(),this.requiresDependency("_queryService",{singleton:Komodo.Services.queryService})},initializeQuoteSummaryGrid:function(){this.dataGridColumnsChangeChargePeriod=[Komodo.Controls.DataGridColumn.create({name:"smartcardNumber",title:kl.value(this.localeDeviceInfo+"smartcardNumber"),canEdit:!1,width:"230px"}),Komodo.Controls.DataGridColumn.create({name:"invoiceDescription",title:kl.value(this.localeDeviceInfo+"invoiceDescription"),canEdit:!1,width:"500px"}),Komodo.Controls.DataGridColumn.create({name:"amountRequired",title:kl.value(this.localeDeviceInfo+"amountRequired"),canEdit:!1,width:"200px",customClass:"komodo-decimal"}),Komodo.Controls.DataGridCommandColumn.create({title:kl.value(this.localeDeviceInfo+"view"),width:"150px",displayText:kl.value(this.localeDeviceInfo+"viewQuote"),action:"viewQuoteDetails"})]},showAddressChanged:function(){this.get("deviceInfoAddressPanel")?$("#deviceInfoAddressPanel").show():$("#deviceInfoAddressPanel").hide()}.observes("deviceInfoAddressPanel"),start:function(){this.getCDMData(),this.set("selectedSerialNumber",void 0),this.set("errorReasonText",void 0),this.registerModel("deviceInfoModel",Komodo.Models.DeviceInfoModel),this.set("addressInformation",Komodo.Models.AddressModel.create()),this.populatechargePeriod(),this.setUserDataArray(),this.set("csiLogDetailsModel",Komodo.Models.CsiLogDetailsModel.create()),this.set("csiAllLogDetailsModel",Komodo.Models.CsiAllLogDetailsModel.create()),this.set("viewQuote",Komodo.Models.QuoteSummaryModel.create()),this.createNewGridItem(),this.searchFinancialAccount(),this.subscribeNotifyGetCSILogs(),this.subscribeNotifyGetCSILogsError(),this.checkAllViewLogsVisible(),this._super(),this.deviceInfoModel.set("tempDis",!0),this.set("deviceInfoAddressPanel",!1),this.registerValidation(),this.set("sharedObject",Komodo.Application.ManageViewingSharedObjectController.create()),this.checkSPLProduct(),Komodo.Services.securityService.hasPermission(this.deviceInfoViewOnlyPermission)&&(this.deviceInfoModel.set("isDisableChargeButton",!0),this.deviceInfoModel.set("isDisableSubmitButton",!0),this.deviceInfoModel.set("isDisableChargeDropdownGotvOpen",!0),this.deviceInfoModel.set("isDisableChargeDropdown",!0),this.set("disableAddressInfo",!0))},checkAllViewLogsVisible:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("ManageViewing","ViewAllCSILogs").done(function(t){if((void 0!=t||""!=t||null!=t)&&"true"==t.toString().toLowerCase())return void e.deviceInfoModel.set("viewAllCSILogs",!0);e.deviceInfoModel.set("viewAllCSILogs",!1)}).fail(function(){e.deviceInfoModel.set("viewAllCSILogs",!1)})},chargePeriodChanged:function(){this.deviceInfoModel.get("chargePeriod")!=this.originalChargePeriod&&this.productUpdateDetails&&this.productUpdateDetails.length>0?this.deviceInfoModel.set("isDisableChargeButton",!1):void 0==this.originalChargePeriod?this.deviceInfoModel.set("isDisableChargeButton",!0):this.deviceInfoModel.get("chargePeriod")!=this.originalChargePeriod&&0==this.productUpdateDetails.length&&0==this.principalServiceName.length&&"-"==this.princiServiceName&&"-"==this.princiserviceStatus?this.deviceInfoModel.set("isDisableChargeButton",!1):this.deviceInfoModel.set("isDisableChargeButton",!0)}.observes("deviceInfoModel.chargePeriod"),deviceUserChanged:function(){"1"==this.deviceInfoModel.type?(this.deregisterValidator("firstNameValidator"),this.deregisterValidator("lastNameValidator"),this.deviceInfoModel.set("isControlsVisible",!1),this.deviceInfoModel.set("isDisableSubmitButton",!1)):"2"==this.deviceInfoModel.type&&(this.registerValidation(),this.deviceInfoModel.set("isControlsVisible",!0),this.deviceInfoModel.set("isDisableSubmitButton",!1))}.observes("deviceInfoModel.type"),deviceUserDetailsChanged:function(){this.deviceInfoModel.set("isDisableSubmitButton",!1)}.observes("deviceInfoModel.firstName","deviceInfoModel.lastName"),initializeControls:function(){this.deviceInfoModel.set("deviceName","-"),this.deviceInfoModel.set("deviceNumber","-"),this.deviceInfoModel.set("deviceStatus","-"),this.deviceInfoModel.set("warrantyEndDate","-"),this.deviceInfoModel.set("smartcardName","-"),this.deviceInfoModel.set("smartcardNumber","-"),this.deviceInfoModel.set("smartcardStatus","-"),this.deviceInfoModel.set("viewingPeriod","-"),this.deviceInfoModel.set("principalPackage",[]),this.deviceInfoModel.set("principalStatus",[]),this.deviceInfoModel.set("addOnPackage","-"),this.deviceInfoModel.set("addOnStatus","-"),this.deviceInfoModel.set("addOnPackageNames",[]),this.deviceInfoModel.set("addOnPackageStatus",[]),this.deviceInfoModel.set("contractStartDate","-"),this.deviceInfoModel.set("contractEndDate","-"),this.deviceInfoModel.set("chargeUntilDate","-"),this.deviceInfoModel.set("quoteBasedDisconnectDate","-"),this.deviceInfoModel.set("services","-"),this.deviceInfoModel.set("principalServiceName",[]),this.deviceInfoModel.set("serviceStatus",[]),this.deviceInfoModel.set("gotvopenchargeperiod","-"),this.deviceInfoModel.set("isonlygotvopenproduct",!0),this.set("disableAddressInfo",!1)},populatechargePeriod:function(){this.set("chargePeriodlst",[]);var e=Komodo.Services.customerProfileService.get("invoicePeriod"),t=[];e.forEach(function(e){"Quarterly"!=e.value&&t.push(e)});var a=GetClarityConstants("ManageViewingConstants","manageViewingConstants.deviceInfo.productExcludeForChargePeriod");Ember.isEmpty(a)||a.contains(this.princiServiceName)?this.set("chargePeriodlst",e):this.set("chargePeriodlst",t)},setUserDataArray:function(){this.get("userData").clear();var e=kl.value("locale.associateProducts:deviceAtAnotherLocation.customer");this.get("userData").addObject({value:e,key:"1"});var t=kl.value("locale.associateProducts:deviceAtAnotherLocation.someoneElse");this.get("userData").addObject({value:t,key:"2"})},searchFinancialAccount:function(){var e=this.get("accountId");this.set("accountno",e);var t,a=Komodo.Services.ProductAndServiceMaintenanceHelper.create();if(Komodo.Application.ManageAccountUtility.isAnyAccountExist()){var o=this;t=a.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account).filter(function(e){var t=o.get("accountno");return e.UID===t}),t.length&&t.length>0&&this.bindControls(t)}},bindControls:function(e){this.initializeControls();var t=Komodo.Services.ProductAndServiceMaintenanceHelper.create();this.set("productUpdateDetails",[]);var a=Komodo.Services.customerProfileService.currentCustomerDetails.ResponseMessage.Payload.CustomerDetail,o="";if(1==this.get("isXtraview")&&(o+="Xtraview, "),1==this.get("isBoxOffice")&&(o+="Box Office, "),1==this.get("isInsurance")&&(o+="Insurance, "),1==this.get("isAccesss")&&(o+="Access, "),1==this.get("isDPP24")&&(o+="Explora Payment Plan R99, "),o.length>0&&(o=o.substring(0,o.length-2),this.deviceInfoModel.set("services",this.checkEmptyAndReplace(o))),a){a.BusinessUnit&&"gotv"===a.BusinessUnit.toLowerCase()&&this.princiServiceName!=GetProductsConstants("ProductsConstants","GOTV_LITE_ENABLE_CHARGE_PERIOD")&&(0==this.principalServiceName.length&&"-"==this.princiServiceName&&"-"==this.princiserviceStatus?this.deviceInfoModel.set("isDisableChargeDropdown",!1):this.deviceInfoModel.set("isDisableChargeDropdown",!0));var s=GetClarityConstants("ManageViewingConstants","manageViewingConstants.deviceInfo.gotvFreeProductForChargePeriod");if(this.principalServiceName.length>1)for(var r=0;r<this.principalServiceName.length;r++)!Ember.isEmpty(s)&&s.contains(this.principalServiceName[r].trim())?(this.deviceInfoModel.set("isDisableChargeDropdownGotvOpen",!0),this.deviceInfoModel.set("isgotvopenproduct",!0),this.deviceInfoModel.set("gotvopenchargeperiod",this.gotvopenchargePeriod.toString())):this.deviceInfoModel.set("isDisableChargeDropdown",!1);else!Ember.isEmpty(s)&&s.contains(this.princiServiceName.toString())&&(this.deviceInfoModel.set("isDisableChargeDropdownGotvOpen",!0),this.deviceInfoModel.set("isgotvopenproduct",!1),this.deviceInfoModel.set("gotvopenchargeperiod",this.gotvopenchargePeriod.toString()),this.deviceInfoModel.set("isonlygotvopenproduct",!0));if(this.principalServiceName.length>0||this.addOnPackageNames.length>0)for(var n=!1,i=GetClarityConstants("ManageViewingConstants","manageViewingConstants.deviceInfo.nonBillableMobileProducts"),c=0;c<this.principalServiceName.length;c++){var l=$.inArray(this.principalServiceName[c].trim().toLowerCase(),i)>-1;if(!l&&this.addOnPackageNames.length>0&&!Ember.isEmpty(i))e:for(var d=0;d<this.addOnPackageNames.length;d++)for(var u=0;u<i.length;u++)if(this.addOnPackageNames[d].toLowerCase()===i[u].toLowerCase()){n=!0;break e}(l||n)&&this.deviceInfoModel.set("isDisableChargeDropdown",!0)}var h=this;Komodo.Services.featureToggleService.isEnabled("deviceInfo","IsDisableChargePeriod").done(function(e){e&&a.Class&&"3"==a.Class&&"32"!=a.Type&&h.deviceInfoModel.set("isDisableChargeDropdown",!0),h.set("isDisableChargePeriod",!!e)}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)})}this.deviceInfoModel.set("deviceName",this.checkEmptyAndReplace(this.deviceName)),this.deviceInfoModel.set("deviceStatus",this.checkEmptyAndReplace(this.deviceStatus)),this.deviceInfoModel.set("smartcardName",this.checkEmptyAndReplace(this.smartcardName)),this.deviceInfoModel.set("smartcardNumber",this.checkEmptyAndReplace(this.get("smartCard"))),this.deviceInfoModel.set("smartcardStatus",this.checkEmptyAndReplace(this.get("smartcardStatus"))),this.deviceInfoModel.set("viewingPeriod",this.checkEmptyAndReplace(this.newViewingPeriod)),this.principalServiceName.length>0?(this.deviceInfoModel.set("princiPackage",""),this.deviceInfoModel.set("princiserviceStatus",""),this.deviceInfoModel.set("principalServiceName",[]),this.deviceInfoModel.set("serviceStatus",[])):(this.deviceInfoModel.set("princiPackage",this.checkEmptyAndReplace(this.princiServiceName)),this.deviceInfoModel.set("princiserviceStatus",this.checkEmptyAndReplace(this.princiserviceStatus))),this.deviceInfoModel.set("principalPackage",this.checkEmptyAndReplace(this.principalServiceName)),this.deviceInfoModel.set("principalStatus",this.checkEmptyAndReplace(this.serviceStatus)),this.addOnPackageNames.length>0?this.deviceInfoModel.set("addOnPackage",""):this.deviceInfoModel.set("addOnPackage",this.checkEmptyAndReplace(this.addOnServiceName)),this.addOnPackageStatus.length>0?this.deviceInfoModel.set("addOnStatus",""):this.deviceInfoModel.set("addOnStatus",this.checkEmptyAndReplace(this.addOnServiceStatus)),this.deviceInfoModel.set("addOnPackageNames",this.addOnPackageNames),this.deviceInfoModel.set("addOnPackageStatus",this.addOnPackageStatus),this.deviceInfoModel.set("chargePeriod",this.checkEmptyAndReplace(this.chargePeriod)),a&&a.BusinessUnit&&"gotv"===a.BusinessUnit.toLowerCase()&&0==this.principalServiceName.length&&"-"==this.princiServiceName&&"-"==this.princiserviceStatus&&this.deviceInfoModel.set("chargePeriod",this.agreementChargePeriod.toString()),this.deviceInfoModel.set("chargeUntilDate",this.checkEmptyAndReplace(this.chargeUntilDate)),this.deviceInfoModel.set("quoteBasedDisconnectDate",this.checkEmptyAndReplace(this.quoteBasedDisconnectDate)),this.set("originalChargePeriod",this.deviceInfoModel.get("chargePeriod")),""!=this.deviceSerialNumber&&"-"!=this.deviceSerialNumber?this.deviceInfoModel.set("deviceNumber",this.checkEmptyAndReplace(this.deviceSerialNumber)):"-"!=this.MACAddress&&this.deviceInfoModel.set("deviceNumber",this.checkEmptyAndReplace(this.MACAddress)),"-"!=this.deviceInfoModel.get("smartcardNumber")&&""!=this.deviceInfoModel.get("smartcardNumber")&&"-"!=this.deviceSerialNumber&&""!=this.deviceSerialNumber?this.set("deviceNum",this.checkEmptyAndReplace(this.deviceSerialNumber)):"-"!=this.MACAddress?this.set("deviceNum",this.checkEmptyAndReplace(this.MACAddress)):this.set("deviceNum",this.checkEmptyAndReplace(this.deviceSerialNumber)),null!=this.get("deviceNum")&&""!=this.get("deviceNum")&&void 0!=this.get("deviceNum")&&"-"!=this.get("deviceNum")?(that=this,Komodo.Services.queryService.getJSON("/DeviceProcessing/GetDeviceWarrantyDetails?deviceId="+that.get("deviceNum")).done(function(e){null!=e?null!=e.CustomerWarrantyEnd&&that.deviceInfoModel.set("warrantyEndDate",null!=e.CustomerWarrantyEnd?that.getformatedDateforUI(new Date(e.CustomerWarrantyEnd)):""):Komodo.Controls.MessageBoxController.show("Device Information","Unable to retrieve warranty end data for device with id: '"+that.deviceInfoModel.get("deviceNum")+"'. Null data returned. ",Komodo.Controls.MessageBoxOkButtons,that,"id5446673","danger")}).fail(function(e){Komodo.log("GetDeviceWarrantyDetails ajax call failed. Error: "+JSON.stringify(e));var t=null!=e&&null!=e.responseText?e.responseText:"An error has occurred, please look at logs for more information.";Komodo.Controls.MessageBoxController.show("Device Information","Error message:"+t,Komodo.Controls.MessageBoxOkButtons,that,"id5446673","danger")})):this.deviceInfoModel.set("warrantyEndDate","-");var m=this.get("agreementId");this.set("agreementid",m);var g=t.createArrayForSingleElement(e[0].ListOfAgreement.Agreement);if(g&&(that=this,selectedAgreement=g.filter(function(e){return e.UID===that.get("agreementid")}),selectedAgreement&&selectedAgreement.length>0)){if(selectedAgreement[0].LocationIndicator&&"payment plan"===selectedAgreement[0].LocationIndicator.toString().toLowerCase()?(this.deviceInfoModel.set("isDisableChargeDropdown",!0),this.set("isPaymentPlanAgreement",!0)):this.set("isPaymentPlanAgreement",!1),selectedAgreement[0].ListOfAddress&&selectedAgreement[0].ListOfAddress.Address&&selectedAgreement[0].ListOfAddress.Address.length>0){this.deviceInfoModel.set("isPrimary",selectedAgreement[0].ListOfAddress.Address[0].IsPrimary),this.deviceInfoModel.set("isPrimaryString",!0===selectedAgreement[0].ListOfAddress.Address[0].IsPrimary?kl.value("locale.customerprofile.customerprofile:labels.yes"):kl.value("locale.customerprofile.customerprofile:labels.no")),this.deviceInfoModel.set("country",selectedAgreement[0].ListOfAddress.Address[0].Country),this.deviceInfoModel.set("province",selectedAgreement[0].ListOfAddress.Address[0].Province);var p=this.getCitySuburbText(selectedAgreement[0].ListOfAddress.Address[0].Country,selectedAgreement[0].ListOfAddress.Address[0].Province,selectedAgreement[0].ListOfAddress.Address[0].City,selectedAgreement[0].ListOfAddress.Address[0].Suburb);this.deviceInfoModel.set("city",p.City),this.deviceInfoModel.set("suburb",p.Suburb),this.deviceInfoModel.set("postalCode",selectedAgreement[0].ListOfAddress.Address[0].PostCode),this.deviceInfoModel.set("buildingName",selectedAgreement[0].ListOfAddress.Address[0].BuildingName),this.deviceInfoModel.set("unitNumber",selectedAgreement[0].ListOfAddress.Address[0].HouseNumber),this.deviceInfoModel.set("privateBag",selectedAgreement[0].ListOfAddress.Address[0].PostBoxNumber),this.deviceInfoModel.set("type",selectedAgreement[0].ListOfAddress.Address[0].Type),this.deviceInfoModel.set("isVerify",!!selectedAgreement[0].ListOfAddress.Address[0].IsVerified&&!selectedAgreement[0].ListOfAddress.Address[0].IsVerified);var v=Komodo.UI.addressFunctions.splitStreetNumberName(selectedAgreement[0].ListOfAddress.Address[0].Street);this.deviceInfoModel.set("streetNumber",v.streetNumber),this.deviceInfoModel.set("streetName",v.streetName);var f=a.PersonalDetail.FirstName,b=a.PersonalDetail.Surname;"null"!==f&&null!==f&&"undefined"!==f&&""!==f&&"null"!==b&&null!==b&&"undefined"!==b&&""!==b?a.PersonalDetail.FirstName.toUpperCase()==selectedAgreement[0].PersonalDetail.FirstName.toUpperCase()&&a.PersonalDetail.Surname.toUpperCase()==selectedAgreement[0].PersonalDetail.Surname.toUpperCase()?(this.deviceInfoModel.set("type","1"),this.deregisterValidator("firstNameValidator"),this.deregisterValidator("lastNameValidator")):(this.deviceInfoModel.set("type","2"),this.deviceInfoModel.set("isControlsVisible",!0),this.deviceInfoModel.set("firstName",selectedAgreement[0].PersonalDetail.FirstName),this.deviceInfoModel.set("lastName",selectedAgreement[0].PersonalDetail.Surname)):this.deviceInfoModel.set("type","1"),this.deviceInfoModel.set("displayAddress",this.getAddressDetails())}if(!Ember.isEmpty(selectedAgreement[0].ListOfHardware.Hardware))for(var C=GetClarityConstants("ManageViewingConstants","manageViewingConstants.deviceInfo.disableDPPProducts"),S=0;S<selectedAgreement[0].ListOfHardware.Hardware.length;S++)if(!Ember.isEmpty(selectedAgreement[0].ListOfHardware.Hardware[S].ListOfService.Service))e:for(var D=0;D<selectedAgreement[0].ListOfHardware.Hardware[S].ListOfService.Service.length;D++){if(C&&C.length>0&&selectedAgreement[0].ListOfHardware.Hardware[S].ListOfService.Service[D].ProductDetail&&selectedAgreement[0].ListOfHardware.Hardware[S].ListOfService.Service[D].ProductDetail.Name)for(var y=0;y<C.length;y++)if(selectedAgreement[0].ListOfHardware.Hardware[S].ListOfService.Service[D].ProductDetail.Name.toString().toLowerCase()===C[y].toString().toLowerCase()){this.set("isPaymentPlanAgreement",!0);continue e}this.productUpdateDetails.push({ProductId:selectedAgreement[0].ListOfHardware.Hardware[S].ListOfService.Service[D].UID,ServiceName:selectedAgreement[0].ListOfHardware.Hardware[S].ListOfService.Service[D].ProductDetail.Name,ChargePeriod:selectedAgreement[0].ListOfHardware.Hardware[S].ListOfService.Service[D].ChargePeriod})}if(a&&a.BusinessUnit&&"gotv"===a.BusinessUnit.toLowerCase()&&0==this.principalServiceName.length&&"-"==this.princiServiceName&&"-"==this.princiserviceStatus&&0==this.productUpdateDetails.length&&this.productUpdateDetails.push({ProductId:0,ServiceName:null,ChargePeriod:this.get("deviceInfoModel").chargePeriod}),0==this.productUpdateDetails.length&&this.deviceInfoModel.set("isDisableChargeDropdown",!0),0==this.principalServiceName.length&&"-"==this.princiServiceName&&"-"==this.princiserviceStatus&&this.deviceInfoModel.set("isDisableChargeDropdown",!1),this.deviceInfoModel.set("isDisableSubmitButton",!0),this.deviceInfoModel.set("contractStartDate",this.checkEmptyAndReplace(this.checkEmptyAndReplace(this.getformatedDateforUI(new Date(selectedAgreement[0].StartDate))))),this.deviceInfoModel.set("contractEndDate",this.checkEmptyAndReplace(this.getformatedDateforUI(new Date(selectedAgreement[0].EndDate)))),"-"==this.deviceInfoModel.get("smartcardNumber")||Ember.isEmpty(this.deviceInfoModel.get("smartcardNumber")))"-"==this.get("deviceSerialNumber")||Ember.isEmpty(this.get("deviceSerialNumber"))?this.set("showGrid",!1):(w=Komodo.Application.ManageViewingSharedObjectController.create(),this.showBusyIndicator(),w.getCSILogs(this.get("deviceSerialNumber")));else{var w=Komodo.Application.ManageViewingSharedObjectController.create();this.showBusyIndicator(),w.getCSILogs(this.deviceInfoModel.get("smartcardNumber"))}}},checkEmptyAndReplace:function(e){return null===e||void 0===e||""===e||"Nan-Nan-Nan"===e?"-":e},getformatedDateforUI:function(e){function t(e){var t=e.toString();return t.length<2?"0"+t:t}if(void 0!=e&&""!=e){var a=e.getFullYear(),o=t(e.getMonth()+1);return t(e.getDate())+"-"+o+"-"+a}},getformatedDateTimeforUI:function(e){function t(e){var t=e.toString();return t.length<2?"0"+t:t}var a=e.getFullYear(),o=t(e.getMonth()),s=t(e.getDate()),r=t(e.getHours()),n=t(e.getMinutes()),i=t(e.getSeconds()),c=r>=12?"PM":"AM";return r%=12,r=r||12,s+"-"+o+"-"+a+"   "+r+":"+n+":"+i+" "+c},subscribeNotifyGetCSILogs:function(){that=this,Komodo.Services.eventAggregator.subscribe("NotifyGetCSILogs",function(){that.hideBusyIndicator();var e=Komodo.Services.ManageViewingService.NotifyGetCSILogsMsg;that.populateGrid(e)})},subscribeNotifyGetCSILogsError:function(){that=this,Komodo.Services.eventAggregator.subscribe("NotifyGetCSILogsError",function(){that.hideBusyIndicator();var e=Komodo.Services.ManageViewingService.NotifyGetCSILogsErrorMsg;"-1"==e.indexOf("is not found")&&Komodo.Controls.MessageBoxController.show("Error",e,Komodo.Controls.MessageBoxOkButtons,that,"id5446673","danger")})},populateGrid:function(e){var t=this;if(e.length>0){t.set("showGrid",!0),t.deviceInfoModel.set("csiLogs",[]);for(var a=0;a<e.length;a++){if(t.newDeviceGridItem.set("historyID",e[a].HistoryId),t.newDeviceGridItem.set("date",XDates.getDateFromJavascriptDate(new Date(e[a].MessageTimeStamp.split("T")[0]))),t.newDeviceGridItem.set("eventDate",t.getformatedDateTimeforUI(t.getDateForObject(e[a].EventTimeStamp))),t.newDeviceGridItem.set("dateTime",t.getformatedDateTimeforUI(t.getDateForObject(e[a].MessageTimeStamp))),e[a].Message.length>100?t.newDeviceGridItem.set("messageCropped",e[a].Message.substr(0,100)+"..."):t.newDeviceGridItem.set("messageCropped",e[a].Message),t.newDeviceGridItem.set("customerNumber",e[a].CustomerNumber),t.newDeviceGridItem.set("action",e[a].Action),t.newDeviceGridItem.set("message",e[a].Message),t.newDeviceGridItem.set("eventDescription",e[a].EventDescription),t.newDeviceGridItem.set("reason",e[a].Reason),t.newDeviceGridItem.set("username",e[a].UserName),t.newDeviceGridItem.set("eventNumber",e[a].EventNumber),t.newDeviceGridItem.set("hostName",e[a].Host),t.newDeviceGridItem.set("serialNumber",e[a].SerialNumber),t.newDeviceGridItem.set("messageTrackingId",e[a].MessageTrackingId),"Error"==t.newDeviceGridItem.get("action")){var o=GetClarityConstants("ManageViewingConstants","manageViewingConstants.deviceInfo.eventIdsToResend");!Ember.isEmpty(o)&&o.contains(t.newDeviceGridItem.get("eventNumber"))&&t.newDeviceGridItem.set("isDisableResend",!1)}else t.newDeviceGridItem.set("isDisableResend",!0);t.addGridRow()}}else t.set("showGrid",!1)},getDateForObject:function(e){var t=e.split("T")[0].split("-"),a=e.split("T")[1].split(":");return new Date(t[0],t[1],t[2],a[0],a[1],a[2])},createNewGridItem:function(){var e=Komodo.Models.DeviceInfoModel.create();this.set("newDeviceGridItem",e);var t=Komodo.Models.QuoteSummaryModel.create();this.set("newQuoteSummaryGridItem",t)},addGridRow:function(){0===this.deviceInfoModel.csiLogs.length?this.deviceInfoModel.set("csiLogs",[this.get("newDeviceGridItem")]):this.deviceInfoModel.csiLogs.pushObject(this.get("newDeviceGridItem")),this.createNewGridItem()},addQuoteGridRow:function(){0===this.deviceInfoModel.quoteSummary.length?this.deviceInfoModel.set("quoteSummary",[this.get("newQuoteSummaryGridItem")]):this.deviceInfoModel.quoteSummary.pushObject(this.get("newQuoteSummaryGridItem")),this.createNewGridItem()},getNewProcessID:function(){this.startNewProcess()},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,"10000","blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},populateQuoteGrid:function(e){var t=this,a=void 0;if(t.lineItemArray.clear(),null!=e&&void 0!=e&&void 0!=e.Quote&&e.Quote.length>0)for(var o=e.Quote,s=0;s<o.length;s++){if(null!=o[s].LineItems&&o[s].LineItems.length>0){t.deviceInfoModel.quoteSummary.clear();for(var r=0;r<o[s].LineItems.length>0;r++)"-"!=t.deviceInfoModel.get("smartcardNumber")?t.newQuoteSummaryGridItem.set("smartcardNumber",t.deviceInfoModel.get("smartcardNumber")):t.newQuoteSummaryGridItem.set("smartcardNumber",t.deviceInfoModel.get("deviceNumber")),t.newQuoteSummaryGridItem.set("invoiceDescription",o[s].LineItems[r].InvoiceText),t.newQuoteSummaryGridItem.set("amountRequired",parseFloat(o[s].LineItems[r].Amount).toFixed(2)),t.newQuoteSummaryGridItem.set("startDate",XDates.getformatedDateforDatepicker(new Date(o[s].LineItems[r].StartDate))),t.newQuoteSummaryGridItem.set("tax",o[s].LineItems[r].TaxAmount),t.newQuoteSummaryGridItem.set("noOfUnits",o[s].LineItems[r].NumberOfUnits),t.newQuoteSummaryGridItem.set("endDate",XDates.getformatedDateforDatepicker(new Date(o[s].LineItems[r].EndDate))),t.newQuoteSummaryGridItem.set("lineItemId",o[s].LineItems[r].Id),t.newQuoteSummaryGridItem.set("balanceAvailable",o[s].LineItems[r].Amount),
t.newQuoteSummaryGridItem.set("currencyMnemonic",o[s].LineItems[r].CurrencyMnemonic),a=o[s].LineItems[r].CurrencyMnemonic,t.addQuoteGridRow()}-o[s].FinancialAccountCurrentBalance>=o[s].TotalAmount?(this.deviceInfoModel.set("isFundsAvailable",!0),this.deviceInfoModel.set("totalAmountRequired",a+" 0.00")):(this.newQuoteSummaryGridItem.set("amountRequired",parseFloat(o[s].TotalAmount- -o[s].FinancialAccountCurrentBalance).toFixed(2)),parseFloat(o[s].TotalAmount- -o[s].FinancialAccountCurrentBalance).toFixed(2),this.deviceInfoModel.set("isFundsAvailable",!1),this.deviceInfoModel.set("totalAmountRequired",a+" "+parseFloat(o[s].FinancialAccountCurrentBalance+o[s].TotalAmount).toFixed(2))),this.viewQuote.set("quoteId",o[0].Id),this.quoteIDArray.addObject(this.viewQuote.get("quoteId")),this.viewQuote.set("financialAccountId",o[0].FinancialAccountId),this.viewQuote.set("quoteStatus",o[0].QuoteStatus)}void 0!=this.get("dataGridFooters")[0]&&this.get("dataGridFooters")[0].clear(),this.get("dataGridFooters")[0].addObject(Komodo.Controls.DataGridFooterColumn.create({content:"Total",columnSpan:1})),this.get("dataGridFooters")[0].addObject(Komodo.Controls.DataGridFooterColumn.create({content:void 0})),this.get("dataGridFooters")[0].addObject(Komodo.Controls.DataGridFooterColumn.create({content:parseFloat(o[0].TotalAmount).toFixed(2),columnSpan:1,customClass:"komodo-decimal"})),this.get("dataGridFooters")[0].addObject(Komodo.Controls.DataGridFooterColumn.create({content:void 0})),this.deviceInfoModel.set("isQuoteSummaryVisible",!0),this.set("quoteButtonDisable",!0);var n=!0;Komodo.Services.featureToggleService.isEnabled("ManageViewing","CheckPayNowPermission").done(function(e){void 0==e&&""==e&&null==e||"true"!=e.toString().toLowerCase()||(n=!0,"true"!=e.toString().toLowerCase()&&(n=!!Komodo.Services.securityService.hasPermission("clarity://deviceInfo/showHidePayNowButton")))}),this.set("isShowPayNowButton",n);var i=!0;Komodo.Services.featureToggleService.isEnabled("ManageViewing","CheckPayNowPermission").done(function(e){void 0==e&&""==e&&null==e||(i="true"==e.toString().toLowerCase()||!!Komodo.Services.securityService.hasPermission("clarity://deviceInfo/showHidePayViaAdhocDebitOrderButton"))}),this.set("isShowPayViaDebitOrderButton",i)},getChargePeriodValue:function(e){for(var t=Komodo.Services.customerProfileService.get("invoicePeriod"),a=0;a<t.length;a++)if(t[a].key==e)return t[a].value;return""},getClearErrors:function(e){for(var t=this,a=e.content,o=Komodo.Models.ClearDeviceErrorCode.create(),s=Komodo.Services.uiService.getController("ErrorCodes"),r=0;r<s.get("errorCodes").length;r++)s.get("errorCodes")[r].CanonicalValue==a.get("reason")&&(o.ErrorReasonCode=s.get("errorCodes")[r].CanonicalKey);t.errorReasonText=a.get("reason"),t.selectedSerialNumber=a.get("serialNumber"),o.SerialNumber=a.get("serialNumber"),o.Country=this.get("loggedInCountryId"),Komodo.Services.queryService.getJSON("/Device/ValidateCSIcommand?smartcardDeviceNumber="+o.SerialNumber+"&configurabletime="+KomodoConfiguration.CSICommandValidationInterval).done(function(e){1==e.length||2==e.length&&"true"==e[1]?Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(e){Komodo.Services.cachedDataService.fetch("ErrorReasonRelationship",{domain:e.data.countryId,qualifier:Komodo.Services.localizationService.getCurrentLanguage()}).done(function(e){var a=JSON.parse(e);processID=t.getNewProcessID(),t.showBusyIndicator(),$.each(a.Errors.Error,function(e,a){if(o.ErrorReasonCode==a.CanonicalKey)return o.ErrorReasonCode=a.CanonicalKey,void t.publishServiceCall("ClearDeviceErrorCode",o)})}).fail(function(){Komodo.log("could not retrieve ErrorReasonRelationship")})}):Komodo.Controls.MessageBoxController.show(kl.value(t.localeError+"errorCodeRequired"),kl.value(t.localeError+"retryMessage",{smartcarddevicenumber:o.SerialNumber,CommandDateTime:e[0]}),Komodo.Controls.MessageBoxOkButton,this,"id5446673","")}).error(function(e){var t=JSON.stringify(e);Komodo.log("Notify get CSI log call failed. Error: "+t)})},messageDeviceErrorCodeClearedReceived:function(){var e=this;e.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(this.localeError+"errorCodeCleared"),"The error code "+e.get("errorReasonText")+kl.value(this.localeError+"successfullyErrorCodeCleared")+e.selectedSerialNumber+".",Komodo.Controls.MessageBoxOkButton,this,"id5446673","success").response=function(t){"ok"==t&&(Komodo.Application.ManageViewingSharedObjectController.create().getCSILogs(e.deviceInfoModel.get("smartcardNumber")),e.subscribeNotifyGetCSILogs())}},publishServiceCall:function(e,t){Komodo.Services.errorCodesService.publishEvent(this,t,e,"v1").done(function(){Komodo.log("Publish "+e+" Event : done"),Komodo.log("Publish horizon test "+e)}).fail(function(t,a){Komodo.log("Publish "+e+" Event : failed. Error: "+t)})},viewCsiLogDetails:function(e){if(this.deviceInfoModel.viewAllCSILogs){this.csiAllLogDetailsModel.set("historyID",e.content.get("historyID")),this.csiAllLogDetailsModel.set("dateTime",e.content.get("dateTime")),this.csiAllLogDetailsModel.set("username",e.content.get("username")),this.csiAllLogDetailsModel.set("eventNumber",e.content.get("eventNumber")),this.csiAllLogDetailsModel.set("eventDate",e.content.get("eventDate")),this.csiAllLogDetailsModel.set("eventDescription",e.content.get("eventDescription")),this.csiAllLogDetailsModel.set("action",e.content.get("action")),this.csiAllLogDetailsModel.set("customerNumber",e.content.get("customerNumber")),this.csiAllLogDetailsModel.set("username",e.content.get("username")),this.csiAllLogDetailsModel.set("hostName",e.content.get("hostName")),this.csiAllLogDetailsModel.set("serialNumber",e.content.get("serialNumber")),this.csiAllLogDetailsModel.set("reason",e.content.get("reason")),this.csiAllLogDetailsModel.set("messageTrackingId",e.content.get("messageTrackingId")),this.csiAllLogDetailsModel.set("message",e.content.get("message"));Komodo.Services.uiService.showModalPopup(kl.value(this.localeAddressInformationTab+"CsiLogDetails"),null,{view:Komodo.Application.CsiAllLogDetailsView,context:{data:e.content},canUserClose:!0})}else this.csiLogDetailsModel.set("historyID",e.content.get("historyID")),this.csiLogDetailsModel.set("dateTime",e.content.get("dateTime")),this.csiLogDetailsModel.set("username",e.content.get("username")),this.csiLogDetailsModel.set("eventNumber",e.content.get("eventNumber")),this.csiLogDetailsModel.set("hostName",e.content.get("hostName")),this.csiLogDetailsModel.set("serialNumber",e.content.get("serialNumber")),this.csiLogDetailsModel.set("reason",e.content.get("reason")),this.csiLogDetailsModel.set("messageTrackingId",e.content.get("messageTrackingId")),this.csiLogDetailsModel.set("message",e.content.get("message")),Komodo.Services.uiService.showModalPopup(kl.value(this.localeAddressInformationTab+"CsiLogDetails"),null,{view:Komodo.Application.CsiLogDetailsView,context:{data:e.content},canUserClose:!0})},saveDeviceInfo:function(){if("2"==this.deviceInfoModel.type){if(this.validators.firstNameValidator.errors&&this.validators.firstNameValidator.errors.length>0)return void Komodo.Controls.MessageBoxController.show(kl.value(this.localeAddressInformationTab+"invalid"),kl.value(this.localeAddressInformationTab+"invalidfirstName"),null,this,"id123456","warning");if(this.validators.lastNameValidator.errors&&this.validators.lastNameValidator.errors.length>0)return void Komodo.Controls.MessageBoxController.show(kl.value(this.localeAddressInformationTab+"invalid"),kl.value(this.localeAddressInformationTab+"invalidlastName"),null,this,"id123456","warning")}var e=this.get("deviceInfoModel");this.canSubmitData(e,"Fill required data",{showInModal:!0})&&Komodo.Services.eventAggregator.publish("manageViewing",null);var t=Komodo.Models.Address.create();t.Type=this.deviceInfoModel.get("type"),t.City=this.deviceInfoModel.get("city"),t.PostCode=this.deviceInfoModel.get("postalCode"),t.Country=this.deviceInfoModel.get("country"),t.Province=this.deviceInfoModel.get("province"),t.Suburb=this.deviceInfoModel.get("suburb"),t.BuildingName=this.deviceInfoModel.get("buildingName"),t.HouseNumber=this.deviceInfoModel.get("unitNumber"),t.Floor=this.deviceInfoModel.get("floor"),t.LocationOnFloor=this.deviceInfoModel.get("exactLocation"),t.IsVerified=this.deviceInfoModel.get("isVerify"),t.PostBoxNumber=this.deviceInfoModel.get("privateBag"),void 0!==this.deviceInfoModel.get("streetNumber")&&void 0!==this.deviceInfoModel.get("streetName")?t.Street=this.deviceInfoModel.get("streetNumber")+" "+this.deviceInfoModel.get("streetName"):void 0!==this.deviceInfoModel.get("streetNumber")?t.Street=this.deviceInfoModel.get("streetNumber"):void 0!==this.deviceInfoModel.get("streetName")&&(t.Street=this.deviceInfoModel.get("streetName"));var a=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),o=Komodo.Services.customerProfileService.currentCustomerDetails.ResponseMessage.Payload.CustomerDetail,s=Komodo.Models.Agreement.create();s.ConsumerAddress=t,s.UID=this.get("agreementId"),"1"==this.deviceInfoModel.type?(s.ConsumerDetail.FirstName=o.PersonalDetail.FirstName,s.ConsumerDetail.Surname=o.PersonalDetail.Surname):"2"==this.deviceInfoModel.type&&(s.ConsumerDetail.FirstName=this.deviceInfoModel.get("firstName"),s.ConsumerDetail.Surname=this.deviceInfoModel.get("lastName"));var r=Komodo.Models.UpdateAgreement.create(),n=Komodo.canonicalFacadeFactory(r,["Country","CustomerUID","Agreement"]);n.set("Country",this.get("loggedInCountryId")),n.set("CustomerUID",a.getCustomerIdToRetrieveData()),n.set("Agreement",s),this.publishServiceCall("UpdateAgreement",r),this.showBusyIndicator(),"1"==this.deviceInfoModel.type?this.deviceInfoModel.set("isControlsVisible",!1):"2"==this.deviceInfoModel.type&&this.deviceInfoModel.set("isControlsVisible",!0),this.deviceInfoModel.set("isDisableSubmitButton",!0)},messageAgreementUpdatedReceived:function(){var e=this;Komodo.Controls.MessageBoxController.show(kl.value(e.localeAddressInformationTab+"agreementInformation"),kl.value(e.localeAddressInformationTab+"agreementInfoUpdateSuccess"),Komodo.Controls.MessageBoxOkButton,this,"id5446673","success"),e.hideBusyIndicator()},cancelDeviceInfo:function(){this.deviceInfoModel.set("chargePeriod",this.get("originalChargePeriod"))},acceptQuote:function(){var e=this;Komodo.Controls.MessageBoxController.show(kl.value(e.localeDeviceInfo+"deviceInfoTitle"),kl.value(e.localeDeviceInfo+"acceptQuoteConfirmMessage"),Komodo.Controls.MessageBoxYesNoButtons,e,"id123456","warning").response=function(t){"yes"==t&&(e.getNewProcessID(),e.showBusyIndicator(),Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo),Komodo.Services.queryService.getJSON("/Quote/AcceptQuote?quoteId="+e.viewQuote.get("quoteId")+"&financialAccountId="+e.viewQuote.get("financialAccountId")).done(function(t){null!=t&&void 0!=t&&""!=t&&(e.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(e.localeDeviceInfo+"successful"),kl.value(e.localeDeviceInfo+"acceptQuoteSuccess"),Komodo.Controls.MessageBoxOkButton,e,"id123456","success").response=function(t){"ok"==t&&(e.deviceInfoModel.set("isQuoteSummaryVisible",!1),e.transitionToRoute("/manageViewing"))})}).error(function(t){var a=JSON.stringify(t);Komodo.log("Accept quote ajax call failed. Error: "+a),e.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(e.localeDeviceInfo+"technicalError"),$.parseJSON(a).responseJSON.Message,Komodo.Controls.MessageBoxOkButton,e,"id123456","danger")}))}},rejectQuote:function(){var e=this;Komodo.Services.ProductAndServiceMaintenanceHelper.create(),Komodo.Controls.MessageBoxController.show(kl.value(e.localeDeviceInfo+"deviceInfoTitle"),kl.value(e.localeDeviceInfo+"rejectQuoteMessage"),Komodo.Controls.MessageBoxYesNoButtons,e,"id123456","warning").response=function(t){"yes"==t&&(e.getNewProcessID(),e.showBusyIndicator(),Komodo.Services.queryService.postJSON("/Quote/RejectQuote",{data:e.quoteIDArray}).done(function(t){null!=t&&void 0!=t&&""!=t&&"0"==t.Status&&(e.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(e.localeDeviceInfo+"deviceInfoTitle"),kl.value(e.localeDeviceInfo+"rejectQuoteSuccess"),Komodo.Controls.MessageBoxOkButton,e,"id123456","success").response=function(t){"ok"==t&&(e.deviceInfoModel.set("chargePeriod",e.get("originalChargePeriod")),e.deviceInfoModel.set("isQuoteSummaryVisible",!1))})}).error(function(t){var a=JSON.stringify(t);Komodo.log("Reject Quote ajax call failed. Error: "+a),e.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(e.localeDeviceInfo+"technicalError"),$.parseJSON(a).responseJSON.Message,Komodo.Controls.MessageBoxOkButton,e,"id123456","danger")}))}},payViaDebitOrder:function(){this.hideBusyIndicator(),this.get("sharedObject").payViaAdhocDebitOrder()},payNow:function(){var e=this;Komodo.Controls.MessageBoxController.show(kl.value(e.localeDeviceInfo+"deviceInfoTitle"),kl.value(e.localeDeviceInfo+"confirmPayNow"),Komodo.Controls.MessageBoxYesNoButtons,e,"id123456","warning").response=function(t){"yes"==t&&(e.hideBusyIndicator(),e.deviceInfoModel.set("isQuoteSummaryVisible",!1),Komodo.Services.navigationService.activateGroup(Komodo.NavigationGroupNames.OnlineTill),Komodo.Services.uiService.transitionTo("customerPayment"),Komodo.Services.eventAggregator.publish("PublishMakePayment",{value:"Customer Payment"}))}},viewQuoteDetails:function(){var e=this.get("deviceInfoModel.quoteSummaryCommandItem"),t=Komodo.Models.QuoteDetailModel.create();t.quoteID=this.viewQuote.get("quoteId"),t.invoiceText=e.get("invoiceDescription"),t.startDate=e.get("startDate"),t.tax=parseFloat(e.get("tax")).toFixed(2),t.status=this.viewQuote.get("quoteStatus"),t.noOfUnits=e.get("noOfUnits"),t.endDate=e.get("endDate"),t.amountRequired=e.get("currencyMnemonic")+" "+e.get("amountRequired"),t.balanceAvailable=e.get("balanceAvailable"),this.set("quoteDetailsModel",t),Komodo.Services.uiService.showModalPopup("Quote Details",null,{view:Komodo.Application.QuoteDetailView,context:{data:this.get("quoteDetailsModel")},canUserClose:!0})},changeChargePeriod:function(){if(that=this,this.get("isPaymentPlanAgreement")&&!0===this.get("isPaymentPlanAgreement")){Komodo.Controls.MessageBoxController.show(kl.value(this.localeDeviceInfo+"deviceInfoTitle"),kl.value(this.localeDeviceInfo+"dppChangeChargePeriod"),Komodo.Controls.MessageBoxOkButton,this,void 0,"warning").response=function(e){"ok"===e&&that.doChangeChargePeriod()}}else that.doChangeChargePeriod()},doChangeChargePeriod:function(){var e=!1;Komodo.Services.featureToggleService.isEnabled("ManageViewing","ChangeChargePeriod").done(function(t){t&&(e=!0),that.performChangeChargePeriod(e)}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)})},performChangeChargePeriod:function(e){var t=this,a=Komodo.Services.customerProfileService.currentCustomerDetails.ResponseMessage.Payload.CustomerDetail,o=new Object,s=new Array;if(t.showBusyIndicator(),t.productUpdateDetails.length&&t.productUpdateDetails.length>0){for(var r=t.productUpdateDetails.filter(function(e){return e.ChargePeriod!=t.get("deviceInfoModel").chargePeriod}),n=0;n<r.length;n++)s.push({ProductId:r[n].ProductId,ServiceName:r[n].ServiceName,NewChargePeriod:t.get("deviceInfoModel").chargePeriod,CurrentChargePeriod:r[n].ChargePeriod});o.UpdateType="AgreementDetailBillableEdit",o.Save=!0,o.ListProductUpdateDetail=s,o.SerialNumber=t.get("deviceInfoModel").deviceNumber,o.AgreementId=t.get("agreementId"),o.IsChangeForAgreement=e,a&&a.BusinessUnit&&"gotv"===a.BusinessUnit.toLowerCase()&&0===this.principalServiceName.length&&"-"===this.princiServiceName&&"-"===this.princiserviceStatus&&(o.IsChangeForAgreement=!0)}Ember.isEmpty(o)||(Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo),Komodo.Services.queryService.postJSON("/BillingEngine/GenerateQuoteForProductUpdateAndRetrieveQuoteDetails",{data:o}).done(function(e){if(!Ember.isEmpty(e)&&!Ember.isEmpty(e.Quote)&&e.Quote.length>0)t.populateQuoteGrid(e),t.hideBusyIndicator();else if(Ember.isEmpty(e)||Ember.isEmpty(e.IsAnnualyToMonthlySuccess)||1!=e.IsAnnualyToMonthlySuccess)t.hideBusyIndicator(),t.deviceInfoModel.set("isQuoteSummaryVisible",!1),Komodo.Controls.MessageBoxController.show(kl.value(t.localeDeviceInfo+"technicalError"),kl.value(t.localeDeviceInfo+"quoteNotRetreivedMessage"),Komodo.Controls.MessageBoxOkButton,t,"id5446674","danger");else{t.deviceInfoModel.set("isQuoteSummaryVisible",!1),t.hideBusyIndicator();var a=Komodo.Controls.MessageBoxController.show(kl.value(t.localeDeviceInfo+"successful"),kl.value(t.localeDeviceInfo+"acceptQuoteSuccess"),Komodo.Controls.MessageBoxOkButton,t,"id123456","success");a.response=function(e){"ok"==e&&t.transitionToRoute("/manageViewing")}}}).error(function(e){var a=JSON.stringify(e);Komodo.log("GenerateQuoteForProductUpdateAndRetrieveQuoteDetails ajax call failed. Error: "+a),t.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(t.localeDeviceInfo+"technicalError"),$.parseJSON(a).responseJSON.Message,Komodo.Controls.MessageBoxOkButton,t,"id5446674","danger")}))},verifyAddressCityState:function(e){var t=e.split(" "),a="";if(null!==e&&"undefined"!==e&&""!==e&&"null"!==e)for(var o=0;o<t.length;o++)a=o==t.length-1?a.concat(t[o].charAt(0).toUpperCase()+t[o].slice(1).toLowerCase()):a.concat(t[o].charAt(0).toUpperCase()+t[o].slice(1).toLowerCase())+" ";return a},getCitySuburbText:function(e,t,a,o){var s=this;if(e&&t&&a&&o)if(s.get("enableAddressOverRide"))a=s.capitaliseFirstLetter(a),o=s.capitaliseFirstLetter(o);else{var r=$.grep($.makeArray(s.countries),function(t){return t.CanonicalKey.toUpperCase()===e.toUpperCase()});if(r.length>0){var n=$.grep($.makeArray(r[0].Provinces.Province),function(e){return e.CanonicalKey.toUpperCase()===t.toUpperCase()});if(n.length>0){var i=$.grep($.makeArray(n[0].Cities.City),function(e){return e.CanonicalValue.toUpperCase()===a.toUpperCase()});if(i.length>0){a=i[0].CanonicalValue;var c=$.grep($.makeArray(i[0].Suburbs.Suburb),function(e){return e.CanonicalValue.toUpperCase()===o.toUpperCase()});c.length>0&&(o=c[0].CanonicalValue)}}}}return{City:a,Suburb:o}},capitaliseFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.toLowerCase().slice(1)},clearAddressInformation:function(){var e=this;e.set("deviceInfoAddressPanel",!1),e.get("addressInformation").set("addressTypeText",void 0),e.get("addressInformation").set("addressType","3"),e.get("addressInformation").set("country",e.deviceInfoModel.get("country")),e.get("addressInformation").set("province",void 0),e.get("addressInformation").set("city",void 0),e.get("addressInformation").set("suburb",void 0),e.get("addressInformation").set("postalCode",void 0),e.get("addressInformation").set("unit",void 0),e.get("addressInformation").set("building",void 0),e.get("addressInformation").set("streetNumber",void 0),e.get("addressInformation").set("privateBag",void 0),e.get("addressInformation").set("boxType",void 0),e.get("addressInformation").set("streetName",void 0),e.get("addressInformation").set("isPrimary",!1),e.get("addressInformation").set("isPrimaryString","No"),e.get("addressInformation").set("isMarketingEnabled",!1),e.get("addressInformation").set("isAddressOverride",!1),e.get("addressInformation").set("addressString",void 0)},actions:{View:function(e){this.viewCsiLogDetails(e)},Resend:function(e){0==e.content.isDisableResend&&this.getClearErrors(e)},saveDetails:function(){this.saveDeviceInfo()},cancel:function(){this.cancelDeviceInfo()},selectViewItem:function(){var e=this;e.get("addressInformation").set("isAddressOverride",!1),e.get("addressInformation").set("addressTypeText",""),e.get("addressInformation").set("addressType","3"),e.get("addressInformation").set("country",e.deviceInfoModel.get("country"));var t=e.getCitySuburbText(e.deviceInfoModel.get("country"),e.deviceInfoModel.get("province"),e.deviceInfoModel.get("city"),e.deviceInfoModel.get("suburb"));e.get("addressInformation").set("province",e.deviceInfoModel.get("province")),e.get("addressInformation").set("city",t.City),e.get("addressInformation").set("suburb",t.Suburb),e.get("addressInformation").set("postalCode",e.deviceInfoModel.get("postalCode")),e.get("addressInformation").set("unit",e.deviceInfoModel.get("unitNumber")),e.get("addressInformation").set("building",e.deviceInfoModel.get("buildingName")),e.get("addressInformation").set("streetNumber",e.deviceInfoModel.get("streetNumber")),e.get("addressInformation").set("streetName",e.deviceInfoModel.get("streetName")),e.get("addressInformation").set("privateBag",e.deviceInfoModel.get("privateBag")),e.get("addressInformation").set("boxType",""),e.get("addressInformation").set("isPrimary",!1),e.get("addressInformation").set("isPrimaryString","No"),e.get("addressInformation").set("isMarketingEnabled",!1),e.get("addressInformation").set("addressString",""),e.set("deviceInfoAddressPanel",!0)},saveAddressInforamtion:function(){var e=this;if(!0===e.validateData())return!1;e.deviceInfoModel.set("isPrimary",e.addressInformation.get("isPrimary")),e.deviceInfoModel.set("isPrimaryString",e.addressInformation.get("isPrimaryString")),e.deviceInfoModel.set("country",e.addressInformation.get("country")),e.deviceInfoModel.set("province",e.addressInformation.get("province")),e.deviceInfoModel.set("city",e.addressInformation.get("city")),e.deviceInfoModel.set("suburb",e.addressInformation.get("suburb")),e.deviceInfoModel.set("postalCode",e.addressInformation.get("postalCode")),e.deviceInfoModel.set("buildingName",e.addressInformation.get("building")),e.deviceInfoModel.set("unitNumber",e.addressInformation.get("unit")),e.deviceInfoModel.set("streetNumber",e.addressInformation.get("streetNumber")),e.deviceInfoModel.set("streetName",e.addressInformation.get("streetName")),e.deviceInfoModel.set("privateBag",e.addressInformation.get("privateBag")),e.deviceInfoModel.set("isVerify",!1),e.deviceInfoModel.set("floor",e.addressInformation.get("floor")),e.deviceInfoModel.set("exactLocation",e.addressInformation.get("exactLocation")),e.deviceInfoModel.set("displayAddress",e.getUpdatedAddressDetails()),e.deviceInfoModel.set("isDisableSubmitButton",!1),e.set("addressInformation",[]),e.set("deviceInfoAddressPanel",!1)},changeChargePeriod:function(){this.changeChargePeriod()},acceptQuote:function(){this.acceptQuote()},payViaDebitOrder:function(){this.payViaDebitOrder()},payNow:function(){this.payNow()},rejectQuote:function(){this.rejectQuote()},viewQuoteDetails:function(){this.viewQuoteDetails()}},getCustomerTypeText:function(e){for(var t=Komodo.Services.customerProfileService.get("customerType"),a=0;a<t.length;a++)if(t[a].key==e)return t[a].value;return""},stop:function(){this._super()},getAddressDetails:function(){var e=Komodo.Application.CustomerInformationMapper.create(),t=void 0!=this.deviceInfoModel.get("unitNumber")&&""!=this.deviceInfoModel.get("unitNumber").trim()?this.deviceInfoModel.get("unitNumber")+", ":"",a=void 0!=this.deviceInfoModel.get("buildingName")&&""!=this.deviceInfoModel.get("buildingName").trim()?this.deviceInfoModel.get("buildingName")+", ":"",o=void 0!=this.deviceInfoModel.get("streetName")&&""!=this.deviceInfoModel.get("streetName").trim()?this.deviceInfoModel.get("streetName")+", ":"",s=void 0!=this.deviceInfoModel.get("streetNumber")&&""!=this.deviceInfoModel.get("streetNumber").trim()?this.deviceInfoModel.get("streetNumber")+", ":"",r=void 0!=this.deviceInfoModel.get("suburb")&&""!=this.deviceInfoModel.get("suburb").trim()?this.deviceInfoModel.get("suburb")+", ":"",n=void 0!=this.deviceInfoModel.get("city")&&""!=this.deviceInfoModel.get("city").trim()?this.deviceInfoModel.get("city")+", ":"",i=e.getProvinceText(this.deviceInfoModel.get("country"),this.deviceInfoModel.get("province"))+", ",c=e.getCountryText(this.deviceInfoModel.get("country"))+", ",l=void 0!=this.deviceInfoModel.get("postalCode")&&""!=this.deviceInfoModel.get("postalCode").trim()?this.deviceInfoModel.get("postalCode"):"";return void 0!=this.deviceInfoModel.get("privateBag")&&""!=this.deviceInfoModel.get("privateBag").trim()&&this.deviceInfoModel.get("privateBag"),bname=this.deviceInfoModel.get("buildingName"),sname=this.deviceInfoModel.get("streetName"),sno=this.deviceInfoModel.get("streetNumber"),uno=this.deviceInfoModel.get("unitNumber"),t+a+s+o+r+n+i+c+l},getUpdatedAddressDetails:function(){var e=Komodo.Application.CustomerInformationMapper.create(),t=void 0!=this.addressInformation.get("unit")&&""!=this.addressInformation.get("unit").trim()?this.addressInformation.get("unit")+", ":"",a=void 0!=this.addressInformation.get("building")&&""!=this.addressInformation.get("building").trim()?this.addressInformation.get("building")+", ":"",o=void 0!=this.addressInformation.get("streetName")&&""!=this.addressInformation.get("streetName").trim()?this.addressInformation.get("streetName")+", ":"",s=void 0!=this.addressInformation.get("streetNumber")&&""!=this.addressInformation.get("streetNumber").trim()?this.addressInformation.get("streetNumber")+", ":"",r=void 0!=this.addressInformation.get("suburb")&&""!=this.addressInformation.get("suburb").trim()?this.addressInformation.get("suburb")+", ":"",n=void 0!=this.addressInformation.get("city")&&""!=this.addressInformation.get("city").trim()?this.addressInformation.get("city")+", ":"",i=e.getProvinceText(this.addressInformation.get("country"),this.addressInformation.get("province"))+", ",c=e.getCountryText(this.addressInformation.get("country"))+", ",l=void 0!=this.addressInformation.get("postalCode")&&""!=this.addressInformation.get("postalCode").trim()?this.addressInformation.get("postalCode"):"";return void 0!=this.addressInformation.get("privateBag")&&""!=this.addressInformation.get("privateBag").trim()&&this.addressInformation.get("privateBag"),bname=this.deviceInfoModel.get("buildingName"),sname=this.deviceInfoModel.get("streetName"),sno=this.deviceInfoModel.get("streetNumber"),uno=this.deviceInfoModel.get("unitNumber"),t+a+s+o+r+n+i+c+l},registerValidation:function(){self=this,self.registerValidator(self.get("deviceInfoModel"),"firstName",{type:"string",isRequired:!0,minLength:2,maxLength:30,functions:Komodo.UI.Validators.firstNameAndLastNameValidator}),self.registerValidator(self.get("deviceInfoModel"),"lastName",{type:"string",isRequired:!0,minLength:2,maxLength:30,functions:Komodo.UI.Validators.firstNameAndLastNameValidator})},checkSPLProduct:function(){var e=this.get("deviceInfoModel");null!=e.princiPackage.match(/SPL/g)&&(e.isVisibleContractPeriod=!0,e.isDisableContractPeriodDropdown=!0,e.isDisableChargeDropdownGotvOpen=!0,e.isDisableChargeDropdown=!0)},getCDMData:function(){var e=this,t=void 0,a=void 0,o=void 0;Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(s){t=s.data.countryId,a=Komodo.Services.localizationService.getCurrentLanguage(),o=s.data.countryDescription,e.set("loggedInCountryId",s.data.countryId),Komodo.Services.cachedDataService.fetch("Location").done(function(t){var a=JSON.parse(t);e.set("countries",[]),$.each($.makeArray(a.Countries.Country),function(t,a){e.get("countries").addObject(a)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve Location domain = "+t+"/ qualifier = "+a)}),Komodo.Services.featureToggleService.isEnabled("CustomerGlobal","EnableAddressOverRide").done(function(t){e.set("enableAddressOverRide",t)})})},getQueryService:function(){return this.get("_queryService")},messageFailureMessageEventReceived:function(e){Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButton,this,"id5446674","danger")},messageAgreementAddressUpdatedReceived:function(){var e=this;Komodo.Controls.MessageBoxController.show(kl.value(e.localeAddressInformationTab+"deviceInformation"),kl.value(e.localeAddressInformationTab+"deviceInfoUpdateSuccess"),Komodo.Controls.MessageBoxOkButton,this,"id5446673","success"),e.hideBusyIndicator()},validateData:function(){var e="",t=this,a=!1,o=Object.keys(t.get("validators"));return $.each(o,function(o,s){if(t.get("validators."+s).model===t.get("addressInformation")){var r="validators."+s+".errors";t.get(r).length>0&&$.each(t.get(r),function(t,o){e+=o+"<br />",a=!0})}}),a&&(e=kl.value("controller.invalidDataMessage")+"<br />"+e,Komodo.Controls.MessageBoxController.show(t.viewTitle,e,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning")),a},chargePeriodlst:[],accountId:void 0,agreementId:void 0,principalServiceName:void 0,deviceSerialNumber:void 0,smartCard:void 0,serviceStatus:void 0,newViewingPeriod:void 0,addOnServiceName:void 0,addOnServiceStatus:void 0,addOnPackageNames:[],addOnPackageStatus:[],showGrid:!1,selectedAgreement:[],originalChargePeriod:void 0,defaultChargePer:void 0,userData:[],productUpdateDetails:void 0,ChargeButtonDisable:!0,lineItemArray:[],quoteIDArray:[],dataGridFooters:[[],[]],adHocDebitOrderButton:!0,newDate:void 0,deviceNum:void 0,enableAddressOverRide:!1,deviceInfoAddressPanel:void 0,quoteBasedDisconnectDate:void 0,chargeUntilDate:void 0,chargePeriod:void 0,deviceName:void 0,MACAddress:void 0,deviceStatus:void 0,smartcardName:void 0,smartcardNumber:void 0,smartcardStatus:void 0,viewAllCSILogs:void 0,isDisableChargeButton:!0,disableAddressInfo:!1}),Komodo.Application.DeviceAgreementManagementController=Komodo.UI.Controller.extend({_locale:"",_columnDeviceAgreementDataGrid:[],_dropDownFromDeviceList:[],_dropDownToAgreementList:[],_commercialProductList:[],_commercialProductStatusList:[],_agreementTypeList:[],_productLoadComplete:!1,_productStatusLoadComplete:!1,_agreementTypeLoadComplete:!1,_cacheHardwareModelDesc:[],init:function(){try{this._super();var e=this;Komodo.log("Constructing DeviceAgreementManagement controller."),e.set("processVersion","v1.1"),e.set("processName","DeviceAgreementManagement"),this.requiresDependency("_stockService",{singleton:Komodo.Services.stockService})}catch(e){this.handleException("init - DeviceAgreementManagement",e,!0,!0)}},start:function(){try{this._super();var e=this;e._locale="locale.manageStock:deviceAgreementManagement.",e.registerModel("rcModelData",Komodo.Models.DeviceAgreementManagementModel);var t=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),a=t.isCustomerIdIsAvailableToRetriveData();if(e.getStockService().fillObjectFromCachedFileServiceArray(e,"_cacheHardwareModelDesc","HardwareModel"),!a)return Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"customerNotLoaded"),kl.value(e._locale+"customerIsRequired"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"),void this.transitionToRoute("/manageViewing");this.get("rcModelData").set("customerID",t.getCustomerIdToRetrieveData()),e.setupGrid(),e._productLoadComplete=!1,e._productStatusLoadComplete=!1,e._agreementTypeLoadComplete=!1,e.loadProductStatus(),e.loadProduct(),e.loadAgreementType()}catch(e){this.handleException("start",e,!0,!0)}},stop:function(){this._super()},actions:{moveDeviceAgreement:function(){try{var e=this;if(void 0==e.rcModelData.fromDevice||""==e.rcModelData.fromDevice)return void Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"deviceAgreementManagement"),"<strong>"+kl.value(e._locale+"selectDeviceSerial")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning");if(void 0==e.rcModelData.toAgreement||""==e.rcModelData.toAgreement)return void Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"deviceAgreementManagement"),"<strong>"+kl.value(e._locale+"selectAgreementNumber")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning");Komodo.Services.busyService.start(!0,e.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,6e4,"blocking",this),
e.moveDeviceToAgreement(e.rcModelData.fromDevice,e.rcModelData.toAgreement,function(t,a){if(Komodo.Services.busyService.stop(e.get("processId"),"blocking"),null!=a)Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"deviceAgreementManagement"),"<strong>"+kl.value(e._locale+"noDeviceMoved")+" '"+e.rcModelData.get("customerID")+"'. Error: "+a+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger");else{Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"deviceAgreementManagement"),"<strong>"+kl.value(e._locale+"deviceMoved")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","success").response=function(t){"ok"==t&&e.setupDeviceAgreementInfo()}}})}catch(e){Komodo.Controls.MessageBoxController.show("Error","Error: "+e,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}}},getStockService:function(){return this.get("_stockService")},loadProductStatus:function(){try{var e=this;Komodo.Services.cachedDataService.fetch("ProductStatus").done(function(t){$.each(t,function(t,a){e._commercialProductStatusList.addObject(a)}),e._productStatusLoadComplete=!0,e._productStatusLoadComplete&&e._productLoadComplete&&e._agreementTypeLoadComplete&&e.setupDeviceAgreementInfo()}).fail(function(t){var a=kl.value(e._locale+"errorFunction")+" [loadProductStatus]";Komodo.log(a),Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"errorOccurred"),a,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")})}catch(e){this.handleException("loadProductStatus",e,!0,!0)}},getProductStatus:function(e){try{var t=this,a="";return $.each(t._commercialProductStatusList,function(t,o){if(o.key==e)return a=o.value,!1}),Komodo.log("Data not found in function [getProductStatus] for commercialProductStatusID: "+e),a}catch(e){this.handleException("getProductStatus",e,!0,!0)}},loadProduct:function(){try{var e=this;Komodo.Services.cachedDataService.fetch("Product").done(function(t){$.each(t,function(t,a){e._commercialProductList.addObject(a)}),e._productLoadComplete=!0,e._productStatusLoadComplete&&e._productLoadComplete&&e._agreementTypeLoadComplete&&e.setupDeviceAgreementInfo()}).fail(function(t){var a=kl.value(e._locale+"errorFunction")+" [loadProduct]";Komodo.log(a),Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"errorOccurred"),a,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")})}catch(e){this.handleException("loadProduct",e,!0,!0)}},getProduct:function(e){try{var t=this,a="";return $.each(t._commercialProductList,function(t,o){if(o.key==e)return a=o.value,!1}),Komodo.log("Data not found in function [getProduct] for commercialProductID: "+e),a}catch(e){this.handleException("getProduct",e,!0,!0)}},loadAgreementType:function(){try{var e=this;Komodo.Services.cachedDataService.fetch("AgreementType").done(function(t){$.each(t,function(t,a){e._agreementTypeList.addObject(a)}),e._agreementTypeLoadComplete=!0,e._productStatusLoadComplete&&e._productLoadComplete&&e._agreementTypeLoadComplete&&e.setupDeviceAgreementInfo()}).fail(function(t){var a=kl.value(e._locale+"errorFunction")+" [loadAgreementType]";Komodo.log(a),Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"errorOccurred"),a,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")})}catch(e){this.handleException("loadAgreementType",e,!0,!0)}},getAgreementType:function(e){try{var t=this,a="";return $.each(t._agreementTypeList,function(t,o){if(o.key==e)return a=o.value,!1}),Komodo.log("Data not found in function [getAgreementType] for agreementTypeID: "+e),a}catch(e){this.handleException("getAgreementType",e,!0,!0)}},containKey:function(e,t){var a=!1;return e.forEach(function(e){if(e.Key==t)return a=!0,!1}),a},getHardwareModelDesc:function(e){try{var t=this,a=null;return $.each(t._cacheHardwareModelDesc,function(t,o){if(o.key==e)return a=o.value,!1}),Komodo.log("Data not found in function [getHardwareModelDesc] for hardwareModelID: "+e),a}catch(e){this.handleException("getHardwareModelDesc",e,!0,!0)}},setupDeviceAgreementInfo:function(){try{var e=this;e.rcModelData.GridDeviceAgreementDataGrid.clear(),e.get("_dropDownFromDeviceList").clear(),e.get("_dropDownToAgreementList").clear(),Komodo.Services.busyService.start(!0,e.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,6e4,"blocking",this),e.retrieveDeviceAgreementInfo(e.rcModelData.get("customerID"),function(t,a){Komodo.Services.busyService.stop(e.get("processId"),"blocking"),null!=a?Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"deviceAgreementManagement"),"<strong>"+kl.value(e._locale+"noDevicesAgreement")+" '"+e.rcModelData.get("customerID")+"'. Error :"+a+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"):t.length>0&&t.forEach(function(t){var a=null;if(null!=t.ModelID&&(a=t.ModelID),e.addItemToGridRow(e.rcModelData.get("GridDeviceAgreementDataGrid"),Ember.Object.create({AgreementID:null!=t.AgreementID?t.AgreementID:"",CommercialProduct:null!=t.CommercialProductID?e.getProduct(t.CommercialProductID):"",AgreementType:null!=t.StatusID?e.getAgreementType(t.AgreementTypeID):"",Status:null!=t.StatusID?e.getProductStatus(t.StatusID):"",SerialNumber:null!=t.SerialNumber?t.SerialNumber:"",HardwareModel:null!=a?a:""})),null!=t.SerialNumber&&""!=t.SerialNumber){var o={Key:t.SerialNumber,Value:t.SerialNumber};e.containKey(e.get("_dropDownFromDeviceList"),t.SerialNumber)||e.get("_dropDownFromDeviceList").addObject(o)}var s={Key:t.AgreementID,Value:t.AgreementID};e.containKey(e.get("_dropDownToAgreementList"),t.AgreementID)||e.get("_dropDownToAgreementList").addObject(s)})})}catch(e){Komodo.Controls.MessageBoxController.show("Error","Error: "+e,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}},retrieveDeviceAgreementInfo:function(e,t){var a=this;void 0!=t&&(Komodo.Services.queryService.refreshUserData(),Komodo.Services.queryService.getJSON("DeviceAgreementManagement?customerID="+e).done(function(e){t(e,null)}).error(function(e){t(null,a.getStockService().handleQueryServiceException(e))}))},moveDeviceToAgreement:function(e,t,a){var o=this;void 0!=a&&(Komodo.Services.queryService.refreshUserData(),Komodo.Services.queryService.getJSON("DeviceAgreementManagement/MoveDeviceToAgreement?serialNumber="+e+"&agreementId="+t).done(function(e){a(e,null)}).error(function(e){a(null,o.getStockService().handleQueryServiceException(e))}))},setupGrid:function(){try{this._columnDeviceAgreementDataGrid=[Komodo.Controls.DataGridColumn.create({name:"AgreementID",title:kl.value("locale.manageStock:deviceAgreementManagement.agreement"),width:"60px"}),Komodo.Controls.DataGridColumn.create({name:"HardwareModel",title:kl.value("locale.manageStock:deviceAgreementManagement.hardwareModel"),width:"60px"}),Komodo.Controls.DataGridColumn.create({name:"CommercialProduct",title:kl.value("locale.manageStock:deviceAgreementManagement.commercialProduct"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"AgreementType",title:kl.value("locale.manageStock:deviceAgreementManagement.agreementType"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"Status",title:kl.value("locale.manageStock:deviceAgreementManagement.status"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"SerialNumber",title:kl.value("locale.manageStock:deviceAgreementManagement.serialNumber"),width:"120px"})]}catch(e){this.handleException("setupGrid",e,!0,!0)}},addItemToGridRow:function(e,t){try{e.pushObject(t)}catch(e){this.handleException("addItemToGridRow",e,!0,!0)}},getArrayItem:function(e){try{return $.makeArray(e)}catch(e){this.handleException("getArrayItem",e,!0,!0)}},handleException:function(e,t,a,o){try{var s=this,r=kl.value(s._locale+"errorInFunction")+" ["+e+"]. Exception: "+t+".";a&&(Komodo.log(r),null!=t&&null!=t.stack&&Komodo.log(t.stack)),o&&Komodo.Controls.MessageBoxController.show(kl.value(s._locale+"errorOccurred"),r,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}catch(e){Komodo.log(e)}},messageFailureMessageEventReceived:function(e){try{var t=this;Komodo.Services.busyService.stop(this.get("processId"),"blocking"),"CreateInteraction"!=e.ResponseMessage.Payload.OriginatedEventName?Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"):Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,kl.value(t._locale+"errorCRM"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}catch(e){this.handleException("messageFailureMessageEventReceived",e,!0,!0)}},messageHandle:function(e,t){try{var a=this;Komodo.Services.busyService.stop(this.get("processId"),"blocking"),null!=e&&null!=e.payload&&null!=e.payload.Header?Komodo.Controls.MessageBoxController.show("Message Received Failure",t+" Message type: '"+e.payload.Header.EventName+"', Process: '"+e.payload.Header.ProcessName+"'.",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"):(Komodo.UI.error("[messageHandle.messageFault] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(a._locale+"problemOccurred"),kl.value(a._locale+"eventFiledsNull")+e.messageId,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"))}catch(e){this.handleException("messageHandle",e,!0,!0)}},messageReceived:function(e){try{var t=this;this.messageHandle(e,kl.value(t._locale+"successfulMessage"))}catch(e){this.handleException("messageReceived",e,!0,!0)}},messageDeliveryFailure:function(e){try{var t=this;this.messageHandle(e,kl.value(t._locale+"communicationFailure"))}catch(e){this.handleException("messageDeliveryFailure",e,!0,!0)}},messageFault:function(e){try{var t=this;this.messageHandle(e,kl.value(t._locale+"faultException"))}catch(e){this.handleException("messageFault",e,!0,!0)}},publishRequestOnBus:function(e,t,a){try{var o=this;Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,6e4,"blocking",this),Komodo.Services.customerProfileService.publishEvent(this,e,t,a).done(function(){Komodo.log("Event Message for '"+t+"' has published successfully.")}).fail(function(e){Komodo.log("Event Message for '"+t+"' has failed."),Komodo.Services.busyService.stop(this.get("processId"),"blocking"),Komodo.Controls.MessageBoxController.show(kl.value(o._locale+"eventMessageFail")+" '"+t+"'.",e,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")})}catch(e){Komodo.Services.busyService.stop(this.get("processId"),"blocking"),this.handleException("publishRequestOnBus",e,!0,!0)}}}),Komodo.Application.DccClaimsController=Komodo.UI.Controller.extend({_localeBase:"locale.manageviewing:",localeDCCClaim:"locale.manageviewing:dccClaims.",init:function(){Komodo.log("Constructing DCC Claim controller");var e=this;e.set("processVersion","v1.1"),e.set("processName","DCC Claim process"),e.registerModel("data",Komodo.Models.DCCDocumentModel),e.registerModel("dccClaimsModel",Komodo.Models.DccClaimsModel.create()),e.dccClaimGridGridColumns=[Komodo.Controls.DataGridColumn.create({name:"claimUID",title:kl.value(e.localeDCCClaim+"claimNumber"),canEdit:!1,width:"100px"}),Komodo.Controls.DataGridColumn.create({name:"claimStatus",title:kl.value(e.localeDCCClaim+"claimStatus"),canEdit:!1,width:"100px"}),Komodo.Controls.DataGridColumn.create({name:"accountNumber",title:kl.value(e.localeDCCClaim+"accountNumber"),canEdit:!1,width:"100px"}),Komodo.Controls.DataGridColumn.create({name:"deviceName",title:kl.value(e.localeDCCClaim+"deviceName"),canEdit:!1,width:"80px"}),Komodo.Controls.DataGridColumn.create({name:"deviceNumber",title:kl.value(e.localeDCCClaim+"deviceNumber"),canEdit:!1,width:"100px"}),Komodo.Controls.DataGridColumn.create({name:"smartcardNumber",title:kl.value(e.localeDCCClaim+"linkedSmartcard"),canEdit:!1,width:"100px"}),Komodo.Controls.DataGridColumn.create({name:"dccPolicyNumber",title:kl.value(e.localeDCCClaim+"policyNumber"),canEdit:!1,width:"80px"}),Komodo.Controls.DataGridCommandColumn.create({title:kl.value(e.localeDCCClaim+"actions"),displayText:kl.value(e.localeDCCClaim+"view"),width:"30px",action:"viewDccClaimGridItem",displayType:"link"})],e._super()},start:function(){var e=this;e.get("data").set("customerDocuments",[]),e.set("loggedInCountryName",""),e.set("isDCCClaimGridDataAvailable",!0),e.set("isDCCPackageNotAvailable",!1),e.set("isDCCPackageSectionVisible",!1),e.set("isCreateClaimButtonVisible",!1),e.set("dccClaimGridDataNotAvailable",!1),e.set("isOnTheDotBranchVisible",!1),e.set("isOtherInsuranceFieldsVisible",!1),e.set("isDateOfTheftDisable",!0),e.set("isSetToStolenVisible",!1),e.set("isAddDocumentButton",!0),e.set("isUploadDocumentButton",!0),e.set("isCreateClaimButton",!0),e.set("dispatchBrachObserver",!0),e.set("dccClaimDetailsModel",Komodo.Models.DccClaimDetailsModel.create()),e.set("dccClaimsModel.isSetToStolen",!1),e.set("dccClaimsModel.otherInsurance",!1),e.set("addressInformation",Komodo.Models.AddressModel.create()),e.createCDMData(),e.isCustomerExist(),e.setCaseValues(),e.getAllDCCClaims(),e.checkAllDCCServicesUnderDecoder(),e.registerValidation(),Komodo.Services.featureToggleService.isEnabled("CustomerGlobal","EnableAddressOverRide").done(function(t){e.set("enableAddressOverRide",t)}),e._super()},setCaseValues:function(){var e=this.get("dccClaimsModel");e.set("interactionType","3"),e.set("queryType","7"),e.set("statusId","2"),e.set("priority","2"),e.set("category","29"),e.set("outcome","200")},isCustomerExist:function(){var e=this,t=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),a=t.isCustomerIdIsAvailableToRetriveData(),o=this.get("dccClaimsModel");if(!a)return void Komodo.Controls.MessageBoxController.show(kl.value(this.localeDCCClaim+"customerNotFound"),kl.value(this.localeDCCClaim+"customerNotFoundText"),Komodo.Controls.MessageBoxOkButton,this,"id123456");var s=t.getCustomerIdToRetrieveData();e.data.set("customerID",s),customerInfo=t.getCustomerDetails(),o.set("customerUID",s),void 0==customerInfo.firstName?o.set("customerName"," "):o.set("customerName",customerInfo.firstName),void 0==customerInfo.lastName?o.set("customerSurname"," "):o.set("customerSurname",customerInfo.lastName),e.bindDCCDecoders()},createCDMData:function(){var e=this,t=void 0,a=void 0,o=e.get("data"),s=$.Deferred();return Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(r){t=r.data.countryId,a=Komodo.Services.localizationService.getCurrentLanguage(),e.set("country",r.data.countryId),e.set("loggedInCountryId",r.data.countryId),e.set("loggedInCountryName",r.data.countryDescription),e.getStaticCDMData(t,a,"ClaimStatus",e.claimStatuslst),e.getStaticCDMData(t,a,"ClaimType",e.claimTypelst),e.getStaticCDMData(t,a,"ClaimDispatchBranch",e.dispatchBranchlst),o.set("documentTypes",[]),e.getStaticCDMData(t,a,"DocumentType",o.documentTypes),e.getHierachicalCDMData(t,a,"CountryDetail",e.countriesWithCodes),e.getHierachicalCDMData(t,a,"Location",e.countrylst).done(function(e){s.resolve(e)})}),s},getStaticCDMData:function(e,t,a,o){Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){switch(o.clear(),a){case"ClaimStatus":case"ClaimType":case"ClaimDispatchBranch":$.each(e,function(e,t){"None"!==t.value&&o.addObject(t)});break;case"DocumentType":$.each(e,function(e,t){"None"!==t.value&&("dcc affidavit"===t.value.toLowerCase()|"copy of passport"===t.value.toLowerCase()||"copy of id"===t.value.toLowerCase())&&o.addObject(t)});break;default:$.each(e,function(e,t){o.addObject(t)})}}).fail(function(){Komodo.log("[ERROR] : could not retrieve static CDM data for "+a)})},getHierachicalCDMData:function(e,t,a,o){var s=$.Deferred();return Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){var t=JSON.parse(e);switch(o.clear(),a){case"Location":$.each($.makeArray(t.Countries.Country),function(e,t){o.addObject(t)}),s.resolve(e);break;case"CountryDetail":$.each($.makeArray(t.Countries.Country),function(e,t){o.addObject(t)});break;default:Komodo.log("[ERROR] : Unknown Hierachical dataset: "+a)}}).fail(function(){Komodo.log("[ERROR] : could not retrieve hierarchical CDM data for "+a)}),s},bindDCCDecoders:function(){var e,t=this,a=Komodo.Services.ProductAndServiceMaintenanceHelper.create();if(void 0!==Komodo.Services.customerProfileService.currentFinancialAccounts&&null!==Komodo.Services.customerProfileService.currentFinancialAccounts){var o=Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount;if(null!=(e=a.createArrayForSingleElement(o.Account))&&e.length>0)for(var s=0;s<e.length;s++)"9"!==e[s].Type&&t.getAllDCCHardwares(e[s])}},getAllDCCHardwares:function(e){if(!Ember.isEmpty(e)&&!Ember.isEmpty(e.ListOfAgreement)&&!Ember.isEmpty(e.ListOfAgreement.Agreement))for(var t=this,a=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),o=a.createArrayForSingleElement(e.ListOfAgreement.Agreement),s=KomodoConfiguration.DCCClaimStatus.split(","),r=0;r<o.length;r++)for(var n=a.createArrayForSingleElement(o[r].ListOfHardware.Hardware),i=0;i<n.length;i++){if(!Ember.isEmpty(n[i].InsuranceStatus)&&"True"===n[i].InsuranceStatus&&!Ember.isEmpty(n[i].InsuranceDetail)&&!Ember.isEmpty(n[i].InsuranceDetail.Status)&&s.contains(n[i].InsuranceDetail.Status)){var c={Key:n[i].SerialNumber,Value:n[i].SerialNumber,Text:"Device Number"};t.deviceNumberlst.push(c)}if(!Ember.isEmpty(n[i].SecondaryHardware))for(var l=a.createArrayForSingleElement(n[i].SecondaryHardware.Hardware),d=0;d<l.length;d++){var u=l[d];if(!Ember.isEmpty(u.InsuranceStatus)&&"True"===u.InsuranceStatus&&!Ember.isEmpty(u.InsuranceDetail)&&!Ember.isEmpty(u.InsuranceDetail.Status)&&s.contains(l[d].InsuranceDetail.Status)){var h={Key:u.SerialNumber,Value:u.SerialNumber,Text:"Device Number"};t.deviceNumberlst.push(h)}}}},checkAllDCCServicesUnderDecoder:function(){var e=this;null!==e.deviceNumberlst&&e.deviceNumberlst.length>0?(e.isDCCPackageSectionVisible=!0,e.isDCCPackageNotAvailable=!1):(e.isDCCPackageSectionVisible=!1,e.isDCCPackageNotAvailable=!0)},getPhysicalAddressForCustomer:function(){var e=this,t=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),a=Komodo.Services.customerProfileService.currentCustomerDetails.ResponseMessage.Payload.CustomerDetail.ListOfAddress;if(addresses=t.createArrayForSingleElement(a.Address),null!=addresses&&addresses.length>0)for(var o=0;o<addresses.length;o++)if(addresses[o].Type===Komodo.CanonicalValues.AddressTypes.Physical&&addresses[o].IsPrimary){var s=$.grep($.makeArray(e.countrylst),function(e){return e.CanonicalKey.toUpperCase()===addresses[o].Country.toUpperCase()});if(s.length>0){e.set("dccClaimsModel.country",s[0]);var r=$.grep($.makeArray(s[0].Provinces.Province),function(e){return e.CanonicalKey.toUpperCase()===addresses[o].Province.toUpperCase()});r.length>0&&e.set("dccClaimsModel.province",r[0])}e.set("dccClaimsModel.city",addresses[o].City),e.set("dccClaimsModel.suburb",addresses[o].Suburb),e.set("dccClaimsModel.unitNumber",addresses[o].HouseNumber),e.set("dccClaimsModel.buildingName",addresses[o].BuildingName),e.set("dccClaimsModel.streetNumber",addresses[o].Street),e.set("dccClaimsModel.streetName",addresses[o].Street),e.set("dccClaimsModel.postalCode",addresses[o].PostCode);var n=Komodo.UI.addressFunctions.splitStreetNumberName(addresses[o].Street);e.set("dccClaimsModel.streetNumber",n.streetNumber),e.set("dccClaimsModel.streetName",n.streetName),null!==addresses[o].IsVerified&&void 0!==addresses[o].IsVerified&&(addresses[o].IsVerified?e.set("dccClaimsModel.isAddressOverride",!1):e.set("dccClaimsModel.isAddressOverride",!0)),e.setAddressObject()}},setAddressObject:function(){var e=this;e.get("addressInformation").set("addressTypeText",""),e.get("addressInformation").set("addressType",Komodo.CanonicalValues.AddressTypes.Physical),null!==e.dccClaimsModel.country&&void 0!==e.dccClaimsModel.country&&e.get("addressInformation").set("country",e.dccClaimsModel.country.CanonicalKey),null!==e.dccClaimsModel.province&&void 0!==e.dccClaimsModel.province&&e.get("addressInformation").set("province",e.dccClaimsModel.province.CanonicalKey),e.get("addressInformation").set("city",e.dccClaimsModel.city),e.get("addressInformation").set("suburb",e.dccClaimsModel.suburb),e.get("addressInformation").set("postalCode",e.dccClaimsModel.postalCode),e.get("addressInformation").set("unit",e.dccClaimsModel.unitNumber),e.get("addressInformation").set("building",e.dccClaimsModel.buildingName),e.get("addressInformation").set("streetNumber",e.dccClaimsModel.streetNumber),e.get("addressInformation").set("privateBag",void 0),e.get("addressInformation").set("boxType",""),e.get("addressInformation").set("streetName",e.dccClaimsModel.streetName),e.get("addressInformation").set("isPrimary",!1),e.get("addressInformation").set("isPrimaryString","No"),e.get("addressInformation").set("isMarketingEnabled",!1),e.get("addressInformation").set("isAddressOverride",!!e.dccClaimsModel.isAddressOverride&&e.dccClaimsModel.isAddressOverride),!1===e.dccClaimsModel.isAddressOverride?e.get("addressInformation").set("isVerified",!0):e.get("addressInformation").set("isVerified",!1),e.get("addressInformation").set("addressString","")},setAddressObjectToViewModelAddress:function(){var e=this,t=e.get("addressInformation");if(null!==t&&void 0!==t&&void 0!==t.get("country")&&null!==t.get("country")){var a=$.grep($.makeArray(e.countrylst),function(e){return e.CanonicalKey.toUpperCase()===t.get("country").toUpperCase()});if(a.length>0){e.dccClaimsModel.set("country",a[0].CanonicalValue);var o=$.grep($.makeArray(a[0].Provinces.Province),function(e){return e.CanonicalKey.toUpperCase()===t.get("province").toUpperCase()});o.length>0&&e.dccClaimsModel.set("province",o[0].CanonicalValue)}e.dccClaimsModel.set("city",t.get("city")),e.dccClaimsModel.set("suburb",t.get("suburb")),e.dccClaimsModel.set("postalCode",t.get("postalCode")),e.dccClaimsModel.set("unitNumber",t.get("unit")),e.dccClaimsModel.set("buildingName",t.get("building")),e.dccClaimsModel.set("streetNumber",t.get("streetNumber")),e.dccClaimsModel.set("streetName",t.get("streetName")),e.dccClaimsModel.set("isAddressOverride",t.get("isAddressOverride"))}},registerValidation:function(){var e=this;e.registerValidator(e.get("dccClaimsModel"),"claimType",{type:"string",isRequired:!0}),e.registerValidator(e.get("dccClaimsModel"),"dateOfTheft",{functions:[Komodo.UI.Validators.DatePickerValidator],limitValueToType:!0,maxDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()+1),type:"date",displayName:"Date",isRequiredMessage:"Date is required"}),e.registerValidator(e.get("dccClaimsModel"),"claimDate",{functions:[Komodo.UI.Validators.DatePickerValidator],limitValueToType:!0,isRequired:!0,maxDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()+1),type:"date",displayName:"Date",isRequiredMessage:"Date is required"}),e.registerValidator(e.get("dccClaimsModel"),"otherInsurance",{type:"bool",defaultValue:!1}),e.registerValidator(e.get("dccClaimsModel"),"insurerName",{type:"string",minLength:1,maxLength:50,functions:Komodo.UI.Validators.firstNameAndLastNameValidator}),e.registerValidator(e.get("dccClaimsModel"),"insurerPolicyNumber",{type:"string",minLength:4,maxLength:13,functions:Komodo.UI.Validators.alphanumericValidator}),e.registerValidator(e.get("dccClaimsModel"),"dispatchBranch",{type:"string"}),e.registerValidator(e.get("dccClaimsModel"),"sameAsPhysical",{type:"bool",defaultValue:!1})},validateData:function(){var e="",t=this,a=!1,o=Object.keys(t.get("validators"));return $.each(o,function(o,s){var r=t.get("validators."+s);if(r.model===t.get("dccClaimsModel")||"On the Dot"===t.dccClaimsModel.dispatchBranch&&r.model===t.get("addressInformation")){var n="validators."+s+".errors";t.get(n).length>0&&$.each(t.get(n),function(t,o){e+=o+"<br />",a=!0})}}),a&&(e=kl.value("controller.invalidDataMessage")+"<br />"+e,Komodo.Controls.MessageBoxController.show(kl.value(t.get("localeDCCClaim")+"createClaim"),e,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning")),a},createDependentProperty:function(e,t){var a=this;t.forEach(function(t){void 0!==a.get("validators."+e)&&a.get("validators."+e).functions.addObject(t)}),a.get("validators."+e).validate()},removeDependentProperty:function(e){var t=this;void 0!==t.get("validators."+e)&&(t.get("validators."+e).functions.clear(),t.get("validators."+e).validate())},stop:function(){var e=this;e.set("dispatchBrachObserver",!1),e.set("deviceNumberlst",[]),e.set("provincelst",[]),e.set("suburblst",[]),e.set("citylst",[]),e.set("countrylst",[]),e.set("postalCodelst",[]),e.set("dispatchBranchlst",[]),e.set("claimTypelst",[]),e.set("claimStatuslst",[]),e.set("deviceNumberlst",[]),e.set("isOnTheDotBranchVisible",!1),e.set("isOtherInsuranceFieldsVisible",!1),e.set("isDCCClaimGridDataAvailable",!1),e.set("isDCCPackageNotAvailable",!1),e.set("isCreateClaimButtonVisible",!1),e.dccClaimsModel.set("dccClaimGridData",[]),e.dccClaimsModel.set("dccClaimGridFilterData",[]),e.dccClaimsModel.set("customerName",void 0),e.dccClaimsModel.set("customerSurname",void 0),e.dccClaimsModel.set("customerUID",void 0),e.dccClaimsModel.set("dispatchBranch",void 0),e.clearAddressInformation(),e.set("dispatchBrachObserver",!0),e._super()},viewDccClaimGridItem:function(){var e=this,t=e.get("dccClaimsModel.commandGridItem");e.dccClaimDetailsModel.set("claimUID",t.get("claimUID")),e.dccClaimDetailsModel.set("customerUID",t.get("customerUID")),e.dccClaimDetailsModel.set("deviceNumber",t.get("deviceNumber")),e.dccClaimDetailsModel.set("accountNumber",e.getDefaultValueIfEmpty(t.get("accountNumber"))),e.dccClaimDetailsModel.set("deviceName",e.getDefaultValueIfEmpty(t.get("deviceName"))),e.dccClaimDetailsModel.set("smartcardNumber",e.getDefaultValueIfEmpty(t.get("smartcardNumber"))),void 0!==t.get("policeStation")&&null!==t.get("policeStation")&&""!==t.get("policeStation")&&e.dccClaimDetailsModel.set("policeStation",e.getDefaultValueIfEmpty(t.get("policeStation"))),void 0!==t.get("policeCaseNumber")&&null!==t.get("policeCaseNumber")&&""!==t.get("policeCaseNumber")&&e.dccClaimDetailsModel.set("policeCaseNumber",e.getDefaultValueIfEmpty(t.get("policeCaseNumber"))),void 0!==t.get("caseDate")&&null!==t.get("caseDate")&&""!==t.get("caseDate")&&e.dccClaimDetailsModel.set("caseDate",e.getDefaultValueIfEmpty(t.get("caseDate"))),e.dccClaimDetailsModel.set("claimType",t.get("claimType")),e.dccClaimDetailsModel.set("dateOfTheft",e.getDefaultValueIfEmpty(t.get("dateOfTheft"))),e.dccClaimDetailsModel.set("claimDate",t.get("claimDate")),e.dccClaimDetailsModel.set("claimStatus",t.get("claimStatus")),e.dccClaimDetailsModel.set("otherInsurance",t.get("otherInsurance")),e.dccClaimDetailsModel.set("insurerName",t.get("insurerName")),e.dccClaimDetailsModel.set("insurerPolicyNumber",t.get("insurerPolicyNumber")),e.dccClaimDetailsModel.set("dispatchBranch",t.get("dispatchBranch")),e.dccClaimDetailsModel.set("sameAsPhysical",t.get("sameAsPhysical")),e.dccClaimDetailsModel.set("country",t.get("country")),e.dccClaimDetailsModel.set("province",t.get("province")),e.dccClaimDetailsModel.set("city",t.get("city")),e.dccClaimDetailsModel.set("suburb",t.get("suburb")),e.dccClaimDetailsModel.set("postalCode",t.get("postalCode")),e.dccClaimDetailsModel.set("unitNumber",t.get("unitNumber")),e.dccClaimDetailsModel.set("buildingName",t.get("buildingName")),e.dccClaimDetailsModel.set("streetNumber",t.get("streetNumber")),e.dccClaimDetailsModel.set("streetName",t.get("streetName")),e.dccClaimDetailsModel.set("customerName",t.get("customerName")),e.dccClaimDetailsModel.set("customerSurname",t.get("customerSurname")),e.dccClaimDetailsModel.set("category",t.get("category")),e.dccClaimDetailsModel.set("subCategory",t.get("subCategory")),e.dccClaimDetailsModel.set("interactionType",t.get("interactionType")),e.dccClaimDetailsModel.set("outcome",t.get("outcome")),e.dccClaimDetailsModel.set("queryType",t.get("queryType")),e.dccClaimDetailsModel.set("priority",t.get("priority")),e.dccClaimDetailsModel.set("statusId",t.get("statusId")),e.dccClaimDetailsModel.set("isSetToStolen",t.get("isSetToStolen")),e.dccClaimDetailsModel.set("isClaimProcessed",t.get("isClaimProcessed")),e.dccClaimDetailsModel.set("interacteeName",t.get("interacteeName")),e.dccClaimDetailsModel.set("interactionLocation",t.get("interactionLocation")),e.dccClaimDetailsModel.set("interactionMedium",t.get("interactionMedium")),e.dccClaimDetailsModel.set("dccPolicyNumber",e.getDefaultValueIfEmpty(t.get("dccPolicyNumber"))),e.dccClaimDetailsModel.set("smartcardModel",t.get("smartcardModel")),null!==t.get("isAddressOverride")&&void 0!==t.get("isAddressOverride")&&("true"===t.get("isAddressOverride")?e.dccClaimDetailsModel.set("isAddressOverride",!0):e.dccClaimDetailsModel.set("isAddressOverride",!1));Komodo.Services.uiService.getController("dccClaimDetails");e.dccClaimDetailsModel&&Komodo.Services.eventAggregator.publish("PublishClaimDetails",e.dccClaimDetailsModel),e.transitionToRoute("/dccClaimDetails")},removeDocument:function(e){var t=this,a=e._parentView._childViews[0].text,o=t.get("data"),s=-1,r="";$(o.customerDocuments).each(function(e,t){t.documentName===a&&(s=e,r=t.documentName)}),s>-1&&(o.customerDocuments.removeAt(s),o.fileUploader.files.removeAt(s))},validateAndPublishCreateCase:function(){this.publishCreateCase()},publishCreateCase:function(){this.setCaseValues();var e=Komodo.Models.CreateInteraction.create(),t=Komodo.Models.Case.create(),a=Komodo.canonicalFacadeFactory(e,["Country","Case","ListOfCaseData_CaseData"]),o=this.dccClaimsModel.get("customerName")+" "+this.dccClaimsModel.get("customerSurname"),s=void 0;Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(e){s=e.data.countryDescription}),t.set("Type","Case"),t.set("CustomerUID",this.dccClaimsModel.get("customerUID")),t.set("InteracteeName",o),t.set("InteractionLocation",s),t.set("InteractionMedium",this.dccClaimsModel.get("interactionType")),t.set("QueryType",this.dccClaimsModel.get("queryType")),t.set("Category",this.dccClaimsModel.get("category")),t.set("SubCategory",this.dccClaimsModel.get("subCategory")),t.set("Outcome",this.dccClaimsModel.get("outcome")),t.set("Priority",this.dccClaimsModel.get("priority")),t.set("Status",this.dccClaimsModel.get("statusId")),t.set("Notes","DCC Claim Created"),t.set("CreatedDate",new Date);var r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),i=[];this.dccClaimsModel.set("isClaimProcessed","False"),void 0!==this.dccClaimsModel.get("isClaimProcessed")&&""!=this.dccClaimsModel.get("isClaimProcessed")&&null!=this.dccClaimsModel.get("isClaimProcessed")&&(n.set("CaseDataValueUri","IsClaimProcessed"),n.set("Value",this.dccClaimsModel.get("isClaimProcessed")),i.push(r));var r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]);void 0!==this.dccClaimsModel.get("dccPolicyNumber")&&""!=this.dccClaimsModel.get("dccPolicyNumber")&&null!=this.dccClaimsModel.get("dccPolicyNumber")&&"-"!=this.dccClaimsModel.get("dccPolicyNumber")&&(n.set("CaseDataValueUri","PolicyNumber"),n.set("Value",this.dccClaimsModel.get("dccPolicyNumber")),i.push(r));var r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]);void 0!==this.dccClaimsModel.get("category")&&""!=this.dccClaimsModel.get("category")&&null!=this.dccClaimsModel.get("category")&&(n.set("CaseDataValueUri","Category"),n.set("Value",this.dccClaimsModel.get("category")),i.push(r));var r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]);void 0!==this.dccClaimsModel.get("caseDate")&&""!=this.dccClaimsModel.get("caseDate")&&null!=this.dccClaimsModel.get("caseDate")&&"-"!=this.dccClaimsModel.get("caseDate")&&(n.set("CaseDataValueUri","PoliceCaseDate"),n.set("Value",this.dccClaimsModel.get("caseDate")),i.push(r))
;var r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]);void 0!==this.dccClaimsModel.get("deviceNumber")&&""!=this.dccClaimsModel.get("deviceNumber.Value")&&null!=this.dccClaimsModel.get("deviceNumber.Value")&&(n.set("CaseDataValueUri","DecoderNumber"),n.set("Value",this.dccClaimsModel.get("deviceNumber.Value")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==this.dccClaimsModel.get("accountNumber")&&""!=this.dccClaimsModel.get("accountNumber")&&null!=this.dccClaimsModel.get("accountNumber")&&"-"!=this.dccClaimsModel.get("accountNumber")&&(n.set("CaseDataValueUri","AccountNumber"),n.set("Value",this.dccClaimsModel.get("accountNumber")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==this.dccClaimsModel.get("deviceName")&&""!=this.dccClaimsModel.get("deviceName")&&null!=this.dccClaimsModel.get("deviceName")&&"-"!=this.dccClaimsModel.get("deviceName")&&(n.set("CaseDataValueUri","DeviceName"),n.set("Value",this.dccClaimsModel.get("deviceName")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==this.dccClaimsModel.get("smartcardNumber")&&""!=this.dccClaimsModel.get("smartcardNumber")&&null!=this.dccClaimsModel.get("smartcardNumber")&&"-"!=this.dccClaimsModel.get("smartcardNumber")&&(n.set("CaseDataValueUri","SmartcardNumber"),n.set("Value",this.dccClaimsModel.get("smartcardNumber")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==this.dccClaimsModel.get("isSetToStolen")&&""!=this.dccClaimsModel.get("isSetToStolen")&&null!=this.dccClaimsModel.get("isSetToStolen")&&(n.set("CaseDataValueUri","IsSetToStolen"),n.set("Value",this.dccClaimsModel.get("isSetToStolen")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==this.dccClaimsModel.get("policeStation")&&""!=this.dccClaimsModel.get("policeStation")&&null!=this.dccClaimsModel.get("policeStation")&&"-"!=this.dccClaimsModel.get("policeStation")&&(n.set("CaseDataValueUri","PoliceStation"),n.set("Value",this.dccClaimsModel.get("policeStation")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==this.dccClaimsModel.get("policeCaseNumber")&&""!=this.dccClaimsModel.get("policeCaseNumber")&&null!=this.dccClaimsModel.get("policeCaseNumber")&&"-"!=this.dccClaimsModel.get("policeCaseNumber")&&(n.set("CaseDataValueUri","PoliceCaseNumber"),n.set("Value",this.dccClaimsModel.get("policeCaseNumber")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==this.dccClaimsModel.get("claimType")&&""!=this.dccClaimsModel.get("claimType")&&null!=this.dccClaimsModel.get("claimType")&&(n.set("CaseDataValueUri","ClaimType"),n.set("Value",this.dccClaimsModel.get("claimType")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==this.dccClaimsModel.get("dateOfTheft")&&""!=this.dccClaimsModel.get("dateOfTheft")&&null!=this.dccClaimsModel.get("dateOfTheft")&&"-"!=this.dccClaimsModel.get("dateOfTheft")&&(n.set("CaseDataValueUri","DateOfTheft"),n.set("Value",this.dccClaimsModel.get("dateOfTheft")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==this.dccClaimsModel.get("claimDate")&&""!=this.dccClaimsModel.get("claimDate")&&null!=this.dccClaimsModel.get("claimDate")&&(n.set("CaseDataValueUri","DateOfClaim"),n.set("Value",this.dccClaimsModel.get("claimDate")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),this.dccClaimsModel.set("claimStatus","To be Processed"),void 0!==this.dccClaimsModel.get("claimStatus")&&""!=this.dccClaimsModel.get("claimStatus")&&null!=this.dccClaimsModel.get("claimStatus")&&(n.set("CaseDataValueUri","ClaimStatus"),n.set("Value",this.dccClaimsModel.get("claimStatus")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==this.dccClaimsModel.get("otherInsurance")&&""!==this.dccClaimsModel.get("otherInsurance")&&null!==this.dccClaimsModel.get("otherInsurance")&&(n.set("CaseDataValueUri","OtherInsurnace"),n.set("Value",this.dccClaimsModel.get("otherInsurance")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==this.dccClaimsModel.get("insurerName")&&""!=this.dccClaimsModel.get("insurerName")&&null!=this.dccClaimsModel.get("insurerName")&&(n.set("CaseDataValueUri","InsurerName"),n.set("Value",this.dccClaimsModel.get("insurerName")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==this.dccClaimsModel.get("insurerPolicyNumber")&&""!=this.dccClaimsModel.get("insurerPolicyNumber")&&null!=this.dccClaimsModel.get("insurerPolicyNumber")&&(n.set("CaseDataValueUri","InsurerPolicyNumber"),n.set("Value",this.dccClaimsModel.get("insurerPolicyNumber")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==this.dccClaimsModel.get("dispatchBranch")&&""!=this.dccClaimsModel.get("dispatchBranch")&&null!=this.dccClaimsModel.get("dispatchBranch")&&(n.set("CaseDataValueUri","DispatchBranch"),n.set("Value",this.dccClaimsModel.get("dispatchBranch")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==this.dccClaimsModel.get("sameAsPhysical")&&""!=this.dccClaimsModel.get("sameAsPhysical")&&null!=this.dccClaimsModel.get("sameAsPhysical")&&(n.set("CaseDataValueUri","SameAsPhysicalAddress"),n.set("Value",this.dccClaimsModel.get("sameAsPhysical")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==this.dccClaimsModel.get("country")&&""!=this.dccClaimsModel.get("country")&&null!=this.dccClaimsModel.get("country")&&(n.set("CaseDataValueUri","Country"),n.set("Value",this.dccClaimsModel.get("country")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==this.dccClaimsModel.get("province")&&""!=this.dccClaimsModel.get("province")&&null!=this.dccClaimsModel.get("province")&&(n.set("CaseDataValueUri","Province"),n.set("Value",this.dccClaimsModel.get("province")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==this.dccClaimsModel.get("city")&&""!=this.dccClaimsModel.get("city")&&null!=this.dccClaimsModel.get("city")&&(n.set("CaseDataValueUri","City"),n.set("Value",this.dccClaimsModel.get("city")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==this.dccClaimsModel.get("suburb")&&""!=this.dccClaimsModel.get("suburb")&&null!=this.dccClaimsModel.get("suburb")&&(n.set("CaseDataValueUri","Suburb"),n.set("Value",this.dccClaimsModel.get("suburb")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==this.dccClaimsModel.get("postalCode")&&""!=this.dccClaimsModel.get("postalCode")&&null!=this.dccClaimsModel.get("postalCode")&&(n.set("CaseDataValueUri","PostalCode"),n.set("Value",this.dccClaimsModel.get("postalCode")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==this.dccClaimsModel.get("unitNumber")&&""!=this.dccClaimsModel.get("unitNumber")&&null!=this.dccClaimsModel.get("unitNumber")&&(n.set("CaseDataValueUri","UnitNumber"),n.set("Value",this.dccClaimsModel.get("unitNumber")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==this.dccClaimsModel.get("buildingName")&&""!=this.dccClaimsModel.get("buildingName")&&null!=this.dccClaimsModel.get("buildingName")&&(n.set("CaseDataValueUri","BuildingName"),n.set("Value",this.dccClaimsModel.get("buildingName")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==this.dccClaimsModel.get("streetNumber")&&""!=this.dccClaimsModel.get("streetNumber")&&null!=this.dccClaimsModel.get("streetNumber")&&(n.set("CaseDataValueUri","StreetNumber"),n.set("Value",this.dccClaimsModel.get("streetNumber")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==this.dccClaimsModel.get("streetName")&&""!=this.dccClaimsModel.get("streetName")&&null!=this.dccClaimsModel.get("streetName")&&(n.set("CaseDataValueUri","StreetName"),n.set("Value",this.dccClaimsModel.get("streetName")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==this.dccClaimsModel.get("isAddressOverride")&&""!==this.dccClaimsModel.get("isAddressOverride")&&null!==this.dccClaimsModel.get("isAddressOverride")&&(n.set("CaseDataValueUri","IsAddressOverride"),n.set("Value",this.dccClaimsModel.get("isAddressOverride")),i.push(r)),a.set("Country",this.country),a.set("Case",t),a.set("ListOfCaseData_CaseData",i),this.publishRequestOnBus(e,"CreateInteraction","v1"),this.showBusyIndicator()},publishRequestOnBus:function(e,t,a){var o=Komodo.Services.ManageViewingService,s="Event Message for "+t+" ";o.publishEvent(this,e,t,a).done(function(){Komodo.log(s+" has been published successfully")}).fail(function(e){Komodo.log(s+" has been failed"),Komodo.Controls.MessageBoxController.show(s,e)})},messageCaseCreatedReceived:function(e){if(void 0!==e.ResponseMessage.Payload.Case.UID){var t=this;t.caseNumber=e.ResponseMessage.Payload.Case.UID,Komodo.log("[Create DCC Claim]: DCC Claim created with ID "+t.caseNumber),Komodo.log("[Create DCC Claim]: Uploading Documents to Server......."),t.dccClaimFileUploader.start()}},displayDCCClaimCreatedMessage:function(e,t){var a=this;a.set("isCreateClaimButton",!1),Komodo.Services.busyService.stop(this.get("processId"),"blocking");var o=a.dccClaimsModel.get("deviceNumber.Value");Komodo.Controls.MessageBoxController.show(kl.value(a.localeDCCClaim+"createClaim"),kl.value(a.localeDCCClaim+"successClaimMessage",{deviceNumber:o}),Komodo.Controls.MessageBoxOkButton,a,"id5446673","success").response=function(e){"ok"==e&&(a.getAllDCCClaims(),a.clearCaseInformation(),a.clearDeviceInformation(),a.clearSetToStolenInformation(),a.clearClaimInformation(),a.clearDeliveryAddress(),a.clearAddressInformation())}},messageFailureMessageEventReceived:function(e){this.set("isCreateClaimButton",!1),Komodo.Services.busyService.stop(this.get("processId"),"blocking"),Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")},getSetToStolenInfoByDeviceNumber:function(){var e=this,t=$.Deferred();if(void 0!==e.dccClaimsModel&&null!==e.dccClaimsModel){var a=e.dccClaimsModel.get("deviceNumber");void 0!==a&&null!==a&&null!==a.Value&&null!==a.undefined&&e.searchInteractionByFilters(1,e.dccClaimsModel.get("customerUID"),"Activity","","","",a.Value,"").done(function(a){t.resolve(a),e.set("dccClaimsModel.customerSetToStolenCases",a);var o=e.dccClaimsModel.get("customerSetToStolenCases");if(void 0!==o&&null!==o)if(null!==o.Case&&void 0!==o.Case&&o.Case.length>0){if(null!==o.Case[0].ListOfCaseData.CaseData&&void 0!==o.Case[0].ListOfCaseData.CaseData&&o.Case[0].ListOfCaseData.CaseData.length>0){e.set("isSetToStolenVisible",!0),e.set("dccClaimsModel.isSetToStolen",!0);var s=$.grep($.makeArray(o.Case[0].ListOfCaseData.CaseData),function(e){return"PoliceStationName"===e.CaseDataValueUri});null!==s&&void 0!==s&&s.length>0&&e.dccClaimsModel.set("policeStation",e.getDefaultValueIfEmpty(s[0].Value));var r=$.grep($.makeArray(o.Case[0].ListOfCaseData.CaseData),function(e){return"PoliceCaseNumber"===e.CaseDataValueUri});null!==r&&void 0!==r&&r.length>0&&e.dccClaimsModel.set("policeCaseNumber",e.getDefaultValueIfEmpty(r[0].Value));var n=$.grep($.makeArray(o.Case[0].ListOfCaseData.CaseData),function(e){return"CaseDate"===e.CaseDataValueUri});if(null!==n&&void 0!==n&&n.length>0&&void 0!==n[0].Value&&null!==n[0].Value){var i=new Date(n[0].Value);e.dccClaimsModel.set("caseDate",e.getDefaultValueIfEmpty(n[0].Value)),e.dccClaimsModel.set("caseDateValue",e.getDefaultValueIfEmpty(i.toLocaleDateString("es-CL")))}e.dccClaimsModel.set("claimType","Theft")}}else e.clearSetToStolenInformation(),e.dccClaimsModel.set("claimType",void 0),e.set("isSetToStolenVisible",!1);else e.clearSetToStolenInformation(),e.dccClaimsModel.set("claimType",void 0),e.set("isSetToStolenVisible",!1)})}return t},getAllDCCClaims:function(){var e=this,t=$.Deferred();return void 0!==e.dccClaimsModel&&null!==e.dccClaimsModel?void 0!==e.dccClaimsModel.get("customerUID")&&null!==e.dccClaimsModel.get("customerUID")&&void 0!==e.dccClaimsModel.get("category")&&null!==e.dccClaimsModel.get("category")&&e.searchInteractionByFilters(1,e.dccClaimsModel.get("customerUID"),"Case","","",e.dccClaimsModel.get("category"),"","").done(function(a){t.resolve(a),e.set("dccClaimsModel.customerCases",a);var o=e.dccClaimsModel.get("customerCases");if(void 0!==o&&null!==o){var s=[];$.each($.makeArray(o.Case),function(t,a){if(null!==a&&void 0!==a){if(e.set("claimsModel",Komodo.Models.DccClaimsModel.create()),e.claimsModel.set("category",a.Category),e.claimsModel.set("subCategory",a.SubCategory),e.claimsModel.set("outcome",a.Outcome),e.claimsModel.set("statusId",a.Status),e.claimsModel.set("claimUID",a.UID),e.claimsModel.set("queryType",a.QueryType),e.claimsModel.set("customerUID",a.CustomerUID),e.claimsModel.set("interacteeName",a.InteracteeName),e.claimsModel.set("interactionLocation",a.InteractionLocation),e.claimsModel.set("interactionMedium",a.InteractionMedium),e.claimsModel.set("interactionType",a.InteractionType),null!==a.ListOfCaseData.CaseData&&void 0!==a.ListOfCaseData.CaseData&&a.ListOfCaseData.CaseData.length>0){var o=$.grep($.makeArray(a.ListOfCaseData.CaseData),function(e){return"IsClaimProcessed"===e.CaseDataValueUri});null!==o&&void 0!==o&&o.length>0&&e.claimsModel.set("isClaimProcessed",o[0].Value);var r=$.grep($.makeArray(a.ListOfCaseData.CaseData),function(e){return"Category"===e.CaseDataValueUri});null!==r&&void 0!==r&&r.length>0&&e.claimsModel.set("category",r[0].Value);var n=$.grep($.makeArray(a.ListOfCaseData.CaseData),function(e){return"PolicyNumber"===e.CaseDataValueUri});null!==n&&void 0!==n&&n.length>0?e.claimsModel.set("dccPolicyNumber",e.getDefaultValueIfEmpty(n[0].Value)):e.claimsModel.set("dccPolicyNumber","-");var i=$.grep($.makeArray(a.ListOfCaseData.CaseData),function(e){return"DecoderNumber"===e.CaseDataValueUri});null!==i&&void 0!==i&&i.length>0&&e.claimsModel.set("deviceNumber",i[0].Value);var c=$.grep($.makeArray(a.ListOfCaseData.CaseData),function(e){return"AccountNumber"===e.CaseDataValueUri});null!==c&&void 0!==c&&c.length>0?e.claimsModel.set("accountNumber",e.getDefaultValueIfEmpty(c[0].Value)):e.claimsModel.set("accountNumber","-");var l=$.grep($.makeArray(a.ListOfCaseData.CaseData),function(e){return"DeviceName"===e.CaseDataValueUri});null!==l&&void 0!==l&&l.length>0&&e.claimsModel.set("deviceName",e.getDefaultValueIfEmpty(l[0].Value));var d=$.grep($.makeArray(a.ListOfCaseData.CaseData),function(e){return"SmartcardNumber"===e.CaseDataValueUri});null!==d&&void 0!==d&&d.length>0?e.claimsModel.set("smartcardNumber",d[0].Value):e.claimsModel.set("smartcardNumber","-");var u=$.grep($.makeArray(a.ListOfCaseData.CaseData),function(e){return"IsSetToStolen"===e.CaseDataValueUri});null!==u&&void 0!==u&&u.length>0&&e.claimsModel.set("isSetToStolen",u[0].Value);var h=$.grep($.makeArray(a.ListOfCaseData.CaseData),function(e){return"PoliceStation"===e.CaseDataValueUri});null!==h&&void 0!==h&&h.length>0?e.claimsModel.set("policeStation",e.getDefaultValueIfEmpty(h[0].Value)):e.claimsModel.set("policeStation","-");var m=$.grep($.makeArray(a.ListOfCaseData.CaseData),function(e){return"PoliceCaseNumber"===e.CaseDataValueUri});null!==m&&void 0!==m&&m.length>0?e.claimsModel.set("policeCaseNumber",e.getDefaultValueIfEmpty(m[0].Value)):e.claimsModel.set("policeCaseNumber","-");var g=$.grep($.makeArray(a.ListOfCaseData.CaseData),function(e){return"PoliceCaseDate"===e.CaseDataValueUri});null!==g&&void 0!==g&&g.length>0?e.claimsModel.set("caseDate",e.getDefaultValueIfEmpty(g[0].Value)):e.claimsModel.set("caseDate","-");var p=$.grep($.makeArray(a.ListOfCaseData.CaseData),function(e){return"ClaimType"===e.CaseDataValueUri});null!==p&&void 0!==p&&p.length>0&&e.claimsModel.set("claimType",p[0].Value);var v=$.grep($.makeArray(a.ListOfCaseData.CaseData),function(e){return"DateOfTheft"===e.CaseDataValueUri});null!==v&&void 0!==v&&v.length>0&&e.claimsModel.set("dateOfTheft",v[0].Value);var f=$.grep($.makeArray(a.ListOfCaseData.CaseData),function(e){return"DateOfClaim"===e.CaseDataValueUri});null!==f&&void 0!==f&&f.length>0&&e.claimsModel.set("claimDate",f[0].Value);var b=$.grep($.makeArray(a.ListOfCaseData.CaseData),function(e){return"ClaimStatus"===e.CaseDataValueUri});null!==b&&void 0!==b&&b.length>0&&e.claimsModel.set("claimStatus",b[0].Value);var C=$.grep($.makeArray(a.ListOfCaseData.CaseData),function(e){return"OtherInsurnace"===e.CaseDataValueUri});null!==C&&void 0!==C&&C.length>0&&e.claimsModel.set("otherInsurance",C[0].Value);var S=$.grep($.makeArray(a.ListOfCaseData.CaseData),function(e){return"InsurerName"===e.CaseDataValueUri});null!==S&&void 0!==S&&S.length>0&&e.claimsModel.set("insurerName",S[0].Value);var D=$.grep($.makeArray(a.ListOfCaseData.CaseData),function(e){return"InsurerPolicyNumber"===e.CaseDataValueUri});null!==D&&void 0!==D&&D.length>0&&e.claimsModel.set("insurerPolicyNumber",D[0].Value);var y=$.grep($.makeArray(a.ListOfCaseData.CaseData),function(e){return"DispatchBranch"===e.CaseDataValueUri});null!==y&&void 0!==y&&y.length>0&&e.claimsModel.set("dispatchBranch",y[0].Value);var w=$.grep($.makeArray(a.ListOfCaseData.CaseData),function(e){return"SameAsPhysicalAddress"===e.CaseDataValueUri});null!==w&&void 0!==w&&w.length>0&&e.claimsModel.set("sameAsPhysical",w[0].Value);var I=$.grep($.makeArray(a.ListOfCaseData.CaseData),function(e){return"Country"===e.CaseDataValueUri});null!==I&&void 0!==I&&I.length>0&&e.claimsModel.set("country",I[0].Value);var x=$.grep($.makeArray(a.ListOfCaseData.CaseData),function(e){return"Province"===e.CaseDataValueUri});null!==x&&void 0!==x&&x.length>0&&e.claimsModel.set("province",x[0].Value);var M=$.grep($.makeArray(a.ListOfCaseData.CaseData),function(e){return"City"===e.CaseDataValueUri});null!==M&&void 0!==M&&M.length>0&&e.claimsModel.set("city",M[0].Value);var T=$.grep($.makeArray(a.ListOfCaseData.CaseData),function(e){return"Suburb"===e.CaseDataValueUri});null!==T&&void 0!==T&&T.length>0&&e.claimsModel.set("suburb",T[0].Value);var N=$.grep($.makeArray(a.ListOfCaseData.CaseData),function(e){return"PostalCode"===e.CaseDataValueUri});null!==N&&void 0!==N&&N.length>0&&e.claimsModel.set("postalCode",N[0].Value);var P=$.grep($.makeArray(a.ListOfCaseData.CaseData),function(e){return"UnitNumber"===e.CaseDataValueUri});null!==P&&void 0!==P&&P.length>0&&e.claimsModel.set("unitNumber",P[0].Value);var O=$.grep($.makeArray(a.ListOfCaseData.CaseData),function(e){return"BuildingName"===e.CaseDataValueUri});null!==O&&void 0!==O&&O.length>0&&e.claimsModel.set("buildingName",O[0].Value);var B=$.grep($.makeArray(a.ListOfCaseData.CaseData),function(e){return"StreetNumber"===e.CaseDataValueUri});null!==B&&void 0!==B&&B.length>0&&e.claimsModel.set("streetNumber",B[0].Value);var R=$.grep($.makeArray(a.ListOfCaseData.CaseData),function(e){return"StreetName"===e.CaseDataValueUri});null!==R&&void 0!==R&&R.length>0&&e.claimsModel.set("streetName",R[0].Value);var k=$.grep($.makeArray(a.ListOfCaseData.CaseData),function(e){return"IsAddressOverride"===e.CaseDataValueUri});null!==k&&void 0!==k&&k.length>0&&e.claimsModel.set("isAddressOverride",k[0].Value)}s.push(e.claimsModel),e.set("claimsModel",void 0)}else e.set("dccClaimGridDataNotAvailable",!0),e.set("isDCCClaimGridDataAvailable",!1)}),e.dccClaimsModel.set("dccClaimGridData",s),e.dccClaimsModel.set("dccClaimGridFilterData",s),void 0!==s&&null!==s&&s.length>0?(e.set("dccClaimGridDataNotAvailable",!1),e.set("isDCCClaimGridDataAvailable",!0)):(e.set("dccClaimGridDataNotAvailable",!0),e.set("isDCCClaimGridDataAvailable",!1))}else e.set("dccClaimGridDataNotAvailable",!0),e.set("isDCCClaimGridDataAvailable",!1)}):(e.set("dccClaimGridDataNotAvailable",!0),e.set("isDCCClaimGridDataAvailable",!1)),t},filterDCCClaimGrid:function(){var e=this;if(null!==e.dccClaimsModel.get("dccClaimGridStatus")&&void 0!==e.dccClaimsModel.get("dccClaimGridStatus")&&""!=e.dccClaimsModel.get("dccClaimGridStatus")&&null!==e.dccClaimsModel.get("dccClaimGridStatus.value")&&void 0!==e.dccClaimsModel.get("dccClaimGridStatus.value")&&""!==e.dccClaimsModel.get("dccClaimGridStatus.value")){var t=$.grep(e.dccClaimsModel.get("dccClaimGridData"),function(t){return t.claimStatus===e.dccClaimsModel.get("dccClaimGridStatus.value")});e.dccClaimsModel.set("dccClaimGridFilterData",[]),e.dccClaimsModel.set("dccClaimGridFilterData",t)}0===e.dccClaimsModel.get("dccClaimGridFilterData").length?e.set("dccClaimGridDataNotAvailable",!0):e.dccClaimsModel.get("dccClaimGridFilterData").length>0&&(e.set("dccClaimGridDataNotAvailable",!1),e.set("isDCCClaimGridDataAvailable",!0))},createClaim:function(e){var t=this,a=!1,o=!1,s=$.Deferred();return void 0!==t.dccClaimsModel&&null!==t.dccClaimsModel&&void 0!==t.dccClaimsModel.get("customerUID")&&null!==t.dccClaimsModel.get("customerUID")&&void 0!==t.dccClaimsModel.get("category")&&null!==t.dccClaimsModel.get("category")&&void 0!==t.dccClaimsModel.get("deviceNumber")&&null!==t.dccClaimsModel.get("deviceNumber")&&t.searchInteractionByFilters(1,t.dccClaimsModel.get("customerUID"),"Case","","",t.dccClaimsModel.get("category"),"",t.dccClaimsModel.get("deviceNumber.Value")).done(function(e){s.resolve(e),t.set("dccClaimsModel.customerCases",e);var r=t.dccClaimsModel.get("customerCases");if(void 0!==r&&null!==r&&null!==r.Case&&void 0!==r.Case&&r.Case.length>0?($.each($.makeArray(r.Case),function(e,t){if(null!==t&&void 0!==t){if(null!==t.ListOfCaseData.CaseData&&void 0!==t.ListOfCaseData.CaseData&&t.ListOfCaseData.CaseData.length>0){var s=$.grep($.makeArray(t.ListOfCaseData.CaseData),function(e){return"ClaimStatus"===e.CaseDataValueUri});null!==s&&void 0!==s&&s.length>0&&"To be Processed"===s[0].Value&&(o=!0)}}else a=!0}),o||(a=!0)):a=!0,a)t.validateAndPublishCreateCase();else{t.set("isCreateClaimButton",!1);var n=t.dccClaimsModel.get("deviceNumber.Value");Komodo.Controls.MessageBoxController.show(kl.value(t.localeDCCClaim+"createClaim"),kl.value(t.localeDCCClaim+"dccClaimExistsForDevice",{deviceNumber:n}),Komodo.Controls.MessageBoxOkButton,t,"id24456673","warning").response=function(e){"ok"==e&&(t.clearCaseInformation(),t.clearDeviceInformation(),t.clearSetToStolenInformation(),t.clearClaimInformation(),t.clearDeliveryAddress())}}}),s},searchInteractionByFilters:function(e,t,a,o,s,r,n,i){var c=new Object,l=new Array,d=this;if(void 0==t||""==t||null==t||void 0==a||""==a||null==a||void 0==e||""==e||null==e)return Komodo.Controls.MessageBoxController.show(kl.value(d.localeDCCClaim+"error"),kl.value(d.localeDCCClaim+"recordFetchMsg"),Komodo.Controls.MessageBoxOkButtons,d,"id5446673","danger"),!1;c.CustomerUID=t,c.Type=a,void 0!=o&&""!=o&&null!=o&&(c.UID=o),void 0!=s&&""!=s&&null!=s&&l.push({Key:"StatusOfClaim",Value:s}),void 0!=r&&""!=r&&null!=r&&l.push({Key:"Category",Value:r}),void 0!=n&&""!=n&&null!=n&&l.push({Key:"StolenDeviceSerialNumber",Value:n}),void 0!=i&&""!=i&&null!=i&&l.push({Key:"DecoderNumber",Value:i}),l.length>0&&(c.CaseData=l);var u=new $.Deferred;return void 0!=c&&null!=c&&""!=c&&Komodo.Services.queryService.postJSON("CustomerInteraction/SearchInteractionByFilters?pageNumber="+e,{data:c}).done(function(e){u.resolve(e)}).error(function(e){var t=JSON.stringify(e);d.set("dccClaimsModel.retrieveCasesError",t),Komodo.log("Retrieve Customer Cases by Filter ajax call failed. Error: "+t)}),u},actions:{createClaim:function(e){var t=this,a=(t.get("dccClaimsModel"),!1),o=t.get("data");if(t.isOnTheDotBranchVisible&&t.setAddressObjectToViewModelAddress(),!t.validateData())if(t.set("isCreateClaimButton",!0),void 0!==o.customerDocuments&&null!==o.customerDocuments&&o.customerDocuments.length>0)if($.each($.makeArray(o.customerDocuments),function(e,t){void 0!==t.uploadStatus&&null!==t.uploadStatus&&""!==t.uploadStatus&&"QUEUED"===t.uploadStatus&&(a=!0)}),a)t.createClaim(e);else{t.set("isCreateClaimButton",!1);Komodo.Controls.MessageBoxController.show(kl.value(t.localeDCCClaim+"createClaim"),kl.value(t.localeDCCClaim+"dccClaimUploadDocumentError"),Komodo.Controls.MessageBoxOkButton,t,"id24456673","warning")}else{t.set("isCreateClaimButton",!1);Komodo.Controls.MessageBoxController.show(kl.value(t.localeDCCClaim+"createClaim"),kl.value(t.localeDCCClaim+"dccClaimUploadDocumentError"),Komodo.Controls.MessageBoxOkButton,t,"id24456673","warning")}},removeDocument:function(e){this.removeDocument(e)},viewDccClaimGridItem:function(){this.viewDccClaimGridItem()}},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,12e5,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},dccClaimStatusSelectionChanged:function(){var e=this;void 0!==e.dccClaimsModel&&null!==e.dccClaimsModel&&""!==e.dccClaimsModel&&(null!==e.dccClaimsModel.get("dccClaimGridStatus")&&void 0!==e.dccClaimsModel.get("dccClaimGridStatus")&&""!==e.dccClaimsModel.get("dccClaimGridStatus")?e.filterDCCClaimGrid():e.getAllDCCClaims())}.observes("dccClaimsModel.dccClaimGridStatus"),dccClaimTypeSelectionChanged:function(){var e=this;switch(e.set("isDateOfTheftDisable",!0),e.dccClaimsModel.claimType){case"Explosion":e.dccClaimsModel.set("subCategory","89");break;case"Fire":e.dccClaimsModel.set("subCategory","90");break;case"Lightning":e.dccClaimsModel.set("subCategory","91");break;case"Theft":e.dccClaimsModel.set("subCategory","92");break;case"Attempted theft":e.dccClaimsModel.set("subCategory","93")}if(e.dccClaimsModel.set("claimDate",new Date),void 0!==e.dccClaimsModel.claimType)switch(e.dccClaimsModel.claimType){case"Theft":if(e.set("isDateOfTheftDisable",!1),e.createDependentProperty("dateOfTheftValidator",[Komodo.UI.Validators.RequiredValidator]),!e.dccClaimsModel.get("isSetToStolen")){Komodo.Controls.MessageBoxController.show(kl.value(e.localeDCCClaim+"createClaim"),kl.value(e.localeDCCClaim+"deviceNotSetToStolen"),Komodo.Controls.MessageBoxOkButton,e,"id24456673","warning").response=function(t){"ok"==t&&(e.dccClaimsModel.set("claimType",void 0),e.dccClaimsModel.set("dateOfTheft",void 0))}}break;default:e.set("isDateOfTheftDisable",!0),e.removeDependentProperty("dateOfTheftValidator"),e.dccClaimsModel.set("dateOfTheft",void 0)}}.observes("dccClaimsModel.claimType"),deviceNumberSelectionChanged:function(){var e=this;e.setCaseValues();var t=e.dccClaimsModel.deviceNumber;if(null!==e.deviceNumberlst&&void 0!==e.deviceNumberlst&&null!==t&&e.deviceNumberlst.length>0&&void 0!==t&&""!==t){var a=e.get("data"),o=Komodo.Services.ProductAndServiceMaintenanceHelper.create();if(void 0!==Komodo.Services.customerProfileService.currentFinancialAccounts&&null!==Komodo.Services.customerProfileService.currentFinancialAccounts){var s=Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount;if(accounts=o.createArrayForSingleElement(s.Account),null!==accounts&&accounts.length>0)for(var r=0;r<accounts.length;r++)if("9"!=accounts[r].Type&&null!==accounts[r].ListOfAgreement&&null!==accounts[r].ListOfAgreement.Agreement)for(var n=o.createArrayForSingleElement(accounts[r].ListOfAgreement.Agreement),i=0;i<n.length;i++)for(var c=o.createArrayForSingleElement(n[i].ListOfHardware.Hardware),l=0;l<c.length;l++){if(t.Value===c[l].SerialNumber){if(a.set("documentSerialNumber",c[l].SerialNumber),e.set("dccClaimsModel.accountNumber",e.getDefaultValueIfEmpty(accounts[r].UID)),void 0!==c[l].ProductDetail&&void 0!==c[l].ProductDetail.Model&&null!==c[l].ProductDetail.Model&&""!==c[l].ProductDetail.Model){var d=c[l].ProductDetail.Model.split(" ");void 0!==d&&d.length>1?e.set("dccClaimsModel.deviceName",e.getDefaultValueIfEmpty(d[1])):void 0!==d&&1===d.length&&e.set("dccClaimsModel.deviceName",e.getDefaultValueIfEmpty(d[0]))}void 0!==c[l].InsuranceDetail&&null!==c[l].InsuranceDetail&&void 0!==c[l].InsuranceDetail.UID&&null!==c[l].InsuranceDetail.UID&&e.set("dccClaimsModel.dccPolicyNumber",e.getDefaultValueIfEmpty(c[l].InsuranceDetail.UID)),$("#DCCClaimDeviceNoChangeSection").show(),e.set("dccClaimsModel.smartcardNumber",e.getDefaultValueIfEmpty(c[l].LinkedSmartcard)),null!==c[l].LinkedSmartcard&&void 0!==c[l].LinkedSmartcard&&""!==c[l].LinkedSmartcard||null!==c[l].MACAddress&&void 0!==c[l].MACAddress&&""!==c[l]&&e.set("dccClaimsModel.smartcardNumber",c[l].MACAddress),e.set("isAddDocumentButton",!1),e.set("isUploadDocumentButton",!1),e.set("isCreateClaimButton",!1),e.set("isCreateClaimButtonVisible",!0),e.clearDeliveryAddress(),e.clearAddressInformation(),$("#DCCClaimDeliveryAddressPanel").hide(),e.getSetToStolenInfoByDeviceNumber()}if(null!=c[l].SecondaryHardware)for(var u=o.createArrayForSingleElement(c[l].SecondaryHardware.Hardware),h=0;h<u.length;h++)if(t.Value===u[h].SerialNumber){if(a.set("documentSerialNumber",u[h].SerialNumber),e.set("dccClaimsModel.accountNumber",e.getDefaultValueIfEmpty(accounts[r].UID)),void 0!==u[h].ProductDetail&&void 0!==u[h].ProductDetail.Model&&null!==u[h].ProductDetail.Model&&""!==u[h].ProductDetail.Model){var d=u[h].ProductDetail.Model.split(" ");void 0!==d&&d.length>1?e.set("dccClaimsModel.deviceName",e.getDefaultValueIfEmpty(d[1])):void 0!==d&&1===d.length&&e.set("dccClaimsModel.deviceName",e.getDefaultValueIfEmpty(d[0]))}void 0!==u[h].InsuranceDetail&&null!==u[h].InsuranceDetail&&void 0!==u[h].InsuranceDetail.UID&&null!==u[h].InsuranceDetail.UID&&e.set("dccClaimsModel.dccPolicyNumber",e.getDefaultValueIfEmpty(u[h].InsuranceDetail.UID)),$("#DCCClaimDeviceNoChangeSection").show(),e.set("dccClaimsModel.smartcardNumber",e.getDefaultValueIfEmpty(u[h].LinkedSmartcard)),null!==u[h].LinkedSmartcard&&void 0!==u[h].LinkedSmartcard&&""!==u[h].LinkedSmartcard||null!==u[h].MACAddress&&void 0!==u[h].MACAddress&&""!==u[h]&&e.set("dccClaimsModel.smartcardNumber",u[h].MACAddress),e.set("isAddDocumentButton",!1),e.set("isUploadDocumentButton",!1),e.set("isCreateClaimButton",!1),e.set("isCreateClaimButtonVisible",!0),e.clearDeliveryAddress(),e.clearAddressInformation(),$("#DCCClaimDeliveryAddressPanel").hide(),e.getSetToStolenInfoByDeviceNumber()}}}}else{e.set("dccClaimsModel.accountNumber",void 0),e.set("dccClaimsModel.deviceName",void 0),e.set("dccClaimsModel.smartcardNumber",void 0),e.set("dccClaimsModel.policeStation",void 0),e.set("dccClaimsModel.policeCaseNumber",void 0),e.set("dccClaimsModel.caseDate",void 0),e.set("dccClaimsModel.dccPolicyNumber",void 0),e.dccClaimsModel.set("otherInsurance",void 0),e.dccClaimsModel.set("insurerName",void 0),e.dccClaimsModel.set("insurerPolicyNumber",void 0),e.dccClaimsModel.set("claimType",void 0),e.dccClaimsModel.set("dateOfTheft",void 0),e.dccClaimsModel.set("claimDate",void 0),e.set("isCreateClaimButtonVisible",!1),$("#DCCClaimDeviceNoChangeSection").hide(),e.set("isSetToStolenVisible",!1),e.set("isAddDocumentButton",!0),e.set("isUploadDocumentButton",!0),e.set("isCreateClaimButton",!0);var a=e.get("data");a.set("customerDocuments",[])}
}.observes("dccClaimsModel.deviceNumber"),dispatchBranchSelectionChanged:function(){var e=this;if(e.dispatchBrachObserver&&(e.set("isOnTheDotBranchVisible",!1),void 0!==e.dccClaimsModel&&void 0!==e.dccClaimsModel.dispatchBranch)){switch(e.dccClaimsModel.dispatchBranch){case"On the Dot":e.set("isOnTheDotBranchVisible",!0),$("#DCCClaimDeliveryAddressPanel").show();break;default:e.set("isOnTheDotBranchVisible",!1),$("#DCCClaimDeliveryAddressPanel").hide(),e.clearAddressInformation(),e.dccClaimsModel.set("sameAsPhysical",void 0),e.dccClaimsModel.set("country",void 0),e.dccClaimsModel.set("province",void 0),e.dccClaimsModel.set("city",void 0),e.dccClaimsModel.set("suburb",void 0),e.dccClaimsModel.set("postalCode",void 0),e.dccClaimsModel.set("unitNumber",void 0),e.dccClaimsModel.set("buildingName",void 0),e.dccClaimsModel.set("streetNumber",void 0),e.dccClaimsModel.set("streetName",void 0)}switch(e.dccClaimsModel.dispatchBranch){case"Randburg":e.set("outcome","194");break;case"Durban Central":e.set("outcome","195");break;case"Durban Umhlanga":e.set("outcome","196");break;case"Capetown":e.set("outcome","197");break;case"On the Dot":e.set("outcome","199");break;case"Pretoria":e.set("outcome","198")}}}.observes("dccClaimsModel.dispatchBranch"),otherInsuranceChanged:function(){var e=this;e.set("isOtherInsuranceFieldsVisible",!1),void 0!==e.dccClaimsModel&&(e.dccClaimsModel.otherInsurance?(e.set("isOtherInsuranceFieldsVisible",!0),e.createDependentProperty("insurerNameValidator",[Komodo.UI.Validators.RequiredValidator]),e.createDependentProperty("insurerPolicyNumberValidator",[Komodo.UI.Validators.RequiredValidator])):(e.set("isOtherInsuranceFieldsVisible",!1),e.dccClaimsModel.set("otherInsurance",void 0),e.removeDependentProperty("insurerNameValidator"),e.removeDependentProperty("insurerPolicyNumberValidator"),e.dccClaimsModel.set("insurerName",void 0),e.dccClaimsModel.set("insurerPolicyNumber",void 0)))}.observes("dccClaimsModel.otherInsurance"),sameAsPhysicalChanged:function(){var e=this;void 0!==e.dccClaimsModel&&(e.dccClaimsModel.sameAsPhysical?e.getPhysicalAddressForCustomer():(e.clearAddressInformation(),e.dccClaimsModel.set("sameAsPhysical",void 0),e.dccClaimsModel.set("country",void 0),e.dccClaimsModel.set("province",void 0),e.dccClaimsModel.set("city",void 0),e.dccClaimsModel.set("suburb",void 0),e.dccClaimsModel.set("postalCode",void 0),e.dccClaimsModel.set("unitNumber",void 0),e.dccClaimsModel.set("buildingName",void 0),e.dccClaimsModel.set("streetNumber",void 0),e.dccClaimsModel.set("streetName",void 0)))}.observes("dccClaimsModel.sameAsPhysical"),clearFormData:function(){var e=this;e.clearDeliveryAddress(),e.clearClaimInformation(),e.clearDeviceInformation(),e.clearSetToStolenInformation(),e.clearCaseInformation()},clearCaseInformation:function(){var e=this;e.dccClaimsModel.set("interactionType",void 0),e.dccClaimsModel.set("queryType",void 0),e.dccClaimsModel.set("statusId",void 0),e.dccClaimsModel.set("priority",void 0),e.dccClaimsModel.set("category",void 0),e.dccClaimsModel.set("subCategory",void 0),e.dccClaimsModel.set("outcome",void 0)},clearDeviceInformation:function(){var e=this;e.dccClaimsModel.set("deviceNumber",void 0),e.dccClaimsModel.set("accountNumber",void 0),e.dccClaimsModel.set("deviceName",void 0),e.dccClaimsModel.set("smartcardNumber",void 0),e.dccClaimsModel.set("dccPolicyNumber",void 0)},clearSetToStolenInformation:function(){var e=this;e.dccClaimsModel.set("isSetToStolen",!1),e.dccClaimsModel.set("policeStation",void 0),e.dccClaimsModel.set("policeCaseNumber",void 0),e.dccClaimsModel.set("caseDateValue",void 0),e.dccClaimsModel.set("caseDate",void 0)},clearDeliveryAddress:function(){var e=this;e.dccClaimsModel.set("dispatchBranch",void 0),e.dccClaimsModel.set("sameAsPhysical",void 0),e.dccClaimsModel.set("country",void 0),e.dccClaimsModel.set("province",void 0),e.dccClaimsModel.set("city",void 0),e.dccClaimsModel.set("suburb",void 0),e.dccClaimsModel.set("postalCode",void 0),e.dccClaimsModel.set("unitNumber",void 0),e.dccClaimsModel.set("buildingName",void 0),e.dccClaimsModel.set("streetNumber",void 0),e.dccClaimsModel.set("streetName",void 0)},clearClaimInformation:function(){var e=this;e.dccClaimsModel.set("claimType",void 0),e.dccClaimsModel.set("dateOfTheft",void 0),e.dccClaimsModel.set("claimDate",void 0),e.dccClaimsModel.set("otherInsurance",void 0),e.dccClaimsModel.set("insurerName",void 0),e.dccClaimsModel.set("insurerPolicyNumber",void 0)},clearAddressInformation:function(){var e=this;e.get("addressInformation").set("isAddressOverride",!1),e.get("addressInformation").set("addressTypeText",""),e.get("addressInformation").set("addressType",Komodo.CanonicalValues.AddressTypes.Physical),e.get("addressInformation").set("postalCode",void 0),e.get("addressInformation").set("suburb",void 0),e.get("addressInformation").set("city",void 0),e.get("addressInformation").set("province",void 0),e.get("addressInformation").set("country",void 0),e.get("addressInformation").set("unit",void 0),e.get("addressInformation").set("building",void 0),e.get("addressInformation").set("streetNumber",void 0),e.get("addressInformation").set("privateBag",void 0),e.get("addressInformation").set("boxType",void 0),e.get("addressInformation").set("streetName",void 0),e.get("addressInformation").set("isPrimary",!1),e.get("addressInformation").set("isPrimaryString","No"),e.get("addressInformation").set("isMarketingEnabled",!1),e.get("addressInformation").set("isVerified",!1),e.get("addressInformation").set("addressString",void 0)},getDefaultValueIfEmpty:function(e){return void 0==e||null==e||""==e?"-":e},claimStatuslst:[],deviceNumberlst:[],claimTypelst:[],dispatchBranchlst:[],provincelst:[],suburblst:[],citylst:[],countrylst:[],postalCodelst:[],countriesWithCodes:[],customerInfo:void 0,dccClaimFileUploader:void 0,caseNumber:void 0,enableAddressOverRide:!1}),Komodo.Application.PerformSwapController=Komodo.UI.Controller.extend({_locale:"",_SAGrid:!1,_selectedRadioGridSA:null,_columnDeviceDataGrid:[],_columnQuoteDataGrid:[],_dropDownCategoryList:[],_dropDownReasonList:[],_dropDownCommunicationLanguageList:[],_dropDownCommunicationList:[],_cacheSwapDetail:[],_cacheQuotationStatus:[],_cacheHardwareModelDesc:[],init:function(){try{this._super(),Komodo.log("Constructing Initiate Swap controller."),this.set("processVersion","v1.1"),this.set("processName","Initiate Swap"),this.requiresDependency("_stockService",{singleton:Komodo.Services.stockService}),this.requiresDependency("_featureToggleService",{singleton:Komodo.Services.featureToggleService})}catch(e){this.getStockService().handleException("init - Initiate Swap",e,!0,!0)}},start:function(){this._super(),this.loadData()},stop:function(){this._super()},loadData:function(){try{var e=this;e._locale="locale.manageStock:performSwap.",this.registerModel("dataModel",Komodo.Models.PerformSwapModel),this.getStockService().setCustomerID(this,this.get("dataModel"),"customerID","/manageViewing",null),this.setupGrid(),this.registerValidations(),e._selectedRadioGridSA=null,e.clearCategory(),this.getStockService().fillObjectFromCachedFileService(this,"_cacheSwapDetail","SwapDetail",["SwapModels","SwapModel"]),this.getStockService().fillObjectFromCachedFileServiceArray(this,"_cacheQuotationStatus","QuotationStatus"),this.getStockService().fillObjectFromCachedFileServiceArray(this,"_cacheHardwareModelDesc","HardwareModel"),this.getStockService().setCountryISO(this.get("dataModel"),"countryISO",function(){e.retrieveHardware()}),Komodo.Services.featureToggleService.isEnabled("PerformSwap","SAGrid").done(function(t){Ember.run(function(){e.set("_SAGrid",t)})})}catch(e){this.getStockService().handleException("loadData",e,!0,!0)}},registerValidations:function(){var e=this;this.registerValidator(this.get("dataModel"),"commercialSerialNumber",{isRequired:!0,displayName:kl.value(e._locale+"fillDeviceSerial"),minLength:1,maxLength:21,groups:"commercial"})},selectedRow:function(){var e=this;try{$.each(e.get("dataModel.deviceData"),function(t,a){if(null!=a.checkItem&&1==a.checkItem)return e.dataModel.set("selectedDeviceGridItem",a),"embedded"==a.deviceType.toLowerCase()?e.dataModel.set("enablePairedDevice",!0):e.dataModel.set("enablePairedDevice",!1),e.clearSelectedData(),e.setCategory(),!1})}catch(e){this.getStockService().handleException("selectedRow",e,!0,!0)}}.observes("dataModel.deviceData.@each.checkItem"),clearSelectedData:function(){try{var e=this;void 0!==e.dataModel.get("boolPairedDevice")&&(e.dataModel.set("PairedDevice",kl.value(e._locale+"noLinkedDevice")),e.dataModel.set("DecoderSr",void 0),e.dataModel.set("SmartCardSr",void 0),e.dataModel.set("boolPairedDevice",!1))}catch(e){this.getStockService().handleException("clearSelectedData",e,!0,!0)}},clearCategory:function(){var e=this;e.dataModel.set("Category",""),e.dataModel.set("Reason",""),e.get("_dropDownCategoryList").clear(),e.get("_dropDownReasonList").clear()},setCategory:function(){try{var e=this;e.dataModel.set("Category",""),e.dataModel.set("Reason",""),e.get("_dropDownCategoryList").clear(),e.get("_dropDownReasonList").clear(),$.each(e.get("_cacheSwapDetail"),function(t,a){if(void 0!=e.dataModel.selectedDeviceGridItem&&null!=a.CanonicalValue&&a.CanonicalValue.toLowerCase()==e.dataModel.selectedDeviceGridItem.get("FromModel").toLowerCase())return $.each($.makeArray(a.SwapCategories.SwapCategory),function(t,a){e.get("_dropDownCategoryList").addObject(a)}),!1})}catch(e){this.getStockService().handleException("setCategory",e,!0,!0)}},actions:{generateSwapQuote:function(){try{var e=this;e.dataModel.set("boolAcceptQuoteView",!1),e.dataModel.set("showQuoteDetails",!1),e.dataModel.set("QuoteNumber",kl.value(e._locale+"noQuoteGenerated")),e.dataModel.set("QuoteStatus","---"),e.dataModel.get("quoteData").clear(),e.dataModel.set("isSendQuotationVisible",!1),void 0==this.dataModel.selectedDeviceGridItem?Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"performSwap"),"<strong>"+kl.value(e._locale+"pleaseSelectDevice")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"):void 0==this.dataModel.Category||""==this.dataModel.Category?Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"performSwap"),"<strong>"+kl.value(e._locale+"categoryRequired")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"):void 0==this.dataModel.Reason||""==this.dataModel.Reason?Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"performSwap"),"<strong>"+kl.value(e._locale+"reasonRequired")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"):this.publishGenerateSwapOrder()}catch(e){this.getStockService().handleException("generateSwapQuote",e,!0,!0)}},makePaymentSwap:function(){try{var e=this,t={QuoteNumber:e.dataModel.get("QuoteNumber"),Country:e.dataModel.get("countryISO"),FirstName:e.dataModel.get("firstName"),LastName:e.dataModel.get("lastName"),Email:e.dataModel.get("email"),phone:e.dataModel.get("phone")};Komodo.Services.eventAggregator.publish("PublishPaymentForQuotation",t)}catch(e){this.getStockService().handleException("makePayment",e,!0,!0)}},sendQuotationSwap:function(){try{var e=this;void 0==e.dataModel.get("communicationType")||""==e.dataModel.get("communicationType")?Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"sendQuotation"),kl.value(e._locale+"selectCommunication"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"):void 0==e.dataModel.get("communicationLanguage")||""==e.dataModel.get("communicationLanguage")?Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"sendQuotation"),kl.value(e._locale+"selectCommunicationLanguage"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"):e.publishSendQuotationEvent()}catch(e){this.getStockService().handleException("sendQuotation",e,!0,!0)}},searchDeviceSingle:function(){try{var e=this;if(!e.canSubmitData(e.get("dataModel"),"Serial Number",{group:"commercial",showInModal:!1}))return;e.retrieveHardware()}catch(e){this.getStockService().handleException("searchDeviceSingle",e,!0,!0)}},backDeviceSingle:function(){try{var e=this;Komodo.Services.busyService.start(!0,e.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,this._messageTimeout,"blocking",this),Komodo.Services.busyService.stop(e.get("processId"),"blocking"),this.transitionToRoute("/manageViewing")}catch(e){this.getStockService().handleException("backDeviceSingle",e,!0,!0)}}},sendQuotationChanged:function(){try{var e=this,t=null!=e.dataModel.get("communicationLanguage")&&null!=e.dataModel.get("communicationType");e.dataModel.set("isSendQuotationVisible",t),e.dataModel.set("BoolAcceptQuoteButton",!t)}catch(e){this.getStockService().handleException("sendQuotationChanged",e,!0,!0)}}.observes("dataModel.communicationType","dataModel.communicationLanguage"),getPairedDevice:function(){var e=this;if(void 0!==this.dataModel.get("boolPairedDevice"))if(void 0!==this.dataModel.get("boolPairedDevice")&&!1!==this.dataModel.get("boolPairedDevice"))if(void 0!==this.dataModel.selectedDeviceGridItem)if("decoder"==this.dataModel.selectedDeviceGridItem.get("deviceType").toLowerCase()||"embedded"==this.dataModel.selectedDeviceGridItem.get("deviceType").toLowerCase())if(this.dataModel.set("DecoderSr",this.dataModel.selectedDeviceGridItem.get("deviceSerialNo")),this.dataModel.set("DecoderProduct",this.dataModel.selectedDeviceGridItem.get("FromProductName")),this.dataModel.set("DecoderModel",this.dataModel.selectedDeviceGridItem.get("FromModel")),this.dataModel.set("DecoderWarranty",this.dataModel.selectedDeviceGridItem.get("DeviceWarranty")),void 0!==this.dataModel.selectedDeviceGridItem.get("LinkedSC")&&""!=this.dataModel.selectedDeviceGridItem.get("LinkedSC")){this.dataModel.set("SmartCardSr",this.dataModel.selectedDeviceGridItem.get("LinkedSC")),this.dataModel.set("SmartCardModel",this.dataModel.selectedDeviceGridItem.get("LinkedSCModel")),this.dataModel.set("PairedDevice",this.dataModel.selectedDeviceGridItem.get("LinkedSC"));for(var t=0;t<this.dataModel.deviceData.length;t++)if(this.dataModel.selectedDeviceGridItem.get("LinkedSC")==this.dataModel.deviceData[t].deviceSerialNo)return void this.dataModel.set("SmartCardProduct",this.dataModel.deviceData[t].FromProductName)}else this.dataModel.set("PairedDevice",kl.value(e._locale+"noLinkedDevice")),this.dataModel.set("SmartCardSr",kl.value(e._locale+"noLinkedDevice")),this.dataModel.set("SmartCardModel",""),this.dataModel.set("SmartCardProduct","");else{this.dataModel.set("SmartCardSr",this.dataModel.selectedDeviceGridItem.get("deviceSerialNo")),this.dataModel.set("SmartCardModel",this.dataModel.selectedDeviceGridItem.get("FromModel")),this.dataModel.set("SmartCardProduct",this.dataModel.selectedDeviceGridItem.get("FromProductName"));for(var t=0;t<this.dataModel.deviceData.length;t++)if(this.dataModel.selectedDeviceGridItem.get("deviceSerialNo")==this.dataModel.deviceData[t].LinkedSC)return this.dataModel.set("PairedDevice",this.dataModel.deviceData[t].deviceSerialNo),this.dataModel.set("DecoderSr",this.dataModel.deviceData[t].deviceSerialNo),this.dataModel.set("DecoderModel",this.dataModel.deviceData[t].FromModel),this.dataModel.set("DecoderProduct",this.dataModel.deviceData[t].FromProductName),void this.dataModel.set("DecoderWarranty",this.dataModel.deviceData[t].DeviceWarranty);void 0!==this.dataModel.get("DecoderSr")&&""!=this.dataModel.set("DecoderSr")||(this.dataModel.set("PairedDevice",kl.value(e._locale+"noLinkedDevice")),this.dataModel.set("DecoderSr",this.dataModel.get("SmartCardSr")),this.dataModel.set("DecoderProduct",this.dataModel.get("SmartCardProduct")),this.dataModel.set("DecoderModel",this.dataModel.get("SmartCardSr")),this.dataModel.set("DecoderWarranty","In-Active"))}else this.dataModel.set("boolPairedDevice",!1),Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"branchSwap"),"<strong>"+kl.value(e._locale+"pleaseSelectDevice")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning");else void 0!==this.dataModel.selectedDeviceGridItem&&(this.dataModel.set("DecoderSr",""),this.dataModel.set("DecoderProduct",""),this.dataModel.set("DecoderModel",""),this.dataModel.set("DecoderWarranty","In-Active"),this.dataModel.set("SmartCardSr",""),this.dataModel.set("SmartCardModel",""),this.dataModel.set("SmartCardProduct",""),this.dataModel.set("PairedDevice",""))}.observes("dataModel.boolPairedDevice"),getHardwareModelDesc:function(e){try{var t=this,a=null;return $.each(t._cacheHardwareModelDesc,function(t,o){if(o.key==e)return a=o.value,!1}),Komodo.log("Data not found in function [getHardwareModelDesc] for hardwareModelID: "+e),a}catch(e){this.handleException("getHardwareModelDesc",e,!0,!0)}},categoryChanged:function(){try{var e=this;this.dataModel.set("Reason",""),this.set("_dropDownReasonList",[]),$.each(e.get("_dropDownCategoryList"),function(t,a){if(e.dataModel.get("Category")==a.CanonicalKey)return $.each($.makeArray(a.SwapReasons.SwapReason),function(t,a){e.get("_dropDownReasonList").addObject(a)}),!1})}catch(e){this.getStockService().handleException("categoryChanged",e,!0,!0)}}.observes("dataModel.Category"),rowSAChanged:function(){try{var e=this;if(e.get("_SAGrid")&&null!=_selectedRadioGridSA){var t=e._selectedRadioGridSA.split("_");switch(e.clearSelectedData(),t[0]){case"smartcard":e.dataModel.get("deviceData").forEach(function(a){"smartcard"==a.deviceType.toLowerCase()&&e.dataModel.get("deviceData")[t[1]].LinkedSC==a.deviceSerialNo&&e.dataModel.set("selectedDeviceGridItem",a)}),e.setCategory(),e.set("dataModel.boolPairedDevice",!1);break;case"device":e.dataModel.get("deviceData").forEach(function(a){"decoder"!=a.deviceType.toLowerCase()&&"embedded"!=a.deviceType.toLowerCase()||e.dataModel.get("deviceData")[t[1]].deviceSerialNo!=a.deviceSerialNo||e.dataModel.set("selectedDeviceGridItem",a)}),e.setCategory(),e.set("dataModel.boolPairedDevice",!1);break;case"paired":e.dataModel.get("deviceData").forEach(function(a){"decoder"==a.deviceType.toLowerCase()&&e.dataModel.get("deviceData")[t[1]].deviceSerialNo==a.deviceSerialNo&&e.dataModel.set("selectedDeviceGridItem",a)}),e.setCategory(),e.set("dataModel.boolPairedDevice",!0)}}}catch(e){this.getStockService().handleException("categoryChanged",e,!0,!0)}}.observes("_selectedRadioGridSA"),getStockService:function(){return this.get("_stockService")},getFeatureToggleService:function(){return this.get("_featureToggleService")},retrieveHardware:function(){try{var e=this;this.getStockService().loadSingleDevice()&&null==e.dataModel.get("commercialSerialNumber")?this.getStockService().getUIService().showModalPopup("Commercial customer",void 0,{view:Komodo.Application.RetrieveHardwareSingleView,canUserClose:!1,context:this,shouldStartAndStopController:!1}):this.getStockService().retrieveHardware(this,e.get("processId"),e.dataModel.get("countryISO"),e.dataModel.get("customerID"),e.dataModel.get("commercialSerialNumber"),!0,function(t){var a=Komodo.canonicalFacadeFactory(t.Payload,["ListOfHardware"]);e.dataModel.deviceData.clear();var o,s=a.get("ListOfHardware");if(o=$.makeArray(s),!(o.length>0))return Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"noDevicesLoaded"),kl.value(e._locale+"customerWithDevicesRequired"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"),void this.transitionToRoute("/manageViewing");if(null!=s){var r=0;o.forEach(function(t){if(null!=t){var a=null;if(null!=t.ProductDetail&&(a=e.getHardwareModelDesc(t.ProductDetail.UID)),null==a&&(a=t.ProductDetail.Model),e.dataModel.get("deviceData").pushObject(Komodo.Models.HardwaresDataGridMVModel.create({HardwareModelDesc:a,deviceSerialNo:t.SerialNumber,deviceStatus:t.Status,LinkedSC:t.LinkedSmartcard,DeviceWarranty:t.WarrantyStatus,LinkedSCModel:null!=t.SmartcardDetail?t.SmartcardDetail.Model:void 0,FromProductName:null!=t.ProductDetail?t.ProductDetail.Name:void 0,FromModel:null!=t.ProductDetail?t.ProductDetail.Model:void 0,UID:null!=t.ProductDetail?t.ProductDetail.UID:void 0,deviceType:null!=t.ProductDetail?t.ProductDetail.Type:void 0,InsuranceStatus:null!=t.InsuranceStatus?t.InsuranceStatus:void 0,insuranceStartDate:null!=t.InsuranceStartDate?e.getStockService().formatDateForDatePicker(t.InsuranceStartDate,0):void 0})),e.get("_SAGrid")&&null!=t.ProductDetail&&null!=t.ProductDetail.Type&&"smartcard"!=t.ProductDetail.Type.toLowerCase()){var o=[];o.push({title:"Device",value:"device_"+r}),null!=t.ProductDetail&&null!=t.ProductDetail.Type&&"embedded"!=t.ProductDetail.Type.toLowerCase()&&null!=t.LinkedSmartcard&&(o.push({title:"Smartcard",value:"smartcard_"+r}),o.push({title:"Paired",value:"paired_"+r})),e.dataModel.get("SAGridData").pushObject(Komodo.Models.HardwaresDataGridMVModel.create({HardwareModelDesc:a,deviceSerialNo:t.SerialNumber,deviceStatus:t.Status,LinkedSC:t.LinkedSmartcard,DeviceWarranty:t.WarrantyStatus,LinkedSCModel:null!=t.SmartcardDetail?t.SmartcardDetail.Model:void 0,FromProductName:null!=t.ProductDetail?t.ProductDetail.Name:void 0,FromModel:null!=t.ProductDetail?t.ProductDetail.Model:void 0,UID:null!=t.ProductDetail?t.ProductDetail.UID:void 0,deviceType:null!=t.ProductDetail?t.ProductDetail.Type:void 0,InsuranceStatus:null!=t.InsuranceStatus?t.InsuranceStatus:void 0,insuranceStartDate:null!=t.InsuranceStartDate?e.getStockService().formatDateForDatePicker(t.InsuranceStartDate,0):void 0,radioType:o}))}r++}})}else Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"branchSwap"),"<strong>"+kl.value(e._locale+"noDeviceFound")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")})}catch(e){Komodo.Controls.MessageBoxController.show("Error","Error: "+e,Komodo.Controls.MessageBoxOkButtons,this,"retrieveHardwareError","danger")}},setupGrid:function(){try{var e=this;e._columnDeviceDataGrid=[Komodo.Controls.DataGridColumn.create({name:"HardwareModelDesc",title:kl.value(e._locale+"deviceName"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"deviceSerialNo",title:kl.value(e._locale+"deviceNumber"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"deviceStatus",title:kl.value(e._locale+"deviceStatus"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"InsuranceStatus",title:kl.value(e._locale+"insurance"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"insuranceStartDate",title:kl.value(e._locale+"insuranceStartDate"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"LinkedSC",title:kl.value(e._locale+"linkedSmartcard"),width:"120px"}),Komodo.Controls.DataGridRadioButtonColumn.create({name:"checkItem",title:kl.value(e._locale+"swap"),displayType:"radiobutton",canEdit:!0,isAlwaysEditing:!0,width:"50px"})],e._columnQuoteDataGrid=[Komodo.Controls.DataGridColumn.create({name:"ToProductName",title:kl.value(e._locale+"item"),width:"100px"}),Komodo.Controls.DataGridColumn.create({name:"productQuantity",title:kl.value(e._locale+"quantity"),width:"80px"}),Komodo.Controls.DataGridColumn.create({name:"subscriptionCost",title:kl.value(e._locale+"subscriptionCost"),width:"80px"}),Komodo.Controls.DataGridColumn.create({name:"deviceCost",title:kl.value(e._locale+"deviceCost"),width:"80px"}),Komodo.Controls.DataGridColumn.create({name:"totalTax",title:kl.value(e._locale+"tax"),width:"80px"}),Komodo.Controls.DataGridColumn.create({name:"totalPrice",title:kl.value(e._locale+"total"),width:"80px"})]}catch(e){this.getStockService().handleException("setupGrid",e,!0,!0)}},setQuotationStatus:function(e){try{var t=this;$.each(this._cacheQuotationStatus,function(a,o){if(o.key==e)return void t.dataModel.set("QuoteStatus",o.value)})}catch(e){this.getStockService().handleException("getQuotationStatus",e,!0,!0)}},publishGenerateSwapOrder:function(e){try{var t=this,a=Komodo.Models.GenerateSwapOrder.create();a.Hardware.ProductDetail=Komodo.Models.ProductDetail.create(),a.set("Username",Komodo.Services.securityService.get("session.domainUserName").substring(3)),a.set("OrderType","SWAP"),a.set("CustomerID",this.dataModel.get("customerID")),a.set("LocationID",0),a.set("Country",this.dataModel.get("countryISO")),a.set("RepairCategoryDescription",this.dataModel.get("Category")),a.set("RepairReasonDescription",this.dataModel.get("Reason")),void 0!==this.dataModel.get("boolPairedDevice")&&!1!==this.dataModel.get("boolPairedDevice")&&this.dataModel.get("PairedDevice")!=kl.value(t._locale+"noLinkedDevice")?(a.Hardware.set("SerialNumber",this.dataModel.get("DecoderSr")),a.Hardware.set("WarrantyStatus",this.dataModel.get("DecoderWarranty")),a.Hardware.ProductDetail.set("Model",this.dataModel.get("DecoderModel")),a.Hardware.ProductDetail.set("Name",this.dataModel.get("DecoderProduct")),a.Hardware.ProductDetail.set("Type","DECODER"),void 0!==this.dataModel.get("SmartCardSr")&&(a.Hardware.set("LinkedSmartcard",this.dataModel.get("SmartCardSr")),a.Hardware.SmartcardDetail.set("Model",this.dataModel.get("SmartCardModel")),"embedded"==this.dataModel.selectedDeviceGridItem.get("deviceType").toLowerCase()?(a.Hardware.SmartcardDetail.set("Type","EMBEDDED"),a.Hardware.SmartcardDetail.set("Name",this.dataModel.get("SmartCardModel"))):(a.Hardware.SmartcardDetail.set("Type","SMARTCARD"),a.Hardware.SmartcardDetail.set("Name",this.dataModel.get("SmartCardProduct"))))):"embedded"==this.dataModel.selectedDeviceGridItem.get("deviceType").toLowerCase()?(a.Hardware.set("SerialNumber",this.dataModel.selectedDeviceGridItem.get("deviceSerialNo")),a.Hardware.set("LinkedSmartcard",this.dataModel.selectedDeviceGridItem.get("LinkedSC")),a.Hardware.set("WarrantyStatus",this.dataModel.selectedDeviceGridItem.get("DeviceWarranty")),a.Hardware.ProductDetail.set("Model",this.dataModel.selectedDeviceGridItem.get("FromModel")),a.Hardware.ProductDetail.set("Name",this.dataModel.selectedDeviceGridItem.get("FromProductName")),a.Hardware.ProductDetail.set("Type",this.dataModel.selectedDeviceGridItem.get("deviceType")),a.Hardware.SmartcardDetail.set("Model",this.dataModel.selectedDeviceGridItem.get("LinkedSCModel")),a.Hardware.SmartcardDetail.set("Name",this.dataModel.selectedDeviceGridItem.get("LinkedSCModel")),a.Hardware.SmartcardDetail.set("Type","EMBEDDED")):(a.Hardware.set("SerialNumber",this.dataModel.selectedDeviceGridItem.get("deviceSerialNo")),"smartcard"==this.dataModel.selectedDeviceGridItem.get("deviceType").toLowerCase()?a.Hardware.set("WarrantyStatus","InActive"):a.Hardware.set("WarrantyStatus",this.dataModel.selectedDeviceGridItem.get("DeviceWarranty")),a.Hardware.ProductDetail.set("Model",this.dataModel.selectedDeviceGridItem.get("FromModel")),a.Hardware.ProductDetail.set("Name",this.dataModel.selectedDeviceGridItem.get("FromProductName")),a.Hardware.ProductDetail.set("Type",this.dataModel.selectedDeviceGridItem.get("deviceType"))),this.getStockService().publishRequestOnBus(this,this.get("processId"),a,"GenerateSwapOrder","v1")}catch(e){this.getStockService().handleException("publishGenerateSwapOrder",e,!0,!0)}},publishAcceptQuoteEvent:function(){try{var e,t=this,a={ListOfQuotationLineItem:this.oQuote.ListOfQuotationLineItem,Status:this.oQuote.Status,TotalPrice:this.oQuote.TotalPrice,UID:this.oQuote.UID};e=Komodo.Models.QuotationAccepted.create();var o=Komodo.canonicalFacadeFactory(e,["Country","LocationID","Quotation"]);o.set("Country",t.dataModel.get("countryISO")),o.set("LocationID",0),o.set("Quotation",a),this.getStockService().publishRequestOnBus(this,this.get("processId"),e,"AcceptQuotation","v1")}catch(e){this.getStockService().handleException("publishAcceptQuoteEvent",e,!0,!0)}},publishSendQuotationEvent:function(){var e,t,a=this;e=Komodo.Models.SendQuotation.create();var o=Komodo.canonicalFacadeFactory(e,["Country","QuotationUID","CommunicationType","CommunicationLanguage"]);o.set("Country",a.dataModel.get("countryISO")),o.set("QuotationUID",this.dataModel.get("QuoteNumber")),o.set("CommunicationType",this.dataModel.get("communicationType")),o.set("CommunicationLanguage",this.dataModel.get("communicationLanguage")),t=new Komodo.Services.QuotationService,this.startNewProcess();var t=Komodo.Services.customerProfileService,s=kl.value(a._locale+"sendQuotation");t.publishEvent(this,e,"SendQuotation","v1").done(function(){Komodo.log(s+" "+kl.value(a._locale+"quotationSuccessfully")),Komodo.Controls.MessageBoxController.show(s," "+kl.value(a._locale+"quotationSuccessfully"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","success")}).fail(function(e){Komodo.log(s+" Unable to send Quotation"),Komodo.Controls.MessageBoxController.show(s,e,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")})},messageSwapOrderGeneratedReceived:function(e){Komodo.Services.busyService.stop(this.get("processId"),"blocking");var t=this;Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"branchSwap"),"<strong>"+kl.value(t._locale+"quotationGenSuccessfully")+"</strong>"+e.ResponseMessage.Payload.Quotation.UID,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","success");var a=(Komodo.Models.Quotation.create(),e.ResponseMessage.Payload);if(void 0!=a.Quotation.ListOfQuotationLineItem){var o=Komodo.canonicalFacadeFactory(a,["Quotation_ListOfQuotationLineItem_QuotationLineItem","Quotation_UID","Quotation_CreateDate","Quotation_ExpiryDate","Quotation_AffectedAgreementIdentifier","Quotation_LeadUID","Quotation_TotalPrice","Quotation_TotalPrice_ListOfTax","Quotation_Status","Quotation_TermOfPayment","Quotation_StatusReason","Quotation_FollowupFlag","Lead_PersonalDetail_FirstName","Lead_PersonalDetail_Surname","Lead_ListOfPhoneNumber_PhoneNumber_Number","Lead_ListOfPhoneNumber_PhoneNumber_Code","Lead_ListOfEmail_Email_Value"]);this.set("oQuote",e.ResponseMessage.Payload.Quotation);var s,r=o.get("Quotation_ListOfQuotationLineItem_QuotationLineItem");if(s=$.makeArray(r),s.length>0){t.dataModel.quoteData.clear();var n=0,i=0,c=0,l=0;void 0!==o.get("Quotation_Status")&&(t.setQuotationStatus(o.get("Quotation_Status")),this.dataModel.set("BoolAcceptQuoteButton",!1)),t.dataModel.set("showQuoteDetails",!0),this.dataModel.set("QuoteNumber",o.get("Quotation_UID")),s.forEach(function(e){if(void 0!=e&&void 0!=e.Product){var a=Komodo.Models.HardwaresDataGridMVModel.create();if(a.set("ToProductName",e.Product.Details.Name),a.set("productQuantity",e.Quantity),n+=parseInt(e.Quantity,10),"hardware"===e.Product.Details.Type.toLowerCase()&&(a.set("deviceCost",e.QuotedUnitPrice.ValueWithoutTax),a.set("subscriptionCost",void 0),i=parseFloat(i)+parseFloat(e.QuotedUnitPrice.ValueWithoutTax),void 0!==e.QuotedUnitPrice.ListOfTax)){var o=$.makeArray(e.QuotedUnitPrice.ListOfTax),s=0;o.forEach(function(e){s=parseFloat(s)+parseFloat(e.Amount)}),a.set("totalTax",parseFloat(s).toFixed(2)),c=parseFloat(c)+parseFloat(s)}void 0!=e.TotalPrice&&(a.set("totalPrice",parseFloat(e.TotalPrice.Value).toFixed(2)),l+=parseFloat(e.TotalPrice.Value)),t.dataModel.get("quoteData").pushObject(a)}}),0==l&&(Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"swap"),"<strong>"+kl.value(t._locale+"noNeedAcceptPayment")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","success"),t.dataModel.set("BoolAcceptQuoteButton",!0)),t.dataModel.get("quoteData").pushObject(Komodo.Models.HardwaresDataGridMVModel.create({ToProductName:"This Quote is in "+$.makeArray(e.ResponseMessage.Payload.Quotation)[0].TotalPrice.CurrencyCode,productQuantity:n,subscriptionCost:"0.00",deviceCost:parseFloat(i).toFixed(2),totalTax:parseFloat(c).toFixed(2),totalPrice:parseFloat($.makeArray(e.ResponseMessage.Payload.Quotation)[0].TotalPrice.Value).toFixed(2)}))}else Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"swap"),"<strong>"+kl.value(t._locale+"noQuotationsFound")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger");this.set("_dropDownCommunicationList",[]),this.set("_dropDownCommunicationLanguageList",[]),t.get("_dropDownCommunicationLanguageList").addObject({Key:"1",Value:"English"}),t.get("_dropDownCommunicationLanguageList").addObject({Key:"2",Value:"Afrikaans"}),t.get("_dropDownCommunicationLanguageList").addObject({Key:"3",Value:"French"}),
t.get("_dropDownCommunicationLanguageList").addObject({Key:"4",Value:"Portuguese"}),t.get("_dropDownCommunicationList").addObject({Key:"Email",Value:"Email"}),t.get("_dropDownCommunicationList").addObject({Key:"SMS",Value:"SMS"}),t.dataModel.set("boolAcceptQuoteView",!0),t.dataModel.set("isButtonVisible",!0)}else Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"swap"),"<strong"+kl.value(t._locale+"noQuotationsFound")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")},messageQuotationStatusUpdatedReceived:function(e){try{Komodo.Services.busyService.stop(this.get("processId"),"blocking");var t=this,a=Komodo.canonicalFacadeFactory(e.ResponseMessage.Payload,["ListOfProduct_Product","Status"]),o=(a.get("ListOfProduct_Product"),a.get("Status"));if(t.dataModel.set("QuoteStatus","Accepted"),"Accepted"==o){Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"acceptQuotations"),"<strong>"+kl.value(t._locale+"quotationAcceptedSuccessfully")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","success").response=function(e){"ok"==e&&t.transitionToRoute("/manageViewing")},t.dataModel.set("BoolAcceptQuoteButton",!0)}else Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"acceptQuotations"),"<strong>"+kl.value(t._locale+"acceptQuotationFailed")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"),t.dataModel.set("BoolAcceptQuoteButton",!1)}catch(e){this.getStockService().handleException("messageQuotationStatusUpdatedReceived",e,!0,!0)}},messageReceived:function(e){this.getStockService().messageReceived(e)},messageDeliveryFailure:function(e){this.getStockService().messageDeliveryFailure(e)},messageFault:function(e){this.getStockService().messageFault(e)},messageFailureMessageEventReceived:function(e){this.getStockService().messageFailureMessageEventReceived(this.get("processId"),e)},messageHandle:function(e,t){this.getStockService().messageHandle(this.get("processId"),e)}}),Komodo.Application.CancelPackagesController=Komodo.UI.Controller.extend({_localeBase:"locale.associateProducts:associateProducts.",cancellationPermissionForDPP:"clarity://CancelPackages/Allowed",ImmediatecancellationPermissionForDCC:"clarity://CancelPackages/AllowedImmediateDCCCancellation",ScheduleCancellationPermissionforDCC:"clarity://CancelPackages/AllowedScheduleDCCCancellation",CancellationPermissionforDCCOnly:"clarity://CancelPackages/AllowedDCCCancelOnly",init:function(){Komodo.log("Constructing Cancel controller"),this.set("processVersion","v1.1"),this.set("processName","Cancel"),this.set("smartcardsList",[]),this.set("reasonCodesList",[]),this.set("notesArray",[]),this.set("isFieldDisabled",!0),this.set("hardwareAndServicesArray",[]),this.set("deviceAndServicesToDisconnect",void 0),this.set("packagesToDisconnect",[]),this.set("packagesToReconnectStatus",[]),this.set("reconnectionDate",[]),this.set("disconnectionDateOfServices",[]),this.set("prinCUD",void 0),this.set("serviceDisconnectStatus",[]),this.set("requestArrayReconnect",[]),this.set("reconnectNotes",""),this.set("serviceReconnectStatus",[]),this.set("reconnectError",""),this.set("suspendOrCancel",[]),this.set("isInitialised","false"),this.set("isScheduleSuspensionDisabled",!1),this.set("allowAnnualSubscriberOnly",!1),this.set("isCancellationAllowed",!1),this.set("dppSmartcardsArray",[]),this.set("NoRoleBasedDCCCancellation",!1),this.set("dissableBindingCancelReason",!0),this._super()},start:function(){var e=this;e.initializeCancelPackagesConstants(),e.set("isCancelPackage",!1),e.set("isSuspendPackage",!1),e.set("isDCCImmediateCancellationAllowed",!1),e.set("isDCCScheduleCancellationAllowed",!1),e.set("disableOtherProductsthanDCC",!1),e.set("sharedObject",Komodo.Application.ManageViewingSharedObjectController.create()),e.registerModel("cancelPackagesModel",Komodo.Models.CancelPackagesModel),e.registerValidation(),e.set("helperFunction",Komodo.Services.ProductAndServiceMaintenanceHelper.create());var t=e.helperFunction.isCustomerIdIsAvailableToRetriveData();e.cancelPackagesModel.set("isCancel","true"),e.cancelPackagesModel.set("isScheduleCancellationDisabled",!1),e.setIsScheduleSuspensionDisabled(),e.setAllowAnnualSubscriberOnly(),e.setIsCancellationAllowed(),e.checkImmediateDCCCancellationPermision(),e.setIsDPPHardwareAndBundleProductAllowed(),e.getLookUpData().done(function(){if(!t)return void Komodo.Controls.MessageBoxController.show(kl.value(e.localeCancel+"noCustomer"),kl.value(e.localeCancel+"noFound"));e.setSuspendOrCancelArray(),e.bindPackagesInformation(),e.set("isInitialised","true")}),e.set("searchPlaceHolder",kl.value("locale.onlinetill:customer.searchPlaceholder")),e._super()},initializeCancelPackagesConstants:function(){this.set("ADDON_CATEGORY",GetClarityConstants("ManageViewingConstants","productsConstants.products.ADDON_CATEGORY").toString()),this.set("DPP_ADDON_CATEGORY",GetClarityConstants("ManageViewingConstants","productsConstants.products.DPP_ADDON_CATEGORY").toString()),this.set("PRINCIPAL_CATEGORY",GetClarityConstants("ManageViewingConstants","productsConstants.products.PRINCIPAL_CATEGORY").toString()),this.set("DPP_CATEGORY",GetClarityConstants("ManageViewingConstants","productsConstants.products.DPP_CATEGORY").toString()),this.set("DCCStatus",GetClarityConstants("ManageViewingConstants","manageViewingConstants.cancel.DCCStatus")||[""]),this.set("quarterlyProducts",GetClarityConstants("ManageViewingConstants","manageViewingConstants.suspend.quarterlyProducts")||[""]),this.set("SplPrincipalpackagesList",GetClarityConstants("ManageViewingConstants","manageViewingConstants.suspend.SPLproductIDs")||[""]),this.set("CancellationReasons",GetClarityConstants("ManageViewingConstants","manageViewingConstants.cancel.CancellationReasons")||[""]),this.set("CancellationMsgStopAgreement",GetClarityConstants("ManageViewingConstants","manageViewingConstants.cancel.CancellationMsgStopAgreement")||[""]),this.set("CancellationMsgImmigration",GetClarityConstants("ManageViewingConstants","manageViewingConstants.cancel.CancellationMsgImmigration")||[""])},uninitializeCancelPackagesConstants:function(){this.set("ADDON_CATEGORY",void 0),this.set("DPP_ADDON_CATEGORY",void 0),this.set("PRINCIPAL_CATEGORY",void 0),this.set("DPP_CATEGORY",void 0),this.set("DCCStatus",void 0),this.set("quarterlyProducts",void 0),this.set("SplPrincipalpackagesList",void 0),this.set("CancellationReasons",void 0),this.set("CancellationMsgStopAgreement",void 0),this.set("CancellationMsgImmigration",void 0)},getLookUpData:function(){var e=this,t=$.Deferred();return Komodo.UI.cacheDataService.getHardwareCpc(),Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(){Komodo.Services.cachedDataService.fetch("ProductTypeAndCategoryAndProductDetail").done(function(a){e.set("productTypeAndCategoryAndProductDetail",[]),e.set("productTypeAndCategoryAndProductDetail",JSON.parse(a).UICategories.UICategory),t.resolve()}).fail(function(e){Komodo.error("[ERROR] :"+e)})}).fail(function(t){Komodo.error(kl.value(e.localeCancel+"CDMDataNotFound")+t)}),t},setIsCancellationAllowed:function(){var e=this;e.set("isCancellationAllowed",!1),e.cancelPackagesModel.set("isScheduleCancellationDisabled",!1),Komodo.Services.featureToggleService.isEnabled("ManageViewing","CheckCancellationRoleForDPP").done(function(t){t&&(Komodo.Services.securityService.hasPermission(e.cancellationPermissionForDPP)?(e.set("isCancellationAllowed",!0),e.cancelPackagesModel.set("isScheduleCancellationDisabled",!0)):(e.set("isCancellationAllowed",!1),e.cancelPackagesModel.set("isScheduleCancellationDisabled",!1)))}).fail(function(e){Komodo.error("[ERROR] : could not retrieve CheckCancellationRoleForDPP domain = "+Komodo.Services.queryService.getSelectedCountryId()+"/ qualifier = "+language),Komodo.error("[ERROR] : "+e)})},setIsScheduleSuspensionDisabled:function(){var e=this;e.set("isScheduleSuspensionDisabled",!1),Komodo.Services.featureToggleService.isEnabled("ManageViewing","IsScheduleSuspensionDisabled").done(function(t){e.set("isScheduleSuspensionDisabled",t)}).fail(function(e){Komodo.error("[ERROR] : could not retrieve IsScheduleSuspensionDisabled domain = "+Komodo.Services.queryService.getSelectedCountryId()+"/ qualifier = "+language),Komodo.error("[ERROR] : "+e)})},setAllowAnnualSubscriberOnly:function(){var e=this;e.set("allowAnnualSubscriberOnly",!0),Komodo.Services.featureToggleService.isEnabled("ManageViewing","AllowAnnualSubscriberOnly").done(function(t){e.set("allowAnnualSubscriberOnly",t)}).fail(function(e){Komodo.error("[ERROR] : could not retrieve allowAnnualSubscriberOnly domain = "+Komodo.Services.queryService.getSelectedCountryId()+"/ qualifier = "+language),Komodo.error("[ERROR] : "+e)})},setIsDPPHardwareAndBundleProductAllowed:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("ManageViewing","IsDPPHardwareAndBundleProductAllowed").done(function(t){e.set("isDPPHardwareAndBundleProductAllowed",t)}).fail(function(e){Komodo.error("[ERROR] : could not retrieve IsDPPHardwareAndBundleProductAllowed domain = "+Komodo.Services.queryService.getSelectedCountryId()+"/ qualifier = "+language),Komodo.error("[ERROR] : "+e)})},setSuspendOrCancelArray:function(){this.get("suspendOrCancel").clear(),this.get("suspendOrCancel").addObject({title:kl.value(this.localeCancel+"Cancelrdbtn"),value:"true"}),this.get("suspendOrCancel").addObject({title:kl.value(this.localeCancel+"Suspendrdbtn"),value:"false"})},registerValidation:function(){this.registerValidator(this.get("cancelPackagesModel"),"isDisconnectAll",{type:"bool",displayName:"Disconnect All",isRequired:!1}),this.registerValidator(this.get("cancelPackagesModel"),"dateDisconnectAll",{type:"date",displayName:"Disconnect All Date",isRequired:!1}),this.registerValidator(this.get("cancelPackagesModel"),"isScheduleReconnection",{type:"bool",displayName:"Schedule Reconnection",isRequired:!1}),this.registerValidator(this.get("cancelPackagesModel"),"searchDeviceText",{type:"string",displayName:kl.value("locale.manageviewing:cancelPackages.smartcardDevice"),minLength:7,maxLength:10,functions:Komodo.UI.Validators.alphanumericValidator})},checkImmediateDCCCancellationPermision:function(){var e=this;e.set("isDCCImmediateCancellationAllowed",!1),e.set("isDCCScheduleCancellationAllowed",!1),e.set("disableOtherProductsthanDCC",!1),e.set("NoRoleBasedDCCCancellation",!1),Komodo.Services.featureToggleService.isEnabled("ManageViewing","cancelDCCPermission").done(function(t){if(t)return Komodo.Services.securityService.hasPermission(e.ImmediatecancellationPermissionForDCC)&&e.set("isDCCImmediateCancellationAllowed",!0),Komodo.Services.securityService.hasPermission(e.ScheduleCancellationPermissionforDCC)&&e.set("isDCCScheduleCancellationAllowed",!0),void(Komodo.Services.securityService.hasPermission(e.CancellationPermissionforDCCOnly)&&e.set("disableOtherProductsthanDCC",!0));e.set("NoRoleBasedDCCCancellation",!0)}).fail(function(e){Komodo.error("[ERROR] : could not retrieve allowAnnualSubscriberOnly domain = "+Komodo.Services.queryService.getSelectedCountryId()+"/ qualifier = "+language),Komodo.error("[ERROR] : "+e)})},submitDisconnectServices:function(e){for(var t=this,a=t.get("sharedObject"),o=[],s=[],r=[],n=0,i=0,c="",l=GetReason("CancellationReasons","Cancel_Product"),d=l,u=GetReason("CancellationReasons","Cancel_Dpp_Product"),h=0;h<t.dppSmartcardsArray.length;h++)null!==e.linkedSmartCard&&void 0!==e.linkedSmartCard&&""!==e.linkedSmartCard&&e.linkedSmartCard===t.dppSmartcardsArray[h]&&t.cancelPackagesModel.set("dppServiceAvailable",!0);if(t.cancelPackagesModel.get("dppServiceAvailable")?t.cancelPackagesModel.set("reasonForCancellation",u):t.cancelPackagesModel.set("reasonForCancellation",l),t.cancelPackagesModel.get("isDisconnectAll")){var m=kl.value(this.localeCancel+"cancelConfirmMsg1");if(t.cancelPackagesModel.princPre)for(var g=0;g<e.listOfPrincipalServices.length;g++)if(null!==t.cancelPackagesModel.dateDisconnectAll&&""!==t.cancelPackagesModel.dateDisconnectAll&&void 0!==t.cancelPackagesModel.dateDisconnectAll)if(t.cancelPackagesModel.dateDisconnectAll.toDateString()===(new Date).toDateString()){m+=e.listOfPrincipalServices[g].serviceName+kl.value(this.localeCancel+"cancelConfirmMsg2");var p=[];p.push(e.listOfPrincipalServices[g].serviceName),o.push({SmartCardNumber:e.linkedSmartCard,ServiceNames:p,CancelReason:t.cancelPackagesModel.get("reasonForCancellation"),ScheduledCancelDate:"",isSPL:t.get("SplPrincipalpackagesList").contains(e.listOfPrincipalServices[g].serviceUid)}),t.cancelPackagesModel.getSelectedProductIds.push(e.listOfPrincipalServices[g].seviceProductId)}else s[0]="Jan",s[1]="Feb",s[2]="Mar",s[3]="Apr",s[4]="May",s[5]="Jun",s[6]="Jul",s[7]="Aug",s[8]="Sep",s[9]="Oct",s[10]="Nov",s[11]="Dec",r=s[new Date(t.cancelPackagesModel.dateDisconnectAll).getMonth()],n=new Date(t.cancelPackagesModel.dateDisconnectAll).getDate(),n<10&&(n="0"+n),i=new Date(t.cancelPackagesModel.dateDisconnectAll).getFullYear(),m+=e.listOfPrincipalServices[g].serviceName+" scheduled for cancellation on "+n+"-"+r+"-"+i+".<br />",p=[],p.push(e.listOfPrincipalServices[g].serviceName),c=t.cancelPackagesModel.dateDisconnectAll.toLocaleDateString("sv-SE"),o.push({SmartCardNumber:e.linkedSmartCard,ServiceNames:p,CancelReason:t.cancelPackagesModel.get("reasonForCancellation"),ScheduledCancelDate:c,isSPL:t.get("SplPrincipalpackagesList").contains(e.listOfPrincipalServices[g].serviceUid)}),t.cancelPackagesModel.getSelectedProductIds.push(e.listOfPrincipalServices[g].seviceProductId);else m+=e.listOfPrincipalServices[g].serviceName+kl.value(this.localeCancel+"cancelConfirmMsg2"),p=[],p.push(e.listOfPrincipalServices[g].serviceName),o.push({SmartCardNumber:e.linkedSmartCard,ServiceNames:p,CancelReason:t.cancelPackagesModel.get("reasonForCancellation"),ScheduledCancelDate:"",isSPL:t.get("SplPrincipalpackagesList").contains(e.listOfPrincipalServices[g].serviceUid)}),t.cancelPackagesModel.getSelectedProductIds.push(e.listOfPrincipalServices[g].seviceProductId);for(var v=0;v<e.listOfAddOnServices.length;v++)d=t.get("isDPPHardwareAndBundleProductAllowed")&&!Ember.isEmpty(e.listOfAddOnServices[v].serviceUid)&&t.checkProductTypeAndCategory(e.listOfAddOnServices[v].serviceUid,[t.get("ADDON_CATEGORY")],[t.get("DPP_ADDON_CATEGORY")])?u:l,null!==t.cancelPackagesModel.dateDisconnectAll&&""!==t.cancelPackagesModel.dateDisconnectAll&&void 0!==t.cancelPackagesModel.dateDisconnectAll?t.cancelPackagesModel.dateDisconnectAll.toDateString()===(new Date).toDateString()?(m+=e.listOfAddOnServices[v].serviceName+kl.value(this.localeCancel+"cancelConfirmMsg2"),p=[],p.push(e.listOfAddOnServices[v].serviceName),o.push({SmartCardNumber:e.linkedSmartCard,ServiceNames:p,CancelReason:d,ScheduledCancelDate:"",isSPL:!1}),t.cancelPackagesModel.getSelectedProductIds.push(e.listOfAddOnServices[v].seviceProductId)):(s=[],s[0]="Jan",s[1]="Feb",s[2]="Mar",s[3]="Apr",s[4]="May",s[5]="Jun",s[6]="Jul",s[7]="Aug",s[8]="Sep",s[9]="Oct",s[10]="Nov",s[11]="Dec",r=s[new Date(t.cancelPackagesModel.dateDisconnectAll).getMonth()],n=new Date(t.cancelPackagesModel.dateDisconnectAll).getDate(),n<10&&(n="0"+n),i=new Date(t.cancelPackagesModel.dateDisconnectAll).getFullYear(),m+=e.listOfAddOnServices[v].serviceName+" scheduled for cancellation on "+n+"-"+r+"-"+i+".<br />",p=[],p.push(e.listOfAddOnServices[v].serviceName),c=t.cancelPackagesModel.dateDisconnectAll.toLocaleDateString("sv-SE"),o.push({SmartCardNumber:e.linkedSmartCard,ServiceNames:p,CancelReason:d,ScheduledCancelDate:c,isSPL:!1}),t.cancelPackagesModel.getSelectedProductIds.push(e.listOfAddOnServices[v].seviceProductId)):(m+=e.listOfAddOnServices[v].serviceName+kl.value(this.localeCancel+"cancelConfirmMsg2"),p=[],p.push(e.listOfAddOnServices[v].serviceName),o.push({SmartCardNumber:e.linkedSmartCard,ServiceNames:p,CancelReason:d,ScheduledCancelDate:"",isSPL:!1}),t.cancelPackagesModel.getSelectedProductIds.push(e.listOfAddOnServices[v].seviceProductId));for(var g=0;g<e.listOfAccessServices.length;g++)null!==t.cancelPackagesModel.dateDisconnectAll&&""!==t.cancelPackagesModel.dateDisconnectAll&&void 0!==t.cancelPackagesModel.dateDisconnectAll?t.cancelPackagesModel.dateDisconnectAll.toDateString()===(new Date).toDateString()?(m+=e.listOfAccessServices[g].serviceName+kl.value(this.localeCancel+"cancelConfirmMsg2"),p=[],p.push(e.listOfAccessServices[g].serviceName),o.push({SmartCardNumber:e.linkedSmartCard,ServiceNames:p,CancelReason:l,ScheduledCancelDate:"",isSPL:!1}),t.cancelPackagesModel.getSelectedProductIds.push(e.listOfAccessServices[g].seviceProductId)):(s=[],s[0]="Jan",s[1]="Feb",s[2]="Mar",s[3]="Apr",s[4]="May",s[5]="Jun",s[6]="Jul",s[7]="Aug",s[8]="Sep",s[9]="Oct",s[10]="Nov",s[11]="Dec",r=s[new Date(t.cancelPackagesModel.dateDisconnectAll).getMonth()],n=new Date(t.cancelPackagesModel.dateDisconnectAll).getDate(),n<10&&(n="0"+n),i=new Date(t.cancelPackagesModel.dateDisconnectAll).getFullYear(),m+=e.listOfAccessServices[g].serviceName+" scheduled for cancellation on "+n+"-"+r+"-"+i+".<br />",p=[],p.push(e.listOfAccessServices[g].serviceName),c=t.cancelPackagesModel.dateDisconnectAll.toLocaleDateString("sv-SE"),o.push({SmartCardNumber:e.linkedSmartCard,ServiceNames:p,CancelReason:l,ScheduledCancelDate:c,isSPL:!1}),t.cancelPackagesModel.getSelectedProductIds.push(e.listOfAccessServices[g].seviceProductId)):(m+=e.listOfAccessServices[g].serviceName+kl.value(this.localeCancel+"cancelConfirmMsg2"),p=[],p.push(e.listOfAccessServices[g].serviceName),o.push({SmartCardNumber:e.linkedSmartCard,ServiceNames:p,CancelReason:l,ScheduledCancelDate:"",isSPL:!1}),t.cancelPackagesModel.getSelectedProductIds.push(e.listOfAccessServices[g].seviceProductId));if(e.dppServiceStatus&&t.isCancellationAllowed&&(m+=e.dppServiceName+kl.value(this.localeCancel+"cancelConfirmMsg2"),p=[],p.push(e.dppServiceName),o.push({SmartCardNumber:e.linkedSmartCard,ServiceNames:p,CancelReason:u,ScheduledCancelDate:"",isSPL:!1}),t.cancelPackagesModel.getSelectedProductIds.push(e.dppServiceProductId)),e.insuranceServiceStatus)if(null!==t.cancelPackagesModel.dateDisconnectAll&&""!==t.cancelPackagesModel.dateDisconnectAll&&void 0!==t.cancelPackagesModel.dateDisconnectAll)if(t.get("isDCCImmediateCancellationAllowed")){s=[],s[0]="Jan",s[1]="Feb",s[2]="Mar",s[3]="Apr",s[4]="May",s[5]="Jun",s[6]="Jul",s[7]="Aug",s[8]="Sep",s[9]="Oct",s[10]="Nov",s[11]="Dec",c=t.cancelPackagesModel.dateDisconnectAll.toLocaleDateString("sv-SE");var f=new Date(e.insuranceCudDate).setDate(new Date(e.insuranceCudDate).getDate()+1);t.cancelPackagesModel.dateDisconnectAll.toDateString()===(new Date).toDateString()?m+=e.insuranceServiceName+kl.value(this.localeCancel+"cancelConfirmMsg2"):new Date(t.cancelPackagesModel.dateDisconnectAll).setHours(0,0,0,0)<new Date(f).setHours(0,0,0,0)?(c=new Date(f).toLocaleDateString("sv-SE"),r=s[new Date(c).getMonth()],n=new Date(c).getDate(),n<10&&(n="0"+n),i=new Date(c).getFullYear(),m+=e.insuranceServiceName+" scheduled for cancellation on "+n+"-"+r+"-"+i+".<br />"):(c=t.cancelPackagesModel.dateDisconnectAll.toLocaleDateString("sv-SE"),r=s[new Date(c).getMonth()],n=new Date(c).getDate(),n<10&&(n="0"+n),i=new Date(c).getFullYear(),m+=e.insuranceServiceName+" scheduled for cancellation on "+n+"-"+r+"-"+i+".<br />"),p=[],p.push(e.insuranceServiceName),o.push({SmartCardNumber:e.insuranceOnDeviceNumber,ServiceNames:p,CancelReason:l,ScheduledCancelDate:c,isSPL:!1}),t.cancelPackagesModel.getSelectedProductIds.push(e.insuranceServiceProductId)}else(t.get("isDCCScheduleCancellationAllowed")||t.get("NoRoleBasedDCCCancellation"))&&(s=[],s[0]="Jan",s[1]="Feb",s[2]="Mar",s[3]="Apr",s[4]="May",s[5]="Jun",s[6]="Jul",s[7]="Aug",s[8]="Sep",s[9]="Oct",s[10]="Nov",s[11]="Dec",c=e.InsuranceCUD.toLocaleDateString("sv-SE"),r=s[new Date(e.InsuranceCUD).getMonth()],n=new Date(e.InsuranceCUD).getDate(),n<10&&(n="0"+n),i=new Date(e.InsuranceCUD).getFullYear(),m+=e.insuranceServiceName+" scheduled for cancellation on "+n+"-"+r+"-"+i+".<br />",p=[],p.push(e.insuranceServiceName),o.push({SmartCardNumber:e.insuranceOnDeviceNumber,ServiceNames:p,CancelReason:l,ScheduledCancelDate:c,isSPL:!1}),t.cancelPackagesModel.getSelectedProductIds.push(e.insuranceServiceProductId));else{var b=new Date(e.insuranceCudDate).setDate(new Date(e.insuranceCudDate).getDate()+1);s=[],s[0]="Jan",s[1]="Feb",s[2]="Mar",s[3]="Apr",s[4]="May",s[5]="Jun",s[6]="Jul",s[7]="Aug",s[8]="Sep",s[9]="Oct",s[10]="Nov",s[11]="Dec",r=s[new Date(b).getMonth()],n=new Date(b).getDate(),n<10&&(n="0"+n),i=new Date(b).getFullYear(),c=new Date(b).toLocaleDateString("sv-SE"),p=[],p.push(e.insuranceServiceName),t.get("isDCCImmediateCancellationAllowed")?(m+=e.insuranceServiceName+kl.value(this.localeCancel+"cancelConfirmMsg2"),o.push({SmartCardNumber:e.insuranceOnDeviceNumber,ServiceNames:p,CancelReason:l,ScheduledCancelDate:"",isSPL:!1}),t.cancelPackagesModel.getSelectedProductIds.push(e.insuranceServiceProductId)):(m+=e.insuranceServiceName+" scheduled for cancellation on "+n+"-"+r+"-"+i+".<br />",o.push({SmartCardNumber:e.insuranceOnDeviceNumber,ServiceNames:p,CancelReason:l,ScheduledCancelDate:c,isSPL:!1}),t.cancelPackagesModel.getSelectedProductIds.push(e.insuranceServiceProductId))}}else if(t.validateInputForCancel()){var C=new Date,S=!1;if(t.cancelPackagesModel.princPre){for(var D=0;D<e.listOfPrincipalServices.length;D++)e.listOfPrincipalServices[D].stateOfToggleButtonOfService||(null!==e.listOfPrincipalServices[D].serviceCUD&&""!==e.listOfPrincipalServices[D].serviceCUD&&void 0!==e.listOfPrincipalServices[D].serviceCUD&&(C=new Date(e.listOfPrincipalServices[D].serviceCUD)),S=!0);for(var y=0;y<e.listOfAddOnServices.length;y++)if(!e.listOfAddOnServices[y].stateOfToggleButtonOfService){var w=new Date;if(null!==e.listOfAddOnServices[y].serviceCUD&&""!==e.listOfAddOnServices[y].serviceCUD&&void 0!==e.listOfAddOnServices[y].serviceCUD&&(w=new Date(e.listOfAddOnServices[y].serviceCUD)),-1===XDates.compare(C.setHours(0,0,0,0),w.setHours(0,0,0,0))&&S)return void Komodo.Controls.MessageBoxController.show(kl.value(t.localeCancel+"validateDate"),kl.value(t.localeCancel+"validatePrincipalDate"),Komodo.Controls.MessageBoxOkButtons,this,"authmbx","danger")}for(var I=0;I<e.listOfAccessServices.length;I++)if(!e.listOfAccessServices[I].stateOfToggleButtonOfService){var x=new Date;if(null!==e.listOfAccessServices[I].serviceCUD&&""!==e.listOfAccessServices[I].serviceCUD&&void 0!==e.listOfAccessServices[I].serviceCUD&&(x=new Date(e.listOfAccessServices[I].serviceCUD)),-1==XDates.compare(C.setHours(0,0,0,0),x.setHours(0,0,0,0))&&S)return void Komodo.Controls.MessageBoxController.show(kl.value(t.localeCancel+"validateDate"),kl.value(t.localeCancel+"validatePrincipalDate"),Komodo.Controls.MessageBoxOkButtons,this,"authmbx","danger")}}var m=kl.value(this.localeCancel+"cancelConfirmMsg1");if(t.cancelPackagesModel.princPre)for(var M=0;M<e.listOfPrincipalServices.length;M++)e.listOfPrincipalServices[M].stateOfToggleButtonOfService||(null!==e.listOfPrincipalServices[M].serviceCUD&&""!==e.listOfPrincipalServices[M].serviceCUD&&void 0!==e.listOfPrincipalServices[M].serviceCUD?e.listOfPrincipalServices[M].serviceCUD.toDateString()===(new Date).toDateString()?(m+=e.listOfPrincipalServices[M].serviceName+kl.value(this.localeCancel+"cancelConfirmMsg2"),p=[],p.push(e.listOfPrincipalServices[M].serviceName),o.push({SmartCardNumber:e.linkedSmartCard,ServiceNames:p,CancelReason:t.cancelPackagesModel.get("reasonForCancellation"),ScheduledCancelDate:"",isSPL:t.get("SplPrincipalpackagesList").contains(e.listOfPrincipalServices[M].serviceUid)}),t.cancelPackagesModel.getSelectedProductIds.push(e.listOfPrincipalServices[M].seviceProductId)):(s=[],s[0]="Jan",s[1]="Feb",s[2]="Mar",s[3]="Apr",s[4]="May",s[5]="Jun",s[6]="Jul",s[7]="Aug",s[8]="Sep",s[9]="Oct",s[10]="Nov",s[11]="Dec",r=s[new Date(e.listOfPrincipalServices[M].serviceCUD).getMonth()],n=new Date(e.listOfPrincipalServices[M].serviceCUD).getDate(),n<10&&(n="0"+n),i=new Date(e.listOfPrincipalServices[M].serviceCUD).getFullYear(),m+=e.listOfPrincipalServices[M].serviceName+" scheduled for cancellation on "+n+"-"+r+"-"+i+".<br />",p=[],p.push(e.listOfPrincipalServices[M].serviceName),c=e.listOfPrincipalServices[M].serviceCUD.toLocaleDateString("sv-SE"),o.push({SmartCardNumber:e.linkedSmartCard,ServiceNames:p,CancelReason:t.cancelPackagesModel.get("reasonForCancellation"),ScheduledCancelDate:c,isSPL:t.get("SplPrincipalpackagesList").contains(e.listOfPrincipalServices[M].serviceUid)}),t.cancelPackagesModel.getSelectedProductIds.push(e.listOfPrincipalServices[M].seviceProductId)):(m+=e.listOfPrincipalServices[M].serviceName+kl.value(this.localeCancel+"cancelConfirmMsg2"),p=[],p.push(e.listOfPrincipalServices[M].serviceName),o.push({SmartCardNumber:e.linkedSmartCard,ServiceNames:p,CancelReason:t.cancelPackagesModel.get("reasonForCancellation"),ScheduledCancelDate:"",isSPL:t.get("SplPrincipalpackagesList").contains(e.listOfPrincipalServices[M].serviceUid)}),t.cancelPackagesModel.getSelectedProductIds.push(e.listOfPrincipalServices[M].seviceProductId)));for(var T=0;T<e.listOfAddOnServices.length;T++)e.listOfAddOnServices[T].stateOfToggleButtonOfService||(d=t.get("isDPPHardwareAndBundleProductAllowed")&&!Ember.isEmpty(e.listOfAddOnServices[T].serviceUid)&&t.checkProductTypeAndCategory(e.listOfAddOnServices[T].serviceUid,[t.get("ADDON_CATEGORY")],[t.get("DPP_ADDON_CATEGORY")])?u:l,null!==e.listOfAddOnServices[T].serviceCUD&&""!==e.listOfAddOnServices[T].serviceCUD&&void 0!==e.listOfAddOnServices[T].serviceCUD?e.listOfAddOnServices[T].serviceCUD.toDateString()===(new Date).toDateString()?(m+=e.listOfAddOnServices[T].serviceName+kl.value(this.localeCancel+"cancelConfirmMsg2"),p=[],p.push(e.listOfAddOnServices[T].serviceName),o.push({SmartCardNumber:e.linkedSmartCard,ServiceNames:p,CancelReason:d,ScheduledCancelDate:"",isSPL:!1}),t.cancelPackagesModel.getSelectedProductIds.push(e.listOfAddOnServices[T].seviceProductId)):(s=[],s[0]="Jan",s[1]="Feb",s[2]="Mar",s[3]="Apr",s[4]="May",s[5]="Jun",s[6]="Jul",s[7]="Aug",s[8]="Sep",s[9]="Oct",s[10]="Nov",s[11]="Dec",r=s[new Date(e.listOfAddOnServices[T].serviceCUD).getMonth()],n=new Date(e.listOfAddOnServices[T].serviceCUD).getDate(),n<10&&(n="0"+n),i=new Date(e.listOfAddOnServices[T].serviceCUD).getFullYear(),m+=e.listOfAddOnServices[T].serviceName+" scheduled for cancellation on "+n+"-"+r+"-"+i+".<br />",p=[],p.push(e.listOfAddOnServices[T].serviceName),c=e.listOfAddOnServices[T].serviceCUD.toLocaleDateString("sv-SE"),o.push({SmartCardNumber:e.linkedSmartCard,ServiceNames:p,CancelReason:d,ScheduledCancelDate:c,isSPL:!1}),t.cancelPackagesModel.getSelectedProductIds.push(e.listOfAddOnServices[T].seviceProductId)):(m+=e.listOfAddOnServices[T].serviceName+kl.value(this.localeCancel+"cancelConfirmMsg2"),p=[],p.push(e.listOfAddOnServices[T].serviceName),o.push({SmartCardNumber:e.linkedSmartCard,ServiceNames:p,CancelReason:d,ScheduledCancelDate:"",isSPL:!1}),t.cancelPackagesModel.getSelectedProductIds.push(e.listOfAddOnServices[T].seviceProductId)));for(var N=0;N<e.listOfAccessServices.length;N++)e.listOfAccessServices[N].stateOfToggleButtonOfService||(null!==e.listOfAccessServices[N].serviceCUD&&""!==e.listOfAccessServices[N].serviceCUD&&void 0!==e.listOfAccessServices[N].serviceCUD?e.listOfAccessServices[N].serviceCUD.toDateString()==(new Date).toDateString()?(m+=e.listOfAccessServices[N].serviceName+kl.value(this.localeCancel+"cancelConfirmMsg2"),p=[],p.push(e.listOfAccessServices[N].serviceName),o.push({SmartCardNumber:e.linkedSmartCard,ServiceNames:p,CancelReason:l,ScheduledCancelDate:"",isSPL:!1}),t.cancelPackagesModel.getSelectedProductIds.push(e.listOfAccessServices[N].seviceProductId)):(s=[],s[0]="Jan",s[1]="Feb",s[2]="Mar",s[3]="Apr",s[4]="May",s[5]="Jun",s[6]="Jul",s[7]="Aug",s[8]="Sep",s[9]="Oct",s[10]="Nov",s[11]="Dec",r=s[new Date(e.listOfAccessServices[N].serviceCUD).getMonth()],n=new Date(e.listOfAccessServices[N].serviceCUD).getDate(),n<10&&(n="0"+n),i=new Date(e.listOfAccessServices[N].serviceCUD).getFullYear(),m+=e.listOfAccessServices[N].serviceName+" scheduled for cancellation on "+n+"-"+r+"-"+i+".<br />",p=[],p.push(e.listOfAccessServices[N].serviceName),c=e.listOfAccessServices[N].serviceCUD.toLocaleDateString("sv-SE"),o.push({SmartCardNumber:e.linkedSmartCard,ServiceNames:p,CancelReason:l,ScheduledCancelDate:c,isSPL:!1}),t.cancelPackagesModel.getSelectedProductIds.push(e.listOfAccessServices[N].seviceProductId)):(m+=e.listOfAccessServices[N].serviceName+kl.value(this.localeCancel+"cancelConfirmMsg2"),p=[],p.push(e.listOfAccessServices[N].serviceName),o.push({SmartCardNumber:e.linkedSmartCard,ServiceNames:p,CancelReason:l,ScheduledCancelDate:"",isSPL:!1}),t.cancelPackagesModel.getSelectedProductIds.push(e.listOfAccessServices[N].seviceProductId)));if(!e.stateOfToggleButtonOfDPPService&&e.dppServiceStatus&&(m+=e.dppServiceName+kl.value(this.localeCancel+"cancelConfirmMsg2"),p=[],p.push(e.dppServiceName),o.push({SmartCardNumber:e.linkedSmartCard,ServiceNames:p,CancelReason:u,ScheduledCancelDate:"",isSPL:!1}),t.cancelPackagesModel.getSelectedProductIds.push(e.dppServiceProductId)),e.insuranceServiceStatus&&!e.stateOfToggleButtonOfInsuranceService)if(null!==e.InsuranceCUD&&""!==e.InsuranceCUD&&void 0!==e.InsuranceCUD)if(t.get("isDCCImmediateCancellationAllowed")){s=[],s[0]="Jan",s[1]="Feb",s[2]="Mar",s[3]="Apr",s[4]="May",s[5]="Jun",s[6]="Jul",s[7]="Aug",s[8]="Sep",s[9]="Oct",s[10]="Nov",s[11]="Dec",c=e.InsuranceCUD.toLocaleDateString("sv-SE");var f=new Date(e.insuranceCudDate).setDate(new Date(e.insuranceCudDate).getDate()+1);e.InsuranceCUD.toDateString()===(new Date).toDateString()?m+=e.insuranceServiceName+kl.value(this.localeCancel+"cancelConfirmMsg2"):new Date(c).setHours(0,0,0,0)<new Date(f).setHours(0,0,0,0)?(c=new Date(f).toLocaleDateString("sv-SE"),r=s[new Date(c).getMonth()],n=new Date(c).getDate(),n<10&&(n="0"+n),i=new Date(c).getFullYear(),m+=e.insuranceServiceName+" scheduled for cancellation on "+n+"-"+r+"-"+i+".<br />"):(c=e.InsuranceCUD.toLocaleDateString("sv-SE"),r=s[new Date(c).getMonth()],n=new Date(c).getDate(),n<10&&(n="0"+n),i=new Date(c).getFullYear(),m+=e.insuranceServiceName+" scheduled for cancellation on "+n+"-"+r+"-"+i+".<br />"),p=[],p.push(e.insuranceServiceName),o.push({SmartCardNumber:e.insuranceOnDeviceNumber,ServiceNames:p,CancelReason:l,ScheduledCancelDate:c,isSPL:!1}),t.cancelPackagesModel.getSelectedProductIds.push(e.insuranceServiceProductId)}else(t.get("isDCCScheduleCancellationAllowed")||t.get("NoRoleBasedDCCCancellation"))&&(s=[],s[0]="Jan",s[1]="Feb",s[2]="Mar",s[3]="Apr",s[4]="May",s[5]="Jun",s[6]="Jul",s[7]="Aug",s[8]="Sep",s[9]="Oct",s[10]="Nov",s[11]="Dec",c=e.InsuranceCUD.toLocaleDateString("sv-SE"),r=s[new Date(e.InsuranceCUD).getMonth()],n=new Date(e.InsuranceCUD).getDate(),n<10&&(n="0"+n),i=new Date(e.InsuranceCUD).getFullYear(),m+=e.insuranceServiceName+" scheduled for cancellation on "+n+"-"+r+"-"+i+".<br />",p=[],p.push(e.insuranceServiceName),o.push({SmartCardNumber:e.insuranceOnDeviceNumber,ServiceNames:p,CancelReason:l,ScheduledCancelDate:c,isSPL:!1}),t.cancelPackagesModel.getSelectedProductIds.push(e.insuranceServiceProductId));else{var b=new Date(e.insuranceCudDate).setDate(new Date(e.insuranceCudDate).getDate()+1);s=[],s[0]="Jan",s[1]="Feb",s[2]="Mar",s[3]="Apr",s[4]="May",s[5]="Jun",s[6]="Jul",s[7]="Aug",s[8]="Sep",s[9]="Oct",s[10]="Nov",s[11]="Dec",r=s[new Date(b).getMonth()],n=new Date(b).getDate(),n<10&&(n="0"+n),i=new Date(b).getFullYear(),t.get("isDCCImmediateCancellationAllowed")||(m+=e.insuranceServiceName+" scheduled for cancellation on "+n+"-"+r+"-"+i+".<br />"),c=new Date(b).toLocaleDateString("sv-SE"),p=[],p.push(e.insuranceServiceName),t.get("isDCCImmediateCancellationAllowed")?(m+=e.insuranceServiceName+kl.value(this.localeCancel+"cancelConfirmMsg2"),o.push({SmartCardNumber:e.insuranceOnDeviceNumber,ServiceNames:p,CancelReason:l,ScheduledCancelDate:"",isSPL:!1})):o.push({SmartCardNumber:e.insuranceOnDeviceNumber,ServiceNames:p,CancelReason:l,
ScheduledCancelDate:c,isSPL:!1}),t.cancelPackagesModel.getSelectedProductIds.push(e.insuranceServiceProductId)}}var P=t.get("dissableBindingCancelReason");null!=t.get("cancelPackagesModel.reasonCodes")||P?Komodo.Controls.MessageBoxController.show(kl.value(this.localeCancel+"cancelConfirm"),m,Komodo.Controls.MessageBoxYesNoButtons,this,"id5446673","warning").response=function(e){if("yes"===e)if(t.cancelPackagesModel.set("isScheduledChangesExist",!1),t.getScheduledChanges(),t.cancelPackagesModel.get("isScheduledChangesExist")){var s=Komodo.Controls.MessageBoxController.show(kl.value(t.localeCancel+"cancelConfirm"),kl.value(t.localeCancel+"confirmDeletePreviousSchedules"),Komodo.Controls.MessageBoxYesNoButtons,t,"id789699","warning");s.response=function(e){"yes"===e&&(t.showBlockingBusyIndicator(),a.deleteMultipleScheduledChanges(t.cancelPackagesModel.deleteScheduleList,!1),t.hideBusyIndicator(),t.cancelPackageService(o))}}else t.cancelPackageService(o)}:Komodo.Controls.MessageBoxController.show(kl.value(this.localeCancel+"valCancelReasonMsgHeader"),kl.value(this.localeCancel+"valCancelReasonMsg"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning").response=function(e){}},submitSuspensionServices:function(e){var t=this,a=[],o=new Date,s=kl.value(this.localeCancel+"suspendConfirmMsg")+"<br />";t.set("redirectFlag",!1);var r=new Date,n=!1;if(t.cancelPackagesModel.princPre)for(var i=0;i<e.listOfPrincipalServices.length;i++)if(!e.listOfPrincipalServices[i].stateOfToggleButtonOfService){var c=[];c.push(e.listOfPrincipalServices[i].serviceName),n=!0,o=t.cancelPackagesModel.get("isDisconnectAll")?t.cancelPackagesModel.dateDisconnectAll:e.listOfPrincipalServices[i].serviceCUD,null!==o&&""!==o&&void 0!==o?(r=new Date(e.listOfPrincipalServices[i].serviceCUD),o.toDateString()===(new Date).toDateString()?s+=e.listOfPrincipalServices[i].serviceName+kl.value(this.localeCancel+"suspendWarningMsg"):(t.set("redirectFlag",!0),s+=e.listOfPrincipalServices[i].serviceName+" will be scheduled for suspension on "+XDates.getformatedDateforUI(o)),a.push({DeviceSerialNumber:e.linkedSmartCard,PackageNames:c,StartDate:o.toLocaleDateString("sv-SE")})):(s+=e.listOfPrincipalServices[i].serviceName+kl.value(this.localeCancel+"suspendWarningMsg"),a.push({DeviceSerialNumber:e.linkedSmartCard,PackageNames:c,StartDate:(new Date).toLocaleDateString("sv-SE")}))}for(var i=0;i<e.listOfAddOnServices.length;i++)if(!e.listOfAddOnServices[i].stateOfToggleButtonOfService)if(c=[],c.push(e.listOfAddOnServices[i].serviceName),null!==(o=t.cancelPackagesModel.get("isDisconnectAll")?t.cancelPackagesModel.dateDisconnectAll:e.listOfAddOnServices[i].serviceCUD)&&""!==o&&void 0!==o){if(-1===XDates.compare(r,new Date(o))&&n)return void Komodo.Controls.MessageBoxController.show(kl.value(t.localeCancel+"validateDate"),kl.value(t.localeCancel+"validatePrincipalDateForSuspension"),Komodo.Controls.MessageBoxOkButtons,this,"authmbx","danger");o.toDateString()===(new Date).toDateString()?s+=e.listOfAddOnServices[i].serviceName+kl.value(this.localeCancel+"suspendWarningMsg"):(t.set("redirectFlag",!0),s+=e.listOfAddOnServices[i].serviceName+" will be scheduled for suspension on "+XDates.getformatedDateforUI(o)),a.push({DeviceSerialNumber:e.linkedSmartCard,PackageNames:c,StartDate:o.toLocaleDateString("sv-SE")})}else s+=e.listOfAddOnServices[i].serviceName+kl.value(this.localeCancel+"suspendWarningMsg"),a.push({DeviceSerialNumber:e.linkedSmartCard,PackageNames:c,StartDate:(new Date).toLocaleDateString("sv-SE")});for(var l=0;l<e.listOfAccessServices.length;l++)if(!e.listOfAccessServices[l].stateOfToggleButtonOfService)if(c=[],c.push(e.listOfAccessServices[l].serviceName),null!==(o=t.cancelPackagesModel.get("isDisconnectAll")?t.cancelPackagesModel.dateDisconnectAll:e.listOfAccessServices[l].serviceCUD)&&""!==o&&void 0!==o){if(-1===XDates.compare(r,new Date(o))&&n)return void Komodo.Controls.MessageBoxController.show(kl.value(t.localeCancel+"validateDate"),kl.value(t.localeCancel+"validatePrincipalDateForSuspension"),Komodo.Controls.MessageBoxOkButtons,this,"authmbx","danger");o.toDateString()===(new Date).toDateString()?s+=e.listOfAccessServices[l].serviceName+kl.value(this.localeCancel+"suspendWarningMsg"):(t.set("redirectFlag",!0),s+=e.listOfAccessServices[l].serviceName+" will be scheduled for suspension on "+XDates.getformatedDateforUI(o)),a.push({DeviceSerialNumber:e.linkedSmartCard,PackageNames:c,StartDate:o.toLocaleDateString("sv-SE")})}else s+=e.listOfAccessServices[l].serviceName+kl.value(this.localeCancel+"suspendWarningMsg"),a.push({DeviceSerialNumber:e.linkedSmartCard,PackageNames:c,StartDate:(new Date).toLocaleDateString("sv-SE")});Komodo.Controls.MessageBoxController.show(kl.value(this.localeCancel+"suspendConfirmTitle"),s,Komodo.Controls.MessageBoxYesNoButtons,this,"id5446673","warning").response=function(e){"yes"==e&&t.suspendPackageService(a)}},validateInputForCancel:function(){var e,t=this,a=t.get("cancelPackagesModel.allHardwares");if(a.length>0)for(var o=0;o<a.length;o++){if(a[o].serviceCUDValidator&&a[o].serviceCUDValidator.errors.length>0)return Komodo.Controls.MessageBoxController.show(kl.value(t.localeCancel+"dateValidation"),a[o].serviceCUDValidator.errors[0],null,t,"id123456","warning"),!1;if(a[o].dppCudDateValidator&&a[o].dppCudDateValidator.errors.length>0)return Komodo.Controls.MessageBoxController.show(kl.value(t.localeCancel+"dateValidation"),a[o].dppCudDateValidator.errors[0],null,t,"id123456","warning"),!1;if(a[o].insuranceCUDValidator&&a[o].insuranceCUDValidator.errors.length>0)return Komodo.Controls.MessageBoxController.show(kl.value(t.localeCancel+"dateValidation"),a[o].insuranceCUDValidator.errors[0],null,t,"id123456","warning"),!1;if(void 0!==a[o].listOfAddOnServices&&null!==a[o].listOfAddOnServices&&a[o].listOfAddOnServices.length>0)for(e=0;e<a[o].listOfAddOnServices.length;e++)if(a[o].listOfAddOnServices[e].serviceCUDValidator&&a[o].listOfAddOnServices[e].serviceCUDValidator.errors.length>0)return Komodo.Controls.MessageBoxController.show(kl.value(t.localeCancel+"dateValidation"),a[o].listOfAddOnServices[e].serviceCUDValidator.errors[0],null,t,"id123456","warning"),!1;if(void 0!==a[o].listOfAccessServices&&null!==a[o].listOfAccessServices&&a[o].listOfAccessServices.length>0)for(k=0;k<a[o].listOfAccessServices.length;k++)if(a[o].listOfAccessServices[k].serviceAccessCUDValidator&&a[o].listOfAccessServices[k].serviceAccessCUDValidator.errors.length>0)return Komodo.Controls.MessageBoxController.show(kl.value(t.localeCancel+"dateValidation"),a[o].listOfAccessServices[k].serviceAccessCUDValidator.errors[0],null,t,"id123456","warning"),!1}return!0},cancelPackageService:function(e){var t=this;t.set("redirectFlag",!1),t.set("errorMessageForFail",""),t.set("errorMessage",[]),t.set("errorOnDate",[]);for(var a=e.length-1;a>=0;a--)""!==e[a].ScheduledCancelDate&&null!==e[a].ScheduledCancelDate&&void 0!==e[a].ScheduledCancelDate&&new Date(e[a].ScheduledCancelDate).toDateString()!==(new Date).toDateString()?(t.errorMessage.pushObject(e[a].ServiceNames[0]+" not scheduled for cancellation on "+e[a].ScheduledCancelDate),t.errorOnDate[a]=e[a].ScheduledCancelDate,t.set("redirectFlag",!0)):(t.errorMessage.pushObject(e[a].ServiceNames[0]+kl.value(this.localeCancel+"notCancelledImmediately")),t.errorOnDate[a]=void 0);Komodo.Services.QueryService.create().retrieveSelectedCountry(),t.showBlockingBusyIndicator();for(var o=[],s=e.length-1;s>=0;s--)e[s].isSPL&&(e[s].CancelReason=t.get("cancelPackagesModel.reasonCodes")),o.pushObject(e[s]);Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo),Komodo.Services.queryService.postJSON("/Device/CancelServices",{data:o}).done(function(e){t.hideBusyIndicator();var a=!1;if(void 0!=e)for(var o=0;o<e.length;o++)void 0!=e[o].Status&&0!==e[o].Status&&void 0!==e[o].ResponseMessage&&(a=!0,t.errorMessageForFail+=t.errorMessage[o]+". Reason: "+e[o].ResponseMessage+"<br />",-1!==t.errorMessage[o].indexOf("immediately")?t.publishCreateActivity(t.helperFunction.getCustomerIdToRetrieveData(),!1,t.errorMessage[o]+". Reason: "+e[o].ResponseMessage,t.errorOnDate[o]):t.publishCreateActivity(t.helperFunction.getCustomerIdToRetrieveData(),!0,t.errorMessage[o]+". Reason: "+e[o].ResponseMessage,t.errorOnDate[o]));if(a){var s=Komodo.Controls.MessageBoxController.show(kl.value(t.localeCancel+"failedCancellation"),t.errorMessageForFail,Komodo.Controls.MessageBoxOkButton,t,"authmbx","danger");s.response=function(e){"ok"==e&&Komodo.Services.eventAggregator.publish("redirectToManageViewing",null)}}else{t.get("redirectFlag")?msgText=kl.value(t.localeCancel+"scheduledForCancellation"):msgText=kl.value(t.localeCancel+"cancelSuccessfully");var s=Komodo.Controls.MessageBoxController.show(kl.value(t.localeCancel+"successCancellation"),msgText,Komodo.Controls.MessageBoxOkButton,t,"id5446673","success");s.response=function(e){if("ok"==e)if(t.get("redirectFlag"))1==t.get("isDCCScheduleCancellationAllowed")&&0==t.get("isDCCImmediateCancellationAllowed")?t.transitionToRoute("/manageViewing"):t.transitionToRoute("/scheduledChanges");else{var a=Komodo.Services.customerProfileService.getCustomerPersonalDetail();if(void 0!=a&&null!=a&&""!=a&&"commercial"==a.customerClass.toLowerCase()||"1"==a.customerClass)return void t.transitionToRoute("/commercialManageViewing");t.transitionToRoute("/manageViewing")}}}}).error(function(e){var a=JSON.stringify(e);Komodo.log("Notify Owner ajax call failed. Error: "+a),t.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(t.localeCancel+"failedCancellation"),a,Komodo.Controls.MessageBoxOkButtons,t,"authmbx","danger")})},validateInputForSuspension:function(e){var t=this,a=t.helperFunction.getCustomerIdToRetrieveData();return Komodo.Services.queryService.getJSON("/Device/GetSuspensionEligibilityInfo?customerId="+a+"&deviceSerialNumber="+e).done(function(a){if(null!=a&&void 0!=a)for(var o=0;o<a.length;o++)if(a[o].DeviceSerialNumber==e&&!a[o].Eligible){var s=Komodo.Controls.MessageBoxController.show(kl.value(t.localeCancel+"failedSuspension"),kl.value(t.localeCancel+"InvalidSuspensionCount"),Komodo.Controls.MessageBoxOkButton,t,"id5446673","danger");s.response=function(e){"ok"==e&&t.transitionToRoute("/manageViewing")}}}).error(function(e){var t=JSON.stringify(e);Komodo.log("Notify Owner ajax call failed. Error: "+t)}),!0},suspendPackageService:function(e){var t=this;t.set("redirectFlag",!1),t.set("errorMessageForFail",""),t.set("errorMessage",[]),t.set("errorOnDate",[]);for(var a=e.length-1;a>=0;a--)""!=e[a].StartDate&&null!=e[a].StartDate&&void 0!=e[a].StartDate&&new Date(e[a].StartDate).toLocaleDateString()!=(new Date).toLocaleDateString()?(t.errorMessage.pushObject(e[a].PackageNames[0]+" not scheduled for suspension on "+e[a].StartDate),t.errorOnDate[a]=e[a].StartDate,t.set("redirectFlag",!0)):(t.errorMessage.pushObject(e[a].PackageNames[0]+kl.value(this.localeCancel+"notSuspendedImmediately")),t.errorOnDate[a]=void 0);Komodo.Services.QueryService.create().retrieveSelectedCountry(),t.showBlockingBusyIndicator();for(var o=[],s=e.length-1;s>=0;s--)o.pushObject(e[s]);Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo),Komodo.Services.queryService.postJSON("/Device/SuspendPackages",{data:o}).done(function(e){t.hideBusyIndicator();var a=!1,o=t.helperFunction.getCustomerIdToRetrieveData();if(void 0!=e)for(var s=0;s<e.length;s++)void 0!=e[s].Status&&0!=e[s].Status&&void 0!=e[s].ResponseMessage&&(a=!0,t.errorMessageForFail+=t.errorMessage[s]+". Reason: "+e[s].ResponseMessage+"<br />",-1!=t.errorMessage[s].indexOf("immediately")?t.publishCreateActivity(o,!1,t.errorMessage[s]+". Reason: "+e[s].ResponseMessage,t.errorOnDate[s]):t.publishCreateActivity(t.helperFunction.getCustomerIdToRetrieveData(),!0,t.errorMessage[s]+". Reason: "+e[s].ResponseMessage,t.errorOnDate[s]));if(a){var r=Komodo.Controls.MessageBoxController.show(kl.value(t.localeCancel+"failedSuspension"),t.errorMessageForFail,Komodo.Controls.MessageBoxOkButton,t,"authmbx","danger");r.response=function(e){if("ok"==e){var a=Komodo.Services.customerProfileService.getCustomerPersonalDetail();if(void 0!=a&&null!=a&&""!=a){if("commercial"==a.customerClass.toLowerCase()||"1"==a.customerClass||"national deal"==a.customerClass.toLowerCase()||"9"==a.customerClass)return void t.transitionToRoute("/commercialManageViewing");if("csi"==a.customerClass.toLowerCase()||"4"==a.customerClass)return void t.transitionToRoute("/csiManageViewing")}Komodo.Services.eventAggregator.publish("redirectToManageViewing",null)}}}else{t.get("redirectFlag")?msgText=kl.value(t.localeCancel+"suspensionScheduleSuccess"):msgText=kl.value(t.localeCancel+"suspensionSuccess");var r=Komodo.Controls.MessageBoxController.show(kl.value(t.localeCancel+"successCancellation"),msgText,Komodo.Controls.MessageBoxOkButton,t,"id5446673","success");r.response=function(e){if("ok"==e)if(t.get("redirectFlag"))t.transitionToRoute("/scheduledChanges");else{var a=Komodo.Services.customerProfileService.getCustomerPersonalDetail();if(void 0!=a&&null!=a&&""!=a){if("commercial"==a.customerClass.toLowerCase()||"1"==a.customerClass)return void t.transitionToRoute("/commercialManageViewing");if("csi"==a.customerClass.toLowerCase()||"4"==a.customerClass)return void t.transitionToRoute("/csiCustomerProfile")}t.transitionToRoute("/manageViewing")}}}}).error(function(e){var a=JSON.stringify(e);Komodo.log("Notify Owner ajax call failed. Error: "+a),t.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(t.localeCancel+"failedSuspension"),a,Komodo.Controls.MessageBoxOkButtons,t,"authmbx","danger")})},bindPackagesInformation:function(){var e=this;e.cancelPackagesModel.hardwareAndServices=[],e.hardwareAndServicesArray=e.getHardwareAndAllActiveServicesOfCustomer(),e.cancelPackagesModel.get("hardwareAndServices").addObjects(e.hardwareAndServicesArray)},checkProductTypeAndCategory:function(e,t,a){var o=this,s=!1,r=null,n=null,i=null;return $.each(o.get("productTypeAndCategoryAndProductDetail"),function(o,c){!Ember.isEmpty(c)&&t.contains(c.CanonicalValue)&&(r=c.CommercialProductCategories.CommercialProductCategory instanceof Array?c.CommercialProductCategories.CommercialProductCategory:[c.CommercialProductCategories.CommercialProductCategory],$.each(r,function(t,o){a.contains(o.CanonicalValue)&&(n=o.CommercialProducts.CommercialProduct instanceof Array?o.CommercialProducts.CommercialProduct:[o.CommercialProducts.CommercialProduct],i=$.grep(n,function(t){return t.SystemKey===e}),s=i.length>0)}))}),s},getHardwareAndAllActiveServicesOfCustomer:function(){var e=this,t=[],a=null;e.set("smartcardsList",[]),e.set("reasonCodesList",[]),e.set("dppSmartcardsArray",[]);var o=[e.get("PRINCIPAL_CATEGORY"),e.get("ADDON_CATEGORY")],s=[e.get("DPP_CATEGORY"),e.get("DPP_ADDON_CATEGORY")],r=[e.get("DPP_CATEGORY")];if(Komodo.Services.customerProfileService.currentFinancialAccounts)for(var n=e.helperFunction.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account),i=0;i<n.length;i++)if("9"!=n[i].Type){if("13"==n[i].Type&&"false"==e.get("cancelPackagesModel.isCancel").toString().toLowerCase())continue;for(var c=e.helperFunction.createArrayForSingleElement(n[i].ListOfAgreement.Agreement),l=0;l<c.length;l++)if(void 0!==c[l].ListOfHardware&&void 0!==c[l].ListOfHardware.Hardware)for(var d=e.helperFunction.createArrayForSingleElement(c[l].ListOfHardware.Hardware),u=0;u<d.length;u++){var h=null,m=!1;if(null!==d[u].LinkedSmartcard&&void 0!==d[u].LinkedSmartcard&&""!==d[u].LinkedSmartcard.trim()?h={Key:d[u].LinkedSmartcard,Value:d[u].LinkedSmartcard,Text:kl.value(this.localeCancel+"smartCardNumber")}:null!==d[u].SerialNumber&&void 0!==d[u].SerialNumber&&""!==d[u].SerialNumber&&(h={Key:d[u].SerialNumber,Value:d[u].SerialNumber,Text:kl.value(this.localeCancel+"deviceNumber")}),void 0!==h&&null!==h&&""!==h){if(e.smartcardsList.length>0){var g=e.smartcardsList.filter(function(e){return e.Key===h.Key});0===g.length&&e.smartcardsList.push(h)}else e.smartcardsList.push(h);if(d[u].ListOfService&&d[u].ListOfService.Service){a=Komodo.Models.HardwareAndServicesModel.create();for(var p=0;p<d[u].ListOfService.Service.length;p++){if("true"===e.get("cancelPackagesModel.isCancel").toString().toLowerCase()){var v=d[u].ListOfService.Service[p].ProductDetail.UID;if(e.get("isDPPHardwareAndBundleProductAllowed")&&!Ember.isEmpty(v)&&e.checkProductTypeAndCategory(v,o,s)&&(e.dppSmartcardsArray.push(d[u].LinkedSmartcard),d[u].ListOfService.Service[p].Status.toString().toUpperCase()=="Disconnected".toUpperCase()&&(m=!0)),e.get("isDPPHardwareAndBundleProductAllowed")&&!Ember.isEmpty(v)&&e.checkProductTypeAndCategory(v,r,r)&&null!==d[u].ListOfService.Service[p].Status&&""!==d[u].ListOfService.Service[p].Status&&void 0!==d[u].ListOfService.Service[p].Status&&"Active"===d[u].ListOfService.Service[p].Status){a.dppServiceName=d[u].ListOfService.Service[p].ProductDetail.Name,a.dppOnDeviceNumber=d[u].SerialNumber,a.dppCudDate=d[u].ListOfService.Service[p].ProductDetail.ChargeUntilDate,a.dppServiceStatus="true"==e.get("cancelPackagesModel.isCancel").toString().toLowerCase(),a.dppServiceProductId=d[u].ListOfService.Service[p].UID;continue}}"Principal"===d[u].ListOfService.Service[p].ProductDetail.Type&&(a.cudValidation=e.formatCudDate(new Date(d[u].ListOfService.Service[p].ChargeUntilDate)))}if("true"==e.get("cancelPackagesModel.isCancel").toString().toLowerCase()&&null!==d[u].InsuranceDetail&&""!==d[u].InsuranceDetail&&void 0!=d[u].InsuranceDetail&&null!==d[u].InsuranceDetail.Name&&""!==d[u].InsuranceDetail.Name&&void 0!==d[u].InsuranceDetail.Name&&null!==d[u].InsuranceDetail.Status&&""!==d[u].InsuranceDetail.Status&&void 0!==d[u].InsuranceDetail.Status){var f=e.get("DCCStatus");f.contains(d[u].InsuranceDetail.Status.toString().toLowerCase())&&(a.insuranceServiceName=d[u].InsuranceDetail.Name,a.insuranceOnDeviceNumber=d[u].SerialNumber,a.insuranceCudDate=d[u].InsuranceDetail.ChargeUntilDate,a.insuranceServiceStatus=!0,a.insuranceServiceProductId=d[u].InsuranceDetail.UID)}null!==d[u].LinkedSmartcard&&void 0!==d[u].LinkedSmartcard&&""!==d[u].LinkedSmartcard?a=e.helperFunction.setDecoderDetail(a,d[u].ProductDetail.Name,d[u].LinkedSmartcard):null!==d[u].SerialNumber&&void 0!==d[u].SerialNumber&&""!==d[u].SerialNumber&&(a=e.helperFunction.setDecoderDetail(a,d[u].ProductDetail.Name,d[u].SerialNumber)),a="true"===e.get("cancelPackagesModel.isCancel").toString().toLowerCase()?e.helperFunction.setServicesDetailsForCancellation(a,d[u].ListOfService.Service):e.helperFunction.setServicesDetailsForSuspension(a,d[u].ListOfService.Service),null!==a.listOfPrincipalServices&&a.listOfPrincipalServices.length>0?e.cancelPackagesModel.set("princPre",!0):e.cancelPackagesModel.set("princPre",!1),null!==a&&(null!==c[l].TermOfPayment&&void 0!==c[l].TermOfPayment&&""!==c[l].TermOfPayment&&a.set("isMonthlyAgreement","1"==c[l].TermOfPayment),m||t.push(a))}}if(void 0!==d[u].SecondaryHardware&&null!==d[u].SecondaryHardware&&""!==d[u].SecondaryHardware&&void 0!==d[u].SecondaryHardware.Hardware&&null!==d[u].SecondaryHardware.Hardware&&""!==d[u].SecondaryHardware.Hardware)for(var b=null,C=e.helperFunction.createArrayForSingleElement(d[u].SecondaryHardware.Hardware),S=0;S<C.length;S++)if(null!==C[S].InsuranceDetail&&void 0!==C[S].InsuranceDetail&&""!==C[S].InsuranceDetail&&(null!==C[S].LinkedSmartcard&&void 0!==C[S].LinkedSmartcard&&""!==C[S].LinkedSmartcard.trim()?b={Key:C[S].LinkedSmartcard,Value:C[S].LinkedSmartcard,Text:kl.value(this.localeCancel+"smartCardNumber")}:null!==C[S].SerialNumber&&void 0!==C[S].SerialNumber&&""!==C[S].SerialNumber&&(b={Key:C[S].SerialNumber,Value:C[S].SerialNumber,Text:kl.value(this.localeCancel+"deviceNumber")}),void 0!==b&&null!==b&&""!==b)){if(e.smartcardsList.length>0){var D=e.smartcardsList.filter(function(e){return e.Key===b.Key});0===D.length&&e.smartcardsList.push(b)}else e.smartcardsList.push(b);if(hardwareDetailOfSecondaryDevice=Komodo.Models.HardwareAndServicesModel.create(),"true"==e.get("cancelPackagesModel.isCancel").toString().toLowerCase()&&null!==C[S].InsuranceDetail.Name&&""!==C[S].InsuranceDetail.Name&&void 0!==C[S].InsuranceDetail.Name&&null!==C[S].InsuranceDetail.Status&&""!==C[S].InsuranceDetail.Status&&void 0!==C[S].InsuranceDetail.Status){var y=e.get("DCCStatus");y.contains(C[S].InsuranceDetail.Status.toString().toLowerCase())&&(hardwareDetailOfSecondaryDevice.insuranceServiceName=C[S].InsuranceDetail.Name,hardwareDetailOfSecondaryDevice.insuranceOnDeviceNumber=C[S].SerialNumber,hardwareDetailOfSecondaryDevice.insuranceCudDate=C[S].InsuranceDetail.ChargeUntilDate,hardwareDetailOfSecondaryDevice.insuranceServiceStatus=!0,hardwareDetailOfSecondaryDevice.insuranceServiceProductId=C[S].InsuranceDetail.UID)}null!==C[S].LinkedSmartcard&&void 0!==C[S].LinkedSmartcard&&""!==C[S].LinkedSmartcard?hardwareDetailOfSecondaryDevice=e.helperFunction.setDecoderDetail(hardwareDetailOfSecondaryDevice,C[S].ProductDetail.Name,C[S].LinkedSmartcard):null!==C[S].SerialNumber&&void 0!==C[S].SerialNumber&&""!==C[S].SerialNumber&&(hardwareDetailOfSecondaryDevice=e.helperFunction.setDecoderDetail(hardwareDetailOfSecondaryDevice,C[S].ProductDetail.Name,C[S].SerialNumber)),null!==hardwareDetailOfSecondaryDevice.listOfPrincipalServices&&hardwareDetailOfSecondaryDevice.listOfPrincipalServices.length>0?e.cancelPackagesModel.set("princPre",!0):e.cancelPackagesModel.set("princPre",!1),null!==hardwareDetailOfSecondaryDevice&&(null!==c[l].TermOfPayment&&void 0!==c[l].TermOfPayment&&""!==c[l].TermOfPayment&&hardwareDetailOfSecondaryDevice.set("isAnnualAgreement","12"==c[l].TermOfPayment),t.push(hardwareDetailOfSecondaryDevice))}}}return t},formatCudDate:function(e){var t=new Date(e.setDate(e.getDate()+1));return new Date(new Date(t).setMonth(t.getMonth()+12))},showBlockingBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,6e3,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},publishCreateActivity:function(e,t,a,o){var s=this;Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(r){var n=Komodo.Models.CreateInteraction.create(),i=Komodo.Models.Case.create(),c=Komodo.Models.ListOfCaseData.create(),l="",d="";"true"===s.get("cancelPackagesModel.isCancel").toString().toLowerCase()?(l="18",d="Cancellation date",!0===t?i.set("Outcome","143"):i.set("Outcome","144")):(l="27",d="Suspension date",i.set("Outcome","185")),i.set("InteracteeName",Komodo.Services.securityService.session.domainUserName),i.set("InteractionLocation",r.data.countryDescription),i.set("InteractionMedium","1"),i.set("CustomerUID",e),i.set("Category",l),i.set("SubCategory","1"),i.set("Status","1"),i.set("Notes",a),payloadCaseData=Komodo.Models.CaseData.create();var u=Komodo.canonicalFacadeFactory(payloadCaseData,["CaseDataValueUri","Value"]);u.set("CaseDataValueUri",d),void 0==o&&(o=(new Date).toLocaleDateString("sv-SE")),u.set("Value",o),c.CaseData.push(payloadCaseData),i.set("ListOfCaseData",c);var h=Komodo.canonicalFacadeFactory(n,["Country","Case"]);h.set("Country",r.data.countryId),h.set("Case",i),s.publishRequestOnBus(n,"CreateInteraction","v1")})},publishRequestOnBus:function(e,t,a){var o=Komodo.Services.ManageViewingService,s="Event Message for "+t+" ";o.publishEvent(this,e,t,a).done(function(){Komodo.log(s+" has been published successfully")}).fail(function(){Komodo.log(s+" has been failed")})},messageCreateInteractionDeliveryFailure:function(){},messageFailureMessageEventReceived:function(e){},actions:{submitDisconnect:function(e){var t=this.get("cancelPackagesModel");if(void 0!==t.dateScheduleReconnection&&null!==t.dateScheduleReconnection&&""!==t.dateScheduleReconnection)Komodo.Controls.MessageBoxController.show(kl.value(this.localeCancel+"fillReq"),kl.value(this.localeCancel+"valMessage"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger");else if(this.canSubmitData(t,"Fill required data",{showInModal:!0})){var a=this;this.validateInputForCancel()&&a.submitDisconnectServices(e.content)}},submitSuspension:function(e){var t=this.get("cancelPackagesModel");if(this.canSubmitData(t,"Fill required data",{showInModal:!0})){var a=this;this.validateInputForCancel()&&a.submitSuspensionServices(e.content)}},findDeviceSmartcard:function(){var e=this,t=e.get("validators.searchDeviceTextValidator");if(t.validate(),t.errors&&t.errors.length>0){var a=kl.value("controller.invalidDataMessage")+"<br />"+t.errors[0];Komodo.Controls.MessageBoxController.show(kl.value(e.localeCancel+"valSmartcard"),a,Komodo.Controls.MessageBoxOkButtons,this,"idSearchDeviceTextValidator","warning")}else if(e.cancelPackagesModel&&e.cancelPackagesModel.searchDeviceText){var o=e.cancelPackagesModel.searchDeviceText,s=$.grep($.makeArray(e.smartcardsList),function(t){return t.Value===e.cancelPackagesModel.searchDeviceText});s.length>0?(e.cancelPackagesModel.set("smartcards",s[0].Value),e.cancelPackagesModel.set("searchDeviceText",o)):Komodo.Controls.MessageBoxController.show(kl.value(e.localeCancel+"valSmartcard"),kl.value(e.localeCancel+"searchResult"),Komodo.Controls.MessageBoxOkButton,e,"idManageViewing")}}},cancelAllChanged:function(){var e=this;e.cancelPackagesModel.set("isScheduleReconnection",!1),e.cancelPackagesModel.set("dateScheduleReconnection",void 0);var a=e.cancelPackagesModel.get("allHardwares");if(e.cancelPackagesModel.isDisconnectAll){if(a.length>0){var o=a[0].listOfPrincipalServices;for(n=0;n<o.length;n++)o[n].set("stateOfToggleButtonOfService",!1),o[n].set("stateOfDatePickerPrincipleService",!1),o[n].set("serviceCUD",void 0);a[0].set("stateOfToggleButtonOfInsuranceService",!1),a[0].set("stateOfDatePickerInsuranceService",!0),a[0].set("isDisconnectAll",!0),a[0].set("principalCUD",void 0),a[0].set("InsuranceCUD",void 0),!1===a[0].disableDCCforCancellation&&(a[0].set("stateOfDatePickerInsuranceService",!0),a[0].set("stateOftoggleforInsuranceService",!1),a[0].set("stateOfToggleButtonOfInsuranceService",!1)),a[0].set("stateOfToggleButtonOfDPPService",!1),a[0].set("dppCudDate",void 0),"false"===e.get("cancelPackagesModel.isCancel").toString().toLowerCase()?e.get("isScheduleSuspensionDisabled")&&e.get("cancelPackagesModel").set("dateDisconnectAll",new Date(Date.UTC((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()))):"true"===e.get("cancelPackagesModel.isCancel").toString().toLowerCase()&&(e.get("cancelPackagesModel.dppServiceAvailable")?e.get("isCancellationAllowed")&&(e.cancelPackagesModel.set("isScheduleCancellationDisabled",!0),e.get("cancelPackagesModel").set("dateDisconnectAll",new Date(Date.UTC((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())))):e.cancelPackagesModel.set("isScheduleCancellationDisabled",!1));var n,i=a[0].listOfAddOnServices,c=a[0].listOfAccessServices;for(j=0;j<i.length;j++)i[j].set("stateOfToggleButtonOfService",!1),i[j].set("stateOfDatePickerAddonAccessService",!0),i[j].set("serviceCUD",void 0);for(p=0;p<c.length;p++)c[p].set("stateOfToggleButtonOfService",!1),c[p].set("stateOfDatePickerAddonAccessService",!0),c[p].set("serviceCUD",void 0);e.get("cancelPackagesModel").set("allHardwares",a)}}else if(a.length>0){var o=a[0].listOfPrincipalServices;for(r=0;r<o.length;r++)o[r].set("stateOfToggleButtonOfService",!0),o[r].set("stateOfDatePickerPrincipleService",!1);a[0].set("stateOfToggleButtonOfPrincipleService",!0),a[0].set("stateOfToggleButtonOfInsuranceService",!0),a[0].set("stateOfToggleButtonOfDPPService",!0),a[0].set("stateOfDatePickerPrincipleService",!1),a[0].set("isDisconnectAll",!1),e.get("cancelPackagesModel").set("dateDisconnectAll","");var n,i=a[0].listOfAddOnServices,c=a[0].listOfAccessServices;for(t=0;t<i.length;t++)i[t].set("stateOfToggleButtonOfService",!0),i[t].set("stateOfDatePickerAddonAccessService",!1);for(s=0;s<c.length;s++)c[s].set("stateOfToggleButtonOfService",!0),c[s].set("stateOfDatePickerAddonAccessService",!1);e.get("cancelPackagesModel").set("allHardwares",a)}}.observes("cancelPackagesModel.isDisconnectAll"),checkAnyServiceAvailableForCancel:function(e){var t=0;""!==e[0].insuranceServiceName&&null!==e[0].insuranceServiceName&&void 0!==e[0].insuranceServiceName&&t++;for(var a=e[0].listOfPrincipalServices,o=0;o<a.length;o++)""!==a[o].serviceName&&null!==a[o].serviceName&&void 0!==a[o].serviceName&&t++;""!==e[0].principalServiceName&&null!==e[0].principalServiceName&&void 0!==e[0].principalServiceName&&t++;for(var s=e[0].listOfAddOnServices,r=0;r<s.length;r++)""!==s[r].serviceName&&null!==s[r].serviceName&&void 0!==s[r].serviceName&&t++;for(var n=0;n<e[0].listOfAccessServices.length;n++)""!==e[0].listOfAccessServices[n].serviceName&&null!==e[0].listOfAccessServices[n].serviceName&&void 0!==e[0].listOfAccessServices[n].serviceName&&t++;return""!==e[0].dppServiceName&&null!==e[0].dppServiceName&&void 0!==e[0].dppServiceName&&t++,0!==t},smartcardSelectionChanged:function(){var e=this,t=!1;if(e.cancelPackagesModel.set("searchDeviceText",void 0),e.cancelPackagesModel.set("princPre",!1),e.cancelPackagesModel.set("dppServiceAvailable",!1),"false"===e.get("cancelPackagesModel.isCancel").toString().toLowerCase()&&e.get("allowAnnualSubscriberOnly")&&(t=!0),null!==e.cancelPackagesModel.smartcards&&void 0!==e.cancelPackagesModel.smartcards&&""!==e.cancelPackagesModel.smartcards){e.cancelPackagesModel.set("isDisconnectPackageVisible",!0);for(var a=e.cancelPackagesModel.get("hardwareAndServices").filter(function(t){return t.linkedSmartCard.toString().toLowerCase()===e.cancelPackagesModel.smartcards.toString().toLowerCase()}),o=0;o<e.smartcardsList.length;o++)e.smartcardsList[o].Value==e.cancelPackagesModel.smartcards&&e.cancelPackagesModel.set("smartcardInformation",e.smartcardsList[o].Text+" "+e.smartcardsList[o].Value);if(e.set("arrayOfActiveService",a),void 0!=a||null!=a&&a.length>0){null!=a[0].listOfPrincipalServices&&""!=a[0].listOfPrincipalServices&&void 0!=a[0].listOfPrincipalServices&&a[0].listOfPrincipalServices.length>0&&e.cancelPackagesModel.set("princPre",!0);for(var s=0,r=0;r<a.length;r++){if(a[r].listOfPrincipalServices.length>0&&a[r].listOfPrincipalServices.forEach(function(a){e.get("quarterlyProducts").contains(a.serviceName.toLowerCase())&&"active"==a.serviceStatus.toLowerCase()&&(t=!1)}),"false"==e.get("cancelPackagesModel.isCancel").toString().toLowerCase()){if(a[0].listOfPrincipalServices.length>0||a[0].listOfAccessServices.length>0||a[0].listOfAddOnServices.length>0)if(e.isSPLPrincipalPackage()){e.cancelPackagesModel.set("isDisconnectPackageVisible",!1);Komodo.Controls.MessageBoxController.show(kl.value(e.localeCancel+"valSmartcard"),kl.value(e.localeCancel+"notAllowedSuspensionForSplProducts"),Komodo.Controls.MessageBoxOkButton,e,"id5446673","warning");e.cancelPackagesModel.set("smartcards",null)}else if(t&&a[r].isMonthlyAgreement)return Komodo.Controls.MessageBoxController.show(kl.value(e.localeCancel+"valSmartcard"),kl.value(e.localeCancel+"notAllowedSuspensionForMonthlyCustomer"),Komodo.Controls.MessageBoxOkButton,e,"id5446673",""),e.cancelPackagesModel.set("smartcards",null),void e.cancelPackagesModel.set("isDisconnectPackageVisible",!1)}else if(t&&a[r].isMonthlyAgreement)return Komodo.Controls.MessageBoxController.show(kl.value(e.localeCancel+"valSmartcard"),kl.value(e.localeCancel+"notAllowedSuspensionForMonthlyCustomer"),Komodo.Controls.MessageBoxOkButton,e,"id5446673",""),e.cancelPackagesModel.set("smartcards",null),void e.cancelPackagesModel.set("isDisconnectPackageVisible",!1);s++;var n=new Date((new Date).toLocaleDateString("sv-SE")),i=new Date(a[r].insuranceCudDate).setDate(new Date(a[r].insuranceCudDate).getDate()+1)
;if(void 0!=a[r].listOfPrincipalServices||null!=a[r].listOfPrincipalServices)for(var c=0;c<a[r].listOfPrincipalServices.length;c++){s++;var l="serviceCUDValidator"+s;e.registerValidator(a[r].listOfPrincipalServices[c],"serviceCUD",{functions:Komodo.UI.Validators.DatePickerValidator,type:"date",minDate:n,isRequired:!1,displayName:"Cancelation Date",name:l}),a[r].listOfPrincipalServices[c].set("serviceCUDValidator",e.validators[l])}if(a[r].dppServiceStatus){var d="dppCudDateValidator"+s;e.registerValidator(a[r],"dppCudDate",{functions:Komodo.UI.Validators.DatePickerValidator,type:"date",minDate:n,isRequired:!1,displayName:"Cancelation Date",name:d}),a[r].set("dppCudDateValidator",e.validators[d])}if(a[r].insuranceServiceStatus){var u="insuranceCUDValidator"+s;(1==e.get("isDCCScheduleCancellationAllowed")&&0==e.get("isDCCImmediateCancellationAllowed")||1==e.get("NoRoleBasedDCCCancellation"))&&(n=new Date(new Date(i).toLocaleDateString("sv-SE"))),e.registerValidator(a[r],"InsuranceCUD",{functions:Komodo.UI.Validators.DatePickerValidator,type:"date",minDate:n,isRequired:!1,displayName:"Cancelation Date",name:u}),a[r].set("insuranceCUDValidator",e.validators[u])}if(void 0!=a[r].listOfAddOnServices||null!=a[r].listOfAddOnServices)for(var h=0;h<a[r].listOfAddOnServices.length;h++){s++;var l="serviceCUDValidator"+s;e.registerValidator(a[r].listOfAddOnServices[h],"serviceCUD",{functions:Komodo.UI.Validators.DatePickerValidator,type:"date",minDate:n,isRequired:!1,displayName:"Cancelation Date",name:l}),a[r].listOfAddOnServices[h].set("serviceCUDValidator",e.validators[l])}if(void 0!=a[r].listOfAccessServices||null!=a[r].listOfAccessServices)for(var m=0;m<a[r].listOfAccessServices.length;m++){s++;var g="serviceAccessCUDValidator"+s;e.registerValidator(a[r].listOfAccessServices[m],"serviceCUD",{functions:Komodo.UI.Validators.DatePickerValidator,type:"date",minDate:n,isRequired:!1,displayName:"Cancelation Date",name:g}),a[r].listOfAccessServices[m].set("serviceAccessCUDValidator",e.validators[g])}e.registerValidator(e.cancelPackagesModel,"dateDisconnectAll",{functions:Komodo.UI.Validators.DatePickerValidator,type:"date",minDate:n,isRequired:!1,displayName:"Cancelation Date"})}}if(e.cancelPackagesModel.get("hardwareAndServices").length>0&&void 0!=a&&a.length>0&&e.checkAnyServiceAvailableForCancel(a)){if(e.get("cancelPackagesModel").set("allHardwares",a),"true"==e.get("cancelPackagesModel.isCancel").toString().toLowerCase()){for(p=0;p<e.dppSmartcardsArray.length;p++)if(null!=e.cancelPackagesModel.smartcards&&void 0!=e.cancelPackagesModel.smartcards&&e.cancelPackagesModel.smartcards==e.dppSmartcardsArray[p]&&(e.cancelPackagesModel.set("dppServiceAvailable",!0),!e.isCancellationAllowed))return Komodo.Controls.MessageBoxController.show(kl.value(e.localeCancel+"cancellationNotAllowedtitle"),kl.value(e.localeCancel+"cancellationNotAllowed"),Komodo.Controls.MessageBoxOkButton,e,"id5446673","warning"),void e.suspendCancelRadioButtonSelectionChanged();if(!e.isCancellationAllowed){var v=e.cancelPackagesModel.get("allHardwares");for(o=0;o<e.dppSmartcardsArray.length;o++)v.length>0&&e.dppSmartcardsArray.length>0&&e.cancelPackagesModel.smartcards==e.dppSmartcardsArray[o]&&(null==v[0].dppServiceName&&void 0==v[0].dppServiceName&&""==v[0].dppServiceName||(v[0].set("disableStateOfToggleButtonOfDPPService",!0),Komodo.Controls.MessageBoxController.show(kl.value(e.localeCancel+"cancellationNotAllowedtitle"),kl.value(e.localeCancel+"cancellationNotAllowed"),Komodo.Controls.MessageBoxOkButton,e,"id5446673","warning")))}}if(!e.get("isDCCImmediateCancellationAllowed")&&!e.get("isDCCScheduleCancellationAllowed")&&0==e.get("NoRoleBasedDCCCancellation")){var f=e.cancelPackagesModel.get("allHardwares");f.length>0&&f[0].insuranceServiceStatus&&(f[0].set("disableDCCforCancellation",!1),Komodo.Controls.MessageBoxController.show(kl.value(e.localeCancel+"cancellationNotAllowedtitle"),kl.value(e.localeCancel+"DCCcancellationNotAllowed"),Komodo.Controls.MessageBoxOkButton,that,"id5446673","warning"))}if(e.get("disableOtherProductsthanDCC")&&e.isCancel){e.cancelPackagesModel.get("allHardwares")[0].set("onlyDCCCancellationAllowed",!1)}}else e.cancelPackagesModel.set("isDisconnectPackageVisible",!1),"true"==e.get("cancelPackagesModel.isCancel").toString().toLowerCase()?Komodo.Controls.MessageBoxController.show(kl.value(e.localeCancel+"valSmartcard"),kl.value(e.localeCancel+"noServices"),Komodo.Controls.MessageBoxOkButton,e,"id5446673",""):Komodo.Controls.MessageBoxController.show(kl.value(e.localeCancel+"valSmartcard"),kl.value(e.localeCancel+"noServicesForSuspension"),Komodo.Controls.MessageBoxOkButton,e,"id5446673","");e.initialStatusOfPackages();var b=e.get("CancellationReasons");for(e.cancelPackagesModel.set("reasonCodesList",[]),o=0;o<b.length;o++){var C=b[o].split(":"),S=C[0],D=C[1];e.cancelPackagesModel.reasonCodesList.pushObject({Key:S,Value:D})}}else e.cancelPackagesModel.set("isDisconnectPackageVisible",!1)}.observes("cancelPackagesModel.smartcards"),reasoncodeSelectionChanged:function(){var e=this,t="";if(null!==e.cancelPackagesModel.reasonCodes&&void 0!==e.cancelPackagesModel.reasonCodes&&""!==e.cancelPackagesModel.reasonCodes){var a=$.grep(e.cancelPackagesModel.reasonCodesList,function(t){return t.Value==parseInt(e.cancelPackagesModel.reasonCodes)});switch(parseInt(e.cancelPackagesModel.reasonCodes)){case 1041:t=e.get("CancellationMsgImmigration"),e.resonCodeMessageBox(a[0].Key,t);break;case 22:t=e.get("CancellationMsgStopAgreement"),e.resonCodeMessageBox(a[0].Key,t)}}}.observes("cancelPackagesModel.reasonCodes"),resonCodeMessageBox:function(e,t){var a=this;Komodo.Controls.MessageBoxController.show(kl.value(e),t,Komodo.Controls.MessageBoxYesNoButtons,this,"id5446673","warning").response=function(e){"yes"===e||a.set("cancelPackagesModel.reasonCodes",void 0)}},suspendCancelRadioButtonSelectionChanged:function(){var e=this;e.initialStatusOfPackages(),e.set("reasonCodesList",[]),e.cancelPackagesModel.set("f",null),e.cancelPackagesModel.set("isDisconnectPackageVisible",!1),"true"===e.get("isInitialised").toString()&&e.bindPackagesInformation(),e.set("isCancelPackage",!1),e.set("isSuspendPackage",!1),"true"===e.get("cancelPackagesModel.isCancel").toString().toLowerCase()?e.set("isCancelPackage",!0):e.set("isSuspendPackage",!0)}.observes("cancelPackagesModel.isCancel"),initialStatusOfPackages:function(){var e=this,t=e.cancelPackagesModel.get("allHardwares");if(t.length>0){var a=t[0].listOfPrincipalServices;for(o=0;o<a.length;o++)a[o].set("stateOfToggleButtonOfService",!0),a[o].set("serviceCUD",void 0);t[0].set("disableStateOfToggleButtonOfDPPService",!e.isCancellationAllowed),t[0].set("isDisconnectAll",!1),t[0].set("principalCUD",void 0),"false"===e.cancelPackagesModel.get("isCancel")?t[0].set("isScheduleSuspensionDisabled",e.get("isScheduleSuspensionDisabled")):e.cancelPackagesModel.get("isScheduleCancellationDisabled")&&e.get("cancelPackagesModel.dppServiceAvailable")?t[0].set("isScheduleSuspensionDisabled",!0):t[0].set("isScheduleSuspensionDisabled",!1),e.get("cancelPackagesModel").set("dateDisconnectAll","");var o,s=t[0].listOfAddOnServices,r=t[0].listOfAccessServices;for(j=0;j<s.length;j++)s[j].set("stateOfToggleButtonOfService",!0),s[j].set("serviceCUD",void 0);for(k=0;k<r.length;k++)r[k].set("stateOfToggleButtonOfService",!0),r[k].set("serviceCUD",void 0);e.get("cancelPackagesModel").set("isDisconnectAll",!1),e.get("cancelPackagesModel").set("isScheduleReconnection",!1),e.get("cancelPackagesModel").set("dateScheduleReconnection",void 0),e.get("cancelPackagesModel").set("allHardwares",t)}},getScheduledChanges:function(){var e=this;Komodo.Services.queryService.getJSON("/ScheduledChanges/GetScheduledChanges?customerNumber="+e.helperFunction.getCustomerIdToRetrieveData(),{async:!1}).done(function(t){!Ember.isEmpty(t.ScheduleList)&&t.ScheduleList.length>0&&(e.cancelPackagesModel.scheduledChangesList.clear(),e.cancelPackagesModel.scheduledChangesList.pushObjects(t.ScheduleList),e.getPreviousSchedules())}).error(function(t){var a=JSON.stringify(t);Komodo.log(kl.value(e.localeDisconnect+"ajaxError")+a),Komodo.Controls.MessageBoxController.show(kl.value(e.localeDisconnect+"technicalError"),a,Komodo.Controls.MessageBoxOkButton,e,"id123456","danger").response=function(e){}})},getPreviousSchedules:function(){var e=this;e.cancelPackagesModel.deleteScheduleList.clear(),Ember.isEmpty(e.cancelPackagesModel.getSelectedProductIds)||e.cancelPackagesModel.getSelectedProductIds.forEach(function(t){e.cancelPackagesModel.scheduledChangesList.forEach(function(a){Ember.isEmpty(a.ChildSchedules)||a.ChildSchedules.forEach(function(o){o.ProductId.toString()!==t||e.cancelPackagesModel.deleteScheduleList.contains(a.ScheduleId)||(e.cancelPackagesModel.set("isScheduledChangesExist",!0),e.cancelPackagesModel.deleteScheduleList.push(a.ScheduleId))})})})},isSPLPrincipalPackage:function(){var e=this,t=!1,a=e.get("SplPrincipalpackagesList"),o=e.get("arrayOfActiveService");if(a.length>0&&o.length>0)for(var s=0;s<a.length;s++)for(var r=0;r<o.length;r++)t=a[s].toString().toLowerCase()==o[r].listOfPrincipalServices[r].serviceUid.toString().toLowerCase();return t},stop:function(){this.uninitializeCancelPackagesConstants(),this.set("smartcardsList",[]),this.set("reasonCodesList",[]),this.set("hardwareAndServicesArray",[]),this.set("notes",""),this.set("notesArray",[]),this.set("deviceAndServicesToDisconnect",void 0),this.set("isScheduleSuspensionDisabled",void 0),this.set("isDCCScheduleCancellationAllowed",void 0),this.set("isDCCImmediateCancellationAllowed",void 0),this.set("disableOtherProductsthanDCC",void 0),this.set("NoRoleBasedDCCCancellation",void 0),this.set("productTypeAndCategoryAndProductDetail",[]),this._super()},arrayOfActiveService:[],errorMessage:[],errorOnDate:[],localeCancel:"locale.manageviewing:cancelPackages.",redirectFlag:!1,notes:"",errorMessageForFail:"",isCancelPackage:!1,isSuspendPackage:!1,isScheduleSuspensionDisabled:void 0,allowAnnualSubscriberOnly:void 0,isDCCScheduleCancellationAllowed:void 0,isDCCImmediateCancellationAllowed:void 0,disableOtherProductsthanDCC:void 0,NoRoleBasedDCCCancellation:void 0,productTypeAndCategoryAndProductDetail:[],isDPPHardwareAndBundleProductAllowed:!1,searchPlaceHolder:void 0}),Komodo.Application.LinkDelinkController=Komodo.UI.Controller.extend({_locale:"",_dropDownAllDeviceList:[],_dropDownFromDeviceList:[],_dropDownToDeviceList:[],_columnDeviceDataGrid:[],_columnQuoteDataGrid:[],_customerAccountError:null,_customerDetailsError:null,_cacheHardwareModelDesc:[],init:function(){try{this._super();var e=this;Komodo.log("Constructing Link Delink controller."),e.set("processVersion","v1.1"),e.set("processName","Link Delink"),this.requiresDependency("_stockService",{singleton:Komodo.Services.stockService}),this.requiresDependency("_financialAccountService",{singleton:Komodo.Services.financialAccountService})}catch(e){this.handleException("init - Link Delink",e,!0,!0)}},start:function(){try{this._super();var e=this;e._locale="locale.manageStock:linkDelink.",e.registerModel("dataModel",Komodo.Models.LinkDelinkModel),e.set("financialAccountModel",{}),e.set("invalidAddDevice",!1),e.setupGrid(),this.registerValidations();var t=Komodo.Services.customerProfileService;if(void 0==t.getCustomerPersonalDetail())return Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"customerNotLoaded"),kl.value(e._locale+"customerIsRequired"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"),void this.transitionToRoute("/manageViewing");e.dataModel.set("customerID",t.getCustomerPersonalDetail().customerNo),e.set("financialAccountModel.firstName",t.getCustomerPersonalDetail().firstName),e.set("financialAccountModel.lastName",t.getCustomerPersonalDetail().lastName),this.getStockService().fillObjectFromCachedFileServiceArray(this,"_cacheHardwareModelDesc","HardwareModel"),this.getStockService().setCountryISO(this.get("dataModel"),"countryISO",function(){e.retrieveHardware(),e.loadAssociateProductsEvent()}),Komodo.UI.cacheDataService.getHardwareCpc()}catch(e){this.handleException("start",e,!0,!0)}},stop:function(){this._super()},registerValidations:function(){var e=this;this.registerValidator(this.get("dataModel"),"commercialSerialNumber",{isRequired:!0,displayName:kl.value(e._locale+"deviceSerialNumber"),minLength:1,maxLength:21,groups:"commercial"})},getStockService:function(){return this.get("_stockService")},getFinancialAccountService:function(){return this.get("_financialAccountService")},actions:{movePackages:function(){try{var e=this;void 0==e.dataModel.get("fromDevice")?Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"linkDelink"),"<strong>"+kl.value(e._locale+"selectFromdevice")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"):void 0==e.dataModel.get("toDevice")?Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"linkDelink"),"<strong>"+kl.value(e._locale+"selectToDevice")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"):this.publishLinkUnlinkDevice()}catch(e){this.handleException("movePackages",e,!0,!0)}},searchDeviceSingle:function(){try{var e=this;if(!e.canSubmitData(e.get("dataModel"),kl.value(e._locale+"serialNumber"),{group:"commercial",showInModal:!1}))return;e.retrieveHardware()}catch(e){this.handleException("searchDeviceSingle",e,!0,!0)}},backDeviceSingle:function(){try{var e=this;Komodo.Services.busyService.start(!0,e.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,this._messageTimeout,"blocking",this),Komodo.Services.busyService.stop(e.get("processId"),"blocking"),this.transitionToRoute("/manageViewing")}catch(e){this.handleException("backDeviceSingle",e,!0,!0)}},addDevice:function(){try{this.addDeviceValidation()}catch(e){this.handleException("addDevice",e,!0,!0)}}},addDeviceValidation:function(){try{var e=this;e.get("financialAccountModel.loadCustomerAccountInfoFlag")?e.get("financialAccountModel.loadCustomerDetailsFlag")?null==e.get("dataModel.deviceNumber")||""==e.get("dataModel.deviceNumber")?Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"linkDelinkAddDevice"),"<strong>"+kl.value(e._locale+"enterDecoderSerial")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"):this.publishValidateHardwarePairingEvent(e.get("dataModel.deviceNumber")):Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"linkDelinkAddDevice"),"<strong>"+kl.value(e._locale+"customerDetailsNotLoaded")+" "+e._customerDetailsError+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"):Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"linkDelinkAddDevice"),"<strong>"+kl.value(e._locale+"accountInformationNotLoaded")+" "+e._customerAccountError+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning")}catch(e){this.handleException("addDeviceValidation",e,!0,!0)}},loadAssociateProductsEvent:function(){try{this.set("financialAccountModel.loadCustomerAccountInfoFlag",!1),this.set("financialAccountModel.loadCustomerDetailsFlag",!1),this.loadCustomerAccountInfo(),this.loadCustomerDetails()}catch(e){this.handleException("loadAssociateProductsEvent",e,!0,!0)}},loadCustomerAccountInfo:function(){try{var e=this,t=e.dataModel.get("customerID");e.set("financialAccountModel.customerPaymentDetail",{});var a=!0,o="";void 0!=t?e.getFinancialAccountService().retrieveFinancialAccounts(t).done(function(t){var s=t;switch(s){case void 0:case null:case"":a=!1,o=kl.value(e._locale+"noFinancialAccount");break;default:switch(s.ResponseMessage){case void 0:case null:case"":a=!1,o=kl.value(e._locale+"noFinancialAccount");break;default:switch(s.ResponseMessage.Payload){case void 0:case null:case"":a=!1,o=kl.value(e._locale+"noFinancialAccount");break;default:var r=s.ResponseMessage.Payload.ListOfAccount;switch(r){case void 0:case null:case"":break;default:var n=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),i=n.createArrayForSingleElement(r.Account),c=i.filter(n.getOpenAccounts);if(c.length>0){var l=!0;$.each(c,function(t,s){if(s.Status==Komodo.AccountStatus.OPEN&&(s.Type==Komodo.AccountTypes.DSTV_RES||s.Type==Komodo.AccountTypes.GOTV_RES))switch(s.PaymentDetail.MethodOfPayment){case Komodo.MethodOfPayment.CASH:case Komodo.MethodOfPayment.PAYROLL:e.set("financialAccountModel.customerPaymentDetail.AHVStatus",void 0),e.set("financialAccountModel.customerPaymentDetail.AccountNumber",void 0),e.set("financialAccountModel.customerPaymentDetail.BankName",void 0),e.set("financialAccountModel.customerPaymentDetail.BranchCode",void 0),e.set("financialAccountModel.customerPaymentDetail.BranchName",void 0),e.set("financialAccountModel.customerPaymentDetail.DebitOrderDay",s.PaymentDetail.DebitOrderDay),e.set("financialAccountModel.customerPaymentDetail.MethodOfPayment",s.PaymentDetail.MethodOfPayment),e.set("financialAccountModel.customerPaymentDetail.PayerIDNumber",void 0),e.set("financialAccountModel.customerPaymentDetail.PayerIDType",void 0),e.set("financialAccountModel.customerPaymentDetail.BankAccountType",void 0),e.set("financialAccountModel.customerPaymentDetail.PayerName",void 0),e.set("financialAccountModel.customerPaymentDetail.PayerSurname",void 0);break;default:e.validateAccountDetails(s)||(a=!1,o=kl.value(e._locale+"incompleteAccountDetails")),s.PaymentDetail.MethodOfPayment===Komodo.MethodOfPayment.AHV_PENDING&&e.set("financialAccountModel.customerPaymentDetail.AHVStatus",!0),e.set("financialAccountModel.customerPaymentDetail.AccountNumber",s.PaymentDetail.AccountNumber),e.set("financialAccountModel.customerPaymentDetail.BankName",s.PaymentDetail.BankName),e.set("financialAccountModel.customerPaymentDetail.BranchCode",s.PaymentDetail.BranchCode),e.set("financialAccountModel.customerPaymentDetail.BranchName",s.PaymentDetail.BranchName),e.set("financialAccountModel.customerPaymentDetail.DebitOrderDay",s.PaymentDetail.DebitOrderDay),e.set("financialAccountModel.customerPaymentDetail.MethodOfPayment",s.PaymentDetail.MethodOfPayment),e.set("financialAccountModel.customerPaymentDetail.PayerIDNumber",s.PaymentDetail.PayerIDNumber),e.set("financialAccountModel.customerPaymentDetail.BankAccountType",s.PaymentDetail.BankAccountType),e.set("financialAccountModel.customerPaymentDetail.PayerIDType",s.PaymentDetail.PayerIDType),e.set("financialAccountModel.customerPaymentDetail.PayerName",s.PaymentDetail.PayerName),e.set("financialAccountModel.customerPaymentDetail.PayerSurname",s.PaymentDetail.PayerSurname),l=!1}return l}),void 0===e.get("financialAccountModel.customerPaymentDetail.MethodOfPayment")&&(a=!1,o=kl.value(e._locale+"noMethodOfPayment"));break}a=!1,o=kl.value(e._locale+"noFinancialAccount")}}}}e.set("financialAccountModel.loadCustomerAccountInfoFlag",a),a||(e.set("dataModel.invalidAddDevice",!0),e._customerAccountError=o)}).fail(function(t){t=JSON.parse(t),Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"linkDelink"),t.responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}):Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"linkDelink"),"<strong>"+kl.value(e._locale+"customerNotFound")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}catch(e){this.handleException("loadCustomerAccountInfo",e,!0,!0)}},validateAccountDetails:function(e){try{return!(Ember.empty(e.PaymentDetail.AccountNumber)||isNaN(e.PaymentDetail.AccountNumber)||Ember.empty(e.PaymentDetail.BankName)||Ember.empty(e.PaymentDetail.BankAccountType)||Ember.empty(e.PaymentDetail.BranchCode)||Ember.empty(e.PaymentDetail.BranchName)||isNaN(e.PaymentDetail.DebitOrderDay))}catch(e){this.handleException("validateAccountDetails",e,!0,!0)}},loadCustomerDetails:function(){try{var e=this,t=e.dataModel.get("customerID"),a=!0,o="";void 0!=t&&e.getFinancialAccountService().retrieveCustomer(t).done(function(t){var s=t;if(void 0!=s&&void 0!=s.ResponseMessage.Payload.CustomerDetail){e.set("financialAccountModel._customerClassSelected",s.ResponseMessage.Payload.CustomerDetail.Class),e.set("financialAccountModel._customerTypeSelected",s.ResponseMessage.Payload.CustomerDetail.Type),e.set("financialAccountModel.data",{}),e.get("financialAccountModel._customerClassSelected")==GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_SPECIALIST")&&void 0!=e.get("financialAccountModel._customerTypeSelected")&&(e.get("financialAccountModel._customerTypeSelected")==GetCustomerTypesConstants("CustomerTypesConstants","SALES_PROMOTERS")||e.get("financialAccountModel._customerTypeSelected")==GetCustomerTypesConstants("CustomerTypesConstants","DIPLOMAT")||e.get("financialAccountModel._customerTypeSelected")==GetCustomerTypesConstants("CustomerTypesConstants","SHAREHOLDERS")?e.set("financialAccountModel.data.radioButtonPaymentMethod",[{title:"Monthly",value:"1"},{title:"Annually",value:"12"}]):e.set("financialAccountModel.data.radioButtonPaymentMethod",[{title:"Monthly",value:"1"}]));var r=$.grep(s.ResponseMessage.Payload.CustomerDetail.ListOfAddress.Address,function(e){return"3"===e.Type});if(1==r.length&&void 0!==r[0])switch(""!==r[0].Country&&void 0!==r[0].Country&&null!==r[0].Country&&""!==r[0].Province&&void 0!==r[0].Province&&null!==r[0].Province&&""!==r[0].City&&void 0!==r[0].City&&null!==r[0].City&&""!==r[0].Suburb&&void 0!==r[0].Suburb&&null!==r[0].Suburb&&""!==r[0].PostCode&&void 0!==r[0].PostCode&&null!==r[0].PostCode){case!0:switch(e.set("financialAccountModel.addressDetails",{}),e.set("financialAccountModel.addressDetails.country",r[0].Country),e.set("financialAccountModel.addressDetails.province",r[0].Province),e.set("financialAccountModel.addressDetails.city",r[0].City),e.set("financialAccountModel.addressDetails.suburb",r[0].Suburb),e.set("financialAccountModel.addressDetails.postalCode",r[0].PostCode),e.set("financialAccountModel.addressDetails.unit",r[0].HouseNumber),e.set("financialAccountModel.addressDetails.building",r[0].BuildingName),e.set("financialAccountModel.addressDetails.streetNo",r[0].BuildingNumber),e.set("financialAccountModel.addressDetails.streetName",r[0].Street),e.set("financialAccountModel.addressDetails.boxOrSuite",r[0].PostBoxNumber),e.financialAccountModel.addressDetails.country){case"zaf":case"nam":e.set("financialAccountModel.marketSegment",GetProductsConstants("ProductsConstants","MARKET_SEGMENT"));break;case"lso":e.set("financialAccountModel.marketSegment",GetProductsConstants("ProductsConstants","LESOTHO_MARKET_SEGMENT"));break;default:e.set("financialAccountModel.marketSegment",GetProductsConstants("ProductsConstants","MARKET_SEGMENT"))}null!=e.financialAccountModel.allProductService&&0!==e.financialAccountModel.allProductService.length||(e.set("financialAccountModel.allProductService",[]),e.set("financialAccountModel.allProductAddOn",[]),e.set("financialAccountModel.allInsurance",[]),e.set("financialAccountModel.allAccessService",[]),e.set("financialAccountModel.allProductCategories",[]));break;default:a=!1,o=kl.value(e._locale+"captureMissingAddress")}}e.set("financialAccountModel.loadCustomerDetailsFlag",a),a||(e.set("dataModel.invalidAddDevice",!0),e._customerDetailsError=o)})}catch(e){this.handleException("loadCustomerDetails",e,!0,!0)}},publishValidateHardwarePairingEvent:function(e){try{var t=this,a=Komodo.Models.ValidateHardwarePairing.create(),o=Komodo.canonicalFacadeFactory(a,["Country","DecoderSerialNumber","SmartcardSerialNumber"]);o.set("Country",t.dataModel.get("countryISO")),o.set("SmartcardSerialNumber",e),t.getStockService().publishRequestOnBus(this,this.get("processId"),a,"ValidateHardwarePairing","v1")}catch(e){this.handleException("publishValidateHardwarePairingEvent",e,!0,!0)}},messageHardwareRetrievedReceived:function(e){try{Komodo.Services.busyService.stop(this.get("processId"),"blocking");var t=this;if(null!=e.ResponseMessage.Payload.ListOfHardware&&null!=e.ResponseMessage.Payload.ListOfHardware.Hardware)switch(e.ResponseMessage.Payload.ListOfHardware.Hardware.Status.toUpperCase()){case"MATCHING DEVICE NOT FOUND":Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"linkDelink"),"<strong>"+kl.value(t._locale+"notPaired")+"</strong>",Komodo.Controls.MessageBoxYesNoButtons,this,"id5446673","warning").response=function(e){"yes"===e&&t.transitionToRoute("/customPairDevice")};break;case"AVAILABLE FOR USE":var a=e.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcardStatus;switch(a&&(a=a.toUpperCase()),a){case void 0:case"":case null:case"AVAILABLE FOR USE":t.set("financialAccountModel.ListOfHardware",e.ResponseMessage.Payload.ListOfHardware),null==t.get("financialAccountModel.ListOfHardware.Hardware.SmartcardDetail")&&t.set("financialAccountModel.ListOfHardware.Hardware.SmartcardDetail",{}),e.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcard&&t.set("financialAccountModel.ListOfHardware.Hardware.SmartcardDetail.UID",e.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcard),null==t.get("financialAccountModel.ListOfHardware.Hardware.ProductDetail")&&t.set("financialAccountModel.ListOfHardware.Hardware.ProductDetail",{});var o="Hardware";null!==t.getStockService().guardAgainstNullValue(e,"ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.Type")&&(Komodo.UI.cacheDataService.isMobileDevice(Komodo.UI.cacheDataService.getDeviceCPCCanonicalKeyBySytemKey(e.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.Type))||Komodo.UI.cacheDataService.isDTTDevice(Komodo.UI.cacheDataService.getDeviceCPCCanonicalKeyBySytemKey(e.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.Type))?o="Mobile Hardware":Komodo.UI.cacheDataService.isGotvDevice(Komodo.UI.cacheDataService.getDeviceCPCCanonicalKeyBySytemKey(e.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.Type))&&(o="DSDs")),t.set("financialAccountModel.ListOfHardware.Hardware.ProductDetail.Type",o),t.publishAssociateProductsEvent();break;default:Komodo.Controls.MessageBoxController.show("Add Device","Smartcard "+e.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcardStatus,Komodo.Controls.MessageBoxOkButton,t,"id5556673","danger")}break;default:Komodo.Controls.MessageBoxController.show("Add Device","Device "+e.ResponseMessage.Payload.ListOfHardware.Hardware.Status,Komodo.Controls.MessageBoxOkButton,t,"id5556673","danger")}else Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"linkDelink"),"<strong>"+kl.value(t._locale+"hardwareDetailsNotLoaded")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}catch(e){this.handleException("messageHardwareRetrievedReceived",e,!0,!0)}},publishAssociateProductsEvent:function(){try{var e=this,t=e.getStockService().formatDateForBus(new Date)+"Z",a={Country:e.dataModel.get("countryISO"),CustomerUID:e.dataModel.get("customerID"),ListOfAccount:{Account:[{Balance:{ListOfTax:[]},PaymentDetail:{MethodOfPayment:e.get("financialAccountModel.customerPaymentDetail.MethodOfPayment"),DebitOrderDay:e.get("financialAccountModel.customerPaymentDetail.DebitOrderDay")},ListOfAgreement:{Agreement:[{ActivationDate:t,TermOfPayment:1,IsViewAtHome:"0",ConsumerDetail:{FirstName:e.get("financialAccountModel.firstName"),Surname:e.get("financialAccountModel.lastName")},ConsumerAddress:{Type:"Agreement",HouseNumber:null,BuildingName:e.get("financialAccountModel.addressDetails.building"),Street:e.get("financialAccountModel.addressDetails.streetName"),Suburb:e.get("financialAccountModel.addressDetails.suburb"),City:e.get("financialAccountModel.addressDetails.city"),Province:e.get("financialAccountModel.addressDetails.province"),Country:e.get("financialAccountModel.addressDetails.country"),PostCode:e.get("financialAccountModel.addressDetails.postalCode"),PostBoxNumber:null},ListOfHardware:e.get("financialAccountModel.ListOfHardware")}]},BillingAddress:{}}]}};e.getStockService().publishRequestOnBus(this,this.get("processId"),a,"AddProducts","v1")}catch(e){this.handleException("publishAssociateProductsEvent",e,!0,!0)}},messageProductsAddedReceived:function(e){try{Komodo.Services.busyService.stop(this.get("processId"),"blocking");var t=this;if(t.getStockService().guardAgainstNullObject(e,"ResponseMessage.Payload.ListOfAccount.Account.ListOfAgreement.Agreement.ListOfHardware.Hardware")){Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"linkDelink"),"<strong>"+kl.value(t._locale+"deviceAddedToCustomer")+" '"+e.ResponseMessage.Payload.ListOfAccount.Account.ListOfAgreement.Agreement.ListOfHardware.Hardware.SerialNumber+"'.</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","success").response=function(e){"ok"==e&&(t.set("dataModel.deviceNumber",""),t.retrieveHardware())}}else Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"linkDelink"),"<strong>"+kl.value(t._locale+"deviceNotAddedToCustomer")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning")}catch(e){this.handleException("messageProductsAddedReceived",e,!0,!0)}},minTwoDigits:function(e){return(e<10?"0":"")+e},formatDateForDatePicker:function(e,t){try{if(void 0!=e&&""!=e){var a=new Date(e);return a.setDate(a.getDate()+t),this.minTwoDigits(a.getDate())+"/"+this.minTwoDigits(a.getMonth()+1)+"/"+a.getFullYear()}}catch(t){return e}},retrieveHardware:function(){try{var e=this;this.getStockService().loadSingleDevice()&&null==e.dataModel.get("commercialSerialNumber")?this.getStockService().getUIService().showModalPopup("Commercial customer",void 0,{view:Komodo.Application.RetrieveHardwareSingleView,canUserClose:!1,context:this,shouldStartAndStopController:!1}):this.getStockService().retrieveHardware(this,e.get("processId"),e.dataModel.get("countryISO"),e.dataModel.get("customerID"),e.dataModel.get("commercialSerialNumber"),!0,function(t){var a=Komodo.canonicalFacadeFactory(t.Payload,["ListOfHardware"]);e.dataModel.deviceData.clear();var o,s=a.get("ListOfHardware");if(o=e.getArrayItem(s),e.get("_dropDownAllDeviceList").clear(),e.get("_dropDownFromDeviceList").clear(),e.get("_dropDownToDeviceList").clear(),!(o.length>0))return Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"noDevicesLoaded"),kl.value(e._locale+"customerWithDevicesRequired"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"),void this.transitionToRoute("/manageViewing");null!=s?o.forEach(function(t){if(null!=t&&null!=t.SerialNumber&&null!=t.LinkedSmartcard&&null!=t.ProductDetail){var a=e.getArrayItem(null==t.ListOfService?null:t.ListOfService),o={},s="";o.UID=0,$.each(a,function(e,t){o.UID<t.UID&&(1==t.Status||4==t.Status)&&(o=t),1!=t.Status&&4!=t.Status||null==t.ProductDetail||null==t.ProductDetail.Description||(s+=(0==e?"":", ")+t.ProductDetail.Description)}),"embedded"!=t.ProductDetail.Type.toLowerCase()?(e.get("_dropDownAllDeviceList").addObject({Key:t.LinkedSmartcard,Value:t.LinkedSmartcard}),null==t.ListOfService||null==o.Status||1!=o.Status&&4!=o.Status?e.get("_dropDownToDeviceList").addObject({Key:t.LinkedSmartcard,Value:t.LinkedSmartcard}):e.get("_dropDownFromDeviceList").addObject({Key:t.LinkedSmartcard,Value:t.LinkedSmartcard})):(e.get("_dropDownAllDeviceList").addObject({Key:t.SerialNumber,Value:t.SerialNumber}),null==t.ListOfService||null==o.Status||1!=o.Status&&4!=o.Status?e.get("_dropDownToDeviceList").addObject({Key:t.SerialNumber,Value:t.SerialNumber}):e.get("_dropDownFromDeviceList").addObject({Key:t.SerialNumber,Value:t.SerialNumber}));var r=null;null!=t.ProductDetail&&(r=e.getHardwareModelDesc(t.ProductDetail.UID)),null==r&&(r=t.ProductDetail.Model),e.addItemToGridRow(e.dataModel.get("deviceData"),Komodo.Models.HardwaresDataGridMVModel.create({HardwareModelDesc:r,deviceSerialNo:t.SerialNumber,deviceStatus:t.Status,LinkedSC:t.LinkedSmartcard,DeviceWarranty:t.WarrantyStatus,LinkedSCModel:null!=t.SmartcardDetail?t.SmartcardDetail.Model:void 0,FromProductName:null!=t.ProductDetail?t.ProductDetail.Name:void 0,FromModel:null!=t.ProductDetail?t.ProductDetail.Model:void 0,UID:null!=t.ProductDetail?t.ProductDetail.UID:void 0,deviceType:null!=t.ProductDetail?t.ProductDetail.Type:void 0,InsuranceStatus:t.InsuranceStatus,
insuranceStartDate:null!=t.InsuranceStartDate?e.formatDateForDatePicker(t.InsuranceStartDate,0):void 0,status:null!=t.ListOfService&&null!=o.Status&&1==o.Status?"Linked":"Unlinked",package:s}))}}):Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"linkDelink"),"<strong>"+kl.value(e._locale+"noDeviceFound")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")})}catch(e){Komodo.Controls.MessageBoxController.show("Error","Error: "+e,Komodo.Controls.MessageBoxOkButtons,this,"retrieveHardwareError","danger")}},publishLinkUnlinkDevice:function(){try{var e=this,t=Komodo.Models.TransferHardwareServices.create();t.FromHardware=Komodo.Models.Hardware.create(),t.ToHardware=Komodo.Models.Hardware.create(),t.Services=null,t.FromHardware.set("SerialNumber",e.dataModel.get("fromDevice")),t.ToHardware.set("SerialNumber",e.dataModel.get("toDevice")),t.set("ReferenceNumber",null),t.set("Username",Komodo.Services.securityService.get("session.domainUserName").substring(3)),t.set("LocationID",0),t.set("Country",this.dataModel.get("countryISO")),Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo),this.publishRequestOnBus(t,"TransferHardwareServices","v1")}catch(e){this.handleException("publishLinkUnlinkDevice",e,!0,!0)}},messageHardwareServicesTransferedReceived:function(e){try{var t=this;Komodo.Services.busyService.stop(this.get("processId"),"blocking");Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"linkDelink"),"<strong>"+kl.value(t._locale+"hardwareServicesTransferred")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","success").response=function(e){"ok"==e&&t.transitionToRoute("/manageViewing")}}catch(e){this.handleException("messageHardwareServicesTransferedReceived",e,!0,!0)}},setupGrid:function(){try{this._columnDeviceDataGrid=[Komodo.Controls.DataGridColumn.create({name:"HardwareModelDesc",title:kl.value("locale.manageStock:linkDelink.deviceName"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"deviceSerialNo",title:kl.value("locale.manageStock:linkDelink.deviceNumber"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"deviceStatus",title:kl.value("locale.manageStock:linkDelink.deviceStatus"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"InsuranceStatus",title:kl.value("locale.manageStock:linkDelink.insurance"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"insuranceStartDate",title:kl.value("locale.manageStock:performSwap.insuranceStartDate"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"LinkedSC",title:kl.value("locale.manageStock:linkDelink.linkedSmartcard"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"package",title:kl.value("locale.manageStock:linkDelink.package"),width:"120px"})]}catch(e){this.handleException("setupGrid",e,!0,!0)}},getHardwareModelDesc:function(e){try{var t=this,a=null;return $.each(t._cacheHardwareModelDesc,function(t,o){if(o.key==e)return a=o.value,!1}),Komodo.log("Data not found in function [getHardwareModelDesc] for hardwareModelID: "+e),a}catch(e){this.handleException("getHardwareModelDesc",e,!0,!0)}},addItemToGridRow:function(e,t){try{e.pushObject(t)}catch(e){this.handleException("addItemToGridRow",e,!0,!0)}},fillObjectFromCachedFileService:function(e,t,a,o){var s=$.Deferred();try{e.get(t).clear(),Komodo.Services.cachedDataService.fetch(a).done(function(a){parsed=JSON.parse(a),$.each(o,function(e,t){parsed=parsed[o[e]]}),$.each(parsed,function(a,o){e.get(t).addObject(o)}),s.resolve(a)}).fail(function(a){Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"failedLoading"),"<strong>"+kl.value(e._locale+"failedLoading")+" '"+t+"'.</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"),s.reject(a)})}catch(e){this.handleException("fillObjectFromCachedFileService",e,!0,!0)}return s},fillObjectFromCachedFileServiceArray:function(e,t,a){var o=$.Deferred();try{e.get(t).clear(),Komodo.Services.cachedDataService.fetch(a).done(function(a){$.each(a,function(a,o){e.get(t).addObject(o)}),o.resolve(a)}).fail(function(a){Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"failedLoading"),"<strong>"+kl.value(e._locale+"failedLoading")+" '"+t+"'.</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"),o.reject(a)})}catch(e){this.handleException("fillObjectFromCachedFileService",e,!0,!0)}return o},getArrayItem:function(e){try{return $.makeArray(e)}catch(e){this.handleException("getArrayItem",e,!0,!0)}},handleException:function(e,t,a,o){try{var s=this,r=kl.value(s._locale+"errorInFunction")+" ["+e+"]. "+kl.value(s._locale+"exception")+": "+t+".";a&&(Komodo.log(r),null!=t&&null!=t.stack&&Komodo.log(t.stack)),o&&Komodo.Controls.MessageBoxController.show(kl.value(s._locale+"errorOccurred"),r,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}catch(e){Komodo.log(e)}},messageFailureMessageEventReceived:function(e){try{var t=this;Komodo.Services.busyService.stop(this.get("processId"),"blocking"),"CreateInteraction"!=e.ResponseMessage.Payload.OriginatedEventName?Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"):Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,kl.value(t._locale+"problemCRM"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}catch(e){this.handleException("messageFailureMessageEventReceived",e,!0,!0)}},messageHandle:function(e,t){try{var a=this;Komodo.Services.busyService.stop(this.get("processId"),"blocking"),null!=e&&null!=e.payload&&null!=e.payload.Header?Komodo.Controls.MessageBoxController.show(kl.value(a._locale+"messageReceivedFailure"),t+" "+kl.value(a._locale+"messageType")+" : '"+e.payload.Header.EventName+"', Process: '"+e.payload.Header.ProcessName+"'.",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"):(Komodo.UI.error("[messageHandle.messageFault] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(a._locale+"aProblemOccurred"),kl.value(a._locale+"messageEventNull")+e.messageId,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"))}catch(e){this.handleException("messageHandle",e,!0,!0)}},messageReceived:function(e){try{var t=this;this.messageHandle(e,kl.value(t._locale+"aSuccessfulMessage"))}catch(e){this.handleException("messageReceived",e,!0,!0)}},messageDeliveryFailure:function(e){try{var t=this;this.messageHandle(e,kl.value(t._locale+"communicationFailure"))}catch(e){this.handleException("messageDeliveryFailure",e,!0,!0)}},messageFault:function(e){try{var t=this;this.messageHandle(e,kl.value(t._locale+"faultException"))}catch(e){this.handleException("messageFault",e,!0,!0)}},publishRequestOnBus:function(e,t,a){try{var o=this;Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,6e4,"blocking",this),Komodo.Services.customerProfileService.publishEvent(this,e,t,a).done(function(){Komodo.log("Event Message for '"+t+"' has published successfully.")}).fail(function(e){Komodo.log("Event Message for '"+t+"' has failed."),Komodo.Services.busyService.stop(this.get("processId"),"blocking"),Komodo.Controls.MessageBoxController.show(kl.value(o._locale+"eventMessageFailed")+" '"+t+"'",e,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")})}catch(e){Komodo.Services.busyService.stop(this.get("processId"),"blocking"),this.handleException("publishRequestOnBus",e,!0,!0)}}}),Komodo.Application.IssueHardwareAgainstSwapAvailabilityController=Komodo.UI.Controller.extend({_locale:"",_toUpper:!1,useQuoteDropDown:!1,quoteInputBox:!0,quotenumberslst:[],init:function(){this._super(),Komodo.log("Constructing Issue Hardware Against Swap Availability controller"),this.set("processVersion","v1.1"),this.set("processName","IssueSwapOrder"),this.requiresDependency("_stockService",{singleton:Komodo.Services.stockService})},start:function(){this._super();var e=this;e._locale="locale.manageStock:issueHardwareAgainstSwapAvailability.",e.registerModel("rcModelData",Komodo.Models.IssueHardwareAgainstSwapAvailabilityModel),e.registerValidator(e.get("rcModelData"),"quoteNumber",{type:"string",isRequired:!0,displayName:"Quote Number:",isRequiredMessage:kl.value(e._locale+"quoteRequired")}),e.rcModelData.set("quoteNumber",""),e.getStockService().setCountryISO(e.get("rcModelData"),"countryISO",null),e.getStockService().setCustomerID(e,e.get("rcModelData"),"customerID","/manageStock",function(){Komodo.Services.featureToggleService.isEnabled("ManageStock","useQuoteDropDown").done(function(t){void 0==t&&""==t&&null==t||"true"!=t.toString().toLowerCase()?(e.set("useQuoteDropDown",!1),e.set("quoteInputBox",!1)):(e.getStockService().showBusyIndicator(e.get("processId")),e.get("quotenumberslst").clear(),Komodo.Services.queryService.getJSON("SwapMaterialAvailability/GetQuotesByCustomer?customerID="+e.rcModelData.get("customerID")+"&category=2&status=4").done(function(t){e.getStockService().hideBusyIndicator(e.get("processId")),void 0==t&&""==t&&null==t||0==t.Quotes.length?(e.set("useQuoteDropDown",!1),e.set("quoteInputBox",!1)):(e.set("useQuoteDropDown",!0),e.set("quotenumberslst",t.Quotes),e.set("quoteInputBox",!1))}).fail(function(t){e.getStockService().hideBusyIndicator(e.get("processId")),e.set("useQuoteDropDown",!1),e.set("quoteInputBox",!1)}))}).fail(function(){e.set("useQuoteDropDown",!1),e.set("quoteInputBox",!1)})})},stop:function(){this._super()},actions:{searchQuoteSwap:function(){var e=this;e.canSubmitData(e.rcModelData,"Invalid Data",!0)&&e.retrieveQuote()},IssueHardwareSwap:function(){var e=this;e.rcModelData.get("FaultySerialNumber")&&e.rcModelData.modelsAndDevices[0].faultySerial!==e.rcModelData.get("FaultySerialNumber")?Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"issueHardware"),kl.value(e._locale+"faultySerialMismatch"),Komodo.Controls.MessageBoxOkButtons,e,"id5446673","warning"):e.rcModelData.get("FaultySmartcardNumber")&&e.rcModelData.modelsAndDevices[1].faultySerial!==e.rcModelData.get("FaultySmartcardNumber")?Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"issueHardware"),kl.value(e._locale+"faultySmartcartMismatch"),Komodo.Controls.MessageBoxOkButtons,e,"id5446673","warning"):e.retrieveHardwareModels()}},getStockService:function(){return this.get("_stockService")},toUpperQuote:function(){try{void 0!=this.rcModelData.get("quoteNumber")&&this.rcModelData.set("quoteNumber",this.rcModelData.get("quoteNumber").toUpperCase().trim())}catch(e){this.getStockService().handleException("toUpperQuote",e,!0,!0)}}.observes("rcModelData.quoteNumber"),toUpper:function(){if(!this._toUpper)try{this._toUpper=!0;var e=this;void 0!=e.get("rcModelData.modelsAndDevices")&&e.get("rcModelData.modelsAndDevices").length>0&&e.get("rcModelData.modelsAndDevices").forEach(function(e){e.get("replacementSerial")&&e.set("replacementSerial",e.get("replacementSerial").toUpperCase()),e.get("faultySerial")&&e.set("faultySerial",e.get("faultySerial").toUpperCase())})}catch(e){this.getStockService().handleException("toUpper",e,!0,!0)}finally{this._toUpper=!1}}.observes("rcModelData.modelsAndDevices.@each.faultySerial","rcModelData.modelsAndDevices.@each.replacementSerial"),retrieveIssueHardware:function(e,t){try{var a=this;if(null===t)return;Komodo.Services.queryService.refreshUserData(),Komodo.Services.queryService.getJSON("IssueHardware?quote="+e).done(function(e){t(e,null)}).error(function(e){t(null,a.getStockService().handleQueryServiceException(e))})}catch(e){this.getStockService().handleException("retrieveHardwareModels",e,!0,!0)}},retrieveQuote:function(){try{var e=this;e.get("rcModelData.modelsAndDevices").clear(),e.rcModelData.set("ServiceOrderNumber",""),e.rcModelData.set("FaultySerialNumber",""),e.rcModelData.set("FaultySmartcardNumber",""),e.getStockService().checkSpecialCharecterQuote(e.rcModelData.get("quoteNumber"))?(e.getStockService().showBusyIndicator(e.get("processId")),e.retrieveIssueHardware(e.rcModelData.get("quoteNumber"),function(t,a){e.getStockService().hideBusyIndicator(e.get("processId")),null!==a?Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"issueHardware"),"Error message: '"+a+"'",Komodo.Controls.MessageBoxOkButtons,null,"issueSwapOrder_retrieveQuote_error","danger"):e.getStockService().guardAgainstNullObject(t,"FaultyDeviceV2.SerialNumber")&&e.getStockService().guardAgainstNullObject(t,"RequiredSwapMaterialDetail.SwapMaterialListV2")&&0!==t.RequiredSwapMaterialDetail.SwapMaterialListV2.length?null!=t.GoodsMovementDetail?Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"issueHardware"),kl.value(e._locale+"goodsMovementIssuedAlready"),Komodo.Controls.MessageBoxOkButtons,null,"issueSwapOrder_retrieveQuote_MovementIssued","danger"):(e.rcModelData.set("ServiceOrderNumber",t.ServiceOrderNumber),e.rcModelData.set("FaultySerialNumber",t.FaultyDeviceV2.SerialNumber),e.rcModelData.set("FaultySmartcardNumber",e.getStockService().guardAgainstNullValue(t,"FaultyDeviceV2.LinkedSerial")),$.each(t.RequiredSwapMaterialDetail.SwapMaterialListV2,function(a,o){var s=o.MaterialType>=0&&o.MaterialType<=2;e.get("rcModelData.modelsAndDevices").addObject(Ember.Object.create({displayFaultySerial:0===a,faultyModel:a>0?"":t.FaultyDeviceV2.Material,faultyDevice:a>0?"":t.FaultyDeviceV2.MaterialDescr,faultySerial:"",replacementDevice:o.MaterialDescr?o.MaterialDescr:o.Material,replacementSerial:"",replacementModel:o.Material,serialized:s,quantity:o.Quantity})),e.getStockService().guardAgainstNullValue(o,"LinkedMaterialTypeSpecified")&&e.get("rcModelData.modelsAndDevices").addObject(Ember.Object.create({displayFaultySerial:0===a,faultyModel:a>0?"":t.FaultyDeviceV2.LinkedMaterial,faultyDevice:a>0?"":t.FaultyDeviceV2.LinkedMaterialDecr,faultySerial:"",replacementDevice:"Smartcard",replacementSerial:"",replacementModel:"",serialized:s,quantity:o.LinkedQty}))})):Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"issueHardware"),kl.value(e._locale+"noQuote"),Komodo.Controls.MessageBoxOkButtons,null,"issueSwapOrder_retrieveQuote_noHardware","danger")})):Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"issueHardware"),kl.value(e._locale+"validQuoteNumber"),Komodo.Controls.MessageBoxOkButtons,null,"issueSwapOrder_retrieveQuote_invalidQuoteInput","warning")}catch(e){this.getStockService().handleException("retrieveQuote",e,!0,!0)}},retrieveHardwareModels:function(){try{var e=this,t="";$.each(e.rcModelData.modelsAndDevices,function(e,a){"SMARTCARD"===a.replacementDevice.toUpperCase()&&(t+=a.replacementSerial+",")}),""===t?e.publishIssueHardware(null):e.retrieveHardwareModelSAPArray(t,function(t,a){null!=a?Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"issueHardware"),"Error message: '"+a+"'",Komodo.Controls.MessageBoxOkButtons,this,"issueSwapOrder_retrieveHardwareModels_error","danger"):e.publishIssueHardware(t.split(","))})}catch(e){this.getStockService().handleException("retrieveHardwareModels",e,!0,!0)}},retrieveHardwareModelSAPArray:function(e,t){try{var a=this;if(null===t)return;Komodo.Services.queryService.refreshUserData(),Komodo.Services.queryService.getJSON("IssueHardware/GetDeviceModelSAPArray?deviceSerialArray="+e).done(function(e){t(e,null)}).error(function(e){t(null,a.getStockService().handleQueryServiceException(e))})}catch(e){this.getStockService().handleException("retrieveHardwareModels",e,!0,!0)}},publishIssueHardware:function(e){var t=this,a=!0,o=Komodo.Models.IssueHardwareAgainstServiceOrder.create(),s=Komodo.canonicalFacadeFactory(o,["QuotationID","Country","ListOfHardware_Hardware","ServiceOrderType","CustomerID","ServiceOrderID","Username"]);s.set("QuotationID",this.rcModelData.get("quoteNumber")),s.set("Country",this.rcModelData.get("countryISO")),s.set("ServiceOrderType","SWAP"),s.set("CustomerID",this.rcModelData.get("customerID")),s.set("ServiceOrderID",this.rcModelData.get("ServiceOrderNumber")),s.set("Username",Komodo.Services.securityService.get("domainUserName").substring(3));var r=[],n=0;$.each(t.rcModelData.modelsAndDevices,function(o,s){if(s.serialized){if(""===this.replacementDevice||""===this.replacementSerial)return a=!1,!1;if(!t.getStockService().checkSpecialCharecter(this.replacementSerial))return a=!1,!1;if(s.faultyDevice&&s.faultyModel){var i=Komodo.Models.Hardware.create(),c=Komodo.canonicalFacadeFactory(i,["SerialNumber","Status","ProductDetail"]);c.set("Status","FAULTY"),c.set("SerialNumber",s.faultySerial),oldProduct=Komodo.Models.ProductDetail.create();var l=Komodo.canonicalFacadeFactory(oldProduct,["Model","Description"]);l.set("Model",s.faultyModel),l.set("Description",s.faultyDevice),c.set("ProductDetail",oldProduct),r.push(i)}null!=e&&"SMARTCARD"==s.replacementDevice.toUpperCase()&&(t.rcModelData.modelsAndDevices[o].replacementModel=e[n],n++);var d=Komodo.Models.Hardware.create(),c=Komodo.canonicalFacadeFactory(d,["SerialNumber","Status","ProductDetail"]);c.set("Status","REPLACEMENT"),c.set("SerialNumber",s.replacementSerial);var u=Komodo.Models.ProductDetail.create(),l=Komodo.canonicalFacadeFactory(u,["Model","Description"]);l.set("Model",s.replacementModel),l.set("Description",s.replacementDevice),c.set("ProductDetail",u),r.push(d)}else{var d=Komodo.Models.Hardware.create(),c=Komodo.canonicalFacadeFactory(d,["SerialNumber","Status","ProductDetail"]);c.set("Status","REPLACEMENT");var u=Komodo.Models.ProductDetail.create(),l=Komodo.canonicalFacadeFactory(u,["Model","Description","ProductFeatures"]);l.set("Model",s.replacementModel),l.set("Description",s.replacementDevice);var h=Komodo.Models.ProductFeatures.create(),m=Komodo.canonicalFacadeFactory(h,["Value","Description"]);m.set("Value",s.quantity),m.set("Description","Quantity"),l.set("ProductFeatures",h),c.set("ProductDetail",u),r.push(d)}}),r.length>0&&!0===a?(s.set("ListOfHardware_Hardware",r),t.getStockService().publishRequestOnBus(t,t.get("processId"),o,"IssueHardwareAgainstServiceOrder","v1")):Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"issueHardware"),kl.value(t._locale+"requiredValues"),Komodo.Controls.MessageBoxOkButtons,this,"issueSwapOrder__publishIssueHardware","warning")},messageHardwareIssuedAgainstServiceOrderReceived:function(){try{var e=this;e.getStockService().hideBusyIndicator(e.get("processId"));Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"issueHardwareAgainstService"),kl.value(e._locale+"issueHardwareAgainstServiceSuccessfully"),Komodo.Controls.MessageBoxOkButtons,null,"issueSwapOrder_hardwareIssuedAgainstServiceOrder","success").response=function(e){"ok"===e&&Komodo.Services.uiService.transitionTo("/deviceInformation")}}catch(e){this.getStockService().handleException("messageHardwareIssuedAgainstServiceOrderReceived",e,!0,!0)}},messageReceived:function(e){this.getStockService().messageReceived(e)},messageDeliveryFailure:function(e){this.getStockService().messageDeliveryFailure(e)},messageFault:function(e){this.getStockService().messageFault(e)},messageFailureMessageEventReceived:function(e){this.getStockService().messageFailureMessageEventReceived(this.get("processId"),e)},messageHandle:function(e){this.getStockService().messageHandle(this.get("processId"),e)}}),Komodo.Application.IssueHardwareAgainstSwapOrderController=Komodo.UI.Controller.extend({_toUpper:!1,_serialNo:void 0,_isFauldDisabled:!1,localIssueHardware:"locale.manageStock:issueHardwareAgainstSwapOrder.",init:function(){this._super(),Komodo.log("Constructing Issue hardware against service order controller"),this.set("processVersion","v1.1"),this.set("processName","Issue Hardware"),this.set("Plant",""),this.set("hLocation",""),this.set("_fiscalizationAvailable",!1),this.set("_BUnitHLocationRelationship",[]),this.set("_hardwareLocation",[]),this.requiresDependency("_stockService",{singleton:Komodo.Services.stockService})},start:function(){this._super();var e=this;this.registerModel("rcModelData",Komodo.Models.IssueHardwareAgainstSwapOrderModel),e.validaterRegistration(),this.getStockService().setCustomerID(this,this.get("rcModelData"),"customerID","/manageStock",null),this.rcModelData.set("quoteNumber","");this.get("rcModelData");this.getStockService().setCountryISO(this.get("rcModelData"),"countryISO",null),e.getDevicePlant(),e.getHardwareLocations(),e.loadFeatureToggleForBusinessUnit()},stop:function(){this.set("Plant",""),this.set("hLocation",""),this.set("_fiscalizationAvailable",!1),this.set("_BUnitHLocationRelationship",[]),this.set("_hardwareLocation",[]),this.requiresDependency("_stockService",{singleton:Komodo.Services.stockService}),this._super()},actions:{searchQuoteRepair:function(){if(0==this.canSubmitData(this.rcModelData,"Invalid Data",!0))return!1;this.PublishRetrieveQuote()},IssueHardwareRepair:function(){this.PublishIssueHardware()}},getStockService:function(){return this.get("_stockService")},validaterRegistration:function(){this.registerValidator(this.get("rcModelData"),"quoteNumber",{type:"string",isRequired:!0,displayName:"Quote Number:",isRequiredMessage:"Quote Number is required"})},toUpper:function(){if(!this._toUpper)try{this._toUpper=!0;var e=this;void 0!=e.get("rcModelData.modelsAndDevices")&&e.get("rcModelData.modelsAndDevices").length>0&&e.get("rcModelData.modelsAndDevices").forEach(function(e){e.get("repldevice")&&e.set("repldevice",e.get("repldevice").toUpperCase()),e.get("fauldevice")&&e.set("fauldevice",e.get("fauldevice").toUpperCase())})}catch(e){this.handleException("toUpper",e,!0,!0)}finally{this._toUpper=!1}}.observes("rcModelData.modelsAndDevices.@each.repldevice","rcModelData.modelsAndDevices.@each.fauldevice"),chkSpecialCharecter:function(e){for(var t="!`@#$%^&*()+=-[]\\';,./{}|\":<>?~_",a=0;a<e.length;a++)if(-1!=t.indexOf(e.charAt(a)))return!1;return!0},chkSpecialCharecterQuote:function(e){for(var t="!`@#$%^&*()+=[]\\';,./{}|\":<>?~_",a=0;a<e.length;a++)if(-1!=t.indexOf(e.charAt(a)))return!1;return!0},PublishIssueHardware:function(){var e=this,t=e.rcModelData.modelsAndDevices,a="",o="";if(null!=t&&t.length>0){o=t[0].fauldevice,a=t[0].replmodel;var s={DeviceSerial:o,DeviceModel:a,QuoteNumber:e.rcModelData.get("QuoteID"),CreateDate:moment(new Date).format("YYYY-MM-DD"),CustomerId:e.rcModelData.get("customerID"),CustomerMobile:Komodo.Services.customerProfileService.personalDetails.mobileNo,Plant:e.get("Plant"),LocationSapKey:e.get("hLocation")};e.bus.send(s,"MultiChoice.CollectDeviceProcess.Messages.v1.CollectDeviceCommand"),e.showBlockingBusyIndicator()}else Komodo.Controls.MessageBoxController.show(kl.value(e.localIssueHardware+"issuehardwareagainstquote"),kl.value(e.localIssueHardware+"validationerrorforvalues"),Komodo.Controls.MessageBoxOkButtons,e,"id5446673","warning")},PublishRetrieveQuote:function(){payLoad=Komodo.Models.RetrieveQuotations.create();var e=Komodo.canonicalFacadeFactory(payLoad,["Country","QuotationUID"]);if(e.set("Country",this.rcModelData.get("countryISO")),e.set("QuotationUID",this.rcModelData.get("quoteNumber")),isValidStr=this.chkSpecialCharecterQuote(this.rcModelData.get("quoteNumber")),!isValidStr)return void Komodo.Controls.MessageBoxController.show(kl.value("locale.manageStock:issueHardwareAgainstSwapOrder.invalidQuoteHeader"),"Please enter valid Quote number to retrieve!",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning");this.publishRequestOnBus(payLoad,"RetrieveQuotations","v1"),Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Processing,6e4,"blocking",this)},publishRequestOnBus:function(e,t,a){var o=Komodo.Services.customerProfileService,s="Event Message for "+t+" ";o.publishEvent(this,e,t,a).done(function(){Komodo.log(s+" has been published successfully")}).fail(function(e){Komodo.log(s+" has failed"),Komodo.Controls.MessageBoxController.show(s,e,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")})},handlers:{"MultiChoice.CollectDeviceProcess.Messages.v1.CollectedDeviceEvent":function(e){var t=this;t.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(t.localIssueHardware+"issueStock"),kl.value(t.localIssueHardware+"hardwareissuedsucessfully"),Komodo.Controls.MessageBoxOkButtons,t,"id5446675","success").response=function(e){"ok"==e&&Komodo.Services.uiService.transitionTo("/reconnect")}},"MultiChoice.CollectDeviceProcess.Messages.v1.CollectDeviceFailureEvent":function(e){this.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show("Error","Error: "+e.failureMessage,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")},"MultiChoice.CollectDeviceProcess.Messages.v1.CollectDeviceIncorrectPlantFailureEvent":function(e){var t=this;t.hideBusyIndicator();var a=kl.value(t.localIssueHardware+"errorInvalidPlant");void 0!=e.deviceSerial&&(a=a.replace("__device__",e.deviceSerial)),void 0!=e.correctPlantId&&null!=e.correctPlantId&&void 0!=t.get("_hardwareLocation")&&t.get("_hardwareLocation").forEach(function(t){t.key==e.correctPlantId&&(a=a.replace("__collectionpoint__",t.value))}),Komodo.Controls.MessageBoxController.show("Error",a,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}},messageQuotationsRetrievedReceived:function(e){Komodo.Services.busyService.stop(this.get("processId"),"blocking");var t=this,a=0;if(t.isQuoteBelongsToLoadedCustomer(e)){this.get("rcModelData.modelsAndDevices").clear(),this.get("rcModelData.faultyDevice").clear();var o=e.ResponseMessage.Payload.ListOfQuotation.Quotation;if(o.BusinessUnit&&t.getBusinessUnit(t,o.BusinessUnit),void 0==o.ListOfQuotationLineItem)return Komodo.Controls.MessageBoxController.show(kl.value("locale.manageStock:issueHardwareAgainstSwapOrder.invalidQuoteHeader"),"Quote not found",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"),void t.set("rcModelData.modelsAndDevices",[]);var s=Komodo.canonicalFacadeFactory(e.ResponseMessage.Payload,["ListOfQuotation_Quotation_ListOfQuotationLineItem_QuotationLineItem","ListOfQuotation_Quotation_UID","ListOfQuotation_Quotation_ListOfQuotationLineItem_QuotationLineItem_Product_Details_UID"]),r=s.get("ListOfQuotation_Quotation_ListOfQuotationLineItem_QuotationLineItem");t.rcModelData.set("QuoteID",s.get("ListOfQuotation_Quotation_UID"));var n=t.getArrayItem(r);if(0==n.length)return void Komodo.Controls.MessageBoxController.show(kl.value("locale.manageStock:issueHardwareAgainstSwapOrder.invalidQuoteHeader"),"Quote Has no Line Items",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger");var i=this.getArrayItem(s.get("ListOfQuotation_Quotation_ListOfQuotationLineItem_QuotationLineItem"));if(!(i.length>0&&null!=i[0]&&null!=i[0].Product&&null!=i[0].Product.Details&&null!=i[0].Product.Details.UID))return void Komodo.Controls.MessageBoxController.show(kl.value("locale.manageStock:issueHardwareAgainstSwapOrder.invalidQuoteHeader"),"Invalid Quote.",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger");if(0!=i[0].Product.Details.UID.indexOf("REPAIR"))return void Komodo.Controls.MessageBoxController.show(kl.value("locale.manageStock:issueHardwareAgainstSwapOrder.invalidQuoteHeader"),kl.value("locale.manageStock:issueHardwareAgainstSwapOrder.invalidQuoteError"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger");if(this.rcModelData.set("Reason","REPAIR"),this.rcModelData.set("isVisibleRepldevice",!1),this.rcModelData.set("FaultySerialNumber",kl.value("locale.manageStock:issueHardwareAgainstSwapOrder.faultySerialNumber")),n.forEach(function(e){if("hardware"==e.Product.Details.Type.toLowerCase()&&void 0!==e.Product.Details.Model){e.Product.Details.Model;0==e.Product.Details.UID.indexOf("REPAIR")&&t.repairQuotedValues(e.Product.Details),a++}}),0==a)return void Komodo.Controls.MessageBoxController.show(kl.value("locale.manageStock:issueHardwareAgainstSwapOrder.invalidQuoteHeader"),"No Hardware on Quote",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}},repairQuotedValues:function(e){var t=this,a=e.Description.split(" "),o=a.length>=3?a[2]:"",s=a.length>=4?a[3]:"";t.get("rcModelData.modelsAndDevices").addObject(Ember.Object.create({replmodel:e.Model,replDesc:e.Name,repldevice:"",fauldevice:o,faulSerialNumber:s})),t.set("_isFauldDisabled",!0)},messageHardwareIssuedAgainstServiceOrderReceived:function(e){try{var t=this;Komodo.Services.busyService.stop(this.get("processId"),"blocking");Komodo.Controls.MessageBoxController.show(kl.value("locale.manageStock:issueHardwareAgainstSwapOrder.invalidQuoteHeader"),"<strong>Issue hardware against service order performed successfully</strong><br/>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","success").response=function(e){"ok"==e&&t.transitionToRoute("/issueHardwareAgainstSwapOrder")}}catch(e){this.handleException("messageHardwareIssuedAgainstServiceOrderReceived",e,!0,!0)}},messageFailureMessageEventReceived:function(e){Komodo.Services.busyService.stop(this.get("processId"),"blocking"),"CreateInteraction"!=e.ResponseMessage.Payload.OriginatedEventName?(this.set("rcModelData.modelsAndDevices",[]),Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")):Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,"Problem has occurred while logging an activity in CRM.",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")},messageHandle:function(e,t){try{Komodo.Services.busyService.stop(this.get("processId"),"blocking"),null!=e&&null!=e.payload&&null!=e.payload.Header?Komodo.Controls.MessageBoxController.show("Message Received Failure",t+" Message type: '"+e.payload.Header.EventName+"', Process: '"+e.payload.Header.ProcessName+"'.",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"):(Komodo.UI.error("[messageHandle.messageFault] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show("A problem occurred","Message event name and/or process fields are null. Message = "+e.messageId,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"))}catch(e){this.handleException("messageHandle",e,!0,!0)}},messageReceived:function(e){try{this.messageHandle(e,"A successful message was received for the sender but there is no specific message for the received message event name.")}catch(e){this.handleException("messageReceived",e,!0,!0)}},messageDeliveryFailure:function(e){try{this.messageHandle(e,"Communication failure between the browser and webMethods broker generic publish. No specific delivery failure method for the given event name could be found.")}catch(e){this.handleException("messageDeliveryFailure",e,!0,!0)}},messageFault:function(e){try{this.messageHandle(e,"FaultException occurred in the broker indicating message can't be processed for message type. No fault method implementation.")}catch(e){this.handleException("messageFault",e,!0,!0)}},getArrayItem:function(e){try{return $.makeArray(e)}catch(e){this.handleException("getArrayItem",e,!0,!0)}},showBlockingBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,25e3,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},isQuoteBelongsToLoadedCustomer:function(e){var t=this,a=!0,o=e.ResponseMessage.Payload.ListOfQuotation.Quotation.CustomerUID;if(t.rcModelData.get("customerID")!=o){Komodo.Controls.MessageBoxController.show(kl.value(t.localIssueHardware+"invalidQuoteHeader"),kl.value(t.localIssueHardware+"errorMessageQuote"),Komodo.Controls.MessageBoxOkButtons,this,"setCustomerIDFail","danger").response=function(e){"ok"==e&&Komodo.Services.uiService.transitionTo("home")},a=!1}return a},getDevicePlant:function(){var e=this
;Komodo.Services.queryService.getJSON("/IccUserManagement/GetUserHardwareLocation?domainUserName="+Komodo.Services.securityService.get("domainUserName"),{async:!0}).done(function(t){null!=t&&void 0!=t&&e.set("Plant",t)}).fail(function(e){e=JSON.parse(e)})},loadFeatureToggleForBusinessUnit:function(){var t=this;Komodo.Services.featureToggleService.isEnabled("SwapProcess","BusinessUnitLocation").done(function(e){e&&(t.set("_fiscalizationAvailable",e),t.loadBusinessUnitHardwareLocationRelationship())}).fail(function(a){t.handleException("getBusinessUnit",e,!0,!1)})},loadBusinessUnitHardwareLocationRelationship:function(){var t=this;Komodo.Services.cachedDataService.fetch("BusinessUnitHardwareLocationRelationship").done(function(e){var a=JSON.parse(e);t.set("_BUnitHLocationRelationship",a.BusinessUnits)}).fail(function(a){a=JSON.parse(a),t.handleException(a,e,!0,!1)})},getBusinessUnit:function(e,t){if(e.get("_fiscalizationAvailable")){var a=e.get("_BUnitHLocationRelationship");if(null!=a&&void 0!=a)for(var o=e.getIccStockHandler(a),s=0;s<a.BusinessUnit.length;s++){var r=a.BusinessUnit[s];if(null!=r&&r.CanonicalValue==t)for(var n=r.HardwareLocations.HardwareLocation,i=0;i<n.length;i++){var c=n[i];if(c.ICCkey==o)return void e.set("hLocation",c.SAPKey)}}}},getIccStockHandler:function(e){var t=this;if(null!=e&&void 0!=e)for(var a=0;a<e.BusinessUnit.length;a++)for(var o=e.BusinessUnit[a],s=o.HardwareLocations.HardwareLocation,r=0;r<s.length;r++){var n=s[r];if(n.HardwareLocationCK==t.get("Plant"))return n.ICCkey}},getHardwareLocations:function(){var t=this;Komodo.Services.cachedDataService.fetch("HardwareLocation").done(function(e){t.set("_hardwareLocation",e)}).fail(function(a){a=JSON.parse(a),t.handleException(a,e,!0,!1)})}}),Komodo.Application.CsiDeviceInfoController=Komodo.UI.Controller.extend({init:function(){this._super(),Komodo.log("Constructing Device Info controller for CSI customer"),this.set("processVersion","v1.1"),this.set("processName","Device Info for CSI customer"),this.initializeGrid(),this.set("chargePeriodlst",[]),this.getNewProcessID()},start:function(){this.getCDMData(),this.registerModel("deviceInfoModel",Komodo.Models.CommercialDeviceInfoModel),this.set("csiLogDetailsModel",Komodo.Models.CsiLogDetailsModel.create()),this.deviceInfoModel.set("disableChargePeriod",!0),this.populatechargePeriod(),this.createNewGridItem(),this.searchFinancialAccount(),this.subscribeNotifyGetCSILogs(),this.subscribeNotifyGetCSILogsError(),this._super()},stop:function(){this._super()},chargePeriodChanged:function(){void 0!==this.deviceInfoModel&&(this.deviceInfoModel.get("chargePeriod")!==this.defaultChargePer?this.deviceInfoModel.set("isDisableSubmitButton",!1):this.deviceInfoModel.set("isDisableSubmitButton",!0))}.observes("commercialDeviceInfoModel.chargePeriod"),initializeGrid:function(){this.dataGridColumnsDeviceInfo=[Komodo.Controls.DataGridColumn.create({name:"historyID",title:kl.value(this.localeDeviceInfo+"historyID"),canEdit:!1,width:"30px"}),Komodo.Controls.DataGridColumn.create({name:"date",title:kl.value(this.localeDeviceInfo+"date"),canEdit:!1,width:"70px"}),Komodo.Controls.DataGridColumn.create({name:"message",title:kl.value(this.localeDeviceInfo+"message"),canEdit:!1,width:"175px"}),Komodo.Controls.DataGridColumn.create({name:"eventDescription",title:kl.value(this.localeDeviceInfo+"eventDescription"),canEdit:!1,width:"175px"}),Komodo.Controls.DataGridColumn.create({name:"reason",title:kl.value(this.localeDeviceInfo+"reason"),canEdit:!1,width:"120px"}),Komodo.Controls.DataGridCommandColumn.create({name:"view",title:kl.value(this.localeDeviceInfo+"view"),action:"View",width:"10px",displayType:"button",customClass:"komodo-button"})]},initializeControls:function(){this.deviceInfoModel.set("deviceName","-"),this.deviceInfoModel.set("deviceNumber","-"),this.deviceInfoModel.set("deviceStatus","-"),this.deviceInfoModel.set("warrantyEndDate","-"),this.deviceInfoModel.set("smartcardName","-"),this.deviceInfoModel.set("smartcardNumber","-"),this.deviceInfoModel.set("smartcardStatus","-"),this.deviceInfoModel.set("viewingPeriod","-"),this.deviceInfoModel.set("principalPackage","-"),this.deviceInfoModel.set("principalStatus","-"),this.deviceInfoModel.set("addOnPackage","-"),this.deviceInfoModel.set("addOnStatus","-"),this.deviceInfoModel.set("contractStartDate","-"),this.deviceInfoModel.set("contractEndDate","-"),this.deviceInfoModel.set("chargeUntilDate","-"),this.deviceInfoModel.set("quoteBasedDisconnectDate","-"),this.deviceInfoModel.set("services","-")},populatechargePeriod:function(){this.set("chargePeriodlst",[]),this.set("chargePeriodlst",Komodo.Services.customerProfileService.get("invoicePeriod")),null!==this.get("chargePeriodlst")&&void 0!==this.get("chargePeriodlst")&&""!==this.get("chargePeriodlst")&&this.set("defaultChargePer",this.chargePeriodlst[0].key)},searchFinancialAccount:function(){var e=this.get("accountId");this.set("accountno",e);var t,a=Komodo.Services.ProductAndServiceMaintenanceHelper.create();if(void 0!==this.get("accounts")){var o=this;t=a.createArrayForSingleElement(this.get("accounts")).filter(function(e){var t=o.get("accountno");return e.UID===t}),t.length&&t.length>0&&this.bindControls(t)}},bindControls:function(e){this.initializeControls();var t,a=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),o="";!0===this.get("isXtraview")&&(o+="Xtraview, "),!0===this.get("isBoxOffice")&&(o+="Box Office, "),!0===this.get("isInsurance")&&(o+="Insurance, "),!0===this.get("isAccesss")&&(o+="Access, "),o.length>0&&(o=o.substring(0,o.length-2),this.deviceInfoModel.set("services",this.checkEmptyAndReplace(o)));var s=this.get("agreementId");this.set("agreementid",s);var r=this,n=a.createArrayForSingleElement(e[0].ListOfAgreement.Agreement);if(n&&(t=n.filter(function(e){var t=r.get("agreementid");return e.UID===t}),t.length&&t.length>0&&t[0].ListOfHardware.Hardware.length>0)){var i=t[0].ListOfHardware.Hardware.filter(function(e){var t=r.get("deviceId");return e.SerialNumber===t});if(i.length&&i.length>0){if(this.deviceInfoModel.set("deviceName",this.checkEmptyAndReplace(i[0].ProductDetail.Name)),this.deviceInfoModel.set("deviceNumber",this.checkEmptyAndReplace(i[0].SerialNumber)),this.deviceInfoModel.set("deviceStatus",this.checkEmptyAndReplace(i[0].Status)),this.deviceInfoModel.set("smartcardName",this.checkEmptyAndReplace(i[0].SmartcardDetail.Name)),this.deviceInfoModel.set("smartcardNumber",this.checkEmptyAndReplace(i[0].LinkedSmartcard)),this.deviceInfoModel.set("smartcardStatus",this.checkEmptyAndReplace(i[0].LinkedSmartcardStatus)),this.deviceInfoModel.set("viewingPeriod",this.checkEmptyAndReplace(this.getformatedDateforUI(new Date(t[0].StartDate)))+"    to   "+this.checkEmptyAndReplace(this.getformatedDateforUI(new Date(t[0].EndDate)))),this.deviceInfoModel.set("country",t[0].ListOfAddress.Address[0].Country),this.deviceInfoModel.set("province",t[0].ListOfAddress.Address[0].Province),this.deviceInfoModel.set("city",this.capitaliseFirstLetter(t[0].ListOfAddress.Address[0].City)),this.deviceInfoModel.set("suburb",this.capitaliseFirstLetter(t[0].ListOfAddress.Address[0].Suburb)),this.deviceInfoModel.set("postalCode",t[0].ListOfAddress.Address[0].PostCode),this.deviceInfoModel.set("buildingName",t[0].ListOfAddress.Address[0].BuildingName),this.deviceInfoModel.set("unitNumber",t[0].ListOfAddress.Address[0].HouseNumber),this.deviceInfoModel.set("type",t[0].ListOfAddress.Address[0].Type),t[0].ListOfAddress.Address[0].Street){var c=t[0].ListOfAddress.Address[0].Street.split(" "),l=c.length>1?c[0]:"",d=c.length>1?c[1]:c[0];if(c.length>1){d="";for(var u=1;u<c.length;u++)d=d+c[u]+" "}this.deviceInfoModel.set("streetNumber",l),this.deviceInfoModel.set("streetName",d.trim())}this.deviceInfoModel.set("displayAddress",this.getAddressDetails());for(var h=[],m=[],g=0;g<i[0].ListOfService.Service.length;g++)"Principal"===i[0].ListOfService.Service[g].ProductDetail.Type?(this.deviceInfoModel.set("principalPackage",this.checkEmptyAndReplace(i[0].ListOfService.Service[g].ProductDetail.Name)),this.deviceInfoModel.set("principalStatus",this.checkEmptyAndReplace(i[0].ListOfService.Service[g].Status)),this.checkEmptyAndReplace("Active"===i[0].ListOfService.Service[g].Status)&&this.deviceInfoModel.set("quoteBasedDisconnectDate",this.checkEmptyAndReplace(this.getformatedDateforUI(new Date(t[0].EndDate)))),this.deviceInfoModel.set("chargeUntilDate",this.checkEmptyAndReplace(this.getformatedDateforUI(new Date(i[0].ListOfService.Service[g].ChargeUntilDate))))):"Addon"===i[0].ListOfService.Service[g].ProductDetail.Type&&(h.push(this.checkEmptyAndReplace(i[0].ListOfService.Service[g].ProductDetail.Name)),m.push(this.checkEmptyAndReplace(i[0].ListOfService.Service[g].Status)));this.deviceInfoModel.set("addOnPackage",this.checkEmptyObjectAndReplace(h)),this.deviceInfoModel.set("addOnStatus",this.checkEmptyObjectAndReplace(m))}if(this.get("originalChargePeriod",this.deviceInfoModel.chargePeriod),this.deviceInfoModel.set("chargePeriod",t[0].TermOfPayment),this.deviceInfoModel.set("contractStartDate",this.checkEmptyAndReplace(this.checkEmptyAndReplace(this.getformatedDateforUI(new Date(t[0].StartDate))))),this.deviceInfoModel.set("contractEndDate",this.checkEmptyAndReplace(this.getformatedDateforUI(new Date(t[0].EndDate)))),"-"!==this.deviceInfoModel.get("smartcardNumber")){var p=Komodo.Application.ManageViewingSharedObjectController.create();this.showBusyIndicator(),p.getCSILogs(this.deviceInfoModel.get("smartcardNumber"))}else this.set("showGrid",!1)}},checkEmptyAndReplace:function(e){return null===e||void 0===e||""===e||"Nan-Nan-Nan"===e?"-":e},checkEmptyObjectAndReplace:function(e){return null===e||void 0===e||0===e.length?["-"]:e},getformatedDateforUI:function(e){function t(e){var t=e.toString();return t.length<2?"0"+t:t}if(void 0!==e&&null!==e&&""!==e){var a=e.getFullYear(),o=t(e.getMonth()+1);return t(e.getDate())+"-"+o+"-"+a}},getformatedDateTimeforUI:function(e){function t(e){var t=e.toString();return t.length<2?"0"+t:t}var a=e.getFullYear(),o=t(e.getMonth()+1),s=t(e.getDate()),r=t(e.getHours()),n=t(e.getMinutes()),i=t(e.getSeconds()),c=r>=12?"PM":"AM";return r%=12,r=r||12,s+"-"+o+"-"+a+"   "+r+":"+n+":"+i+" "+c},getDateForObject:function(e){var t=e.split("T")[0].split("-"),a=e.split("T")[1].split(":");return new Date(t[0],t[1],t[2],a[0],a[1],a[2])},subscribeNotifyGetCSILogs:function(){var e=this;Komodo.Services.eventAggregator.subscribe("NotifyGetCSILogs",function(){e.hideBusyIndicator();var t=Komodo.Services.ManageViewingService.NotifyGetCSILogsMsg;e.populateGrid(t)})},subscribeNotifyGetCSILogsError:function(){var e=this;Komodo.Services.eventAggregator.subscribe("NotifyGetCSILogsError",function(){e.hideBusyIndicator();var t=Komodo.Services.ManageViewingService.NotifyGetCSILogsErrorMsg;"-1"===t.indexOf("is not found")&&Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),t,Komodo.Controls.MessageBoxOkButtons,e,"id5446673","danger")})},populateGrid:function(e){var t=this;if(e.length>0){t.set("showGrid",!0),t.deviceInfoModel.set("csiLogs",[]);for(var a=0;a<e.length;a++)t.newDeviceGridItem.set("historyID",e[a].HistoryId),t.newDeviceGridItem.set("date",t.getformatedDateforUI(new Date(e[a].MessageTimeStamp))),t.newDeviceGridItem.set("dateTime",t.getformatedDateTimeforUI(t.getDateForObject(e[a].MessageTimeStamp))),t.newDeviceGridItem.set("message",e[a].Message),t.newDeviceGridItem.set("eventDescription",e[a].EventDescription),t.newDeviceGridItem.set("reason",e[a].Reason),t.newDeviceGridItem.set("username",e[a].UserName),t.newDeviceGridItem.set("eventNumber",e[a].EventNumber),t.newDeviceGridItem.set("hostName",e[a].Host),t.newDeviceGridItem.set("serialNumber",e[a].SerialNumber),t.newDeviceGridItem.set("messageTrackingId",e[a].MessageTrackingId),t.addGridRow()}else t.set("showGrid",!1)},createNewGridItem:function(){var e=Komodo.Models.DeviceInfoModel.create();this.set("newDeviceGridItem",e)},addGridRow:function(){0===this.deviceInfoModel.csiLogs.length?this.deviceInfoModel.set("csiLogs",[this.get("newDeviceGridItem")]):this.deviceInfoModel.csiLogs.pushObject(this.get("newDeviceGridItem")),this.createNewGridItem()},getNewProcessID:function(){this.startNewProcess()},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,"100000","blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},viewCsiLogDetails:function(){var e=this.get("deviceInfoModel.commandGridItem");this.csiLogDetailsModel.set("historyID",e.get("historyID")),this.csiLogDetailsModel.set("dateTime",e.get("dateTime")),this.csiLogDetailsModel.set("username",e.get("username")),this.csiLogDetailsModel.set("eventNumber",e.get("eventNumber")),this.csiLogDetailsModel.set("hostName",e.get("hostName")),this.csiLogDetailsModel.set("serialNumber",e.get("serialNumber")),this.csiLogDetailsModel.set("reason",e.get("reason")),this.csiLogDetailsModel.set("messageTrackingId",e.get("messageTrackingId")),this.csiLogDetailsModel.set("message",e.get("message")),Komodo.Services.uiService.showModalPopup("CSI log Detail",null,{view:Komodo.Application.CsiLogDetailsView,context:{data:this.get("deviceInfoModel.commandGridItem")},canUserClose:!0})},cancelDeviceInfo:function(){var e=this;Komodo.Services.uiService.getController("csiManageViewing").setAgreementData(e.establishmentName,e.viewingLocation),Komodo.Services.uiService.getRoute("application").transitionTo("csiManageViewing")},actions:{View:function(){this.viewCsiLogDetails()},cancel:function(){this.cancelDeviceInfo()}},getAddressDetails:function(){var e=Komodo.Application.CustomerInformationMapper.create(),t=void 0!==this.deviceInfoModel.get("unitNumber")&&""!==this.deviceInfoModel.get("unitNumber").trim()?this.deviceInfoModel.get("unitNumber")+", ":"",a=void 0!==this.deviceInfoModel.get("buildingName")&&""!==this.deviceInfoModel.get("buildingName").trim()?this.deviceInfoModel.get("buildingName")+", ":"",o=void 0!==this.deviceInfoModel.get("streetName")&&""!==this.deviceInfoModel.get("streetName").trim()?this.deviceInfoModel.get("streetName")+", ":"";return t+a+(void 0!==this.deviceInfoModel.get("streetNumber")&&""!==this.deviceInfoModel.get("streetNumber").trim()?this.deviceInfoModel.get("streetNumber")+", ":"")+o+(void 0!==this.deviceInfoModel.get("suburb")&&""!==this.deviceInfoModel.get("suburb").trim()?this.deviceInfoModel.get("suburb")+", ":"")+(void 0!==this.deviceInfoModel.get("city")&&""!==this.deviceInfoModel.get("city").trim()?this.deviceInfoModel.get("city")+", ":"")+e.getProvinceText(this.deviceInfoModel.get("country"),this.deviceInfoModel.get("province"))+", "+e.getCountryText(this.deviceInfoModel.get("country"))+", "+(void 0!==this.deviceInfoModel.get("postalCode")&&""!==this.deviceInfoModel.get("postalCode").trim()?this.deviceInfoModel.get("postalCode"):"")},capitaliseFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.toLowerCase().slice(1)},getCDMData:function(){var e=this,t=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),a=Komodo.Services.localizationService.getCurrentLanguage();e.set("loggedInCountryId",t),Komodo.Services.cachedDataService.fetch("Location").done(function(t){var a=JSON.parse(t);e.set("countries",[]),$.each($.makeArray(a.Countries.Country),function(t,a){e.get("countries").addObject(a)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve Location domain = "+t+"/ qualifier = "+a)})},messageFailureMessageEventReceived:function(e){Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButton,this,"id5446674","danger"),this.hideBusyIndicator()},localeDeviceInfo:"locale.manageviewing:deviceInfo.",chargePeriodlst:[],accountId:void 0,agreementId:void 0,deviceId:void 0,smartCardNumber:void 0,establishmentName:void 0,viewingLocation:void 0,showGrid:!1,originalChargePeriod:void 0,defaultChargePer:void 0}),Komodo.Application.CancelServiceOrderController=Komodo.UI.Controller.extend({_locale:"",_SAGrid:!1,_MicroService:!1,_selectedRadioGridSA:null,_columnDeviceDataGrid:[],_columnQuoteDataGrid:[],_dropDownCategoryList:[],_dropDownReasonList:[],_dropDownCommunicationLanguageList:[],_dropDownCommunicationList:[],_cacheSwapDetail:[],_cacheQuotationStatus:[],_cachePromotionalDevices:[],_cacheHardwareModelDesc:[],init:function(){var e=this;try{this._super(),Komodo.log(e.getLocalizationService().value("locale.manageStock:cancelServiceOrder.logInit")),e.set("processVersion","v1.1"),e.set("processName","CancelServiceOrder"),e.requiresDependency("_stockService",{singleton:Komodo.Services.stockService}),e.requiresDependency("_localizationService",{singleton:Komodo.Services.localizationService})}catch(t){e.getStockService().handleException("init - "+e.getLocalizationService().value("locale.manageStock:cancelServiceOrder.title"),t,!0,!0)}},start:function(){this._super(),this.loadData()},stop:function(){this._super()},loadData:function(){var e=this;try{e.registerModel("dataModel",Komodo.Models.CancelServiceOrderModel),e.dataModel.set("showServiceOrder",!1),e.dataModel.set("showCancelButton",!1),e.getStockService().setCustomerID(this,this.get("dataModel"),"customerID","/manageViewing",null),e.getStockService().setCountryISO(this.get("dataModel"),"countryISO",function(){}),e.registerValidations(),Komodo.Services.featureToggleService.isEnabled("ManageViewing","useCancelServiceOrderMicroService").done(function(t){Ember.run(function(){e.set("_MicroService",t)})})}catch(t){e.getStockService().handleException("loadData",t,!0,!0)}},registerValidations:function(){var e=this;e.registerValidator(this.get("dataModel"),"quoteNumber",{isRequired:!0,displayName:e.getLocalizationService().value("locale.manageStock:cancelServiceOrder.registerValidations"),minLength:1,maxLength:21,groups:"validation"})},actions:{searchServiceOrder:function(){var e=this;try{Komodo.Services.busyService.start(!0,e.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,6e4,"blocking",this),e.dataModel.set("showServiceOrder",!1),e.dataModel.set("showCancelButton",!1),e.dataModel.get("quoteData").clear(),e.dataModel.set("createDate",""),e.dataModel.set("customerQuoteUID",""),e.dataModel.set("expiryDate",""),e.dataModel.set("totalPrice",""),e.canSubmitData(e.get("dataModel"),e.getLocalizationService().value("locale.manageStock:cancelServiceOrder.messageCanSubmitData"),{group:"validation",showInModal:!1})&&e.getQuote(e.dataModel.get("quoteNumber"),e.dataModel.get("customerID"),function(t,a){if(Komodo.Services.busyService.stop(e.get("processId"),"blocking"),null!=a)Komodo.Controls.MessageBoxController.show(e.getLocalizationService().value("locale.manageStock:cancelServiceOrder.error"),"<strong>"+e.getLocalizationService().value("locale.manageStock:cancelServiceOrder.errorGetQuote")+"'"+e.dataModel.get("quoteNumber")+"'. "+e.getLocalizationService().value("locale.manageStock:cancelServiceOrder.error")+":"+a+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger");else if(null!=t){if(e.dataModel.customerID!=t.Quote.CustomerUID)return void Komodo.Controls.MessageBoxController.show(e.getLocalizationService().value("locale.manageStock:cancelServiceOrder.error"),"<strong>"+e.getLocalizationService().value("locale.manageStock:cancelServiceOrder.responseGetQuote1")+" '"+e.dataModel.get("quoteNumber")+"'"+e.getLocalizationService().value("locale.manageStock:cancelServiceOrder.responseGetQuote2")+"'"+e.dataModel.customerID+"'.</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger");e.dataModel.set("showServiceOrder",!0),t.Quote.ListOfQuotationLineItem[0].Product.Details.UID.indexOf("SWAP-")>-1&&null==t.DeviceError?e.dataModel.set("showCancelButton",!0):Komodo.Controls.MessageBoxController.show(e.getLocalizationService().value("locale.manageStock:cancelServiceOrder.error"),"<strong>"+e.getLocalizationService().value("locale.manageStock:cancelServiceOrder.responseGetQuote3")+": "+t.DeviceError+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"),e.dataModel.set("createDate",t.Quote.CreateDate),e.dataModel.set("customerQuoteUID",t.Quote.CustomerUID),e.dataModel.set("expiryDate",t.Quote.ExpiryDate),e.dataModel.set("totalPrice",t.Quote.TotalPrice.Value),t.Quote.ListOfQuotationLineItem.forEach(function(t){if(void 0!=t&&void 0!=t.Product&&null!=t.Product.Details){var a=Ember.Object.extend({init:function(){this._super(),this.Name,this.Model}}).create();a.set("Name",t.Product.Details.Name),a.set("Model",t.Product.Details.Model),e.dataModel.get("quoteData").pushObject(a)}})}else Komodo.Controls.MessageBoxController.show(e.getLocalizationService().value("locale.manageStock:cancelServiceOrder.error"),"<strong>"+e.getLocalizationService().value("locale.manageStock:cancelServiceOrder.messageSearchServiceOrder")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")})}catch(t){e.getStockService().handleException("searchServiceOrder",t,!0,!0)}},cancelServiceOrder:function(){var e=this;try{if(Komodo.Services.busyService.start(!0,e.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,6e4,"blocking",this),e.canSubmitData(e.get("dataModel"),"Fill required data",{group:"validation",showInModal:!1}))if(e.get("_MicroService")){var t={ReferenceId:e.dataModel.get("quoteNumber")};this.bus.send(t,{messageType:"SAP.ServiceOrderManagement.Messages.v1.CancelServiceOrderCommand",correlationId:this.get("processId")}).done(function(){Komodo.Controls.MessageBoxController.show(e.getLocalizationService().value("locale.manageStock:cancelServiceOrder.success"),"<strong>"+e.getLocalizationService().value("locale.manageStock:cancelServiceOrder.doneCancelServiceOrder")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"cancelServiceOrderCommand","success").response=function(t){"ok"===t&&Komodo.Services.busyService.start(!0,e.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,6e4,"blocking",this)}}).fail(function(){Komodo.Controls.MessageBoxController.show(e.getLocalizationService().value("locale.manageStock:cancelServiceOrder.error"),"<strong>"+e.getLocalizationService().value("locale.manageStock:cancelServiceOrder.failCancelServiceOrder")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"cancelServiceOrderCommand","danger")})}else e.cancelQuote(e.dataModel.get("quoteNumber"),function(t,a){if(Komodo.Services.busyService.stop(e.get("processId"),"blocking"),null!=a)Komodo.Controls.MessageBoxController.show(e.getLocalizationService().value("locale.manageStock:cancelServiceOrder.error"),"<strong>"+e.getLocalizationService().value("locale.manageStock:cancelServiceOrder.errorCancelQuote")+"'"+e.dataModel.get("quoteNumber")+"'. "+e.getLocalizationService().value("locale.manageStock:cancelServiceOrder.error")+":"+a+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"),e.publishNotifyDeviceSwapUpdated("CANCEL","FAILED",e.dataModel.get("quoteNumber"),e.dataModel.get("countryISO"),a);else{Komodo.Controls.MessageBoxController.show(e.getLocalizationService().value("locale.manageStock:cancelServiceOrder.success"),"<strong>"+e.getLocalizationService().value("locale.manageStock:cancelServiceOrder.messageCancelQuote")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","success").response=function(t){"ok"==t&&e.transitionToRoute("/manageViewing")},e.publishNotifyDeviceSwapUpdated("CANCEL","SUCCESS",e.dataModel.get("quoteNumber"),e.dataModel.get("countryISO"),"")}})}catch(t){e.getStockService().handleException("cancelServiceOrder",t,!0,!0)}}},publishNotifyDeviceSwapUpdated:function(e,t,a,o,s){var r=this;try{var n={};n.ProcessStep=e,n.ProcessStepState=t,n.QuoteNumber=a,n.Country=o,n.FreeText=s,Komodo.Services.customerProfileService.publishEvent(this,n,"NotifyDeviceSwapUpdated","v1").done(function(){Komodo.log("Event Message for 'NotifyDeviceSwapUpdated' has published successfully.")}).fail(function(e){Komodo.log("Event Message for 'NotifyDeviceSwapUpdated' has failed.")})}catch(e){r.getStockService().handleException("cancelServiceOrder",e,!0,!1)}},handlers:{"SAP.ServiceOrderManagement.Messages.v1.CancelServiceOrderFailureEvent":function(e){var t=this;Komodo.Services.busyService.stop(t.get("processId"),"blocking"),null!=e.failureMessage&&(Komodo.Controls.MessageBoxController.show(t.getLocalizationService().value("locale.manageStock:cancelServiceOrder.error"),"<strong> "+t.getLocalizationService().value("locale.manageStock:cancelServiceOrder.error")+":"+e.failureMessage+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"cancelServiceOrderCommand","danger"),t.publishNotifyDeviceSwapUpdated("CANCEL","FAILED",t.dataModel.get("quoteNumber"),t.dataModel.get("countryISO"),e.failureMessage))},"SAP.ServiceOrderManagement.Messages.v1.CancelServiceOrderEvent":function(e){var t=this;Komodo.Services.busyService.stop(t.get("processId"),"blocking"),null!=e.canceledOrder&&1==e.canceledOrder?(Komodo.Controls.MessageBoxController.show(t.getLocalizationService().value("locale.manageStock:cancelServiceOrder.success"),"<strong>"+t.getLocalizationService().value("locale.manageStock:cancelServiceOrder.messageCancelQuote")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"cancelServiceOrderCommand","success").response=function(e){"ok"===e&&t.transitionToRoute("/manageViewing")},t.publishNotifyDeviceSwapUpdated("CANCEL","SUCCESS",t.dataModel.get("quoteNumber"),t.dataModel.get("countryISO"),"")):(Komodo.Controls.MessageBoxController.show(t.getLocalizationService().value("locale.manageStock:cancelServiceOrder.error"),"<strong>"+t.getLocalizationService().value("locale.manageStock:cancelServiceOrder.messageHandlers")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"cancelServiceOrderCommand","danger"),t.publishNotifyDeviceSwapUpdated("CANCEL","FAILED",t.dataModel.get("quoteNumber"),t.dataModel.get("countryISO"),"Quote cancelled failed with response false"))}},getQuote:function(e,t,a){var o=this;void 0!=a&&(Komodo.Services.queryService.refreshUserData(),Komodo.Services.queryService.getJSON("SwapMaterialAvailability/GetQuote?quoteNumber="+e+"&customerID="+t).done(function(e){a(e,null)}).error(function(e){a(null,o.getStockService().handleQueryServiceException(e))}))},cancelQuote:function(e,t){var a=this;void 0!=t&&(Komodo.Services.queryService.refreshUserData(),Komodo.Services.queryService.getJSON("SwapMaterialAvailability/CancelServiceOrder?quoteNumber="+e).done(function(e){t(e,null)}).error(function(e){t(null,a.getStockService().handleQueryServiceException(e))}))},toUpper:function(){try{void 0!=this.dataModel.get("quoteNumber")&&this.dataModel.set("quoteNumber",this.dataModel.get("quoteNumber").toUpperCase().trim())}catch(e){this.handleException("toUpper",e,!0,!0)}}.observes("dataModel.quoteNumber"),getStockService:function(){return this.get("_stockService")},getLocalizationService:function(){return this.get("_localizationService")},messageReceived:function(e){this.getStockService().messageReceived(e)},messageDeliveryFailure:function(e){this.getStockService().messageDeliveryFailure(e)},messageFault:function(e){this.getStockService().messageFault(e)},messageFailureMessageEventReceived:function(e){this.getStockService().messageFailureMessageEventReceived(this.get("processId"),e)},messageHandle:function(e,t){this.getStockService().messageHandle(this.get("processId"),e)}}),Komodo.Application.ConfirmSwapController=Komodo.UI.Controller.extend({_locale:"",init:function(){this._super(),Komodo.log("Constructing Reconnect service controller"),this.set("processVersion","v1.1"),this.set("processName","Branch Swap"),this.requiresDependency("_stockService",{singleton:Komodo.Services.stockService})},start:function(){this._super();var e=this;e._locale="locale.manageStock:confirmSwap.",this.registerModel("rcModelData",Komodo.Models.ConfirmSwapModel);var t=Komodo.Services.ProductAndServiceMaintenanceHelper.create();if(!t.isCustomerIdIsAvailableToRetriveData())return Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"customerNotLoaded"),kl.value(e._locale+"customerRequired"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"),void this.transitionToRoute("/manageViewing");var a=this.get("rcModelData");a.set("customerID",t.getCustomerIdToRetrieveData()),a.set("hardwareItem",""),a.set("isLinked",!1),this.getStockService().setCountryISO(this.get("rcModelData"),"countryISO",null)},stop:function(){this._super()},getStockService:function(){return this.get("_stockService")},toUpper:function(){try{void 0!=this.rcModelData.get("quoteNumber")&&this.rcModelData.set("quoteNumber",this.rcModelData.get("quoteNumber").toUpperCase().trim())}catch(e){this.handleException("toUpper",e,!0,!0)}}.observes("rcModelData.quoteNumber"),actions:{FindSwapDevices:function(){var e=this;if(void 0===this.rcModelData.get("quoteNumber")||""===this.rcModelData.get("quoteNumber"))Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"confirmSwap"),"<strong>"+kl.value(e._locale+"enterQuoteNumber")+"</strong><br/>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning");else{payLoad=Komodo.Models.RetrieveHardwareIssuedAgainstQuote.create();var t=Komodo.canonicalFacadeFactory(payLoad,["QuotationId","Country"]);t.set("QuotationId",this.rcModelData.get("quoteNumber")),t.set("Country",this.rcModelData.get("countryISO")),this.publishRequestOnBus(payLoad,"RetrieveHardwareIssuedAgainstQuotation","v1"),Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Processing,6e4,"blocking",this)}},ConfirmSwap:function(){this.PublishPerformSwap()}},PublishPerformSwap:function(){var e=[],t=this.rcModelData.get("hardwareItem");if(null!=t.SmartcardDetail){var a=Komodo.Models.ProductDetail.create(),o=Komodo.canonicalFacadeFactory(a,["Type","Model"]);o.set("Type",t.SmartcardDetail.Type),o.set("Model",t.SmartcardDetail.Model)}var s=Komodo.Models.ProductDetail.create(),r=Komodo.canonicalFacadeFactory(s,["Type","Model"]);r.set("Type",t.ProductDetail.Type),r.set("Model",t.ProductDetail.Model);var n=Komodo.Models.Hardware.create(),i=Komodo.canonicalFacadeFactory(n,["SerialNumber","ProductDetail","SmartcardDetail","LinkedSmartcard"]);i.set("SerialNumber",t.SerialNumber),i.set("LinkedSmartcard",null==t.LinkedSmartcard?null:t.LinkedSmartcard),i.set("ProductDetail",s),i.set("SmartcardDetail",void 0==a?null:a),e.push(n),null!=t.SecondaryHardware&&null!=t.SecondaryHardware.ProductDetail&&(null!=t.SecondaryHardware.SmartcardDetail&&(a=Komodo.Models.ProductDetail.create(),o=Komodo.canonicalFacadeFactory(a,["Type","Model"]),o.set("Type",t.SecondaryHardware.SmartcardDetail.Type),o.set("Model",t.SecondaryHardware.SmartcardDetail.Model)),s=Komodo.Models.ProductDetail.create(),r=Komodo.canonicalFacadeFactory(s,["Type","Model"]),r.set("Type",t.SecondaryHardware.ProductDetail.Type),r.set("Model",t.SecondaryHardware.ProductDetail.Model),n=Komodo.Models.Hardware.create(),i=Komodo.canonicalFacadeFactory(n,["SerialNumber","ProductDetail","SmartcardDetail","LinkedSmartcard"]),i.set("SerialNumber",t.SecondaryHardware.SerialNumber),i.set("LinkedSmartcard",null==t.SecondaryHardware.LinkedSmartcard?null:t.SecondaryHardware.LinkedSmartcard),i.set("ProductDetail",s),i.set("SmartcardDetail",void 0==a?null:a),e.push(n)),payLoad=Komodo.Models.SwapHardware.create();var c=Komodo.canonicalFacadeFactory(payLoad,["Country","CustomerId","LocationID","ListOfHardware_Hardware"]);c.set("Country",this.rcModelData.get("countryISO")),c.set("CustomerId",this.rcModelData.get("customerID")),c.set("LocationID",0),c.set("ListOfHardware_Hardware",e),this.publishRequestOnBus(payLoad,"SwapHardware","v1"),Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Processing,6e4,"blocking",this)},publishRequestOnBus:function(e,t,a){var o=Komodo.Services.customerProfileService,s="Event Message for "+t+" ";o.publishEvent(this,e,t,a).done(function(){Komodo.log(s+" has been published successfully")
}).fail(function(e){Komodo.log(s+" has failed"),Komodo.Controls.MessageBoxController.show(s,e,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")})},handleException:function(e,t,a,o){try{var s=this,r=kl.value(s._locale+"errorFunction")+" ["+e+"]. Exception: "+t+".";a&&(Komodo.log(r),null!=t&&null!=t.stack&&Komodo.log(t.stack)),o&&Komodo.Controls.MessageBoxController.show(kl.value(s._locale+"errorOccurred"),r,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}catch(e){Komodo.log(e)}},messageFailureMessageEventReceived:function(e){Komodo.Services.busyService.stop(this.get("processId"),"blocking");var t=this;"CreateInteraction"!=e.ResponseMessage.Payload.OriginatedEventName?Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"):Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,kl.value(t._locale+"errorCRM"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")},messageHandle:function(e,t){try{var a=this;Komodo.Services.busyService.stop(this.get("processId"),"blocking"),null!=e&&null!=e.payload&&null!=e.payload.Header?Komodo.Controls.MessageBoxController.show(kl.value(a._locale+"messageReceivedFailure"),t+" Message type: '"+e.payload.Header.EventName+"', Process: '"+e.payload.Header.ProcessName+"'.",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"):(Komodo.UI.error("[messageHandle.messageFault] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(a._locale+"problemOccurred"),kl.value(a._locale+"messageFailed")+e.messageId,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"))}catch(e){this.handleException("messageHandle",e,!0,!0)}},messageReceived:function(e){try{var t=this;this.messageHandle(e,kl.value(t._locale+"successfulMessage"))}catch(e){this.handleException("messageReceived",e,!0,!0)}},messageDeliveryFailure:function(e){try{var t=this;this.messageHandle(e,kl.value(t._locale+"communicationFailure"))}catch(e){this.handleException("messageDeliveryFailure",e,!0,!0)}},messageFault:function(e){try{var t=this;this.messageHandle(e,kl.value(t._locale+"faultExceptionOccurred"))}catch(e){this.handleException("messageFault",e,!0,!0)}},messageHardwareIssuedAgainstQuotationRetrievedReceived:function(e){var t=this;Komodo.Services.busyService.stop(this.get("processId"),"blocking");var a=this,o=Komodo.canonicalFacadeFactory(e.ResponseMessage.Payload,["ListOfHardware_Hardware"]);a.rcModelData.set("isLinked",!1);var s,r=o.get("ListOfHardware_Hardware");void 0!=r?(s=a.getArrayItem(r),s.length>0?(a.rcModelData.set("hardwareItem",r),a.rcModelData.set("lblFaultyDevice",r.SerialNumber),a.rcModelData.set("lblFaultyModel",r.ProductDetail.Model+" ("+r.Status+")"),a.rcModelData.set("lblServiceDevice",r.SecondaryHardware.SerialNumber),a.rcModelData.set("lblServiceModel",r.SecondaryHardware.ProductDetail.Model+" ("+r.SecondaryHardware.Status+")"),null!=r.LinkedSmartcard&&null!=r.SmartcardDetail&&null!=r.SecondaryHardware.LinkedSmartcard&&(a.rcModelData.set("isLinked",!0),a.rcModelData.set("lblFaultyDevice2",r.LinkedSmartcard),a.rcModelData.set("lblFaultyModel2",r.SmartcardDetail.Model+" ("+r.LinkedSmartcardStatus+")"),a.rcModelData.set("lblServiceDevice2",r.SecondaryHardware.LinkedSmartcard),a.rcModelData.set("lblServiceModel2",r.SecondaryHardware.SmartcardDetail.Model+" ("+r.SecondaryHardware.LinkedSmartcardStatus+")"))):Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"getHardwareAgainstQuote"),"<strong>"+kl.value(t._locale+"noDataFound")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"),a.rcModelData.set("boolSwapBtn",!1)):Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"getHardwareAgainstQuote"),"<strong>"+kl.value(t._locale+"noDataFound")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")},messageHardwareSwappedReceived:function(e){try{var t=this;Komodo.Services.busyService.stop(this.get("processId"),"blocking");Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"confirmSwap"),"<strong>"+kl.value(t._locale+"swapPerformedSuccessfully")+"</strong><br/>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","success").response=function(e){"ok"==e&&t.transitionToRoute("/manageViewing")}}catch(e){this.handleException("messageHardwareSwappedReceived",e,!0,!0)}},getArrayItem:function(e){try{return $.makeArray(e)}catch(e){this.handleException("getArrayItem",e,!0,!0)}}}),Komodo.Application.ConfirmSwapAvailabilityController=Komodo.UI.Controller.extend({_locale:"",useQuoteDropDown:!1,quoteInputBox:!0,quotenumberslst:[],init:function(){this._super(),Komodo.log("Constructing Confirm Swap Availability controller"),this.set("processVersion","v1.1"),this.set("processName","SwapHardware"),this.requiresDependency("_stockService",{singleton:Komodo.Services.stockService})},start:function(){this._super();var e=this;e._locale="locale.manageStock:confirmSwapAvailability.",this.registerModel("rcModelData",Komodo.Models.ConfirmSwapAvailabilityModel),this.registerValidator(this.get("rcModelData"),"quoteNumber",{type:"string",isRequired:!0,displayName:"Quote Number:",isRequiredMessage:kl.value(e._locale+"quoteRequired")}),this.getStockService().setCustomerID(this,this.get("rcModelData"),"customerID","/manageViewing",null),this.rcModelData.set("quoteNumber",""),this.getStockService().setCountryISO(this.get("rcModelData"),"countryISO",null),Komodo.Services.featureToggleService.isEnabled("ConfirmSwap","useQuoteDropDown").done(function(t){void 0==t&&""==t&&null==t||"true"!=t.toString().toLowerCase()?(e.set("useQuoteDropDown",!1),e.set("quoteInputBox",!1)):(Komodo.Services.busyService.start(!0,e.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,6e4,"blocking",this),e.get("quotenumberslst").clear(),Komodo.Services.queryService.getJSON("SwapMaterialAvailability/GetQuotesByCustomer?customerID="+e.rcModelData.get("customerID")+"&category=2&status=4").done(function(t){Komodo.Services.busyService.stop(e.get("processId"),"blocking"),void 0==t&&""==t&&null==t||0==t.Quotes.length?(e.set("useQuoteDropDown",!1),e.set("quoteInputBox",!1)):(e.set("useQuoteDropDown",!0),e.set("quotenumberslst",t.Quotes),e.set("quoteInputBox",!1))}).fail(function(t){Komodo.Services.busyService.stop(e.get("processId"),"blocking"),e.set("useQuoteDropDown",!1),e.set("quoteInputBox",!1)}))}).fail(function(t){e.set("useQuoteDropDown",!1),e.set("quoteInputBox",!1)})},stop:function(){this._super()},actions:{searchQuoteSwap:function(){if(0==this.canSubmitData(this.rcModelData,"Invalid Data",!0))return!1;this.PublishRetrieveQuote()},PerformHardwareSwap:function(){this.PublishConfirmSwap()}},toUpper:function(){try{void 0!=this.rcModelData.get("quoteNumber")&&this.rcModelData.set("quoteNumber",this.rcModelData.get("quoteNumber").toUpperCase().trim())}catch(e){this.getStockService().handleException("toUpper",e,!0,!0)}}.observes("rcModelData.quoteNumber"),getStockService:function(){return this.get("_stockService")},retrieveHardwareStatusArray:function(e,t,a,o){var s=this;void 0!=o&&(Komodo.Services.queryService.refreshUserData(),Komodo.Services.queryService.getJSON("IssueHardware/GetStatusAndPairForDevices?faultySerialNumbers="+e+"&replacementSerialNumbers="+t+"&swapType="+a).done(function(e){o(e,null)}).error(function(e){o(null,s.getStockService().handleQueryServiceException(e))}))},chkSpecialCharecter:function(e){for(var t="!`@#$%^&*()+=-[]\\';,./{}|\":<>?~_",a=0;a<e.length;a++)if(-1!=t.indexOf(e.charAt(a)))return!1;return!0},chkSpecialCharecterQuote:function(e){for(var t="!`@#$%^&*()+=[]\\';,./{}|\":<>?~_",a=0;a<e.length;a++)if(-1!=t.indexOf(e.charAt(a)))return!1;return!0},retrieveIssueHardware:function(e,t){var a=this;void 0!=t&&(Komodo.Services.queryService.refreshUserData(),Komodo.Services.queryService.getJSON("IssueHardware?quote="+e).done(function(e){t(e,null)}).error(function(e){t(null,a.getStockService().handleQueryServiceException(e))}))},PublishRetrieveQuote:function(){try{var e=this;e.get("rcModelData.modelsAndDevices").clear(),e.rcModelData.set("ServiceOrderNumber",""),e.rcModelData.set("FaultySerialNumber",""),this.chkSpecialCharecterQuote(this.rcModelData.get("quoteNumber"))?(Komodo.Services.busyService.start(!0,e.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,6e4,"blocking",this),e.retrieveIssueHardware(this.rcModelData.get("quoteNumber"),function(t,a){if(Komodo.Services.busyService.stop(e.get("processId"),"blocking"),null!=a)Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"confirmSwapAvailabilityTitle"),"Error: '"+a+"'",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger");else if(e.getStockService().guardAgainstNullObject(t,"FaultyDeviceV2.SerialNumber")&&e.getStockService().guardAgainstNullObject(t,"GoodsMovementDetail.StockIssueListV2")&&0!==t.GoodsMovementDetail.StockIssueListV2.length){e.rcModelData.set("ServiceOrderNumber",t.ServiceOrderNumber),e.rcModelData.set("FaultySerialNumber",t.FaultyDeviceV2.SerialNumber),e.rcModelData.set("FaultySmartcardNumber",e.getStockService().guardAgainstNullValue(t,"FaultyDeviceV2.LinkedSerial"));var o="";$.each(t.GoodsMovementDetail.StockIssueListV2,function(e,t){null!==t.SerialNumber&&(o+=t.SerialNumber+",")});var s=1===t.SwapType?"C":"A";Komodo.Services.busyService.start(!0,e.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,6e4,"blocking",this),e.rcModelData.set("Devices",null),e.retrieveHardwareStatusArray(e.rcModelData.get("FaultySerialNumber"),o.slice(0,-1),s,function(a,o){if(Komodo.Services.busyService.stop(e.get("processId"),"blocking"),null!=o)Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"confirmSwap"),"Error: '"+o+"'",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger");else{e.rcModelData.set("Devices",{StockReceipt:a.StockReceipt,StockIssue:a.StockIssue});var r=[];$.each(a.StockIssue,function(e,a){if("C"!==s||"SMARTCARD"!==a.DeviceType.toUpperCase()){var o=[];o.push({SrnStatus:a.DeviceSerialNumber+" ("+a.DeviceStatus+")",SerialNumber:a.DeviceSerialNumber,Model:a.DeviceModel}),a.PairedSerialNumber&&o.push({SrnStatus:a.PairedSerialNumber+" ("+a.PairedStatus+")",SerialNumber:a.PairedSerialNumber,Model:a.PairedModel}),r.push({Material:t.GoodsMovementDetail.StockIssueListV2[e].Material,SerialList:o})}}),$.each(r,function(o,s){$.each(s.SerialList,function(s,r){var n=!1,i="",c="",l="",d="";0===o&&0===s?(n=!0,i=t.FaultyDeviceV2.Material,c=t.FaultyDeviceV2.MaterialDescr,l=a.StockReceipt[0].DeviceSerialNumber,d=a.StockReceipt[0].DeviceSerialNumber+" ("+a.StockReceipt[0].DeviceStatus+")"):0===o&&1===s&&e.getStockService().guardAgainstNullValue(t,"FaultyDeviceV2.LinkedMaterialTypeSpecified")&&(n=!0,i=t.FaultyDeviceV2.LinkedMaterial,c=t.FaultyDeviceV2.LinkedMaterialDecr,l=a.StockReceipt[0].PairedSerialNumber,d=a.StockReceipt[0].PairedSerialNumber+" ("+a.StockReceipt[0].PairedStatus+")"),e.get("rcModelData.modelsAndDevices").addObject(Ember.Object.create({isFaultySerial:n,faultyModel:i,faultyDevice:c,faultySerial:l,replacementDevice:r.Model,replacementSerial:r.SerialNumber,replacementModel:r.Model,displayFaultySerial:d,displayReplacementSerial:r.SrnStatus}))})})}})}else Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"confirmSwapAvailabilityTitle"),kl.value(e._locale+"noGoodsMovementIssued"),Komodo.Controls.MessageBoxOkButtons,null,"swapHardware_publishRetrieveQuote_goodsMovement","danger")})):Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"confirmSwapAvailabilityTitle"),kl.value(e._locale+"validSerialNumber"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning")}catch(e){this.getStockService().handleException("PublishRetrieveQuote",e,!0,!0)}},BuildConfirmSwap:function(e,t,a){try{$.each(e,function(e,o){var s=Komodo.Models.Hardware.create(),r=Komodo.canonicalFacadeFactory(s,["SerialNumber","Status","ProductDetail","LinkedSmartcard","SmartcardDetail"]);r.set("Status",a),r.set("SerialNumber",o.DeviceSerialNumber);var n=Komodo.Models.ProductDetail.create(),i=Komodo.canonicalFacadeFactory(n,["Model","Type"]);if(i.set("Model",o.DeviceModel),i.set("Type",o.DeviceType),r.set("ProductDetail",n),o.PairedSerialNumber){r.set("LinkedSmartcard",o.PairedSerialNumber);var c=Komodo.Models.ProductDetail.create(),i=Komodo.canonicalFacadeFactory(c,["Model","Type"]);i.set("Model",o.PairedModel),i.set("Type",o.PairedType),r.set("SmartcardDetail",c)}t.push(s)})}catch(e){this.getStockService().handleException("BuildConfirmSwap",e,!0,!0)}},PublishConfirmSwap:function(){try{var e=this;payLoad=Komodo.Models.SwapHardware.create();var t=Komodo.canonicalFacadeFactory(payLoad,["Country","ListOfHardware_Hardware","ServiceOrderType","CustomerId","ServiceOrderId","Username"]);t.set("Country",this.rcModelData.get("countryISO")),t.set("CustomerId",this.rcModelData.get("customerID")),t.set("ServiceOrderId",this.rcModelData.get("quoteNumber")),t.set("UserId",0),t.set("Username",Komodo.Services.securityService.get("domainUserName").substring(3));var a=[];if(e.BuildConfirmSwap(e.rcModelData.get("Devices").StockReceipt,a,"FAULTY"),e.BuildConfirmSwap(e.rcModelData.get("Devices").StockIssue,a,"REPLACEMENT"),!(a.length>0))return void Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"issueHardware"),kl.value(e._locale+"NoFaultyDevices"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning");t.set("ListOfHardware_Hardware",a),this.publishRequestOnBus(payLoad,"SwapHardware","v1"),Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Processing,6e4,"blocking",this)}catch(e){this.getStockService().handleException("PublishConfirmSwap",e,!0,!0)}},publishRequestOnBus:function(e,t,a){var o=Komodo.Services.customerProfileService,s="Event Message for "+t+" ";o.publishEvent(this,e,t,a).done(function(){Komodo.log(s+" has been published successfully")}).fail(function(e){Komodo.log(s+" has failed"),Komodo.Controls.MessageBoxController.show(s,e,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")})},messageHardwareIssuedAgainstServiceOrderReceived:function(e){try{var t=this;Komodo.Services.busyService.stop(this.get("processId"),"blocking");Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"confirmSwapAvailabilityTitle"),"<strong>"+kl.value(t._locale+"confirmSwapAvailabilityOk")+"</strong><br/>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","success").response=function(e){"ok"==e&&t.transitionToRoute("/issueHardwareAgainstSwapAvailability")}}catch(e){this.getStockService().handleException("messageHardwareIssuedAgainstServiceOrderReceived",e,!0,!0)}},messageHardwareSwappedReceived:function(e){try{var t=this;Komodo.Services.busyService.stop(this.get("processId"),"blocking");Komodo.Controls.MessageBoxController.show("Confirm Swap","<strong>"+kl.value(t._locale+"swapConfirmedSuccessfully")+"</strong><br/>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","success").response=function(e){"ok"==e&&t.transitionToRoute("/manageViewing")}}catch(e){this.getStockService().handleException("messageHardwareSwappedReceived",e,!0,!0)}},messageFailureMessageEventReceived:function(e){Komodo.Services.busyService.stop(this.get("processId"),"blocking");var t=this;"CreateInteraction"!=e.ResponseMessage.Payload.OriginatedEventName?(this.set("rcModelData.modelsAndDevices",[]),Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")):Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,kl.value(t._locale+"errorCRM"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")},messageHandle:function(e,t){try{Komodo.Services.busyService.stop(this.get("processId"),"blocking");var a=this;null!=e&&null!=e.payload&&null!=e.payload.Header?Komodo.Controls.MessageBoxController.show("Message Received Failure",t+" Message type: '"+e.payload.Header.EventName+"', Process: '"+e.payload.Header.ProcessName+"'.",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"):(Komodo.UI.error("[messageHandle.messageFault] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(a._locale+"problemOccurred"),kl.value(a._locale+"messageNull")+e.messageId,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"))}catch(e){this.getStockService().handleException("messageHandle",e,!0,!0)}},messageReceived:function(e){try{var t=this;this.messageHandle(e,kl.value(t._locale+"successfulMessage"))}catch(e){this.getStockService().handleException("messageReceived",e,!0,!0)}},messageDeliveryFailure:function(e){try{var t=this;this.messageHandle(e,kl.value(t._locale+"communicationFailure"))}catch(e){this.getStockService().handleException("messageDeliveryFailure",e,!0,!0)}},messageFault:function(e){try{var t=this;this.messageHandle(e,kl.value(t._locale+"faultExceptionOccurred"))}catch(e){this.getStockService().handleException("messageFault",e,!0,!0)}},getArrayItem:function(e){try{return $.makeArray(e)}catch(e){this.getStockService().handleException("getArrayItem",e,!0,!0)}}}),Komodo.Application.IssueHardwareAgainstSalesOrderController=Komodo.UI.Controller.extend({_locale:"",_toUpper:!1,init:function(){this._super(),Komodo.log("Constructing Issue hardware against sales controller"),this.set("processVersion","v1.1"),this.set("processName","Issue Hardware"),this.requiresDependency("_stockService",{singleton:Komodo.Services.stockService})},start:function(){this._super();var e=this;e._locale="locale.manageStock:issueHardwareAgainstServiceOrder.",this.registerModel("rcModelData",Komodo.Models.IssueHardwareAgainstSalesOrderModel),this.registerValidator(this.get("rcModelData"),"quoteNumber",{type:"string",isRequired:!0,displayName:"Quote Number:",isRequiredMessage:kl.value(e._locale+"quoteRequired")});Komodo.Services.ProductAndServiceMaintenanceHelper.create();this.rcModelData.set("quoteNumber",""),this.getStockService().setCountryISO(this.get("rcModelData"),"countryISO",null)},stop:function(){this._super()},actions:{searchQuoteSales:function(){if(0==this.canSubmitData(this.rcModelData,"Invalid Data",!0))return!1;this.PublishRetrieveQuote()},IssueHardwareSales:function(){this.PublishIssueHardware()}},toUpper:function(){if(!this._toUpper)try{this._toUpper=!0;var e=this;void 0!=e.get("rcModelData.modelsAndDevices")&&e.get("rcModelData.modelsAndDevices").length>0&&e.get("rcModelData.modelsAndDevices").forEach(function(e){e.get("device")&&e.set("device",e.get("device").toUpperCase())})}catch(e){this.handleException("toUpper",e,!0,!0)}finally{this._toUpper=!1}}.observes("rcModelData.modelsAndDevices.@each.device"),getStockService:function(){return this.get("_stockService")},chkSpecialCharecter:function(e){for(var t="!`@#$%^&*()+=-[]\\';,./{}|\":<>?~_",a=0;a<e.length;a++)if(-1!=t.indexOf(e.charAt(a)))return!1;return!0},chkSpecialCharecterQuote:function(e){for(var t="!`@#$%^&*()+=[]\\';,./{}|\":<>?~_",a=0;a<e.length;a++)if(-1!=t.indexOf(e.charAt(a)))return!1;return!0},PublishIssueHardware:function(){var e=this,t=!0;payLoad=Komodo.Models.IssueHardwareAgainstSalesOrder.create();var a=Komodo.canonicalFacadeFactory(payLoad,["SalesOrderID","LocationID","Username","QuotationID","Country","ListOfHardware_Hardware"]);a.set("LocationID",0),a.set("QuotationID",this.rcModelData.get("QuoteID")),a.set("Country",this.rcModelData.get("countryISO")),a.set("Username",Komodo.Services.securityService.get("domainUserName").substring(3)),a.set("SalesOrderID",0);var o=[];if($.each(e.rcModelData.modelsAndDevices,function(){if(!(""!=this.device&&void 0!==this.device||this.canEdit))return t=!1,!1;if(!(t=e.chkSpecialCharecter(this.device)))return!1;oHardware=Komodo.Models.Hardware.create();var a=Komodo.canonicalFacadeFactory(oHardware,["SerialNumber","Status","ProductDetail"]);a.set("Status","5"),oProduct=Komodo.Models.ProductDetail.create();var s=Komodo.canonicalFacadeFactory(oProduct,["Model","ProductFeatures"]);s.set("Model",this.model),oProductFeature=Komodo.Models.ProductFeatures.create();var r=Komodo.canonicalFacadeFactory(oProductFeature,["Value","Description"]);r.set("Value",this.quantity),r.set("Description","Quantity"),s.set("ProductFeatures",oProductFeature),a.set("SerialNumber",this.device),a.set("ProductDetail",oProduct),o.push(oHardware)}),!(o.length>0&&1==t))return void Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"issueHardwareAgainstQuote"),kl.value(e._locale+"validDevice"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning");a.set("ListOfHardware_Hardware",o),this.publishRequestOnBus(payLoad,"IssueHardwareAgainstSalesOrder","v1"),Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Processing,6e4,"blocking",this)},PublishRetrieveQuote:function(){var e=this;payLoad=Komodo.Models.RetrieveQuotations.create();var t=Komodo.canonicalFacadeFactory(payLoad,["Country","QuotationUID"]);if(t.set("Country",this.rcModelData.get("countryISO")),t.set("QuotationUID",this.rcModelData.get("quoteNumber")),isValidStr=this.chkSpecialCharecterQuote(this.rcModelData.get("quoteNumber")),!isValidStr)return void Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"issueHardwareAgainstQuote"),kl.value(e._locale+"validQuote"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning");this.publishRequestOnBus(payLoad,"RetrieveHardwareToBeIssued","v1"),Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Processing,6e4,"blocking",this)},publishRequestOnBus:function(e,t,a){var o=Komodo.Services.customerProfileService,s="Event Message for "+t+" ";o.publishEvent(this,e,t,a).done(function(){Komodo.log(s+" has been published successfully")}).fail(function(e){Komodo.log(s+" has failed"),Komodo.Controls.MessageBoxController.show(s,e,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")})},messageHardwareToBeIssuedRetrievedReceived:function(e){Komodo.Services.busyService.stop(this.get("processId"),"blocking");var t=this,a=0;if(this.get("rcModelData.modelsAndDevices").clear(),void 0==e.ResponseMessage.Payload.ListOfQuotation.Quotation.ListOfQuotationLineItem)return void Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"issueHardwareAgainstQuote"),kl.value(t._locale+"noDataQuote"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger");var o,s=Komodo.canonicalFacadeFactory(e.ResponseMessage.Payload,["ListOfQuotation_Quotation_ListOfQuotationLineItem_QuotationLineItem","ListOfQuotation_Quotation_UID"]),r=s.get("ListOfQuotation_Quotation_ListOfQuotationLineItem_QuotationLineItem");return t.rcModelData.set("QuoteID",s.get("ListOfQuotation_Quotation_UID")),o=t.getArrayItem(r),o.length>0?(o.forEach(function(e){if(e.Quantity>0)for(var o=0;o<e.Quantity;o++)if(void 0!==e.Product.Details.Model){var s="nonserialized"==e.Product.Details.Description.toLowerCase();t.get("rcModelData.modelsAndDevices").addObject(Ember.Object.create({model:e.Product.Details.Model,modelDisplay:e.Product.Details.Model,device:"",quantity:1,canEdit:s})),a++}}),0==a?void Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"issueHardwareAgainstQuote"),kl.value(t._locale+"invalidQuoteDevice"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"):void 0):void Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"issueHardwareAgainstQuote"),kl.value(t._locale+"unableRetrieveQuoteData"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")},messageHardwareIssuedAgainstSalesOrderReceived:function(e){try{var t=this;Komodo.Services.busyService.stop(this.get("processId"),"blocking");Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"issueAgainstSalesOrder"),"<strong>"+kl.value(t._locale+"salesOrderSuccess")+"</strong><br/>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","success").response=function(e){"ok"==e&&t.transitionToRoute("/issueHardwareAgainstSalesOrder")}}catch(e){this.handleException("messageHardwareIssuedAgainstSalesOrderReceived",e,!0,!0)}},messageFailureMessageEventReceived:function(e){var t=this;Komodo.Services.busyService.stop(this.get("processId"),"blocking"),"CreateInteraction"!=e.ResponseMessage.Payload.OriginatedEventName?Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"):Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,kl.value(t._locale+"problemCRM"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")},messageHandle:function(e,t){try{Komodo.Services.busyService.stop(this.get("processId"),"blocking"),null!=e&&null!=e.payload&&null!=e.payload.Header?Komodo.Controls.MessageBoxController.show("Message Received Failure",t+" Message type: '"+e.payload.Header.EventName+"', Process: '"+e.payload.Header.ProcessName+"'.",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"):(Komodo.UI.error("[messageHandle.messageFault] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show("A problem occurred","Message event name and/or process fields are null. Message = "+e.messageId,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"))}catch(e){this.handleException("messageHandle",e,!0,!0)}},messageReceived:function(e){try{var t=this;this.messageHandle(e,kl.value(t._locale+"successfulMessage"))}catch(e){this.handleException("messageReceived",e,!0,!0)}},messageDeliveryFailure:function(e){try{var t=this;this.messageHandle(e,kl.value(t._locale+"communicationFailure"))}catch(e){this.handleException("messageDeliveryFailure",e,!0,!0)}},messageFault:function(e){try{var t=this;this.messageHandle(e,kl.value(t._locale+"faultException"))}catch(e){this.handleException("messageFault",e,!0,!0)}},getArrayItem:function(e){try{return $.makeArray(e)}catch(e){this.handleException("getArrayItem",e,!0,!0)}}}),Komodo.Application.InvalidPackagesController=Komodo.UI.Controller.extend({init:function(){Komodo.log("Constructing InvalidPackages controller"),this.set("processVersion","v1.1"),this.set("processName","InvalidPackages"),this.set("smartcardsList",[]),this._super()},start:function(){this.set("sharedObject",Komodo.Application.ManageViewingSharedObjectController.create()),this.registerModel("invalidPackagesModel",Komodo.Models.InvalidPackagesModel),this.set("helperFunction",Komodo.Services.ProductAndServiceMaintenanceHelper.create()),this.bindSmartCard(),this.set("invalidPackagesModel.isDisconnectPackageVisible",!1),this._super()},stop:function(){this._super()},bindSmartCard:function(){var e=this;if(e.set("smartcardsList",[]),e.set("hardwaresOfCustomer",[]),Komodo.Services.customerProfileService.currentFinancialAccounts)for(var t=e.helperFunction.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account),a=0;a<t.length;a++)if("9"!=t[a].Type)for(var o=e.helperFunction.createArrayForSingleElement(t[a].ListOfAgreement.Agreement),s=0;s<o.length;s++)if(13!=o[s].Type&&void 0!=o[s].ListOfHardware&&void 0!=o[s].ListOfHardware.Hardware)for(var r=e.helperFunction.createArrayForSingleElement(o[s].ListOfHardware.Hardware),n=0;n<r.length;n++){if(null!=r[n].LinkedSmartcard&&void 0!=r[n].LinkedSmartcard&&""!=r[n].LinkedSmartcard.trim())var i={Key:r[n].LinkedSmartcard,Value:r[n].LinkedSmartcard,Text:"Smartcard Number"};else if(null!=r[n].SerialNumber&&void 0!=r[n].SerialNumber&&""!=r[n].SerialNumber)var i={Key:r[n].SerialNumber,Value:r[n].SerialNumber,Text:"Device Number"};e.smartcardsList.push(i),e.hardwaresOfCustomer.pushObject(r[n])}},smartcardSelectionChanged:function(){var e=this;if(null!=e.invalidPackagesModel.smartcards&&void 0!=e.invalidPackagesModel.smartcards&&""!=e.invalidPackagesModel.smartcards){if(e.set("selectedHardware",e.get("hardwaresOfCustomer").filter(function(t){return null!=t.LinkedSmartcard&&void 0!=t.LinkedSmartcard&&""!=t.LinkedSmartcard?t.LinkedSmartcard==e.invalidPackagesModel.smartcards:null!=t.SerialNumber&&void 0!=t.SerialNumber&&""!=t.SerialNumber?t.SerialNumber==e.invalidPackagesModel.smartcards:void 0})),e.set("serviceUnderSmartcard",[]),null!=e.get("selectedHardware")&&""!=e.get("selectedHardware")&&void 0!=e.get("selectedHardware")&&null!=e.get("selectedHardware")[0].ListOfService&&""!=e.get("selectedHardware")[0].ListOfService&&void 0!=e.get("selectedHardware")[0].ListOfService&&void 0!=e.get("selectedHardware")[0].ListOfService.Service&&e.get("selectedHardware")[0].ListOfService.Service.length>0)for(var t=0;t<e.get("selectedHardware")[0].ListOfService.Service.length;t++)if(e.get("selectedHardware")[0].ListOfService.Service[t].Status.toUpperCase()=="Active".toUpperCase()||e.get("selectedHardware")[0].ListOfService.Service[t].Status.toUpperCase()=="Disconnected".toUpperCase()){var a=Komodo.Models.ServiceDetails.create();a.serviceName=e.get("selectedHardware")[0].ListOfService.Service[t].ProductDetail.Name,a.serviceType=e.get("selectedHardware")[0].ListOfService.Service[t].ProductDetail.Type,a.stateOfToggleButton=!0,e.get("serviceUnderSmartcard").push(a)}0==e.get("serviceUnderSmartcard").length?(Komodo.Controls.MessageBoxController.show("Smartcard Validation","No Services available for  cancel",Komodo.Controls.MessageBoxOkButton,e,"id5446673",""),this.set("invalidPackagesModel.isDisconnectPackageVisible",!1)):this.set("invalidPackagesModel.isDisconnectPackageVisible",!0)}}.observes("invalidPackagesModel.smartcards"),cancelServicesOnSmartCard:function(e){for(var t=[],a=this,o="Please confirm if you want to Cancel services for the below selected package(s).<br />",s=0;s<e.length;s++)if(!e[s].stateOfToggleButton){o+=e[s].serviceName+" will be cancelled immediately.<br />";var r=new Array;r.push(e[s].serviceName),t.push({SmartCardNumber:a.get("invalidPackagesModel.smartcards"),ServiceNames:r,CancelReason:"22",ScheduledCancelDate:""})}if(t.length>0){Komodo.Controls.MessageBoxController.show(kl.value(a.localeCancel+"cancelConfirm"),o,Komodo.Controls.MessageBoxYesNoButtons,a,"id5446673","warning").response=function(e){"yes"==e&&a.cancelPackageService(t)}}else Komodo.Controls.MessageBoxController.show("Cancellation Alert","Please uncheck the any of the service.",Komodo.Controls.MessageBoxOkButtons,a,"authmbx","danger")},cancelPackageService:function(e){var t=this;t.set("redirectFlag",!1),t.set("errorMessageForFail",""),t.set("errorMessage",[]),t.set("errorOnDate",[]);for(var a=e.length-1;a>=0;a--)""!=e[a].ScheduledCancelDate&&null!=e[a].ScheduledCancelDate&&void 0!=e[a].ScheduledCancelDate?(t.errorMessage.pushObject(e[a].ServiceNames[0]+" not scheduled for cancellation on "+e[a].ScheduledCancelDate),t.errorOnDate[a]=e[a].ScheduledCancelDate,t.set("redirectFlag",!0)):(t.errorMessage.pushObject(e[a].ServiceNames[0]+" not cancelled immediately"),t.errorOnDate[a]=void 0);t.showBlockingBusyIndicator();for(var o=[],a=e.length-1;a>=0;a--)o.pushObject(e[a]);Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo),Komodo.Services.queryService.postJSON("/Device/CancelServices",{data:o}).done(function(e){t.hideBusyIndicator();var a=!1;if(void 0!=e)for(var o=0;o<e.length;o++)void 0!=e[o].Status&&0!=e[o].Status&&void 0!=e[o].ResponseMessage&&(a=!0,t.errorMessageForFail+=t.errorMessage[o]+". Reason: "+e[o].ResponseMessage+"<br />");if(a){var s=Komodo.Controls.MessageBoxController.show(kl.value(t.localeCancel+"failedCancellation"),t.errorMessageForFail,Komodo.Controls.MessageBoxOkButton,t,"authmbx","danger");s.response=function(e){}}else{t.get("redirectFlag")||(msgText=kl.value(t.localeCancel+"successMsgImmediate"))
;var s=Komodo.Controls.MessageBoxController.show(kl.value(t.localeCancel+"successCancellation"),msgText,Komodo.Controls.MessageBoxOkButton,t,"id5446673","success");s.response=function(e){if("ok"==e)if(t.get("redirectFlag"))t.transitionToRoute("/home");else{var a=Komodo.Services.customerProfileService.getCustomerPersonalDetail();if(void 0!=a&&null!=a&&""!=a&&("SPECIALIST"==a.customerClass.toUpperCase()||"3"==a.customerClass))return void t.transitionToRoute("/home");t.transitionToRoute("/home")}}}}).error(function(e){var a=JSON.stringify(e);Komodo.log("Notify Owner ajax call failed. Error: "+a),t.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(t.localeCancel+"failedCancellation"),a,Komodo.Controls.MessageBoxOkButtons,t,"authmbx","danger")})},showBlockingBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,6e3,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},actions:{submitCancel:function(e){this.cancelServicesOnSmartCard(e.content)}},serviceUnderSmartcard:[],hardwaresOfCustomer:[],selectedHardware:void 0,redirectFlag:!1,errorMessageForFail:"",errorMessage:[],errorOnDate:[],localeCancel:"locale.manageviewing:invalidPackages."}),Komodo.Application.ChangeOfCountryController=Komodo.UI.Controller.extend({_locale:"",init:function(){this._super(),Komodo.log("Constructing change of country controller"),this.set("processVersion","v1.0"),this.set("processName","ChangeOfCountry"),this.requiresDependency("_stockService",{singleton:Komodo.Services.stockService}),this.requiresDependency("_queryApiWrapper",{singleton:Komodo.Services.queryApiWrapper})},start:function(){this._super();var e=this;e._locale="locale.manageStock:changeOfCountry.",e.registerModel("dataModel",Komodo.Models.ChangeOfCountryModel),e.getStockService().setCountryISO(e.get("dataModel"),"countryISO",null),Komodo.Services.featureToggleService.isEnabled("SwapProcess","BusinessUnitLocation").done(function(t){Ember.run(function(){e.dataModel.set("businessUnitFlag",t)})})},stop:function(){this._super()},getStockService:function(){return this.get("_stockService")},getQueryApiWrapper:function(){return this.get("_queryApiWrapper")},actions:{transfer:function(){try{var e=this;e.dataModel.get("businessUnitFlag")&&null==e.dataModel.get("screenSelectedBusinessUnits")?Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"messageBoxTitle"),kl.value(e._locale+"selectBusinessUnit2"),Komodo.Controls.MessageBoxOkButtons,e,"changeOfCountry_DeviceSerialNumberCheck","warning"):null==e.dataModel.get("DeviceSerialNumber")||""===e.dataModel.get("DeviceSerialNumber")?Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"messageBoxTitle"),kl.value(e._locale+"deviceSerialNumber2"),Komodo.Controls.MessageBoxOkButtons,e,"changeOfCountry_DeviceSerialNumberCheck","warning"):e.dataModel.get("DeviceSerialNumber").length>10?Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"messageBoxTitle"),kl.value(e._locale+"deviceSerialNumberLessThan"),Komodo.Controls.MessageBoxOkButtons,e,"changeOfCountry_SmartcardSerialNumberCheck","warning"):null==e.dataModel.get("SmartcardSerialNumber")||""===e.dataModel.get("SmartcardSerialNumber")?Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"messageBoxTitle"),kl.value(e._locale+"smartcardSerialNumber2"),Komodo.Controls.MessageBoxOkButtons,e,"changeOfCountry_SmartcardSerialNumberCheck","warning"):e.dataModel.get("SmartcardSerialNumber").length>10?Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"messageBoxTitle"),kl.value(e._locale+"smartcardLessThan2"),Komodo.Controls.MessageBoxOkButtons,e,"changeOfCountry_SmartcardSerialNumberCheck","warning"):e.getQueryApiWrapper().getPlant(e.get("processId"),Komodo.Services.securityService.get("session.domainUserName").substring(3),e.dataModel.get("screenSelectedBusinessUnits"),function(t,a){null!=a?Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"title"),"Error: '"+a+"'",Komodo.Controls.MessageBoxOkButtons,this,"changeOfCountry_getPlant_error","danger"):(e.dataModel.set("TargetPlant",t),e.publishChangeDeviceCountryCommand(!1))})}catch(e){this.getStockService().handleException("transfer",e,!0,!0)}},swap:function(){try{var e=this;e.dataModel.set("emptyNewSmartcardSerialNumber",!1),e.dataModel.set("maxNewSmartcardSerialNumber",!1),null==e.dataModel.get("NewSmartcardSerialNumber")||""===e.dataModel.get("NewSmartcardSerialNumber")?e.dataModel.set("emptyNewSmartcardSerialNumber",!0):e.dataModel.get("NewSmartcardSerialNumber").length>10?e.dataModel.set("maxNewSmartcardSerialNumber",!0):e.publishChangeDeviceCountryCommand(!0)}catch(e){this.getStockService().handleException("swap",e,!0,!0)}}},publishChangeDeviceCountryCommand:function(e){try{var t=this,a={DecoderSerial:t.dataModel.get("DeviceSerialNumber"),SmartCardSerial:t.dataModel.get("SmartcardSerialNumber"),NewSmartCardSerial:e?t.dataModel.get("NewSmartcardSerialNumber"):null,TargetPlant:t.dataModel.get("TargetPlant"),TargetProcess:null};t.bus.send(a,{messageType:"SAP.DeviceManagement.Messages.v1.ChangeDeviceCountryCommand",correlationId:t.get("processId")}).done(function(){Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"messageBoxTitle"),kl.value(t._locale+"changeOfCountrySent"),Komodo.Controls.MessageBoxOkButtons,this,"changeOfCountry_publish_ok","success").response=function(){t.getStockService().showBusyIndicator(t.get("processId"))}}).fail(function(){Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"messageBoxTitle"),kl.value(t._locale+"unableChangeOfCountrySend"),Komodo.Controls.MessageBoxOkButtons,this,"changeOfCountry_publish_error","danger")})}catch(e){this.getStockService().handleException("publishChangeDeviceCountryCommand",e,!0,!0)}},toUpper:function(){try{var e=this;e.getStockService().setToUpperCase(e.get("dataModel"),"DeviceSerialNumber"),e.getStockService().setToUpperCase(e.get("dataModel"),"SmartcardSerialNumber")}catch(e){this.getStockService().handleException("toUpper",e,!0,!0)}}.observes("dataModel.DeviceSerialNumber","dataModel.SmartcardSerialNumber"),handlers:{"SAP.DeviceManagement.Messages.v1.DeviceCountryChangedFailureEvent":function(e){var t=this;t.getStockService().hideBusyIndicator(t.get("processId")),Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"title"),"Error: "+(t.getStockService().guardAgainstNullObject(e,"failureMessage")?e.failureMessage:kl.value(t._locale+"seeLogsDetails")),Komodo.Controls.MessageBoxOkButtons,this,"changeOfCountry_handlers_DeviceCountryChangedFailureEvent","danger")},"SAP.DeviceManagement.Messages.v1.DeviceCountryChangedEvent":function(e){var t=this;t.getStockService().hideBusyIndicator(t.get("processId")),"2"===e.returnCode?t.getStockService().getUIService().showModalPopup(kl.value(t._locale+"swapSmartcard"),void 0,{view:Komodo.Application.ChangeOfCountrySwapView,canUserClose:!0,context:t,shouldStartAndStopController:!1}):"0"===e.returnCode?(Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"title"),kl.value(t._locale+"changeOfCountrySuccessful"),Komodo.Controls.MessageBoxOkButtons,this,"changeOfCountry_handlers_DeviceCountryChangedEvent","success"),t.getStockService().restartController(t)):"1"===e.returnCode?(Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"title"),kl.value(t._locale+"changeOfCountryPartiallyCompleted"),Komodo.Controls.MessageBoxOkButtons,this,"changeOfCountry_handlers_DeviceCountryChangedEvent","warning"),t.getStockService().restartController(t)):Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"title"),kl.value(t._locale+"invalidReturnCode")+" '"+e.returnCode+"'",Komodo.Controls.MessageBoxOkButtons,this,"changeOfCountry_handlers_DeviceCountryChangedEvent","danger")}},messageReceived:function(e){this.getStockService().messageReceived(e)},messageDeliveryFailure:function(e){this.getStockService().messageDeliveryFailure(e)},messageFault:function(e){this.getStockService().messageFault(e)},messageFailureMessageEventReceived:function(e){this.getStockService().messageFailureMessageEventReceived(this.get("processId"),e)},messageHandle:function(e){this.getStockService().messageHandle(this.get("processId"),e)}}),Komodo.Application.HolidayHomesController=Komodo.UI.Controller.extend({_localeHolidayHomes:"locale.manageviewing:holidayHomes.",currentHolidayHomesView:void 0,_isHolidayHomePrepaidAllowed:!1,_isHolidayHomeSwitchingAllowed:!1,_isHolidayHomeSwitchServices:!1,_isXtraViewCheckBoxVisible:!1,_disableOnOffDate:!1,_holidayHomeXtraViewArray:[],_childSmartcardList:[],_hhSuspended:[],_isDPPServices:!1,_idHolidayHomeForSA:!1,init:function(){Komodo.log("Constructing Holiday Homes controller"),this.set("processVersion","v1.1"),this.set("processName","Holiday Homes"),this.subscribeHolidayHomesFinancialAccountsRetrievedReceived(),this.set("switchOrDailyPrepaid",[]),this.registerModel("holidayHomesModel",Komodo.Models.HolidayHomesModel),this.set("gridData",[]),this._super()},start:function(){if(this.registerModel("holidayHomesModel",Komodo.Models.HolidayHomesModel),this.checkHHReconnectPermission(),this.set("hardwareServiceModel",Komodo.Models.HardwareAndServicesModel.create()),this.set("helperFunction",Komodo.Services.ProductAndServiceMaintenanceHelper.create()),this.set("isCustomerAvailable",this.helperFunction.isCustomerIdIsAvailableToRetriveData()),this.set("hhViewingDaysLeft",[]),this.holidayHomesModel.set("shownoSmartcardsLabel",!0),this.holidayHomesModel.set("standaloneAvailable",!1),this.holidayHomesModel.set("switchingAvailable",!1),this.holidayHomesModel.set("noSwitchingAllowed",!1),this.holidayHomesModel.set("isHolidayHomesSuspended",!1),this.holidayHomesModel.set("switchedSmartcardSelected",!1),this.holidayHomesModel.set("number_general",0),this.holidayHomesModel.set("number_holidayHomes",0),this.holidayHomesModel.set("suspendedOrDiscHolidayhomesList",[]),this.holidayHomesModel.set("validNumberOfHolidayHomes",!1),this.holidayHomesModel.set("equalGeneralHolidayHomes",!1),this.holidayHomesModel.set("equalOrGreaterGeneral",!1),this.holidayHomesModel.set("customerHardwares",[]),this.holidayHomesModel.set("dpphardwareandserviceslist",[]),this.registerValidator(this.get("holidayHomesModel"),"switchOnDate",{type:"date",minDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())}),this.registerValidator(this.get("holidayHomesModel"),"switchOffDate",{type:"date",minDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())}),this.set("currentDateforSwitchOn",new Date((new Date).toLocaleDateString("sv-SE"))),this.checkIsHolidayHomePrepaidAllowed(),this.checkIsHolidayHomeSwitchServices(),this.checkIsHolidayHomeSwitchingAllowed(),!this.get("isCustomerAvailable"))return void Komodo.Controls.MessageBoxController.show(kl.value(this.localeDisconnect+"customerNotFound"),kl.value(this.localeDisconnect+"customerNotFoundText"));this.set("holidayHomeNumberPerGen",GetClarityConstants("ManageViewingConstants","productsConstants.products.HOLIDAYHOME_NO_PER_GEN").toString()),this.setSwitchOrDailyPrepaidArray(),this.set("customerId",this.helperFunction.getCustomerIdToRetrieveData());var e=Komodo.Services.customerProfileService.getCustomerPersonalDetail();this.isCustomerAllowed(e)&&e.isDstv?(this.showBlockingBusyIndicator(),this.holidayHomesModel.set("noResidentialcustomermsg",!1),this.retrieveScheduledChanges(this.get("customerId")),this.getNumberOfViewingDays(this.get("customerId"))):this.holidayHomesModel.set("noResidentialcustomermsg",!0),this._super()},retrieveScheduledChanges:function(e){var t=this;t.set("scheduleDetails",[]),Komodo.Services.queryService.getJSON("/ScheduledChanges/GetScheduledChanges?customerNumber="+e,{async:!1}).done(function(e){Ember.isEmpty(e)||Ember.isEmpty(e.ScheduleList)||e.ScheduleList.forEach(function(e){Ember.isEmpty(e.ChildSchedules)||e.ChildSchedules.forEach(function(a){var o=Komodo.Models.ScheduleDetail.create();o.set("productId",a.ProductId),o.set("scheduledDate",e.ScheduledDate),t.get("scheduleDetails").addObject(o)})})}).error(function(e){JSON.stringify(e),Komodo.Controls.MessageBoxController.show(kl.value(t._localeHolidayHomes+"holidayHomesTitle"),e.responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,t,"authmbx3","danger")})},checkHHReconnectPermission:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("ManageViewing","isHHPrepaidSA").done(function(t){t?e.set("_idHolidayHomeForSA",!0):e.set("_idHolidayHomeForSA",!1)}).fail(function(t){e.set("_idHolidayHomeForSA",!1)})},isCustomerAllowed:function(e){var t=this,a=!1;return GetClarityConstants("ManageViewingConstants","manageViewingConstants.holidayHome.allowedCustomerClassTypes").forEach(function(o){var s=o.split(":");e.customerClass===GetClarityConstants("ManageCustomerConstants","customerTypesConstants.customerTypes."+s[0]).toString()&&(1===s.length?a=!0:s.length>1&&s[1].split(";").forEach(function(o){e.typeId===t.getConstants("CustomerTypesConstants",o)&&(a=!0)}))}),a},getConstants:function(constantType,constantName){switch(Komodo.Services.queryService.getSelectedCountryId()){case void 0:case null:case"":return eval("Komodo."+constantType+".default."+constantName);default:return void 0!==eval("Komodo."+constantType+"."+Komodo.Services.queryService.getSelectedCountryId()+"."+constantName)?eval("Komodo."+constantType+"."+Komodo.Services.queryService.getSelectedCountryId()+"."+constantName):eval("Komodo."+constantType+".default."+constantName)}},checkIsHolidayHomePrepaidAllowed:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("ManageViewing","HolidayHomePrepaidAllowed").done(function(t){e.set("_isHolidayHomePrepaidAllowed",t)}).fail(function(e){Komodo.error("[ERROR] : could not retrieve HolidayHomePrepaidAllowed domain = "+Komodo.Services.queryService.getSelectedCountryId()+"/ qualifier = "+language),Komodo.error("[ERROR] : "+e)})},checkIsHolidayHomeSwitchServices:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("ManageViewing","HolidayHomeSwitchServices").done(function(t){e.set("_isHolidayHomeSwitchServices",t)}).fail(function(e){Komodo.error("[ERROR] : could not retrieve HolidayHomeSwitchServices domain = "+Komodo.Services.queryService.getSelectedCountryId()+"/ qualifier = "+language),Komodo.error("[ERROR] : "+e)})},checkIsHolidayHomeSwitchingAllowed:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("ManageViewing","HolidayHomeSwitchingAllowed").done(function(t){e.set("_isHolidayHomeSwitchingAllowed",t)}).fail(function(e){Komodo.error("[ERROR] : could not retrieve HolidayHomeSwitchingAllowed domain = "+Komodo.Services.queryService.getSelectedCountryId()+"/ qualifier = "+language),Komodo.error("[ERROR] : "+e)})},getNumberOfViewingDays:function(e){var t=this;Komodo.Services.queryService.getJSON("/AccountProfile/GetNumberOfViewingDaysLeftForRecconect?customerId="+e).done(function(e){null!=e?(t.set("hhViewingDaysLeft",e.ViewingDaysInfoPerDevice),t.bindPackagesInformation(),t.hideBusyIndicator()):Komodo.Controls.MessageBoxController.show("Holiday Homes","Unable to retrieve number of viewing days",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}).error(function(e){t.bindPackagesInformation(),t.hideBusyIndicator();var a=JSON.stringify(e);Komodo.log("GetNumberOfViewingDaysLeftForRecconect ajax call failed. Error: "+a)})},setSwitchOrDailyPrepaidArray:function(){this.get("switchOrDailyPrepaid").clear(),this.get("switchOrDailyPrepaid").addObject({title:"Switching",value:"true"}),this.get("switchOrDailyPrepaid").addObject({title:"Daily Prepaid",value:"false"})},bindPackagesInformation:function(){var e=this,t=e.holidayHomesModel;t.set("hardwareAndServicesArray",[]),t.get("hardwareAndServices").length>0&&t.set("hardwareAndServices",[]),t.hardwareAndServicesArray=e.getHardwareAndAllActiveServicesOfCustomer(),t.get("hardwareAndServices").addObjects(t.hardwareAndServicesArray)},checkGeneralAndHHCountOnSwitching:function(){var e,t=this,a=t.holidayHomesModel;return e=GetClarityConstants("ManageViewingConstants","productsConstants.products.HOLIDAYHOME_NO_PER_GEN")*t.get("number_general"),t.get("number_holidayHomes")>=e?a.set("validNumberOfHolidayHomes",!0):a.set("validNumberOfHolidayHomes",!1),a.get("validNumberOfHolidayHomes")},checkEqualGeneralAndHHCountOnSwitching:function(){var e,t=this,a=t.holidayHomesModel;return e=GetClarityConstants("ManageViewingConstants","productsConstants.products.HOLIDAYHOME_NO_PER_GEN")*t.get("number_general"),t.get("number_holidayHomes")==e?a.set("equalGeneralHolidayHomes",!0):a.set("equalGeneralHolidayHomes",!1),a.get("equalGeneralHolidayHomes")},checkEqualOrGreaterGeneralHHCount:function(){var e,t=this,a=t.holidayHomesModel;return e=GetClarityConstants("ManageViewingConstants","productsConstants.products.HOLIDAYHOME_NO_PER_GEN")*t.get("number_general"),t.get("number_holidayHomes")==e||t.get("number_general")>t.get("number_holidayHomes")?a.set("equalOrGreaterGeneral",!0):a.set("equalOrGreaterGeneral",!1),a.get("equalOrGreaterGeneral")},maxLimitCount:function(){var e=this;return GetClarityConstants("ManageViewingConstants","productsConstants.products.HOLIDAYHOME_NO_PER_GEN")*e.get("number_general")},switchingValidation:function(){var e=this,t=e.holidayHomesModel;return e.checkGeneralAndHHCountOnSwitching()?t.set("noSwitchingAllowed",!0):t.set("noSwitchingAllowed",!1),t.get("noSwitchingAllowed")},checkEmptyAndReplace:function(e){return null===e||void 0===e||""===e||"Nan-Nan-Nan"===e||"01-01-1"===e?"-":e},collectServiceDetails:function(e,t,a,o){var s=this,r=s.helperFunction.createArrayForSingleElement(e),n=void 0;s.set("isFilteredDataAvailable",!0);var i=r.filter(function(e){return"principal"===e.ProductDetail.Type.toString().toLowerCase()});i&&i.length>1&&(i=$.makeArray(i.sort(function(e,t){return new Date(t.ChargeUntilDate)-new Date(e.ChargeUntilDate)})[0]));var c=r.filter(function(e){return"freetoair"===e.ProductDetail.Type.toString().toLowerCase()});c&&c.length>1&&(c=$.makeArray(c.sort(function(e,t){return new Date(t.ChargeUntilDate)-new Date(e.ChargeUntilDate)})[0]));var l=r.filter(function(e){return"addon"===e.ProductDetail.Type.toString().toLowerCase()||"high definition addon"===e.ProductDetail.Type.toString().toLowerCase()});if(l&&l.length>1){var d=$.makeArray(l.sort(function(e,t){return new Date(t.ChargeUntilDate)-new Date(e.ChargeUntilDate)}));d&&d.length>1&&(d=$.makeArray(d.sort(function(e,t){return new Date(t.ActivationDate)-new Date(e.ActivationDate)}))),n=$.makeArray(d[0])}else n=$.makeArray(l);d&&d.length>1&&$.each(d,function(e,t){"Active"===t.Status&&0!==e&&n.addObject(t)});var u=r.filter(function(e){return"access"===e.ProductDetail.Type.toString().toLowerCase()});u&&u.length>1&&(u=$.makeArray(u.sort(function(e,t){return new Date(t.ChargeUntilDate)-new Date(e.ChargeUntilDate)})[0]));var h=Komodo.Models.HolidayHomesGridModel.create();if(h.set("type",o),""!=t.LinkedSmartcard&&null!=t.LinkedSmartcard&&void 0!=t.LinkedSmartcard&&""!=t.SerialNumber&&null!=t.SerialNumber&&void 0!=t.SerialNumber?(h.set("deviceNumber",t.SerialNumber+" - "+t.LinkedSmartcard),h.set("smartCardNumber",t.LinkedSmartcard)):""!=t.SerialNumber&&null!=t.SerialNumber&&void 0!=t.SerialNumber?h.set("deviceNumber",t.SerialNumber):""!=t.LinkedSmartcard&&null!=t.LinkedSmartcard&&void 0!=t.LinkedSmartcard?h.set("smartCardNumber",t.LinkedSmartcard):h.set("deviceNumber","-"),null!=t.SecondaryHardware&&void 0!=t.SecondaryHardware&&""!=t.SecondaryHardware&&t.SecondaryHardware.Hardware.length>0&&(h.set("isXtraview",!0),t.SecondaryHardware.Hardware.forEach(function(e){""!=e.LinkedSmartcard&&null!=e.LinkedSmartcard&&void 0!=e.LinkedSmartcard&&""!=e.SerialNumber&&null!=e.SerialNumber&&void 0!=e.SerialNumber?h.get("secondaryDeviceNumber").push(e.SerialNumber+" - "+e.LinkedSmartcard):""!=e.SerialNumber&&null!=e.SerialNumber&&void 0!=e.SerialNumber?h.get("secondaryDeviceNumber").push(e.SerialNumber):""!=e.LinkedSmartcard&&null!=e.LinkedSmartcard&&void 0!=e.LinkedSmartcard?h.get("smartCardNumber").push(e.LinkedSmartcard):h.get("secondaryDeviceNumber").push("-")})),i&&i.length>0?(h.set("prinPckName",i[0].ProductDetail?s.checkEmptyAndReplace(i[0].ProductDetail.Description):"-"),h.set("prinPckStatus",s.checkEmptyAndReplace(i[0].Status)),h.set("prinPckQBD",s.getScheduleDateFromProductId(parseInt(i[0].UID)))):(h.set("prinPckName","-"),h.set("prinPckStatus","-"),h.set("prinPckQBD","-")),c&&c.length>0&&("-"==h.get("prinPckName")&&(h.set("prinPckName",""),h.set("prinPckStatus",""),h.set("prinPckQBD","-")),h.set("freeViewPckName",c[0].ProductDetail?s.checkEmptyAndReplace(c[0].ProductDetail.Description):"-"),h.set("freeViewPckStatus",s.checkEmptyAndReplace(c[0].Status)),h.set("freeViewQBD",s.getScheduleDateFromProductId(parseInt(c[0].UID)))),"True"==t.InsuranceStatus&&null!=t.InsuranceDetail){h.set("insuranceServices","Insurance"),h.set("insuranceServicesStatus",s.checkEmptyAndReplace(t.InsuranceDetail.Status));var m=r.filter(function(e){return"insurance"===e.ProductDetail.Type.toString().toLowerCase()});h.set("insuranceServicesQBD",s.getScheduleDateFromProductId(parseInt(m[0].UID)))}else h.set("insuranceServices","-"),h.set("insuranceServicesStatus","-"),h.set("insuranceServicesQBD","-");if(u&&u.length>0?(h.set("accessService",u[0].ProductDetail?u[0].ProductDetail.Description:""),h.set("accessServiceStatus",s.checkEmptyAndReplace(u[0].Status)),h.set("accessServiceQBD",s.getScheduleDateFromProductId(parseInt(u[0].UID)))):(h.set("accessService","-"),h.set("accessServiceStatus","-"),h.set("accessServiceQBD","-")),n&&n.length>0?n.map(function(e){null!==e.ProductDetail||void 0!==e.ProductDetail?(h.get("addOnPckNames").push(e.ProductDetail.Description),h.get("addOnPckStatus").push(e.Status),h.get("addonQBD").push(s.getScheduleDateFromProductId(parseInt(e.UID)))):(h.get("addOnPckNames").push(""),h.get("addOnPckStatus").push(""),h.get("addonQBD").push(""))}):(h.get("addOnPckNames").push(""),h.get("addOnPckStatus").push(""),h.get("addonQBD").push("")),"-"==h.get("accessService")&&(h.set("accessService",""),h.set("accessServiceStatus",""),h.set("accessServiceQBD","")),"-"==h.get("insuranceServices")&&(h.set("insuranceServices",""),h.set("insuranceServicesStatus",""),h.set("insuranceServicesQBD","")),o==kl.value(s._localeHolidayHomes+"prepaidType")&&i&&i.length>0)if("active"==i[0].Status.toLowerCase()||"pending removal"==i[0].Status.toLowerCase()){var g=XDates.getDateObjectFromString(XDates.getformatedDateforUI(new Date)),p=new Date(i[0].ChargeUntilDate),v=p.getTime()-g.getTime();h.set("viewingDaysLeft",Math.round(Math.abs(v/864e5))+1)}else if("Suspended"==i[0].Status){var f=this.get("hhViewingDaysLeft");null!=f&&void 0!=f&&f.forEach(function(e){e.DeviceSerialNumber===t.LinkedSmartcard&&null!=e.ServiceList&&void 0!=e.ServiceList&&e.ServiceList.forEach(function(e){for(var a=0;a<t.ListOfService.Service.length;a++)if(e.ProductID==t.ListOfService.Service[a].UID&&"Suspended"==t.ListOfService.Service[a].Status){var o=e.ViewingDaysLeft;h.set("viewingDaysLeft",o)}})})}else"Disconnected"!=i[0].Status&&"Request Disconnect"!=i[0].Status||h.set("viewingDaysLeft",0);else h.set("viewingDaysLeft","-");s.get("gridData").push(h)},getScheduleDateFromProductId:function(e){var t,a=this,o=null;if(Ember.isEmpty(a.get("scheduleDetails"))||(o=$.grep(a.scheduleDetails,function(t){return t.productId===e})),Ember.isEmpty(o))return"-";if(o.length>1){var s=[];o.forEach(function(e){var t=e.scheduledDate.split("T");s.addObject(new Date(t[0]))});var r=XDates.getNearestDate(new Date,s);t=a.getformatedDateforUI(r)}else t=a.getFormattedQBD(o[0].scheduledDate);return t},getHardwareAndAllActiveServicesOfCustomer:function(){var e=this,t=e.holidayHomesModel,a=[],o=0,s=0,r=[],n=[],i=!1,c=void 0;t.set("fromdeviceSmartcardList",[]),t.set("todeviceSmartCardList",[]),t.set("holidayHomesGeneralSmartcardsList",[]),t.set("shownoSmartcardsLabel",!1),t.set("areAllServicesCancelled",!0),t.set("annualSmartcards",[]),t.set("generalSwitchedAgreementsSmartcardList",[]),e.set("gridData",[]);var l=void 0,d=null,u=Komodo.Services.customerProfileService.currentFinancialAccounts,h=void 0;if(void 0!=u&&Komodo.Services.customerProfileService.currentFinancialAccounts&&Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage&&Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload&&Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount&&Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account)for(var m=e.helperFunction.createArrayForSingleElement(u.ResponseMessage.Payload.ListOfAccount.Account),g=0;g<m.length;g++)if("9"!=m[g].Type)if("13"!=m[g].Type){if(m[g].ListOfAgreement.Agreement){var p=GetClarityConstants("ManageViewingConstants","manageViewingConstants.holidayHome.excludeAgreementType");r=e.helperFunction.createArrayForSingleElement(m[g].ListOfAgreement.Agreement);for(var v=0;v<r.length;v++)if(Ember.isEmpty(p)||!Ember.isEmpty(p)&&!p.contains(r[v].Type)){if(void 0!=r[v].ListOfHardware&&void 0!=r[v].ListOfHardware.Hardware){n=e.helperFunction.createArrayForSingleElement(r[v].ListOfHardware.Hardware);for(var f=0;f<n.length;f++){t.customerHardwares.push(n[f]),t.smartcardAgreementList.pushObject({Key:n[f].LinkedSmartcard,Value:r[v].UID});var b=GetClarityConstants("ManageViewingConstants","manageViewingConstants.holidayHome.decoderExcluded");(Ember.isEmpty(b)||!Ember.isEmpty(b)&&!b.contains(n[f].ProductDetail.Name.toLowerCase()))&&(null!=n[f].SecondaryHardware&&void 0!=n[f].SecondaryHardware&&""!=n[f].SecondaryHardware&&n[f].SecondaryHardware.Hardware.length>0?n[f].ListOfService&&n[f].ListOfService.Service&&(e.collectServiceDetails(n[f].ListOfService.Service,n[f],n,kl.value(e._localeHolidayHomes+"generalType")),d=Komodo.Models.HardwareAndServicesModel.create(),null!=n[f].LinkedSmartcard&&void 0!=n[f].LinkedSmartcard&&""!=n[f].LinkedSmartcard?d=e.helperFunction.setDecoderDetail(d,n[f].ProductDetail.Name,n[f].LinkedSmartcard):null!=n[f].SerialNumber&&void 0!=n[f].SerialNumber&&""!=n[f].SerialNumber&&(d=e.helperFunction.setDecoderDetail(d,n[f].ProductDetail.Name,n[f].SerialNumber)),d=e.helperFunction.setActiveServicesDetail(d,n[f].ListOfService.Service),null==d||null==d.principalServiceName||""==d.principalServiceName||void 0==d.principalServiceName||"Active"!=d.principalServiceStatus||"3"!=m[g].Type&&"15"!=m[g].Type||(o++,"15"==m[g].Type&&t.dpphardwareandserviceslist.push(d),c=void 0,Ember.isEmpty(n[f].LinkedSmartcard)?Ember.isEmpty(n[f].SerialNumber)||(c={Key:n[f].SerialNumber,Value:n[f].SerialNumber+" - General",Type:"General"},t.holidayHomesGeneralSmartcardsList.push(c)):(c={Key:n[f].LinkedSmartcard,Value:n[f].LinkedSmartcard+" - General",Type:"General"},t.holidayHomesGeneralSmartcardsList.push(c))),Ember.isEmpty(n[f].LinkedSmartcard)||(h={agrID:r[v].UID,LinkedSmartcardNumber:n[f].LinkedSmartcard},t.generalSwitchedAgreementsSmartcardList.push(h))):(null!=n[f].LinkedSmartcard&&void 0!=n[f].LinkedSmartcard&&""!=n[f].LinkedSmartcard&&(h={agrID:r[v].UID,LinkedSmartcardNumber:n[f].LinkedSmartcard},t.generalSwitchedAgreementsSmartcardList.push(h)),t.set("areAllServicesCancelled",!0),n[f].ListOfService&&n[f].ListOfService.Service&&(e.collectServiceDetails(n[f].ListOfService.Service,n[f],n,kl.value(e._localeHolidayHomes+"generalType")),d=Komodo.Models.HardwareAndServicesModel.create(),null!=n[f].LinkedSmartcard&&void 0!=n[f].LinkedSmartcard&&""!=n[f].LinkedSmartcard?d=e.helperFunction.setDecoderDetail(d,n[f].ProductDetail.Name,n[f].LinkedSmartcard):null!=n[f].SerialNumber&&void 0!=n[f].SerialNumber&&""!=n[f].SerialNumber&&(d=e.helperFunction.setDecoderDetail(d,n[f].ProductDetail.Name,n[f].SerialNumber)),null!=(d=e.helperFunction.setActiveServicesDetail(d,n[f].ListOfService.Service))&&null!=d.principalServiceName&&""!=d.principalServiceName&&void 0!=d.principalServiceName&&(a.push(d),"Active"==d.principalServiceStatus&&(m[g].Type!=Komodo.AccountTypes.DSTV_RES&&m[g].Type!=Komodo.AccountTypes.PAYMENT_PLAN||o++,c=void 0,null!=n[f].LinkedSmartcard&&void 0!=n[f].LinkedSmartcard&&""!=n[f].LinkedSmartcard?(c={Key:n[f].LinkedSmartcard,Value:n[f].LinkedSmartcard+" - General",Type:"General"},t.holidayHomesGeneralSmartcardsList.push(c)):null!=n[f].SerialNumber&&void 0!=n[f].SerialNumber&&""!=n[f].SerialNumber&&(c={Key:n[f].SerialNumber,Value:n[f].SerialNumber+" - General",Type:"General"},t.holidayHomesGeneralSmartcardsList.push(c))))),void 0!=n[f].ListOfService.Service&&(0!=n[f].ListOfService.Service.length||m[g].Type!=Komodo.AccountTypes.DSTV_RES&&m[g].Type!=Komodo.AccountTypes.PAYMENT_PLAN)||(o++,null!=n[f].LinkedSmartcard&&void 0!=n[f].LinkedSmartcard&&""!=n[f].LinkedSmartcard&&(h={agrID:r[v].UID,LinkedSmartcardNumber:n[f].LinkedSmartcard},t.generalSwitchedAgreementsSmartcardList.push(h)))))}}e.set("number_general",o)}}}else if("13"==m[g].Type&&m[g].ListOfAgreement.Agreement){r=e.helperFunction.createArrayForSingleElement(m[g].ListOfAgreement.Agreement);for(var C=0;C<r.length;C++){if(void 0!=r[C].ListOfHardware&&void 0!=r[C].ListOfHardware.Hardware){n=e.helperFunction.createArrayForSingleElement(r[C].ListOfHardware.Hardware);for(var S=0;S<n.length;S++)if(t.customerHardwares.push(n[S]),t.smartcardAgreementList.pushObject({Key:n[S].LinkedSmartcard,Value:r[C].UID}),i=!1,!Ember.isEmpty(n[S].SecondaryHardware)&&n[S].SecondaryHardware.Hardware.length>0&&(i=!0),"12"==r[C].TermOfPayment&&t.annualSmartcards.push(n[S].LinkedSmartcard),t.set("areAllServicesCancelled",!0),n[S].ListOfService&&n[S].ListOfService.Service){d=Komodo.Models.HardwareAndServicesModel.create(),null!=n[S].LinkedSmartcard&&void 0!=n[S].LinkedSmartcard&&""!=n[S].LinkedSmartcard?d=e.helperFunction.setDecoderDetail(d,n[S].ProductDetail.Name,n[S].LinkedSmartcard):null!=n[S].SerialNumber&&void 0!=n[S].SerialNumber&&""!=n[S].SerialNumber&&(d=e.helperFunction.setDecoderDetail(d,n[S].ProductDetail.Name,n[S].SerialNumber));for(var D=!1,y=0;y<n[S].ListOfService.Service.length;y++)if("Principal"==n[S].ListOfService.Service[y].ProductDetail.Type){D=!0;break}if(void 0==n[S].ListOfService.Service||0==n[S].ListOfService.Service.length||void 0!=n[S].ListOfService.Service&&n[S].ListOfService.Service.length>0&&0==D){var w=void 0;null!=n[S].LinkedSmartcard&&void 0!=n[S].LinkedSmartcard&&""!=n[S].LinkedSmartcard?(todeviceSmartCard={Key:n[S].LinkedSmartcard,Value:n[S].LinkedSmartcard},t.todeviceSmartCardList.push(todeviceSmartCard),w={Key:n[S].LinkedSmartcard,Value:n[S].LinkedSmartcard+"- Holiday Home/No Service",Type:"Blank"},t.holidayHomesGeneralSmartcardsList.push(w)):null!=n[S].SerialNumber&&void 0!=n[S].SerialNumber&&""!=n[S].SerialNumber&&(todeviceSmartCard={Key:n[S].SerialNumber,Value:n[S].SerialNumber},t.todeviceSmartCardList.push(todeviceSmartCard),w={Key:n[S].LinkedSmartcard,Value:n[S].LinkedSmartcard+"- Holiday Home/No Service",Type:"Blank"},t.holidayHomesGeneralSmartcardsList.push(w)),l=kl.value(e._localeHolidayHomes+"holidayHomeType")}else{d=e.helperFunction.setNonCalcelledServicesDetail(d,n[S].ListOfService.Service),null!=d&&null!=d.principalServiceName&&""!=d.principalServiceName&&void 0!=d.principalServiceName&&a.push(d);for(var I=0;I<n[S].ListOfService.Service.length;I++){var x=void 0;if("AgreementId"==n[S].ListOfService.Service[I].ProductDetail.ProductFeatures[0].Description&&"Principal"==n[S].ListOfService.Service[I].ProductDetail.Type){if((x=n[S].ListOfService.Service[I].ProductDetail.ProductFeatures[0].Value)==r[C].UID){var M=void 0,T=void 0;null!=n[S].LinkedSmartcard&&void 0!=n[S].LinkedSmartcard&&""!=n[S].LinkedSmartcard?M=i?{Key:n[S].LinkedSmartcard,Value:n[S].LinkedSmartcard+" "+kl.value(e._localeHolidayHomes+"PrepaidXtraView"),Type:"Prepaid"}:{Key:n[S].LinkedSmartcard,Value:n[S].LinkedSmartcard+"- Holiday Home",Type:"Prepaid"}:null!=n[S].SerialNumber&&void 0!=n[S].SerialNumber&&""!=n[S].SerialNumber&&(M=i?{Key:n[S].SerialNumber,
Value:n[S].SerialNumber+" "+kl.value(e._localeHolidayHomes+"PrepaidXtraView"),Type:"Prepaid"}:{Key:n[S].SerialNumber,Value:n[S].SerialNumber+" - Holiday Home",Type:"Prepaid"}),t.holidayHomesGeneralSmartcardsList.length>0?(T=e.checkSmartcardExistOrNot(t.holidayHomesGeneralSmartcardsList,M),0===T.length&&t.holidayHomesGeneralSmartcardsList.push(M)):t.holidayHomesGeneralSmartcardsList.push(M),t.set("standaloneAvailable",!0),l=kl.value(e._localeHolidayHomes+"prepaidType")}if(x!=r[C].UID){t.set("switchingAvailable",!0),l=kl.value(e._localeHolidayHomes+"switchedType");var N=void 0;null!=n[S].LinkedSmartcard&&void 0!=n[S].LinkedSmartcard&&""!=n[S].LinkedSmartcard?(N=i?{Key:n[S].LinkedSmartcard,Value:n[S].LinkedSmartcard+" "+kl.value(e._localeHolidayHomes+"SwitchedXtraView"),Type:"Switched",AgreementId:x}:{Key:n[S].LinkedSmartcard,Value:n[S].LinkedSmartcard+"- Holiday Home(Switched)",Type:"Switched",AgreementId:x},t.holidayHomesGeneralSmartcardsList.push(N)):null!=n[S].SerialNumber&&void 0!=n[S].SerialNumber&&""!=n[S].SerialNumber&&(N=i?{Key:n[S].SerialNumber,Value:n[S].SerialNumber+" "+kl.value(e._localeHolidayHomes+"SwitchedXtraView"),Type:"Switched",AgreementId:x}:{Key:n[S].SerialNumber,Value:n[S].SerialNumber+" - Holiday Home(Switched)",Type:"Switched",AgreementId:x},t.holidayHomesGeneralSmartcardsList.push(N))}}}null!=d&&(void 0==d.principalServiceStatus||void 0!=d.principalServiceStatus&&d.principalServiceStatus.toUpperCase()=="Cancelled".toUpperCase())&&(void 0==d.listOfAddOnServices||void 0!=d.listOfAddOnServices&&0==d.listOfAddOnServices.length)&&(void 0==d.listOfAccessServices||void 0!=d.listOfAccessServices&&0==d.listOfAccessServices.length)?null!=n[S].LinkedSmartcard&&void 0!=n[S].LinkedSmartcard&&""!=n[S].LinkedSmartcard?(todeviceSmartCard={Key:n[S].LinkedSmartcard,Value:n[S].LinkedSmartcard},t.todeviceSmartCardList.push(todeviceSmartCard)):null!=n[S].SerialNumber&&void 0!=n[S].SerialNumber&&""!=n[S].SerialNumber&&(todeviceSmartCard={Key:n[S].SerialNumber,Value:n[S].SerialNumber},t.todeviceSmartCardList.push(todeviceSmartCard)):null!=d&&(void 0==d.principalServiceStatus||void 0!=d.principalServiceStatus&&d.principalServiceStatus.toUpperCase()=="Suspended".toUpperCase())?null!=n[S].LinkedSmartcard&&void 0!=n[S].LinkedSmartcard&&""!=n[S].LinkedSmartcard?(t.suspendedOrDiscHolidayhomesList.push(n[S].LinkedSmartcard),todeviceSmartCard={Key:n[S].LinkedSmartcard,Value:n[S].LinkedSmartcard},t.todeviceSmartCardList.push(todeviceSmartCard)):null!=n[S].SerialNumber&&void 0!=n[S].SerialNumber&&""!=n[S].SerialNumber&&(t.suspendedOrDiscHolidayhomesList.push(n[S].SerialNumber),todeviceSmartCard={Key:n[S].SerialNumber,Value:n[S].SerialNumber},t.todeviceSmartCardList.push(todeviceSmartCard)):null!=d&&(void 0==d.principalServiceStatus||void 0!=d.principalServiceStatus&&d.principalServiceStatus.toUpperCase()=="Disconnected".toUpperCase())&&(null!=n[S].LinkedSmartcard&&void 0!=n[S].LinkedSmartcard&&""!=n[S].LinkedSmartcard?t.suspendedOrDiscHolidayhomesList.push(n[S].LinkedSmartcard):null!=n[S].SerialNumber&&void 0!=n[S].SerialNumber&&""!=n[S].SerialNumber&&t.suspendedOrDiscHolidayhomesList.push(n[S].SerialNumber)),void 0!=d.principalServiceStatus&&"Active"==d.principalServiceStatus&&s++}if(e.collectServiceDetails(n[S].ListOfService.Service,n[S],n,l),e.get("_isHolidayHomeSwitchServices")&&i&&!Ember.isEmpty(t.todeviceSmartCardList)){if($.grep(n[S].ListOfService.Service,function(e){return"Principal"===e.ProductDetail.Type&&"Suspended"===e.Status}).length>0){var P=$.grep(t.todeviceSmartCardList,function(e){return e.Value===n[S].LinkedSmartcard});P.forEach(function(e){t.todeviceSmartCardList.removeObject(e)})}for(var O=0;O<t.todeviceSmartCardList.length;O++)t.todeviceSmartCardList[O].Value===n[S].LinkedSmartcard&&(t.todeviceSmartCardList[O].Key=t.todeviceSmartCardList[O].Key+" (XtraView)")}}}e.set("number_holidayHomes",s)}}return 0==t.todeviceSmartCardList.length&&t.set("shownoSmartcardsLabel",!0),a},checkSmartcardExistOrNot:function(e,t){return e.filter(function(e){return e.Key===t.Key})},subscribeHolidayHomesFinancialAccountsRetrievedReceived:function(){var e=this;Komodo.Services.eventAggregator.subscribe("HolidayHomesFinancialAccountsRetrievedReceived",function(){e.bindPackagesInformation()})},subscribeHolidayHomesFinancialAccountsRetrievedError:function(){var e=this;Komodo.Services.eventAggregator.subscribe("HolidayHomesFinancialAccountsRetrievedError",function(){Komodo.Controls.MessageBoxController.show(kl.value(e._localeHolidayHomes+"technicalError"),kl.value(currentObject._localeHolidayHomes+"technicalErrorMessage"),Komodo.Controls.MessageBoxOkButtons,e,"id5446673","danger")})},holidayHomesGeneralSmartcardChanged:function(){var e=this,t=e.holidayHomesModel,a=void 0,o=!1,s=!1,r=!1;if(t.set("switchedSmartcardSelected",!1),Ember.isEmpty(t.holidayHomesGeneralSmartcards))t.set("isDailyPrepaid",!1),t.set("isSwitching",!1);else{t.set("switchOffDate",void 0),t.set("switchOnDate",void 0),t.set("todevices",void 0);for(var n=0;n<t.holidayHomesGeneralSmartcardsList.length;n++)if(t.holidayHomesGeneralSmartcardsList[n].Key==t.holidayHomesGeneralSmartcards)if((t.hardwareAndServices.length>0||t.dpphardwareandserviceslist.length>0)&&(t.hardwareAndServices.length>0&&(s=e.checkDPPBundleServices(t.hardwareAndServices)),t.dpphardwareandserviceslist.length>0&&(r=e.checkDPPBundleServices(t.dpphardwareandserviceslist)),(s||r)&&(o=!0,e.set("_isDPPServices",o))),"General"==t.holidayHomesGeneralSmartcardsList[n].Type)t.get("shownoSmartcardsLabel")?(Komodo.Controls.MessageBoxController.show(kl.value(e._localeHolidayHomes+"holidayHomesTitle"),kl.value(e._localeHolidayHomes+"noSmartcards"),null,e,"id123456","warning"),t.set("holidayHomesGeneralSmartcards",void 0),t.set("isDailyPrepaid",!1),t.set("isSwitching",!1)):o&&e.isDPPWithXtraview(t.holidayHomesGeneralSmartcards,"General")?(Komodo.Controls.MessageBoxController.show(kl.value(e._localeHolidayHomes+"holidayHomesTitle"),kl.value(e._localeHolidayHomes+"dppXtraviewValidation"),null,e,"id123456","warning"),t.set("holidayHomesGeneralSmartcards",void 0),t.set("isDailyPrepaid",!1),t.set("isSwitching",!1)):(t.set("generalSmartcards",t.holidayHomesGeneralSmartcards),t.set("isDailyPrepaid",!1),t.set("isSwitching",!0));else if("Switched"==t.holidayHomesGeneralSmartcardsList[n].Type)if(e.get("_isHolidayHomeSwitchingAllowed")){t.set("switchedSmartcardSelected",!0),t.set("generalSmartcards",t.holidayHomesGeneralSmartcards);for(var i=0;i<t.generalSwitchedAgreementsSmartcardList.length;i++)t.holidayHomesGeneralSmartcardsList[n].AgreementId==t.generalSwitchedAgreementsSmartcardList[i].agrID&&t.set("generalSwitchedSmartcard",t.generalSwitchedAgreementsSmartcardList[i].LinkedSmartcardNumber);t.set("isDailyPrepaid",!1),t.set("isSwitching",!0)}else a=Komodo.Controls.MessageBoxController.show(kl.value(e._localeHolidayHomes+"holidayHomesTitle"),kl.value(e._localeHolidayHomes+"SwitchingNotAllowed"),Komodo.Controls.MessageBoxOkButton,e,"id789678","warning"),a.response=function(a){"ok"===a&&t.set("holidayHomesGeneralSmartcards",kl.value(e._localeHolidayHomes+"listOfDevicesPrompt"))};else"Prepaid"==t.holidayHomesGeneralSmartcardsList[n].Type?e.get("_isHolidayHomePrepaidAllowed")?(e.currentHolidayHomesView.stopChildController(),t.set("isDailyPrepaid",!0),t.set("isSwitching",!1),t.set("isReconnect",!1),t.set("isUpgradeorDowngrade",!1),t.set("isDisconnect",!1),t.set("viewDays","-")):(a=Komodo.Controls.MessageBoxController.show(kl.value(e._localeHolidayHomes+"holidayHomesTitle"),kl.value(e._localeHolidayHomes+"PrepaidNotAllowed"),Komodo.Controls.MessageBoxOkButton,e,"id789678","warning"),a.response=function(a){"ok"===a&&t.set("holidayHomesGeneralSmartcards",kl.value(e._localeHolidayHomes+"listOfDevicesPrompt"))}):"Blank"==t.holidayHomesGeneralSmartcardsList[n].Type&&(a=Komodo.Controls.MessageBoxController.show(kl.value(e._localeHolidayHomes+"holidayHomesTitle"),kl.value(e._localeHolidayHomes+"ConfirmationForPrepaidHolidayhome"),Komodo.Controls.MessageBoxYesNoButtons,e,"id789678","warning"),a.response=function(a){"yes"==a?e.transitionToRoute("/associateProducts"):t.set("holidayHomesGeneralSmartcards",kl.value(e._localeHolidayHomes+"listOfDevicesPrompt"))})}}.observes("holidayHomesModel.holidayHomesGeneralSmartcards"),todeviceSelectionChanged:function(){var e=this,t=e.holidayHomesModel;for(t.set("isActivetodevice",!0),t.set("switchOnDate",void 0),t.set("switchOffDate",void 0),e.set("_hhSuspended",[]),null!==t.todevices&&void 0!==t.todevices?t.set("toDeviceserialnumber",t.todevices):t.set("isActivetodevice",!1),i=0;i<t.annualSmartcards.length;i++)null!=t.todevices&&void 0!=t.todevices&&t.toDeviceserialnumber==t.annualSmartcards[i]&&(Komodo.Controls.MessageBoxController.show(kl.value(e._localeHolidayHomes+"holidayHomesTitle"),kl.value(e._localeHolidayHomes+"noAnnualCustomer"),null,e,"id123456","warning"),t.set("todevices",void 0));e.get("_isDPPServices")&&null!=t.todevices&&void 0!=t.todevices&&(e.isDPPCompatibleHardware(t.customerHardwares)||(Komodo.Controls.MessageBoxController.show(kl.value(e._localeHolidayHomes+"holidayHomesTitle"),kl.value(e._localeHolidayHomes+"dppDeviceNotcompatible"),null,e,"id123456","warning"),t.set("todevices",void 0)),e.isDPPWithXtraview(t.todevices,"Holiday Home")&&(Komodo.Controls.MessageBoxController.show(kl.value(e._localeHolidayHomes+"holidayHomesTitle"),kl.value(e._localeHolidayHomes+"dppXtraviewValidation"),null,e,"id123456","warning"),t.set("todevices",void 0))),e.get("_isHolidayHomeSwitchServices")&&e.setVisiblityForXtraViewSection()}.observes("holidayHomesModel.todevices"),setVisiblityForXtraViewSection:function(){var e=this,t=[],a=e.holidayHomesModel,o=void 0,s=void 0;e.set("_holidayHomeXtraViewArray",[]),e.set("_isXtraViewCheckBoxVisible",!1),Ember.set(e,"_holidayHomeXtraViewArray",[]),Ember.isEmpty(a.todevices)||e.holidayHomesModel.todeviceSmartCardList.length>1&&(e.holidayHomesModel.todeviceSmartCardList.forEach(function(o){if(s=$.grep(e.gridData,function(e){return e.smartCardNumber===o.Value&&!1===e.isXtraview&&"Holiday Home"==e.type}),e.set("_hhSuspended",$.grep(e.gridData,function(e){return e.smartCardNumber===a.todevices&&"Suspended"===e.prinPckStatus&&!1===e.isXtraview})),o.Value!==a.todevices&&!Ember.isEmpty(s)&&!s[0].isXtraview&&Ember.isEmpty(e.get("_hhSuspended"))){var r=Ember.Object.extend({init:function(){this.deviceNumber=o.Value,this.isDeviceSelected=!1,this._super()}}).create();t.push(r)}}),Ember.set(e,"_holidayHomeXtraViewArray",t),o=$.grep(e.gridData,function(e){return e.smartCardNumber===a.todevices}),e.get("_isDPPServices")?e.set("_isXtraViewCheckBoxVisible",!1):Ember.isEmpty(o)||o[0].isXtraview||Ember.isEmpty(e._holidayHomeXtraViewArray)||e.set("_isXtraViewCheckBoxVisible",!0))},switchOnDateChanged:function(){var e=this,t=e.holidayHomesModel,a=new Date;t.switchOnDate instanceof Date&&!isNaN(t.switchOnDate.valueOf())&&null!=t.switchOnDate&&""!=t.switchOnDate&&void 0!=t.switchOnDate&&(-1==XDates.compare(t.get("switchOnDate").toDateString(),a.toDateString())&&(Komodo.Controls.MessageBoxController.show(kl.value(e._localeHolidayHomes+"holidayHomesTitle"),kl.value(e._localeHolidayHomes+"validateswitchOnDate"),null,e,"id123456","warning"),t.set("switchOnDate",void 0)),null==t.get("switchOffDate")||""==t.get("switchOffDate")||void 0==t.get("switchOffDate")||-1!=XDates.compare(t.get("switchOffDate").toDateString(),t.get("switchOnDate").toDateString())&&0!=XDates.compare(t.get("switchOffDate").toDateString(),t.get("switchOnDate").toDateString())||(Komodo.Controls.MessageBoxController.show(kl.value(e._localeHolidayHomes+"holidayHomesTitle"),kl.value(e._localeHolidayHomes+"validateswitchOffswitchOnDate"),null,e,"id123456","warning"),t.set("switchOffDate",void 0)))}.observes("holidayHomesModel.switchOnDate"),switchOffDateChanged:function(){var e=this,t=e.holidayHomesModel,a=new Date,o=void 0==t.get("switchOnDate")||null==t.get("switchOnDate")||""==t.get("switchOnDate")?void 0:t.get("switchOnDate").toDateString();t.switchOffDate instanceof Date&&!isNaN(t.switchOffDate.valueOf())&&null!=t.switchOffDate&&""!=t.switchOffDate&&void 0!=t.switchOffDate&&(void 0==o||-1!=XDates.compare(t.get("switchOffDate").toDateString(),o)&&0!=XDates.compare(t.get("switchOffDate").toDateString(),o)||(Komodo.Controls.MessageBoxController.show(kl.value(e._localeHolidayHomes+"holidayHomesTitle"),kl.value(e._localeHolidayHomes+"validateswitchOffswitchOnDate"),null,e,"id123456","warning"),t.set("switchOffDate",void 0)),null!=t.switchOnDate&&""!=t.switchOnDate&&void 0!=t.switchOnDate||-1!=XDates.compare(t.get("switchOffDate").toDateString(),a.toDateString())&&0!=XDates.compare(t.get("switchOffDate").toDateString(),a.toDateString())||(Komodo.Controls.MessageBoxController.show(kl.value(e._localeHolidayHomes+"holidayHomesTitle"),kl.value(e._localeHolidayHomes+"validateswitchOffDateForDefault"),null,e,"id123456","warning"),t.set("switchOffDate",void 0)))}.observes("holidayHomesModel.switchOffDate"),showBlockingBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,6e3,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},getformatedDateforService:function(e){function t(e){var t=e.toString();return t.length<2?"0"+t:t}var a=e.getFullYear(),o=t(e.getMonth()+1);return t(e.getDate())+"-"+o+"-"+a},actions:{switchviewing:function(){var e=this,t=void 0,a=e.get("holidayHomesModel");e.set("_childSmartcardList",[]),a.set("productNameListToLink",[]);var o=void 0,s=a.generalSmartcards;if(t=a.get("switchedSmartcardSelected")?a.get("generalSwitchedSmartcard"):a.get("todevices"),!1===a.get("switchedSmartcardSelected")){if(0==a.get("isActivetodevice"))return void Komodo.Controls.MessageBoxController.show(kl.value(e._localeHolidayHomes+"holidayHomesTitle"),kl.value(e._localeHolidayHomes+"validatefromToDevice"),null,e,"id123456","warning");if(Ember.isEmpty(a.get("switchOffDate"))&&!e.get("_isHolidayHomeSwitchServices"))return void Komodo.Controls.MessageBoxController.show(kl.value(e._localeHolidayHomes+"holidayHomesTitle"),kl.value(e._localeHolidayHomes+"validateswitchOffDate"),null,e,"id123456","warning")}var r=void 0;r=a.get("hardwareAndServices").filter(function(e){return e.linkedSmartCard.toString().toLowerCase()===a.generalSmartcards.toString().toLowerCase()}),a.get("hardwareAndServices").length>0&&void 0!=r&&r.length>0&&a.set("allHardwares",r);var n=a.get("allHardwares");if(void 0!=n&&null!=n&&n.length>0)for(var i=0;i<n.length;i++){if(a.productNameListToLink.push(n[0].principalServiceName),void 0!=n[i].listOfAddOnServices&&null!=n[i].listOfAddOnServices&&n[i].listOfAddOnServices.length>0)for(addOns=n[i].listOfAddOnServices,j=0;j<addOns.length;j++)"Cancelled"!=addOns[j].serviceStatus&&a.productNameListToLink.push(addOns[j].serviceName);if(void 0!=n[i].listOfAccessServices&&null!=n[i].listOfAccessServices&&n[i].listOfAccessServices.length>0)for(accessServices=n[i].listOfAccessServices,j=0;j<accessServices.length;j++)"Cancelled"!=accessServices[j].serviceStatus&&a.productNameListToLink.push(accessServices[j].serviceName)}var c=a.generalSmartcards,l=void 0;l=a.get("switchedSmartcardSelected")?a.get("generalSwitchedSmartcard"):a.toDeviceserialnumber;var d=(new Date).toLocaleDateString("sv-SE");null!=a.get("switchOnDate")&&""!=a.get("switchOnDate")&&void 0!=a.get("switchOnDate")&&(d=a.get("switchOnDate").toLocaleDateString("sv-SE")),a.set("dateForSuccessMsg",d);var u=void 0;if(e.get("_isHolidayHomeSwitchServices")){if(!a.get("switchedSmartcardSelected"))if(Ember.isEmpty(a.get("switchOffDate"))){var h=GetClarityConstants("ManageViewingConstants","manageViewingConstants.holidayHome.switchOffDate").toString();u=new Date(h).toLocaleDateString("sv-SE")}else if(Ember.isEmpty(a.get("switchOffDate"))){var h=GetClarityConstants("ManageViewingConstants","manageViewingConstants.holidayHome.switchOffDate").toString();u=new Date(h).toLocaleDateString("sv-SE")}else u=a.get("switchOffDate").toLocaleDateString("sv-SE")}else u=a.get("switchedSmartcardSelected")?null:a.get("switchOffDate").toLocaleDateString("sv-SE");var m=[];if(e.canSubmitData(a,kl.value(e._localeHolidayHomes+"holidayHomesTitle"),{showInModal:!0}))if(e.get("_isHolidayHomeSwitchServices")&!e.get("_isDPPServices")){var g=0;if(e.get("_holidayHomeXtraViewArray").forEach(function(t){!0===t.isDeviceSelected&&(g++,e.get("_childSmartcardList").push(t.deviceNumber))}),2===g)return void Komodo.Controls.MessageBoxController.show(kl.value(e._localeHolidayHomes+"holidayHomesTitle"),kl.value(e._localeHolidayHomes+"thirdPointXtraViewMsg"),Komodo.Controls.MessageBoxOkButtons,e,"id5446675","warning");if(g>2)return void Komodo.Controls.MessageBoxController.show(kl.value(e._localeHolidayHomes+"holidayHomesTitle"),kl.value(e._localeHolidayHomes+"exceedNoDevicesXtraViewMsg"),Komodo.Controls.MessageBoxOkButtons,e,"id5446676","warning");var p=g>0?kl.value(e._localeHolidayHomes+"confirmHHXtraViewMsg"):kl.value(e._localeHolidayHomes+"confirmationNote",{fromdevices:s,todevices:t});o=Komodo.Controls.MessageBoxController.show(kl.value(e._localeHolidayHomes+"holidayHomesTitle"),p,Komodo.Controls.MessageBoxYesNoButtons,e,"id5446677","warning"),o.response=function(t){"yes"===t?(e.showBlockingBusyIndicator(),e.initializeXtraviewRequest(c,l,d,u,a.get("switchedSmartcardSelected"))):g>0&&(e.set("_childSmartcardList",[]),e.showBlockingBusyIndicator(),e.initializeXtraviewRequest(c,l,d,u,a.get("switchedSmartcardSelected")))}}else o=Komodo.Controls.MessageBoxController.show(kl.value(e._localeHolidayHomes+"holidayHomesTitle"),kl.value(e._localeHolidayHomes+"confirmationNote",{fromdevices:s,todevices:t}),Komodo.Controls.MessageBoxYesNoButtons,e,"id5446678","warning"),o.response=function(t){if("yes"==t&&(e.showBlockingBusyIndicator(),a.productNameListToLink.length>0)){for(i=0;i<a.productNameListToLink.length;i++)m.pushObject(a.productNameListToLink[i]);var o={CustomerNumber:e.customerId,ServiceNames:m,FromDeviceSerialNumber:c,ToDeviceSerialNumber:l,SwitchOnDate:d,SwitchOffDate:u};e.updateDeviceLinks(o)}}},loadUpgradeorDowngradeController:function(){this.holidayHomesModel.set("viewDays","-"),this.holidayHomesModel.set("isUpgradeorDowngrade",!0),this.holidayHomesModel.set("isDisconnect",!1),this.holidayHomesModel.set("isReconnect",!1),this.currentHolidayHomesView.startChildController("upgradeOrDowngrade")},loadDisconnectController:function(){this.holidayHomesModel.set("viewDays","-"),this.holidayHomesModel.set("isUpgradeorDowngrade",!1),this.holidayHomesModel.set("isDisconnect",!0),this.holidayHomesModel.set("isReconnect",!1),this.currentHolidayHomesView.startChildController("disconnect")},loadReconnectController:function(){this.holidayHomesModel.set("viewDays","-"),this.holidayHomesModel.set("isUpgradeorDowngrade",!1),this.holidayHomesModel.set("isDisconnect",!1),this.holidayHomesModel.set("isReconnect",!0),this.currentHolidayHomesView.startChildController("reconnect")}},successMessage:function(){var e="",t=this,a=t.get("holidayHomesModel"),o=t.getformatedDateforService(new Date(a.dateForSuccessMsg));return new Date(a.dateForSuccessMsg).toLocaleDateString("sv-SE")==(new Date).toLocaleDateString("sv-SE")?e+="switched successfully.":e+="are scheduled succesfully for switching on "+o+".",e},checkDPPBundleServices:function(e){var t=!1;if(e.length>0){var a=GetClarityConstants("ManageViewingConstants","manageViewingConstants.upgradeDowngrade.bundleProduct");for(i=0;i<e.length;i++)if(!Ember.isEmpty(a)&&a.contains(e[i].principalServiceName.toString().toLowerCase())){t=!0;break}}return t},isDPPWithXtraview:function(e,t){var a=this,o=0,s=!1;return"holiday home"===t.toString().toLowerCase()?o=$.grep(a.gridData,function(t){return t.smartCardNumber===e&&!0===t.isXtraview&&"holiday home"===t.type.toString().toLowerCase()}):"general"===t.toString().toLowerCase()&&(o=$.grep(a.gridData,function(t){return t.smartCardNumber===e&&!0===t.isXtraview&&"general"===t.type.toString().toLowerCase()})),o.length>=1&&(s=!0),s},isDPPCompatibleHardware:function(e){var t=this,a=t.holidayHomesModel,o=!1,s=GetClarityConstants("ManageViewingConstants","manageViewingConstants.DPPSwitchingCompatibleHardware.allowedDecodersModels");return $.grep(e,function(e){return e.LinkedSmartcard===a.todevices&&!Ember.isEmpty(s)&&s.contains(e.ProductDetail.Name)}).length>0&&(o=!0),o},updateDeviceLinks:function(e){var t=this;Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo),Komodo.Services.queryService.postJSON("/Device/ScheduleUpdateDeviceLink",{data:e}).done(function(a){var o=(new Date).toLocaleDateString("sv-SE"),s=void 0;if(a){e.SwitchOnDate==o?(s="Service(s) Switched from "+e.FromDeviceSerialNumber+" to "+e.ToDeviceSerialNumber,t.publishCreateActivityHolidayHomeSuccess(s,!0)):(s="Service(s) scheduled for switching from "+e.FromDeviceSerialNumber+" to "+e.ToDeviceSerialNumber,t.publishCreateActivityHolidayHomeSuccess(s,!1));Komodo.Controls.MessageBoxController.show(kl.value(t._localeHolidayHomes+"useCaseTitle"),kl.value(t._localeHolidayHomes+"messageUpdateSuccess")+t.successMessage(),Komodo.Controls.MessageBoxOkButton,t,"id5556673","success").response=function(e){if("ok"==e){Komodo.Application.SharedObjectController.create().retrieveFinancialAccounts(t.customerId,"holidayHomes"),t.showBlockingBusyIndicator();var a=Komodo.Services.customerProfileService.getCustomerPersonalDetail();if(void 0!=a&&null!=a&&""!=a&&("commercial"==a.customerClass.toLowerCase()||"1"==a.customerClass))return void t.transitionToRoute("/commercialManageViewing");t.transitionToRoute("/manageViewing")}}}else Komodo.Controls.MessageBoxController.show("Error",kl.value(t._localeHolidayHomes+"messageUpdateFailure"),Komodo.Controls.MessageBoxOkButton,t,"id5556673","danger")}).error(function(e){var a=JSON.stringify(e);if(void 0!=e&&void 0!=e.responseJSON&&void 0!=e.responseJSON.Message){var o=(new Date).toLocaleDateString("sv-SE");notes="Switching of services from "+t.holidayHomesModel.get("generalSmartcards")+" to "+t.holidayHomesModel.get("toDeviceserialnumber")+" failed. Reason: "+e.responseJSON.Message,t.publishCreateActivityReconnectFailure(notes,o)}Komodo.log("Notify Owner ajax call failed. Error: "+a),Komodo.Controls.MessageBoxController.show(kl.value(t._localeHolidayHomes+"holidayhomeInfo"),e.responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,t,"authmbx3","danger").response=function(e){if("ok"==e){Komodo.Application.SharedObjectController.create().retrieveFinancialAccounts(t.customerId,"holidayHomes"),t.showBlockingBusyIndicator(),t.holidayHomesModel.set("holidayHomesGeneralSmartcards",void 0);var a=Komodo.Services.customerProfileService.getCustomerPersonalDetail();if(void 0!=a&&null!=a&&""!=a&&("commercial"==a.customerClass.toLowerCase()||"1"==a.customerClass))return void t.transitionToRoute("/commercialManageViewing");t.transitionToRoute("/manageViewing"),t.holidayHomesModel.set("isDailyPrepaid",!1),t.holidayHomesModel.set("isSwitching",!1)}}})},initializeXtraviewRequest:function(e,t,a,o,s){var r=this,n=null;r.set("xtraviewModel",Komodo.Models.ManageHolidayHomesXtraviewModel.create()),r.set("ProductDetailsModel",Komodo.Models.ManageHolidayHomesXtraviewModel.create()),r.set("SwitchServiceConfigurationModel",Komodo.Models.SwitchServiceConfiguration.create()),r.xtraviewModel.set("FromDeviceSerialNumber",e),r.xtraviewModel.set("ToDeviceSerialNumber",t),r.holidayHomesModel.smartcardAgreementList.forEach(function(a){a.Key===e&&r.xtraviewModel.set("AgreementFrom",a.Value),a.Key===t&&(r.xtraviewModel.set("AgreementTo",a.Value),Ember.isEmpty(r.get("_childSmartcardList"))||(n={AgreementNumber:a.Value,SmartcardsNumber:a.Key}))}),r.xtraviewModel.set("ParentProductDetails",n);var i,c=[];Ember.isEmpty(r.get("_childSmartcardList"))||r.get("_childSmartcardList").forEach(function(e){i=$.grep(r.holidayHomesModel.smartcardAgreementList,function(t){return t.Key===e})[0],Ember.isEmpty(i)||(n={AgreementNumber:i.Value,SmartcardsNumber:i.Key},c.push(n))}),r.xtraviewModel.set("CustomerId",r.get("customerId")),r.xtraviewModel.set("ChildProductDetails",c),r.xtraviewModel.set("IsSwitchBack",s),r.xtraviewModel.set("IsXtraviewQuoteRequired",!1),r.xtraviewModel.set("EffectiveDate",a),r.xtraviewModel.set("ReverteDate",o),r.SwitchServiceConfigurationModel.set("CommercialProductCategoryIdsToExclude",GetClarityConstants("ManageViewingConstants","manageViewingConstants.holidayHome.commercialProductCategoryIdsToExclude")),r.SwitchServiceConfigurationModel.set("DeviceLinkReason",GetClarityConstants("ManageViewingConstants","productsConstants.holidayHomeSwitchingReasons.deviceLinkReason").toString()),r.SwitchServiceConfigurationModel.set("DeviceUnlinkReason",GetClarityConstants("ManageViewingConstants","productsConstants.holidayHomeSwitchingReasons.deviceUnlinkReason").toString()),r.SwitchServiceConfigurationModel.set("DisconnectProductReason",GetClarityConstants("ManageViewingConstants","productsConstants.holidayHomeSwitchingReasons.disconnectProductReason").toString()),r.SwitchServiceConfigurationModel.set("NumberOfGraceDays",GetClarityConstants("ManageViewingConstants","productsConstants.holidayHomeSwitchingReasons.numberOfGraceDays").toString()),r.SwitchServiceConfigurationModel.set("UpdateProductQuantityReason",GetClarityConstants("ManageViewingConstants","productsConstants.holidayHomeSwitchingReasons.updateProductQuantityReason").toString()),r.SwitchServiceConfigurationModel.set("UpdateProductStatusWithGraceDaysReason",GetClarityConstants("ManageViewingConstants","productsConstants.holidayHomeSwitchingReasons.updateProductStatusWithGraceDaysReason").toString()),r.xtraviewModel.set("SwitchServiceConfiguration",r.SwitchServiceConfigurationModel),r.manageHolidayHomeXtraview(r.get("xtraviewModel"))},manageHolidayHomeXtraview:function(e){var t=this;Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo),Komodo.Services.queryService.postJSON("/Device/ManageHolidayHomeXtraview",{data:e}).done(function(a){var o=void 0;if(t.hideBusyIndicator(),a.Status){e.EffectiveDate===(new Date).toLocaleDateString("sv-SE")?(o=kl.value(t._localeHolidayHomes+"servicesSwitchedSuccess",{fromdevices:t.holidayHomesModel.get("generalSmartcards"),todevices:t.holidayHomesModel.get("toDeviceserialnumber")}),t.publishCreateActivityHolidayHomeSuccess(o,!0)):(o=kl.value(t._localeHolidayHomes+"servicesScheduledSuccess",{fromdevices:t.holidayHomesModel.get("generalSmartcards"),todevices:t.holidayHomesModel.get("toDeviceserialnumber")}),t.publishCreateActivityHolidayHomeSuccess(o,!1));Komodo.Controls.MessageBoxController.show(kl.value(t._localeHolidayHomes+"useCaseTitle"),kl.value(t._localeHolidayHomes+"messageUpdateSuccess")+t.successMessage(),Komodo.Controls.MessageBoxOkButton,t,"id5556673","success").response=function(e){"ok"===e&&t.transitionToRoute("/manageViewing")}}else Komodo.Controls.MessageBoxController.show(kl.value(t._localeHolidayHomes+"holidayhomeInfo"),a.ResponseMessage,Komodo.Controls.MessageBoxOkButton,t,"id5556673","danger")}).error(function(e){var a=JSON.stringify(e);t.hideBusyIndicator(),void 0!==e&&void 0!==e.responseJSON&&void 0!==e.responseJSON.Message&&(notes=kl.value(t._localeHolidayHomes+"servicesSwitchFail",{fromdevices:t.holidayHomesModel.get("generalSmartcards"),todevices:t.holidayHomesModel.get("toDeviceserialnumber"),reason:e.responseJSON.Message}),t.publishCreateActivityReconnectFailure(notes,(new Date).toLocaleDateString("sv-SE"))),Komodo.log("Notify Owner ajax call failed. Error: "+a),Komodo.Controls.MessageBoxController.show(kl.value(t._localeHolidayHomes+"holidayhomeInfo"),e.responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,t,"id5556675","danger").response=function(e){"ok"===e&&(t.transitionToRoute("/manageViewing"),t.holidayHomesModel.set("isDailyPrepaid",!1),t.holidayHomesModel.set("isSwitching",!1))}})},publishCreateActivityReconnectFailure:function(e,t){var a=this;Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(o){var s=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),r=s.getCustomerIdToRetrieveData(),n=Komodo.Models.CreateInteraction.create(),i=Komodo.Models.ListOfCaseData.create(),c=Komodo.Models.Case.create(),l=void 0;c.set("InteracteeName",Komodo.Services.securityService.session.domainUserName),c.set("InteractionLocation",o.data.countryDescription),c.set("InteractionMedium","1"),c.set("CustomerUID",r),c.set("Category","28"),c.set("Status","1"),c.set("SubCategory","1"),c.set("Outcome","188"),l=e,payloadCaseData=Komodo.Models.CaseData.create();var d=Komodo.canonicalFacadeFactory(payloadCaseData,["CaseDataValueUri","Value"]);d.set("CaseDataValueUri","Switching date"),d.set("Value",t),i.CaseData.push(payloadCaseData),c.set("ListOfCaseData",i),c.set("Notes",l);var u=Komodo.canonicalFacadeFactory(n,["Country","Case"]);u.set("Country",a.get("loggedInCountryId")),u.set("Case",c),n.Country=o.data.countryId,a.publishRequestOnBus(n,"CreateInteraction","v1")})},publishCreateActivityHolidayHomeSuccess:function(e,t){var a=this;Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(o){var s=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),r=s.getCustomerIdToRetrieveData(),n=Komodo.Models.CreateInteraction.create(),i=Komodo.Models.Case.create(),c=void 0;i.set("InteracteeName",Komodo.Services.securityService.session.domainUserName),i.set("InteractionLocation",o.data.countryDescription),i.set("InteractionMedium","1"),i.set("CustomerUID",r),i.set("Category","28"),i.set("Status","1"),i.set("SubCategory","1"),1==t?i.set("Outcome","186"):i.set("Outcome","187"),c=e,i.set("Notes",c);var l=Komodo.canonicalFacadeFactory(n,["Country","Case"]);l.set("Country",a.get("loggedInCountryId")),l.set("Case",i),n.Country=o.data.countryId,a.publishRequestOnBus(n,"CreateInteraction","v1")})},publishRequestOnBus:function(e,t,a){var o=Komodo.Services.manageAccountService,s="Event Message for "+t+" ";o.publishEvent(this,e,t,a).done(function(){Komodo.log(s+" has been published successfully")}).fail(function(){Komodo.log(s+" has been failed")})},stop:function(){this.set("gridData",[]),this.set("_isXtraViewCheckBoxVisible",!1),this.currentHolidayHomesView.stopChildController(),this._super()},getFormattedQBD:function(e){if(null!==e&&void 0!==e&&""!==e){var t=e.split("T"),a=new Date(t[0]);return a.setDate(a.getDate()),this.checkEmptyAndReplace(this.getformatedDateforUI(a))}return"-"},getformatedDateforUI:function(e){function t(e){var t=e.toString();return t.length<2?"0"+t:t}if(void 0!==e&&""!==e){var a=e.getFullYear(),o=t(e.getMonth()+1);return t(e.getDate())+"-"+o+"-"+a}},collapsibleViewLinks:function(){return[{title:"UPGRADE-DOWNGRADE",action:"loadUpgradeorDowngradeController"},{title:"DISCONNECT",action:"loadDisconnectController"},{title:"RECONNECT",action:"loadReconnectController"}]}.property()}),Komodo.Application.CommercialDeviceInfoController=Komodo.UI.Controller.extend({init:function(){this._super(),Komodo.log("Constructing Device Info controller for commercial customer"),this.set("processVersion","v1.1"),this.set("processName","Device Info for commercial customer"),this.initializeGrid(),this.set("chargePeriodlst",[]),this.getNewProcessID()},start:function(){this.getCDMData(),this.registerModel("deviceInfoModel",Komodo.Models.CommercialDeviceInfoModel),this.set("addressInformation",Komodo.Models.AddressModel.create()),this.set("csiLogDetailsModel",Komodo.Models.CsiLogDetailsModel.create()),this.set("viewTitle",kl.value(this.localeDeviceInfo+"deviceInfoTitle")),this.deviceInfoModel.set("disableChargePeriod",!0),this.deviceInfoModel.set("addOnPackage",[]),this.deviceInfoModel.set("addOnStatus",[]),this.populatechargePeriod(),this.createNewGridItem(),this.searchFinancialAccount(),this.subscribeNotifyGetCSILogs(),this.subscribeNotifyGetCSILogsError();var e=this
;Komodo.Services.featureToggleService.isEnabled("CustomerGlobal","EnableAddressOverRide").done(function(t){e.set("enableAddressOverRide",t)}),this._super()},stop:function(){this._super()},chargePeriodChanged:function(){void 0!==this.deviceInfoModel&&(this.deviceInfoModel.get("chargePeriod")!==this.defaultChargePer?this.deviceInfoModel.set("isDisableSubmitButton",!1):this.deviceInfoModel.set("isDisableSubmitButton",!0))}.observes("commercialDeviceInfoModel.chargePeriod"),initializeGrid:function(){this.dataGridColumnsDeviceInfo=[Komodo.Controls.DataGridColumn.create({name:"historyID",title:kl.value(this.localeDeviceInfo+"historyID"),canEdit:!1,width:"30px"}),Komodo.Controls.DataGridColumn.create({name:"date",title:kl.value(this.localeDeviceInfo+"date"),canEdit:!1,width:"70px"}),Komodo.Controls.DataGridColumn.create({name:"message",title:kl.value(this.localeDeviceInfo+"message"),canEdit:!1,width:"175px"}),Komodo.Controls.DataGridColumn.create({name:"eventDescription",title:kl.value(this.localeDeviceInfo+"eventDescription"),canEdit:!1,width:"175px"}),Komodo.Controls.DataGridColumn.create({name:"reason",title:kl.value(this.localeDeviceInfo+"reason"),canEdit:!1,width:"120px"}),Komodo.Controls.DataGridCommandColumn.create({name:"view",title:kl.value(this.localeDeviceInfo+"view"),action:"View",width:"10px",displayType:"button",customClass:"komodo-button"})]},initializeControls:function(){this.deviceInfoModel.set("deviceName","-"),this.deviceInfoModel.set("deviceNumber","-"),this.deviceInfoModel.set("deviceStatus","-"),this.deviceInfoModel.set("warrantyEndDate","-"),this.deviceInfoModel.set("smartcardName","-"),this.deviceInfoModel.set("smartcardNumber","-"),this.deviceInfoModel.set("smartcardStatus","-"),this.deviceInfoModel.set("viewingPeriod","-"),this.deviceInfoModel.set("principalPackage","-"),this.deviceInfoModel.set("principalStatus","-"),this.deviceInfoModel.set("addOnPackage","-"),this.deviceInfoModel.set("addOnStatus","-"),this.deviceInfoModel.set("contractStartDate","-"),this.deviceInfoModel.set("contractEndDate","-"),this.deviceInfoModel.set("chargeUntilDate","-"),this.deviceInfoModel.set("quoteBasedDisconnectDate","-"),this.deviceInfoModel.set("services","-")},populatechargePeriod:function(){this.set("chargePeriodlst",[]),this.set("chargePeriodlst",Komodo.Services.customerProfileService.get("invoicePeriod")),null!==this.get("chargePeriodlst")&&void 0!==this.get("chargePeriodlst")&&""!==this.get("chargePeriodlst")&&this.set("defaultChargePer",this.chargePeriodlst[0].key)},searchFinancialAccount:function(){var e=this,t=e.get("accountId");this.set("accountno",t);var a,o=Komodo.Services.ProductAndServiceMaintenanceHelper.create();if(void 0!==this.get("accounts")){a=o.createArrayForSingleElement(this.get("accounts")).filter(function(t){var a=e.get("accountno");return t.UID===a}),a.length&&a.length>0&&this.bindControls(a)}},bindControls:function(e){var t=this;t.initializeControls();var a,o=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),s="";!0===this.get("isXtraview")&&(s+="Xtraview, "),!0===this.get("isBoxOffice")&&(s+="Box Office, "),!0===this.get("isInsurance")&&(s+="Insurance, "),!0===this.get("isAccesss")&&(s+="Access, "),s.length>0&&(s=s.substring(0,s.length-2),t.deviceInfoModel.set("services",t.checkEmptyAndReplace(s)));var r=o.createArrayForSingleElement(e[0].ListOfAgreement.Agreement);if(r&&(a=r.filter(function(e){var a=t.get("agreementId");return e.UID===a}),a.length&&a.length>0&&a[0].ListOfHardware.Hardware.length>0)){var n=a[0].ListOfHardware.Hardware.filter(function(e){var a=t.get("deviceId");return e.SerialNumber===a});if(n.length&&n.length>0){this.deviceInfoModel.set("deviceName",this.checkEmptyAndReplace(n[0].ProductDetail.Name)),this.deviceInfoModel.set("deviceNumber",this.checkEmptyAndReplace(n[0].SerialNumber)),this.deviceInfoModel.set("deviceStatus",this.checkEmptyAndReplace(n[0].Status)),this.deviceInfoModel.set("smartcardName",this.checkEmptyAndReplace(n[0].SmartcardDetail.Name)),this.deviceInfoModel.set("smartcardNumber",this.checkEmptyAndReplace(n[0].LinkedSmartcard)),this.deviceInfoModel.set("smartcardStatus",this.checkEmptyAndReplace(n[0].LinkedSmartcardStatus)),this.deviceInfoModel.set("viewingPeriod",this.checkEmptyAndReplace(this.getformatedDateforUI(new Date(a[0].StartDate)))+"    to   "+this.checkEmptyAndReplace(this.getformatedDateforUI(new Date(a[0].EndDate))));var i=this.checkEmptyAndReplace(n[0].SerialNumber);if(Komodo.Services.queryService.getJSON("/DeviceProcessing/GetDeviceWarrantyDetails?deviceId="+i).done(function(e){null!==e?null!==e.CustomerWarrantyEnd&&t.deviceInfoModel.set("warrantyEndDate",null!==e.CustomerWarrantyEnd?t.getformatedDateforUI(new Date(e.CustomerWarrantyEnd)):""):Komodo.Controls.MessageBoxController.show(t.viewTitle,"Unable to retrieve warranty end data for device with id: '"+t.deviceInfoModel.get("deviceNumber")+"'. Null data returned. ",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}),a[0].ListOfAddress&&a[0].ListOfAddress.Address&&a[0].ListOfAddress.Address.length>0){this.deviceInfoModel.set("isPrimary",a[0].ListOfAddress.Address[0].IsPrimary),this.deviceInfoModel.set("isPrimaryString",!0===a[0].ListOfAddress.Address[0].IsPrimary?"Yes":"No"),this.deviceInfoModel.set("country",a[0].ListOfAddress.Address[0].Country),this.deviceInfoModel.set("province",a[0].ListOfAddress.Address[0].Province);var c=t.getCitySuburbText(a[0].ListOfAddress.Address[0].Country,a[0].ListOfAddress.Address[0].Province,a[0].ListOfAddress.Address[0].City,a[0].ListOfAddress.Address[0].Suburb);this.deviceInfoModel.set("city",c.City),this.deviceInfoModel.set("suburb",c.Suburb),this.deviceInfoModel.set("postalCode",a[0].ListOfAddress.Address[0].PostCode),this.deviceInfoModel.set("buildingName",a[0].ListOfAddress.Address[0].BuildingName),this.deviceInfoModel.set("unitNumber",a[0].ListOfAddress.Address[0].HouseNumber),this.deviceInfoModel.set("privateBag",a[0].ListOfAddress.Address[0].PostBoxNumber),this.deviceInfoModel.set("type",a[0].ListOfAddress.Address[0].Type),this.deviceInfoModel.set("isVerified",!!a[0].ListOfAddress.Address[0].IsVerified&&!a[0].ListOfAddress.Address[0].IsVerified);var l=Komodo.UI.addressFunctions.splitStreetNumberName(a[0].ListOfAddress.Address[0].Street);this.deviceInfoModel.set("streetNumber",l.streetNumber),this.deviceInfoModel.set("streetName",l.streetName),this.deviceInfoModel.set("displayAddress",this.getAddressDetails())}for(var d=[],u=[],h=0;h<n[0].ListOfService.Service.length;h++)"Principal"===n[0].ListOfService.Service[h].ProductDetail.Type?(this.deviceInfoModel.set("principalPackage",this.checkEmptyAndReplace(n[0].ListOfService.Service[h].ProductDetail.Name)),this.deviceInfoModel.set("principalStatus",this.checkEmptyAndReplace(n[0].ListOfService.Service[h].Status)),this.checkEmptyAndReplace("Active"===n[0].ListOfService.Service[h].Status)&&this.deviceInfoModel.set("quoteBasedDisconnectDate",this.checkEmptyAndReplace(this.getformatedDateforUI(new Date(a[0].EndDate)))),this.deviceInfoModel.set("chargeUntilDate",this.checkEmptyAndReplace(this.getformatedDateforUI(new Date(n[0].ListOfService.Service[h].ChargeUntilDate))))):"Addon"===n[0].ListOfService.Service[h].ProductDetail.Type&&(d.push(this.checkEmptyAndReplace(n[0].ListOfService.Service[h].ProductDetail.Name)),u.push(this.checkEmptyAndReplace(n[0].ListOfService.Service[h].Status)));this.deviceInfoModel.set("addOnPackage",this.checkEmptyObjectAndReplace(d)),this.deviceInfoModel.set("addOnStatus",this.checkEmptyObjectAndReplace(u))}if(this.get("originalChargePeriod",this.deviceInfoModel.chargePeriod),this.deviceInfoModel.set("chargePeriod",a[0].TermOfPayment),this.deviceInfoModel.set("contractStartDate",this.checkEmptyAndReplace(this.checkEmptyAndReplace(this.getformatedDateforUI(new Date(a[0].StartDate))))),this.deviceInfoModel.set("contractEndDate",this.checkEmptyAndReplace(this.getformatedDateforUI(new Date(a[0].EndDate)))),"-"!==this.deviceInfoModel.get("smartcardNumber")){var m=Komodo.Application.ManageViewingSharedObjectController.create();this.showBusyIndicator(),m.getCSILogs(this.deviceInfoModel.get("smartcardNumber"))}else this.set("showGrid",!1)}},getCitySuburbText:function(e,t,a,o){var s=this;if(e&&t&&a&&o&&(a=s.capitaliseFirstLetter(a),o=s.capitaliseFirstLetter(o),!s.get("enableAddressOverRide"))){var r=$.grep($.makeArray(s.countries),function(t){return t.CanonicalKey.toUpperCase()===e.toUpperCase()});if(r.length>0){var n=$.grep($.makeArray(r[0].Provinces.Province),function(e){return e.CanonicalKey.toUpperCase()===t.toUpperCase()});if(n.length>0&&n[0].Cities&&n[0].Cities.City){var i=$.grep($.makeArray(n[0].Cities.City),function(e){return e.CanonicalValue.toUpperCase()===a.toUpperCase()});if(i.length>0&&(a=i[0].CanonicalValue,i[0].Suburbs&&i[0].Suburbs.Suburb)){var c=$.grep($.makeArray(i[0].Suburbs.Suburb),function(e){return e.CanonicalValue.toUpperCase()===o.toUpperCase()});c.length>0&&(o=c[0].CanonicalValue)}}}}return{City:a,Suburb:o}},checkEmptyAndReplace:function(e){return null===e||void 0===e||""===e||"Nan-Nan-Nan"===e?"-":e},checkEmptyObjectAndReplace:function(e){return null===e||void 0===e||0===e.length?["-"]:e},getformatedDateforUI:function(e){function t(e){var t=e.toString();return t.length<2?"0"+t:t}if(void 0!==e&&null!==e&&""!==e){var a=e.getFullYear(),o=t(e.getMonth()+1);return t(e.getDate())+"-"+o+"-"+a}},getformatedDateTimeforUI:function(e){function t(e){var t=e.toString();return t.length<2?"0"+t:t}var a=e.getFullYear(),o=t(e.getMonth()+1),s=t(e.getDate()),r=t(e.getHours()),n=t(e.getMinutes()),i=t(e.getSeconds()),c=r>=12?"PM":"AM";return r%=12,r=r||12,s+"-"+o+"-"+a+"   "+r+":"+n+":"+i+" "+c},getDateForObject:function(e){var t=e.split("T")[0].split("-"),a=e.split("T")[1].split(":");return new Date(t[0],t[1]-1,t[2],a[0],a[1],a[2])},subscribeNotifyGetCSILogs:function(){var e=this;Komodo.Services.eventAggregator.subscribe("NotifyGetCSILogs",function(){e.hideBusyIndicator();var t=Komodo.Services.ManageViewingService.NotifyGetCSILogsMsg;e.populateGrid(t)})},subscribeNotifyGetCSILogsError:function(){var e=this;Komodo.Services.eventAggregator.subscribe("NotifyGetCSILogsError",function(){e.hideBusyIndicator();var t=Komodo.Services.ManageViewingService.NotifyGetCSILogsErrorMsg;"-1"===t.indexOf("is not found")&&Komodo.Controls.MessageBoxController.show(kl.value("locale:error"),t,Komodo.Controls.MessageBoxOkButtons,e,"id5446673","danger")})},populateGrid:function(e){var t=this;if(e.length>0){t.set("showGrid",!0),t.deviceInfoModel.set("csiLogs",[]);for(var a=0;a<e.length;a++)t.newDeviceGridItem.set("historyID",e[a].HistoryId),t.newDeviceGridItem.set("date",t.getformatedDateforUI(new Date(e[a].MessageTimeStamp))),t.newDeviceGridItem.set("dateTime",t.getformatedDateTimeforUI(t.getDateForObject(e[a].MessageTimeStamp))),t.newDeviceGridItem.set("message",e[a].Message),t.newDeviceGridItem.set("eventDescription",e[a].EventDescription),t.newDeviceGridItem.set("reason",e[a].Reason),t.newDeviceGridItem.set("username",e[a].UserName),t.newDeviceGridItem.set("eventNumber",e[a].EventNumber),t.newDeviceGridItem.set("hostName",e[a].Host),t.newDeviceGridItem.set("serialNumber",e[a].SerialNumber),t.newDeviceGridItem.set("messageTrackingId",e[a].MessageTrackingId),t.addGridRow()}else t.set("showGrid",!1)},createNewGridItem:function(){var e=Komodo.Models.DeviceInfoModel.create();this.set("newDeviceGridItem",e)},addGridRow:function(){0===this.deviceInfoModel.csiLogs.length?this.deviceInfoModel.set("csiLogs",[this.get("newDeviceGridItem")]):this.deviceInfoModel.csiLogs.pushObject(this.get("newDeviceGridItem")),this.createNewGridItem()},getNewProcessID:function(){this.startNewProcess()},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,"100000","blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},clearAndRefreshview:function(){var e=this;if(e.customerNo){Komodo.Application.SharedObjectController.create().retrieveCustomerProfile(e.customerNo)}},viewCsiLogDetails:function(){var e=this.get("deviceInfoModel.commandGridItem");this.csiLogDetailsModel.set("historyID",e.get("historyID")),this.csiLogDetailsModel.set("dateTime",e.get("dateTime")),this.csiLogDetailsModel.set("username",e.get("username")),this.csiLogDetailsModel.set("eventNumber",e.get("eventNumber")),this.csiLogDetailsModel.set("hostName",e.get("hostName")),this.csiLogDetailsModel.set("serialNumber",e.get("serialNumber")),this.csiLogDetailsModel.set("reason",e.get("reason")),this.csiLogDetailsModel.set("messageTrackingId",e.get("messageTrackingId")),this.csiLogDetailsModel.set("message",e.get("message")),Komodo.Services.uiService.showModalPopup("CSI log Detail",null,{view:Komodo.Application.CsiLogDetailsView,context:{data:this.get("deviceInfoModel.commandGridItem")},canUserClose:!0})},cancelDeviceInfo:function(){var e=this;Komodo.Services.uiService.getController("commercialManageViewing").setAgreementData(e.establishmentName,e.viewingLocation),Komodo.Services.uiService.getRoute("application").transitionTo("commercialManageViewing")},validateData:function(){var e="",t=this,a=!1,o=Object.keys(t.get("validators"));return $.each(o,function(o,s){if(t.get("validators."+s).model===t.get("addressInformation")){var r="validators."+s+".errors";t.get(r).length>0&&$.each(t.get(r),function(t,o){e+=o+"<br />",a=!0})}}),a&&(e=kl.value("controller.invalidDataMessage")+"<br />"+e,Komodo.Controls.MessageBoxController.show(t.viewTitle,e,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning")),a},actions:{editAddress:function(e){var t=this;if(e.content){var a=e.content;t.get("addressInformation").set("isAddressOverride",!t.get("enableAddressOverRide")||!!a.IsVerified&&!a.IsVerified),t.get("addressInformation").set("addressTypeText",a.type),t.get("addressInformation").set("country",a.country),t.get("addressInformation").set("province",a.province),t.get("addressInformation").set("city",a.city),t.get("addressInformation").set("suburb",a.suburb),t.get("addressInformation").set("postalCode",a.postalCode),t.get("addressInformation").set("unit",a.unit),t.get("addressInformation").set("building",a.building),t.get("addressInformation").set("streetNumber",a.streetNumber),t.get("addressInformation").set("streetName",a.streetName),t.get("addressInformation").set("privateBag",a.privateBag),t.get("addressInformation").set("boxType",""),t.get("addressInformation").set("isPrimary",!1),t.get("addressInformation").set("isPrimaryString","No"),t.get("addressInformation").set("isMarketingEnabled",!1),t.get("addressInformation").set("addressString",""),$("#commercialDeviceInfoAddressPanel").show()}},updateAgreementAddress:function(){var e=this;if(e.get("deviceInfoModel")&&e.get("customerNo")&&e.get("agreementId")){if(!0===e.validateData())return!1;e.publishUpdateAgreementEvent()}else Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value("locale.commercialcustomer:customerprofile.customerNotFound"));return!1},View:function(){this.viewCsiLogDetails()},cancel:function(){this.cancelDeviceInfo()}},getAddressDetails:function(){var e=Komodo.Application.CustomerInformationMapper.create(),t=void 0!==this.deviceInfoModel.get("unitNumber")&&""!==this.deviceInfoModel.get("unitNumber").trim()?this.deviceInfoModel.get("unitNumber")+", ":"",a=void 0!==this.deviceInfoModel.get("buildingName")&&""!==this.deviceInfoModel.get("buildingName").trim()?this.deviceInfoModel.get("buildingName")+", ":"",o=void 0!==this.deviceInfoModel.get("streetName")&&""!==this.deviceInfoModel.get("streetName").trim()?this.deviceInfoModel.get("streetName")+", ":"";return t+a+(void 0!==this.deviceInfoModel.get("streetNumber")&&""!==this.deviceInfoModel.get("streetNumber").trim()?this.deviceInfoModel.get("streetNumber")+", ":"")+o+(void 0!==this.deviceInfoModel.get("suburb")&&""!==this.deviceInfoModel.get("suburb").trim()?this.deviceInfoModel.get("suburb")+", ":"")+(void 0!==this.deviceInfoModel.get("city")&&""!==this.deviceInfoModel.get("city").trim()?this.deviceInfoModel.get("city")+", ":"")+e.getProvinceText(this.deviceInfoModel.get("country"),this.deviceInfoModel.get("province"))+", "+e.getCountryText(this.deviceInfoModel.get("country"))+", "+(void 0!==this.deviceInfoModel.get("postalCode")&&""!==this.deviceInfoModel.get("postalCode").trim()?this.deviceInfoModel.get("postalCode"):"")},capitaliseFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.toLowerCase().slice(1)},getCDMData:function(){var e=this,t=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),a=(Komodo.Services.uiService.getController("application").get("_selectedCountryDescription"),Komodo.Services.localizationService.getCurrentLanguage()),o=t;e.set("loggedInCountryId",o),Komodo.Services.cachedDataService.fetch("Location").done(function(t){var a=JSON.parse(t);e.set("countries",[]),$.each($.makeArray(a.Countries.Country),function(t,a){e.get("countries").addObject(a)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve Location domain = "+t+"/ qualifier = "+a)})},publishUpdateAgreementEvent:function(){var e=this,t=Komodo.Models.Agreement.create();if(t.ConsumerAddress=Komodo.UI.addressFunctions.getAddress(e.get("addressInformation")),t.UID=e.get("agreementId"),"1"===e.deviceInfoModel.type){var a=Komodo.Services.customerProfileService.currentCustomerDetails.ResponseMessage.Payload.CustomerDetail;t.ConsumerDetail.FirstName=a&&a.PersonalDetail?a.PersonalDetail.FirstName:"",t.ConsumerDetail.Surname=a&&a.PersonalDetail?a.PersonalDetail.Surname:""}else"2"===e.deviceInfoModel.type&&(t.ConsumerDetail.FirstName=e.deviceInfoModel.get("firstName"),t.ConsumerDetail.Surname=e.deviceInfoModel.get("lastName"));var o=Komodo.Models.UpdateAgreement.create(),s=Komodo.canonicalFacadeFactory(o,["Country","CustomerUID","AccountUID","Agreement"]);s.set("Country",e.get("loggedInCountryId")),s.set("CustomerUID",e.get("customerNo")),s.set("AccountUID",e.get("accountId")),s.set("Agreement",t),e.startNewProcess(),Komodo.Services.ManageViewingService.publishEvent(e,o,"UpdateAgreement","v1"),e.showBusyIndicator()},messageAgreementUpdatedReceived:function(e){var t=this,a=e.ResponseMessage.Payload,o=Komodo.Application.SharedObjectController.create();t.hideBusyIndicator(),a.CustomerUID&&o.retrieveCustomerProfile(a.CustomerUID).done(function(e){Komodo.Controls.MessageBoxController.show(t.viewTitle,kl.value(t.localeDeviceInfo+"deviceInfoUpdateSuccess"),Komodo.Controls.MessageBoxOkButton,this,"id5446673","success").response=function(e){"ok"===e&&(Komodo.Services.uiService.getController("commercialManageViewing").setAgreementData(t.establishmentName,t.viewingLocation),Komodo.Services.uiService.getRoute("application").transitionTo("commercialManageViewing"))}})},messageFailureMessageEventReceived:function(e){Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButton,this,"id5446674","danger"),this.hideBusyIndicator()},localeDeviceInfo:"locale.manageviewing:deviceInfo.",chargePeriodlst:[],accountId:void 0,agreementId:void 0,deviceId:void 0,smartCardNumber:void 0,establishmentName:void 0,viewingLocation:void 0,showGrid:!1,originalChargePeriod:void 0,defaultChargePer:void 0,enableAddressOverRide:!1}),Komodo.Application.DccClaimDetailsController=Komodo.UI.Controller.extend({_localeBase:"locale.manageviewing:",localeDCCClaim:"locale.manageviewing:dccClaims.",init:function(){Komodo.log("Constructing DCC Claim Detail controller");var e=this;e.set("processVersion","v1.1"),e.set("processName","DCC Claim Detail process"),e.registerModel("data",Komodo.Models.DCCDocumentModel),e.registerModel("dccClaimDetailsModel",Komodo.Models.DccClaimDetailsModel),e.set("dccClaimDetailsModel",Komodo.Models.DccClaimDetailsModel.create()),e.set("dccClaimDetailsOldModel",Komodo.Models.DccClaimDetailsOldModel.create()),e.set("addressInformation",Komodo.Models.AddressModel.create()),Komodo.Services.eventAggregator.subscribe("PublishClaimDetails",function(t){if(void 0!=t&&void 0!==t&&""!==t&&(e.setDCCClaimDetailData(t),e.setDCCClaimDetailOldData(t),void 0!==e.dccClaimDetailsModel.get("deviceNumber")&&null!==e.dccClaimDetailsModel.get("deviceNumber")&&""!==e.dccClaimDetailsModel.get("deviceNumber"))){e.get("data").set("documentSerialNumber",e.dccClaimDetailsModel.get("deviceNumber"))}}),e._super()},start:function(){var e=this,t=e.get("data");e.set("loggedInCountryName",""),e.set("isDeliveryAddressEditable",!0),e.set("isPublishClaimRequired",!1),e.set("isDeliveryAddressJustViewable",!1),e.set("isAddSupportingDocumentVisible",!0),e.set("isAddDocumentButtonVisible",!0),e.set("isOtherInsuranceFieldsVisible",!1),e.set("sameAsPhysicalObserverRun",!0),e.set("dispatchBrachObserverRun",!0),e.set("isSetToStolenVisible",!1),e.set("isClaimCancelled",!1),e.set("isPrintClaim",!1),e.set("isEmailClaim",!1),e.set("isEmailToBranch",!1),t.set("customerDocuments",[]),e.set("claimTypelst",[]),e.set("emailModel",Komodo.Models.Email.create()),e.set("isOnTheDotBranchVisible",!1),e.set("isProcessClaimButtonDisable",!1),e.set("isPrintClaimButtonDisable",!1),e.set("isEmailClaimButtonDisable",!1),e.set("isCancelClaimButtonDisable",!1),e.createCDMData(),e.registerValidation(),e.displayViewByClaimStatusInformation(),e.displayOnTheDotClaimAddress(),e.retrieveCaseDocuments(),Komodo.Services.featureToggleService.isEnabled("CustomerGlobal","EnableAddressOverRide").done(function(t){e.set("enableAddressOverRide",t)}),e._super(),null!==e.dccClaimDetailsModel.isClaimProcessed&&void 0!==e.dccClaimDetailsModel.isClaimProcessed&&"On the Dot"===e.dccClaimDetailsModel.dispatchBranch&&"To be Processed"===e.dccClaimDetailsModel.claimStatus&&"false"===e.dccClaimDetailsModel.isClaimProcessed.toLowerCase()&&(clearInterval(e.get("_timer")),e.set("_timer",setTimeout(function(){$("#DCCClaimDetailDeliveryAddressPanel").show(),e.setAddressObject()},1e3)))},setDCCClaimDetailOldData:function(e){var t=this;t.caseUID=e.get("claimUID"),t.dccClaimDetailsOldModel.set("claimUID",e.get("claimUID")),t.dccClaimDetailsOldModel.set("customerUID",e.get("customerUID")),t.dccClaimDetailsOldModel.set("deviceNumber",e.get("deviceNumber")),t.dccClaimDetailsOldModel.set("accountNumber",e.get("accountNumber")),t.dccClaimDetailsOldModel.set("deviceName",e.get("deviceName")),t.dccClaimDetailsOldModel.set("smartcardNumber",e.get("smartcardNumber")),t.dccClaimDetailsOldModel.set("policeStation",e.get("policeStation")),t.dccClaimDetailsOldModel.set("policeCaseNumber",e.get("policeCaseNumber")),t.dccClaimDetailsOldModel.set("caseDate",e.get("caseDate")),t.dccClaimDetailsOldModel.set("claimType",e.get("claimType")),t.dccClaimDetailsOldModel.set("dateOfTheft",e.get("dateOfTheft")),t.dccClaimDetailsOldModel.set("claimDate",e.get("claimDate")),t.dccClaimDetailsOldModel.set("claimStatus",e.get("claimStatus")),t.dccClaimDetailsOldModel.set("otherInsurance",e.get("otherInsurance")),t.dccClaimDetailsOldModel.set("insurerName",e.get("insurerName")),t.dccClaimDetailsOldModel.set("insurerPolicyNumber",e.get("insurerPolicyNumber")),t.dccClaimDetailsOldModel.set("dispatchBranch",e.get("dispatchBranch")),t.dccClaimDetailsOldModel.set("sameAsPhysical",e.get("sameAsPhysical")),t.dccClaimDetailsOldModel.set("country",e.get("country")),t.dccClaimDetailsOldModel.set("province",e.get("province")),t.dccClaimDetailsOldModel.set("city",e.get("city")),t.dccClaimDetailsOldModel.set("suburb",e.get("suburb")),t.dccClaimDetailsOldModel.set("postalCode",e.get("postalCode")),t.dccClaimDetailsOldModel.set("unitNumber",e.get("unitNumber")),t.dccClaimDetailsOldModel.set("buildingName",e.get("buildingName")),t.dccClaimDetailsOldModel.set("streetNumber",e.get("streetNumber")),t.dccClaimDetailsOldModel.set("streetName",e.get("streetName")),t.dccClaimDetailsOldModel.set("customerName",e.get("customerName")),t.dccClaimDetailsOldModel.set("customerSurname",e.get("customerSurname")),t.dccClaimDetailsOldModel.set("category",e.get("category")),t.dccClaimDetailsOldModel.set("subCategory",e.get("subCategory")),t.dccClaimDetailsOldModel.set("interactionType",e.get("interactionType")),t.dccClaimDetailsOldModel.set("outcome",e.get("outcome")),t.dccClaimDetailsOldModel.set("priority",e.get("priority")),t.dccClaimDetailsOldModel.set("statusId",e.get("statusId")),t.dccClaimDetailsOldModel.set("isSetToStolen",e.get("isSetToStolen")),t.dccClaimDetailsOldModel.set("isClaimProcessed",e.get("isClaimProcessed")),t.dccClaimDetailsOldModel.set("interacteeName",e.get("interacteeName")),t.dccClaimDetailsOldModel.set("interactionLocation",e.get("interactionLocation")),t.dccClaimDetailsOldModel.set("interactionMedium",e.get("interactionMedium")),t.dccClaimDetailsOldModel.set("dccPolicyNumber",e.get("dccPolicyNumber")),t.dccClaimDetailsOldModel.set("smartcardModel",e.get("smartcardModel")),t.dccClaimDetailsOldModel.set("queryType",e.get("queryType")),t.dccClaimDetailsOldModel.set("isAddressOverride",e.get("isAddressOverride"))},setDCCClaimDetailData:function(e){var t=this;t.set("sameAsPhysicalObserverRun",!1),t.caseUID=e.get("claimUID"),t.dccClaimDetailsModel.set("claimUID",e.get("claimUID")),t.dccClaimDetailsModel.set("customerUID",e.get("customerUID")),t.dccClaimDetailsModel.set("deviceNumber",e.get("deviceNumber")),t.dccClaimDetailsModel.set("accountNumber",e.get("accountNumber")),t.dccClaimDetailsModel.set("deviceName",e.get("deviceName")),t.dccClaimDetailsModel.set("smartcardNumber",e.get("smartcardNumber")),t.dccClaimDetailsModel.set("policeStation",e.get("policeStation")),t.dccClaimDetailsModel.set("policeCaseNumber",e.get("policeCaseNumber")),t.dccClaimDetailsModel.set("caseDate",e.get("caseDate")),t.dccClaimDetailsModel.set("claimType",e.get("claimType")),t.dccClaimDetailsModel.set("dateOfTheft",e.get("dateOfTheft")),t.dccClaimDetailsModel.set("claimDate",e.get("claimDate")),t.dccClaimDetailsModel.set("claimStatus",e.get("claimStatus")),t.dccClaimDetailsModel.set("otherInsurance",e.get("otherInsurance")),t.dccClaimDetailsModel.set("insurerName",e.get("insurerName")),t.dccClaimDetailsModel.set("insurerPolicyNumber",e.get("insurerPolicyNumber")),t.dccClaimDetailsModel.set("dispatchBranch",e.get("dispatchBranch")),t.dccClaimDetailsModel.set("sameAsPhysical",e.get("sameAsPhysical")),t.dccClaimDetailsModel.set("country",e.get("country")),t.dccClaimDetailsModel.set("province",e.get("province")),t.dccClaimDetailsModel.set("city",e.get("city")),t.dccClaimDetailsModel.set("suburb",e.get("suburb")),t.dccClaimDetailsModel.set("postalCode",e.get("postalCode")),t.dccClaimDetailsModel.set("unitNumber",e.get("unitNumber")),t.dccClaimDetailsModel.set("buildingName",e.get("buildingName")),t.dccClaimDetailsModel.set("streetNumber",e.get("streetNumber")),t.dccClaimDetailsModel.set("streetName",e.get("streetName")),t.dccClaimDetailsModel.set("customerName",e.get("customerName")),t.dccClaimDetailsModel.set("customerSurname",e.get("customerSurname")),t.dccClaimDetailsModel.set("category",e.get("category")),t.dccClaimDetailsModel.set("subCategory",e.get("subCategory")),t.dccClaimDetailsModel.set("interactionType",e.get("interactionType")),t.dccClaimDetailsModel.set("outcome",e.get("outcome")),t.dccClaimDetailsModel.set("priority",e.get("priority")),t.dccClaimDetailsModel.set("statusId",e.get("statusId")),t.dccClaimDetailsModel.set("isSetToStolen",e.get("isSetToStolen")),t.dccClaimDetailsModel.set("isClaimProcessed",e.get("isClaimProcessed")),t.dccClaimDetailsModel.set("interacteeName",e.get("interacteeName")),t.dccClaimDetailsModel.set("interactionLocation",e.get("interactionLocation")),t.dccClaimDetailsModel.set("interactionMedium",e.get("interactionMedium")),t.dccClaimDetailsModel.set("dccPolicyNumber",e.get("dccPolicyNumber")),t.dccClaimDetailsModel.set("smartcardModel",e.get("smartcardModel")),t.dccClaimDetailsModel.set("queryType",e.get("queryType")),t.dccClaimDetailsModel.set("isAddressOverride",e.get("isAddressOverride")),t.set("sameAsPhysicalObserverRun",!0)},createCDMData:function(){var e=this,t=void 0,a=void 0,o=e.get("data"),s=$.Deferred();return Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(r){t=r.data.countryId,a=Komodo.Services.localizationService.getCurrentLanguage(),e.set("country",r.data.countryId),e.set("loggedInCountryId",r.data.countryId),e.set("loggedInCountryName",r.data.countryDescription),e.getStaticCDMData(t,a,"ClaimDispatchBranch",e.dispatchBranchlst),e.getStaticCDMData(t,a,"ClaimType",e.claimTypelst),o.set("documentTypes",[]),e.getStaticCDMData(t,a,"DocumentType",o.documentTypes),e.getHierachicalCDMData(t,a,"CountryDetail",e.countriesWithCodes),e.getHierachicalCDMData(t,a,"Location",e.countrylst).done(function(e){s.resolve(e)})}),s},getStaticCDMData:function(e,t,a,o){Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){switch(o.clear(),a){case"ClaimDispatchBranch":$.each(e,function(e,t){"None"!==t.value&&o.addObject(t)});break;case"DocumentType":$.each(e,function(e,t){"None"!==t.value&&("dcc affidavit"!==t.value.toLowerCase()&&"dcc claim form"!==t.value.toLowerCase()&&"copy of passport"!==t.value.toLowerCase()&&"copy of id"!==t.value.toLowerCase()||o.addObject(t))});break;case"ClaimType":$.each(e,function(e,t){"None"!==t.value&&o.addObject(t)});break;default:$.each(e,function(e,t){o.addObject(t)})}}).fail(function(){Komodo.log("[ERROR] : could not retrieve static CDM data for "+a)})},getHierachicalCDMData:function(e,t,a,o){var s=$.Deferred();return Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){var t=JSON.parse(e);switch(o.clear(),a){case"Location":$.each($.makeArray(t.Countries.Country),function(e,t){o.addObject(t)}),s.resolve(e);break;case"CountryDetail":$.each($.makeArray(t.Countries.Country),function(e,t){o.addObject(t)});break;default:Komodo.log("[ERROR] : Unknown Hierachical dataset: "+a)}}).fail(function(){Komodo.log("[ERROR] : could not retrieve hierarchical CDM data for "+a)}),s},stop:function(){var e=this;e.set("provincelst",[]),e.set("suburblst",[]),e.set("citylst",[]),e.set("countrylst",[]),e.set("postalCodelst",[]),e.set("dispatchBranchlst",[]),e.set("postalCodelst",[]),e.set("claimTypelst",[]),e.set("isOnTheDotBranchVisible",!1),e.set("isDeliveryAddressEditable",!1),e.set("isAddSupportingDocumentVisible",!1),e.set("isAddDocumentButtonVisible",!1),e.set("isSetToStolenVisible",!1),e.set("caseUID",void 0),e.set("isPrintClaim",!1),e.set("isEmailClaim",!1),e.set("isClaimCancelled",!1),e.clearDCCClaimDetailData(),e.clearDCCClaimOldDetailData(),e.clearAddressInformation(),e._super()},registerValidation:function(){var e=this;e.registerValidator(e.get("dccClaimDetailsModel"),"dispatchBranch",{type:"string"}),e.registerValidator(e.get("dccClaimDetailsModel"),"sameAsPhysical",{type:"bool",defaultValue:!1})},updateCaseInfo:function(){var e=this,t=Komodo.Models.CreateInteraction.create(),a=Komodo.Models.Case.create(),o=Komodo.canonicalFacadeFactory(t,["Country","Case","ListOfCaseData_CaseData"]),s=void 0;Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(e){s=e.data.countryDescription}),a.set("Type","Case"),a.set("UID",e.dccClaimDetailsModel.get("claimUID")),a.set("Category",e.dccClaimDetailsModel.get("category")),a.set("SubCategory",e.dccClaimDetailsModel.get("subCategory")),a.set("Outcome",e.dccClaimDetailsModel.get("outcome")),a.set("Status",e.dccClaimDetailsModel.get("statusId")),a.set("QueryType",e.dccClaimDetailsModel.get("queryType")),a.set("InteracteeName",e.dccClaimDetailsModel.get("interacteeName")),a.set("InteractionLocation",e.dccClaimDetailsModel.get("interactionLocation")),a.set("InteractionMedium",e.dccClaimDetailsModel.get("interactionMedium")),a.set("Notes","Claim updated for device number "+e.dccClaimDetailsModel.get("deviceNumber")),a.set("ResolutionReason","1"),a.set("OtherResolutionReason",e.dccClaimDetailsModel.get("resolutionReason"))
;var r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),i=[];void 0!==e.dccClaimDetailsModel.get("isClaimProcessed")&&""!=e.dccClaimDetailsModel.get("isClaimProcessed")&&null!=e.dccClaimDetailsModel.get("isClaimProcessed")&&(n.set("CaseDataValueUri","IsClaimProcessed"),n.set("Value",e.dccClaimDetailsModel.get("isClaimProcessed")),i.push(r));var r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]);void 0!==e.dccClaimDetailsModel.get("dccPolicyNumber")&&""!=e.dccClaimDetailsModel.get("dccPolicyNumber")&&null!=e.dccClaimDetailsModel.get("dccPolicyNumber")&&"-"!=this.dccClaimDetailsModel.get("dccPolicyNumber")&&(n.set("CaseDataValueUri","PolicyNumber"),n.set("Value",e.dccClaimDetailsModel.get("dccPolicyNumber")),i.push(r));var r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]);void 0!==e.dccClaimDetailsModel.get("category")&&""!=e.dccClaimDetailsModel.get("category")&&null!=e.dccClaimDetailsModel.get("category")&&(n.set("CaseDataValueUri","Category"),n.set("Value",e.dccClaimDetailsModel.get("category")),i.push(r));var r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]);void 0!==e.dccClaimDetailsModel.get("caseDate")&&""!=e.dccClaimDetailsModel.get("caseDate")&&null!=e.dccClaimDetailsModel.get("caseDate")&&"-"!=this.dccClaimDetailsModel.get("caseDate")&&(n.set("CaseDataValueUri","PoliceCaseDate"),n.set("Value",e.dccClaimDetailsModel.get("caseDate")),i.push(r));var r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]);void 0!==e.dccClaimDetailsModel.get("deviceNumber")&&""!=e.dccClaimDetailsModel.get("deviceNumber")&&null!=e.dccClaimDetailsModel.get("deviceNumber")&&(n.set("CaseDataValueUri","DecoderNumber"),n.set("Value",e.dccClaimDetailsModel.get("deviceNumber")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==e.dccClaimDetailsModel.get("accountNumber")&&""!=e.dccClaimDetailsModel.get("accountNumber")&&null!=e.dccClaimDetailsModel.get("accountNumber")&&"-"!=this.dccClaimDetailsModel.get("accountNumber")&&(n.set("CaseDataValueUri","AccountNumber"),n.set("Value",e.dccClaimDetailsModel.get("accountNumber")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==e.dccClaimDetailsModel.get("deviceName")&&""!=e.dccClaimDetailsModel.get("deviceName")&&null!=e.dccClaimDetailsModel.get("deviceName")&&"-"!=this.dccClaimDetailsModel.get("deviceName")&&(n.set("CaseDataValueUri","DeviceName"),n.set("Value",e.dccClaimDetailsModel.get("deviceName")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==e.dccClaimDetailsModel.get("smartcardNumber")&&""!=e.dccClaimDetailsModel.get("smartcardNumber")&&null!=e.dccClaimDetailsModel.get("smartcardNumber")&&"-"!=this.dccClaimDetailsModel.get("smartcardNumber")&&(n.set("CaseDataValueUri","SmartcardNumber"),n.set("Value",e.dccClaimDetailsModel.get("smartcardNumber")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==e.dccClaimDetailsModel.get("isSetToStolen")&&""!=e.dccClaimDetailsModel.get("isSetToStolen")&&null!=e.dccClaimDetailsModel.get("isSetToStolen")&&(n.set("CaseDataValueUri","IsSetToStolen"),n.set("Value",e.dccClaimDetailsModel.get("isSetToStolen")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==e.dccClaimDetailsModel.get("policeStation")&&""!=e.dccClaimDetailsModel.get("policeStation")&&null!=e.dccClaimDetailsModel.get("policeStation")&&"-"!=this.dccClaimDetailsModel.get("policeStation")&&(n.set("CaseDataValueUri","PoliceStation"),n.set("Value",e.dccClaimDetailsModel.get("policeStation")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==e.dccClaimDetailsModel.get("policeCaseNumber")&&""!=e.dccClaimDetailsModel.get("policeCaseNumber")&&null!=e.dccClaimDetailsModel.get("policeCaseNumber")&&"-"!=this.dccClaimDetailsModel.get("policeCaseNumber")&&(n.set("CaseDataValueUri","PoliceCaseNumber"),n.set("Value",e.dccClaimDetailsModel.get("policeCaseNumber")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==e.dccClaimDetailsModel.get("claimType")&&""!=e.dccClaimDetailsModel.get("claimType")&&null!=e.dccClaimDetailsModel.get("claimType")&&(n.set("CaseDataValueUri","ClaimType"),n.set("Value",e.dccClaimDetailsModel.get("claimType")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==e.dccClaimDetailsModel.get("dateOfTheft")&&""!=e.dccClaimDetailsModel.get("dateOfTheft")&&null!=e.dccClaimDetailsModel.get("dateOfTheft")&&"-"!=e.dccClaimDetailsModel.get("dateOfTheft")&&(n.set("CaseDataValueUri","DateOfTheft"),n.set("Value",e.dccClaimDetailsModel.get("dateOfTheft")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==e.dccClaimDetailsModel.get("claimDate")&&""!=e.dccClaimDetailsModel.get("claimDate")&&null!=e.dccClaimDetailsModel.get("claimDate")&&(n.set("CaseDataValueUri","DateOfClaim"),n.set("Value",e.dccClaimDetailsModel.get("claimDate")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==e.dccClaimDetailsModel.get("claimStatus")&&""!=e.dccClaimDetailsModel.get("claimStatus")&&null!=e.dccClaimDetailsModel.get("claimStatus")&&(n.set("CaseDataValueUri","ClaimStatus"),n.set("Value",e.dccClaimDetailsModel.get("claimStatus")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==e.dccClaimDetailsModel.get("otherInsurance")&&""!==e.dccClaimDetailsModel.get("otherInsurance")&&null!==e.dccClaimDetailsModel.get("otherInsurance")&&(n.set("CaseDataValueUri","OtherInsurnace"),n.set("Value",e.dccClaimDetailsModel.get("otherInsurance")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==e.dccClaimDetailsModel.get("insurerName")&&""!=e.dccClaimDetailsModel.get("insurerName")&&null!=e.dccClaimDetailsModel.get("insurerName")&&(n.set("CaseDataValueUri","InsurerName"),n.set("Value",e.dccClaimDetailsModel.get("insurerName")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==e.dccClaimDetailsModel.get("insurerPolicyNumber")&&""!=e.dccClaimDetailsModel.get("insurerPolicyNumber")&&null!=e.dccClaimDetailsModel.get("insurerPolicyNumber")&&(n.set("CaseDataValueUri","InsurerPolicyNumber"),n.set("Value",e.dccClaimDetailsModel.get("insurerPolicyNumber")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==e.dccClaimDetailsModel.get("dispatchBranch")&&""!=e.dccClaimDetailsModel.get("dispatchBranch")&&null!=e.dccClaimDetailsModel.get("dispatchBranch")&&(n.set("CaseDataValueUri","DispatchBranch"),n.set("Value",e.dccClaimDetailsModel.get("dispatchBranch")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==e.dccClaimDetailsModel.get("sameAsPhysical")&&""!=e.dccClaimDetailsModel.get("sameAsPhysical")&&null!=e.dccClaimDetailsModel.get("sameAsPhysical")&&(n.set("CaseDataValueUri","SameAsPhysicalAddress"),n.set("Value",e.dccClaimDetailsModel.get("sameAsPhysical")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==e.dccClaimDetailsModel.get("country")&&""!=e.dccClaimDetailsModel.get("country")&&null!=e.dccClaimDetailsModel.get("country")&&(n.set("CaseDataValueUri","Country"),n.set("Value",e.dccClaimDetailsModel.get("country")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==e.dccClaimDetailsModel.get("province")&&""!=e.dccClaimDetailsModel.get("province")&&null!=e.dccClaimDetailsModel.get("province")&&(n.set("CaseDataValueUri","Province"),n.set("Value",e.dccClaimDetailsModel.get("province")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==e.dccClaimDetailsModel.get("city")&&""!=e.dccClaimDetailsModel.get("city")&&null!=e.dccClaimDetailsModel.get("city")&&(n.set("CaseDataValueUri","City"),n.set("Value",e.dccClaimDetailsModel.get("city")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==e.dccClaimDetailsModel.get("suburb")&&""!=e.dccClaimDetailsModel.get("suburb")&&null!=e.dccClaimDetailsModel.get("suburb")&&(n.set("CaseDataValueUri","Suburb"),n.set("Value",e.dccClaimDetailsModel.get("suburb")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==e.dccClaimDetailsModel.get("postalCode")&&""!=e.dccClaimDetailsModel.get("postalCode")&&null!=e.dccClaimDetailsModel.get("postalCode")&&(n.set("CaseDataValueUri","PostalCode"),n.set("Value",e.dccClaimDetailsModel.get("postalCode")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==e.dccClaimDetailsModel.get("unitNumber")&&""!=e.dccClaimDetailsModel.get("unitNumber")&&null!=e.dccClaimDetailsModel.get("unitNumber")&&(n.set("CaseDataValueUri","UnitNumber"),n.set("Value",e.dccClaimDetailsModel.get("unitNumber")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==e.dccClaimDetailsModel.get("buildingName")&&""!=e.dccClaimDetailsModel.get("buildingName")&&null!=e.dccClaimDetailsModel.get("buildingName")&&(n.set("CaseDataValueUri","BuildingName"),n.set("Value",e.dccClaimDetailsModel.get("buildingName")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==e.dccClaimDetailsModel.get("streetNumber")&&""!=e.dccClaimDetailsModel.get("streetNumber")&&null!=e.dccClaimDetailsModel.get("streetNumber")&&(n.set("CaseDataValueUri","StreetNumber"),n.set("Value",e.dccClaimDetailsModel.get("streetNumber")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==e.dccClaimDetailsModel.get("streetName")&&""!=e.dccClaimDetailsModel.get("streetName")&&null!=e.dccClaimDetailsModel.get("streetName")&&(n.set("CaseDataValueUri","StreetName"),n.set("Value",e.dccClaimDetailsModel.get("streetName")),i.push(r)),r=Komodo.Models.CaseData.create(),n=Komodo.canonicalFacadeFactory(r,["CaseDataValueUri","Value"]),void 0!==e.dccClaimDetailsModel.get("isAddressOverride")&&""!=e.dccClaimDetailsModel.get("isAddressOverride")&&null!=e.dccClaimDetailsModel.get("isAddressOverride")&&(n.set("CaseDataValueUri","IsAddressOverride"),n.set("Value",e.dccClaimDetailsModel.get("isAddressOverride")),i.push(r)),o.set("Country",e.country),o.set("Case",a),o.set("ListOfCaseData_CaseData",i),e.publishRequestOnBus(t,"UpdateCase","v1")},PublishProcessClaim:function(){var e=this;e.set("processName","SetToStolenDCC");var t,a=e.dccClaimDetailsModel.get("customerUID");payLoadHardware=Komodo.Models.Hardware.create();var o=Komodo.canonicalFacadeFactory(payLoadHardware,["SerialNumber","LinkedSmartcard","ProductDetail"]);o.set("SerialNumber",e.dccClaimDetailsModel.get("deviceNumber")),""!==e.dccClaimDetailsModel.get("smartcardNumber")||void 0!==e.dccClaimDetailsModel.get("smartcardNumber")||"-"!==e.dccClaimDetailsModel.get("smartcardNumber")?o.set("LinkedSmartcard",e.dccClaimDetailsModel.get("smartcardNumber")):o.set("LinkedSmartcard",""),oProduct=Komodo.Models.ProductDetail.create();var s=Komodo.canonicalFacadeFactory(oProduct,["Model"]);s.set("Model",e.dccClaimDetailsModel.get("deviceName")),oSmardcard=Komodo.Models.ProductDetail.create();var s=Komodo.canonicalFacadeFactory(oSmardcard,["Model"]);s.set("Model",e.dccClaimDetailsModel.get("smartcardModel")),payloadCase=Komodo.Models.Case.create();var r=Komodo.canonicalFacadeFactory(payloadCase,["UID","CustomerUID","Type"]);r.set("CustomerUID",a),r.set("UID",e.dccClaimDetailsModel.get("claimUID")),r.set("Type","Case"),t=Komodo.Models.SetHardwareToStolen.create();var n=Komodo.canonicalFacadeFactory(t,["Country","UserName","LocationId","CustomerID","ToBeStatus","StatusChangeReason","Hardware","ProductDetail","SmartcardDetail","Case"]);n.set("ToBeStatus","10"),n.set("StatusChangeReason","Stolen"),n.set("LocationId",0),n.set("Country",e.country),n.set("UserName",Komodo.Services.securityService.get("domainUserName").substring(3)),n.set("CustomerID",a),n.set("Hardware",payLoadHardware),n.set("ProductDetail",oProduct),n.set("SmartcardDetail",oSmardcard),n.set("Case",payloadCase),e.publishRequestOnBus(t,"SetHardwareToStolen","v1")},messageCaseUpdatedReceived:function(e){var t=this;if(Komodo.log("Customer Cases Updated"),!0===t.isClaimCancelled&&!1===t.isPrintClaim&&!1===t.isEmailClaim){t.set("isCancelClaimButtonDisable",!1),Komodo.Services.busyService.stop(this.get("processId"),"blocking");var a=t.dccClaimDetailsModel.get("deviceNumber");Komodo.Controls.MessageBoxController.show(kl.value(t.localeDCCClaim+"cancelClaim"),kl.value(t.localeDCCClaim+"cancelClaimMessage",{cancelDeviceNumber:a}),Komodo.Controls.MessageBoxOkButtons,t,"id5446673","success").response=function(e){"ok"==e&&(t.set("processName","DCC Claim Detail process"),t.set("isPublishClaimRequired",!1),t.transitionToRoute("/dccClaims"))}}!1===t.isClaimCancelled&&!1===t.isPrintClaim&&!1===t.isEmailClaim&&!0===t.get("isPublishClaimRequired")&&t.PublishProcessClaim(),!0===t.isPrintClaim&&t.publishSendDCCClaimEventPrint(),!0===t.isEmailClaim&&t.publishSendDCCClaimEventEmail()},uploadDocuments:function(){var e=this,t=e.get("data"),a=t.get("fileUploader");$(a.files).each(function(e,t){2!==t.status&&4!==t.status||(t.status=1)}),a.uploadCanceled=!1,a.start(),Komodo.log("[Process DCC Claim]:uploading DCC Claim case documents....")},messageFailureMessageEventReceived:function(e){var t=this;t.set("isProcessClaimButtonDisable",!1),t.set("isPrintClaimButtonDisable",!1),t.set("isEmailClaimButtonDisable",!1),t.set("isCancelClaimButtonDisable",!1),t.set("isEmailToBranch",!1),Komodo.Services.busyService.stop(t.get("processId"),"blocking"),t.set("processName","DCC Claim Detail process"),Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButtons,t,"id5446673","danger")},messageQuotationStatusUpdatedReceived:function(e){var t=this;t.set("isProcessClaimButtonDisable",!1),Komodo.Services.busyService.stop(t.get("processId"),"blocking");var a=t.dccClaimDetailsModel.get("deviceNumber"),o=e.ResponseMessage.Payload.QuotationID;Komodo.Controls.MessageBoxController.show(kl.value(t.localeDCCClaim+"processClaim"),kl.value(t.localeDCCClaim+"successProcessClaimMessage",{successDeviceNumber:a,quoteNumber:o}),Komodo.Controls.MessageBoxOkButtons,t,"id5446673","success").response=function(e){"ok"==e&&(t.set("processName","DCC Claim Detail process"),t.set("isPublishClaimRequired",!1),t.dccClaimDetailsModel.set("resolutionReason","DCC Claim Proccessed"),void 0!==t.dccClaimDetailsModel.get("dispatchBranch")&&null!==t.dccClaimDetailsModel.get("dispatchBranch")&&t.publishSendDCCClaimEventBranch(t.dccClaimDetailsModel.get("dispatchBranch")),t.transitionToRoute("/dccClaims"))}},documentUploadedSucessResponse:function(e,t){var a=this;a.set("isClaimCancelled",!1);t?(a.set("isProcessClaimButtonDisable",!1),Komodo.Services.busyService.stop(this.get("processId"),"blocking"),Komodo.Controls.MessageBoxController.show(kl.value(a.localeDCCClaim+"processClaim"),kl.value(a.localeDCCClaim+"fileUploadError"),Komodo.Controls.MessageBoxOkButton,a,"id24456673","warning")):a.callPublishProcessClaim()},callPublishProcessClaim:function(){var e=this;if(void 0!==e.dccClaimDetailsModel.get("isClaimProcessed")&&null!=e.dccClaimDetailsModel.get("isClaimProcessed")&&""!=e.dccClaimDetailsModel.get("isClaimProcessed")){var t=e.get("data");$(t.customerDocuments).each(function(e,t){t.get("documentAlreadyUploaded")||t.set("documentAlreadyUploaded",!0)}),"false"===e.dccClaimDetailsModel.get("isClaimProcessed").toLowerCase()&&(void 0==e.dccClaimDetailsModel.get("dispatchBranch")&&void 0==e.dccClaimDetailsOldModel.get("dispatchBranch")?e.PublishProcessClaim():(e.dccClaimDetailsModel.set("isClaimProcessed","False"),e.dccClaimDetailsModel.set("statusId","2"),e.dccClaimDetailsModel.set("claimStatus","To be Processed"),e.dccClaimDetailsModel.set("resolutionReason","DCC Claim Details Updated"),e.dccClaimDetailsOldModel.get("dispatchBranch")!=e.dccClaimDetailsModel.get("dispatchBranch")?(e.set("isPublishClaimRequired",!0),e.updateCaseInfo()):"On the Dot"==e.dccClaimDetailsModel.get("dispatchBranch")?(e.dccClaimDetailsModel.country.CanonicalValue==e.dccClaimDetailsOldModel.country&&e.dccClaimDetailsModel.province.CanonicalValue==e.dccClaimDetailsOldModel.province&&e.dccClaimDetailsModel.city.CanonicalValue==e.dccClaimDetailsOldModel.city&&e.dccClaimDetailsModel.suburb.CanonicalValue==e.dccClaimDetailsOldModel.suburb&&e.dccClaimDetailsModel.postalCode==e.dccClaimDetailsOldModel.postalCode&&e.dccClaimDetailsModel.buildingName==e.dccClaimDetailsOldModel.buildingName&&e.dccClaimDetailsModel.streetNumber==e.dccClaimDetailsOldModel.streetNumber&&e.dccClaimDetailsModel.streetName==e.dccClaimDetailsOldModel.streetName||(isEdited=!0),isEdited?(e.set("isPublishClaimRequired",!0),e.updateCaseInfo()):e.PublishProcessClaim()):e.PublishProcessClaim()))}},cancelClaim:function(e){var t=this;t.isOnTheDotBranchVisible&&t.setAddressObjectToViewModelAddress(),t.set("isCancelClaimButtonDisable",!0),t.dccClaimDetailsModel.set("statusId","7"),t.dccClaimDetailsModel.set("claimStatus","Cancelled"),t.dccClaimDetailsModel.set("resolutionReason","DCC Claim Cancelled"),t.dccClaimDetailsModel.set("isPublishClaimRequired",!1),t.set("isClaimCancelled",!0),t.set("isPrintClaim",!1),t.set("isEmailClaim",!1),t.showBusyIndicator(),t.updateCaseInfo()},processClaim:function(e){var t=this;t.set("isClaimCancelled",!1),t.set("isPrintClaim",!1),t.set("isEmailClaim",!1),Komodo.Services.busyService.start(!0,t.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,12e5,"blocking",t);var a=t.get("data"),o=!1;$(a.customerDocuments).each(function(e,t){t.get("documentAlreadyUploaded")||"UPLOADED"===t.uploadStatus&&"DONE"===t.uploadStatus||(o=!0)}),o?t.uploadDocuments():t.callPublishProcessClaim()},printClaim:function(e){var t=this,a=!1;t.set("isPrintClaim",!0),t.set("isEmailClaim",!1),t.set("isClaimCancelled",!1),t.isOnTheDotBranchVisible&&t.setAddressObjectToViewModelAddress(),t.showBusyIndicator(),void 0!==t.dccClaimDetailsModel.get("isClaimProcessed")&&null!=t.dccClaimDetailsModel.get("isClaimProcessed")&&""!=t.dccClaimDetailsModel.get("isClaimProcessed")?"false"===t.dccClaimDetailsModel.get("isClaimProcessed").toLowerCase()&&(t.dccClaimDetailsModel.set("isClaimProcessed","False"),t.dccClaimDetailsModel.set("statusId","2"),t.dccClaimDetailsModel.set("claimStatus","To be Processed"),t.dccClaimDetailsModel.set("resolutionReason","DCC Claim Details Updated"),t.dccClaimDetailsOldModel.get("dispatchBranch")!=t.dccClaimDetailsModel.get("dispatchBranch")?(t.set("isPublishClaimRequired",!1),t.updateCaseInfo()):"On the Dot"==t.dccClaimDetailsModel.get("dispatchBranch")?(t.dccClaimDetailsModel.country==t.dccClaimDetailsOldModel.country&&t.dccClaimDetailsModel.province==t.dccClaimDetailsOldModel.province&&t.dccClaimDetailsModel.city==t.dccClaimDetailsOldModel.city&&t.dccClaimDetailsModel.suburb==t.dccClaimDetailsOldModel.suburb&&t.dccClaimDetailsModel.postalCode==t.dccClaimDetailsOldModel.postalCode&&t.dccClaimDetailsModel.buildingName==t.dccClaimDetailsOldModel.buildingName&&t.dccClaimDetailsModel.streetNumber==t.dccClaimDetailsOldModel.streetNumber&&t.dccClaimDetailsModel.streetName==t.dccClaimDetailsOldModel.streetName||(a=!0),a?(t.set("isPublishClaimRequired",!1),t.updateCaseInfo()):t.publishSendDCCClaimEventPrint()):t.publishSendDCCClaimEventPrint()):t.publishSendDCCClaimEventPrint()},emailClaim:function(e){var t=this,a=!1;t.set("isPrintClaim",!1),t.set("isEmailClaim",!0),t.set("isClaimCancelled",!1),t.isOnTheDotBranchVisible&&t.setAddressObjectToViewModelAddress(),t.showBusyIndicator(),void 0!==t.dccClaimDetailsModel.get("isClaimProcessed")&&null!=t.dccClaimDetailsModel.get("isClaimProcessed")&&""!=t.dccClaimDetailsModel.get("isClaimProcessed")?"false"==t.dccClaimDetailsModel.get("isClaimProcessed").toLowerCase()&&(t.dccClaimDetailsModel.set("isClaimProcessed","False"),t.dccClaimDetailsModel.set("statusId","2"),t.dccClaimDetailsModel.set("claimStatus","To be Processed"),t.dccClaimDetailsModel.set("resolutionReason","DCC Claim Details Updated"),t.dccClaimDetailsOldModel.get("dispatchBranch")!=t.dccClaimDetailsModel.get("dispatchBranch")?(t.set("isPublishClaimRequired",!1),t.updateCaseInfo()):"On the Dot"==t.dccClaimDetailsModel.get("dispatchBranch")?(t.dccClaimDetailsModel.country==t.dccClaimDetailsOldModel.country&&t.dccClaimDetailsModel.province==t.dccClaimDetailsOldModel.province&&t.dccClaimDetailsModel.city==t.dccClaimDetailsOldModel.city&&t.dccClaimDetailsModel.suburb==t.dccClaimDetailsOldModel.suburb&&t.dccClaimDetailsModel.postalCode==t.dccClaimDetailsOldModel.postalCode&&t.dccClaimDetailsModel.buildingName==t.dccClaimDetailsOldModel.buildingName&&t.dccClaimDetailsModel.streetNumber==t.dccClaimDetailsOldModel.streetNumber&&t.dccClaimDetailsModel.streetName==t.dccClaimDetailsOldModel.streetName||(a=!0),a?(t.set("isPublishClaimRequired",!1),t.updateCaseInfo()):t.publishSendDCCClaimEventEmail()):t.publishSendDCCClaimEventEmail()):t.publishSendDCCClaimEventEmail()},removeDocument:function(e){var t=e._parentView._parentView._childViews[0].text,a=this.get("data"),o=-1,s=-1;$(a.customerDocuments).each(function(e,a){a.documentName===t&&(o=e)}),o>-1&&a.customerDocuments.removeAt(o),$(a.fileUploader.files).each(function(e,a){a.name===t&&(s=e)}),s>-1&&a.fileUploader.files.removeAt(s)},displayOnTheDotClaimAddress:function(){var e=this;if(void 0!==e.dccClaimDetailsModel.dispatchBranch&&void 0!==e.dccClaimDetailsModel.dispatchBranch&&void 0!==e.dccClaimDetailsModel.claimStatus&&null!==e.dccClaimDetailsModel.claimStatus)if("On the Dot"===e.dccClaimDetailsModel.dispatchBranch&&"To be Processed"===e.dccClaimDetailsModel.claimStatus&&"false"===e.dccClaimDetailsModel.isClaimProcessed.toLowerCase()){if(e.set("isOnTheDotBranchVisible",!0),e.set("isDeliveryAddressEditable",!0),e.dccClaimDetailsModel.set("dispatchBranch","On the Dot"),void 0!==e.dccClaimDetailsModel.country&&null!==e.dccClaimDetailsModel.country&&""!==e.dccClaimDetailsModel.country){var t=$.grep($.makeArray(e.countrylst),function(t){return t.CanonicalValue.toUpperCase()===e.dccClaimDetailsModel.country.toUpperCase()});if(t.length>0&&(e.dccClaimDetailsModel.set("country",t[0]),void 0!==e.dccClaimDetailsModel.province&&null!==e.dccClaimDetailsModel.province&&""!==e.dccClaimDetailsModel.province)){var a=$.grep($.makeArray(t[0].Provinces.Province),function(t){return t.CanonicalValue.toUpperCase()===e.dccClaimDetailsModel.province.toUpperCase()});a.length>0&&e.dccClaimDetailsModel.set("province",a[0])}}e.dccClaimDetailsModel.set("city",e.dccClaimDetailsModel.city),e.dccClaimDetailsModel.set("suburb",e.dccClaimDetailsModel.suburb),void 0!==e.dccClaimDetailsModel.unitNumber&&null!==e.dccClaimDetailsModel.unitNumber&&""!==e.dccClaimDetailsModel.unitNumber&&e.dccClaimDetailsModel.set("unitNumber",e.dccClaimDetailsModel.unitNumber),void 0!==e.dccClaimDetailsModel.buildingName&&null!==e.dccClaimDetailsModel.buildingName&&""!==e.dccClaimDetailsModel.buildingName&&e.dccClaimDetailsModel.set("buildingName",e.dccClaimDetailsModel.buildingName),void 0!==e.dccClaimDetailsModel.streetNumber&&null!==e.dccClaimDetailsModel.streetNumber&&""!==e.dccClaimDetailsModel.streetNumber&&e.dccClaimDetailsModel.set("streetNumber",e.dccClaimDetailsModel.streetNumber),void 0!==e.dccClaimDetailsModel.streetName&&null!==e.dccClaimDetailsModel.streetName&&""!==e.dccClaimDetailsModel.streetName&&e.dccClaimDetailsModel.set("streetName",e.dccClaimDetailsModel.streetName),void 0!==e.dccClaimDetailsModel.postalCode&&null!==e.dccClaimDetailsModel.postalCode&&""!==e.dccClaimDetailsModel.streetName&&e.dccClaimDetailsModel.set("postalCode",e.dccClaimDetailsModel.postalCode),e.setAddressObject()}else if("On the Dot"===e.dccClaimDetailsModel.dispatchBranch){e.set("isDeliveryAddressEditable",!1);var o="";void 0!==e.dccClaimDetailsModel.unitNumber&&null!==e.dccClaimDetailsModel.unitNumber&&""!==e.dccClaimDetailsModel.unitNumber&&(o+=e.dccClaimDetailsModel.unitNumber+" "),void 0!==e.dccClaimDetailsModel.buildingName&&null!==e.dccClaimDetailsModel.buildingName&&""!==e.dccClaimDetailsModel.buildingName&&(o+=e.dccClaimDetailsModel.buildingName+", "),void 0!==e.dccClaimDetailsModel.streetNumber&&null!==e.dccClaimDetailsModel.streetNumber&&""!==e.dccClaimDetailsModel.streetNumber&&(o+=e.dccClaimDetailsModel.streetNumber+" "),void 0!==e.dccClaimDetailsModel.streetName&&null!==e.dccClaimDetailsModel.streetName&&""!==e.dccClaimDetailsModel.streetName&&(o+=e.dccClaimDetailsModel.streetName+", "),void 0!==e.dccClaimDetailsModel.suburb&&null!==e.dccClaimDetailsModel.suburb&&""!==e.dccClaimDetailsModel.suburb&&(o+=e.dccClaimDetailsModel.suburb+", "),void 0!==e.dccClaimDetailsModel.city&&null!==e.dccClaimDetailsModel.city&&""!==e.dccClaimDetailsModel.city&&(o+=e.dccClaimDetailsModel.city+", "),void 0!==e.dccClaimDetailsModel.province&&null!==e.dccClaimDetailsModel.province&&""!==e.dccClaimDetailsModel.province&&(o+=e.dccClaimDetailsModel.province+", "),void 0!==e.dccClaimDetailsModel.country&&null!==e.dccClaimDetailsModel.country&&""!==e.dccClaimDetailsModel.country&&(o+=e.dccClaimDetailsModel.country+", "),void 0!==e.dccClaimDetailsModel.postalCode&&null!==e.dccClaimDetailsModel.postalCode&&""!==e.dccClaimDetailsModel.postalCode&&(o+=e.dccClaimDetailsModel.postalCode),void 0!==o&&null!==o&&""!==o&&e.dccClaimDetailsModel.set("deliveryAddress",o)}void 0!==e.dccClaimDetailsModel.deliveryAddress&&null!==e.dccClaimDetailsModel.deliveryAddress&&""!==e.dccClaimDetailsModel.deliveryAddress||e.dccClaimDetailsModel.set("deliveryAddress",e.getDefaultValueIfEmpty(o)),void 0!==e.dccClaimDetailsModel.dispatchBranch&&null!==e.dccClaimDetailsModel.dispatchBranch&&""!==e.dccClaimDetailsModel.dispatchBranch||e.dccClaimDetailsModel.set("dispatchBranch",e.getDefaultValueIfEmpty(e.dccClaimDetailsModel.dispatchBranch))},actions:{processClaim:function(e){var t=this,a=(t.get("dccClaimDetailsModel"),!1),o=t.get("data");if(t.isOnTheDotBranchVisible&&t.setAddressObjectToViewModelAddress(),t.validateData)if(t.set("isProcessClaimButtonDisable",!0),void 0!==o.customerDocuments&&null!==o.customerDocuments&&o.customerDocuments.length>0)if($.each($.makeArray(o.customerDocuments),function(e,t){void 0===t.uploadStatus||null===t.uploadStatus||""===t.uploadStatus||"QUEUED"!==t.uploadStatus&&"DONE"!==t.uploadStatus||null!==t.documentType&&void 0!==t.documentType&&"dcc claim form"===t.documentType.toLowerCase()&&(a=!0),void 0!==t.uploadStatus&&null!==t.uploadStatus&&""!==t.uploadStatus&&void 0!==t.documentType&&null!==t.documentType&&""!==t.documentType&&null!==t.documentType&&void 0!==t.documentType&&"UPLOADED"===t.uploadStatus&&"dcc claim form"===t.documentType.toLowerCase()&&(a=!0)}),a)t.processClaim(e);else{t.set("isProcessClaimButtonDisable",!1);Komodo.Controls.MessageBoxController.show(kl.value(t.localeDCCClaim+"processClaim"),kl.value(t.localeDCCClaim+"dccClaimUploadDocumentError"),Komodo.Controls.MessageBoxOkButton,t,"id24456673","warning")}else{t.set("isProcessClaimButtonDisable",!1);Komodo.Controls.MessageBoxController.show(kl.value(t.localeDCCClaim+"processClaim"),kl.value(t.localeDCCClaim+"dccClaimUploadDocumentError"),Komodo.Controls.MessageBoxOkButton,t,"id24456673","warning")}},cancelClaim:function(e){this.cancelClaim(e)},printClaim:function(e){this.printClaim(e)},emailClaim:function(e){this.emailClaim(e)},removeDocument:function(e){this.removeDocument(e)},viewDocument:function(e){var t=e._parentView._parentView._childViews[0].text,a=this.get("data");$(a.customerDocuments).each(function(e,a){a.documentName===t&&window.open(a.documentUrl,"","_blank")})}},retrieveCaseDocuments:function(){var e=this,t=e.dccClaimDetailsModel.get("claimUID");Komodo.log("retrieveDCCClaimCaseDocuments for "+t);var a=$.Deferred();return Komodo.Services.queryService.getJSON("ConfigurationQuery/GetCaseDocuments?caseId="+t).done(function(o){a.resolve(o),e.messageRetrieveCaseDocumentsReceived(o,t)}).error(function(a){var o=JSON.stringify(a);e.messageRetrieveCaseDocumentsError(e.getMessageFromError(a),t),Komodo.log("retrieveDCCClaimCaseDocuments ajax call failed. Error: "+o)}),a},messageRetrieveCaseDocumentsReceived:function(e,t){this.setDCCClaimCaseDocuments(e),Komodo.log("[DCC Claim Details]:DCC Claim Case documents retreived.")},setDCCClaimCaseDocuments:function(e){var t=this;if(null!==e.DocumentPayload&&void 0!==e.DocumentPayload){var a=t.get("data");a.set("customerDocuments",[]);var o=e.DocumentPayload.map(function(e){if(void 0!==e&&null!==e){var o=e.DocumentURL,s=Komodo.Models.DCCDocumentModel.create();s.set("documentTypes",a.get("documentTypes")),void 0!==e.ListOfDocumentMetaData&&null!==e.ListOfDocumentMetaData&&e.ListOfDocumentMetaData.length>0&&$(e.ListOfDocumentMetaData).each(function(e,t){"DocumentType"===t.DocumentMetaDataValueURI&&s.set("documentType",t.Value)}),s.set("isDocumentTypeDisable",!0);var r=o.split("/"),n=r[r.length-1],i="_"+t.dccClaimDetailsModel.get("claimUID"),c=n.replace(i,"");return s.set("documentSerialNumber",a.get("documentSerialNumber")),s.set("documentName",c),s.set("documentUrl",o),s.set("documentSize","-"),s.set("uploadPercentage","-"),s.set("uploadStatus","UPLOADED"),s.set("documentAlreadyUploaded",!0),s}});a.set("customerDocuments",o)}},messageRetrieveCaseDocumentsError:function(e,t){var a=this;Komodo.log("[DCC Claim Details]: Error occured while retriving DCC Claim Case documents.."),Komodo.Services.busyService.stop(this.get("processId"),"blocking"),a.set("processName","DCC Claim Detail process"),Komodo.Controls.MessageBoxController.show(kl.value(a.localeDCCClaim+"technicalError"),kl.value(a.localeDCCClaim+"errorGetCaseDocuments")+" "+e,Komodo.Controls.MessageBoxOkButtons,a,"id5446673","danger")},getMessageFromError:function(e){var t=(JSON.stringify(e),void 0);if(void 0!=e.responseJSON)t=e.responseJSON.Message;else switch(e.status){case 404:default:t=kl.value(this.localeDCCClaim+"technicalErrAdmin")}return t},getSmartcardModelByDeviceNumber:function(){var e=this,t=e.dccClaimDetailsModel.deviceNumber;if(null!==t&&void 0!==t&&""!==t){var a=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),o=Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount;if(null!==o&&null!==o.Account&&(accounts=a.createArrayForSingleElement(o.Account),null!==accounts&&accounts.length>0))for(var s=0;s<accounts.length;s++)if("9"!=accounts[s].Type&&null!==accounts[s].ListOfAgreement&&null!==accounts[s].ListOfAgreement.Agreement)for(var r=a.createArrayForSingleElement(accounts[s].ListOfAgreement.Agreement),n=0;n<r.length;n++)for(var i=a.createArrayForSingleElement(r[n].ListOfHardware.Hardware),c=0;c<i.length;c++){if(t===i[c].SerialNumber&&void 0!==i[c].LinkedSmartcard&&null!==i[c].LinkedSmartcard&&""!==i[c].LinkedSmartcard){var l=i[c].SmartcardDetail.Model.split(" ");void 0!==l&&l.length>1?e.set("dccClaimDetailsModel.smartcardModel",l[1]):void 0!==l&&1===l.length&&e.set("dccClaimDetailsModel.smartcardModel",l[0])}
if(null!=i[c].SecondaryHardware)for(var d=a.createArrayForSingleElement(i[c].SecondaryHardware.Hardware),u=0;u<d.length;u++)if(t===d[u].SerialNumber&&void 0!==d[u].LinkedSmartcard&&null!==d[u].LinkedSmartcard&&""!==d[u].LinkedSmartcard){var l=d[u].SmartcardDetail.Model.split(" ");void 0!==l&&l.length>1?e.set("dccClaimDetailsModel.smartcardModel",l[1]):void 0!==l&&1===l.length&&e.set("dccClaimDetailsModel.smartcardModel",l[0])}}}},displayViewByClaimStatusInformation:function(){var e=this;null!==e.get("dccClaimDetailsModel.claimStatus")&&void 0!==e.get("dccClaimDetailsModel.claimStatus")&&""!==e.get("dccClaimDetailsModel.claimStatus")&&null!==e.dccClaimDetailsModel.isClaimProcessed&&void 0!==e.dccClaimDetailsModel.isClaimProcessed&&("To be Processed"===e.dccClaimDetailsModel.claimStatus&&"false"===e.dccClaimDetailsModel.isClaimProcessed.toLowerCase()?(e.set("isDeliveryAddressEditable",!0),e.set("isDeliveryAddressJustViewable",!1),e.set("isAddSupportingDocumentVisible",!0),e.set("isAddDocumentButtonVisible",!0),e.getSmartcardModelByDeviceNumber()):(e.set("isDeliveryAddressEditable",!1),e.set("isDeliveryAddressJustViewable",!0),e.set("isAddSupportingDocumentVisible",!0),e.set("isAddDocumentButtonVisible",!1))),void 0!==e.dccClaimDetailsModel.policeStation&&null!==e.dccClaimDetailsModel.policeStation&&""!==e.dccClaimDetailsModel.policeStation&&"-"!==e.dccClaimDetailsModel.policeStation&&void 0!==e.dccClaimDetailsModel.policeCaseNumber&&null!==e.dccClaimDetailsModel.policeCaseNumber&&""!==e.dccClaimDetailsModel.policeCaseNumber&&"-"!==e.dccClaimDetailsModel.policeCaseNumber?e.set("isSetToStolenVisible",!0):e.set("isSetToStolenVisible",!1),void 0!==e.dccClaimDetailsModel.otherInsurance&&null!==e.dccClaimDetailsModel.otherInsurance&&""!==e.dccClaimDetailsModel.otherInsurance?e.dccClaimDetailsModel.otherInsurance?(e.set("isOtherInsuranceFieldsVisible",!0),e.dccClaimDetailsModel.set("otherInsuranceValue","Yes")):(e.dccClaimDetailsModel.set("otherInsuranceValue","No"),e.set("isOtherInsuranceFieldsVisible",!1),e.dccClaimDetailsModel.set("insurerName",void 0),e.dccClaimDetailsModel.set("insurerPolicyNumber",void 0)):(e.dccClaimDetailsModel.set("otherInsuranceValue","No"),e.set("isOtherInsuranceFieldsVisible",!1));Komodo.Services.systemService;if(void 0!==e.dccClaimDetailsModel.caseDate&&null!==e.dccClaimDetailsModel.caseDate&&""!==e.dccClaimDetailsModel.caseDate&&"-"!==e.dccClaimDetailsModel.caseDate){var t=new Date(e.dccClaimDetailsModel.caseDate);e.dccClaimDetailsModel.set("caseDateValue",t.toLocaleDateString("es-CL"))}if("-"===e.dccClaimDetailsModel.caseDate&&e.dccClaimDetailsModel.set("caseDateValue",e.dccClaimDetailsModel.caseDate),void 0!==e.dccClaimDetailsModel.dateOfTheft&&null!==e.dccClaimDetailsModel.dateOfTheft&&""!==e.dccClaimDetailsModel.dateOfTheft&&"-"!==e.dccClaimDetailsModel.dateOfTheft){var a=new Date(e.dccClaimDetailsModel.dateOfTheft);e.dccClaimDetailsModel.set("dateOfTheftValue",a.toLocaleDateString("es-CL"))}if("-"===e.dccClaimDetailsModel.dateOfTheft&&e.dccClaimDetailsModel.set("dateOfTheftValue",e.dccClaimDetailsModel.dateOfTheft),void 0!==e.dccClaimDetailsModel.claimDate&&null!==e.dccClaimDetailsModel.claimDate&&""!==e.dccClaimDetailsModel.claimDate){var o=new Date(e.dccClaimDetailsModel.claimDate);e.dccClaimDetailsModel.set("claimDateValue",o.toLocaleDateString("es-CL"))}},getPhysicalAddressForCustomer:function(){var e=this,t=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),a=Komodo.Services.customerProfileService.currentCustomerDetails.ResponseMessage.Payload.CustomerDetail.ListOfAddress;if(null!==a&&null!==a.Address&&(addresses=t.createArrayForSingleElement(a.Address),null!=addresses&&addresses.length>0))for(var o=0;o<addresses.length;o++)if("3"===addresses[o].Type&&addresses[o].IsPrimary){var s=$.grep($.makeArray(e.countrylst),function(e){return e.CanonicalKey.toUpperCase()===addresses[o].Country.toUpperCase()});if(s.length>0){e.set("dccClaimDetailsModel.country",s[0]);var r=$.grep($.makeArray(s[0].Provinces.Province),function(e){return e.CanonicalKey.toUpperCase()===addresses[o].Province.toUpperCase()});r.length>0&&e.set("dccClaimDetailsModel.province",r[0])}e.set("dccClaimDetailsModel.city",addresses[o].City),e.set("dccClaimDetailsModel.suburb",addresses[o].Suburb),e.set("dccClaimDetailsModel.unitNumber",addresses[o].HouseNumber),e.set("dccClaimDetailsModel.buildingName",addresses[o].BuildingName),e.set("dccClaimDetailsModel.streetNumber",addresses[o].Street);var n=Komodo.UI.addressFunctions.splitStreetNumberName(addresses[o].Street);e.set("dccClaimDetailsModel.streetNumber",n.streetNumber),e.set("dccClaimDetailsModel.streetName",n.streetName),e.set("dccClaimDetailsModel.postalCode",addresses[o].PostCode),null!==addresses[o].IsVerified&&void 0!==addresses[o].IsVerified&&(addresses[o].IsVerified?e.set("dccClaimDetailsModel.isAddressOverride",!1):e.set("dccClaimDetailsModel.isAddressOverride",!0)),e.setAddressObject()}},setAddressObject:function(){var e=this;e.get("addressInformation").set("addressTypeText",""),e.get("addressInformation").set("addressType",Komodo.CanonicalValues.AddressTypes.Physical),null!==e.dccClaimDetailsModel.country&&void 0!==e.dccClaimDetailsModel.country&&e.get("addressInformation").set("country",e.dccClaimDetailsModel.country.CanonicalKey),null!==e.dccClaimDetailsModel.province&&void 0!==e.dccClaimDetailsModel.province&&e.get("addressInformation").set("province",e.dccClaimDetailsModel.province.CanonicalKey),e.get("addressInformation").set("city",e.dccClaimDetailsModel.city),e.get("addressInformation").set("suburb",e.dccClaimDetailsModel.suburb),e.get("addressInformation").set("postalCode",e.dccClaimDetailsModel.postalCode),e.get("addressInformation").set("unit",e.dccClaimDetailsModel.unitNumber),e.get("addressInformation").set("building",e.dccClaimDetailsModel.buildingName),e.get("addressInformation").set("streetNumber",e.dccClaimDetailsModel.streetNumber),e.get("addressInformation").set("privateBag",void 0),e.get("addressInformation").set("boxType",""),e.get("addressInformation").set("streetName",e.dccClaimDetailsModel.streetName),e.get("addressInformation").set("isPrimary",!1),e.get("addressInformation").set("isPrimaryString","No"),e.get("addressInformation").set("isMarketingEnabled",!1),null!==e.dccClaimDetailsModel.isAddressOverride&&void 0!==e.dccClaimDetailsModel.isAddressOverride&&("true"===e.dccClaimDetailsModel.isAddressOverride||!0===e.dccClaimDetailsModel.isAddressOverride?(e.set("dccClaimDetailsModel.isAddressOverride",!0),e.get("addressInformation").set("isAddressOverride",!0),e.get("addressInformation").set("isVerified",!1)):(e.set("dccClaimDetailsModel.isAddressOverride",!1),e.get("addressInformation").set("isAddressOverride",!1),e.get("addressInformation").set("isVerified",!0))),e.get("addressInformation").set("addressString","")},setAddressObjectToViewModelAddress:function(){var e=this,t=e.get("addressInformation");if(null!==t&&void 0!==t&&void 0!==t.get("country")&&null!==t.get("country")){var a=$.grep($.makeArray(e.countrylst),function(e){return e.CanonicalKey.toUpperCase()===t.get("country").toUpperCase()});if(a.length>0){e.dccClaimDetailsModel.set("country",a[0].CanonicalValue);var o=$.grep($.makeArray(a[0].Provinces.Province),function(e){return e.CanonicalKey.toUpperCase()===t.get("province").toUpperCase()});o.length>0&&e.dccClaimDetailsModel.set("province",o[0].CanonicalValue)}e.dccClaimDetailsModel.set("city",t.get("city")),e.dccClaimDetailsModel.set("suburb",t.get("suburb")),e.dccClaimDetailsModel.set("postalCode",t.get("postalCode")),e.dccClaimDetailsModel.set("unitNumber",t.get("unit")),e.dccClaimDetailsModel.set("buildingName",t.get("building")),e.dccClaimDetailsModel.set("streetNumber",t.get("streetNumber")),e.dccClaimDetailsModel.set("streetName",t.get("streetName")),e.dccClaimDetailsModel.set("isAddressOverride",t.get("isAddressOverride"))}},validateData:function(){var e="",t=this,a=!1,o=Object.keys(t.get("validators"));return $.each(o,function(o,s){var r=t.get("validators."+s);if(r.model===t.get("dccClaimDetailsModel")||"On the Dot"===t.dccClaimDetailsModel.dispatchBranch&&r.model===t.get("addressInformation")){var n="validators."+s+".errors";t.get(n).length>0&&$.each(t.get(n),function(t,o){e+=o+"<br />",a=!0})}}),a&&(e=kl.value("controller.invalidDataMessage")+"<br />"+e,Komodo.Controls.MessageBoxController.show(kl.value(t.get("localeDCCClaim")+"dccClaimTitle"),e,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning")),a},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,3e4,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},createDependentProperty:function(e,t){var a=this;t.forEach(function(t){void 0!==a.get("validators."+e)&&a.get("validators."+e).functions.addObject(t)}),a.get("validators."+e).validate()},removeDependentProperty:function(e){var t=this;void 0!==t.get("validators."+e)&&(t.get("validators."+e).functions.clear(),t.get("validators."+e).validate())},dispatchBranchSelectionChanged:function(){var e=this;if(e.set("isOnTheDotBranchVisible",!1),void 0!==e.dccClaimDetailsModel&&void 0!==e.dccClaimDetailsModel.dispatchBranch){switch(e.dccClaimDetailsModel.dispatchBranch){case"On the Dot":e.set("isOnTheDotBranchVisible",!0),$("#DCCClaimDetailDeliveryAddressPanel").show();break;default:e.set("isOnTheDotBranchVisible",!1),$("#DCCClaimDetailDeliveryAddressPanel").hide(),e.clearAddressInformation(),e.dccClaimDetailsModel.set("sameAsPhysical",void 0),e.dccClaimDetailsModel.set("country",void 0),e.dccClaimDetailsModel.set("province",void 0),e.dccClaimDetailsModel.set("city",void 0),e.dccClaimDetailsModel.set("suburb",void 0),e.dccClaimDetailsModel.set("postalCode",void 0),e.dccClaimDetailsModel.set("unitNumber",void 0),e.dccClaimDetailsModel.set("buildingName",void 0),e.dccClaimDetailsModel.set("streetNumber",void 0),e.dccClaimDetailsModel.set("streetName",void 0)}switch(e.dccClaimDetailsModel.dispatchBranch){case"Randburg":e.dccClaimDetailsModel.set("outcome","194");break;case"Durban Central":e.dccClaimDetailsModel.set("outcome","195");break;case"Durban Umhlanga":e.dccClaimDetailsModel.set("outcome","196");break;case"Capetown":e.dccClaimDetailsModel.set("outcome","197");break;case"On the Dot":e.dccClaimDetailsModel.set("outcome","199");break;case"Pretoria":e.dccClaimDetailsModel.set("outcome","198")}}}.observes("dccClaimDetailsModel.dispatchBranch"),sameAsPhysicalChanged:function(){var e=this;void 0!==e.dccClaimDetailsModel&&(e.dccClaimDetailsModel.sameAsPhysical?e.sameAsPhysicalObserverRun&&e.getPhysicalAddressForCustomer():(e.clearAddressInformation(),e.dccClaimDetailsModel.set("sameAsPhysical",void 0),e.dccClaimDetailsModel.set("country",void 0),e.dccClaimDetailsModel.set("province",void 0),e.dccClaimDetailsModel.set("city",void 0),e.dccClaimDetailsModel.set("suburb",void 0),e.dccClaimDetailsModel.set("postalCode",void 0),e.dccClaimDetailsModel.set("unitNumber",void 0),e.dccClaimDetailsModel.set("buildingName",void 0),e.dccClaimDetailsModel.set("streetNumber",void 0),e.dccClaimDetailsModel.set("streetName",void 0)))}.observes("dccClaimDetailsModel.sameAsPhysical"),publishSendDCCClaimEventPrint:function(){var e=this;Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(){var t;t=Komodo.Models.SendDCCClaim.create();var a=Komodo.canonicalFacadeFactory(t,["Country","CustomerUID","CaseUID","CommunicationType","Email"]);e.getEmailForCustomer(),a.set("Country",e.country),a.set("CustomerUID",e.dccClaimDetailsModel.get("customerUID")),a.set("CaseUID",e.dccClaimDetailsModel.get("claimUID")),a.set("CommunicationType",""),a.set("Email",e.emailModel),e.publishRequestOnBus(t,"SendDCCClaim","v1"),e.set("isPrintClaimButtonDisable",!0)})},publishSendDCCClaimEventEmail:function(){var e,t=this;e=Komodo.Models.SendDCCClaim.create();var a=Komodo.canonicalFacadeFactory(e,["Country","CustomerUID","CaseUID","CommunicationType","Email"]);if(t.getEmailForCustomer(),void 0!=t.emailModel&&void 0!=t.emailModel.Value)Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(){a.set("Country",t.country),a.set("CustomerUID",t.dccClaimDetailsModel.get("customerUID")),a.set("CaseUID",t.dccClaimDetailsModel.get("claimUID")),a.set("CommunicationType","Email"),a.set("Email",t.emailModel),t.publishRequestOnBus(e,"SendDCCClaim","v1"),t.set("isEmailClaimButtonDisable",!0)});else{t.set("isEmailClaimButtonDisable",!1);Komodo.Controls.MessageBoxController.show(kl.value(t.localeDCCClaim+"sendEmail"),kl.value(t.localeDCCClaim+"emailNotProvided"),Komodo.Controls.MessageBoxOkButton,t,"id24456673","warning")}},publishSendDCCClaimEventBranch:function(e){var t,a=this;t=Komodo.Models.SendDCCClaim.create();var o=Komodo.canonicalFacadeFactory(t,["Country","CustomerUID","CaseUID","CommunicationType","Email","DispatchBranch"]);a.set("isEmailToBranch",!0),Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(){o.set("Country",a.country),o.set("CustomerUID",a.dccClaimDetailsModel.get("customerUID")),o.set("CaseUID",a.dccClaimDetailsModel.get("claimUID")),o.set("CommunicationType","Email"),o.set("Email",a.emailModel),o.set("DispatchBranch",e),a.publishRequestOnBus(t,"SendDCCClaim","v1")})},getEmailForCustomer:function(){var e=this,t=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),a=Komodo.Services.customerProfileService.currentCustomerDetails.ResponseMessage.Payload.CustomerDetail.ListOfEmail;if(null!==a){emails=t.createArrayForSingleElement(a.Email);var o=Komodo.Models.Email.create(),s=Komodo.canonicalFacadeFactory(o,["Value","IsPrimary","IsMarketingEnabled"]);if(null!=emails&&emails.length>0)for(var r=0;r<emails.length;r++)emails[r].IsPrimary&&(s.set("Value",emails[r].Value),s.set("IsPrimary",emails[r].IsPrimary),s.set("IsMarketingEnabled",emails[r].IsMarketingEnabled),e.set("emailModel",o))}},publishRequestOnBus:function(e,t,a){var o=Komodo.Services.ManageViewingService,s="Event Message for "+t+" ";o.publishEvent(this,e,t,a).done(function(){Komodo.log(s+" has been published successfully")}).fail(function(e){Komodo.log(s+" has been failed"),Komodo.Controls.MessageBoxController.show(s,e)})},messageDCCClaimSentReceived:function(e){var t=this;Komodo.Services.busyService.stop(t.get("processId"),"blocking");var a=t.get("isPrintClaim");if(void 0!==a&&null!==a)if(a){if(t.set("isPrintClaimButtonDisable",!1),void 0!==e.ResponseMessage.Payload.DocumentURL){var o=window.open(e.ResponseMessage.Payload.DocumentURL,"_blank");o.focus()}}else if(!0===t.isEmailClaim){t.set("isEmailClaimButtonDisable",!1);var s=Komodo.Controls.MessageBoxController.show(kl.value(t.localeDCCClaim+"sendEmail"),kl.value(t.localeDCCClaim+"successEmailMessage"),Komodo.Controls.MessageBoxOkButton,t,"id5446673","success");s.response=function(e){"ok"==e&&t.set("isEmailClaim",!1)}}},clearDCCClaimDetailData:function(){var e=this;e.dccClaimDetailsModel.set("claimUID",void 0),e.dccClaimDetailsModel.set("customerUID",void 0),e.dccClaimDetailsModel.set("deviceNumber",void 0),e.dccClaimDetailsModel.set("accountNumber",void 0),e.dccClaimDetailsModel.set("deviceName",void 0),e.dccClaimDetailsModel.set("smartcardNumber",void 0),e.dccClaimDetailsModel.set("policeStation",void 0),e.dccClaimDetailsModel.set("policeCaseNumber",void 0),e.dccClaimDetailsModel.set("caseDate",void 0),e.dccClaimDetailsModel.set("claimType",void 0),e.dccClaimDetailsModel.set("dateOfTheft",void 0),e.dccClaimDetailsModel.set("claimDate",void 0),e.dccClaimDetailsModel.set("claimStatus",void 0),e.dccClaimDetailsModel.set("otherInsurance",void 0),e.dccClaimDetailsModel.set("insurerName",void 0),e.dccClaimDetailsModel.set("insurerPolicyNumber",void 0),e.dccClaimDetailsModel.set("dispatchBranch",void 0),e.dccClaimDetailsModel.set("sameAsPhysical",void 0),e.dccClaimDetailsModel.set("country",void 0),e.dccClaimDetailsModel.set("province",void 0),e.dccClaimDetailsModel.set("city",void 0),e.dccClaimDetailsModel.set("suburb",void 0),e.dccClaimDetailsModel.set("postalCode",void 0),e.dccClaimDetailsModel.set("unitNumber",void 0),e.dccClaimDetailsModel.set("buildingName",void 0),e.dccClaimDetailsModel.set("streetNumber",void 0),e.dccClaimDetailsModel.set("streetName",void 0),e.dccClaimDetailsModel.set("customerName",void 0),e.dccClaimDetailsModel.set("customerSurname",void 0),e.dccClaimDetailsModel.set("category",void 0),e.dccClaimDetailsModel.set("subCategory",void 0),e.dccClaimDetailsModel.set("interactionType",void 0),e.dccClaimDetailsModel.set("outcome",void 0),e.dccClaimDetailsModel.set("priority",void 0),e.dccClaimDetailsModel.set("statusId",void 0),e.dccClaimDetailsModel.set("isSetToStolen",void 0),e.dccClaimDetailsModel.set("isClaimProcessed",void 0),e.dccClaimDetailsModel.set("interacteeName",void 0),e.dccClaimDetailsModel.set("interactionLocation",void 0),e.dccClaimDetailsModel.set("interactionMedium",void 0),e.dccClaimDetailsModel.set("dccPolicyNumber",void 0),e.dccClaimDetailsModel.set("smartcardModel",void 0),e.dccClaimDetailsModel.set("queryType",void 0),e.dccClaimDetailsModel.set("isAddressOverride",void 0),e.dccClaimDetailsModel.set("deliveryAddress",void 0)},clearDCCClaimOldDetailData:function(){var e=this;e.dccClaimDetailsOldModel.set("claimUID",void 0),e.dccClaimDetailsOldModel.set("customerUID",void 0),e.dccClaimDetailsOldModel.set("deviceNumber",void 0),e.dccClaimDetailsOldModel.set("accountNumber",void 0),e.dccClaimDetailsOldModel.set("deviceName",void 0),e.dccClaimDetailsOldModel.set("smartcardNumber",void 0),e.dccClaimDetailsOldModel.set("policeStation",void 0),e.dccClaimDetailsOldModel.set("policeCaseNumber",void 0),e.dccClaimDetailsOldModel.set("caseDate",void 0),e.dccClaimDetailsOldModel.set("claimType",void 0),e.dccClaimDetailsOldModel.set("dateOfTheft",void 0),e.dccClaimDetailsOldModel.set("claimDate",void 0),e.dccClaimDetailsOldModel.set("claimStatus",void 0),e.dccClaimDetailsOldModel.set("otherInsurance",void 0),e.dccClaimDetailsOldModel.set("insurerName",void 0),e.dccClaimDetailsOldModel.set("insurerPolicyNumber",void 0),e.dccClaimDetailsOldModel.set("dispatchBranch",void 0),e.dccClaimDetailsOldModel.set("sameAsPhysical",void 0),e.dccClaimDetailsOldModel.set("country",void 0),e.dccClaimDetailsOldModel.set("province",void 0),e.dccClaimDetailsOldModel.set("city",void 0),e.dccClaimDetailsOldModel.set("suburb",void 0),e.dccClaimDetailsOldModel.set("postalCode",void 0),e.dccClaimDetailsOldModel.set("unitNumber",void 0),e.dccClaimDetailsOldModel.set("buildingName",void 0),e.dccClaimDetailsOldModel.set("streetNumber",void 0),e.dccClaimDetailsOldModel.set("streetName",void 0),e.dccClaimDetailsOldModel.set("customerName",void 0),e.dccClaimDetailsOldModel.set("customerSurname",void 0),e.dccClaimDetailsOldModel.set("category",void 0),e.dccClaimDetailsOldModel.set("subCategory",void 0),e.dccClaimDetailsOldModel.set("interactionType",void 0),e.dccClaimDetailsOldModel.set("outcome",void 0),e.dccClaimDetailsOldModel.set("priority",void 0),e.dccClaimDetailsOldModel.set("statusId",void 0),e.dccClaimDetailsOldModel.set("isSetToStolen",void 0),e.dccClaimDetailsOldModel.set("isClaimProcessed",void 0),e.dccClaimDetailsOldModel.set("interacteeName",void 0),e.dccClaimDetailsOldModel.set("interactionLocation",void 0),e.dccClaimDetailsOldModel.set("interactionMedium",void 0),e.dccClaimDetailsOldModel.set("dccPolicyNumber",void 0),e.dccClaimDetailsOldModel.set("smartcardModel",void 0),e.dccClaimDetailsOldModel.set("queryType",void 0),e.dccClaimDetailsOldModel.set("isAddressOverride",void 0),e.dccClaimDetailsOldModel.set("deliveryAddress",void 0)},clearAddressInformation:function(){var e=this;e.get("addressInformation").set("isAddressOverride",!1),e.get("addressInformation").set("addressTypeText",""),e.get("addressInformation").set("addressType",Komodo.CanonicalValues.AddressTypes.Physical),e.get("addressInformation").set("postalCode",void 0),e.get("addressInformation").set("suburb",void 0),e.get("addressInformation").set("city",void 0),e.get("addressInformation").set("province",void 0),e.get("addressInformation").set("country",void 0),e.get("addressInformation").set("unit",void 0),e.get("addressInformation").set("building",void 0),e.get("addressInformation").set("streetNumber",void 0),e.get("addressInformation").set("privateBag",void 0),e.get("addressInformation").set("boxType",void 0),e.get("addressInformation").set("streetName",void 0),e.get("addressInformation").set("isPrimary",!1),e.get("addressInformation").set("isPrimaryString","No"),e.get("addressInformation").set("isMarketingEnabled",!1),e.get("addressInformation").set("isVerified",!1),e.get("addressInformation").set("addressString",void 0)},getDefaultValueIfEmpty:function(e){return void 0==e||null==e||""==e?"-":e},dispatchBranchlst:[],provincelst:[],suburblst:[],citylst:[],countrylst:[],postalCodelst:[],claimTypelst:[],countriesWithCodes:[],caseUID:void 0,enableAddressOverRide:!1}),Komodo.Application.SetToStolenController=Komodo.UI.Controller.extend({_insuranceStatusRedirect:!1,_isVisibleClaimNumber:!0,_DCCRedirect:!1,_cacheHardwareModelDesc:[],init:function(){var e=this;try{e._super(),Komodo.log(e.getLocalizationService().value("locale.manageStock:setToStolen.logInit")),e.set("processVersion","v1.1"),e.set("processName","SetToStolenFEF"),e.dataGridColumns=[Komodo.Controls.DataGridColumn.create({name:"HardwareModelDesc",title:kl.value("locale.manageStock:setToStolen.deviceName"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"deviceSerialNo",title:kl.value("locale.manageStock:setToStolen.deviceNumber"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"deviceStatus",title:kl.value("locale.manageStock:setToStolen.deviceStatus"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"InsuranceStatus",title:kl.value("locale.manageStock:setToStolen.insurance"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"insuranceStartDate",title:kl.value("locale.manageStock:performSwap.insuranceStartDate"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"LinkedSC",title:kl.value("locale.manageStock:setToStolen.linkedSmartcard"),width:"120px"}),Komodo.Controls.DataGridRadioButtonColumn.create({name:"checkItem",title:kl.value("locale.manageStock:setToStolen.stolen"),displayType:"radiobutton",canEdit:!0,isAlwaysEditing:!0,width:"50px"})],e.requiresDependency("_stockService",{singleton:Komodo.Services.stockService}),e.requiresDependency("_featureToggleService",{singleton:Komodo.Services.featureToggleService}),e.requiresDependency("_localizationService",{singleton:Komodo.Services.localizationService})}catch(t){e.handleException("init - "+e.getLocalizationService().value("locale.manageStock:setToStolen.title"),t,!0,!0)}},start:function(){this._super();var e=this;try{this.registerModel("dataModel",Komodo.Models.SetToStolenModel);var t=Komodo.Services.ProductAndServiceMaintenanceHelper.create();if(!t.isCustomerIdIsAvailableToRetriveData())return Komodo.Controls.MessageBoxController.show(e.getLocalizationService().value("locale.manageStock:setToStolen.errorPrerequisiteHeader"),e.getLocalizationService().value("locale.manageStock:setToStolen.errorPrerequisiteMessage"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"),void this.transitionToRoute("/manageViewing");this.registerValidator(this.get("dataModel"),"boundUpperDate",{functions:[Komodo.UI.Validators.DatePickerValidator],limitValueToType:!0,isRequired:!0,maxDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()+1),type:"date",displayName:"Date",isRequiredMessage:"Date is required"}),this.registerValidator(this.get("dataModel"),"policeStation",{limitValueToType:!1,type:"string",isRequired:!0,minLength:1,maxLength:35,displayName:"Police Station:",isRequiredMessage:"Police Station name is required"}),this.registerValidator(this.get("dataModel"),"caseNumber",{limitValueToType:!1,type:"string",isRequired:!0,minLength:1,maxLength:35,displayName:"Case Number:",isRequiredMessage:"Case Number name is required"}),this.registerValidator(this.get("dataModel"),"claimNr",{functions:[Komodo.UI.Validators.alphanumericValidator],limitValueToType:!1,type:"string",isRequired:!1,minLength:1,maxLength:15,displayName:"Claim Number:",isRequiredMessage:"Claim Number name is required"}),this.createNewGridItem(),this.registerValidations();this.get("dataModel").set("customerID",t.getCustomerIdToRetrieveData()),this.getStockService().fillObjectFromCachedFileServiceArray(this,"_cacheHardwareModelDesc","HardwareModel"),this.getStockService().setCountryISO(this.get("dataModel"),"countryISO",function(){e.retrieveHardware()}),this.dataModel.set("boolPairedDevice",!1),Komodo.Services.featureToggleService.isEnabled("SetToStolen","ClaimNumber").done(function(t){Ember.run(function(){e.set("_isVisibleClaimNumber",t)})}),Komodo.Services.featureToggleService.isEnabled("SetToStolen","DCCRedirect").done(function(t){Ember.run(function(){e.set("_DCCRedirect",t)})})}catch(t){Komodo.Controls.MessageBoxController.show(e.getLocalizationService().value("locale.manageStock:setToStolen.error"),e.getLocalizationService().value("locale.manageStock:setToStolen.errorCatch")+" [start]",t,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}},stop:function(){this._super()},registerValidations:function(){this.registerValidator(this.get("dataModel"),"commercialSerialNumber",{isRequired:!0,displayName:"Please fill in device serial number.",minLength:1,maxLength:21,groups:"commercial"})},ConfirmSerialNo:function(e){var t=this;void 0==e?Komodo.Controls.MessageBoxController.show(t.getLocalizationService().value("locale.manageStock:setToStolen.title"),"<strong>"+t.getLocalizationService().value("locale.manageStock:setToStolen.warningConfirmSerialNo")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"):(this.ClearConfirmedData("Confirm"),e.get("deviceSerialNo")==this.dataModel.get("confirmDevice")?(this.dataModel.set("ConfirmedSerialNo",this.dataModel.get("confirmDevice")),this.dataModel.set("confirmDeviceLbl","Confirmed Device - "+this.dataModel.get("confirmDevice")),this.dataModel.set("ConfirmedModel",e.get("FromModel")),this.dataModel.set("BoolSwapTypeButton",!1),this.dataModel.set("BoolConfirmSwapButton",!0)):e.get("LinkedSC")==this.dataModel.get("confirmDevice")?(this.dataModel.set("ConfirmedSerialNo",this.dataModel.get("confirmDevice")),this.dataModel.set("confirmDeviceLbl","Confirmed Device - "+this.dataModel.get("confirmDevice")),this.dataModel.set("ConfirmedModel",e.get("LinkedSCModel")),this.dataModel.set("BoolSwapTypeButton",!1),this.dataModel.set("BoolConfirmSwapButton",!0)):Komodo.Controls.MessageBoxController.show(t.getLocalizationService().value("locale.manageStock:setToStolen.title"),"<strong>"+t.getLocalizationService().value("locale.manageStock:setToStolen.warningConfirmSerialNo2")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"))},ClearConfirmedData:function(e){this.dataModel.set("confirmDeviceLbl",void 0),this.dataModel.set("ConfirmedSerialNo",void 0),this.dataModel.set("ConfirmedModel",void 0),this.dataModel.set("BoolSwapTypeButton",!0),this.dataModel.set("swapData",[]),this.dataModel.set("BoolConfirmSwapButton",!1),"Clear"===e&&this.dataModel.set("confirmDevice",void 0)},actions:{SetToStolen:function(e){var t=this,a=this.dataModel.get("customerID");if(void 0==t.dataModel.selectedGridItem)return Komodo.Controls.MessageBoxController.show(t.getLocalizationService().value("locale.manageStock:setToStolen.title"),t.getLocalizationService().value("locale.manageStock:setToStolen.warningSetToStolen"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"),!1;if(void 0==t.dataModel.caseNumber||""==t.dataModel.caseNumber.trim())return Komodo.Controls.MessageBoxController.show(t.getLocalizationService().value("locale.manageStock:setToStolen.warningSetToStolenCaseNumber"),t.getLocalizationService().value("locale.manageStock:setToStolen.warningSetToStolenCaseNumberMessage"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"),!1;if(void 0==t.dataModel.policeStation||""==t.dataModel.policeStation.trim())return Komodo.Controls.MessageBoxController.show(t.getLocalizationService().value("locale.manageStock:setToStolen.warningSetToStolenPoliceStationName"),t.getLocalizationService().value("locale.manageStock:setToStolen.warningSetToStolenPoliceStationNameMessage"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"),!1;if(void 0==t.dataModel.boundUpperDate||""==t.dataModel.boundUpperDate)return Komodo.Controls.MessageBoxController.show(t.getLocalizationService().value("locale.manageStock:setToStolen.warningSetToStolenCaseDate"),t.getLocalizationService().value("locale.manageStock:setToStolen.warningSetToStolenCaseDateMessage"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"),!1;if("ACTIVE"==t.dataModel.selectedGridItem.get("InsuranceStatus")&&t.get("_isVisibleClaimNumber")&&(void 0==t.dataModel.claimNr||""==t.dataModel.claimNr.trim()))return Komodo.Controls.MessageBoxController.show(t.getLocalizationService().value("locale.manageStock:setToStolen.warningSetToStolenClaimNumber"),t.getLocalizationService().value("locale.manageStock:setToStolen.warningSetToStolenClaimNumberMessage"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"),!1;var o;payLoadHardware=Komodo.Models.Hardware.create();var s=Komodo.canonicalFacadeFactory(payLoadHardware,["SerialNumber","LinkedSmartcard","Status","StatusReason","InsuranceStatus","ProductDetail"]);s.set("SerialNumber",this.dataModel.selectedGridItem.get("deviceSerialNo")),s.set("Status","10"),s.set("StatusReason","890"),s.set("InsuranceStatus",this.dataModel.selectedGridItem.get("InsuranceStatus")),""!==this.dataModel.selectedGridItem.get("LinkedSC")||void 0!==this.dataModel.selectedGridItem.get("LinkedSC")?s.set("LinkedSmartcard",this.dataModel.selectedGridItem.get("LinkedSC")):s.set("LinkedSmartcard",""),oSmardcard=Komodo.Models.ProductDetail.create();var r=Komodo.canonicalFacadeFactory(oSmardcard,["Model","Type"]);r.set("Model",this.dataModel.selectedGridItem.get("LinkedSCModel")),r.set("Type",this.dataModel.selectedGridItem.get("LinkedSCType")),oProduct=Komodo.Models.ProductDetail.create();var n=Komodo.canonicalFacadeFactory(oProduct,["Model","Type"]);n.set("Model",this.dataModel.selectedGridItem.get("FromModel")),n.set("Type",this.dataModel.selectedGridItem.get("deviceType")),payloadCase=Komodo.Models.Case.create();var i=Komodo.canonicalFacadeFactory(payloadCase,["CustomerUID","Type","InteracteeName","InteractionLocation","InteractionMedium","ContactPerson","ContactPersonNumber","Category","SubCategory","Outcome","Status","CaseOwner","TeamLead","EscalationNumber","EscalatedTo","ListOfCaseData_CaseData"]),c=[];i.set("CustomerUID",a),i.set("Type","Activity"),i.set("InteracteeName",Komodo.Services.securityService.get("session.domainUserName")),i.set("InteractionLocation",KomodoConfiguration.stolenDevice.interactionLocation),i.set("InteractionMedium",KomodoConfiguration.stolenDevice.interactionMedium),i.set("Category",KomodoConfiguration.stolenDevice.category),i.set("SubCategory",KomodoConfiguration.stolenDevice.subCategory),i.set("Outcome",KomodoConfiguration.stolenDevice.outcome),i.set("Status",KomodoConfiguration.stolenDevice.status),payloadCaseData=Komodo.Models.CaseData.create();var l=Komodo.canonicalFacadeFactory(payloadCaseData,["CaseDataValueUri","Value"]);l.set("CaseDataValueUri","PoliceCaseNumber"),l.set("Value",this.dataModel.get("caseNumber").trim()),c.push(payloadCaseData),payloadCaseData=Komodo.Models.CaseData.create();var l=Komodo.canonicalFacadeFactory(payloadCaseData,["CaseDataValueUri","Value"]);l.set("CaseDataValueUri","PoliceStationName"),l.set("Value",this.dataModel.get("policeStation").trim()),c.push(payloadCaseData),payloadCaseData=Komodo.Models.CaseData.create();var l=Komodo.canonicalFacadeFactory(payloadCaseData,["CaseDataValueUri","Value"]);l.set("CaseDataValueUri","CaseDate"),
l.set("Value",this.dataModel.get("boundUpperDate")),c.push(payloadCaseData),payloadCaseData=Komodo.Models.CaseData.create();var l=Komodo.canonicalFacadeFactory(payloadCaseData,["CaseDataValueUri","Value"]);l.set("CaseDataValueUri","StolenDeviceSerialNumber"),l.set("Value",this.dataModel.selectedGridItem.get("deviceSerialNo")),c.push(payloadCaseData),i.set("ListOfCaseData_CaseData",c),o=Komodo.Models.SetHardwareToStolen.create();var d=Komodo.canonicalFacadeFactory(o,["Country","UserName","LocationId","CustomerID","ToBeStatus","StatusChangeReason","Hardware","ProductDetail","SmartcardDetail","Case","ListOfCaseData_CaseData"]);d.set("ToBeStatus",KomodoConfiguration.stolenDevice.toBeStatus),d.set("StatusChangeReason","Stolen"),d.set("Country",this.dataModel.get("countryISO")),d.set("UserName",Komodo.Services.securityService.get("domainUserName").substring(3)),d.set("LocationId",this.dataModel.selectedGridItem.get("BusinessUnit")),d.set("CustomerID",a),d.set("Hardware",payLoadHardware),d.set("ProductDetail",oProduct),d.set("SmartcardDetail",oSmardcard),d.set("Case",payloadCase),t.get("_DCCRedirect")&&null!=o.Hardware&&null!=o.Hardware.InsuranceStatus&&"active"==o.Hardware.InsuranceStatus.toLowerCase()?t._insuranceStatusRedirect=!0:t._insuranceStatusRedirect=!1,this.publishRequestOnBus(o,"SetHardwareToStolen","v1"),Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,6e4,"blocking",this)},searchDeviceSingle:function(){try{var e=this;if(!e.canSubmitData(e.get("dataModel"),"Serial Number",{group:"commercial",showInModal:!1}))return;e.retrieveHardware()}catch(e){this.handleException("searchDeviceSingle",e,!0,!0)}},customerDocumentsModal:function(){try{this.getStockService().customerDocumentsModal("deviceSerialNo","deviceType",this.dataModel.get("deviceData"),!0,null)}catch(e){this.handleException("customerDocumentsModal",e,!0,!0)}},backDeviceSingle:function(){try{var e=this;Komodo.Services.busyService.start(!0,e.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,this._messageTimeout,"blocking",this),Komodo.Services.busyService.stop(e.get("processId"),"blocking"),this.transitionToRoute("/manageViewing")}catch(e){this.handleException("backDeviceSingle",e,!0,!0)}}},getLocalizationService:function(){return this.get("_localizationService")},getStockService:function(){return this.get("_stockService")},getFeatureToggleService:function(){return this.get("_featureToggleService")},getHardwareModelDesc:function(e){try{var t=this,a=null;return $.each(t._cacheHardwareModelDesc,function(t,o){if(o.key==e)return a=o.value,!1}),Komodo.log("Data not found in function [getHardwareModelDesc] for hardwareModelID: "+e),a}catch(e){this.handleException("getHardwareModelDesc",e,!0,!0)}},retrieveHardware:function(){var e=this;try{this.getStockService().loadSingleDevice()&&null==e.dataModel.get("commercialSerialNumber")?this.getStockService().getUIService().showModalPopup("Commercial customer",void 0,{view:Komodo.Application.RetrieveHardwareSingleView,canUserClose:!1,context:this,shouldStartAndStopController:!1}):this.getStockService().retrieveHardware(this,e.get("processId"),e.dataModel.get("countryISO"),e.dataModel.get("customerID"),e.dataModel.get("commercialSerialNumber"),!0,function(t){var a=Komodo.canonicalFacadeFactory(t.Payload,["ListOfHardware"]);e.dataModel.deviceData.clear(),e.dataModel.set("BoolConfirmSwapButton",!1);var o,s=a.get("ListOfHardware");if(o=e.getArrayItem(s),!(o.length>0)){return void(Komodo.Controls.MessageBoxController.show(e.getLocalizationService().value("locale.manageStock:setToStolen.errorNoDeviceLoaded"),e.getLocalizationService().value("locale.manageStock:setToStolen.errorNoDeviceLoadedMessage"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger").response=function(t){"ok"===t&&e.transitionToRoute("/manageViewing")})}e.createNewGridItem(),null!=s?o.forEach(function(t){if(null!=t){e.newDeviceGridItem.set("deviceSerialNo",t.SerialNumber),e.newDeviceGridItem.set("deviceStatus",t.Status),e.newDeviceGridItem.set("InsuranceStatus",null!=t.InsuranceStartDate?"ACTIVE":t.InsuranceStatus),e.newDeviceGridItem.set("insuranceStartDate",null!=t.InsuranceStartDate?e.formatDateForDatePicker(t.InsuranceStartDate,0):void 0),e.newDeviceGridItem.set("LinkedSC",t.LinkedSmartcard),null!=t.SmartcardDetail&&e.newDeviceGridItem.set("LinkedSCModel",t.SmartcardDetail.Model),null!=t.SmartcardDetail&&e.newDeviceGridItem.set("LinkedSCType",t.SmartcardDetail.Type);var a=null;null!=t.ProductDetail&&(e.newDeviceGridItem.set("FromProductName",t.ProductDetail.Name),e.newDeviceGridItem.set("FromModel",t.ProductDetail.Model),e.newDeviceGridItem.set("UID",t.ProductDetail.UID),e.newDeviceGridItem.set("deviceType",t.ProductDetail.Type),a=e.getHardwareModelDesc(t.ProductDetail.UID),e.newDeviceGridItem.set("BusinessUnit","0"),null!=t.ProductDetail.ProductFeatures&&$.each(t.ProductDetail.ProductFeatures,function(t,a){"BusinessUnit"==a.Value&&e.newDeviceGridItem.set("BusinessUnit",a.Description)})),null==a&&(a=t.ProductDetail.Model),e.newDeviceGridItem.set("HardwareModelDesc",a),e.addGridRow()}}):Komodo.Controls.MessageBoxController.show(e.getLocalizationService().value("locale.manageStock:setToStolen.setToStolen"),"<strong>"+e.getLocalizationService().value("locale.manageStock:setToStolen.errorNoDevice")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")})}catch(t){Komodo.Controls.MessageBoxController.show(e.getLocalizationService().value("locale.manageStock:setToStolen.error"),e.getLocalizationService().value("locale.manageStock:setToStolen.error")+": "+t,Komodo.Controls.MessageBoxOkButtons,this,"retrieveHardwareError","danger")}},publishRequestOnBus:function(e,t,a){var o=Komodo.Services.customerProfileService,s="Event Message for "+t+" ";o.publishEvent(this,e,t,a).done(function(){Komodo.log(s+" has been published successfully")}).fail(function(e){Komodo.log(s+" has failed"),Komodo.Controls.MessageBoxController.show(s,e,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")})},minTwoDigits:function(e){return(e<10?"0":"")+e},formatDateForDatePicker:function(e,t){try{if(void 0!=e&&""!=e){var a=new Date(e);return a.setDate(a.getDate()+t),this.minTwoDigits(a.getDate())+"/"+this.minTwoDigits(a.getMonth()+1)+"/"+a.getFullYear()}}catch(t){return e}},messageFailureMessageEventReceived:function(e){Komodo.Services.busyService.stop(this.get("processId"),"blocking"),"CreateInteraction"!=e.ResponseMessage.Payload.OriginatedEventName?Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"):Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,this.getLocalizationService().value("locale.manageStock:setToStolen.errorMessageFailureMessageEventReceived"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")},messageHandle:function(e,t){try{Komodo.Services.busyService.stop(this.get("processId"),"blocking"),null!=e&&null!=e.payload&&null!=e.payload.Header?Komodo.Controls.MessageBoxController.show(this.getLocalizationService().value("locale.manageStock:setToStolen.errorMessageHandle"),t+" "+this.getLocalizationService().value("locale.manageStock:setToStolen.errorMessageHandleType")+"'"+e.payload.Header.EventName+"', Process: '"+e.payload.Header.ProcessName+"'.",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"):(Komodo.UI.error("[messageHandle.messageFault] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(this.getLocalizationService().value("locale.manageStock:setToStolen.errorMessageHandleMessage")+" = "+e.messageId,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"))}catch(e){this.handleException("messageHandle",e,!0,!0)}},messageReceived:function(e){try{this.messageHandle(e,this.getLocalizationService().value("locale.manageStock:setToStolen.messageReceived"))}catch(e){this.handleException("messageReceived",e,!0,!0)}},messageDeliveryFailure:function(e){try{this.messageHandle(e,this.getLocalizationService().value("locale.manageStock:setToStolen.messageDeliveryFailure"))}catch(e){this.handleException("messageDeliveryFailure",e,!0,!0)}},messageFault:function(e){try{this.messageHandle(e,this.getLocalizationService().value("locale.manageStock:setToStolen.messageFault"))}catch(e){this.handleException("messageFault",e,!0,!0)}},messageHardwareStatusChangedReceived:function(e){try{var t=this;Komodo.Services.busyService.stop(this.get("processId"),"blocking");var a=Komodo.Controls.MessageBoxController.show(this.getLocalizationService().value("locale.manageStock:setToStolen.setToStolen"),"<strong>"+this.getLocalizationService().value("locale.manageStock:setToStolen.messageHardwareStatusChangedReceived")+"</strong>"+e.ResponseMessage.Payload.Hardware.SerialNumber+(t._insuranceStatusRedirect?"."+this.getLocalizationService().value("locale.manageStock:setToStolen.messageHardwareStatusChangedReceivedQuestion"):"."),t._insuranceStatusRedirect?Komodo.Controls.MessageBoxYesNoButtons:Komodo.Controls.MessageBoxOkButtons,this,"id5446673","success");this.dataModel.set("claimNr",void 0),this.dataModel.set("caseNumber",void 0),this.dataModel.set("policeStation",void 0),this.dataModel.set("boundUpperDate",void 0),a.response=function(e){"yes"==e?t.transitionToRoute("/dccClaims"):t.transitionToRoute("/manageViewing")}}catch(e){this.handleException("messageHardwareStatusChangedReceived",e,!0,!0)}},messageQuotationStatusUpdatedReceived:function(e){Komodo.Services.busyService.stop(this.get("processId"),"blocking");var t=this,a=Komodo.canonicalFacadeFactory(e.ResponseMessage.Payload,["ListOfProduct_Product","Status"]),o=(a.get("ListOfProduct_Product"),a.get("Status"));"Accepted"==o?(Komodo.Controls.MessageBoxController.show(t.getLocalizationService().value("locale.manageStock:setToStolen.successAcceptQuotations"),"<strong>"+t.getLocalizationService().value("locale.manageStock:setToStolen.successAcceptQuotationsMessages")+"</strong>"+e.ResponseMessage.Payload.QuotationID,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","success"),this.dataModel.set("QuoteStatus","Accepted")):"Active"==o?(Komodo.Controls.MessageBoxController.show(t.getLocalizationService().value("locale.manageStock:setToStolen.successAcceptQuotations"),"<strong>"+t.getLocalizationService().value("locale.manageStock:setToStolen.successAcceptQuotationsMessages")+"</strong>"+e.ResponseMessage.Payload.QuotationID,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","success"),this.dataModel.set("QuoteStatus","Active")):Komodo.Controls.MessageBoxController.show(t.getLocalizationService().value("locale.manageStock:setToStolen.successAcceptQuotations"),"<strong>"+t.getLocalizationService().value("locale.manageStock:setToStolen.dangerAcceptQuotations")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"),this.dataModel.set("claimNr",void 0),this.dataModel.set("caseNumber",void 0),this.dataModel.set("policeStation",void 0),this.dataModel.set("boundUpperDate",void 0)},selectedRow:function(){var e=this;try{$.each(e.get("dataModel.deviceData"),function(t,a){if(null!=a.checkItem&&1==a.checkItem)return e.dataModel.set("selectedGridItem",a),e.clearSelectedData(),!1})}catch(e){this.handleException("selectedRow",e,!0,!0)}}.observes("dataModel.deviceData.@each.checkItem"),BoxSwapEvent:function(){if(void 0!==this.dataModel.get("boolPairedDevice"))if(void 0!==this.dataModel.get("boolPairedDevice")&&!1!==this.dataModel.get("boolPairedDevice")){var e=this.dataModel.selectedGridItem.get("deviceType");if(null==e&&(e=""),"decoder"==e.toLowerCase()||"embedded"==e.toLowerCase())if(this.dataModel.set("DecoderSr",this.dataModel.selectedGridItem.get("deviceSerialNo")),this.dataModel.set("DecoderProduct",this.dataModel.selectedGridItem.get("FromProductName")),this.dataModel.set("DecoderModel",this.dataModel.selectedGridItem.get("FromModel")),this.dataModel.set("DecoderWarranty",this.dataModel.selectedGridItem.get("DeviceWarranty")),void 0!==this.dataModel.selectedGridItem.get("LinkedSC")&&""!=this.dataModel.selectedGridItem.get("LinkedSC")){this.dataModel.set("SmartCardSr",this.dataModel.selectedGridItem.get("LinkedSC")),this.dataModel.set("SmartCardModel",this.dataModel.selectedGridItem.get("LinkedSCModel")),this.dataModel.set("PairedDevice",this.dataModel.selectedGridItem.get("LinkedSC"));for(var t=0;t<this.dataModel.deviceData.length;t++)if(this.dataModel.selectedGridItem.get("LinkedSC")==this.dataModel.deviceData[t].deviceSerialNo)return void this.dataModel.set("SmartCardProduct",this.dataModel.deviceData[t].FromProductName)}else this.dataModel.set("PairedDevice","No Linked Device"),this.dataModel.set("SmartCardSr","No Linked Device"),this.dataModel.set("SmartCardModel",""),this.dataModel.set("SmartCardProduct","");else{this.dataModel.set("SmartCardSr",this.dataModel.selectedGridItem.get("deviceSerialNo")),this.dataModel.set("SmartCardModel",this.dataModel.selectedGridItem.get("FromModel")),this.dataModel.set("SmartCardProduct",this.dataModel.selectedGridItem.get("FromProductName"));for(var t=0;t<this.dataModel.deviceData.length;t++)if(this.dataModel.selectedGridItem.get("deviceSerialNo")==this.dataModel.deviceData[t].LinkedSC)return this.dataModel.set("PairedDevice",this.dataModel.deviceData[t].deviceSerialNo),this.dataModel.set("DecoderSr",this.dataModel.deviceData[t].deviceSerialNo),this.dataModel.set("DecoderModel",this.dataModel.deviceData[t].FromModel),this.dataModel.set("DecoderProduct",this.dataModel.deviceData[t].FromProductName),void this.dataModel.set("DecoderWarranty",this.dataModel.deviceData[t].DeviceWarranty);void 0!==this.rcModelData.get("DecoderSr")&&""!=this.dataModel.set("DecoderSr")||(this.dataModel.set("PairedDevice","No Linked Device"),this.dataModel.set("DecoderSr",this.dataModel.get("SmartCardSr")),this.dataModel.set("DecoderProduct",this.dataModel.get("SmartCardProduct")),this.dataModel.set("DecoderModel",this.dataModel.get("SmartCardSr")),this.dataModel.set("DecoderWarranty","In-Active"))}}else void 0!==this.dataModel.selectedGridItem&&(this.dataModel.set("DecoderSr",""),this.dataModel.set("DecoderProduct",""),this.dataModel.set("DecoderModel",""),this.dataModel.set("DecoderWarranty","In-Active"),this.dataModel.set("SmartCardSr",""),this.dataModel.set("SmartCardModel",""),this.dataModel.set("SmartCardProduct",""),this.dataModel.set("PairedDevice",""))}.observes("dataModel.boolPairedDevice"),clearSelectedData:function(){void 0!==this.dataModel.get("boolPairedDevice")&&(this.dataModel.set("PairedDevice",void 0),this.dataModel.set("DecoderSr",void 0),this.dataModel.set("SmartCardSr",void 0),this.dataModel.set("boolPairedDevice",!1),this.dataModel.set("DDCCSwapFlag",!1),this.dataModel.set("claimNr",void 0),this.dataModel.set("caseNumber",void 0),this.dataModel.set("policeStation",void 0),this.dataModel.set("boundUpperDate",void 0),"INACTIVE"==this.dataModel.selectedGridItem.get("InsuranceStatus")||void 0==this.dataModel.selectedGridItem.get("InsuranceStatus")?this.dataModel.set("boolPairedDevice",!1):"ACTIVE"==this.dataModel.selectedGridItem.get("InsuranceStatus")?(this.dataModel.set("boolPairedDevice",!0),this.dataModel.set("DDCCSwapFlag",this._isVisibleClaimNumber)):void 0!=this.dataModel.selectedGridItem.get("InsuranceStatus")&&""!=this.dataModel.selectedGridItem.get("InsuranceStatus").trim()||(this.dataModel.set("boolPairedDevice",!1),this.dataModel.set("DDCCSwapFlag",this._isVisibleClaimNumber)))},getArrayItem:function(e){try{return $.makeArray(e)}catch(e){this.handleException("getArrayItem",e,!0,!0)}},handleException:function(e,t,a,o){try{var s="Error in function ["+e+"]. Exception: "+t+".";a&&(Komodo.log(s),null!=t&&null!=t.stack&&Komodo.log(t.stack)),o&&Komodo.Controls.MessageBoxController.show(this.getLocalizationService().value("locale.manageStock:setToStolen.error"),s,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}catch(e){Komodo.log(e)}},createNewGridItem:function(){this.registerModel("newGridData",Komodo.Models.HardwaresDataGridMVModel),this.set("newDeviceGridItem",this.get("newGridData"))},addGridRow:function(){0===this.dataModel.deviceData.length?this.dataModel.set("deviceData",[this.get("newDeviceGridItem")]):this.dataModel.deviceData.pushObject(this.get("newDeviceGridItem")),this.createNewGridItem()},ClearData:function(){this.dataModel.set("DeviceNo",""),this.dataModel.set("NewDeviceNo",""),this.dataModel.set("deviceData",[{deviceSerialNo:"",deviceStatus:"",model:"",LinkedSC:""}])}}),Komodo.Application.DisconnectController=Komodo.UI.Controller.extend({localeDisconnect:"locale.manageviewing:disconnect.",navigationFrom:void 0,isHolidayHomeForSA:!1,init:function(){this._super(),Komodo.log("Constructing Disconnect controller"),this.set("processVersion","v1.1"),this.set("processName","Disconnect"),this.set("smartcardsList",[]),this.set("isFieldDisabled",!0),this.set("hardwareAndServicesArray",[]),this.set("deviceAndServicesToDisconnect",void 0),this.set("packagesToDisconnect",[]),this.set("packagesToReconnectStatus",[]),this.set("reconnectionDate",[]),this.set("disconnectionDateOfServices",[]),this.set("prinCUD",void 0),this.set("serviceDisconnectStatus",[]),this.set("requestArrayReconnect",[]),this.set("reconnectNotes",""),this.set("notes",""),this.set("serviceReconnectStatus",[]),this.set("reconnectError",""),this.set("isCustomerAvailable",""),this.set("customerId",""),this.set("dateDisconnectAllDisable",!1),this.set("immediateDisconnectDPPAllowed",!1),this.set("loggedInCountryId",""),this.set("ReasonForDisconnection",""),this.set("ReasonForReconnection",""),this.set("DPPListProduct",[]),this.requiresDependency("_queryService",{singleton:Komodo.Services.queryService}),this.subscribePackagesForDisconnectReceived(),this.subscribePackagesForDisconnectError()},start:function(){if(this.set("sharedObject",Komodo.Application.ManageViewingSharedObjectController.create()),this.set("cancelPackagesController",Komodo.Application.CancelPackagesController.create()),this.registerModel("disconnectModel",Komodo.Models.DisconnectModel),this.set("hardwareServiceModel",Komodo.Models.HardwareAndServicesModel.create()),this.set("serviceModel",Komodo.Models.ServiceModel.create()),this.disconnectModel.set("annualSmartcards",[]),this.disconnectModel.set("checkDisconnectDPPAllowed",!0),this.set("immediateDisconnectDPPAllowed",!1),this.registerValidation(),this.set("isHolidayHomeForSA",!1),this.set("helperFunction",Komodo.Services.ProductAndServiceMaintenanceHelper.create()),this.set("isCustomerAvailable",this.helperFunction.isCustomerIdIsAvailableToRetriveData()),!this.get("isCustomerAvailable"))return void Komodo.Controls.MessageBoxController.show(kl.value(this.localeDisconnect+"customerNotFound"),kl.value(this.localeDisconnect+"customerNotFoundText"));this.set("customerId",this.helperFunction.getCustomerIdToRetrieveData());var e=Komodo.Services.customerProfileService.getCustomerPersonalDetail();if(this.verifyAndGetBlankValue(e)&&this.verifyAndGetBlankValue(e.customerClass))if("FromHolidayHome"===this.navigationFrom)this.cancelPackagesController.start(),this.disconnectModel.set("noResidentialCustomerErrormsg",!1),this.bindPackagesInformation();else{var t="RESIDENTIAL"===e.customerClass.toUpperCase()||"2"===e.customerClass,a="SPECIALIST"===e.customerClass.toUpperCase()||"3"===e.customerClass;t||a?(this.disconnectModel.set("noResidentialCustomerErrormsg",!1),this.bindPackagesInformation()):this.disconnectModel.set("noResidentialCustomerErrormsg",!0)}if("FromHolidayHome"===this.navigationFrom){this.disconnectModel.isHolidayHome=!0,this.checkFlagHHForSA(),this.cancelPackagesController.set("isCancel",!1),this.cancelPackagesController.get("cancelPackagesModel").set("isCancel",!1),this.cancelPackagesController.set("isScheduleSuspensionDisabled",!1),this.set("dateDisconnectAllDisable",this.cancelPackagesController.get("isScheduleSuspensionDisabled")),this.cancelPackagesController.setAllowAnnualSubscriberOnly();var o=Komodo.Services.uiService.getController("holidayHomes"),s=o.holidayHomesModel.get("holidayHomesGeneralSmartcards");this.disconnectModel.set("smartcards",s)}else this.disconnectModel.isHolidayHome=!1,this.set("dateDisconnectAllDisable",!1);this.set("loggedInCountryId",this.getQueryService().getSelectedCountryId()),this.loadFeatureToggle(),this._super()},loadFeatureToggle:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("ManageViewing","IsDisconnectAnnualProductOnMonthlyIPDay").done(function(t){e.set("IsDisconnectAnnualProductOnMonthlyIPDay",t)})},registerValidation:function(){this.registerValidator(this.get("disconnectModel"),"isDisconnectAll",{type:"bool",displayName:kl.value(this.localeDisconnect+"disconnectAll"),isRequired:!1}),this.registerValidator(this.get("disconnectModel"),"dateDisconnectAll",{type:"date",displayName:kl.value(this.localeDisconnect+"disconnectAllDate"),isRequired:!1}),this.registerValidator(this.get("disconnectModel"),"isScheduleReconnection",{type:"bool",displayName:kl.value(this.localeDisconnect+"scheduleReconnection"),isRequired:!1})},checkFlagHHForSA:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("ManageViewing","isHHPrepaidSA").done(function(t){t?e.set("isHolidayHomeForSA",!0):e.set("isHolidayHomeForSA",!1)}).fail(function(t){e.set("isHolidayHomeForSA",!1)})},submitDisconnectServices:function(e){var t=this,a=this.get("disconnectModel");this.deviceAndServicesToDisconnect=Ember.Object.create(),this.set("packagesToDisconnect",[]),this.set("packageUidToDisconnect",[]),this.set("disconnectionDateOfServices",[]),this.set("reconnectionDate",[]),this.set("packagesToReconnectStatus",[]);var o=this.get("packagesToDisconnect"),s=this.get("packageUidToDisconnect"),r=this.get("disconnectionDateOfServices"),n=this.get("reconnectionDate"),c=this.getDateObjectFromString(e.principalServiceChargedUntilDate);if("FromHolidayHome"===this.navigationFrom&&(c=new Date(Date.UTC((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()))),this.deviceAndServicesToDisconnect.DeviceSerialNumber=e.linkedSmartCard,a.isDisconnectAll){if(e.isPrincipalAvailable&&(o.push(e.principalServiceName),s.push(e.serviceUid),a.getSelectedProductIds.push(e.principalProductId),this.get("packagesToReconnectStatus").push(e.principalServiceStatus),t.get("DPPListProduct").contains(e.principalServiceUid)?r.push((new Date).toLocaleDateString("sv-SE")):this.verifyAndGetBlankValue(a.dateDisconnectAll)?r.push(this.getformatedDateforService(a.dateDisconnectAll)):r.push(this.getformatedDateforService(c))),e.listOfAddOnServices&&e.listOfAddOnServices.length>0)for(var l=0;l<e.listOfAddOnServices.length;l++)o.push(e.listOfAddOnServices[l].serviceName),s.push(e.listOfAddOnServices[l].serviceUid),a.getSelectedProductIds.push(e.listOfAddOnServices[l].seviceProductId),this.get("packagesToReconnectStatus").push(e.listOfAddOnServices[l].serviceStatus),t.get("DPPListProduct").contains(e.listOfAddOnServices[l].serviceUid)?r.push((new Date).toLocaleDateString("sv-SE")):this.verifyAndGetBlankValue(a.dateDisconnectAll)?t.get("DPPListProduct").contains(e.principalServiceUid)?r.push((new Date).toLocaleDateString("sv-SE")):r.push(this.getformatedDateforService(a.dateDisconnectAll)):r.push(this.getformatedDateforService(c));if(e.listOfAccessServices&&e.listOfAccessServices.length>0)for(var d=0;d<e.listOfAccessServices.length;d++)o.push(e.listOfAccessServices[d].serviceName),s.push(e.listOfAccessServices[d].serviceUid),a.getSelectedProductIds.push(e.listOfAccessServices[d].seviceProductId),this.get("packagesToReconnectStatus").push(e.listOfAccessServices[d].serviceStatus),t.get("DPPListProduct").contains(e.listOfAccessServices[d].serviceUid)?r.push((new Date).toLocaleDateString("sv-SE")):this.verifyAndGetBlankValue(a.dateDisconnectAll)?t.get("DPPListProduct").contains(e.principalServiceUid)?r.push((new Date).toLocaleDateString("sv-SE")):r.push(this.getformatedDateforService(a.dateDisconnectAll)):r.push(this.getformatedDateforService(c));if(a.get("isScheduleReconnection")){if(this.verifyAndGetBlankValue(a.dateScheduleReconnection)&&r&&-1===XDates.compare(a.get("dateScheduleReconnection"),this.getDateObjectFromString(r[0])))return void Komodo.Controls.MessageBoxController.show(kl.value(this.localeDisconnect+"disconnectTitle"),kl.value(this.localeDisconnect+"scheduleDisconnectDate")+XDates.getformatedDateforDatepicker(this.getDateObjectFromString(r[0]))+kl.value(this.localeDisconnect+"scheduleReconnectDate"),Komodo.Controls.MessageBoxOkButtons,this,"id5446675","warning");n.push(a.dateScheduleReconnection.toLocaleDateString("sv-SE"))}}else if(e.stateOfToggleButtonOfPrincipleService){if(e.listOfAddOnServices&&e.listOfAddOnServices.length>0||e.listOfAccessServices&&e.listOfAccessServices.length>0){for(var u=0;u<e.listOfAddOnServices.length;u++)e.listOfAddOnServices[u].stateOfToggleButtonOfService||(Ember.isEmpty(t.get("DPPListProduct"))||t.get("DPPListProduct").contains(e.listOfAddOnServices[u].serviceUid)||(t.immediateDisconnectDPPAllowed=!1),o.push(e.listOfAddOnServices[u].serviceName),s.push(e.listOfAddOnServices[u].serviceUid),a.getSelectedProductIds.push(e.listOfAddOnServices[u].seviceProductId),this.get("packagesToReconnectStatus").push(e.listOfAddOnServices[u].serviceStatus),t.get("DPPListProduct").contains(e.listOfAddOnServices[u].serviceUid)?r.push((new Date).toLocaleDateString("sv-SE")):this.verifyAndGetBlankValue(e.listOfAddOnServices[u].serviceCUD)?r.push(this.getformatedDateforService(e.listOfAddOnServices[u].serviceCUD)):r.push(this.getformatedDateforService(c)));for(var h=0;h<e.listOfAccessServices.length;h++)e.listOfAccessServices[h].stateOfToggleButtonOfService||(Ember.isEmpty(t.get("DPPListProduct"))||t.get("DPPListProduct").contains(e.listOfAccessServices[h].serviceUid)||(t.immediateDisconnectDPPAllowed=!1),o.push(e.listOfAccessServices[h].serviceName),s.push(e.listOfAccessServices[h].serviceUid),a.getSelectedProductIds.push(e.listOfAccessServices[h].seviceProductId),this.get("packagesToReconnectStatus").push(e.listOfAccessServices[i].serviceStatus),t.get("DPPListProduct").contains(e.listOfAccessServices[h].serviceUid)?r.push((new Date).toLocaleDateString("sv-SE")):this.verifyAndGetBlankValue(e.listOfAccessServices[h].serviceCUD)?r.push(this.getformatedDateforService(e.listOfAccessServices[h].serviceCUD)):r.push(this.getformatedDateforService(c)));var m=this.getHighestDate(r);if(a.get("isScheduleReconnection")&&this.verifyAndGetBlankValue(a.dateScheduleReconnection)&&r&&null!=m){if(-1===XDates.compare(a.get("dateScheduleReconnection"),m))return void Komodo.Controls.MessageBoxController.show(kl.value(this.localeDisconnect+"disconnectTitle"),kl.value(this.localeDisconnect+"scheduleDisconnectDate")+XDates.getformatedDateforDatepicker(this.getDateObjectFromString(m))+kl.value(this.localeDisconnect+"scheduleReconnectDate"),Komodo.Controls.MessageBoxOkButtons,this,"id5446675","warning");n.push(a.dateScheduleReconnection.toLocaleDateString("sv-SE"))}}}else{if(o.push(e.principalServiceName),s.push(e.principalServiceUid),a.getSelectedProductIds.push(e.principalProductId),this.get("packagesToReconnectStatus").push(e.principalServiceStatus),this.verifyAndGetBlankValue(e.principalCUD)){if(t.get("DPPListProduct").contains(e.principalServiceUid)?r.push((new Date).toLocaleDateString("sv-SE")):r.push(this.getformatedDateforService(e.principalCUD)),e.listOfAddOnServices&&e.listOfAddOnServices.length>0)for(var g=0;g<e.listOfAddOnServices.length;g++)if(this.verifyAndGetBlankValue(e.listOfAddOnServices[g].serviceCUD)){if(-1===XDates.compare(e.principalCUD,e.listOfAddOnServices[g].serviceCUD))return void Komodo.Controls.MessageBoxController.show(kl.value(this.localeDisconnect+"disconnectTitle"),kl.value(this.localeDisconnect+"addonAccessServiceDisconnect"),Komodo.Controls.MessageBoxOkButtons,this,"id5446675","warning");o.push(e.listOfAddOnServices[g].serviceName),s.push(e.listOfAddOnServices[g].serviceUid),a.getSelectedProductIds.push(e.listOfAddOnServices[g].seviceProductId),this.get("packagesToReconnectStatus").push(e.listOfAddOnServices[g].serviceStatus),t.get("DPPListProduct").contains(e.listOfAddOnServices[g].serviceUid)||t.get("DPPListProduct").contains(e.principalServiceUid)?r.push((new Date).toLocaleDateString("sv-SE")):r.push(this.getformatedDateforService(e.listOfAddOnServices[g].serviceCUD))}else o.push(e.listOfAddOnServices[g].serviceName),s.push(e.listOfAddOnServices[g].serviceUid),a.getSelectedProductIds.push(e.listOfAddOnServices[g].seviceProductId),this.get("packagesToReconnectStatus").push(e.listOfAddOnServices[g].serviceStatus),"FromHolidayHome"===this.navigationFrom?r.push(this.getformatedDateforService(c)):t.get("DPPListProduct").contains(e.listOfAddOnServices[g].serviceUid)||t.get("DPPListProduct").contains(e.principalServiceUid)?r.push((new Date).toLocaleDateString("sv-SE")):r.push(this.getformatedDateforService(e.principalCUD));if(e.listOfAccessServices&&e.listOfAccessServices.length>0)for(var p=0;p<e.listOfAccessServices.length;p++)if(this.verifyAndGetBlankValue(e.listOfAccessServices[p].serviceCUD)){if(-1===XDates.compare(e.principalCUD,e.listOfAccessServices[p].serviceCUD))return void Komodo.Controls.MessageBoxController.show(kl.value(this.localeDisconnect+"disconnectTitle"),kl.value(this.localeDisconnect+"addonAccessServiceDisconnect"),Komodo.Controls.MessageBoxOkButtons,this,"id5446675","warning");o.push(e.listOfAccessServices[p].serviceName),s.push(e.listOfAccessServices[p].serviceUid),a.getSelectedProductIds.push(e.listOfAccessServices[p].seviceProductId),this.get("packagesToReconnectStatus").push(e.listOfAccessServices[p].serviceStatus),t.get("DPPListProduct").contains(e.listOfAccessServices[p].serviceUid)||t.get("DPPListProduct").contains(e.principalServiceUid)?r.push((new Date).toLocaleDateString("sv-SE")):r.push(this.getformatedDateforService(e.listOfAccessServices[p].serviceCUD))}else o.push(e.listOfAccessServices[p].serviceName),s.push(e.listOfAccessServices[p].serviceUid),a.getSelectedProductIds.push(e.listOfAccessServices[p].seviceProductId),this.get("packagesToReconnectStatus").push(e.listOfAccessServices[p].serviceStatus),"FromHolidayHome"===this.navigationFrom?r.push(this.getformatedDateforService(c)):t.get("DPPListProduct").contains(e.listOfAccessServices[p].serviceUid)||t.get("DPPListProduct").contains(e.principalServiceUid)?r.push((new Date).toLocaleDateString("sv-SE")):r.push(this.getformatedDateforService(e.principalCUD))}else{if(r.push(this.getformatedDateforService(c)),e.listOfAddOnServices&&e.listOfAddOnServices.length>0)for(var v=0;v<e.listOfAddOnServices.length;v++)o.push(e.listOfAddOnServices[v].serviceName),s.push(e.listOfAddOnServices[v].serviceUid),a.getSelectedProductIds.push(e.listOfAddOnServices[v].seviceProductId),this.get("packagesToReconnectStatus").push(e.listOfAddOnServices[v].serviceStatus),t.get("DPPListProduct").contains(e.listOfAddOnServices[v].serviceUid)||t.get("DPPListProduct").contains(e.principalServiceUid)?r.push((new Date).toLocaleDateString("sv-SE")):r.push(this.getformatedDateforService(c));if(e.listOfAccessServices&&e.listOfAccessServices.length>0)for(var f=0;f<e.listOfAccessServices.length;f++)o.push(e.listOfAccessServices[f].serviceName),s.push(e.listOfAccessServices[f].serviceUid),a.getSelectedProductIds.push(e.listOfAccessServices[f].seviceProductId),this.get("packagesToReconnectStatus").push(e.listOfAccessServices[f].serviceStatus),t.get("DPPListProduct").contains(e.listOfAccessServices[f].serviceUid)||t.get("DPPListProduct").contains(e.principalServiceUid)?r.push((new Date).toLocaleDateString("sv-SE")):r.push(this.getformatedDateforService(c))}if(a.get("isScheduleReconnection")){
if(this.verifyAndGetBlankValue(a.dateScheduleReconnection)&&r&&-1===XDates.compare(a.get("dateScheduleReconnection"),this.getDateObjectFromString(r[0])))return void Komodo.Controls.MessageBoxController.show(kl.value(this.localeDisconnect+"disconnectTitle"),kl.value(this.localeDisconnect+"scheduleDisconnectDate")+XDates.getformatedDateforDatepicker(this.getDateObjectFromString(r[0]))+kl.value(this.localeDisconnect+"scheduleReconnectDate"),Komodo.Controls.MessageBoxOkButtons,this,"id5446675","warning");n.push(a.dateScheduleReconnection.toLocaleDateString("sv-SE"))}}if(r&&r.length>0)for(var b=0;b<r.length;b++)if(this.verifyAndGetBlankValue(a.dateScheduleReconnection)&&1!==XDates.compare(a.get("dateScheduleReconnection").setHours(0,0,0,0),this.getDateObjectFromString(r[b])))return void Komodo.Controls.MessageBoxController.show(kl.value(this.localeDisconnect+"disconnectTitle"),kl.value(this.localeDisconnect+"scheduleDisconnectDate")+XDates.getformatedDateforDatepicker(this.getDateObjectFromString(r[b]))+kl.value(this.localeDisconnect+"scheduleReconnectDate"),Komodo.Controls.MessageBoxOkButtons,this,"id5446675","warning");var C=[];if(!Ember.isBlank(r)&&r.length>0&&!Ember.isBlank(o)&&r.length===o.length)for(var S=0;S<o.length;S++){var D=[];D.push(o[S]);var y=r[S];t.get("DPPListProduct").contains(s[S])&&t.immediateDisconnectDPPAllowed||this.get("isPRMDPP")?this.set("ReasonForDisconnection",GetClarityConstants("ManageViewingConstants","productConstants.disconnectReason.disconnect_DPP_Product").toString()):this.set("ReasonForDisconnection",GetClarityConstants("ManageViewingConstants","productConstants.disconnectReason.customer_Request_Disconnect").toString()),C.push({DeviceSerialNumber:e.linkedSmartCard,PackageNames:D,DisconnectionReason:this.get("ReasonForDisconnection"),ScheduledDisconnectionDate:y})}if(this.disconnectModel.set("isScheduledChangesExist",!1),this.set("packagesToDisconnect",o),this.set("packageUidToDisconnect",s),this.set("reconnectionDate",n),this.set("disconnectionDateOfServices",r),this.getScheduledChanges(),Komodo.Services.securityService.hasPermission("clarity://disconnect/viewOnlyScheduleChanges")&&Komodo.Controls.MessageBoxController.show(kl.value(this.localeDisconnect+"disconnectionNotAllowedtitle"),kl.value(this.localeDisconnect+"deleteScheduleNotAllowed"),Komodo.Controls.MessageBoxOkButton,this,"id5446673","warning"),C){t=this;var w="",I="",x=!0,M=t.get("sharedObject");I+="<br><br>"+kl.value(t.localeDisconnect+"scheduleReconnectNote",{reconnectDate:t.getFormatedDateForPopup(n[0])});for(var T=0;T<o.length;T++){var N=o[T],P=t.getFormatedDateForPopup(r[T]),O=kl.value(t.localeDisconnect+"disconnectPopup",{serviceName:N,disconnectDate:P});""===w?w="<br>"+O:w+="<br>"+O,"Active"===t.get("packagesToReconnectStatus")[T]&&(I+="<br>"+N)}if(!Ember.isEmpty(a.get("isScheduleReconnection"))&&a.get("isScheduleReconnection")&&(w+=I),t.disconnectModel.get("isScheduledChangesExist"))if(t.get("isHolidayHomeForSA"))t.suspendPackages(C);else{var B=Komodo.Controls.MessageBoxController.show(kl.value(t.localeDisconnect+"disconnectTitle"),kl.value(t.localeDisconnect+"confirmDeletePreviousSchedules"),Komodo.Controls.MessageBoxYesNoButtons,t,"id789679","warning");B.response=function(e){if("yes"===e){x=!1,M.deleteMultipleScheduledChanges(a.deleteScheduleList,x);Komodo.Controls.MessageBoxController.show(kl.value(t.localeDisconnect+"confirmMessageTitle"),kl.value(t.localeDisconnect+"confirmMessageText")+w,Komodo.Controls.MessageBoxYesNoButtons,t,"id5449875","warning").response=function(e){"yes"===e&&(a.isHolidayHome?t.suspendPackages(C):(t.showBlockingBusyIndicator(),M.disconnectPackages(C,"Disconnect")))}}}}else{Komodo.Controls.MessageBoxController.show(kl.value(t.localeDisconnect+"confirmMessageTitle"),kl.value(t.localeDisconnect+"confirmMessageText")+w,Komodo.Controls.MessageBoxYesNoButtons,t,"id5446675","warning").response=function(e){"yes"===e&&(t.showBlockingBusyIndicator(),a.isHolidayHome?(t.hideBusyIndicator(),t.suspendPackages(C)):M.disconnectPackages(C,"Disconnect"))}}}},getScheduledChanges:function(){var e=this;Komodo.Services.queryService.getJSON("/ScheduledChanges/GetScheduledChanges?customerNumber="+e.get("customerId"),{async:!1}).done(function(t){!Ember.isEmpty(t.ScheduleList)&&t.ScheduleList.length>0&&(e.disconnectModel.scheduledChangesList.clear(),e.disconnectModel.scheduledChangesList.pushObjects(t.ScheduleList),e.getPreviousSchedules())}).error(function(t){var a=JSON.stringify(t);Komodo.log(kl.value(e.localeDisconnect+"ajaxError")+a),Komodo.Controls.MessageBoxController.show(kl.value(e.localeDisconnect+"technicalError"),a,Komodo.Controls.MessageBoxOkButton,e,"id123456","danger").response=function(e){}})},getPreviousSchedules:function(){var e=this;e.disconnectModel.deleteScheduleList.clear(),e.disconnectModel.set("isScheduledChangesExist",!1),!Ember.isEmpty(e.disconnectModel.scheduledChangesList)&&e.disconnectModel.scheduledChangesList.length>0&&!Ember.isEmpty(e.disconnectModel.getSelectedProductIds)&&e.disconnectModel.getSelectedProductIds.forEach(function(t){e.disconnectModel.scheduledChangesList.forEach(function(a){Ember.isEmpty(a.ChildSchedules)||a.ChildSchedules.forEach(function(o){o.ProductId.toString()!==t||e.disconnectModel.deleteScheduleList.contains(a.ScheduleId)||(e.disconnectModel.set("isScheduledChangesExist",!0),e.disconnectModel.deleteScheduleList.push(a.ScheduleId))})})})},bindPackagesInformation:function(){var e=this;e.hardwareAndServicesArray=e.getHardwareAndAllActiveServicesOfCustomer(),e.disconnectModel.get("hardwareAndServices").addObjects(e.hardwareAndServicesArray)},getHardwareAndAllActiveServicesOfCustomer:function(){var e=this,t=[];if(e.disconnectModel.set("annualSmartcards",[]),Komodo.Services.customerProfileService.currentFinancialAccounts)for(var a=e.helperFunction.createArrayForSingleElement(Komodo.Services.customerProfileService.currentFinancialAccounts.ResponseMessage.Payload.ListOfAccount.Account),o=0;o<a.length;o++)if("9"!==a[o].Type)for(var s=e.helperFunction.createArrayForSingleElement(a[o].ListOfAgreement.Agreement),r=0;r<s.length;r++)if(void 0!==s[r].ListOfHardware&&void 0!==s[r].ListOfHardware.Hardware)for(var n=e.helperFunction.createArrayForSingleElement(s[r].ListOfHardware.Hardware),i=0;i<n.length;i++){var c=void 0;if(Ember.isEmpty(n[i].LinkedSmartcard)?Ember.isEmpty(n[i].SerialNumber)||(c={Key:n[i].SerialNumber,Value:n[i].SerialNumber}):c={Key:n[i].LinkedSmartcard,Value:n[i].LinkedSmartcard},!Ember.isEmpty(c)){if("FromHolidayHome"===this.navigationFrom&&"13"===a[o].Type){if(e.smartcardsList.length>0){var l=e.smartcardsList.filter(function(e){return e.Key===c.Key});if(0===l.length&&!Ember.isEmpty(n[i].ListOfService.Service))for(var d=0;d<n[i].ListOfService.Service[0].ProductDetail.ProductFeatures.length;d++)if("AgreementId"===n[i].ListOfService.Service[0].ProductDetail.ProductFeatures[d].Description){var u=n[0].ListOfService.Service[0].ProductDetail.ProductFeatures[d].Value;Ember.isEmpty(n[i].ListOfService.Service)||u!==s[r].UID||e.smartcardsList.push(c)}}else if(!Ember.isEmpty(n[i].ListOfService.Service))for(var h=0;h<n[i].ListOfService.Service[0].ProductDetail.ProductFeatures.length;h++)if("AgreementId"===n[i].ListOfService.Service[0].ProductDetail.ProductFeatures[h].Description){var m=n[0].ListOfService.Service[0].ProductDetail.ProductFeatures[h].Value;Ember.isEmpty(n[i].ListOfService.Service)||m!==s[r].UID||e.smartcardsList.push(c)}"12"===s[r].TermOfPayment&&e.disconnectModel.annualSmartcards.push(n[i].LinkedSmartcard)}else if("13"!==a[o].Type&&"FromHolidayHome"!==this.navigationFrom)if(e.smartcardsList.length>0){var g=e.smartcardsList.filter(function(e){return e.Key===c.Key});0===g.length&&e.smartcardsList.push(c)}else e.smartcardsList.push(c);if(n[i].ListOfService&&n[i].ListOfService.Service){var p=Komodo.Models.HardwareAndServicesModel.create();if(Ember.isEmpty(n[i].LinkedSmartcard)?Ember.isEmpty(n[i].SerialNumber)||(p=e.helperFunction.setDecoderDetail(p,n[i].ProductDetail.Name,n[i].SerialNumber)):p=e.helperFunction.setDecoderDetail(p,n[i].ProductDetail.Name,n[i].LinkedSmartcard),null!==(p=e.helperFunction.setActiveServicesDetail(p,n[i].ListOfService.Service))&&null!==p.principalServiceName&&""!==p.principalServiceName&&void 0!==p.principalServiceName)t.push(p);else if(null!==p.listOfAddOnServices&&void 0!==p.listOfAddOnServices&&p.listOfAddOnServices.length>0){var v=p.listOfAddOnServices.filter(function(e){return"MOMAXIP - DStv Mobile Premium Value-Add"===e.serviceName}),f=p.listOfAddOnServices.filter(function(e){return"MOBMAXI - DStv Mobile"===e.serviceName}),b=p.listOfAddOnServices.filter(function(e){return"DMMPRK"===e.serviceName});if(Ember.isEmpty(v)&&Ember.isEmpty(b)){if(!Ember.isEmpty(f))for(var C=0;C<n.length;C++){var S=n[C].ListOfService.Service.filter(function(e){return"COFAMS20- DStv Family Bouquet IS20"===e.ProductDetail.Name||"MINIBS20 - Mini Bouquet IS20"===e.ProductDetail.Name});if(null!==S&&void 0!==S&&S.length>0){p.set("stateOfToggleButtonOfPrincipleService",!0),p.set("isPrincipalAvailable",!1),p.set("principalServiceChargedUntilDate",e.getFormattedPrincipalCUD(S[0].ChargeUntilDate)),t.push(p);break}}}else for(var D=0;D<n.length;D++){var y=n[D].ListOfService.Service.filter(function(e){return"PRMS20 - Premium Bouquet IS20"===e.ProductDetail.Name||"PRM"===e.ProductDetail.Name});if(!Ember.isEmpty(y)){p.set("stateOfToggleButtonOfPrincipleService",!0),p.set("isPrincipalAvailable",!1),p.set("principalServiceChargedUntilDate",e.getFormattedPrincipalCUD(y[0].ChargeUntilDate)),t.push(p);break}}}}}}return t},getFormattedPrincipalCUD:function(e){if(null!==e&&void 0!==e){var t=e.split("T"),a=new Date(t[0]);return a.setDate(a.getDate()+1),XDates.getformatedDateforDatepicker(a)}},getScheduleDisconnectionDate:function(e){var t=this;if(t.set("prinCUD",e),null!==e&&void 0!==e&&""!==e){var a=t.getDateObjectFromString(e);"FromHolidayHome"===t.navigationFrom&&(a=new Date((new Date).toLocaleDateString("sv-SE"))),t.set("validators.dateDisconnectAllValidator.options.minDate",a)}},getformatedDateforService:function(e){if(void 0!==e&&""!==e&&null!==e){var t=this.getDateObjectFromString(this.get("prinCUD"));"FromHolidayHome"===this.navigationFrom&&(t=e);var a=t.getDate(),o=new Date(e.getFullYear(),e.getMonth()+1,0).getDate();o<a&&(a=o);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+a}},getHighestDate:function(e){for(var t=e[0],a=0;a<e.length;a++)1===XDates.compare(e[a],t)&&(t=e[a]);return null!==t||void 0!==t||""!==t?t:null},verifyAndGetBlankValue:function(e){return!Ember.isEmpty(e)},getDateObjectFromString:function(e){var t,a=new Date;return e&&(e.indexOf("-")>=0?(t=e.split("-"),a=new Date(new Date(parseInt(t[0],10),parseInt(t[1],10)-1,parseInt(t[2],10)))):e.indexOf("/")>=0&&(t=e.split("/"),a=new Date(new Date(parseInt(t[2],10),parseInt(t[1],10)-1,parseInt(t[0],10))))),a},getDateforholidayhomesViewingDays:function(e){var t,a=new Date;return e&&(e.indexOf("-")>=0?(t=e.split("-"),a=new Date(new Date(parseInt(t[2],10),parseInt(t[1],10)-1,parseInt(t[0],10)))):e.indexOf("/")>=0&&(t=e.split("/"),a=new Date(new Date(parseInt(t[2],10),parseInt(t[1],10)-1,parseInt(t[0],10))))),a},getDateFromJavascriptDate:function(e){function t(e){var t=e.toString();return t.length<2?"0"+t:t}var a=e.getFullYear(),o=t(e.getMonth()+1);return t(e.getDate())+"-"+o+"-"+a},getFormatedDateForPopup:function(e){var t,a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];if(e){if(e.indexOf("-")>=0)return t=e.split("-"),t[2]+"-"+a[t[1]-1]+"-"+t[0];if(e.indexOf("/")>=0)return t=e.split("/"),t[0]+"-"+a[t[1]-1]+"-"+t[2]}return null},subscribePackagesForDisconnectReceived:function(){var e=this;Komodo.Services.eventAggregator.subscribe("PackagesForDisconnectReceived",function(){var t,a=Komodo.Services.uiService.getController("disconnect"),o=Komodo.Services.ManageViewingService.packagesForDisconnect;a.getServicesDisconnectionStatus(o);var s=a.showSuccessAlertMessage(o);a.hideBusyIndicator(),t=s?Komodo.Controls.MessageBoxController.show(kl.value(e.localeDisconnect+"success"),a.notes,Komodo.Controls.MessageBoxOkButton,e,"id5446676","success"):Komodo.Controls.MessageBoxController.show(kl.value(e.localeDisconnect+"disconnectTitle"),a.notes,Komodo.Controls.MessageBoxOkButton,e,"id5446675","warning"),t.response=function(t){if("ok"===t){var o=a.get("disconnectModel");if(!a.get("isCustomerAvailable"))return void Komodo.Controls.MessageBoxController.show(kl.value(e.localeDisconnect+"error"),kl.value(e.localeDisconnect+"customerNotFound"));a.publishCreateActivity(a.get("customerId"),!1,!1,!1),!0===o.isScheduleReconnection?a.reconnectPackages(a.get("serviceDisconnectStatus"),a.get("reconnectionDate")):Komodo.Services.eventAggregator.publish("redirectToManageViewing",null)}}})},subscribePackagesForDisconnectError:function(){var e=this;Komodo.Services.eventAggregator.subscribe("PackagesForDisconnectError",function(){var t=Komodo.Services.uiService.getController("disconnect"),a=Komodo.Services.ManageViewingService.packagesForDisconnectError;if(t.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(e.localeDisconnect+"error"),a,Komodo.Controls.MessageBoxOkButtons,e,"id5446674","danger"),!t.get("isCustomerAvailable"))return void Komodo.Controls.MessageBoxController.show(kl.value(e.localeDisconnect+"error"),kl.value(e.localeDisconnect+"customerNotFound"));t.publishCreateActivity(t.get("customerId"),!1,!0,!1)})},getServicesDisconnectionStatus:function(e){var t=this.get("packagesToDisconnect"),a=this.get("disconnectionDateOfServices");this.set("serviceDisconnectStatus",[]),this.set("notes","");var o,s,r=t&&t.length,n=a&&a.length,i=e&&e.length;if(r&&n&&i){for(var c=0;c<t.length;c++){o=void 0;var l=t[c],d=e[c].split(":"),u=this.getFormatedDateForPopup(a[c]);"Success"===d[0]?(this.serviceDisconnectStatus.push({status:d[0],reason:d[0],packageName:d[2],scheduledDisconnectionDate:u}),o=kl.value(this.localeDisconnect+"schedulenote",{serviceName:l,disconnectDate:u})):"ApplicationFailure"===d[0]||"TransientFailure "===d[0]?(this.serviceDisconnectStatus.push({status:d[0],reason:d[1],packageName:d[2],scheduledDisconnectionDate:u}),o=kl.value(this.localeDisconnect+"disconnectFail",{serviceName:l,disconnectDate:u})):(s=kl.value(this.localeDisconnect+"disconnectFailErrorMessage1")+"<br><br>",s+=kl.value(this.localeDisconnect+"disconnectFailErrorMessage2")+"<br>",s+=kl.value(this.localeDisconnect+"disconnectFailErrorMessage3")+"<br>",s+=kl.value(this.localeDisconnect+"disconnectFailErrorMessage4")+"<br>",s+=kl.value(this.localeDisconnect+"disconnectFailErrorMessage5"),this.serviceDisconnectStatus.push({status:"ApplicationFailure",reason:s,packageName:l,scheduledDisconnectionDate:u})),o&&(""===this.notes?this.notes="<br>"+o:this.notes+="<br>"+o)}s&&(""!==s&&""===this.notes?this.notes=s:this.notes+="<br>"+s)}},publishCreateActivity:function(e,t,a,o){var s=this;Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(r){var n,i,c,l=Komodo.Models.CreateInteraction.create(),d=Komodo.Models.Case.create();if(d.set("InteracteeName",Komodo.Services.securityService.session.domainUserName),d.set("InteractionLocation",r.data.countryDescription),d.set("InteractionMedium","1"),d.set("CustomerUID",e),d.set("SubCategory","1"),d.set("Status","1"),!0===t){if(s.get("requestArrayReconnect").length>0&&s.get("reconnectionDate").length>0)for(var u=0;u<s.requestArrayReconnect.length;u++){n=void 0,c=!1;var h=s.requestArrayReconnect[u].PackageNames[0],m=Komodo.Models.CaseData.create();i=s.getFormatedDateForPopup(s.reconnectionDate[0]);var g=Komodo.canonicalFacadeFactory(m,["CaseDataValueUri","Value"]);if(!o&&s.serviceReconnectStatus&&s.serviceReconnectStatus[u].status)s.serviceReconnectStatus[u].status.toUpperCase()!=="ApplicationFailure".toUpperCase()&&s.serviceReconnectStatus[u].status.toUpperCase()!=="TransientFailure".toUpperCase()||(n=kl.value(s.localeDisconnect+"scheduleNoteForReconnectFail",{serviceName:h,reconnectDate:i,failureMessage:s.serviceReconnectStatus[u].reason}),c=!0);else if(o){var p=s.get("reconnectError");n=kl.value(s.localeDisconnect+"scheduleNoteForReconnectFail",{serviceName:h,reconnectDate:i,failureMessage:$.parseJSON(p).responseJSON.Message}),c=!0}if(c){d.set("Category","4"),d.set("Outcome","128"),d.set("Notes",n);var v=Komodo.Models.ListOfCaseData.create();g.set("CaseDataValueUri","Scheduled reconnection date");var f=new Date(i);g.set("Value",f.toLocaleDateString("sv-SE")),v.CaseData.push(m),d.set("ListOfCaseData",v);var b=Komodo.canonicalFacadeFactory(l,["Country","Case"]);b.set("Country",r.data.countryId),b.set("Case",d),s.publishRequestOnBus(l,"CreateInteraction","v1")}}}else if(s.get("packagesToDisconnect")&&s.get("disconnectionDateOfServices")&&s.packagesToDisconnect.length===s.disconnectionDateOfServices.length)for(var C=0;C<s.packagesToDisconnect.length;C++){n=void 0,c=!1;var S=s.packagesToDisconnect[C],D=s.getFormatedDateForPopup(s.disconnectionDateOfServices[C]),y=Komodo.Models.CaseData.create(),w=Komodo.canonicalFacadeFactory(y,["CaseDataValueUri","Value"]);if(!a&&s.serviceDisconnectStatus&&s.serviceDisconnectStatus[C].status)s.serviceDisconnectStatus[C].status.toUpperCase()!=="ApplicationFailure".toUpperCase()&&s.serviceDisconnectStatus[C].status.toUpperCase()!=="TransientFailure".toUpperCase()||(n=kl.value(s.localeDisconnect+"scheduleNoteForDisconnectFail",{serviceName:S,disconnectDate:D,failureMessage:s.serviceDisconnectStatus[C].reason}),c=!0);else if(a){var I=Komodo.Services.ManageViewingService.packagesForDisconnectError;I&&(n=kl.value(s.localeDisconnect+"scheduleNoteForDisconnectFail",{serviceName:S,disconnectDate:D,failureMessage:$.parseJSON(I).responseJSON.Message}),c=!0)}if(c){d.set("Category","1"),d.set("Outcome","132"),d.set("Notes",n);var x=Komodo.Models.ListOfCaseData.create();w.set("CaseDataValueUri","Disconnection date");var M=new Date(D);w.set("Value",M.toLocaleDateString("sv-SE")),x.CaseData.push(y),d.set("ListOfCaseData",x);var T=Komodo.canonicalFacadeFactory(l,["Country","Case"]);T.set("Country",r.data.countryId),T.set("Case",d),s.publishRequestOnBus(l,"CreateInteraction","v1")}}})},publishRequestOnBus:function(e,t,a){var o=Komodo.Services.ManageViewingService,s="Event Message for "+t+" ";o.publishEvent(this,e,t,a).done(function(){Komodo.log(s+" has been published successfully")}).fail(function(e){Komodo.log(s+" has been failed. Error: "+e)})},messageFailureMessageEventReceived:function(e){"CreateInteraction"!==e.ResponseMessage.Payload.OriginatedEventName?Komodo.Controls.MessageBoxController.show(kl.value(this.localeDisconnect+"technicalError"),kl.value(this.localeDisconnect+"technicalErrorText"),Komodo.Controls.MessageBoxOkButton,this,"id5446674","danger"):Komodo.Controls.MessageBoxController.show(kl.value(this.localeDisconnect+"technicalError"),kl.value(this.localeDisconnect+"technicalErrorInteraction"),Komodo.Controls.MessageBoxOkButton,this,"id5446674","danger")},reconnectPackages:function(e,t){var a=this,o=GetReason("ReconnectReasons","Scheduled_Reconnect"),s=GetReason("ReconnectReasons","Manually_End_Products_Suspension");a.set("requestArrayReconnect",[]);for(var r=0;r<e.length;r++)if(e[r].status.toUpperCase()==="Success".toUpperCase()&&"Active"===a.get("packagesToReconnectStatus")[r]){var n=[];n.push(e[r].packageName);var i=t[0],c=o;"FromHolidayHome"!==a.navigationFrom||Ember.isEmpty(e[r].scheduledDisconnectionDate)||0!==XDates.compare(a.getDateObjectFromString(e[r].scheduledDisconnectionDate).setHours(0,0,0,0),(new Date).setHours(0,0,0,0))||(c=s),a.requestArrayReconnect.push({DeviceSerialNumber:a.disconnectModel.get("smartcards"),PackageNames:n,ScheduledReconnectionDate:i,ReconnectionReason:c})}a.requestArrayReconnect.length>0&&(Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+this.get("customerId")),Komodo.Services.queryService.postJSON("/Device/ReconnectAllPackages",{data:a.requestArrayReconnect}).done(function(e){a.getServicesReconnectionStatus(e);var t,o=a.showSuccessAlertMessage(e);if(a.hideBusyIndicator(),t=o?Komodo.Controls.MessageBoxController.show(kl.value(a.localeDisconnect+"success"),a.reconnectNotes,Komodo.Controls.MessageBoxOkButton,a,"id5446676","success"):Komodo.Controls.MessageBoxController.show(kl.value(a.localeDisconnect+"disconnectTitle"),a.reconnectNotes,Komodo.Controls.MessageBoxOkButton,a,"id5446675","warning"),!a.get("isCustomerAvailable"))return void Komodo.Controls.MessageBoxController.show(kl.value(a.localeDisconnect+"error"),kl.value(a.localeDisconnect+"customerNotFound"));a.publishCreateActivity(a.get("customerId"),a.disconnectModel.isScheduleReconnection,!1,!1),t.response=function(e){if("ok"===e)if("FromHolidayHome"===a.navigationFrom){var t=Komodo.Services.customerProfileService.getCustomerPersonalDetail(),o=!Ember.isEmpty(t)&&"commercial"===t.customerClass.toLowerCase(),s="1"===t.customerClass;if(o||s)return void a.transitionToRoute("/commercialManageViewing");a.transitionToRoute("/manageViewing")}else Komodo.Services.eventAggregator.publish("redirectToManageViewing",null)}}).error(function(e){a.reconnectError=JSON.stringify(e),Komodo.log("Reconnect Packages ajax call failed. Error: "+a.reconnectError),a.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(a.localeDisconnect+"error"),$.parseJSON(a.reconnectError).responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,a,"id5446674","danger").response=function(e){"ok"===e&&(a.get("isCustomerAvailable")&&a.publishCreateActivity(a.get("customerId"),a.disconnectModel.isScheduleReconnection,!1,!0),Komodo.Services.eventAggregator.publish("redirectToManageViewing",null))}}))},suspendPackages:function(e){var t=this,a=Komodo.Services.uiService.getController("disconnect"),o=[];t.set("serviceDisconnectStatus",[]),t.set("suspensionErrorMessageForFail",""),e.forEach(function(e){o.push({DeviceSerialNumber:e.DeviceSerialNumber,PackageNames:e.PackageNames,StartDate:e.ScheduledDisconnectionDate})}),t.set("redirectFlag",!1),t.set("errorMessageForFail",""),t.set("errorMessage",[]),t.set("errorOnDate",[]);for(var s=o.length-1;s>=0;s--)""!==o[s].StartDate&&null!==o[s].StartDate&&void 0!==o[s].StartDate&&new Date(o[s].StartDate).toLocaleDateString()!==(new Date).toLocaleDateString()?(t.errorMessage.pushObject(o[s].PackageNames[0]+" not scheduled for suspension on "+o[s].StartDate),t.errorOnDate[s]=o[s].StartDate,t.set("redirectFlag",!0)):(t.errorMessage.pushObject(o[s].PackageNames[0]+" not suspended immediately"),t.errorOnDate[s]=void 0);var r=Komodo.Services.QueryService.create(),n=[];r.retrieveSelectedCountry();for(var i=o.length-1;i>=0;i--)n.pushObject(o[i]);n.length>0&&(t.showBlockingBusyIndicator(),Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+this.get("customerId")),Komodo.Services.queryService.postJSON("/Device/SuspendPackages",{data:n}).done(function(e){t.hideBusyIndicator();var o=!1,s=t.helperFunction.getCustomerIdToRetrieveData();if(void 0!==e){t.cancelPackagesController.start(),t.cancelPackagesController.get("cancelPackagesModel").set("isCancel",!1);for(var r=0;r<e.length;r++)void 0!==e[r].Status&&(0!==e[r].Status?void 0!==e[r].ResponseMessage&&(o=!0,t.errorMessageForFail+=t.errorMessage[r]+". Reason: "+e[r].ResponseMessage+"<br />",-1!==t.errorMessage[r].indexOf("immediately")?t.cancelPackagesController.publishCreateActivity(s,!1,t.errorMessage[r]+". Reason: "+e[r].ResponseMessage,t.errorOnDate[r]):t.cancelPackagesController.publishCreateActivity(t.helperFunction.getCustomerIdToRetrieveData(),!0,t.errorMessage[r]+". Reason: "+e[r].ResponseMessage,t.errorOnDate[r])):t.serviceDisconnectStatus.push({status:"Success",reason:void 0,packageName:n[r].PackageNames[0],scheduledDisconnectionDate:n[r].StartDate}))}if(o){var i=Komodo.Controls.MessageBoxController.show(kl.value(t.localeDisconnect+"disconnectTitle"),t.errorMessageForFail,Komodo.Controls.MessageBoxOkButton,t,"id5446673","warning"),c=t;i.response=function(e){if("ok"===e){var t=Komodo.Services.customerProfileService.getCustomerPersonalDetail(),a=!Ember.isEmpty(t)&&"commercial"===t.customerClass.toLowerCase(),o="1"===t.customerClass;if(a||o)return void c.transitionToRoute("/commercialManageViewing");c.transitionToRoute("/manageViewing")}}}else{var l;l=t.get("redirectFlag")?kl.value(t.localeDisconnect+"disconnectionScheduleSuccess"):kl.value(t.localeDisconnect+"disconnectionImmediateSuccess");Komodo.Controls.MessageBoxController.show(kl.value(t.localeDisconnect+"success"),l,Komodo.Controls.MessageBoxOkButton,t,"id5446676","success").response=function(e){if("ok"===e){if(!0===a.get("disconnectModel").isScheduleReconnection)a.reconnectPackages(a.get("serviceDisconnectStatus"),a.get("reconnectionDate"));else{var o=Komodo.Services.customerProfileService.getCustomerPersonalDetail(),s=!Ember.isEmpty(o)&&"commercial"===o.customerClass.toLowerCase(),r="1"===o.customerClass;if(s||r)return void t.transitionToRoute("/commercialManageViewing");t.transitionToRoute("/manageViewing")}}}}}).error(function(e){var a=JSON.stringify(e);Komodo.log("Suspension Packages ajax call failed. Error: "+a),t.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(t.localeDisconnect+"error"),$.parseJSON(a).responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,t,"id5446674","danger").response=function(e){"ok"===e&&(t.get("isCustomerAvailable")&&t.cancelPackagesController.publishCreateActivity(t.get("customerId"),!1,a,(new Date).toDateString()),t.transitionToRoute("/manageViewing"))}}))},getServicesReconnectionStatus:function(e){var t=this.get("requestArrayReconnect");this.set("serviceReconnectStatus",[]),this.set("reconnectNotes","");var a,o;if(t&&e&&e.length>0){for(var s=0;s<t.length;s++)if("Active"===this.get("packagesToReconnectStatus")[s]){a=void 0;var r=t[s].PackageNames[0],n=this.getFormatedDateForPopup(t[s].ScheduledReconnectionDate),i=e[s].split(":");"Success"===i[0]?(this.serviceReconnectStatus.push({status:i[0],reason:i[0],packageName:i[2],scheduledReconnectionDate:n}),a=kl.value(this.localeDisconnect+"scheduleNoteForReconnect",{serviceName:r,reconnectDate:n})):"ApplicationFailure"===i[0]||"TransientFailure "===i[0]?(this.serviceReconnectStatus.push({status:i[0],reason:i[1],packageName:i[2],scheduledReconnectionDate:n}),a=kl.value(this.localeDisconnect+"scheduleNoteForReconnectFail",{serviceName:r,reconnectDate:n,failureMessage:i[1]})):(o=kl.value(this.localeDisconnect+"disconnectFailErrorMessage1")+"<br><br>",o+=kl.value(this.localeDisconnect+"disconnectFailErrorMessage2")+"<br>",o+=kl.value(this.localeDisconnect+"disconnectFailErrorMessage3")+"<br>",o+=kl.value(this.localeDisconnect+"disconnectFailErrorMessage4")+"<br>",o+=kl.value(this.localeDisconnect+"disconnectFailErrorMessage5"),this.serviceReconnectStatus.push({status:"ApplicationFailure",reason:o,packageName:r,scheduledReconnectionDate:n})),a&&(""===this.reconnectNotes?this.reconnectNotes="<br>"+a:this.reconnectNotes+="<br>"+a)}o&&(""!==o&&""===this.reconnectNotes?this.reconnectNotes=o:this.reconnectNotes+="<br>"+o)}},showSuccessAlertMessage:function(e){if(this.verifyAndGetBlankValue(e))for(var t=0;t<e.length;t++){var a=e[t].split(":");if("Success"===a[0])return!0}return!1},showBlockingBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,6e3,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},setDatepickerValidations:function(){var e,t,a=this,o=a.get("disconnectModel.allHardwares"),s=new Date((new Date).toLocaleDateString("sv-SE"));if(o.length>0){for(var r=0;r<o.length;r++){var n=a.getDateObjectFromString(o[r].principalServiceChargedUntilDate);a.immediateDisconnectDPPAllowed&&(n=s),"FromHolidayHome"===a.navigationFrom&&(n=s,a.set("validators.dateDisconnectAllValidator.options.minDate",n)),a.get("IsDisconnectAnnualProductOnMonthlyIPDay")&&o[r].ProductChargePeriod.toString()===Komodo.ChargePeriodType.YEARLY.value&&(n=s,a.set("validators.dateDisconnectAllValidator.options.minDate",n));var i="principalCUDValidator"+(r+1);if(a.registerValidator(o[r],"principalCUD",{type:"date",isRequired:!1,displayName:kl.value(a.localeDisconnect+"disconnectionDate"),minDate:n,functions:Komodo.UI.Validators.DatePickerValidator,name:i}),o[r].set("principalCUDValidator",a.validators[i]),void 0!==o[r].listOfAddOnServices&&null!==o[r].listOfAddOnServices&&o[r].listOfAddOnServices.length>0)for(e=0;e<o[r].listOfAddOnServices.length;e++)t="addonCUDValidator"+(e+1),a.registerValidator(o[r].listOfAddOnServices[e],"serviceCUD",{type:"date",isRequired:!1,displayName:kl.value(a.localeDisconnect+"disconnectionDate"),minDate:n,functions:Komodo.UI.Validators.DatePickerValidator,name:t}),o[r].listOfAddOnServices[e].set("serviceCUDValidator",a.validators[t]);if(void 0!==o[r].listOfAccessServices&&null!==o[r].listOfAccessServices&&o[r].listOfAccessServices.length>0)for(e=0;e<o[r].listOfAccessServices.length;e++)t="accessCUDValidator"+(e+1),a.registerValidator(o[r].listOfAccessServices[e],"serviceCUD",{type:"date",isRequired:!1,displayName:kl.value(a.localeDisconnect+"disconnectionDate"),minDate:n,functions:Komodo.UI.Validators.DatePickerValidator,name:t}),o[r].listOfAccessServices[e].set("serviceCUDValidator",a.validators[t])}a.get("disconnectModel").set("allHardwares",o)}},validateInputForDisconnect:function(){var e,t=this,a=t.get("disconnectModel.allHardwares");if(a.length>0)for(var o=0;o<a.length;o++){if(a[o].principalCUDValidator&&a[o].principalCUDValidator.errors.length>0)return Komodo.Controls.MessageBoxController.show(kl.value(this.localeDisconnect+"disconnectTitle"),kl.value(this.localeDisconnect+"validationMessage")+"<br>"+a[o].principalCUDValidator.errors[0],null,this,"id5446675","warning"),!1;if(void 0!==a[o].listOfAddOnServices&&null!==a[o].listOfAddOnServices&&a[o].listOfAddOnServices.length>0)for(e=0;e<a[o].listOfAddOnServices.length;e++)if(a[o].listOfAddOnServices[e].serviceCUDValidator&&a[o].listOfAddOnServices[e].serviceCUDValidator.errors.length>0)return Komodo.Controls.MessageBoxController.show(kl.value(this.localeDisconnect+"disconnectTitle"),kl.value(this.localeDisconnect+"validationMessage")+"<br>"+a[o].listOfAddOnServices[e].serviceCUDValidator.errors[0],null,this,"id5446675","warning"),!1;if(void 0!==a[o].listOfAccessServices&&null!==a[o].listOfAccessServices&&a[o].listOfAccessServices.length>0)for(e=0;e<a[o].listOfAccessServices.length;e++)if(a[o].listOfAccessServices[e].serviceCUDValidator&&a[o].listOfAccessServices[e].serviceCUDValidator.errors.length>0)return Komodo.Controls.MessageBoxController.show(kl.value(this.localeDisconnect+"disconnectTitle"),kl.value(this.localeDisconnect+"validationMessage")+"<br>"+a[o].listOfAccessServices[e].serviceCUDValidator.errors[0],null,this,"id5446675","warning"),!1}return!0},initialStatusOfPackages:function(){var e=this,t=e.disconnectModel.get("allHardwares");if(t.length>0){t[0].set("stateOfToggleButtonOfPrincipleService",!0),t[0].set("isDisconnectAll",!1),t[0].set("isDPPProducts",!1),t[0].set("principalCUD",void 0),t[0].set("isScheduleSuspensionDisabled",e.cancelPackagesController.get("isScheduleSuspensionDisabled")),e.get("disconnectModel").set("dateDisconnectAll","");var a,o=t[0].listOfAddOnServices,s=t[0].listOfAccessServices;for(a=0;a<o.length;a++)o[a].set("stateOfToggleButtonOfService",!0),o[a].set("serviceCUD",void 0);for(a=0;a<s.length;a++)s[a].set("stateOfToggleButtonOfService",!0),s[a].set("serviceCUD",void 0);e.get("disconnectModel").set("isDisconnectAll",!1),e.get("disconnectModel").set("isDPPProducts",!1),e.get("disconnectModel").set("isScheduleReconnection",!1),e.get("disconnectModel").set("dateScheduleReconnection",void 0),e.get("disconnectModel").set("allHardwares",t)}},actions:{submitDisconnect:function(e){var t=this.get("disconnectModel")
;if(!1===t.isScheduleReconnection&&void 0!==t.dateScheduleReconnection&&null!==t.dateScheduleReconnection&&""!==t.dateScheduleReconnection)Komodo.Controls.MessageBoxController.show(kl.value(this.localeDisconnect+"disconnectTitle"),kl.value(this.localeDisconnect+"selectReconnection"),Komodo.Controls.MessageBoxOkButtons,this,"id5446674","danger");else{this.validateInputForDisconnect()&&this.canSubmitData(t,kl.value(this.localeDisconnect+"disconnectTitle"),{showInModal:!0})&&this.submitDisconnectServices(e.content)}}},isDPPProducts:function(){return!1},disconnectAllChanged:function(){var e=this;e.disconnectModel.set("isScheduleReconnection",!1),e.disconnectModel.set("dateScheduleReconnection",void 0);var t=e.disconnectModel.get("allHardwares");if(!0===e.disconnectModel.isDisconnectAll){if(t.length>0){"FromHolidayHome"===e.navigationFrom&&this.cancelPackagesController.get("isScheduleSuspensionDisabled")&&e.get("disconnectModel").set("dateDisconnectAll",new Date(Date.UTC((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()))),t[0].set("stateOfDatePickerPrincipleService",!0),t[0].set("isDisconnectAll",!0),e.isDPPProducts(t[0].principalServiceName)?(t[0].set("stateOfToggleButtonOfPrincipleService",!0),t[0].set("isDPPProducts",!0)):(t[0].set("stateOfToggleButtonOfPrincipleService",!1),t[0].set("principalCUD",void 0)),!Ember.isEmpty(e.DPPListProduct)&&e.DPPListProduct.contains(t[0].principalServiceUid)?e.disconnectModel.set("dateDisconnectAll",XDates.getformatedDateforDatepicker(new Date)):e.disconnectModel.set("dateDisconnectAll",void 0);var a,o=t[0].listOfAddOnServices,s=t[0].listOfAccessServices;for(a=0;a<o.length;a++)o[a].set("stateOfToggleButtonOfService",!1),o[a].set("stateOfDatePickerAddonAccessService",!0),o[a].set("serviceCUD",void 0);for(a=0;a<s.length;a++)s[a].set("stateOfToggleButtonOfService",!1),s[a].set("stateOfDatePickerAddonAccessService",!0),s[a].set("serviceCUD",void 0);e.get("disconnectModel").set("allHardwares",t)}}else if(t.length>0){e.isDPPProducts(t[0].principalServiceName)?(t[0].set("stateOfToggleButtonOfPrincipleService",!0),t[0].set("stateOfDatePickerPrincipleService",!0)):(t[0].set("stateOfToggleButtonOfPrincipleService",!0),t[0].set("stateOfDatePickerPrincipleService",!1)),t[0].set("isDisconnectAll",!1),t[0].set("isDPPProducts",!1),e.get("disconnectModel").set("dateDisconnectAll","");var r,n=t[0].listOfAddOnServices,i=t[0].listOfAccessServices;for(r=0;r<n.length;r++)n[r].set("stateOfToggleButtonOfService",!0),n[r].set("stateOfDatePickerAddonAccessService",!1);for(r=0;r<i.length;r++)i[r].set("stateOfToggleButtonOfService",!0),i[r].set("stateOfDatePickerAddonAccessService",!1);e.get("disconnectModel").set("allHardwares",t)}}.observes("disconnectModel.isDisconnectAll"),scheduleReconnectionChanged:function(){var e,t=this;if(!0===t.disconnectModel.isScheduleReconnection){if(t.registerValidator(t.get("disconnectModel"),"dateScheduleReconnection",{type:"date",isRequired:!0}),t.get("prinCUD")){var a=t.disconnectModel.get("allHardwares");if(a.length>0)var o=a[0].principalCUD;if(t.disconnectModel.get("dateDisconnectAll"))e=t.getDateObjectFromString(XDates.getformatedDateforDatepicker(t.disconnectModel.get("dateDisconnectAll"))),e.setDate(e.getDate()+1),t.set("validators.dateScheduleReconnectionValidator.options.minDate",e);else{if(o)e=t.getDateObjectFromString(XDates.getformatedDateforDatepicker(o));else if("FromHolidayHome"===t.navigationFrom){if(a.length>0){var s,r=a[0].listOfAddOnServices,n=a[0].listOfAccessServices,i=[];for(s=0;s<r.length;s++)void 0!==r[s].serviceCUD&&i.push(XDates.getformatedDateforDatepicker(r[s].serviceCUD));for(s=0;s<n.length;s++)void 0!==n[s].serviceCUD&&i.push(XDates.getformatedDateforDatepicker(n[s].serviceCUD));e=t.getDateObjectFromString(t.getHighestDate(i)),e.setHours(0,0,0,0)}}else e=t.getDateObjectFromString(t.get("prinCUD"));e.setDate(e.getDate()+1),t.set("validators.dateScheduleReconnectionValidator.options.minDate",e)}}}else t.disconnectModel.set("dateScheduleReconnection",void 0),t.registerValidator(t.get("disconnectModel"),"dateScheduleReconnection",{type:"date",isRequired:!1})}.observes("disconnectModel.isScheduleReconnection"),isDPPPrincipalAdonAccess:function(e,t){var a=!1;return t.contains(e.principalServiceUid)&&(this.set("isPRMDPP",!0),a=!0),e.listOfAccessServices.forEach(function(e){t.contains(e.serviceUid)&&(a=!0)}),e.listOfAddOnServices.forEach(function(e){t.contains(e.serviceUid)&&(a=!0)}),a},smartcardSelectionChanged:function(){var e=this,t=Ember.A();if(e.set("DPPListProduct",[]),e.set("isDisablePrincipleServiceDisConnectButton",!1),e.set("immediateDisconnectDPPAllowed",!1),e.set("disconnectAllEnable",!1),null!==e.disconnectModel.smartcards&&void 0!==e.disconnectModel.smartcards){e.initialStatusOfPackages(),e.disconnectModel.set("isDisconnectPackageVisible",!0),e.disconnectModel.set("checkDisconnectDPPAllowed",!0);var a=e.disconnectModel.get("hardwareAndServices").filter(function(t){return t.linkedSmartCard.toString().toLowerCase()===e.disconnectModel.smartcards.toString().toLowerCase()});if(Komodo.Services.queryService.getJSON("/CreditApplication/GetAllDPPProducts",{async:!1}).done(function(e){if(null!=e)for(var a=0;a<e.length;a++)t.push(e[a].Id.toString())}).error(function(e){var t=JSON.stringify(e);Komodo.log("retrievePrintDocumentInfo ajax call failed. Error: "+t)}),e.set("DPPListProduct",t),Ember.isEmpty(a)||a.forEach(function(a){!Ember.isEmpty(t)&&e.isDPPPrincipalAdonAccess(a,t)&&(Komodo.Services.securityService.permissions.contains("clarity://disconnect/AllowDPPDisconnection")?(e.set("immediateDisconnectDPPAllowed",!0),e.disconnectModel.set("checkDisconnectDPPAllowed",!1),e.set("disconnectAllEnable",!1)):(e.set("immediateDisconnectDPPAllowed",!1),e.disconnectModel.set("checkDisconnectDPPAllowed",!0),e.set("disconnectAllEnable",!0),e.set("isDisablePrincipleServiceDisConnectButton",!0),e.set("stateOfDatePickerPrincipleService",!0),a.listOfAddOnServices.forEach(function(e){e.set("stateOfDatePickerAddonAccessService",!1),e.set("disabletoggleAddonService",!1)}),a.listOfAccessServices.forEach(function(e){e.set("stateOfDatePickerAddonAccessService",!1),e.set("stateOfToggleButtonOfService",!1)})))}),e.disconnectModel.get("hardwareAndServices").length>0&&void 0!==a&&a.length>0){e.getScheduleDisconnectionDate(a[0].principalServiceChargedUntilDate);var o=e.getDateforholidayhomesViewingDays(e.getDateFromJavascriptDate(new Date)),s=Komodo.Services.uiService.getController("holidayHomes");if(null!==a[0].principalServiceChargedUntilDate&&""!==a[0].principalServiceChargedUntilDate&&void 0!==a[0].principalServiceChargedUntilDate){var r=e.getDateforholidayhomesViewingDays(a[0].principalServiceChargedUntilDate);r.setDate(r.getDate()-1);var n=r.getTime()-o.getTime(),i=Math.round(Math.abs(n/864e5));s.holidayHomesModel.set("viewDays",i)}else s.holidayHomesModel.set("viewDays","-");e.get("disconnectModel").set("allHardwares",a),e.setDatepickerValidations(),e.initialStatusOfPackages(),e.isDPPProducts(a[0].principalServiceName)&&e.set("isDisablePrincipleServiceDisConnectButton",!0)}else e.disconnectModel.set("isDisconnectPackageVisible",!1),Komodo.Controls.MessageBoxController.show(kl.value(e.localeDisconnect+"disconnectTitle"),kl.value(e.localeDisconnect+"smartcardValidation"),Komodo.Controls.MessageBoxOkButton,e,"id5446673","")}else e.disconnectModel.set("isDisconnectPackageVisible",!1);for(var c=0;c<e.disconnectModel.annualSmartcards.length;c++)null!==e.disconnectModel.smartcards&&void 0!==e.disconnectModel.smartcards&&e.disconnectModel.smartcards===e.disconnectModel.annualSmartcards[c]&&(Komodo.Controls.MessageBoxController.show(kl.value(e.localeDisconnect+"disconnectTitle"),kl.value(e.localeDisconnect+"noAnnualCustomer"),null,e,"id123456","warning"),e.disconnectModel.set("smartcards",void 0),s=Komodo.Services.uiService.getController("holidayHomes"),s.holidayHomesModel.set("viewDays","-"))}.observes("disconnectModel.smartcards"),toggleButtonChanged:function(){var e,t=!0,a=!0,o=!0;if(this.disconnectModel.get("isScheduleReconnection")&&this.get("disconnectModel.allHardwares").length>0){for(var s=0;s<this.get("disconnectModel.allHardwares").length;s++){var r=this.disconnectModel.allHardwares[s];if(!1===r.stateOfToggleButtonOfPrincipleService){t=!1;break}if(r.listOfAddOnServices.length>0)for(e=0;s<r.listOfAddOnServices.length;s++)if(!1===r.listOfAddOnServices[e].stateOfToggleButtonOfService){a=!1;break}if(!0===r.stateOfToggleButtonOfPrincipleService&&r.listOfAccessServices.length>0)for(e=0;e<r.listOfAccessServices.length;e++)if(!1===r.listOfAccessServices[e].stateOfToggleButtonOfService){o=!1;break}}t&&a&&o&&(this.disconnectModel.set("isScheduleReconnection",!1),this.disconnectModel.set("dateScheduleReconnection",void 0))}}.observes("disconnectModel.allHardwares.@each.isReqControlEnabledOnDisconnect"),getQueryService:function(){return this.get("_queryService")},stop:function(){this.set("smartcardsList",[]),this.set("hardwareAndServicesArray",[]),this.set("notes",""),this.set("deviceAndServicesToDisconnect",void 0),this.set("navigationFrom",void 0),this.set("ReasonForDisconnection",""),this.set("ReasonForReconnection",""),this.set("DPPListProduct",[]),this._super()},immediateDisconnectDPPAllowed:!1,isPRMDPP:!1}),Komodo.Application.SwapMaterialAvailabilityController=Komodo.UI.Controller.extend({_locale:"",_SAGrid:!1,_selectedRadioGridSA:null,_columnDeviceDataGrid:[],_columnQuoteDataGrid:[],_columnSwapMaterialAvailabilityDataGrid:[],_dropDownCategoryList:[],_dropDownReasonList:[],_dropDownCommunicationLanguageList:[],_dropDownCommunicationList:[],_cacheSwapDetail:[],_cacheQuotationStatus:[],_cacheHardwareModelDesc:[],_cacheHardwareStatus:[],_cacheHardwareLocation:[],_xtraviews:{},_CheckXtraview:!1,_selectedCountry:void 0,init:function(){try{this._super(),Komodo.log("Constructing Initiate Swap controller."),this.set("processVersion","v1.1"),this.set("processName","Initiate Swap (Material Availability)"),this.requiresDependency("_stockService",{singleton:Komodo.Services.stockService}),this.requiresDependency("_featureToggleService",{singleton:Komodo.Services.featureToggleService}),this.requiresDependency("_uiService",{singleton:Komodo.Services.uiService}),this.requiresDependency("_queryService",{singleton:Komodo.Services.queryService}),this.requiresDependency("_securityService",{singleton:Komodo.Services.securityService}),this.requiresDependency("_busyService",{singleton:Komodo.Services.busyService})}catch(e){this.getStockService().handleException("init - Initiate Swap",e,!0,!0)}},start:function(){this._super(),this.loadData()},stop:function(){this._super()},loadData:function(){try{var e=this;e._locale="locale.manageStock:swapMaterialAvailability.",e.registerModel("dataModel",Komodo.Models.SwapMaterialAvailabilityModel),e.getStockService().setCustomerID(e,e.get("dataModel"),"customerID","/manageViewing",null),e.set("_selectedCountry",this.getQueryService().getSelectedCountryId()),e.setupGrid(),e.registerValidations(),e._selectedRadioGridSA=null,e.clearCategory(),e.dataModel.set("SwapMaterialAvailabilityData",[]),e.getStockService().fillObjectFromCachedFileService(e,"_cacheSwapDetail","SwapCategoryReasonRelationship",["SwapCategories","SwapCategory"]),e.getStockService().fillObjectFromCachedFileServiceArray(e,"_cacheQuotationStatus","QuotationStatus"),e.getStockService().fillObjectFromCachedFileServiceArray(e,"_cacheHardwareModelDesc","HardwareModel"),e.getStockService().fillObjectFromCachedFileServiceArray(e,"_cacheHardwareStatus","HardwareStatus"),e.getStockService().fillObjectFromCachedFileServiceArray(e,"_cacheHardwareLocation","HardwareLocation"),e.getStockService().setCountryISO(e.get("dataModel"),"countryISO",function(){e.retrieveHardware()}),Komodo.Services.featureToggleService.isEnabled("PerformSwap","SAGrid").done(function(t){Ember.run(function(){e.set("_SAGrid",t)})}),Komodo.Services.featureToggleService.isEnabled("PerformSwap","CheckXtraview").done(function(t){Ember.run(function(){e.set("_CheckXtraview",t)})})}catch(e){this.getStockService().handleException("loadData",e,!0,!0)}},registerValidations:function(){var e=this;this.registerValidator(this.get("dataModel"),"commercialSerialNumber",{isRequired:!0,displayName:kl.value(e._locale+"fillInDeviceSerial"),minLength:1,maxLength:21,groups:"commercial"}),this.registerValidator(this.get("dataModel"),"chargeOverrideUsername",{isRequired:!0,groups:"chargeOverride"}),this.registerValidator(this.get("dataModel"),"chargeOverridePassword",{isRequired:!0,groups:"chargeOverride"}),this.registerValidator(this.get("dataModel"),"chargeOverrideComment",{isRequired:!0,displayName:kl.value(e._locale+"comment"),maxLength:100,groups:"chargeOverride"})},selectedRow:function(){var e=this;try{e.dataModel.set("showGenerateSwapQuote",!0),$.each(e.get("dataModel.deviceData"),function(t,a){if(null!=a.checkItem&&1==a.checkItem)return e.dataModel.set("selectedDeviceGridItem",a),"embedded"==a.deviceType.toLowerCase()?(e.dataModel.set("enablePairedDevice",!0),e.clearSelectedData()):"smartcard"==a.deviceType.toLowerCase()?(e.dataModel.set("enablePairedDevice",!0),e.clearSelectedData()):(e.clearSelectedData(),e.dataModel.set("enablePairedDevice",!0),e.dataModel.set("boolPairedDevice",!0)),e.setCategory(),!1})}catch(e){this.getStockService().handleException("selectedRow",e,!0,!0)}}.observes("dataModel.deviceData.@each.checkItem"),clearSelectedData:function(){try{var e=this;void 0!==e.dataModel.get("boolPairedDevice")&&(e.dataModel.set("PairedDevice",kl.value(e._locale+"noLinkedDevice")),e.dataModel.set("DecoderSr",void 0),e.dataModel.set("SmartCardSr",void 0),e.dataModel.set("boolPairedDevice",!1))}catch(e){this.getStockService().handleException("clearSelectedData",e,!0,!0)}},clearCategory:function(){var e=this;e.dataModel.set("Category",""),e.dataModel.set("Reason",""),e.get("_dropDownCategoryList").clear(),e.get("_dropDownReasonList").clear()},setCategory:function(){try{var e=this;e.dataModel.set("Category",""),e.dataModel.set("Reason",""),e.get("_dropDownCategoryList").clear(),e.get("_dropDownReasonList").clear(),$.each(e.get("_cacheSwapDetail"),function(t,a){if(void 0!=e.dataModel.selectedDeviceGridItem&&null!=a.CanonicalKey&&51==a.CanonicalKey)return $.each($.makeArray(a.SwapReasons.SwapReason),function(t,a){"448"!=a.CanonicalKey&&e.get("_dropDownCategoryList").addObject(a)}),!1})}catch(e){this.getStockService().handleException("setCategory",e,!0,!0)}},_closeChargeOverridePopup:function(){var e=this.get("_supervisorOverrideModalPaneController");e&&e.close()},actions:{checkAvailability:function(){try{var e=this;if(e.get("dataModel").checkAvailabilityDefaults(),void 0==this.dataModel.selectedDeviceGridItem)Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"performSwap"),"<strong>"+kl.value(e._locale+"pleaseSelectADevice2")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning");else if(void 0==this.dataModel.Category||""==this.dataModel.Category)Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"performSwap"),"<strong>"+kl.value(e._locale+"categoryIsRequired")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning");else if(void 0==this.dataModel.Reason||""==this.dataModel.Reason)Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"performSwap"),"<strong>"+kl.value(e._locale+"reasonIsRequired")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning");else if(this.dataModel.selectedDeviceGridItem.deviceSerialNo in _xtraviews&&e.get("_CheckXtraview")&&null===e.dataModel.get("commercialSerialNumber"))Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"performSwap"),"<strong>"+kl.value(e._locale+"xtraviewNetwork")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning");else{e.dataModel.hardwareLocation="...",e.dataModel.SwapMaterialAvailabilityData.clear();var t=Komodo.Services.securityService.get("domainUserName").substring(3),a=this.dataModel.selectedDeviceGridItem.deviceSerialNo,o="B";switch(this.dataModel.selectedDeviceGridItem.deviceType.toLowerCase()){case"smartcard":o="D";break;case"decoder":o=!1===e.dataModel.get("boolPairedDevice")?"B":"C";break;case"embedded":o="C",a=this.dataModel.selectedDeviceGridItem.LinkedSC}var s=this.dataModel.Category,r=this.dataModel.Reason,n=this.getStockService().getKeyFromList(this,"_cacheHardwareStatus","value","key",this.dataModel.selectedDeviceGridItem.deviceStatus);Komodo.Services.busyService.start(!0,e.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,6e4,"blocking",this),e.retrieveSwapMaterialAvailability(t,a,o,s,r,n,function(t,a){if(Komodo.Services.busyService.stop(e.get("processId"),"blocking"),null!=a)Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"swapAvailability"),kl.value(e._locale+"errorMessage")+"'"+a+"'</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger");else if(null!=t&&null!=t.OriginalMaterial){if(null!=t.SwapAlternatives){var o=0;e.dataModel.hardwareLocation=e.getStockService().getKeyFromList(e,"_cacheHardwareLocation","key","value",t.Plant),null==e.dataModel.hardwareLocation&&(e.dataModel.hardwareLocation=kl.value(e._locale+"noSAPLocation")+"'"+t.PlantDescription+"' ("+t.Plant+")."),null!=t.BusinessUnit?e.dataModel.businessUnit=t.BusinessUnit:e.dataModel.businessUnit="0",$.each(t.SwapAlternatives,function(t,a){var s=a.MaterialDescription,r=99999;null!=a.AvailableQuantity&&$.each(a.AvailableQuantity,function(e,t){r=Math.min(r,t.Quantity)});var n=null!=a.Price&&null!=a.Price.Currency?a.Price.Currency+" ":"",i=[];i.push({value:o.toString()}),e.dataModel.get("SwapMaterialAvailabilityData").pushObject(Ember.Object.create({materialDescription:s,quantityService:r,displayPrice:null!=a.Price&&null!=a.Price.GrossValue?n+a.Price.GrossValue.toFixed(2):kl.value(e._locale+"noSAPPrice"),price:null!=a.Price&&null!=a.Price.GrossValue?a.Price.GrossValue.toFixed(2):kl.value(e._locale+"noSAPPrice"),priceGroup:null!=a.Price?a.Price:kl.value(e._locale+"noSAPPrice"),material:a.Material,radioType:i,hasPrice:null==a.Price||null==a.Price.GrossValue||0==r||null==a.AvailableQuantity})),o++})}e._selectedSwapMaterialAvailability=null,e.dataModel.SelectedSwapMaterialAvailability=null,e.dataModel.set("hasSelectedSwapMaterial",!0),e.getStockService().getUIService().showModalPopup("Swap Material Available",void 0,{view:Komodo.Application.SwapMaterialAvailabilitySingleView,canUserClose:!0,context:e,shouldStartAndStopController:!1})}})}}catch(e){this.getStockService().handleException("checkAvailability",e,!0,!0)}},selectSwapMaterialAvailability:function(){try{var e=this;Komodo.Services.busyService.start(!0,e.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,this._messageTimeout,"blocking",this),Komodo.Services.busyService.stop(e.get("processId"),"blocking"),e.generateProvisionalQuote()}catch(e){this.getStockService().handleException("selectSwapMaterialAvailability",e,!0,!0)}},makePaymentSwap:function(){try{var e=this,t={QuoteNumber:e.dataModel.get("QuoteNumber"),Country:e.dataModel.get("countryISO"),FirstName:e.dataModel.get("firstName"),LastName:e.dataModel.get("lastName"),Email:e.dataModel.get("email"),phone:e.dataModel.get("phone")};Komodo.Services.eventAggregator.publish("PublishPaymentForQuotation",t)}catch(e){this.getStockService().handleException("makePayment",e,!0,!0)}},sendQuotationSwap:function(){try{var e=this;void 0==e.dataModel.get("communicationType")||""==e.dataModel.get("communicationType")?Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"sendQuotation"),kl.value(e._locale+"communicationType"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"):void 0==e.dataModel.get("communicationLanguage")||""==e.dataModel.get("communicationLanguage")?Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"sendQuotation"),kl.value(e._locale+"communicationLanguage2"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"):e.publishSendQuotationEvent()}catch(e){this.getStockService().handleException("sendQuotation",e,!0,!0)}},searchDeviceSingle:function(){try{var e=this;if(!e.canSubmitData(e.get("dataModel"),kl.value(e._locale+"serialNumber"),{group:"commercial",showInModal:!1}))return;e.retrieveHardware()}catch(e){this.getStockService().handleException("searchDeviceSingle",e,!0,!0)}},backDeviceSingle:function(){try{var e=this;Komodo.Services.busyService.start(!0,e.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,this._messageTimeout,"blocking",this),Komodo.Services.busyService.stop(e.get("processId"),"blocking"),this.transitionToRoute("/manageViewing")}catch(e){this.getStockService().handleException("backDeviceSingle",e,!0,!0)}},generateSwapQuote:function(){try{var e=this;e.dataModel.set("showQuoteDetails",!1),e.dataModel.set("showMakePayment",!1),e.publishGenerateSwapOrder()}catch(e){this.getStockService().handleException("generateSwapQuote",e,!0,!0)}},supervisorOverride:function(){try{var e=this;this.set("_supervisorOverrideModalPaneController",this.getUIService().showModalPopup(kl.value(e._locale+"chargeOverrideHeading"),void 0,{view:Komodo.Application.SwapMaterialAvailabilityOverrideView,canUserClose:!0,context:this,shouldStartAndStopController:!1}))}catch(e){this.getStockService().handleException("supervisorOverride",e,!0,!0)}},approveChargeOverride:function(){var e=!1,t=this;if(t.canSubmitData(t.get("dataModel"),kl.value(t._locale+"chargeOverrideValidationFailure"),{group:"chargeOverride",showInModal:!1})){var a=function(e){!1===e?(t.getBusyService().stop(t.get("processId"),"nonblocking"),t.set("dataModel.chargeOverrideAuthenticating",!1)):(t.getBusyService().start(!1,t.get("processId"),Komodo.Services.busyIndicatorTypes.Login,void 0,"nonblocking",t),t.set("dataModel.chargeOverrideAuthenticating",!0))};a(!0),t.getSecurityService().authenticate(t.getQueryService().getSelectedCountryId(),t.get("dataModel.chargeOverrideUsername"),t.get("dataModel.chargeOverridePassword")).done(function(a){t._closeChargeOverridePopup(),t.set("dataModel.chargeOverridePassword",null),a.permissions.forEach(function(t){e||(e=t===Komodo.Permissions.SwapMaterialAvailabilityCanOverrideCharge)}),e?(t.set("dataModel.chargeOverrideApproved",!0),t._removeCharges()):alert(kl.value(t._locale+"chargeOverrideNotPermitted"))}).fail(function(e){alert(kl.value(t._locale+"authenticationErrorMessage",{error:e}))}).always(function(){a(!1)})}},cancelChargeOverride:function(){this._closeChargeOverridePopup()}},retrieveSwapMaterialAvailability:function(e,t,a,o,s,r,n){var i=this;void 0!=n&&(Komodo.Services.queryService.refreshUserData(),Komodo.Services.queryService.getJSON("SwapMaterialAvailability?userName="+e+"&serialNumber="+t+"&swapType="+a+"&problemCodeGroup="+o+"&problemCode="+s+"&canonicalStatus="+r).done(function(e){n(e,null)}).error(function(e){n(null,i.getStockService().handleQueryServiceException(e))}))},sendQuotationChanged:function(){try{var e=this,t=null!=e.dataModel.get("communicationLanguage")&&null!=e.dataModel.get("communicationType");e.dataModel.set("isSendQuotationVisible",t),e.dataModel.set("BoolAcceptQuoteButton",!t)}catch(e){this.getStockService().handleException("sendQuotationChanged",e,!0,!0)}}.observes("dataModel.communicationType","dataModel.communicationLanguage"),getPairedDevice:function(){var e=this;if(this.dataModel.set("showGenerateSwapQuote",!0),void 0!==this.dataModel.get("boolPairedDevice"))if(void 0!==this.dataModel.get("boolPairedDevice")&&!1!==this.dataModel.get("boolPairedDevice"))if(void 0!==this.dataModel.selectedDeviceGridItem)if("decoder"==this.dataModel.selectedDeviceGridItem.get("deviceType").toLowerCase()||"embedded"==this.dataModel.selectedDeviceGridItem.get("deviceType").toLowerCase())if(this.dataModel.set("DecoderSr",this.dataModel.selectedDeviceGridItem.get("deviceSerialNo")),this.dataModel.set("DecoderProduct",this.dataModel.selectedDeviceGridItem.get("FromProductName")),this.dataModel.set("DecoderModel",this.dataModel.selectedDeviceGridItem.get("FromModel")),this.dataModel.set("DecoderWarranty",this.dataModel.selectedDeviceGridItem.get("DeviceWarranty")),void 0!==this.dataModel.selectedDeviceGridItem.get("LinkedSC")&&""!=this.dataModel.selectedDeviceGridItem.get("LinkedSC")){this.dataModel.set("SmartCardSr",this.dataModel.selectedDeviceGridItem.get("LinkedSC")),this.dataModel.set("SmartCardModel",this.dataModel.selectedDeviceGridItem.get("LinkedSCModel")),this.dataModel.set("PairedDevice",this.dataModel.selectedDeviceGridItem.get("LinkedSC"));for(var t=0;t<this.dataModel.deviceData.length;t++)if(this.dataModel.selectedDeviceGridItem.get("LinkedSC")==this.dataModel.deviceData[t].deviceSerialNo)return void this.dataModel.set("SmartCardProduct",this.dataModel.deviceData[t].FromProductName)}else this.dataModel.set("PairedDevice",kl.value(e._locale+"noLinkedDevice")),this.dataModel.set("SmartCardSr",kl.value(e._locale+"noLinkedDevice")),this.dataModel.set("SmartCardModel",""),this.dataModel.set("SmartCardProduct","");else{this.dataModel.set("SmartCardSr",this.dataModel.selectedDeviceGridItem.get("deviceSerialNo")),this.dataModel.set("SmartCardModel",this.dataModel.selectedDeviceGridItem.get("FromModel")),this.dataModel.set("SmartCardProduct",this.dataModel.selectedDeviceGridItem.get("FromProductName"));for(var t=0;t<this.dataModel.deviceData.length;t++)if(this.dataModel.selectedDeviceGridItem.get("deviceSerialNo")==this.dataModel.deviceData[t].LinkedSC)return this.dataModel.set("PairedDevice",this.dataModel.deviceData[t].deviceSerialNo),this.dataModel.set("DecoderSr",this.dataModel.deviceData[t].deviceSerialNo),this.dataModel.set("DecoderModel",this.dataModel.deviceData[t].FromModel),this.dataModel.set("DecoderProduct",this.dataModel.deviceData[t].FromProductName),void this.dataModel.set("DecoderWarranty",this.dataModel.deviceData[t].DeviceWarranty);void 0!==this.dataModel.get("DecoderSr")&&""!=this.dataModel.set("DecoderSr")||(this.dataModel.set("PairedDevice",kl.value(e._locale+"noLinkedDevice")),this.dataModel.set("DecoderSr",this.dataModel.get("SmartCardSr")),this.dataModel.set("DecoderProduct",this.dataModel.get("SmartCardProduct")),this.dataModel.set("DecoderModel",this.dataModel.get("SmartCardSr")),this.dataModel.set("DecoderWarranty",kl.value(e._locale+"inActive")))}else this.dataModel.set("boolPairedDevice",!1),Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"branchSwap"),"<strong>"+kl.value(e._locale+"pleaseSelectADevice2")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning");else void 0!==this.dataModel.selectedDeviceGridItem&&(this.dataModel.set("DecoderSr",""),this.dataModel.set("DecoderProduct",""),this.dataModel.set("DecoderModel",""),this.dataModel.set("DecoderWarranty",kl.value(e._locale+"inActive")),this.dataModel.set("SmartCardSr",""),this.dataModel.set("SmartCardModel",""),this.dataModel.set("SmartCardProduct",""),this.dataModel.set("PairedDevice",""))}.observes("dataModel.boolPairedDevice"),getSwapMaterialAvailability:function(){var e=this;null==e._selectedSwapMaterialAvailability?(e.dataModel.set("hasSelectedSwapMaterial",!0),e.dataModel.set("SelectedSwapMaterialAvailability",null)):(e.dataModel.set("hasSelectedSwapMaterial",!1),e.dataModel.set("SelectedSwapMaterialAvailability",e.dataModel.get("SwapMaterialAvailabilityData")[e._selectedSwapMaterialAvailability]))}.observes("_selectedSwapMaterialAvailability"),getHardwareModelDesc:function(e){try{var t=this,a=null;return $.each(t._cacheHardwareModelDesc,function(t,o){if(o.key==e)return a=o.value,!1}),Komodo.log("Data not found in function [getHardwareModelDesc] for hardwareModelID: "+e),a}catch(e){this.handleException("getHardwareModelDesc",e,!0,!0)}},categoryChanged:function(){try{var e=this;this.dataModel.set("Reason",""),this.set("_dropDownReasonList",[]),e.dataModel.set("showGenerateSwapQuote",!0),$.each(e.get("_cacheSwapDetail"),function(t,a){if(void 0!=e.dataModel.selectedDeviceGridItem&&null!=a.CanonicalKey&&52==a.CanonicalKey)return $.each($.makeArray(a.SwapReasons.SwapReason),function(t,a){e.get("_dropDownReasonList").addObject(a)}),!1})}catch(e){this.getStockService().handleException("categoryChanged",e,!0,!0)}}.observes("dataModel.Category"),reasonChanged:function(){try{this.dataModel.set("showGenerateSwapQuote",!0)}catch(e){this.getStockService().handleException("reasonChanged",e,!0,!0)}}.observes("dataModel.Reason"),rowSAChanged:function(){try{var e=this;if(e.dataModel.set("showGenerateSwapQuote",!0),e.get("_SAGrid")&&null!=_selectedRadioGridSA){var t=e._selectedRadioGridSA.split("_");switch(e.clearSelectedData(),t[0]){case"smartcard":e.dataModel.get("deviceData").forEach(function(a){"smartcard"==a.deviceType.toLowerCase()&&e.dataModel.get("deviceData")[t[1]].LinkedSC==a.deviceSerialNo&&(e.dataModel.set("selectedDeviceGridItem",a),e.dataModel.set("selectedDeviceGridItemType","smartcard"))}),e.setCategory(),e.set("dataModel.boolPairedDevice",!1);break;case"device":e.dataModel.get("deviceData").forEach(function(a){"decoder"!=a.deviceType.toLowerCase()&&"embedded"!=a.deviceType.toLowerCase()||e.dataModel.get("deviceData")[t[1]].deviceSerialNo!=a.deviceSerialNo||(e.dataModel.set("selectedDeviceGridItem",a),e.dataModel.set("selectedDeviceGridItemType","decoder"))}),e.setCategory(),e.set("dataModel.boolPairedDevice",!1);break;case"paired":e.dataModel.get("deviceData").forEach(function(a){"decoder"==a.deviceType.toLowerCase()&&e.dataModel.get("deviceData")[t[1]].deviceSerialNo==a.deviceSerialNo&&(e.dataModel.set("selectedDeviceGridItem",a),e.dataModel.set("selectedDeviceGridItemType","paired"))}),e.setCategory(),e.set("dataModel.boolPairedDevice",!0)}}}catch(e){this.getStockService().handleException("categoryChanged",e,!0,!0)}}.observes("_selectedRadioGridSA"),_removeCharges:function(){this.set("dataModel.SelectedSwapMaterialAvailability.priceGroup.NetValue",0),this.set("dataModel.SelectedSwapMaterialAvailability.priceGroup.GrossValue",0),this.get("dataModel.SelectedSwapMaterialAvailability.priceGroup.TaxDetail").forEach(function(e){e.Percent=0,e.Value=0}),this.get("dataModel.quoteData").forEach(function(e){e.set("deviceCost",0),e.set("totalTax",0),e.set("totalPrice",0)})},generateProvisionalQuote:function(){try{var e=this;if(e.dataModel.SelectedSwapMaterialAvailability){var t=$.makeArray(e.dataModel.SelectedSwapMaterialAvailability);if(t.length>0){e.dataModel.set("showGenerateSwapQuote",!1),e.dataModel.quoteData.clear();var a=0,o=0,s=0,r=0;t.forEach(function(t){if(void 0!=t){var n=Komodo.Models.HardwaresDataGridMVModel.create();if(n.set("ToProductName",t.materialDescription),n.set("productQuantity",1),a++,n.set("deviceCost",t.priceGroup.NetValue.toFixed(2)),n.set("subscriptionCost",void 0),o=parseFloat(o)+parseFloat(t.priceGroup.NetValue),t.priceGroup.TaxDetail){var i=$.makeArray(t.priceGroup.TaxDetail),c=0;i.forEach(function(e){c=parseFloat(c)+parseFloat(e.Value)}),n.set("totalTax",parseFloat(c).toFixed(2)),s=parseFloat(s)+parseFloat(c)}void 0!=t.priceGroup&&(n.set("totalPrice",parseFloat(t.priceGroup.GrossValue).toFixed(2)),r+=parseFloat(t.priceGroup.GrossValue)),e.dataModel.get("quoteData").pushObject(n)}}),("paired"==e.dataModel.get("selectedDeviceGridItemType")||!e.get("_SAGrid")&&"DECODER"==e.dataModel.get("selectedDeviceGridItem").deviceType.toUpperCase()&&e.dataModel.get("boolPairedDevice"))&&e.dataModel.get("quoteData").pushObject(Komodo.Models.HardwaresDataGridMVModel.create({ToProductName:e.dataModel.selectedDeviceGridItem.LinkedSCModel,productQuantity:1,subscriptionCost:void 0,deviceCost:"0.00",totalTax:"0.00",totalPrice:"0.00"})),0==r&&e.dataModel.set("BoolAcceptQuoteButton",!0),e.dataModel.get("quoteData").pushObject(Komodo.Models.HardwaresDataGridMVModel.create({ToProductName:"This Quote is in "+e.dataModel.SelectedSwapMaterialAvailability.priceGroup.Currency,productQuantity:a,subscriptionCost:"0.00",deviceCost:parseFloat(o).toFixed(2),totalTax:parseFloat(s).toFixed(2),totalPrice:e.dataModel.SelectedSwapMaterialAvailability.price})),
e.set("dataModel.hasCharge",0!==parseFloat(e.get("dataModel.SelectedSwapMaterialAvailability.price")))}else Komodo.Controls.MessageBoxController.show("Swap","<strong>"+kl.value(e._locale+"noQuotationsFound")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger");this.set("_dropDownCommunicationList",[]),this.set("_dropDownCommunicationLanguageList",[]),e.get("_dropDownCommunicationLanguageList").addObject({Key:"1",Value:"English"}),e.get("_dropDownCommunicationLanguageList").addObject({Key:"2",Value:"Afrikaans"}),e.get("_dropDownCommunicationLanguageList").addObject({Key:"3",Value:"French"}),e.get("_dropDownCommunicationLanguageList").addObject({Key:"4",Value:"Portuguese"}),e.get("_dropDownCommunicationList").addObject({Key:"Email",Value:"Email"}),e.get("_dropDownCommunicationList").addObject({Key:"SMS",Value:"SMS"}),e.dataModel.set("boolAcceptQuoteView",!0)}else Komodo.Controls.MessageBoxController.show("Swap","<strong>"+kl.value(e._locale+"noQuotationsFound")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}catch(e){this.getStockService().handleException("generateprovisionalQuote",e,!0,!0)}},getStockService:function(){return this.get("_stockService")},getFeatureToggleService:function(){return this.get("_featureToggleService")},getUIService:function(){return this.get("_uiService")},getQueryService:function(){return this.get("_queryService")},getSecurityService:function(){return this.get("_securityService")},getBusyService:function(){return this.get("_busyService")},retrieveHardware:function(){try{var e=this;_xtraviews=[],this.getStockService().loadSingleDevice()&&null==e.dataModel.get("commercialSerialNumber")?this.getStockService().getUIService().showModalPopup(kl.value(e._locale+"commercialCustomer"),void 0,{view:Komodo.Application.RetrieveHardwareSingleView,canUserClose:!1,context:this,shouldStartAndStopController:!1}):this.getStockService().retrieveHardware(this,e.get("processId"),e.dataModel.get("countryISO"),e.dataModel.get("customerID"),e.dataModel.get("commercialSerialNumber"),!0,function(t){var a=Komodo.canonicalFacadeFactory(t.Payload,["ListOfHardware"]);e.dataModel.deviceData.clear();var o,s=a.get("ListOfHardware");if(o=$.makeArray(s),!(o.length>0))return Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"noDevicesLoaded"),kl.value(e._locale+"customerWithDevices"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"),void this.transitionToRoute("/manageViewing");if(null!=s){var r=0;o.forEach(function(t){if(null!=t){var a=null;if(null!=t.ProductDetail&&(a=e.getHardwareModelDesc(t.ProductDetail.UID)),null==a&&(a=t.ProductDetail.Model),$.each(t.ListOfService,function(e,a){$.each(a.ProductDetail.ProductFeatures,function(e,a){"Quantity"===a.Value&&"1"!==a.Description&&(t.SerialNumber in _xtraviews||(_xtraviews[t.SerialNumber]=!0))})}),e.dataModel.get("deviceData").pushObject(Komodo.Models.HardwaresDataGridMVModel.create({HardwareModelDesc:a,deviceSerialNo:t.SerialNumber,deviceStatus:t.Status,LinkedSC:t.LinkedSmartcard,DeviceWarranty:t.WarrantyStatus,LinkedSCModel:null!=t.SmartcardDetail?t.SmartcardDetail.Model:void 0,FromProductName:null!=t.ProductDetail?t.ProductDetail.Name:void 0,FromModel:null!=t.ProductDetail?t.ProductDetail.Model:void 0,UID:null!=t.ProductDetail?t.ProductDetail.UID:void 0,deviceType:null!=t.ProductDetail?t.ProductDetail.Type:void 0,InsuranceStatus:null!=t.InsuranceStatus?t.InsuranceStatus:void 0,insuranceStartDate:null!=t.InsuranceStartDate?e.getStockService().formatDateForDatePicker(t.InsuranceStartDate,0):void 0})),e.get("_SAGrid")&&null!=t.ProductDetail&&null!=t.ProductDetail.Type&&"smartcard"!=t.ProductDetail.Type.toLowerCase()){var o=[];o.push({title:"Device",value:"device_"+r}),null!=t.ProductDetail&&null!=t.ProductDetail.Type&&"embedded"!=t.ProductDetail.Type.toLowerCase()&&null!=t.LinkedSmartcard&&(o.push({title:"Smartcard",value:"smartcard_"+r}),o.push({title:"Paired",value:"paired_"+r})),e.dataModel.get("SAGridData").pushObject(Komodo.Models.HardwaresDataGridMVModel.create({HardwareModelDesc:a,deviceSerialNo:t.SerialNumber,deviceStatus:t.Status,LinkedSC:t.LinkedSmartcard,DeviceWarranty:t.WarrantyStatus,LinkedSCModel:null!=t.SmartcardDetail?t.SmartcardDetail.Model:void 0,FromProductName:null!=t.ProductDetail?t.ProductDetail.Name:void 0,FromModel:null!=t.ProductDetail?t.ProductDetail.Model:void 0,UID:null!=t.ProductDetail?t.ProductDetail.UID:void 0,deviceType:null!=t.ProductDetail?t.ProductDetail.Type:void 0,InsuranceStatus:null!=t.InsuranceStatus?t.InsuranceStatus:void 0,insuranceStartDate:null!=t.InsuranceStartDate?e.getStockService().formatDateForDatePicker(t.InsuranceStartDate,0):void 0,radioType:o}))}r++}})}else Komodo.Controls.MessageBoxController.show(kl.value(e._locale+"branchSwap"),"<strong>"+kl.value(e._locale+"noDeviceError")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")})}catch(e){Komodo.Controls.MessageBoxController.show("Error","Error: "+e,Komodo.Controls.MessageBoxOkButtons,this,"retrieveHardwareError","danger")}},setupGrid:function(){try{var e=this;e._columnDeviceDataGrid=[Komodo.Controls.DataGridColumn.create({name:"HardwareModelDesc",title:kl.value(e._locale+"deviceName"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"deviceSerialNo",title:kl.value(e._locale+"deviceNumber"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"deviceStatus",title:kl.value(e._locale+"deviceStatus"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"InsuranceStatus",title:kl.value(e._locale+"insurance"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"insuranceStartDate",title:kl.value(e._locale+"insuranceStartDate"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"LinkedSC",title:kl.value(e._locale+"linkedSmartcard"),width:"120px"}),Komodo.Controls.DataGridRadioButtonColumn.create({name:"checkItem",title:kl.value(e._locale+"swap"),displayType:"radiobutton",canEdit:!0,isAlwaysEditing:!0,width:"50px"})],e._columnQuoteDataGrid=[Komodo.Controls.DataGridColumn.create({name:"ToProductName",title:kl.value(e._locale+"item"),width:"100px"}),Komodo.Controls.DataGridColumn.create({name:"productQuantity",title:kl.value(e._locale+"quantity"),width:"80px"}),Komodo.Controls.DataGridColumn.create({name:"subscriptionCost",title:kl.value(e._locale+"subscriptionCost"),width:"80px"}),Komodo.Controls.DataGridColumn.create({name:"deviceCost",title:kl.value(e._locale+"deviceCost"),width:"80px"}),Komodo.Controls.DataGridColumn.create({name:"totalTax",title:kl.value(e._locale+"tax"),width:"80px"}),Komodo.Controls.DataGridColumn.create({name:"totalPrice",title:kl.value(e._locale+"total"),width:"80px"})]}catch(e){this.getStockService().handleException("setupGrid",e,!0,!0)}},setQuotationStatus:function(e){try{var t=this;$.each(this._cacheQuotationStatus,function(a,o){if(o.key==e)return void t.dataModel.set("QuoteStatus",o.value)})}catch(e){this.getStockService().handleException("getQuotationStatus",e,!0,!0)}},publishGenerateSwapOrder:function(){try{var e=this,t=Komodo.Models.GenerateSwapOrder.create();t.Hardware.ProductDetail=Komodo.Models.ProductDetail.create(),t.set("Username",Komodo.Services.securityService.get("domainUserName").substring(3)),t.set("OrderType","SWAP"),t.set("CustomerID",this.dataModel.get("customerID")),t.set("LocationID",this.dataModel.get("businessUnit")),t.set("Country",this.dataModel.get("countryISO")),t.set("RepairCategoryDescription",52),t.set("RepairReasonDescription",this.dataModel.get("Reason")),t.set("RepairCategoryDescriptionCustomer",51),t.set("RepairReasonDescriptionCustomer",this.dataModel.get("Category")),this.get("dataModel.chargeOverrideApproved")?(t.VoidOverride=!0,t.VoidOverrideComment=this.get("dataModel.chargeOverrideComment"),t.VoidOverrideUsername=this.get("dataModel.chargeOverrideUsername")):(t.VoidOverride=!1,t.VoidOverrideComment=void 0,t.VoidOverrideUsername=void 0);var a={};a.ValueWithoutTax=e.dataModel.SelectedSwapMaterialAvailability.priceGroup.NetValue.toFixed(2),a.Value=e.dataModel.SelectedSwapMaterialAvailability.priceGroup.GrossValue.toFixed(2),a.CurrencyCode=e.dataModel.SelectedSwapMaterialAvailability.priceGroup.Currency,a.ListOfTax=[],$.each(e.dataModel.SelectedSwapMaterialAvailability.priceGroup.TaxDetail,function(e,t){a.ListOfTax.pushObject({Type:t.TaxCode,Amount:t.Value,Percent:t.Percent.toFixed(2)})}),void 0!==this.dataModel.get("boolPairedDevice")&&!1!==this.dataModel.get("boolPairedDevice")&&this.dataModel.get("PairedDevice")!=kl.value(e._locale+"noLinkedDevice")?(t.Hardware.set("SerialNumber",this.dataModel.get("DecoderSr")),t.Hardware.set("WarrantyStatus",this.dataModel.get("DecoderWarranty")),t.Hardware.ProductDetail.set("Model",e.dataModel.SelectedSwapMaterialAvailability.material),t.Hardware.ProductDetail.set("Name",e.dataModel.SelectedSwapMaterialAvailability.materialDescription),t.Hardware.ProductDetail.set("Type","DECODER"),t.Hardware.ProductDetail.set("Price",a),void 0!==this.dataModel.get("SmartCardSr")&&(t.Hardware.set("LinkedSmartcard",this.dataModel.get("SmartCardSr")),t.Hardware.SmartcardDetail.set("Model",this.dataModel.get("SmartCardModel")),"embedded"==this.dataModel.selectedDeviceGridItem.get("deviceType").toLowerCase()?(t.Hardware.SmartcardDetail.set("Type","EMBEDDED"),t.Hardware.SmartcardDetail.set("Name",this.dataModel.get("SmartCardModel"))):(t.Hardware.SmartcardDetail.set("Type","SMARTCARD"),t.Hardware.SmartcardDetail.set("Name",this.dataModel.get("SmartCardProduct"))))):"embedded"==this.dataModel.selectedDeviceGridItem.get("deviceType").toLowerCase()?(t.Hardware.set("SerialNumber",this.dataModel.selectedDeviceGridItem.get("deviceSerialNo")),t.Hardware.set("LinkedSmartcard",this.dataModel.selectedDeviceGridItem.get("LinkedSC")),t.Hardware.set("WarrantyStatus",this.dataModel.selectedDeviceGridItem.get("DeviceWarranty")),t.Hardware.ProductDetail.set("Model",e.dataModel.SelectedSwapMaterialAvailability.material),t.Hardware.ProductDetail.set("Name",e.dataModel.SelectedSwapMaterialAvailability.materialDescription),t.Hardware.ProductDetail.set("Type",this.dataModel.selectedDeviceGridItem.get("deviceType")),t.Hardware.ProductDetail.set("Price",a),t.Hardware.SmartcardDetail.set("Model",this.dataModel.selectedDeviceGridItem.get("LinkedSCModel")),t.Hardware.SmartcardDetail.set("Name",this.dataModel.selectedDeviceGridItem.get("LinkedSCModel")),t.Hardware.SmartcardDetail.set("Type","EMBEDDED")):(t.Hardware.set("SerialNumber",this.dataModel.selectedDeviceGridItem.get("deviceSerialNo")),"smartcard"==this.dataModel.selectedDeviceGridItem.get("deviceType").toLowerCase()?t.Hardware.set("WarrantyStatus","InActive"):t.Hardware.set("WarrantyStatus",this.dataModel.selectedDeviceGridItem.get("DeviceWarranty")),t.Hardware.ProductDetail.set("Model",e.dataModel.SelectedSwapMaterialAvailability.material),t.Hardware.ProductDetail.set("Name",e.dataModel.SelectedSwapMaterialAvailability.materialDescription),t.Hardware.ProductDetail.set("Type",this.dataModel.selectedDeviceGridItem.get("deviceType")),t.Hardware.ProductDetail.set("Price",a)),this.getStockService().publishRequestOnBus(this,this.get("processId"),t,"GenerateSwapOrder","v1")}catch(e){this.getStockService().handleException("publishGenerateSwapOrder",e,!0,!0)}},publishAcceptQuoteEvent:function(){try{var e,t=this,a={ListOfQuotationLineItem:this.oQuote.ListOfQuotationLineItem,Status:this.oQuote.Status,TotalPrice:this.oQuote.TotalPrice,UID:this.oQuote.UID};e=Komodo.Models.QuotationAccepted.create();var o=Komodo.canonicalFacadeFactory(e,["Country","LocationID","Quotation"]);o.set("Country",t.dataModel.get("countryISO")),o.set("LocationID",0),o.set("Quotation",a),this.getStockService().publishRequestOnBus(this,this.get("processId"),e,"AcceptQuotation","v1")}catch(e){this.getStockService().handleException("publishAcceptQuoteEvent",e,!0,!0)}},publishSendQuotationEvent:function(){var e,t,a=this;e=Komodo.Models.SendQuotation.create();var o=Komodo.canonicalFacadeFactory(e,["Country","QuotationUID","CommunicationType","CommunicationLanguage"]);o.set("Country",a.dataModel.get("countryISO")),o.set("QuotationUID",this.dataModel.get("QuoteNumber")),o.set("CommunicationType",this.dataModel.get("communicationType")),o.set("CommunicationLanguage",this.dataModel.get("communicationLanguage")),t=new Komodo.Services.QuotationService,this.startNewProcess();var t=Komodo.Services.customerProfileService,s=kl.value(a._locale+"sendQuotation");t.publishEvent(this,e,"SendQuotation","v1").done(function(){Komodo.log(s+" "+kl.value(a._locale+"quotationSentSuccessfully")),Komodo.Controls.MessageBoxController.show(s," "+kl.value(a._locale+"quotationSentSuccessfully"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","success")}).fail(function(e){Komodo.log(s+" "+kl.value(a._locale+"unableSendQuotation")),Komodo.Controls.MessageBoxController.show(s,e,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")})},messageSwapOrderGeneratedReceived:function(e){Komodo.Services.busyService.stop(this.get("processId"),"blocking");var t=this;t.dataModel.set("showGenerateSwapQuote",!0),t.dataModel.set("showQuoteDetails",!0),t.dataModel.set("QuoteNumber",e.ResponseMessage.Payload.Quotation.UID),t.setQuotationStatus(e.ResponseMessage.Payload.Quotation.Status);var a=t.getStockService().guardAgainstNullValue(e,"ResponseMessage.Payload.Quotation.ListOfQuotationLineItem.QuotationLineItem.TotalPrice.Value");a&&0==a&&t.dataModel.set("showMakePayment",!0),Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"branchSwap"),"<strong>"+kl.value(t._locale+"quotationGeneratedSuccessfully")+"</strong>"+e.ResponseMessage.Payload.Quotation.UID,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","success")},messageQuotationStatusUpdatedReceived:function(e){try{Komodo.Services.busyService.stop(this.get("processId"),"blocking");var t=this,a=Komodo.canonicalFacadeFactory(e.ResponseMessage.Payload,["ListOfProduct_Product","Status"]),o=(a.get("ListOfProduct_Product"),a.get("Status"));if(t.dataModel.set("QuoteStatus","Accepted"),"Accepted"==o){Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"acceptQuotations"),"<strong>"+kl.value(t._locale+"quotationAcceptedSuccessfully")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","success").response=function(e){"ok"==e&&t.transitionToRoute("/manageViewing")},t.dataModel.set("BoolAcceptQuoteButton",!0)}else Komodo.Controls.MessageBoxController.show(kl.value(t._locale+"acceptQuotations"),"<strong>"+kl.value(t._locale+"acceptQuotationFailed")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"),t.dataModel.set("BoolAcceptQuoteButton",!1)}catch(e){this.getStockService().handleException("messageQuotationStatusUpdatedReceived",e,!0,!0)}},messageReceived:function(e){this.getStockService().messageReceived(e)},messageDeliveryFailure:function(e){this.getStockService().messageDeliveryFailure(e)},messageFault:function(e){this.getStockService().messageFault(e)},messageFailureMessageEventReceived:function(e){this.getStockService().messageFailureMessageEventReceived(this.get("processId"),e)},messageHandle:function(e,t){this.getStockService().messageHandle(this.get("processId"),e)}}),Komodo.Application.ChangeDeviceOwnershipController=Komodo.UI.Controller.extend({_cacheHardwareModelDesc:[],init:function(){this._super();var e=this;Komodo.log(e.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.logInit")),e.set("processVersion","v1.1"),e.set("processName","Change Device Ownership"),e.dataGridColumns=[Komodo.Controls.DataGridColumn.create({name:"HardwareModelDesc",title:kl.value("locale.manageStock:changeDeviceOwnership.deviceName"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"deviceSerialNo",title:kl.value("locale.manageStock:changeDeviceOwnership.deviceNumber"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"deviceStatus",title:kl.value("locale.manageStock:changeDeviceOwnership.deviceStatus"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"InsuranceStatus",title:kl.value("locale.manageStock:changeDeviceOwnership.insurance"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"insuranceStartDate",title:kl.value("locale.manageStock:performSwap.insuranceStartDate"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"LinkedSC",title:kl.value("locale.manageStock:changeDeviceOwnership.linkedSmartcard"),width:"120px"}),Komodo.Controls.DataGridRadioButtonColumn.create({name:"checkItem",title:kl.value("locale.manageStock:changeDeviceOwnership.changeOwner"),displayType:"radiobutton",canEdit:!0,isAlwaysEditing:!0,width:"50px"})],e.requiresDependency("_stockService",{singleton:Komodo.Services.stockService}),e.requiresDependency("_localizationService",{singleton:Komodo.Services.localizationService})},start:function(){this._super();var e=this;try{this.registerModel("dataModel",Komodo.Models.ChangeDeviceOwnershipModel);var t=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),a=t.isCustomerIdIsAvailableToRetriveData();if(this.createNewGridItem(),this.registerValidations(),this.getStockService().fillObjectFromCachedFileServiceArray(this,"_cacheHardwareModelDesc","HardwareModel"),!a)return Komodo.Controls.MessageBoxController.show(e.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.error"),e.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.errorStart"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"),void this.transitionToRoute("/manageViewing");var o=this.get("dataModel");o.set("customerID",t.getCustomerIdToRetrieveData()),o.set("flag","1"),this.getStockService().setCountryISO(o,"countryISO",function(){e.retrieveHardware()}),o.set("disabledDate",!0)}catch(t){Komodo.Controls.MessageBoxController.show(e.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.error"),e.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.error")+": "+t,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}},stop:function(){this._super()},registerValidations:function(){var e=this;e.registerValidator(this.get("dataModel"),"commercialSerialNumber",{isRequired:!0,displayName:e.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.messageValidator"),minLength:1,maxLength:21,groups:"commercial"})},getStockService:function(){return this.get("_stockService")},getLocalizationService:function(){return this.get("_localizationService")},getHardwareModelDesc:function(e){var t=this;try{var a=null;return $.each(t._cacheHardwareModelDesc,function(t,o){if(o.key==e)return a=o.value,!1}),Komodo.log(t.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.logGetHardwareModelDesc")+e),a}catch(e){t.handleException(t.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.exception"),e,!0,!0)}},retrieveHardware:function(){var e=this;try{this.getStockService().loadSingleDevice()&&null==e.dataModel.get("commercialSerialNumber")?this.getStockService().getUIService().showModalPopup("Commercial customer",void 0,{view:Komodo.Application.RetrieveHardwareSingleView,canUserClose:!1,context:this,shouldStartAndStopController:!1}):this.getStockService().retrieveHardware(this,e.get("processId"),e.dataModel.get("countryISO"),e.dataModel.get("customerID"),e.dataModel.get("commercialSerialNumber"),!0,function(t){var a=Komodo.canonicalFacadeFactory(t.Payload,["ListOfHardware"]);e.dataModel.deviceData.clear(),e.dataModel.set("BoolConfirmSwapButton",!1);var o,s=a.get("ListOfHardware");if(o=e.getArrayItem(s),!(o.length>0))return Komodo.Controls.MessageBoxController.show(e.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.error"),e.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.errorRetrieveHardware"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"),void this.transitionToRoute("/manageViewing");e.createNewGridItem(),null!=s?o.forEach(function(t){if(null!=t&&null!=t.ProductDetail&&"smartcard"!=t.ProductDetail.Type.toLowerCase()){e.newDeviceGridItem.set("deviceSerialNo",t.SerialNumber),e.newDeviceGridItem.set("deviceStatus",t.Status),e.newDeviceGridItem.set("LinkedSC",t.LinkedSmartcard),e.newDeviceGridItem.set("InsuranceStatus",t.InsuranceStatus),e.newDeviceGridItem.set("insuranceStartDate",null!=t.InsuranceStartDate?e.formatDateForDatePicker(t.InsuranceStartDate,0):void 0),null!=t.SmartcardDetail&&(e.newDeviceGridItem.set("LinkedSCModel",t.SmartcardDetail.Model),e.newDeviceGridItem.set("LinkedSCType",t.SmartcardDetail.Type));var a=null;null!=t.ProductDetail&&(e.newDeviceGridItem.set("FromProductName",t.ProductDetail.Name),e.newDeviceGridItem.set("FromModel",t.ProductDetail.Model),e.newDeviceGridItem.set("deviceType",t.ProductDetail.Type),a=e.getHardwareModelDesc(t.ProductDetail.UID)),null==a&&(a=t.ProductDetail.Model),e.newDeviceGridItem.set("HardwareModelDesc",a);var o=e.getArrayItem(null==t.ListOfService?null:t.ListOfService),s={};o.length>0?s=o[0]:s.UID=0,$.each(o,function(e,t){s.UID>t.UID&&(s=t)});var r=null;null!=s.ProductDetail&&null!=s.ProductDetail.ProductFeatures&&$.each(s.ProductDetail.ProductFeatures,function(e,t){"SoftwareChargeUntilDate"==t.Value&&(r=t.Description)}),0!=s.UID&&null!=r?new Date(r).setHours(0,0,0,0)<(new Date).setHours(0,0,0,0)?e.newDeviceGridItem.set("SoftwareChargeUntilDate",e.formatDateForDatePicker((new Date).setHours(0,0,0,0),0)):e.newDeviceGridItem.set("SoftwareChargeUntilDate",e.formatDateForDatePicker(r,1)):e.newDeviceGridItem.set("SoftwareChargeUntilDate",e.formatDateForDatePicker((new Date).setHours(0,0,0,0),0)),e.addGridRow()}}):Komodo.Controls.MessageBoxController.show(e.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.error"),"<strong>"+e.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.errorHardwares")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")})}catch(t){Komodo.Controls.MessageBoxController.show(e.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.error"),e.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.error")+": "+t,Komodo.Controls.MessageBoxOkButtons,this,"retrieveHardwareError","danger")}},actions:{ChangeDeviceOwnership:function(e){var t=this;try{var a=this.dataModel.get("customerID");if(void 0==e)return Komodo.Controls.MessageBoxController.show(t.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.warning"),"<strong>"+t.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.messageChangeDeviceOwnership")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"),!1;var o;oProduct=Komodo.Models.ProductDetail.create();var s=Komodo.canonicalFacadeFactory(oProduct,["Model","Type"]);s.set("Model",this.dataModel.selectedGridItem.get("FromModel")),s.set("Type",this.dataModel.selectedGridItem.get("deviceType").toUpperCase()),oSmartcard=Komodo.Models.ProductDetail.create();var r=Komodo.canonicalFacadeFactory(oSmartcard,["Name","Type"]);r.set("Name",this.dataModel.selectedGridItem.get("LinkedSCModel")),r.set("Type",this.dataModel.selectedGridItem.get("LinkedSCType")),oHardware=Komodo.Models.Hardware.create();var n=Komodo.canonicalFacadeFactory(oHardware,["SerialNumber","LinkedSmartcard","SmartcardDetail","ProductDetail"]);n.set("SerialNumber",this.dataModel.selectedGridItem.get("deviceSerialNo")),n.set("LinkedSmartcard",this.dataModel.selectedGridItem.get("LinkedSC")),n.set("SmartcardDetail",oSmartcard),n.set("ProductDetail",oProduct),oHardwareCase=Komodo.Models.HardwareCase.create();Komodo.canonicalFacadeFactory(oHardwareCase,["CustomerUID"]).set("CustomerUID",a),o=Komodo.Models.DelinkDeviceForChangeOwnership.create();var i=Komodo.canonicalFacadeFactory(o,["Country","Username","LocationID","ToBeStatus","StatusChangeReason","Hardware","ScheduledCancellationDate","Case"]);i.set("ToBeStatus","5"),i.set("StatusChangeReason","2ndHand"),i.set("Country",this.dataModel.get("countryISO")),i.set("Username",Komodo.Services.securityService.get("domainUserName").substring(3)),i.set("LocationID",0),i.set("ScheduledCancellationDate",this.formatDateForBus(this.dataModel.get("boundUpperDate"))),i.set("Case",oHardwareCase),i.set("Hardware",oHardware),this.publishRequestOnBus(o,"DelinkDeviceForChangeOwnership","v1"),Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,6e4,"blocking",this)}catch(e){Komodo.Controls.MessageBoxController.show(t.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.error"),t.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.error")+": "+e,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}},searchDeviceSingle:function(){try{var e=this;if(!e.canSubmitData(e.get("dataModel"),"Serial Number",{group:"commercial",showInModal:!1}))return;e.retrieveHardware()}catch(e){this.handleException("searchDeviceSingle",e,!0,!0)}},customerDocumentsModal:function(){try{this.getStockService().customerDocumentsModal("deviceSerialNo","deviceType",this.dataModel.get("deviceData"),!0,null)}catch(e){this.handleException("customerDocumentsModal",e,!0,!0)}},backDeviceSingle:function(){try{var e=this;Komodo.Services.busyService.start(!0,e.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,this._messageTimeout,"blocking",this),Komodo.Services.busyService.stop(e.get("processId"),"blocking"),this.transitionToRoute("/manageViewing")}catch(e){this.handleException("backDeviceSingle",e,!0,!0)}}},publishRequestOnBus:function(e,t,a){var o=this,s=Komodo.Services.customerProfileService,r=o.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.messagePublishRequestOnBus")+t+" ";s.publishEvent(this,e,t,a).done(function(){Komodo.log(r+o.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.donePublishEvent"))}).fail(function(e){Komodo.log(r+o.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.failPublishEvent")),Komodo.Controls.MessageBoxController.show(r,e,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")})},messageFailureMessageEventReceived:function(e){var t=this;Komodo.Services.busyService.stop(this.get("processId"),"blocking"),"CreateInteraction"!=e.ResponseMessage.Payload.OriginatedEventName?Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"):Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,t.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.messageFailureMessageEventReceived"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")},messageHandle:function(e,t){var a=this;try{Komodo.Services.busyService.stop(this.get("processId"),"blocking"),null!=e&&null!=e.payload&&null!=e.payload.Header?Komodo.Controls.MessageBoxController.show(a.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.error"),t+" "+a.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.messageHandleType")+": '"+e.payload.Header.EventName+"', "+a.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.messageHandleProcess")+": '"+e.payload.Header.ProcessName+"'.",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"):(Komodo.UI.error("[messageHandle.messageFault] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(a.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.error"),a.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.messageHandle")+" = "+e.messageId,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"))}catch(e){a.handleException("messageHandle",e,!0,!0)}},messageReceived:function(e){var t=this;try{t.messageHandle(e,this.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.messageReceived"))}catch(e){t.handleException("messageReceived",e,!0,!0)}},messageDeliveryFailure:function(e){var t=this;try{t.messageHandle(e,this.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.messageDeliveryFailure"))}catch(e){t.handleException("messageDeliveryFailure",e,!0,!0)}},messageFault:function(e){var t=this;try{t.messageHandle(e,t.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.messageFault"))}catch(e){t.handleException("messageFault",e,!0,!0)}},messageDeviceDelinkedForChangeOwnershipReceived:function(e){var t=this;try{if(Komodo.Services.busyService.stop(this.get("processId"),"blocking"),this.dataModel.set("disabledRequestButton",!0),this.dataModel.set("flag","2"),null!=e&&null!=e.ResponseMessage&&null!=e.ResponseMessage.Payload&&null!=e.ResponseMessage.Payload.Hardware&&null!=e.ResponseMessage.Payload.Hardware.SerialNumber){var a,t=this;null!=e.ResponseMessage.Payload.Hardware.StatusReason&&1==e.ResponseMessage.Payload.Hardware.StatusReason?a=Komodo.Controls.MessageBoxController.show(t.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.success"),t.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.messageStatusReason1"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","success"):null!=e.ResponseMessage.Payload.Hardware.StatusReason&&2==e.ResponseMessage.Payload.Hardware.StatusReason?a=Komodo.Controls.MessageBoxController.show(t.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.success"),t.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.messageStatusReason2"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","success"):Komodo.Controls.MessageBoxController.show(t.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.error"),t.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.messageStatusReason"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"),a.response=function(e){"ok"==e&&t.transitionToRoute("/manageViewing")}}else Komodo.Controls.MessageBoxController.show(t.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.error"),t.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.messageDeviceDelinkedForChangeOwnershipReceived"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}catch(e){t.handleException("messageDeviceDelinkedForChangeOwnershipReceived",e,!0,!0)}},minTwoDigits:function(e){return(e<10?"0":"")+e},formatDateForDatePicker:function(e,t){if(void 0!=e&&""!=e){var a=new Date(e);return a.setDate(a.getDate()+t),this.minTwoDigits(a.getDate())+"/"+this.minTwoDigits(a.getMonth()+1)+"/"+a.getFullYear()}return""},formatDateForBus:function(e){if(void 0!=e&&""!=e){var t=new Date(e);return t.getFullYear()+"-"+this.minTwoDigits(t.getMonth()+1)+"-"+this.minTwoDigits(t.getDate())+"T00:00:00"}return""},clearSelectedData:function(){void 0!==this.dataModel.selectedGridItem&&("decoder"==this.dataModel.selectedGridItem.get("deviceType").toLowerCase()||"embedded"==this.dataModel.selectedGridItem.get("deviceType").toLowerCase()?this.dataModel.set("disabledRequestButton",!1):this.dataModel.set("disabledRequestButton",!0),this.dataModel.set("boundUpperDate",this.dataModel.selectedGridItem.get("SoftwareChargeUntilDate")))},selectedRow:function(){var e=this;try{$.each(e.get("dataModel.deviceData"),function(t,a){if(null!=a.checkItem&&1==a.checkItem)return e.dataModel.set("selectedGridItem",a),e.clearSelectedData(),!1})}catch(e){this.handleException("selectedRow",e,!0,!0)}}.observes("dataModel.deviceData.@each.checkItem"),getArrayItem:function(e){try{return $.makeArray(e)}catch(e){this.handleException("getArrayItem",e,!0,!0)}},handleException:function(e,t,a,o){var s=this;try{var r=s.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.messageHandleException")+" ["+e+"]. "+s.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.exception")+": "+t+".";a&&(Komodo.log(r),
null!=t&&null!=t.stack&&Komodo.log(t.stack)),o&&Komodo.Controls.MessageBoxController.show(s.getLocalizationService().value("locale.manageStock:changeDeviceOwnership.error"),r,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}catch(e){Komodo.log(e)}},createNewGridItem:function(){this.registerModel("newGridData",Komodo.Models.HardwaresDataGridMVModel),this.set("newDeviceGridItem",this.get("newGridData"))},addGridRow:function(){0===this.dataModel.deviceData.length?this.dataModel.set("deviceData",[this.get("newDeviceGridItem")]):this.dataModel.deviceData.pushObject(this.get("newDeviceGridItem")),this.createNewGridItem()},ClearData:function(){this.dataModel.set("DeviceNo",""),this.dataModel.set("NewDeviceNo",""),this.dataModel.set("deviceData",[{deviceSerialNo:"",deviceStatus:"",model:"",LinkedSC:""}])}}),Komodo.Application.CreateRepairsOrderController=Komodo.UI.Controller.extend({localGeneral:"locale.manageStock:general.",localRepairProcess:"locale.manageStock:createRepairsOrder.",_swapDetail:[],_dropDownCategoryList:[],_dropDownReasonList:[],_dropDowncustomerreportedfaultList:[],_dropDownrepairtypeList:[],_dropDowncsrobservationList:[],_dropDownoutcomeList:[],_dropDownCollectionPoint:[],_dropDownCommunicationLanguageList:[],_dropDownCommunicationList:[],_columnDeviceDataGrid:[],_quotationStatus:[],_cacheHardwareModelDesc:[],_TaxCode:[],_Value:[],_CustomerReportedFault:[],_CSRFaultObservation:[],_CSRRepairObservation:[],_HardwareStatus:[],_cdmBusinessUnit:[],supervisorClaim:"clarity://repair/supervisor",isResponseMeessageFromMiddel:!1,isFinalQuote:!1,isOverride:!1,isMoveToSwap:!1,isMoveToCashSale:!1,isGenerateQuote:!1,isRepairDetails:!1,isBusinessUnitStockHandler:!1,collectionPointName:void 0,dropOffPointName:void 0,_BusinessUnit:void 0,_BUnitHLocationRelationship:void 0,_primeryCollectionPoint:void 0,_collectionPointsvalueWithHLocation:void 0,init:function(){try{this._super();var e=this;Komodo.log("Constructing Initiate Swap controller."),e.set("processVersion","v1.1"),e.set("processName","Create Repairs Order"),e.set("Plant",""),e.set("PlantLocation",""),e.set("PlantCountry",""),e.set("OutcomeValue",""),e.set("quoteOverridden",!1),e.set("overrideSupervisorUserName",""),e.set("overrideComment",""),e.set("deviceStatusCanonical",""),e.set("QuotePriceFromSAP",""),e.set("loggedInCountryId",void 0),e.set("collectionPointName",void 0),e.set("dropOffPointName",void 0),e.set("hLocation",""),e.set("isBusinessUnitStockHandler",!1),this.requiresDependency("_stockService",{singleton:Komodo.Services.stockService}),this.requiresDependency("_securityService",{singleton:Komodo.Services.securityService}),e.set("_BUnitHLocationRelationship",void 0)}catch(e){this.handleException("init - Initiate Swap",e,!0,!0)}},start:function(){try{this._super();var e=this;e.registerModel("dataModel",Komodo.Models.PerformSwapModel),e.hideControls(),e.hideExtraControls(),e.hidePageControls(e),Komodo.Services.featureToggleService.isEnabled("ManageViewing","NewRepairProcess").done(function(t){t&&e.bindPageControls(e)}).fail(function(e){Komodo.Services.error("Error while checking feature toggle. Error Details:"+e)})}catch(e){this.handleException("start",e,!0,!0)}},stop:function(){this._super()},registerValidations:function(){this.registerValidator(this.get("dataModel"),"searchString",{isRequired:!1,displayName:kl.value("locale.associateProducts:associateProducts.smartCardOrDeviceNo"),minLength:7,maxLength:15,functions:Komodo.UI.Validators.alphanumericValidator})},getStockService:function(){return this.get("_stockService")},actions:{createCustomerRepairOrder:function(e){try{var t=this;void 0==t.dataModel.selectedDeviceGridItem?Komodo.Controls.MessageBoxController.show("Create Repairs Order","<strong>Please Select a device</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"):void 0==t.dataModel.CustomerReportedFault||""==t.dataModel.CustomerReportedFault?Komodo.Controls.MessageBoxController.show("Create Repairs Order","<strong>Customer Reported Fault is required</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"):void 0==t.dataModel.RepairType||""==t.dataModel.RepairType?Komodo.Controls.MessageBoxController.show("Create Repairs Order","<strong>Repair Type is required</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"):1!=t.dataModel.RepairType||void 0!=t.dataModel.CSRObservation&&""!=t.dataModel.CSRObservation?(t.showBlockingBusyIndicator(),t.publishcreateCustomerRepairOrder()):Komodo.Controls.MessageBoxController.show("Create Repairs Order","<strong>CSR Observation is required</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning")}catch(e){Komodo.Controls.MessageBoxController.show("Error","Error: "+e,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}},createCSRRepair:function(e){try{var t=this;void 0==t.dataModel.selectedDeviceGridItem?Komodo.Controls.MessageBoxController.show("Create Repairs Order","<strong>Please Select a device</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"):void 0==t.dataModel.CustomerReportedFault||""==t.dataModel.CustomerReportedFault?Komodo.Controls.MessageBoxController.show("Create Repairs Order","<strong>Customer Reported Fault is required</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"):void 0==t.dataModel.RepairType||""==t.dataModel.RepairType?Komodo.Controls.MessageBoxController.show("Create Repairs Order","<strong>Repair Type is required</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"):2!=t.dataModel.RepairType||void 0!=t.dataModel.Outcome&&""!=t.dataModel.Outcome?(t.showBlockingBusyIndicator(),t.publishCreateCSRRepair()):Komodo.Controls.MessageBoxController.show("Create Repairs Order","<strong>CSR Outcome is required</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning")}catch(e){Komodo.Controls.MessageBoxController.show("Error","Error: "+e,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}},generateQuote:function(e){try{var t=this;void 0!=t.get("collectionPointName")?t.hasNoActiveServices(t.dataModel.selectedDeviceGridItem.get("LinkedSC"),t.dataModel.selectedDeviceGridItem.get("deviceSerialNo")):Komodo.Controls.MessageBoxController.show(kl.value(t.localRepairProcess+"moduleTitle"),kl.value(t.localRepairProcess+"collectionPointError"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning")}catch(e){Komodo.Controls.MessageBoxController.show("Error","Error: "+e,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}},searchDeviceSingle:function(){try{var e=this;if(!e.canSubmitData(e.get("dataModel"),"Serial Number",{group:"commercial",showInModal:!1}))return;e.retrieveHardware()}catch(e){this.handleException("searchDeviceSingle",e,!0,!0)}},backDeviceSingle:function(){try{var e=this;Komodo.Services.busyService.start(!0,e.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,this._messageTimeout,"blocking",this),Komodo.Services.busyService.stop(e.get("processId"),"blocking"),this.transitionToRoute("/manageViewing")}catch(e){this.handleException("backDeviceSingle",e,!0,!0)}},moveToSwap:function(){this.swapCommon()},moveToCashSale:function(){this.cashSaleCommon()},override:function(){this.overridePreRepairQuote()},actionFilterDevice:function(){var e=this,t=e.dataModel.get("searchString").trim(),a=e.dataModel.get("SearchDeviceData");if(""!==t&&e.chkSpecialCharecter(t)){null!==a&&a.length<=0&&(e.dataModel.set("SearchDeviceData",e.dataModel.get("deviceData")),a=e.dataModel.get("deviceData"));var o=[];null!==a&&a.length>0&&(a.forEach(function(e){t!==e.deviceSerialNo&&t!==e.LinkedSC||(e.checkItem=!1,o.push(e))}),e.dataModel.set("deviceData",o))}else e.ResetGridData();e.clearSelectedData(),e.get("_dropDownrepairtypeList").clear(),e.get("_dropDowncustomerreportedfaultList").clear(),e.dataModel.set("selectedDeviceGridItem",void 0)},actionClearDevice:function(){var e=this;e.dataModel.set("searchString",""),e.dataModel.set("selectedDeviceGridItem",void 0),e.ResetGridData(),e.clearSelectedData(),e.get("_dropDownrepairtypeList").clear(),e.get("_dropDowncustomerreportedfaultList").clear()}},bindPageControls:function(e){e.set("_dropDowncustomerreportedfaultList",[]),e.set("_dropDownrepairtypeList",[]),e.set("_primeryCollectionPoint",void 0),e.set("isBusinessUnitStockHandler",void 0),e.set("_collectionPointsvalueWithHLocation",void 0),e.set("_CustomerReportedFault",[]),e.set("_CSRFaultObservation",[]),e.set("_CSRRepairObservation",[]),e.set("_cdmBusinessUnit",[]),e.set("hLocation",void 0),e.dataModel.set("commercialSerialNumber",null),e.setupGrid(),e.registerValidations(),e.getDevicePlant(e),e.getStockService().fillObjectFromCachedFileServiceArray(e,"_cacheHardwareModelDesc","HardwareModel"),e.dataModel.set("selectedDeviceGridItem",void 0),e.loadCDMDatasets();var t=Komodo.Services.customerProfileService;if(void 0==t.getCustomerPersonalDetail())return Komodo.Controls.MessageBoxController.show("Customer not loaded","A customer is required to perform this operation.",Komodo.Controls.MessageBoxOkButtons,e,"id5446673","danger"),void e.transitionToRoute("/manageViewing");e.dataModel.set("isDeviceToSendForRepair",!0),e.dataModel.set("isRepairDetails",!0),e.dataModel.set("ReferenceID",""),e.dataModel.set("isVisibleReferenceID",!1),e.dataModel.set("customerID",t.getCustomerPersonalDetail().customerNo),e.getStockService().setCountryISO(this.get("dataModel"),"countryISO",function(){e.retrieveHardware()})},hidePageControls:function(e){e.dataModel.set("isDeviceToSendForRepair",!1),e.dataModel.set("isFinalQuote",!1),e.dataModel.set("isRepairDetails",!1)},generateQuotesWithOverride:function(){var e=this,t={QuoteNumber:"",CreateDate:moment(new Date).format("YYYY-MM-DD"),Plant:e.get("Plant"),LocationSapKey:e.get("hLocation"),DeviceStatus:e.get("deviceStatusCanonical"),DeviceModel:e.dataModel.selectedDeviceGridItem.get("FromModel"),SmartCardSerial:e.dataModel.selectedDeviceGridItem.get("LinkedSC"),DeviceSerial:e.dataModel.selectedDeviceGridItem.get("deviceSerialNo"),CustomerId:e.dataModel.customerID,CustomerFirstName:Komodo.Services.customerProfileService.personalDetails.firstName,CustomerLastName:Komodo.Services.customerProfileService.personalDetails.lastName,CustomerMobileNumber:Komodo.Services.customerProfileService.personalDetails.mobileNo,CsrObservation:e.dataModel.CSRObservation,CustomerReportedFault:e.dataModel.CustomerReportedFault,Price:{NetValue:e.get("QuotePriceFromSAP").NetValue,TaxValue:e.get("QuotePriceFromSAP").TaxValue,GrossValue:e.get("QuotePriceFromSAP").GrossValue,Currency:e.get("QuotePriceFromSAP").Currency,TaxCode:e.get("QuotePriceFromSAP").TaxCode,TaxPercentage:e.get("QuotePriceFromSAP").TaxPercentage},SupervisorOverride:e.get("quoteOverridden"),OverrideUser:e.get("overrideSupervisorUserName"),OverrideComment:e.get("overrideComment"),CollectionPointCanonicalValue:e.get("collectionPointName"),DropoffPointCanonicalValue:e.get("dropOffPointName"),SourceSystem:kl.value(e.localGeneral+"source"),CollectionPointId:e.dataModel.CollectionPoint,BusinessUnit:e.get("_BusinessUnit")};e.bus.send(t,"MultiChoice.RepairDeviceProcess.Messages.v1.RepairDeviceCommand"),e.showBlockingBusyIndicator()},getHardwareModelDesc:function(e){try{var t=this,a=null;return $.each(t._cacheHardwareModelDesc,function(t,o){if(o.key==e)return a=o.value,!1}),Komodo.log("Data not found in function [getHardwareModelDesc] for hardwareModelID: "+e),a}catch(e){this.handleException("getHardwareModelDesc",e,!0,!0)}},clearSelectedData:function(){try{var e=this;e.dataModel.set("Category",""),e.dataModel.set("Reason",""),e.get("_dropDowncustomerreportedfaultList").clear(),e.get("_dropDownrepairtypeList").clear(),e.get("_dropDowncsrobservationList").clear(),e.get("_dropDownoutcomeList").clear(),e.get("_dropDownoutcomeList").clear(),e.get("_dropDownCollectionPoint").clear(),e.set("_primeryCollectionPoint",void 0),e.dataModel.set("CustomerReportedFault",void 0),e.dataModel.set("isFinalQuote",!1),e.dataModel.set("ResponseMessageFromMiddele",""),e.dataModel.set("ResponseFinalQuote",""),e.dataModel.set("CollectionPoint",void 0)}catch(e){this.handleException("clearSelectedData",e,!0,!0)}},overridePreRepairQuote:function(){try{var e=this,t=Komodo.Application.ModalPaneController.create();e.registerModel("overridePreRepairQuoteModelU",Komodo.Models.OverridePreRepairQuoteModel),e.registerValidator(e.get("overridePreRepairQuoteModelU"),"supervisorUsername",{isRequired:!0,displayName:kl.value(e.localGeneral+"supervisorName"),minLength:1,maxLength:50}),e.registerValidator(e.get("overridePreRepairQuoteModelU"),"passCode",{isRequired:!0,displayName:kl.value(e.localGeneral+"passCode"),minLength:1,maxLength:50}),e.registerValidator(e.get("overridePreRepairQuoteModelU"),"comment",{isRequired:!0,displayName:kl.value(e.localGeneral+"comment"),minLength:1,maxLength:200}),t.popup(kl.value(e.localGeneral+"SupervisorAuthorization"),"createRepairsOrderOverride",{context:{data:e.get("overridePreRepairQuoteModelU"),validators:e.validators,overridequote:function(){var a=this;!1!==e.canSubmitData(e.overridePreRepairQuoteModelU,kl.value(e.localGeneral+"moduleTitle"),{showInModal:!1})&&(a.data.set("disableAction",!0),e.country=e.dataModel.get("countryISO"),e.loggedInCountryId=e.country,e.validateUserClaim(e.loggedInCountryId,a.data.supervisorUsername,a.data.passCode,e.supervisorClaim).done(function(o){if(void 0!==o){t.close();var s=a.data.supervisorUsername.substring(3),r=a.data.comment;e.preRepairQuoteOverridden(s,r)}else a.data.set("disableAction",!1),alert(kl.value(e.localGeneral+"accessDenied"))}))},cancel:function(){t.close()}}})}catch(e){this.handleException("overridePreRepairQuote",e,!0,!0)}},preRepairQuoteOverridden:function(e,t){var a=this;a.quoteOverridden=!0;var o=a.dataModel.get("ResponseMessageFromMiddele").split(" ");a.overrideSupervisorUserName=e,a.overrideComment=t,a.dataModel.set("ResponseFinalQuote",kl.value(a.localGeneral+"updatedFinalQuote")+o[o.length-1]),a.set("dataModel.isOverride",!1)},hideControls:function(){var e=this;e.set("dataModel.isCSRObservation",!1),e.set("dataModel.isOutcome",!1),e.set("dataModel.isRepairQuote",!1),e.set("dataModel.isCreateRepair",!1)},hideExtraControls:function(){var e=this;e.set("dataModel.isCollectionPoint",!1),e.set("dataModel.isResponseMeessageFromMiddel",!1),e.set("dataModel.isFinalQuote",!1),e.dataModel.set("ResponseMessageFromMiddele",""),e.dataModel.set("ResponseFinalQuote",""),e.set("dataModel.isOverride",!1),e.set("dataModel.isMoveToSwap",!1),e.set("dataModel.isMoveToCashSale",!1),e.set("dataModel.isGenerateQuote",!1)},bindDropDowns:function(){try{var e=this;e.get("_dropDownrepairtypeList").clear(),e.get("_dropDownrepairtypeList").addObject(Ember.Object.create({key:"2",value:kl.value(e.localRepairProcess+"cSRRepair")})),e.get("_dropDownrepairtypeList").addObject(Ember.Object.create({key:"1",value:kl.value(e.localRepairProcess+"customerRepair")}));var t=e.get("_CustomerReportedFault");if(null!=t){e.get("dataModel");e.get("_dropDowncustomerreportedfaultList").clear(),e.sortData(t),$.each(t,function(t,a){e.get("_dropDowncustomerreportedfaultList").addObject(a)})}}catch(e){Komodo.log("[ERROR] : "+e)}},loadCustomerreportedFault:function(){var e=this;Komodo.Services.cachedDataService.fetch("CustomerReportedFault").done(function(t){null!=t&&e.set("_CustomerReportedFault",t)}).fail(function(){Komodo.log("[ERROR] : could not retrieve Customer Reported Fault from CDM")})},bindCollectionPoint:function(e){try{var t=this;t.get("_dropDownCollectionPoint").clear(),t.get("isBusinessUnitStockHandler")?t.getCollectionPointAccordingToBusinessUnits(e):t.getCollectionPoint()}catch(e){Komodo.log("[ERROR] : "+e)}},repairTypeChanged:function(){var e=this;if(void 0!=e.get("_dropDownrepairtypeList")){switch(e.get("dataModel.RepairType")){case"1":e.set("dataModel.isCSRObservation",!0),e.set("dataModel.isOutcome",!1),e.set("dataModel.isRepairQuote",!0),e.set("dataModel.isCreateRepair",!1);var t=e.get("_CSRFaultObservation");if(null!=t){e.get("dataModel");e.get("_dropDowncsrobservationList").clear(),e.sortData(t),$.each(t,function(t,a){e.get("_dropDowncsrobservationList").addObject(a)})}break;case"2":e.set("dataModel.isCSRObservation",!1),e.set("dataModel.isOutcome",!0),e.set("dataModel.isRepairQuote",!1),e.set("dataModel.isCreateRepair",!0);var a=e.get("_CSRRepairObservation");if(null!=a){e.get("dataModel");e.get("_dropDownoutcomeList").clear(),e.sortData(a),$.each(a,function(t,a){e.get("_dropDownoutcomeList").addObject(a)})}}}e.dataModel.set("Outcome",void 0),e.dataModel.set("CSRObservation",void 0)}.observes("dataModel.RepairType"),loadRepairObservation:function(){var e=this;Komodo.Services.cachedDataService.fetch("CSRRepairObservation").done(function(t){e.set("_CSRRepairObservation",t)}).fail(function(){Komodo.log("[ERROR] : could not retrieve Customer Reported Fault from CDM")})},loadCSRFaultObservation:function(){var e=this;Komodo.Services.cachedDataService.fetch("CSRFaultObservation").done(function(t){null!=t&&e.set("_CSRFaultObservation",t)}).fail(function(){Komodo.log("[ERROR] : could not retrieve Customer Reported Fault from CDM")})},selectedRow:function(){var e=this;try{$.each(e.get("dataModel.deviceData"),function(t,a){if(null!=a.checkItem&&1==a.checkItem)return e.dataModel.set("selectedDeviceGridItem",a),e.clearSelectedData(),e.getDeviceStatus(a.deviceStatus),e.bindDropDowns(),e.getBusinessUnit(e,a.businessUnit),e.bindCollectionPoint(a.businessUnit),e.getDropOffLocation(),e.getBusinessUnitValue(a.businessUnit),!1})}catch(e){this.handleException("selectedRow",e,!0,!0)}}.observes("dataModel.deviceData.@each.checkItem"),OutComeChanged:function(){var e=this;e.get("_dropDownoutcomeList").forEach(function(t){t.key===e.dataModel.get("Outcome")&&e.set("OutcomeValue",t.value)})}.observes("dataModel.Outcome"),cSRObservationChanged:function(){var e=this,t=e.dataModel.get("CSRObservation");""!=t&&void 0!=t&&e.dataModel.set("isRepairQuote",!0),e.ClearOverrideData(),e.hideExtraControls()}.observes("dataModel.CSRObservation"),customerReportedFaultChanged:function(){var e=this;e.dataModel.set("RepairType",void 0),e.hideControls()}.observes("dataModel.CustomerReportedFault"),collectionPointChanged:function(){var e=this,t=e.get("dataModel.CollectionPoint");e.set("collectionPointName",void 0);var a=e.get("_dropDownCollectionPoint");$.each(a,function(a,o){t==o.key&&e.set("collectionPointName",o.value)})}.observes("dataModel.CollectionPoint"),minTwoDigits:function(e){return(e<10?"0":"")+e},getDeviceStatus:function(e){var t=this,a=t.get("_HardwareStatus");$.each(a,function(a,o){o.value==e&&t.set("deviceStatusCanonical",o.key)})},loadHardwareStatus:function(){var e=this;Komodo.Services.cachedDataService.fetch("HardwareStatus").done(function(t){null!=t&&e.set("_HardwareStatus",t)}).fail(function(){Komodo.log("[ERROR] : could not retrieve HardwareStatus from CDM")})},getBusinessUnit:function(e,t){var e=this;e.get("isBusinessUnitStockHandler")&&e.getHardwareLocationForGetBusinessUnit(t)},getDevicePlant:function(){var e=this;Komodo.Services.queryService.getJSON("/IccUserManagement/GetUserHardwareLocation?domainUserName="+Komodo.Services.securityService.get("domainUserName"),{async:!0}).done(function(t){null!=t&&void 0!=t&&e.set("Plant",t)}).fail(function(e){e=JSON.parse(e)})},getHardwareLocationForGetBusinessUnit:function(e){var t=this,a=t.get("_BUnitHLocationRelationship");if(null!=a&&void 0!=a)for(var o=t.getIccStockHandler(a),s=0;s<a.BusinessUnit.length;s++){var r=a.BusinessUnit[s];if(null!=r&&r.CanonicalKey==e)for(var n=r.HardwareLocations.HardwareLocation,i=0;i<n.length;i++){var c=n[i];if(c.ICCkey==o)return t.set("hLocation",c.SAPKey),t.set("_BusinessUnit",r.CanonicalValue),void t.set("_primeryCollectionPoint",c.HardwareLocationCK)}}},getIccStockHandler:function(e){var t=this;if(null!=e&&void 0!=e)for(var a=0;a<e.BusinessUnit.length;a++)for(var o=e.BusinessUnit[a],s=o.HardwareLocations.HardwareLocation,r=0;r<s.length;r++){var n=s[r];if(n.HardwareLocationCK==t.get("Plant"))return n.ICCkey}},formatDateForDatePicker:function(e,t){try{if(void 0!=e&&""!=e){var a=new Date(e);return a.setDate(a.getDate()+t),this.minTwoDigits(a.getDate())+"/"+this.minTwoDigits(a.getMonth()+1)+"/"+a.getFullYear()}}catch(t){return e}},retrieveHardware:function(){try{var e=this;this.getStockService().loadSingleDevice()&&null==e.dataModel.get("commercialSerialNumber")?this.getStockService().getUIService().showModalPopup("Commercial customer",void 0,{view:Komodo.Application.RetrieveHardwareSingleView,canUserClose:!1,context:this,shouldStartAndStopController:!1}):this.getStockService().retrieveHardware(this,e.get("processId"),e.dataModel.get("countryISO"),e.dataModel.get("customerID"),e.dataModel.get("commercialSerialNumber"),!0,function(t){var a=Komodo.canonicalFacadeFactory(t.Payload,["ListOfHardware"]);e.dataModel.deviceData.clear();var o,s=a.get("ListOfHardware");if(o=e.getArrayItem(s),!(o.length>0))return Komodo.Controls.MessageBoxController.show("No devices loaded","A customer with devices is required to perform this operation.",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"),void this.transitionToRoute("/manageViewing");null!=s?o.forEach(function(t){if(null!=t&&null!=t.ProductDetail&&"smartcard"!=t.ProductDetail.Type.toLowerCase()){var a=null;null!=t.ProductDetail&&(a=e.getHardwareModelDesc(t.ProductDetail.UID)),null==a&&(a=t.ProductDetail.Model),e.addItemToGridRow(e.dataModel.get("deviceData"),Komodo.Models.HardwaresDataGridMVModel.create({HardwareModelDesc:a,deviceSerialNo:t.SerialNumber,LinkedSC:t.LinkedSmartcard,WarrantyStatus:t.WarrantyStatus,SmartcardDetailUID:null!=t.SmartcardDetail?t.SmartcardDetail.UID:void 0,SmartcardDetailType:null!=t.SmartcardDetail?t.SmartcardDetail.Type:void 0,SmartcardDetailModel:null!=t.SmartcardDetail?t.SmartcardDetail.Model:void 0,ProductDetailName:null!=t.ProductDetail?t.ProductDetail.Name:void 0,FromModel:null!=t.ProductDetail?t.ProductDetail.Model:void 0,ProductDetailUID:null!=t.ProductDetail?t.ProductDetail.UID:void 0,ProductDetailType:null!=t.ProductDetail?t.ProductDetail.Type:void 0,deviceStatus:t.Status,InsuranceStatus:t.InsuranceStatus,insuranceStartDate:null!=t.InsuranceStartDate?e.formatDateForDatePicker(t.InsuranceStartDate,0):void 0,businessUnit:e.ExtractBusinessUnit(t)}))}}):Komodo.Controls.MessageBoxController.show("Branch Swap","<strong>No Device Found</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")})}catch(e){Komodo.Controls.MessageBoxController.show("Error","Error: "+e,Komodo.Controls.MessageBoxOkButtons,this,"retrieveHardwareError","danger")}},hasNoActiveServices:function(e,t){var a=this,o=a.dataModel.customerID;null==e||""==e?Komodo.Controls.MessageBoxController.show(kl.value("locale.manageStock:createRepairsOrder.activeService"),kl.value("locale.manageStock:createRepairsOrder.noSmartCardError"),Komodo.Controls.MessageBoxOkButton,a,"id5446674","danger"):Komodo.Services.queryService.getJSON("Device/GetCustomerProducts?customerID="+o+"&pageNumber=1&pageSize=1000000").done(function(o){var s=!1;if(null!=o&&void 0!=o)for(var r=0;r<o.length;r++){if(null!=o[r].Services&&void 0!=o[r].Services)for(var n=0;n<o[r].Services.length;n++)a.compareSerialNumber(o[r].Services[n].ProvisionedDevices,e,t)&&"Principal"==o[r].Services[n].Type&&"BOXOFFICE"!=o[r].Services[n].ServiceName&&"Active"==o[r].Services[n].Status&&(s=!0);if(null!=o[r].SecondaryDevices&&void 0!=o[r].SecondaryDevices)for(var i=0;i<o[r].SecondaryDevices.length;i++)if(null!=o[r].SecondaryDevices[i].Services&&void 0!=o[r].SecondaryDevices[i].Services)for(var n=0;n<o[r].SecondaryDevices[i].Services.length;n++)a.compareSerialNumber(o[r].SecondaryDevices[i].Services[n].ProvisionedDevices,e)&&"Principal"==o[r].SecondaryDevices[i].Services[n].Type&&"BOXOFFICE"!=o[r].SecondaryDevices[i].Services[n].ServiceName&&"Active"==o[r].SecondaryDevices[i].Services[n].Status&&(s=!0)}if(s){Komodo.Controls.MessageBoxController.show(kl.value("locale.manageStock:createRepairsOrder.activeService"),kl.value("locale.manageStock:createRepairsOrder.suspendService"),Komodo.Controls.MessageBoxOkButton,a,"id5446674","danger").response=function(e){"ok"==e&&a.transitionToRoute("/cancelPackages")}}else a.generateQuotesWithOverride()}).error(function(e){var t=JSON.stringify(e);Komodo.log("Notify Owner ajax call failed. Error: "+t)})},compareSerialNumber:function(e,t,a){var o="";if(o=isNaN(t)?a:t,e.indexOf(";")){for(var s=e.split(";"),r=0;r<s.length;r++)if(s[r]==o)return!0;return!1}return e==o},publishcreateCustomerRepairOrder:function(){try{var e=this,t={Country:e.dataModel.get("countryISO"),Status:e.get("deviceStatusCanonical"),Plant:e.get("Plant"),LocationSapKey:e.get("hLocation"),DeviceSerialNumber:e.dataModel.selectedDeviceGridItem.get("deviceSerialNo"),SmartCardSerialNumber:e.dataModel.selectedDeviceGridItem.get("LinkedSC"),ProblemCode:e.dataModel.CSRObservation};e.bus.send(t,"SAP.RepairDeviceService.Messages.v1.QuoteRepairCommand"),e.dataModel.set("isRepairQuote",!1)}catch(e){Komodo.Controls.MessageBoxController.show("Error","Error: "+e,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}},publishCreateCSRRepair:function(){try{var e=this,t=(e.get("_dropDowncsrobservationList"),e.dataModel.get("OutcomeValue"),{CreateDate:moment(new Date).format("YYYY-MM-DD"),CustomerId:e.dataModel.customerID,Description:e.get("OutcomeValue"),CustomerReportedFault:e.dataModel.get("CustomerReportedFault"),CSRRepairObservation:e.dataModel.get("Outcome"),SerialNumber:e.dataModel.selectedDeviceGridItem.get("deviceSerialNo"),SmartCardSerialNumber:e.dataModel.selectedDeviceGridItem.get("LinkedSC"),ReportedBy:Komodo.Services.securityService.session.domainUserName,SAPNotificationNumber:"",Plant:e.get("Plant"),LocationSapKey:e.get("hLocation"),SourceSystem:kl.value(e.localGeneral+"source")});e.bus.send(t,"MultiChoice.CsrRepairProcess.Messages.v1.CSRRepairCommand"),e.dataModel.set("isCreateRepair",!1)}catch(e){Komodo.Controls.MessageBoxController.show("Error","Error: "+e,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}},handlers:{"SAP.RepairDeviceService.Messages.v1.QuotedRepairEvent":function(e){var t=this,a=Komodo.Models.RepairMaterialQuote.create(),o=Komodo.Models.RepairMaterialQuotePrice.create(),s=[];e.price.priceTaxDetail.forEach(function(e){var t=Komodo.Models.RepairMaterialQuotePriceTaxDetail.create();t.set("TaxCode",e.taxCode),t.set("Value",e.value),s.addObject(t)}),o.set("NetValue",e.price.netValue),o.set("TaxValue",e.price.taxValue),o.set("GrossValue",e.price.grossValue),o.set("Currency",e.price.currency),o.set("PriceTaxDetail",s),e.price.priceTaxDetail.length>0&&(o.set("TaxCode",e.price.priceTaxDetail[0].taxCode),o.set("TaxPercentage",e.price.priceTaxDetail[0].value)),a.set("Plant",e.plant),a.set("PlantDescription",e.plantDescription),a.set("Material",e.material),a.set("MaterialDescription",e.materialDescription),a.set("Price",o),t.dataModel.set("RepairMaterialQuoteResponse",a),t.set("QuotePriceFromSAP",o),t.dataModel.set("isCollectionPoint",!0),t.dataModel.set("isGenerateQuote",!0),t.dataModel.set("isResponseMeessageFromMiddel",!0),t.dataModel.set("isFinalQuote",!0),e.price.grossValue>0?t.dataModel.set("isOverride",!0):t.dataModel.set("isOverride",!1),t.dataModel.set("isMoveToSwap",!0),t.dataModel.set("isMoveToCashSale",!0),t.dataModel.set("ResponseFinalQuote",kl.value(t.localGeneral+"finalQuoteString")+e.price.grossValue.toFixed(2)+" "+e.price.currency),t.dataModel.set("ResponseMessageFromMiddele",""),t.dataModel.set("ResponseMessageFromMiddele",kl.value(t.localGeneral+"preFinalQuoteString")+e.price.grossValue.toFixed(2)+" "+e.price.currency),t.set("dataModel.CollectionPoint",void 0!=t.get("_primeryCollectionPoint")?t.get("_primeryCollectionPoint"):t.get("Plant")),t.ClearOverrideData(),t.hideBusyIndicator()},"SAP.RepairDeviceService.Messages.v1.QuoteRepairFailureEvent":function(e){var t=this;t.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show("Error","Error: "+e.failureMessage,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"),t.dataModel.set("isRepairQuote",!0)},"SAP.RepairDeviceService.Messages.v1.DeviceRepairedThreeTimesFailureEvent":function(e){var t=this;t.hideBusyIndicator(),t.dataModel.set("ResponseMessageFromMiddele","");var a=Komodo.Application.ModalPaneController.create();t.registerModel("preRepairQuoteError",Komodo.Models.PreRepairQuoteModel),t.preRepairQuoteError.set("ErrorMessage",e.failureMessage),a.popup(kl.value(t.localRepairProcess+"moduleTitle"),"dataModel",{view:Komodo.Application.PreRepairPopupView,context:{data:t.preRepairQuoteError,moveToSwap:function(){t.swapCommon(),a.close()},moveToCashSale:function(){t.cashSaleCommon(),a.close()},canUserClose:!0,ok:function(){a.close()}}}),t.dataModel.set("isRepairQuote",!0)},"SAP.RepairDeviceService.Messages.v1.OpenServiceOrderFailureEvent":function(e){var t=this;t.hideBusyIndicator(),t.dataModel.set("isResponseMeessageFromMiddel",!0),t.dataModel.set("ResponseMessageFromMiddele",""),t.dataModel.set("ResponseMessageFromMiddele",e.failureMessage)},"SAP.RepairDeviceService.Messages.v1.UneconomicalToRepairFailureEvent":function(e){var t=this;t.hideBusyIndicator(),t.dataModel.set("ResponseMessageFromMiddele","");var a=Komodo.Application.ModalPaneController.create();t.registerModel("preRepairQuoteError",Komodo.Models.PreRepairQuoteModel),t.preRepairQuoteError.set("ErrorMessage",e.failureMessage),a.popup(kl.value(t.localRepairProcess+"moduleTitle"),"dataModel",{view:Komodo.Application.PreRepairPopupView,context:{data:t.preRepairQuoteError,moveToSwap:function(){t.swapCommon(),a.close()},moveToCashSale:function(){t.cashSaleCommon(),a.close()},canUserClose:!0,ok:function(){a.close()}}}),t.dataModel.set("isRepairQuote",!0)},"MultiChoice.RepairDeviceProcess.Messages.v1.RepairDeviceCommand":function(e){this.hideBusyIndicator()},"MultiChoice.RepairDeviceProcess.Messages.v1.CSRRepairEvent":function(e){var t=this;t.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(t.localRepairProcess+"moduleTitle"),kl.value(t.localRepairProcess+"csrsuccessmessage"),Komodo.Controls.MessageBoxOkButtons,t,"id5446675","success")},"MultiChoice.RepairDeviceProcess.Messages.v1.RepairDeviceCompletedEvent":function(e){var t=this;t.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(t.localRepairProcess+"moduleTitle"),e.quoteNumber+kl.value(t.localRepairProcess+"quotegeneratesuccessmsg"),Komodo.Controls.MessageBoxOkButtons,t,"id5446675","success").response=function(e){"ok"==e&&(t.resetScreen(),t.dataModel.set("selectedDeviceGridItem",void 0))}},"MultiChoice.RepairDeviceProcess.Messages.v1.RepairDeviceFailureEvent":function(e){var t=this;t.hideBusyIndicator(),t.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show("Error","Error: "+e.failureMessage,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")},"MultiChoice.CsrRepairProcess.Messages.v1.CSRRepairCompletedEvent":function(e){var t=this;t.hideBusyIndicator();var a=e.sapNotificationNumber?kl.value(t.localRepairProcess+"sAPNotification")+e.sapNotificationNumber+"<br>":"";Komodo.Controls.MessageBoxController.show(kl.value(t.localRepairProcess+"moduleTitle"),a+kl.value(t.localRepairProcess+"csrsuccessmessage"),Komodo.Controls.MessageBoxOkButtons,t,"id5446675","success").response=function(e){"ok"==e&&(t.resetScreen(),t.dataModel.set("selectedDeviceGridItem",void 0))}},"MultiChoice.CsrRepairProcess.Messages.v1.CSRRepairFailureEvent":function(e){var t=this;t.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show("Error","Error: "+e.failureMessage,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"),t.dataModel.set("isCreateRepair",!0)}},resetScreen:function(){var e=this;e.ResetGridData(),e.clearSelectedData()},messageSwapOrderGeneratedReceived:function(e){try{Komodo.Services.busyService.stop(this.get("processId"),"blocking");var t=this,a=e.ResponseMessage.Payload;if(t.dataModel.set("ReferenceID",""),t.dataModel.set("isVisibleReferenceID",!1),void 0!=a.ReferenceID){
t.dataModel.set("ReferenceID",a.ReferenceID),t.dataModel.set("isVisibleReferenceID",!0);Komodo.Controls.MessageBoxController.show("Repairs Order","<strong>Repairs order generated successfully. Reference: '"+a.ReferenceID+"'</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","success").response=function(e){"ok"==e&&t.transitionToRoute("/manageViewing")}}else Komodo.Controls.MessageBoxController.show("Repairs Order","<strong>Repairs order not successful.</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}catch(e){this.handleException("messageSwapOrderGeneratedReceived",e,!0,!0)}},setupGrid:function(){try{this._columnDeviceDataGrid=[Komodo.Controls.DataGridColumn.create({name:"HardwareModelDesc",title:kl.value("locale.manageStock:createRepairsOrder.deviceName"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"deviceSerialNo",title:kl.value("locale.manageStock:createRepairsOrder.deviceNumber"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"LinkedSC",title:kl.value("locale.manageStock:createRepairsOrder.linkedSmartcard"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"deviceStatus",title:kl.value("locale.manageStock:createRepairsOrder.deviceStatus"),width:"200px"}),Komodo.Controls.DataGridColumn.create({name:"InsuranceStatus",title:kl.value("locale.manageStock:createRepairsOrder.insurance"),width:"200px"}),Komodo.Controls.DataGridColumn.create({name:"insuranceStartDate",title:kl.value("locale.manageStock:performSwap.insuranceStartDate"),width:"120px"}),Komodo.Controls.DataGridRadioButtonColumn.create({name:"checkItem",title:kl.value("locale.manageStock:createRepairsOrder.repair"),displayType:"radiobutton",canEdit:!0,isAlwaysEditing:!0,width:"50px"})]}catch(e){this.handleException("setupGrid",e,!0,!0)}},addItemToGridRow:function(e,t){try{e.pushObject(t)}catch(e){this.handleException("addItemToGridRow",e,!0,!0)}},fillObjectFromCachedFileServiceArray:function(e,t,a){var o=$.Deferred();try{e.get(t).clear(),Komodo.Services.cachedDataService.fetch(a).done(function(a){$.each(a,function(a,o){e.get(t).addObject(o)}),o.resolve(a)}).fail(function(e){Komodo.Controls.MessageBoxController.show("Failed loading","<strong>Failed loading '"+dataListName+"'.</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"),o.reject(e)})}catch(e){this.handleException("fillObjectFromCachedFileService",e,!0,!0)}return o},getArrayItem:function(e){try{return $.makeArray(e)}catch(e){this.handleException("getArrayItem",e,!0,!0)}},handleException:function(e,t,a,o){try{var s="Error in function ["+e+"]. Exception: "+t+".";a&&(Komodo.log(s),null!=t&&null!=t.stack&&Komodo.log(t.stack)),o&&Komodo.Controls.MessageBoxController.show("An error has occurred",s,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}catch(e){Komodo.log(e)}},messageFailureMessageEventReceived:function(e){try{Komodo.Services.busyService.stop(this.get("processId"),"blocking"),"CreateInteraction"!=e.ResponseMessage.Payload.OriginatedEventName?Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"):Komodo.Controls.MessageBoxController.show(e.ResponseMessage.Payload.ListOfErrorDetails.ErrorType,"Problem has occurred while logging an activity in CRM.",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}catch(e){this.handleException("messageFailureMessageEventReceived",e,!0,!0)}},messageHandle:function(e,t){try{Komodo.Services.busyService.stop(this.get("processId"),"blocking"),null!=e&&null!=e.payload&&null!=e.payload.Header?Komodo.Controls.MessageBoxController.show("Message Received Failure",t+" Message type: '"+e.payload.Header.EventName+"', Process: '"+e.payload.Header.ProcessName+"'.",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"):(Komodo.UI.error("[messageHandle.messageFault] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show("A problem occurred","Message event name and/or process fields are null. Message = "+e.messageId,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"))}catch(e){this.handleException("messageHandle",e,!0,!0)}},messageReceived:function(e){try{this.messageHandle(e,"A successful message was received for the sender but there is no specific message for the received message event name.")}catch(e){this.handleException("messageReceived",e,!0,!0)}},messageDeliveryFailure:function(e){try{this.messageHandle(e,"Communication failure between the browser and webMethods broker generic publish. No specific delivery failure method for the given event name could be found.")}catch(e){this.handleException("messageDeliveryFailure",e,!0,!0)}},messageFault:function(e){try{this.messageHandle(e,"FaultException occurred in the broker indicating message can't be processed for message type. No fault method implementation.")}catch(e){this.handleException("messageFault",e,!0,!0)}},swapCommon:function(){Komodo.Services.uiService.transitionTo("swapMaterialAvailability")},cashSaleCommon:function(){Komodo.Services.uiService.transitionTo("createQuotation")},showBlockingBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,5e4,"blocking",this)},getCachedDataService:function(){return this.get("_cachedDataService")},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},validateUserClaim:function(e,t,a,o){var s=this,r=$.Deferred();return Komodo.Services.securityService.get("domainUserName")==t?(r.resolve(void 0),r):(s.getSecurityService().authenticate(e,t,a).done(function(e){var t=void 0;$(e.permissions).each(function(a,s){s===o&&(t=e.sessionToken)}),r.resolve(t)}).fail(function(e){r.resolve(void 0)}),r)},getSecurityService:function(){return this.get("_securityService")},chkSpecialCharecter:function(e){for(var t="!`@#$%^&*()+=-[]\\';,./{}|\":<>?~_",a=0;a<e.length;a++)if(-1!=t.indexOf(e.charAt(a)))return!1;return!0},ResetGridData:function(){var e=this.dataModel.get("deviceData"),t=this.dataModel.get("SearchDeviceData");if(e.length<t.length&&(e=t),null!=e&&e.length>0){var a=[];e.forEach(function(e){e.checkItem=!1,a.push(e)}),this.dataModel.set("deviceData",a)}},ClearOverrideData:function(){var e=this;e.quoteOverridden=!1,e.overrideSupervisorUserName="",e.overrideComment=""},sortData:function(e){e.sort(function(e,t){return e.value>t.value?1:e.value<t.value?-1:0})},getDropOffLocation:function(){var e=this;e.set("dropOffPointName",void 0);var t="";switch(e.get("isBusinessUnitStockHandler")){case!0:t=e.get("_primeryCollectionPoint");break;case!1:t=e.get("Plant")}var a=e.get("_dropDownCollectionPoint");$.each(a,function(a,o){t==o.key&&e.set("dropOffPointName",o.value)})},ExtractBusinessUnit:function(e){for(var t=e.ProductDetail.ProductFeatures,a=0;a<t.length;a++)if("BusinessUnit"==t[a].Value)return t[a].Description},ExtraxtLocationSAPKeyFromDevice:function(){var e=this;return 1==e.get("isBusinessUnitStockHandler")?(e.getHardwareLocationForGetBusinessUnit(e.dataModel.selectedDeviceGridItem.get("businessUnit")),e.get("hLocation")):""},getBusinessUnitValue:function(e){try{var t=this,a=t.get("_cdmBusinessUnit");null!=a&&$.each(a,function(a,o){o.key==e&&t.set("_BusinessUnit",o.value)})}catch(e){Komodo.log("[ERROR] : "+e)}},loadBusinessUnit:function(){var e=this;Komodo.Services.cachedDataService.fetch("BusinessUnit").done(function(t){null!=t&&e.set("_cdmBusinessUnit",t)}).fail(function(){Komodo.log("[ERROR] : could not retrieve BusinessUnit from CDM")})},loadFeatureToggleValueForBusinessUnit:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("SwapProcess","BusinessUnitLocation").done(function(t){t?(e.set("isBusinessUnitStockHandler",!0),e.loadHLocationBUnitRelationshaip()):(e.set("isBusinessUnitStockHandler",!1),e.loadCollectionPoint())}).fail(function(e){})},loadCollectionPoint:function(){try{var e=this;Komodo.Services.cachedDataService.fetch("HardwareLocationWithCollectionPoint").done(function(t){var a=JSON.parse(t);e.set("_collectionPointsvalueWithHLocation",a)}).fail(function(){Komodo.log("[ERROR] : could not retrieve HardwareLocationWithCollectionPoint from CDM")})}catch(e){this.handleException("getCollectionPoint",e,!0,!1)}},getCollectionPoint:function(){try{var e=this,t=e.get("_collectionPointsvalueWithHLocation"),a=t.HardwareLocations.HardwareLocation;void 0!=a.length||a.length>1?(a=a.sort(function(e,t){return e.CanonicalValue>t.CanonicalValue?1:e.CanonicalValue<t.CanonicalValue?-1:0}),$.each(a,function(t,a){1==a.IsCollectionPoint&&e.get("_dropDownCollectionPoint").addObject(Ember.Object.create({key:a.CanonicalKey,value:a.CanonicalValue}))})):e.get("_dropDownCollectionPoint").addObject(Ember.Object.create({key:a.CanonicalKey,value:a.CanonicalValue}))}catch(e){this.handleException("getCollectionPoint",e,!0,!1)}},getCollectionPointAccordingToBusinessUnits:function(e){var t=this,a=t.get("_BUnitHLocationRelationship");if(null!=a&&void 0!=a)for(var o=0;o<a.BusinessUnit.length;o++){var s=a.BusinessUnit[o];if(null!=s&&s.CanonicalKey==e){var r=s.HardwareLocations.HardwareLocation;void 0!=r.length||r.length>1?(r=r.sort(function(e,t){return e.HardwareCV>t.HardwareCV?1:e.HardwareCV<t.HardwareCV?-1:0}),$.each(r,function(e,a){1==a.IsCollectionPoint&&t.get("_dropDownCollectionPoint").addObject(Ember.Object.create({key:a.HardwareLocationCK,value:a.HardwareCV}))})):t.get("_dropDownCollectionPoint").addObject(Ember.Object.create({key:r.HardwareLocationCK,value:r.HardwareCV}))}}},loadHLocationBUnitRelationshaip:function(){var e=this;Komodo.Services.cachedDataService.fetch("BusinessUnitHardwareLocationRelationship").done(function(t){if(null!=t){var a=JSON.parse(t);e.set("_BUnitHLocationRelationship",a.BusinessUnits)}}).fail(function(t){e.handleException("Failed to load BusinessUnitHardwareLocationRelationship",t,!0,!1)})},loadCDMDatasets:function(){var e=this;e.loadBusinessUnit(),e.loadCSRFaultObservation(),e.loadCustomerreportedFault(),e.loadFeatureToggleValueForBusinessUnit(),e.loadHardwareStatus(),e.loadRepairObservation()}}),Komodo.Application.CustomerUnwantedController=Komodo.UI.Controller.extend({_localGeneral:"locale.manageStock:general.",_localeUnwanted:"locale.manageStock:CustomerUnwanted.",_columnDeviceDataGrid:[],_cacheHardwareModelDesc:[],_searchString:void 0,_SearchDeviceData:[],_isCollapsableCustomerUnwanted:!1,_isReturnDevice:!1,_allCollectionPoint:void 0,_HardwareLocation:[],_BUnitHLocationRelationship:[],_businessUnitAvailable:!1,init:function(){var e=this;try{e._super(),Komodo.log("Constructing Initiate Unwanted controller."),e.set("Plant",""),e.set("hLocation",""),e.set("_allCollectionPoint",void 0),e.requiresDependency("_stockService",{singleton:Komodo.Services.stockService}),e.requiresDependency("_securityService",{singleton:Komodo.Services.securityService})}catch(t){e.handleException("init - Initiate Unwanted",t,!0,!0)}},start:function(){try{this._super();var e=this;e.registerModel("dataModel",Komodo.Models.CustomerUnwanted),e.hideViewControls(),Komodo.Services.featureToggleService.isEnabled("ManageViewing","NewRepairProcess").done(function(t){t?e.showViewControls():e.handleException("NewRepairProcess_FeatureToggle","Disabled or not exist for the Loggedin Country",!0,!1)}).fail(function(e){Komodo.Services.error("Error while checking feature toggle. Error Details:"+e)})}catch(e){this.handleException("start",e,!0,!0)}},stop:function(){this._super()},actions:{actionFilterDevice:function(){var e=this,t=e.get("_searchString").trim(),a=e.get("_SearchDeviceData");if(""!==t&&e.isContainsSpecialCharecter(t)){null!==a&&a.length<=0&&(e.set("_SearchDeviceData",e.dataModel.get("deviceData")),a=e.dataModel.get("deviceData"));var o=[];null!==a&&a.length>0&&(a.forEach(function(e){t!==e.deviceSerialNo&&t!==e.LinkedSC||(e.checkItem=!1,o.push(e))}),e.dataModel.set("deviceData",o))}else e.resetGridData()},actionClearDevice:function(){var e=this;e.set("_searchString",""),e.dataModel.set("selectedDeviceGridItem",void 0),e.resetGridData()},actionReturnDevice:function(){var e=this;void 0!=e.dataModel.selectedDeviceGridItem&&0!=e.dataModel.selectedDeviceGridItem.get("checkItem")||Komodo.Controls.MessageBoxController.show(kl.value(e._localeUnwanted+"title"),k1.value(e._localeUnwanted+"selectDeviceError"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"),void 0==e.get("hardwareLocation")||null==e.get("hardwareLocation")?Komodo.Controls.MessageBoxController.show(kl.value(e._localeUnwanted+"title"),kl.value(e._localeUnwanted+"noStockHandlerError"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"):e.csrValidationForUnwantedProcess()},backDeviceSingle:function(){var e=this;try{Komodo.Services.busyService.start(!0,e.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,this._messageTimeout,"blocking",this),Komodo.Services.busyService.stop(e.get("processId"),"blocking"),this.transitionToRoute("/home")}catch(t){e.handleException("backDeviceSingle",t,!0,!0)}},searchDeviceSingle:function(){var e=this;try{if(!e.canSubmitData(e.get("dataModel"),"Serial Number",{group:"commercial",showInModal:!1}))return;e.retrieveHardware()}catch(t){e.handleException("searchDeviceSingle",t,!0,!0)}}},handlers:{"MultiChoice.CustomerUnwantedProcess.Messages.v1.CustomerUnwantedCompletedEvent":function(e){var t=this;try{t.hideBusyIndicator();var a=kl.value(t._localeUnwanted+"sucessMessageHead")+"<br/>"+kl.value(t._localeUnwanted+"sucessMessageBody")+e.serialNumber+"<br/>"+kl.value(t._localeUnwanted+"sucessMessageTrail");Komodo.Controls.MessageBoxController.show(kl.value(t._localeUnwanted+"moduleTitle"),a,Komodo.Controls.MessageBoxOkButtons,t,"id5446675","success").response=function(e){"ok"==e&&(t.dataModel.set("selectedDeviceGridItem",void 0),t.resetGridData())}}catch(e){t.handleException("CustomerUnwantedCompletedEvent",e,!0,!1)}},"MultiChoice.CustomerUnwantedProcess.Messages.v1.CustomerUnwantedFailureEvent":function(e){var t=this;try{t.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(t._localeUnwanted+"moduleTitle"),"Error: "+e.failureMessage,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}catch(e){t.handleException("CustomerUnwantedFailureEvent",e,!0,!1)}}},publishReturnDevice:function(){try{var e=this,t={SerialNumber:e.dataModel.selectedDeviceGridItem.get("deviceSerialNo"),DeviceModelName:e.dataModel.selectedDeviceGridItem.get("HardwareModelDesc"),DeviceName:e.dataModel.selectedDeviceGridItem.get("HardwareModelDesc"),DeviceType:"DECODER",HardwareStatus:e.dataModel.selectedDeviceGridItem.get("deviceStatus"),SmartCardNumber:e.dataModel.selectedDeviceGridItem.get("LinkedSC"),SmartCardName:e.dataModel.selectedDeviceGridItem.get("ProductDetailName"),SmartCardModel:e.dataModel.selectedDeviceGridItem.get("FromModel"),SmartCardType:e.dataModel.selectedDeviceGridItem.get("SmartcardDetailType"),HardwareLocationName:e.get("hardwareLocation"),HardwareLocationId:e.get("Plant"),HardwareStatus:e.dataModel.selectedDeviceGridItem.get("deviceStatus"),LocationSapKey:e.get("hLocation"),SourceSystem:kl.value(e._localGeneral+"source"),CurrentDate:moment(new Date).format("YYYY-MM-DD"),CustomerId:e.dataModel.get("customerID"),CustomerType:"Residential"};e.bus.send(t,"MultiChoice.CustomerUnwantedProcess.Messages.v1.CustomerUnwantedCommand")}catch(e){this.handleException("publishReturnDevice",e,!0,!1)}},csrValidationForUnwantedProcess:function(){var e=this;Komodo.Controls.MessageBoxController.show(kl.value(e._localeUnwanted+"moduleTitle"),kl.value(e._localeUnwanted+"confirmationMessage"),Komodo.Controls.MessageBoxYesNoButtons,this,"id5446673","").response=function(t){if("yes"==t)return void e.hasNoActiveServices(e.dataModel.selectedDeviceGridItem.get("LinkedSC"),e.dataModel.selectedDeviceGridItem.get("deviceSerialNo"));t="no"}},gridSelectedRow:function(){var e=this;try{$.each(e.get("dataModel.deviceData"),function(t,a){null!=a.checkItem&&1==a.checkItem&&(e.dataModel.set("selectedDeviceGridItem",a),e.getBusinessUnit(e,a.businessUnit),e.getCollectionPoint())})}catch(t){e.handleException("gridSelectedRow",t,!0,!0)}}.observes("dataModel.deviceData.@each.checkItem"),registerValidations:function(){this.registerValidator(this,"_searchString",{isRequired:!1,displayName:kl.value("locale.associateProducts:associateProducts.smartCardOrDeviceNo"),minLength:7,maxLength:15,functions:Komodo.UI.Validators.alphanumericValidator})},hideViewControls:function(){var e=this;e.set("_isCollapsableCustomerUnwanted",!1),e.set("_isReturnDevice",!1)},showViewControls:function(){var e=this;e.set("_isCollapsableCustomerUnwanted",!0),e.set("_isReturnDevice",!0),e.dataModel.set("commercialSerialNumber",null),e.set("_searchString",""),e.set("_HardwareLocation",[]),e.set("_BUnitHLocationRelationship",[]),e.set("_businessUnitAvailable",!1),e.set("hLocation",void 0),e.gridSetup(),e.registerValidations(),e.getDevicePlant();var t=Komodo.Services.customerProfileService;if(void 0==t.getCustomerPersonalDetail()){return void(Komodo.Controls.MessageBoxController.show(kl.value(e._localeUnwanted+"moduleTitle"),kl.value(e._localGeneral+"reuiredCustomerError"),Komodo.Controls.MessageBoxOkButtons,e,"id5446673","danger").response=function(e){"ok"==e&&Komodo.Services.uiService.transitionTo("home")})}e.dataModel.set("customerID",t.getCustomerPersonalDetail().customerNo),e.getStockService().setCountryISO(this.get("dataModel"),"countryISO",function(){e.retrieveHardware()}),e.loadHardwareLoacation(),e.loadFeatureToggleForBusinessUnit()},gridSetup:function(){var e=this;try{e._columnDeviceDataGrid=[Komodo.Controls.DataGridColumn.create({name:"HardwareModelDesc",title:kl.value("locale.manageStock:createRepairsOrder.deviceName"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"deviceSerialNo",title:kl.value("locale.manageStock:createRepairsOrder.deviceNumber"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"LinkedSC",title:kl.value("locale.manageStock:createRepairsOrder.linkedSmartcard"),width:"120px"}),Komodo.Controls.DataGridColumn.create({name:"deviceStatus",title:kl.value("locale.manageStock:createRepairsOrder.deviceStatus"),width:"200px"}),Komodo.Controls.DataGridColumn.create({name:"InsuranceStatus",title:kl.value("locale.manageStock:createRepairsOrder.insurance"),width:"200px"}),Komodo.Controls.DataGridColumn.create({name:"insuranceStartDate",title:kl.value("locale.manageStock:performSwap.insuranceStartDate"),width:"120px"}),Komodo.Controls.DataGridRadioButtonColumn.create({name:"checkItem",title:kl.value("locale.manageStock:CustomerUnwanted.return"),displayType:"radiobutton",canEdit:!0,isAlwaysEditing:!0,width:"50px"})]}catch(t){e.handleException("setupGrid",t,!0,!0)}},addItemToGridRow:function(e,t){try{e.pushObject(t)}catch(e){this.handleException("addItemToGridRow",e,!0,!0)}},getStockService:function(){return this.get("_stockService")},getArrayItem:function(e){try{return $.makeArray(e)}catch(e){this.handleException("getArrayItem",e,!0,!0)}},handleException:function(e,t,a,o){try{var s="Error in function ["+e+"]. Exception: "+t+".";a&&(Komodo.log(s),null!=t&&null!=t.stack&&Komodo.log(t.stack)),o&&Komodo.Controls.MessageBoxController.show(kl.value(me._localGeneral+"error"),s,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")}catch(e){Komodo.log(e)}},getHardwareModelDesc:function(e){var t=this;try{var a=null;return $.each(t._cacheHardwareModelDesc,function(t,o){if(o.key==e)return a=o.value,!1}),Komodo.log("Data not found in function [getHardwareModelDesc] for hardwareModelID: "+e),a}catch(e){t.handleException("getHardwareModelDesc",e,!0,!0)}},showBlockingBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,45e4,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},isContainsSpecialCharecter:function(e){for(var t="!`@#$%^&*()+=-[]\\';,./{}|\":<>?~_",a=0;a<e.length;a++)if(-1!=t.indexOf(e.charAt(a)))return!1;return!0},retrieveHardware:function(){try{var e=this;this.getStockService().loadSingleDevice()&&null==e.dataModel.get("commercialSerialNumber")?this.getStockService().getUIService().showModalPopup("Commercial customer",void 0,{view:Komodo.Application.RetrieveHardwareSingleView,canUserClose:!1,context:this,shouldStartAndStopController:!1}):this.getStockService().retrieveHardware(this,e.get("processId"),e.dataModel.get("countryISO"),e.dataModel.get("customerID"),e.dataModel.get("commercialSerialNumber"),!0,function(t){var a=Komodo.canonicalFacadeFactory(t.Payload,["ListOfHardware"]);e.dataModel.deviceData.clear();var o,s=a.get("ListOfHardware");if(o=e.getArrayItem(s),!(o.length>0))return void Komodo.Controls.MessageBoxController.show(kl.value(e._localeUnwanted+"noDevicesLoaded"),kl.value(e._localGeneral+"rquiredCustomerDevice"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger");null!=s?o.forEach(function(t){if(null!=t&&null!=t.ProductDetail&&"smartcard"!=t.ProductDetail.Type.toLowerCase()){var a=null;null!=t.ProductDetail&&(a=e.getHardwareModelDesc(t.ProductDetail.UID)),null==a&&(a=t.ProductDetail.Model),e.addItemToGridRow(e.dataModel.get("deviceData"),Komodo.Models.HardwaresDataGridMVModel.create({HardwareModelDesc:a,deviceSerialNo:t.SerialNumber,LinkedSC:t.LinkedSmartcard,WarrantyStatus:t.WarrantyStatus,SmartcardDetailUID:null!=t.SmartcardDetail?t.SmartcardDetail.UID:void 0,SmartcardDetailType:null!=t.SmartcardDetail?t.SmartcardDetail.Type:void 0,SmartcardDetailModel:null!=t.SmartcardDetail?t.SmartcardDetail.Model:void 0,ProductDetailName:null!=t.ProductDetail?t.ProductDetail.Name:void 0,FromModel:null!=t.ProductDetail?t.ProductDetail.Model:void 0,ProductDetailUID:null!=t.ProductDetail?t.ProductDetail.UID:void 0,ProductDetailType:null!=t.ProductDetail?t.ProductDetail.Type:void 0,deviceStatus:t.Status,InsuranceStatus:t.InsuranceStatus,insuranceStartDate:null!=t.InsuranceStartDate?e.formatDateForDatePicker(t.InsuranceStartDate,0):void 0,businessUnit:e.ExtractBusinessUnit(t)}))}}):Komodo.Controls.MessageBoxController.show(kl.value(e._localeUnwanted+"title"),kl.value(e._localGeneral+"noDeviceError"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")})}catch(t){Komodo.Controls.MessageBoxController.show(kl.value(e._localGeneral+"error"),"Error: "+t,Komodo.Controls.MessageBoxOkButtons,this,"retrieveHardwareError","danger")}},resetGridData:function(){var e=this.dataModel.get("deviceData"),t=this.get("_SearchDeviceData");if(e.length<t.length&&(e=t),null!=e&&e.length>0){var a=[];e.forEach(function(e){e.checkItem=!1,a.push(e)}),this.dataModel.set("deviceData",a)}},loadFeatureToggleForBusinessUnit:function(){var t=this;Komodo.Services.featureToggleService.isEnabled("SwapProcess","BusinessUnitLocation").done(function(e){e&&(t.set("_businessUnitAvailable",e),t.loadBusinessUnitHardwareLocationRelationship())}).fail(function(a){t.handleException("getBusinessUnit",e,!0,!1)})},getBusinessUnit:function(e,t){e.get("_businessUnitAvailable")&&e.getHardwareLocationForGetBusinessUnit(t)},getDevicePlant:function(){var t=this;Komodo.Services.queryService.getJSON("/IccUserManagement/GetUserHardwareLocation?domainUserName="+Komodo.Services.securityService.get("domainUserName"),{async:!0}).done(function(a){null!=a?t.set("Plant",a):t.handleException("getDevicePlantNullValue",e,!0,!1)}).fail(function(a){a=JSON.parse(a),t.handleException(a,e,!0,!1)})},getHardwareLocationForGetBusinessUnit:function(e){var t=this,a=t.get("_BUnitHLocationRelationship");if(null!=a&&void 0!=a)for(var o=t.getIccStockHandler(a),s=0;s<a.BusinessUnit.length;s++){var r=a.BusinessUnit[s];if(null!=r&&r.CanonicalKey==e)for(var n=r.HardwareLocations.HardwareLocation,i=0;i<n.length;i++){var c=n[i];if(c.ICCkey==o)return void t.set("hLocation",c.SAPKey)}}},loadBusinessUnitHardwareLocationRelationship:function(){var t=this;Komodo.Services.cachedDataService.fetch("BusinessUnitHardwareLocationRelationship").done(function(e){var a=JSON.parse(e);t.set("_BUnitHLocationRelationship",a.BusinessUnits)}).fail(function(a){a=JSON.parse(a),t.handleException(a,e,!0,!1)})},getIccStockHandler:function(e){var t=this;if(null!=e&&void 0!=e)for(var a=0;a<e.BusinessUnit.length;a++)for(var o=e.BusinessUnit[a],s=o.HardwareLocations.HardwareLocation,r=0;r<s.length;r++){var n=s[r];if(n.HardwareLocationCK==t.get("Plant"))return n.ICCkey}},getCollectionPoint:function(){var e=this;try{e.set("_allCollectionPoint",void 0);var t=e.get("_HardwareLocation");if(null!=t){var a=e.get("Plant");$.each(t,function(t,o){a==o.key&&e.set("hardwareLocation",o.value)})}}catch(t){e.handleException("getCollectionPoint",t,!0,!1)}},loadHardwareLoacation:function(){var e=this;Komodo.Services.cachedDataService.fetch("HardwareLocation").done(function(t){null!=t&&e.set("_HardwareLocation",t)}).fail(function(){Komodo.log("[ERROR] : could not retrieve Hardware Location from CDM")})},ExtractBusinessUnit:function(e){for(var t=e.ProductDetail.ProductFeatures,a=0;a<t.length;a++)if("BusinessUnit"==t[a].Value)return t[a].Description},ExtractCustomerType:function(){for(var e=Komodo.Services.customerProfileService,t=e.customerClass,a=0;a<t.length;a++)if(t[a].key==e.currentCustomerDetails.ResponseMessage.Payload.CustomerDetail.Class)return t[a].value},hasNoActiveServices:function(t,a){var o=this,s=o.dataModel.customerID;null==t||""==t?Komodo.Controls.MessageBoxController.show(kl.value("locale.manageStock:createRepairsOrder.activeService"),kl.value("locale.manageStock:createRepairsOrder.noSmartCardError"),Komodo.Controls.MessageBoxOkButton,o,"id5446674","danger"):Komodo.Services.queryService.getJSON("Device/GetCustomerProducts?customerID="+s+"&pageNumber=1&pageSize=1000000").done(function(e){var s=!0;if(null!=e&&void 0!=e)for(var r=0;r<e.length;r++){var n=e[r].Services;if(null!=n&&void 0!=n)for(var i=0;i<n.length;i++){var c=n[i].Status;o.compareSerialNumber(n[i].ProvisionedDevices,t,a)&&"BOXOFFICE"!=n[i].ServiceName&&"Cancelled"!=c&&"Free"!=c&&"Free View Pending Activation"!=c&&"Free View Active"!=c&&(s=!1)}var l=e[r].SecondaryDevices;if(null!=l&&void 0!=l)for(var i=0;i<l.length;i++){var d=l[i].Services;if(null!=d&&void 0!=d)for(var u=0;u<d.length;u++){var h=d[u].Status;o.compareSerialNumber(d[u].ProvisionedDevices,t)&&"Principal"==d[u].Type&&"BOXOFFICE"!=d[u].ServiceName&&"Cancelled"!=h&&"Free"!=h&&"Free View Pending Activation"!=h&&"Free View Active"!=h&&(s=!1)}}}s?(o.showBlockingBusyIndicator(),o.publishReturnDevice()):Komodo.Controls.MessageBoxController.show(kl.value("locale.manageStock:CustomerUnwanted.cancelService"),kl.value("locale.manageStock:CustomerUnwanted.suspendService"),Komodo.Controls.MessageBoxOkButton,o,"id5446674","danger")}).error(function(t){var a=JSON.stringify(t);o.handleException(a,e,!0,!1)})},compareSerialNumber:function(e,t,a){var o="";if(o=isNaN(t)?a:t,e.indexOf(";")){for(var s=e.split(";"),r=0;r<s.length;r++)if(s[r]==o)return!0;return!1}return e==o}}),Komodo.Application.BulkChangeDeviceOwnershipController=Komodo.UI.Controller.extend({_pageSize:5,_isDeviceDataObservable:!1,_pagesLoaded:[],_loadedData:[],init:function(){this._super();var e=this;Komodo.log(e.getLocalizationService().value("locale.manageStock:bulkChangeDeviceOwnership.logInit")),this.set("processVersion","v1.1"),this.set("processName","Bulk Change Device Ownership"),this.requiresDependency("_stockService",{singleton:Komodo.Services.stockService}),this.requiresDependency("_localizationService",{singleton:Komodo.Services.localizationService})},start:function(){this._super(),this.loadData()},stop:function(){this._super()},loadData:function(){var e=this;try{this.registerModel("dataModel",Komodo.Models.BulkChangeDeviceOwnershipModel);var t=Komodo.Services.ProductAndServiceMaintenanceHelper.create();if(!t.isCustomerIdIsAvailableToRetriveData())return Komodo.Controls.MessageBoxController.show(e.getLocalizationService().value("locale.manageStock:bulkChangeDeviceOwnership.error"),e.getLocalizationService().value("locale.manageStock:bulkChangeDeviceOwnership.messageLoadData2"),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"),void this.transitionToRoute("/manageViewing");if(e.dataModel.set("customerID",t.getCustomerIdToRetrieveData()),!this.getStockService().loadSingleDevice()){return void(Komodo.Controls.MessageBoxController.show(e.getLocalizationService().value("locale.manageStock:bulkChangeDeviceOwnership.error"),"<strong>"+e.getLocalizationService().value("locale.manageStock:bulkChangeDeviceOwnership.messageLoadData")+"</strong><br/>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger").response=function(t){"ok"==t&&e.transitionToRoute("/manageViewing")})}e.dataModel.set("hasDocument",!1),e.resetGrid(),e.dataModel.screenSelectedOption=!0,this.getStockService().setCountryISO(e.dataModel,"countryISO",function(){e.retrieveCustomerCOODocuments()})}catch(e){this.getStockService().handleException("loadData",e,!0,!0)}},resetGrid:function(){var e=this;e.dataModel.set("DeviceData",[]),e._pageSize=5,e.set("dataModel.itemsPerPage",e._pageSize),e.set("dataModel.visiblePageCount",e._pageSize),e.dataModel.set("totalRows",1),e._pagesLoaded=[],e._loadedData=[],e._isDeviceDataObservable=!1},getStockService:function(){return this.get("_stockService")},getLocalizationService:function(){return this.get("_localizationService")},radioSelect:function(){var e=this;e.resetGrid(),"true"==e.dataModel.screenSelectedOption?(e.dataModel.screenSelectedOption=!0,e.retrieveGetCustomerProducts()):e.dataModel.screenSelectedOption=!1}.observes("dataModel.screenSelectedOption"),retrieveGetCustomerProducts:function(){var e=this;try{if(null==e.dataModel.get("customerID"))return;var t=!1;e._isDeviceDataObservable=!1,e.dataModel.set("DeviceData",[]);for(var a=0;a<e._pagesLoaded.length;a++)if(e._pagesLoaded[a]==e.dataModel.pageNumber){t=!0;break}t?e.loadDatatoGridForPage():(Komodo.Services.busyService.start(!0,e.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,6e4,"blocking",this),e.retrieveCustomerProductsWithPaging(e.dataModel.get("customerID"),e.dataModel.get("pageNumber"),e._pageSize,function(t,a){Komodo.Services.busyService.stop(e.get("processId"),"blocking"),null!=a?Komodo.Controls.MessageBoxController.show(e.getLocalizationService().value("locale.manageStock:bulkChangeDeviceOwnership.error"),e.getLocalizationService().value("locale.manageStock:bulkChangeDeviceOwnership.errorMessage")+": '"+a+"'</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger"):null!=t&&0==t.length?e.dataModel.set("totalRows",e.dataModel.get("totalRows")-1):(e.dataModel.set("totalRows",e.dataModel.get("totalRows")+t.length),$.each(t,function(t,a){e._loadedData.push(Ember.Object.create({deviceName:a.DeviceName,deviceModel:a.DeviceModelDescription,deviceNumber:a.SerialNumber,deviceStatus:a.Status,linkedSmartcard:a.LinkedSmartcard,linkedSmartcardStatus:a.LinkedSmartcardStatus,checkboxSelected:!1,value:a.SerialNumber+"_"+a.LinkedSmartcard,page:e.dataModel.pageNumber}))}),e._pagesLoaded.push(e.dataModel.pageNumber),e.loadDatatoGridForPage())}))}catch(e){this.getStockService().handleException("retrieveGetCustomerProducts",e,!0,!0)}finally{e._isDeviceDataObservable=!0}}.observes("dataModel.pageNumber"),loadDatatoGridForPage:function(){try{var e=this;$.each(e._loadedData,function(t,a){a.page==e.dataModel.pageNumber&&e.dataModel.get("DeviceData").pushObject(a)})}catch(e){this.getStockService().handleException("loadDatatoGridForPage",e,!0,!0)}},rowChanged:function(){try{var e=this;if(!e._isDeviceDataObservable)return;$.each(e.dataModel.DeviceData,function(t,a){$.each(e._loadedData,function(e,t){t.value==a.value&&(t.checkboxSelected=a.checkboxSelected)})})}catch(e){this.getStockService().handleException("rowChanged",e,!0,!0)}}.observes("dataModel.DeviceData.@each.checkboxSelected"),retrieveCustomerProductsWithPaging:function(e,t,a,o){try{var s=this;if(s.dataModel.screenSelectedOption){if(void 0==o)return;Komodo.Services.queryService.refreshUserData(),
Komodo.Services.queryService.getJSON("Device/GetCustomerProducts?customerID="+e+"&pageNumber="+t+"&pageSize="+a).done(function(e){o(e,null)}).error(function(e){o(null,s.getStockService().handleQueryServiceException(e))})}else Komodo.log("retrieveCustomerProductsWithPaging: Entering file section when source is database.")}catch(e){this.getStockService().handleException("retrieveCustomerProductsWithPaging",e,!0,!0)}},retrieveCustomerCOODocuments:function(){try{var e=this;this.dataModel.set("customerDocumentData",[]),this.getStockService().retrieveCustomerCOODocuments(this,e.get("processId"),e.dataModel.get("customerID"),function(t){var a=Komodo.canonicalFacadeFactory(t,["DocumentPayload"]),o=a.get("DocumentPayload"),s=!1,r="";if(null!=o&&o.length>0){var n=(new Date).toISOString().slice(0,10).replace(/-/g,"");o.forEach(function(e){if(e.DocumentURL.indexOf("BCO_COL",0)>0&&e.DocumentURL.indexOf(n,0)>0)return r=e.DocumentURL,s=!0,!0})}e.dataModel.set("hasDocument",s),e.dataModel.get("customerDocumentData").pushObject(Komodo.Models.CustomerDocumentsDataGridModel.create({documentType:"Change of Ownership Letter",documentFulfill:s,documentURL:r}))})}catch(e){this.getStockService().handleException("retrieveCustomerCOODocuments",e,!0,!0)}},actions:{pageSelected:function(e){this.set("dataModel.pageNumber",e.pageNumber)},bulkChangeDeviceOwnership:function(e){try{var t=this,a={};if(a.Country=t.dataModel.get("countryISO"),a.CustomerId=t.dataModel.get("customerID"),a.UserId=Komodo.Services.securityService.get("domainUserName").substring(3).replace(".","-"),a.LocationId=0,a.ListOfHardware={},a.ListOfHardware.Hardware=[],$.each(t._loadedData,function(e,t){if(1==t.checkboxSelected){var o={};o.SerialNumber=t.deviceNumber,a.ListOfHardware.Hardware.push(o)}}),0==t.dataModel.get("hasDocument"))Komodo.Controls.MessageBoxController.show(t.getLocalizationService().value("locale.manageStock:bulkChangeDeviceOwnership.warning"),"<strong>"+t.getLocalizationService().value("locale.manageStock:bulkChangeDeviceOwnership.messageBulkChangeDeviceOwnership")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning");else if(0==a.ListOfHardware.Hardware.length)Komodo.Controls.MessageBoxController.show(t.getLocalizationService().value("locale.manageStock:bulkChangeDeviceOwnership.warning"),"<strong>"+t.getLocalizationService().value("locale.manageStock:bulkChangeDeviceOwnership.messageBulkChangeDeviceOwnership2")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning");else{t.getStockService().publishRequestOnBus(this,this.get("processId"),a,"BulkRelinquishOwnership","v1"),Komodo.Services.busyService.stop(t.get("processId"),"blocking");var o=Komodo.Controls.MessageBoxController.show(t.getLocalizationService().value("locale.manageStock:bulkChangeDeviceOwnership.success"),"<strong>"+t.getLocalizationService().value("locale.manageStock:bulkChangeDeviceOwnership.messageBulkChangeDeviceOwnership3")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","success");o.response=function(e){"ok"==e&&t.transitionToRoute("/manageViewing")}}}catch(e){this.getStockService().handleException("ChangeDeviceOwnership",e,!0,!0)}},customerDocumentsModal:function(){try{this.getStockService().customerDocumentsModal("deviceSerialNo","deviceType",this.dataModel.get("deviceData"),!1,this)}catch(e){this.getStockService().handleException("customerDocumentsModal",e,!0,!0)}},readTextFile:function(e){try{var t=this;e.error&&($(".file-upload-item:last").remove(),Komodo.Controls.MessageBoxController.show(t.getLocalizationService().value("locale.manageStock:bulkChangeDeviceOwnership.error"),"<strong>"+t.getLocalizationService().value("locale.manageStock:bulkChangeDeviceOwnership.messageReadTextFile")+": "+e.error.message+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")),"text/plain"!==e.type&&"application/vnd.ms-excel"!==e.type?($(".file-upload-item:last").remove(),Komodo.Controls.MessageBoxController.show(t.getLocalizationService().value("locale.manageStock:bulkChangeDeviceOwnership.error"),"<strong>"+t.getLocalizationService().value("locale.manageStock:bulkChangeDeviceOwnership.messageReadTextFile2")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")):t.readFileContent(e.content)}catch(e){this.getStockService().handleException("readTextFile",e,!0,!0)}}},readFileContent:function(e){var t=this;try{var a=1,o=1,s=!1;if(t.resetGrid(),e){var r=e.split("\n"),n=t.validateData(r);null!=n?(s=!0,Komodo.Controls.MessageBoxController.show(t.getLocalizationService().value("locale.manageStock:bulkChangeDeviceOwnership.error"),"<strong>"+t.getLocalizationService().value("locale.manageStock:bulkChangeDeviceOwnership.messageReadFileContent")+":"+n+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")):$(r).each(function(e,s){if(e<r.length-1||null!==s&&""!==s){var n=s.substring(0,10).trim();t._loadedData.push(Ember.Object.create({deviceName:"",deviceModel:"",deviceNumber:n,deviceStatus:"",linkedSmartcard:"",linkedSmartcardStatus:"",checkboxSelected:!0,value:n+"_",page:o})),a>=t._pageSize?(t._pagesLoaded.push(o),o++,a=1):a++}})}else s=!0,Komodo.Controls.MessageBoxController.show(t.getLocalizationService().value("locale.manageStock:bulkChangeDeviceOwnership.error"),"<strong>"+t.getLocalizationService().value("locale.manageStock:bulkChangeDeviceOwnership.messageReadFileContent2")+"</strong>",Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger");s?$(".file-upload-item:last").remove():(t.dataModel.set("totalRows",t._loadedData.length),t._pagesLoaded.push(o),t.retrieveGetCustomerProducts())}catch(e){this.getStockService().handleException("readFileContent",e,!0,!0)}},validateData:function(e){var t=null;try{$(e).each(function(a,o){if((a<e.length-1||null!==o&&""!==o)&&(null===o||""===o||o.length<6))return t="Line: "+(a+1)+". Row data: "+o,!1})}catch(e){this.getStockService().handleException("validateData",e,!0,!0)}return t},messageReceived:function(e){this.getStockService().messageReceived(e)},messageDeliveryFailure:function(e){this.getStockService().messageDeliveryFailure(e)},messageFault:function(e){this.getStockService().messageFault(e)},messageFailureMessageEventReceived:function(e){this.getStockService().messageFailureMessageEventReceived(this.get("processId"),e)},messageHandle:function(e,t){this.getStockService().messageHandle(this.get("processId"),e)}}),Komodo.Services.localizationService.registerNamespace("locale.manageviewing"),Komodo.Services.localizationService.registerNamespace("locale.manageviewing.boxOffice"),Komodo.Services.localizationService.registerNamespace("locale.manageStock");