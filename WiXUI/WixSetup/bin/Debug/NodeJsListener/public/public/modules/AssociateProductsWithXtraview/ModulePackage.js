Komodo.Application.AssociateProductsRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"associateProducts",useCaseDisplayName:"Link Products",renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("associateProducts",{controller:"associateProducts"})},init:function(){this._super()}}),Komodo.Application.DeviceAtAnotherLocationRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"deviceAtAnotherLocation",useCaseDisplayName:"Device At Another Location",renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("deviceAtAnotherLocation",{controller:"deviceAtAnotherLocation"})},init:function(){this._super()}}),Komodo.Application.CommercialAssociateProductsRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"commercialAssociateProducts",useCaseDisplayName:"Link Commercial Products",renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("commercialAssociateProducts",{controller:"commercialAssociateProducts"})},init:function(){this._super()}}),Komodo.Application.CommercialAddProductsRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"commercialAddProducts",useCaseDisplayName:"Add Commercial Products",renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("commercialAddProducts",{controller:"commercialAddProducts"})},init:function(){this._super()}}),Komodo.Application.CommercialActivationSummaryRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"commercialActivationSummary",useCaseDisplayName:"Activation Summary",renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("commercialActivationSummary",{controller:"commercialActivationSummary"})},init:function(){this._super()}}),Komodo.Application.CsiAssociateProductsRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"csiAssociateProducts",useCaseDisplayName:"Link CSI Products",renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("csiAssociateProducts",{controller:"csiAssociateProducts"})},init:function(){this._super()}}),Komodo.Application.CsiAddProductsRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"csiAddProducts",useCaseDisplayName:"Add CSI Products",renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("csiAddProducts",{controller:"csiAddProducts"})},init:function(){this._super()}}),Komodo.Application.CsiActivationSummaryRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"csiActivationSummary",useCaseDisplayName:"Activation Summary",renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("csiActivationSummary",{controller:"csiActivationSummary"})},init:function(){this._super()}}),Komodo.Application.XtraViewRoute=Komodo.UI.RestrictedRoute.extend({useCaseName:"xtraView",useCaseDisplayName:"XtraView",renderTemplate:function(){this.render("customerProfileContainer",{outlet:"summaryDetails",controller:"customerProfileContainer"}),this.render("xtraView",{controller:"xtraView"})},init:function(){this._super()}}),Komodo.UI.Route.registerRoutes(function(){this.resource("associateProducts"),this.resource("deviceAtAnotherLocation"),this.resource("xtraView"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"associateProducts",title:kl.value("locale.associateProducts:associateProducts.useCaseTitle"),type:Komodo.NavigationTypes.Normal,desiredLocation:1}),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"xtraView",title:"XtraView",type:Komodo.NavigationTypes.Normal,desiredLocation:2}),Komodo.Services.eventAggregator.subscribe("deviceAtAnotherLocationRedirect",function(e){associateProductsController=Komodo.Services.uiService.getController("associateProducts"),Komodo.Services.uiService.transitionTo("associateProducts"),associateProductsController.deviceAtAnotherLocationDataReceived(e)}),Komodo.Services.eventAggregator.subscribe("deviceAtAnotherLocation",function(e){Komodo.Services.uiService.transitionTo("deviceAtAnotherLocation")}),this.resource("commercialActivationSummary"),this.resource("commercialAddProducts"),this.resource("commercialAssociateProducts"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"commercialAssociateProducts",title:kl.value("locale.commercialcustomer:addDevicesAndPackages.useCaseTitle"),type:Komodo.NavigationTypes.Normal,desiredLocation:20,customType:Komodo.NavigationGroupNames.CustomerSubType.Commercial,display:!1}),this.resource("csiActivationSummary"),this.resource("csiAddProducts"),this.resource("csiAssociateProducts"),Komodo.Services.navigationService.register({groupName:Komodo.NavigationGroupNames.ManageViewing,routeName:"csiAssociateProducts",title:kl.value("locale.csicustomer:addDevicesAndPackages.useCaseTitle"),type:Komodo.NavigationTypes.Normal,desiredLocation:26,customType:Komodo.NavigationGroupNames.CustomerSubType.Csi,display:!1})}),Ember.TEMPLATES.XtraViewView=Ember.Handlebars.template(function(e,t,a,s,o){function r(e,t){var s,o,r;return t.buffer.push("\r\n        "),t.buffer.push(O(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.addedDevices~",class:"sub-heading",tabindex:"3"},hashTypes:{text:"STRING",class:"STRING",tabindex:"STRING"},hashContexts:{text:e,class:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        <div class="table-responsive">\r\n            <table id="tableaddedDevices" class="table table-bordered komodo-datagrid" width="100%">\r\n                <tbody>\r\n                    <tr>\r\n                        <th>'),t.buffer.push(O((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:viewingGridColumnHeaders.deviceNumber",r):N.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.deviceNumber",r)))),t.buffer.push("</th>\r\n                        <th>"),t.buffer.push(O((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:viewingGridColumnHeaders.principalPackageName",r):N.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.principalPackageName",r)))),t.buffer.push("</th>\r\n                        <th>"),t.buffer.push(O((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:viewingGridColumnHeaders.princpalStatus",r):N.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.princpalStatus",r)))),t.buffer.push("</th>\r\n                        <th>"),t.buffer.push(O((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:viewingGridColumnHeaders.addonPackageName",r):N.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.addonPackageName",r)))),t.buffer.push("</th>\r\n                        <th>"),t.buffer.push(O((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:viewingGridColumnHeaders.addonStatus",r):N.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.addonStatus",r)))),t.buffer.push("</th>\r\n                        <th>"),t.buffer.push(O((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:viewingGridColumnHeaders.services",r):N.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.services",r)))),t.buffer.push("</th>\r\n                        <th>"),t.buffer.push(O((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:viewingGridColumnHeaders.servicesStatus",r):N.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.servicesStatus",r)))),t.buffer.push("</th>\r\n                    </tr>\r\n                    "),s=a.each.call(e,"account","in","customerAccountDetail",{hash:{},hashTypes:{},hashContexts:{},inverse:B.noop,fn:B.program(2,i,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n\r\n                    "),s=a.each.call(e,"pcboItem","in","pcboList",{hash:{},hashTypes:{},hashContexts:{},inverse:B.noop,fn:B.program(6,d,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        "),""}function i(e,t){var s;return t.buffer.push("\r\n                    "),s=a.each.call(e,"agreement","in","account.ListOfAgreement.Agreement",{hash:{},hashTypes:{},hashContexts:{},inverse:B.noop,fn:B.program(3,n,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                    "),""}function n(e,t){var s;return t.buffer.push("\r\n                    "),s=a.each.call(e,"hardware","in","agreement.ListOfHardware.Hardware",{hash:{},hashTypes:{},hashContexts:{},inverse:B.noop,fn:B.program(4,c,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                    "),""}function c(e,t){var s,o;return t.buffer.push("\r\n                    <tr>\r\n                        "),t.buffer.push(O((s=a.deviceGridRowHelper||e&&e.deviceGridRowHelper,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e,e,e,e],types:["ID","ID","ID","ID"],data:t},s?s.call(e,"hardware","agreement.Type","account.Type","agreement.UID",o):N.call(e,"deviceGridRowHelper","hardware","agreement.Type","account.Type","agreement.UID",o)))),t.buffer.push("\r\n                    </tr>\r\n                    "),""}function d(e,t){return t.buffer.push("\r\n                    <tr>\r\n                        <td>-</td>\r\n                        <td>-</td>\r\n                        <td>-</td>\r\n                        <td>-</td>\r\n                        <td>-</td>\r\n                        <td> "),t.buffer.push(O(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:xtraView.pcbo~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n                        <td>-</td>\r\n                    </tr>\r\n                    "),""}function l(e,t){var s;return t.buffer.push("\r\n        "),t.buffer.push(O(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{contentBinding:"radioButtonXtraView",displayPath:"title",valuePath:"value",valueBinding:"xtraViewSelection"},hashTypes:{contentBinding:"STRING",displayPath:"STRING",valuePath:"STRING",valueBinding:"STRING"},hashContexts:{contentBinding:e,displayPath:e,valuePath:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n\r\n        <table width="550px">\r\n            <tbody>\r\n                '),s=a.if.call(e,"xtraviewSecondPoint",{hash:{},hashTypes:{},hashContexts:{},inverse:B.program(11,h,t),fn:B.program(9,u,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\r\n\r\n                <tr valign="middle">\r\n                    '),s=a.if.call(e,"xtraviewSecondPoint",{hash:{},hashTypes:{},hashContexts:{},inverse:B.program(17,f,t),fn:B.program(14,p,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n        <br>\r\n        "),s=a.if.call(e,"xtraviewBreak",{hash:{},hashTypes:{},hashContexts:{},inverse:B.noop,fn:B.program(20,y,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n\r\n        </br>\r\n        "),""}function u(e,t){return t.buffer.push("\r\n                <tr>\r\n                    <td> "),t.buffer.push(O(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.devices~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>\r\n                        "),t.buffer.push(O(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:xtraView.primaryDevice~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                    </td>\r\n                    <td></td>\r\n                    <td>"),t.buffer.push(O(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:xtraView.secondaryDevice~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n                    <td></td>\r\n                </tr>\r\n                "),""}function h(e,t){var s;return t.buffer.push("\r\n\r\n                "),s=a.if.call(e,"xtraviewThirdPoint",{hash:{},hashTypes:{},hashContexts:{},inverse:B.noop,fn:B.program(12,m,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                "),""}function m(e,t){return t.buffer.push("\r\n                <tr>\r\n                    <td> "),t.buffer.push(O(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.devices~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>\r\n                        "),t.buffer.push(O(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:xtraView.primaryDevice~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n                    </td>\r\n                    <td></td>\r\n                    <td>"),t.buffer.push(O(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:xtraView.secondaryDevice~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n                    <td></td>\r\n                    <td>"),t.buffer.push(O(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:xtraView.thirdDevice~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n                    <td></td>\r\n                </tr>\r\n                "),""}function p(e,t){var s;return t.buffer.push("\r\n\r\n                    <td>"),t.buffer.push(O(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"2",valueBinding:"primaryDecoder",contentBinding:"primaryDevicesList",optionLabelPath:"content.display",optionValuePath:"content",prompt:"~locale.associateProducts:associateProducts.selectDecoder~",disableBinding:"disablePrimary"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING",disableBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</td>\r\n                    <td>\r\n                        <img src="./Content/Images/link/lb.png"></img>\r\n                    </td>\r\n                    <td>'),t.buffer.push(O(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"2",valueBinding:"secondaryDecoder",contentBinding:"secondaryDevicesList",optionLabelPath:"content.display",optionValuePath:"content",prompt:"~locale.associateProducts:associateProducts.selectDecoder~",disableBinding:"disableSecondary"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING",disableBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n\r\n                    <td>"),s=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"linkXtraViewHardware",tabindex:"2",class:"btn-success"},hashTypes:{action:"STRING",tabindex:"STRING",class:"STRING"},hashContexts:{action:e,tabindex:e,class:e},inverse:B.noop,fn:B.program(15,v,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\r\n\r\n                    "),""}function v(e,t){var s,o;t.buffer.push(O((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.associateProducts:associateProducts.activateButton",o):N.call(e,"loc","locale.associateProducts:associateProducts.activateButton",o))))}function f(e,t){var s;return t.buffer.push(" "),s=a.if.call(e,"xtraviewThirdPoint",{hash:{},hashTypes:{},hashContexts:{},inverse:B.noop,fn:B.program(18,g,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                    "),""}function g(e,t){var s;return t.buffer.push("\r\n                    <td>"),t.buffer.push(O(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"2",valueBinding:"primaryDecoder",contentBinding:"primaryDevicesList",optionLabelPath:"content.display",optionValuePath:"content",prompt:"~locale.associateProducts:associateProducts.selectDecoder~",disableBinding:"disablePrimary"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING",disableBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</td>\r\n                    <td>\r\n                        <img src="./Content/Images/link/lb.png"></img>\r\n                    </td>\r\n                    <td>'),t.buffer.push(O(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"2",valueBinding:"secondaryDecoder",contentBinding:"secondaryDevicesList",optionLabelPath:"content.display",optionValuePath:"content",prompt:"~locale.associateProducts:associateProducts.selectDecoder~",disableBinding:"disableSecondary"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING",disableBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</td>\r\n                    <td>\r\n                        <img src="./Content/Images/link/lb.png"></img>\r\n                    </td>\r\n\r\n                    <td>'),t.buffer.push(O(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"2",valueBinding:"thirdPointDecoder",contentBinding:"thirdPointDevicesList",optionLabelPath:"content.display",optionValuePath:"content",prompt:"~locale.associateProducts:associateProducts.selectDecoder~",disableBinding:"disableThirdPoint"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING",disableBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n\r\n                    <td>"),s=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"linkXtraViewHardware",tabindex:"2",class:"btn-success"},hashTypes:{action:"STRING",tabindex:"STRING",class:"STRING"},hashContexts:{action:e,tabindex:e,class:e},inverse:B.noop,fn:B.program(15,v,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\r\n\r\n                    "),""}function y(e,t){var s;return t.buffer.push("\r\n        <table>\r\n            <tbody>\r\n                <tr>\r\n                    <td>\r\n                        "),t.buffer.push(O(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.linkedXtraViewDevices~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('<br />\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n\r\n        <table width="100%">\r\n            <tbody>\r\n                <tr>\r\n                    <td width="27%">'),t.buffer.push(O(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.primaryDevice~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n                    "),s=a.if.call(e,"isThirdPoint",{hash:{},hashTypes:{},hashContexts:{},inverse:B.program(23,b,t),fn:B.program(21,D,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n\r\n        <table width="100%">\r\n            <tbody>\r\n\r\n                '),s=a.each.call(e,"device","in","xtraViewList",{hash:{},hashTypes:{},hashContexts:{},inverse:B.noop,fn:B.program(25,C,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n            </tbody>\r\n        </table>\r\n        "),""}function D(e,t){return t.buffer.push('\r\n                    <td width="27%">'),t.buffer.push(O(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.secondaryDevice~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</td>\r\n                    <td width="47%">'),t.buffer.push(O(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:xtraView.thirdDevice~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n                    "),""}function b(e,t){return t.buffer.push('\r\n                    <td width="73%">'),t.buffer.push(O(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.secondaryDevice~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n                    "),""}function C(e,t){var s;return t.buffer.push('\r\n\r\n                <tr>\r\n                    <td width="22%">'),t.buffer.push(O(a.view.call(e,"Komodo.Controls.LabelField",{hash:{valueBinding:"device.display"},hashTypes:{valueBinding:"STRING"},hashContexts:{valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n                    "),s=a.each.call(e,"secondaryDevice","in","device.secondaryDecoders",{hash:{},hashTypes:{},hashContexts:{},inverse:B.noop,fn:B.program(26,P,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                    <td>"),s=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"breakXtraViewNetwork",tabindex:"2",contentBinding:"device",class:"btn-success"},hashTypes:{action:"STRING",tabindex:"STRING",contentBinding:"STRING",class:"STRING"},hashContexts:{action:e,tabindex:e,contentBinding:e,class:e},inverse:B.noop,fn:B.program(28,S,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\r\n                </tr>\r\n                "),""}function P(e,t){return t.buffer.push('\r\n                    <td width="5%">\r\n                        <img src="./Content/Images/link/l.png"></img>\r\n                    </td>\r\n                    <td width="22%">'),t.buffer.push(O(a.view.call(e,"Komodo.Controls.LabelField",{hash:{valueBinding:"secondaryDevice.display"},hashTypes:{valueBinding:"STRING"},hashContexts:{valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n                    "),""}function S(e,t){var s,o;t.buffer.push(O((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.associateProducts:associateProducts.removeLink",o):N.call(e,"loc","locale.associateProducts:associateProducts.removeLink",o))))}function T(e,t){var s;return t.buffer.push("\r\n        "),s=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.associateProducts:xtraView.insurancePanel~"},hashTypes:{title:"STRING"},hashContexts:{title:e},inverse:B.noop,fn:B.program(31,I,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n        "),""}function I(e,t){return t.buffer.push("\r\n        "),t.buffer.push(O(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{valueBinding:"dccDecoder",contentBinding:"devicesListDCC",optionLabelPath:"content.display",optionValuePath:"content",prompt:"~locale.associateProducts:associateProducts.selectDecoder~",disableBinding:"disableInsuranceSelection"},hashTypes:{valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING",disableBinding:"STRING"},hashContexts:{valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),o=o||{};var w,A,x,N=a.helperMissing,O=this.escapeExpression,B=this;return o.buffer.push("<div "),o.buffer.push(O(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:o}))),o.buffer.push('>\r\n\r\n    <div width="90%">\r\n        <span class="komodo-heading">'),o.buffer.push(O((A=a.loc||t&&t.loc,x={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:o},A?A.call(t,"locale.associateProducts:xtraView.useCaseTitle",x):N.call(t,"loc","locale.associateProducts:xtraView.useCaseTitle",x)))),o.buffer.push('</span>\r\n    </div>\r\n\r\n    <div width="90%">\r\n        '),w=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.associateProducts:xtraView.devicesInfo~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:B.noop,fn:B.program(1,r,o),contexts:[t],types:["ID"],data:o}),(w||0===w)&&o.buffer.push(w),o.buffer.push("\r\n\r\n        "),w=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.associateProducts:associateProducts.linkDevicesForXtraviewCollapView~"},hashTypes:{title:"STRING"},hashContexts:{title:t},inverse:B.noop,fn:B.program(8,l,o),contexts:[t],types:["ID"],data:o}),(w||0===w)&&o.buffer.push(w),o.buffer.push("\r\n        "),w=a.if.call(t,"isAllowInsurance",{hash:{},hashTypes:{},hashContexts:{},inverse:B.noop,fn:B.program(30,T,o),contexts:[t],types:["ID"],data:o}),(w||0===w)&&o.buffer.push(w),o.buffer.push("\r\n    </div>\r\n</div>"),""}),Komodo.Application.CsiActivationSummaryController=Komodo.UI.Controller.extend({_localeBase:"locale.associateProducts:associateProducts.",_customerLocaleBase:"locale.customer:customerInformation.",_csiLocaleBase:"locale.csicustomer:addDevicesAndPackages.",_localecsiCustomer:"locale.csicustomer:",init:function(){this._super(),Komodo.log("Constructing Csi Activation Summary controller"),this.set("processVersion","v1.1"),this.set("processName","Csi Activation Summary process"),this.registerModel("viewModel",Komodo.Models.CsiAssociateProductsModel)},start:function(){var e=this;e._setFeatureToggles(),e._super()},stop:function(){this._super()},_setFeatureToggles:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("AssociateProducts","IsInsuranceAvailable").done(function(t){Komodo.Services.securityService.hasPermission("clarity://commercialAddProductsView/viewInsurance")?e.set("viewModel.showInsurance",t):e.set("viewModel.showInsurance",!1)}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)})},clearFormData:function(){var e=this;void 0!==e.viewModel&&(e.viewModel.set("customerClass",void 0),e.viewModel.set("customerType",void 0),e.viewModel.set("paymentGroup",void 0),e.viewModel.set("viewingLocation",void 0),e.viewModel.set("establishmentName",void 0),e.viewModel.set("viewingPoints",void 0),e.viewModel.set("smartcardDeviceNumber",void 0),e.viewModel.set("insurance",void 0),e.viewModel.set("activationDate",void 0),e.viewModel.set("installationType",void 0),e.viewModel.set("primaryProductSelection",void 0),e.viewModel.set("accounts",[]),e.viewModel.set("viewingLocations",[]),e.viewModel.set("selectedproductData",[]))},setResponseMessage:function(e,t){var a=this;a.clearFormData(),a.set("viewModel",e),a.set("controllerName",t),"AddProducts"===t?a.set("isButtonVisible",!1):a.set("isButtonVisible",!0)},actions:{activateAnother:function(){var e=this;Komodo.Services.uiService.getController("csiAssociateProducts").setData(e.viewModel.paymentGroup,e.viewModel.establishmentName,e.viewModel.viewingLocation,e.viewModel.viewingPoints,e.viewModel.installationType),Komodo.Services.uiService.getRoute("application").transitionTo("csiAssociateProducts")},complete:function(){var e=this;if("AddProducts"===e.controllerName){Komodo.Services.uiService.getController("csiManageViewing").setAgreementData(e.viewModel.establishmentName,e.viewModel.viewingLocation),Komodo.Services.uiService.getRoute("application").transitionTo("csiManageViewing")}else Komodo.Services.uiService.getRoute("application").transitionTo("csiCustomerProfile")}},isButtonVisible:!0,isInsuranceAvailable:!1}),Ember.TEMPLATES.ExistingCustomerAddProductsView=Ember.Handlebars.template(function(e,t,a,s,o){function r(e,t){var s,o,r;return t.buffer.push("\r\n\r\n  "),t.buffer.push(se((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.smartCardOrDeviceNo",r):ae.call(e,"loc","locale.associateProducts:associateProducts.smartCardOrDeviceNo",r)))),t.buffer.push("<br/>\r\n  "),t.buffer.push(se(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{disableBinding:"disableAddButton",label:"~locale.associateProducts:associateProducts.smartCardOrDeviceNo~",tabindex:"1",valueBinding:"smartcardDecoderNo",class:"info-heading"},hashTypes:{disableBinding:"STRING",label:"STRING",tabindex:"STRING",valueBinding:"STRING",class:"STRING"},hashContexts:{disableBinding:e,label:e,tabindex:e,valueBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"searchHardware",disableBinding:"disableAddButton",class:"btn-success",tabindex:"2"},hashTypes:{action:"STRING",disableBinding:"STRING",class:"STRING",tabindex:"STRING"},hashContexts:{action:e,disableBinding:e,class:e,tabindex:e},inverse:oe.noop,fn:oe.program(2,i,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("<br />\r\n  "),t.buffer.push(se(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.smartcardDecoderNoValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  "),s=a.if.call(e,"showDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.noop,fn:oe.program(4,n,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n\r\n  "),""}function i(e,t){var s,o;t.buffer.push(se((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},
s?s.call(e,"locale.associateProducts:associateProducts.add",o):ae.call(e,"loc","locale.associateProducts:associateProducts.add",o))))}function n(e,t){var s,o,r;return t.buffer.push("\r\n  <hr/>\r\n\r\n  <br/>\r\n  "),t.buffer.push(se(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.addedDevices~",class:"sub-heading",tabindex:"3"},hashTypes:{text:"STRING",class:"STRING",tabindex:"STRING"},hashContexts:{text:e,class:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n\r\n  <table id="tableaddedDevices" class="table table-bordered komodo-datagrid" width="100%">\r\n    <tbody>\r\n      <tr>\r\n        <th >'),t.buffer.push(se((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.device",r):ae.call(e,"loc","locale.associateProducts:associateProducts.device",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(se((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.smartcard",r):ae.call(e,"loc","locale.associateProducts:associateProducts.smartcard",r)))),t.buffer.push("</th>\r\n        <th >"),t.buffer.push(se((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.services",r):ae.call(e,"loc","locale.associateProducts:associateProducts.services",r)))),t.buffer.push("</th>\r\n        <th >"),t.buffer.push(se((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.addOn",r):ae.call(e,"loc","locale.associateProducts:associateProducts.addOn",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(se((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.insurance",r):ae.call(e,"loc","locale.associateProducts:associateProducts.insurance",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(se((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.accessService",r):ae.call(e,"loc","locale.associateProducts:associateProducts.accessService",r)))),t.buffer.push("</th>\r\n        <th >"),t.buffer.push(se((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:existingCustomer.modifiable",r):ae.call(e,"loc","locale.associateProducts:existingCustomer.modifiable",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(se((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:existingCustomer.schedule",r):ae.call(e,"loc","locale.associateProducts:existingCustomer.schedule",r)))),t.buffer.push("</th>\r\n        <th >"),t.buffer.push(se((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.actions",r):ae.call(e,"loc","locale.associateProducts:associateProducts.actions",r)))),t.buffer.push("</th>\r\n      </tr>\r\n      "),s=a.each.call(e,"decoder","in","data.selectedproductData",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.noop,fn:oe.program(5,c,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    </tbody>\r\n  </table>\r\n\r\n\r\n  "),""}function c(e,t){var s;return t.buffer.push("\r\n      <tr>\r\n        "),s=a.if.call(e,"decoder.isHoliDayHome",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.program(8,l,t),fn:oe.program(6,d,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n        "),s=a.if.call(e,"decoder.isSmartcardTypePresent",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.program(12,h,t),fn:oe.program(10,u,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\r\n        <td align="left" width="200px">\r\n          '),s=a.if.call(e,"decoder.isPrincipalPresent",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.program(14,m,t),fn:oe.program(14,m,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\r\n        </td>\r\n        <td align="left" width="200px">\r\n          '),s=a.if.call(e,"decoder.isAddOnPresent",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.program(18,v,t),fn:oe.program(16,p,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n        </td>\r\n        "),s=a.if.call(e,"decoder.isInsurenceStatusPresent",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.program(22,g,t),fn:oe.program(20,f,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\r\n        <td align="left" width="200px">\r\n          '),s=a.if.call(e,"decoder.isAccessPresent",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.program(26,D,t),fn:oe.program(24,y,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\r\n        </td>\r\n        <td align="left" width="50px">'),s=a._triageMustache.call(e,"decoder.modifiable",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('</td>\r\n        <td align="left" width="50px">'),s=a._triageMustache.call(e,"decoder.schedule",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\r\n        <td>\r\n          "),s=a.if.call(e,"decoder.isExisting",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.noop,fn:oe.program(28,b,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n      "),""}function d(e,t){var s;return t.buffer.push('\r\n        <td align="left" width="200px">'),s=a._triageMustache.call(e,"decoder.decoderSerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("&nbsp;&nbsp;"),s=a._triageMustache.call(e,"decoder.decoderType",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" - Holiday Home</td>\r\n        "),""}function l(e,t){var s;return t.buffer.push('\r\n        <td align="left" width="200px">'),s=a._triageMustache.call(e,"decoder.decoderSerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("&nbsp;&nbsp;"),s=a._triageMustache.call(e,"decoder.decoderType",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\r\n        "),""}function u(e,t){var s;return t.buffer.push('\r\n        <td align="left" width="150px">'),s=a._triageMustache.call(e,"decoder.smartcardType",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("&nbsp;&nbsp;"),s=a._triageMustache.call(e,"decoder.smartcardSerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\r\n        "),""}function h(e,t){var s;return t.buffer.push('\r\n        <td align="left" width="150px">'),s=a._triageMustache.call(e,"decoder.smartcardSerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\r\n\r\n        "),""}function m(e,t){var s;return t.buffer.push("<div>"),s=a._triageMustache.call(e,"decoder.principal",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</div>"),""}function p(e,t){var s;return t.buffer.push("<div>"),s=a._triageMustache.call(e,"decoder.addOn",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</div>"),""}function v(e,t){var s;return t.buffer.push("<div> "),s=a._triageMustache.call(e,"decoder.addOn",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</div>"),""}function f(e,t){t.buffer.push(' <td align="left" width="50px">\r\n          Insurance\r\n        </td> \r\n        ')}function g(e,t){t.buffer.push('\r\n        <td width="50px"></td>\r\n        ')}function y(e,t){var s;return t.buffer.push("<div>"),s=a._triageMustache.call(e,"decoder.access",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</div>"),""}function D(e,t){var s;return t.buffer.push("<div> "),s=a._triageMustache.call(e,"decoder.access",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</div> "),""}function b(e,t){t.buffer.push(se(a.view.call(e,"Komodo.Controls.Link",{hash:{action:"deleteDevice",target:"controller",contentBinding:"decoder",text:"~locale.associateProducts:associateProducts.delete~",hrefBinding:""},hashTypes:{action:"STRING",target:"STRING",contentBinding:"STRING",text:"STRING",hrefBinding:"STRING"},hashContexts:{action:e,target:e,contentBinding:e,text:e,hrefBinding:e},contexts:[e],types:["ID"],data:t})))}function C(e,t){var s;return t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.associateProducts:associateProducts.linkDevicesForXtraviewCollapView~"},hashTypes:{title:"STRING"},hashContexts:{title:e},inverse:oe.noop,fn:oe.program(31,P,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function P(e,t){var s;return t.buffer.push("\r\n  "),s=a.if.call(e,"devicesLabel",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.noop,fn:oe.program(32,S,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),s=a.if.call(e,"xtraViewLabel",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.noop,fn:oe.program(36,w,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function S(e,t){var s;return t.buffer.push("\r\n  "),t.buffer.push(se(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.devices~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('<br />\r\n  <table width="550px">\r\n    <tbody>\r\n      <tr>\r\n        <td>'),t.buffer.push(se(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.primaryDevice~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n        <td></td>\r\n        <td>"),t.buffer.push(se(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.secondaryDevice~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n        <td></td>\r\n      </tr>\r\n      "),s=a.each.call(e,"device","in","primaryDevicesList",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.noop,fn:oe.program(33,T,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    </tbody>\r\n  </table>\r\n  "),""}function T(e,t){var s;return t.buffer.push('\r\n      <tr valign="middle">\r\n        <td>'),t.buffer.push(se(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"2",valueBinding:"device",contentBinding:"primaryDevicesList",optionLabelPath:"content.display",optionValuePath:"content",prompt:"~locale.associateProducts:associateProducts.selectDecoder~"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING"},hashContexts:{tabindex:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</td>\r\n        <td>\r\n          <img src="./Content/Images/link/lb.png"></img>\r\n        </td>\r\n        <td>'),t.buffer.push(se(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"2",disableBinding:"device.disable",valueBinding:"device.secondaryDecoder",contentBinding:"device.secondaryDevicesList",optionLabelPath:"content.display",optionValuePath:"content",prompt:"~locale.associateProducts:associateProducts.selectDecoder~"},hashTypes:{tabindex:"STRING",disableBinding:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",prompt:"STRING"},hashContexts:{tabindex:e,disableBinding:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n        <td>"),s=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"linkHardware",tabindex:"2",disableBinding:"device.disable",contentBinding:"device"},hashTypes:{action:"STRING",tabindex:"STRING",disableBinding:"STRING",contentBinding:"STRING"},hashContexts:{action:e,tabindex:e,disableBinding:e,contentBinding:e},inverse:oe.noop,fn:oe.program(34,I,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\r\n      </tr>\r\n      "),""}function I(e,t){var s,o;t.buffer.push(se((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.associateProducts:associateProducts.linkButton",o):ae.call(e,"loc","locale.associateProducts:associateProducts.linkButton",o))))}function w(e,t){var s;return t.buffer.push("\r\n  <br />\r\n  "),t.buffer.push(se(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.linkedXtraViewDevices~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('<br />\r\n  <table width="550px">\r\n    <tbody>\r\n      <tr>\r\n        <td>'),t.buffer.push(se(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.primaryDevice~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n        <td></td>\r\n        <td>"),t.buffer.push(se(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.secondaryDevice~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n        <td></td>\r\n      </tr>\r\n      "),s=a.each.call(e,"device","in","xtraViewList",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.noop,fn:oe.program(37,A,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    </tbody>\r\n  </table>\r\n  "),""}function A(e,t){var s;return t.buffer.push('\r\n      <tr>\r\n        <td width="225px">'),t.buffer.push(se(a.view.call(e,"Komodo.Controls.LabelField",{hash:{valueBinding:"device.display"},hashTypes:{valueBinding:"STRING"},hashContexts:{valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</td>\r\n        <td width="30px">\r\n          <img src="./Content/Images/link/l.png"></img>\r\n        </td>\r\n        <td width="225px">'),t.buffer.push(se(a.view.call(e,"Komodo.Controls.LabelField",{hash:{valueBinding:"device.secondaryDecoder.display"},hashTypes:{valueBinding:"STRING"},hashContexts:{valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('</td>\r\n        <td width="60px">'),s=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"unLinkHardware",tabindex:"2",contentBinding:"device"},hashTypes:{action:"STRING",tabindex:"STRING",contentBinding:"STRING"},hashContexts:{action:e,tabindex:e,contentBinding:e},inverse:oe.noop,fn:oe.program(38,x,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\r\n      </tr>\r\n      "),""}function x(e,t){var s,o;t.buffer.push(se((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.associateProducts:associateProducts.unlinkButton",o):ae.call(e,"loc","locale.associateProducts:associateProducts.unlinkButton",o))))}function N(e,t){var s;return t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.associateProducts:associateProducts.linkProdCollapView~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:e,isCollapsed:e},inverse:oe.noop,fn:oe.program(41,O,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  \x3c!--End showDetails--\x3e\r\n  "),""}function O(e,t){var s;return t.buffer.push("\r\n  "),t.buffer.push(se(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"17",valueBinding:"data.selectedPrimaryDecoder",prompt:"~locale.associateProducts:associateProducts.selectDecoder~",contentBinding:"summaryOfDevicesList",optionLabelPath:"content.display",optionValuePath:"content"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,valueBinding:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  \x3c!--show Packages--\x3e\r\n  "),s=a.if.call(e,"showPackages",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.noop,fn:oe.program(42,B,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  \x3c!--showPrimaryDecodeServices--\x3e\r\n  "),s=a.if.call(e,"showPrimaryDecodeServices",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.noop,fn:oe.program(48,L,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  \x3c!-- Success Button End--\x3e\r\n  "),""}function B(e,t){var s;return t.buffer.push('\r\n  <table width="100%">\r\n    <tbody>\r\n      <tr>\r\n        <td align="left">\r\n          '),t.buffer.push(se(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"principalPackageText",visibleBinding:"showPrimaryDecodeServices",class:"sub-heading"},hashTypes:{textBinding:"STRING",visibleBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,visibleBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n        <td align="left">\r\n          '),t.buffer.push(se(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.addOnPackage~",visibleBinding:"showAddOnProducts",class:"sub-heading"},hashTypes:{text:"STRING",visibleBinding:"STRING",class:"STRING"},hashContexts:{text:e,visibleBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n\r\n\r\n      "),s=a.if.call(e,"isGoTvDeviceSelected",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.program(46,E,t),fn:oe.program(43,M,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n\r\n    </tbody>\r\n  </table>\r\n  \x3c!--End show Packages--\x3e\r\n  "),""}function M(e,t){var s;return t.buffer.push('\r\n      <tr>\r\n        <td align="left" valign="top">\r\n          <table width="100%">\r\n            <tbody>\r\n              '),s=a.each.call(e,"item","in","productService",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.noop,fn:oe.program(44,k,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n            </tbody>\r\n          </table>\r\n        </td>\r\n      </tr>\r\n      "),""}function k(e,t){var s;return t.buffer.push('\r\n              <tr>\r\n                <td width="1%">\r\n                  '),t.buffer.push(se(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{contentBinding:"item",disableBinding:"item.disablePackage",checkedBinding:"item.isChecked"},hashTypes:{contentBinding:"STRING",disableBinding:"STRING",checkedBinding:"STRING"},hashContexts:{contentBinding:e,disableBinding:e,checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                </td>\r\n                <td width="90%">\r\n                  '),s=a._triageMustache.call(e,"item.product.details.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                </td>\r\n              </tr>\r\n              "),""}function E(e,t){return t.buffer.push('\r\n      <tr>\r\n        <td align="left" valign="top">\r\n          '),t.buffer.push(se(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{contentBinding:"productService",displayPath:"product.details.name",valuePath:"product.details.productID",disableBinding:"disablePrincipalProducts",orientation:"vertical",valueBinding:"data.primaryProductSelection",label:""},hashTypes:{contentBinding:"STRING",displayPath:"STRING",valuePath:"STRING",disableBinding:"STRING",orientation:"STRING",valueBinding:"STRING",label:"STRING"},hashContexts:{contentBinding:e,displayPath:e,valuePath:e,disableBinding:e,orientation:e,valueBinding:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n        <td valign="top" align="left">\r\n          '),t.buffer.push(se(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{contentBinding:"productAddOn",displayPath:"product.details.name",valuePath:"product.details.productID",disableBinding:"disableAddOnProducts",orientation:"vertical",valueBinding:"data.addOnProductSelection",label:""},hashTypes:{contentBinding:"STRING",displayPath:"STRING",valuePath:"STRING",disableBinding:"STRING",orientation:"STRING",valueBinding:"STRING",label:"STRING"},hashContexts:{contentBinding:e,displayPath:e,valuePath:e,disableBinding:e,orientation:e,valueBinding:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n      "),""}function L(e,t){var s;return t.buffer.push("\r\n  \x3c!--showPrimaryInsuranceproducts--\x3e\r\n  "),s=a.if.call(e,"showPrimaryInsuranceproducts",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.noop,fn:oe.program(49,K,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\r\n  <table width="100%">\r\n    <tbody>\r\n      <tr>\r\n        <td valign="top">\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                '),t.buffer.push(se(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.primaryDecoder",class:"sub-heading"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td width="50%">\r\n                <table width="100%">\r\n                  <tbody>\r\n                    '),s=a.each.call(e,"primaryInsuranceproducts",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.noop,fn:oe.program(51,R,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\r\n                  </tbody>\r\n                </table>\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td width="50%">\r\n                <table width="100%">\r\n                  <tbody>\r\n                    '),s=a.each.call(e,"primaryAccessServices",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.noop,fn:oe.program(53,V,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\r\n                  </tbody>\r\n                </table>\r\n              </td>\r\n            </tr>\r\n          </table>\r\n        </td>\r\n        <td valign="top">\r\n          \x3c!--showSecondaryDecodeServices--\x3e\r\n          '),s=a.if.call(e,"showSecondaryDecodeServices",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.noop,fn:oe.program(55,G,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n  <hr/>\r\n  \x3c!--start showHideQuestionPanel--\x3e\r\n  "),s=a.if.call(e,"showHideQuestionPanel",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.noop,fn:oe.program(60,U,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  \x3c!-- Questions End--\x3e\r\n  \x3c!-- Success Button Start--\x3e\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.noop,fn:oe.program(62,F,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  \x3c!--End showPrimaryDecodeServices--\x3e\r\n  "),""}function K(e,t){t.buffer.push("\r\n  <hr/>\r\n  \x3c!--End showPrimaryInsuranceproducts--\x3e\r\n  ")}function R(e,t){var s;return t.buffer.push('\r\n                    <tr>\r\n                      <td width="5%">\r\n                        '),t.buffer.push(se(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{disableBinding:"checkedPrimaryInsurance",dataTitleBinding:"product.details.name",checkedBinding:"isCheckedPrimaryInsurance"},hashTypes:{disableBinding:"STRING",dataTitleBinding:"STRING",checkedBinding:"STRING"},hashContexts:{disableBinding:e,dataTitleBinding:e,checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                      </td>\r\n                      <td width="90%">\r\n                        '),s=a._triageMustache.call(e,"product.details.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                      </td>\r\n                    </tr>\r\n                    "),""}function V(e,t){var s;return t.buffer.push('\r\n                    <tr>\r\n                      <td width="5%">\r\n                        '),t.buffer.push(se(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{disableBinding:"checkedPrimaryAccessService",dataTitleBinding:"product.details.name",checkedBinding:"isCheckedPrimaryAccessService"},hashTypes:{disableBinding:"STRING",dataTitleBinding:"STRING",checkedBinding:"STRING"},hashContexts:{disableBinding:e,dataTitleBinding:e,checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                      </td>\r\n                      <td width="90%">\r\n                        '),s=a._triageMustache.call(e,"product.details.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                      </td>\r\n                    </tr>\r\n                    "),""}function G(e,t){var s;return t.buffer.push("\r\n          <table>\r\n            <tbody>\r\n              <tr>\r\n                <td>\r\n                  "),t.buffer.push(se(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.secondaryDecoder",class:"sub-heading"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                </td>\r\n              </tr>\r\n              <tr>\r\n                <td width="50%">\r\n                  <table width="100%">\r\n                    <tbody>\r\n                      '),s=a.each.call(e,"secondaryInsuranceproducts",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.noop,fn:oe.program(56,_,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\r\n                    </tbody>\r\n                  </table>\r\n                </td>\r\n              </tr>\r\n              <tr>\r\n                <td width="50%">\r\n                  <table width="100%">\r\n                    <tbody>\r\n                      '),s=a.each.call(e,"secondaryAccessServices",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.noop,fn:oe.program(58,H,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                    </tbody>\r\n                  </table>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n          \x3c!--End showSecondaryDecodeServices--\x3e\r\n          "),""}function _(e,t){var s;return t.buffer.push('\r\n                      <tr>\r\n                        <td width="10%">\r\n                          '),t.buffer.push(se(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{disableBinding:"checkedSecondaryInsurance",dataTitleBinding:"product.details.name",checkedBinding:"isCheckedSecondaryInsurance"},hashTypes:{disableBinding:"STRING",dataTitleBinding:"STRING",checkedBinding:"STRING"},hashContexts:{disableBinding:e,dataTitleBinding:e,checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                        </td>\r\n                        <td width="90%">\r\n                          '),s=a._triageMustache.call(e,"product.details.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                        </td>\r\n                      </tr>\r\n                      "),""}function H(e,t){var s;return t.buffer.push('\r\n                      <tr>\r\n                        <td width="10%">\r\n                          '),t.buffer.push(se(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{disableBinding:"checkedSecondaryAccessService",dataTitleBinding:"product.details.name",checkedBinding:"isCheckedSecondaryAccessService"},hashTypes:{disableBinding:"STRING",dataTitleBinding:"STRING",checkedBinding:"STRING"},hashContexts:{disableBinding:e,dataTitleBinding:e,checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                        </td>\r\n                        <td width="90%">\r\n                          '),s=a._triageMustache.call(e,"product.details.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                        </td>\r\n                      </tr>\r\n                      "),""}function U(e,t){return t.buffer.push('\r\n\r\n  \x3c!-- Questions Start--\x3e\r\n  <table width="100%">\r\n    \x3c!-- Questions Start - First Column Start--\x3e\r\n    <tr>\r\n      <td>\r\n        '),t.buffer.push(se(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{tabindex:"23",label:"~locale.associateProducts:associateProducts.howWouldYouLikeToPay~",disableBinding:"disablePaymentOptions",contentBinding:"data.radioButtonPaymentMethod",displayPath:"title",valuePath:"value",valueBinding:"data.selectedPaymentOfMethod"},hashTypes:{tabindex:"STRING",label:"STRING",disableBinding:"STRING",contentBinding:"STRING",displayPath:"STRING",valuePath:"STRING",valueBinding:"STRING"},hashContexts:{tabindex:e,label:e,disableBinding:e,contentBinding:e,displayPath:e,valuePath:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      </td>\r\n      <td>\r\n        "),t.buffer.push(se(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.whereWillYouUseThisDevice~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />"),t.buffer.push(se(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"24",disableBinding:"disableDeviceUsage",valueBinding:"tempValue",contentBinding:"hardwareAddressDetails",optionLabelPath:"content.dlAddress",optionValuePath:"content"},hashTypes:{tabindex:"STRING",disableBinding:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,disableBinding:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      </td>\r\n    </tr>\r\n    <tr>\r\n      <td>"),t.buffer.push(se(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{tabindex:"25",label:"~locale.associateProducts:associateProducts.haveYouMadeAPaymentYet~",disableBinding:"servicesNotSelected",contentBinding:"data.haveYouMadeAPaymentYetYesNo",displayPath:"title",
valuePath:"value",valueBinding:"data.selectedPaymentMadeOption"},hashTypes:{tabindex:"STRING",label:"STRING",disableBinding:"STRING",contentBinding:"STRING",displayPath:"STRING",valuePath:"STRING",valueBinding:"STRING"},hashContexts:{tabindex:e,label:e,disableBinding:e,contentBinding:e,displayPath:e,valuePath:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n      <td>\r\n        "),t.buffer.push(se(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{tabindex:"26",label:"~locale.associateProducts:associateProducts.areYouWaitingForInstallation~",disableBinding:"disableInstallationOption",contentBinding:"data.areYouWaitingForInstallationYesNo",displayPath:"title",valuePath:"value",validatorBinding:"validators.selctedWaitingForInstallationOptionValidator",valueBinding:"data.selctedWaitingForInstallationOption"},hashTypes:{tabindex:"STRING",label:"STRING",disableBinding:"STRING",contentBinding:"STRING",displayPath:"STRING",valuePath:"STRING",validatorBinding:"STRING",valueBinding:"STRING"},hashContexts:{tabindex:e,label:e,disableBinding:e,contentBinding:e,displayPath:e,valuePath:e,validatorBinding:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      </td>\r\n    </tr>\r\n    <tr>\r\n      <td>"),t.buffer.push(se(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{tabindex:"27",valueBinding:"data.activationDate",label:"~locale.associateProducts:associateProducts.activationDate~",disableBinding:"disableActivationDate",validatorBinding:"validators.activationDateValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",disableBinding:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,disableBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n    </tr>\r\n  </table>\r\n  "),""}function F(e,t){var s;return t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.noop,fn:oe.program(63,$,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.noop,fn:oe.program(65,Y,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n\r\n\r\n  "),""}function $(e,t){t.buffer.push("\r\n  ")}function Y(e,t){var s;return t.buffer.push('\r\n  <div style="float:right;">\r\n    '),s=a.view.call(e,"Komodo.Controls.Button",{hash:{class:"btn-success",action:"addDeviceIntoSummaryGrid",disableBinding:"disableSubmit",tabindex:"28"},hashTypes:{class:"STRING",action:"STRING",disableBinding:"STRING",tabindex:"STRING"},hashContexts:{class:e,action:e,disableBinding:e,tabindex:e},inverse:oe.noop,fn:oe.program(66,j,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  </div>\r\n  "),""}function j(e,t){var s,o;t.buffer.push(se((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.associateProducts:associateProducts.addButton",o):ae.call(e,"loc","locale.associateProducts:associateProducts.addButton",o))))}function q(e,t){var s;return t.buffer.push("\r\n  \x3c!-- Activation Summary Collapsible View  Start--\x3e\r\n  "),s=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.associateProducts:associateProducts.linkSummaryCollapView~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:e,isCollapsed:e},inverse:oe.noop,fn:oe.program(69,X,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  \x3c!-- Activation Summary Collapsible View End--\x3e\r\n\r\n  \x3c!-- Add Devices and Packages Buttons Start--\x3e\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.noop,fn:oe.program(71,J,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  \x3c!-- Add Devices and Packages Buttons End--\x3e\r\n  "),""}function X(e,t){return t.buffer.push("\r\n  \x3c!--Activation Summary Column View Start --\x3e\r\n\r\n  \x3c!--Activation Summary Grid Start --\x3e\r\n  "),t.buffer.push(se(a.view.call(e,"Komodo.Controls.DataGrid",{hash:{canSort:!0,pageSize:10,performsValidation:!1,canDelete:!0,canEdit:!1,canSelect:!0,selectedItemBinding:"data.selectedSummaryGridItem",commandItemBinding:"data.commandSummaryGridItem",commandItemTypeBinding:"data.commandSummaryGridItemType",contentBinding:"data.selectedSummaryProductData",columnsBinding:"dataGridSummaryColumns"},hashTypes:{canSort:"BOOLEAN",pageSize:"INTEGER",performsValidation:"BOOLEAN",canDelete:"BOOLEAN",canEdit:"BOOLEAN",canSelect:"BOOLEAN",selectedItemBinding:"STRING",commandItemBinding:"STRING",commandItemTypeBinding:"STRING",contentBinding:"STRING",columnsBinding:"STRING"},hashContexts:{canSort:e,pageSize:e,performsValidation:e,canDelete:e,canEdit:e,canSelect:e,selectedItemBinding:e,commandItemBinding:e,commandItemTypeBinding:e,contentBinding:e,columnsBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  \x3c!-- Activation Summary Grid End --\x3e\r\n\r\n  \x3c!--Activation Summary Column View End --\x3e\r\n  "),""}function J(e,t){var s;return t.buffer.push("\r\n\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.noop,fn:oe.program(63,$,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.noop,fn:oe.program(72,W,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n\r\n  "),""}function W(e,t){var s;return t.buffer.push('\r\n  <div style="float:right;">\r\n    '),s=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"associateProducts",tabindex:"2",disableBinding:"isDisableActiveButton"},hashTypes:{action:"STRING",tabindex:"STRING",disableBinding:"STRING"},hashContexts:{action:e,tabindex:e,disableBinding:e},inverse:oe.noop,fn:oe.program(73,z,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    "),s=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"clearall",tabindex:"2",class:"btn-inverse"},hashTypes:{action:"STRING",tabindex:"STRING",class:"STRING"},hashContexts:{action:e,tabindex:e,class:e},inverse:oe.noop,fn:oe.program(75,Q,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  </div>\r\n  "),""}function z(e,t){var s,o;t.buffer.push(se((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.associateProducts:associateProducts.activateButton",o):ae.call(e,"loc","locale.associateProducts:associateProducts.activateButton",o))))}function Q(e,t){var s,o;t.buffer.push(se((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.associateProducts:associateProducts.clearAll",o):ae.call(e,"loc","locale.associateProducts:associateProducts.clearAll",o))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),o=o||{};var Z,ee,te,ae=a.helperMissing,se=this.escapeExpression,oe=this;return o.buffer.push("<div "),o.buffer.push(se(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:o}))),o.buffer.push('>\r\n\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),o.buffer.push(se((ee=a.loc||t&&t.loc,te={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:o},ee?ee.call(t,"locale.associateProducts:existingCustomer.useCaseTitle",te):ae.call(t,"loc","locale.associateProducts:existingCustomer.useCaseTitle",te)))),o.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/home">&lt;'),o.buffer.push(se((ee=a.loc||t&&t.loc,te={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:o},ee?ee.call(t,"locale.associateProducts:associateProducts.back",te):ae.call(t,"loc","locale.associateProducts:associateProducts.back",te)))),o.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n  "),Z=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.associateProducts:associateProducts.addDevicesCollapView~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:oe.noop,fn:oe.program(1,r,o),contexts:[t],types:["ID"],data:o}),(Z||0===Z)&&o.buffer.push(Z),o.buffer.push("\r\n  \x3c!--hide the Link Devices for XtraView--\x3e\r\n  "),Z=a.if.call(t,"showDevicesLinking",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.noop,fn:oe.program(30,C,o),contexts:[t],types:["ID"],data:o}),(Z||0===Z)&&o.buffer.push(Z),o.buffer.push("\r\n\r\n  \x3c!--hide the active packages--\x3e\r\n  \x3c!--showDetails--\x3e\r\n  "),Z=a.if.call(t,"showDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.noop,fn:oe.program(40,N,o),contexts:[t],types:["ID"],data:o}),(Z||0===Z)&&o.buffer.push(Z),o.buffer.push("\r\n  \x3c!-- Activation Summary --\x3e\r\n  "),Z=a.if.call(t,"showDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:oe.noop,fn:oe.program(68,q,o),contexts:[t],types:["ID"],data:o}),(Z||0===Z)&&o.buffer.push(Z),o.buffer.push("\r\n</div>"),""}),Komodo.Application.ExistingCustomerAddProductsController=Komodo.UI.Controller.extend({_localeBase:"locale.associateProducts:associateProducts.",_localeDevice:"locale.associateProducts:deviceAtAnotherLocation.",insurancepermission:"clarity://associateProducts/insuranceSelection",init:function(){var e=this;Komodo.log("Constructing Link Products with Xtraview controller"),e.set("processVersion","v1.1"),e.set("processName","Link Products with Xtraview process"),e.set("setDeviceAtAnotherLocation",!1),e.set("deviceAtanotherLocationCalled",!1),e.registerModel("data",Komodo.Models.ExistingCustomerAddProductsModel),e.set("data.customerRefNo",void 0),e.set("data.haveYouMadeAPaymentYetYesNo",[{title:"Yes",value:"1"},{title:"No",value:"0"}]),e.set("data.radioButtonDeviceUsage",[{title:"At my home",value:"0"},{title:"Another location",value:"1"}]),e.set("data.areYouWaitingForInstallationYesNo",[{title:"Yes",value:"0"},{title:"No",value:"1"}]),e.dataService=Komodo.Services.AssociateProductsDataService.create(),e.deviceInfoService=Komodo.Services.StockService.create(),e.dataService.initialiseObjects(e),e._super()},start:function(){var e=this;e.registerValidation(),Ember.addObserver(this,"primaryDevicesList.@each",this,"secondaryDevicesListChanged"),Ember.addObserver(this,"primaryDevicesList.@each",this,"disableChanged"),e.getLookUpData().done(function(){e.getcustomerID()&&(0==e.get("setDeviceAtAnotherLocation")?(e.loadCustomerAccountInfo(),e.loadCustomerDetails(),e.setDefaultvalues()):0==e.get("deviceAtAnotherLocationWithData")&&e.set("data.deviceAtHomeOrOtherLocation","0")),e.set("data.startDate",new Date((new Date).getMonth()+1+"/"+(new Date).getDate()+"/"+(new Date).getFullYear()))}),e._super()},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,12e5,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},stop:function(){"deviceAtAnotherLocation"!=Komodo.Application.Router.router.activeTransition.targetName&&(Ember.removeObserver(this,"primaryDevicesList.@each",this,"secondaryDevicesListChanged"),Ember.removeObserver(this,"primaryDevicesList.@each",this,"disableChanged"),this.set("primaryDevicesList",[]),this.set("smartcardDecoderNo",void 0),this.set("devicesLabel",!1),this.set("xtraViewLabel",!1),this.set("showSecondaryDecodeServices",!1),this.set("showPrimaryDecodeServices",!1),this.set("showAddOnProducts",!1),this.set("deviceAtanotherLocationCalled",!1),this.set("onlyPrincipalMobileProduct",void 0),this.set("marketSegment",void 0),this.isActive=!1,this.set("defaultAccount",void 0),this.set("defaultAddressDetails",void 0),this.set("redirectEnabled",!1),this.set("countOfStolenSuspended",0),this.set("countOfEmptyDecoders",0),this.hardwareAddressDetails.clear(),this.productAddOn.clear(),this.productService.clear(),this.allAccessService.clear(),this.allInsurance.clear(),this.allProductCategories.clear(),this.allProductService.clear(),this.allProductAddOn.clear(),this.xtraViewList.clear(),this.data.selectedproductData.clear(),this.data.selectedSummaryProductData.clear(),this.set("data.activationDate",new Date)),this.hideBusyIndicator(),this._super()},registerValidation:function(){this.registerValidator(this,"smartcardDecoderNo",{isRequired:!0,displayName:kl.value(this._localeBase+"smartCardOrDeviceNo"),minLength:10,maxLength:10,functions:Komodo.UI.Validators.alphanumericValidator}),this.registerValidator(this.get("data"),"selectedPrimaryDecoder",{isRequired:!1,type:"string"}),this.registerValidator(this.get("data"),"primaryDecoder",{isRequired:!1,type:"string"}),this.registerValidator(this.get("data"),"secondaryDecoder",{isRequired:!1,type:"string"}),this.registerValidator(this.get("data"),"primaryProductSelection",{isRequired:!1,type:"string"}),this.registerValidator(this.get("data"),"addOnProductSelection",{isRequired:!1,type:"string"}),this.registerValidator(this.get("data"),"activationDate",{type:"date",isRequired:!0,minDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())}),this.registerValidator(this.get("data"),"radioButtonPaymentMethod",{isRequired:!1,type:"string"}),this.registerValidator(this.get("data"),"haveYouMadeAPaymentYetYesNo",{isRequired:!1,type:"string"}),this.registerValidator(this.get("data"),"radioButtonDeviceUsage",{isRequired:!1,type:"string"}),this.registerValidator(this.get("data"),"deviceAtHomeOrOtherLocation",{isRequired:!1,type:"string"}),this.registerValidator(this.get("data"),"selectedPaymentOfMethod",{isRequired:!1,type:"string"}),this.registerValidator(this.get("data"),"selectedPaymentMadeOption",{isRequired:!1,type:"string"}),this.registerValidator(this.get("data"),"selctedWaitingForInstallationOption",{isRequired:!0,type:"string"})},clearLists:function(){this.get("primaryDevicesList").clear(),this.get("xtraViewList").clear(),this.get("summaryOfDevicesList").clear()},addDecoderInList:function(e,t,a,s,o,r,i,n,c,d,l,u,h,m,p,v,f){var g=this;if(g._customerClassSelected==GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_SPECIALIST")&&!Komodo.UI.cacheDataService.isMobileDevice(r)&&(g._customerTypeSelected==GetCustomerTypesConstants("CustomerTypesConstants","VIP")||g._customerTypeSelected==GetCustomerTypesConstants("CustomerTypesConstants","EXTERNAL_DEMO")||g._customerTypeSelected==GetCustomerTypesConstants("CustomerTypesConstants","SHAREHOLDERS"))&&g.maxAllowedDstvDevices())return void Komodo.Controls.MessageBoxController.show(kl.value(g._localeBase+"useCaseTitle"),kl.value(g._localeBase+"maximumAllowedDstvDevices"),Komodo.Controls.MessageBoxOkButton,g,"id23454673","danger");if(void 0==g.getDeviceDetails(a,!0)){var y=Ember.Object.extend({init:function(){this._super(),this.display=t+"-"+a,this.decoderType=t,this.decoderSerialNumber=a,this.smartcardType=s,this.isSmartcardTypePresent=void 0!=s,this.smartcardSerialNumber=o,this.decoderModel=e,this.selectedSecondaryDecoderno=void 0,this.decoderCpcType=r,this.servicesDetails=i,this.insurence=c,this.principal=void 0,this.addOn=void 0,this.access=void 0,this.agreemntUId=void 0==d?void 0:d.UID,this.set("isGotvDecoder",3===f),this.set("isMobileDecoder",2===f),this.agreemntTypeID=void 0==d?void 0:d.Type,this.agreemntTypeID===Komodo.AgreementTypes.HOLIDAY_HOME&&(this.isHoliDayHome=!0),this.termOfPayment=l,this.UID=n,this.secondaryHardwareSerialnumber=u,this.addressDetails=h,this.paymentDetail=m,this.principalProductCount=0,this.customerPersonalDetails=p,this.set("isPrincipalPresent",!1),this.set("isAddOnPresent",!1),this.set("isAccessPresent",!1),this.set("hasAccessPresent",!1),this.set("isInsurenceStatusPresent",!1),this.isDisconnected=void 0,this.isPrincipleNotActive=void 0,this.isAddonNotActive=void 0,this.isAccessNotActive=void 0,this.isPrincipalActive=!1,this.set("isStolenSuspended",!1),void 0===this.agreemntUId?this.set("isExisting",!0):this.set("isExisting",!1);var y={Service:[]};void 0===i&&(y=void 0),this.startDate=void 0,this.modifiable="Y",this.schedule="N";var D=this;if(void 0!=i&&$.each(i.Service,function(e,t){switch(t.ProductDetail.Type){case GetProductsConstants("ProductsConstants","PRINCIPAL_CATEGORY"):switch(t.Status.toUpperCase()){case GetProductsConstants("ProductsConstants","STATUS_DISCONNECTED"):case GetProductsConstants("ProductsConstants","STATUS_CANCELLED"):void 0===D.isPrincipleNotActive&&(D.isPrincipleNotActive=!0);break;case GetProductsConstants("ProductsConstants","STATUS_SUSPENDED"):g.get("onlyPrincipalMobileProduct")&&v&&(g.countOfStolenSuspended=1*g.countOfStolenSuspended+1,g.get("data.selectedproductData").forEach(function(e){e.decoderSerialNumber===a||e.isPrincipalPresent||e.isStolenSuspended||g.redirectOnSuspendedAgreement(!0)}),D.set("isStolenSuspended",!0));break;case GetProductsConstants("ProductsConstants","STATUS_ACTIVE"):case GetProductsConstants("ProductsConstants","STATUS_PENDING"):case GetProductsConstants("ProductsConstants","STATUS_FREE"):case GetProductsConstants("ProductsConstants","STATUS_DELAYED_ACTIVATION"):case GetProductsConstants("ProductsConstants","STATUS_AWAITING_PAYMENT"):D.isPrincipleNotActive=!1,D.get("isPrincipalPresent")?D.principal=D.principal+", "+t.ProductDetail.Description:(D.principal=t.ProductDetail.Description,D.startDate=t.ActivationDate),D.principalProductCount=1*D.principalProductCount+1,D.set("isPrincipalPresent",!0),D.isPrincipleNotActive=!1,t.Status.toUpperCase()===GetProductsConstants("ProductsConstants","STATUS_ACTIVE")?D.set("isPrincipalActive",!0):t.Status.toUpperCase()===GetProductsConstants("ProductsConstants","STATUS_DELAYED_ACTIVATION")&&(D.schedule="Y"),y.Service.pushObject(t)}break;case GetProductsConstants("ProductsConstants","ADDON_CATEGORY"):if(!D.isPrincipleNotActive)switch(t.Status.toUpperCase()){case GetProductsConstants("ProductsConstants","STATUS_DISCONNECTED"):case GetProductsConstants("ProductsConstants","STATUS_CANCELLED"):D.isAddonNotActive=!0,D.set("isAddOnPresent",!1);break;case GetProductsConstants("ProductsConstants","STATUS_ACTIVE"):case GetProductsConstants("ProductsConstants","STATUS_PENDING"):case GetProductsConstants("ProductsConstants","STATUS_FREE"):case GetProductsConstants("ProductsConstants","STATUS_DELAYED_ACTIVATION"):case GetProductsConstants("ProductsConstants","STATUS_AWAITING_PAYMENT"):D.get("isMobileDecoder")&&t.Status.toUpperCase()===GetProductsConstants("ProductsConstants","STATUS_DELAYED_ACTIVATION")&&(D.startDate=t.ActivationDate),D.addOn=t.ProductDetail.Description,D.isAddonNotActive=!1,D.set("isAddOnPresent",!0),y.Service.pushObject(t)}break;case GetProductsConstants("ProductsConstants","ACCESS_CATEGORY"):if(!D.isPrincipleNotActive)switch(t.Status.toUpperCase()){case GetProductsConstants("ProductsConstants","STATUS_DISCONNECTED"):case GetProductsConstants("ProductsConstants","STATUS_CANCELLED"):D.isAccessNotActive=!0,D.set("isAccessPresent",!1);break;case GetProductsConstants("ProductsConstants","STATUS_ACTIVE"):case GetProductsConstants("ProductsConstants","STATUS_PENDING"):case GetProductsConstants("ProductsConstants","STATUS_FREE"):case GetProductsConstants("ProductsConstants","STATUS_DELAYED_ACTIVATION"):case GetProductsConstants("ProductsConstants","STATUS_AWAITING_PAYMENT"):D.isAccessNotActive=!1,D.access=t.ProductDetail.Description,D.set("isAccessPresent",!0),y.Service.pushObject(t)}}}),this.isPrincipleNotActive&&!this.get("isGotvDecoder"))y=void 0,D.set("isAddOnPresent",!1),D.set("isAccessPresent",!1);else if(this.get("isGotvDecoder")&&void 0!=i)switch(i.Service){case void 0:case null:case"":break;default:i.Service.length>y.Service.length&&(this.isPrincipleNotActive=!0,y.Service.length>0&&D.set("isPrincipalPresent",!0),D.set("isAddOnPresent",!1),D.set("isAccessPresent",!1))}this.servicesDetails=y,void 0!==this.servicesDetails&&void 0!==this.servicesDetails.Service?this.productLength=this.servicesDetails.Service.length:this.productLength=0,this.isPrincipleNotActive&&this.isAddonNotActive&&this.isAccessNotActive?(this.isDisconnected=!0,this.servicesDetails=void 0):this.isDisconnected=!1,void 0!==this.startDate&&new Date(this.startDate)>=new Date?this.startDate=new Date(this.startDate):this.startDate=new Date,this.dd=this.startDate.getUTCDate()<=9?"0"+this.startDate.getUTCDate():this.startDate.getUTCDate(),this.mm=1*this.startDate.getUTCMonth()+1<=9?"0"+(1*this.startDate.getUTCMonth()+1):1*this.startDate.getUTCMonth()+1,this.yyyy=this.startDate.getUTCFullYear(),this.startDate=this.dd+"-"+this.mm+"-"+this.yyyy;var b=[];g.populateDetailsBasedOnDecoder(this.decoderModel,g.get("allAccessService"),b,this.decoderCpcType),b.length>0&&this.set("hasAccessService",!0),void 0==this.principal?this.principal="":this.principal=this.principal,void 0==this.addOn?this.addOn="":this.addOn=this.addOn,void 0==this.access?this.access="":this.access=this.access,c&&"TRUE"==c.toUpperCase()&&this.set("isInsurenceStatusPresent",!0),this.get("isMobileDecoder")?(this.get("isPrincipalPresent")||this.get("isAddOnPresent"))&&(this.modifiable="N"):this.get("isGotvDecoder")&&this.principalProductCount===GetProductsConstants("ProductsConstants","MAXIMUM_GOTV_PACKAGES")-1?this.modifiable="N":this.get("isPrincipalPresent")&&this.get("isAddOnPresent")&&this.get("isInsurenceStatusPresent")&&(this.get("isAccessPresent")||!this.get("isAccessPresent")&&!this.get("hasAccessService"))?this.modifiable="N":this.modifiable="Y"},secondaryDevicesList:function(){var e=Ember.A(),t=this.get("decoderSerialNumber"),a=[],s=this.get("decoderModel");return $.each(g.devicePairs,function(e,t){if(t.SystemKey===s)return void(a=t.SecondaryHardwareModels.SecondaryHardwareModel)}),g.get("data.selectedproductData").forEach(function(s){if(!(s.get("decoderSerialNumber")===t||"Y"===s.schedule||"N"===s.modifiable||s.get("isAddOnPresent")||s.get("isPrincipalPresent")||s.get("isAccessPresent")||void 0!==s.get("secondaryHardwareSerialnumber")||s.get("isStolenSuspended"))){var o=!1;$.each(g.get("xtraViewList"),function(e,t){t.secondaryDecoder.decoderSerialNumber!==s.decoderSerialNumber&&t.decoderSerialNumber!==s.decoderSerialNumber||(o=!0)});var r=!1;$.each(g.get("data.selectedSummaryProductData"),function(e,t){t.primaryDecoderSerialNumber!==s.decoderSerialNumber&&t.secondaryDecoderSerialNumber!==s.decoderSerialNumber||(r=!0)}),o||r||$.each(a,function(t,a){return a.SystemKey!==s.decoderModel||(e.pushObject(s),!1)})}}),e}.property(),disable:function(){var e=!0,t=this.get("secondaryDevicesList");return void 0!=t&&t.length>0&&(e=!1),e}.property()}).create();g.get("data.selectedproductData").pushObject(y),g.updatePrimaryDeviceList(e,a)}},updatePrimaryDeviceList:function(e,t){var a=this,s=!0;$.each(a.primaryDevicesList,function(e,a){return a.decoderSerialNumber===t&&(s=!1),s}),s&&$.each(a.devicePairs,function(o,r){if(r.SystemKey===e){var i=a.getDeviceDetails(t,!0);("N"===i.schedule&&void 0==i.servicesDetails||i.isPrincipalActive&&void 0!=i.servicesDetails)&&void 0!==i.smartcardSerialNumber&&""!==i.smartcardSerialNumber&&!i.isStolenSuspended&&(a.primaryDevicesList.pushObject(i),s=!1)}return s}),a.secondaryDevicesListChanged(),a.disableChanged(),a.primaryDevicesList.sort(function(e,t){return t.productLength-e.productLength})},maxAllowedMobileDevices:function(e){var t=0;return $.each(this.data.selectedproductData,function(e,a){Komodo.UI.cacheDataService.isMobileDevice(a.decoderCpcType)&&t++}),t===GetProductsConstants("ProductsConstants","MAX_MOBILE_DEVICE_ALLOWED")&&!!Komodo.UI.cacheDataService.isMobileDevice(e)},maxAllowedDstvDevices:function(){var e=0;return $.each(this.data.selectedproductData,function(t,a){Komodo.UI.cacheDataService.isGotvDevice(a.decoderCpcType)||Komodo.UI.cacheDataService.isMobileDevice(a.decoderCpcType)||e++}),e>=GetProductsConstants("ProductsConstants","MAX_DSTV_DEVICE_ALLOWED")},disableChanged:function(){this.get("primaryDevicesList").forEach(function(e){e.notifyPropertyChange("disable")})},secondaryDevicesListChanged:function(){this.get("primaryDevicesList").forEach(function(e){e.notifyPropertyChange("secondaryDevicesList")})},addSummaryGridRow:function(e){this.data.selectedSummaryProductData.pushObject(e)},removeDecoder:function(e){var t=this,a=[];t.primaryDevicesList.forEach(function(t){t.decoderSerialNumber!==e.decoderSerialNumber&&t.decoderSerialNumber!==e.secondaryDecoder.decoderSerialNumber||a.push(t)}),a.forEach(function(e){t.primaryDevicesList.removeObject(e),t.secondaryDevicesListChanged(),t.disableChanged()})},isDeviceAdded:function(){var e=this,t=!1,a=e.get("smartcardDecoderNo");return void 0!==e.get("smartcardDecoderNo")&&0!==e.get("data.selectedproductData").length&&e.get("data.selectedproductData").forEach(function(s){a!==s.decoderSerialNumber&&a!==s.smartcardSerialNumber||(Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),kl.value(e._localeBase+"messgDeviceNo")+a+kl.value(e._localeBase+"messgDeviceNoValidation")),void 0!==e.get("data.isAssociateButtonVisible")&&e.set("data.isAssociateButtonVisible.value","true"),t=!0)}),t},viewDetails:function(){this.dataService.showDeviceSummaryPopUp(this.get("data.commandSummaryGridItem"),this._localeBase,this)},setDefaultvalues:function(){var e=this;e.set("data.selectedPaymentOfMethod","1"),e.set("selectedPaymentOfMethodTitle","Monthly"),e.set("data.deviceAtHomeOrOtherLocation","0")},deviceAtAnotherLocationDataReceived:function(e){var t=this;t.isActive=!1,t.set("deviceAtAnotherLocationWithData",!1),t.set("deviceAtanotherLocationCalled",!0),t.set("deviceAtAnotherLocationData",e),null!=e?(t.addressDetails.country=e.country,t.addressDetails.province=e.province,t.addressDetails.city=e.city,t.addressDetails.suburb=e.suburb,t.addressDetails.postalCode=e.postalCode,t.addressDetails.unit=e.unit,t.addressDetails.building=e.building,t.addressDetails.streetNo=e.streetNo,t.addressDetails.streetName=void 0!==e.streetNo&&null!==e.streetNo?e.streetNo+" "+e.streetName:e.streetName,t.addressDetails.boxOrSuite=e.boxOrSuite,e.methodOfPayment==Komodo.MethodOfPayment.CASH||e.methodOfPayment==Komodo.MethodOfPayment.PAYROLL?(t.customerPaymentDetail.DebitOrderDay=e.paymentDay,t.customerPaymentDetail.MethodOfPayment=e.methodOfPayment,t.customerPaymentDetail.AHVStatus=void 0,t.customerPaymentDetail.AccountNumber=void 0,t.customerPaymentDetail.BankName=void 0,t.customerPaymentDetail.BranchCode=void 0,t.customerPaymentDetail.BranchName=void 0):(t.customerPaymentDetail.AHVStatus=e.ahvStatus,t.customerPaymentDetail.AccountNumber=e.accountNumber,t.customerPaymentDetail.BankName=e.bank,t.customerPaymentDetail.BankAccountType=$.grep(t.methodsOfPayment,function(t){if(t.key===e.accountType)return t})[0].value,t.customerPaymentDetail.BranchCode=e.branchCode,t.customerPaymentDetail.BranchName=e.branchName.CanonicalValue,t.customerPaymentDetail.DebitOrderDay=e.debitOrderDay,t.customerPaymentDetail.MethodOfPayment=e.methodOfPayment,t.customerPaymentDetail.PayerIDNumber=e.accountHoldersID,t.customerPaymentDetail.PayerIDType=e.payerIDType,t.customerPaymentDetail.PayerName=e.accountHoldersName,t.customerPaymentDetail.PayerFirstName=e.accountHoldersFirstName,t.customerPaymentDetail.PayerSurname=e.accountHoldersSurnameName,t.customerPaymentDetail.IsAccountHolder=e.customerIsTheAccountHolder),void 0!=e.residenceType&&void 0!=e.residenceType&&(t.customerPersonalDetails.residenceType=e.residenceType),t.deviceAtAnotherLocationData.isSwitchingDevice&&(t.data.primaryProductSelection=void 0,t.data.addOnProductSelection=void 0,t.enableFlags(t.primaryAccessServices,["isCheckedPrimaryAccessService"],!1),t.enableFlags(t.primaryAccessServices,["checkedPrimaryAccessService"],!0),t.enableFlags(t.primaryAccessServices,["isCheckedSecondaryAccessService"],!1),t.enableFlags(t.primaryAccessServices,["checkedSecondaryAccessService"],!0),t.set("disablePrincipalProducts",!0),t.set("disableAddOnProducts",!0)),"2"==e.deviceUsage?(this.customerPersonalDetails.firstName=e.firstName,this.customerPersonalDetails.surname=e.lastName,t.customerPersonalDetails.deviceUsage=kl.value(this._localeDevice+"someoneElse")):t.customerPersonalDetails.deviceUsage=kl.value(this._localeDevice+"customer"),t.set("deviceAtAnotherLocationWithData",!0)):(t.set("setDeviceAtAnotherLocation",!1),t.set("data.deviceAtHomeOrOtherLocation","0"),t.set("tempValue",void 0))},getNewProcessID:function(){this.startNewProcess()},getcustomerID:function(){var e=this,t=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),a=Komodo.Services.customerProfileService.getCustomerPersonalDetail();if(void 0!=a&&(e.set("_customerClassSelected",a.customerClass),e.set("_customerTypeSelected",a.typeId)),t.isCustomerIdIsAvailableToRetriveData()){switch(e.set("data.customerRefNo",t.getCustomerIdToRetrieveData()),e.set("data.radioButtonPaymentMethod",[{title:"Monthly",value:"1"},{title:"Annually",value:"12"}]),e.get("_customerClassSelected")){case GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_SPECIALIST"):switch(e.get("_customerTypeSelected")){case GetCustomerTypesConstants("CustomerTypesConstants","SALES_PROMOTERS"):case GetCustomerTypesConstants("CustomerTypesConstants","DIPLOMAT"):case GetCustomerTypesConstants("CustomerTypesConstants","SHAREHOLDERS"):break;default:this.set("data.radioButtonPaymentMethod",[{title:"Monthly",value:"1"}])}break;default:Komodo.Services.customerProfileService.getCustomerPersonalDetail().isDstv||this.set("data.radioButtonPaymentMethod",[{title:"Monthly",value:"1"}])}var s=Komodo.Services.customerProfileService.getFinancialAccounts().ResponseMessage.Payload.ListOfAccount.Account,o=void 0,r=void 0;return e.get("deviceAtanotherLocationCalled")||(e.hardwareAddressDetails.clear(),$.each(s,function(t,s){$.each(s.ListOfAgreement.Agreement,function(t,i){i.Type!==Komodo.AgreementTypes.BOX_OFFICE&&(r=void 0!=i.PersonalDetail?{firstName:i.PersonalDetail.FirstName,surname:i.PersonalDetail.Surname}:{firstName:a.firstName,surname:a.lastName},o=void 0!==i.ListOfAddress.Address[0]?e.addressMapper(i.ListOfAddress.Address[0]):void 0,void 0!==i.PersonalDetail&&(r.firstName=i.PersonalDetail.FirstName,r.surname=i.PersonalDetail.Surname),$.each(i.ListOfHardware.Hardware,function(t,a){switch(e.extractHardwareDetails(a,i,s.PaymentDetail,o,r),a.SecondaryHardware){case null:case void 0:case"":break;default:e.extractHardwareDetails(a.SecondaryHardware,i,s.PaymentDetail,o,r)}}))})}),$.each(e.get("data.selectedproductData"),function(t,a){if(void 0!==a.secondaryHardwareSerialnumber){var s=e.getDeviceDetails(a.secondaryHardwareSerialnumber,!0),o=a;o.set("secondaryDecoder",s),e.xtraViewList.pushObject(o),e.removeDecoder(o)}}),this.hardwareAddressDetails.pushObject({dlAddress:"Other"}),this._customerClassSelected==GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_SPECIALIST")&&this._customerTypeSelected!=GetCustomerTypesConstants("CustomerTypesConstants","DIPLOMAT")&&this.set("tempValue",this.hardwareAddressDetails[0])),!0}return Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"customerNotFound"),kl.value(e._localeBase+"searchCustomer")),!1},extractHardwareDetails:function(e,t,a,s,o){var r,i,n,c,d,l,u,h,m,p=this,v=void 0,f=void 0,g=0;r=void 0!=e.ProductDetail.Model?e.ProductDetail.Model.split(" ")[0]:"",i=void 0!=e.ProductDetail.Name?e.ProductDetail.Name:"",n=void 0!==e.SerialNumber?e.SerialNumber:void 0,c=void 0!==e.SmartcardDetail&&void 0!==e.SmartcardDetail.Model&&null!==e.SmartcardDetail.Model?e.SmartcardDetail.Model.split(" ")[1]:void 0,void 0!==e.ListOfService&&void 0!==e.ListOfService.Service&&e.ListOfService.Service.length>0&&(v=e.ListOfService),u=e.ProductDetail.UID,h=e.InsuranceStatus,m=t.TermOfPayment,
l=void 0!==u&&null!==u?p.getDecoderCpcByproductId(u):void 0,Komodo.UI.cacheDataService.isGotvDevice(l)?(d=void 0!==e.MACAddress?e.MACAddress:void 0,g=3):Komodo.UI.cacheDataService.isMobileDevice(l)?(d=void 0!==e.MACAddress?e.MACAddress:void 0,g=2):(d=void 0!==e.LinkedSmartcard?e.LinkedSmartcard:void 0,g=1),null!==e.SecondaryHardware&&(f=e.SecondaryHardware.SerialNumber),n&&(void 0!==v?$.each(v.Service,function(e,y){switch(y.ProductDetail.Type){case GetProductsConstants("ProductsConstants","PRINCIPAL_CATEGORY"):y.Status.toUpperCase()===GetProductsConstants("ProductsConstants","STATUS_SUSPENDED")?p.get("onlyPrincipalMobileProduct")&&Komodo.Services.queryService.getJSON("DeviceProcessing/Get?deviceID="+n,{async:!1}).done(function(e){"STOLEN"===e.StatusInformation.StatusDescription.toUpperCase()&&p.addDecoderInList(r,i,n,c,d,l,v,u,h,t,m,f,s,void 0!==a?a:void 0,o,!0,g)}).fail(function(e){e=JSON.parse(e),p.showMessageForFA(e.responseJSON.Message,"retrieveDeviceInfo")}):p.addDecoderInList(r,i,n,c,d,l,v,u,h,t,m,f,s,void 0!==a?a:void 0,o,!1,g)}}):p.addDecoderInList(r,i,n,c,d,l,v,u,h,t,m,f,s,void 0!==a?a:void 0,o,!1,g))},addressMapper:function(e){var t={country:""!==e.Country&&void 0!==e.Country?e.Country:void 0,province:""!==e.Province&&void 0!==e.Province?e.Province:void 0,city:""!==e.City&&void 0!==e.City?e.City:void 0,suburb:""!==e.Suburb&&void 0!==e.Suburb?e.Suburb:void 0,postalCode:""!==e.PostCode&&void 0!==e.PostCode?e.PostCode:void 0,building:""!==e.BuildingName&&void 0!==e.BuildingName?e.BuildingName:void 0,streetName:""!==e.Street&&void 0!==e.Street?e.Street:void 0,boxOrSuite:""!==e.PostBoxNumber&&void 0!==e.PostBoxNumber?e.PostBoxNumber:void 0,unit:""!==e.HouseNumber?e.HouseNumber:void 0,dlAddress:void 0},a=void 0!==t.boxOrSuite&&null!==t.boxOrSuite?t.boxOrSuite+", ":"",s=void 0!==t.streetName&&null!==t.streetName?t.streetName+", ":"",o=void 0!==t.unit&&null!==t.unit?t.unit+", ":"",r=void 0!==t.building&&null!==t.building?t.building+", ":"",i=void 0!==t.suburb&&null!==t.suburb?t.suburb+", ":"",n=void 0!==t.city&&null!==t.city?t.city+", ":"",c=void 0!==t.postalCode&&null!==t.postalCode?t.postalCode:"",d=void 0!==t.province&&null!==t.province?this.getProvienceNameById(t.province,t.country)+", ":"",l=void 0!==t.country&&null!==t.country?this.getCountryNameById(t.country):"";return t.dlAddress=a+o+r+s+i+n+d+l+c,0===$.grep(this.hardwareAddressDetails,function(e){return e.dlAddress.toUpperCase()===t.dlAddress.toUpperCase()}).length&&this.hardwareAddressDetails.pushObject(t),t},getDeviceDetails:function(e,t){var a=this,s=void 0;return $.each(a.get("data.selectedproductData"),function(a,o){return e!==o.decoderSerialNumber||t?e===o.decoderSerialNumber&&t&&(s=o):s=o.agreemntUId,void 0===s}),s},isDecoderRemovedFromExistingPair:function(e){var t=this,a=!0;return $.each(t.get("data.selectedproductData"),function(t,s){return void 0!==s.secondaryHardwareSerialnumber&&s.secondaryHardwareSerialnumber===e&&(a=!1),a}),!a},getCustomerID:function(){var e=this,t=void 0,a=Komodo.Services.customerProfileService.getCustomerPersonalDetail();return void 0!=a&&void 0!=a.customerNo&&(t=a.customerNo,e.customerPersonalDetails.firstName=a.firstName,e.customerPersonalDetails.surname=a.lastName),t},getCountryNameById:function(e){var t=this,a=void 0;return void 0!=e&&void 0!=t.get("countries")&&$.each(t.get("countries"),function(t,s){s.CanonicalKey===e&&(a=s.CanonicalValue)}),a},getProvienceNameById:function(e,t){var a=this,s=void 0;return void 0!=t&&void 0!=a.get("countries")&&$.each(a.get("countries"),function(a,o){o.CanonicalKey===t&&o.Provinces&&o.Provinces.Province&&$.isArray(o.Provinces.Province)&&$.each(o.Provinces.Province,function(t,a){a.CanonicalKey===e&&(s=a.CanonicalValue)})}),s},getProductsBasedOnDecoder:function(){var e=this;switch(e.dataService.clearAllProducts(e),e.get("data.selectedPrimaryDecoder")){case void 0:case null:case"":e.get("isGoTvDeviceSelected")&&$.each(e.productService,function(e,t){t.set("disablePackage",!1),t.set("isChecked",!1)});break;default:if(e.set("servicesNotSelected",!0),e.set("showPrimaryDecodeServices",!0),e.set("showPackages",!0),e.set("isGoTvDeviceSelected",!1),e.set("disablePrincipalProducts",!1),e.set("disableAddOnProducts",!1),e.set("principalPackageText",kl.value(e._localeBase+"principalPackage")),e.get("data.selectedPrimaryDecoder.isGotvDecoder")&&e.set("isGoTvDeviceSelected",!0),e.populateDetailsBasedOnDecoder(e.data.selectedPrimaryDecoder.decoderModel,e.allProductService,e.productService,e.data.selectedPrimaryDecoder.decoderCpcType),e.populateDetailsBasedOnDecoder(e.data.selectedPrimaryDecoder.decoderModel,e.allInsurance,e.primaryInsuranceproducts,e.data.selectedPrimaryDecoder.decoderCpcType),e.populateDetailsBasedOnDecoder(e.data.selectedPrimaryDecoder.decoderModel,e.allAccessService,e.primaryAccessServices,e.data.selectedPrimaryDecoder.decoderCpcType),(e.primaryInsuranceproducts.length>0||e.primaryAccessServices.length>0)&&(e.set("data.primaryDecoder",e.get("data.selectedPrimaryDecoder.decoderSerialNumber")+" "+e.get("data.selectedPrimaryDecoder.decoderType")),e.insuranceSelection?Komodo.Services.securityService.hasPermission(e.insurancepermission)?e.enableFlags(e.primaryInsuranceproducts,["isCheckedPrimaryInsurance","checkedPrimaryInsurance"],!1):e.enableFlags(e.primaryInsuranceproducts,["checkedPrimaryInsurance"],!0):e.enableFlags(e.primaryInsuranceproducts,["isCheckedPrimaryInsurance","checkedPrimaryInsurance"],!1),e.enableFlags(e.primaryAccessServices,["checkedPrimaryAccessService"],!0)),void 0!==e.get("data.selectedPrimaryDecoder.secondaryDecoder")&&void 0!==e.get("data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber")&&null!==e.get("data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber")){var t=!1;e.primaryDevicesList.forEach(function(a){a.decoderSerialNumber===e.get("data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber")&&(t=!0)}),!1===t&&(e.set("showSecondaryDecodeServices",!0),e.populateDetailsBasedOnDecoder(e.data.selectedPrimaryDecoder.secondaryDecoder.decoderModel,e.allInsurance,e.secondaryInsuranceproducts,e.data.selectedPrimaryDecoder.secondaryDecoder.decoderCpcType),e.populateDetailsBasedOnDecoder(e.data.selectedPrimaryDecoder.secondaryDecoder.decoderModel,e.allAccessService,e.secondaryAccessServices,e.data.selectedPrimaryDecoder.secondaryDecoder.decoderCpcType),(e.secondaryInsuranceproducts.length>0||e.secondaryAccessServices.length>0)&&(e.set("data.secondaryDecoder",e.data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber+" "+e.data.selectedPrimaryDecoder.secondaryDecoder.decoderType),e.insuranceSelection?Komodo.Services.securityService.hasPermission(e.insurancepermission)?e.enableFlags(e.secondaryInsuranceproducts,["isCheckedSecondaryInsurance","checkedSecondaryInsurance"],!1):e.enableFlags(e.secondaryInsuranceproducts,["checkedSecondaryInsurance"],!0):e.enableFlags(e.secondaryInsuranceproducts,["isCheckedSecondaryInsurance","checkedSecondaryInsurance"],!1),e.enableFlags(e.secondaryAccessServices,["checkedSecondaryAccessService"],!0)))}e.get("isGoTvDeviceSelected")?e.populateMobileAddOns():e.get("data.selectedPrimaryDecoder.isMobileDecoder")&&(e.set("principalPackageText",kl.value(e._localeBase+"mobilePackages")),e.populateMobileAddOns()),e.getDecoderServices(),void 0===this.data.selectedPrimaryDecoder.agreemntUId&&(this._customerClassSelected==GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_SPECIALIST")?this._customerTypeSelected==GetCustomerTypesConstants("CustomerTypesConstants","DIPLOMAT")?this.set("disableDeviceUsage",!1):this.set("disableDeviceUsage",!0):this.set("disableDeviceUsage",!1))}}.observes("data.selectedPrimaryDecoder"),getDecoderServices:function(){var e=this,t=e.get("data.selectedPrimaryDecoder.servicesDetails"),a=!0,s=!1;switch(t){case void 0:case null:case"":e.get("isGoTvDeviceSelected")&&$.each(e.productService,function(e,t){t.set("disablePackage",!1),t.set("isChecked",!1)});break;default:this.get("isGoTvDeviceSelected")?$.each(e.productService,function(e,s){a=!0,$.each(t.Service,function(e,t){return s.set("disablePackage",!1),s.set("isChecked",!1),s.product.details.productID===t.ProductDetail.UID&&(s.set("disablePackage",!0),s.set("isChecked",!0),a=!1),a})}):(e.setDeviceDetails(e.productService,t.Service,"disablePrincipalProducts",void 0,"primaryProductSelection"),e.setDeviceDetails(e.productAddOn,t.Service,"disableAddOnProducts",void 0,"addOnProductSelection"),e.setDeviceDetails(e.primaryAccessServices,t.Service,void 0,["isCheckedPrimaryAccessService","checkedPrimaryAccessService"],void 0)),s=!0,e.set("data.activationDate",new Date(Date.UTC(e.data.selectedPrimaryDecoder.yyyy,e.data.selectedPrimaryDecoder.mm-1,e.data.selectedPrimaryDecoder.dd))),e.set("data.selectedPaymentOfMethod",e.data.selectedPrimaryDecoder.termOfPayment)}if($.each(e.primaryInsuranceproducts,function(t,s){return a=!0,e.get("data.selectedPrimaryDecoder.isInsurenceStatusPresent")&&(s.set("checkedPrimaryInsurance",!0),s.set("isCheckedPrimaryInsurance",!0),a=!1),a}),void 0!==e.get("data.selectedPrimaryDecoder.secondaryDecoder"))switch(t=e.get("data.selectedPrimaryDecoder.secondaryDecoder.servicesDetails"),e.get("data.selectedPrimaryDecoder.secondaryDecoder")){case void 0:case null:case"":break;default:switch(t){case void 0:case null:case"":break;default:s||(e.setDeviceDetails(e.productService,t.Service,"disablePrincipalProducts",void 0,"primaryProductSelection"),e.setDeviceDetails(e.productAddOn,t.Service,"disableAddOnProducts",void 0,"addOnProductSelection")),e.setDeviceDetails(e.secondaryAccessServices,t.Service,void 0,["isCheckedSecondaryAccessService","checkedSecondaryAccessService"],void 0),$.each(e.secondaryInsuranceproducts,function(t,s){return a=!0,e.get("data.selectedPrimaryDecoder.secondaryDecoder.isInsurenceStatusPresent")&&(s.set("checkedSecondaryInsurance",!0),s.set("isCheckedSecondaryInsurance",!0),a=!1),a})}}},getLookUpData:function(){var e=this,t=void 0,a=void 0,s=void 0,o=$.Deferred();return Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(r){t=r.data.countryId,a=Komodo.Services.localizationService.getCurrentLanguage(),Komodo.Services.cachedDataService.fetch("InvoicePeriod",{}).done(function(r){e.set("chargePeriods",[]),$.each(r,function(t,a){"NONE"!==a.value.toUpperCase()&&e.get("chargePeriods").addObject(a)}),e.setGridColumn(),Komodo.UI.cacheDataService.getHardwareCpc(),Komodo.Services.cachedDataService.fetch("Location").done(function(r){var i=JSON.parse(r);e.set("countries",[]),$.each($.makeArray(i.Countries.Country),function(t,a){e.get("countries").addObject(a)}),Komodo.Services.cachedDataService.fetch("Country").done(function(r){e.set("isoData",[]),e.set("isoData",r),e.isoData.forEach(function(e){t===e.key&&(s=e.key)}),void 0!==s&&(e.set("country",s),e.set("allProductService",[]),e.set("allProductAddOn",[]),e.set("allInsurance",[]),e.set("allAccessService",[]),e.set("allProductCategories",[])),e.set("_customerClassSelected",Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerClass),e.set("_customerTypeSelected",Komodo.Services.customerProfileService.getCustomerPersonalDetail().typeId),Komodo.Services.cachedDataService.fetch("HardwareModelDetail",{domain:t,qualifier:a}).done(function(s){var r=JSON.parse(s);e.set("devicePairs",[]),$.each(r.PrimaryHardwareModels.PrimaryHardwareModel,function(t,a){e.get("devicePairs").addObject(a)}),Komodo.Services.cachedDataService.fetch("ProductCategoryAndProductDetail").done(function(t){e.set("productCategoryAndProductDetail",[]),e.set("productCategoryAndProductDetail",JSON.parse(t).ProductCategories.ProductCategory),e.populateHierachicalCDMDataSet("EstablishmentTypeRelationship",e.residenceTypes),Komodo.Services.featureToggleService.isEnabled("AssociateProducts","OnlyPrincipalMobileProduct").done(function(t){e.set("onlyPrincipalMobileProduct",t),Komodo.Services.cachedDataService.fetch("MethodOfPayment").done(function(t){e.methodsOfPaymentCanonical.clear(),$.each(t,function(t,a){e.methodsOfPaymentCanonical.addObject(a)}),Komodo.Services.cachedDataService.fetch("BankAccountType").done(function(t){e.methodsOfPayment.clear(),$.each(t,function(t,a){e.methodsOfPayment.addObject(a)}),Komodo.Services.featureToggleService.isEnabled("AssociateProducts","InsuranceSelection").done(function(t){e.set("insuranceSelection",t),o.resolve()}).fail(function(e){Komodo.Services.log("Error while checking InsuranceSelection. Error Details:"+e)})}).fail(function(e){Komodo.Services.log("Error while checking BankAccountType. Error Details:"+e)})}).fail(function(e){Komodo.Services.log("Error while checking MethodOfPayment. Error Details:"+e)})}).fail(function(e){Komodo.Services.log("Error while checking feature toggle. Error Details:"+e)})}).fail(function(){Komodo.error("[ERROR] : could not retrieve ProductCategoryAndProductDetail domain = "+t+"/ qualifier = "+a)})}).fail(function(){Komodo.error("[ERROR] : could not retrieve CountryISO domain = "+t+"/ qualifier = "+a)})}).fail(function(){Komodo.error("[ERROR] : could not retrieve CountryISO domain = "+t+"/ qualifier = "+a)})}).fail(function(){Komodo.error("[ERROR] : could not retrieve Location domain = "+t+"/ qualifier = "+a)})}).fail(function(){Komodo.error("[ERROR] : could not retrieve InvoicePeriod domain = "+t+"/ qualifier = "+a)})}),o},populateHierachicalCDMDataSet:function(e,t){Komodo.Repositories.cacheRepository.fetch(Komodo.CacheKeys.selectedCountry).done(function(a){Komodo.Services.cachedDataService.fetch(e,{domain:a.data.countryId,qualifier:Komodo.Services.localizationService.getCurrentLanguage()}).done(function(a){var s=JSON.parse(a);switch(t.clear(),e){case"EstablishmentTypeRelationship":$.each(s.CustomerClasses.CustomerClass,function(e,a){"Residential"===a.CanonicalValue&&"General"==a.CustomerTypes.CustomerType.CanonicalValue&&$.each(a.CustomerTypes.CustomerType.EstablishmentTypes.EstablishmentType,function(e,a){t.addObject(a)})});break;default:Komodo.error("[ERROR] : Unknown Hierarchical dataset: "+e)}}).fail(function(){Komodo.error("[ERROR] : could not retrieve hierarchical CDM data for "+e)})})},getMobileAddOn:function(e){var t=this,a=void 0;return $.each(t.allProductAddOn,function(t,s){return s.product.details.productID!==e||(a=s,!1)}),a},loadCustomerAccountInfo:function(){var e=this,t=e.getCustomerID();void 0!=t?void 0===e.get("defaultAccount")?e.dataService.retrieveFinancialAccounts(t).done(function(t){var a=t;switch(a){case void 0:case null:case"":e.showMessageForFA(kl.value(e._localeBase+"noFinancialaccounts"),"customerProfile");break;default:switch(a.ResponseMessage){case void 0:case null:case"":e.showMessageForFA(kl.value(e._localeBase+"noFinancialaccounts"),"customerProfile");break;default:switch(a.ResponseMessage.Payload){case void 0:case null:case"":e.showMessageForFA(kl.value(e._localeBase+"noFinancialaccounts"),"customerProfile");break;default:var s=a.ResponseMessage.Payload.ListOfAccount;switch(s){case void 0:case null:case"":break;default:var o=new Komodo.Services.ProductAndServiceMaintenanceHelper,r=o.createArrayForSingleElement(s.Account),i=r.filter(o.getOpenAccounts);if(i.length>0){var n=!0;$.each(i,function(t,a){if(!(a.Status!=Komodo.AccountStatus.OPEN&&a.Status!=Komodo.AccountStatus.SUSPENDED||a.Type!=Komodo.AccountTypes.DSTV_RES&&a.Type!=Komodo.AccountTypes.GOTV_RES))switch(a.PaymentDetail.MethodOfPayment){case Komodo.MethodOfPayment.CASH:case Komodo.MethodOfPayment.PAYROLL:e.set("defaultAccount",a.PaymentDetail),e.mappPaymentDetails(a.PaymentDetail,e.get("customerPaymentDetail"));break;default:e.set("defaultAccount",a.PaymentDetail),e.mappPaymentDetails(a.PaymentDetail,e.get("customerPaymentDetail")),n=!1}return n}),void 0===e.get("customerPaymentDetail.MethodOfPayment")&&e.showMessageForFA(kl.value(e._localeBase+"noMethodOfpayment"),"customerProfile");break}e.showMessageForFA(kl.value(e._localeBase+"noFinancialaccounts"),"customerProfile")}}}}}).fail(function(t){t=JSON.parse(t),e.showMessageForFA(t.responseJSON.Message,"customerProfile")}):e.mappPaymentDetails(e.get("defaultAccount"),e.get("customerPaymentDetail")):e.showMessageForFA(kl.value(e._localeBase+"customerNotFound"),"customerProfile")},mappPaymentDetails:function(e,t){var a=this;switch(e.MethodOfPayment){case Komodo.MethodOfPayment.CASH:case Komodo.MethodOfPayment.PAYROLL:t.set("AHVStatus",void 0),t.set("AccountNumber",void 0),t.set("BankName",void 0),t.set("BranchCode",void 0),t.set("BranchName",void 0),t.set("DebitOrderDay",e.DebitOrderDay),t.set("MethodOfPayment",e.MethodOfPayment),t.set("PayerIDNumber",void 0),t.set("PayerIDType",void 0),t.set("BankAccountType",void 0),t.set("PayerName",void 0),t.set("PayerSurname",void 0);break;default:a.validateAccountDetails(e),e.MethodOfPayment===Komodo.MethodOfPayment.AHV_PENDING&&t.set("AHVStatus",!0),t.set("AccountNumber",e.AccountNumber),t.set("BankName",e.BankName),t.set("BranchCode",e.BranchCode),t.set("BranchName",e.BranchName),t.set("DebitOrderDay",e.DebitOrderDay),t.set("MethodOfPayment",e.MethodOfPayment),t.set("PayerIDNumber",e.PayerIDNumber),t.set("BankAccountType",e.BankAccountType),t.set("PayerIDType",e.PayerIDType),t.set("PayerName",e.PayerName),t.set("PayerSurname",e.PayerSurname)}},validateAccountDetails:function(e){switch(!(Ember.empty(e.AccountNumber)||isNaN(e.AccountNumber)||Ember.empty(e.BankName)||Ember.empty(e.BankAccountType)||Ember.empty(e.BranchCode)||Ember.empty(e.BranchName)||isNaN(e.DebitOrderDay))){case!0:break;case!1:Komodo.Controls.MessageBoxController.show(kl.value(this._localeBase+"useCaseTitle"),kl.value(this._localeBase+"incompleteAccountDetails"),Komodo.Controls.MessageBoxYesNoButtons,this,"id123456","warning").response=function(e){"yes"==e?Komodo.Services.eventAggregator.publish("PublishAccountNoToRedirectEditPaymentDetail",account):Komodo.Services.uiService.transitionTo("/home")}}},showMessageForFA:function(e,t){var a=this;Ember.isEmpty(e)&&(e=kl.value(a._localeBase+"incompleteCustomerDetails")),Komodo.Controls.MessageBoxController.show(kl.value(a._localeBase+"useCaseTitle"),e,Komodo.Controls.MessageBoxOkButton,a,"LCAI00005","danger").response=function(e){"ok"==e&&Komodo.Services.uiService.transitionTo(t)}},loadCustomerDetails:function(){var e=this,t=e.getCustomerID();void 0!=t&&(void 0===e.get("defaultAddressDetails")?e.dataService.retrieveCustomer(t).done(function(t){var a=t;if(void 0!=a&&void 0!=a.ResponseMessage.Payload.CustomerDetail){var s=$.grep(a.ResponseMessage.Payload.CustomerDetail.ListOfAddress.Address,function(e){return"3"===e.Type});if(1==s.length&&void 0!==s[0])switch(""!==s[0].Country&&void 0!==s[0].Country&&null!==s[0].Country&&""!==s[0].Province&&void 0!==s[0].Province&&null!==s[0].Province&&""!==s[0].City&&void 0!==s[0].City&&null!==s[0].City&&""!==s[0].Suburb&&void 0!==s[0].Suburb&&null!==s[0].Suburb&&""!==s[0].PostCode&&void 0!==s[0].PostCode&&null!==s[0].PostCode){case!0:switch(e.set("defaultAddressDetails",s[0]),e.defaultAddressMapper(e.get("defaultAddressDetails"),e.get("addressDetails")),e.addressDetails.country){case"zaf":case"nam":e.set("marketSegment",GetProductsConstants("ProductsConstants","MARKET_SEGMENT"));break;case"lso":e.set("marketSegment",GetProductsConstants("ProductsConstants","LESOTHO_MARKET_SEGMENT"));break;default:e.set("marketSegment",GetProductsConstants("ProductsConstants","MARKET_SEGMENT"))}e.set("allProductService",[]),e.set("allProductAddOn",[]),e.set("allInsurance",[]),e.set("allAccessService",[]),e.set("allProductCategories",[]),Komodo.UI.cacheDataService.getProductTypesWithDetails(e.allProductService,e.allProductAddOn,e.allInsurance,e.allAccessService,e.allProductCategories,e._customerClassSelected,e._customerTypeSelected,e.get("marketSegment"));break;default:e.showMessageForFA(kl.value(e._localeBase+"addressInformation"),"editCustomerDetail")}}}):e.defaultAddressMapper(e.get("defaultAddressDetails"),e.get("addressDetails")))},defaultAddressMapper:function(e,t){t.set("country",e.Country),t.set("province",e.Province),t.set("city",e.City),t.set("suburb",e.Suburb),t.set("postalCode",e.PostCode),t.set("unit",e.HouseNumber),t.set("building",e.BuildingName),t.set("streetNo",e.BuildingNumber),t.set("streetName",e.Street),t.set("boxOrSuite",e.PostBoxNumber)},summaryOfDevicesList:function(){var e=Ember.A(),t=this;if(void 0!=t.get("data.selectedproductData")){var a;t.get("data.selectedproductData").forEach(function(t){"N"!=t.schedule&&"N"!=t.modifiable||void 0==t.smartcardSerialNumber||""==t.smartcardSerialNumber||t.isStolenSuspended||e.pushObject(t)}),t.xtraViewList.length>0&&(a=[],t.xtraViewList.forEach(function(e){a.pushObject(e)}),$.each(e,function(e,s){t.set("isInPair",!1),$.each(t.xtraViewList,function(e,a){if(s.decoderSerialNumber===a.decoderSerialNumber||a.secondaryDecoder.decoderSerialNumber===s.decoderSerialNumber)return void t.set("isInPair",!0)}),t.get("isInPair")||a.pushObject(s)}),e=a),t.get("data.selectedSummaryProductData").length>0&&(a=[],$.each(e,function(e,s){t.set("isInPair",!1),$.each(t.get("data.selectedSummaryProductData"),function(e,a){if(s.decoderSerialNumber===a.secondaryDecoderSerialNumber||a.primaryDecoderSerialNumber===s.decoderSerialNumber)return void t.set("isInPair",!0)}),t.get("isInPair")||a.pushObject(s)}),e=a)}return t.set("tempValue",void 0),e}.property("data.selectedproductData.@each","xtraViewList.@each","data.selectedSummaryProductData.@each"),disableAddButtonIfNoPackagesAdded:function(){this.data.selectedSummaryProductData.length>0?this.set("disableAddButton",!0):this.set("disableAddButton",!1)}.observes("data.selectedSummaryProductData.length"),showDisableDevices:function(){var e=this;0===e.primaryDevicesList.length?e.set("devicesLabel",!1):e.set("devicesLabel",!0)}.observes("primaryDevicesList.@each"),setDeviceDetails:function(e,t,a,s,o){var r=this,i=void 0;$.each(e,function(e,n){i=!0,t=void 0==t.length?[t]:t,$.each(t,function(e,t){return n.product.details.productID===t.ProductDetail.UID&&(void 0!==s&&$.each(s,function(e,t){Ember.set(n,t,!0)}),void 0!==o&&r.get("data").set(o,t.ProductDetail.UID),void 0!==a&&r.set(a,!0),i=!1),i})})},servicesNotSelectedChanged:function(){switch(this.servicesNotSelected){case void 0:case null:case"":break;case!0:this.set("data.selctedWaitingForInstallationOption","1"),this.set("disablePaymentOptions",!0),this.set("disableInstallationOption",!0),this._customerClassSelected==GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_SPECIALIST")?this._customerTypeSelected==GetCustomerTypesConstants("CustomerTypesConstants","DIPLOMAT")?this.set("disableDeviceUsage",!1):this.set("disableDeviceUsage",!0):this.set("disableDeviceUsage",!1),this.set("data.selectedPaymentMadeOption","1"),this.set("data.activationDate",new Date),this.set("disableActivationDate",!0);break;case!1:if(this.set("disablePaymentOptions",!1),this.set("disableActivationDate",!1),this.set("disableInstallationOption",!1),this.set("disableDeviceUsage",!1),this.enableFlags(this.primaryAccessServices,["checkedPrimaryAccessService"],!1),this.enableFlags(this.secondaryAccessServices,["checkedSecondaryAccessService"],!1),void 0!==this.data.selectedPrimaryDecoder&&null!==this.data.selectedPrimaryDecoder&&((this.get("data.selectedPrimaryDecoder.isMobileDecoder")||this.get("data.selectedPrimaryDecoder.isGotvDecoder"))&&(this.set("disableInstallationOption",!0),this.set("disableDeviceUsage",!0),void 0===this.data.addOnProductSelection?(this.set("disableActivationDate",!1),this.set("disablePaymentOptions",!1)):(this.set("disableActivationDate",!0),this.set("disablePaymentOptions",!0))),this._customerClassSelected==GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_SPECIALIST")))switch(this._customerTypeSelected){case GetCustomerTypesConstants("CustomerTypesConstants","DIPLOMAT"):break;case GetCustomerTypesConstants("CustomerTypesConstants","SALES_PROMOTERS"):case GetCustomerTypesConstants("CustomerTypesConstants","SHAREHOLDERS"):this.set("disableDeviceUsage",!0);break;default:this.set("disableDeviceUsage",!0),this.set("disablePaymentOptions",!0)}}}.observes("servicesNotSelected"),disableInstallationOption:function(){var e=!0;return void 0!==this.data.selectedPrimaryDecoder&&(this.get("data.selectedPrimaryDecoder.isMobileDecoder")||(e=!1)),e}.property("data.selectedPrimaryDecoder"),disablePaymentOptionsChanged:function(){var e=this;e.set("disablePaymentOptions",!0),$.each(e.primaryInsuranceproducts,function(t,a){if(a.isCheckedPrimaryInsurance&&(e.set("disablePaymentOptions",!1),!a.checkedPrimaryInsurance)){Komodo.Controls.MessageBoxController.show(kl.value("locale.customer:customerInformation.dccAcceptTermAndConditionTitle"),kl.value("locale.customer:customerInformation.dccAcceptTermAndCondition"),Komodo.Controls.MessageBoxAcceptDeclineButtons,e,"id5446673","").response=function(t){"accept"!==t&&(e.publishDeclineDCCTermsAndConditionsEvent(e.data.selectedPrimaryDecoder.decoderSerialNumber),a.set("isCheckedPrimaryInsurance",!1))}}}),e.servicesNotSelected||e.set("disablePaymentOptions",!1)}.observes("primaryInsuranceproducts.@each.isCheckedPrimaryInsurance"),disablePaymentOptionsChangedSecondary:function(){var e=this;e.set("disablePaymentOptions",!0),$.each(e.secondaryInsuranceproducts,function(t,a){if(a.isCheckedSecondaryInsurance&&(e.set("disablePaymentOptions",!1),!a.checkedSecondaryInsurance)){Komodo.Controls.MessageBoxController.show(kl.value("locale.customer:customerInformation.dccAcceptTermAndConditionTitle"),kl.value("locale.customer:customerInformation.dccAcceptTermAndCondition"),Komodo.Controls.MessageBoxAcceptDeclineButtons,e,"id5446673","").response=function(t){"accept"!==t&&(e.publishDeclineDCCTermsAndConditionsEvent(e.data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber),a.set("isCheckedSecondaryInsurance",!1))}}}),e.servicesNotSelected||e.set("disablePaymentOptions",!1)}.observes("secondaryInsuranceproducts.@each.isCheckedSecondaryInsurance"),gotvProductsSelected:function(){if(void 0!=this.data.selectedPrimaryDecoder&&null!==this.data.selectedPrimaryDecoder&&this.get("data.selectedPrimaryDecoder.isGotvDecoder")){var e=this,t=!0;$.each(e.productService,function(e,a){return a.isChecked?t=!1:t}),e.set("servicesNotSelected",t)}}.observes("productService.@each.isChecked"),selectedPaymentMadeOptionChanged:function(){switch(this.data.selectedPaymentMadeOption){case void 0:case null:case"":case"1":break;case"0":this.set("disablePaymentsOptions",!1)}}.observes("data.selectedPaymentMadeOption"),showPrimaryInsuranceproducts:function(){return void 0!=this.primaryInsuranceproducts&&this.primaryInsuranceproducts.length>0||(void 0!=this.primaryAccessServices&&this.primaryAccessServices.length>0||(void 0!=this.secondaryInsuranceproduct&&this.secondaryInsuranceproduct.length>0||void 0!=this.secondaryAccessServices&&this.secondaryAccessServices.length>0))}.property("primaryInsuranceproducts.length","primaryAccessServices.length","secondaryInsuranceproduct.length","secondaryAccessServices.length"),populateDetailsBasedOnDecoder:function(e,t,a,s){a.clear();var o=this;o.set("productInList",!1);var r=GetProductsConstants("ProductsConstants","MOBILE_PRODUCT_CATEGORY_ID");o.get("isGoTvDeviceSelected")&&(r=GetProductsConstants("ProductsConstants","GOTV_PRODUCT_CATEGORY_ID")),$.each(t,function(t,i){switch(i){case"":case void 0:case null:break;default:switch(i.product.allowDevice){case"":case void 0:case null:break;default:var n=i.product.allowDevice.split(",");!n instanceof Array&&(n=[n]),o.set("productInList",!1),$.each(n,function(t,n){if(n===e)if(!Komodo.UI.cacheDataService.isMobileDevice(s)&&!Komodo.UI.cacheDataService.isGotvDevice(s)||o.get("productInList")||i.product.details.productCategory!==r)Komodo.UI.cacheDataService.isMobileDevice(s)||o.get("productInList")||(a.pushObject(i),o.set("productInList",!0));else if(Komodo.UI.cacheDataService.isMobileDevice(s)&&o.get("isGoTvDeviceSelected"))if(void 0!==i.product.allowProduct){var c=i.product.allowProduct.split();!c instanceof Array&&(c=[c]),$.each(c,function(e,t){return $.each(o.get("data.selectedSummaryProductData"),function(e,s){return void 0!==s.serviceUID&&$.each(s.serviceUID,function(e,s){return s.UID!==t||(a.pushObject(i),o.set("productInList",!0),!1)}),!o.get("productInList")}),!o.get("productInList")})}else a.pushObject(i),o.set("productInList",!0);else a.pushObject(i),o.set("productInList",!0)})}}})},populateAddOns:function(){var e=this;switch(e.get("data.primaryProductSelection")){case void 0:case null:case"":void 0===e.get("data.selectedPrimaryDecoder")&&e.dataService.clearAllProducts(e);break;default:e.set("servicesNotSelected",!1),void 0===e.get("data.selectedPrimaryDecoder")||e.get("data.selectedPrimaryDecoder.isMobileDecoder")||(e.set("productAddOn",[]),$.each(e.allProductAddOn,function(t,a){switch(a){case"":case void 0:case null:break;default:switch(a.product.allowProduct){case"":case void 0:case null:break;default:if(void 0!=a.product.allowDevice){var s=a.product.allowDevice.split(","),o=!1;if($.each(s,function(t,a){a===e.get("data.selectedPrimaryDecoder.decoderModel")&&(o=!0)}),o){var r=a.product.allowProduct.split(",");$.each(r,function(t,s){if(s===e.get("data.primaryProductSelection"))return void e.productAddOn.addObject(a);e.get("data.selectedPrimaryDecoder.isMobileDecoder")&&$.each(e.get("data.selectedSummaryProductData"),function(t,o){void 0!==o.serviceUID&&$.each(o.serviceUID,function(t,o){o.UID===s&&e.productAddOn.addObject(a)})})})}}}}}))}}.observes("data.primaryProductSelection"),populateMobileAddOns:function(){var e=this;e.set("productAddOn",[]);var t=0,a=0;$.each(e.get("allProductAddOn"),function(s,o){switch(o){case"":case void 0:case null:break;default:switch(o.product.allowProduct){case"":case void 0:case null:break;default:var r=o.product.allowDevice.split(","),i=!1;if($.each(r,function(t,a){a===e.get("data.selectedPrimaryDecoder.decoderModel")&&(i=!0)}),i){var n=o.product.allowProduct.split(",");t=0,a=0,$.each(n,function(s,r){if(e.get("data.selectedPrimaryDecoder.isMobileDecoder")){var i;$.each(e.get("data.selectedSummaryProductData"),function(s,n){i=!0,void 0!==n.serviceUID&&$.each(n.serviceUID,function(t,s){return s.UID===r?(e.onlyPrincipalMobileProduct?(a=1*a+1,e.productService.addObject(o),e.data.primaryProductSelection=o.product.details.productID,e.disablePrincipalProducts=!0):e.productAddOn.addObject(o),i=!1,!1):i}),o.product.details.productID===n.addOnUID&&e.onlyPrincipalMobileProduct&&(t=1*t+1),n.addOnUID===r&&e.productAddOn.addObject(o)}),$.each(e.get("data.selectedproductData"),function(s,n){if(i=!0,n.servicesDetails){var c=n.servicesDetails.Service;n.isPrincipalPresent?$.each(c,function(t,s){return r===s.ProductDetail.UID&&(e.onlyPrincipalMobileProduct?(a=1*a+1,e.productService.addObject(o),e.data.primaryProductSelection=o.product.details.productID,e.disablePrincipalProducts=!0):e.productAddOn.addObject(o),i=!1),i}):n.isAddOnPresent&&$.each(c,function(a,s){return r!==s.ProductDetail.UID||e.onlyPrincipalMobileProduct?e.onlyPrincipalMobileProduct&&s.ProductDetail.UID===o.product.details.productID&&(t=1*t+1,i=!1):(i=!1,e.productAddOn.addObject(o)),i})}})}})}}}e.onlyPrincipalMobileProduct&&a<=t&&(e.productService.removeObject(o),e.data.primaryProductSelection=void 0,e.disablePrincipalProducts=!1)})},deviceUsageChanged:function(){var e=this;switch(e.isActive=!1,e.tempValue){case null:case void 0:case"":break;default:switch(e.tempValue.dlAddress){case"":case void 0:case null:break;case"Other":Komodo.Services.eventAggregator.publish("deviceAtAnotherLocation",null),e.isActive=!0,e.set("setDeviceAtAnotherLocation",!0),e.set("deviceAtAnotherLocationWithData",!1),e.set("deviceAtanotherLocationCalled",!1),e.set("data.deviceAtHomeOrOtherLocation","1");break;default:e.set("setDeviceAtAnotherLocation",!1),e.loadCustomerAccountInfo(),e.addressDetails.country=e.tempValue.country,e.addressDetails.province=e.tempValue.province,e.addressDetails.city=e.tempValue.city,e.addressDetails.suburb=e.tempValue.suburb,e.addressDetails.postalCode=e.tempValue.postalCode,e.addressDetails.unit=e.tempValue.unit,
e.addressDetails.building=e.tempValue.building,e.addressDetails.streetNo=e.tempValue.streetNo,e.addressDetails.streetName=e.tempValue.streetName,e.addressDetails.boxOrSuite=e.tempValue.boxOrSuite,e.set("data.deviceAtHomeOrOtherLocation","0")}}}.observes("tempValue"),paymentOfMethodChanged:function(){var e=this;"1"===e.get("data.selectedPaymentOfMethod")&&e.set("selectedPaymentOfMethodTitle","Monthly"),"12"===e.get("data.selectedPaymentOfMethod")&&e.set("selectedPaymentOfMethodTitle","Annually")}.observes("data.selectedPaymentOfMethod"),actions:{deleteDevice:function(e){var t=this;Komodo.Controls.MessageBoxController.show(kl.value("controls.datagrid.deleteTitle"),kl.value("controls.datagrid.defaultDeleteText"),Komodo.Controls.MessageBoxYesNoButtons,t,"delItem1","alert").response=function(a){"yes"==a&&(t.get("data.selectedproductData").removeObject(e.content),t.set("primaryDevicesList",$.grep(t.primaryDevicesList,function(t){return!(t.decoderSerialNumber===e.content.decoderSerialNumber)})),$.each(t.primaryDevicesList,function(){t.secondaryDevicesListChanged(),t.disableChanged()}),$.each(t.xtraViewList,function(a,s){return s.decoderSerialNumber===e.content.decoderSerialNumber?(t.updatePrimaryDeviceList(s.secondaryDecoder.decoderModel,s.secondaryDecoder.decoderSerialNumber),void t.xtraViewList.removeObject(s)):s.secondaryDecoder.decoderSerialNumber===e.content.decoderSerialNumber?(t.updatePrimaryDeviceList(s.decoderModel,s.decoderSerialNumber),void t.xtraViewList.removeObject(s)):void 0}),$.each(t.get("data.selectedSummaryProductData"),function(a,s){return s.primaryDecoderSerialNumber===e.content.decoderSerialNumber?(t.updatePrimaryDeviceList(s.secondaryDecoderModel,s.secondaryDecoderSerialNumber),void t.get("data.selectedSummaryProductData").removeObject(s)):s.secondaryDecoderSerialNumber===e.content.decoderSerialNumber?(t.updatePrimaryDeviceList(s.primaryDecoderModel,s.primaryDecoderSerialNumber),void t.get("data.selectedSummaryProductData").removeObject(s)):void 0}),t.productAddOn.clear(),t.productService.clear(),t.set("showSecondaryDecodeServices",!1),t.set("showPrimaryDecodeServices",!1),t.set("disableAddButton",!1))}},searchHardware:function(){var e=this;!1!==e.canSubmitData(e,kl.value(this._localeBase+"useCaseTitle"),{showInModal:!0})&&(e.isDeviceAdded()||this.publishValidateHardwarePairingEvent(void 0,e.get("smartcardDecoderNo")))},linkHardware:function(e){var t=this;switch(e.content){case null:case void 0:Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),kl.value(t._localeBase+"messgLinkProductsPrimary"));break;default:switch(t.set("deviceSelected",e.content),t.deviceSelected.secondaryDecoder){case null:case void 0:Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),kl.value(t._localeBase+"messgLinkProducts"));break;default:t.xtraViewList.pushObject(t.deviceSelected),t.removeDecoder(t.deviceSelected),t.set("deviceSelected",void 0),t.set("data.selectedPrimaryDecoder",void 0)}}},unLinkHardware:function(e){var t=this;t.set("primaryDevice",e.content),t.xtraViewList.forEach(function(e){e.decoderSerialNumber===t.primaryDevice.decoderSerialNumber&&t.xtraViewList.removeObject(e)}),t.primaryDevice.secondaryDecoder.servicesDetails=void 0,t.set("primaryDevice.secondaryDecoder.isPrincipalPresent",!1),t.set("primaryDevice.secondaryDecoder.isAddOnPresent",!1),t.set("primaryDevice.secondaryDecoder.isAccessPresent",!1),t.set("primaryDevice.secondaryDecoder.modifiable","Y"),t.set("primaryDevice.secondaryDecoder.principal",""),t.set("primaryDevice.secondaryDecoder.addOn",""),t.set("primaryDevice.secondaryDecoder.access",""),t.updatePrimaryDeviceList(t.primaryDevice.secondaryDecoder.decoderModel,t.primaryDevice.secondaryDecoder.decoderSerialNumber),t.primaryDevice.set("secondaryDecoder",void 0),t.updatePrimaryDeviceList(t.primaryDevice.decoderModel,t.primaryDevice.decoderSerialNumber),t.set("data.selectedPrimaryDecoder",void 0),t.set("primaryDevice",void 0)},addDeviceIntoSummaryGrid:function(){var e=this;if(void 0!==e.deviceAtAnotherLocationData&&null!==e.deviceAtAnotherLocationData&&void 0!==e.deviceAtAnotherLocationData.residenceType&&e.deviceAtAnotherLocationData.residenceType===this.holidayHomeKey){if(!1===e.deviceAtAnotherLocationData.isSwitchingDevice&&void 0===e.get("data.primaryProductSelection")){Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"messgTitleHolidayHome"),kl.value(e._localeBase+"messgSwitching"),Komodo.Controls.MessageBoxYesNoButtons,e,"delItem1","warning").response=function(t){"yes"==t&&(e.deviceAtAnotherLocationData.isSwitchingDevice=!0,e.send("commitDeviceIntoSummaryGrid"))}}else e.send("commitDeviceIntoSummaryGrid");e.deviceAtAnotherLocationData.isSwitchingDevice&&(e.data.primaryProductSelection=void 0,e.data.addOnProductSelection=void 0,e.enableFlags(e.primaryAccessServices,["isCheckedPrimaryAccessService"],!1),e.enableFlags(e.primaryAccessServices,["checkedPrimaryAccessService"],!0),e.enableFlags(e.primaryAccessServices,["isCheckedSecondaryAccessService"],!1),e.enableFlags(e.primaryAccessServices,["checkedSecondaryAccessService"],!0),e.set("disablePrincipalProducts",!0),e.set("disableAddOnProducts",!0))}else e.send("commitDeviceIntoSummaryGrid")},commitDeviceIntoSummaryGrid:function(){this.set("services",void 0),this.set("serviceUid",[]);var e="",t="",a=this,s=!1,o=0;Ember.empty(a.deviceAtAnotherLocationData)||(a.deviceAtAnotherLocationData.residenceType=void 0,a.deviceAtAnotherLocationData.isSwitchingDevice=void 0);var r=Ember.Object.extend({principalProductPaymentDetails:void 0,principalProductAddress:void 0,principalProductPersonalDetails:void 0,principalProductAwaitingInstallationDetails:void 0}).create();if(!1!==a.canSubmitData(a.data,kl.value(a._localeBase+"useCaseTitle"),{showInModal:!0})){switch(a.get("data.selectedPrimaryDecoder")){case void 0:case null:case"":return void Komodo.Controls.MessageBoxController.show(kl.value(a._localeBase+"messgTitleDeviceInfoToGrid"),kl.value(a._localeBase+"messgDeviceInfoToGrid"),Komodo.Controls.MessageBoxOkButton,a,"id14456673","danger")}if(!a.get("data.selectedPrimaryDecoder.isGotvDecoder")||a.validateGotvRule()){var i="";void 0===a.get("data.primaryProductSelection")||""===a.get("data.primaryProductSelection")||a.disablePrincipalProducts||($.each(a.productService,function(e,t){if(a.get("data.primaryProductSelection")===t.product.details.productID){i+=t.product.details.name;var s={UID:t.product.details.productID,Name:t.product.details.name};return a.serviceUid.pushObject(s),o++,!1}return!0}),a.set("services",i)),a.get("onlyPrincipalMobileProduct")&&a.get("data.selectedPrimaryDecoder.isMobileDecoder")&&($.each(a.allProductAddOn,function(s,r){return a.get("data.primaryProductSelection")!==r.product.details.productID||(e=r.product.details.name,t=r.product.details.productID,o++,i="",!1)}),s=!0,a.set("services",i)),void 0===a.get("data.addOnProductSelection")||""===a.get("data.addOnProductSelection")||a.get("disableAddOnProducts")||$.each(a.productAddOn,function(r,i){return a.get("data.addOnProductSelection")!==i.product.details.productID||(a.isMobileAddOn(i.product.details.productCategory)&&(s=!0),e=i.product.details.name,t=i.product.details.productID,o++,!1)});var n,c=Komodo.Models.AssociateProductsSummary.create();if(c.set("isDisconnected",a.get("data.selectedPrimaryDecoder.isDisconnected")),s){if(!a.validateMobileRules(t,e,r))return;c.set("activationDate",a.get("addOnActivationDate")),c.set("customerPaymentDetail",r.principalProductPaymentDetails),c.set("addressDetails",r.principalProductAddress),c.set("customerPersonalDetails",r.principalProductPersonalDetails),c.set("isAwaitingInstallation",r.principalProductAwaitingInstallationDetails)}else{var d=a.data.activationDate.getDate(),l=a.data.activationDate.getMonth()+1,u=a.data.activationDate.getFullYear();d<10&&(d="0"+d),l<10&&(l="0"+l),n=d+"-"+l+"-"+u,c.set("activationDate",n),c.set("customerPaymentDetail",a.dataService.getPaymentDetails(a.customerPaymentDetail)),c.set("addressDetails",a.dataService.getAddressDetails(a.addressDetails)),c.set("customerPersonalDetails",a.dataService.getPersonalDetails(a.customerPersonalDetails)),c.set("isAwaitingInstallation",a.data.selctedWaitingForInstallationOption)}c.set("chargePeriod",a.get("selectedPaymentOfMethodTitle"));var h,m="",p="",v=!1;if(void 0!==a.get("data.selectedPrimaryDecoder")){if(h=a.data.selectedPrimaryDecoder.decoderSerialNumber,void 0!==a.get("data.selectedPrimaryDecoder.secondaryDecoder")){var f=!1;a.primaryDevicesList.forEach(function(e){e.decoderSerialNumber===a.get("data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber")&&(f=!0)}),!1===f&&(v=!0,o=1*o+10,h=h+" - "+a.get("data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber"))}switch(c.set("primaryDecoderType",a.get("data.selectedPrimaryDecoder.decoderType")),c.set("primaryDecoderModel",a.get("data.selectedPrimaryDecoder.decoderModel")),c.set("primaryDecoderSerialNumber",a.get("data.selectedPrimaryDecoder.decoderSerialNumber")),c.set("primaryDecoderSmartcardType",a.get("data.selectedPrimaryDecoder.smartcardType")),c.set("primaryDecoderSmartcardSerialNumber",a.get("data.selectedPrimaryDecoder.smartcardSerialNumber")),c.set("primaryDecoderCpcType",a.get("data.selectedPrimaryDecoder.decoderCpcType")),c.set("primaryDecoderUID",a.get("data.selectedPrimaryDecoder.UID")),c.set("primaryDecoderServiceDetails",a.get("data.selectedPrimaryDecoder.servicesDetails")),a.primaryInsuranceproducts.length){case 0:case void 0:case null:case"":break;default:$.each(a.primaryInsuranceproducts,function(e,t){if(t.isCheckedPrimaryInsurance&&!t.checkedPrimaryInsurance)return c.set("primaryDecoderInsurance",!0),o++,void(m=a.get("data.selectedPrimaryDecoder.decoderSerialNumber"))})}switch(a.primaryAccessServices.length){case 0:case void 0:case null:case"":break;default:$.each(a.primaryAccessServices,function(e,t){if(t.isCheckedPrimaryAccessService&&!t.checkedPrimaryAccessService)return c.set("primaryDecoderAccessServiceName",t.product.details.name),c.set("primaryDecoderAccessService",t.product.details.productID),o++,void(p=a.get("data.selectedPrimaryDecoder.decoderSerialNumber"))})}if(v){switch(a.secondaryInsuranceproducts.length){case 0:case void 0:case null:case"":break;default:$.each(a.secondaryInsuranceproducts,function(e,t){if(t.isCheckedSecondaryInsurance&&!t.checkedSecondaryInsurance)return c.set("secondaryDecoderInsurance",!0),o++,void(m=""===m?a.get("data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber"):m+" - "+a.get("data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber"))})}switch(a.secondaryAccessServices.length){case 0:case void 0:case null:case"":break;default:$.each(a.secondaryAccessServices,function(e,t){if(t.isCheckedSecondaryAccessService&&!t.checkedSecondaryAccessService)return c.set("secondaryDecoderAccessServiceName",t.product.details.name),c.set("secondaryDecoderAccessService",t.product.details.productID),o++,void(p=""===p?a.data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber:p+" - "+a.data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber)})}c.set("secondaryDecoderType",a.data.selectedPrimaryDecoder.secondaryDecoder.decoderType),c.set("secondaryDecoderSerialNumber",a.data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber),c.set("secondarySmartcardType",a.data.selectedPrimaryDecoder.secondaryDecoder.smartcardType),c.set("secondarySmartcardSerialNumber",a.data.selectedPrimaryDecoder.secondaryDecoder.smartcardSerialNumber),c.set("secondaryDecoderCpcType",a.data.selectedPrimaryDecoder.secondaryDecoder.decoderCpcType),c.set("secondaryDecoderUID",a.data.selectedPrimaryDecoder.secondaryDecoder.UID),c.set("secondaryDecoderModel",a.data.selectedPrimaryDecoder.secondaryDecoder.decoderModel),c.set("secondaryDecoderServiceDetails",a.data.selectedPrimaryDecoder.secondaryDecoder.servicesDetails)}else c.set("secondaryDecoderInsurance",void 0),c.set("secondaryDecoderAccessService",void 0),c.set("secondaryDecoderType",void 0),c.set("secondaryDecoderSerialNumber",void 0),c.set("secondarySmartcardType",void 0),c.set("secondarySmartcardSerialNumber",void 0);if(void 0!==a.services&&""!==a.services?(c.set("services",a.services),c.set("serviceUID",a.serviceUid)):(c.set("services",void 0),c.set("serviceUID",void 0)),""!==t?(c.set("AddOn",e),c.set("addOnUID",t)):(c.set("AddOn",void 0),c.set("addOnUID",void 0)),c.set("weightage",o),!a.isNewProductSelected(a.get("data.selectedPrimaryDecoder"),c))return void Komodo.Controls.MessageBoxController.show(kl.value(a._localeBase+"useCaseTitle"),kl.value(a._localeBase+"alreadyExistingPackages"),Komodo.Controls.MessageBoxOkButton,a,"id23456683","danger");if(o=0,a._customerTypeSelected!=GetCustomerTypesConstants("CustomerTypesConstants","EMPLOYEE")||a.get("data.selectedPrimaryDecoder.isMobileDecoder")){if(a._customerTypeSelected==GetCustomerTypesConstants("CustomerTypesConstants","EMPLOYEE")&&a.get("data.selectedPrimaryDecoder.isMobileDecoder")&&(o=0,$.each(a.get("data.selectedproductData"),function(e,t){Komodo.UI.cacheDataService.isMobileDevice(t.decoderCpcType)&&a.get("data.selectedPrimaryDecoder.decoderSerialNumber")!==t.decoderSerialNumber&&t.isPrincipalPresent&&void 0!==t.UID&&o++}),$.each(a.get("data.selectedSummaryProductData"),function(e,t){Komodo.UI.cacheDataService.isMobileDevice(t.decoderCpcType)&&(void 0==t.serviceUID&&void 0==t.addOnUID||o++)}),o>0&&(void 0!=a.get("data.addOnProductSelection")||void 0!=a.get("data.primaryProductSelection"))))return void Komodo.Controls.MessageBoxController.show(kl.value(a._localeBase+"messgTitleDeviceInfoToGrid"),kl.value(a._localeBase+"maxAllowMobileDeviceForEmployee"),Komodo.Controls.MessageBoxOkButton,a,"id14456679","danger")}else if($.each(this.data.selectedproductData,function(e,t){a.get("data.selectedPrimaryDecoder.decoderSerialNumber")!==t.decoderSerialNumber&&t.isPrincipalPresent&&void 0!==c.serviceUID&&o++}),$.each(this.data.selectedSummaryProductData,function(e,t){t.isPrincipalPresent&&void 0!==t.UID&&o++}),o>0&&a.data.primaryProductSelection)return void Komodo.Controls.MessageBoxController.show(kl.value(a._localeBase+"messgTitleDeviceInfoToGrid"),kl.value(a._localeBase+"maxAllowDeviceForEmployee"),Komodo.Controls.MessageBoxOkButton,a,"id14456679","danger");c.set("display",h),c.set("displayInsurance",m),c.set("displayAccessService",p),c.set("isViewAtHome",!0),c.set("deviceAtHomeOrOtherLocation",a.get("data.deviceAtHomeOrOtherLocation")),a.addSummaryGridRow(c),a.removeDeviceFromMainList(a.data.selectedPrimaryDecoder),a.set("data.selectedPrimaryDecoder.secondaryDecoder",void 0),a.set("data.selectedPrimaryDecoder",void 0),a.clearSelectedForOneDevice(),a.set("isDisableActiveButton",!1),a.set("data.selctedWaitingForInstallationOption",void 0),a.set("setDeviceAtAnotherLocation",!1),a.loadCustomerAccountInfo(),a.loadCustomerDetails(),a.setDefaultvalues()}}}},associateProducts:function(){if(void 0===this.data.customerRefNo||""===this.data.customerRefNo)return void Komodo.Controls.MessageBoxController.show(kl.value(this._localeBase+"useCaseTitle"),kl.value(this._localeBase+"messgCustomerNoValidation"),Komodo.Controls.MessageBoxOkButton,this,"id104456673","danger");this.data.selectedSummaryProductData.length>0?(this.set("countOfEmptyDecoders",this.countEmptyDecoders()),this.sortSelectedSummaryProducts(),this.publishAssociateProductsEvent()):Komodo.Controls.MessageBoxController.show(kl.value(this._localeBase+"useCaseTitle"),kl.value(this._localeBase+"messgProductToLinkvalidation"),Komodo.Controls.MessageBoxOkButton,this,"id145456673","danger")},viewDetails:function(){this.viewDetails()},clearall:function(){}},isNewProductSelected:function(e,t){var a=this;if(e.get("isGotvDecoder")){var s=0;if($.each(a.get("productService"),function(e,t){t.isChecked&&s++}),s>e.principalProductCount)return!0}else{if(void 0==e.secondaryHardwareSerialnumber&&void 0!=a.get("data.selectedPrimaryDecoder.secondaryDecoder"))return!0;if(void 0===e.agreemntUId||a.isDecoderRemovedFromExistingPair(e.decoderSerialNumber))return!0;if(void 0!==e.agreemntUId&&(!e.get("isPrincipalPresent")&&void 0!==a.get("data.primaryProductSelection")||!e.get("isAddOnPresent")&&void 0!==a.get("data.addOnProductSelection")||!e.get("isAccessPresent")&&!Ember.isEmpty(t.get("primaryDecoderAccessService"))||!e.get("isInsurenceStatusPresent")&&t.get("primaryDecoderInsurance")||!e.get("secondaryDecoder.isAccessPresent")&&!Ember.isEmpty(t.get("secondaryDecoderAccessService"))||!e.get("secondaryDecoder.isInsurenceStatusPresent")&&t.get("secondaryDecoderInsurance")||void 0===e.get("secondaryHardwareSerialnumber")&&void 0!==e.get("secondaryDecoder")))return!0}return!1},validateDevices:function(){var e=this,t=!0;if(e.get("data.selectedPrimaryDecoder.isMobileDecoder"))switch(e.get("summaryOfDevicesList")){case void 0:case null:break;default:$.each(e.get("summaryOfDevicesList"),function(e,a){return Komodo.UI.cacheDataService.isMobileDevice(a.decoderCpcType)||a.isPrincipalPresent||(t=!1),t})}return t},validateGotvRule:function(){var e=this,t=0,a=void 0,s="";return e.services="",e.serviceUid=[],$.each(e.productService,function(o,r){if(r.isChecked){if(t=1*t+1,!r.disablePackage){s=s+r.product.details.name+"-";var i={UID:r.product.details.productID,Name:r.product.details.name};e.serviceUid.pushObject(i)}GetProductsConstants("ProductsConstants","PRINCIPAL_GOTVOPEN_ID")===r.product.details.productID&&(a="GOtv Open Bouquet")}}),t>=GetProductsConstants("ProductsConstants","MAXIMUM_GOTV_PACKAGES")?(Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),a+""+kl.value(e._localeBase+"withOneOtherPackage"),Komodo.Controls.MessageBoxOkButton,e,"id104456673","danger"),!1):2===t&&void 0===a?(Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),kl.value(e._localeBase+"onlyOnePackage"),Komodo.Controls.MessageBoxOkButton,e,"id104456673","danger"),!1):1===t&&void 0!==a?(Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),a+""+kl.value(e._localeBase+"onItsOwn"),Komodo.Controls.MessageBoxOkButton,e,"id104456673","danger"),!1):0===t&&void 0!==e.get("data.selectedPrimaryDecoder.agreemntUId")?(Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),kl.value(e._localeBase+"alreadyExistingPackages"),Komodo.Controls.MessageBoxOkButton,e,"id23456683","error"),!1):(""!=s&&(s=s.substr(0,s.length-1)),e.set("services",s),!0)},getDecoderCpcByproductId:function(e){var t=this,a=!0,s=void 0;return $.each(t.productCategoryAndProductDetail,function(t,o){return void 0===o.Products.Product.length&&(o.Products.Product=[o.Products.Product]),$.each(o.Products.Product,function(t,s){return s.CanonicalKey===e&&(a=!1),a}),a||(s=o.CanonicalKey),a}),s},hidedevicelable:function(){0===this.xtraViewList.length?this.set("xtraViewLabel",!1):this.set("xtraViewLabel",!0)}.observes("xtraViewList.length"),publishValidateHardwarePairingEvent:function(e,t){var a=this,s=Komodo.Models.ValidateHardwarePairing.create(),o=Komodo.canonicalFacadeFactory(s,["Country","DecoderSerialNumber","SmartcardSerialNumber"]);o.set("Country",a.country),void 0!==e&&o.set("DecoderSerialNumber",e),void 0!==t&&o.set("SmartcardSerialNumber",t),a.getNewProcessID(),Komodo.Services.AssociateProductsService.seachHardware(a,s).done(function(){Komodo.log("publishValidateHardwarePairingEvent() : ValidateHardwarePairing event has been published."),a.showBusyIndicator()}).fail(function(){Komodo.log("publishValidateHardwarePairingEvent() : ValidateHardwarePairing event has failed.")})},clearSelectedForOneDevice:function(){this.set("data.selectedPrimaryDecoder",void 0),this.dataService.clearAllProducts(this)},onlyPrimaryProductForDevice:function(){var e=this;switch(e.get("data.selectedPrimaryDecoder")){case null:case void 0:case"":break;default:if(void 0!==e.get("data.primaryProductSelection")){e.get("data.selectedPrimaryDecoder.isMobileDecoder")&&(e.set("data.addOnProductSelection",void 0),e.servicesNotSelectedChanged());break}}}.observes("data.primaryProductSelection"),onlyAddonProductForDevice:function(){var e=this;switch(e.get("data.selectedPrimaryDecoder")){case null:case void 0:case"":break;default:if(void 0!==e.get("data.addOnProductSelection")){e.get("data.selectedPrimaryDecoder.isMobileDecoder")&&(e.set("data.primaryProductSelection",void 0),e.servicesNotSelectedChanged()),e.set("servicesNotSelected",!1);break}}}.observes("data.addOnProductSelection"),clearInsuranceAndAccessServiceCheckBox:function(){this.enableFlags(this.primaryInsuranceproducts,["isCheckedPrimaryInsurance","checkedPrimaryInsurance"],!1),this.enableFlags(this.primaryAccessServices,["isCheckedPrimaryAccessService","checkedPrimaryAccessService"],!1),this.enableFlags(this.secondaryInsuranceproducts,["isCheckedSecondaryInsurance","checkedSecondaryInsurance"],!1),this.enableFlags(this.secondaryAccessServices,["isCheckedSecondaryAccessService","checkedSecondaryAccessService"],!1),this.set("primaryInsuranceproducts",[]),this.set("primaryAccessServices",[]),this.set("secondaryInsuranceproducts",[]),this.set("secondaryAccessServices",[])},enableFlags:function(e,t,a){$.each(e,function(e,s){$.each(t,function(e,t){Ember.set(s,t,a)})})},messageValidateHardwarePairingDeliveryFailure:function(e){var t=this;t.hideBusyIndicator(),Komodo.UI.warn("[ExistingCustomerAddProductsController.messageValidateHardwarePairingDeliveryFailure] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),kl.value(t._localeBase+"messageValidateHardwarePairingDeliveryFailure"),Komodo.Controls.MessageBoxOkButtons,t,"id5789673","danger")},messageAddProductsDeliveryFailure:function(e){var t=this;t.hideBusyIndicator(),t.set("isDisableActiveButton",!1),Komodo.UI.warn("[ExistingCustomerAddProductsController.messageAddProductsDeliveryFailure] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),kl.value(t._localeBase+"messageAddProductsDeliveryFailure"),Komodo.Controls.MessageBoxOkButtons,t,"id5783673","danger")},messageReceived:function(){this.hideBusyIndicator()},messageHardwareRetrievedReceived:function(e){var t=this;t.hideBusyIndicator(),t.dataService.deviceResponseRecieved(t,e)},validateGotvDeviceRules:function(){var e=this,t=1,a=!0;switch(e.get("marketSegment")){case GetProductsConstants("ProductsConstants","LESOTHO_MARKET_SEGMENT"):break;default:Komodo.Services.customerProfileService.getCustomerPersonalDetail().isDstv&&(Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),"<br />"+kl.value(e._localeBase+"deviceIsNotSupported"),Komodo.Controls.MessageBoxOkButton,e,"id5556673","danger"),a=!1)}return $.each(this.get("data.selectedproductData"),function(e,a){Komodo.UI.cacheDataService.isGotvDevice(a.decoderCpcType)&&t++}),t>GetProductsConstants("ProductsConstants","MAX_GOTV_DEVICE_ALLOWED")&&(Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),kl.value(e._localeBase+"maximumAllowedGotvDevices"),Komodo.Controls.MessageBoxOkButton,e,"id23454673","danger"),a=!1),a},isMobileAddOn:function(e){var t=this,a=!1;return $.each(t.allProductCategories,function(t,s){return s.CanonicalValue===GetProductsConstants("ProductsConstants","ADDON_CATEGORY")&&$.each(s.CommercialProductCategories.CommercialProductCategory,function(t,s){return s.SystemKey!==e||s.CanonicalValue!==GetProductsConstants("ProductsConstants","MOBILE_ADDON")||(a=!0,!1)}),!a}),a},validateMobileRules:function(e,t,a){var s=this;return s.get("onlyPrincipalMobileProduct")?s.validateMobilePackages(e,t,a):s.validateMobilePackagesWithAddOn(e,t,a)},validateMobilePackagesWithAddOn:function(e,t,a){var s=this,o=0,r=0,i=s.getMobileAddOn(e),n=s.getMobileAddOn(i.product.allowProduct),c=i.product.allowProduct.split(","),d=!0;if(!c instanceof Array&&(c=[c]),void 0===n){if($.each(s.get("data.selectedSummaryProductData"),function(t,a){void 0!==a.serviceUID&&""!==a.serviceUID?(d=!0,Komodo.UI.cacheDataService.isMobileDevice(a.primaryDecoderCpcType)||$.each(a.serviceUID,function(e,t){$.each(c,function(e,a){return a===t.UID&&(o=1*o+1,d=!1),d})})):void 0!==a.addOnUID&&""!==a.addOnUID&&e===a.addOnUID&&(r=1*r+1)}),$.each(s.get("data.selectedproductData"),function(t,a){if(a.servicesDetails&&void 0===a.secondaryHardwareSerialnumber){var s=a.servicesDetails.Service;a.isPrincipalPresent?$.each(s,function(e,t){d=!0,$.each(c,function(e,a){return a===t.ProductDetail.UID&&(o=1*o+1,d=!1),d})}):a.isAddOnPresent&&$.each(s,function(t,a){e===a.ProductDetail.UID&&(r=1*r+1)})}}),o<=r)return Komodo.Controls.MessageBoxController.show(kl.value(s._localeBase+"messgTitleDeviceInfoToGrid"),kl.value(s._localeBase+"noMoreAddons")+t+kl.value(s._localeBase+"noPricipals"),Komodo.Controls.MessageBoxOkButton,s,"id24456673","warning"),!1}else if($.each(s.get("data.selectedSummaryProductData"),function(t,a){Komodo.UI.cacheDataService.isMobileDevice(a.primaryDecoderCpcType)&&(d=!0,$.each(c,function(e,t){return t===a.addOnUID&&(o=1*o+1,d=!1),d}),void 0!==a.addOnUID&&""!==a.addOnUID&&e===a.addOnUID&&(r=1*r+1))}),$.each(s.get("data.selectedproductData"),function(t,a){if(Komodo.UI.cacheDataService.isMobileDevice(a.decoderCpcType)&&a.servicesDetails){var s=a.servicesDetails.Service;a.isAddOnPresent&&$.each(s,function(t,a){e===a.ProductDetail.UID&&(r=1*r+1),$.each(c,function(e,t){t===a.ProductDetail.UID&&(o=1*o+1)})})}}),o<=r)return Komodo.Controls.MessageBoxController.show(kl.value(s._localeBase+"messgTitleDeviceInfoToGrid"),kl.value(s._localeBase+"noMoreAddons")+t+kl.value(s._localeBase+"noPricipals"),Komodo.Controls.MessageBoxOkButton,s,"id24456673","warning"),!1;var l=[];$.each(s.get("data.selectedproductData"),function(e,t){if(t.servicesDetails){var a=t.servicesDetails.Service;d=!0,t.isPrincipalPresent?Komodo.UI.cacheDataService.isMobileDevice(t.decoderCpcType)||void 0!==i.product.allowProduct&&(d=!0,$.each(a,function(e,a){return $.each(c,function(e,s){return s===a.ProductDetail.UID&&(l.pushObject({formatedDate:Komodo.Services.systemService.universalDateString(new Date(t.startDate.replace(/(\d{2})-(\d{2})-(\d{4})/,"$2/$1/$3"))),actualeDate:t.startDate,addressDetails:t.addressDetails,customerPersonalDetails:t.customerPersonalDetails,customerPaymentDetail:t.paymentDetail,chargePeriod:"1"===t.termOfPayment?"Monthly":"Annually",awaitingInstallation:t.isAwaitingInstallation}),d=!1),d}),d})):t.isAddOnPresent&&Komodo.UI.cacheDataService.isMobileDevice(t.decoderCpcType)&&void 0!==i.product.allowProduct&&(d=!0,$.each(c,function(e,s){$.each(a,function(e,a){return s===a.ProductDetail.UID&&(l.pushObject({formatedDate:Komodo.Services.systemService.universalDateString(new Date(t.startDate.replace(/(\d{2})-(\d{2})-(\d{4})/,"$2/$1/$3"))),actualeDate:t.startDate,addressDetails:t.addressDetails,customerPersonalDetails:t.customerPersonalDetails,customerPaymentDetail:t.paymentDetail,chargePeriod:"1"===t.termOfPayment?"Monthly":"Annually",awaitingInstallation:t.isAwaitingInstallation}),d=!1),d})}))}}),$.each(s.get("data.selectedSummaryProductData"),function(e,t){void 0!==t.serviceUID&&""!==t.serviceUID?Komodo.UI.cacheDataService.isMobileDevice(t.primaryDecoderCpcType)||void 0!==i.product.allowProduct&&(d=!0,$.each($.makeArray(t.serviceUID),function(e,a){return $.each(c,function(e,s){return s===a.UID&&(l.pushObject({formatedDate:Komodo.Services.systemService.universalDateString(new Date(t.activationDate.replace(/(\d{2})-(\d{2})-(\d{4})/,"$2/$1/$3"))),actualeDate:t.activationDate,addressDetails:t.addressDetails,customerPersonalDetails:t.customerPersonalDetails,customerPaymentDetail:t.customerPaymentDetail,chargePeriod:t.chargePeriod,awaitingInstallation:t.isAwaitingInstallation}),d=!1),d}),d})):void 0!==t.addOnUID&&void 0!==t.addOnUID&&Komodo.UI.cacheDataService.isMobileDevice(t.primaryDecoderCpcType)&&void 0!==i.product.allowProduct&&(d=!0,$.each(c,function(e,a){return a===t.addOnUID&&(l.pushObject({formatedDate:Komodo.Services.systemService.universalDateString(new Date(t.activationDate.replace(/(\d{2})-(\d{2})-(\d{4})/,"$2/$1/$3"))),actualeDate:t.activationDate,addressDetails:t.addressDetails,customerPersonalDetails:t.customerPersonalDetails,customerPaymentDetail:t.customerPaymentDetail,chargePeriod:t.chargePeriod,awaitingInstallation:t.isAwaitingInstallation}),d=!1),d}))});var u=function(e,t){return e.formatedDate>t.formatedDate?1:e.formatedDate<t.formatedDate?-1:0};return l.sort(u),s.set("addOnActivationDate",l[r].actualeDate),s.set("selectedPaymentOfMethodTitle",l[r].chargePeriod),a.principalProductAddress=l[r].addressDetails,a.principalProductPersonalDetails=l[r].customerPersonalDetails,a.principalProductPaymentDetails=l[r].customerPaymentDetail,a.principalProductAwaitingInstallationDetails=l[r].awaitingInstallation,!0},validateMobilePackages:function(e,t,a){var s=this,o=0,r=0,i=s.getMobileAddOn(e),n=[],c=!0,d=[];switch(i){case void 0:case null:case"":$.each(s.get("data.selectedproductData"),function(e,t){t.servicesDetails&&void 0===t.secondaryHardwareSerialnumber&&(!t.isPrincipalPresent||Komodo.UI.cacheDataService.isMobileDevice(t.decoderCpcType)||Komodo.UI.cacheDataService.isGotvDevice(t.decoderCpcType)?t.isAddOnPresent&&Komodo.UI.cacheDataService.isMobileDevice(t.decoderCpcType)&&(r=1*r+1):(o=1*o+1,n.pushObject({formatedDate:Komodo.Services.systemService.universalDateString(new Date(t.startDate.replace(/(\d{2})-(\d{2})-(\d{4})/,"$2/$1/$3"))),actualeDate:t.startDate,addressDetails:t.addressDetails,customerPersonalDetails:t.customerPersonalDetails,customerPaymentDetail:t.paymentDetail,chargePeriod:"1"===t.termOfPayment?"Monthly":"Annually",awaitingInstallation:"1"})))}),$.each(s.get("data.selectedSummaryProductData"),function(e,t){void 0!==t.serviceUID&&""!==t.serviceUID?Komodo.UI.cacheDataService.isGotvDevice(t.primaryDecoderCpcType)||(Komodo.UI.cacheDataService.isMobileDevice(t.primaryDecoderCpcType)?r=1*r+1:void 0!==t.serviceUID&&(o=1*o+1,n.pushObject({formatedDate:Komodo.Services.systemService.universalDateString(new Date(t.activationDate.replace(/(\d{2})-(\d{2})-(\d{4})/,"$2/$1/$3"))),actualeDate:t.activationDate,addressDetails:t.addressDetails,customerPersonalDetails:t.customerPersonalDetails,customerPaymentDetail:t.customerPaymentDetail,chargePeriod:t.chargePeriod,awaitingInstallation:t.isAwaitingInstallation}))):Komodo.UI.cacheDataService.isMobileDevice(t.primaryDecoderCpcType)&&(r=1*r+1)});break;default:switch(i.product.allowProduct){case void 0:case null:case"":break;default:$.each(s.get("data.selectedproductData"),function(e,t){t.servicesDetails&&void 0===t.secondaryHardwareSerialnumber&&(!t.isPrincipalPresent||Komodo.UI.cacheDataService.isMobileDevice(t.decoderCpcType)||Komodo.UI.cacheDataService.isGotvDevice(t.decoderCpcType)?t.isAddOnPresent&&Komodo.UI.cacheDataService.isMobileDevice(t.decoderCpcType)&&(r=1*r+1):$.each(t.servicesDetails,function(e,a){return $.each(d,function(e,s){return s===a.UID&&(o=1*o+1,n.pushObject({formatedDate:Komodo.Services.systemService.universalDateString(new Date(t.startDate.replace(/(\d{2})-(\d{2})-(\d{4})/,"$2/$1/$3"))),actualeDate:t.startDate,addressDetails:t.addressDetails,customerPersonalDetails:t.customerPersonalDetails,customerPaymentDetail:t.paymentDetail,chargePeriod:"1"===t.termOfPayment?"Monthly":"Annually",awaitingInstallation:"1"}),c=!1),c}),c}))}),d=i.product.allowProduct.split(","),$.each(s.get("data.selectedSummaryProductData"),function(e,t){t.addOnUID==i.product.details.productID?r=1*r+1:Komodo.UI.cacheDataService.isMobileDevice(t.primaryDecoderCpcType)||Komodo.UI.cacheDataService.isGotvDevice(t.primaryDecoderCpcType)||(c=!0,$.each($.makeArray(t.serviceUID),function(e,a){return $.each(d,function(e,s){return s===a.UID&&(o=1*o+1,n.pushObject({formatedDate:Komodo.Services.systemService.universalDateString(new Date(t.activationDate.replace(/(\d{2})-(\d{2})-(\d{4})/,"$2/$1/$3"))),actualeDate:t.activationDate,addressDetails:t.addressDetails,customerPersonalDetails:t.customerPersonalDetails,customerPaymentDetail:t.customerPaymentDetail,chargePeriod:t.chargePeriod,
awaitingInstallation:t.isAwaitingInstallation}),c=!1),c}),c}))})}}var l=function(e,t){return e.formatedDate>t.formatedDate?1:e.formatedDate<t.formatedDate?-1:0};if(n.sort(l),n.length>0&&n.length>r)s.set("addOnActivationDate",n[r].actualeDate),s.set("selectedPaymentOfMethodTitle",n[r].chargePeriod),a.principalProductAddress=n[r].addressDetails,a.principalProductPersonalDetails=n[r].customerPersonalDetails,a.principalProductPaymentDetails=n[r].customerPaymentDetail,a.principalProductAwaitingInstallationDetails=n[r].awaitingInstallation;else{var u=s.data.activationDate.getDate(),h=s.data.activationDate.getMonth()+1,m=s.data.activationDate.getFullYear();u<10&&(u="0"+u),h<10&&(h="0"+h);var p=u+"-"+h+"-"+m;s.set("addOnActivationDate",p),s.set("selectedPaymentOfMethodTitle",s.get("selectedPaymentOfMethodTitle")),a.principalProductAddress=s.addressDetails,a.principalProductPersonalDetails=s.customerPersonalDetails,a.principalProductPaymentDetails=s.customerPaymentDetail,a.principalProductAwaitingInstallationDetails=s.data.selctedWaitingForInstallationOption}return!0},matchingDeviceNotFound:function(e){var t=this,a=void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.Type?e.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.Type.toLowerCase():"device",s=e.ResponseMessage.Payload.ListOfHardware.Hardware.SerialNumber;Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),kl.value(t._localeBase+"paireDeviceNotFound")+a+kl.value(t._localeBase+"withSerialNumber")+s+" "+kl.value(t._localeBase+"findothermachingDevice"),Komodo.Controls.MessageBoxYesNoButtons,t,"id54456673","alert").response=function(e){"yes"==e&&t.showDevicePair()}},availableForUse:function(e,t,a){var s,o=this,r=kl.value(this._localeBase+"isTheDecoder")+" "+e.ResponseMessage.Payload.ListOfHardware.Hardware.SerialNumber+" ";t?(r=kl.value(this._localeBase+"isTheDevice")+" "+e.ResponseMessage.Payload.ListOfHardware.Hardware.SerialNumber+" ",r+=kl.value(this._localeBase+"numberCorrect"),s=kl.value(this._localeBase+"confirmDeviceNumber")):(void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.SmartcardDetail&&(r=r+kl.value(this._localeBase+"andSmartCard")+" "+e.ResponseMessage.Payload.ListOfHardware.Hardware.SmartcardDetail.Type+" ",void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcard&&(r=r+e.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcard+" ")),r+=kl.value(this._localeBase+"numbersCorrect"),s=kl.value(this._localeBase+"confirmDevicePair")),Komodo.Controls.MessageBoxController.show(s,r,Komodo.Controls.MessageBoxYesNoButtons,o,"id5446673","alert").response=function(s){"yes"==s?(o.addDecoderInList(e.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.Model,e.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.ProductFeatures.Description,void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.SerialNumber?e.ResponseMessage.Payload.ListOfHardware.Hardware.SerialNumber:void 0,void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.SmartcardDetail?e.ResponseMessage.Payload.ListOfHardware.Hardware.SmartcardDetail.Type:void 0,void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcard?e.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcard:void 0,Komodo.UI.cacheDataService.getDeviceCPCCanonicalKeyBySytemKey(e.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.Type),e.ResponseMessage.Payload.ListOfHardware.Hardware.ListOfService,e.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.UID,void 0,void 0,void 0,void 0,void 0,void 0,void 0,!1,a),o.set("smartcardDecoderNo",void 0),o.redirectOnSuspendedAgreement(!1)):t||o.showDevicePair()}},redirectOnSuspendedAgreement:function(e){if(that=this,!that.get("redirectEnabled")&&that.get("countOfStolenSuspended")>0){var t;t=e?Komodo.Controls.MessageBoxController.show(kl.value(that._localeBase+"useCaseTitle"),kl.value(that._localeBase+"redirectToMovePackagesOnPageLoad"),Komodo.Controls.MessageBoxYesNoButtons,that,"id5446673","alert"):Komodo.Controls.MessageBoxController.show(kl.value(that._localeBase+"useCaseTitle"),kl.value(that._localeBase+"redirectToMovePackagesAddDevice"),Komodo.Controls.MessageBoxYesNoButtons,that,"id5446673","alert"),t.response=function(t){"yes"==t&&e?Komodo.Services.uiService.transitionTo("linkDelink"):"yes"!==t&&e?that.set("redirectEnabled",!0):"yes"!=t||e||that.set("redirectEnabled",!0)}}},showDevicePair:function(){var e=this;e.registerModel("hardwarePair",Komodo.Models.SavePairModel),e.registerValidator(e.get("hardwarePair"),"smartCardSerialNumber",{isRequired:!0,displayName:kl.value(e._localeBase+"smartcardNumber"),minLength:10,maxLength:10,functions:Komodo.UI.Validators.alphanumericValidator}),e.registerValidator(e.get("hardwarePair"),"decoderSerialNumber",{isRequired:!0,displayName:kl.value(e._localeBase+"deviceNumber"),minLength:10,maxLength:10,functions:Komodo.UI.Validators.alphanumericValidator});var t=Komodo.Application.ModalPaneController.create();t.popup(kl.value(e._localeBase+"updateDevice"),null,{context:{data:e.get("hardwarePair"),validators:e.validators,savepair:function(){!1!==e.canSubmitData(e.hardwarePair,kl.value(e._localeBase+"useCaseTitle"),{showInModal:!1})&&(e.set("popupaction","savepair"),t.close())}},closeCallback:function(){"savepair"==e.get("popupaction")&&(e.publishValidateHardwarePairingEvent(e.get("hardwarePair.decoderSerialNumber"),e.get("hardwarePair.smartCardSerialNumber")),e.set("popupaction",void 0))},view:Komodo.Application.SavePairView})},publishAssociateProductsEvent:function(){var e,t=this,a=Komodo.Models.AddProducts.create(),s=Komodo.canonicalFacadeFactory(a,["Country","CustomerUID","ListOfAccount_Account"]);if(void 0===t.get("country")||null===t.get("country"))return e=kl.value(t._localeBase+"countryCodeMissing"),void Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),e,Komodo.Controls.MessageBoxOkButton,t,"id5446993","danger");if(s.set("Country",t.country),void 0===t.get("data.customerRefNo")||null===t.get("data.customerRefNo"))return e=kl.value(t._localeBase+"customerNubmerMissing"),void Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),e,Komodo.Controls.MessageBoxOkButton,t,"id5446883","danger");s.set("CustomerUID",t.data.customerRefNo);var o=t.dataService.getListOfAccount(t.get("data.selectedSummaryProductData"),t.get("methodsOfPaymentCanonical"),t.get("data.selectedproductData"));s.set("ListOfAccount_Account",o),t.getNewProcessID(),Komodo.Services.AssociateProductsService.associateProducts(t,a).done(function(){t.showBusyIndicator(),t.set("isDisableActiveButton",!0),Komodo.log("publishAssociateProductsWithXtraviewEvent() : Link Products with Xtraview event has been published.")}).fail(function(){t.hideBusyIndicator(),Komodo.error("publishAssociateProductsWithXtraview () : Link Products with Xtraview  event has failed.")})},messageProductsAddedReceived:function(e){Komodo.log("Products Added Received"+new Date);var t=this;if(t.hideBusyIndicator(),void 0!=e.ResponseMessage.Payload.ListOfAccount&&void 0!=e.ResponseMessage.Payload.ListOfAccount.Account){t.dataService.clearData(t);var a=Komodo.Models.SearchRequestForBaseSystem.create();a.set("uid",t.get("data.customerRefNo")),t.get("countOfStolenSuspended")>0&&t.get("redirectEnabled")&&t.get("countOfEmptyDecoders")>0?Komodo.Services.uiService.transitionTo("linkDelink"):t._customerClassSelected==GetCustomerTypesConstants("CustomerTypesConstants","CUSTOMERCLASS_SPECIALIST")?Komodo.Services.eventAggregator.publish("PublishSpecialistSearchRequest",a):Komodo.Services.eventAggregator.publish("PublishCustomerSearchRequest",a)}else Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),kl.value(t._localeBase+"messgProductLinkFail"),Komodo.Controls.MessageBoxOkButton,t,"id54426673","danger"),t.dataService.clearData(t)},countEmptyDecoders:function(){var e=0,t=this;return $.each(t.get("data.selectedproductData"),function(t,a){void 0===a.get("secondaryHardwareSerialnumber")&&a.get("servicesDetails")&&!a.get("isStolenSuspended")&&e++}),$.each(t.get("data.selectedSummaryProductData"),function(t,a){void 0!=a&&void 0===a.serviceUID&&e++}),e},messageFailureMessageEventReceived:function(e){var t=this;t.hideBusyIndicator(),t.set("isDisableActiveButton",!1),Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButton,this,"id544246673","danger")},showAddOnProductsChanged:function(){switch(this.productAddOn.length){case 0:case void 0:case null:case"":this.set("showAddOnProducts",!1);break;default:this.set("showAddOnProducts",!0)}}.observes("productAddOn.length"),setGridColumn:function(){var e=this;e.set("dataGridSummaryColumns",[Komodo.Controls.DataGridColumn.create({name:"display",title:kl.value(e._localeBase+"decoders"),canEdit:!1,width:"150px",type:"string"}),Komodo.Controls.DataGridColumn.create({name:"services",title:kl.value(e._localeBase+"services"),canEdit:!1,width:"150px"}),Komodo.Controls.DataGridColumn.create({name:"AddOn",title:kl.value(e._localeBase+"addOn"),canEdit:!1,width:"150px"}),Komodo.Controls.DataGridColumn.create({name:"displayInsurance",title:kl.value(e._localeBase+"insurance"),canEdit:!1,width:"150px"}),Komodo.Controls.DataGridColumn.create({name:"displayAccessService",title:kl.value(e._localeBase+"accessService"),canEdit:!1,width:"150px"}),Komodo.Controls.DataGridColumn.create({name:"chargePeriod",title:kl.value(e._localeBase+"chargePeriod"),canEdit:!1,width:"100px"}),Komodo.Controls.DataGridColumn.create({name:"activationDate",title:kl.value(e._localeBase+"activationDate"),canEdit:!1,width:"150px",type:"date"}),Komodo.Controls.DataGridCommandColumn.create({name:"actions",title:kl.value(e._localeBase+"viewDetails"),width:"30px",displayText:kl.value(e._localeBase+"viewDetails"),action:"viewDetails"})])},populateXtraviewLinkAfterDelete:function(e){var t=this;$.each(t.get("data.selectedproductData"),function(a,s){if(e.secondaryHardwareSerialnumber===s.decoderSerialNumber){var o=t.getDeviceDetails(s.decoderSerialNumber,!0);return e.set("secondaryDecoder",o),t.xtraViewList.pushObject(e),t.removeDecoder(e),!1}return!0})},gridDelete:function(){if("delete"==this.get("data.commandSummaryGridItemType"))switch(this.data.commandSummaryGridItem){case void 0:case null:case"":break;default:var e=this,t=this.getDeviceDetails(this.data.commandSummaryGridItem.primaryDecoderSerialNumber,!0);if(e.dataService.clearAllProducts(e),t.secondaryHardwareSerialnumber)e.populateXtraviewLinkAfterDelete(t);else{switch(e.updatePrimaryDeviceList(e.data.commandSummaryGridItem.primaryDecoderModel,e.data.commandSummaryGridItem.primaryDecoderSerialNumber),e.get("data.commandSummaryGridItem.secondaryDecoderSerialNumber")){case void 0:case null:case"":break;default:e.updatePrimaryDeviceList(e.data.commandSummaryGridItem.secondaryDecoderModel,e.data.commandSummaryGridItem.secondaryDecoderSerialNumber)}if(void 0!==e.get("data.commandSummaryGridItem.serviceUID")&&!Komodo.UI.cacheDataService.isMobileDevice(e.data.commandSummaryGridItem.primaryDecoderCpcType)){var a=[];$.each(e.get("data.selectedSummaryProductData"),function(t,s){void 0!=s&&(Komodo.UI.cacheDataService.isMobileDevice(s.primaryDecoderCpcType)&&void 0===s.serviceUID?e.updatePrimaryDeviceList(s.primaryDecoderModel,s.primaryDecoderSerialNumber):a.push(s))}),e.get("data.selectedSummaryProductData").clear(),e.set("data.selectedSummaryProductData",a)}e.get("data.selectedSummaryProductData").removeObject(e.data.commandSummaryGridItem),e.set("data.selectedPrimaryDecoder",void 0)}}}.observes("data.commandSummaryGridItemType"),removeDeviceFromMainList:function(e){var t=this;t.set("primaryDevicesList",$.grep(t.primaryDevicesList,function(t){return!(t.decoderSerialNumber===e.decoderSerialNumber)})),$.each(t.primaryDevicesList,function(){t.secondaryDevicesListChanged(),t.disableChanged()}),t.set("xtraViewList",$.grep(t.xtraViewList,function(t){return!(t.decoderSerialNumber===e.decoderSerialNumber||t.secondaryDecoder.decoderSerialNumber===e.decoderSerialNumber)}))},enableactivationDate:function(){var e=this;switch(e.set("data.activationDate",new Date),e.get("data.selctedWaitingForInstallationOption")){case"0":e.set("disableActivationDate",!0);break;default:e.set("disableActivationDate",!1)}}.observes("data.selctedWaitingForInstallationOption"),showDetailsChanged:function(){var e=this;this.data.selectedproductData.length>0?e.set("showDetails",!0):e.set("showDetails",!1)}.observes("data.selectedproductData.length"),showDevicesLinkingChanged:function(){var e=this;!0===e.get("devicesLabel")||!0===e.get("xtraViewLabel")?e.set("showDevicesLinking",!0):e.set("showDevicesLinking",!1)}.observes("devicesLabel","xtraViewLabel"),showHideQuestionPanel:function(){return!this.disablePrincipalProducts}.property("disablePrincipalProducts"),disableSubmit:function(){var e=!0,t=this;switch(t.get("data.selectedPrimaryDecoder")){case void 0:case null:case"":break;default:switch(t.get("data.selectedPrimaryDecoder.secondaryDecoder")){case void 0:case null:case"":"N"!==t.get("data.selectedPrimaryDecoder.modifiable")&&(e=!1);break;default:"N"===t.get("data.selectedPrimaryDecoder.modifiable")&&"N"===t.get("data.selectedPrimaryDecoder.secondaryDecoder.modifiable")||(e=!1)}}return e}.property("data.selectedPrimaryDecoder"),publishDeclineDCCTermsAndConditionsEvent:function(e){var t,a=this,s=Komodo.Models.DeclineDCCTermsAndConditions.create(),o=Komodo.canonicalFacadeFactory(s,["Country","CustomerUID","DeviceSerialNumber"]);return void 0===a.get("country")||null===a.get("country")?(t=kl.value(a._localeBase+"countryCodeMissing"),void Komodo.Controls.MessageBoxController.show(kl.value(a._localeBase+"useCaseTitle"),t,Komodo.Controls.MessageBoxOkButton,a,"id5446993","danger")):(o.set("Country",a.country),void 0===a.get("data.customerRefNo")||null===a.get("data.customerRefNo")?(t=kl.value(a._localeBase+"customerNubmerMissing"),void Komodo.Controls.MessageBoxController.show(kl.value(a._localeBase+"useCaseTitle"),t,Komodo.Controls.MessageBoxOkButton,a,"id5446883","danger")):(o.set("CustomerUID",a.data.customerRefNo),void 0===e||null===e?void Komodo.Controls.MessageBoxController.show(kl.value(a._localeBase+"useCaseTitle"),"DecoderSerialNumber is null or undefined",Komodo.Controls.MessageBoxOkButton,a,"id5446883","danger"):(o.set("DeviceSerialNumber",e),a.getNewProcessID(),void Komodo.Services.AssociateProductsService.DeclineDCCTermsConditions(a,s).done(function(){Komodo.log("publishDeclineDCCTermsAndConditionsEvent() : DeclineDCCTermsAndConditions event has been published.")}).fail(function(){Komodo.error("publishDeclineDCCTermsAndConditionsEvent() : DeclineDCCTermsAndConditions event has failed.")}))))},sortSelectedSummaryProducts:function(){var e=function(e,t){return e.get("weightage")<t.get("weightage")?1:e.get("weightage")>t.get("weightage")?-1:0};this.get("data.selectedSummaryProductData").length>1&&this.get("data.selectedSummaryProductData").sort(e)},showSecondaryDecodeServices:!1,showPrimaryDecodeServices:!1,xtraViewLabel:!1,devicesLabel:!1,country:void 0,primaryInsuranceText:void 0,secondaryInsuranceText:void 0,primaryAcessServiceText:void 0,secondaryAcessServiceText:void 0,primaryDevicesList:[],xtraViewList:[],chargePeriods:[],allProductAddOn:[],allProductService:[],allInsurance:[],allAccessService:[],allProductCategories:[],primaryInsuranceproducts:[],primaryAccessServices:[],secondaryInsuranceproducts:[],secondaryAccessServices:[],productService:[],productAddOn:[],devicePairs:[],customerPaymentDetail:void 0,addressDetails:void 0,customerPersonalDetails:void 0,isDisableActiveButton:!0,disableAddButton:!1,dataService:void 0,deviceInfoService:void 0,showDetails:!1,showDevicesLinking:!1,showAddOnProducts:!1,showPackages:!1,servicesNotSelected:!1,disablePaymentsOptions:!0,disablePaymentOptions:!0,selectedGotvproductID:void 0,ischeckedCheckBox:!1,services:void 0,serviceUid:[],isGoTvDeviceSelected:!1,addOnActivationDate:void 0,disablePrincipalProducts:!1,disableAddOnProducts:!1,productCategoryAndProductDetail:[],hardwareAddressDetails:[],holidayHomeKey:"29",countOfStolenSuspended:"0",countOfEmptyDecoders:"0",tempValue:void 0,_customerTypeSelected:void 0,_customerClassSelected:void 0,disableDeviceUsage:void 0,isActive:!1,residenceTypes:[],onlyPrincipalMobileProduct:void 0,principalPackageText:void 0,methodsOfPayment:[],methodsOfPaymentCanonical:[],insuranceSelection:!1,marketSegment:void 0}),Ember.TEMPLATES.DeviceAtAnotherLocationView=Ember.Handlebars.template(function(e,t,a,s,o){function r(e,t){var s;return t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:D.noop,fn:D.program(2,i,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n\r\n\r\n  "),""}function i(e,t){var s;return t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:D.noop,fn:D.program(3,n,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:D.noop,fn:D.program(8,l,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function n(e,t){var s;return t.buffer.push("\r\n  "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{tabindex:"1",label:"~locale.associateProducts:deviceAtAnotherLocation.whoIsGoingToUseTheDevice~",contentBinding:"deviceAtAnotherLocationModel.radioButtonDeviceUsage",displayPath:"title",valuePath:"value",valueBinding:"deviceAtAnotherLocationModel.deviceUsage"},hashTypes:{tabindex:"STRING",label:"STRING",contentBinding:"STRING",displayPath:"STRING",valuePath:"STRING",valueBinding:"STRING"},hashContexts:{tabindex:e,label:e,contentBinding:e,displayPath:e,valuePath:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),s=a.if.call(e,"deviceAtAnotherLocationModel.isCustomerSelected",{hash:{},hashTypes:{},hashContexts:{},inverse:D.program(6,d,t),fn:D.program(4,c,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function c(e,t){t.buffer.push("\r\n  ")}function d(e,t){return t.buffer.push("\r\n  "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"4",label:"~locale.associateProducts:deviceAtAnotherLocation.firstName~",valueBinding:"deviceAtAnotherLocationModel.firstName",validatorBinding:"validators.firstNameValidator"},hashTypes:{tabindex:"STRING",label:"STRING",valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,label:e,valueBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function l(e,t){var s;return t.buffer.push("\r\n  "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"2",label:"~locale.associateProducts:deviceAtAnotherLocation.residenceType~",valueBinding:"deviceAtAnotherLocationModel.residenceType",contentBinding:"residenceTypeList",optionLabelPath:"content.CanonicalValue",optionValuePath:"content.CanonicalKey",validatorBinding:"validators.residenceTypeValidator",prompt:" "},hashTypes:{tabindex:"STRING",label:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",validatorBinding:"STRING",prompt:"STRING"},hashContexts:{tabindex:e,label:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,validatorBinding:e,prompt:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),s=a.if.call(e,"deviceAtAnotherLocationModel.isCustomerSelected",{hash:{},hashTypes:{},hashContexts:{},inverse:D.program(9,u,t),fn:D.program(4,c,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function u(e,t){return t.buffer.push("\r\n  "),t.buffer.push(y(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"5",label:"~locale.associateProducts:deviceAtAnotherLocation.lastName~",valueBinding:"deviceAtAnotherLocationModel.lastName",validatorBinding:"validators.lastNameValidator"},hashTypes:{tabindex:"STRING",label:"STRING",valueBinding:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,label:e,valueBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  "),""}function h(e,t){return t.buffer.push("\r\n"),t.buffer.push(y(a.view.call(e,"Komodo.Controls.Address",{hash:{addressBinding:"deviceAddress",multipleAddress:!1},hashTypes:{addressBinding:"STRING",multipleAddress:"BOOLEAN"},hashContexts:{addressBinding:e,multipleAddress:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function m(e,t){var s,o;t.buffer.push(y((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.associateProducts:deviceAtAnotherLocation.saveDeviceLocation",o):b.call(e,"loc","locale.associateProducts:deviceAtAnotherLocation.saveDeviceLocation",o))))}function p(e,t){var s,o;t.buffer.push(y((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.associateProducts:deviceAtAnotherLocation.cancel",o):b.call(e,"loc","locale.associateProducts:deviceAtAnotherLocation.cancel",o))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),o=o||{};var v,f,g,y=this.escapeExpression,D=this,b=a.helperMissing;return o.buffer.push("<div "),o.buffer.push(y(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:o}))),o.buffer.push('>\r\n\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),o.buffer.push(y((f=a.loc||t&&t.loc,g={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:o},f?f.call(t,"locale.associateProducts:deviceAtAnotherLocation.deviceAtAnotherLocationTitle",g):b.call(t,"loc","locale.associateProducts:deviceAtAnotherLocation.deviceAtAnotherLocationTitle",g)))),o.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        <a '),o.buffer.push(y(a.action.call(t,"cancel",{hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:o}))),o.buffer.push(">&lt;"),o.buffer.push(y((f=a.loc||t&&t.loc,g={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:o},f?f.call(t,"locale.associateProducts:deviceAtAnotherLocation.back",g):b.call(t,"loc","locale.associateProducts:deviceAtAnotherLocation.back",g)))),o.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div> \r\n  <hr/>\r\n  \r\n  "),v=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.associateProducts:deviceAtAnotherLocation.customerInformation~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:D.noop,fn:D.program(1,r,o),contexts:[t],types:["ID"],data:o}),(v||0===v)&&o.buffer.push(v),o.buffer.push("\r\n  \r\n  \r\n  "),v=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.customer:customerInformation.addressInfoHeading~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:D.noop,fn:D.program(11,h,o),contexts:[t],types:["ID"],data:o}),(v||0===v)&&o.buffer.push(v),o.buffer.push('\r\n  \r\n  <div style="float:right">\r\n    '),v=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"saveDeviceLocation",tabindex:"26"},hashTypes:{action:"STRING",tabindex:"STRING"},hashContexts:{action:t,tabindex:t},inverse:D.noop,fn:D.program(13,m,o),contexts:[t],types:["ID"],data:o}),(v||0===v)&&o.buffer.push(v),o.buffer.push("\r\n    "),v=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"cancel",class:"btn-inverse",tabindex:"27"},hashTypes:{action:"STRING",class:"STRING",tabindex:"STRING"},hashContexts:{action:t,class:t,tabindex:t},inverse:D.noop,fn:D.program(15,p,o),contexts:[t],types:["ID"],data:o}),(v||0===v)&&o.buffer.push(v),o.buffer.push("\r\n  </div>\r\n\r\n</div>"),""}),Komodo.Models.AssociateProductsModel=Ember.Object.extend({init:function(){this.customerRefNo=void 0,this.smartcardDecoderNo=void 0,this.selectedPrimaryDecoder=void 0,this.selectedSummaryGridItem=void 0,this.commandSummaryGridItem=void 0,this.commandSummaryGridItemType=void 0,this.primaryDecoder=void 0,this.secondaryDecoder=void 0,this.primaryProductSelection=void 0,this.addOnProductSelection=void 0,this.hdAddOnProductSelection=void 0,this.radioButtonPaymentMethod=void 0,this.haveYouMadeAPaymentYetYesNo=void 0,this.radioButtonDeviceUsage=void 0,this.areYouWaitingForInstallationYesNo=void 0,this.deviceAtHomeOrOtherLocation=void 0,this.selectedPaymentOfMethod=void 0,this.selectedPaymentMadeOption=void 0,this.selctedWaitingForInstallationOption=void 0,this.activationDate=void 0,this.selectedproductData=[],this.selectedSummaryProductData=[],this.isDstv=void 0,this.radioButtonLinkUnlink=void 0,this.shortTermSubscriptionPackages=void 0,this.agreementChargePeriod=void 0,this._super()}}),Komodo.Models.SavePairModel=Ember.Object.extend({init:function(){this.smartCardSerialNumber=void 0,this.decoderSerialNumber=void 0,this._super()}}),Komodo.Models.AssociateProductsSummary=Ember.Object.extend({init:function(){this.primaryDecoderType=void 0,this.primaryDecoderSerialNumber=void 0,this.primaryDecoderSmartcardType=void 0,this.primaryDecoderSmartcardSerialNumber=void 0,this.primaryDecoderInsurance=void 0,this.primaryDecoderModel=void 0,this.secondaryDecoderAccessService=void 0,this.secondaryDecoderType=void 0,this.secondaryDecoderSerialNumber=void 0,this.secondarySmartcardType=void 0,this.secondarySmartcardSerialNumber=void 0,this.secondaryDecoderModel=void 0,this.services=void 0,this.serviceUID=[],this.addOn=void 0,this.addOnUID=void 0,this.hdAddOn=void 0,this.hdAddOnUID=void 0,this.addOnDisplay=void 0,this.chargePeriod=void 0,this.activationDate=void 0,this.display=void 0,this.displayInsurance=void 0,this.displayAccessService=void 0,this.primaryDecoderServiceDetails=void 0,this.secondaryDecoderServiceDetails=void 0,this.primaryDecoderUID=void 0,this.secondaryDecoderUID=void 0,this.weightage=void 0,this._super()}}),Komodo.Models.CommercialAssociateProductsModel=Ember.Object.extend({init:function(){this.customerClass=void 0,this.customerType=void 0,this.customerTypeSystemKey=void 0,this.paymentGroup=void 0,this.viewingLocation=void 0,this.establishmentName=void 0,this.viewingPoints=void 0,this.smartcardDeviceNumber=void 0,this.activationDate=void 0,this.installationType=void 0,this.primaryProductSelection=void 0,this.insurance=!1,this.showInsurance=!1,this.allInsured=!1,this.insuranceDisabled=!1,this.selectedEstablishmentName=void 0,this.addNewEstablishment=!1,this.showEstablishmentTextBox=!1,this.showEstablishmentDropdownBox=!0,this.accounts=[],this.establishments=[],this.viewingLocations=[],this.selectedproductData=[],this.existingProductData=[],this.availableOfferDefinitions=[],this.useOptimizedVersion=!1,this.useOptimizedAddDeviceVersion=!1,this._super()}}),Komodo.Models.ProductModel=Ember.Object.extend({init:function(){this.productID=void 0,this.name=void 0,this.allowDevice=void 0,this.isSelected=!1,this.isDisabled=!1,this._super()}}),Komodo.Models.AddDeviceModel=Ember.Object.extend({init:function(){this.smartcardDeviceNumber=void 0,this._super()}}),Komodo.Models.CsiAssociateProductsModel=Ember.Object.extend({init:function(){this.customerClass=void 0,this.customerType=void 0,this.customerTypeSystemKey=void 0,this.paymentGroup=void 0,this.viewingLocation=void 0,this.establishmentName=void 0,this.viewingPoints=void 0,this.smartcardDeviceNumber=void 0,this.activationDate=void 0,this.installationType=void 0,this.primaryProductSelection=void 0,this.insurance=!1,this.showInsurance=!1,this.accounts=[],this.viewingLocations=[],this.selectedproductData=[],this._super()}}),Komodo.Models.ProductModel=Ember.Object.extend({init:function(){this.productID=void 0,this.name=void 0,this.allowDevice=void 0,this.isSelected=!1,this.isDisabled=!1,this._super()}}),Komodo.Models.DeviceActivationDetailsModel=Ember.Object.extend({init:function(){this.devices=[],this.primaryDecoderType=void 0,this.primaryDecoderSerialNumber=void 0,this.secondaryDecoderType=void 0,this.secondaryDecoderSerialNumber=void 0,this.primarySmartcardType=void 0,this.primarySmartcardSerialNumber=void 0,this.secondarySmartcardType=void 0,this.secondarySmartcardSerialNumber=void 0,this.xtraview=void 0,this.principalPackage=void 0,this.addOnPackage=void 0,this.smartcards=[],this.boxOffice=void 0,this.chargePeriod=void 0,this.activationDate=void 0,this.boSmartcardDetails=[],this.dlWhoIsUsingTheDevice=void 0,this.dlResidenceType=void 0,this.dlAddress=void 0,this.dlPaymentDetails=void 0,this._super()}}),Komodo.Models.DeviceAtAnotherLocationModel=Ember.Object.extend({init:function(){this.localeBase="locale.associateProducts:deviceAtAnotherLocation.",this.firstName=void 0,this.lastName=void 0,this.deviceUsage=void 0,this.isCustomerSelected=!0,this.accountHoldersName=void 0,this.accountHoldersFirstName=void 0,this.accountHoldersSurnameName=void 0,this.accountHoldersID=void 0,this.accountNumber=void 0,this.branchCode=void 0,this.bank=void 0,this.accountType=void 0,this.branchName=void 0,this.debitOrderDay=void 0,this.debitOderDays=[],this.paymentDays=[],this.residenceType=void 0,this.methodOfPayment=void 0,this.paymentDay=void 0,this.radioButtonMethodOfPayment=[{title:kl.value(this.localeBase+"debitOrder"),value:"2"},{title:kl.value(this.localeBase+"cash"),value:"1"}],this.radioButtonDeviceUsage=[{title:kl.value(this.localeBase+"customer"),value:"1"},{title:kl.value(this.localeBase+"someoneElse"),value:"2"}],this.customerIsTheAccountHolder=void 0,this.ahvStatus=void 0,this.payerIDType=void 0,this.type=void 0,this.isPrimary=void 0,this.IsMarketingEnabled=void 0,this.country=void 0,this.province=void 0,this.city=void 0,this.suburb=void 0,this.postalCode=void 0,this.unit=void 0,this.building=void 0,this.streetNo=void 0,this.streetName=void 0,this.billing=void 0,this.countryCanonicalKey=void 0,this.provinceCanonicalKey=void 0,this.cityCanonicalKey=void 0,this.suburbCanonicalKey=void 0,this.address=void 0,this.IsVerified=void 0,this.boxOrSuite=void 0,this.hideFinInfo=!0,this._super()}}),Komodo.Models.ExistingCustomerAddProductsModel=Ember.Object.extend({init:function(){this.customerRefNo=void 0,this.smartcardDecoderNo=void 0,this.selectedPrimaryDecoder=void 0,this.selectedSummaryGridItem=void 0,this.commandSummaryGridItem=void 0,this.commandSummaryGridItemType=void 0,this.primaryDecoder=void 0,this.secondaryDecoder=void 0,this.primaryProductSelection=void 0,this.addOnProductSelection=void 0,this.radioButtonPaymentMethod=void 0,this.haveYouMadeAPaymentYetYesNo=void 0,this.radioButtonDeviceUsage=void 0,this.areYouWaitingForInstallationYesNo=void 0,this.deviceAtHomeOrOtherLocation=void 0,this.selectedPaymentOfMethod=void 0,this.selectedPaymentMadeOption=void 0,this.selctedWaitingForInstallationOption=void 0,this.activationDate=void 0,this.selectedproductData=[],this.selectedSummaryProductData=[],this.isDstv=void 0,this._super()}}),Komodo.Models.SavePairModel=Ember.Object.extend({init:function(){this.smartCardSerialNumber=void 0,this.decoderSerialNumber=void 0,this._super()}}),Komodo.Models.XtraViewModel=Ember.Object.extend({init:function(){this._super()}}),Ember.TEMPLATES.SavePairView=Ember.Handlebars.template(function(e,t,a,s,o){function r(e,t){var s,o;t.buffer.push(c((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.associateProducts:associateProducts.savePair",o):n.call(e,"loc","locale.associateProducts:associateProducts.savePair",o))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),o=o||{};var i,n=a.helperMissing,c=this.escapeExpression,d=this
;return o.buffer.push('<div>\r\n  <br />\r\n  <br />\r\n  <table width="520px" style="table-layout:fixed">\r\n    <tr>\r\n      <td width="210px">\r\n        '),o.buffer.push(c(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.deviceNumber~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:t,class:t},contexts:[t],types:["ID"],data:o}))),o.buffer.push("<br /><br />\r\n        "),o.buffer.push(c(a.view.call(t,"Komodo.Controls.CoreTextField",{hash:{width:"80px",tabindex:"1",valueBinding:"view.context.data.decoderSerialNumber"},hashTypes:{width:"STRING",tabindex:"STRING",valueBinding:"STRING"},hashContexts:{width:t,tabindex:t,valueBinding:t},contexts:[t],types:["ID"],data:o}))),o.buffer.push('\r\n      </td>\r\n      <td align="center" width="40px">\r\n        <br />\r\n        <br />\r\n        <img src="./Content/Images/link/l.svg">\r\n      </td>\r\n      <td width="220px">\r\n        '),o.buffer.push(c(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.smartcardNumber~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:t,class:t},contexts:[t],types:["ID"],data:o}))),o.buffer.push("<br /><br />\r\n        "),o.buffer.push(c(a.view.call(t,"Komodo.Controls.CoreTextField",{hash:{width:"80px",tabindex:"2",valueBinding:"view.context.data.smartCardSerialNumber"},hashTypes:{width:"STRING",tabindex:"STRING",valueBinding:"STRING"},hashContexts:{width:t,tabindex:t,valueBinding:t},contexts:[t],types:["ID"],data:o}))),o.buffer.push('\r\n      </td>\r\n    </tr>\r\n    <tr>\r\n      <td width="240px">'),o.buffer.push(c(a.view.call(t,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"view.context.validators.decoderSerialNumberValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:t},contexts:[t],types:["ID"],data:o}))),o.buffer.push('</td>\r\n      <td></td>\r\n      <td width="240px">'),o.buffer.push(c(a.view.call(t,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"view.context.validators.smartCardSerialNumberValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:t},contexts:[t],types:["ID"],data:o}))),o.buffer.push('</td>\r\n    </tr>\r\n  </table>\r\n  <br />\r\n  <br />\r\n  <br />\r\n  <br />\r\n  <br />\r\n  <br />\r\n  <br />\r\n  <br />\r\n  <br />\r\n  <div style="float:right">\r\n    '),i=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"savepair",tabindex:"3"},hashTypes:{action:"STRING",tabindex:"STRING"},hashContexts:{action:t,tabindex:t},inverse:d.noop,fn:d.program(1,r,o),contexts:[t],types:["ID"],data:o}),(i||0===i)&&o.buffer.push(i),o.buffer.push("\r\n  </div>\r\n</div>"),""}),Komodo.Services.AssociateProductsDataService=Komodo.UI.Controller.extend({_localeBase:"locale.associateProducts:associateProducts.",init:function(){this._super()},start:function(){this._super()},stop:function(){this._super()},resultAccountMessage:{ResponseMessage:{Payload:{ListOfAccount:{Account:[]}}}},resultCustomerDetailMessage:{ResponseMessage:{Payload:{CustomerDetail:{},RdChequeDetail:{}}}},retrieveFinancialAccounts:function(e){var t=$.Deferred(),a=this,s=a.resultAccountMessage;return s.ResponseMessage.Payload.ListOfAccount.Account.clear(),Komodo.Services.queryService.getJSON("AccountProfile?id="+e,!0).done(function(e){s.ResponseMessage.Payload.ListOfAccount.Account.clear(),e&&e.Account.length&&0!==e.Account.length&&(e.Account.length>1?s.ResponseMessage.Payload.ListOfAccount.Account.addObjects(e.Account):s.ResponseMessage.Payload.ListOfAccount.Account.addObject(e.Account[0]),t.resolve(s))}).error(function(e){t.reject(JSON.stringify(e))}),t},retrieveDeviceDPP:function(e){var t=$.Deferred();return Komodo.Services.queryService.getJSON("CreditApplication/VerifyDPPDevice?serialNumber="+e,!0).done(function(e){t.resolve(e)}).error(function(e){t.reject(JSON.stringify(e))}),t},getCustomerID:function(){var e=this,t=void 0,a=Komodo.Services.customerProfileService.getCustomerPersonalDetail();return Ember.isEmpty(a)||void 0!==a.customerNo&&(t=a.customerNo,e.customerPersonalDetails.firstName=a.firstName,e.customerPersonalDetails.surname=a.lastName,e.customerPersonalDetails.residenceType=void 0,e.customerPersonalDetails.deviceUsage="Customer"),t},publishNotifyHardwareMovementEvent:function(e,t){var a=e,s=Komodo.Models.NotifyHardwareMovement.create(),o=Komodo.canonicalFacadeFactory(s,["Country","CustomerID","OrderType","NotificationType","ListOfHardware_Hardware"]);o.set("Country",e.get("country")),o.set("CustomerID",e.get("data.customerRefNo")),o.set("OrderType","ZOR"),o.set("NotificationType","POD");var r=[],i=Komodo.Models.Hardware.create();Komodo.canonicalFacadeFactory(i,["SerialNumber"]).set("SerialNumber",t),r.push(i),o.set("ListOfHardware_Hardware",r),a.getNewProcessID(),Komodo.Services.AssociateProductsService.publishNotifyHardwareMovement(a,s).done(function(){Komodo.log("publishNotifyHardwareMovementEvent() : NotifyHardwareMovement event has been published."),a.showBusyIndicator()}).fail(function(){Komodo.log("publishNotifyHardwareMovementEvent() : NotifyHardwareMovement event has failed.")})},retrieveCustomer:function(e){var t=$.Deferred(),a=this,s=a.resultCustomerDetailMessage;return s.ResponseMessage.Payload.CustomerDetail=void 0,s.ResponseMessage.Payload.RdChequeDetail=void 0,Komodo.Services.queryService.getJSON("CustomerProfile?customerId="+e,!0).done(function(e){e&&e.CustomerDetail&&(s.ResponseMessage.Payload.CustomerDetail=e.CustomerDetail,s.ResponseMessage.Payload.RdChequeDetail=e.RdCheque,t.resolve(s))}).error(function(e){t.reject(JSON.stringify(e))}),t},retrieveProductActivationDetails:function(e,t,a){var s=$.Deferred();return Komodo.Services.queryService.getJSON("/Device/ValidateProductActivationDuration?customerId="+e+"&commercialProductId="+t+"&productActiveMonths="+a,!0).done(function(e){0!==e.length&&s.resolve(e)}).error(function(e){s.reject(JSON.stringify(e))}),s},getPersonalDetails:function(e){var t=Ember.Object.extend({firstName:void 0,surname:void 0,residenceType:void 0,deviceUsage:void 0}).create();return t.firstName=e.firstName,t.surname=e.surname,t.residenceType=e.residenceType,t.deviceUsage=e.deviceUsage,t},getPaymentDetails:function(e){var t=Ember.Object.extend({AHVStatus:void 0,AccountNumber:void 0,BankName:void 0,BranchCode:void 0,BranchName:void 0,DebitOrderDay:void 0,MethodOfPayment:void 0,PayerIDNumber:void 0,BankAccountType:void 0,PayerIDType:void 0,PayerName:void 0,PayerFirstName:void 0,PayerSurname:void 0,PaymentDay:void 0,IsAccountHolder:void 0}).create();switch(e.MethodOfPayment){case Komodo.MethodOfPayment.CASH:case Komodo.MethodOfPayment.PAYROLL:t.AHVStatus=void 0,t.AccountNumber=void 0,t.BankName=void 0,t.BranchCode=void 0,t.BranchName=void 0,t.DebitOrderDay=e.DebitOrderDay,t.MethodOfPayment=e.MethodOfPayment,t.PayerIDNumber=void 0,t.PayerIDType=void 0,t.BankAccountType=void 0,t.PayerName=void 0,t.PayerFirstName=void 0,t.PayerSurname=void 0,t.PaymentDay=void 0,t.IsAccountHolder=void 0;break;default:t.AHVStatus=e.AHVStatus,t.AccountNumber=e.AccountNumber,t.BankName=e.BankName,t.BranchCode=e.BranchCode,t.BranchName=e.BranchName,t.DebitOrderDay=e.DebitOrderDay,t.MethodOfPayment=e.MethodOfPayment,t.PayerIDNumber=e.PayerIDNumber,t.BankAccountType=e.BankAccountType,t.PayerIDType=e.PayerIDType,t.PayerName=e.PayerName,t.PayerFirstName=e.PayerFirstName,t.PayerSurname=e.PayerSurname,t.PaymentDay=e.PaymentDay,t.IsAccountHolder=e.IsAccountHolder}return t},getAddressDetails:function(e){var t=Ember.Object.extend({type:void 0,country:void 0,province:void 0,city:void 0,suburb:void 0,postalCode:void 0,unit:void 0,building:void 0,streetNo:void 0,streetName:void 0,boxOrSuite:void 0,isAddressOverride:void 0}).create();return t.country=e.country,t.province=e.province,t.city=e.city,t.suburb=e.suburb,t.postalCode=e.postalCode,t.unit=e.unit,t.building=e.building,t.streetNo=e.streetNo,t.streetName=e.streetName,t.boxOrSuite=e.boxOrSuite,t.isAddressOverride=e.isAddressOverride,t},getListOfAccount:function(e,t,a,s,o){var r=this,i=[];return t.forEach(function(t){var n=Komodo.Models.Account.create(),c=Komodo.canonicalFacadeFactory(n,["StartDate","EndDate","PaymentDetail","ListOfAgreement_Agreement"]);c.set("StartDate",void 0),c.set("EndDate",void 0),c.set("PaymentDetail",r.getcustomerPaymentDetail(t,a,e)),c.set("ListOfAgreement_Agreement",r.getListOfAgreement(t,s,o,e)),i.push(n)}),i},getValueFromConstant:function(e,t){return Komodo.Services.CustomerService.getValueFromConstant(e,t)},getListOfAgreement:function(e,t,a,s){var o=this,r=Komodo.Services.systemService,i=[];if(void 0!=e){var n=Komodo.Models.Agreement.create(),c=Komodo.canonicalFacadeFactory(n,["StartDate","UID","ActivationDate","TermOfPayment","ConsumerDetail","ConsumerAddress","ListOfHardware_Hardware","IsViewAtHome","LocationIndicator"]);e.chargePeriod===kl.value(s._localeBase+"monthly")||e.chargePeriod===kl.value(s._localeBase+"shortTermSubscription")?c.set("TermOfPayment","1"):e.chargePeriod===kl.value(s._localeBase+"quarterly")?c.set("TermOfPayment","3"):c.set("TermOfPayment","12"),c.set("StartDate",void 0);var d;c.set("ConsumerDetail",o.getConsumerDetail(e)),c.set("ConsumerAddress",o.getConsumerAddress(e),a),c.set("ListOfHardware_Hardware",o.getListOfHardware(e,t,s)),c.set("IsViewAtHome",e.deviceAtHomeOrOtherLocation),c.set("LocationIndicator",e.customerPersonalDetails.residenceType),d=o.getAggrement(c.get("ListOfHardware_Hardware"),t),Ember.isEmpty(d)&&(d=o.getDeviceDetails(e.primaryDecoderSerialNumber,t,!1)),void 0===d&&void 0!==e.secondaryDecoderSerialNumber&&(d=o.getDeviceDetails(e.secondaryDecoderSerialNumber,t,!1)),c.set("UID",d),void 0!==e.activationDate&&c.set("ActivationDate",r.universalDateString(new Date(e.activationDate.replace(/(\d{2})-(\d{2})-(\d{4})/,"$2/$1/$3")))),i.push(n)}return i},getAggrement:function(e,t){var a=$.grep(t,function(t){return!0===t.isPrincipalPresent&&t.decoderSerialNumber===e[0].SerialNumber})[0];if(Ember.isEmpty(a)&&!Ember.isEmpty(e[0].SecondaryHardware)&&(a=$.grep(t,function(t){return!0===t.isPrincipalPresent&&t.decoderSerialNumber===e[0].SecondaryHardware.SerialNumber})[0]),!Ember.isEmpty(a))return a.agreemntUId},getDeviceDetails:function(e,t,a){var s=void 0;return $.each(t,function(t,o){return e!==o.decoderSerialNumber||a?e===o.decoderSerialNumber&&a&&(s=o):s=o.agreemntUId,void 0===s}),s},getListOfHardware:function(e,t,a){var s=this,o=[];if(void 0!=e){var r=Komodo.Models.Hardware.create(),i=Komodo.canonicalFacadeFactory(r,["SerialNumber","LinkedSmartcard","SmartcardDetail","ProductDetail","ListOfService","SecondaryHardware","InsuranceStatus","WarrantyStatus","IsAwaitingInstallation"]);if(i.set("SerialNumber",e.primaryDecoderSerialNumber),i.set("LinkedSmartcard",e.primaryDecoderSmartcardSerialNumber),!0===e.primaryDecoderInsurance&&i.set("InsuranceStatus",kl.value(a._localeBase+"yes")),i.set("SmartcardDetail",s.getSmartcardDetail(e.primaryDecoderSmartcardSerialNumber,e.primaryDecoderSmartcardType)),i.set("ProductDetail",s.getDecoderDetail(e,s.isDecoderRemovedFromExistingPair(e.primaryDecoderSerialNumber,t))),i.set("ListOfService",s.getListOfServices(e,a)),void 0!==e.secondaryDecoderSerialNumber){var n=Komodo.Models.Hardware.create(),c=Komodo.canonicalFacadeFactory(n,["SerialNumber","LinkedSmartcard","SmartcardDetail","ProductDetail","ListOfService","InsuranceStatus"]);c.set("SerialNumber",e.secondaryDecoderSerialNumber),c.set("LinkedSmartcard",e.secondarySmartcardSerialNumber),!0===e.secondaryDecoderInsurance&&c.set("InsuranceStatus",kl.value(a._localeBase+"yes")),c.set("SmartcardDetail",s.getSmartcardDetail(e.secondarySmartcardSerialNumber,e.secondarySmartcardType)),c.set("ProductDetail",s.getDecoderDetail(e,!1)),void 0!==e.secondaryDecoderAccessServiceName&&c.set("ListOfService",s.getSecondaryHardwareListOfServices(e)),i.set("SecondaryHardware",n)}"0"===e.isAwaitingInstallation?i.set("IsAwaitingInstallation",!0):i.set("IsAwaitingInstallation",!1),o.push(r)}return o},getConsumerDetail:function(e){var t=Komodo.Models.PersonalDetail.create(),a=Komodo.canonicalFacadeFactory(t,["FirstName","Surname"]);return void 0!=e&&(a.set("FirstName",e.customerPersonalDetails.firstName),a.set("Surname",e.customerPersonalDetails.surname)),t},getConsumerAddress:function(e,t){var a=Komodo.Models.Address.create(),s=Komodo.canonicalFacadeFactory(a,["Type","HouseNumber","BuildingName","Street","Suburb","City","Province","Country","PostCode","PostBoxNumber","IsVerified"]);return void 0!=e&&(s.set("Type","Agreement"),s.set("Street",e.addressDetails.streetName),s.set("Suburb",e.addressDetails.suburb),s.set("City",e.addressDetails.city),s.set("Province",e.addressDetails.province),s.set("Country",e.addressDetails.country),s.set("PostCode",e.addressDetails.postalCode),s.set("PostBoxNumber",e.addressDetails.boxOrSuite),s.set("HouseNumber",e.addressDetails.unit),s.set("BuildingName",e.addressDetails.building),t?s.set("IsVerified",!e.addressDetails.isVerified):s.set("IsVerified",!0)),a},getcustomerPaymentDetail:function(e,t,a){var s,o=Komodo.Models.PaymentDetail.create();if(void 0!=e.customerPaymentDetail)switch(e.customerPaymentDetail.MethodOfPayment){case Komodo.MethodOfPayment.CASH:s=Komodo.canonicalFacadeFactory(o,["MethodOfPayment","DebitOrderDay"]),s.set("MethodOfPayment",e.customerPaymentDetail.MethodOfPayment),s.set("DebitOrderDay",e.customerPaymentDetail.DebitOrderDay);break;default:s=Komodo.canonicalFacadeFactory(o,["MethodOfPayment","AHVStatus","AccountNumber","BankAccountType","BankName","BranchName","BranchCode","DebitOrderDay","PayerName","PayerSurname","PayerIDType","PayerIDNumber"]),s.set("BankAccountType",e.customerPaymentDetail.BankAccountType),e.customerPaymentDetail.AHVStatus&&a.get("residenceTypeForHH")!==a.holidayHomeKey&&!a.get("isMOPRequiredForHH")?s.set("MethodOfPayment",Komodo.MethodOfPayment.AHV_PENDING):s.set("MethodOfPayment",$.grep(t,function(t){if(t.value===e.customerPaymentDetail.BankAccountType)return t})[0].key),s.set("AHVStatus",e.customerPaymentDetail.AHVStatus),s.set("AccountNumber",e.customerPaymentDetail.AccountNumber),s.set("BankName",e.customerPaymentDetail.BankName),s.set("BranchName",e.customerPaymentDetail.BranchName),s.set("BranchCode",e.customerPaymentDetail.BranchCode),s.set("DebitOrderDay",e.customerPaymentDetail.DebitOrderDay),s.set("PayerName",e.customerPaymentDetail.PayerName),s.set("PayerIDNumber",e.customerPaymentDetail.PayerIDNumber)}return o},getListOfServices:function(e,t){var a=this,s=Komodo.Models.ListOfService.create(),o=void 0;if(void 0!=e){if(void 0!==e.serviceUID&&$.each(e.serviceUID,function(t,r){if(void 0!==e.primaryDecoderServiceDetails&&null!==e.primaryDecoderServiceDetails)switch(e.primaryDecoderServiceDetails.Service){case void 0:case null:case"":break;default:$.each(e.primaryDecoderServiceDetails.Service,function(e,t){Ember.isEmpty(t.ProductDetail)||r.UID===t.ProductDetail.UID&&(o=[],void 0!==t.ProductDetail.Offers&&(void 0!==t.ProductDetail.Offers.UID&&(t.ProductDetail.Offers=[t.ProductDetail.Offers]),$.each(t.ProductDetail.Offers,function(e,t){var a=Komodo.Models.Offer.create();a.UID=t.UID,a.Name=t.Name,o.pushObject(a)})))})}s.Service.push(a.getServiceDetailCanonical(r.UID,r.Name,"PRINCIPAL",o,r.ShortTermSubscriptionId))}),t.get("isMultipleAddonAllowed"))void 0!==e.addOnUID&&e.addOnUID.length>0&&$.each(e.addOnUID,function(e,t){var o=void 0;Ember.isEmpty(t.ProductDetail)||Ember.isEmpty(t.ProductDetail.offers)||(o=a.getOffer(t.ProductDetail.offers)),s.Service.push(a.getServiceDetailCanonical(t.UID,t.Name,"ADDON",o,void 0))});else if(void 0!==e.addOnUID){var r,i=void 0;Ember.isEmpty(e.primaryDecoderServiceDetails)||Ember.isEmpty(e.primaryDecoderServiceDetails.Service)||(r=$.grep(e.primaryDecoderServiceDetails.Service,function(t){return t.UID===e.addOnUID}),Ember.isEmpty(r)||Ember.isEmpty(r[0].ProductDetail)||Ember.isEmpty(r[0].ProductDetail.Offers)||(i=a.getOffer(r[0].ProductDetail.Offers))),s.Service.push(a.getServiceDetailCanonical(e.addOnUID,e.addOn,"ADDON",i,void 0))}if(void 0!==e.hdAddOnUID){var n,c=void 0;if(!Ember.isEmpty(e.primaryDecoderServiceDetails)&&!Ember.isEmpty(e.primaryDecoderServiceDetails.Service)){var n=$.grep(e.primaryDecoderServiceDetails.Service,function(t){return t.UID===e.hdAddOnUID});Ember.isEmpty(n)||Ember.isEmpty(n[0].ProductDetail)||Ember.isEmpty(n[0].ProductDetail.Offers)||(c=a.getOffer(n[0].ProductDetail.Offers))}s.Service.push(a.getServiceDetailCanonical(e.hdAddOnUID,e.hdAddOn,"ADDON",c,void 0))}if(void 0!==e.primaryDecoderAccessService){var d,l=void 0;Ember.isEmpty(e.primaryDecoderServiceDetails)||Ember.isEmpty(e.primaryDecoderServiceDetails.Service)||(d=$.grep(e.primaryDecoderServiceDetails.Service,function(t){return t.UID===e.primaryDecoderAccessService}),Ember.isEmpty(d)||Ember.isEmpty(d[0].ProductDetail)||Ember.isEmpty(d[0].ProductDetail.Offers)||(l=a.getOffer(d[0].ProductDetail.Offers))),s.Service.push(a.getServiceDetailCanonical(e.primaryDecoderAccessService,e.primaryDecoderAccessServiceName,"ACCESS",l,void 0))}Ember.isEmpty(e.multipleOfferBOM)||$.each(e.multipleOfferBOM,function(e,t){if(!Ember.isEmpty(t.ProductDetail)&&!Ember.isEmpty(t.ProductDetail.Offers)){var o=a.getOffer(t.ProductDetail.Offers);s.Service.push(a.getServiceDetailCanonical(t.UID,t.ProductDetail.Name,"FREETOAIRADDON",o,void 0))}})}return s},getOffer:function(e){var t=[];return e=[e],$.each(e,function(e,a){var s=Komodo.Models.Offer.create();s.UID=a.UID,s.Name=a.Name,t.pushObject(s)}),t},getServiceDetailCanonical:function(e,t,a,s,o){var r=Komodo.Models.ProductDetail.create(),i=Komodo.Models.Service.create(),n=Komodo.canonicalFacadeFactory(i,["UID","Status","ProductDetail"]);n.set("UID",e);var c=Komodo.canonicalFacadeFactory(r,["UID","Type","Name","Offers","ShortTermSubscription"]);return c.set("UID",e),c.set("Type",a),c.set("Name",t),c.set("ShortTermSubscription",o),void 0!==s&&c.set("Offers",s),n.set("ProductDetail",r),i},getSecondaryHardwareListOfServices:function(e){var t=Komodo.Models.ListOfService.create();return t.Service.push(this.getServiceDetailCanonical(e.secondaryDecoderAccessService,e.secondaryDecoderAccessServiceName,"ACCESS",void 0,void 0)),t},getSmartcardDetail:function(e,t){var a=Komodo.Models.ProductDetail.create(),s=Komodo.canonicalFacadeFactory(a,["UID","Type","Name","Model","Description"]);return s.set("UID",e),s.set("Type",t),s.set("Name",void 0),s.set("Model",void 0),s.set("Description",void 0),a},getDecoderDetail:function(e,t){var a=Komodo.Models.ProductDetail.create(),s=Komodo.canonicalFacadeFactory(a,["UID","Type","Name","Model","Description","ProductFeatures"]),o=this;if(void 0!=e&&(s.set("UID",e.primaryDecoderUID),s.set("Type",Komodo.UI.cacheDataService.getDeviceType(e.primaryDecoderCpcType)),s.set("Name",void 0),s.set("Model",void 0),s.set("Description",void 0),t||e.isDisconnected)){var r=[],i=Komodo.Models.ProductFeatures.create(),n=Komodo.canonicalFacadeFactory(i,["Value","Description"]);t&&(n.set("Value","true"),n.set("Description",o.getValueFromConstant("ProductsConstants","productsConstants.products.REMOVED_FROM_EXTRAVIEW")),r.pushObject(i)),e.isDisconnected&&(i=Komodo.Models.ProductFeatures.create(),n=Komodo.canonicalFacadeFactory(i,["Value","Description"]),n.set("Value","true"),n.set("Description",o.getValueFromConstant("ProductsConstants","productsConstants.products.IS_DISCONNECTED_DEVICE")),r.pushObject(i)),s.set("ProductFeatures",r)}return a},isDecoderRemovedFromExistingPair:function(e,t){var a=!0;return $.each(t,function(t,s){return void 0!==s.secondaryHardwareSerialnumber&&s.secondaryHardwareSerialnumber===e&&(a=!1),a}),!a},initialiseObjects:function(e){e.customerPaymentDetail=Ember.Object.extend({AHVStatus:void 0,AccountNumber:void 0,BankName:void 0,BranchCode:void 0,BranchName:void 0,DebitOrderDay:void 0,MethodOfPayment:void 0,PayerIDNumber:void 0,BankAccountType:void 0,PayerIDType:void 0,PayerName:void 0,PayerFirstName:void 0,PayerSurname:void 0,PaymentDay:void 0,IsAccountHolder:void 0}).create(),e.addressDetails=Ember.Object.extend({type:void 0,country:void 0,province:void 0,city:void 0,suburb:void 0,postalCode:void 0,unit:void 0,building:void 0,streetNo:void 0,streetName:void 0,boxOrSuite:void 0}).create(),e.customerPersonalDetails=Ember.Object.extend({firstName:void 0,surname:void 0,residenceType:void 0,deviceUsage:void 0}).create()},showDeviceSummaryPopUp:function(e,t,a){var s=Komodo.Models.DeviceActivationDetailsModel.create();s.chargePeriod=e.get("chargePeriod"),s.activationDate=e.get("activationDate"),s.primaryDecoderType=e.get("primaryDecoderType"),s.primaryDecoderSerialNumber=e.get("primaryDecoderSerialNumber"),s.primarySmartcardType=e.get("primaryDecoderSmartcardType"),s.primarySmartcardSerialNumber=e.get("primaryDecoderSmartcardSerialNumber"),s.principalPackage=e.get("services"),s.addOnPackage=e.get("addOnDisplay"),s.boxOffice=kl.value(t+"no"),void 0!=e.get("customerPersonalDetails.firstName")&&void 0!=e.get("customerPersonalDetails.surname")?s.dlWhoIsUsingTheDevice=e.get("customerPersonalDetails.firstName")+" "+e.get("customerPersonalDetails.surname"):s.dlWhoIsUsingTheDevice="Customer",void 0!=e.get("customerPersonalDetails.residenceType")?s.dlResidenceType=$.grep(a.residenceTypes,function(t){return e.customerPersonalDetails.residenceType===t.CanonicalKey})[0].CanonicalValue:s.dlResidenceType=kl.value(t+"home");var o=void 0!==e.get("addressDetails.boxOrSuite")&&null!==e.get("addressDetails.boxOrSuite")?e.get("addressDetails.boxOrSuite")+", ":"",r=void 0!==e.get("addressDetails.streetName")&&null!==e.get("addressDetails.streetName")?e.get("addressDetails.streetName")+", ":"",i=void 0!==e.get("addressDetails.unit")&&null!==e.get("addressDetails.unit")?e.get("addressDetails.unit")+", ":"",n=void 0!==e.get("addressDetails.building")&&null!==e.get("addressDetails.building")?e.get("addressDetails.building")+", ":"",c=void 0!==e.get("addressDetails.suburb")&&null!==e.get("addressDetails.suburb")?e.get("addressDetails.suburb")+", ":"",d=void 0!==e.get("addressDetails.city")&&null!==e.get("addressDetails.city")?e.get("addressDetails.city")+", ":"",l=void 0!==e.get("addressDetails.postalCode")&&null!==e.get("addressDetails.postalCode")?e.get("addressDetails.postalCode"):"",u="",h="";switch(void 0!==e.get("addressDetails.country")&&null!==e.get("addressDetails.country")&&(h=a.getCountryNameById(e.get("addressDetails.country")),""!==h&&(h+=", "),void 0!==e.get("addressDetails.province")&&null!==e.get("addressDetails.province")&&""!==(u=a.getProvienceNameById(e.addressDetails.province,e.addressDetails.country))&&(u+=", ")),s.dlAddress=o+i+n+r+c+d+u+h+l,e.get("customerPaymentDetail.MethodOfPayment")){case Komodo.MethodOfPayment.CASH:case Komodo.MethodOfPayment.PAYROLL:e.get("customerPaymentDetail.MethodOfPayment")===Komodo.MethodOfPayment.CASH?s.dlPaymentDetails=kl.value(t+"cash"):e.get("customerPaymentDetail.MethodOfPayment")===Komodo.MethodOfPayment.PAYROLL&&(s.dlPaymentDetails=kl.value(t+"payroll"));break;default:e.get("customerPaymentDetail.MethodOfPayment")===Komodo.MethodOfPayment.AHV_PENDING?s.dlPaymentDetails=kl.value(t+"AHVPending"):s.dlPaymentDetails=kl.value(t+"debitOrder")}void 0!=e.get("secondaryDecoderSerialNumber")?(s.secondaryDecoderType=e.get("secondaryDecoderType"),s.secondaryDecoderSerialNumber=e.get("secondaryDecoderSerialNumber"),s.secondarySmartcardType=e.get("secondarySmartcardType"),s.secondarySmartcardSerialNumber=e.get("secondarySmartcardSerialNumber"),s.xtraview=kl.value(t+"yes")):s.xtraview=kl.value(t+"no");var m=Komodo.Services.uiService.showModalPopup(kl.value(t+"deviceActivationDetailsTitle"),null,{view:Komodo.Application.DeviceActivationDetailsView,context:{deviceActivationData:s,close:function(){a.set("popupaction","close"),m.close()}},closeCallback:function(){},canUserClose:!0})},clearData:function(e){e.get("data.selectedSummaryProductData").clear(),e.get("data.selectedproductData").clear(),e.get("primaryDevicesList").clear(),e.get("xtraViewList").clear(),e.set("data.primaryDecoder",""),e.set("data.secondaryDecoder",""),e.clearInsuranceAndAccessServiceCheckBox(),e.set("showSecondaryDecodeServices",!1),e.set("showPrimaryDecodeServices",!1),e.productAddOn.clear(),e.productHdAddOn.clear(),e.productService.clear()},clearAllProducts:function(e){e.clearInsuranceAndAccessServiceCheckBox(),e.set("showPrimaryDecodeServices",!1),e.set("showSecondaryDecodeServices",!1),e.set("showPackages",!1),e.get("isGoTvDeviceSelected")&&$.each(e.get("productService"),function(e,t){t.set("isChecked",!1)}),e.get("productService").clear(),e.get("productAddOn").clear(),e.get("productHdAddOn").clear(),e.set("data.addOnProductSelection",void 0),e.set("data.primaryProductSelection",void 0),e.set("data.hdAddOnProductSelection",void 0),e.set("data.activationDate",new Date),e.set("data.primaryDecoder",void 0),e.set("tempValue",void 0),e.set("servicesNotSelected",!1)},deviceResponseRecieved:function(e,t){var a=this;switch(void 0!==t.ResponseMessage.Payload.ListOfHardware){case void 0:case null:case"":break;default:switch(void 0!==t.ResponseMessage.Payload.ListOfHardware.Hardware){case void 0:case null:case"":break;default:switch(t.ResponseMessage.Payload.ListOfHardware.Hardware.Status){case void 0:case"":case null:break;default:switch(t.ResponseMessage.Payload.ListOfHardware.Hardware.Status.toUpperCase()){case"MATCHING DEVICE NOT FOUND":e.matchingDeviceNotFound(t);break;case"AVAILABLE FOR USE":switch(t.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcardStatus){case void 0:case"":case null:void 0!==t.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail&&(Komodo.UI.cacheDataService.isMobileDevice(Komodo.UI.cacheDataService.getDeviceCPCCanonicalKeyBySytemKey(t.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.Type))?e.availableForUse(t,!0,2):Komodo.UI.cacheDataService.isGotvDevice(Komodo.UI.cacheDataService.getDeviceCPCCanonicalKeyBySytemKey(t.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.Type))?a.validateGotvDeviceRules(e,t.ResponseMessage.Payload.ListOfHardware.Hardware)&&e.availableForUse(t,!0,3):Ember.isEmpty(t.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.ProductFeatures.Value)||"embedded"!==t.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.ProductFeatures.Value.toLowerCase()?Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),"<br />"+kl.value(e._localeBase+"deviceIsNotSupported"),Komodo.Controls.MessageBoxOkButton,a,"id5556673","danger"):e.availableForUse(t,!0,1));break;default:if(!Komodo.Services.customerProfileService.getCustomerPersonalDetail().isDstv&&!e.get("onlyPrincipalMobileProduct"))return void Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),"<br />"+kl.value(e._localeBase+"deviceIsNotSupported"),Komodo.Controls.MessageBoxOkButton,a,"id5556673","danger");switch(t.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcardStatus.toUpperCase()){case"MATCHING DEVICE NOT FOUND":e.matchingDeviceNotFound(t);break;case"AVAILABLE FOR USE":e.get("isSASpecific")?a.retrieveDeviceDPP(t.ResponseMessage.Payload.ListOfHardware.Hardware.SerialNumber).done(function(s){if(!0===s){Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),"<br />"+kl.value(e._localeBase+"messageDPPdevice"),Komodo.Controls.MessageBoxOkButton,a,"id5d556673","warning").response=function(s){"ok"===s&&a.publishNotifyHardwareMovementEvent(e,t.ResponseMessage.Payload.ListOfHardware.Hardware.SerialNumber)}}else e.availableForUse(t,!1,1)}):e.availableForUse(t,!1,1);break;default:Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),"<br />"+kl.value(e._localeBase+"device")+" "+t.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcardStatus,Komodo.Controls.MessageBoxOkButton,a,"id5556673","danger")}}break;default:Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),"<br />"+kl.value(e._localeBase+"device")+" "+t.ResponseMessage.Payload.ListOfHardware.Hardware.Status,Komodo.Controls.MessageBoxOkButton,a,"id5556673","danger")}}}}},validateGotvDeviceRules:function(e,t){var a=e,s=1,o=!0,r=this;switch(a.get("marketSegment")){case r.getValueFromConstant("ProductsConstants","productsConstants.products.LESOTHO_MARKET_SEGMENT"):t.ProductDetail.Model!==r.getValueFromConstant("ProductsConstants","productsConstants.products.GOTV_DEVICE_LESOTHO")&&(Komodo.Controls.MessageBoxController.show(kl.value(a.get("_localeBase")+"useCaseTitle"),"<br />"+kl.value(a.get("_localeBase")+"deviceNotSupportedForLesotho"),Komodo.Controls.MessageBoxOkButton,a,"id5556673","warning"),o=!1);break;case r.getValueFromConstant("ProductsConstants","productsConstants.products.MARKET_SEGMENT"):Komodo.Services.featureToggleService.isEnabled("AssociateProducts","CheckGotvActiveValidation").done(function(e){switch(e){case!0:t.ProductDetail.Model!==r.getValueFromConstant("ProductsConstants","productsConstants.products.GOTV_DEVICE")&&(Komodo.Controls.MessageBoxController.show(kl.value(a.get("_localeBase")+"useCaseTitle"),"<br />"+kl.value(a.get("_localeBase")+"deviceNotSupportedForSA"),Komodo.Controls.MessageBoxOkButton,a,"id5556673","warning"),o=!1);break;default:Komodo.Services.customerProfileService.getCustomerPersonalDetail().isDstv&&(Komodo.Controls.MessageBoxController.show(kl.value(a.get("_localeBase")+"useCaseTitle"),"<br />"+kl.value(a.get("_localeBase")+"deviceIsNotSupported"),Komodo.Controls.MessageBoxOkButton,a,"id5556673","warning"),o=!1)}}).fail(function(e){Komodo.Services.log("Error while checking feature toggle. Error Details:"+e)});break;default:Komodo.Services.customerProfileService.getCustomerPersonalDetail().isDstv&&(Komodo.Controls.MessageBoxController.show(kl.value(a.get("_localeBase")+"useCaseTitle"),"<br />"+kl.value(a.get("_localeBase")+"deviceIsNotSupported"),Komodo.Controls.MessageBoxOkButton,a,"id5556673","warning"),o=!1)}return $.each(a.get("data.selectedproductData"),function(e,t){Komodo.UI.cacheDataService.isGotvDevice(t.decoderCpcType)&&s++}),s>r.getValueFromConstant("ProductsConstants","productsConstants.products.MAX_GOTV_DEVICE_ALLOWED")&&(Komodo.Controls.MessageBoxController.show(kl.value(a.get("_localeBase")+"useCaseTitle"),kl.value(a.get("_localeBase")+"maximumAllowedGotvDevices"),Komodo.Controls.MessageBoxOkButton,a,"id23454673","danger"),o=!1),Ember.isEmpty(t.ListOfService)||0===$.grep(a.get("data.selectedproductData"),function(e){return e.decoderCpcType===r.getValueFromConstant("ProductsConstants","productsConstants.products.ANALOGUE_HARDWARE")&&Ember.isEmpty(e.servicesDetails)}).length||0===$.grep(a.get("data.selectedproductData"),function(e){return e.decoderCpcType===r.getValueFromConstant("ProductsConstants","productsConstants.products.DTT_HARDWARE_PRODUCT_CATEGORY_ID")&&void 0!==e.agreemntUId}).length&&(Komodo.Controls.MessageBoxController.show(kl.value(a.get("_localeBase")+"useCaseTitle"),kl.value(a.get("_localeBase")+"gotvBundleNotAllowed"),Komodo.Controls.MessageBoxOkButton,a,"id23454673","warning"),o=!1),o}}),Komodo.Services.AssociateProductsService=Ember.Object.extend(Komodo.Dependency,{productConstant:void 0,customerConstant:void 0,init:function(){this._super(),this.requiresDependency("_securityService",{singleton:Komodo.Services.securityService}),this.requiresDependency("_eventAggregator",{singleton:Komodo.Services.eventAggregator}),this.requiresDependency("_featureToggleService",{singleton:Komodo.Services.featureToggleService}),this.requiresDependency("_cachedDataService",{singleton:Komodo.Services.cachedDataService}),this.requiresDependency("_uiService",{singleton:Komodo.Services.uiService}),this.getEventAggregator().subscribe(Komodo.EventNames.applicationInitialized,this,this._configure),this.getEventAggregator().subscribe(Komodo.EventNames.userLoggedIn,this,this._configure),this.fetchConstantDataSetFromAdele("ManageViewingConstants"),this.fetchConstantDataSetFromAdele("ManageCustomerConstants")},seachCustomer:function(e,t){var a=$.Deferred(),s={eventName:"RetrieveCustomerDetails",
eventVersion:"v1",eventValidityInMinutes:0,eventPriority:null};return e.sendMessage(t,s).done(function(){a.resolve()}).fail(function(e){a.fail(e)}),a},seachHardware:function(e,t){var a=$.Deferred(),s={eventName:"ValidateHardwarePairing",eventVersion:"v1",eventValidityInMinutes:0,eventPriority:null};return e.sendMessage(t,s).done(function(){a.resolve()}).fail(function(e){a.fail(e)}),a},associateProducts:function(e,t,a){var s=$.Deferred(),o={eventName:"AddProducts",eventVersion:"v1",parameters:[],eventValidityInMinutes:0,eventPriority:null};return Ember.isEmpty(a)||o.parameters.pushObject({key:"elevatedPrivilegeSessionToken",value:a}),e.sendMessage(t,o).done(function(){s.resolve()}).fail(function(e){s.fail(e)}),s},associateCommercialProducts:function(e,t){var a=$.Deferred(),s={eventName:"AddCommercialProducts",eventVersion:"v1",eventValidityInMinutes:0,eventPriority:null};return e.sendMessage(t,s).done(function(){a.resolve()}).fail(function(e){a.fail(e)}),a},commercialProductsAdded:function(e,t){var a=$.Deferred(),s={eventName:"CommercialProductsAdded",eventVersion:"v1",eventValidityInMinutes:0,eventPriority:null};return e.sendMessage(t,s).done(function(){a.resolve()}).fail(function(e){a.fail(e)}),a},seachMultipleHardwares:function(e,t){var a=$.Deferred(),s={eventName:"ValidateMultipleHardwarePairings",eventVersion:"v1",eventValidityInMinutes:0,eventPriority:null};return e.sendMessage(t,s).done(function(){a.resolve()}).fail(function(e){a.fail(e)}),a},DeclineDCCTermsConditions:function(e,t){var a=$.Deferred(),s={eventName:"DeclineDCCTermsAndConditions",eventVersion:"v1",eventValidityInMinutes:0,eventPriority:null};return e.sendMessage(t,s).done(function(){a.resolve()}).fail(function(e){a.fail(e)}),a},publishNotifyHardwareMovement:function(e,t){var a=$.Deferred(),s={eventName:"NotifyHardwareMovement",eventVersion:"v1",eventValidityInMinutes:0,eventPriority:null};return e.sendMessage(t,s).done(function(){a.resolve()}).fail(function(e){a.fail(e)}),a},getSecurityService:function(){return this.get("_securityService")},getEventAggregator:function(){return this.get("_eventAggregator")},getFeatureToggleService:function(){return this.get("_featureToggleService")},getCachedDataService:function(){return this.get("_cachedDataService")},getUIService:function(){return this.get("_uiService")},_configure:function(){var e=this;this.getFeatureToggleService().isEnabled("CustomerGlobal","EnableCSICustomer").done(function(t){Ember.run(function(){t||(e.getSecurityService().overrideRouteAccess({routeName:"csiAssociateProducts",permissionType:"HIDE"}),e.getSecurityService().overrideRouteAccess({routeName:"csiActivationSummary",permissionType:"HIDE"}),e.getSecurityService().overrideRouteAccess({routeName:"csiAddProducts",permissionType:"HIDE"}))})})},fetchConstantDataSetFromAdele:function(e){var t=this,a=$.Deferred();return Ember.isEmpty(t.get("productConstant"))||Ember.isEmpty(t.get("customerConstant"))?function(e){t.getCachedDataService().fetch(e,{domain:t.getUIService().getController("application").get("_selectedCountryId"),qualifier:"global"}).done(function(s){t.set("ManageViewingConstants"===e?"productConstant":"customerConstant",s),a.resolve(s)}).fail(function(t){Komodo.error("[CLARITY CONSTANT SERVICE ERROR] : failed to retrieve data for dataset :"+e+"ERROR : "+t),a.reject(t)})}(e):a.resolve(t.get("ManageViewingConstants"===e?"productConstant":"customerConstant")),a},getValueFromConstant:function(e,t){var a=this,s=void 0;try{var o=a.get("ProductsConstants"===e?"productConstant":"customerConstant");Ember.isEmpty(a.get("productConstant"))||Ember.isEmpty(a.get("customerConstant"))?Komodo.error("[CLARITY CONSTANT ERROR] : constant dataset empty: "+e):s=$.grep(o,function(e){return e.key==t})[0].value}catch(e){Komodo.error("[CLARITY CONSTANT ERROR] : failed to retrieve data for "+t+" ERROR: "+e)}return s="null"===s?"":"undefined"===s?void 0:s},destroy:function(){this.getEventAggregator().unsubscribe(Komodo.EventNames.applicationInitialized,this,this._configure),this._super()}}),Komodo.Services.AssociateProductsService=Komodo.Services.AssociateProductsService.create(),Ember.TEMPLATES.AddDeviceView=Ember.Handlebars.template(function(e,t,a,s,o){function r(e,t){var s;return t.buffer.push("\r\n  \x3c!--Column--\x3e\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top full-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:u.noop,fn:u.program(2,i,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function i(e,t){var s;return t.buffer.push("\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:addDevicesAndPackages.smartcardDeviceNumber~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{tabindex:"6",valueBinding:"view.context.data.smartcardDeviceNumber"},hashTypes:{tabindex:"STRING",valueBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.Button",{hash:{tabindex:"7",action:"addAgreementDevice",size:"nextto-control",type:"success"},hashTypes:{tabindex:"STRING",action:"STRING",size:"STRING",type:"STRING"},hashContexts:{tabindex:e,action:e,size:e,type:e},inverse:u.noop,fn:u.program(3,n,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(l(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.smartcardDeviceNumberValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function n(e,t){var s,o;return t.buffer.push(" "),t.buffer.push(l((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.addButton",o):d.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.addButton",o)))),t.buffer.push(" "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),o=o||{};var c,d=a.helperMissing,l=this.escapeExpression,u=this;return o.buffer.push("<div>\r\n  <br/>\r\n  <br/>\r\n  "),c=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:u.noop,fn:u.program(1,r,o),contexts:[t],types:["ID"],data:o}),(c||0===c)&&o.buffer.push(c),o.buffer.push("\r\n  <br/>\r\n</div>"),""}),Komodo.Application.CommercialActivationSummaryController=Komodo.UI.Controller.extend({_localeBase:"locale.associateProducts:associateProducts.",_customerLocaleBase:"locale.customer:customerInformation.",_commercialLocaleBase:"locale.commercialcustomer:addDevicesAndPackages.",_localecommercialCustomer:"locale.commercialcustomer:",init:function(){this._super(),Komodo.log("Constructing Commercial Activation Summary controller"),this.set("processVersion","v1.1"),this.set("processName","Commercial Activation Summary process"),this.registerModel("viewModel",Komodo.Models.CommercialAssociateProductsModel)},start:function(){var e=this;e._setFeatureToggles(),e._super()},stop:function(){this._super()},_setFeatureToggles:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("AssociateProducts","IsInsuranceAvailable").done(function(t){Komodo.Services.securityService.hasPermission("clarity://commercialAddProductsView/viewInsurance")?e.set("viewModel.showInsurance",t):e.set("viewModel.showInsurance",!1)}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)})},clearFormData:function(){var e=this;void 0!==e.viewModel&&(e.viewModel.set("customerClass",void 0),e.viewModel.set("customerType",void 0),e.viewModel.set("paymentGroup",void 0),e.viewModel.set("viewingLocation",void 0),e.viewModel.set("establishmentName",void 0),e.viewModel.set("viewingPoints",void 0),e.viewModel.set("smartcardDeviceNumber",void 0),e.viewModel.set("insurance",void 0),e.viewModel.set("activationDate",void 0),e.viewModel.set("installationType",void 0),e.viewModel.set("primaryProductSelection",void 0),e.viewModel.set("accounts",[]),e.viewModel.set("viewingLocations",[]),e.viewModel.set("selectedproductData",[]))},setResponseMessage:function(e,t){var a=this;a.clearFormData(),a.set("viewModel",e),a.set("controllerName",t),"AddProducts"===t?a.set("isButtonVisible",!1):a.set("isButtonVisible",!0)},actions:{activateAnother:function(){var e=this;Komodo.Services.uiService.getController("commercialAssociateProducts").setData(e.viewModel.paymentGroup,e.viewModel.establishmentName,e.viewModel.viewingLocation,e.viewModel.viewingPoints,e.viewModel.installationType),Komodo.Services.uiService.getRoute("application").transitionTo("commercialAssociateProducts")},complete:function(){var e=this;if("AddProducts"===e.controllerName){Komodo.Services.uiService.getController("commercialManageViewing").setAgreementData(e.viewModel.establishmentName,e.viewModel.viewingLocation),Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo),Komodo.Services.uiService.getRoute("application").transitionTo("commercialManageViewing")}else Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo),Komodo.Services.uiService.getRoute("application").transitionTo("commercialCustomerProfile")}},isButtonVisible:!0,isInsuranceAvailable:!1}),Ember.TEMPLATES.AddressInformationContainerView=Ember.Handlebars.template(function(e,t,a,s,o){function r(e,t){var s;return t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(2,i,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(8,l,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function i(e,t){var s;return t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:C.noop,fn:C.program(3,n,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),s=a.if.call(e,"customerAddressInformation.isPostalPanelVisible",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(5,c,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n\r\n  "),""}function n(e,t){return t.buffer.push("\r\n\r\n  "),t.buffer.push(b(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{contentBinding:"customerAddressInformation.addressType",displayPath:"title",valuePath:"value",valueBinding:"customerAddressInformation.type",label:"~locale.customer:customerInformation.addressType~",validatorBinding:"validators.typeValidator",tabindex:"1"},hashTypes:{contentBinding:"STRING",displayPath:"STRING",valuePath:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING",tabindex:"STRING"},hashContexts:{contentBinding:e,displayPath:e,valuePath:e,valueBinding:e,label:e,validatorBinding:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function c(e,t){var s;return t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:C.noop,fn:C.program(6,d,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function d(e,t){return t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(b(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"postalSameAsPhysical",visibleBinding:"showSameAsPhysical"},hashTypes:{checkedBinding:"STRING",visibleBinding:"STRING"},hashContexts:{checkedBinding:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" "),t.buffer.push(b(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.customer:customerInformation.sameAsPhysical~",visibleBinding:"showSameAsPhysical"},hashTypes:{text:"STRING",visibleBinding:"STRING"},hashContexts:{text:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  "),""}function l(e,t){var s;return t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:C.noop,fn:C.program(9,u,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:C.noop,fn:C.program(14,p,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function u(e,t){var s;return t.buffer.push("\r\n  \x3c!--Country--\x3e\r\n  "),t.buffer.push(b(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"customerAddressInformation.country",tabindex:"2",validatorBinding:"validators.countryValidator",label:"~locale.customer:customerInformation.country~",prompt:"~locale.customer:customerInformation.countryPrompt~",contentBinding:"countries",optionLabelPath:"content.CanonicalValue",optionValuePath:"content"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",validatorBinding:"STRING",label:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{valueBinding:e,tabindex:e,validatorBinding:e,label:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  \x3c!--City--\x3e\r\n  "),t.buffer.push(b(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"customerAddressInformation.city",tabindex:"4",validatorBinding:"validators.cityValidator",label:"~locale.customer:customerInformation.city~",prompt:"~locale.customer:customerInformation.cityPrompt~",contentBinding:"cities",optionLabelPath:"content.CanonicalValue",optionValuePath:"content"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",validatorBinding:"STRING",label:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{valueBinding:e,tabindex:e,validatorBinding:e,label:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  "),t.buffer.push(b(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"customerAddressInformation.postalCode",tabindex:"6",disableBinding:"customerDataModel.disablePostalCode",label:"~locale.customer:customerInformation.postalCode~",validatorBinding:"validators.postalCodeValidator"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",disableBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,tabindex:e,disableBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  "),s=a.if.call(e,"customerAddressInformation.isPostalPanelVisible",{hash:{},hashTypes:{},hashContexts:{},inverse:C.program(12,m,t),fn:C.program(10,h,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n\r\n  "),""}function h(e,t){t.buffer.push("\r\n  ")}function m(e,t){return t.buffer.push("\r\n  \x3c!--Building Name--\x3e\r\n  "),t.buffer.push(b(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"customerAddressInformation.building",tabindex:"8",validatorBinding:"validators.buildingValidator",label:"~locale.customer:customerInformation.buildingName~"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",validatorBinding:"STRING",label:"STRING"},hashContexts:{valueBinding:e,tabindex:e,validatorBinding:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  \x3c!--Street Name--\x3e\r\n  "),t.buffer.push(b(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"customerAddressInformation.streetName",tabindex:"10",label:"~locale.customer:customerInformation.streetName~",validatorBinding:"validators.streetNameValidator"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,tabindex:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function p(e,t){var s;return t.buffer.push("\r\n  \x3c!--Province--\x3e\r\n  "),t.buffer.push(b(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"customerAddressInformation.province",optionLabelPath:"content.CanonicalValue",tabindex:"3",label:"~locale.customer:customerInformation.province~",prompt:"~locale.customer:customerInformation.provincePrompt~",optionValuePath:"content",contentBinding:"provinces",validatorBinding:"validators.provinceValidator"},hashTypes:{valueBinding:"STRING",optionLabelPath:"STRING",tabindex:"STRING",label:"STRING",prompt:"STRING",optionValuePath:"STRING",contentBinding:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,optionLabelPath:e,tabindex:e,label:e,prompt:e,optionValuePath:e,contentBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  "),t.buffer.push(b(a.view.call(e,"Komodo.Controls.Select",{hash:{valueBinding:"customerAddressInformation.suburb",optionLabelPath:"content.CanonicalValue",tabindex:"5",label:"~locale.customer:customerInformation.suburb~",prompt:"~locale.customer:customerInformation.suburbPrompt~",optionValuePath:"content",contentBinding:"suburbs",validatorBinding:"validators.suburbValidator"},hashTypes:{valueBinding:"STRING",optionLabelPath:"STRING",tabindex:"STRING",label:"STRING",prompt:"STRING",optionValuePath:"STRING",contentBinding:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,optionLabelPath:e,tabindex:e,label:e,prompt:e,optionValuePath:e,contentBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  "),s=a.if.call(e,"customerAddressInformation.isPostalPanelVisible",{hash:{},hashTypes:{},hashContexts:{},inverse:C.program(15,v,t),fn:C.program(10,h,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n\r\n  "),s=a.if.call(e,"customerAddressInformation.isPostalPanelVisible",{hash:{},hashTypes:{},hashContexts:{},inverse:C.program(19,g,t),fn:C.program(17,f,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\r\n  <br/><br/>\r\n  <div style="float:right;">\r\n\r\n    '),t.buffer.push(b(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"customerAddressInformation.isPrimary",tabindex:"11"},hashTypes:{checkedBinding:"STRING",tabindex:"STRING"},hashContexts:{checkedBinding:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" "),t.buffer.push(b(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.customer:customerInformation.IsPrimaryAddress~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n    "),s=a.view.call(e,"Komodo.Controls.Button",{hash:{tabindex:"12",action:"submitAddressInforamtion",class:"btn-success"},hashTypes:{tabindex:"STRING",action:"STRING",class:"STRING"},hashContexts:{tabindex:e,action:e,class:e},inverse:C.noop,fn:C.program(21,y,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n\r\n  </div>\r\n  "),""}function v(e,t){return t.buffer.push("\r\n  \x3c!--Unit Number--\x3e\r\n  "),t.buffer.push(b(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"7",valueBinding:"customerAddressInformation.unit",label:"~locale.customer:customerInformation.unitNumber~",validatorBinding:"validators.unitValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function f(e,t){return t.buffer.push("\r\n  \x3c!--Box\\Suite\\Private Bag--\x3e\r\n  "),t.buffer.push(b(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"7",label:"~locale.customer:customerInformation.boxOrSuiteOrPrivateBag~",valueBinding:"customerAddressInformation.boxOrSuite"},hashTypes:{tabindex:"STRING",label:"STRING",valueBinding:"STRING"},hashContexts:{tabindex:e,label:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function g(e,t){return t.buffer.push("\r\n  \x3c!--Street Number--\x3e\r\n  "),t.buffer.push(b(a.view.call(e,"Komodo.Controls.TextField",{hash:{valueBinding:"customerAddressInformation.streetNo",tabindex:"9",label:"~locale.customer:customerInformation.streetNumber~",validatorBinding:"validators.streetNoValidator"},hashTypes:{valueBinding:"STRING",tabindex:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{valueBinding:e,tabindex:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function y(e,t){var s,o;t.buffer.push(b((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.customer:customerInformation.submit",o):P.call(e,"loc","locale.customer:customerInformation.submit",o))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),o=o||{};var D,b=this.escapeExpression,C=this,P=a.helperMissing;return o.buffer.push("<div>\r\n  "),o.buffer.push(b(a.view.call(t,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.customer:customerInformation.addresses~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:t,class:t},contexts:[t],types:["ID"],data:o}))),o.buffer.push(b(a.view.call(t,"Komodo.Controls.Link",{hash:{action:"addAddressInforamtion",text:"~locale.customer:customerInformation.addLink~"},hashTypes:{action:"STRING",text:"STRING"},hashContexts:{action:t,text:t},contexts:[t],types:["ID"],data:o}))),o.buffer.push("\r\n  \x3c!--Grid--\x3e\r\n  "),o.buffer.push(b(a.view.call(t,"Komodo.Controls.DataGrid",{hash:{canSort:!0,pageSize:5,performsValidation:!0,canDelete:!1,canEdit:!1,editMode:"cell",canSelect:!0,visiblePageCount:5,selectedItemBinding:"customerDataModel.selectedGridItemaddressInformation",commandItemBinding:"customerDataModel.commandGridItemAddressInformation",contentBinding:"customerDataModel.addressInformation",columnsBinding:"addressInformationGridColumns"},hashTypes:{canSort:"BOOLEAN",pageSize:"INTEGER",performsValidation:"BOOLEAN",canDelete:"BOOLEAN",canEdit:"BOOLEAN",editMode:"STRING",canSelect:"BOOLEAN",visiblePageCount:"INTEGER",selectedItemBinding:"STRING",commandItemBinding:"STRING",contentBinding:"STRING",columnsBinding:"STRING"},hashContexts:{canSort:t,pageSize:t,performsValidation:t,canDelete:t,canEdit:t,editMode:t,canSelect:t,visiblePageCount:t,selectedItemBinding:t,commandItemBinding:t,contentBinding:t,columnsBinding:t},contexts:[t],types:["ID"],data:o}))),o.buffer.push("\r\n\r\n  "),D=a.if.call(t,"customerAddressInformation.isAddressInformationVisible",{hash:{},hashTypes:{},hashContexts:{},inverse:C.noop,fn:C.program(1,r,o),contexts:[t],types:["ID"],data:o}),(D||0===D)&&o.buffer.push(D),o.buffer.push("\r\n</div>\r\n\r\n"),""}),Ember.TEMPLATES.AssociateProductsView=Ember.Handlebars.template(function(e,t,a,s,o){function r(e,t){var s,o;return t.buffer.push('\r\n    <span class="komodo-heading">'),t.buffer.push(st((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.associateProducts:associateProducts.useCaseTitle",o):at.call(e,"loc","locale.associateProducts:associateProducts.useCaseTitle",o)))),t.buffer.push("</span>\r\n    "),""}function i(e,t){var s,o;return t.buffer.push('\r\n    <span class="komodo-heading">'),t.buffer.push(st((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.associateProducts:associateProducts.useCaseTitleExistingCustomer",o):at.call(e,"loc","locale.associateProducts:associateProducts.useCaseTitleExistingCustomer",o)))),t.buffer.push("</span>\r\n    "),""}function n(e,t){var s;return t.buffer.push("\r\n  "),s=a.unless.call(e,"associateProductsViewOnly",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(6,c,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),s=a.if.call(e,"showDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(9,l,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function c(e,t){var s,o,r;return t.buffer.push(" "),t.buffer.push(st((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.smartCardOrDeviceNo",r):at.call(e,"loc","locale.associateProducts:associateProducts.smartCardOrDeviceNo",r)))),t.buffer.push("<br/>\r\n  "),t.buffer.push(st(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{disableBinding:"disableAddButton",label:"~locale.associateProducts:associateProducts.smartCardOrDeviceNo~",tabindex:"1",valueBinding:"smartcardDecoderNo",class:"info-heading"},hashTypes:{disableBinding:"STRING",label:"STRING",tabindex:"STRING",valueBinding:"STRING",class:"STRING"},hashContexts:{disableBinding:e,label:e,tabindex:e,valueBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"searchHardware",disableBinding:"disableAddButton",class:"btn-success",tabindex:"2"},hashTypes:{action:"STRING",disableBinding:"STRING",class:"STRING",tabindex:"STRING"},hashContexts:{action:e,disableBinding:e,class:e,tabindex:e},inverse:ot.noop,fn:ot.program(7,d,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("<br />\r\n\r\n  "),t.buffer.push(st(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.smartcardDecoderNoValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n  <hr/>\r\n  <br/>\r\n  "),""}function d(e,t){var s,o;t.buffer.push(st((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.associateProducts:associateProducts.add",o):at.call(e,"loc","locale.associateProducts:associateProducts.add",o))))}function l(e,t){var s;return t.buffer.push("\r\n  "),t.buffer.push(st(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.addedDevices~",class:"sub-heading",tabindex:"3"},hashTypes:{text:"STRING",class:"STRING",tabindex:"STRING"},hashContexts:{text:e,class:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),s=a.if.call(e,"isNewCustomer",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.program(13,m,t),fn:ot.program(10,u,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function u(e,t){var s,o,r;return t.buffer.push('\r\n    <div class="table-responsive">\r\n  <table id="tableaddedDevices" class="table table-bordered komodo-datagrid" width="100%">\r\n    <tbody>\r\n      <tr>\r\n        <th width="200px">'),t.buffer.push(st((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.device",r):at.call(e,"loc","locale.associateProducts:associateProducts.device",r)))),t.buffer.push('</th>\r\n        <th width="150px">'),t.buffer.push(st((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.smartcard",r):at.call(e,"loc","locale.associateProducts:associateProducts.smartcard",r)))),t.buffer.push('</th>\r\n        <th width="100px">'),t.buffer.push(st((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.actions",r):at.call(e,"loc","locale.associateProducts:associateProducts.actions",r)))),t.buffer.push("</th>\r\n      </tr>\r\n      "),s=a.each.call(e,"decoder","in","data.selectedproductData",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(11,h,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    </tbody>\r\n  </table>\r\n        </div>\r\n  "),""}function h(e,t){var s;return t.buffer.push("\r\n      <tr>\r\n        <td>"),s=a._triageMustache.call(e,"decoder.decoderSerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("&nbsp;&nbsp;"),s=a._triageMustache.call(e,"decoder.decoderType",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\r\n        <td>"),s=a._triageMustache.call(e,"decoder.smartcardType",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("&nbsp;&nbsp;"),s=a._triageMustache.call(e,"decoder.smartcardSerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\r\n        <td>\r\n          "),t.buffer.push(st(a.view.call(e,"Komodo.Controls.Link",{hash:{text:"~locale.associateProducts:associateProducts.edit~",hrefBinding:""},hashTypes:{text:"STRING",hrefBinding:"STRING"},hashContexts:{text:e,hrefBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("&nbsp;&nbsp;"),t.buffer.push(st(a.view.call(e,"Komodo.Controls.Link",{hash:{action:"deleteDevice",target:"controller",contentBinding:"decoder",text:"~locale.associateProducts:associateProducts.delete~",hrefBinding:""},hashTypes:{action:"STRING",target:"STRING",contentBinding:"STRING",text:"STRING",hrefBinding:"STRING"},hashContexts:{action:e,target:e,contentBinding:e,text:e,hrefBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n      "),""}function m(e,t){var s,o,r;return t.buffer.push('\r\n    <div class="table-responsive">\r\n    <table id="tableaddedDevices" class="table table-bordered komodo-datagrid" width="100%">\r\n    <tbody>\r\n      <tr>\r\n        <th>'),t.buffer.push(st((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:viewingGridColumnHeaders.deviceNumber",r):at.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.deviceNumber",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(st((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:viewingGridColumnHeaders.principalPackageName",r):at.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.principalPackageName",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(st((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:viewingGridColumnHeaders.princpalStatus",r):at.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.princpalStatus",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(st((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:viewingGridColumnHeaders.addonPackageName",r):at.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.addonPackageName",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(st((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},
o?o.call(e,"locale.manageviewing:viewingGridColumnHeaders.addonStatus",r):at.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.addonStatus",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(st((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:viewingGridColumnHeaders.services",r):at.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.services",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(st((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:viewingGridColumnHeaders.servicesStatus",r):at.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.servicesStatus",r)))),t.buffer.push("</th>          \r\n          "),s=a.if.call(e,"isDisableChargePeriod",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(14,p,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          <th>"),t.buffer.push(st((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:viewingGridColumnHeaders.viewingPeriod",r):at.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.viewingPeriod",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(st((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.modifiable",r):at.call(e,"loc","locale.associateProducts:associateProducts.modifiable",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(st((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.schedule",r):at.call(e,"loc","locale.associateProducts:associateProducts.schedule",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(st((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.actions",r):at.call(e,"loc","locale.associateProducts:associateProducts.actions",r)))),t.buffer.push("</th>\r\n      </tr>\r\n      "),s=a.each.call(e,"decoder","in","data.selectedproductData",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(17,f,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    </tbody>\r\n  </table>\r\n    </div>\r\n  "),""}function p(e,t){var s;return t.buffer.push("\r\n          "),s=a.if.call(e,"isCommercialCustomer",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(15,v,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),""}function v(e,t){var s,o;return t.buffer.push("\r\n          <th>"),t.buffer.push(st((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.associateProducts:associateProducts.agreementPeriod",o):at.call(e,"loc","locale.associateProducts:associateProducts.agreementPeriod",o)))),t.buffer.push("</th>\r\n          "),""}function f(e,t){var s;return t.buffer.push("\r\n      "),s=a.if.call(e,"decoder.isPrimaryDecoder",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(18,g,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n      "),""}function g(e,t){var s;return t.buffer.push("\r\n      <tr>\r\n\r\n        "),s=a.if.call(e,"decoder.isHoliDayHome",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.program(31,I,t),fn:ot.program(19,y,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\r\n\r\n        <td align="left" width="170px">\r\n          <div>'),s=a._triageMustache.call(e,"decoder.principal",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</div>\r\n          <div>"),s=a._triageMustache.call(e,"decoder.principalFreeView",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('</div>\r\n        </td>\r\n        <td align="left" width="140px">\r\n          <div>'),s=a._triageMustache.call(e,"decoder.principalStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</div>\r\n          <div>"),s=a._triageMustache.call(e,"decoder.principalFreeViewStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</div>\r\n        </td>\r\n        "),s=a.if.call(e,"isMultipleAddonAllowed",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.program(39,O,t),fn:ot.program(36,x,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n\r\n        "),s=a.if.call(e,"isMultipleAddonAllowed",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.program(46,L,t),fn:ot.program(43,k,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n        <td>\r\n          "),s=a.if.call(e,"decoder.isInXtraView",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(49,R,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),s=a.if.call(e,"decoder.isInsurenceStatusPresent",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(51,V,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),s=a.if.call(e,"decoder.boxOffice",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(53,G,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),s=a.if.call(e,"decoder.isAccessPresent",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(55,_,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),s=a.if.call(e,"decoder.isDPPPresent",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(57,H,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n            "),s=a.if.call(e,"decoder.isInXtraView",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(59,U,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" \r\n            "),s=a.if.call(e,"decoder.secondaryInsurance",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(51,V,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),s=a.if.call(e,"decoder.secondaryDevicesboxOffice",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(53,G,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),s=a.if.call(e,"decoder.isSecondaryAccess",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(62,$,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n            "),s=a.if.call(e,"decoder.isSecondaryDPPPresent",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(64,Y,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n            "),s=a.unless.call(e,"decoder.secondaryInsurance",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(66,j,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n            "),s=a.unless.call(e,"decoder.secondaryDevicesboxOffice",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(66,j,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n            "),s=a.unless.call(e,"decoder.isSecondaryAccess",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(66,j,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n            "),s=a.unless.call(e,"decoder.isSecondaryDPPPresent",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(66,j,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n\r\n             "),s=a.if.call(e,"decoder.tertiaryInsurance",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(51,V,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),s=a.if.call(e,"decoder.tertiaryDevicesboxOffice",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(53,G,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),s=a.if.call(e,"decoder.isTertiaryAccess",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(68,q,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),s=a.if.call(e,"decoder.isTertiaryDPPPresent",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(70,X,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),s=a.if.call(e,"decoder.isInXtraView",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(72,J,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),s=a.if.call(e,"decoder.isInsurenceStatusPresent",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(74,W,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),s=a.if.call(e,"decoder.boxOffice",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(76,z,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),s=a.if.call(e,"decoder.isAccessPresent",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(78,Q,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n         "),s=a.if.call(e,"decoder.isInXtraView",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(80,Z,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),s=a.if.call(e,"decoder.secondaryInsurance",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(83,te,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),s=a.if.call(e,"decoder.secondaryDevicesboxOffice",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(85,ae,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),s=a.if.call(e,"decoder.isSecondaryAccess",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(87,se,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n            "),s=a.if.call(e,"decoder.isInXtraView",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(89,oe,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),s=a.if.call(e,"decoder.tertiaryInsurance",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(92,ie,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),s=a.if.call(e,"decoder.tertiaryDevicesboxOffice",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(94,ne,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),s=a.if.call(e,"decoder.isTertiaryAccess",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(96,ce,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n\r\n        </td>\r\n        \r\n          "),s=a.if.call(e,"isDisableChargePeriod",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(98,de,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\r\n        <td></td>\r\n        <td align="left" width="50px">'),s=a._triageMustache.call(e,"decoder.modifiable",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('</td>\r\n        <td align="left" width="50px">'),s=a._triageMustache.call(e,"decoder.schedule",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\r\n        <td>\r\n          "),s=a.if.call(e,"decoder.isExisting",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(101,ue,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n      "),""}function y(e,t){var s;return t.buffer.push('\r\n        <td align="center" width="200px">\r\n          '),s=a.if.call(e,"decoder.isHoliDayHomeSwitching",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.program(22,b,t),fn:ot.program(20,D,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n\r\n          "),s=a.if.call(e,"decoder.isInThirdXtraView",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(29,T,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n\r\n        </td>\r\n        "),""}function D(e,t){var s,o,r;return t.buffer.push("\r\n          "),s=a._triageMustache.call(e,"decoder.decoderSerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" - "),s=a._triageMustache.call(e,"decoder.smartcardSerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" "),t.buffer.push(st((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.descHHSwitched",r):at.call(e,"loc","locale.associateProducts:associateProducts.descHHSwitched",r)))),t.buffer.push("\r\n          "),""}function b(e,t){var s;return t.buffer.push("\r\n          "),s=a.if.call(e,"decoder.isInXtraView",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.program(25,P,t),fn:ot.program(23,C,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n\r\n          "),s=a.if.call(e,"decoder.isInXtraView",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(27,S,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),""}function C(e,t){var s,o,r;return t.buffer.push("\r\n          <b>"),s=a._triageMustache.call(e,"decoder.decoderSerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" - "),s=a._triageMustache.call(e,"decoder.smartcardSerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" "),t.buffer.push(st((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.descHH",r):at.call(e,"loc","locale.associateProducts:associateProducts.descHH",r)))),t.buffer.push("</b>\r\n          "),""}function P(e,t){var s,o,r;return t.buffer.push("\r\n         "),s=a._triageMustache.call(e,"decoder.decoderSerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" - "),s=a._triageMustache.call(e,"decoder.smartcardSerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" "),t.buffer.push(st((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.descHH",r):at.call(e,"loc","locale.associateProducts:associateProducts.descHH",r)))),t.buffer.push("\r\n          "),""}function S(e,t){var s;return t.buffer.push('\r\n          <br />\r\n          <br />\r\n          <img src="./Content/Images/link/l.svg">\r\n          <br />\r\n          <br />\r\n          '),s=a._triageMustache.call(e,"decoder.secondaryDevicesSerailNumbers",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),""}function T(e,t){var s;return t.buffer.push('\r\n          <br />\r\n          <br />\r\n          <img src="./Content/Images/link/l.svg">\r\n          <br />\r\n          <br />\r\n          '),s=a._triageMustache.call(e,"decoder.tertiaryDevicesSerailNumbers",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),""}function I(e,t){var s;return t.buffer.push('\r\n        <td align="center" width="200px">\r\n          '),s=a.if.call(e,"decoder.isInXtraView",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.program(34,A,t),fn:ot.program(32,w,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n\r\n          "),s=a.if.call(e,"decoder.isInXtraView",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(27,S,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          \r\n          "),s=a.if.call(e,"decoder.isInThirdXtraView",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(29,T,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n       \r\n        </td>\r\n        "),""}function w(e,t){var s;return t.buffer.push("\r\n          <b>"),s=a._triageMustache.call(e,"decoder.decoderSerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" - "),s=a._triageMustache.call(e,"decoder.smartcardSerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</b>\r\n          "),""}function A(e,t){var s;return t.buffer.push("\r\n          "),s=a._triageMustache.call(e,"decoder.decoderSerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" - "),s=a._triageMustache.call(e,"decoder.smartcardSerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),""}function x(e,t){var s;return t.buffer.push('\r\n        <td align="left" width="150px">\r\n            <table>\r\n                <tbody>\r\n                 '),s=a.each.call(e,"addon","in","decoder.addOn",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(37,N,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                </tbody>\r\n            </table>          \r\n        </td>\r\n        "),""}function N(e,t){var s;return t.buffer.push("\r\n                <tr>\r\n                <td>\r\n                    "),s=a._triageMustache.call(e,"addon.Name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                </td>\r\n                </tr>\r\n                "),""}function O(e,t){var s;return t.buffer.push('\r\n          <td align="left" width="150px">\r\n          '),s=a._triageMustache.call(e,"decoder.addOn",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),s=a.if.call(e,"decoder.isHdAddOnPresent",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(40,B,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          </td>\r\n        "),""}function B(e,t){var s;return t.buffer.push("\r\n          "),s=a.if.call(e,"decoder.isAddOnPresent",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(41,M,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),s=a._triageMustache.call(e,"decoder.hdAddOn",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),""}function M(e,t){t.buffer.push("\r\n          <br /><br />\r\n          ")}function k(e,t){var s;return t.buffer.push('\r\n        <td align="left" width="150px">\r\n            <table>\r\n                <tbody>\r\n                     '),s=a.each.call(e,"addon","in","decoder.addOn",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(44,E,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                </tbody>\r\n            </table>          \r\n        </td>\r\n        "),""}function E(e,t){var s;return t.buffer.push("\r\n                    <tr>\r\n                    <td>\r\n                        "),s=a._triageMustache.call(e,"addon.Status",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                        <br /><br /><br />\r\n                    </td>\r\n                    </tr>\r\n                    "),""}function L(e,t){var s;return t.buffer.push('\r\n        <td align="left" width="140px">\r\n          '),s=a._triageMustache.call(e,"decoder.addOnStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),s=a.if.call(e,"decoder.isHdAddOnPresent",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(47,K,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n        </td>\r\n          "),""}function K(e,t){var s;return t.buffer.push("\r\n          "),s=a.if.call(e,"decoder.isAddOnPresent",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(41,M,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),s=a._triageMustache.call(e,"decoder.hdAddOnStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),""}function R(e,t){var s,o;return t.buffer.push("\r\n          "),t.buffer.push(st((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.associateProducts:associateProducts.xtraview",o):at.call(e,"loc","locale.associateProducts:associateProducts.xtraview",o)))),t.buffer.push(" <br />\r\n          "),""}function V(e,t){var s,o;return t.buffer.push("\r\n          "),t.buffer.push(st((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.associateProducts:associateProducts.insurance",o):at.call(e,"loc","locale.associateProducts:associateProducts.insurance",o)))),t.buffer.push(" <br />\r\n          "),""}function G(e,t){var s,o;return t.buffer.push("\r\n          "),t.buffer.push(st((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.associateProducts:associateProducts.boxOffice",o):at.call(e,"loc","locale.associateProducts:associateProducts.boxOffice",o)))),t.buffer.push(" <br />\r\n          "),""}function _(e,t){var s;return t.buffer.push("\r\n          "),s=a._triageMustache.call(e,"decoder.access",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("  <br />\r\n          "),""}function H(e,t){var s;return t.buffer.push("\r\n          "),s=a._triageMustache.call(e,"decoder.DPPName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" \r\n          "),""}function U(e,t){var s;return t.buffer.push("\r\n                "),s=a.unless.call(e,"decoder.isInXtraView",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(60,F,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                "),s=a.unless.call(e,"decoder.isInsurenceStatusPresent",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(60,F,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                "),s=a.unless.call(e,"decoder.boxOffice",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(60,F,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                "),s=a.unless.call(e,"decoder.isAccessPresent",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(60,F,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                "),s=a.unless.call(e,"decoder.isDPPPresent",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(60,F,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("  \r\n            "),""}function F(e,t){t.buffer.push("\r\n                <br />\r\n                ")}function $(e,t){var s;return t.buffer.push("\r\n          "),s=a._triageMustache.call(e,"decoder.secondaryAccess",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" <br />\r\n            "),""}function Y(e,t){var s;return t.buffer.push("\r\n          "),s=a._triageMustache.call(e,"decoder.SecondaryDeviceDPPName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("  <br />\r\n          "),""}function j(e,t){t.buffer.push("\r\n            <br />\r\n            ")}function q(e,t){var s;return t.buffer.push("\r\n          "),s=a._triageMustache.call(e,"decoder.tertiaryAccess",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" <br />\r\n          "),""}function X(e,t){var s;return t.buffer.push("\r\n          "),s=a._triageMustache.call(e,"decoder.TertiaryDeviceDPPName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("  <br />\r\n          "),""}function J(e,t){var s;return t.buffer.push("\r\n          "),s=a._triageMustache.call(e,"decoder.principalStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("<br />\r\n          "),""}function W(e,t){var s;return t.buffer.push("\r\n          "),s=a._triageMustache.call(e,"decoder.insurance",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("<br />\r\n          "),""}function z(e,t){var s;return t.buffer.push("\r\n          "),s=a._triageMustache.call(e,"decoder.boxOfficeStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("<br />\r\n          "),""}function Q(e,t){var s;return t.buffer.push("\r\n          "),s=a._triageMustache.call(e,"decoder.accessServicesStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("   \r\n          "),""}function Z(e,t){var s;return t.buffer.push("\r\n           "),s=a.unless.call(e,"decoder.isInXtraView",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(66,j,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n            "),s=a.unless.call(e,"decoder.isInsurenceStatusPresent",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(66,j,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n            "),s=a.unless.call(e,"decoder.boxOffice",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(66,j,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n            "),s=a.unless.call(e,"decoder.isAccessPresent",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(66,j,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n             "),s=a.unless.call(e,"decoder.isDPPPresent",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(81,ee,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("  \r\n          "),""}function ee(e,t){t.buffer.push("\r\n             <br />\r\n             ")}function te(e,t){var s;return t.buffer.push("\r\n          "),s=a._triageMustache.call(e,"decoder.secondaryInsuranceStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("<br />\r\n          "),""}function ae(e,t){var s;return t.buffer.push("\r\n          "),s=a._triageMustache.call(e,"decoder.secondaryDevicesboxOfficeStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("<br />\r\n          "),""}function se(e,t){var s;return t.buffer.push("\r\n          "),s=a._triageMustache.call(e,"decoder.secondaryAccessStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),""}function oe(e,t){var s;return t.buffer.push("\r\n           "),s=a.unless.call(e,"decoder.secondaryInsurance",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(66,j,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n            "),s=a.unless.call(e,"decoder.secondaryDevicesboxOffice",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(66,j,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n            "),s=a.unless.call(e,"decoder.isSecondaryAccess",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(66,j,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n            "),s=a.unless.call(e,"decoder.isSecondaryDPPPresent",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(90,re,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("  \r\n            "),""}function re(e,t){t.buffer.push("\r\n             <br />\r\n            ")}function ie(e,t){var s;return t.buffer.push("\r\n          "),s=a._triageMustache.call(e,"decoder.tertiaryInsuranceStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("<br />\r\n          "),""}function ne(e,t){var s;return t.buffer.push("\r\n          "),s=a._triageMustache.call(e,"decoder.tertiaryDevicesboxOfficeStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("<br />\r\n          "),""}function ce(e,t){var s;return t.buffer.push("\r\n          "),s=a._triageMustache.call(e,"decoder.tertiaryAccessStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),""}function de(e,t){var s;return t.buffer.push("\r\n          "),s=a.if.call(e,"isCommercialCustomer",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(99,le,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),""}function le(e,t){var s;return t.buffer.push("\r\n          <td>\r\n              "),s=a._triageMustache.call(e,"decoder.agreementChargePeriod",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          </td>\r\n          "),""}function ue(e,t){return t.buffer.push("\r\n          "),t.buffer.push(st(a.view.call(e,"Komodo.Controls.Link",{hash:{action:"deleteDevice",target:"controller",contentBinding:"decoder",text:"~locale.associateProducts:associateProducts.delete~",hrefBinding:""},hashTypes:{action:"STRING",target:"STRING",contentBinding:"STRING",text:"STRING",hrefBinding:"STRING"},hashContexts:{action:e,target:e,contentBinding:e,text:e,hrefBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n\r\n          "),""}function he(e,t){
var s;return t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.associateProducts:associateProducts.linkProdCollapView~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:e,isCollapsed:e},inverse:ot.noop,fn:ot.program(104,me,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  \x3c!--End showDetails--\x3e\r\n  "),""}function me(e,t){var s;return t.buffer.push('\r\n  <table style="width:100%">\r\n      <tbody>\r\n          <tr>\r\n              <td colspan="2">\r\n                  '),t.buffer.push(st(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"17",valueBinding:"data.selectedPrimaryDecoder",prompt:"~locale.associateProducts:associateProducts.selectDecoder~",contentBinding:"summaryOfDevicesList",optionLabelPath:"content.display",optionValuePath:"content",disableBinding:"disableSelectedPrimaryDecoder"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",disableBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n              </td>\r\n          </tr>\r\n          <tr>\r\n              <td colspan="1" style="width:50%">\r\n                  '),t.buffer.push(st(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{tabindex:"48",label:"~locale.associateProducts:associateProducts.howWouldYouLikeToPay~",disableBinding:"disablePaymentOptions",contentBinding:"data.radioButtonPaymentMethod",displayPath:"title",valuePath:"value",valueBinding:"data.selectedPaymentOfMethod",visibleBinding:"showPaymentOfMethod"},hashTypes:{tabindex:"STRING",label:"STRING",disableBinding:"STRING",contentBinding:"STRING",displayPath:"STRING",valuePath:"STRING",valueBinding:"STRING",visibleBinding:"STRING"},hashContexts:{tabindex:e,label:e,disableBinding:e,contentBinding:e,displayPath:e,valuePath:e,valueBinding:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n              </td>\r\n              "),s=a.if.call(e,"showSTSPackages",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(105,pe,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          </tr>\r\n      </tbody>\r\n  </table>\r\n  <br />\r\n  \x3c!--show Packages--\x3e\r\n  "),s=a.if.call(e,"showPackages",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(107,ve,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  \x3c!--showPrimaryDecodeServices--\x3e\r\n  "),s=a.if.call(e,"showPrimaryDecodeServices",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(114,be,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  \x3c!-- Success Button End--\x3e\r\n  "),""}function pe(e,t){return t.buffer.push('\r\n              <td colspan="1" align="left" >\r\n                  '),t.buffer.push(st(a.view.call(e,"Komodo.Controls.Select",{hash:{label:"Short term subscription viewing periods",prompt:"Select Charge Period",valueBinding:"data.selectedShortTermSubscriptionId",contentBinding:"data.shortTermSubscriptionPackages",optionLabelPath:"content.value",optionValuePath:"content.key",disableBinding:"disableSTSPackages"},hashTypes:{label:"STRING",prompt:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",disableBinding:"STRING"},hashContexts:{label:e,prompt:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n              </td>\r\n              "),""}function ve(e,t){var s;return t.buffer.push('\r\n  <table width="100%">\r\n    <tbody>\r\n      <tr>\r\n        <td align="left">\r\n          '),t.buffer.push(st(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"principalPackageText",visibleBinding:"showPrimaryDecodeServices",class:"sub-heading"},hashTypes:{textBinding:"STRING",visibleBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,visibleBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n        <td align="left">\r\n          '),t.buffer.push(st(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.addOnPackage~",visibleBinding:"showAddOnProducts",class:"sub-heading"},hashTypes:{text:"STRING",visibleBinding:"STRING",class:"STRING"},hashContexts:{text:e,visibleBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n        <td align="left">\r\n          '),t.buffer.push(st(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.hdAddOnPackage~",visibleBinding:"showHdAddOnProducts",class:"sub-heading"},hashTypes:{text:"STRING",visibleBinding:"STRING",class:"STRING"},hashContexts:{text:e,visibleBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td align="left" valign="top">\r\n          '),t.buffer.push(st(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{contentBinding:"productService",displayPath:"product.details.name",valuePath:"product.details.productID",disableBinding:"disablePrincipalProducts",orientation:"vertical",valueBinding:"data.primaryProductSelection",label:""},hashTypes:{contentBinding:"STRING",displayPath:"STRING",valuePath:"STRING",disableBinding:"STRING",orientation:"STRING",valueBinding:"STRING",label:"STRING"},hashContexts:{contentBinding:e,displayPath:e,valuePath:e,disableBinding:e,orientation:e,valueBinding:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>        \r\n          "),s=a.if.call(e,"isMultipleAddonAllowed",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.program(112,De,t),fn:ot.program(108,fe,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\r\n        <td valign="top" align="left">\r\n          '),t.buffer.push(st(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{contentBinding:"productHdAddOn",displayPath:"product.details.name",valuePath:"product.details.productID",disableBinding:"disableHdAddOnProducts",orientation:"vertical",valueBinding:"data.hdAddOnProductSelection",label:""},hashTypes:{contentBinding:"STRING",displayPath:"STRING",valuePath:"STRING",disableBinding:"STRING",orientation:"STRING",valueBinding:"STRING",label:"STRING"},hashContexts:{contentBinding:e,displayPath:e,valuePath:e,disableBinding:e,orientation:e,valueBinding:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n  \x3c!--End show Packages--\x3e\r\n  "),""}function fe(e,t){var s;return t.buffer.push('   \r\n          <td valign="top" align="left">            \r\n            <table>\r\n                <tbody>  \r\n                    '),s=a.each.call(e,"item","in","productAddOn",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(109,ge,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                </tbody>\r\n            </table>      \r\n        </td>\r\n          "),""}function ge(e,t){var s;return t.buffer.push("              \r\n                    <tr>\r\n                        <td>\r\n                            "),s=a.view.call(e,"Komodo.Controls.ActionView",{hash:{action:"activateMultipleAddon",target:"controller",contextBinding:"item"},hashTypes:{action:"STRING",target:"STRING",contextBinding:"STRING"},hashContexts:{action:e,target:e,contextBinding:e},inverse:ot.noop,fn:ot.program(110,ye,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                        </td>\r\n                        <td>"),s=a._triageMustache.call(e,"item.product.details.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                        </td>\r\n                    </tr>\r\n                    "),""}function ye(e,t){t.buffer.push(st(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{dataTitleBinding:"item.product.details.name",checkedBinding:"item.isChecked",disableBinding:"item.disableMultipleAddOnProducts"},hashTypes:{dataTitleBinding:"STRING",checkedBinding:"STRING",disableBinding:"STRING"},hashContexts:{dataTitleBinding:e,checkedBinding:e,disableBinding:e},contexts:[e],types:["ID"],data:t})))}function De(e,t){return t.buffer.push('\r\n          <td valign="top" align="left">\r\n          '),t.buffer.push(st(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{contentBinding:"productAddOn",displayPath:"product.details.name",valuePath:"product.details.productID",disableBinding:"disableAddOnProducts",orientation:"vertical",valueBinding:"data.addOnProductSelection",label:""},hashTypes:{contentBinding:"STRING",displayPath:"STRING",valuePath:"STRING",disableBinding:"STRING",orientation:"STRING",valueBinding:"STRING",label:"STRING"},hashContexts:{contentBinding:e,displayPath:e,valuePath:e,disableBinding:e,orientation:e,valueBinding:e,label:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n         </td>\r\n          "),""}function be(e,t){var s;return t.buffer.push("\r\n  \x3c!--showPrimaryInsuranceproducts--\x3e\r\n  "),s=a.if.call(e,"showPrimaryInsuranceproducts",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(115,Ce,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\r\n    <div class="table-responsive">\r\n  <table width="100%">\r\n    <tbody>\r\n      <tr>\r\n        <td valign="top">\r\n          <table>\r\n            <tr>\r\n              <td>\r\n                '),t.buffer.push(st(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"data.primaryDecoder",class:"sub-heading"},hashTypes:{textBinding:"STRING",class:"STRING"},hashContexts:{textBinding:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td width="50%">\r\n                <table width="100%">\r\n                  <tbody>\r\n                    '),s=a.if.call(e,"showInsurance",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(117,Pe,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\r\n                  </tbody>\r\n                </table>\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td width="50%">\r\n                <table width="100%">\r\n                  <tbody>\r\n                    '),s=a.if.call(e,"showPrimaryAccessService",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.program(123,we,t),fn:ot.program(120,Te,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                  </tbody>\r\n                </table>\r\n              </td>           \r\n            </tr>           \r\n          </table>\r\n        </td>     \r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n        </div>\r\n  <hr/>\r\n  \x3c!--start showHideQuestionPanel--\x3e\r\n  "),s=a.if.call(e,"showHideQuestionPanel",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(127,Ne,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  \x3c!-- Questions End--\x3e\r\n  \x3c!-- Success Button Start--\x3e\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(132,Me,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  \x3c!--End showPrimaryDecodeServices--\x3e\r\n  "),""}function Ce(e,t){t.buffer.push("\r\n  <hr/>\r\n  \x3c!--End showPrimaryInsuranceproducts--\x3e\r\n  ")}function Pe(e,t){var s;return t.buffer.push("\r\n                    "),s=a.each.call(e,"primaryInsuranceproducts",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(118,Se,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                    "),""}function Se(e,t){var s;return t.buffer.push('\r\n                    <tr>\r\n                      <td width="5%">\r\n                        '),t.buffer.push(st(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{disableBinding:"checkedPrimaryInsurance",dataTitleBinding:"product.details.name",checkedBinding:"isCheckedPrimaryInsurance"},hashTypes:{disableBinding:"STRING",dataTitleBinding:"STRING",checkedBinding:"STRING"},hashContexts:{disableBinding:e,dataTitleBinding:e,checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                      </td>\r\n                      <td width="90%">\r\n                        '),s=a._triageMustache.call(e,"product.details.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                      </td>\r\n                    </tr>\r\n                    "),""}function Te(e,t){var s;return t.buffer.push("\r\n                    "),s=a.each.call(e,"primaryAccessServices",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(121,Ie,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                   \r\n                    "),""}function Ie(e,t){var s;return t.buffer.push('\r\n                    <tr>\r\n                      <td width="5%">\r\n                        '),t.buffer.push(st(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{disableBinding:"checkedPrimaryAccessService",dataTitleBinding:"product.details.name",checkedBinding:"isCheckedPrimaryAccessService"},hashTypes:{disableBinding:"STRING",dataTitleBinding:"STRING",checkedBinding:"STRING"},hashContexts:{disableBinding:e,dataTitleBinding:e,checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                      </td>\r\n                      <td width="90%">\r\n                        '),s=a._triageMustache.call(e,"product.details.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                      </td>\r\n                    </tr>\r\n                    "),""}function we(e,t){var s;return t.buffer.push("\r\n                    "),s=a.if.call(e,"showSecondaryAccessService",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(124,Ae,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                    "),""}function Ae(e,t){var s;return t.buffer.push("\r\n                    "),s=a.each.call(e,"secondaryAccessServices",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(125,xe,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                    "),""}function xe(e,t){var s;return t.buffer.push('\r\n                    <tr>\r\n                      <td width="10%">\r\n                        '),t.buffer.push(st(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{disableBinding:"checkedSecondaryAccessService",dataTitleBinding:"product.details.name",checkedBinding:"isCheckedSecondaryAccessService"},hashTypes:{disableBinding:"STRING",dataTitleBinding:"STRING",checkedBinding:"STRING"},hashContexts:{disableBinding:e,dataTitleBinding:e,checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n                      </td>\r\n                      <td width="90%">\r\n                        '),s=a._triageMustache.call(e,"product.details.name",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                      </td>\r\n                    </tr>\r\n                    "),""}function Ne(e,t){var s;return t.buffer.push('\r\n\r\n  \x3c!-- Questions Start--\x3e\r\n  <table width="100%">\r\n    \x3c!-- Questions Start - First Column Start--\x3e\r\n    <tbody>\r\n    <tr>\r\n      <td>\r\n        '),t.buffer.push(st(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{tabindex:"23",label:"~locale.associateProducts:deviceAtAnotherLocation.methodOfPayment~",displayPath:"title",valuePath:"value",contentBinding:"paymentTypesList",valueBinding:"methodOfPaymentRB",disableBinding:"disableMethodOfPayment"},hashTypes:{tabindex:"STRING",label:"STRING",displayPath:"STRING",valuePath:"STRING",contentBinding:"STRING",valueBinding:"STRING",disableBinding:"STRING"},hashContexts:{tabindex:e,label:e,displayPath:e,valuePath:e,contentBinding:e,valueBinding:e,disableBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      </td>\r\n    </tr>\r\n    <tr>\r\n      <td>\r\n        "),s=a.if.call(e,"isNewCustomer",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.program(130,Be,t),fn:ot.program(128,Oe,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n      </td>\r\n    </tr>\r\n    <tr>\r\n      <td>"),t.buffer.push(st(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{tabindex:"26",label:"~locale.associateProducts:associateProducts.haveYouMadeAPaymentYet~",disableBinding:"servicesNotSelected",contentBinding:"data.haveYouMadeAPaymentYetYesNo",displayPath:"title",valuePath:"value",valueBinding:"data.selectedPaymentMadeOption"},hashTypes:{tabindex:"STRING",label:"STRING",disableBinding:"STRING",contentBinding:"STRING",displayPath:"STRING",valuePath:"STRING",valueBinding:"STRING"},hashContexts:{tabindex:e,label:e,disableBinding:e,contentBinding:e,displayPath:e,valuePath:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n      <td>\r\n        "),t.buffer.push(st(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{tabindex:"27",label:"~locale.associateProducts:associateProducts.areYouWaitingForInstallation~",disableBinding:"disableInstallationOption",contentBinding:"data.areYouWaitingForInstallationYesNo",displayPath:"title",valuePath:"value",validatorBinding:"validators.selctedWaitingForInstallationOptionValidator",valueBinding:"data.selctedWaitingForInstallationOption"},hashTypes:{tabindex:"STRING",label:"STRING",disableBinding:"STRING",contentBinding:"STRING",displayPath:"STRING",valuePath:"STRING",validatorBinding:"STRING",valueBinding:"STRING"},hashContexts:{tabindex:e,label:e,disableBinding:e,contentBinding:e,displayPath:e,valuePath:e,validatorBinding:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      </td>\r\n    </tr>\r\n    <tr>\r\n      <td>"),t.buffer.push(st(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{tabindex:"28",valueBinding:"data.activationDate",label:"~locale.associateProducts:associateProducts.activationDate~",disableBinding:"disableActivationDate",validatorBinding:"validators.activationDateValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",disableBinding:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,disableBinding:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("</td>\r\n    </tr>\r\n    </tbody>\r\n  </table>\r\n  "),""}function Oe(e,t){return t.buffer.push("\r\n        "),t.buffer.push(st(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{tabindex:"25",label:"~locale.associateProducts:associateProducts.whereWillYouUseThisDevice~",disableBinding:"disableDeviceUsage",contentBinding:"data.radioButtonDeviceUsage",displayPath:"title",valuePath:"value",valueBinding:"data.deviceAtHomeOrOtherLocation"},hashTypes:{tabindex:"STRING",label:"STRING",disableBinding:"STRING",contentBinding:"STRING",displayPath:"STRING",valuePath:"STRING",valueBinding:"STRING"},hashContexts:{tabindex:e,label:e,disableBinding:e,contentBinding:e,displayPath:e,valuePath:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),""}function Be(e,t){return t.buffer.push("\r\n        "),t.buffer.push(st(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.whereWillYouUseThisDevice~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />"),t.buffer.push(st(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"24",disableBinding:"disableDeviceUsage",valueBinding:"tempValue",contentBinding:"hardwareAddressDetails",optionLabelPath:"content.dlAddress",optionValuePath:"content"},hashTypes:{tabindex:"STRING",disableBinding:"STRING",valueBinding:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,disableBinding:e,valueBinding:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),""}function Me(e,t){var s;return t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(133,ke,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(135,Ee,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n\r\n\r\n  "),""}function ke(e,t){t.buffer.push("\r\n  ")}function Ee(e,t){var s;return t.buffer.push('\r\n  <div style="float:right;">\r\n    '),s=a.view.call(e,"Komodo.Controls.Button",{hash:{class:"btn-success",action:"addDeviceIntoSummaryGrid",disableBinding:"disableSubmit",tabindex:"29"},hashTypes:{class:"STRING",action:"STRING",disableBinding:"STRING",tabindex:"STRING"},hashContexts:{class:e,action:e,disableBinding:e,tabindex:e},inverse:ot.noop,fn:ot.program(136,Le,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  </div>\r\n  "),""}function Le(e,t){var s,o;t.buffer.push(st((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.associateProducts:associateProducts.addButton",o):at.call(e,"loc","locale.associateProducts:associateProducts.addButton",o))))}function Ke(e,t){var s;return t.buffer.push("\r\n  \x3c!-- Activation Summary Collapsible View  Start--\x3e\r\n  "),s=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.associateProducts:associateProducts.linkSummaryCollapView~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:e,isCollapsed:e},inverse:ot.noop,fn:ot.program(139,Re,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  \x3c!-- Activation Summary Collapsible View End--\x3e\r\n\r\n  \x3c!-- Add Devices and Packages Buttons Start--\x3e\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(158,Xe,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  \x3c!-- Add Devices and Packages Buttons End--\x3e\r\n  "),""}function Re(e,t){var s,o,r;return t.buffer.push('\r\n  \x3c!--Activation Summary Column View Start --\x3e\r\n    <div class="table-responsive">\r\n  <table class="table table-bordered komodo-datagrid" width="100%">\r\n    <tbody>\r\n      <tr>\r\n        <th>'),t.buffer.push(st((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:viewingGridColumnHeaders.deviceNumber",r):at.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.deviceNumber",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(st((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:viewingGridColumnHeaders.principalPackageName",r):at.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.principalPackageName",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(st((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:viewingGridColumnHeaders.addonPackageName",r):at.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.addonPackageName",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(st((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.manageviewing:viewingGridColumnHeaders.services",r):at.call(e,"loc","locale.manageviewing:viewingGridColumnHeaders.services",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(st((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.chargePeriod",r):at.call(e,"loc","locale.associateProducts:associateProducts.chargePeriod",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(st((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.activationDate",r):at.call(e,"loc","locale.associateProducts:associateProducts.activationDate",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(st((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.actions",r):at.call(e,"loc","locale.associateProducts:associateProducts.actions",r)))),t.buffer.push("</th>\r\n      </tr>\r\n      "),s=a.each.call(e,"decoder","in","data.selectedSummaryProductData",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(140,Ve,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n\r\n    </tbody>\r\n  </table>\r\n        </div>\r\n  \x3c!--Activation Summary Column View End --\x3e\r\n  "),""}function Ve(e,t){var s;return t.buffer.push("\r\n      <tr>        \r\n        <td>\r\n          "),s=a._triageMustache.call(e,"decoder.primaryDecoderSerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" - "),s=a._triageMustache.call(e,"decoder.primaryDecoderSmartcardSerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n        </td>       \r\n        <td>\r\n          "),s=a._triageMustache.call(e,"decoder.services",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n        </td>\r\n        "),s=a.if.call(e,"isMultipleAddonAllowed",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.program(144,He,t),fn:ot.program(141,Ge,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n        <td>\r\n          "),s=a.if.call(e,"decoder.isXtraView",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(49,R,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),s=a.if.call(e,"decoder.primaryDecoderInsurance",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(51,V,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n\r\n          "),s=a.if.call(e,"decoder.primaryDecoderAccessServicePresent",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(146,Ue,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),s=a.if.call(e,"decoder.isXtraView",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(148,Fe,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),s=a.if.call(e,"decoder.secondaryDecoderInsurance",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(150,$e,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n\r\n          "),s=a.if.call(e,"decoder.secondaryDecoderAccessServicePresent",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(152,Ye,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n        </td>\r\n          <td>\r\n          "),s=a._triageMustache.call(e,"decoder.chargePeriod",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),s=a._triageMustache.call(e,"decoder.activationDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n        </td>\r\n        <td>\r\n          "),s=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"viewDecoderDetail",contentBinding:"decoder",size:"xs"},hashTypes:{action:"STRING",contentBinding:"STRING",size:"STRING"},hashContexts:{action:e,contentBinding:e,size:e},inverse:ot.noop,fn:ot.program(154,je,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n\r\n          "),s=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"gridDelete",class:"btn-danger",contentBinding:"decoder",size:"xs"},hashTypes:{action:"STRING",class:"STRING",contentBinding:"STRING",size:"STRING"},hashContexts:{action:e,class:e,contentBinding:e,size:e},inverse:ot.noop,fn:ot.program(156,qe,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n      "),""}function Ge(e,t){var s;return t.buffer.push("\r\n        <td>\r\n            <table>\r\n                <tbody>\r\n                     "),s=a.each.call(e,"addon","in","decoder.addOnDisplay",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(142,_e,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                </tbody>\r\n            </table>          \r\n        </td>\r\n        "),""}function _e(e,t){var s;return t.buffer.push("\r\n                    <tr>\r\n                    <td>\r\n                        "),s=a._triageMustache.call(e,"addon",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                    </td>\r\n                    </tr>\r\n                    "),""}function He(e,t){var s;return t.buffer.push("\r\n        <td>\r\n          "),s=a._triageMustache.call(e,"decoder.addOnDisplay",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n        </td>\r\n        "),""}function Ue(e,t){var s;return t.buffer.push("\r\n          "),s=a._triageMustache.call(e,"decoder.primaryDecoderAccessServiceName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("<br />\r\n          "),""}function Fe(e,t){t.buffer.push("\r\n          <br />\r\n          ")}function $e(e,t){var s,o;return t.buffer.push("\r\n          "),t.buffer.push(st((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.associateProducts:associateProducts.insurance",o):at.call(e,"loc","locale.associateProducts:associateProducts.insurance",o)))),t.buffer.push("<br />\r\n          "),""}function Ye(e,t){var s;return t.buffer.push("\r\n          "),s=a._triageMustache.call(e,"decoder.secondaryDecoderAccessServiceName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n          "),""}function je(e,t){var s,o;t.buffer.push(st((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.associateProducts:associateProducts.viewDetailButton",o):at.call(e,"loc","locale.associateProducts:associateProducts.viewDetailButton",o))))}function qe(e,t){var s,o;t.buffer.push(st((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},
s?s.call(e,"locale.associateProducts:associateProducts.deleteButton",o):at.call(e,"loc","locale.associateProducts:associateProducts.deleteButton",o))))}function Xe(e,t){var s;return t.buffer.push("\r\n\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(133,ke,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(159,Je,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n\r\n  "),""}function Je(e,t){var s;return t.buffer.push("\r\n  "),s=a.unless.call(e,"associateProductsViewOnly",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(160,We,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function We(e,t){var s;return t.buffer.push('\r\n  <div style="float:right;">\r\n    '),s=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"associateProducts",tabindex:"2",disabledBinding:"isDisableActiveButton"},hashTypes:{action:"STRING",tabindex:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,tabindex:e,disabledBinding:e},inverse:ot.noop,fn:ot.program(161,ze,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    "),s=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"clearall",tabindex:"2",class:"btn-inverse"},hashTypes:{action:"STRING",tabindex:"STRING",class:"STRING"},hashContexts:{action:e,tabindex:e,class:e},inverse:ot.noop,fn:ot.program(163,Qe,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  </div>\r\n  "),""}function ze(e,t){var s,o;t.buffer.push(st((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.associateProducts:associateProducts.activateButton",o):at.call(e,"loc","locale.associateProducts:associateProducts.activateButton",o))))}function Qe(e,t){var s,o;t.buffer.push(st((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.associateProducts:associateProducts.clearAll",o):at.call(e,"loc","locale.associateProducts:associateProducts.clearAll",o))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),o=o||{};var Ze,et,tt,at=a.helperMissing,st=this.escapeExpression,ot=this;return o.buffer.push("<div "),o.buffer.push(st(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:o}))),o.buffer.push('>\r\n\r\n  <div width="90%">\r\n    '),Ze=a.if.call(t,"isNewCustomer",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.program(3,i,o),fn:ot.program(1,r,o),contexts:[t],types:["ID"],data:o}),(Ze||0===Ze)&&o.buffer.push(Ze),o.buffer.push('\r\n    <span class="float-right">\r\n      <b>\r\n        <a href="#/home">&lt;'),o.buffer.push(st((et=a.loc||t&&t.loc,tt={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:o},et?et.call(t,"locale.associateProducts:associateProducts.back",tt):at.call(t,"loc","locale.associateProducts:associateProducts.back",tt)))),o.buffer.push("</a>\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n  "),Ze=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.associateProducts:associateProducts.addDevicesCollapView~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:ot.noop,fn:ot.program(5,n,o),contexts:[t],types:["ID"],data:o}),(Ze||0===Ze)&&o.buffer.push(Ze),o.buffer.push("\r\n\r\n  \x3c!--hide the active packages--\x3e\r\n  \x3c!--showDetails--\x3e\r\n  "),Ze=a.if.call(t,"showDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(103,he,o),contexts:[t],types:["ID"],data:o}),(Ze||0===Ze)&&o.buffer.push(Ze),o.buffer.push("\r\n  \x3c!-- Activation Summary --\x3e\r\n  "),Ze=a.if.call(t,"showDetails",{hash:{},hashTypes:{},hashContexts:{},inverse:ot.noop,fn:ot.program(138,Ke,o),contexts:[t],types:["ID"],data:o}),(Ze||0===Ze)&&o.buffer.push(Ze),o.buffer.push("\r\n</div>\r\n"),""}),Ember.TEMPLATES.CommercialActivationSummaryView=Ember.Handlebars.template(function(e,t,a,s,o){function r(e,t){var s,o,r;return t.buffer.push("\r\n  \x3c!--Activation Summary Start--\x3e\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(2,i,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:addDevicesAndPackages.device~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n  <table id="packageGrid" class="table table-bordered komodo-datagrid">\r\n\t<tr>\r\n\t\t<th>'),t.buffer.push(g((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.commercialcustomer:addDevicesAndPackages.deviceNumber",r):D.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.deviceNumber",r)))),t.buffer.push("</th>\r\n\t\t<th>"),t.buffer.push(g((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.commercialcustomer:addDevicesAndPackages.smartcardNumber",r):D.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.smartcardNumber",r)))),t.buffer.push("</th>\r\n        "),s=a.if.call(e,"viewModel.showInsurance",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(7,d,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n        <th>"),t.buffer.push(g((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.commercialcustomer:addDevicesAndPackages.principalPackage",r):D.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.principalPackage",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(g((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.commercialcustomer:addDevicesAndPackages.addOnChannels",r):D.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.addOnChannels",r)))),t.buffer.push("</th>\r\n\t</tr>\r\n\t"),s=a.each.call(e,"item","in","viewModel.selectedproductData",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(9,l,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  </table>\r\n  "),""}function i(e,t){var s;return t.buffer.push("\r\n  \x3c!--Column 1--\x3e\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:y.noop,fn:y.program(3,n,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  \x3c!--Column 2--\x3e\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:y.noop,fn:y.program(5,c,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function n(e,t){return t.buffer.push("\r\n  \x3c!--Row 1--\x3e\r\n  "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:customerprofile.establishmentName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewModel.establishmentName",id:"establishmentName"},hashTypes:{textBinding:"STRING",id:"STRING"},hashContexts:{textBinding:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  \x3c!--Row 2--\x3e\r\n  "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:customerprofile.numberViewingPoints~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewModel.viewingPoints",id:"viewingPoints"},hashTypes:{textBinding:"STRING",id:"STRING"},hashContexts:{textBinding:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function c(e,t){return t.buffer.push("\r\n  \x3c!--Row 1--\x3e\r\n  "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:viewingInformation.viewingLocation~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewModel.viewingLocation",id:"viewingLocation"},hashTypes:{textBinding:"STRING",id:"STRING"},hashContexts:{textBinding:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  \x3c!--Row 2--\x3e\r\n  "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:addDevicesAndPackages.installationType~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewModel.installationType",id:"installationType"},hashTypes:{textBinding:"STRING",id:"STRING"},hashContexts:{textBinding:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function d(e,t){var s,o;return t.buffer.push("\r\n        <th>"),t.buffer.push(g((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.insurance",o):D.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.insurance",o)))),t.buffer.push("</th>\r\n        "),""}function l(e,t){var s;return t.buffer.push("\r\n\t<tr>\r\n\t\t<td>"),s=a._triageMustache.call(e,"item.deviceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\r\n\t\t<td>"),s=a._triageMustache.call(e,"item.smartCardNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\r\n        "),s=a.if.call(e,"viewModel.showInsurance",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(10,u,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n        <td>\r\n          <div>"),s=a._triageMustache.call(e,"item.prinPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</div>\r\n        </td>\r\n        <td>\r\n          <div>"),s=a._triageMustache.call(e,"item.addOnPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</div>\r\n        </td>\r\n\t</tr>\r\n\t"),""}function u(e,t){var s;return t.buffer.push("\r\n        <td>"),s=a._triageMustache.call(e,"item.insuranceServicesStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\r\n        "),""}function h(e,t){var s,o;t.buffer.push(g((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:activationSummary.anotherButton",o):D.call(e,"loc","locale.commercialcustomer:activationSummary.anotherButton",o))))}function m(e,t){var s,o;t.buffer.push(g((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:activationSummary.completeButton",o):D.call(e,"loc","locale.commercialcustomer:activationSummary.completeButton",o))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),o=o||{};var p,v,f,g=this.escapeExpression,y=this,D=a.helperMissing;return o.buffer.push("<div "),o.buffer.push(g(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:o}))),o.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),o.buffer.push(g((v=a.loc||t&&t.loc,f={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:o},v?v.call(t,"locale.commercialcustomer:activationSummary.useCaseTitle",f):D.call(t,"loc","locale.commercialcustomer:activationSummary.useCaseTitle",f)))),o.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        '),o.buffer.push(g(a.view.call(t,"Komodo.Controls.Link",{hash:{tabindex:"33",text:"~locale.commercialcustomer:customer.back~",href:"#/commercialManageViewing"},hashTypes:{tabindex:"STRING",text:"STRING",href:"STRING"},hashContexts:{tabindex:t,text:t,href:t},contexts:[t],types:["ID"],data:o}))),o.buffer.push("\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n  "),p=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.commercialcustomer:activationSummary.activationSummaryView~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:y.noop,fn:y.program(1,r,o),contexts:[t],types:["ID"],data:o}),(p||0===p)&&o.buffer.push(p),o.buffer.push('\r\n  \x3c!--Activation Summary End--\x3e\r\n  <br/>\r\n  <div style="float:right;">\r\n    '),p=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"activateAnother",tabindex:"31",visibleBinding:"isButtonVisible"},hashTypes:{action:"STRING",tabindex:"STRING",visibleBinding:"STRING"},hashContexts:{action:t,tabindex:t,visibleBinding:t},inverse:y.noop,fn:y.program(12,h,o),contexts:[t],types:["ID"],data:o}),(p||0===p)&&o.buffer.push(p),o.buffer.push("\r\n    "),p=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"complete",tabindex:"32"},hashTypes:{action:"STRING",tabindex:"STRING"},hashContexts:{action:t,tabindex:t},inverse:y.noop,fn:y.program(14,m,o),contexts:[t],types:["ID"],data:o}),(p||0===p)&&o.buffer.push(p),o.buffer.push("\r\n  </div>\r\n  <br/>\r\n</div>"),""}),Ember.TEMPLATES.CommercialAddProductsView=Ember.Handlebars.template(function(e,t,a,s,o){function r(e,t){var s;return t.buffer.push("\r\n    "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:E.noop,fn:E.program(2,i,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function i(e,t){var s;return t.buffer.push("\r\n        \x3c!--Column 1--\x3e\r\n        "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top full-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:E.noop,fn:E.program(3,n,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    "),""}function n(e,t){var s;return t.buffer.push("\r\n            "),s=a.each.call(e,"package","in","productServices",{hash:{},hashTypes:{},hashContexts:{},inverse:E.noop,fn:E.program(4,c,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n        "),""}function c(e,t){return t.buffer.push("\r\n                "),t.buffer.push(k(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"package.isSelected",tabindex:"1",disabledBinding:"package.isDisabled"},hashTypes:{checkedBinding:"STRING",tabindex:"STRING",disabledBinding:"STRING"},hashContexts:{checkedBinding:e,tabindex:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(k(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"package.product.details.name"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br/>\r\n            "),""}function d(e,t){var s;return t.buffer.push("\r\n     "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:E.noop,fn:E.program(7,l,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function l(e,t){var s;return t.buffer.push("\r\n        \x3c!--Column 1--\x3e\r\n        "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top full-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:E.noop,fn:E.program(8,u,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    "),""}function u(e,t){return t.buffer.push("\r\n            "),t.buffer.push(k(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"viewModel.insurance",tabindex:"8",visibleBinding:"viewModel.showInsurance",disabledBinding:"viewModel.insuranceDisabled"},hashTypes:{checkedBinding:"STRING",tabindex:"STRING",visibleBinding:"STRING",disabledBinding:"STRING"},hashContexts:{checkedBinding:e,tabindex:e,visibleBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(k(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:addDevicesAndPackages.insurance~",visibleBinding:"viewModel.showInsurance"},hashTypes:{text:"STRING",visibleBinding:"STRING"},hashContexts:{text:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),""}function h(e,t){var s;return t.buffer.push("\r\n  "),s=a.each.call(e,"item","in","listOfAddOnServices",{hash:{},hashTypes:{},hashContexts:{},inverse:E.noop,fn:E.program(11,m,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function m(e,t){var s;return t.buffer.push("\r\n    "),s=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{titleBinding:"item.panelTitle",isCollapsed:!1},hashTypes:{titleBinding:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{titleBinding:e,isCollapsed:e},inverse:E.noop,fn:E.program(12,p,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function p(e,t){var s;return t.buffer.push("\r\n        "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:E.noop,fn:E.program(13,v,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    "),""}function v(e,t){var s;return t.buffer.push("\r\n        \x3c!--Column 1--\x3e\r\n            "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:E.noop,fn:E.program(14,f,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n        \x3c!--Column 2--\x3e\r\n            "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:E.noop,fn:E.program(17,y,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n        "),""}function f(e,t){var s;return t.buffer.push("\r\n                "),s=a.each.call(e,"addOn","in","item.firstColumnProducts",{hash:{},hashTypes:{},hashContexts:{},inverse:E.noop,fn:E.program(15,g,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n            "),""}function g(e,t){return t.buffer.push("\r\n                    "),t.buffer.push(k(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"addOn.isSelected",tabindex:"2",disabledBinding:"addOn.isDisabled"},hashTypes:{checkedBinding:"STRING",tabindex:"STRING",disabledBinding:"STRING"},hashContexts:{checkedBinding:e,tabindex:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(k(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"addOn.name"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br/>\r\n                "),""}function y(e,t){var s;return t.buffer.push("\r\n                "),s=a.each.call(e,"addOn","in","item.secondColumnProducts",{hash:{},hashTypes:{},hashContexts:{},inverse:E.noop,fn:E.program(18,D,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n            "),""}function D(e,t){return t.buffer.push("\r\n                    "),t.buffer.push(k(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"addOn.isSelected",tabindex:"3",disabledBinding:"addOn.isDisabled"},hashTypes:{checkedBinding:"STRING",tabindex:"STRING",disabledBinding:"STRING"},hashContexts:{checkedBinding:e,tabindex:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(k(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"addOn.name"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br/>\r\n                "),""}function b(e,t){var s;return t.buffer.push("\r\n     "),s=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.commercialcustomer:addDevicesAndPackages.selectAddOns~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:e,isCollapsed:e},inverse:E.noop,fn:E.program(21,C,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n   "),""}function C(e,t){var s;return t.buffer.push("\r\n         "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:E.noop,fn:E.program(22,P,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("  \r\n     "),""}function P(e,t){return t.buffer.push("\r\n            "),t.buffer.push(k(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:addDevicesAndPackages.messageNoAddOns~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n         "),""}function S(e,t){var s;return t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:E.noop,fn:E.program(25,T,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function T(e,t){var s;return t.buffer.push("\r\n  "),s=a.if.call(e,"isOffersAvailable",{hash:{},hashTypes:{},hashContexts:{},inverse:E.program(29,A,t),fn:E.program(26,I,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function I(e,t){var s;return t.buffer.push("\r\n  "),s=a.each.call(e,"row","in","viewModel.availableOfferDefinitions",{hash:{},hashTypes:{},hashContexts:{},inverse:E.noop,fn:E.program(27,w,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function w(e,t){return t.buffer.push("\r\n  <ul>\r\n    <li>\r\n      "),t.buffer.push(k(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"row.description"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(k(a.view.call(e,"Komodo.CustomRadioButton",{hash:{tabindex:"4",name:"radioProductOfferDefinition",valueBinding:"row.UID",checkedBinding:"row.isSelected",disabledBinding:"row.isDisabled"},hashTypes:{tabindex:"STRING",name:"STRING",valueBinding:"STRING",checkedBinding:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:e,name:e,valueBinding:e,checkedBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" "),t.buffer.push(k(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"row.product"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    </li>\r\n  </ul>\r\n  "),""}function A(e,t){return t.buffer.push("\r\n  "),t.buffer.push(k(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:addDevicesAndPackages.messageNoOffers~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function x(e,t){var s,o;t.buffer.push(k((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.activateButton",o):L.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.activateButton",o))))}function N(e,t){var s,o;t.buffer.push(k((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.cancelButton",o):L.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.cancelButton",o))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),o=o||{};var O,B,M,k=this.escapeExpression,E=this,L=a.helperMissing;return o.buffer.push("<div "),o.buffer.push(k(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:o}))),o.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),o.buffer.push(k((B=a.loc||t&&t.loc,M={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:o},B?B.call(t,"locale.commercialcustomer:addDevicesAndPackages.useCaseTitle",M):L.call(t,"loc","locale.commercialcustomer:addDevicesAndPackages.useCaseTitle",M)))),o.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        '),o.buffer.push(k(a.view.call(t,"Komodo.Controls.Link",{hash:{tabindex:"34",text:"~locale.commercialcustomer:customer.back~",href:"#/commercialManageViewing"},hashTypes:{tabindex:"STRING",text:"STRING",href:"STRING"},hashContexts:{tabindex:t,text:t,href:t},contexts:[t],types:["ID"],data:o}))),o.buffer.push("\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n  \x3c!--Add Package Information--\x3e\r\n  "),O=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.commercialcustomer:addDevicesAndPackages.selectPrincipalPackage~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:E.noop,fn:E.program(1,r,o),contexts:[t],types:["ID"],data:o}),(O||0===O)&&o.buffer.push(O),o.buffer.push("\r\n  \x3c!--Add Package Information End--\x3e\r\n\r\n  \x3c!--Add Insurance Information--\x3e\r\n  "),O=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.commercialcustomer:addDevicesAndPackages.selectInsurancePackage~",isCollapsed:!1,visibleBinding:"viewModel.showInsurance"},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN",visibleBinding:"STRING"},hashContexts:{title:t,isCollapsed:t,visibleBinding:t},inverse:E.noop,fn:E.program(6,d,o),contexts:[t],types:["ID"],data:o}),(O||0===O)&&o.buffer.push(O),o.buffer.push("\r\n  \x3c!--Add Insurance Information End--\x3e\r\n\r\n  \x3c!--Add AddOns Information--\x3e\r\n  "),O=a.if.call(t,"showAddOnView",{hash:{},hashTypes:{},hashContexts:{},inverse:E.program(20,b,o),fn:E.program(10,h,o),contexts:[t],types:["ID"],data:o}),(O||0===O)&&o.buffer.push(O),o.buffer.push("\r\n  \x3c!--Add AddOns Information End--\x3e\r\n\r\n  \x3c!--Add Offers Information--\x3e\r\n  "),O=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.commercialcustomer:addDevicesAndPackages.offers~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:E.noop,fn:E.program(24,S,o),contexts:[t],types:["ID"],data:o}),(O||0===O)&&o.buffer.push(O),o.buffer.push('\r\n  \x3c!--Add Offers Information End--\x3e\r\n  <br/>\r\n  <div style="float:right;">\r\n    '),O=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"activateProducts",tabindex:"32",disabledBinding:"isButtonDisable"},hashTypes:{action:"STRING",tabindex:"STRING",disabledBinding:"STRING"},hashContexts:{action:t,tabindex:t,disabledBinding:t},inverse:E.noop,fn:E.program(31,x,o),contexts:[t],types:["ID"],data:o}),(O||0===O)&&o.buffer.push(O),o.buffer.push("\r\n    "),O=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"cancel",tabindex:"33",type:"inverse",disabledBinding:"isButtonDisable"},hashTypes:{action:"STRING",tabindex:"STRING",type:"STRING",disabledBinding:"STRING"},hashContexts:{action:t,tabindex:t,type:t,disabledBinding:t},inverse:E.noop,fn:E.program(33,N,o),contexts:[t],types:["ID"],data:o}),(O||0===O)&&o.buffer.push(O),o.buffer.push("\r\n  </div>\r\n  <br/>\r\n</div>"),""}),Ember.TEMPLATES.CommercialAssociateProductsView=Ember.Handlebars.template(function(e,t,a,s,o){function r(e,t){var s;return t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.associateProducts:associateProducts.addDevicesCollapView~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:e,isCollapsed:e},inverse:se.noop,fn:se.program(2,i,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function i(e,t){var s;return t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(3,n,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),s=a.if.call(e,"showAddSmartcardView",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(8,l,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function n(e,t){var s;return t.buffer.push("\r\n  \x3c!--Column 1--\x3e\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:se.noop,fn:se.program(4,c,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  \x3c!--Column 2--\x3e\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:se.noop,fn:se.program(6,d,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function c(e,t){return t.buffer.push("\r\n    "),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"1",valueBinding:"viewModel.paymentGroup",label:"~locale.commercialcustomer:paymentGroup.paymentGroup~",validatorBinding:"validators.paymentGroupValidator",prompt:"~locale.commercialcustomer:paymentGroup.paymentGroupPrompt~",contentBinding:"viewModel.accounts",optionLabelPath:"content.Name",optionValuePath:"content"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"4",valueBinding:"viewModel.viewingLocation",label:"~locale.commercialcustomer:viewingInformation.viewingLocation~",validatorBinding:"validators.viewingLocationValidator",prompt:"~locale.commercialcustomer:viewingInformation.viewingLocationPrompt~",contentBinding:"viewModel.viewingLocations",optionLabelPath:"content.CanonicalValue",optionValuePath:"content"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},
hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function d(e,t){return t.buffer.push("\r\n    "),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:customerprofile.establishmentName~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br/>\r\n    "),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{tabindex:"2",valueBinding:"viewModel.establishmentName",visibleBinding:"viewModel.showEstablishmentTextBox"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",visibleBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreSelect",{hash:{tabindex:"2",valueBinding:"viewModel.selectedEstablishmentName",prompt:"~locale.commercialcustomer:viewingInformation.establishmentPrompt~",contentBinding:"viewModel.establishments",optionLabelPath:"content",optionValuePath:"content",visibleBinding:"viewModel.showEstablishmentDropdownBox"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING",visibleBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    &nbsp;&nbsp;"),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"viewModel.addNewEstablishment",tabindex:"3"},hashTypes:{checkedBinding:"STRING",tabindex:"STRING"},hashContexts:{checkedBinding:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" "),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:addDevicesAndPackages.addButton~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br/>\r\n    "),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.establishmentNameValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"5",valueBinding:"viewModel.viewingPoints",label:"~locale.commercialcustomer:customerprofile.numberViewingPoints~",validatorBinding:"validators.viewingPointsValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function l(e,t){var s;return t.buffer.push("\r\n  <hr/>\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(9,u,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(12,m,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  <br/>\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(18,g,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function u(e,t){var s;return t.buffer.push("\r\n  \x3c!--Column 1--\x3e\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top full-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:se.noop,fn:se.program(10,h,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function h(e,t){return t.buffer.push("\r\n  "),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{tabindex:"6",valueBinding:"viewModel.installationType",contentBinding:"installationTypes",label:"~locale.commercialcustomer:addDevicesAndPackages.installationType~",displayPath:"title",valuePath:"value"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",contentBinding:"STRING",label:"STRING",displayPath:"STRING",valuePath:"STRING"},hashContexts:{tabindex:e,valueBinding:e,contentBinding:e,label:e,displayPath:e,valuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  \x3c!--"),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.installationTypeValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>--\x3e\r\n  "),""}function m(e,t){var s;return t.buffer.push("\r\n  \x3c!--Column 1--\x3e\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:se.noop,fn:se.program(13,p,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  \x3c!--Column 2--\x3e\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:se.noop,fn:se.program(16,f,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function p(e,t){var s;return t.buffer.push("\r\n    "),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:addDevicesAndPackages.smartcardDeviceNumber~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br/>\r\n    "),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{tabindex:"7",valueBinding:"smartcardDeviceNumber"},hashTypes:{tabindex:"STRING",valueBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),s=a.view.call(e,"Komodo.Controls.Button",{hash:{tabindex:"8",action:"addDevice",size:"nextto-control",type:"success"},hashTypes:{tabindex:"STRING",action:"STRING",size:"STRING",type:"STRING"},hashContexts:{tabindex:e,action:e,size:e,type:e},inverse:se.noop,fn:se.program(14,v,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    <br/>\r\n    "),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.smartcardDeviceNumberValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function v(e,t){var s,o;return t.buffer.push(" "),t.buffer.push(ae((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.addButton",o):oe.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.addButton",o)))),t.buffer.push(" "),""}function f(e,t){return t.buffer.push("\r\n  "),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:addDevicesAndPackages.uploadMultiple~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.FileReader",{hash:{action:"readTextFile"},hashTypes:{action:"STRING"},hashContexts:{action:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function g(e,t){var s;return t.buffer.push("\r\n  \x3c!--Column 1--\x3e\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:se.noop,fn:se.program(19,y,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function y(e,t){var s,o,r;return t.buffer.push("\r\n  "),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"viewModel.insurance",tabindex:"9",visibleBinding:"viewModel.showInsurance"},hashTypes:{checkedBinding:"STRING",tabindex:"STRING",visibleBinding:"STRING"},hashContexts:{checkedBinding:e,tabindex:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:addDevicesAndPackages.insurance~",visibleBinding:"viewModel.showInsurance"},hashTypes:{text:"STRING",visibleBinding:"STRING"},hashContexts:{text:e,visibleBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:addDevicesAndPackages.deviceAdded~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n  <div class="table-responsive">\r\n    <table id="tableaddedDevices" class="table table-bordered komodo-datagrid">\r\n      <tr>\r\n        <th>'),t.buffer.push(ae((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.commercialcustomer:addDevicesAndPackages.device",r):oe.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.device",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(ae((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.commercialcustomer:addDevicesAndPackages.smartcard",r):oe.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.smartcard",r)))),t.buffer.push("</th>\r\n        "),s=a.if.call(e,"viewModel.showInsurance",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(20,D,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n        <th>"),t.buffer.push(ae((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.commercialcustomer:addDevicesAndPackages.actions",r):oe.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.actions",r)))),t.buffer.push("</th>\r\n      </tr>\r\n      "),s=a.each.call(e,"decoder","in","viewModel.selectedproductData",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(22,b,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    </table>\r\n  </div>\r\n  "),s=a.if.call(e,"showExistingDeviceView",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(25,P,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function D(e,t){return t.buffer.push('\r\n        <th style="text-align:center;vertical-align:middle;">\r\n          '),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:addDevicesAndPackages.insurance~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"viewModel.allInsured"},hashTypes:{checkedBinding:"STRING"},hashContexts:{checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </th>\r\n        "),""}function b(e,t){var s;return t.buffer.push("\r\n      <tr>\r\n        <td>"),s=a._triageMustache.call(e,"decoder.decoderSerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("&nbsp;&nbsp;"),s=a._triageMustache.call(e,"decoder.decoderType",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\r\n        <td>"),s=a._triageMustache.call(e,"decoder.smartcardType",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("&nbsp;&nbsp;"),s=a._triageMustache.call(e,"decoder.smartcardSerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\r\n        "),s=a.if.call(e,"viewModel.showInsurance",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(23,C,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n        <td>\r\n          \x3c!--"),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.Link",{hash:{text:"~locale.commercialcustomer:addDevicesAndPackages.edit~",hrefBinding:"",tabindex:"11"},hashTypes:{text:"STRING",hrefBinding:"STRING",tabindex:"STRING"},hashContexts:{text:e,hrefBinding:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("&nbsp;-&nbsp;--\x3e\r\n          "),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.Link",{hash:{action:"deleteDevice",target:"controller",contentBinding:"decoder",text:"~locale.commercialcustomer:addDevicesAndPackages.delete~",hrefBinding:"",tabindex:"12"},hashTypes:{action:"STRING",target:"STRING",contentBinding:"STRING",text:"STRING",hrefBinding:"STRING",tabindex:"STRING"},hashContexts:{action:e,target:e,contentBinding:e,text:e,hrefBinding:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n      "),""}function C(e,t){return t.buffer.push('\r\n        <td style="text-align:center;vertical-align:middle;">\r\n          '),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"decoder.insurance"},hashTypes:{checkedBinding:"STRING"},hashContexts:{checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n        "),""}function P(e,t){var s,o,r;return t.buffer.push("\r\n  <br />\r\n  "),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:addDevicesAndPackages.existingDevices~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n  <div class="table-responsive">\r\n    <table id="tableExistingDevices" class="table table-bordered komodo-datagrid">\r\n      <tr>\r\n        <th>'),t.buffer.push(ae((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.commercialcustomer:addDevicesAndPackages.device",r):oe.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.device",r)))),t.buffer.push("</th>\r\n        <th>"),t.buffer.push(ae((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.commercialcustomer:addDevicesAndPackages.smartcard",r):oe.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.smartcard",r)))),t.buffer.push("</th>\r\n        "),s=a.if.call(e,"viewModel.showInsurance",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(26,S,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\r\n        <th style="text-align:center;vertical-align:middle;">'),t.buffer.push(ae((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.commercialcustomer:addDevicesAndPackages.select",r):oe.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.select",r)))),t.buffer.push("</th>\r\n      </tr>\r\n      "),s=a.each.call(e,"vdecoder","in","virtualProductDataPageContent",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(28,T,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    </table>\r\n    "),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.Pager",{hash:{mode:"content",contentBinding:"viewModel.existingProductData",pageContentBinding:"virtualProductDataPageContent",itemsPerPage:"10"},hashTypes:{mode:"STRING",contentBinding:"STRING",pageContentBinding:"STRING",itemsPerPage:"STRING"},hashContexts:{mode:e,contentBinding:e,pageContentBinding:e,itemsPerPage:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  </div>\r\n  "),""}function S(e,t){return t.buffer.push('\r\n        <th style="text-align:center;vertical-align:middle;">\r\n          '),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:addDevicesAndPackages.insurance~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </th>\r\n        "),""}function T(e,t){var s;return t.buffer.push("\r\n      <tr>\r\n        <td>"),s=a._triageMustache.call(e,"vdecoder.decoderSerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("&nbsp;&nbsp;"),s=a._triageMustache.call(e,"vdecoder.decoderType",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\r\n        <td>"),s=a._triageMustache.call(e,"vdecoder.smartcardType",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("&nbsp;&nbsp;"),s=a._triageMustache.call(e,"vdecoder.smartcardSerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\r\n        "),s=a.if.call(e,"viewModel.showInsurance",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(29,I,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push('\r\n        <td style="text-align:center;vertical-align:middle;">\r\n          '),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"vdecoder.selected"},hashTypes:{checkedBinding:"STRING"},hashContexts:{checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n      "),""}function I(e,t){return t.buffer.push('\r\n        <td style="text-align:center;vertical-align:middle;">\r\n          '),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"vdecoder.insurance",disabled:!0},hashTypes:{checkedBinding:"STRING",disabled:"BOOLEAN"},hashContexts:{checkedBinding:e,disabled:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n        "),""}function w(e,t){var s;return t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.commercialcustomer:addDevicesAndPackages.addPackagesCollapView~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:e,isCollapsed:e},inverse:se.noop,fn:se.program(32,A,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function A(e,t){var s;return t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(33,x,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function x(e,t){var s;return t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top full-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:se.noop,fn:se.program(34,N,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function N(e,t){var s;return t.buffer.push("\r\n  "),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.principalPackage~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br /><br />\r\n  "),s=a.each.call(e,"row","in","principalServices",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(35,O,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  <br />\r\n  <hr/>\r\n  "),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{tabindex:"14",valueBinding:"viewModel.activationDate",label:"~locale.associateProducts:associateProducts.activationDate~",validatorBinding:"validators.activationDateValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function O(e,t){return t.buffer.push("\r\n  "),t.buffer.push(ae(a.view.call(e,"Komodo.CustomRadioButton",{hash:{tabindex:"13",name:"radioPrincipalProduct",valueBinding:"row.UID",checkedBinding:"row.isSelected",disabledBinding:"row.isDisabled"},hashTypes:{tabindex:"STRING",name:"STRING",valueBinding:"STRING",checkedBinding:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:e,name:e,valueBinding:e,checkedBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" "),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"row.product"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br />\r\n  "),""}function B(e,t){var s;return t.buffer.push("\r\n    "),s=a.each.call(e,"item","in","listOfAddOnServices",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(38,M,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function M(e,t){var s;return t.buffer.push("\r\n        "),s=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{titleBinding:"item.panelTitle",isCollapsed:!1},hashTypes:{titleBinding:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{titleBinding:e,isCollapsed:e},inverse:se.noop,fn:se.program(39,k,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    "),""}function k(e,t){var s;return t.buffer.push("\r\n            "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(40,E,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n        "),""}function E(e,t){var s;return t.buffer.push("\r\n            \x3c!--Column 1--\x3e\r\n                "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:se.noop,fn:se.program(41,L,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n            \x3c!--Column 2--\x3e\r\n                "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:se.noop,fn:se.program(44,R,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n            "),""}function L(e,t){var s;return t.buffer.push("\r\n                    "),s=a.each.call(e,"addOn","in","item.firstColumnProducts",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(42,K,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                "),""}function K(e,t){return t.buffer.push("\r\n                        "),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"addOn.isSelected",tabindex:"15"},hashTypes:{checkedBinding:"STRING",tabindex:"STRING"},hashContexts:{checkedBinding:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"addOn.name"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br/>\r\n                    "),""}function R(e,t){var s;return t.buffer.push("\r\n                    "),s=a.each.call(e,"addOn","in","item.secondColumnProducts",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(45,V,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                "),""}function V(e,t){return t.buffer.push("\r\n                        "),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"addOn.isSelected",tabindex:"16"},hashTypes:{checkedBinding:"STRING",tabindex:"STRING"},hashContexts:{checkedBinding:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"addOn.name"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br/>\r\n                    "),""}function G(e,t){var s;return t.buffer.push("\r\n     "),s=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.commercialcustomer:addDevicesAndPackages.selectAddOns~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:e,isCollapsed:e},inverse:se.noop,fn:se.program(48,_,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function _(e,t){var s;return t.buffer.push("\r\n        "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(49,H,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n     "),""}function H(e,t){return t.buffer.push("\r\n            "),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:addDevicesAndPackages.messageNoAddOns~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n         "),""}function U(e,t){var s;return t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.commercialcustomer:addDevicesAndPackages.offers~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:e,isCollapsed:e},inverse:se.noop,fn:se.program(52,F,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function F(e,t){var s;return t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(53,$,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function $(e,t){var s;return t.buffer.push("\r\n  "),s=a.if.call(e,"isOffersAvailable",{hash:{},hashTypes:{},hashContexts:{},inverse:se.program(57,q,t),fn:se.program(54,Y,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function Y(e,t){var s;return t.buffer.push("\r\n  "),s=a.each.call(e,"row","in","viewModel.availableOfferDefinitions",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(55,j,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function j(e,t){return t.buffer.push("\r\n  <ul>\r\n    <li>\r\n      "),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"row.description"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n      <br/>\r\n      "),t.buffer.push(ae(a.view.call(e,"Komodo.CustomRadioButton",{hash:{tabindex:"17",name:"radioProductOfferDefinition",valueBinding:"row.UID",checkedBinding:"row.isSelected"},hashTypes:{tabindex:"STRING",name:"STRING",valueBinding:"STRING",checkedBinding:"STRING"},hashContexts:{tabindex:e,name:e,valueBinding:e,checkedBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(" "),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"row.product"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    </li>\r\n  </ul>\r\n  "),""}function q(e,t){return t.buffer.push("\r\n  "),t.buffer.push(ae(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.commercialcustomer:addDevicesAndPackages.messageNoOffers~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function X(e,t){var s;return t.buffer.push("\r\n    "),s=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"selectAddOns",tabindex:"31",disabledBinding:"isButtonDisable"},hashTypes:{action:"STRING",tabindex:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,tabindex:e,disabledBinding:e},inverse:se.noop,fn:se.program(60,J,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    "),""}function J(e,t){var s,o;t.buffer.push(ae((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.selectAddOnButton",o):oe.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.selectAddOnButton",o))))}function W(e,t){var s,o;t.buffer.push(ae((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.activateButton",o):oe.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.activateButton",o))))}function z(e,t){var s;return t.buffer.push("\r\n    "),s=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"cancelAddOns",tabindex:"33",type:"inverse",disabledBinding:"isButtonDisable"},hashTypes:{action:"STRING",tabindex:"STRING",type:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,tabindex:e,type:e,disabledBinding:e},inverse:se.noop,fn:se.program(65,Q,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    "),""}function Q(e,t){var s,o;t.buffer.push(ae((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.cancelButton",o):oe.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.cancelButton",o))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),o=o||{};var Z,ee,te,ae=this.escapeExpression,se=this,oe=a.helperMissing;return o.buffer.push("<div "),o.buffer.push(ae(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:o}))),o.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),o.buffer.push(ae((ee=a.loc||t&&t.loc,te={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:o},ee?ee.call(t,"locale.commercialcustomer:addDevicesAndPackages.useCaseTitle",te):oe.call(t,"loc","locale.commercialcustomer:addDevicesAndPackages.useCaseTitle",te)))),o.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        '),o.buffer.push(ae(a.view.call(t,"Komodo.Controls.Link",{hash:{tabindex:"34",text:"~locale.commercialcustomer:customer.back~",href:"#/commercialManageViewing"},hashTypes:{tabindex:"STRING",text:"STRING",href:"STRING"},hashContexts:{tabindex:t,text:t,href:t},contexts:[t],types:["ID"],data:o}))),o.buffer.push("\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n  \x3c!--Add Device Information--\x3e\r\n  "),Z=a.if.call(t,"showDeviceView",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(1,r,o),contexts:[t],types:["ID"],data:o}),(Z||0===Z)&&o.buffer.push(Z),o.buffer.push("\r\n  \x3c!--Add Device Information End--\x3e\r\n\r\n  \x3c!--Add Package Information--\x3e\r\n  "),Z=a.if.call(t,"showPackageView",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(31,w,o),contexts:[t],types:["ID"],data:o}),(Z||0===Z)&&o.buffer.push(Z),o.buffer.push("\r\n  \x3c!--Add Package Information End--\x3e\r\n\r\n  \x3c!--Add AddOns Information--\x3e\r\n  "),Z=a.if.call(t,"showAddOnView",{hash:{},hashTypes:{},hashContexts:{},inverse:se.program(47,G,o),fn:se.program(37,B,o),contexts:[t],types:["ID"],data:o}),(Z||0===Z)&&o.buffer.push(Z),
o.buffer.push("\r\n\r\n  \x3c!--Add AddOns Information End--\x3e\r\n\r\n  \x3c!--Add Offers Information--\x3e\r\n  "),Z=a.if.call(t,"showPackageView",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(51,U,o),contexts:[t],types:["ID"],data:o}),(Z||0===Z)&&o.buffer.push(Z),o.buffer.push('\r\n  \x3c!--Add Offers Information End--\x3e\r\n  <br/>\r\n  <div style="float:right;">\r\n    '),Z=a.if.call(t,"showDeviceView",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(59,X,o),contexts:[t],types:["ID"],data:o}),(Z||0===Z)&&o.buffer.push(Z),o.buffer.push("\r\n    "),Z=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"activateProducts",tabindex:"32",disabledBinding:"isButtonDisable"},hashTypes:{action:"STRING",tabindex:"STRING",disabledBinding:"STRING"},hashContexts:{action:t,tabindex:t,disabledBinding:t},inverse:se.noop,fn:se.program(62,W,o),contexts:[t],types:["ID"],data:o}),(Z||0===Z)&&o.buffer.push(Z),o.buffer.push("\r\n    "),Z=a.if.call(t,"showAddOnView",{hash:{},hashTypes:{},hashContexts:{},inverse:se.noop,fn:se.program(64,z,o),contexts:[t],types:["ID"],data:o}),(Z||0===Z)&&o.buffer.push(Z),o.buffer.push("\r\n  </div>\r\n  <br/>\r\n</div>"),""}),Ember.TEMPLATES.CsiActivationSummaryView=Ember.Handlebars.template(function(e,t,a,s,o){function r(e,t){var s,o,r;return t.buffer.push("\r\n  \x3c!--Activation Summary Start--\x3e\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(2,i,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  <br/><br/>\r\n  "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.csicustomer:addDevicesAndPackages.device~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n  <table id="packageGrid" class="table table-bordered komodo-datagrid">\r\n\t<tr>\r\n\t\t<th>'),t.buffer.push(g((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.csicustomer:addDevicesAndPackages.deviceNumber",r):D.call(e,"loc","locale.csicustomer:addDevicesAndPackages.deviceNumber",r)))),t.buffer.push("</th>\r\n\t\t<th>"),t.buffer.push(g((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.csicustomer:addDevicesAndPackages.smartcardNumber",r):D.call(e,"loc","locale.csicustomer:addDevicesAndPackages.smartcardNumber",r)))),t.buffer.push("</th>\r\n        "),s=a.if.call(e,"viewModel.showInsurance",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(7,d,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n\t\t<th>"),t.buffer.push(g((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.csicustomer:addDevicesAndPackages.principalPackage",r):D.call(e,"loc","locale.csicustomer:addDevicesAndPackages.principalPackage",r)))),t.buffer.push("</th>\r\n\t\t<th>"),t.buffer.push(g((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.csicustomer:addDevicesAndPackages.addOnChannels",r):D.call(e,"loc","locale.csicustomer:addDevicesAndPackages.addOnChannels",r)))),t.buffer.push("</th>\r\n\t</tr>\r\n\t"),s=a.each.call(e,"item","in","viewModel.selectedproductData",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(9,l,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  </table>\r\n  "),""}function i(e,t){var s;return t.buffer.push("\r\n  \x3c!--Column 1--\x3e\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:y.noop,fn:y.program(3,n,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  \x3c!--Column 2--\x3e\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:y.noop,fn:y.program(5,c,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function n(e,t){return t.buffer.push("\r\n  \x3c!--Row 1--\x3e\r\n  "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.csicustomer:customerprofile.establishmentName~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewModel.establishmentName",id:"establishmentName"},hashTypes:{textBinding:"STRING",id:"STRING"},hashContexts:{textBinding:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  \x3c!--Row 2--\x3e\r\n  "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.csicustomer:customerprofile.numberViewingPoints~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewModel.viewingPoints",id:"viewingPoints"},hashTypes:{textBinding:"STRING",id:"STRING"},hashContexts:{textBinding:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function c(e,t){return t.buffer.push("\r\n  \x3c!--Row 1--\x3e\r\n  "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.csicustomer:viewingInformation.viewingLocation~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewModel.viewingLocation",id:"viewingLocation"},hashTypes:{textBinding:"STRING",id:"STRING"},hashContexts:{textBinding:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  <br/>\r\n  \x3c!--Row 2--\x3e\r\n  "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.csicustomer:addDevicesAndPackages.installationType~",class:"info-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <br/>\r\n  "),t.buffer.push(g(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"viewModel.installationType",id:"installationType"},hashTypes:{textBinding:"STRING",id:"STRING"},hashContexts:{textBinding:e,id:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function d(e,t){var s,o;return t.buffer.push("\r\n        <th>"),t.buffer.push(g((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.commercialcustomer:addDevicesAndPackages.insurance",o):D.call(e,"loc","locale.commercialcustomer:addDevicesAndPackages.insurance",o)))),t.buffer.push("</th>\r\n        "),""}function l(e,t){var s;return t.buffer.push("\r\n\t<tr>\r\n\t\t<td>"),s=a._triageMustache.call(e,"item.deviceNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\r\n\t\t<td>"),s=a._triageMustache.call(e,"item.smartCardNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\r\n        "),s=a.if.call(e,"viewModel.showInsurance",{hash:{},hashTypes:{},hashContexts:{},inverse:y.noop,fn:y.program(10,u,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n        <td>\r\n          <div>"),s=a._triageMustache.call(e,"item.prinPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</div>\r\n        </td>\r\n        <td>\r\n          <div>"),s=a._triageMustache.call(e,"item.addOnPckName",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</div>\r\n        </td>\r\n\t</tr>\r\n\t"),""}function u(e,t){var s;return t.buffer.push("\r\n        <td>"),s=a._triageMustache.call(e,"item.insuranceServicesStatus",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\r\n        "),""}function h(e,t){var s,o;t.buffer.push(g((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.csicustomer:activationSummary.anotherButton",o):D.call(e,"loc","locale.csicustomer:activationSummary.anotherButton",o))))}function m(e,t){var s,o;t.buffer.push(g((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.csicustomer:activationSummary.completeButton",o):D.call(e,"loc","locale.csicustomer:activationSummary.completeButton",o))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),o=o||{};var p,v,f,g=this.escapeExpression,y=this,D=a.helperMissing;return o.buffer.push("<div "),o.buffer.push(g(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:o}))),o.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),o.buffer.push(g((v=a.loc||t&&t.loc,f={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:o},v?v.call(t,"locale.csicustomer:activationSummary.useCaseTitle",f):D.call(t,"loc","locale.csicustomer:activationSummary.useCaseTitle",f)))),o.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        '),o.buffer.push(g(a.view.call(t,"Komodo.Controls.Link",{hash:{tabindex:"33",text:"~locale.csicustomer:customer.back~",href:"#/csiManageViewing"},hashTypes:{tabindex:"STRING",text:"STRING",href:"STRING"},hashContexts:{tabindex:t,text:t,href:t},contexts:[t],types:["ID"],data:o}))),o.buffer.push("\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n  "),p=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.csicustomer:activationSummary.activationSummaryView~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:y.noop,fn:y.program(1,r,o),contexts:[t],types:["ID"],data:o}),(p||0===p)&&o.buffer.push(p),o.buffer.push('\r\n  \x3c!--Activation Summary End--\x3e\r\n  <br/>\r\n  <div style="float:right;">\r\n    '),p=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"activateAnother",tabindex:"31",visibleBinding:"isButtonVisible"},hashTypes:{action:"STRING",tabindex:"STRING",visibleBinding:"STRING"},hashContexts:{action:t,tabindex:t,visibleBinding:t},inverse:y.noop,fn:y.program(12,h,o),contexts:[t],types:["ID"],data:o}),(p||0===p)&&o.buffer.push(p),o.buffer.push("\r\n    "),p=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"complete",tabindex:"32"},hashTypes:{action:"STRING",tabindex:"STRING"},hashContexts:{action:t,tabindex:t},inverse:y.noop,fn:y.program(14,m,o),contexts:[t],types:["ID"],data:o}),(p||0===p)&&o.buffer.push(p),o.buffer.push("\r\n  </div>\r\n  <br/>\r\n</div>"),""}),Ember.TEMPLATES.CsiAddProductsView=Ember.Handlebars.template(function(e,t,a,s,o){function r(e,t){var s;return t.buffer.push("\r\n    "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:w.noop,fn:w.program(2,i,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    "),""}function i(e,t){var s;return t.buffer.push("\r\n    \x3c!--Column 1--\x3e\r\n    "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top full-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:w.noop,fn:w.program(3,n,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    "),""}function n(e,t){var s;return t.buffer.push("\r\n    "),s=a.each.call(e,"package","in","productServices",{hash:{},hashTypes:{},hashContexts:{},inverse:w.noop,fn:w.program(4,c,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    "),""}function c(e,t){return t.buffer.push("\r\n    "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"package.isSelected",tabindex:"21",disabledBinding:"package.isDisabled"},hashTypes:{checkedBinding:"STRING",tabindex:"STRING",disabledBinding:"STRING"},hashContexts:{checkedBinding:e,tabindex:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"package.product.details.name"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n    "),""}function d(e,t){var s;return t.buffer.push("\r\n    "),s=a.each.call(e,"item","in","listOfAddOnServices",{hash:{},hashTypes:{},hashContexts:{},inverse:w.noop,fn:w.program(7,l,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    "),""}function l(e,t){var s;return t.buffer.push("\r\n    "),s=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{titleBinding:"item.panelTitle",isCollapsed:!1},hashTypes:{titleBinding:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{titleBinding:e,isCollapsed:e},inverse:w.noop,fn:w.program(8,u,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    "),""}function u(e,t){var s;return t.buffer.push("\r\n    "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:w.noop,fn:w.program(9,h,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    "),""}function h(e,t){var s;return t.buffer.push("\r\n    \x3c!--Column 1--\x3e\r\n    "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:w.noop,fn:w.program(10,m,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    \x3c!--Column 2--\x3e\r\n    "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:w.noop,fn:w.program(13,v,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    "),""}function m(e,t){var s;return t.buffer.push("\r\n    "),s=a.each.call(e,"addOn","in","item.firstColumnProducts",{hash:{},hashTypes:{},hashContexts:{},inverse:w.noop,fn:w.program(11,p,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    "),""}function p(e,t){return t.buffer.push("\r\n    "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"addOn.isSelected",tabindex:"21",disabledBinding:"addOn.isDisabled"},hashTypes:{checkedBinding:"STRING",tabindex:"STRING",disabledBinding:"STRING"},hashContexts:{checkedBinding:e,tabindex:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"addOn.name"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n    "),""}function v(e,t){var s;return t.buffer.push("\r\n    "),s=a.each.call(e,"addOn","in","item.secondColumnProducts",{hash:{},hashTypes:{},hashContexts:{},inverse:w.noop,fn:w.program(14,f,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    "),""}function f(e,t){return t.buffer.push("\r\n    "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"addOn.isSelected",tabindex:"22",disabledBinding:"addOn.isDisabled"},hashTypes:{checkedBinding:"STRING",tabindex:"STRING",disabledBinding:"STRING"},hashContexts:{checkedBinding:e,tabindex:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"addOn.name"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n    "),""}function g(e,t){var s;return t.buffer.push("\r\n    "),s=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.csicustomer:addDevicesAndPackages.selectAddOns~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:e,isCollapsed:e},inverse:w.noop,fn:w.program(17,y,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    "),""}function y(e,t){var s;return t.buffer.push("\r\n    "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:w.noop,fn:w.program(18,D,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    "),""}function D(e,t){return t.buffer.push("\r\n    "),t.buffer.push(I(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.noAddOns~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),""}function b(e,t){var s,o;t.buffer.push(I((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.csicustomer:addDevicesAndPackages.activateButton",o):A.call(e,"loc","locale.csicustomer:addDevicesAndPackages.activateButton",o))))}function C(e,t){var s,o;t.buffer.push(I((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.csicustomer:addDevicesAndPackages.cancelButton",o):A.call(e,"loc","locale.csicustomer:addDevicesAndPackages.cancelButton",o))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),o=o||{};var P,S,T,I=this.escapeExpression,w=this,A=a.helperMissing;return o.buffer.push("<div "),o.buffer.push(I(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:o}))),o.buffer.push('>\r\n    <div width="90%">\r\n        <span class="komodo-heading">'),o.buffer.push(I((S=a.loc||t&&t.loc,T={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:o},S?S.call(t,"locale.csicustomer:addDevicesAndPackages.useCaseTitle",T):A.call(t,"loc","locale.csicustomer:addDevicesAndPackages.useCaseTitle",T)))),o.buffer.push('</span>\r\n        <span class="float-right">\r\n            <b>\r\n                '),o.buffer.push(I(a.view.call(t,"Komodo.Controls.Link",{hash:{tabindex:"34",text:"~locale.csicustomer:customer.back~",href:"#/csiManageViewing"},hashTypes:{tabindex:"STRING",text:"STRING",href:"STRING"},hashContexts:{tabindex:t,text:t,href:t},contexts:[t],types:["ID"],data:o}))),o.buffer.push("\r\n            </b>\r\n        </span>\r\n    </div>\r\n    <hr />\r\n    \x3c!--Add Package Information--\x3e\r\n    "),P=a.view.call(t,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.csicustomer:addDevicesAndPackages.selectPrincipalPackage~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:t,isCollapsed:t},inverse:w.noop,fn:w.program(1,r,o),contexts:[t],types:["ID"],data:o}),(P||0===P)&&o.buffer.push(P),o.buffer.push("\r\n    \x3c!--Add Package Information End--\x3e\r\n    \x3c!--Add AddOns Information--\x3e\r\n    "),P=a.if.call(t,"showAddOnView",{hash:{},hashTypes:{},hashContexts:{},inverse:w.program(16,g,o),fn:w.program(6,d,o),contexts:[t],types:["ID"],data:o}),(P||0===P)&&o.buffer.push(P),o.buffer.push('\r\n    \x3c!--Add AddOns Information End--\x3e\r\n    <br />\r\n    <div style="float:right;">\r\n        '),P=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"activateProducts",tabindex:"32",disabledBinding:"isButtonDisable"},hashTypes:{action:"STRING",tabindex:"STRING",disabledBinding:"STRING"},hashContexts:{action:t,tabindex:t,disabledBinding:t},inverse:w.noop,fn:w.program(20,b,o),contexts:[t],types:["ID"],data:o}),(P||0===P)&&o.buffer.push(P),o.buffer.push("\r\n        "),P=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"cancel",tabindex:"33",type:"inverse",disabledBinding:"isButtonDisable"},hashTypes:{action:"STRING",tabindex:"STRING",type:"STRING",disabledBinding:"STRING"},hashContexts:{action:t,tabindex:t,type:t,disabledBinding:t},inverse:w.noop,fn:w.program(22,C,o),contexts:[t],types:["ID"],data:o}),(P||0===P)&&o.buffer.push(P),o.buffer.push("\r\n    </div>\r\n    <br />\r\n</div>"),""}),Ember.TEMPLATES.CsiAssociateProductsView=Ember.Handlebars.template(function(e,t,a,s,o){function r(e,t){var s;return t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.associateProducts:associateProducts.addDevicesCollapView~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:e,isCollapsed:e},inverse:U.noop,fn:U.program(2,i,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function i(e,t){var s;return t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:U.noop,fn:U.program(3,n,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),s=a.if.call(e,"showAddSmartcardView",{hash:{},hashTypes:{},hashContexts:{},inverse:U.noop,fn:U.program(8,l,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function n(e,t){var s;return t.buffer.push("\r\n  \x3c!--Column 1--\x3e\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:U.noop,fn:U.program(4,c,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  \x3c!--Column 2--\x3e\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:U.noop,fn:U.program(6,d,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function c(e,t){return t.buffer.push("\r\n    "),t.buffer.push(H(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"1",valueBinding:"viewModel.paymentGroup",label:"~locale.csicustomer:paymentGroup.paymentGroup~",validatorBinding:"validators.paymentGroupValidator",prompt:"~locale.csicustomer:paymentGroup.paymentGroupPrompt~",contentBinding:"viewModel.accounts",optionLabelPath:"content.Name",optionValuePath:"content"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),t.buffer.push(H(a.view.call(e,"Komodo.Controls.Select",{hash:{tabindex:"3",valueBinding:"viewModel.viewingLocation",label:"~locale.csicustomer:viewingInformation.viewingLocation~",validatorBinding:"validators.viewingLocationValidator",prompt:"~locale.csicustomer:viewingInformation.viewingLocationPrompt~",contentBinding:"viewModel.viewingLocations",optionLabelPath:"content.CanonicalValue",optionValuePath:"content"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING",prompt:"STRING",contentBinding:"STRING",optionLabelPath:"STRING",optionValuePath:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e,prompt:e,contentBinding:e,optionLabelPath:e,optionValuePath:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function d(e,t){return t.buffer.push("\r\n  "),t.buffer.push(H(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"2",valueBinding:"viewModel.establishmentName",label:"~locale.csicustomer:customerprofile.establishmentName~",validatorBinding:"validators.establishmentNameValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),t.buffer.push(H(a.view.call(e,"Komodo.Controls.TextField",{hash:{tabindex:"4",valueBinding:"viewModel.viewingPoints",label:"~locale.csicustomer:customerprofile.numberViewingPoints~",validatorBinding:"validators.viewingPointsValidator",disabledBinding:"disableViewingPoints"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING",disabledBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e,disabledBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function l(e,t){var s;return t.buffer.push("\r\n  <hr/>\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:U.noop,fn:U.program(9,u,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:U.noop,fn:U.program(15,v,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function u(e,t){var s;return t.buffer.push("\r\n  \x3c!--Column 1--\x3e\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:U.noop,fn:U.program(10,h,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  \x3c!--Column 2--\x3e\r\n      "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:U.noop,fn:U.program(13,p,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function h(e,t){var s;return t.buffer.push("\r\n    "),t.buffer.push(H(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.csicustomer:addDevicesAndPackages.smartcardDeviceNumber~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    <br/>\r\n    "),t.buffer.push(H(a.view.call(e,"Komodo.Controls.CoreTextField",{hash:{tabindex:"6",valueBinding:"smartcardDeviceNumber"},hashTypes:{tabindex:"STRING",valueBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n    "),s=a.view.call(e,"Komodo.Controls.Button",{hash:{tabindex:"7",action:"addDevice",size:"nextto-control",type:"success"},hashTypes:{tabindex:"STRING",action:"STRING",size:"STRING",type:"STRING"},hashContexts:{tabindex:e,action:e,size:e,type:e},inverse:U.noop,fn:U.program(11,m,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    <br/>\r\n    "),t.buffer.push(H(a.view.call(e,"Komodo.Controls.CoreValidation",{hash:{validatorBinding:"validators.smartcardDeviceNumberValidator"},hashTypes:{validatorBinding:"STRING"},hashContexts:{validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function m(e,t){var s,o;return t.buffer.push(" "),t.buffer.push(H((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.csicustomer:addDevicesAndPackages.addButton",o):F.call(e,"loc","locale.csicustomer:addDevicesAndPackages.addButton",o)))),t.buffer.push(" "),""}function p(e,t){t.buffer.push("\r\n      ")}function v(e,t){var s;return t.buffer.push("\r\n  \x3c!--Column 1--\x3e\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:U.noop,fn:U.program(16,f,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function f(e,t){var s,o,r;return t.buffer.push("\r\n  \x3c!--<br/><br/>\r\n  "),t.buffer.push(H(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"viewModel.insurance",tabindex:"8"},hashTypes:{checkedBinding:"STRING",tabindex:"STRING"},hashContexts:{checkedBinding:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(H(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.csicustomer:addDevicesAndPackages.insurance~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("--\x3e\r\n  <br/>\r\n  "),t.buffer.push(H(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.csicustomer:addDevicesAndPackages.deviceAdded~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push('\r\n  <div class="table-responsive">\r\n    <table id="tableaddedDevices" class="table table-bordered komodo-datagrid">\r\n      <tr>\r\n        <th width="200px">'),t.buffer.push(H((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.csicustomer:addDevicesAndPackages.device",r):F.call(e,"loc","locale.csicustomer:addDevicesAndPackages.device",r)))),t.buffer.push('</th>\r\n        <th width="150px">'),t.buffer.push(H((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.csicustomer:addDevicesAndPackages.smartcard",r):F.call(e,"loc","locale.csicustomer:addDevicesAndPackages.smartcard",r)))),t.buffer.push('</th>\r\n        <th width="100px">'),t.buffer.push(H((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.csicustomer:addDevicesAndPackages.actions",r):F.call(e,"loc","locale.csicustomer:addDevicesAndPackages.actions",r)))),t.buffer.push("</th>\r\n      </tr>\r\n      "),s=a.each.call(e,"decoder","in","viewModel.selectedproductData",{hash:{},hashTypes:{},hashContexts:{},inverse:U.noop,fn:U.program(17,g,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    </table>\r\n  </div>\r\n  "),""}function g(e,t){var s;return t.buffer.push("\r\n      <tr>\r\n        <td>"),s=a._triageMustache.call(e,"decoder.decoderSerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("&nbsp;&nbsp;"),s=a._triageMustache.call(e,"decoder.decoderType",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\r\n        <td>"),s=a._triageMustache.call(e,"decoder.smartcardType",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("&nbsp;&nbsp;"),s=a._triageMustache.call(e,"decoder.smartcardSerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("</td>\r\n        <td>\r\n          \x3c!--"),t.buffer.push(H(a.view.call(e,"Komodo.Controls.Link",{hash:{text:"~locale.csicustomer:addDevicesAndPackages.edit~",hrefBinding:"",tabindex:"11"},hashTypes:{text:"STRING",hrefBinding:"STRING",tabindex:"STRING"},hashContexts:{text:e,hrefBinding:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("&nbsp;-&nbsp;--\x3e"),t.buffer.push(H(a.view.call(e,"Komodo.Controls.Link",{hash:{action:"deleteDevice",target:"controller",contentBinding:"decoder",text:"~locale.csicustomer:addDevicesAndPackages.delete~",hrefBinding:"",tabindex:"12"},hashTypes:{action:"STRING",target:"STRING",contentBinding:"STRING",
text:"STRING",hrefBinding:"STRING",tabindex:"STRING"},hashContexts:{action:e,target:e,contentBinding:e,text:e,hrefBinding:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        </td>\r\n      </tr>\r\n      "),""}function y(e,t){var s;return t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.csicustomer:addDevicesAndPackages.addPackagesCollapView~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:e,isCollapsed:e},inverse:U.noop,fn:U.program(20,D,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function D(e,t){var s;return t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:U.noop,fn:U.program(21,b,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function b(e,t){var s;return t.buffer.push("\r\n  \x3c!--Column 1--\x3e\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top full-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:U.noop,fn:U.program(22,C,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function C(e,t){return t.buffer.push("\r\n  "),t.buffer.push(H(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.principalPackage~",class:"sub-heading"},hashTypes:{text:"STRING",class:"STRING"},hashContexts:{text:e,class:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),t.buffer.push(H(a.view.call(e,"Komodo.Controls.RadioButtonGroup",{hash:{contentBinding:"productServices",displayPath:"product.details.name",valuePath:"product.details.productID",orientation:"vertical",valueBinding:"viewModel.primaryProductSelection",label:"",tabindex:"13"},hashTypes:{contentBinding:"STRING",displayPath:"STRING",valuePath:"STRING",orientation:"STRING",valueBinding:"STRING",label:"STRING",tabindex:"STRING"},hashContexts:{contentBinding:e,displayPath:e,valuePath:e,orientation:e,valueBinding:e,label:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  <hr/>\r\n  "),t.buffer.push(H(a.view.call(e,"Komodo.Controls.DatePicker",{hash:{tabindex:"14",valueBinding:"viewModel.activationDate",label:"~locale.associateProducts:associateProducts.activationDate~",validatorBinding:"validators.activationDateValidator"},hashTypes:{tabindex:"STRING",valueBinding:"STRING",label:"STRING",validatorBinding:"STRING"},hashContexts:{tabindex:e,valueBinding:e,label:e,validatorBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n  "),""}function P(e,t){var s;return t.buffer.push("\r\n    "),s=a.each.call(e,"item","in","listOfAddOnServices",{hash:{},hashTypes:{},hashContexts:{},inverse:U.noop,fn:U.program(25,S,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function S(e,t){var s;return t.buffer.push("\r\n        "),s=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{titleBinding:"item.panelTitle",isCollapsed:!1},hashTypes:{titleBinding:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{titleBinding:e,isCollapsed:e},inverse:U.noop,fn:U.program(26,T,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    "),""}function T(e,t){var s;return t.buffer.push("\r\n            "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:U.noop,fn:U.program(27,I,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n        "),""}function I(e,t){var s;return t.buffer.push("\r\n            \x3c!--Column 1--\x3e\r\n                "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:U.noop,fn:U.program(28,w,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n            \x3c!--Column 2--\x3e\r\n                "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{classNames:"komodo-text-align-top column-width"},hashTypes:{classNames:"STRING"},hashContexts:{classNames:e},inverse:U.noop,fn:U.program(31,x,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n            "),""}function w(e,t){var s;return t.buffer.push("\r\n                    "),s=a.each.call(e,"addOn","in","item.firstColumnProducts",{hash:{},hashTypes:{},hashContexts:{},inverse:U.noop,fn:U.program(29,A,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                "),""}function A(e,t){return t.buffer.push("\r\n                        "),t.buffer.push(H(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"addOn.isSelected",tabindex:"21"},hashTypes:{checkedBinding:"STRING",tabindex:"STRING"},hashContexts:{checkedBinding:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(H(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"addOn.name"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n                    "),""}function x(e,t){var s;return t.buffer.push("\r\n                    "),s=a.each.call(e,"addOn","in","item.secondColumnProducts",{hash:{},hashTypes:{},hashContexts:{},inverse:U.noop,fn:U.program(32,N,t),contexts:[e,e,e],types:["ID","ID","ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n                "),""}function N(e,t){return t.buffer.push("\r\n                        "),t.buffer.push(H(a.view.call(e,"Komodo.Controls.CoreCheckbox",{hash:{checkedBinding:"addOn.isSelected",tabindex:"22"},hashTypes:{checkedBinding:"STRING",tabindex:"STRING"},hashContexts:{checkedBinding:e,tabindex:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push(H(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{textBinding:"addOn.name"},hashTypes:{textBinding:"STRING"},hashContexts:{textBinding:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("<br />\r\n                    "),""}function O(e,t){var s;return t.buffer.push("\r\n    "),s=a.view.call(e,"Komodo.Controls.CollapsibleView",{hash:{title:"~locale.csicustomer:addDevicesAndPackages.selectAddOns~",isCollapsed:!1},hashTypes:{title:"STRING",isCollapsed:"BOOLEAN"},hashContexts:{title:e,isCollapsed:e},inverse:U.noop,fn:U.program(35,B,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n  "),""}function B(e,t){var s;return t.buffer.push("\r\n        "),s=a.view.call(e,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:U.noop,fn:U.program(36,M,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    "),""}function M(e,t){return t.buffer.push("\r\n            "),t.buffer.push(H(a.view.call(e,"Komodo.Controls.CoreTextLabel",{hash:{text:"~locale.associateProducts:associateProducts.noAddOns~"},hashTypes:{text:"STRING"},hashContexts:{text:e},contexts:[e],types:["ID"],data:t}))),t.buffer.push("\r\n        "),""}function k(e,t){var s;return t.buffer.push("\r\n    "),s=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"selectAddOns",tabindex:"31",disabledBinding:"isButtonDisable"},hashTypes:{action:"STRING",tabindex:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,tabindex:e,disabledBinding:e},inverse:U.noop,fn:U.program(39,E,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    "),""}function E(e,t){var s,o;t.buffer.push(H((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.csicustomer:addDevicesAndPackages.selectAddOnButton",o):F.call(e,"loc","locale.csicustomer:addDevicesAndPackages.selectAddOnButton",o))))}function L(e,t){var s,o;t.buffer.push(H((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.csicustomer:addDevicesAndPackages.activateButton",o):F.call(e,"loc","locale.csicustomer:addDevicesAndPackages.activateButton",o))))}function K(e,t){var s;return t.buffer.push("\r\n    "),s=a.view.call(e,"Komodo.Controls.Button",{hash:{action:"cancelAddOns",tabindex:"33",type:"inverse",disabledBinding:"isButtonDisable"},hashTypes:{action:"STRING",tabindex:"STRING",type:"STRING",disabledBinding:"STRING"},hashContexts:{action:e,tabindex:e,type:e,disabledBinding:e},inverse:U.noop,fn:U.program(44,R,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    "),""}function R(e,t){var s,o;t.buffer.push(H((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.csicustomer:addDevicesAndPackages.cancelButton",o):F.call(e,"loc","locale.csicustomer:addDevicesAndPackages.cancelButton",o))))}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),o=o||{};var V,G,_,H=this.escapeExpression,U=this,F=a.helperMissing;return o.buffer.push("<div "),o.buffer.push(H(a["bind-attr"].call(t,{hash:{class:"Komodo.Services.customerProfileService.isBannerOpen:customer-page-padding:no-banner-padding"},hashTypes:{class:"STRING"},hashContexts:{class:t},contexts:[],types:[],data:o}))),o.buffer.push('>\r\n  <div width="90%">\r\n    <span class="komodo-heading">'),o.buffer.push(H((G=a.loc||t&&t.loc,_={hash:{},hashTypes:{},hashContexts:{},contexts:[t],types:["STRING"],data:o},G?G.call(t,"locale.csicustomer:addDevicesAndPackages.useCaseTitle",_):F.call(t,"loc","locale.csicustomer:addDevicesAndPackages.useCaseTitle",_)))),o.buffer.push('</span>\r\n    <span class="float-right">\r\n      <b>\r\n        '),o.buffer.push(H(a.view.call(t,"Komodo.Controls.Link",{hash:{tabindex:"34",text:"~locale.csicustomer:customer.back~",href:"#/csiManageViewing"},hashTypes:{tabindex:"STRING",text:"STRING",href:"STRING"},hashContexts:{tabindex:t,text:t,href:t},contexts:[t],types:["ID"],data:o}))),o.buffer.push("\r\n      </b>\r\n    </span>\r\n  </div>\r\n  <hr/>\r\n  \x3c!--Add Device Information--\x3e\r\n  "),V=a.if.call(t,"showDeviceView",{hash:{},hashTypes:{},hashContexts:{},inverse:U.noop,fn:U.program(1,r,o),contexts:[t],types:["ID"],data:o}),(V||0===V)&&o.buffer.push(V),o.buffer.push("\r\n  \x3c!--Add Device Information End--\x3e\r\n\r\n  \x3c!--Add Package Information--\x3e\r\n  "),V=a.if.call(t,"showPackageView",{hash:{},hashTypes:{},hashContexts:{},inverse:U.noop,fn:U.program(19,y,o),contexts:[t],types:["ID"],data:o}),(V||0===V)&&o.buffer.push(V),o.buffer.push("\r\n  \x3c!--Add Package Information End--\x3e\r\n\r\n  \x3c!--Add AddOns Information--\x3e\r\n  "),V=a.if.call(t,"showAddOnView",{hash:{},hashTypes:{},hashContexts:{},inverse:U.program(34,O,o),fn:U.program(24,P,o),contexts:[t],types:["ID"],data:o}),(V||0===V)&&o.buffer.push(V),o.buffer.push('\r\n  \x3c!--Add AddOns Information End--\x3e\r\n  <br/>\r\n  <div style="float:right;">\r\n    '),V=a.if.call(t,"showDeviceView",{hash:{},hashTypes:{},hashContexts:{},inverse:U.noop,fn:U.program(38,k,o),contexts:[t],types:["ID"],data:o}),(V||0===V)&&o.buffer.push(V),o.buffer.push("\r\n    "),V=a.view.call(t,"Komodo.Controls.Button",{hash:{action:"activateProducts",tabindex:"32",disabledBinding:"isButtonDisable"},hashTypes:{action:"STRING",tabindex:"STRING",disabledBinding:"STRING"},hashContexts:{action:t,tabindex:t,disabledBinding:t},inverse:U.noop,fn:U.program(41,L,o),contexts:[t],types:["ID"],data:o}),(V||0===V)&&o.buffer.push(V),o.buffer.push("\r\n    "),V=a.if.call(t,"showAddOnView",{hash:{},hashTypes:{},hashContexts:{},inverse:U.noop,fn:U.program(43,K,o),contexts:[t],types:["ID"],data:o}),(V||0===V)&&o.buffer.push(V),o.buffer.push("\r\n  </div>\r\n  <br/>\r\n</div>"),""}),Ember.TEMPLATES.DeviceActivationDetailsView=Ember.Handlebars.template(function(e,t,a,s,o){function r(e,t){var s;return t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:k.noop,fn:k.program(2,i,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("  \r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:k.noop,fn:k.program(4,n,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" \r\n  "),""}function i(e,t){var s,o,r;return t.buffer.push("\r\n      "),t.buffer.push(M((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.decoders",r):B.call(e,"loc","locale.associateProducts:associateProducts.decoders",r)))),t.buffer.push("<br/>\r\n      "),s=a._triageMustache.call(e,"deviceActivationData.primaryDecoderType",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" "),s=a._triageMustache.call(e,"deviceActivationData.primaryDecoderSerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("<br/>\r\n      "),s=a._triageMustache.call(e,"deviceActivationData.secondaryDecoderType",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" "),s=a._triageMustache.call(e,"deviceActivationData.secondaryDecoderSerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n      <br/><br/>\r\n  "),""}function n(e,t){var s,o,r;return t.buffer.push("  \r\n    "),t.buffer.push(M((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.xtraview",r):B.call(e,"loc","locale.associateProducts:associateProducts.xtraview",r)))),t.buffer.push("<br/>\r\n    "),s=a._triageMustache.call(e,"deviceActivationData.xtraview",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n    <br/><br/>\r\n  "),""}function c(e,t){var s;return t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:k.noop,fn:k.program(7,d,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("  \r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:k.noop,fn:k.program(9,l,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" \r\n  "),""}function d(e,t){var s,o,r;return t.buffer.push("\r\n      "),t.buffer.push(M((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.services",r):B.call(e,"loc","locale.associateProducts:associateProducts.services",r)))),t.buffer.push("<br/>\r\n     "),s=a._triageMustache.call(e,"deviceActivationData.principalPackage",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n     <br/><br/>\r\n  "),""}function l(e,t){var s,o,r;return t.buffer.push("  \r\n    "),t.buffer.push(M((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.addOn",r):B.call(e,"loc","locale.associateProducts:associateProducts.addOn",r)))),t.buffer.push("<br/>\r\n    "),s=a._triageMustache.call(e,"deviceActivationData.addOnPackage",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n   <br/><br/>\r\n  "),""}function u(e,t){var s;return t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:k.noop,fn:k.program(12,h,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("  \r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:k.noop,fn:k.program(14,m,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" \r\n  "),""}function h(e,t){var s,o,r;return t.buffer.push("\r\n      "),t.buffer.push(M((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.smartcards",r):B.call(e,"loc","locale.associateProducts:associateProducts.smartcards",r)))),t.buffer.push("<br/>\r\n      "),s=a._triageMustache.call(e,"deviceActivationData.primarySmartcardType",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" "),s=a._triageMustache.call(e,"deviceActivationData.primarySmartcardSerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("<br/>\r\n      "),s=a._triageMustache.call(e,"deviceActivationData.secondarySmartcardType",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" "),s=a._triageMustache.call(e,"deviceActivationData.secondarySmartcardSerialNumber",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n     <br/><br/>\r\n  "),""}function m(e,t){var s,o,r;return t.buffer.push("  \r\n    "),t.buffer.push(M((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.boxOffice",r):B.call(e,"loc","locale.associateProducts:associateProducts.boxOffice",r)))),t.buffer.push("<br/>\r\n    "),s=a._triageMustache.call(e,"deviceActivationData.boxOffice",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n   <br/><br/>\r\n  "),""}function p(e,t){var s;return t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:k.noop,fn:k.program(17,v,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("  \r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:k.noop,fn:k.program(19,f,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" \r\n  "),""}function v(e,t){var s,o,r;return t.buffer.push("\r\n      "),t.buffer.push(M((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.chargePeriod",r):B.call(e,"loc","locale.associateProducts:associateProducts.chargePeriod",r)))),t.buffer.push("<br/>\r\n      "),s=a._triageMustache.call(e,"deviceActivationData.chargePeriod",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n     <br/><br/>\r\n  "),""}function f(e,t){var s,o,r;return t.buffer.push("  \r\n    "),t.buffer.push(M((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.activationDate",r):B.call(e,"loc","locale.associateProducts:associateProducts.activationDate",r)))),t.buffer.push("<br/>\r\n    "),s=a._triageMustache.call(e,"deviceActivationData.activationDate",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n   <br/><br/>\r\n  "),""}function g(e,t){var s;return t.buffer.push("\r\n    "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:k.noop,fn:k.program(22,y,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("     \r\n  "),""}function y(e,t){var s,o;return t.buffer.push("\r\n       <b>"),t.buffer.push(M((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.associateProducts:associateProducts.boxOfficeDetailsTitle",o):B.call(e,"loc","locale.associateProducts:associateProducts.boxOfficeDetailsTitle",o)))),t.buffer.push("</b>\r\n       <br/><br/>\r\n    "),""}function D(e,t){var s;return t.buffer.push("\r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:k.noop,fn:k.program(25,b,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("  \r\n  "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:k.noop,fn:k.program(27,C,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" \r\n  "),""}function b(e,t){var s,o;return t.buffer.push("\r\n      "),t.buffer.push(M((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.associateProducts:associateProducts.boxOfficeSmartcard",o):B.call(e,"loc","locale.associateProducts:associateProducts.boxOfficeSmartcard",o)))),t.buffer.push("<br/>\r\n      \r\n     <br/><br/>\r\n  "),""}function C(e,t){var s,o;return t.buffer.push("  \r\n    "),t.buffer.push(M((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.associateProducts:associateProducts.boxOfficeSmartcard",o):B.call(e,"loc","locale.associateProducts:associateProducts.boxOfficeSmartcard",o)))),t.buffer.push("<br/>    \r\n   <br/><br/>\r\n  "),""}function P(e,t){var s;return t.buffer.push("\r\n    "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:k.noop,fn:k.program(30,S,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("     \r\n  "),""}function S(e,t){var s,o;return t.buffer.push("\r\n       <b>"),t.buffer.push(M((s=a.loc||e&&e.loc,o={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},s?s.call(e,"locale.associateProducts:associateProducts.deviceLocationDetailsTitle",o):B.call(e,"loc","locale.associateProducts:associateProducts.deviceLocationDetailsTitle",o)))),t.buffer.push("</b>\r\n       <br/><br/>\r\n    "),""}function T(e,t){var s;return t.buffer.push("\r\n    "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:k.noop,fn:k.program(33,I,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("  \r\n    "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:k.noop,fn:k.program(35,w,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" \r\n  "),""}function I(e,t){var s,o,r;return t.buffer.push("\r\n        "),t.buffer.push(M((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.whoIsUsingTheDeviceTitle",r):B.call(e,"loc","locale.associateProducts:associateProducts.whoIsUsingTheDeviceTitle",r)))),t.buffer.push("<br/>\r\n        "),s=a._triageMustache.call(e,"deviceActivationData.dlWhoIsUsingTheDevice",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n       <br/><br/>\r\n    "),""}function w(e,t){var s,o,r;return t.buffer.push("  \r\n      "),t.buffer.push(M((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.residenceTypeTitle",r):B.call(e,"loc","locale.associateProducts:associateProducts.residenceTypeTitle",r)))),t.buffer.push("<br/>   \r\n      "),s=a._triageMustache.call(e,"deviceActivationData.dlResidenceType",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n     <br/><br/>\r\n  "),""}function A(e,t){var s;return t.buffer.push("\r\n    "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:k.noop,fn:k.program(38,x,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("  \r\n    "),s=a.view.call(e,"Komodo.Controls.ColumnView",{hash:{class:"komodo-text-align-top column-width"},hashTypes:{class:"STRING"},hashContexts:{class:e},inverse:k.noop,fn:k.program(40,N,t),contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push(" \r\n  "),""}function x(e,t){var s,o,r;return t.buffer.push("\r\n        "),t.buffer.push(M((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.addressTitle",r):B.call(e,"loc","locale.associateProducts:associateProducts.addressTitle",r)))),t.buffer.push("<br/>\r\n        "),s=a._triageMustache.call(e,"deviceActivationData.dlAddress",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n       <br/><br/>\r\n    "),""}function N(e,t){var s,o,r;return t.buffer.push("  \r\n      "),t.buffer.push(M((o=a.loc||e&&e.loc,r={hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["STRING"],data:t},o?o.call(e,"locale.associateProducts:associateProducts.paymentDetailsTitle",r):B.call(e,"loc","locale.associateProducts:associateProducts.paymentDetailsTitle",r)))),t.buffer.push("<br/>   \r\n      "),s=a._triageMustache.call(e,"deviceActivationData.dlPaymentDetails",{hash:{},hashTypes:{},hashContexts:{},contexts:[e],types:["ID"],data:t}),(s||0===s)&&t.buffer.push(s),t.buffer.push("\r\n     <br/><br/>\r\n  "),""}this.compilerInfo=[4,">= 1.0.0"],a=this.merge(a,Ember.Handlebars.helpers),o=o||{};var O,B=a.helperMissing,M=this.escapeExpression,k=this;return o.buffer.push('<div class="modal-max-size">\r\n  '),O=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:k.noop,fn:k.program(1,r,o),contexts:[t],types:["ID"],data:o}),(O||0===O)&&o.buffer.push(O),o.buffer.push("\r\n\r\n  "),O=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:k.noop,fn:k.program(6,c,o),contexts:[t],types:["ID"],data:o}),(O||0===O)&&o.buffer.push(O),o.buffer.push("\r\n  "),O=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:k.noop,fn:k.program(11,u,o),contexts:[t],types:["ID"],data:o}),(O||0===O)&&o.buffer.push(O),o.buffer.push("\r\n  "),O=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:k.noop,fn:k.program(16,p,o),contexts:[t],types:["ID"],data:o}),(O||0===O)&&o.buffer.push(O),o.buffer.push("\r\n  <hr/>  \r\n   "),O=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:k.noop,fn:k.program(21,g,o),contexts:[t],types:["ID"],data:o}),(O||0===O)&&o.buffer.push(O),o.buffer.push("\r\n  "),O=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:k.noop,fn:k.program(24,D,o),contexts:[t],types:["ID"],data:o}),(O||0===O)&&o.buffer.push(O),o.buffer.push("\r\n   <hr/>  \r\n   "),O=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:k.noop,fn:k.program(29,P,o),contexts:[t],types:["ID"],data:o}),(O||0===O)&&o.buffer.push(O),o.buffer.push("\r\n   "),O=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:k.noop,fn:k.program(32,T,o),contexts:[t],types:["ID"],data:o}),(O||0===O)&&o.buffer.push(O),o.buffer.push("\r\n   "),O=a.view.call(t,"Komodo.Controls.ColumnLayoutView",{hash:{},hashTypes:{},hashContexts:{},inverse:k.noop,fn:k.program(37,A,o),contexts:[t],types:["ID"],data:o}),(O||0===O)&&o.buffer.push(O),o.buffer.push(" \r\n</div>"),""}),Komodo.Application.AssociateProductsView=Komodo.UI.View.extend({viewKey:"AssociateProductsView"}),Komodo.Application.DeviceAtAnotherLocationView=Komodo.UI.View.extend({viewKey:"DeviceAtAnotherLocationView",templateName:"DeviceAtAnotherLocationView"}),Komodo.Application.CommercialActivationSummaryView=Komodo.UI.View.extend({viewKey:"CommercialActivationSummaryView"}),Komodo.Application.ExistingCustomerAddProductsView=Komodo.UI.View.extend({viewKey:"ExistingCustomerAddProductsView"}),Komodo.Application.CommercialAddProductsView=Komodo.UI.View.extend({viewKey:"CommercialAddProductsView"}),Komodo.Application.XtraViewView=Komodo.UI.View.extend({viewKey:"XtraViewView"}),Komodo.Application.CommercialAssociateProductsView=Komodo.UI.View.extend({viewKey:"CommercialAssociateProductsView"}),Komodo.Application.SavePairController=Komodo.UI.Controller.extend({init:function(){this._super()},start:function(){this.registerModel("data",Komodo.Models.SavePairModel),this.registerValidation(),this._super()},stop:function(){this._super()},registerValidation:function(){this.registerValidator(this.get("data"),"smartCardSerialNumber",{isRequired:!0,displayName:kl.value(this._localeBase+"smartcardNumber"),minLength:10,maxLength:10,functions:Komodo.UI.Validators.alphanumericValidator}),this.registerValidator(this.get("data"),"decoderSerialNumber",{isRequired:!0,displayName:kl.value(this._localeBase+"deviceNumber"),minLength:10,maxLength:10,functions:Komodo.UI.Validators.alphanumericValidator})},actions:{savepair:function(){}}}),Komodo.Application.CsiActivationSummaryView=Komodo.UI.View.extend({viewKey:"CsiActivationSummaryView"}),Komodo.Application.AddDeviceView=Komodo.UI.View.extend({viewKey:"AddDeviceView",templateName:"AddDeviceView"}),Komodo.Application.CsiAddProductsView=Komodo.UI.View.extend({viewKey:"CsiAddProductsView"}),Komodo.Application.SavePairView=Komodo.UI.View.extend({viewKey:"SavePairView",templateName:"SavePairView"}),Komodo.Application.CsiAssociateProductsView=Komodo.UI.View.extend({viewKey:"CsiAssociateProductsView"}),Komodo.Application.AddressInformationContainerView=Komodo.UI.View.extend({viewKey:"AddressInformationContainerView",templateName:"AddressInformationContainerView"}),Komodo.Application.DeviceActivationDetailsView=Komodo.UI.View.extend({viewKey:"DeviceActivationDetailsView"}),Komodo.Application.DeviceActivationDetailsController=Komodo.UI.Controller.extend({init:function(){this._super(),this.set("processVersion","v1.1"),this.set("processName","Link Products with Xtraview process")},start:function(){var e=this;e.registerModel("deviceActivationData",Komodo.Models.AssociateProductsModel),e._super()},stop:function(){this._super()}}),Ember.Handlebars.helper("deviceGridRowHelper",function(e,t,a,s,o){var r,i=this;if(a!==Komodo.AccountTypes.BOX_OFFICE){var n=void 0;Komodo.Services.queryService.getJSON("DeviceProcessing/Get?deviceID="+e.SerialNumber,{async:!1}).done(function(e){n=e}).fail(function(){Komodo.error("[ERROR] : could not retrieve Device Info")}),Ember.isEmpty(n)||Ember.isEmpty(n.MaterialInformation)||null===n.MaterialInformation.Type||"embedded"!==n.MaterialInformation.Type.toLowerCase()||(void 0!==e.MACAddress?e.LinkedSmartcard=e.MACAddress:e.LinkedSmartcard=void 0);var c='<td align="center" width="200px">'+(Ember.empty(e.SecondaryHardware.Hardware)?"":"<B>")+e.SerialNumber+" - "+e.LinkedSmartcard+(Ember.empty(e.SecondaryHardware.Hardware)?"":"</B>")
;isHoliDayHomeSwitchingDevice=!1,t!==Komodo.AgreementTypes.HOLIDAY_HOME||Ember.isEmpty(e)||Ember.isEmpty(e.ListOfService)||($.each($.grep(e.ListOfService.Service,function(e){var t=$.grep(e.ProductDetail.ProductFeatures,function(e){return void 0!==e});t.length>0&&s!==t[0].Value&&e.ProductDetail.Type.toUpperCase()===i.getValueFromConstant("ProductsConstants","productsConstants.products.PRINCIPAL_CATEGORY").toUpperCase()&&(isHoliDayHomeSwitchingDevice=!0)})),c+=" "+(isHoliDayHomeSwitchingDevice?kl.value("locale.associateProducts:associateProducts.descHHSwitched"):kl.value("locale.associateProducts:associateProducts.descHH"))),$.each($.grep(e.SecondaryHardware.Hardware,function(e){c+='<br/><br/><br><img src="./Content/Images/link/l.svg"><br/><br/>',c+=e.SerialNumber+" - "+e.LinkedSmartcard})),c+="</td>",c+='<td align="left" width="170px">',$.each($.grep(e.ListOfService.Service,function(e){return e.ProductDetail.Type===i.getValueFromConstant("ProductsConstants","productsConstants.products.PRINCIPAL_CATEGORY")}),function(e,t){c+=t.ProductDetail.Description+"</br>"}),c+="</td>",c+='<td align="left" width="140px">',$.each($.grep(e.ListOfService.Service,function(e){return e.ProductDetail.Type===i.getValueFromConstant("ProductsConstants","productsConstants.products.PRINCIPAL_CATEGORY")}),function(e,t){r=t.Status,c+=t.Status+"</br>"}),c+="</td>",c+='<td align="left" width="150px">',$.each($.grep(e.ListOfService.Service,function(e){return e.ProductDetail.Type===i.getValueFromConstant("ProductsConstants","productsConstants.products.ADDON_CATEGORY")||e.ProductDetail.Type===i.getValueFromConstant("ProductsConstants","productsConstants.products.HIGH_DEFINITION_ADDON")}),function(e,t){c+=t.ProductDetail.Description+"</br></br>"}),c+="</td>",c+='<td align="left" width="150px">',$.each($.grep(e.ListOfService.Service,function(e){return e.ProductDetail.Type===i.getValueFromConstant("ProductsConstants","productsConstants.products.ADDON_CATEGORY")||e.ProductDetail.Type===i.getValueFromConstant("ProductsConstants","productsConstants.products.HIGH_DEFINITION_ADDON")}),function(e,t){c+=t.Status+"</br></br>"}),c+="</td>",c+='<td align="left" width="150px">';var d=4;if(Ember.empty(e.SecondaryHardware.Hardware)||(c+=kl.value("locale.associateProducts:associateProducts.xtraview")+"</br>"),Ember.empty($.grep(this.get("boxOfficeList"),function(t){return t.serialNumber===e.SerialNumber}))||(c+=kl.value("locale.associateProducts:xtraView.boxOffice")+"</br>",d--),$.each($.grep(e.ListOfService.Service,function(e){return e.ProductDetail.Type===i.getValueFromConstant("ProductsConstants","productsConstants.products.INSURANCE_CATEGORY")}),function(e,t){d--,c+=t.ProductDetail.Type+"</br>"}),$.each($.grep(e.ListOfService.Service,function(e){return e.ProductDetail.Type===i.getValueFromConstant("ProductsConstants","productsConstants.products.ACCESS_CATEGORY")||e.ProductDetail.Type.toLowerCase()===i.getValueFromConstant("ProductsConstants","productsConstants.productType.DPP24").toLowerCase()}),function(e,t){t.ProductDetail.Description.length>16?d-=2:d--,c+=t.ProductDetail.Description+"</br>"}),!Ember.empty(e.SecondaryHardware.Hardware))for(;d>0;)c+="</br>",d--;if($.each($.grep(e.SecondaryHardware.Hardware,function(e){for(c+="</br>",d=4,Ember.empty($.grep(i.get("boxOfficeList"),function(t){return t.serialNumber===e.SerialNumber}))||(c+=kl.value("locale.associateProducts:xtraView.boxOffice")+"</br>",d--),$.each($.grep(e.ListOfService.Service,function(e){return e.ProductDetail.Type===i.getValueFromConstant("ProductsConstants","productsConstants.products.INSURANCE_CATEGORY")}),function(e,t){c+=t.ProductDetail.Type+"</br>",d--}),$.each($.grep(e.ListOfService.Service,function(e){return e.ProductDetail.Type===i.getValueFromConstant("ProductsConstants","productsConstants.products.ACCESS_CATEGORY")||e.ProductDetail.Type.toLowerCase()===i.getValueFromConstant("ProductsConstants","productsConstants.productType.DPP24").toLowerCase()}),function(e,t){t.ProductDetail.Description.length>16?d-=2:d--,c+=t.ProductDetail.Description+"</br>"});d>0;)c+="</br>",d--})),c+="</td>",c+='<td align="left" width="150px">',d=4,Ember.empty(e.SecondaryHardware.Hardware)||(c+=r+"</br>",!Ember.isEmpty(r)&&r.length>16&&d--),$.each($.grep(i.get("boxOfficeList"),function(t){return t.serialNumber===e.SerialNumber}),function(e,t){d--,c+=t.status+"</br>"}),$.each($.grep(e.ListOfService.Service,function(e){return e.ProductDetail.Type===i.getValueFromConstant("ProductsConstants","productsConstants.products.ACCESS_CATEGORY")||e.ProductDetail.Type===i.getValueFromConstant("ProductsConstants","productsConstants.products.INSURANCE_CATEGORY")||e.ProductDetail.Type.toLowerCase()===i.getValueFromConstant("ProductsConstants","productsConstants.productType.DPP24").toLowerCase()}),function(e,t){t.Status.length>16?d-=2:d--,c+=t.Status+"</br>"}),!Ember.empty(e.SecondaryHardware.Hardware))for(;d>0;)c+="</br>",d--;return $.each($.grep(e.SecondaryHardware.Hardware,function(e){for(c+="</br>",d=4,$.each($.grep(i.get("boxOfficeList"),function(t){return t.serialNumber===e.SerialNumber}),function(e,t){d--,c+=t.status+"</br>"}),$.each($.grep(e.ListOfService.Service,function(e){return e.ProductDetail.Type===i.getValueFromConstant("ProductsConstants","productsConstants.products.ACCESS_CATEGORY")||e.ProductDetail.Type===i.getValueFromConstant("ProductsConstants","productsConstants.products.INSURANCE_CATEGORY")||e.ProductDetail.Type.toLowerCase()===i.getValueFromConstant("ProductsConstants","productsConstants.productType.DPP24").toLowerCase()}),function(e,t){t.Status.length>16?d-=2:d--,c+=t.Status+"</br>"});d>0;)c+="</br>",d--})),c+="</td>",new Handlebars.SafeString(c)}}),Komodo.Application.XtraViewController=Komodo.UI.Controller.extend({init:function(){var e=this;Ember.FEATURES["ember-routing-drop-deprecated-action-style"]=!0,Komodo.log("Constructing Link Products with Xtraview controller"),e.set("processVersion","v1.1"),e.set("processName","Link Products with Xtraview"),e.set("showDevicesLinking",!0),!0===e.get("isThirdPointEnabled")?e.set("radioButtonXtraView",[{title:kl.value(e._localeBase+"xtraView"),value:"0"},{title:kl.value(e._localeBase+"thirdPoint"),value:"1"},{title:kl.value(e._localeBase+"breakXtraView"),value:"2"}]):e.set("radioButtonXtraView",[{title:kl.value(e._localeBase+"xtraView"),value:"0"},{title:kl.value(e._localeBase+"breakXtraView"),value:"2"}]),e.dataService=Komodo.Services.AssociateProductsDataService.create(),e._super()},start:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("SAClarityRoles","RolesAndPermissions").done(function(t){switch(t){case!0:Komodo.Services.securityService.hasPermission(e.allowInsuranceSelection)?e.set("disableInsuranceSelection",!1):e.set("disableInsuranceSelection",!0);break;default:e.set("disableInsuranceSelection",!1)}}).fail(function(e){Komodo.Services.log("Error while checking permissions. Error Details:"+e)}),Komodo.Services.featureToggleService.isEnabled("XtraViewThirdPoint","LimitToPRMCustomers").done(function(t){e.set("limitToPRMCustomers",t)}).fail(function(e){Komodo.Services.log("Error while checking feature toggle:. Error Details:"+e)}),Komodo.Services.featureToggleService.isEnabled("XtraViewThirdPoint","IsThirdPointEnabled").done(function(t){e.set("isThirdPointEnabled",t)}).fail(function(e){Komodo.Services.log("Error while checking feature toggle:. Error Details:"+e)}),Komodo.Services.featureToggleService.isEnabled("XtraView","IsAwaitingPaymentAllowed").done(function(t){e.set("isAwaitingPaymentXtraviewAllow",t)}).fail(function(e){Komodo.Services.log("Error while checking feature toggle:. Error Details:"+e)}),Komodo.Services.featureToggleService.isEnabled("AssociateProducts","FAStatus").done(function(t){e.set("FAStatus",t)}).fail(function(e){Komodo.Services.log("Error while checking feature toggle. Error Details:"+e)}),!0===e.get("isThirdPointEnabled")?e.set("radioButtonXtraView",[{title:kl.value(e._localeBase+"xtraView"),value:"0"},{title:kl.value(e._localeBase+"thirdPoint"),value:"1"},{title:kl.value(e._localeBase+"breakXtraView"),value:"2"}]):e.set("radioButtonXtraView",[{title:kl.value(e._localeBase+"xtraView"),value:"0"},{title:kl.value(e._localeBase+"breakXtraView"),value:"2"}]),e.getLookUpData().done(function(){e.getcustomerDetails()&&(e.loadCustomerAccountInfo(),e.getcustomerInfo(),e.getCustomerProductDetails())}),Komodo.Services.featureToggleService.isEnabled("XtraViewThirdPoint","IsPaymentDetailsRequired").done(function(t){e.set("isPaymentDetailsRequired",t)}).fail(function(e){Komodo.Services.log("Error while checking feature toggle: Error Details:"+e)});var t="Residential"+e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.DefaultCurrencyQualifier.QUALIFIER")+"ProductPriceDetail";Komodo.Services.cachedDataService.fetch(t).done(function(t){e.set("productPriceDetailsSet",[]),e.set("productPriceDetailsSet",jQuery.parseJSON(t))}).fail(function(e){Komodo.Services.log("Error while retrieving ProductPriceDetail: Error Details:"+e)}),e._super()},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,12e5,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},getValueFromConstant:function(e,t){return Komodo.Services.AssociateProductsService.getValueFromConstant(e,t)},stop:function(){this.get("radioButtonXtraView").clear(),this.set("defaultAccount",void 0),this.set("customerPaymentDetail",void 0),this.set("isMnetAnalogueCustomer",void 0),this.get("deviceModelPairs").clear(),this.clearAll(),this._super()},clearAll:function(){this.get("customerAccountDetail").clear(),this.get("devicesList").clear(),this.get("primaryDevicesList").clear(),this.get("secondaryDevicesList").clear(),this.get("thirdPointDevicesList").clear(),this.get("xtraViewList").clear(),this.set("xtraViewSelection",void 0),this.get("boxOfficeList").clear(),this.get("devicesListDCC").clear(),this.get("holidaySwitchedDevices").clear(),this.hideBusyIndicator()},getLookUpData:function(){var e=this,t=void 0,a=void 0,s=void 0,o=$.Deferred();return t=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),a=Komodo.Services.localizationService.getCurrentLanguage(),Komodo.UI.cacheDataService.getHardwareCpc(),Komodo.Services.cachedDataService.fetch("Location").done(function(r){var i=JSON.parse(r);e.set("countries",[]),$.each($.makeArray(i.Countries.Country),function(t,a){e.get("countries").addObject(a)}),Komodo.Services.cachedDataService.fetch("Country").done(function(r){e.set("isoData",[]),e.set("isoData",r),e.isoData.forEach(function(e){t===e.key&&(s=e.key)}),void 0!==s&&e.set("country",s),Komodo.Services.cachedDataService.fetch("HardwareModelDetail",{domain:t,qualifier:a}).done(function(s){var r=JSON.parse(s);e.set("deviceModelPairs",[]),$.each(r.PrimaryHardwareModels.PrimaryHardwareModel,function(t,a){e.get("deviceModelPairs").addObject(a)}),Komodo.Services.cachedDataService.fetch("ProductCategoryAndProductDetail").done(function(t){e.set("productCategoryAndProductDetail",[]),e.set("productCategoryAndProductDetail",JSON.parse(t).ProductCategories.ProductCategory),Komodo.Services.cachedDataService.fetch("MethodOfPayment").done(function(t){e.methodsOfPaymentCanonical.clear(),$.each(t,function(t,a){e.methodsOfPaymentCanonical.addObject(a)}),Komodo.Services.featureToggleService.isEnabled("CustomerGlobal","EnableAddressOverRide").done(function(t){e.set("_enableAddressOverRide",t),o.resolve()}).fail(function(){Komodo.error("[ERROR] : could not retrieve feature toggle CustomerGlobal.EnableAddressOverRide")})}).fail(function(e){Komodo.Services.log("Error while checking MethodOfPayment. Error Details:"+e)})}).fail(function(){Komodo.error("[ERROR] : could not retrieve ProductCategoryAndProductDetail domain = "+t+"/ qualifier = "+a)})}).fail(function(){Komodo.error("[ERROR] : could not retrieve CountryISO domain = "+t+"/ qualifier = "+a)})}).fail(function(){Komodo.error("[ERROR] : could not retrieve CountryISO domain = "+t+"/ qualifier = "+a)})}).fail(function(){Komodo.error("[ERROR] : could not retrieve Location domain = "+t+"/ qualifier = "+a)}),o},loadCustomerAccountInfo:function(){var e=this;e.dataService.initialiseObjects(e);var t=e.getCustomerID();void 0!==t?void 0===e.get("defaultAccount")&&e.dataService.retrieveFinancialAccounts(t).done(function(t){var a=t;switch(a){case void 0:case null:case"":e.showMessageForFA(kl.value(e._localeBase+"noFinancialaccounts"),"customerProfile");break;default:switch(a.ResponseMessage){case void 0:case null:case"":e.showMessageForFA(kl.value(e._localeBase+"noFinancialaccounts"),"customerProfile");break;default:switch(a.ResponseMessage.Payload){case void 0:case null:case"":e.showMessageForFA(kl.value(e._localeBase+"noFinancialaccounts"),"customerProfile");break;default:var s=a.ResponseMessage.Payload.ListOfAccount;switch(s){case void 0:case null:case"":break;default:var o=new Komodo.Services.ProductAndServiceMaintenanceHelper,r=o.createArrayForSingleElement(s.Account);if($.each(r,function(t,a){switch(a.Status){case e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.AccountStatusNotAllowed.CLOSED"):e.set("accountStatus","'closed'"),e.set("isAccountStatusAllowed",!1);break;case e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.AccountStatusNotAllowed.BADDEBTWRITEOFF"):e.set("accountStatus","'bad debt write off'"),e.set("isAccountStatusAllowed",!1);break;case e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.AccountStatusNotAllowed.CANCELLED"):e.set("accountStatus","'cancelled'"),e.set("isAccountStatusAllowed",!1);break;case e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.AccountStatusNotAllowed.DOUBTFULDEBT"):e.set("accountStatus","'doubtful debt'"),e.set("isAccountStatusAllowed",!1);break;case e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.AccountStatusNotAllowed.OVERDUE"):e.set("accountStatus","'overdue'"),e.set("isAccountStatusAllowed",!1);break;case e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.AccountStatusNotAllowed.PIRACY"):e.set("accountStatus","'piracy'"),e.set("isAccountStatusAllowed",!1);break;case e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.AccountStatusNotAllowed.DISCONNECTED"):e.set("accountStatus","'disconnected'"),e.set("isAccountStatusAllowed",!1);break;case e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.AccountStatusNotAllowed.FRAUDULENT"):e.set("accountStatus","'fraudulent'"),e.set("isAccountStatusAllowed",!1);break;default:e.set("isAccountStatusAllowed",!0)}return a.Type!==Komodo.AccountTypes.DSTV_RES&&a.Type!==Komodo.AccountTypes.GOTV_RES&&a.Type!==Komodo.AccountTypes.BOX_OFFICE&&a.Type!==Komodo.AccountTypes.PAYMENT_PLAN||!0!==e.get("isAccountStatusAllowed")||e.mappPaymentDetails(a.PaymentDetails,e.get("customerPaymentDetail")),!0}),e.get("FAStatus")&&0===$.grep(r,function(t){return t.Status==e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.AccountStatusAllowed.OPEN")||t.Status==e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.AccountStatusAllowed.OVERDUE")||t.Status==e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.AccountStatusAllowed.DISCONNECTED")||t.Status==e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.AccountStatusAllowed.SUSPENDED")}).length){var i=kl.value(e._localeBase+"noAccountStatusAllowed",{accountStatus:e.get("accountStatus")});return void e.showMessageForFA(i,"manageViewing")}if(!e.get("FAStatus")&&0===$.grep(r,function(t){return t.Status==e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.AccountStatusAllowed.OPEN")||t.Status==e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.AccountStatusAllowed.SUSPENDED")}).length){var i=kl.value(e._localeBase+"noAccountStatusAllowed",{accountStatus:e.get("accountStatus")});return void e.showMessageForFA(i,"manageViewing")}void 0===e.get("customerPaymentDetail.MethodOfPaymentId")&&e.showMessageForFA(kl.value(e._localeBase+"noMethodOfpayment"),"account")}}}}}).fail(function(t){t=JSON.parse(t),Ember.isEmpty(t.responseJSON)?e.showMessageForFA(JSON.stringify(t),"customerProfile"):e.showMessageForFA(t.responseJSON.Message,"customerProfile")}):e.showMessageForFA(kl.value(e._localeBase+"customerNotFound"),"customerProfile")},showMessageForFA:function(e,t){var a=this;switch(Ember.isEmpty(e)&&(e=kl.value(a._localeBase+"incompleteCustomerDetails")),t){case"customerProfile":a.get("_customerClassSelected")===a.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.CUSTOMERCLASS_SPECIALIST")&&(t="specialistCustomerProfile");break;case"editCustomerDetail":a.get("_customerClassSelected")===a.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.CUSTOMERCLASS_SPECIALIST")&&(t="editSpecialistCustomerDetail")}Komodo.Controls.MessageBoxController.show(kl.value(a._localeBase+"useCaseTitle"),e,Komodo.Controls.MessageBoxOkButton,a,"LCAI00005","danger").response=function(e){"ok"===e&&Komodo.Services.uiService.transitionTo(t)}},mappPaymentDetails:function(e,t){var a=this;a.get("isPaymentDetailsRequired")?a.set("customerPaymentDetail",e):(t.set("BankAccountNumber",""),t.set("BankAccountTypeDescription",""),t.set("BankAccountTypeId",""),t.set("BankBranchId",""),t.set("BankCodeId",""),t.set("BankName",""),t.set("DebitOrderDay",""),t.set("MethodOfPaymentDescription",""),t.set("MethodOfPaymentId",""),t.set("PayerIdNumber",""),t.set("PayerIdType",""),t.set("PayerName",""))},getCustomerID:function(){var e=this,t=void 0,a=Komodo.Services.customerProfileService.getCustomerPersonalDetail();return Ember.isEmpty(a)||void 0!==a.customerNo&&(t=a.customerNo,e.customerPersonalDetails.firstName=a.firstName,e.customerPersonalDetails.surname=a.lastName,e.customerPersonalDetails.residenceType=void 0,e.customerPersonalDetails.deviceUsage="Customer"),t},getcustomerInfo:function(){var e=this,t=Komodo.Services.ProductAndServiceMaintenanceHelper.create();Komodo.Services.customerProfileService.getCustomerPersonalDetail();t.isCustomerIdIsAvailableToRetriveData()&&(e.getNewProcessID(),e.retrieveFinancialAccounts(e.get("customerRefNo")))},resultAccountMessage:{ResponseMessage:{Payload:{ListOfAccount:{Account:[]}}}},retrieveFinancialAccounts:function(e){var t=this,a=this.resultAccountMessage;a.ResponseMessage.Payload.ListOfAccount.Account.clear();var s=void 0;Komodo.Services.queryService.getJSON("/AccountProfile/Get?id="+e).done(function(e){a.ResponseMessage.Payload.ListOfAccount.Account.clear(),$.each(e.Account,function(e,a){t.get("customerAccountDetail").pushObject(a)}),$.each(t.get("customerAccountDetail"),function(e,a){$.each(a.ListOfAgreement.Agreement,function(e,o){void 0!==o.PersonalDetail?customerPersonalDetails={firstName:o.PersonalDetail.FirstName,surname:o.PersonalDetail.Surname}:customerPersonalDetails={firstName:personalDetails.firstName,surname:personalDetails.lastName},$.each(o.ListOfHardware.Hardware,function(e,r){Komodo.Services.queryService.getJSON("/DeviceProcessing/Get?deviceID="+r.SerialNumber).done(function(e){if(Ember.isEmpty(e)||Ember.isEmpty(e.MaterialInformation)){if(!Ember.isEmpty(r.SecondaryHardware.Hardware)&&(s=void 0,a.Type!==Komodo.AccountTypes.BOX_OFFICE)){var i=t.extractDecoderDetails(r);Ember.isEmpty(i)||(decoderModelKey=i[0],decoderModel=i[1],decoderType=i[2]),t.hardwareDetailsExtract(r,o.Type,o.UID,decoderType,decoderModel,decoderModelKey,s,null)}}else if(s=e.MaterialInformation.SAPMaterial,a.Type!==Komodo.AccountTypes.BOX_OFFICE){var i=t.extractDecoderDetails(r);Ember.isEmpty(i)||(decoderModelKey=i[0],decoderModel=i[1],decoderType=i[2]),t.hardwareDetailsExtract(r,o.Type,o.UID,decoderType,decoderModel,decoderModelKey,s,e.MaterialInformation.Type)}else if(a.Type===Komodo.AccountTypes.BOX_OFFICE){var n;n=void 0!==r.SerialNumber?r.SerialNumber:void 0,void 0!==r.ListOfService&&void 0!==r.ListOfService.Service&&r.ListOfService.Service.length>0&&$.each(r.ListOfService.Service,function(e,a){return a.ProductDetail.UID!==t.getValueFromConstant("ProductsConstants","productsConstants.products.BOX_OFFICE_PRODUCT_ID")||"principal"!==a.ProductDetail.Type.toString().toLowerCase()||"boxoffice"!==a.ProductDetail.Name.toString().toLowerCase()&&"bo"!==a.ProductDetail.Name.toString().toLowerCase()?"pcbo"===a.ProductDetail.Name.toString().toLowerCase()?(t.get("pcboList").pushObject({serialNumber:n,status:a.Status,serviceName:a.ProductDetail.Name.toString().toLowerCase()}),!0):void 0:(t.get("boxOfficeList").pushObject({serialNumber:n,status:a.Status,serviceName:a.ProductDetail.Name.toString().toLowerCase()}),!0)})}}).error(function(e){var a=JSON.stringify(e);t.messageFinancialAccountsErrorReceived(e),Komodo.log("retrieveFinancialAccounts ajax call failed. Error: "+a)})})})})}).error(function(e){var a=JSON.stringify(e);t.messageFinancialAccountsErrorReceived(e),Komodo.log("retrieveFinancialAccounts ajax call failed. Error: "+a)})},messageFinancialAccountsErrorReceived:function(e){Komodo.Services.eventAggregator.publish("FinancialAccountsForManageViewingErrorReceived"),Komodo.Controls.MessageBoxController.show(kl.value(that._localeBase+"errorTitle"),JSON.stringify(e),Komodo.Controls.MessageBoxOkButtons,this,"id5446673","danger")},getcustomerDetails:function(){var e=this,t=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),a=Komodo.Services.customerProfileService.getCustomerPersonalDetail();if(void 0!==a&&(e.set("_customerClassSelected",a.customerClass),e.set("_customerTypeSelected",a.typeId)),Komodo.Services.featureToggleService.isEnabled("XtraViewThirdPointDCC","IsSpecialistCustmerTypeCheckRequired").done(function(t){e.set("isSpecialistCustmerTypeCheckRequired",t)}).fail(function(e){Komodo.Services.log("Error while checking feature toggle:. Error Details:"+e)}),e.get("_customerClassSelected")===e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.CUSTOMERCLASS_SPECIALIST")&&!0===e.get("isSpecialistCustmerTypeCheckRequired"))switch(e.get("_customerTypeSelected")){case e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.PANELIST"):case e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.CUSTOMERTYPE_MULTICHOICE"):case e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.CUSTOMERTYPE_NASPERS"):case e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.AGENCIES"):case e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.EMPLOYEE_RELATED"):case e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.FIELD_TRIALS"):e.set("isAllowInsurance",!0);break;default:e.set("isAllowInsurance",!1)}else e.set("isAllowInsurance",!0);return t.isCustomerIdIsAvailableToRetriveData()?(e.set("customerRefNo",t.getCustomerIdToRetrieveData()),!0):(Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"customerNotFound"),kl.value(e._localeBase+"searchCustomer"),Komodo.Controls.MessageBoxOkButtons,e,"id123456","danger").response=function(e){"ok"===e&&Komodo.Services.uiService.transitionTo("/home")},!1)},extractDecoderDetails:function(e){var t=this,a=[];return a.pushObject(void 0!==e.ProductDetail.Model?e.ProductDetail.Model.split(" ")[0]:""),Ember.isEmpty(e.ProductDetail.ProductFeatures)?a.pushObject(void 0!==e.ProductDetail.Name?e.ProductDetail.Name:""):$.each(e.ProductDetail.ProductFeatures,function(e,s){return s.Description!==t.getValueFromConstant("ProductsConstants","productsConstants.products.DEVICE_MODEL_DESCRIPTION")||(a.pushObject(s.Value),a)}),a.pushObject(void 0!==e.ProductDetail.Model?e.ProductDetail.Model.split(" ")[1]:""),a},hardwareDetailsExtract:function(e,t,a,s,o,r,i,n){var c,d,l,u,h,m=this,p=void 0,v=0;c=void 0!==e.SerialNumber?e.SerialNumber:void 0,d=void 0!==e.SmartcardDetail&&void 0!==e.SmartcardDetail.Model&&null!==e.SmartcardDetail.Model?e.SmartcardDetail.Model.split(" ")[1]:void 0,void 0!==e.ListOfService&&void 0!==e.ListOfService.Service&&e.ListOfService.Service.length>0&&(p=e.ListOfService),h=e.ProductDetail.UID,u=void 0!==h&&null!==h?m.getDecoderCpcByproductId(h):void 0,Komodo.UI.cacheDataService.isGotvDevice(u)?(l=void 0!==e.MACAddress?e.MACAddress:void 0,v=3):Komodo.UI.cacheDataService.isMobileDevice(u)?(l=void 0!==e.MACAddress?e.MACAddress:void 0,v=2):null!=n&&"EMBEDDED"==n?(l=void 0!==e.MACAddress?e.MACAddress:void 0,v=1):(l=void 0!==e.LinkedSmartcard?e.LinkedSmartcard:void 0,v=1),Ember.isEmpty(e.InsuranceDetail)&&!Ember.isEmpty($.grep($.grep(m.productPriceDetailsSet.Products.Product,function(e){return e.Details.split(",")[6]==m.getValueFromConstant("ProductsConstants","productsConstants.products.INSURANCE_PRODUCT_CATEGORY")}),function(e){return $.inArray(r,e.AllowDevice.split(","))>-1}))&&m.get("devicesListDCC").pushObject({display:o+"-"+c,DeviceSerialNumber:c}),Komodo.UI.cacheDataService.isGotvDevice(u)||Komodo.UI.cacheDataService.isMobileDevice(u)||c&&(Ember.isEmpty(e.SecondaryHardware.Hardware)?m.populateDevicesList(s,o,r,c,p,t,a,v,l,d,u,i):m.populateXtraviewDevicesList(s,c,e.SecondaryHardware.Hardware))},populateXtraviewDevicesList:function(e,t,a){var t,s=this,o=Ember.Object.extend({init:function(){this._super();var a=this;a.set("display",e+"-"+t),a.set("decoderSerialNumber",t),a.set("secondaryDecoders",[])}}).create();$.each(a,function(e,a){t=void 0!==a.SerialNumber?a.SerialNumber:"";var r=s.extractDecoderDetails(a);if(!Ember.isEmpty(r))var i=(r[0],r[1]);Ember.isEmpty(a.InsuranceDetail)&&!Ember.isEmpty($.grep($.grep(s.productPriceDetailsSet.Products.Product,function(e){return e.Details.split(",")[6]==s.getValueFromConstant("ProductsConstants","productsConstants.products.INSURANCE_PRODUCT_CATEGORY")}),function(e){return $.inArray(decoderModelKey,e.AllowDevice.split(","))>-1}))&&s.get("devicesListDCC").pushObject({display:i+"-"+t,DeviceSerialNumber:t});var n=Ember.Object.extend({init:function(){this._super();var e=this;e.set("display",i+"-"+t),e.set("decoderSerialNumber",void 0!==a.SerialNumber?a.SerialNumber:""),e.set("smartcardSerialNumber",void 0!==a.LinkedSmartcard?a.LinkedSmartcard:"")}}).create();o.secondaryDecoders.push(n)}),s.xtraViewList.pushObject(o)},populateDevicesList:function(e,t,a,s,o,r,i,n,c,d,l,u){var h=this,m=!1,p=Ember.Object.extend({init:function(){this._super();var m=this;m.set("isGotvDecoder",3===n),m.set("isMobileDecoder",2===n),m.set("display",t+"-"+s),m.set("decoderSerialNumber",s),m.set("smartcardSerialNumber",c),m.set("smartcardType",d),m.set("decoderCpcType",l),m.set("modelKey",a),m.set("decoderType",e),m.set("agreementType",r),m.set("agreemntUId",i),m.set("servicesDetails",void 0),m.set("isHoliDayHomeSwitching",!1),m.set("schedule","N"),m.set("isStolenSuspended",!1),m.set("isGotvOpenPresent",!1),m.set("isMnetDTTPresent",!1),m.set("isPrincipalPresent",!1),m.set("isPrincipalActive",!1),m.set("deviceSAPKey",u),m.set("isAwaitingPayment",!1);var p={Service:[]};void 0===o&&(p=void 0),void 0!==o&&i&&$.each(o.Service,function(e,t){if(!Ember.isEmpty(t.ProductDetail.ProductFeatures)&&r===Komodo.AgreementTypes.HOLIDAY_HOME){var a=$.grep(t.ProductDetail.ProductFeatures,function(e){return void 0!==e});a.length>0&&i!==a[0].Value&&t.ProductDetail.Type.toUpperCase()===h.getValueFromConstant("ProductsConstants","productsConstants.products.PRINCIPAL_CATEGORY").toUpperCase()&&h.holidaySwitchedDevices.pushObject({parent:a[0].Value,child:i})}switch(t.ProductDetail.Type){case h.getValueFromConstant("ProductsConstants","productsConstants.products.PRINCIPAL_CATEGORY"):case h.getValueFromConstant("ProductsConstants","productsConstants.products.HIGH_DEFINITION_ADDON"):case h.getValueFromConstant("ProductsConstants","productsConstants.products.ADDON_CATEGORY"):case h.getValueFromConstant("ProductsConstants","productsConstants.products.ACCESS_CATEGORY"):case h.getValueFromConstant("ProductsConstants","productsConstants.products.FREE_TO_AIR"):case h.getValueFromConstant("ProductsConstants","productsConstants.products.DPP_CATEGORY"):switch(t.Status.toUpperCase()){case h.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_CANCELLED"):return!1;case h.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_ACTIVE"):case h.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_PENDING"):case h.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_FREE"):case h.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_DELAYED_ACTIVATION"):case h.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_AWAITING_PAYMENT"):case h.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_SUSPENDED"):case h.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_DISCONNECTED"):case h.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_FREE_VIEW_ACTIVE"):case h.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_FREE_VIEW_PENDING_ACTIVATION"):h.getValueFromConstant("ProductsConstants","productsConstants.products.PRINCIPAL_CATEGORY").toUpperCase()!==t.ProductDetail.Type.toUpperCase()&&h.getValueFromConstant("ProductsConstants","productsConstants.products.ADDON_CATEGORY").toUpperCase()!==t.ProductDetail.Type.toUpperCase()||h.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_DISCONNECTED").toUpperCase()===t.Status.toUpperCase()&&m.set("isDisconnected",!0),h.getValueFromConstant("ProductsConstants","productsConstants.products.PRINCIPAL_CATEGORY")===t.ProductDetail.Type&&(m.set("isPrincipalPresent",!0),t.Status.toUpperCase()===h.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_ACTIVE")?m.set("isPrincipalActive",!0):t.Status.toUpperCase()===h.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_DELAYED_ACTIVATION")?m.set("schedule","Y"):h.get("isAwaitingPaymentXtraviewAllow")&&t.Status.toUpperCase()===h.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_AWAITING_PAYMENT")&&m.set("isAwaitingPayment",!0)),t.Status.toUpperCase()===h.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_SUSPENDED")&&m.set("isStolenSuspended",!0),m.get("isGotvDecoder")&&(t.ProductDetail.UID!==h.getValueFromConstant("ProductsConstants","productsConstants.products.PRINCIPAL_GOTVOPEN_ID")&&m.set("isPrincipalPresent",!0),t.ProductDetail.UID===h.getValueFromConstant("ProductsConstants","productsConstants.products.GOTV_OPEN_PRODUCT_ID")&&m.set("isGotvOpenPresent",!0),t.ProductDetail.UID===h.getValueFromConstant("ProductsConstants","productsConstants.products.MNET_DTT_PRODUCT_ID")&&m.set("isMnetDTTPresent",!0)),p.Service.pushObject(t)}}}),m.set("servicesDetails",p)}}).create();isHoliDayHomeSwitchingDevice=!1,$.each(h.get("holidaySwitchedDevices"),function(e,t){p.agreemntUId!==t.parent&&p.agreemntUId!==t.child||p.agreemntUId===t.child&&(isHoliDayHomeSwitchingDevice=!0)}),Ember.isEmpty(p.servicesDetails)||Ember.isEmpty(p.servicesDetails.Service)||$.grep(p.servicesDetails.Service,function(e){return e.ProductDetail.UID===h.getValueFromConstant("ProductsConstants","productsConstants.products.MNDCSN1")}).length>0&&(m=!0),!("N"===p.schedule&&void 0===p.servicesDetails||"N"===p.schedule&&!Ember.isEmpty(p.servicesDetails)&&(Ember.isEmpty(p.servicesDetails.Service)||$.grep(p.servicesDetails.Service,function(e){return h.getValueFromConstant("ProductsConstants","productsConstants.productType.DPP24")!==e.ProductDetail.Type.toUpperCase()
})<1)||(p.isPrincipalActive||p.isAwaitingPayment)&&void 0!==p.servicesDetails)||void 0===p.smartcardSerialNumber||Ember.isEmpty(p.smartcardSerialNumber)||p.isStolenSuspended||isHoliDayHomeSwitchingDevice||p.decoderCpcType===h.getValueFromConstant("ProductsConstants","productsConstants.products.ANALOGUE_HARDWARE")||m||h.devicesList.pushObject(p)},populatePrimaryDevicesList:function(){var e=this;$.each(e.get("devicesList"),function(t,a){if(!Ember.isEmpty($.grep(e.get("deviceModelPairs"),function(e){return e.SystemKey===a.modelKey})))switch(e.get("xtraViewSelection")){case"0":e.get("primaryDevicesList").pushObject(a);break;case"1":Ember.isEmpty($.grep(e.getValueFromConstant("ProductsConstants","productsConstants.products.THIRDPOINT_PRIMARY").split(","),function(e){return e===a.decoderType})[0])||e.get("primaryDevicesList").pushObject(a)}})},populateSecondayDevicesList:function(){var e=this,t=[];e.get("secondaryDevicesList").clear(),e.set("secondaryDecoder",null),Ember.isEmpty(e.get("primaryDecoder"))?e.set("disableSecondary",!0):(t=$.grep(e.get("deviceModelPairs"),function(t){return t.SAPKey===e.get("primaryDecoder.deviceSAPKey")})[0],Ember.isEmpty(t)||(t=t.SecondaryHardwareModels.SecondaryHardwareModel),Ember.isEmpty(t)||$.each(e.get("devicesList"),function(a,s){e.primaryDecoder!==s&&$.each(t,function(t,a){if(a.SAPKey===s.deviceSAPKey)if(Ember.isEmpty(s.servicesDetails)){if(!0===e.get("xtraviewSecondPoint"))return e.secondaryDevicesList.pushObject(s),!1;if(!0===e.get("xtraviewThirdPoint")&&!Ember.isEmpty($.grep(e.getValueFromConstant("ProductsConstants","productsConstants.products.THIRDPOINT_SECONDARY").split(","),function(e){return e===s.decoderType})[0]))return e.get("secondaryDevicesList").pushObject(s),!1}else if($.grep(s.servicesDetails.Service,function(t){return $.grep(e.getValueFromConstant("ProductsConstants","productsConstants.products.ALLOW_DPP_AS_PRIMARY").split(","),function(e){return e===t.ProductDetail.UID})[0]}).length<1){if(!0===e.get("xtraviewSecondPoint"))return e.get("secondaryDevicesList").pushObject(s),!1;if(!0===e.get("xtraviewThirdPoint")&&!Ember.isEmpty($.grep(e.getValueFromConstant("ProductsConstants","productsConstants.products.THIRDPOINT_SECONDARY").split(","),function(e){return e===s.decoderType})[0]))return e.get("secondaryDevicesList").pushObject(s),!1}return!0})}),e.get("secondaryDevicesList").length>0?e.set("disableSecondary",!1):e.set("disableSecondary",!0))}.observes("primaryDecoder"),splProductValidationForXtraView:function(e){var t=this,a=t.getValueFromConstant("ProductsConstants","productsConstants.products.SPL_PRODUCTID"),s=Ember.isEmpty(a)?void 0:t.getValueFromConstant("ProductsConstants","productsConstants.products.SPL_PRODUCTID").split(",");if(!Ember.isEmpty(e)&&!Ember.isEmpty(e.servicesDetails)&&!Ember.isEmpty(e.servicesDetails.Service)&&""!==a&&void 0!==s)for(var o=e.servicesDetails.Service,r=0,i=o.length;r<i;r++)for(var n=0,c=s.length;n<c;n++)if(o[r].ProductDetail.UID===s[n]){var d=Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),kl.value(t._localeBase+"splXtraViewMessage"),Komodo.Controls.MessageBoxOkButtons,t,"id54456673","warning");d.response=function(e){if("ok"===e)return void t.populateSecondayDevicesList()}}},populateThirdPointDevicesList:function(){var e=this;e.get("thirdPointDevicesList").clear(),e.set("thirdPointDecoder",null),e.splProductValidationForXtraView(e.secondaryDecoder),!0===e.get("xtraviewThirdPoint")&&(Ember.isEmpty(e.secondaryDecoder)?e.set("disableThirdPoint",!0):($.each(e.get("secondaryDevicesList"),function(t,a){e.secondaryDecoder!==a&&e.thirdPointDevicesList.pushObject(a)}),e.get("thirdPointDevicesList").length>0?e.set("disableThirdPoint",!1):e.set("disableThirdPoint",!0)))}.observes("secondaryDecoder"),thirdPointDecoderSelectionChanged:function(){var e=this;e.splProductValidationForXtraView(e.thirdPointDecoder)}.observes("thirdPointDecoder"),getXtraViewTypeSelection:function(){var e=this;switch(e.get("primaryDevicesList").clear(),e.get("secondaryDevicesList").clear(),e.get("thirdPointDevicesList").clear(),e.set("primaryDecoder",null),e.set("secondaryDecoder",null),e.set("thirdPointDecoder",null),e.set("xtraviewSecondPoint",!1),e.set("xtraviewThirdPoint",!1),e.set("xtraviewBreak",!1),e.set("isThirdPoint",!1),e.get("xtraViewSelection")){case"0":if(e.populatePrimaryDevicesList(),e.get("devicesList").length<=1||0===e.get("primaryDevicesList").length)return Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),kl.value(e._localeBase+"noSufficientDevices"),Komodo.Controls.MessageBoxOkButtons,e,"id54456673","warning"),!1;e.set("xtraviewSecondPoint",!0),e.set("disableSecondary",!0);break;case"1":e.populatePrimaryDevicesList();var t=[];if($.each(e.get("devicesList"),function(a,s){Ember.empty($.grep(e.getValueFromConstant("ProductsConstants","productsConstants.products.THIRDPOINT_SECONDARY").split(","),function(e){return e===s.decoderType}))||t.pushObject(s.decoderType)}),e.get("devicesList").length<=2||0===e.get("primaryDevicesList").length||t.length<=1)return Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),kl.value(e._localeBase+"noSufficientDevices"),Komodo.Controls.MessageBoxOkButtons,e,"id54456673","warning"),!1;e.set("xtraviewThirdPoint",!0),e.set("disableSecondary",!0),e.set("disableThirdPoint",!0);break;case"2":if(Ember.isEmpty(e.get("xtraViewList")))return Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),kl.value(e._localeBase+"noExistingXtraviewNetwork"),Komodo.Controls.MessageBoxOkButtons,e,"id54456673","warning"),!1;e.set("xtraviewBreak",!0),Ember.isEmpty(e.get("xtraViewList")&&!Ember.isEmpty(e.get("xtraViewList")[0].secondaryDecoders))||2!==e.get("xtraViewList")[0].secondaryDecoders.length||e.set("isThirdPoint",!0);break;default:e.set("xtraviewSecondPoint",!1),e.set("xtraviewThirdPoint",!1),e.set("xtraviewBreak",!1)}}.observes("xtraViewSelection"),setInsurance:function(){var e=this;if(!Ember.empty(e.get("dccDecoder"))){Komodo.Controls.MessageBoxController.show(kl.value("locale.customer:customerInformation.dccAcceptTermAndConditionTitle"),kl.value("locale.customer:customerInformation.dccAcceptTermAndCondition"),Komodo.Controls.MessageBoxAcceptDeclineButtons,e,"id5446673","").response=function(t){if("accept"===t){e.getNewProcessID(),e.showBusyIndicator();var a=Ember.Object.extend({init:function(){this._super();var t=this;t.set("DeviceSerialNumber",e.get("dccDecoder").DeviceSerialNumber),t.set("PaymentDetails",e.get("customerPaymentDetail"))}}).create();Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo),Komodo.Services.queryService.postJSON("/Device/InsureDevice",{data:a}).done(function(t){Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"insuranceTitle"),kl.value(e._localeBase+"messageDCCSuccess"),Komodo.Controls.MessageBoxOkButton,e,"id5446673","success"),e.clearAll(),e.retrieveFinancialAccounts(e.get("customerRefNo")),e.hideBusyIndicator()}).error(function(t){e.hideBusyIndicator(),e.set("dccDecoder",null),Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"errorTitle"),t.responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,e,"id5446673","danger")})}else e.set("dccDecoder",null)}}}.observes("dccDecoder"),actions:{linkXtraViewHardware:function(){var e=this,t=[],a=[];if(Ember.empty(e.get("primaryDecoder")))return Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),kl.value(e._localeBase+"messgLinkProductsPrimary"),Komodo.Controls.MessageBoxOkButtons,e,"id54456673","warning"),!1;if(t.pushObject(e.get("primaryDecoder")),Ember.empty(e.get("secondaryDecoder")))return Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),kl.value(e._localeBase+"messgLinkProducts"),Komodo.Controls.MessageBoxOkButtons,e,"id54456673","warning"),!1;switch(t.pushObject(e.get("secondaryDecoder")),e.get("xtraViewSelection")){case"1":if(Ember.empty(e.get("thirdPointDecoder")))return Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),kl.value(e._localeBase+"messgLinkProductsThirdPoint"),Komodo.Controls.MessageBoxOkButtons,e,"id54456673","warning"),!1;t.pushObject(e.get("thirdPointDecoder"))}if($.grep(t,function(e){return!0===e.isPrincipalPresent}).length>1)return Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),kl.value(e._localeBase+"messageBothPrinciplePresent"),Komodo.Controls.MessageBoxOkButtons,e,"id54456673","warning"),!1;if($.grep(e.customerAccountDetail,function(t){return t.Status===e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.EMPLOYEE")}).length>-1&&e.primaryDecoder.agreementType!==Komodo.AgreementTypes.EMPLOYEE&&(e.secondaryDecoder.agreementType===Komodo.AgreementTypes.EMPLOYEE&&!Ember.isEmpty(e.secondaryDecoder.servicesDetails)&&!Ember.isEmpty(e.secondaryDecoder.servicesDetails.Service)||!Ember.isEmpty(e.thirdPointDecoder)&&e.thirdPointDecoder.agreementType===Komodo.AgreementTypes.EMPLOYEE&&!Ember.isEmpty(e.thirdPointDecoder.servicesDetails)&&!Ember.isEmpty(e.thirdPointDecoder.servicesDetails.Service))){return Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),kl.value(e._localeBase+"messageEmployeeMoveDevice"),Komodo.Controls.MessageBoxYesNoButtons,e,"id54456673","warning").response=function(e){"yes"===e&&Komodo.Services.uiService.transitionTo("/linkDelink")},!1}if($.grep(t,function(t){return t.modelKey===e.getValueFromConstant("ProductsConstants","productsConstants.products.SDPVR_SYSTEMKEY")}).length>0&&!Ember.isEmpty($.grep(t,function(t){return t.modelKey===e.getValueFromConstant("ProductsConstants","productsConstants.products.SDPVR_SYSTEMKEY")})[0].servicesDetails)&&$.grep($.grep(t,function(t){return t.modelKey===e.getValueFromConstant("ProductsConstants","productsConstants.products.SDPVR_SYSTEMKEY")})[0].servicesDetails.Service,function(t){return t.ProductDetail.UID==e.getValueFromConstant("ProductsConstants","productsConstants.products.SDPVR_ACCESS")}).length>0)return Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),kl.value(e._localeBase+"messageSDPVRProductsNotAllowedOnHD"),Komodo.Controls.MessageBoxOkButtons,e,"id54456673","warning"),!1;if(0==$.grep(t,function(e){return!0===e.isPrincipalPresent}).length)return Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),kl.value(e._localeBase+"messageNoPrinciplePresent"),Komodo.Controls.MessageBoxOkButtons,e,"id54456673","warning"),!1;if(e.get("limitToPRMCustomers")&&$.grep(t,function(e){return!0===e.isPrincipalPresent}).length>0&&"1"==e.get("xtraViewSelection")&&1!=$.grep($.grep(t,function(e){return!0===e.isPrincipalPresent})[0].servicesDetails.Service,function(t){return $.grep(e.getValueFromConstant("ProductsConstants","productsConstants.products.ALLOW_DPP_AS_PRIMARY").split(","),function(a){return a===t.ProductDetail.UID||t.ProductDetail.UID===e.getValueFromConstant("ProductsConstants","productsConstants.products.PRINCIPAL_PRODUCT_ID")})[0]}).length)return Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),kl.value(e._localeBase+"messageNoPrmPresent"),Komodo.Controls.MessageBoxOkButtons,e,"id54456673","warning"),!1;if($.grep(t,function(e){return e.agreementType===Komodo.AgreementTypes.HOLIDAY_HOME}).length>0&&$.grep(t,function(e){return e.agreementType!==Komodo.AgreementTypes.HOLIDAY_HOME}).length>0)return Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),kl.value(e._localeBase+"messageHHAndOtherAggrementPresent"),Komodo.Controls.MessageBoxOkButtons,e,"id54456673","warning"),!1;if(Ember.empty(e.get("country")))return message=kl.value(e._localeBase+"countryCodeMissing"),void Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),message,Komodo.Controls.MessageBoxOkButton,e,"id5446993","danger");$.each(t,function(e,t){0!=e&&a.pushObject(t.decoderSerialNumber)});var s=Ember.Object.extend({init:function(){this._super();var t=this;t.set("ActivateNow",!0),t.set("PrimaryDeviceSerialNumber",e.get("primaryDecoder").decoderSerialNumber),t.set("SecondaryDeviceSerialNumbers",a),t.set("MoveSoftware",!0)}}).create();e.getNewProcessID(),e.showBusyIndicator(),Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo),Komodo.Services.queryService.postJSON("/Device/CreateXtraViewNetwork",{data:s}).done(function(t){e.send("addSDPVRIfNeeded")}).error(function(t){e.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"errorTitle"),t.responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,e,"id5446673","danger")})},breakXtraViewNetwork:function(e){var t=[],a=this;$.each(e.content.secondaryDecoders,function(e,a){t.pushObject(a.smartcardSerialNumber)});var s=Ember.Object.extend({init:function(){this._super();var e=this;e.set("DevicesToRemoveFromNetwork",t),e.set("CreateQuote",!0)}}).create();a.getNewProcessID(),a.showBusyIndicator(),Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo),Komodo.Services.queryService.postJSON("/Device/BreakXtraViewNetwork",{data:s}).done(function(e){Komodo.Controls.MessageBoxController.show(kl.value(a._localeBase+"useCaseTitle"),kl.value(a._localeBase+"messageBreakExtraViewSuccess"),Komodo.Controls.MessageBoxOkButton,a,"id5446673","success"),a.clearAll(),a.retrieveFinancialAccounts(a.get("customerRefNo")),a.hideBusyIndicator()}).error(function(e){a.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(a._localeBase+"errorTitle"),e.responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,a,"id5446673","danger")})},addSDPVRIfNeeded:function(){var e=this;if((!Ember.isEmpty(e.secondaryDecoder)||!Ember.isEmpty(e.thirdPointDecoder))&&$.grep(e.getValueFromConstant("ProductsConstants","productsConstants.products.SDPVR_SYSTEMKEY").split(","),function(t){return t===(e.secondaryDecoder.modelKey||e.thirdPointDecoder.modelKey)}).length>0&&!Ember.isEmpty(e.primaryDecoder.servicesDetails)&&$.grep(e.primaryDecoder.servicesDetails.Service,function(t){return $.grep(e.getValueFromConstant("ProductsConstants","productsConstants.products.HDPVRPK").split(","),function(e){return e===t.ProductDetail.UID})}).length>0&&(Ember.isEmpty(e.secondaryDecoder.servicesDetails)||$.grep(e.secondaryDecoder.servicesDetails.Service,function(t){return $.grep(e.getValueFromConstant("ProductsConstants","productsConstants.products.SDPVR_ACCESS").split(","),function(e){return e===t.ProductDetail.UID})}).length<1||Ember.isEmpty(e.thirdPointDecoder.servicesDetails)||$.grep(e.thirdPointDecoder.servicesDetails.Service,function(t){return $.grep(e.getValueFromConstant("ProductsConstants","productsConstants.products.SDPVR_ACCESS").split(","),function(e){return e===t.ProductDetail.UID})}).length<1)){var t=[],a=e.getCompatibleAccessService();Ember.isEmpty(a)||(t.pushObject(a),e.send("addPackageToXtraviewNetwork",e.get("primaryDecoder").decoderSerialNumber,t))}else e.send("doneXtraViewing")},doneXtraViewing:function(){var e=this;Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),kl.value(e._localeBase+"messageExtraViewSuccess"),Komodo.Controls.MessageBoxOkButton,e,"id5446673","success"),e.clearAll(),e.retrieveFinancialAccounts(e.get("customerRefNo")),e.hideBusyIndicator()},addPackageToXtraviewNetwork:function(e,t){var a=this,s=Ember.Object.extend({init:function(){this._super();var a=this;a.set("PrimaryDeviceSerialNumber",e),a.set("ServiceIds",t)}}).create();Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+Komodo.Services.customerProfileService.getCustomerPersonalDetail().customerNo),Komodo.Services.queryService.postJSON("/Device/AddPackageToXtraviewNetwork",{data:s}).done(function(e){a.send("doneXtraViewing")}).error(function(e){this.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(kl.value(a._localeBase+"errorTitle"),e.responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,a,"id5446673","danger")})}},getNewProcessID:function(){this.startNewProcess()},getDecoderCpcByproductId:function(e){var t=this,a=!0,s=void 0;return $.each(t.productCategoryAndProductDetail,function(t,o){return void 0===o.Products.Product.length&&(o.Products.Product=[o.Products.Product]),$.each(o.Products.Product,function(t,s){return s.CanonicalKey===e&&(a=!1),a}),a||(s=o.CanonicalKey),a}),s},getCustomerProductDetails:function(){var e=this;if(e.set("isMnetAnalogueCustomer",!1),""!==e.getValueFromConstant("ProductsConstants","productsConstants.products.MNET")){var t=[e.getValueFromConstant("ProductsConstants","productsConstants.products.MNET")],a=Ember.Object.extend({init:function(){this._super();var a=this;a.set("CommercialProductIds",t),a.set("CustomerNumber",e.customerRefNo),a.set("AccountId",0)}}).create();e.getNewProcessID(),Komodo.Services.queryService.postJSON("/AccountProfile/GetCustomertProductDetails",{data:a}).done(function(t){t.CustomerProducts.length>0&&void 0!==t.CustomerProducts&&""!==t.CustomerProducts&&e.set("isMnetAnalogueCustomer",!0)}).error(function(e){var t=JSON.stringify(e);Komodo.log("getCustomerProductDetails ajax call failed. Error: "+t)})}},getCompatibleAccessService:function(){var e=this,t=Ember.A();return $.grep(e.productPriceDetailsSet.Products.Product,function(a){$.grep(e.getValueFromConstant("ProductsConstants","productsConstants.products.SDPVR_ACCESS").split(","),function(s){a.Details.split(",")[7]!==s||-1==a.AllowDevice.indexOf(e.secondaryDecoder.modelKey)&&(Ember.isEmpty(e.thirdPointDecoder)||-1==a.AllowDevice.indexOf(e.thirdPointDecoder.modelKey))||t.addObject(a)})}),t.length>0?t[0].Details.split(",").pop(-1):void 0},allowInsuranceSelection:"clarity://xtraView/allowInsuranceSelection",_localeBase:"locale.associateProducts:xtraView.",customerAccountDetail:[],radioButtonXtraView:[],country:void 0,xtraViewSelection:void 0,disableLinkUnlink:!1,showDevicesLinking:!1,xtraViewList:[],holidaySwitchedDevices:[],isAllowThirdPoint:!1,devicesList:[],primaryDevicesList:[],secondaryDevicesList:[],thirdPointDevicesList:[],productCategoryAndProductDetail:[],dataService:void 0,xtraviewSecondPoint:!1,xtraviewThirdPoint:!1,isThirdPoint:!1,xtraviewBreak:!1,disablePrimary:!1,disableSecondary:!0,disableThirdPoint:!0,_customerTypeSelected:void 0,_customerClassSelected:void 0,methodsOfPaymentCanonical:[],enableAddressOverRide:!1,customerRefNo:void 0,isAccountStatusAllowed:!0,accountStatus:void 0,boxOfficeList:[],pcboList:[],devicesListDCC:[],isPaymentDetailsRequired:!1,disableInsuranceSelection:!1,isAllowInsurance:!0,isThirdPointEnabled:!0,limitToPRMCustomers:!1,isSpecialistCustmerTypeCheckRequired:!1,productPriceDetailsSet:[],isMnetAnalogueCustomer:void 0,isAwaitingPaymentXtraviewAllow:!1,FAStatus:void 0}),Komodo.Application.DeviceAtAnotherLocationController=Komodo.UI.Controller.extend({_localeBase:"locale.associateProducts:deviceAtAnotherLocation.",init:function(){var e=this;Komodo.log("Constructing Device At Another Location controller"),e.set("processVersion","v1.1"),e.set("processName","ink Products with Xtraview process - Device At Another Location"),e._super()},start:function(){var e=this;e.set("_debitOrderAllowed",!1),e.set("deviceAtAnotherLocationModel",Komodo.Models.DeviceAtAnotherLocationModel.create()),e.set("deviceAddress",Komodo.Models.AddressModel.create()),e.populateCDMDataSets(),e.registerValidation(),e.loadCustomerDetails(),e.set("deviceAtAnotherLocationModel.deviceUsage","1"),e._super()},stop:function(){var e=this;if("associateProducts"!==Komodo.Application.Router.router.activeTransition.targetName){Komodo.Services.uiService.getController("associateProducts").stop()}var t=["residenceTypeList","bankList","accountTypeList","branchNameList","debitOrderDayList","banks","methodsOfPayment","defaultFinancialAccount","debitOrderFA","cashFA"];t.forEach(function(t){e.set(t,[])},t),this._super()},registerValidation:function(){var e=this;e.registerValidator(e.get("deviceAtAnotherLocationModel"),"firstName",{type:"string",minLength:1,maxLength:30,functions:Komodo.UI.Validators.firstNameAndLastNameExtendedAlphaValidator}),e.registerValidator(e.get("deviceAtAnotherLocationModel"),"lastName",{type:"string",minLength:2,maxLength:30,functions:Komodo.UI.Validators.firstNameAndLastNameExtendedAlphaValidator}),e.registerValidator(e.get("deviceAtAnotherLocationModel"),"residenceType",{isRequired:!0})},populateCDMDataSets:function(){var e=this;e.populateHierachicalCDMDataSet("EstablishmentTypeRelationship",e.get("residenceTypeList"))},getValueFromConstant:function(e,t){return Komodo.Services.AssociateProductsService.getValueFromConstant(e,t)},populateHierachicalCDMDataSet:function(e,t){Komodo.Services.cachedDataService.fetch(e,{domain:Komodo.Services.uiService.getController("application").get("_selectedCountryId"),qualifier:Komodo.Services.localizationService.getCurrentLanguage()}).done(function(a){var s=JSON.parse(a);switch(t.clear(),e){case"EstablishmentTypeRelationship":associateProductsController=Komodo.Services.uiService.getController("associateProducts"),$.each(s.CustomerClasses.CustomerClass,function(e,a){"Residential"===a.CanonicalValue&&"General"===a.CustomerTypes.CustomerType.CanonicalValue&&$.each(a.CustomerTypes.CustomerType.EstablishmentTypes.EstablishmentType,function(e,a){associateProductsController.data.selectedPrimaryDecoder.isGotvDecoder&&a.CanonicalKey===associateProductsController.getValueFromConstant("ProductsConstants","productsConstants.products.HOLIDAYHOME_CANONICALKEY")||(!associateProductsController.isMnetAnalogueCustomer||0!==$.grep($.grep(associateProductsController.data.selectedproductData,function(e){return!0===e.isPrincipalActive}),function(e){return $.grep(e.servicesDetails.Service,function(e){return e.ProductDetail.UID!==associateProductsController.getValueFromConstant("ProductsConstants","productsConstants.products.MNDCSN1")&&e.ProductDetail.UID!==associateProductsController.getValueFromConstant("ProductsConstants","productsConstants.products.MNET")}).length>0}).length&&associateProductsController.data.primaryProductSelection!==associateProductsController.getValueFromConstant("ProductsConstants","productsConstants.products.MNDCSN1")||a.CanonicalKey!==associateProductsController.getValueFromConstant("ProductsConstants","productsConstants.products.HOLIDAYHOME_CANONICALKEY"))&&(!associateProductsController.get("isAllowHHForFieldTrialsExternalDemoInternalDemo")||associateProductsController._customerTypeSelected!==associateProductsController.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.FIELD_TRIALS")&&associateProductsController._customerTypeSelected!==associateProductsController.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.EXTERNAL_DEMO")&&associateProductsController._customerTypeSelected!==associateProductsController.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.INTERNAL_DEMO")||a.CanonicalKey!==associateProductsController.getValueFromConstant("ProductsConstants","productsConstants.products.HOLIDAYHOME_CANONICALKEY"))&&t.addObject(a)})});break;default:Komodo.error("[ERROR] : Unknown Hierarchical dataset: "+e)}}).fail(function(){Komodo.error("[ERROR] : could not retrieve hierarchical CDM data for "+e)})},getCustomerID:function(){var e=void 0,t=Komodo.Services.ProductAndServiceMaintenanceHelper.create();return t.isCustomerIdIsAvailableToRetriveData()&&(e=t.getCustomerIdToRetrieveData()),e},loadCustomerDetails:function(){var e=this;e.customerPersonalDetails=Ember.Object.extend({title:void 0,firstName:void 0,surname:void 0,initial:void 0,birthDate:void 0,maritalStatus:void 0,identityDetailType:void 0,identityDetailValue:void 0,countryOfOrigin:void 0,expiryDate:void 0}).create();var t=Komodo.Services.AssociateProductsDataService.create(),a=t.resultCustomerDetailMessage;if(void 0!=a){var s=a.ResponseMessage.Payload.CustomerDetail;s&&(e.set("customerPersonalDetails.firstName",s.PersonalDetail.FirstName),e.set("customerPersonalDetails.surname",s.PersonalDetail.Surname),e.set("customerPersonalDetails.identityDetailValue",s.PersonalDetail.IdentityDetailValue),e.set("customerClass",s.Class),e.set("customerType",s.Type))}},showHideCustomerDetails:function(){var e=this,t=$("#komodo-show-details").css("top");"142px"!==t&&"114px"!==t||($("#komodo-customer-details").slideUp(500,function(){$("#otp-slide-item-customer").attr("class","otp-slide-close")}),$("#komodo-show-details").animate({top:40},500),$("#komodo-customer-page").animate({"padding-top":20},500,function(){e.showHideCustomerDetails()})),"40px"===t?($("#otp-slide-item").attr("class","otp-slide-open"),$("#komodo-customer-details").slideDown(500),$("#komodo-show-details").animate({top:136},{duration:500,queue:!1}),$("#komodo-customer-page").animate({"padding-top":100},{duration:500,queue:!1})):($("#komodo-customer-details").slideUp(500,function(){$("#otp-slide-item").attr("class","otp-slide-close")}),$("#komodo-show-details").animate({top:40},{duration:500,queue:!1}),$("#komodo-customer-page").animate({"padding-top":20},{duration:500,queue:!1}))},saveDeviceLocation:function(){var e=this.get("deviceAtAnotherLocationModel"),t=this,a=void 0,s=this.get("deviceAddress"),o=!1;if(a=Komodo.Services.uiService.getController("associateProducts"),a.data.selectedPrimaryDecoder.isGotvDecoder&&a.defaultAddressDetails.Country!==s.country){if(s.country===t.getValueFromConstant("ProductsConstants","productsConstants.products.SOUTH_AFRICA")){Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),kl.value(t._localeBase+"messgLesothoAddress"),Komodo.Controls.MessageOKButtons,t,"id5446673","warning")}else if(s.country===t.getValueFromConstant("ProductsConstants","productsConstants.products.LESOTHO")){Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),kl.value(t._localeBase+"messgSAAddress"),Komodo.Controls.MessageOKButtons,t,"id5446673","warning")}}else if($.each(a.data.selectedproductData,function(e,a){if(!(Ember.isEmpty(a.addressDetails)||Ember.isEmpty(s)||Ember.isEmpty(a.addressDetails.city)||Ember.isEmpty(s.city)||Ember.isEmpty(a.addressDetails.suburb)||Ember.isEmpty(s.suburb)||Ember.isEmpty(a.addressDetails.postalCode)||Ember.isEmpty(s.postalCode))&&a.addressDetails.city.toUpperCase()===s.city.toUpperCase()&&a.addressDetails.suburb.toUpperCase()===s.suburb.toUpperCase()&&a.addressDetails.postalCode===s.postalCode&&(Ember.isEmpty(a.addressDetails.streetName)&&Ember.isEmpty(s.streetName)||a.addressDetails.streetName.toUpperCase()===s.streetName.toUpperCase())){o=!0;Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),kl.value(t._localeBase+"messgAddressExists"),Komodo.Controls.MessageOKButtons,t,"id5446673","warning")}}),!o&&!this.validateData()){e.set("country",this.get("deviceAddress.country")),e.set("province",this.get("deviceAddress.province")),e.set("city",this.get("deviceAddress.city")),e.set("suburb",this.get("deviceAddress.suburb")),e.set("postalCode",this.get("deviceAddress.postalCode")),e.set("unit",this.get("deviceAddress.unit")),e.set("building",this.get("deviceAddress.building")),e.set("streetNo",this.get("deviceAddress.streetNumber")),e.set("streetName",this.get("deviceAddress.streetName")),e.set("isAddressOverride",this.get("deviceAddress.isAddressOverride"));var r=Komodo.Controls.MessageBoxController.show(kl.value(this._localeBase+"confirmationMessageHeader"),kl.value(this._localeBase+"confirmationMessage"),Komodo.Controls.MessageBoxYesNoButtons,this,"id5446673","alert");r.response=function(t){"yes"===t&&Komodo.Services.eventAggregator.publish("deviceAtAnotherLocationRedirect",e)}}},validateData:function(){var e="",t=this,a=!1,s=Object.keys(t.get("validators"));return $.each(s,function(s,o){var r="validators."+o;if(t.get(r).model===t.get("deviceAddress")||t.get(r).model===t.get("deviceAtAnotherLocationModel")){var i=r+".errors";t.get(i).length>0&&$.each(t.get(i),function(t,s){e+=s+"<br />",a=!0})}}),a&&Komodo.Controls.MessageBoxController.show(kl.value(t.get("_localeBase")+"deviceAtAnotherLocationTitle"),kl.value("controller.invalidDataMessage")+"<br />"+e,Komodo.Controls.MessageBoxOkButtons,this,"id5446673","warning"),a},cancel:function(){Komodo.Services.eventAggregator.publish("deviceAtAnotherLocationRedirect",null)},createDependentProperty:function(e,t){var a=this;t.forEach(function(t){void 0!==a.get("validators."+e)&&a.get("validators."+e).functions.addObject(t)}),void 0!==a.get("validators."+e)&&a.get("validators."+e).validate()},removeDependentProperty:function(e){var t=this;void 0!==t.get("validators."+e)&&(t.get("validators."+e).functions.clear(),t.get("validators."+e).validate())},fistNameLastNameObserverForValidation:function(){var e=this;Ember.isEmpty(e.get("deviceAtAnotherLocationModel.firstName"))&&Ember.isEmpty(e.get("deviceAtAnotherLocationModel.lastName"))?Ember.isEmpty(e.get("deviceAtAnotherLocationModel.firstName"))&&Ember.isEmpty(e.get("deviceAtAnotherLocationModel.lastName"))&&(e.removeDependentProperty("firstNameValidator"),e.removeDependentProperty("lastNameValidator")):(e.createDependentProperty("firstNameValidator",[Komodo.UI.Validators.RequiredValidator,Komodo.UI.Validators.MinLengthValidator,Komodo.UI.Validators.MaxLengthValidator,Komodo.UI.Validators.RegExValidator,Komodo.UI.Validators.firstNameAndLastNameExtendedAlphaValidator]),e.createDependentProperty("lastNameValidator",[Komodo.UI.Validators.RequiredValidator,Komodo.UI.Validators.MinLengthValidator,Komodo.UI.Validators.MaxLengthValidator,Komodo.UI.Validators.RegExValidator,Komodo.UI.Validators.firstNameAndLastNameExtendedAlphaValidator]))}.observes("deviceAtAnotherLocationModel.firstName","deviceAtAnotherLocationModel.lastName"),deviceUsageChanged:function(){"2"===this.get("deviceAtAnotherLocationModel.deviceUsage")?this.set("deviceAtAnotherLocationModel.isCustomerSelected",!1):this.set("deviceAtAnotherLocationModel.isCustomerSelected",!0)}.observes("deviceAtAnotherLocationModel.deviceUsage"),residenceTypeChanged:function(){var e=this,t=!1;switch(e.get("deviceAtAnotherLocationModel.residenceType")){case void 0:case null:case"":break;case e.get("holidayHomeKey"):var a=void 0,s=0,o=0;if(a=Komodo.Services.uiService.getController("associateProducts"),s=$.grep(a.data.selectedproductData,function(e){return e.isPrincipalActive&&e.agreemntTypeID!==Komodo.AgreementTypes.HOLIDAY_HOME&&!e.isGotvDecoder&&!e.isMobileDecoder||e.isPrincipalActive&&!0===e.isHoliDayHomeSwitching}).length,o=$.grep(a.data.selectedproductData,function(e){return e.agreemntTypeID===Komodo.AgreementTypes.HOLIDAY_HOME}).length,o+=$.grep(a.data.selectedSummaryProductData,function(t){return t.customerPersonalDetails.residenceType===e.holidayHomeKey}).length,$.each(["MULTICHOICE","NASPERS","AGENCIES"],function(a,s){e.get("_customerTypeSelected")===e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants."+s)&&(t=!0)}),!Ember.isEmpty(a.data.selectedPrimaryDecoder.agreemntUId))return Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"messgTitleHolidayHome"),kl.value(e._localeBase+"messgHolidayHomeExistingDevice"),Komodo.Controls.MessageOKButtons,e,"id5446673","warning"),void e.deviceAtAnotherLocationModel.set("residenceType",void 0);if(t)return Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"messgTitleHolidayHome"),kl.value(e._localeBase+"messgHolidayHomeSpecialists"),Komodo.Controls.MessageOKButtons,e,"id5446673","warning"),void e.deviceAtAnotherLocationModel.set("residenceType",void 0)
;if(0===s)return Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"messgTitleHolidayHome"),kl.value(e._localeBase+"messgHolidayHomePrinciple"),Komodo.Controls.MessageOKButtons,e,"id5446673","warning"),void e.set("deviceAtAnotherLocationModel.residenceType",void 0);if(!Ember.isEmpty(e.getValueFromConstant("ProductsConstants","productsConstants.products.SPL_PRODUCTID"))&&!Ember.isEmpty($.grep(e.getValueFromConstant("ProductsConstants","productsConstants.products.SPL_PRODUCTID").split(","),function(e){return e===a.data.primaryProductSelection}))&&a.isHolidayHomePrepaidAllowed&&a.data.primaryProductSelection)return Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"messgTitleHolidayHome"),kl.value(e._localeBase+"splHolidayHomePrepaidMessage"),Komodo.Controls.MessageOKButtons,e,"id5446673","warning"),void e.deviceAtAnotherLocationModel.set("residenceType",void 0)}}.observes("deviceAtAnotherLocationModel.residenceType"),actions:{saveDeviceLocation:function(){this.saveDeviceLocation()},cancel:function(){this.cancel()},showHideCustomerDetails:function(){this.showHideCustomerDetails()}},residenceTypeList:[],bankList:[],accountTypeList:[],branchNameList:[],debitOrderDayList:[],listItem:void 0,isSwitchingDevice:void 0,_customerTypeSelected:void 0,banks:[],methodsOfPayment:[],customerPaymentDetail:void 0,customerPersonalDetails:void 0,disableAccountInfo:!1,disableAccountInfodisablePaymentDay:!1,disablePaymentDay:!1,holidayHomeKey:"29",defaultFinancialAccount:[],debitOrderFA:[],cashFA:[],removeIPDay:!1,bankAccountType:void 0,disablemethodOfPayment:!1,customerClass:void 0,customerType:void 0}),Komodo.Application.CsiAssociateProductsController=Komodo.UI.Controller.extend({_localeBase:"locale.associateProducts:associateProducts.",_customerLocaleBase:"locale.customer:customerInformation.",_csiLocaleBase:"locale.csicustomer:addDevicesAndPackages.",_localecsiCustomer:"locale.csicustomer:",_principalCategoryName:"PRINCIPAL",_insuranceCategoryName:"INSURANCE",_hardwareCategoryName:"HARDWARE",_addOnCategoryFilterString:"ACCESS:ADDON:ADD ON",init:function(){this._super(),Komodo.log("Constructing Associate Products for Csi Customer controller"),this.requiresDependency("_eventAggregator",{singleton:Komodo.Services.eventAggregator}),this.getEventAggregator().subscribe(Komodo.EventNames.userLoggedIn,this,this.createCDMData),this.set("processVersion","v1.1"),this.set("processName","Associate Products for Csi Customer process"),this.createCDMData()},start:function(){var e=this;e.registerModel("viewModel",Komodo.Models.CsiAssociateProductsModel),e.registerValidation(),e.set("viewTitle",kl.value(e._csiLocaleBase+"useCaseTitle")),e.clearFormData(),Komodo.Services.customerProfileService.validateCustomerClass(e.csiClassId).done(function(t){if(void 0!==t&&null!==t&&void 0!==t.CustomerDetail&&null!==t.CustomerDetail)e.set("customerNo",t.CustomerNumber),e.set("companyName",t.CustomerDetail.CompanyName),e.viewModel.set("customerClass",t.CustomerDetail.Class),e.viewModel.set("customerType",t.CustomerDetail.Type),e.set("isButtonDisable",!1),e.populateViewingLocations(),e.retrieveFinancialDetails(e.customerNo);else{Komodo.Controls.MessageBoxController.show(kl.value(e._localecsiCustomer+"customerprofile.customerNotFoundTitle"),kl.value(e._localecsiCustomer+"customerprofile.customerNotFound"),Komodo.Controls.MessageOKButtons,e,"id5446673","warning").response=function(e){if("ok"===e)return void Komodo.Services.uiService.transitionTo("home")}}}),e.set("disableViewingPoints",!0),e.set("viewingPoints","1"),e._super()},stop:function(){this.hideBusyIndicator(),this._super()},getEventAggregator:function(){return this.get("_eventAggregator")},registerValidation:function(){var e=this;e.registerValidator(e,"smartcardDeviceNumber",{isRequired:!0,displayName:kl.value(e._localeBase+"smartCardOrDeviceNo"),minLength:6,maxLength:10,functions:Komodo.UI.Validators.alphanumericValidator}),e.registerValidator(e.get("viewModel"),"paymentGroup",{type:"string",isRequired:!0}),e.registerValidator(e.get("viewModel"),"viewingLocation",{type:"string",isRequired:!0}),e.registerValidator(e.get("viewModel"),"establishmentName",{type:"string",isRequired:!0}),e.registerValidator(e.get("viewModel"),"viewingPoints",{type:"string",isRequired:!0,minLength:1,maxLength:10,functions:Komodo.UI.Validators.numericValidator}),e.registerValidator(e.get("viewModel"),"activationDate",{isRequired:!0,minDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),displayName:kl.value(e._localeBase+"activationDate"),functions:Komodo.UI.Validators.DatePickerValidator})},createCDMData:function(){var e=this,t=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),a=Komodo.Services.uiService.getController("application").get("_selectedCountryDescription"),s=Komodo.Services.localizationService.getCurrentLanguage();e.set("loggedInCountryId",t),e.set("country",a),e.getHierachicalCDMData(t,s,"AgreementCustomerType",e.customerAgreementTypes),e.getHierachicalCDMData(t,s,"HardwareModelDetail",e.devicePairs),e.getHierachicalCDMData(t,s,"Location",e.countries),e.getHierachicalCDMData(t,s,"ProductPriceHelperSet",e.customerTypes);var o="CSI"+GetCustomerTypesConstants("DefaultCurrencyQualifier","QUALIFIER")+"ProductPriceDetail";e.productCategoryAndProducts.clear(),e.allProductCategories.clear(),Komodo.UI.cacheDataService.getProductCategoryAndProductsDataset(o,t,s,e.productCategoryAndProducts,e.allProductCategories)},setData:function(e,t,a,s,o){var r=this;r.set("isButtonDisable",!1),r.set("paymentGroup",e),r.set("viewingLocation",a),r.set("establishmentName",t),r.set("viewingPoints",s),r.set("installationType",o)},getHierachicalCDMData:function(e,t,a,s){var o=this;Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){var t=JSON.parse(e);switch(s.clear(),a){case"AgreementCustomerType":$.each($.makeArray(t.CustomerClasses.CustomerClass),function(e,t){s.addObject(t)}),o.populateViewingLocations();break;case"HardwareModelDetail":$.each($.makeArray(t.PrimaryHardwareModels.PrimaryHardwareModel),function(e,t){s.addObject(t)});break;case"Location":$.each($.makeArray(t.Countries.Country),function(e,t){s.addObject(t)});break;case"ProductPriceHelperSet":$.each($.makeArray(t.HelperSets.CustomerTypes.CustomerType),function(e,t){s.addObject(t)});break;default:Komodo.log("[ERROR] : Unknown Hierachical dataset: "+a)}}).fail(function(){Komodo.log("[ERROR] : could not retrieve hierarchical CDM data for "+a)})},getStaticCDMData:function(e,t,a,s){Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){s.clear(),$.each(e,function(e,t){s.addObject(t)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve static CDM data for "+a)})},isDeviceAdded:function(){var e=this,t=!1,a=e.get("smartcardDeviceNumber");return void 0!==a&&0!==e.viewModel.selectedproductData.length&&e.viewModel.selectedproductData.forEach(function(s){a!==s.decoderSerialNumber&&a!==s.smartcardSerialNumber||(Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._localeBase+"messgDeviceNo")+a+kl.value(e._localeBase+"messgDeviceNoValidation")),t=!0)}),t},matchingDeviceNotFound:function(e){var t=this,a=void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.Type?e.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.Type.toLowerCase():"device",s=e.ResponseMessage.Payload.ListOfHardware.Hardware.SerialNumber;Komodo.Controls.MessageBoxController.show(t.viewTitle,kl.value(t._localeBase+"paireDeviceNotFound")+a+kl.value(t._localeBase+"withSerialNumber")+s+" "+kl.value(t._localeBase+"findothermachingDevice"),Komodo.Controls.MessageBoxYesNoButtons,t,"id54456673","warning").response=function(e){"yes"===e&&t.showDevicePair()}},availableForUse:function(e){var t=this,a=kl.value(t._localeBase+"isTheDevice")+" "+e.ResponseMessage.Payload.ListOfHardware.Hardware.SerialNumber+" ";void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.SmartcardDetail&&null!==e.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcard&&(a=a+kl.value(t._localeBase+"andSmartCard")+" "+e.ResponseMessage.Payload.ListOfHardware.Hardware.SmartcardDetail.Type+" ",void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcard&&(a=a+e.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcard+" ")),a+=kl.value(t._localeBase+"numbersCorrect");var s=kl.value(t._localeBase+"confirmDevicePair");Komodo.Controls.MessageBoxController.show(s,a,Komodo.Controls.MessageBoxYesNoButtons,t,"id5446673","warning").response=function(a){"yes"===a&&(t.addHardwareToList(e.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.Model,e.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.ProductFeatures.Description,void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.SerialNumber?e.ResponseMessage.Payload.ListOfHardware.Hardware.SerialNumber:void 0,void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.SmartcardDetail?e.ResponseMessage.Payload.ListOfHardware.Hardware.SmartcardDetail.Type:void 0,void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcard?e.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcard:void 0,e.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.Type,t.insurance,!0),t.set("smartcardDeviceNumber",void 0),t.set("insurance",void 0),t.viewModel.set("insurance",void 0))}},showDevicePair:function(){var e=this;e.registerModel("hardwarePair",Komodo.Models.SavePairModel),e.registerValidator(e.get("hardwarePair"),"smartCardSerialNumber",{isRequired:!0,displayName:kl.value(e._localeBase+"smartcardNumber"),minLength:10,maxLength:10,functions:Komodo.UI.Validators.alphanumericValidator}),e.registerValidator(e.get("hardwarePair"),"decoderSerialNumber",{isRequired:!0,displayName:kl.value(e._localeBase+"deviceNumber"),minLength:10,maxLength:10,functions:Komodo.UI.Validators.alphanumericValidator});var t=Komodo.Application.ModalPaneController.create();t.popup(kl.value(e._localeBase+"updateDevice"),null,{context:{data:e.get("hardwarePair"),validators:e.validators,savepair:function(){!1!==e.canSubmitData(e.hardwarePair,kl.value(e._localeBase+"useCaseTitle"),{showInModal:!1})&&(e.set("popupaction","savepair"),t.close())}},closeCallback:function(){"savepair"===e.get("popupaction")&&(e.publishValidateHardwarePairingEvent(e.get("hardwarePair.decoderSerialNumber"),e.get("hardwarePair.smartCardSerialNumber")),e.set("popupaction",void 0))},view:Komodo.Application.SavePairView})},addHardwareToList:function(e,t,a,s,o,r,i,n){var c=this,d=Ember.Object.extend({init:function(){this._super(),this.display=t+"-"+a,this.decoderType=t,this.decoderSerialNumber=a,this.smartcardType=s,this.smartcardSerialNumber=o,this.decoderModel=e,this.selectedSecondaryDecoderno=void 0,this.decoderCpcType=r,this.insurance=!0===i?"Yes":"No"}}).create();n&&c.viewModel.selectedproductData.pushObject(d),$.each(c.devicePairs,function(e,t){t.CanonicalKey===d.decoderModel&&c.primaryDevicesList.pushObject(d)})},validateHardware:function(){var e=this,t="",a=0;return e.viewModel.selectedproductData.forEach(function(s){var o=!1;a=s.decoderSerialNumber.length,e.productServices.forEach(function(t){if(t.product.details.productID===e.viewModel.primaryProductSelection){var a=t.product&&t.product.allowDevice?t.product.allowDevice.split(","):[];$.inArray(s.decoderModel,a)>=0&&(o=!0)}}),Ember.isEmpty(e.listOfAddOnServices)||$.each(e.listOfAddOnServices,function(e,t){Ember.isEmpty(t.allProducts)||t.allProducts.forEach(function(e){if(!0===e.isSelected){var t=e.allowDevice?e.allowDevice.split(","):[];$.inArray(s.decoderModel,t)>=0&&(o=!0)}})}),!1===o&&(t=t+s.decoderSerialNumber+",")}),!(""!==t&&a>=10)||(Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._csiLocaleBase+"messageHardwareValidate")+"<br />"+t,Komodo.Controls.MessageBoxOkButton,e,"id5556673","danger"),!1)},populateViewingLocations:function(){var e,t=this;if(void 0!==t.customerAgreementTypes&&t.customerAgreementTypes.length>0&&void 0!==t.viewModel&&null!==t.viewModel){var a=$.grep($.makeArray(t.customerAgreementTypes),function(e){return e.CanonicalKey===t.viewModel.customerClass});if(a.length>0&&(e=$.grep($.makeArray(a[0].CustomerTypes.CustomerType),function(e){return e.CanonicalKey===t.viewModel.customerType}),e.length>0)){var s=$.makeArray(e[0].AgreementCustomerTypes.AgreementCustomerType).sort(function(e,t){return e.CanonicalValue>t.CanonicalValue?1:e.CanonicalValue<t.CanonicalValue?-1:0});if(t.viewModel.set("viewingLocations",s),void 0!==t.viewingLocation&&null!==t.viewingLocation){var o=$.grep($.makeArray(e[0].AgreementCustomerTypes.AgreementCustomerType),function(e){return e.CanonicalValue.toUpperCase()===t.viewingLocation.toUpperCase()});o.length>0&&t.viewModel.set("viewingLocation",o[0])}}}void 0!==t.viewModel&&void 0!==t.customerTypes&&(e=$.grep($.makeArray(t.customerTypes),function(e){return e.CanonicalKey===t.viewModel.customerType}),e.length>0&&t.viewModel.set("customerTypeSystemKey",e[0].SystemKey))},populateAddOns:function(e){var t=this;if(t.set("listOfAddOnServices",[]),e&&t.viewModel.viewingLocation){var a=Komodo.UI.cacheDataService.getProductsForCategory(t._addOnCategoryFilterString,!0,t.productCategoryAndProducts);Ember.isEmpty(a)||$.each(a,function(a,s){var o=s.value,r=[];if(Komodo.UI.cacheDataService.populateAddOnsBasedOnProduct(t.viewModel.customerTypeSystemKey,t.viewModel.selectedproductData,e,t.viewModel.viewingLocation.CanonicalValue,o,r),!Ember.isEmpty(r)){r.sort(function(e,t){var a=e.name?e.name.toLowerCase():"",s=t.name?t.name.toLowerCase():"";return a>s?1:a<s?-1:0});var i=[],n=[],c=Math.ceil(r.length/2);$.each(r,function(e,t){e<c?i.push(t):n.push(t)}),t.listOfAddOnServices.push({allProducts:r,firstColumnProducts:i,secondColumnProducts:n,key:s.key,panelTitle:kl.value(t._csiLocaleBase+"selectAddOnCategory").replace("#addoncategory#",s.key)})}})}},getListOfAccount:function(){var e=this,t=[];if(void 0!==e.viewModel.paymentGroup){var a=e.viewModel.paymentGroup,s=Komodo.Models.Account.create(),o=Komodo.canonicalFacadeFactory(s,["UID","StartDate","EndDate","PaymentDetail","ListOfAgreement_Agreement"]);o.set("UID",a.UID),o.set("StartDate",a.StartDate),o.set("EndDate",a.EndDate),o.set("PaymentDetail",e.getPaymentDetail(a)),o.set("ListOfAgreement_Agreement",e.getListOfAgreement(a)),t.push(s)}return t},getPaymentDetail:function(e){var t,a=Komodo.Models.PaymentDetail.create();if(void 0!==e.PaymentDetail){var s=e.PaymentDetail.DebitOrderDay?e.PaymentDetail.DebitOrderDay:e.InvoiceDay;"1"===e.PaymentDetail.MethodOfPayment?(t=Komodo.canonicalFacadeFactory(a,["MethodOfPayment","DebitOrderDay"]),t.set("MethodOfPayment",e.PaymentDetail.MethodOfPayment),t.set("DebitOrderDay",s)):e.PaymentDetail.MethodOfPayment>"1"&&(t=Komodo.canonicalFacadeFactory(a,["MethodOfPayment","AccountNumber","BankName","BranchName","BranchCode","DebitOrderDay","PayerName","PayerSurname","PayerIDType","PayerIDNumber"]),t.set("MethodOfPayment",e.PaymentDetail.MethodOfPayment),t.set("AccountNumber",e.PaymentDetail.AccountNumber),t.set("BankName",e.PaymentDetail.BranchName),t.set("BranchName",e.PaymentDetail.branchName),t.set("BranchCode",e.PaymentDetail.BranchCode),t.set("DebitOrderDay",s),t.set("PayerName",e.PaymentDetail.PayerName),t.set("PayerIDNumber",e.PaymentDetail.PayerIDNumber))}return a},getListOfAgreement:function(e){var t=this,a=Komodo.Services.systemService,s=[];if(void 0!==e){var o=Komodo.Models.Agreement.create(),r=Komodo.canonicalFacadeFactory(o,["UID","Name","Type","StartDate","ActivationDate","TermOfPayment","ConsumerDetail","ConsumerAddress","ListOfHardware_Hardware","NumberOfViewingPoints","LocationIndicator","InstallationType"]);t.selectedAgreement&&r.set("UID",t.selectedAgreement.UID),r.set("Name",t.viewModel.establishmentName),r.set("Type",t.viewModel.viewingLocation.CanonicalKey),r.set("TermOfPayment",void 0!==e.TermOfPayment&&null!==e.TermOfPayment?e.TermOfPayment:12),r.set("StartDate",void 0),r.set("ActivationDate",a.universalDateString(new Date(t.viewModel.activationDate))),r.set("ConsumerDetail",t.getConsumerDetail()),r.set("ConsumerAddress",t.getAddress(e)),r.set("ListOfHardware_Hardware",t.getListOfHardware()),r.set("NumberOfViewingPoints",t.viewModel.viewingPoints),r.set("InstallationType",t.viewModel.installationType),s.push(o)}return s},getConsumerDetail:function(){var e=this,t=Komodo.Models.PersonalDetail.create();return Komodo.canonicalFacadeFactory(t,["FirstName","Surname"]).set("Surname",e.companyName),t},getAddress:function(e){var t=Komodo.Models.Address.create(),a=Komodo.canonicalFacadeFactory(t,["Type","BuildingNumber","BuildingName","Street","Suburb","City","Province","Country","PostCode","PostBoxNumber"]);return e&&e.BillingAddress&&(a.set("Type","Agreement"),a.set("Street",e.BillingAddress.Street),a.set("Suburb",e.BillingAddress.Suburb),a.set("City",e.BillingAddress.City),a.set("Province",e.BillingAddress.Province),a.set("Country",e.BillingAddress.Country),a.set("PostCode",e.BillingAddress.PostCode),a.set("PostBoxNumber",e.BillingAddress.PostBoxNumber),a.set("BuildingNumber",e.BillingAddress.BuildingNumber),a.set("BuildingName",e.BillingAddress.BuildingName)),t},getListOfHardware:function(){var e=this,t=[];return e.viewModel.selectedproductData.forEach(function(a){var s=Komodo.Models.Hardware.create(),o=Komodo.canonicalFacadeFactory(s,["SerialNumber","LinkedSmartcard","SmartcardDetail","ProductDetail","ListOfService","SecondaryHardware","InsuranceStatus","WarrantyStatus","IsAwaitingInstallation"]);o.set("SerialNumber",a.decoderSerialNumber),o.set("LinkedSmartcard",a.smartcardSerialNumber),o.set("InsuranceStatus",void 0!==a.insurance&&null!==a.insurance?a.insurance:"No"),o.set("SmartcardDetail",e.getSmartcardDetail(a)),o.set("ProductDetail",e.getHardwareProductDetail(a)),o.set("ListOfService",e.getListOfServices()),t.push(s)}),t},getSmartcardDetail:function(e){var t=Komodo.Models.ProductDetail.create(),a=Komodo.canonicalFacadeFactory(t,["UID","Type","Name","Model","Description"]);return void 0!==e&&(a.set("UID",e.smartcardSerialNumber),a.set("Type",e.smartcardType)),t},getHardwareProductDetail:function(e){var t=this,a=Komodo.Models.ProductDetail.create(),s=Komodo.canonicalFacadeFactory(a,["UID","Type","Name","Model","Description"]);return void 0!==e&&(s.set("UID",e.decoderSerialNumber),s.set("Type",t.getDeviceType(e.decoderCpcType)),s.set("Model",e.decoderModel)),a},getListOfServices:function(){var e,t,a,s,o=this,r=Komodo.Models.ListOfService.create();return void 0!==o.viewModel.primaryProductSelection&&(e=Komodo.Models.Service.create(),t=Komodo.canonicalFacadeFactory(e,["UID","Status","ProductDetail"]),a=Komodo.Models.ProductDetail.create(),s=Komodo.canonicalFacadeFactory(a,["UID","Type","Name"]),t.set("UID",o.viewModel.primaryProductSelection),s.set("UID",o.viewModel.primaryProductSelection),s.set("Type",o._principalCategoryName),t.set("ProductDetail",a),r.Service.push(e)),Ember.isEmpty(o.listOfAddOnServices)||$.each(o.listOfAddOnServices,function(o,i){Ember.isEmpty(i.allProducts)||$.each(i.allProducts,function(o,n){!0===n.isSelected&&(e=Komodo.Models.Service.create(),t=Komodo.canonicalFacadeFactory(e,["UID","Status","ProductDetail"]),a=Komodo.Models.ProductDetail.create(),s=Komodo.canonicalFacadeFactory(a,["UID","Type","Name"]),t.set("UID",n.productID),s.set("UID",n.productID),s.set("Type",i.key.toUpperCase()),t.set("ProductDetail",a),r.Service.push(e))})}),r},getDeviceType:function(e){var t=this,a=void 0,s=Komodo.UI.cacheDataService.getProductsForCategory(t._hardwareCategoryName,!1,t.productCategoryAndProducts);if(!Ember.isEmpty(s)){var o=s[0].value;$.each(o,function(t,s){return s.SystemKey!==e||(a=s.CanonicalValue,!1)})}return a},clearFormData:function(){var e=this;e.viewModel.set("customerClass",void 0),e.viewModel.set("customerType",void 0),e.viewModel.set("paymentGroup",void 0),e.viewModel.set("viewingLocation",void 0),e.viewModel.set("establishmentName",void 0),e.viewModel.set("viewingPoints",void 0),e.viewModel.set("smartcardDeviceNumber",void 0),e.viewModel.set("insurance",void 0),e.viewModel.set("installationType",e.installationTypes[1].value),e.viewModel.set("primaryProductSelection",void 0),e.viewModel.set("accounts",[]),e.viewModel.set("viewingLocations",[]),e.viewModel.set("selectedproductData",[]),e.set("productServices",[]),e.set("listOfAddOnServices",[]),e.set("showDeviceView",!0),e.set("showPackageView",!1),e.set("showAddOnView",!1),e.set("addOnExist",!1)},clearAgreementData:function(){var e=this;e.viewModel.set("viewingLocation",void 0),e.viewModel.set("smartcardDeviceNumber",void 0),e.viewModel.set("insurance",void 0),e.viewModel.set("installationType",e.installationTypes[1].value),e.viewModel.set("primaryProductSelection",void 0),e.viewModel.set("selectedproductData",[]),e.set("productServices",[]),e.set("listOfAddOnServices",[]),e.set("showDeviceView",!0),e.set("showPackageView",!1),e.set("showAddOnView",!1),e.set("addOnExist",!1)},checkEstablishmentNameExists:function(){var e=this,t=!1;return void 0!==e.viewModel.paymentGroup&&void 0!==e.viewModel.establishmentName&&void 0!==e.viewModel.accounts&&$.each($.makeArray(e.viewModel.accounts),function(a,s){s.UID!==e.viewModel.paymentGroup.UID&&void 0!==s.ListOfAgreement&&void 0!==s.ListOfAgreement.Agreement&&$.each($.makeArray(s.ListOfAgreement.Agreement),function(a,s){return s.Name.toUpperCase()!==e.viewModel.establishmentName.toUpperCase()||(t=!0,!1)})}),t},readFileContent:function(e){var t=this,a=!1,s=[],o=kl.value(t._csiLocaleBase+"fileInvalid");if(e){var r=e.split("\n");null===r[0].match(/^[a-zA-Z0-9]+/)?(a=!0,o=kl.value(t._csiLocaleBase+"fileInvalidType")):$(r).each(function(e,t){if(!(t.length>=10))return""!==t&&(a=!0),o=o+"<br />"+t,!1;var r=Komodo.Models.HardwarePairing.create();return r.set("SmartcardSerialNumber",t.substring(0,10)),s.push(r),!0})}else a=!0,$(".file-upload-item:last").remove(),o=kl.value(t._csiLocaleBase+"fileBlank");a?($(".file-upload-item:last").remove(),Komodo.Controls.MessageBoxController.show(t.viewTitle,o,Komodo.Controls.MessageBoxOkButtons,this,"modelAddProducts","danger")):t.publishValidateMultipleHardwarePairingsEvent(s)},getNewProcessID:function(){this.startNewProcess()},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,3e4,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},viewingLocationChanged:function(){var e=this;e.set("selectedAgreement",void 0);var t=Komodo.UI.cacheDataService.getProductsForCategory(e._principalCategoryName,!1,e.productCategoryAndProducts);if(!Ember.isEmpty(t)){var a=t[0].value;Ember.isEmpty(a)||void 0===e.viewModel.viewingLocation||null===e.viewModel.viewingLocation?e.set("productServices",[]):Komodo.UI.cacheDataService.populateProductsBasedOnLocation(e.viewModel.customerTypeSystemKey,e.viewModel.viewingLocation.CanonicalValue,a,e.productServices)}}.observes("viewModel.viewingLocation"),productServicesChanged:function(){var e=this;void 0!==e.productServices&&e.productServices.length>0?(e.set("showAddSmartcardView",!0),e.set("showPackageView",!0),e.viewModel.set("activationDate",new Date)):(e.set("showAddSmartcardView",!1),e.set("showPackageView",!1))}.observes("productServices.length"),primaryProductSelectionChanged:function(){var e=this;e.populateAddOns(e.viewModel.primaryProductSelection)}.observes("viewModel.primaryProductSelection"),establishmentNameChanged:function(){var e=this;void 0!==e.viewModel.paymentGroup&&null!==e.viewModel.paymentGroup&&void 0!==e.viewModel.establishmentName&&void 0!==e.viewModel.paymentGroup.ListOfAgreement&&void 0!==e.viewModel.paymentGroup.ListOfAgreement.Agreement&&(e.set("selectedAgreement",void 0),$.each($.makeArray(e.viewModel.paymentGroup.ListOfAgreement.Agreement),function(t,a){if(a.Name.toUpperCase()===e.viewModel.establishmentName.toUpperCase()){var s=a.LocationIndicator;void 0!==e.viewingLocation&&null!==e.viewingLocation&&(s=e.viewingLocation),e.viewModel.set("establishmentName",a.Name),e.viewModel.set("installationType",a.InstallationType),e.viewModel.set("viewingPoints",a.NumberOfViewingPoints);var o=$.grep($.makeArray(e.viewModel.viewingLocations),function(e){return e.CanonicalValue.toUpperCase()===s.toUpperCase()});return o.length>0&&e.viewModel.set("viewingLocation",o[0]),e.set("selectedAgreement",a),!1}return!0}),void 0!==e.selectedAgreement&&null!==e.selectedAgreement||e.clearAgreementData(),e.set("viewingLocation",void 0))}.observes("viewModel.establishmentName"),paymentGroupChanged:function(){var e=this;e.clearAgreementData(),e.viewModel.set("establishmentName",void 0),e.set("selectedAgreement",void 0),e.viewModel.set("viewingPoints","1")}.observes("viewModel.paymentGroup"),actions:{addDevice:function(){var e=this;!1!==e.canSubmitData(e,e.viewTitle,{showInModal:!0})&&(e.isDeviceAdded()||(e.set("insurance",e.viewModel.insurance),e.publishValidateHardwarePairingEvent(void 0,e.get("smartcardDeviceNumber"))))},deleteDevice:function(e){var t=this;Komodo.Controls.MessageBoxController.show(kl.value("controls.datagrid.deleteTitle"),kl.value("controls.datagrid.defaultDeleteText"),Komodo.Controls.MessageBoxYesNoButtons,t,"delItem","warning").response=function(a){"yes"===a&&(t.viewModel.selectedproductData.removeObject(e.content),t.set("primaryDevicesList",$.grep(t.primaryDevicesList,function(t){return!(t.decoderSerialNumber===e.content.decoderSerialNumber)})))}},selectAddOns:function(){var e=this;if(!1!==e.canSubmitData(e.viewModel,e.viewTitle,{showInModal:!0})){if(void 0===e.viewModel.primaryProductSelection&&void 0===e.selectedAgreement)return void Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._csiLocaleBase+"messagePackageValidation"),Komodo.Controls.MessageBoxOkButton,e,"id145456673","danger");if(e.viewModel.selectedproductData.length>0){var t=e.viewModel.primaryProductSelection;void 0!==e.selectedAgreement&&void 0===e.viewModel.primaryProductSelection&&void 0!==e.selectedAgreement.ListOfHardware&&void 0!==e.selectedAgreement.ListOfHardware.Hardware&&$.each($.makeArray(e.selectedAgreement.ListOfHardware.Hardware),function(a,s){void 0!==s.ListOfService&&void 0!==s.ListOfService.Service&&$.each($.makeArray(s.ListOfService.Service),function(a,s){void 0!==s.ProductDetail&&s.ProductDetail.Type.toUpperCase()===e._principalCategoryName&&(t=s.ProductDetail.UID)})}),e.populateAddOns(t),e.set("showDeviceView",!1),e.set("showPackageView",!1),e.set("showAddOnView",!0)}else Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._csiLocaleBase+"messageDeviceToLinkValidation"),Komodo.Controls.MessageBoxOkButton,e,"id145456673","danger")}},cancelAddOns:function(){var e=this;Ember.isEmpty(e.listOfAddOnServices)||$.each(e.listOfAddOnServices,function(e,t){Ember.isEmpty(t.allProducts)||$.each(t.allProducts,function(e,t){!0===t.isSelected&&t.set("isSelected",!1)})}),e.set("showAddOnView",!1),e.set("showDeviceView",!0),e.productServices.length>0&&e.set("showPackageView",!0)},activateProducts:function(){var e=this;if(!1!==e.canSubmitData(e.viewModel,e.viewTitle,{showInModal:!0})){if(void 0===e.customerNo&&null===e.customerNo)return void Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._localeBase+"customerNubmerMissing"),Komodo.Controls.MessageBoxOkButton,e,"id5446883","danger");if(!0===e.checkEstablishmentNameExists())return void Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._csiLocaleBase+"messageEstablishmentValidation"),Komodo.Controls.MessageBoxOkButton,e,"id5446883","danger");if(void 0===e.viewModel.primaryProductSelection&&void 0===e.selectedAgreement)return void Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._csiLocaleBase+"messagePackageValidation"),Komodo.Controls.MessageBoxOkButton,e,"id145456673","danger");var t=!1;if(Ember.isEmpty(e.listOfAddOnServices)||$.each(e.listOfAddOnServices,function(e,a){Ember.isEmpty(a.allProducts)||a.allProducts.forEach(function(e){!0===e.isSelected&&(t=!0)})}),void 0===e.viewModel.primaryProductSelection&&!1===t)return void Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._csiLocaleBase+"messagePackageValidation"),Komodo.Controls.MessageBoxOkButton,e,"id145456673","danger");e.viewModel.selectedproductData.length>0?!0===e.validateHardware()&&(e.set("isButtonDisable",!0),e.publishAssociateProductsEvent()):Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._csiLocaleBase+"messageDeviceToLinkValidation"),Komodo.Controls.MessageBoxOkButton,e,"id145456673","danger")}},readTextFile:function(e){var t=this;e.error&&($(".file-upload-item:last").remove(),Komodo.Controls.MessageBoxController.show(t.viewTitle,kl.value(t._csiLocaleBase+"fileError")+" "+e.error.message,Komodo.Controls.MessageBoxOkButtons,this,"modelAddProducts","danger")),"text/plain"!==e.type&&"application/vnd.ms-excel"!==e.type?($(".file-upload-item:last").remove(),Komodo.Controls.MessageBoxController.show(t.viewTitle,kl.value(t._csiLocaleBase+"fileInvalidType"),Komodo.Controls.MessageBoxOkButtons,this,"modelAddProducts","danger")):t.readFileContent(e.content)}},retrieveCustomer:function(e){var t=this;Komodo.Services.queryService.getJSON("/CustomerProfile/?customerId="+e).done(function(e){if(e&&e.CustomerDetail){var a=e.CustomerDetail;"1"===a.Class&&(t.set("companyName",a.CompanyName),t.viewModel.set("customerClass",a.Class),t.viewModel.set("customerType",a.Type),t.populateViewingLocations())}else Komodo.Controls.MessageBoxController.show(kl.value(t._localecsiCustomer+"customerprofile.customerNotFoundTitle"),kl.value(t._localecsiCustomer+"customerprofile.customerNotFound"))}).error(function(e){var t=JSON.stringify(e);Komodo.log("retrieveCustomer ajax call failed. Error: "+t)})},retrieveFinancialDetails:function(e){var t,a=this;a.viewModel.accounts.clear();var s=Komodo.Services.customerProfileService.getFinancialAccounts();s&&s.ResponseMessage&&s.ResponseMessage.Payload&&s.ResponseMessage.Payload.ListOfAccount&&s.ResponseMessage.Payload.ListOfAccount.Account?($.each(s.ResponseMessage.Payload.ListOfAccount.Account,function(e,t){a.viewModel.accounts.addObject(t)}),void 0!==a.paymentGroup&&null!==a.paymentGroup&&(t=$.grep($.makeArray(a.viewModel.accounts),function(e){return e.UID===a.paymentGroup.UID}),t.length>0&&a.viewModel.set("paymentGroup",t[0]),a.set("paymentGroup",void 0)),void 0!==a.establishmentName&&null!==a.establishmentName&&(a.viewModel.set("establishmentName",a.establishmentName),a.set("establishmentName",void 0)),void 0!==a.viewingPoints&&null!==a.viewingPoints&&(a.viewModel.set("viewingPoints",a.viewingPoints),a.set("viewingPoints",void 0)),void 0!==a.installationType&&null!==a.installationType&&(a.viewModel.set("installationType",a.installationType),a.set("installationType",void 0))):Komodo.Services.queryService.getJSON("/AccountProfile/?id="+e).done(function(e){e&&e.Account&&($.each(e.Account,function(e,t){a.viewModel.accounts.addObject(t)}),void 0!==a.paymentGroup&&null!==a.paymentGroup&&(t=$.grep($.makeArray(a.viewModel.accounts),function(e){return e.UID===a.paymentGroup.UID}),t.length>0&&a.viewModel.set("paymentGroup",t[0]),a.set("paymentGroup",void 0)),void 0!==a.establishmentName&&null!==a.establishmentName&&(a.viewModel.set("establishmentName",a.establishmentName),a.set("establishmentName",void 0)),void 0!==a.viewingPoints&&null!==a.viewingPoints&&(a.viewModel.set("viewingPoints",a.viewingPoints),a.set("viewingPoints",void 0)),void 0!==a.installationType&&null!==a.installationType&&(a.viewModel.set("installationType",a.installationType),a.set("installationType",void 0)))}).error(function(e){var t=JSON.stringify(e);Komodo.log("retrieveFinancialAccounts ajax call failed. Error: "+t)})},publishValidateHardwarePairingEvent:function(e,t){var a=this,s=Komodo.Models.ValidateHardwarePairing.create(),o=Komodo.canonicalFacadeFactory(s,["Country","DecoderSerialNumber","SmartcardSerialNumber"]);o.set("Country",a.get("loggedInCountryId")),void 0!==e&&null!==e&&o.set("DecoderSerialNumber",e),
void 0!==t&&null!==t&&o.set("SmartcardSerialNumber",t),a.getNewProcessID(),Komodo.Services.AssociateProductsService.seachHardware(a,s).done(function(){Komodo.log("publishValidateHardwarePairingEvent() : ValidateHardwarePairing event has been published."),a.showBusyIndicator()}).fail(function(){Komodo.log("publishValidateHardwarePairingEvent() : ValidateHardwarePairing event has failed.")})},messageHardwareRetrievedReceived:function(e){var t=this,a=!1;t.hideBusyIndicator();var s=kl.value(t._csiLocaleBase+"messageValidation");if(void 0!==e.ResponseMessage.Payload.ListOfHardware&&void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware&&void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.Status){var o=e.ResponseMessage.Payload.ListOfHardware.Hardware;switch(s=kl.value(t._csiLocaleBase+"messageDeviceValidation"),s=s+"<br />"+kl.value(t._localeBase+"device")+": "+o.SerialNumber+" - "+kl.value(t._csiLocaleBase+"status")+": "+o.Status,o.Status.toUpperCase()){case"MATCHING DEVICE NOT FOUND":a=!0,t.matchingDeviceNotFound(e);break;case"AVAILABLE FOR USE":if(void 0!==o.LinkedSmartcardStatus)switch(o.LinkedSmartcardStatus.toUpperCase()){case"MATCHING DEVICE NOT FOUND":a=!0,t.matchingDeviceNotFound(e);break;case"AVAILABLE FOR USE":a=!0,t.availableForUse(e);break;default:s=s+"<br />"+kl.value(t._localeBase+"smartcard")+": "+o.LinkedSmartcard+" - "+kl.value(t._csiLocaleBase+"status")+": "+o.LinkedSmartcardStatus}else s=s+"<br />"+kl.value(t._localeBase+"smartcard")+": "+o.LinkedSmartcard+" - "+kl.value(t._csiLocaleBase+"status")+": "+o.LinkedSmartcardStatus}}!1===a&&Komodo.Controls.MessageBoxController.show(t.viewTitle,s,Komodo.Controls.MessageBoxOkButton,t,"id5556673","danger")},publishAssociateProductsEvent:function(){var e=this,t=Komodo.Models.AddCommercialProducts.create(),a=Komodo.canonicalFacadeFactory(t,["Country","CustomerUID","ListOfAccount_Account"]);a.set("Country",e.get("loggedInCountryId")),a.set("CustomerUID",e.customerNo),a.set("ListOfAccount_Account",e.getListOfAccount()),e.getNewProcessID(),Komodo.Services.AssociateProductsService.associateCommercialProducts(e,t).done(function(){e.showBusyIndicator(),e.set("isDisableActiveButton",!0),Komodo.log("publishAssociateProductsEvent() : Link Csi Products event has been published.")}).fail(function(){e.hideBusyIndicator(),Komodo.log("publishAssociateProductsEvent() : Link Csi Products event has failed.")})},messageCommercialProductsAddedReceived:function(e){var t=this,a=!0;if(t.hideBusyIndicator(),void 0!==e.ResponseMessage.Payload.ListOfAccount&&void 0!==e.ResponseMessage.Payload.ListOfAccount.Account){var s=e.ResponseMessage.Payload.CustomerUID,o=e.ResponseMessage.Payload.ListOfAccount.Account;if(void 0!==o.ListOfAgreement&&null!==o.ListOfAgreement&&void 0!==o.ListOfAgreement.Agreement){a=!1;var r=o.ListOfAgreement.Agreement,i=Komodo.Models.CsiAssociateProductsModel.create();i.set("establishmentName",r.Name),i.set("viewingPoints",r.NumberOfViewingPoints),i.set("installationType",r.InstallationType);var n=$.grep($.makeArray(t.viewModel.viewingLocations),function(e){return e.CanonicalKey===r.Type});n.length>0&&i.set("viewingLocation",n[0].CanonicalValue);var c=Komodo.UI.cacheDataService.getProductsForCategory(t._principalCategoryName,!1,t.productCategoryAndProducts),d=Komodo.UI.cacheDataService.getProductsForCategory(t._addOnCategoryFilterString,!0,t.productCategoryAndProducts);if(void 0!==r.ListOfHardware&&null!==r.ListOfHardware&&void 0!==r.ListOfHardware.Hardware&&$.each($.makeArray(r.ListOfHardware.Hardware),function(e,a){void 0!==a.ListOfService&&null!==a.ListOfService&&void 0!==a.ListOfService.Service&&$.each($.makeArray(a.ListOfService.Service),function(e,s){if(void 0!==s.ProductDetail){var o=Komodo.Models.ManageViewingGridModel.create();o.set("smartCardNumber",void 0!==a.SmartcardDetail?a.SmartcardDetail.UID:""),o.set("deviceNumber",a.SerialNumber),o.set("applyStyleForPrin",!1),o.set("applyStyleForAddOn",!1);var r;if(s.ProductDetail.Type.toUpperCase()===t._principalCategoryName){if(!Ember.isEmpty(c)){var n=c[0].value;r=$.grep($.makeArray(n),function(e){return e.product.details.productID===s.ProductDetail.UID}),r.length>0&&(o.set("prinPckName",r[0].product.details.name),o.set("addOnPckName","-"),o.set("applyStyleForPrin",!0))}}else Ember.isEmpty(d)||$.each(d,function(e,t){Ember.isEmpty(t.value)||(r=$.grep($.makeArray(t.value),function(e){return e.product.details.productID===s.ProductDetail.UID}),r.length>0&&(o.set("addOnPckName",r[0].product.details.name),o.set("prinPckName","-"),o.set("applyStyleForAddOn",!0)))});i.selectedproductData.addObject(o)}})}),i.set("paymentGroup",t.viewModel.paymentGroup),s){Komodo.Application.SharedObjectController.create().retrieveFinancialAccounts(s)}Komodo.Services.uiService.getController("csiActivationSummary").setResponseMessage(i,"AssociateProducts"),Komodo.Services.uiService.getRoute("application").transitionTo("csiActivationSummary"),t.clearFormData()}}!0===a&&Komodo.Controls.MessageBoxController.show(t.viewTitle,kl.value(t._localeBase+"messgProductLinkFail"))},publishValidateMultipleHardwarePairingsEvent:function(e){var t=this,a=Komodo.Models.ValidateMultipleHardwarePairings.create(),s=Komodo.canonicalFacadeFactory(a,["Country","ListOfHardwarePairings"]);s.set("Country",t.get("loggedInCountryId")),s.set("ListOfHardwarePairings",e),t.getNewProcessID(),Komodo.Services.AssociateProductsService.seachMultipleHardwares(t,a).done(function(){Komodo.log("publishValidateMultipleHardwarePairingsEvent() : ValidateMultipleHardwarePairings event has been published."),t.showBusyIndicator()}).fail(function(){Komodo.log("publishValidateMultipleHardwarePairingsEvent() : ValidateMultipleHardwarePairings event has failed.")})},messageMultipleHardwarePairingsValidatedReceived:function(e){var t=this,a=!0,s=!1;t.hideBusyIndicator();var o=kl.value(t._csiLocaleBase+"messageDeviceValidation");void 0!==e.ResponseMessage.Payload.ListOfHardware&&void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware&&(t.viewModel.set("selectedproductData",[]),t.set("smartcardDeviceNumber",void 0),t.set("insurance",void 0),t.viewModel.set("insurance",void 0),$(e.ResponseMessage.Payload.ListOfHardware.Hardware).each(function(e,r){void 0!==r.Status&&void 0!==r.LinkedSmartcardStatus?"AVAILABLE FOR USE"===r.Status.toUpperCase()&&"AVAILABLE FOR USE"===r.LinkedSmartcardStatus.toUpperCase()?(t.addHardwareToList(r.ProductDetail.Model,r.ProductDetail.ProductFeatures.Description,void 0!==r.SerialNumber?r.SerialNumber:void 0,void 0!==r.SmartcardDetail?r.SmartcardDetail.Type:void 0,void 0!==r.LinkedSmartcard?r.LinkedSmartcard:void 0,r.ProductDetail.Type,t.insurance,!0),s=!0):(a=!1,o=o+"<br />"+kl.value(t._localeBase+"device")+": "+r.SerialNumber+" - "+kl.value(t._csiLocaleBase+"status")+": "+r.Status,o=o+" paired with "+kl.value(t._localeBase+"smartcard")+": "+r.LinkedSmartcard+" - "+kl.value(t._csiLocaleBase+"status")+": "+r.LinkedSmartcardStatus):(a=!1,o=o+"<br />"+kl.value(t._localeBase+"device")+": "+r.SerialNumber+" - "+kl.value(t._csiLocaleBase+"status")+": "+r.Status)})),!1===a&&(!0===s?Komodo.Controls.MessageBoxController.show(t.viewTitle,kl.value(t._csiLocaleBase+"fileUploaded")+"<br />"+o,Komodo.Controls.MessageBoxOkButton):Komodo.Controls.MessageBoxController.show(t.viewTitle,o,Komodo.Controls.MessageBoxOkButton,t,"id5556673","danger"))},messageFailureMessageEventReceived:function(e){var t=this;t.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(t.viewTitle,e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButton,this,"id544246673","danger")},messageReceived:function(e){this.hideBusyIndicator(),Komodo.UI.log("[CsiAssociateProductsController.messageReceived] : event name = "+e.ResponseMessage.EventName)},messageDeliveryFailure:function(e){this.hideBusyIndicator(),Komodo.UI.warn("[CsiAssociateProductsController.messageDeliveryFailure] : messageId = "+e.messageId)},messageFault:function(e){this.hideBusyIndicator(),Komodo.UI.error("[CsiAssociateProductsController.messageFault] : messageId = "+e.messageId)},addOnExist:!1,csiClassId:Komodo.CustomerClass.CSI,viewTitle:void 0,smartcardDeviceNumber:void 0,country:void 0,countries:[],productCategoryAndProducts:[],allProductCategories:[],devicePairs:[],productServices:[],listOfAddOnServices:[],accessServices:[],insurance:void 0,primaryDevicesList:[],customerAgreementTypes:[],customerTypes:[],selectedGridItem:void 0,commandGridItemn:void 0,deleteGridItem:void 0,showDeviceView:!0,showAddSmartcardView:!1,showPackageView:!1,showAddOnView:!1,isButtonDisable:!1,installationTypes:[{title:Komodo.InstallationTypes.IPTV,value:Komodo.InstallationTypes.IPTV},{title:Komodo.InstallationTypes.STANDARD,value:Komodo.InstallationTypes.STANDARD}]}),Komodo.Application.CsiAddProductsController=Komodo.UI.Controller.extend({_localeBase:"locale.associateProducts:associateProducts.",_customerLocaleBase:"locale.customer:customerInformation.",_csiLocaleBase:"locale.csicustomer:addDevicesAndPackages.",_localecsiCustomer:"locale.csicustomer:",_principalCategoryName:"PRINCIPAL",_insuranceCategoryName:"INSURANCE",_hardwareCategoryName:"HARDWARE",_addOnCategoryFilterString:"ACCESS:ADDON:ADD ON",init:function(){this._super(),Komodo.log("Constructing Add Products for Csi Customer controller"),this.requiresDependency("_eventAggregator",{singleton:Komodo.Services.eventAggregator}),this.set("processVersion","v1.1"),this.set("processName","Add Products for Csi Customer process")},start:function(){var e=this;e.registerModel("viewModel",Komodo.Models.CsiAssociateProductsModel),e.registerValidation(),e.set("viewTitle",kl.value(e._csiLocaleBase+"useCaseTitle")),e.clearFormData(),Komodo.Services.customerProfileService.validateCustomerClass(e.csiClassId).done(function(t){if(void 0!==t&&null!==t&&void 0!==t.CustomerDetail&&null!==t.CustomerDetail)e.set("customerNo",t.CustomerNumber),e.set("companyName",t.CustomerDetail.CompanyName),e.viewModel.set("customerClass",t.CustomerDetail.Class),e.viewModel.set("customerType",t.CustomerDetail.Type),e.set("isButtonDisable",!1),e.createProductData(),e.populateViewingLocations(),e.retrieveFinancialDetails(e.customerNo);else{Komodo.Controls.MessageBoxController.show(kl.value(e._localecsiCustomer+"customerprofile.customerNotFoundTitle"),kl.value(e._localecsiCustomer+"customerprofile.customerNotFound"),Komodo.Controls.MessageOKButtons,e,"id5446673","warning").response=function(e){if("ok"===e)return void Komodo.Services.uiService.transitionTo("home")}}}),e.createCDMData(),e._super(),window.scrollTo(0,0)},stop:function(){this.hideBusyIndicator(),this._super()},getEventAggregator:function(){return this.get("_eventAggregator")},registerValidation:function(){var e=this;e.registerValidator(e.get("viewModel"),"paymentGroup",{type:"string",isRequired:!0,displayName:kl.value(e._localecsiCustomer+"paymentGroup.paymentGroup")}),e.registerValidator(e.get("viewModel"),"viewingLocation",{type:"string",isRequired:!0,displayName:kl.value(e._localecsiCustomer+"viewingInformation.viewingLocation")}),e.registerValidator(e.get("viewModel"),"establishmentName",{type:"string",isRequired:!0,displayName:kl.value(e._localecsiCustomer+"customerprofile.establishmentName")}),e.registerValidator(e.get("viewModel"),"viewingPoints",{type:"string",isRequired:!0,displayName:kl.value(e._localecsiCustomer+"customerprofile.numberViewingPoints"),minLength:1,maxLength:10,functions:Komodo.UI.Validators.numericValidator})},createCDMData:function(){var e=this,t=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),a=Komodo.Services.uiService.getController("application").get("_selectedCountryDescription"),s=Komodo.Services.localizationService.getCurrentLanguage();e.set("loggedInCountryId",t),e.set("country",a),e.getHierachicalCDMData(t,s,"AgreementCustomerType",e.customerAgreementTypes),e.getHierachicalCDMData(t,s,"HardwareModelDetail",e.devicePairs),e.getHierachicalCDMData(t,s,"Location",e.countries),e.getHierachicalCDMData(t,s,"ProductPriceHelperSet",e.customerTypes)},createProductData:function(){var e=this,t=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),a=(Komodo.Services.uiService.getController("application").get("_selectedCountryDescription"),Komodo.Services.localizationService.getCurrentLanguage()),s="CSI"+GetCustomerTypesConstants("DefaultCurrencyQualifier","QUALIFIER")+"ProductPriceDetail";e.productCategoryAndProducts.clear(),e.allProductCategories.clear(),Komodo.UI.cacheDataService.getProductCategoryAndProductsDataset(s,t,a,e.productCategoryAndProducts,e.allProductCategories)},setData:function(e,t,a,s,o,r,i,n,c){var d=this;d.set("paymentGroup",e),d.set("establishmentName",t),d.set("viewingLocation",a),d.set("decoderModel",s),d.set("decoderType",o),d.set("decoderSerialNumber",r),d.set("smartcardType",i),d.set("smartcardSerialNumber",n),d.set("decoderCpcType",c)},getHierachicalCDMData:function(e,t,a,s){var o=this;Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){var t=JSON.parse(e);switch(s.clear(),a){case"AgreementCustomerType":$.each($.makeArray(t.CustomerClasses.CustomerClass),function(e,t){s.addObject(t)}),o.populateViewingLocations();break;case"HardwareModelDetail":$.each($.makeArray(t.PrimaryHardwareModels.PrimaryHardwareModel),function(e,t){s.addObject(t)});break;case"Location":$.each($.makeArray(t.Countries.Country),function(e,t){s.addObject(t)});break;case"ProductPriceHelperSet":$.each($.makeArray(t.HelperSets.CustomerTypes.CustomerType),function(e,t){s.addObject(t)});break;default:Komodo.log("[ERROR] : Unknown Hierachical dataset: "+a)}}).fail(function(){Komodo.log("[ERROR] : could not retrieve hierarchical CDM data for "+a)})},getStaticCDMData:function(e,t,a,s){Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){s.clear(),$.each(e,function(e,t){s.addObject(t)})}).fail(function(){Komodo.log("[ERROR] : could not retrieve static CDM data for "+a)})},addHardwareToList:function(e,t,a,s,o,r,i,n){var c=this,d=Ember.Object.extend({init:function(){this._super(),this.display=t+"-"+a,this.decoderType=t,this.decoderSerialNumber=a,this.smartcardType=s,this.smartcardSerialNumber=o,this.decoderModel=e,this.selectedSecondaryDecoderno=void 0,this.decoderCpcType=r,this.insurance=!0===i?"Yes":"No"}}).create();n&&c.viewModel.selectedproductData.pushObject(d),$.each(c.devicePairs,function(e,t){t.CanonicalKey===d.decoderModel&&c.primaryDevicesList.pushObject(d)})},populateViewingLocations:function(){var e,t=this;if(void 0!==t.customerAgreementTypes&&t.customerAgreementTypes.length>0&&void 0!==t.viewModel&&null!==t.viewModel){var a=$.grep($.makeArray(t.customerAgreementTypes),function(e){return e.CanonicalKey===t.viewModel.customerClass});if(a.length>0&&(e=$.grep($.makeArray(a[0].CustomerTypes.CustomerType),function(e){return e.CanonicalKey===t.viewModel.customerType}),e.length>0&&(t.viewModel.set("viewingLocations",$.makeArray(e[0].AgreementCustomerTypes.AgreementCustomerType)),void 0!==t.viewingLocation&&null!==t.viewingLocation))){var s=$.grep($.makeArray(e[0].AgreementCustomerTypes.AgreementCustomerType),function(e){return e.CanonicalValue.toUpperCase()===t.viewingLocation.toUpperCase()});s.length>0&&t.viewModel.set("viewingLocation",s[0])}}void 0!==t.viewModel&&void 0!==t.customerTypes&&(e=$.grep($.makeArray(t.customerTypes),function(e){return e.CanonicalKey===t.viewModel.customerType}),e.length>0&&t.viewModel.set("customerTypeSystemKey",e[0].SystemKey))},populateAddOns:function(e){var t=this;if(t.set("listOfAddOnServices",[]),t.set("showAddOnView",!1),e&&t.viewModel.viewingLocation){var a=Komodo.UI.cacheDataService.getProductsForCategory(t._addOnCategoryFilterString,!0,t.productCategoryAndProducts);Ember.isEmpty(a)||$.each(a,function(a,s){var o=s.value,r=[];if(Komodo.UI.cacheDataService.populateAddOnsBasedOnProduct(t.viewModel.customerTypeSystemKey,t.viewModel.selectedproductData,e,t.viewModel.viewingLocation.CanonicalValue,o,r),!Ember.isEmpty(r)){t.set("showAddOnView",!0),r.sort(function(e,t){var a=e.name?e.name.toLowerCase():"",s=t.name?t.name.toLowerCase():"";return a>s?1:a<s?-1:0});var i=[],n=[],c=Math.ceil(r.length/2);$.each(r,function(e,t){e<c?i.push(t):n.push(t)}),t.listOfAddOnServices.push({allProducts:r,firstColumnProducts:i,secondColumnProducts:n,key:s.key,panelTitle:kl.value(t._csiLocaleBase+"selectAddOnCategory").replace("#addoncategory#",s.key)})}})}},disablePackages:function(e,t){var a=this;void 0!==a.selectedAgreement&&void 0!==a.selectedAgreement.ListOfHardware&&void 0!==a.selectedAgreement.ListOfHardware.Hardware&&$.each($.makeArray(a.selectedAgreement.ListOfHardware.Hardware),function(s,o){o.SerialNumber===e&&o.LinkedSmartcard===t&&(o.InsuranceStatus&&"TRUE"===o.InsuranceStatus.toUpperCase()?a.set("viewModel.insuranceDisabled",!0):a.set("viewModel.insuranceDisabled",!1),void 0!==o.ListOfService&&void 0!==o.ListOfService.Service&&$.each($.makeArray(o.ListOfService.Service),function(e,t){var s;void 0!==t.ProductDetail&&(t.ProductDetail.Type.toUpperCase()===a._principalCategoryName?(s=$.grep($.makeArray(a.productServices),function(e){return e.product.details.productID===t.ProductDetail.UID&&"CANCELLED"!==t.Status.toUpperCase()}),s.length>0&&$.each(a.productServices,function(e,t){t.set("isDisabled",!0)})):Ember.isEmpty(a.listOfAddOnServices)||$.each(a.listOfAddOnServices,function(e,a){Ember.isEmpty(a.allProducts)||(s=$.grep($.makeArray(a.allProducts),function(e){return e.productID===t.ProductDetail.UID&&"CANCELLED"!==t.Status.toUpperCase()}),s.length>0&&s[0].set("isDisabled",!0))}))}))})},getListOfAccount:function(){var e=this,t=[];if(void 0!==e.viewModel.paymentGroup){var a=e.viewModel.paymentGroup,s=Komodo.Models.Account.create(),o=Komodo.canonicalFacadeFactory(s,["UID","StartDate","EndDate","PaymentDetail","ListOfAgreement_Agreement"]);o.set("UID",a.UID),o.set("StartDate",a.StartDate),o.set("EndDate",a.EndDate),o.set("PaymentDetail",e.getPaymentDetail(a)),o.set("ListOfAgreement_Agreement",e.getListOfAgreement(a)),t.push(s)}return t},getPaymentDetail:function(e){var t,a=Komodo.Models.PaymentDetail.create();if(void 0!==e.PaymentDetail){var s=e.PaymentDetail.DebitOrderDay?e.PaymentDetail.DebitOrderDay:e.InvoiceDay;"1"===e.PaymentDetail.MethodOfPayment?(t=Komodo.canonicalFacadeFactory(a,["MethodOfPayment","DebitOrderDay"]),t.set("MethodOfPayment",e.PaymentDetail.MethodOfPayment),t.set("DebitOrderDay",s)):e.PaymentDetail.MethodOfPayment>"1"&&(t=Komodo.canonicalFacadeFactory(a,["MethodOfPayment","AccountNumber","BankName","BranchName","BranchCode","DebitOrderDay","PayerName","PayerSurname","PayerIDType","PayerIDNumber"]),t.set("MethodOfPayment",e.PaymentDetail.MethodOfPayment),t.set("AccountNumber",e.PaymentDetail.AccountNumber),t.set("BankName",e.PaymentDetail.BranchName),t.set("BranchName",e.PaymentDetail.branchName),t.set("BranchCode",e.PaymentDetail.BranchCode),t.set("DebitOrderDay",s),t.set("PayerName",e.PaymentDetail.PayerName),t.set("PayerIDNumber",e.PaymentDetail.PayerIDNumber))}return a},getListOfAgreement:function(e){var t=this,a=Komodo.Services.systemService,s=[];if(void 0!==e){var o=Komodo.Models.Agreement.create(),r=Komodo.canonicalFacadeFactory(o,["UID","Name","Type","StartDate","ActivationDate","TermOfPayment","ConsumerDetail","ConsumerAddress","ListOfHardware_Hardware","NumberOfViewingPoints","LocationIndicator","InstallationType"]);t.selectedAgreement&&r.set("UID",t.selectedAgreement.UID),r.set("Name",t.viewModel.establishmentName),r.set("Type",t.viewModel.viewingLocation.CanonicalKey),r.set("TermOfPayment",void 0!==e.TermOfPayment&&null!==e.TermOfPayment?e.TermOfPayment:12),r.set("StartDate",void 0),r.set("ActivationDate",a.universalDateString(new Date(t.viewModel.activationDate))),r.set("ConsumerDetail",t.getConsumerDetail()),r.set("ConsumerAddress",t.getAddress(e)),r.set("ListOfHardware_Hardware",t.getListOfHardware()),r.set("NumberOfViewingPoints",t.viewModel.viewingPoints),r.set("InstallationType",t.viewModel.installationType),s.push(o)}return s},getConsumerDetail:function(){var e=this,t=Komodo.Models.PersonalDetail.create();return Komodo.canonicalFacadeFactory(t,["FirstName","Surname"]).set("Surname",e.companyName),t},getAddress:function(e){var t=Komodo.Models.Address.create(),a=Komodo.canonicalFacadeFactory(t,["Type","BuildingNumber","BuildingName","Street","Suburb","City","Province","Country","PostCode","PostBoxNumber"]);return e&&e.BillingAddress&&(a.set("Type","Agreement"),a.set("Street",e.BillingAddress.Street),a.set("Suburb",e.BillingAddress.Suburb),a.set("City",e.BillingAddress.City),a.set("Province",e.BillingAddress.Province),a.set("Country",e.BillingAddress.Country),a.set("PostCode",e.BillingAddress.PostCode),a.set("PostBoxNumber",e.BillingAddress.PostBoxNumber),a.set("BuildingNumber",e.BillingAddress.BuildingNumber),a.set("BuildingName",e.BillingAddress.BuildingName)),t},getListOfHardware:function(){var e=this,t=[];return e.viewModel.selectedproductData.forEach(function(a){var s=Komodo.Models.Hardware.create(),o=Komodo.canonicalFacadeFactory(s,["SerialNumber","LinkedSmartcard","SmartcardDetail","ProductDetail","ListOfService","SecondaryHardware","InsuranceStatus","WarrantyStatus","IsAwaitingInstallation"]);o.set("SerialNumber",a.decoderSerialNumber),o.set("LinkedSmartcard",a.smartcardSerialNumber),o.set("InsuranceStatus",void 0!==a.insurance&&null!==a.insurance?a.insurance:"No"),o.set("SmartcardDetail",e.getSmartcardDetail(a)),o.set("ProductDetail",e.getHardwareProductDetail(a)),o.set("ListOfService",e.getListOfServices()),t.push(s)}),t},getSmartcardDetail:function(e){var t=Komodo.Models.ProductDetail.create(),a=Komodo.canonicalFacadeFactory(t,["UID","Type","Name","Model","Description"]);return void 0!==e&&(a.set("UID",e.smartcardSerialNumber),a.set("Type",e.smartcardType)),t},getHardwareProductDetail:function(e){var t=this,a=Komodo.Models.ProductDetail.create(),s=Komodo.canonicalFacadeFactory(a,["UID","Type","Name","Model","Description"]);return void 0!==e&&(s.set("UID",e.decoderSerialNumber),s.set("Type",t.getDeviceType(e.decoderCpcType)),s.set("Model",e.decoderModel)),a},getListOfServices:function(){var e,t,a,s,o=this,r=Komodo.Models.ListOfService.create();return void 0!==o.productServices&&o.productServices.length>0&&$.each(o.productServices,function(i,n){n&&!0===n.isSelected&&n.product&&n.product.details&&(e=Komodo.Models.Service.create(),t=Komodo.canonicalFacadeFactory(e,["UID","Status","ProductDetail"]),a=Komodo.Models.ProductDetail.create(),s=Komodo.canonicalFacadeFactory(a,["UID","Type","Name"]),t.set("UID",n.product.details.productID),s.set("UID",n.product.details.productID),s.set("Type",o._principalCategoryName),t.set("ProductDetail",a),r.Service.push(e))}),Ember.isEmpty(o.listOfAddOnServices)||$.each(o.listOfAddOnServices,function(o,i){Ember.isEmpty(i.allProducts)||$.each(i.allProducts,function(o,n){!0===n.isSelected&&(e=Komodo.Models.Service.create(),t=Komodo.canonicalFacadeFactory(e,["UID","Status","ProductDetail"]),a=Komodo.Models.ProductDetail.create(),s=Komodo.canonicalFacadeFactory(a,["UID","Type","Name"]),t.set("UID",n.productID),s.set("UID",n.productID),s.set("Type",i.key.toUpperCase()),t.set("ProductDetail",a),r.Service.push(e))})}),r},getDeviceType:function(e){var t=this,a=void 0;return isNaN(e)?a=e:$.each(t.allHardwareCpcs,function(t,s){return s.SystemKey!==e||(a=s.CanonicalValue,!1)}),a},clearFormData:function(){var e=this;e.viewModel.set("customerClass",void 0),e.viewModel.set("customerType",void 0),e.viewModel.set("paymentGroup",void 0),e.viewModel.set("viewingLocation",void 0),e.viewModel.set("establishmentName",void 0),e.viewModel.set("viewingPoints",void 0),e.viewModel.set("smartcardDeviceNumber",void 0),e.viewModel.set("insurance",void 0),e.viewModel.set("installationType",e.installationTypes[1].value),e.viewModel.set("primaryProductSelection",void 0),e.viewModel.set("accounts",[]),e.viewModel.set("viewingLocations",[]),e.viewModel.set("selectedproductData",[]),e.set("productServices",[]),e.set("addOnServices",[]),e.set("addOnViewFirstColumn",[]),e.set("addOnViewSecondColumn",[]),e.set("showAddOnView",!1)},clearAgreementData:function(){var e=this;e.viewModel.set("viewingLocation",void 0),e.viewModel.set("viewingPoints",void 0),e.viewModel.set("smartcardDeviceNumber",void 0),e.viewModel.set("insurance",void 0),e.viewModel.set("installationType",e.installationTypes[1].value),e.viewModel.set("primaryProductSelection",void 0),e.viewModel.set("selectedproductData",[]),e.set("productServices",[]),e.set("addOnServices",[]),e.set("showAddOnView",!1)},getNewProcessID:function(){this.startNewProcess()},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,3e4,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},viewingLocationChanged:function(){var e=this,t=Komodo.UI.cacheDataService.getProductsForCategory(e._principalCategoryName,!1,e.productCategoryAndProducts);if(!Ember.isEmpty(t)){var a=t[0].value;if(void 0!==e.viewModel&&void 0===e.viewModel.customerTypeSystemKey&&void 0!==e.customerTypes&&(customerType=$.grep($.makeArray(e.customerTypes),function(t){return t.CanonicalKey===e.viewModel.customerType}),customerType.length>0&&e.viewModel.set("customerTypeSystemKey",customerType[0].SystemKey)),Ember.isEmpty(a)||void 0===e.viewModel.viewingLocation||null===e.viewModel.viewingLocation)e.set("productServices",[]);else{var s=[];Komodo.UI.cacheDataService.populateProductsBasedOnLocation(e.viewModel.customerTypeSystemKey,e.viewModel.viewingLocation.CanonicalValue,a,s),e.set("productServices",s)}}e.set("selectedAgreement",void 0)}.observes("viewModel.viewingLocation"),establishmentNameChanged:function(){var e,t=this;if(void 0!==t.viewModel.paymentGroup&&null!==t.viewModel.paymentGroup&&void 0!==t.viewModel.establishmentName&&void 0!==t.viewModel.paymentGroup.ListOfAgreement&&void 0!==t.viewModel.paymentGroup.ListOfAgreement.Agreement){if(t.set("selectedAgreement",void 0),$.each($.makeArray(t.viewModel.paymentGroup.ListOfAgreement.Agreement),function(a,s){return s.Name.toUpperCase()!==t.viewModel.establishmentName.toUpperCase()||s.LocationIndicator.toUpperCase()!==t.viewingLocation.toUpperCase()||(e=s.LocationIndicator,void 0!==t.viewingLocation&&null!==t.viewingLocation&&(e=t.viewingLocation),t.viewModel.set("establishmentName",s.Name),t.viewModel.set("installationType",s.InstallationType),t.viewModel.set("viewingPoints",s.NumberOfViewingPoints),e=$.grep($.makeArray(t.viewModel.viewingLocations),function(t){return t.CanonicalValue.toUpperCase()===e.toUpperCase()}),e.length>0&&t.viewModel.set("viewingLocation",e[0]),t.set("selectedAgreement",s),!1)}),void 0===t.selectedAgreement||null===t.selectedAgreement)t.clearAgreementData();else{var a;void 0!==t.selectedAgreement.ListOfHardware&&void 0!==t.selectedAgreement.ListOfHardware.Hardware&&$.each($.makeArray(t.selectedAgreement.ListOfHardware.Hardware),function(e,t){void 0!==t.ListOfService&&void 0!==t.ListOfService.Service&&$.each($.makeArray(t.ListOfService.Service),function(e,t){void 0!==t.ProductDetail&&"PRINCIPAL"===t.ProductDetail.Type.toUpperCase()&&(a=t.ProductDetail.UID)})}),t.addHardwareToList(t.decoderModel,t.decoderType,t.decoderSerialNumber,t.smartcardType,t.smartcardSerialNumber,t.decoderCpcType,!1,!0),t.populateAddOns(a),t.disablePackages(t.decoderSerialNumber,t.smartcardSerialNumber),t.viewModel.set("activationDate",new Date),t.set("isButtonDisable",!1)}t.set("viewingLocation",void 0),t.set("decoderModel",void 0),t.set("decoderType",void 0),t.set("decoderSerialNumber",void 0),t.set("smartcardType",void 0),t.set("smartcardSerialNumber",void 0),t.set("decoderCpcType",void 0)}}.observes("viewModel.establishmentName"),actions:{cancel:function(){var e=this,t="",a="";e.viewModel&&(a=e.viewModel.establishmentName,e.viewModel.viewingLocation&&(t=e.viewModel.viewingLocation.CanonicalValue)),Komodo.Services.uiService.getController("csiManageViewing").setAgreementData(a,t),Komodo.Services.uiService.getRoute("application").transitionTo("csiManageViewing"),e.clearFormData()},activateProducts:function(){var e=this;if(!1!==e.canSubmitData(e.viewModel,e.viewTitle,{showInModal:!0})){if(void 0===e.customerNo&&null===e.customerNo)return void Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._localeBase+"customerNubmerMissing"),Komodo.Controls.MessageBoxOkButton,e,"id5446883","danger");if(void 0===e.selectedAgreement)return void Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._csiLocaleBase+"messagePackageValidation"),Komodo.Controls.MessageBoxOkButton,e,"id145456673","danger");var t=!1;Ember.isEmpty(e.listOfAddOnServices)||$.each(e.listOfAddOnServices,function(e,a){Ember.isEmpty(a.allProducts)||a.allProducts.forEach(function(e){!0===e.isSelected&&(t=!0)})});var a=!1;if(e.productServices.forEach(function(e){!0===e.isSelected&&(a=!0)}),!1===a&&!1===t)return void Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._csiLocaleBase+"messagePackageValidation"),Komodo.Controls.MessageBoxOkButton,e,"id145456673","danger");e.viewModel.selectedproductData.length>0?(e.set("isButtonDisable",!0),e.publishAssociateProductsEvent()):Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._csiLocaleBase+"messageDeviceToLinkValidation"),Komodo.Controls.MessageBoxOkButton,e,"id145456673","danger")}}},retrieveCustomer:function(e){var t=this;Komodo.Services.queryService.getJSON("/CustomerProfile/?customerId="+e).done(function(e){if(e&&e.CustomerDetail){var a=e.CustomerDetail;"1"===a.Class&&(t.set("companyName",a.CompanyName),t.viewModel.set("customerClass",a.Class),t.viewModel.set("customerType",a.Type),t.populateViewingLocations())}else Komodo.Controls.MessageBoxController.show(kl.value(t._localecsiCustomer+"customerprofile.customerNotFoundTitle"),kl.value(t._localecsiCustomer+"customerprofile.customerNotFound"))}).error(function(e){var t=JSON.stringify(e);Komodo.log("retrieveCustomer ajax call failed. Error: "+t)})},retrieveFinancialDetails:function(e){var t,a=this;a.viewModel.accounts.clear();var s=Komodo.Services.customerProfileService.getFinancialAccounts();s&&s.ResponseMessage&&s.ResponseMessage.Payload&&s.ResponseMessage.Payload.ListOfAccount&&s.ResponseMessage.Payload.ListOfAccount.Account?($.each(s.ResponseMessage.Payload.ListOfAccount.Account,function(e,t){a.viewModel.accounts.addObject(t)}),void 0!==a.paymentGroup&&null!==a.paymentGroup&&(t=$.grep($.makeArray(a.viewModel.accounts),function(e){return e.UID===a.paymentGroup.UID}),t.length>0&&a.viewModel.set("paymentGroup",t[0]),a.set("paymentGroup",void 0)),void 0!==a.establishmentName&&null!==a.establishmentName&&(a.viewModel.set("establishmentName",a.establishmentName),a.set("establishmentName",void 0)),void 0!==a.viewingPoints&&null!==a.viewingPoints&&(a.viewModel.set("viewingPoints",a.viewingPoints),a.set("viewingPoints",void 0)),void 0!==a.installationType&&null!==a.installationType&&(a.viewModel.set("installationType",a.installationType),a.set("installationType",void 0))):Komodo.Services.queryService.getJSON("/AccountProfile/?id="+e).done(function(e){e&&e.Account&&($.each(e.Account,function(e,t){a.viewModel.accounts.addObject(t)}),void 0!==a.paymentGroup&&null!==a.paymentGroup&&(t=$.grep($.makeArray(a.viewModel.accounts),function(e){return e.UID===a.paymentGroup.UID}),t.length>0&&a.viewModel.set("paymentGroup",t[0]),a.set("paymentGroup",void 0)),void 0!==a.establishmentName&&null!==a.establishmentName&&(a.viewModel.set("establishmentName",a.establishmentName),a.set("establishmentName",void 0)),void 0!==a.viewingPoints&&null!==a.viewingPoints&&(a.viewModel.set("viewingPoints",a.viewingPoints),a.set("viewingPoints",void 0)),void 0!==a.installationType&&null!==a.installationType&&(a.viewModel.set("installationType",a.installationType),a.set("installationType",void 0)))}).error(function(e){var t=JSON.stringify(e);Komodo.log("retrieveFinancialAccounts ajax call failed. Error: "+t)})},publishAssociateProductsEvent:function(){
var e=this,t=Komodo.Models.AddCommercialProducts.create(),a=Komodo.canonicalFacadeFactory(t,["Country","CustomerUID","ListOfAccount_Account"]);a.set("Country",e.get("loggedInCountryId")),a.set("CustomerUID",e.customerNo),a.set("ListOfAccount_Account",e.getListOfAccount()),e.getNewProcessID(),Komodo.Services.AssociateProductsService.associateCommercialProducts(e,t).done(function(){e.showBusyIndicator(),e.set("isDisableActiveButton",!0),Komodo.log("publishAssociateProductsEvent() : Link Csi Products event has been published.")}).fail(function(){e.hideBusyIndicator(),Komodo.log("publishAssociateProductsEvent() : Link Csi Products event has failed.")})},messageCommercialProductsAddedReceived:function(e){var t=this,a=!0;if(t.hideBusyIndicator(),void 0!==e.ResponseMessage.Payload.ListOfAccount&&void 0!==e.ResponseMessage.Payload.ListOfAccount.Account){var s=e.ResponseMessage.Payload.CustomerUID,o=e.ResponseMessage.Payload.ListOfAccount.Account;if(void 0!==o.ListOfAgreement&&void 0!==o.ListOfAgreement.Agreement){a=!1;var r=o.ListOfAgreement.Agreement,i=Komodo.Models.CsiAssociateProductsModel.create();i.set("establishmentName",r.Name),i.set("viewingPoints",r.NumberOfViewingPoints),i.set("installationType",r.InstallationType);var n=$.grep($.makeArray(t.viewModel.viewingLocations),function(e){return e.CanonicalKey===r.Type});if(n.length>0&&i.set("viewingLocation",n[0].CanonicalValue),void 0!==r.ListOfHardware&&void 0!==r.ListOfHardware.Hardware&&$.each($.makeArray(r.ListOfHardware.Hardware),function(e,a){void 0!==a.ListOfService&&void 0!==a.ListOfService.Service&&$.each($.makeArray(a.ListOfService.Service),function(e,s){if(void 0!==s.ProductDetail){var o=Komodo.Models.ManageViewingGridModel.create();o.set("smartCardNumber",void 0!==a.SmartcardDetail?a.SmartcardDetail.UID:""),o.set("deviceNumber",a.SerialNumber),o.set("applyStyleForPrin",!1),o.set("applyStyleForAddOn",!1);var r,n=Komodo.UI.cacheDataService.getProductsForCategory(s.ProductDetail.Type.toUpperCase(),!1,t.productCategoryAndProducts);if(!Ember.isEmpty(n)){var c=n[0].value;r=$.grep($.makeArray(c),function(e){return e.product.details.productID===s.ProductDetail.UID}),r.length>0&&(n[0].key.toUpperCase()===t._principalCategoryName?(o.set("prinPckName",r[0].product.details.name),o.set("addOnPckName","-"),o.set("applyStyleForPrin",!0)):(o.set("addOnPckName",r[0].product.details.name),o.set("prinPckName","-"),o.set("applyStyleForAddOn",!0)))}i.selectedproductData.addObject(o)}})}),i.set("paymentGroup",t.viewModel.paymentGroup),s){Komodo.Application.SharedObjectController.create().retrieveFinancialAccounts(s)}Komodo.Services.uiService.getController("csiActivationSummary").setResponseMessage(i,"AddProducts"),Komodo.Services.uiService.getRoute("application").transitionTo("csiActivationSummary")}}!0===a&&Komodo.Controls.MessageBoxController.show(t.viewTitle,kl.value(t._localeBase+"messgProductLinkFail"))},messageFailureMessageEventReceived:function(e){var t=this;t.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(t.viewTitle,e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButton,this,"id544246673","danger")},messageReceived:function(e){this.hideBusyIndicator(),Komodo.UI.log("[CsiAddProductsController.messageReceived] : event name = "+e.ResponseMessage.EventName)},messageDeliveryFailure:function(e){this.hideBusyIndicator(),Komodo.UI.warn("[CsiAddProductsController.messageDeliveryFailure] : messageId = "+e.messageId)},messageFault:function(e){this.hideBusyIndicator(),Komodo.UI.error("[CsiAddProductsController.messageFault] : messageId = "+e.messageId)},productCategoryAndProducts:[],showAddOnView:!1,csiClassId:Komodo.CustomerClass.CSI,viewTitle:void 0,smartcardDeviceNumber:void 0,country:void 0,countries:[],allProductCategories:[],devicePairs:[],productServices:[],listOfAddOnServices:[],insurance:void 0,primaryDevicesList:[],customerAgreementTypes:[],customerTypes:[],selectedGridItem:void 0,commandGridItemn:void 0,deleteGridItem:void 0,isButtonDisable:!0,installationTypes:[{title:Komodo.InstallationTypes.IPTV,value:Komodo.InstallationTypes.IPTV},{title:Komodo.InstallationTypes.STANDARD,value:Komodo.InstallationTypes.STANDARD}]}),Komodo.Application.CommercialAssociateProductsController=Komodo.UI.Controller.extend({_localeBase:"locale.associateProducts:associateProducts.",_customerLocaleBase:"locale.customer:customerInformation.",_commercialLocaleBase:"locale.commercialcustomer:addDevicesAndPackages.",_localecommercialCustomer:"locale.commercialcustomer:",_principalCategoryName:"PRINCIPAL",_insuranceCategoryName:"INSURANCE",_hardwareCategoryName:"HARDWARE",_addOnCategoryFilterString:"ADDON:ADD ON",init:function(){this._super(),Komodo.log("Constructing Associate Products for Commercial Customer controller"),this.requiresDependency("_eventAggregator",{singleton:Komodo.Services.eventAggregator}),this.set("processVersion","v1.1"),this.set("processName","Associate Products for Commercial Customer process")},start:function(){var e=this;e.registerModel("viewModel",Komodo.Models.CommercialAssociateProductsModel),e.registerValidation(),e.set("viewTitle",kl.value(e._commercialLocaleBase+"useCaseTitle")),e.clearFormData(),Komodo.Services.customerProfileService.validateCustomerClass(e.commercialClassId).done(function(t){if(void 0!==t&&null!==t&&void 0!==t.CustomerDetail&&null!==t.CustomerDetail)e.set("customerNo",t.CustomerNumber),e.set("companyName",t.CustomerDetail.CompanyName),e.viewModel.set("customerClass",t.CustomerDetail.Class),e.viewModel.set("customerType",t.CustomerDetail.Type),e.set("isButtonDisable",!1),e.createProductData(t.CustomerDetail.Class),e.retrieveProductOffers(),e.retrieveCustomerProfile(e.customerNo);else{Komodo.Controls.MessageBoxController.show(kl.value(e._localecommercialCustomer+"customerprofile.customerNotFoundTitle"),kl.value(e._localecommercialCustomer+"customerprofile.customerNotFound"),Komodo.Controls.MessageOKButtons,e,"id5446673","warning").response=function(e){if("ok"===e)return void Komodo.Services.uiService.transitionTo("home")}}}),e.createCDMData(),e._setFeatureToggles(),e._super()},stop:function(){this.hideBusyIndicator(),this._super()},getEventAggregator:function(){return this.get("_eventAggregator")},registerValidation:function(){var e=this;e.registerValidator(e,"smartcardDeviceNumber",{isRequired:!0,displayName:kl.value(e._localeBase+"smartCardOrDeviceNo"),minLength:6,maxLength:10,functions:Komodo.UI.Validators.alphanumericValidator}),e.registerValidator(e.get("viewModel"),"paymentGroup",{type:"string",isRequired:!0}),e.registerValidator(e.get("viewModel"),"viewingLocation",{type:"string",isRequired:!0}),e.registerValidator(e.get("viewModel"),"establishmentName",{type:"string",isRequired:!0,displayName:kl.value(e._localecommercialCustomer+"customerprofile.establishmentName")}),e.registerValidator(e.get("viewModel"),"viewingPoints",{type:"string",isRequired:!0,maximumAllowedViewingPoints:e.maximumAllowedViewingPoints,minLength:1,maxLength:10,functions:[Komodo.UI.Validators.numericValidator,Komodo.UI.Validators.viewingPointsValidator]}),e.registerValidator(e.get("viewModel"),"activationDate",{isRequired:!0,minDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),displayName:kl.value(e._localeBase+"activationDate"),functions:Komodo.UI.Validators.DatePickerValidator})},_setFeatureToggles:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("AssociateProducts","IsInsuranceAvailable").done(function(t){Komodo.Services.securityService.hasPermission("clarity://commercialAddProductsView/viewInsurance")?e.set("viewModel.showInsurance",t):e.set("viewModel.showInsurance",!1)}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)}),Komodo.Services.featureToggleService.isEnabled("AssociateProducts","UseOptimizedVersion").done(function(t){e.set("viewModel.useOptimizedVersion",t)}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)}),Komodo.Services.featureToggleService.isEnabled("AssociateProducts","UseOptimizedAddDeviceVersion").done(function(t){e.set("viewModel.useOptimizedAddDeviceVersion",t)}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)})},createCDMData:function(){var e=this,t=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),a=Komodo.Services.uiService.getController("application").get("_selectedCountryDescription"),s=Komodo.Services.localizationService.getCurrentLanguage();e.set("loggedInCountryId",t),e.set("country",a),e.set("maximumAllowedViewingPoints",-1),e.getStaticCDMData(t,"global","ViewingPointConstants",[]),e.getHierachicalCDMData(t,s,"AgreementCustomerType",e.customerAgreementTypes),e.getHierachicalCDMData(t,s,"HardwareModelDetail",e.devicePairs),e.getHierachicalCDMData(t,s,"Location",e.countries),e.getHierachicalCDMData(t,s,"ProductPriceHelperSet",e.productPriceHelperSet)},createProductData:function(e){var t=this,a=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),s=Komodo.Services.uiService.getController("application").get("_selectedCountryDescription"),o=Komodo.Services.localizationService.getCurrentLanguage();t.set("loggedInCountryId",a),t.set("country",s);var r=t.getProductPriceDetailDatasetName(e);t.productCategoryAndProducts.clear(),t.allProductCategories.clear(),Komodo.UI.cacheDataService.getProductCategoryAndProductsDataset(r,a,o,t.productCategoryAndProducts,t.allProductCategories)},getProductPriceDetailDatasetName:function(e){var t="";switch(e){case 1:case"1":t="Commercial";break;case 9:case"9":t="NationalDeal"}return t=t+GetCustomerTypesConstants("DefaultCurrencyQualifier","QUALIFIER")+"ProductPriceDetail"},setData:function(e,t,a,s,o){var r=this;r.set("isButtonDisable",!1),r.set("paymentGroup",e),r.set("viewingLocation",a),r.set("establishmentName",t),r.set("viewingPoints",s),r.set("installationType",o)},getHierachicalCDMData:function(e,t,a,s){var o=this;Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){var t=JSON.parse(e);switch(s.clear(),a){case"AgreementCustomerType":$.each($.makeArray(t.CustomerClasses.CustomerClass),function(e,t){s.addObject(t)});break;case"HardwareModelDetail":$.each($.makeArray(t.PrimaryHardwareModels.PrimaryHardwareModel),function(e,t){s.addObject(t)});break;case"Location":$.each($.makeArray(t.Countries.Country),function(e,t){s.addObject(t)});break;case"ProductPriceHelperSet":o.customerTypes.clear(),$.each($.makeArray(t.HelperSets.CustomerTypes.CustomerType),function(e,t){o.customerTypes.addObject(t)}),o.commercialProducts.clear(),$.each($.makeArray(t.HelperSets.CommercialProducts.CommercialProduct),function(e,t){o.commercialProducts.addObject(t)});break;case"ProductCategoryAndProductDetail":$.each($.makeArray(t.ProductCategories.ProductCategory),function(e,t){s.addObject(t)});break;default:Komodo.log("[ERROR] : Unknown Hierachical dataset: "+a)}}).fail(function(){Komodo.log("[ERROR] : could not retrieve hierarchical CDM data for "+a)})},getStaticCDMData:function(e,t,a,s){var o=this;Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){switch(s.clear(),a){case"ViewingPointConstants":$.each(e,function(e,t){o.set("maximumAllowedViewingPoints",t.value)}),o.registerValidator(o.get("viewModel"),"viewingPoints",{type:"string",isRequired:!0,displayName:kl.value(o._commercialLocaleBase+"customerprofile.viewingPoints"),maximumAllowedViewingPoints:o.maximumAllowedViewingPoints,minLength:1,maxLength:10,functions:[Komodo.UI.Validators.numericValidator,Komodo.UI.Validators.viewingPointsValidator]});break;default:$.each(e,function(e,t){s.addObject(t)})}}).fail(function(){Komodo.log("[ERROR] : could not retrieve static CDM data for "+a)})},isDeviceAdded:function(){var e=this,t=!1,a=e.get("smartcardDeviceNumber");return void 0!==a&&0!==e.viewModel.selectedproductData.length&&e.viewModel.selectedproductData.forEach(function(s){a!==s.decoderSerialNumber&&a!==s.smartcardSerialNumber||(Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._localeBase+"messgDeviceNo")+a+kl.value(e._localeBase+"messgDeviceNoValidation")),t=!0)}),t},matchingDeviceNotFound:function(e){var t=this,a=void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.Type?e.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.Type.toLowerCase():"device",s=e.ResponseMessage.Payload.ListOfHardware.Hardware.SerialNumber;Komodo.Controls.MessageBoxController.show(t.viewTitle,kl.value(t._localeBase+"paireDeviceNotFound")+a+kl.value(t._localeBase+"withSerialNumber")+s+" "+kl.value(t._localeBase+"findothermachingDevice"),Komodo.Controls.MessageBoxYesNoButtons,t,"id54456673","warning").response=function(e){"yes"===e&&t.showDevicePair()}},availableForUse:function(e){var t=this,a=kl.value(t._localeBase+"isTheDevice")+" "+e.ResponseMessage.Payload.ListOfHardware.Hardware.SerialNumber+" ";void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.SmartcardDetail&&null!==e.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcard&&(a=a+kl.value(t._localeBase+"andSmartCard")+" "+e.ResponseMessage.Payload.ListOfHardware.Hardware.SmartcardDetail.Type+" ",void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcard&&(a=a+e.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcard+" ")),a+=kl.value(t._localeBase+"numbersCorrect");var s=kl.value(t._localeBase+"confirmDevicePair");Komodo.Controls.MessageBoxController.show(s,a,Komodo.Controls.MessageBoxYesNoButtons,t,"id5446673","warning").response=function(a){"yes"===a?(t.addHardwareToList(e.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.Model,e.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.ProductFeatures.Description,void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.SerialNumber?e.ResponseMessage.Payload.ListOfHardware.Hardware.SerialNumber:void 0,void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.SmartcardDetail?e.ResponseMessage.Payload.ListOfHardware.Hardware.SmartcardDetail.Type:void 0,void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcard?e.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcard:void 0,e.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.Type,t.viewModel.get("insurance"),!0),t.set("smartcardDeviceNumber",void 0)):null!==e.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcard&&t.showDevicePair()}},showDevicePair:function(){var e=this;e.registerModel("hardwarePair",Komodo.Models.SavePairModel),e.registerValidator(e.get("hardwarePair"),"smartCardSerialNumber",{isRequired:!0,displayName:kl.value(e._localeBase+"smartcardNumber"),minLength:10,maxLength:10,functions:Komodo.UI.Validators.alphanumericValidator}),e.registerValidator(e.get("hardwarePair"),"decoderSerialNumber",{isRequired:!0,displayName:kl.value(e._localeBase+"deviceNumber"),minLength:10,maxLength:10,functions:Komodo.UI.Validators.alphanumericValidator});var t=Komodo.Application.ModalPaneController.create();t.popup(kl.value(e._localeBase+"updateDevice"),null,{context:{data:e.get("hardwarePair"),validators:e.validators,savepair:function(){!1!==e.canSubmitData(e.hardwarePair,kl.value(e._localeBase+"useCaseTitle"),{showInModal:!1})&&(e.set("popupaction","savepair"),t.close())}},closeCallback:function(){"savepair"===e.get("popupaction")&&(e.viewModel.useOptimizedVersion?Komodo.Services.queryService.getJSON("/Device/PairDevice?decoderSerialNumber="+e.get("hardwarePair.decoderSerialNumber")+"&smartcardSerialNumber="+e.get("hardwarePair.smartCardSerialNumber")).done(function(t){e.publishValidateHardwarePairingEvent(e.get("hardwarePair.decoderSerialNumber"),e.get("hardwarePair.smartCardSerialNumber"))}).error(function(t){var a=JSON.stringify(t);Komodo.log("retrieveProductOffers ajax call failed. Error: "+a),t&&t.responseJSON&&t.responseJSON.Message?Komodo.Controls.MessageBoxController.show(e.viewTitle,t.responseJSON.Message,Komodo.Controls.MessageBoxOkButton,e,"id544246673","danger"):t&&t.responseText?Komodo.Controls.MessageBoxController.show(e.viewTitle,t.responseText,Komodo.Controls.MessageBoxOkButton,e,"id544246673","danger"):Komodo.Controls.MessageBoxController.show(e.viewTitle,a,Komodo.Controls.MessageBoxOkButton,e,"id544246673","danger")}):e.publishValidateHardwarePairingEvent(e.get("hardwarePair.decoderSerialNumber"),e.get("hardwarePair.smartCardSerialNumber")),e.set("popupaction",void 0))},view:Komodo.Application.SavePairView})},addHardwareToList:function(e,t,a,s,o,r,i,n){var c=this,d=Ember.Object.extend({init:function(){this._super(),this.display=t+"-"+a,this.decoderType=t,this.decoderSerialNumber=a,this.smartcardType=s,this.smartcardSerialNumber=o,this.decoderModel=e,this.selectedSecondaryDecoderno=void 0,this.decoderCpcType=r,this.insurance=i}}).create();n&&c.viewModel.selectedproductData.pushObject(d),$.each(c.devicePairs,function(e,t){t.CanonicalKey===d.decoderModel&&c.primaryDevicesList.pushObject(d)})},validateHardware:function(){var e=this,t="",a=0;return e.viewModel.selectedproductData.forEach(function(s){var o=!1;a=s.decoderSerialNumber.length,e.productServices.forEach(function(t){if(t.product.details.productID===e.viewModel.primaryProductSelection){var a=t.product&&t.product.allowDevice?t.product.allowDevice.split(","):[];$.inArray(s.decoderModel,a)>=0&&(o=!0)}}),Ember.isEmpty(e.listOfAddOnServices)||$.each(e.listOfAddOnServices,function(e,t){Ember.isEmpty(t.allProducts)||t.allProducts.forEach(function(e){if(!0===e.isSelected){var t=e.allowDevice?e.allowDevice.split(","):[];$.inArray(s.decoderModel,t)>=0&&(o=!0)}})}),!1===o&&(t=t+s.decoderSerialNumber+",")}),!(""!==t&&a>=10)||(Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._commercialLocaleBase+"messageHardwareValidate")+"<br />"+t,Komodo.Controls.MessageBoxOkButton,e,"id5556673","danger"),!1)},populateViewingLocations:function(){var e,t=this;if(void 0!==t.viewModel&&void 0!==t.customerTypes&&(e=$.grep($.makeArray(t.customerTypes),function(e){return e.CanonicalKey===t.viewModel.customerType}),e.length>0&&t.viewModel.set("customerTypeSystemKey",e[0].SystemKey)),t.viewModel&&t.viewModel.paymentGroup&&void 0!==t.customerAgreementTypes&&t.customerAgreementTypes.length>0){var a=$.grep($.makeArray(t.customerAgreementTypes),function(e){return e.CanonicalKey===t.viewModel.customerClass});if(a.length>0&&(e=$.grep($.makeArray(a[0].CustomerTypes.CustomerType),function(e){return e.CanonicalKey===t.viewModel.customerType}),e.length>0)){var s=[];if(t.viewModel.viewingLocations.clear(),$.each($.makeArray(e[0].AgreementCustomerTypes.AgreementCustomerType),function(e,a){t.checkViewingLocationProductExists(a.CanonicalValue)&&t.checkViewingLocationAccountTypeExists(t.viewModel.paymentGroup.Type,a.AllowedAccountTypes)&&s.pushObject(a)}),s.sort(function(e,t){return e.CanonicalValue>t.CanonicalValue?1:e.CanonicalValue<t.CanonicalValue?-1:0}),t.viewModel.set("viewingLocations",s),void 0!==t.viewingLocation&&null!==t.viewingLocation){var o=$.grep($.makeArray(e[0].AgreementCustomerTypes.AgreementCustomerType),function(e){return e.CanonicalValue.toUpperCase()===t.viewingLocation.toUpperCase()});o.length>0&&t.viewModel.set("viewingLocation",o[0])}}}else t.viewModel.set("viewingLocations",[])},checkViewingLocationProductExists:function(e){var t=this,a=!1,s=[],o=t.viewModel.customerTypeSystemKey,r=Komodo.UI.cacheDataService.getProductsForCategory(t._principalCategoryName,!1,t.productCategoryAndProducts);if(!Ember.isEmpty(r))var s=r[0].value;return $.each(s,function(t,s){s&&s.product&&s.product.details&&s.product.details.customerType===o&&(s.product.details.locationIndicator.toUpperCase()===e.toUpperCase()||s.product.details.locationIndicator.toUpperCase().indexOf(e.toUpperCase())>-1)&&(a=!0)}),a},checkViewingLocationAccountTypeExists:function(e,t){var a=!1;if(e&&t){var s=t.split(",");$.each($.makeArray(e),function(e,t){return!s.contains(t)||(a=!0,!1)})}return a},populatePrincipals:function(){var e=this;e.set("principalServices",[]),void 0!==e.productServices&&e.productServices.length>0&&$.each(e.productServices,function(t,a){if(a&&a.product&&a.product.details){var s=Ember.Object.create({UID:a.product.details.productID,productSystemKey:a.product.details.productID,isSelected:!1,isDisabled:!1,product:a.product.details.name});e.principalServices.pushObject(s)}})},populateAddOns:function(e){var t=this;if(t.set("listOfAddOnServices",[]),e&&t.viewModel.viewingLocation){var a=Komodo.UI.cacheDataService.getProductsForCategory(t._addOnCategoryFilterString,!0,t.productCategoryAndProducts);Ember.isEmpty(a)||$.each(a,function(a,s){var o=s.value,r=[];if(Komodo.UI.cacheDataService.populateAddOnsBasedOnProduct(t.viewModel.customerTypeSystemKey,t.viewModel.selectedproductData,e,t.viewModel.viewingLocation.CanonicalValue,o,r),!Ember.isEmpty(r)){r.sort(function(e,t){var a=e.name?e.name.toLowerCase():"",s=t.name?t.name.toLowerCase():"";return a>s?1:a<s?-1:0});var i=[],n=[],c=Math.ceil(r.length/2);$.each(r,function(e,t){e<c?i.push(t):n.push(t)}),t.listOfAddOnServices.push({allProducts:r,firstColumnProducts:i,secondColumnProducts:n,key:s.key,panelTitle:kl.value(t._commercialLocaleBase+"selectAddOnCategory").replace("#addoncategory#",s.key)})}})}},populateAvailableOfferDefinitions:function(){var e=this;e.viewModel.availableOfferDefinitions.clear(),$.each(e.offerDefinitions,function(t,a){var s=$.grep($.makeArray(e.commercialProducts),function(e){return e.CanonicalKey.toString()===a.ProductAppliedTo.toString()});if(s.length>0){var o=s[0].SystemKey;$.each(e.productServices,function(t,s){if(s&&s.product&&s.product.details&&o===s.product.details.productID){var r=Ember.Object.create({UID:a.Id,productID:a.ProductAppliedTo,productSystemKey:o,isSelected:!1,isDisabled:!1,description:a.OfferDescription+" ("+a.PriceDescription+")",product:s.product.details.name});e.viewModel.availableOfferDefinitions.pushObject(r)}})}}),e.viewModel.availableOfferDefinitions&&e.viewModel.availableOfferDefinitions.length>0?e.set("isOffersAvailable",!0):e.set("isOffersAvailable",!1)},disablePackages:function(){var e=this;if(void 0!==e.selectedAgreement&&void 0!==e.principalServices&&void 0!==e.selectedAgreement.ListOfHardware&&void 0!==e.selectedAgreement.ListOfHardware.Hardware&&e.selectedAgreement.ListOfHardware.Hardware.length>0){$.each(e.principalServices,function(e,t){t.set("isDisabled",!0)}),$.each($.makeArray(e.selectedAgreement.ListOfHardware.Hardware),function(t,a){void 0!==a.ListOfService&&void 0!==a.ListOfService.Service&&$.each($.makeArray(a.ListOfService.Service),function(t,a){if(void 0!==a.ProductDetail){if("PRINCIPAL"===a.ProductDetail.Type.toUpperCase()){var s=$.grep($.makeArray(e.principalServices),function(e){return e.UID===a.ProductDetail.UID&&"CANCELLED"!==a.Status.toUpperCase()});s.length>0&&s[0].set("isDisabled",!1)}var o=$.grep($.makeArray(e.viewModel.availableOfferDefinitions),function(e){return e.productSystemKey.toString()===a.ProductDetail.UID.toString()});o.length>0&&$.each($.makeArray(o),function(e,t){t.set("isDisabled",!0)})}})});0===$.grep($.makeArray(e.principalServices),function(e){return!1===e.isDisabled}).length&&$.each(e.principalServices,function(e,t){t.set("isDisabled",!1)})}},getListOfAccount:function(){var e=this,t=[];if(void 0!==e.viewModel.paymentGroup){var a=e.viewModel.paymentGroup,s=Komodo.Models.Account.create(),o=Komodo.canonicalFacadeFactory(s,["UID","StartDate","EndDate","PaymentDetail","ListOfAgreement_Agreement"]);o.set("UID",a.UID),o.set("StartDate",a.StartDate),o.set("EndDate",a.EndDate),o.set("PaymentDetail",e.getPaymentDetail(a)),o.set("ListOfAgreement_Agreement",e.getListOfAgreement(a)),t.push(s)}return t},getPaymentDetail:function(e){var t,a=Komodo.Models.PaymentDetail.create();return void 0!==e.PaymentDetail&&("1"===e.PaymentDetail.MethodOfPayment?(t=Komodo.canonicalFacadeFactory(a,["MethodOfPayment","DebitOrderDay"]),t.set("MethodOfPayment",e.PaymentDetail.MethodOfPayment),t.set("DebitOrderDay",e.PaymentDetail.DebitOrderDay)):e.PaymentDetail.MethodOfPayment>"1"&&(t=Komodo.canonicalFacadeFactory(a,["MethodOfPayment","AccountNumber","BankName","BranchName","BranchCode","DebitOrderDay","PayerName","PayerSurname","PayerIDType","PayerIDNumber"]),t.set("MethodOfPayment",e.PaymentDetail.MethodOfPayment),t.set("AccountNumber",e.PaymentDetail.AccountNumber),t.set("BankName",e.PaymentDetail.BranchName),t.set("BranchName",e.PaymentDetail.branchName),t.set("BranchCode",e.PaymentDetail.BranchCode),t.set("DebitOrderDay",e.PaymentDetail.DebitOrderDay),t.set("PayerName",e.PaymentDetail.PayerName),t.set("PayerIDNumber",e.PaymentDetail.PayerIDNumber))),a},getListOfAgreement:function(e){var t=this,a=Komodo.Services.systemService,s=[];if(void 0!==e){var o=Komodo.Models.Agreement.create(),r=Komodo.canonicalFacadeFactory(o,["UID","Name","Type","StartDate","ActivationDate","TermOfPayment","ConsumerDetail","ConsumerAddress","ListOfHardware_Hardware","NumberOfViewingPoints","LocationIndicator","InstallationType"]);t.selectedAgreement&&r.set("UID",t.selectedAgreement.UID),r.set("Name",t.viewModel.establishmentName),r.set("Type",t.viewModel.viewingLocation.CanonicalKey),r.set("TermOfPayment",void 0!==e.TermOfPayment&&null!==e.TermOfPayment?e.TermOfPayment:1),r.set("StartDate",void 0),r.set("ActivationDate",a.universalDateString(new Date(t.viewModel.activationDate))),r.set("ConsumerDetail",t.getConsumerDetail()),r.set("ConsumerAddress",t.getAddress(e)),r.set("ListOfHardware_Hardware",t.getListOfHardware()),r.set("NumberOfViewingPoints",t.viewModel.viewingPoints),r.set("InstallationType",t.viewModel.installationType),s.push(o);var i=t.getListOfInsuranceHardware();if(i.length>0&&t.viewModel&&t.viewModel.paymentGroup&&void 0!==t.customerAgreementTypes&&t.customerAgreementTypes.length>0){var n=$.grep($.makeArray(t.customerAgreementTypes),function(e){return e.CanonicalKey===t.viewModel.customerClass});if(n.length>0){var c=$.grep($.makeArray(n[0].CustomerTypes.CustomerType),function(e){return e.CanonicalKey===t.viewModel.customerType});if(c.length>0){var d=$.grep($.makeArray(c[0].AgreementCustomerTypes.AgreementCustomerType),function(e){return"DCC"===e.CanonicalValue});if(d.length>0){var l=Komodo.Models.Agreement.create(),u=Komodo.canonicalFacadeFactory(l,["Name","Type","StartDate","ActivationDate","TermOfPayment","ConsumerDetail","ConsumerAddress","ListOfHardware_Hardware","NumberOfViewingPoints","LocationIndicator","InstallationType"]);u.set("Name",t.viewModel.establishmentName+" - DCC"),u.set("Type",d[0].CanonicalKey),u.set("TermOfPayment",void 0!==e.TermOfPayment&&null!==e.TermOfPayment?e.TermOfPayment:1),u.set("StartDate",void 0),u.set("ActivationDate",a.universalDateString(new Date(t.viewModel.activationDate))),u.set("ConsumerDetail",t.getConsumerDetail()),u.set("ConsumerAddress",t.getAddress(e)),u.set("ListOfHardware_Hardware",i),u.set("NumberOfViewingPoints",1),u.set("InstallationType",t.viewModel.installationType),s.push(l)}}}}}return s},getConsumerDetail:function(){var e=this,t=Komodo.Models.PersonalDetail.create();return Komodo.canonicalFacadeFactory(t,["FirstName","Surname"]).set("Surname",e.companyName),t},getAddress:function(e){var t=Komodo.Models.Address.create(),a=Komodo.canonicalFacadeFactory(t,["Type","BuildingNumber","BuildingName","Street","Suburb","City","Province","Country","PostCode","PostBoxNumber"]);return e&&e.BillingAddress&&(a.set("Type","Agreement"),a.set("Street",e.BillingAddress.Street),a.set("Suburb",e.BillingAddress.Suburb),a.set("City",e.BillingAddress.City),a.set("Province",e.BillingAddress.Province),a.set("Country",e.BillingAddress.Country),a.set("PostCode",e.BillingAddress.PostCode),a.set("PostBoxNumber",e.BillingAddress.PostBoxNumber),a.set("BuildingNumber",e.BillingAddress.BuildingNumber),a.set("BuildingName",e.BillingAddress.BuildingName)),t},getListOfHardware:function(){var e=this,t=[];return e.viewModel.selectedproductData.forEach(function(a){var s=Komodo.Models.Hardware.create(),o=Komodo.canonicalFacadeFactory(s,["SerialNumber","LinkedSmartcard","SmartcardDetail","ProductDetail","ListOfService","SecondaryHardware","InsuranceStatus","WarrantyStatus","IsAwaitingInstallation"]);o.set("SerialNumber",a.decoderSerialNumber),o.set("LinkedSmartcard",a.smartcardSerialNumber),o.set("InsuranceStatus","No"),o.set("SmartcardDetail",e.getSmartcardDetail(a)),o.set("ProductDetail",e.getHardwareProductDetail(a));var r=e.getListOfServices();o.set("ListOfService",r),t.push(s)}),!0===e.hasExistingProductData()&&e.viewModel.existingProductData.forEach(function(a){if(!0===a.selected){var s=Komodo.Models.Hardware.create(),o=Komodo.canonicalFacadeFactory(s,["SerialNumber","LinkedSmartcard","SmartcardDetail","ProductDetail","ListOfService","SecondaryHardware","InsuranceStatus","WarrantyStatus","IsAwaitingInstallation"]);o.set("SerialNumber",a.decoderSerialNumber),o.set("LinkedSmartcard",a.smartcardSerialNumber),o.set("InsuranceStatus",!0===a.insurance?"Yes":"No"),o.set("SmartcardDetail",e.getSmartcardDetail(a)),o.set("ProductDetail",e.getHardwareProductDetail(a));var r=e.getListOfServices();o.set("ListOfService",r),t.push(s)}}),t},getListOfInsuranceHardware:function(){var e=this,t=[];return e.viewModel.selectedproductData.forEach(function(a){if(a.insurance&&void 0!==e.getInsuranceService(a)){var s=Komodo.Models.Hardware.create(),o=Komodo.canonicalFacadeFactory(s,["SerialNumber","LinkedSmartcard","SmartcardDetail","ProductDetail","ListOfService","SecondaryHardware","InsuranceStatus","WarrantyStatus","IsAwaitingInstallation"]);o.set("SerialNumber",a.decoderSerialNumber),o.set("LinkedSmartcard",a.smartcardSerialNumber),o.set("InsuranceStatus","Yes"),o.set("SmartcardDetail",e.getSmartcardDetail(a)),o.set("ProductDetail",e.getHardwareProductDetail(a));var r=Komodo.Models.ListOfService.create();r.Service.push(e.getInsuranceService(a)),o.set("ListOfService",r),t.push(s)}}),t},getSmartcardDetail:function(e){var t=Komodo.Models.ProductDetail.create(),a=Komodo.canonicalFacadeFactory(t,["UID","Type","Name","Model","Description"]);return void 0!==e&&(a.set("UID",e.smartcardSerialNumber),a.set("Type",e.smartcardType)),t},getHardwareProductDetail:function(e){var t=this,a=Komodo.Models.ProductDetail.create(),s=Komodo.canonicalFacadeFactory(a,["UID","Type","Name","Model","Description"]);return void 0!==e&&(s.set("UID",e.decoderSerialNumber),s.set("Type",t.getDeviceType(e.decoderCpcType)),s.set("Model",e.decoderModel)),a},getListOfServices:function(){var e,t,a,s,o=this,r=Komodo.Models.ListOfService.create();return void 0!==o.viewModel.primaryProductSelection&&(e=Komodo.Models.Service.create(),t=Komodo.canonicalFacadeFactory(e,["UID","Status","ProductDetail"]),a=Komodo.Models.ProductDetail.create(),s=Komodo.canonicalFacadeFactory(a,["UID","Type","Name","Offers"]),t.set("UID",o.viewModel.primaryProductSelection),s.set("UID",o.viewModel.primaryProductSelection),s.set("Type",o._principalCategoryName),s.set("Offers",o.getAvailableOffers(o.viewModel.primaryProductSelection)),t.set("ProductDetail",a),r.Service.push(e)),Ember.isEmpty(o.listOfAddOnServices)||$.each(o.listOfAddOnServices,function(i,n){Ember.isEmpty(n.allProducts)||$.each(n.allProducts,function(i,c){!0===c.isSelected&&(e=Komodo.Models.Service.create(),t=Komodo.canonicalFacadeFactory(e,["UID","Status","ProductDetail"]),a=Komodo.Models.ProductDetail.create(),s=Komodo.canonicalFacadeFactory(a,["UID","Type","Name","Offers"]),t.set("UID",c.productID),s.set("UID",c.productID),s.set("Type",n.key.toUpperCase()),s.set("Offers",o.getAvailableOffers(c.productID)),t.set("ProductDetail",a),r.Service.push(e))})}),r},getInsuranceService:function(e){var t=this,a=void 0;if(e.insurance){var s=Komodo.UI.cacheDataService.getProductsForCategory(t._insuranceCategoryName,!1,t.productCategoryAndProducts);if(!Ember.isEmpty(s)){var o=s[0].value;if(!Ember.isEmpty(o)&&o[0].product&&o[0].product.details&&o[0].product.details.productID){a=Komodo.Models.Service.create()
;var r=Komodo.canonicalFacadeFactory(a,["UID","Status","ProductDetail"]),i=Komodo.Models.ProductDetail.create(),n=Komodo.canonicalFacadeFactory(i,["UID","Type","Name"]);r.set("UID",o[0].product.details.productID),n.set("UID",o[0].product.details.productID),n.set("Type",t._insuranceCategoryName),r.set("ProductDetail",i)}}}return a},getAvailableOffers:function(e){var t=this,a=[];if(e){var s=$.grep($.makeArray(t.viewModel.availableOfferDefinitions),function(t){return t.productSystemKey.toString()===e.toString()&&!0===t.isSelected});s.length>0&&$.each($.makeArray(s),function(e,t){var s=Komodo.Models.Offer.create();s.UID=t.UID,a.pushObject(s)})}return a},getDeviceType:function(e){var t=this,a=void 0,s=Komodo.UI.cacheDataService.getProductsForCategory(t._hardwareCategoryName,!1,t.productCategoryAndProducts);if(!Ember.isEmpty(s)){var o=s[0].value;$.each(o,function(t,s){return s.SystemKey!==e||(a=s.CanonicalValue,!1)})}return a},validateSelectedOffers:function(){var e=this,t=!0;return $.each($.makeArray(e.viewModel.availableOfferDefinitions),function(a,s){if(!0===s.isSelected){var o=!1,r=!1;$.grep(e.viewModel.availableOfferDefinitions,function(e){return e.productSystemKey.toString()===s.productSystemKey.toString()&&!0===e.isSelected&&e.UID!==s.UID}).length>0&&(t=!1),void 0!==e.viewModel.primaryProductSelection&&s.productSystemKey.toString()===e.viewModel.primaryProductSelection.toString()&&(o=!0),Ember.isEmpty(e.listOfAddOnServices)||$.each(e.listOfAddOnServices,function(e,t){if(!Ember.isEmpty(t.allProducts)){$.grep(t.allProducts,function(e){return e.productID.toString()===s.productSystemKey.toString()&&!0===e.isSelected}).length>0&&(r=!0)}}),!1===o&&!1===r&&(t=!1)}}),t},clearFormData:function(){var e=this;e.viewModel.set("customerClass",void 0),e.viewModel.set("customerType",void 0),e.viewModel.set("paymentGroup",void 0),e.viewModel.set("viewingLocation",void 0),e.viewModel.set("establishmentName",void 0),e.viewModel.set("selectedEstablishmentName",void 0),e.viewModel.set("viewingPoints",void 0),e.viewModel.set("smartcardDeviceNumber",void 0),e.viewModel.set("insurance",!1),e.viewModel.set("installationType",e.installationTypes[1].value),e.viewModel.set("primaryProductSelection",void 0),e.viewModel.set("accounts",[]),e.viewModel.set("establishments",[]),e.viewModel.set("viewingLocations",[]),e.viewModel.set("selectedproductData",[]),e.set("productServices",[]),e.set("listOfAddOnServices",[]),e.set("showDeviceView",!0),e.set("showPackageView",!1),e.set("showAddOnView",!1),e.set("isOffersAvailable",!1)},clearAgreementData:function(){var e=this;e.viewModel.set("viewingLocation",void 0),e.viewModel.set("viewingPoints",void 0),e.viewModel.set("smartcardDeviceNumber",void 0),e.viewModel.set("insurance",!1),e.viewModel.set("installationType",e.installationTypes[1].value),e.viewModel.set("primaryProductSelection",void 0),e.viewModel.set("selectedproductData",[]),e.set("productServices",[]),e.set("listOfAddOnServices",[]),e.set("showDeviceView",!0),e.set("showPackageView",!1),e.set("showAddOnView",!1),e.set("isOffersAvailable",!1)},checkEstablishmentNameExists:function(){var e=this,t=!1;return void 0!==e.viewModel.paymentGroup&&void 0!==e.viewModel.establishmentName&&void 0!==e.viewModel.accounts&&$.each($.makeArray(e.viewModel.accounts),function(a,s){s.UID!==e.viewModel.paymentGroup.UID&&void 0!==s.ListOfAgreement&&void 0!==s.ListOfAgreement.Agreement&&$.each($.makeArray(s.ListOfAgreement.Agreement),function(a,s){return s.Name.toUpperCase()!==e.viewModel.establishmentName.toUpperCase()||(t=!0,!1)})}),t},readFileContent:function(e){var t=this,a=!1,s=[],o=kl.value(t._commercialLocaleBase+"fileInvalid");if(e){var r=e.split("\n");null===r[0].match(/^[a-zA-Z0-9]+/)?(a=!0,o=kl.value(t._commercialLocaleBase+"fileInvalidType")):$(r).each(function(e,t){if(!(t.length>=6))return""!==t&&(a=!0),o=o+"<br />"+t,!1;var r=Komodo.Models.HardwarePairing.create();return r.set("SmartcardSerialNumber",t.substring(0,10).trim()),s.push(r),!0})}else a=!0,$(".file-upload-item:last").remove(),o=kl.value(t._commercialLocaleBase+"fileBlank");a?($(".file-upload-item:last").remove(),Komodo.Controls.MessageBoxController.show(t.viewTitle,o,Komodo.Controls.MessageBoxOkButtons,this,"modelAddProducts","danger")):t.publishValidateMultipleHardwarePairingsEvent(s)},populatePaymentGroups:function(e){var t=this;if(t.viewModel.accounts.clear(),e){if(e.sort(function(e,t){var a=e.Name?e.Name.toLowerCase():"",s=t.Name?t.Name.toLowerCase():"";return e.IsDefault!==t.IsDefault?t.IsDefault-e.IsDefault:a>s?1:a<s?-1:0}),$.each(e,function(e,a){t.viewModel.accounts.addObject(a)}),void 0!==t.paymentGroup&&null!==t.paymentGroup){var a=$.grep($.makeArray(t.viewModel.accounts),function(e){return e.UID===t.paymentGroup.UID});a.length>0&&t.viewModel.set("paymentGroup",a[0]),t.set("paymentGroup",void 0)}void 0!==t.establishmentName&&null!==t.establishmentName&&(t.viewModel.set("establishmentName",t.establishmentName),t.viewModel.set("selectedEstablishmentName",t.establishmentName),t.set("establishmentName",void 0)),void 0!==t.viewingPoints&&null!==t.viewingPoints&&(t.viewModel.set("viewingPoints",t.viewingPoints),t.set("viewingPoints",void 0)),void 0!==t.installationType&&null!==t.installationType&&(t.viewModel.set("installationType",t.installationType),t.set("installationType",void 0))}},populateExistingDevices:function(){var e=this;e.viewModel.set("existingProductData",[]),e.selectedAgreement&&e.selectedAgreement.ListOfHardware&&e.selectedAgreement.ListOfHardware.Hardware&&$.each($.makeArray(e.selectedAgreement.ListOfHardware.Hardware),function(t,a){if(void 0===a.ListOfService||void 0===a.ListOfService.Service||0===a.ListOfService.Service.length){var s="",o="",r="",i="";a.ProductDetail&&a.ProductDetail.ProductFeatures&&a.SmartcardDetail&&(s=a.ProductDetail.Model?a.ProductDetail.Model.split(" ")[1]:"",Ember.isEmpty(a.ProductDetail.ProductFeatures)?o=a.ProductDetail.Name?a.ProductDetail.Name:"":$.each(a.ProductDetail.ProductFeatures,function(e,t){return t.Description!==GetProductsConstants("ProductsConstants","DEVICE_MODEL_DESCRIPTION")||(o=t.Value,!1)}),r=a.ProductDetail.UID?e.getDecoderCpcByproductId(a.ProductDetail.UID):"",i=a.SmartcardDetail.Model?a.SmartcardDetail.Model.split(" ")[1]:"");var n=Ember.Object.extend({init:function(){this._super(),this.display=o+"-"+a.SerialNumber,this.decoderType=o,this.decoderSerialNumber=a.SerialNumber,this.smartcardType=i,this.smartcardSerialNumber=a.LinkedSmartcard,this.decoderModel=s,this.selectedSecondaryDecoderno=void 0,this.decoderCpcType=r,this.insurance=!(!a.InsuranceStatus||"true"!==a.InsuranceStatus.toLowerCase()),this.selected=!1}}).create();e.viewModel.existingProductData.pushObject(n)}}),e.viewModel.existingProductData&&e.viewModel.existingProductData.length>0?(e.viewModel.existingProductData.sort(function(e,t){var a=e.decoderSerialNumber?e.decoderSerialNumber.toLowerCase():"",s=t.decoderSerialNumber?t.decoderSerialNumber.toLowerCase():"";return a>s?1:a<s?-1:0}),e.set("showExistingDeviceView",!0)):e.set("showExistingDeviceView",!1)},getAgreementDetails:function(){var e=this;if(e.selectedAgreement&&e.viewModel.paymentGroup){var t=e.selectedAgreement,a=e.viewModel.paymentGroup;if(e.showBusyIndicator(),void 0===t.ListOfHardware||void 0===t.ListOfHardware.Hardware||0===t.ListOfHardware.Hardware.length){Komodo.Application.SharedObjectController.create().retrieveCustomerDeviceProfile(a.CustomerId,a.UID,t.UID).done(function(t){e.retrieveCustomerProfile(a.CustomerId),e.populateExistingDevices(),e.disablePackages()})}else e.populateExistingDevices();e.hideBusyIndicator()}else e.populateExistingDevices()},getDecoderCpcByproductId:function(e){var t=this,a=!0,s=void 0,o=[],r=Komodo.UI.cacheDataService.getProductsForCategory(t._hardwareCategoryName,!1,t.productCategoryAndProducts);return Ember.isEmpty(r)||(o=r[0].value),$.each(t.productCategoryAndProductDetail,function(t,r){if($.each($.makeArray(r.Products.Product),function(t,s){return s.CanonicalKey===e&&(a=!1),a}),!a){var i=$.grep($.makeArray(o),function(e){return e.CanonicalKey===r.CanonicalKey});i.length>0&&(s=i[0].SystemKey)}return a}),s},hasExistingProductData:function(){var e=this;return $.grep($.makeArray(e.viewModel.existingProductData),function(e){return!0===e.selected}).length>0},getNewProcessID:function(){this.startNewProcess()},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,3e4,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},viewingLocationChanged:function(){var e=this;e.viewModel.set("viewingPoints",void 0),e.set("selectedAgreement",void 0);var t=Komodo.UI.cacheDataService.getProductsForCategory(e._principalCategoryName,!1,e.productCategoryAndProducts);if(!Ember.isEmpty(t)){var a=t[0].value;Ember.isEmpty(a)||void 0===e.viewModel.viewingLocation||null===e.viewModel.viewingLocation?e.set("productServices",[]):(e.previousAgreement&&e.previousAgreement.Name&&e.previousAgreement.LocationIndicator&&e.viewModel.establishmentName&&e.viewModel.viewingLocation&&e.previousAgreement.Name.toUpperCase()===e.viewModel.establishmentName.toUpperCase()&&e.previousAgreement.LocationIndicator.toUpperCase()===e.viewModel.viewingLocation.CanonicalValue.toUpperCase()&&(e.set("selectedAgreement",e.previousAgreement),e.viewModel.set("installationType",e.previousAgreement.InstallationType),e.viewModel.set("viewingPoints",e.previousAgreement.NumberOfViewingPoints)),Komodo.UI.cacheDataService.populateProductsBasedOnLocation(e.viewModel.customerTypeSystemKey,e.viewModel.viewingLocation.CanonicalValue,a,e.productServices),e.populateAvailableOfferDefinitions(),e.getAgreementDetails())}}.observes("viewModel.viewingLocation"),productServicesChanged:function(){var e=this;void 0!==e.productServices&&e.productServices.length>0?(e.set("showAddSmartcardView",!0),e.set("showPackageView",!0),e.viewModel.set("activationDate",new Date)):(e.set("showAddSmartcardView",!1),e.set("showPackageView",!1)),e.populatePrincipals()}.observes("productServices.length"),primaryProductSelectionChanged:function(){var e=this;e.populateAddOns(e.viewModel.primaryProductSelection)}.observes("viewModel.primaryProductSelection"),establishmentNameChanged:function(){var e=this;void 0!==e.viewModel.paymentGroup&&null!==e.viewModel.paymentGroup&&void 0!==e.viewModel.establishmentName&&void 0!==e.viewModel.paymentGroup.ListOfAgreement&&void 0!==e.viewModel.paymentGroup.ListOfAgreement.Agreement&&(e.set("selectedAgreement",void 0),e.set("previousAgreement",void 0),e.viewModel.set("viewingLocation",void 0),$.each($.makeArray(e.viewModel.paymentGroup.ListOfAgreement.Agreement),function(t,a){if(a.Name.toUpperCase()===e.viewModel.establishmentName.toUpperCase()){var s=a.LocationIndicator;void 0!==e.viewingLocation&&null!==e.viewingLocation&&(s=e.viewingLocation),e.set("selectedAgreement",a),e.set("previousAgreement",a),e.viewModel.set("establishmentName",a.Name);var o=$.grep($.makeArray(e.viewModel.viewingLocations),function(e){return e.CanonicalValue.toUpperCase()===s.toUpperCase()||s.toUpperCase().indexOf(e.CanonicalValue.toUpperCase())>-1});return o.length>0&&e.viewModel.set("viewingLocation",o[0]),e.viewModel.set("installationType",a.InstallationType),e.viewModel.set("viewingPoints",a.NumberOfViewingPoints),!1}return!0}),void 0===e.selectedAgreement||null===e.selectedAgreement?e.clearAgreementData():e.disablePackages(),e.set("viewingLocation",void 0))}.observes("viewModel.establishmentName"),paymentGroupChanged:function(){var e=this;if(e.clearAgreementData(),e.viewModel.set("establishmentName",void 0),e.viewModel.set("selectedEstablishmentName",void 0),e.set("selectedAgreement",void 0),e.viewModel.establishments.clear(),e.viewModel.viewingLocations.clear(),e.populateViewingLocations(),e.viewModel.paymentGroup&&e.viewModel.paymentGroup.ListOfAgreement&&e.viewModel.paymentGroup.ListOfAgreement.Agreement){var t=[];$.each(e.viewModel.paymentGroup.ListOfAgreement.Agreement,function(e,a){a.Name.toUpperCase().indexOf(" - DCC")<=0&&"ACTIVE"===a.AgreementStatus.toUpperCase()&&t.addObject(a.Name)}),t.sort(function(e,t){return e<t?-1:e>t?1:0}),$.each(t,function(t,a){e.viewModel.establishments.addObject(a)}),e.viewModel.establishments&&e.viewModel.establishments.length>0?e.viewModel.set("addNewEstablishment",!1):e.viewModel.set("addNewEstablishment",!0)}}.observes("viewModel.paymentGroup"),toggleAllInsured:function(){var e=this.get("viewModel.allInsured");$.each($.makeArray(this.viewModel.selectedproductData),function(t,a){a.set("insurance",e)})}.observes("viewModel.allInsured"),principalServicesChanged:function(){var e=this;e.principalServices&&e.principalServices.length>0&&(e.viewModel.set("primaryProductSelection",void 0),$.each(e.principalServices,function(t,a){e.viewModel&&a&&!0===a.isSelected&&e.viewModel.set("primaryProductSelection",a.UID)}))}.observes("principalServices.@each.isSelected"),selectedEstablishmentNameChanged:function(){var e=this;e.viewModel&&e.viewModel.selectedEstablishmentName?e.viewModel.set("establishmentName",e.viewModel.selectedEstablishmentName):e.viewModel.set("establishmentName","")}.observes("viewModel.selectedEstablishmentName"),addNewEstablishmentChanged:function(){var e=this;e.get("viewModel.addNewEstablishment")?(e.viewModel.set("establishmentName",""),e.viewModel.set("installationType",e.installationTypes[1].value),e.set("viewModel.showEstablishmentTextBox",!0),e.set("viewModel.showEstablishmentDropdownBox",!1)):(e.viewModel.set("selectedEstablishmentName",void 0),e.set("viewModel.showEstablishmentTextBox",!1),e.set("viewModel.showEstablishmentDropdownBox",!0))}.observes("viewModel.addNewEstablishment"),actions:{addDevice:function(){var e=this;!1!==e.canSubmitData(e,e.viewTitle,{showInModal:!0})&&(e.isDeviceAdded()||e.publishValidateHardwarePairingEvent(void 0,e.get("smartcardDeviceNumber")))},deleteDevice:function(e){var t=this;Komodo.Controls.MessageBoxController.show(kl.value("controls.datagrid.deleteTitle"),kl.value("controls.datagrid.defaultDeleteText"),Komodo.Controls.MessageBoxYesNoButtons,t,"delItem","warning").response=function(a){"yes"===a&&(t.viewModel.selectedproductData.removeObject(e.content),t.set("primaryDevicesList",$.grep(t.primaryDevicesList,function(t){return!(t.decoderSerialNumber===e.content.decoderSerialNumber)})))}},selectAddOns:function(){var e=this;if(!1!==e.canSubmitData(e.viewModel,e.viewTitle,{showInModal:!0})){if(void 0===e.viewModel.primaryProductSelection&&void 0===e.selectedAgreement)return void Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._commercialLocaleBase+"messagePackageValidation"),Komodo.Controls.MessageBoxOkButton,e,"id145456673","danger");if(e.viewModel.selectedproductData.length>0||!0===e.hasExistingProductData()){var t=e.viewModel.primaryProductSelection;void 0!==e.selectedAgreement&&void 0===e.viewModel.primaryProductSelection&&void 0!==e.selectedAgreement.ListOfHardware&&void 0!==e.selectedAgreement.ListOfHardware.Hardware&&$.each($.makeArray(e.selectedAgreement.ListOfHardware.Hardware),function(a,s){void 0!==s.ListOfService&&void 0!==s.ListOfService.Service&&$.each($.makeArray(s.ListOfService.Service),function(a,s){void 0!==s.ProductDetail&&s.ProductDetail.Type.toUpperCase()===e._principalCategoryName&&(t=s.ProductDetail.UID)})}),e.populateAddOns(t),e.set("showDeviceView",!1),e.set("showPackageView",!1),e.set("showAddOnView",!0)}else Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._commercialLocaleBase+"messageDeviceToLinkValidation"),Komodo.Controls.MessageBoxOkButton,e,"id145456673","danger")}},cancelAddOns:function(){var e=this;Ember.isEmpty(e.listOfAddOnServices)||$.each(e.listOfAddOnServices,function(e,t){Ember.isEmpty(t.allProducts)||$.each(t.allProducts,function(e,t){!0===t.isSelected&&t.set("isSelected",!1)})}),e.set("showAddOnView",!1),e.set("showDeviceView",!0),e.productServices.length>0&&e.set("showPackageView",!0)},activateProducts:function(){var e=this;if(!1!==e.canSubmitData(e.viewModel,e.viewTitle,{showInModal:!0})){if(void 0===e.customerNo&&null===e.customerNo)return void Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._localeBase+"customerNubmerMissing"),Komodo.Controls.MessageBoxOkButton,e,"id5446883","danger");if(!0===e.checkEstablishmentNameExists())return void Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._commercialLocaleBase+"messageEstablishmentValidation"),Komodo.Controls.MessageBoxOkButton,e,"id5446883","danger");if(void 0===e.viewModel.primaryProductSelection&&void 0===e.selectedAgreement)return void Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._commercialLocaleBase+"messagePackageValidation"),Komodo.Controls.MessageBoxOkButton,e,"id145456673","danger");var t=!1;return Ember.isEmpty(e.listOfAddOnServices)||$.each(e.listOfAddOnServices,function(e,a){Ember.isEmpty(a.allProducts)||a.allProducts.forEach(function(e){!0===e.isSelected&&(t=!0)})}),void 0===e.viewModel.primaryProductSelection&&!1===t?void Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._commercialLocaleBase+"messagePackageValidation"),Komodo.Controls.MessageBoxOkButton,e,"id145456673","danger"):!1===e.validateSelectedOffers()?void Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._commercialLocaleBase+"messageOfferValidation"),Komodo.Controls.MessageBoxOkButton,e,"id145456673","danger"):void(e.viewModel.selectedproductData.length>0||!0===e.hasExistingProductData()?!0===e.validateHardware()&&(e.set("isButtonDisable",!0),e.publishAssociateProductsEvent()):Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._commercialLocaleBase+"messageDeviceToLinkValidation"),Komodo.Controls.MessageBoxOkButton,e,"id145456673","danger"))}},readTextFile:function(e){var t=this;e.error&&($(".file-upload-item:last").remove(),Komodo.Controls.MessageBoxController.show(t.viewTitle,kl.value(t._commercialLocaleBase+"fileError")+" "+e.error.message,Komodo.Controls.MessageBoxOkButtons,this,"modelAddProducts","danger")),"text/plain"!==e.type&&"application/vnd.ms-excel"!==e.type?($(".file-upload-item:last").remove(),Komodo.Controls.MessageBoxController.show(t.viewTitle,kl.value(t._commercialLocaleBase+"fileInvalidType"),Komodo.Controls.MessageBoxOkButtons,this,"modelAddProducts","danger")):t.readFileContent(e.content)}},retrieveCustomerProfile:function(e){var t=this;t.viewModel.accounts.clear();var a=Komodo.Services.customerProfileService.getCustomerProfile();a&&a.ResponseMessage&&a.ResponseMessage.Payload&&a.ResponseMessage.Payload.ListOfAccount&&a.ResponseMessage.Payload.ListOfAccount.Account&&t.populatePaymentGroups(a.ResponseMessage.Payload.ListOfAccount.Account)},retrieveProductOffers:function(){var e=this;e.viewModel&&e.viewModel.customerClass&&Komodo.Services.queryService.getJSON("/Device/GetProductOffers?customerClass="+e.viewModel.customerClass+"&page=0").done(function(t){t&&t.OfferDefinitions&&e.set("offerDefinitions",t.OfferDefinitions)}).error(function(e){var t=JSON.stringify(e);Komodo.log("retrieveProductOffers ajax call failed. Error: "+t)})},publishValidateHardwarePairingEvent:function(e,t){var a=this;if(a.viewModel.useOptimizedVersion){var s=[];s.push(a.get("smartcardDeviceNumber")),Komodo.Services.queryService.postJSON("/Device/ValidateHardware",{data:s}).done(function(e){if(e&&e.length&&e.length>0){$.each($.makeArray(e),function(e,t){t.ProductDetail.ProductFeatures={Description:t.ProductDetail.Description}});var t={ResponseMessage:{Payload:{ListOfHardware:{Hardware:e[0]}}}};a.messageHardwareRetrievedReceived(t)}}).error(function(e){var t=JSON.stringify(e);Komodo.log("retrieveProductOffers ajax call failed. Error: "+t),e&&e.responseJSON&&e.responseJSON.Message?Komodo.Controls.MessageBoxController.show(a.viewTitle,e.responseJSON.Message,Komodo.Controls.MessageBoxOkButton,a,"id544246673","danger"):e&&e.responseText&&Komodo.Controls.MessageBoxController.show(a.viewTitle,e.responseText,Komodo.Controls.MessageBoxOkButton,a,"id544246673","danger")})}else{var o=Komodo.Models.ValidateHardwarePairing.create(),r=Komodo.canonicalFacadeFactory(o,["Country","DecoderSerialNumber","SmartcardSerialNumber"]);r.set("Country",a.get("loggedInCountryId")),void 0!==e&&null!==e&&r.set("DecoderSerialNumber",e),void 0!==t&&null!==t&&r.set("SmartcardSerialNumber",t),a.getNewProcessID(),Komodo.Services.AssociateProductsService.seachHardware(a,o).done(function(){Komodo.log("publishValidateHardwarePairingEvent() : ValidateHardwarePairing event has been published."),a.showBusyIndicator()}).fail(function(){Komodo.log("publishValidateHardwarePairingEvent() : ValidateHardwarePairing event has failed.")})}},messageHardwareRetrievedReceived:function(e){var t=this,a=!1;t.hideBusyIndicator();var s=kl.value(t._commercialLocaleBase+"messageValidation");if(void 0!==e.ResponseMessage.Payload.ListOfHardware&&void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware&&void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.Status){var o=e.ResponseMessage.Payload.ListOfHardware.Hardware;switch(s=kl.value(t._commercialLocaleBase+"messageDeviceValidation"),s=s+"<br />"+kl.value(t._localeBase+"device")+": "+o.SerialNumber+" - "+kl.value(t._commercialLocaleBase+"status")+": "+o.Status,o.Status.toUpperCase()){case"MATCHING DEVICE NOT FOUND":a=!0,t.matchingDeviceNotFound(e);break;case"AVAILABLE FOR USE":if(void 0!==o.LinkedSmartcardStatus)switch(o.LinkedSmartcardStatus.toUpperCase()){case"MATCHING DEVICE NOT FOUND":a=!0,t.matchingDeviceNotFound(e);break;case"AVAILABLE FOR USE":a=!0,t.availableForUse(e);break;default:s=s+"<br />"+kl.value(t._localeBase+"smartcard")+": "+o.LinkedSmartcard+" - "+kl.value(t._commercialLocaleBase+"status")+": "+o.LinkedSmartcardStatus}else s=s+"<br />"+kl.value(t._localeBase+"smartcard")+": "+o.LinkedSmartcard+" - "+kl.value(t._commercialLocaleBase+"status")+": "+o.LinkedSmartcardStatus}}!1===a&&Komodo.Controls.MessageBoxController.show(t.viewTitle,s,Komodo.Controls.MessageBoxOkButton,t,"id5556673","danger")},publishAssociateProductsEvent:function(){var e=this;if(e.viewModel.useOptimizedAddDeviceVersion){var t=e.getListOfAccount(),a=[];$.each($.makeArray(t),function(t,s){var o=[];$.each($.makeArray(s.get("ListOfAgreement.Agreement")),function(e,t){var a=[];$.each($.makeArray(t.get("ListOfHardware.Hardware")),function(e,t){var s=[];$.each($.makeArray(t.get("ListOfService.Service")),function(e,t){var a=[];$.each($.makeArray(t.get("ProductDetail.Offers")),function(e,t){a.push({Id:t.get("UID"),OfferDescription:t.get("Name")})}),s.push({UID:t.get("UID"),Offers:a})}),a.push({SerialNumber:t.get("SerialNumber"),Status:t.get("Status"),InsuranceStatus:t.get("InsuranceStatus"),IsInsured:!1,LinkedSmartcard:t.get("LinkedSmartcard"),LinkedSmartcardStatus:t.get("LinkedSmartcardStatus"),Services:s})}),o.push({AgreementNumber:t.get("UID"),Name:t.get("Name"),Type:t.get("Type"),StartDate:t.get("ActivationDate"),EndDate:t.get("EndDate"),Status:t.get("Status"),TermOfPayment:t.get("TermOfPayment"),FinancialAccountId:s.get("UID"),InstallationType:t.get("InstallationType"),TypeName:"",NumberOfViewingPoints:t.get("NumberOfViewingPoints"),Devices:a})}),a.push({Number:s.get("UID"),CustomerId:e.customerNo,Agreements:o})}),e.getNewProcessID(),e.showBusyIndicator(),e.set("isDisableActiveButton",!0),Komodo.Services.queryService.postJSON("/Device/AddDevicesAndPackages",{data:a}).done(function(t){if(t&&t.length&&t.length>0){var a={ResponseMessage:{Payload:{CustomerUID:e.customerNo,ListOfAccount:{Account:e.getListOfAccount()[0]}}}};e.messageCommercialProductsAddedReceived(a),e.publishCreateInteraction(e.customerNo)}else e.hideBusyIndicator()}).error(function(t){e.hideBusyIndicator();var a=JSON.stringify(t);Komodo.log("retrieveProductOffers ajax call failed. Error: "+a),t&&t.responseJSON&&t.responseJSON.Message?Komodo.Controls.MessageBoxController.show(e.viewTitle,t.responseJSON.Message,Komodo.Controls.MessageBoxOkButton,e,"id544246673","danger"):t&&t.responseText&&Komodo.Controls.MessageBoxController.show(e.viewTitle,t.responseText,Komodo.Controls.MessageBoxOkButton,e,"id544246673","danger")})}else{var s=Komodo.Models.AddCommercialProducts.create(),o=Komodo.canonicalFacadeFactory(s,["Country","CustomerUID","ListOfAccount_Account"]);o.set("Country",e.get("loggedInCountryId")),o.set("CustomerUID",e.customerNo),o.set("ListOfAccount_Account",e.getListOfAccount()),e.getNewProcessID(),Komodo.Services.AssociateProductsService.associateCommercialProducts(e,s).done(function(){e.showBusyIndicator(),e.set("isDisableActiveButton",!0),Komodo.log("publishAssociateProductsEvent() : Link Commercial Products event has been published.")}).fail(function(){e.hideBusyIndicator(),Komodo.log("publishAssociateProductsEvent() : Link Commercial Products event has failed.")})}},publishCreateInteraction:function(e){var t=Komodo.Models.CreateInteraction.create(),a=Komodo.Models.Case.create();a.set("InteracteeName",Komodo.Services.securityService.session.domainUserName),a.set("InteractionLocation",this.get("loggedInCountryId")),a.set("InteractionMedium","5"),a.set("CustomerUID",e),a.set("QueryType",6),a.set("Category",4),a.set("SubCategory",1),a.set("Outcome",114),a.set("Status","1"),a.set("Notes","Products linked successfully");var s=Komodo.canonicalFacadeFactory(t,["Country","Case"]);s.set("Country",this.get("loggedInCountryId")),s.set("Case",a),Komodo.Services.CustomerService.publishCustomerEvent(this,t,"CreateInteraction","v1",!0)},messageCommercialProductsAddedReceived:function(e){var t=this,a=!0;if(t.hideBusyIndicator(),void 0!==e.ResponseMessage.Payload.ListOfAccount&&void 0!==e.ResponseMessage.Payload.ListOfAccount.Account){var s=e.ResponseMessage.Payload.CustomerUID,o=e.ResponseMessage.Payload.ListOfAccount.Account;if(void 0!==o.ListOfAgreement&&null!==o.ListOfAgreement&&void 0!==o.ListOfAgreement.Agreement){a=!1;var r=o.ListOfAgreement.Agreement,i=void 0;if(o.ListOfAgreement.Agreement.length&&o.ListOfAgreement.Agreement.length>0){var n=$.grep($.makeArray(o.ListOfAgreement.Agreement),function(e){return e.Name.toUpperCase().indexOf(" - DCC")<=0});n&&n.length&&n.length>0&&(r=n[0]);var c=$.grep($.makeArray(o.ListOfAgreement.Agreement),function(e){return e.Name.toUpperCase().indexOf(" - DCC")>0});c&&c.length&&c.length>0&&(i=c[0])}var d=Komodo.Models.CommercialAssociateProductsModel.create();d.set("establishmentName",r.Name),d.set("viewingPoints",r.NumberOfViewingPoints),d.set("installationType",r.InstallationType);var l=$.grep($.makeArray(t.viewModel.viewingLocations),function(e){return e.CanonicalKey===r.Type});l.length>0&&d.set("viewingLocation",l[0].CanonicalValue);var u=Komodo.UI.cacheDataService.getProductsForCategory(t._principalCategoryName,!1,t.productCategoryAndProducts),h=Komodo.UI.cacheDataService.getProductsForCategory(t._addOnCategoryFilterString,!0,t.productCategoryAndProducts);if(void 0!==r.ListOfHardware&&null!==r.ListOfHardware&&void 0!==r.ListOfHardware.Hardware&&$.each($.makeArray(r.ListOfHardware.Hardware),function(e,a){if(a.ListOfService&&a.ListOfService.Service&&a.ListOfService.Service.length>0)$.each($.makeArray(a.ListOfService.Service),function(e,s){if(void 0!==s.ProductDetail&&s.ProductDetail.Type.toUpperCase()!==t._insuranceCategoryName){var o=Komodo.Models.ManageViewingGridModel.create();o.set("smartCardNumber",void 0!==a.SmartcardDetail?a.SmartcardDetail.UID:""),o.set("deviceNumber",a.SerialNumber),o.set("applyStyleForPrin",!1),o.set("applyStyleForAddOn",!1);var r;if(s.ProductDetail.Type.toUpperCase()===t._principalCategoryName){if(!Ember.isEmpty(u)){var n=u[0].value;r=$.grep($.makeArray(n),function(e){return e.product.details.productID===s.ProductDetail.UID}),r.length>0&&(o.set("prinPckName",r[0].product.details.name),o.set("addOnPckName","-"),o.set("applyStyleForPrin",!0))}}else Ember.isEmpty(h)||$.each(h,function(e,t){Ember.isEmpty(t.value)||(r=$.grep($.makeArray(t.value),function(e){return e.product.details.productID===s.ProductDetail.UID}),r.length>0&&(o.set("addOnPckName",r[0].product.details.name),o.set("prinPckName","-"),o.set("applyStyleForAddOn",!0)))});if(o.set("insuranceServicesStatus","No"),i&&i.ListOfHardware&&i.ListOfHardware.Hardware){var c=$.grep($.makeArray(i.ListOfHardware.Hardware),function(e){return e.SerialNumber===a.SerialNumber});c&&c.length>0&&o.set("insuranceServicesStatus","Yes")}d.selectedproductData.addObject(o)}});else if(i){var s=Komodo.Models.ManageViewingGridModel.create();$.each($.makeArray(i.ListOfHardware.Hardware),function(e,t){s.set("smartCardNumber",void 0!==t.SmartcardDetail?t.SmartcardDetail.UID:""),s.set("deviceNumber",t.SerialNumber),s.set("prinPckName","-"),s.set("addOnPckName","-"),s.set("applyStyleForPrin",!1),s.set("applyStyleForAddOn",!1),s.set("insuranceServicesStatus","Yes"),d.selectedproductData.addObject(s)})}}),d.set("paymentGroup",t.viewModel.paymentGroup),s){Komodo.Application.SharedObjectController.create().retrieveCustomerProfile(s).done(function(e){Komodo.Services.uiService.getController("commercialActivationSummary").setResponseMessage(d,"AssociateProducts"),Komodo.Services.uiService.getRoute("application").transitionTo("commercialActivationSummary"),t.clearFormData()})}}}!0===a&&Komodo.Controls.MessageBoxController.show(t.viewTitle,kl.value(t._localeBase+"messgProductLinkFail"))},publishValidateMultipleHardwarePairingsEvent:function(e){var t=this;if(t.viewModel.useOptimizedVersion){var a=[];$.each($.makeArray(e),function(e,t){t.get("DecoderSerialNumber")?a.push(t.get("DecoderSerialNumber")):a.push(t.get("SmartcardSerialNumber"))}),Komodo.Services.queryService.postJSON("/Device/ValidateHardware",{data:a}).done(function(e){if(e&&e.length&&e.length>0){$.each($.makeArray(e),function(e,t){t.ProductDetail.ProductFeatures={Description:t.ProductDetail.Description}});var a={ResponseMessage:{Payload:{ListOfHardware:{Hardware:e}}}};t.messageMultipleHardwarePairingsValidatedReceived(a)}}).error(function(e){var t=JSON.stringify(e);Komodo.log("retrieveProductOffers ajax call failed. Error: "+t)})}else{var s=Komodo.Models.ValidateMultipleHardwarePairings.create(),o=Komodo.canonicalFacadeFactory(s,["Country","ListOfHardwarePairings"]);o.set("Country",t.get("loggedInCountryId")),o.set("ListOfHardwarePairings",e),t.getNewProcessID(),Komodo.Services.AssociateProductsService.seachMultipleHardwares(t,s).done(function(){Komodo.log("publishValidateMultipleHardwarePairingsEvent() : ValidateMultipleHardwarePairings event has been published."),t.showBusyIndicator()}).fail(function(){Komodo.log("publishValidateMultipleHardwarePairingsEvent() : ValidateMultipleHardwarePairings event has failed.")})}},messageMultipleHardwarePairingsValidatedReceived:function(e){var t=this,a=!0,s=!1;t.hideBusyIndicator();var o=kl.value(t._commercialLocaleBase+"messageDeviceValidation");void 0!==e.ResponseMessage.Payload.ListOfHardware&&void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware&&(t.viewModel.set("selectedproductData",[]),t.set("smartcardDeviceNumber",void 0),$(e.ResponseMessage.Payload.ListOfHardware.Hardware).each(function(e,r){void 0!==r.Status&&void 0!==r.LinkedSmartcardStatus?"AVAILABLE FOR USE"===r.Status.toUpperCase()&&"AVAILABLE FOR USE"===r.LinkedSmartcardStatus.toUpperCase()?(t.addHardwareToList(r.ProductDetail.Model,r.ProductDetail.ProductFeatures.Description,void 0!==r.SerialNumber?r.SerialNumber:void 0,void 0!==r.SmartcardDetail?r.SmartcardDetail.Type:void 0,void 0!==r.LinkedSmartcard?r.LinkedSmartcard:void 0,r.ProductDetail.Type,t.get("viewModel.insurance"),!0),s=!0):(a=!1,o=o+"<br />"+kl.value(t._localeBase+"device")+": "+r.SerialNumber+" - "+kl.value(t._commercialLocaleBase+"status")+": "+r.Status,o=o+" paired with "+kl.value(t._localeBase+"smartcard")+": "+r.LinkedSmartcard+" - "+kl.value(t._commercialLocaleBase+"status")+": "+r.LinkedSmartcardStatus):(a=!1,o=o+"<br />"+kl.value(t._localeBase+"device")+": "+r.SerialNumber+" - "+kl.value(t._commercialLocaleBase+"status")+": "+r.Status)})),
!1===a&&(!0===s?Komodo.Controls.MessageBoxController.show(t.viewTitle,kl.value(t._commercialLocaleBase+"fileUploaded")+"<br />"+o,Komodo.Controls.MessageBoxOkButton):Komodo.Controls.MessageBoxController.show(t.viewTitle,o,Komodo.Controls.MessageBoxOkButton,t,"id5556673","danger"))},messageFailureMessageEventReceived:function(e){var t=this;t.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(t.viewTitle,e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButton,this,"id544246673","danger")},messageReceived:function(e){this.hideBusyIndicator(),Komodo.UI.log("[CommercialAssociateProductsController.messageReceived] : event name = "+e.ResponseMessage.EventName)},messageDeliveryFailure:function(e){this.hideBusyIndicator(),Komodo.UI.warn("[CommercialAssociateProductsController.messageDeliveryFailure] : messageId = "+e.messageId)},messageFault:function(e){this.hideBusyIndicator(),Komodo.UI.error("[CommercialAssociateProductsController.messageFault] : messageId = "+e.messageId)},commercialClassId:[Komodo.CustomerClass.COMMERCIAL,Komodo.CustomerClass.NATIONAL_DEAL],viewTitle:void 0,smartcardDeviceNumber:void 0,country:void 0,countries:[],productCategoryAndProducts:[],allProductCategories:[],offerDefinitions:[],devicePairs:[],productServices:[],listOfAddOnServices:[],principalServices:[],primaryDevicesList:[],customerAgreementTypes:[],productPriceHelperSet:[],commercialProducts:[],customerTypes:[],productCategoryAndProductDetail:[],selectedGridItem:void 0,commandGridItemn:void 0,deleteGridItem:void 0,showDeviceView:!0,showAddSmartcardView:!1,showPackageView:!1,showAddOnView:!1,showExistingDeviceView:!1,isOffersAvailable:!1,isButtonDisable:!1,virtualProductDataPageContent:Ember.A(),installationTypes:[{title:Komodo.InstallationTypes.IPTV,value:Komodo.InstallationTypes.IPTV},{title:Komodo.InstallationTypes.STANDARD,value:Komodo.InstallationTypes.STANDARD}],maximumAllowedViewingPoints:-1}),Komodo.Application.CommercialAddProductsController=Komodo.UI.Controller.extend({_localeBase:"locale.associateProducts:associateProducts.",_customerLocaleBase:"locale.customer:customerInformation.",_commercialLocaleBase:"locale.commercialcustomer:addDevicesAndPackages.",_localecommercialCustomer:"locale.commercialcustomer:",_principalCategoryName:"PRINCIPAL",_insuranceCategoryName:"INSURANCE",_hardwareCategoryName:"HARDWARE",_addOnCategoryFilterString:"ADDON:ADD ON",init:function(){this._super(),Komodo.log("Constructing Add Products for Commercial Customer controller"),this.requiresDependency("_eventAggregator",{singleton:Komodo.Services.eventAggregator}),this.set("processVersion","v1.1"),this.set("processName","Add Products for Commercial Customer process")},start:function(){var e,t=this;t.registerModel("viewModel",Komodo.Models.CommercialAssociateProductsModel),t.registerValidation(),t.set("viewTitle",kl.value(t._commercialLocaleBase+"useCaseTitle")),t.clearFormData(),Komodo.Services.customerProfileService.validateCustomerClass(t.commercialClassId).done(function(a){void 0!==a&&null!==a&&void 0!==a.CustomerDetail&&null!==a.CustomerDetail?(t.set("customerNo",a.CustomerNumber),t.set("companyName",a.CustomerDetail.CompanyName),t.viewModel.set("customerClass",a.CustomerDetail.Class),t.viewModel.set("customerType",a.CustomerDetail.Type),t.set("isButtonDisable",!1),t.createProductData(a.CustomerDetail.Class),t.populateViewingLocations(),t.retrieveProductOffers(),t.retrieveCustomerProfile(t.customerNo)):(e=Komodo.Controls.MessageBoxController.show(kl.value(t._localecommercialCustomer+"customerprofile.customerNotFoundTitle"),kl.value(t._localecommercialCustomer+"customerprofile.customerNotFound"),Komodo.Controls.MessageOKButtons,t,"id5446673","warning"),e.response=function(e){if("ok"===e)return void Komodo.Services.uiService.transitionTo("home")})}),t.createCDMData(),t._setFeatureToggles(),t._super()},stop:function(){this.hideBusyIndicator(),this._super()},getEventAggregator:function(){return this.get("_eventAggregator")},registerValidation:function(){var e=this;e.registerValidator(e.get("viewModel"),"paymentGroup",{type:"string",isRequired:!0,displayName:kl.value(e._localecommercialCustomer+"paymentGroup.paymentGroup")}),e.registerValidator(e.get("viewModel"),"viewingLocation",{type:"string",isRequired:!0,displayName:kl.value(e._localecommercialCustomer+"viewingInformation.viewingLocation")}),e.registerValidator(e.get("viewModel"),"establishmentName",{type:"string",isRequired:!0,displayName:kl.value(e._localecommercialCustomer+"customerprofile.establishmentName")}),e.registerValidator(e.get("viewModel"),"viewingPoints",{type:"string",isRequired:!0,displayName:kl.value(e._localecommercialCustomer+"customerprofile.numberViewingPoints"),maximumAllowedViewingPoints:e.maximumAllowedViewingPoints,minLength:1,maxLength:10,functions:[Komodo.UI.Validators.numericValidator,Komodo.UI.Validators.viewingPointsValidator]})},_setFeatureToggles:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("AssociateProducts","IsInsuranceAvailable").done(function(t){Komodo.Services.securityService.hasPermission("clarity://commercialAddProductsView/viewInsurance")?e.set("viewModel.showInsurance",t):e.set("viewModel.showInsurance",!1)}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)}),Komodo.Services.featureToggleService.isEnabled("AssociateProducts","UseOptimizedAddDeviceVersion").done(function(t){e.set("viewModel.useOptimizedAddDeviceVersion",t)}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)})},createCDMData:function(){var e=this,t=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),a=Komodo.Services.uiService.getController("application").get("_selectedCountryDescription"),s=Komodo.Services.localizationService.getCurrentLanguage();e.set("loggedInCountryId",t),e.set("country",a),e.set("maximumAllowedViewingPoints",-1),e.getStaticCDMData(t,"global","ViewingPointConstants",[]),e.getHierachicalCDMData(t,s,"AgreementCustomerType",e.customerAgreementTypes),e.getHierachicalCDMData(t,s,"HardwareModelDetail",e.devicePairs),e.getHierachicalCDMData(t,s,"Location",e.countries),e.getHierachicalCDMData(t,s,"ProductPriceHelperSet",e.productPriceHelperSet)},createProductData:function(e){var t=this,a=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),s=Komodo.Services.uiService.getController("application").get("_selectedCountryDescription"),o=Komodo.Services.localizationService.getCurrentLanguage();t.set("loggedInCountryId",a),t.set("country",s);var r=t.getProductPriceDetailDatasetName(e);t.productCategoryAndProducts.clear(),t.allProductCategories.clear(),Komodo.UI.cacheDataService.getProductCategoryAndProductsDataset(r,a,o,t.productCategoryAndProducts,t.allProductCategories)},getProductPriceDetailDatasetName:function(e){var t="";switch(e){case 1:case"1":t="Commercial";break;case 9:case"9":t="NationalDeal"}return t=t+GetCustomerTypesConstants("DefaultCurrencyQualifier","QUALIFIER")+"ProductPriceDetail"},setData:function(e,t,a,s,o,r,i,n,c){var d=this;d.set("paymentGroup",e),d.set("establishmentName",t),d.set("viewingLocation",a),d.set("decoderModel",s),d.set("decoderType",o),d.set("decoderSerialNumber",r),d.set("smartcardType",i),d.set("smartcardSerialNumber",n),d.set("decoderCpcType",c)},getHierachicalCDMData:function(e,t,a,s){var o=this;Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){var t=JSON.parse(e);switch(s.clear(),a){case"AgreementCustomerType":$.each($.makeArray(t.CustomerClasses.CustomerClass),function(e,t){s.addObject(t)}),o.populateViewingLocations();break;case"HardwareModelDetail":$.each($.makeArray(t.PrimaryHardwareModels.PrimaryHardwareModel),function(e,t){s.addObject(t)});break;case"Location":$.each($.makeArray(t.Countries.Country),function(e,t){s.addObject(t)});break;case"ProductPriceHelperSet":o.customerTypes.clear(),$.each($.makeArray(t.HelperSets.CustomerTypes.CustomerType),function(e,t){o.customerTypes.addObject(t)}),o.commercialProducts.clear(),$.each($.makeArray(t.HelperSets.CommercialProducts.CommercialProduct),function(e,t){o.commercialProducts.addObject(t)});break;default:Komodo.log("[ERROR] : Unknown Hierachical dataset: "+a)}}).fail(function(){Komodo.log("[ERROR] : could not retrieve hierarchical CDM data for "+a)})},getStaticCDMData:function(e,t,a,s){var o=this;Komodo.Services.cachedDataService.fetch(a,{domain:e,qualifier:t}).done(function(e){switch(s.clear(),a){case"ViewingPointConstants":$.each(e,function(e,t){o.set("maximumAllowedViewingPoints",t.value)}),o.registerValidator(o.get("viewModel"),"viewingPoints",{type:"string",isRequired:!0,displayName:kl.value(o._commercialLocaleBase+"customerprofile.viewingPoints"),maximumAllowedViewingPoints:o.maximumAllowedViewingPoints,minLength:1,maxLength:10,functions:[Komodo.UI.Validators.numericValidator,Komodo.UI.Validators.viewingPointsValidator]});break;default:$.each(e,function(e,t){s.addObject(t)})}}).fail(function(){Komodo.log("[ERROR] : could not retrieve static CDM data for "+a)})},addHardwareToList:function(e,t,a,s,o,r,i,n){var c=this,d=Ember.Object.extend({init:function(){this._super(),this.display=t+"-"+a,this.decoderType=t,this.decoderSerialNumber=a,this.smartcardType=s,this.smartcardSerialNumber=o,this.decoderModel=e,this.selectedSecondaryDecoderno=void 0,this.decoderCpcType=r,this.insurance=!0===i?"Yes":"No"}}).create();n&&c.viewModel.selectedproductData.pushObject(d),$.each(c.devicePairs,function(e,t){t.CanonicalKey===d.decoderModel&&c.primaryDevicesList.pushObject(d)})},populateViewingLocations:function(){var e,t=this;if(void 0!==t.viewModel&&void 0!==t.customerTypes&&(e=$.grep($.makeArray(t.customerTypes),function(e){return e.CanonicalKey===t.viewModel.customerType}),e.length>0&&t.viewModel.set("customerTypeSystemKey",e[0].SystemKey)),void 0!==t.customerAgreementTypes&&t.customerAgreementTypes.length>0&&void 0!==t.viewModel&&null!==t.viewModel){var a=$.grep($.makeArray(t.customerAgreementTypes),function(e){return e.CanonicalKey===t.viewModel.customerClass});if(a.length>0&&(e=$.grep($.makeArray(a[0].CustomerTypes.CustomerType),function(e){return e.CanonicalKey===t.viewModel.customerType}),e.length>0&&(t.viewModel.set("viewingLocations",$.makeArray(e[0].AgreementCustomerTypes.AgreementCustomerType)),void 0!==t.viewingLocation&&null!==t.viewingLocation))){var s=$.grep($.makeArray(e[0].AgreementCustomerTypes.AgreementCustomerType),function(e){return e.CanonicalValue.toUpperCase()===t.viewingLocation.toUpperCase()});s.length>0&&t.viewModel.set("viewingLocation",s[0])}}},populateAddOns:function(e){var t=this;if(t.set("listOfAddOnServices",[]),t.set("showAddOnView",!1),e&&t.viewModel.viewingLocation){var a=Komodo.UI.cacheDataService.getProductsForCategory(t._addOnCategoryFilterString,!0,t.productCategoryAndProducts);Ember.isEmpty(a)||$.each(a,function(a,s){var o=s.value,r=[];if(Komodo.UI.cacheDataService.populateAddOnsBasedOnProduct(t.viewModel.customerTypeSystemKey,t.viewModel.selectedproductData,e,t.viewModel.viewingLocation.CanonicalValue,o,r),!Ember.isEmpty(r)){t.set("showAddOnView",!0),r.sort(function(e,t){var a=e.name?e.name.toLowerCase():"",s=t.name?t.name.toLowerCase():"";return a>s?1:a<s?-1:0});var i=[],n=[],c=Math.ceil(r.length/2);$.each(r,function(e,t){e<c?i.push(t):n.push(t)}),t.listOfAddOnServices.push({allProducts:r,firstColumnProducts:i,secondColumnProducts:n,key:s.key,panelTitle:kl.value(t._commercialLocaleBase+"selectAddOnCategory").replace("#addoncategory#",s.key)})}})}},populateAvailableOfferDefinitions:function(){var e=this;e.viewModel.availableOfferDefinitions.clear(),$.each(e.offerDefinitions,function(t,a){var s=$.grep($.makeArray(e.commercialProducts),function(e){return e.CanonicalKey.toString()===a.ProductAppliedTo.toString()});if(s.length>0){var o=s[0].SystemKey;$.each(e.productServices,function(t,s){if(s&&s.product&&s.product.details&&o===s.product.details.productID){var r=Ember.Object.create({UID:a.Id,productID:a.ProductAppliedTo,productSystemKey:o,isSelected:!1,isDisabled:!1,description:a.OfferDescription+" ("+a.PriceDescription+")",product:s.product.details.name});e.viewModel.availableOfferDefinitions.pushObject(r)}})}}),e.viewModel.availableOfferDefinitions&&e.viewModel.availableOfferDefinitions.length>0?e.set("isOffersAvailable",!0):e.set("isOffersAvailable",!1)},disablePackages:function(e,t){var a=this;void 0!==a.selectedAgreement&&void 0!==a.selectedAgreement.ListOfHardware&&void 0!==a.selectedAgreement.ListOfHardware.Hardware&&$.each($.makeArray(a.selectedAgreement.ListOfHardware.Hardware),function(s,o){o.SerialNumber===e&&o.LinkedSmartcard===t&&(o.InsuranceStatus&&"TRUE"===o.InsuranceStatus.toUpperCase()?a.set("viewModel.insuranceDisabled",!0):a.set("viewModel.insuranceDisabled",!1),void 0!==o.ListOfService&&void 0!==o.ListOfService.Service&&$.each($.makeArray(o.ListOfService.Service),function(e,t){var s;if(void 0!==t.ProductDetail){t.ProductDetail.Type.toUpperCase()===a._principalCategoryName?(s=$.grep($.makeArray(a.productServices),function(e){return e.product.details.productID===t.ProductDetail.UID&&"CANCELLED"!==t.Status.toUpperCase()}),s.length>0&&$.each(a.productServices,function(e,t){t.set("isDisabled",!0)})):Ember.isEmpty(a.listOfAddOnServices)||$.each(a.listOfAddOnServices,function(e,a){Ember.isEmpty(a.allProducts)||(s=$.grep($.makeArray(a.allProducts),function(e){return e.productID===t.ProductDetail.UID&&"CANCELLED"!==t.Status.toUpperCase()}),s.length>0&&s[0].set("isDisabled",!0))});var o=$.grep($.makeArray(a.viewModel.availableOfferDefinitions),function(e){return e.productSystemKey.toString()===t.ProductDetail.UID.toString()});o.length>0&&$.each($.makeArray(o),function(e,t){t.set("isDisabled",!0)})}}))})},getListOfAccount:function(){var e=this,t=[];if(void 0!==e.viewModel.paymentGroup){var a=e.viewModel.paymentGroup,s=Komodo.Models.Account.create(),o=Komodo.canonicalFacadeFactory(s,["UID","StartDate","EndDate","PaymentDetail","ListOfAgreement_Agreement"]);o.set("UID",a.UID),o.set("StartDate",a.StartDate),o.set("EndDate",a.EndDate),o.set("PaymentDetail",e.getPaymentDetail(a)),o.set("ListOfAgreement_Agreement",e.getListOfAgreement(a)),t.push(s)}return t},getPaymentDetail:function(e){var t,a=Komodo.Models.PaymentDetail.create();return void 0!==e.PaymentDetail&&("1"===e.PaymentDetail.MethodOfPayment?(t=Komodo.canonicalFacadeFactory(a,["MethodOfPayment","DebitOrderDay"]),t.set("MethodOfPayment",e.PaymentDetail.MethodOfPayment),t.set("DebitOrderDay",e.PaymentDetail.DebitOrderDay)):e.PaymentDetail.MethodOfPayment>"1"&&(t=Komodo.canonicalFacadeFactory(a,["MethodOfPayment","AccountNumber","BankName","BranchName","BranchCode","DebitOrderDay","PayerName","PayerSurname","PayerIDType","PayerIDNumber"]),t.set("MethodOfPayment",e.PaymentDetail.MethodOfPayment),t.set("AccountNumber",e.PaymentDetail.AccountNumber),t.set("BankName",e.PaymentDetail.BranchName),t.set("BranchName",e.PaymentDetail.branchName),t.set("BranchCode",e.PaymentDetail.BranchCode),t.set("DebitOrderDay",e.PaymentDetail.DebitOrderDay),t.set("PayerName",e.PaymentDetail.PayerName),t.set("PayerIDNumber",e.PaymentDetail.PayerIDNumber))),a},getListOfAgreement:function(e){var t=this,a=Komodo.Services.systemService,s=[];if(void 0!==e){var o=Komodo.Models.Agreement.create(),r=Komodo.canonicalFacadeFactory(o,["UID","Name","Type","StartDate","ActivationDate","TermOfPayment","ConsumerDetail","ConsumerAddress","ListOfHardware_Hardware","NumberOfViewingPoints","LocationIndicator","InstallationType"]);t.selectedAgreement&&r.set("UID",t.selectedAgreement.UID),r.set("Name",t.viewModel.establishmentName),r.set("Type",t.viewModel.viewingLocation.CanonicalKey),r.set("TermOfPayment",void 0!==e.TermOfPayment&&null!==e.TermOfPayment?e.TermOfPayment:1),r.set("StartDate",void 0),r.set("ActivationDate",a.universalDateString(new Date(t.viewModel.activationDate))),r.set("ConsumerDetail",t.getConsumerDetail()),r.set("ConsumerAddress",t.getAddress(e)),r.set("ListOfHardware_Hardware",t.getListOfHardware()),r.set("NumberOfViewingPoints",t.viewModel.viewingPoints),r.set("InstallationType",t.viewModel.installationType),s.push(o);var i=t.getListOfInsuranceHardware();if(i.length>0&&t.viewModel&&t.viewModel.paymentGroup&&void 0!==t.customerAgreementTypes&&t.customerAgreementTypes.length>0){var n=$.grep($.makeArray(t.customerAgreementTypes),function(e){return e.CanonicalKey===t.viewModel.customerClass});if(n.length>0){var c=$.grep($.makeArray(n[0].CustomerTypes.CustomerType),function(e){return e.CanonicalKey===t.viewModel.customerType});if(c.length>0){var d=$.grep($.makeArray(c[0].AgreementCustomerTypes.AgreementCustomerType),function(e){return"DCC"===e.CanonicalValue});if(d.length>0){var l=Komodo.Models.Agreement.create(),u=Komodo.canonicalFacadeFactory(l,["Name","Type","StartDate","ActivationDate","TermOfPayment","ConsumerDetail","ConsumerAddress","ListOfHardware_Hardware","NumberOfViewingPoints","LocationIndicator","InstallationType"]);u.set("Name",t.viewModel.establishmentName+" - DCC"),u.set("Type",d[0].CanonicalKey),u.set("TermOfPayment",void 0!==e.TermOfPayment&&null!==e.TermOfPayment?e.TermOfPayment:1),u.set("StartDate",void 0),u.set("ActivationDate",a.universalDateString(new Date(t.viewModel.activationDate))),u.set("ConsumerDetail",t.getConsumerDetail()),u.set("ConsumerAddress",t.getAddress(e)),u.set("ListOfHardware_Hardware",i),u.set("NumberOfViewingPoints",1),u.set("InstallationType",t.viewModel.installationType),s.push(l)}}}}}return s},getConsumerDetail:function(){var e=this,t=Komodo.Models.PersonalDetail.create();return Komodo.canonicalFacadeFactory(t,["FirstName","Surname"]).set("Surname",e.companyName),t},getAddress:function(e){var t=Komodo.Models.Address.create(),a=Komodo.canonicalFacadeFactory(t,["Type","BuildingNumber","BuildingName","Street","Suburb","City","Province","Country","PostCode","PostBoxNumber"]);return e&&e.BillingAddress&&(a.set("Type","Agreement"),a.set("Street",e.BillingAddress.Street),a.set("Suburb",e.BillingAddress.Suburb),a.set("City",e.BillingAddress.City),a.set("Province",e.BillingAddress.Province),a.set("Country",e.BillingAddress.Country),a.set("PostCode",e.BillingAddress.PostCode),a.set("PostBoxNumber",e.BillingAddress.PostBoxNumber),a.set("BuildingNumber",e.BillingAddress.BuildingNumber),a.set("BuildingName",e.BillingAddress.BuildingName)),t},getListOfHardware:function(){var e=this,t=[];return e.viewModel.selectedproductData.forEach(function(a){var s=Komodo.Models.Hardware.create(),o=Komodo.canonicalFacadeFactory(s,["SerialNumber","LinkedSmartcard","SmartcardDetail","ProductDetail","ListOfService","SecondaryHardware","InsuranceStatus","WarrantyStatus","IsAwaitingInstallation"]);o.set("SerialNumber",a.decoderSerialNumber),o.set("LinkedSmartcard",a.smartcardSerialNumber),o.set("InsuranceStatus","No"),o.set("SmartcardDetail",e.getSmartcardDetail(a)),o.set("ProductDetail",e.getHardwareProductDetail(a));var r=e.getListOfServices();o.set("ListOfService",r),t.push(s)}),t},getListOfInsuranceHardware:function(){var e=this,t=[];return e.viewModel.selectedproductData.forEach(function(a){if(a.insurance&&void 0!==e.getInsuranceService()){var s=Komodo.Models.Hardware.create(),o=Komodo.canonicalFacadeFactory(s,["SerialNumber","LinkedSmartcard","SmartcardDetail","ProductDetail","ListOfService","SecondaryHardware","InsuranceStatus","WarrantyStatus","IsAwaitingInstallation"]);o.set("SerialNumber",a.decoderSerialNumber),o.set("LinkedSmartcard",a.smartcardSerialNumber),o.set("InsuranceStatus","Yes"),o.set("SmartcardDetail",e.getSmartcardDetail(a)),o.set("ProductDetail",e.getHardwareProductDetail(a));var r=Komodo.Models.ListOfService.create();r.Service.push(e.getInsuranceService()),o.set("ListOfService",r),t.push(s)}}),t},getSmartcardDetail:function(e){var t=Komodo.Models.ProductDetail.create(),a=Komodo.canonicalFacadeFactory(t,["UID","Type","Name","Model","Description"]);return void 0!==e&&(a.set("UID",e.smartcardSerialNumber),a.set("Type",e.smartcardType)),t},getHardwareProductDetail:function(e){var t=this,a=Komodo.Models.ProductDetail.create(),s=Komodo.canonicalFacadeFactory(a,["UID","Type","Name","Model","Description"]);return void 0!==e&&(s.set("UID",e.decoderSerialNumber),s.set("Type",t.getDeviceType(e.decoderCpcType)),s.set("Model",e.decoderModel)),a},getListOfServices:function(){var e,t,a,s,o=this,r=Komodo.Models.ListOfService.create();return void 0!==o.productServices&&o.productServices.length>0&&$.each(o.productServices,function(i,n){n&&!0===n.isSelected&&n.product&&n.product.details&&(e=Komodo.Models.Service.create(),t=Komodo.canonicalFacadeFactory(e,["UID","Status","ProductDetail"]),a=Komodo.Models.ProductDetail.create(),s=Komodo.canonicalFacadeFactory(a,["UID","Type","Name","Offers"]),t.set("UID",n.product.details.productID),s.set("UID",n.product.details.productID),s.set("Type",o._principalCategoryName),s.set("Offers",o.getAvailableOffers(n.product.details.productID)),t.set("ProductDetail",a),r.Service.push(e))}),Ember.isEmpty(o.listOfAddOnServices)||$.each(o.listOfAddOnServices,function(i,n){Ember.isEmpty(n.allProducts)||$.each(n.allProducts,function(i,c){!0===c.isSelected&&(e=Komodo.Models.Service.create(),t=Komodo.canonicalFacadeFactory(e,["UID","Status","ProductDetail"]),a=Komodo.Models.ProductDetail.create(),s=Komodo.canonicalFacadeFactory(a,["UID","Type","Name","Offers"]),t.set("UID",c.productID),s.set("UID",c.productID),s.set("Type",n.key.toUpperCase()),s.set("Offers",o.getAvailableOffers(c.productID)),t.set("ProductDetail",a),r.Service.push(e))})}),r},getInsuranceService:function(){var e=this,t=void 0;if(e.get("viewModel.insurance")){var a=Komodo.UI.cacheDataService.getProductsForCategory(e._insuranceCategoryName,!1,e.productCategoryAndProducts);if(!Ember.isEmpty(a)){var s=a[0].value;if(!Ember.isEmpty(s)&&s[0].product&&s[0].product.details&&s[0].product.details.productID){t=Komodo.Models.Service.create();var o=Komodo.canonicalFacadeFactory(t,["UID","Status","ProductDetail"]),r=Komodo.Models.ProductDetail.create(),i=Komodo.canonicalFacadeFactory(r,["UID","Type","Name"]);o.set("UID",s[0].product.details.productID),i.set("UID",s[0].product.details.productID),i.set("Type",e._insuranceCategoryName),o.set("ProductDetail",r)}}}return t},getAvailableOffers:function(e){var t=this,a=[];if(e){var s=$.grep($.makeArray(t.viewModel.availableOfferDefinitions),function(t){return t.productSystemKey.toString()===e.toString()&&!0===t.isSelected});s.length>0&&$.each($.makeArray(s),function(e,t){var s=Komodo.Models.Offer.create();s.UID=t.UID,a.pushObject(s)})}return a},getDeviceType:function(e){var t=this,a=void 0;if(isNaN(e))a=e;else{var s=Komodo.UI.cacheDataService.getProductsForCategory(t._hardwareCategoryName,!1,t.productCategoryAndProducts);if(!Ember.isEmpty(s)){var o=s[0].value;$.each(o,function(t,s){return s.SystemKey!==e||(a=s.CanonicalValue,!1)})}}return a},validateSelectedOffers:function(){var e=this,t=!0;return $.each($.makeArray(e.viewModel.availableOfferDefinitions),function(a,s){if(!0===s.isSelected){var o=!1,r=!1;$.grep(e.viewModel.availableOfferDefinitions,function(e){return e.productSystemKey.toString()===s.productSystemKey.toString()&&!0===e.isSelected&&e.UID!==s.UID}).length>0&&(t=!1),void 0!==e.viewModel.primaryProductSelection&&s.productSystemKey.toString()===e.viewModel.primaryProductSelection.toString()&&(o=!0),Ember.isEmpty(e.listOfAddOnServices)||$.each(e.listOfAddOnServices,function(e,t){if(!Ember.isEmpty(t.allProducts)){$.grep(t.allProducts,function(e){return e.productID.toString()===s.productSystemKey.toString()&&!0===e.isSelected}).length>0&&(r=!0)}}),!1===o&&!1===r&&(t=!1)}}),t},clearFormData:function(){var e=this;e.viewModel.set("customerClass",void 0),e.viewModel.set("customerType",void 0),e.viewModel.set("paymentGroup",void 0),e.viewModel.set("viewingLocation",void 0),e.viewModel.set("establishmentName",void 0),e.viewModel.set("viewingPoints",void 0),e.viewModel.set("smartcardDeviceNumber",void 0),e.viewModel.set("insurance",void 0),e.viewModel.set("installationType",e.installationTypes[1].value),e.viewModel.set("primaryProductSelection",void 0),e.viewModel.set("accounts",[]),e.viewModel.set("viewingLocations",[]),e.viewModel.set("selectedproductData",[]),e.set("productServices",[]),e.set("listOfAddOnServices",[]),e.set("showAddOnView",!1),e.set("isOffersAvailable",!1)},clearAgreementData:function(){var e=this;e.viewModel.set("viewingLocation",void 0),e.viewModel.set("viewingPoints",void 0),e.viewModel.set("smartcardDeviceNumber",void 0),e.viewModel.set("insurance",void 0),e.viewModel.set("installationType",e.installationTypes[1].value),e.viewModel.set("primaryProductSelection",void 0),e.viewModel.set("selectedproductData",[]),e.set("productServices",[]),e.set("listOfAddOnServices",[]),e.set("showAddOnView",!1),e.set("isOffersAvailable",!1)},populatePaymentGroups:function(e){var t=this;if(t.viewModel.accounts.clear(),e){if(e.sort(function(e,t){var a=e.Name?e.Name.toLowerCase():"",s=t.Name?t.Name.toLowerCase():"";return e.IsDefault!==t.IsDefault?t.IsDefault-e.IsDefault:a>s?1:a<s?-1:0}),$.each(e,function(e,a){t.viewModel.accounts.addObject(a)}),void 0!==t.paymentGroup&&null!==t.paymentGroup){var a=$.grep($.makeArray(t.viewModel.accounts),function(e){return e.UID===t.paymentGroup.UID});a.length>0&&t.viewModel.set("paymentGroup",a[0]),t.set("paymentGroup",void 0)}void 0!==t.establishmentName&&null!==t.establishmentName&&(t.viewModel.set("establishmentName",t.establishmentName),t.viewModel.set("selectedEstablishmentName",t.establishmentName),t.set("establishmentName",void 0)),void 0!==t.viewingPoints&&null!==t.viewingPoints&&(t.viewModel.set("viewingPoints",t.viewingPoints),t.set("viewingPoints",void 0)),void 0!==t.installationType&&null!==t.installationType&&(t.viewModel.set("installationType",t.installationType),t.set("installationType",void 0))}},getNewProcessID:function(){this.startNewProcess()},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,3e4,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},viewingLocationChanged:function(){var e=this,t=Komodo.UI.cacheDataService.getProductsForCategory(e._principalCategoryName,!1,e.productCategoryAndProducts);if(!Ember.isEmpty(t)){var a=t[0].value;Ember.isEmpty(a)||void 0===e.viewModel.viewingLocation||null===e.viewModel.viewingLocation?e.set("productServices",[]):(Komodo.UI.cacheDataService.populateProductsBasedOnLocation(e.viewModel.customerTypeSystemKey,e.viewModel.viewingLocation.CanonicalValue,a,e.productServices),e.populateAvailableOfferDefinitions())}e.set("selectedAgreement",void 0)}.observes("viewModel.viewingLocation"),establishmentNameChanged:function(){var e=this;if(void 0!==e.viewModel.paymentGroup&&null!==e.viewModel.paymentGroup&&void 0!==e.viewModel.establishmentName&&void 0!==e.viewModel.paymentGroup.ListOfAgreement&&void 0!==e.viewModel.paymentGroup.ListOfAgreement.Agreement){if(e.set("selectedAgreement",void 0),$.each($.makeArray(e.viewModel.paymentGroup.ListOfAgreement.Agreement),function(t,a){if(a.Name.toUpperCase()===e.viewModel.establishmentName.toUpperCase()&&a.LocationIndicator.toUpperCase()===e.viewingLocation.toUpperCase()){var s=a.LocationIndicator;void 0!==e.viewingLocation&&null!==e.viewingLocation&&(s=e.viewingLocation),e.viewModel.set("establishmentName",a.Name),e.viewModel.set("installationType",a.InstallationType),e.viewModel.set("viewingPoints",a.NumberOfViewingPoints);var o=$.grep($.makeArray(e.viewModel.viewingLocations),function(e){return e.CanonicalValue.toUpperCase()===s.toUpperCase()||s.toUpperCase().indexOf(e.CanonicalValue.toUpperCase())>-1});return o.length>0&&e.viewModel.set("viewingLocation",o[0]),e.set("selectedAgreement",a),!1}return!0}),void 0===e.selectedAgreement||null===e.selectedAgreement)e.clearAgreementData();else{var t;void 0!==e.selectedAgreement.ListOfHardware&&void 0!==e.selectedAgreement.ListOfHardware.Hardware&&$.each($.makeArray(e.selectedAgreement.ListOfHardware.Hardware),function(e,a){void 0!==a.ListOfService&&void 0!==a.ListOfService.Service&&$.each($.makeArray(a.ListOfService.Service),function(e,a){void 0!==a.ProductDetail&&"PRINCIPAL"===a.ProductDetail.Type.toUpperCase()&&(t=a.ProductDetail.UID)})}),e.addHardwareToList(e.decoderModel,e.decoderType,e.decoderSerialNumber,e.smartcardType,e.smartcardSerialNumber,e.decoderCpcType,!1,!0),e.populateAddOns(t),e.disablePackages(e.decoderSerialNumber,e.smartcardSerialNumber),e.viewModel.set("activationDate",new Date),e.set("isButtonDisable",!1)}e.set("viewingLocation",void 0),e.set("decoderModel",void 0),e.set("decoderType",void 0),e.set("decoderSerialNumber",void 0),e.set("smartcardType",void 0),e.set("smartcardSerialNumber",void 0),e.set("decoderCpcType",void 0)}}.observes("viewModel.establishmentName"),actions:{cancel:function(){var e=this,t="",a="";e.viewModel&&(a=e.viewModel.establishmentName,e.viewModel.viewingLocation&&(t=e.viewModel.viewingLocation.CanonicalValue)),Komodo.Services.uiService.getController("commercialManageViewing").setAgreementData(a,t),Komodo.Services.uiService.getRoute("application").transitionTo("commercialManageViewing"),e.clearFormData()},activateProducts:function(){var e=this;if(!1!==e.canSubmitData(e.viewModel,e.viewTitle,{showInModal:!0})){if(void 0===e.customerNo&&null===e.customerNo)return void Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._localeBase+"customerNubmerMissing"),Komodo.Controls.MessageBoxOkButton,e,"id5446883","danger");if(void 0===e.selectedAgreement)return void Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._commercialLocaleBase+"messagePackageValidation"),Komodo.Controls.MessageBoxOkButton,e,"id145456673","danger");var t=!1;Ember.isEmpty(e.listOfAddOnServices)||$.each(e.listOfAddOnServices,function(e,a){Ember.isEmpty(a.allProducts)||a.allProducts.forEach(function(e){!0===e.isSelected&&(t=!0)})});var a=!1;return e.productServices.forEach(function(e){!0===e.isSelected&&(a=!0)}),!1===a&&!1===t&&!1===e.get("viewModel.insurance")?void Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._commercialLocaleBase+"messagePackageValidation"),Komodo.Controls.MessageBoxOkButton,e,"id145456673","danger"):!1===e.validateSelectedOffers()?void Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._commercialLocaleBase+"messageOfferValidation"),Komodo.Controls.MessageBoxOkButton,e,"id145456673","danger"):void(e.viewModel.selectedproductData.length>0?(e.set("isButtonDisable",!0),e.publishAssociateProductsEvent()):Komodo.Controls.MessageBoxController.show(e.viewTitle,kl.value(e._commercialLocaleBase+"messageDeviceToLinkValidation"),Komodo.Controls.MessageBoxOkButton,e,"id145456673","danger"))}}},retrieveCustomerProfile:function(e){var t=this;t.viewModel.accounts.clear();var a=Komodo.Services.customerProfileService.getCustomerProfile();a&&a.ResponseMessage&&a.ResponseMessage.Payload&&a.ResponseMessage.Payload.ListOfAccount&&a.ResponseMessage.Payload.ListOfAccount.Account&&t.populatePaymentGroups(a.ResponseMessage.Payload.ListOfAccount.Account)},retrieveProductOffers:function(){var e=this;e.viewModel&&e.viewModel.customerClass&&Komodo.Services.queryService.getJSON("/Device/GetProductOffers?customerClass="+e.viewModel.customerClass+"&page=0").done(function(t){t&&t.OfferDefinitions&&e.set("offerDefinitions",t.OfferDefinitions)}).error(function(e){var t=JSON.stringify(e);Komodo.log("retrieveProductOffers ajax call failed. Error: "+t)})},publishAssociateProductsEvent:function(){var e=this;if(e.viewModel.useOptimizedAddDeviceVersion){var t=e.getListOfAccount(),a=[];$.each($.makeArray(t),function(t,s){var o=[];$.each($.makeArray(s.get("ListOfAgreement.Agreement")),function(e,t){var a=[];$.each($.makeArray(t.get("ListOfHardware.Hardware")),function(e,t){var s=[];$.each($.makeArray(t.get("ListOfService.Service")),function(e,t){var a=[];$.each($.makeArray(t.get("ProductDetail.Offers")),function(e,t){a.push({Id:t.get("UID"),OfferDescription:t.get("Name")})}),s.push({
UID:t.get("UID"),Offers:a})}),a.push({SerialNumber:t.get("SerialNumber"),Status:t.get("Status"),InsuranceStatus:t.get("InsuranceStatus"),IsInsured:!1,LinkedSmartcard:t.get("LinkedSmartcard"),LinkedSmartcardStatus:t.get("LinkedSmartcardStatus"),Services:s})}),o.push({AgreementNumber:t.get("UID"),Name:t.get("Name"),Type:t.get("Type"),StartDate:t.get("ActivationDate"),EndDate:t.get("EndDate"),Status:t.get("Status"),TermOfPayment:t.get("TermOfPayment"),FinancialAccountId:s.get("UID"),InstallationType:t.get("InstallationType"),TypeName:"",NumberOfViewingPoints:t.get("NumberOfViewingPoints"),Devices:a})}),a.push({Number:s.get("UID"),CustomerId:e.customerNo,Agreements:o})}),e.getNewProcessID(),e.showBusyIndicator(),e.set("isDisableActiveButton",!0),Komodo.Services.queryService.deleteJSON("/RedisCache/InvalidateCustomer?CustomerNumber="+e.customerNo),Komodo.Services.queryService.postJSON("/Device/AddDevicesAndPackages",{data:a}).done(function(t){if(t&&t.length&&t.length>0){var a={ResponseMessage:{Payload:{CustomerUID:e.customerNo,ListOfAccount:{Account:e.getListOfAccount()[0]}}}};e.messageCommercialProductsAddedReceived(a),e.publishCreateInteraction(e.customerNo)}else e.hideBusyIndicator()}).error(function(t){e.hideBusyIndicator();var a=JSON.stringify(t);Komodo.log("retrieveProductOffers ajax call failed. Error: "+a),t&&t.responseJSON&&t.responseJSON.Message?Komodo.Controls.MessageBoxController.show(e.viewTitle,t.responseJSON.Message,Komodo.Controls.MessageBoxOkButton,e,"id544246673","danger"):t&&t.responseText&&Komodo.Controls.MessageBoxController.show(e.viewTitle,t.responseText,Komodo.Controls.MessageBoxOkButton,e,"id544246673","danger")})}else{var s=Komodo.Models.AddCommercialProducts.create(),o=Komodo.canonicalFacadeFactory(s,["Country","CustomerUID","ListOfAccount_Account"]);o.set("Country",e.get("loggedInCountryId")),o.set("CustomerUID",e.customerNo),o.set("ListOfAccount_Account",e.getListOfAccount()),e.getNewProcessID(),Komodo.Services.AssociateProductsService.associateCommercialProducts(e,s).done(function(){e.showBusyIndicator(),e.set("isDisableActiveButton",!0),Komodo.log("publishAssociateProductsEvent() : Link Commercial Products event has been published.")}).fail(function(){e.hideBusyIndicator(),Komodo.log("publishAssociateProductsEvent() : Link Commercial Products event has failed.")})}},publishCreateInteraction:function(e){var t=Komodo.Models.CreateInteraction.create(),a=Komodo.Models.Case.create();a.set("InteracteeName",Komodo.Services.securityService.session.domainUserName),a.set("InteractionLocation",this.get("loggedInCountryId")),a.set("InteractionMedium","5"),a.set("CustomerUID",e),a.set("QueryType",6),a.set("Category",4),a.set("SubCategory",1),a.set("Outcome",114),a.set("Status","1"),a.set("Notes","Products linked successfully");var s=Komodo.canonicalFacadeFactory(t,["Country","Case"]);s.set("Country",this.get("loggedInCountryId")),s.set("Case",a),Komodo.Services.CustomerService.publishCustomerEvent(this,t,"CreateInteraction","v1",!0)},messageCommercialProductsAddedReceived:function(e){var t=this,a=!0;if(t.hideBusyIndicator(),void 0!==e.ResponseMessage.Payload.ListOfAccount&&void 0!==e.ResponseMessage.Payload.ListOfAccount.Account){var s=e.ResponseMessage.Payload.CustomerUID,o=e.ResponseMessage.Payload.ListOfAccount.Account;if(void 0!==o.ListOfAgreement&&void 0!==o.ListOfAgreement.Agreement){a=!1;var r=o.ListOfAgreement.Agreement,i=void 0;if(o.ListOfAgreement.Agreement.length&&o.ListOfAgreement.Agreement.length>0){var n=$.grep($.makeArray(o.ListOfAgreement.Agreement),function(e){return e.Name.toUpperCase().indexOf(" - DCC")<=0});n&&n.length&&n.length>0&&(r=n[0]);var c=$.grep($.makeArray(o.ListOfAgreement.Agreement),function(e){return e.Name.toUpperCase().indexOf(" - DCC")>0});c&&c.length&&c.length>0&&(i=c[0])}var d=Komodo.Models.CommercialAssociateProductsModel.create();d.set("establishmentName",r.Name),d.set("viewingPoints",r.NumberOfViewingPoints),d.set("installationType",r.InstallationType);var l=$.grep($.makeArray(t.viewModel.viewingLocations),function(e){return e.CanonicalKey===r.Type});if(l.length>0&&d.set("viewingLocation",l[0].CanonicalValue),void 0!==r.ListOfHardware&&void 0!==r.ListOfHardware.Hardware&&$.each($.makeArray(r.ListOfHardware.Hardware),function(e,a){if(a.ListOfService&&a.ListOfService.Service&&a.ListOfService.Service.length>0)$.each($.makeArray(a.ListOfService.Service),function(e,s){if(void 0!==s.ProductDetail){var o=Komodo.Models.ManageViewingGridModel.create();o.set("smartCardNumber",void 0!==a.SmartcardDetail?a.SmartcardDetail.UID:""),o.set("deviceNumber",a.SerialNumber),o.set("applyStyleForPrin",!1),o.set("applyStyleForAddOn",!1);var r,n=Komodo.UI.cacheDataService.getProductsForCategory(s.ProductDetail.Type.toUpperCase(),!1,t.productCategoryAndProducts);if(!Ember.isEmpty(n)){var c=n[0].value;r=$.grep($.makeArray(c),function(e){return e.product.details.productID===s.ProductDetail.UID}),r.length>0&&(n[0].key.toUpperCase()===t._principalCategoryName?(o.set("prinPckName",r[0].product.details.name),o.set("addOnPckName","-"),o.set("applyStyleForPrin",!0)):(o.set("addOnPckName",r[0].product.details.name),o.set("prinPckName","-"),o.set("applyStyleForAddOn",!0)))}if(o.set("insuranceServicesStatus","No"),i&&i.ListOfHardware&&i.ListOfHardware.Hardware){var l=$.grep($.makeArray(i.ListOfHardware.Hardware),function(e){return e.SerialNumber===a.SerialNumber});l&&l.length>0&&o.set("insuranceServicesStatus","Yes")}d.selectedproductData.addObject(o)}});else if(i){var s=Komodo.Models.ManageViewingGridModel.create();$.each($.makeArray(i.ListOfHardware.Hardware),function(e,t){s.set("smartCardNumber",void 0!==t.SmartcardDetail?t.SmartcardDetail.UID:""),s.set("deviceNumber",t.SerialNumber),s.set("prinPckName","-"),s.set("addOnPckName","-"),s.set("applyStyleForPrin",!1),s.set("applyStyleForAddOn",!1),s.set("insuranceServicesStatus","Yes"),d.selectedproductData.addObject(s)})}}),d.set("paymentGroup",t.viewModel.paymentGroup),s){Komodo.Application.SharedObjectController.create().retrieveCustomerProfile(s).done(function(){Komodo.Services.uiService.getController("commercialActivationSummary").setResponseMessage(d,"AddProducts"),Komodo.Services.uiService.getRoute("application").transitionTo("commercialActivationSummary"),t.clearFormData()})}}}!0===a&&Komodo.Controls.MessageBoxController.show(t.viewTitle,kl.value(t._localeBase+"messgProductLinkFail"))},messageFailureMessageEventReceived:function(e){var t=this;t.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show(t.viewTitle,e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButton,this,"id544246673","danger")},messageReceived:function(e){this.hideBusyIndicator(),Komodo.UI.log("[CommercialAddProductsController.messageReceived] : event name = "+e.ResponseMessage.EventName)},messageDeliveryFailure:function(e){this.hideBusyIndicator(),Komodo.UI.warn("[CommercialAddProductsController.messageDeliveryFailure] : messageId = "+e.messageId)},messageFault:function(e){this.hideBusyIndicator(),Komodo.UI.error("[CommercialAddProductsController.messageFault] : messageId = "+e.messageId)},productCategoryAndProducts:[],commercialClassId:[Komodo.CustomerClass.COMMERCIAL,Komodo.CustomerClass.NATIONAL_DEAL],viewTitle:void 0,smartcardDeviceNumber:void 0,country:void 0,countries:[],allProductCategories:[],offerDefinitions:[],devicePairs:[],productServices:[],listOfAddOnServices:[],insurance:void 0,primaryDevicesList:[],customerAgreementTypes:[],productPriceHelperSet:[],commercialProducts:[],customerTypes:[],selectedGridItem:void 0,commandGridItemn:void 0,deleteGridItem:void 0,isOffersAvailable:!1,isButtonDisable:!0,showAddOnView:!1,installationTypes:[{title:Komodo.InstallationTypes.IPTV,value:Komodo.InstallationTypes.IPTV},{title:Komodo.InstallationTypes.STANDARD,value:Komodo.InstallationTypes.STANDARD}],maximumAllowedViewingPoints:-1}),Komodo.Application.AssociateProductsController=Komodo.UI.Controller.extend({_localeBase:"locale.associateProducts:associateProducts.",_localeDevice:"locale.associateProducts:deviceAtAnotherLocation.",insurancepermission:"clarity://associateProducts/insuranceSelection",hideDevicePairScreenPermission:"clarity://associateProducts/devicePairScreen",associateProductsViewOnlyPermission:"clarity://associateProducts/viewOnly",supervisorClaim:["clarity://system/supervisor"],needs:["genericPayment"],_localeOLT:"locale.onlinetill:",init:function(){var e=this;Komodo.log("Constructing Link Products with Xtraview controller"),e.set("processVersion","v1.1"),e.set("processName","Link Products with Xtraview process"),e.set("deviceAtanotherLocationCalled",!1),e.registerModel("data",Komodo.Models.AssociateProductsModel),e.set("data.customerRefNo",void 0),e.set("data.haveYouMadeAPaymentYetYesNo",[{title:kl.value(e._localeBase+"yes"),value:"1"},{title:kl.value(e._localeBase+"no"),value:"0"}]),e.set("data.radioButtonDeviceUsage",[{title:kl.value(e._localeBase+"atMyHome"),value:"0"},{title:kl.value(e._localeBase+"anotherLocation"),value:"1"}]),e.set("data.areYouWaitingForInstallationYesNo",[{title:kl.value(e._localeBase+"yes"),value:"0"},{title:kl.value(e._localeBase+"no"),value:"1"}]),e.set("data.radioButtonLinkUnlink",[{title:kl.value(e._localeBase+"linkButton"),value:"0"},{title:kl.value(e._localeBase+"unlinkButton"),value:"1"}]),e.dataService=Komodo.Services.AssociateProductsDataService.create(),e.deviceInfoService=Komodo.Services.StockService.create(),e._super()},start:function(){var e=this;this.set("isCommercialCustomer",!0),void 0===e.get("isNewCustomer")&&(e.registerValidation(),Ember.addObserver(this,"primaryDevicesList.@each",this,"secondaryDevicesListChanged"),Ember.addObserver(this,"primaryDevicesList.@each",this,"disableChanged"),e.set("data.radioButtonLinkUnlink",[{title:kl.value(e._localeBase+"linkButton"),value:"0"},{title:kl.value(e._localeBase+"unlinkButton"),value:"1"}]),Komodo.Services.featureToggleService.isEnabled("SAClarityRoles","RolesAndPermissions").done(function(t){switch(t){case!0:Komodo.Services.securityService.hasPermission(e.hideDevicePairScreenPermission)?e.set("hideDevicePairScreen",!1):e.set("hideDevicePairScreen",!0),Komodo.Services.securityService.hasPermission(e.associateProductsViewOnlyPermission)?e.set("associateProductsViewOnly",!0):e.set("associateProductsViewOnly",!1);break;default:e.set("hideDevicePairScreen",!1),e.set("associateProductsViewOnly",!1)}}).fail(function(e){Komodo.Services.log("Error while checking permissions. Error Details:"+e)}),e.set("isSASpecific",!1),Komodo.Services.featureToggleService.isEnabled("CustomerGlobal","SASpecificIDValidation").done(function(t){t&&e.set("isSASpecific",!0)}).fail(function(e){Komodo.Services.log("Error while checking feature toggle. Error Details:"+e)}),Komodo.Services.featureToggleService.isEnabled("AssociateProducts","DisableAlternativeProductsForMobile").done(function(t){e.set("disableAlternativeProductsForMobile",t)}).fail(function(e){Komodo.Services.log("Error while checking feature toggle:. Error Details:"+e)}),Komodo.Services.featureToggleService.isEnabled("AssociateProducts","HolidayHomePrepaidAllowed").done(function(t){e.set("isHolidayHomePrepaidAllowed",t)}).fail(function(e){Komodo.Services.log("Error while checking feature toggle. Error Details:"+e)}),Komodo.Services.featureToggleService.isEnabled("AssociateProducts","HolidayHomeSwitchingAllowed").done(function(t){e.set("isHolidayHomeSwitchingAllowed",t)}).fail(function(e){Komodo.Services.log("Error while checking feature toggle. Error Details:"+e)}),Komodo.Services.featureToggleService.isEnabled("AssociateProducts","AlignHMOPToGeneral").done(function(t){e.set("isMOPRequiredForHH",t)}).fail(function(e){Komodo.Services.log("Error while checking feature toggle. Error Details:"+e)}),Komodo.Services.featureToggleService.isEnabled("AssociateProducts","FAStatus").done(function(t){e.set("FAStatus",t)}).fail(function(e){Komodo.Services.log("Error while checking feature toggle. Error Details:"+e)}),Komodo.Services.featureToggleService.isEnabled("AssociateProducts","IsMultipleAddonAllowed").done(function(t){e.set("isMultipleAddonAllowed",t)}).fail(function(e){Komodo.Services.log("Error while checking feature toggle. Error Details:"+e)}),Komodo.Services.featureToggleService.isEnabled("CreateQuotation","isSTSEnabled").done(function(t){e.set("isSTSEnabled",t)}).fail(function(e){Komodo.Services.log("Error while checking feature toggle. Error Details:"+e)}),Komodo.Services.featureToggleService.isEnabled("associateProducts","IsDisableChargePeriod").done(function(t){e.set("isDisableChargePeriod",!!t)}).fail(function(e){Komodo.log("Error while checking feature toggle. Error Details:"+e)}),e.getLookUpData().done(function(){e.getcustomerDetails()&&(e.loadCustomerAccountInfo(),e.loadCustomerDetails(),e.getCustomerProductDetails(),e.setDefaultvalues(),e.enableDisableDeviceLocationForFieldTrials(),e.isOnlyOnePrincipalPackageAllow()),e.set("data.startDate",new Date((new Date).getMonth()+1+"/"+(new Date).getDate()+"/"+(new Date).getFullYear()))}),e.set("paymentTypesList",[{value:Komodo.MOP.DEBIT_ORDER,title:kl.value(e._localeBase+"debitOrder")},{value:Komodo.MOP.CASH,title:kl.value(e._localeBase+"cash")}])),e._super()},getValueFromConstant:function(e,t){return Komodo.Services.AssociateProductsService.getValueFromConstant(e,t)},showBusyIndicator:function(){Komodo.Services.busyService.start(!0,this.get("processId"),Komodo.Services.busyIndicatorTypes.Busy,12e5,"blocking",this)},hideBusyIndicator:function(){Komodo.Services.busyService.stop(this.get("processId"),"blocking")},stop:function(){"deviceAtAnotherLocation"!==Komodo.Application.Router.router.activeTransition.targetName&&(Ember.removeObserver(this,"primaryDevicesList.@each",this,"secondaryDevicesListChanged"),Ember.removeObserver(this,"primaryDevicesList.@each",this,"disableChanged"),this.set("primaryDevicesList",[]),this.set("boxOfficeList",[]),this.set("smartcardDecoderNo",void 0),this.set("devicesLabel",!1),this.set("xtraViewLabel",!1),this.set("showSecondaryDecodeServices",!1),this.set("showPrimaryDecodeServices",!1),this.set("showPaymentOfMethod",!1),this.set("showSTSPackages",!1),this.set("showAddOnProducts",!1),this.set("showHdAddOnProducts",!1),this.set("deviceAtanotherLocationCalled",!1),this.set("onlyPrincipalMobileProduct",void 0),this.set("marketSegment",void 0),this.set("isActive",!1),this.set("defaultAccount",void 0),this.set("defaultAddressDetails",void 0),this.set("redirectEnabled",!1),this.set("countOfStolenSuspended",0),this.set("countOfEmptyDecoders",0),this.set("isNewCustomer",void 0),this.hardwareAddressDetails.clear(),this.productAddOn.clear(),this.allHdAddOns.clear(),this.productHdAddOn.clear(),this.productService.clear(),this.allAccessService.clear(),this.allInsurance.clear(),this.holidaySwitchedDevices.clear(),this.allProductCategories.clear(),this.allProductService.clear(),this.allProductAddOn.clear(),this.xtraViewList.clear(),this.data.selectedproductData.clear(),this.data.selectedSummaryProductData.clear(),this.set("data.activationDate",new Date),this.set("linkUnlinkSelection",void 0),this.set("showLink",!1),this.set("showUnlink",!1),this.set("disableLinkUnlink",!1),this.set("disableSelectedPrimaryDecoder",!1),this.set("showLinkedXtraviewDevices",!1),this.set("customerPaymentDetail",void 0),this.set("isMnetAnalogueCustomer",void 0),this.set("residenceTypeForHH",void 0),this.set("disableSTSPackages",!1),this.set("isDisableActiveButton",!0)),this.hideBusyIndicator(),this._super()},registerValidation:function(){this.registerValidator(this,"smartcardDecoderNo",{isRequired:!0,displayName:kl.value(this._localeBase+"smartCardOrDeviceNo"),minLength:10,maxLength:10,functions:Komodo.UI.Validators.alphanumericValidator}),this.registerValidator(this.get("data"),"activationDate",{type:"date",isRequired:!0,minDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())})},clearLists:function(){this.get("primaryDevicesList").clear(),this.get("xtraViewList").clear(),this.get("summaryOfDevicesList").clear()},addDecoderInList:function(e,t,a,s,o,r,i,n,c,d,l,u,h,m,p,v,f,g,y,D,b,C,P){var S=this,T="";if(void 0===S.getDeviceDetails(a,!0)){var I=Ember.Object.extend({init:function(){this._super();var I=this;I.set("display",t+"-"+a),I.set("decoderType",t),I.set("decoderSerialNumber",a),I.set("smartcardType",s),I.set("smartcardSerialNumber",o),I.set("decoderModel",e),I.set("decoderCpcType",r),I.set("servicesDetails",i),I.set("insurance",c),void 0!==l&&null!==l?(T=S.getAgreementChargePeriodFromLookUp(l),I.set("agreementChargePeriod",T)):I.set("agreementChargePeriod","-"),I.set("termOfPayment",l),I.set("UID",n),I.set("secondaryHardwareSerialnumber",u),I.set("tertiaryHardwareSerialnumber",h),I.set("addressDetails",m),I.set("paymentDetail",p),I.set("customerPersonalDetails",v),I.set("principal",""),I.set("addOn",""),I.set("access",""),I.set("principalFreeView",""),I.set("agreemntUId",void 0===d?void 0:d.UID),I.set("agreemntTypeID",void 0===d?void 0:d.Type),I.set("isGotvDecoder",3===g),I.set("isMobileDecoder",2===g),I.set("isHoliDayHome",I.agreemntTypeID===Komodo.AgreementTypes.HOLIDAY_HOME),I.set("isPrimaryDecoder",!0),I.set("isPrincipalPresent",!1),I.set("isAddOnPresent",!1),I.set("isHdAddOnPresent",!1),I.set("isAccessPresent",!1),I.set("isprincipalFreeViewPresent",!1),I.set("isInsurenceStatusPresent",!1),I.set("isDisconnected",void 0),I.set("isPrincipalActive",!1),I.set("isStolenSuspended",!1),I.set("isExisting",void 0===I.agreemntUId),I.set("startDate",void 0),I.set("modifiable","Y"),I.set("schedule","N"),I.set("isDPPPresent",!1),I.set("DPPName",void 0),I.set("deviceStatusDescription",P),I.set("isMnetDTTPresent",!1),$.each(S.get("boxOfficeList"),function(e,t){return t.device!==a||(I.set("boxOffice",!0),I.set("boxOfficeStatus",t.stauts),!1)});var w={Service:[]};if(void 0===i&&(w=void 0),S.set("existingMultipleProductAddOnUIDs",[]),void 0!==i&&I.agreemntUId&&$.each(i.Service,function(e,t){switch(t.ProductDetail.Type){case S.getValueFromConstant("ProductsConstants","productsConstants.products.PRINCIPAL_CATEGORY"):case S.getValueFromConstant("ProductsConstants","productsConstants.products.HIGH_DEFINITION_ADDON"):case S.getValueFromConstant("ProductsConstants","productsConstants.products.ADDON_CATEGORY"):case S.getValueFromConstant("ProductsConstants","productsConstants.products.ACCESS_CATEGORY"):case S.getValueFromConstant("ProductsConstants","productsConstants.products.FREE_TO_AIR"):case S.getValueFromConstant("ProductsConstants","productsConstants.products.DPP_CATEGORY"):switch(t.Status.toUpperCase()){case S.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_CANCELLED"):return!1;case S.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_ACTIVE"):case S.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_PENDING"):case S.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_FREE"):case S.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_DELAYED_ACTIVATION"):case S.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_AWAITING_PAYMENT"):case S.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_SUSPENDED"):case S.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_DISCONNECTED"):case S.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_FREE_VIEW_ACTIVE"):case S.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_FREE_VIEW_PENDING_ACTIVATION"):S.getValueFromConstant("ProductsConstants","productsConstants.products.PRINCIPAL_CATEGORY").toUpperCase()!==t.ProductDetail.Type.toUpperCase()&&S.getValueFromConstant("ProductsConstants","productsConstants.products.ADDON_CATEGORY").toUpperCase()!==t.ProductDetail.Type.toUpperCase()||S.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_DISCONNECTED").toUpperCase()===t.Status.toUpperCase()&&I.set("isDisconnected",!0),S.getValueFromConstant("ProductsConstants","productsConstants.products.PRINCIPAL_CATEGORY")===t.ProductDetail.Type?(I.get("isPrincipalPresent")?(I.set("principal",I.get("principal")+"\n"+t.ProductDetail.Description),I.set("principalStatus",I.get("principalStatus")+"\n"+t.Status)):(I.set("principal",t.ProductDetail.Description),I.set("startDate",t.ActivationDate),I.set("principalStatus",t.Status)),I.get("isGotvDecoder")?(t.ProductDetail.UID!==S.getValueFromConstant("ProductsConstants","productsConstants.products.PRINCIPAL_GOTVOPEN_ID")&&I.set("isPrincipalPresent",!0),t.ProductDetail.UID===S.getValueFromConstant("ProductsConstants","productsConstants.products.MNET_DTT_PRODUCT_ID")&&I.set("isMnetDTTPresent",!0)):S.getValueFromConstant("ProductsConstants","productsConstants.productType.DPP24")===t.ProductDetail.Type.toUpperCase()?I.set("isPrincipalPresent",!1):I.set("isPrincipalPresent",!0),t.Status.toUpperCase()===S.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_ACTIVE")?I.set("isPrincipalActive",!0):t.Status.toUpperCase()===S.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_DELAYED_ACTIVATION")&&I.set("schedule","Y")):S.getValueFromConstant("ProductsConstants","productsConstants.products.ADDON_CATEGORY")===t.ProductDetail.Type?S.get("isMultipleAddonAllowed")?(I.get("isMobileDecoder")&&t.Status.toUpperCase()===S.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_DELAYED_ACTIVATION")&&I.set("startDate",t.ActivationDate),S.existingMultipleProductAddOnUIDs.push({Name:t.ProductDetail.Description,Status:t.Status}),I.set("addOn",S.existingMultipleProductAddOnUIDs),I.set("addOnStatus",t.Status),I.set("isAddOnPresent",!0)):(I.get("isMobileDecoder")&&t.Status.toUpperCase()===S.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_DELAYED_ACTIVATION")&&I.set("startDate",t.ActivationDate),I.set("addOn",t.ProductDetail.Description),I.set("isAddOnPresent",!0),I.set("addOnStatus",t.Status)):S.getValueFromConstant("ProductsConstants","productsConstants.products.HIGH_DEFINITION_ADDON")===t.ProductDetail.Type?(I.set("hdAddOn",t.ProductDetail.Description),I.set("isHdAddOnPresent",!0),I.set("hdAddOnStatus",t.Status)):S.getValueFromConstant("ProductsConstants","productsConstants.products.ACCESS_CATEGORY")===t.ProductDetail.Type?(I.set("access",t.ProductDetail.Description),I.set("isAccessPresent",!0),I.set("accessServicesStatus",t.Status)):S.getValueFromConstant("ProductsConstants","productsConstants.products.FREE_TO_AIR")===t.ProductDetail.Type&&(I.set("principalFreeView",t.ProductDetail.Description),I.set("isprincipalFreeViewPresent",!0),I.set("principalFreeViewStatus",t.Status)),S.get("onlyPrincipalMobileProduct")&&f&&(S.countOfStolenSuspended=1*S.countOfStolenSuspended+1,S.get("data.selectedproductData").forEach(function(e){e.decoderSerialNumber===a||e.isPrincipalPresent||e.isStolenSuspended||S.redirectOnSuspendedAgreement(!0)}),I.set("isStolenSuspended",!0)),S.getValueFromConstant("ProductsConstants","productsConstants.productType.DPP24")===t.ProductDetail.Type.toUpperCase()&&(I.set("isDPPPresent",!0),I.set("DPPName",t.ProductDetail.Description)),y&&(I.set("isSecondaryDPPPresent",!0),I.set("SecondaryDeviceDPPName",b)),D&&(I.set("isTertiaryDPPPresent",!0),I.set("TertiaryDeviceDPPName",C)),w.Service.pushObject(t)}}}),void 0===I.agreemntUId&&void 0!==i)switch(i.Service){case void 0:case null:case"":break;default:Ember.isArray(i.Service)||(i.Service=[i.Service]),$.each(i.Service,function(e,t){w.Service.pushObject(t)})}I.get("isStolenSuspended")&&(w=void 0,I.set("isAddOnPresent",!1),I.set("isAccessPresent",!1),I.set("isHdAddOnPresent",!1),I.set("isPrincipalPresent",!1)),I.secondaryHardwareSerialnumber&&I.tertiaryHardwareSerialnumber?(I.set("isInXtraView",!0),I.set("isInThirdXtraView",!0)):I.secondaryHardwareSerialnumber?I.set("isInXtraView",!0):$.each(S.get("data.selectedproductData"),function(e,t){return t.secondaryHardwareSerialnumber===a?(Ember.isEmpty(c)||(t.set("secondaryInsurance",!0),t.set("secondaryInsuranceStatus",c)),I.isAccessPresent&&(t.set("isSecondaryAccess",!0),t.set("secondaryAccess",I.access),t.set("secondaryAccessStatus",I.accessServicesStatus)),t.set("secondaryDevicesSerailNumbers",a+" - "+o),I.get("boxOffice")&&(t.set("secondaryDevicesboxOffice",!0),t.set("secondaryDevicesboxOfficeStatus",I.get("boxOfficeStatus"))),I.set("isPrimaryDecoder",!1),!1):t.tertiaryHardwareSerialnumber!==a||(Ember.isEmpty(c)||(t.set("tertiaryInsurance",!0),t.set("tertiaryInsuranceStatus",c)),I.isAccessPresent&&(t.set("isTertiaryAccess",!0),t.set("tertiaryAccess",I.access),t.set("tertiaryAccessStatus",I.accessServicesStatus)),t.set("tertiaryDevicesSerailNumbers",a+" - "+o),I.get("boxOffice")&&(t.set("tertiaryDevicesboxOffice",!0),t.set("tertiaryevicesboxOfficeStatus",I.get("boxOfficeStatus"))),I.set("isPrimaryDecoder",!1),!1)}),I.set("servicesDetails",w),I.set("productLength",0),void 0!==I.servicesDetails&&void 0!==I.servicesDetails.Service&&I.set("productLength",I.servicesDetails.Service.length),void 0!==I.startDate&&new Date(I.startDate)>=new Date?I.set("startDate",new Date(I.startDate)):I.set("startDate",new Date),I.set("dd",I.startDate.getUTCDate()<=9?"0"+I.startDate.getUTCDate():I.startDate.getUTCDate()),I.set("mm",1*I.startDate.getUTCMonth()+1<=9?"0"+(1*I.startDate.getUTCMonth()+1):1*I.startDate.getUTCMonth()+1),I.set("yyyy",I.startDate.getUTCFullYear()),I.set("startDate",I.dd+"-"+I.mm+"-"+I.yyyy);var A=[];S.populateDetailsBasedOnDecoder(I.decoderModel,S.get("allAccessService"),A,I.decoderCpcType,!1),A.length>0&&I.set("hasAccessService",!0),Ember.isEmpty(c)||I.set("isInsurenceStatusPresent",!0),I.get("isMobileDecoder")?I.get("isPrincipalPresent")||I.get("isAddOnPresent")?S.get("onlyPrincipalMobileProduct")&&I.get("isInsurenceStatusPresent")?I.modifiable="N":S.get("onlyPrincipalMobileProduct")||(I.modifiable="N"):Ember.isEmpty(I.get("principalStatus"))?Ember.isEmpty(I.get("addOnStatus"))||I.get("addOnStatus").toUpperCase()===S.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_SUSPENDED")&&(I.modifiable="N"):I.get("principalStatus").toUpperCase()===S.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_SUSPENDED")&&(I.modifiable="N"):I.get("isGotvDecoder")?((I.get("isPrincipalPresent")||I.get("isMnetDTTPresent"))&&I.get("isInsurenceStatusPresent")&&(I.modifiable="N"),Ember.isEmpty(I.get("principalStatus"))||I.get("principalStatus").toUpperCase()===S.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_SUSPENDED")&&(I.modifiable="N")):I.get("isPrincipalPresent")&&I.get("isAddOnPresent")&&I.get("isHdAddOnPresent")&&I.get("isInsurenceStatusPresent")&&(I.get("isAccessPresent")||!I.get("isAccessPresent")&&!I.get("hasAccessService"))?I.modifiable="N":Ember.isEmpty(I.get("principalStatus"))||I.get("principalStatus").toUpperCase()===S.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_SUSPENDED")&&(I.modifiable="N")},secondaryDevicesList:function(){var e=Ember.A(),t=this.get("decoderSerialNumber"),a=[],s=this.get("decoderModel");return $.each(S.devicePairs,function(e,t){if(t.SystemKey===s)return a=t.SecondaryHardwareModels.SecondaryHardwareModel,!1}),S.get("data.selectedproductData").forEach(function(s){if(s.get("decoderSerialNumber")!==t&&"Y"!==s.schedule&&"N"!==s.modifiable&&void 0===s.get("secondaryHardwareSerialnumber")&&!s.get("isStolenSuspended")){var o=!1;$.each(S.get("xtraViewList"),function(e,t){t.secondaryDecoder.decoderSerialNumber!==s.decoderSerialNumber&&t.decoderSerialNumber!==s.decoderSerialNumber||(o=!0)});var r=!1;$.each(S.get("data.selectedSummaryProductData"),function(e,t){t.primaryDecoderSerialNumber!==s.decoderSerialNumber&&t.secondaryDecoderSerialNumber!==s.decoderSerialNumber||(r=!0)}),o||r||$.each(a,function(t,a){if(a.SystemKey===s.decoderModel&&(!1===s.isPrincipalPresent||s.isPrincipalActive)){if(Ember.isEmpty(s.servicesDetails))return e.pushObject(s),!1;if($.grep(s.servicesDetails.Service,function(e){return $.grep(S.getValueFromConstant("ProductsConstants","productsConstants.products.ALLOW_DPP_AS_PRIMARY").split(","),function(t){return t===e.ProductDetail.UID})[0]}).length<1)return e.pushObject(s),!1}return!0})}}),e}.property(),disable:function(){var e=!0,t=this.get("secondaryDevicesList");return!Ember.isEmpty(t)&&t.length>0&&(e=!1),e}.property()}).create();S.get("data.selectedproductData").pushObject(I),S.updatePrimaryDeviceList(e,a)}},updatePrimaryDeviceList:function(e,t){var a=this,s=!0,o=!1;$.each(a.primaryDevicesList,function(e,a){return a.decoderSerialNumber===t&&(s=!1),s}),s&&$.each(a.devicePairs,function(r,i){if(i.SystemKey===e){var n=a.getDeviceDetails(t,!0);o=!1,$.each(a.get("holidaySwitchedDevices"),function(e,t){n.agreemntUId!==t.parent&&n.agreemntUId!==t.child||n.agreemntUId!==t.child||(o=!0)}),!("N"===n.schedule&&void 0===n.servicesDetails||"N"===n.schedule&&!Ember.isEmpty(n.servicesDetails)&&(Ember.isEmpty(n.servicesDetails.Service)||$.grep(n.servicesDetails.Service,function(e){return e.ProductDetail.UID!==a.getValueFromConstant("ProductsConstants","productsConstants.products.DPP24")})<1)||n.isPrincipalActive&&void 0!==n.servicesDetails)||void 0===n.smartcardSerialNumber||Ember.isEmpty(n.smartcardSerialNumber)||n.isStolenSuspended||o||(a.primaryDevicesList.pushObject(n),s=!1)}return s}),a.secondaryDevicesListChanged(),a.disableChanged(),a.primaryDevicesList.sort(function(e,t){return t.productLength-e.productLength})},maxAllowedMobileDevices:function(e){var t=0;return $.each(this.data.selectedproductData,function(e,a){Komodo.UI.cacheDataService.isMobileDevice(a.decoderCpcType)&&t++}),t===that.getValueFromConstant("ProductsConstants","productsConstants.products.MAX_MOBILE_DEVICE_ALLOWED")&&!!Komodo.UI.cacheDataService.isMobileDevice(e)},maxAllowedDstvDevices:function(){var e=0;return $.each(this.data.selectedproductData,function(t,a){Komodo.UI.cacheDataService.isGotvDevice(a.decoderCpcType)||Komodo.UI.cacheDataService.isMobileDevice(a.decoderCpcType)||e++}),e>that.getValueFromConstant("ProductsConstants","productsConstants.products.MAX_DSTV_DEVICE_ALLOWED")},disableChanged:function(){this.get("primaryDevicesList").forEach(function(e){e.notifyPropertyChange("disable")})},secondaryDevicesListChanged:function(){this.get("primaryDevicesList").forEach(function(e){e.notifyPropertyChange("secondaryDevicesList")})},addSummaryGridRow:function(e){this.data.selectedSummaryProductData.pushObject(e)},removeDecoder:function(e){var t=this,a=[];t.primaryDevicesList.forEach(function(t){t.decoderSerialNumber!==e.decoderSerialNumber&&t.decoderSerialNumber!==e.secondaryDecoder.decoderSerialNumber||a.push(t)}),a.forEach(function(e){t.primaryDevicesList.removeObject(e),t.secondaryDevicesListChanged(),t.disableChanged()})},isDeviceAdded:function(){var e=this,t=!1,a=e.get("smartcardDecoderNo");return void 0!==e.get("smartcardDecoderNo")&&0!==e.get("data.selectedproductData").length&&e.get("data.selectedproductData").forEach(function(s){a!==s.decoderSerialNumber&&a!==s.smartcardSerialNumber||(Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),kl.value(e._localeBase+"messgDeviceNo")+a+kl.value(e._localeBase+"messgDeviceNoValidation")),void 0!==e.get("data.isAssociateButtonVisible")&&e.set("data.isAssociateButtonVisible.value","true"),t=!0)}),t},viewDetails:function(){this.dataService.showDeviceSummaryPopUp(this.get("data.commandSummaryGridItem"),this._localeBase,this)},viewDecoderDetail:function(e){var t=e.content;this.dataService.showDeviceSummaryPopUp(t,this._localeBase,this)},setDefaultvalues:function(){var e=this;e.set("data.selectedPaymentOfMethod","1"),e.set("selectedPaymentOfMethodTitle",kl.value(e._localeBase+"monthly")),e.set("shortTermSubscriptionId",void 0),e.get("isNewCustomer")?e.set("data.deviceAtHomeOrOtherLocation","0"):e.set("tempValue",void 0)},deviceAtAnotherLocationDataReceived:function(e){var t=this;t.set("isActive",!1),
t.set("deviceAtAnotherLocationWithData",!1),t.set("deviceAtanotherLocationCalled",!0),t.set("deviceAtAnotherLocationData",e),t.set("residenceTypeForHH",void 0),null!==e&&(t.addressDetails.country=e.country,t.addressDetails.province=e.province,t.addressDetails.city=e.city,t.addressDetails.suburb=e.suburb,t.addressDetails.postalCode=e.postalCode,t.addressDetails.unit=e.unit,t.addressDetails.building=e.building,t.addressDetails.streetNo=e.streetNo,t.addressDetails.isAddressOverride=e.isAddressOverride,t.addressDetails.streetName=void 0!==e.streetNo&&null!==e.streetNo?e.streetNo+" "+e.streetName:e.streetName,t.addressDetails.boxOrSuite=e.boxOrSuite,void 0!==e.residenceType?(t.customerPersonalDetails.residenceType=e.residenceType,t.set("residenceTypeForHH",e.residenceType),e.residenceType!==t.getValueFromConstant("ProductsConstants","productsConstants.products.HOLIDAYHOME_CANONICALKEY")||t.get("isMOPRequiredForHH")?e.residenceType===t.getValueFromConstant("ProductsConstants","productsConstants.products.HOLIDAYHOME_CANONICALKEY")&&t.get("isMOPRequiredForHH")&&$.grep(t.get("data.selectedproductData"),function(e){return e.agreemntTypeID===Komodo.AgreementTypes.HOLIDAY_HOME&&e.paymentDetail.MethodOfPayment===Komodo.MOP.CASH}).length>0?(t.get("customerPaymentDetail").set("MethodOfPayment",Komodo.MOP.CASH),t.set("methodOfPaymentRB",Komodo.MOP.CASH)):t.get("debitOrderCount")>0?(t.get("customerPaymentDetail").set("MethodOfPayment",Komodo.MOP.DEBIT_ORDER),t.set("methodOfPaymentRB",Komodo.MOP.DEBIT_ORDER)):(t.get("customerPaymentDetail").set("MethodOfPayment",Komodo.MOP.CASH),t.set("methodOfPaymentRB",Komodo.MOP.CASH)):(t.get("customerPaymentDetail").set("MethodOfPayment",Komodo.MOP.CASH),t.set("methodOfPaymentRB",Komodo.MOP.CASH)),t.deviceAtAnotherLocationData.isSwitchingDevice&&(t.set("data.primaryProductSelection",void 0),t.set("data.addOnProductSelection",void 0),t.enableFlags(t.primaryAccessServices,["isCheckedPrimaryAccessService"],!1),t.enableFlags(t.primaryAccessServices,["checkedPrimaryAccessService"],!0),t.enableFlags(t.primaryAccessServices,["isCheckedSecondaryAccessService"],!1),t.enableFlags(t.primaryAccessServices,["checkedSecondaryAccessService"],!0),t.set("disablePrincipalProducts",!0),t.set("disableAddOnProducts",!0)),"2"===e.deviceUsage?(this.customerPersonalDetails.firstName=e.firstName,this.customerPersonalDetails.surname=e.lastName,t.customerPersonalDetails.deviceUsage=kl.value(this._localeDevice+"someoneElse")):t.customerPersonalDetails.deviceUsage=kl.value(this._localeDevice+"customer"),e.residenceType===t.getValueFromConstant("ProductsConstants","productsConstants.products.HOLIDAYHOME_CANONICALKEY")&&t.get("isMOPRequiredForHH")&&(t.set("disablePaymentOptions",!0),t.set("data.selectedPaymentOfMethod","1")),t.set("deviceAtAnotherLocationWithData",!0)):t.get("isNewCustomer")?t.set("data.deviceAtHomeOrOtherLocation","0"):t.set("tempValue",void 0))},getNewProcessID:function(){this.startNewProcess()},getcustomerDetails:function(){var e=this,t=Komodo.Services.ProductAndServiceMaintenanceHelper.create(),a=Komodo.Services.customerProfileService.getCustomerPersonalDetail();if(void 0!==a){e.set("_customerClassSelected",a.customerClass),e.set("_customerTypeSelected",a.typeId);var s=this.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.CUSTOMERCLASS_COMMERCIAL");"commercial"!==a.customerTypeText.toLowerCase()&&a.customerClass!==s||e.set("isCommercialCustomer",!1)}if(t.isCustomerIdIsAvailableToRetriveData()){switch(e.set("data.customerRefNo",t.getCustomerIdToRetrieveData()),e.set("data.radioButtonPaymentMethod",[]),$.each(e.get("chargePeriods"),function(t,a){"1000"!==a.key?e.get("data.radioButtonPaymentMethod").addObject({title:a.value,value:a.key}):e.get("isSTSEnabled")&&"1000"===a.key&&e.get("data.radioButtonPaymentMethod").addObject({title:a.value,value:a.key})}),e.get("_customerClassSelected")){case e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.CUSTOMERCLASS_SPECIALIST"):switch(e.get("_customerTypeSelected")){case e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.SALES_PROMOTERS"):case e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.DIPLOMAT"):case e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.SHAREHOLDERS"):case e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.PANELIST"):}}var o=void 0,r=0;void 0!==Komodo.Services.customerProfileService.getFinancialAccounts().ResponseMessage&&void 0!==Komodo.Services.customerProfileService.getFinancialAccounts().ResponseMessage.Payload&&void 0!==Komodo.Services.customerProfileService.getFinancialAccounts().ResponseMessage.Payload.ListOfAccount&&void 0!==Komodo.Services.customerProfileService.getFinancialAccounts().ResponseMessage.Payload.ListOfAccount.Account&&(o=Komodo.Services.customerProfileService.getFinancialAccounts().ResponseMessage.Payload.ListOfAccount.Account,$.each(Komodo.Services.customerProfileService.getFinancialAccounts().ResponseMessage.Payload.ListOfAccount.Account,function(e,t){$.each(t.ListOfAgreement.Agreement,function(e,t){r=1*r+t.ListOfHardware.Hardware.length})})),0===r?e.set("isNewCustomer",!0):e.set("isNewCustomer",!1);var i=void 0,n=void 0;return e.get("deviceAtanotherLocationCalled")||e.get("isNewCustomer")||(e.hardwareAddressDetails.clear(),o=o.sort(function(e,t){return e.Type-t.Type}),$.each(o,function(t,a){$.each(a.ListOfAgreement.Agreement,function(t,s){a.Type===Komodo.AccountTypes.BOX_OFFICE&&$.each(s.ListOfHardware.Hardware,function(t,a){var s;s=void 0!==a.SerialNumber?a.SerialNumber:void 0,void 0!==a.ListOfService&&void 0!==a.ListOfService.Service&&a.ListOfService.Service.length>0&&$.each(a.ListOfService.Service,function(t,a){a.ProductDetail.UID===e.getValueFromConstant("ProductsConstants","productsConstants.products.BOX_OFFICE_PRODUCT_ID")&&e.get("boxOfficeList").pushObject({device:s,stauts:a.Status})})})})}),$.each(o,function(t,s){$.each(s.ListOfAgreement.Agreement,function(t,o){s.Type!==Komodo.AccountTypes.BOX_OFFICE&&(n=void 0!==o.PersonalDetail?{firstName:o.PersonalDetail.FirstName,surname:o.PersonalDetail.Surname}:{firstName:a.firstName,surname:a.lastName},i=void 0!==o.ListOfAddress.Address[0]?e.addressMapper(o.ListOfAddress.Address[0]):void 0,void 0!==o.PersonalDetail&&(n.firstName=o.PersonalDetail.FirstName,n.surname=o.PersonalDetail.Surname),$.each(o.ListOfHardware.Hardware,function(t,a){e.extractHardwareDetails(a,o,s.PaymentDetail,i,n),Ember.isEmpty(a.SecondaryHardware.Hardware)||$.each(a.SecondaryHardware.Hardware,function(t){e.extractHardwareDetails(a.SecondaryHardware.Hardware[t],o,s.PaymentDetail,i,n)})}))})}),$.each(e.get("data.selectedproductData"),function(t,a){if(!Ember.isEmpty(a.secondaryHardwareSerialnumber)){var s=e.getDeviceDetails(a.secondaryHardwareSerialnumber,!0),o=a;o.set("secondaryDecoder",s),e.xtraViewList.pushObject(o),e.removeDecoder(o)}}),$.each(e.get("holidaySwitchedDevices"),function(t,a){$.each(e.get("data.selectedproductData"),function(e,t){t.agreemntUId!==a.parent&&t.agreemntUId!==a.child||(t.set("modifiable","N"),t.agreemntUId===a.child&&t.set("isHoliDayHomeSwitching",!0))})}),e.showHideLinkUnlink(),e.addressMapper(Komodo.Services.customerProfileService.getCustomerDetails().ResponseMessage.Payload.CustomerDetail.ListOfAddress.Address[0]),this.hardwareAddressDetails.pushObject({dlAddressKey:"Other",dlAddress:kl.value(e._localeBase+"hardwareAddressDetailsOther")}),this._customerClassSelected===e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.CUSTOMERCLASS_SPECIALIST")&&this._customerTypeSelected!==e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.DIPLOMAT")&&this.set("tempValue",this.hardwareAddressDetails[0])),!0}return Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"customerNotFound"),kl.value(e._localeBase+"searchCustomer"),Komodo.Controls.MessageBoxOkButtons,e,"id123456","danger").response=function(e){"ok"===e&&Komodo.Services.uiService.transitionTo("/home")},!1},extractHardwareDetails:function(e,t,a,s,o){var r,i,n,c,d,l,u,h,m,p,v,f,g,y=this,D=void 0,b=void 0,C=0,P=!1,S=!1;r=void 0!==e.ProductDetail.Model?e.ProductDetail.Model.split(" ")[0]:"",Ember.isEmpty(e.ProductDetail.ProductFeatures)?i=void 0!==e.ProductDetail.Name?e.ProductDetail.Name:"":$.each(e.ProductDetail.ProductFeatures,function(t,a){return a.Description!==y.getValueFromConstant("ProductsConstants","productsConstants.products.DEVICE_MODEL_DESCRIPTION")||Ember.isEmpty(a.Value)?(Ember.isEmpty(a.Value)&&(i=void 0!==e.ProductDetail.Name?e.ProductDetail.Name:""),!0):(i=a.Value,!1)}),n=void 0!==e.SerialNumber?e.SerialNumber:void 0,c=void 0!==e.SmartcardDetail&&void 0!==e.SmartcardDetail.Model&&null!==e.SmartcardDetail.Model?e.SmartcardDetail.Model.split(" ")[1]:void 0;var T=void 0;Ember.isEmpty(e.SerialNumber)||(Komodo.Services.queryService.getJSON("DeviceProcessing/Get?deviceID="+e.SerialNumber,{async:!1}).done(function(e){T=e}).fail(function(){Komodo.error("[ERROR] : could not retrieve Device Info")}),Ember.isEmpty(T.StatusInformation)||(g=T.StatusInformation.StatusDescription.toUpperCase())),void 0!==e.ListOfService&&void 0!==e.ListOfService.Service&&e.ListOfService.Service.length>0&&(D=e.ListOfService),u=e.ProductDetail.UID,Ember.isEmpty(e.InsuranceDetail)||(h=e.InsuranceDetail.Status),m=t.TermOfPayment,l=void 0!==u&&null!==u?y.getDecoderCpcByproductId(u):void 0,Komodo.UI.cacheDataService.isGotvDevice(l)?(d=void 0!==e.MACAddress?e.MACAddress:void 0,C=3):Komodo.UI.cacheDataService.isMobileDevice(l)?(d=void 0!==e.MACAddress?e.MACAddress:void 0,C=2):Ember.isEmpty(T)||Ember.isEmpty(T.MaterialInformation)||null===T.MaterialInformation.Type||"embedded"!==T.MaterialInformation.Type.toLowerCase()?(d=void 0!==e.LinkedSmartcard?e.LinkedSmartcard:void 0,C=1):(d=void 0!==e.MACAddress?e.MACAddress:void 0,C=1),Ember.isEmpty(e.SecondaryHardware)||$.each(e.SecondaryHardware.Hardware,function(t,a){0===t?p=e.SecondaryHardware.Hardware[t].SerialNumber:1===t&&(b=e.SecondaryHardware.Hardware[t].SerialNumber),$.each(e.SecondaryHardware.Hardware[t].ListOfService.Service,function(e,t){switch(t.ProductDetail.Type){case y.getValueFromConstant("ProductsConstants","productsConstants.products.DPP_CATEGORY"):switch(t.Status.toUpperCase()){case y.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_CANCELLED"):return!1;case y.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_ACTIVE"):case y.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_PENDING"):case y.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_FREE"):case y.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_DELAYED_ACTIVATION"):case y.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_AWAITING_PAYMENT"):case y.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_SUSPENDED"):case y.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_DISCONNECTED"):case y.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_FREE_VIEW_ACTIVE"):case y.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_FREE_VIEW_PENDING_ACTIVATION"):0===e?(P=!0,v=t.ProductDetail.Description):1===e&&(S=!0,f=t.ProductDetail.Description)}}})}),n&&(void 0!==D?Komodo.UI.cacheDataService.isMobileDevice(l)?y.addDecoderInList(r,i,n,c,d,l,D,u,h,t,m,p,b,s,void 0!==a?a:void 0,o,!1,C,P,S,v,f,g):($.each(D.Service,function(e,T){switch(T.ProductDetail.Type){case y.getValueFromConstant("ProductsConstants","productsConstants.products.INSURANCE_CATEGORY"):case y.getValueFromConstant("ProductsConstants","productsConstants.products.HARDWARE_CATEGORY"):case y.getValueFromConstant("ProductsConstants","productsConstants.products.MOBILE_HARDWARE"):case y.getValueFromConstant("ProductsConstants","productsConstants.products.GOTV_HARDWARE"):case y.getValueFromConstant("ProductsConstants","productsConstants.products.DTT_HARDWARE"):case y.getValueFromConstant("ProductsConstants","productsConstants.products.PRINCIPAL_CATEGORY"):case y.getValueFromConstant("ProductsConstants","productsConstants.products.ACCESS_CATEGORY"):case y.getValueFromConstant("ProductsConstants","productsConstants.products.HIGH_DEFINITION_ADDON"):case y.getValueFromConstant("ProductsConstants","productsConstants.products.ADDON_CATEGORY"):case y.getValueFromConstant("ProductsConstants","productsConstants.products.FREE_TO_AIR"):if(T.Status.toUpperCase()===y.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_SUSPENDED")){if(!y.get("onlyPrincipalMobileProduct"))return y.addDecoderInList(r,i,n,c,d,l,D,u,h,t,m,p,b,s,void 0!==a?a:void 0,o,!0,C,P,S,v,f,g),!1;Komodo.Services.queryService.getJSON("DeviceProcessing/Get?deviceID="+n,{async:!1}).done(function(e){if("STOLEN"===e.StatusInformation.StatusDescription.toUpperCase()){if(!Ember.isEmpty(T.ProductDetail.ProductFeatures)&&t.Type===Komodo.AgreementTypes.HOLIDAY_HOME){var I=$.grep(T.ProductDetail.ProductFeatures,function(e){return void 0!==e});I.length>0&&t.UID!==I[0].Value&&T.ProductDetail.Type.toUpperCase()===y.getValueFromConstant("ProductsConstants","productsConstants.products.PRINCIPAL_CATEGORY").toUpperCase()&&y.holidaySwitchedDevices.pushObject({parent:I[0].Value,child:t.UID})}return y.addDecoderInList(r,i,n,c,d,l,D,u,h,t,m,p,b,s,void 0!==a?a:void 0,o,!0,C,P,S,v,f,g),!1}return!0}).fail(function(e){y.showMessageForFA(e.responseJSON.Message,"retrieveDeviceInfo")})}else if(!Ember.isEmpty(T.ProductDetail.ProductFeatures)&&t.Type===Komodo.AgreementTypes.HOLIDAY_HOME){var I=$.grep(T.ProductDetail.ProductFeatures,function(e){return void 0!==e});I.length>0&&t.UID!==I[0].Value&&T.ProductDetail.Type.toUpperCase()===y.getValueFromConstant("ProductsConstants","productsConstants.products.PRINCIPAL_CATEGORY").toUpperCase()&&y.holidaySwitchedDevices.pushObject({parent:I[0].Value,child:t.UID})}}return!0}),y.addDecoderInList(r,i,n,c,d,l,D,u,h,t,m,p,b,s,void 0!==a?a:void 0,o,!1,C,P,S,v,f,g)):y.addDecoderInList(r,i,n,c,d,l,D,u,h,t,m,p,b,s,void 0!==a?a:void 0,o,!1,C,P,S,v,f,g))},addressMapper:function(e){var t={country:""!==e.Country&&void 0!==e.Country?e.Country:void 0,province:""!==e.Province&&void 0!==e.Province?e.Province:void 0,city:""!==e.City&&void 0!==e.City?e.City:void 0,suburb:""!==e.Suburb&&void 0!==e.Suburb?e.Suburb:void 0,postalCode:""!==e.PostCode&&void 0!==e.PostCode?e.PostCode:void 0,building:""!==e.BuildingName&&void 0!==e.BuildingName?e.BuildingName:void 0,streetName:""!==e.Street&&void 0!==e.Street?e.Street:void 0,boxOrSuite:""!==e.PostBoxNumber&&void 0!==e.PostBoxNumber?e.PostBoxNumber:void 0,unit:""!==e.HouseNumber?e.HouseNumber:void 0,dlAddress:void 0,dlAddressKey:void 0,isAddressOverride:!this.get("_enableAddressOverRide")||!e.IsVerified},a=void 0!==t.boxOrSuite&&null!==t.boxOrSuite?t.boxOrSuite+", ":"",s=void 0!==t.streetName&&null!==t.streetName?t.streetName+", ":"",o=void 0!==t.unit&&null!==t.unit?t.unit+", ":"",r=void 0!==t.building&&null!==t.building?t.building+", ":"",i=void 0!==t.suburb&&null!==t.suburb?t.suburb+", ":"",n=void 0!==t.city&&null!==t.city?t.city+", ":"",c=void 0!==t.postalCode&&null!==t.postalCode?t.postalCode:"",d=void 0!==t.province&&null!==t.province?this.getProvienceNameById(t.province,t.country)+", ":"",l=void 0!==t.country&&null!==t.country?this.getCountryNameById(t.country):"";return t.dlAddress=a+o+r+s+i+n+d+l+c,t.dlAddressKey=a+o+r+s+i+n+d+l+c,Ember.isEmpty($.grep(this.get("hardwareAddressDetails"),function(e){return e.dlAddressKey.toUpperCase()===t.dlAddressKey.toUpperCase()}))&&this.hardwareAddressDetails.pushObject(t),t},getDeviceDetails:function(e,t){var a=this,s=void 0;return $.each(a.get("data.selectedproductData"),function(a,o){return e!==o.decoderSerialNumber||t?e===o.decoderSerialNumber&&t&&(s=o):s=o.agreemntUId,void 0===s}),s},isDecoderRemovedFromExistingPair:function(e,t){var a=this,s=!0,o=void 0;return $.each(a.get("data.selectedproductData"),function(a,r){return void 0!==r.secondaryHardwareSerialnumber&&r.secondaryHardwareSerialnumber===e&&(t&&(o=r),s=!1),s}),t?o:!s},getCustomerID:function(){var e=this,t=void 0,a=Komodo.Services.customerProfileService.getCustomerPersonalDetail();return Ember.isEmpty(a)||void 0===a.customerNo||(t=a.customerNo,e.customerPersonalDetails.firstName=a.firstName,e.customerPersonalDetails.surname=a.lastName,e.customerPersonalDetails.residenceType=void 0,e.customerPersonalDetails.deviceUsage="Customer"),t},getCountryNameById:function(e){var t=this,a=void 0;return void 0!==e&&void 0!==t.get("countries")&&$.each(t.get("countries"),function(t,s){s.CanonicalKey===e&&(a=s.CanonicalValue)}),a},getProvienceNameById:function(e,t){var a=this,s=void 0;return void 0!==t&&void 0!==a.get("countries")&&$.each(a.get("countries"),function(a,o){o.CanonicalKey===t&&o.Provinces&&o.Provinces.Province&&$.isArray(o.Provinces.Province)&&$.each(o.Provinces.Province,function(t,a){a.CanonicalKey===e&&(s=a.CanonicalValue)})}),s},checkBOMDevice:function(){var e=this;e.set("isBOMDevice",!1),Ember.isEmpty(e.get("data.selectedPrimaryDecoder"))||Ember.isEmpty(e.get("data.selectedPrimaryDecoder").servicesDetails)||Ember.isEmpty(e.get("data.selectedPrimaryDecoder").servicesDetails.Service[0])||Ember.isEmpty(e.get("data.selectedPrimaryDecoder").servicesDetails.Service[0].ProductDetail)||Ember.isEmpty(e.get("data.selectedPrimaryDecoder").servicesDetails.Service[0].ProductDetail.Offers)?e.get("isChargePeriodChanged")&&null!==e.get("data.selectedPrimaryDecoder")&&void 0!==e.get("data.selectedPrimaryDecoder")||(e.set("selectedChargePeriod","1"),e.set("selectedPaymentOfMethodTitle",kl.value(e._localeBase+"monthly"))):(e.set("selectedChargePeriod",Ember.isEmpty(e.get("data.selectedPrimaryDecoder").servicesDetails.Service[0].ProductDetail.TermOfPayment)?"1":e.get("data.selectedPrimaryDecoder").servicesDetails.Service[0].ProductDetail.TermOfPayment),e.set("isBOMDevice",!0))},getProductsBasedOnDecoder:function(){var e=this;if(e.checkBOMDevice(),void 0!==e.get("productAddOn")&&e.get("productAddOn").length>0&&e.isMultipleAddonAllowed&&$.each(e.get("productAddOn"),function(e,t){t.isChecked=!1,t.disableMultipleAddOnProducts=!1}),e.dataService.clearAllProducts(e),!Ember.isEmpty(e.get("data.selectedPrimaryDecoder"))&&e.get("data.selectedPrimaryDecoder").isDisconnected){var t=$.grep(e.get("data.selectedPrimaryDecoder").servicesDetails.Service,function(t){return t.Status.toUpperCase()===e.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_DISCONNECTED").toUpperCase()});if(t.length>0&&$.grep(t,function(t){return t.ProductDetail.Type.toUpperCase()===e.getValueFromConstant("ProductsConstants","productsConstants.products.PRINCIPAL_CATEGORY").toUpperCase()}).length>0){Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),kl.value(e._localeBase+"disconnectedRedirect"),Komodo.Controls.MessageBoxYesNoButtons,e,"id54456673","warning").response=function(e){"yes"===e&&Komodo.Services.uiService.transitionTo("/reconnect")}}}switch(e.get("data.selectedPrimaryDecoder")){case void 0:case null:case"":break;default:if(e.getcustomerDetails(),e.set("servicesNotSelected",!0),e.set("showPrimaryDecodeServices",!0),e.set("showPaymentOfMethod",!0),e.set("showPackages",!0),e.set("isGoTvDeviceSelected",!1),e.set("disablePrincipalProducts",!1),e.set("disableAddOnProducts",!1),e.set("principalPackageText",kl.value(e._localeBase+"principalPackage")),e.get("data.selectedPrimaryDecoder.isGotvDecoder")&&e.set("isGoTvDeviceSelected",!0),e.populateDetailsBasedOnDecoder(e.data.selectedPrimaryDecoder.decoderModel,e.allProductService,e.productService,e.data.selectedPrimaryDecoder.decoderCpcType,!1),e.populateDetailsBasedOnDecoder(e.data.selectedPrimaryDecoder.decoderModel,e.allInsurance,e.primaryInsuranceproducts,e.data.selectedPrimaryDecoder.decoderCpcType,!0),e.populateDetailsBasedOnDecoder(e.data.selectedPrimaryDecoder.decoderModel,e.allAccessService,e.primaryAccessServices,e.data.selectedPrimaryDecoder.decoderCpcType,!1),this.get("isSASpecific")&&(Ember.isEmpty(e.get("data.selectedPrimaryDecoder").servicesDetails)||$.grep(e.get("data.selectedPrimaryDecoder").servicesDetails.Service,function(t){return t.ProductDetail.UID===e.getValueFromConstant("ProductsConstants","productsConstants.products.MNET_GO")||t.ProductDetail.UID===e.getValueFromConstant("ProductsConstants","productsConstants.products.MNDCSN1")}).length<1)&&$.grep(e.get("productService"),function(t){return t.product.details.productID===e.getValueFromConstant("ProductsConstants","productsConstants.products.MNET_GO")||t.product.details.productID===e.getValueFromConstant("ProductsConstants","productsConstants.products.MNDCSN1")}).length>0&&$.grep(Komodo.Services.securityService.roles,function(e){return e.indexOf("-DSTVi")>-1}).length<1&&e.get("productService").removeObject($.grep(e.get("productService"),function(t){return t.product.details.productID===e.getValueFromConstant("ProductsConstants","productsConstants.products.MNET_GO")||t.product.details.productID===e.getValueFromConstant("ProductsConstants","productsConstants.products.MNDCSN1")})[0]),(e.primaryInsuranceproducts.length>0||e.primaryAccessServices.length>0)&&(e.set("data.primaryDecoder",e.get("data.selectedPrimaryDecoder.decoderSerialNumber")+" "+e.get("data.selectedPrimaryDecoder.decoderType")),e.insuranceSelection?Komodo.Services.securityService.hasPermission(e.insurancepermission)?e.enableFlags(e.primaryInsuranceproducts,["isCheckedPrimaryInsurance","checkedPrimaryInsurance"],!1):e.enableFlags(e.primaryInsuranceproducts,["checkedPrimaryInsurance"],!0):e.enableFlags(e.primaryInsuranceproducts,["isCheckedPrimaryInsurance","checkedPrimaryInsurance"],!1),e.enableFlags(e.primaryAccessServices,["checkedPrimaryAccessService"],!0)),void 0!==e.get("data.selectedPrimaryDecoder.secondaryDecoder")&&void 0!==e.get("data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber")&&null!==e.get("data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber")){var a=!1;e.primaryDevicesList.forEach(function(t){t.decoderSerialNumber===e.get("data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber")&&(a=!0)}),!1===a&&(e.set("showSecondaryDecodeServices",!0),e.populateDetailsBasedOnDecoder(e.data.selectedPrimaryDecoder.secondaryDecoder.decoderModel,e.allInsurance,e.secondaryInsuranceproducts,e.data.selectedPrimaryDecoder.secondaryDecoder.decoderCpcType,!0),e.populateDetailsBasedOnDecoder(e.data.selectedPrimaryDecoder.secondaryDecoder.decoderModel,e.allAccessService,e.secondaryAccessServices,e.data.selectedPrimaryDecoder.secondaryDecoder.decoderCpcType,!1),(e.secondaryInsuranceproducts.length>0||e.secondaryAccessServices.length>0)&&(e.set("data.secondaryDecoder",e.data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber+" "+e.data.selectedPrimaryDecoder.secondaryDecoder.decoderType),e.insuranceSelection?Komodo.Services.securityService.hasPermission(e.insurancepermission)?e.enableFlags(e.secondaryInsuranceproducts,["isCheckedSecondaryInsurance","checkedSecondaryInsurance"],!1):e.enableFlags(e.secondaryInsuranceproducts,["checkedSecondaryInsurance"],!0):e.enableFlags(e.secondaryInsuranceproducts,["isCheckedSecondaryInsurance","checkedSecondaryInsurance"],!1),e.enableFlags(e.secondaryAccessServices,["checkedSecondaryAccessService"],!0)))}e.get("isGoTvDeviceSelected")?e.populateMobileAddOns():e.get("data.selectedPrimaryDecoder.isMobileDecoder")&&(e.set("principalPackageText",kl.value(e._localeBase+"mobilePackages")),e.populateMobileAddOns()),e.getDecoderServices(),!1===e.get("isCheckedSecondaryAccessService")?e.set("showSecondaryAccessService",!0):e.set("showSecondaryAccessService",!1),Ember.isEmpty(e.data.selectedPrimaryDecoder.secondaryDecoder)||Ember.isEmpty($.grep(e.primaryInsuranceproducts,function(e){return!1===e.checkedPrimaryInsurance}))?e.set("showInsurance",!0):e.set("showInsurance",!1),void 0===e.data.selectedPrimaryDecoder.agreemntUId?e._customerClassSelected===e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.CUSTOMERCLASS_SPECIALIST")?e._customerTypeSelected===e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.DIPLOMAT")?e.set("disableDeviceUsage",!1):$.inArray(e._customerTypeSelected,[e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.MULTICHOICE"),e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.NASPERS"),e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.AGENCIES"),e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.EMPLOYEE"),e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.VIP"),e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.PANELIST"),e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.SHAREHOLDERS")])>=0?e.set("disableDeviceUsage",!1):e.get("isAllowHHForFieldTrialsExternalDemoInternalDemo")&&e._customerTypeSelected===e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.FIELD_TRIALS")?e.set("disableDeviceUsage",!1):(e._customerTypeSelected===e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.FIELD_TRIALS")||e._customerTypeSelected===e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.EXTERNAL_DEMO")||e._customerTypeSelected===e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.INTERNAL_DEMO"))&&e.get("isSASpecific")?e.set("disableDeviceUsage",!1):e.set("disableDeviceUsage",!0):e.set("disableDeviceUsage",!1):e._customerClassSelected!==e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.CUSTOMERCLASS_SPECIALIST")||e._customerTypeSelected!==e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.FIELD_TRIALS")&&e._customerTypeSelected!==e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.EXTERNAL_DEMO")&&e._customerTypeSelected!==e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.INTERNAL_DEMO")||(e.get("isSASpecific")?e.set("disableDeviceUsage",!1):e.set("disableDeviceUsage",!0))}e.get("data.selectedPrimaryDecoder.isMobileDecoder")&&e.set("disableDeviceUsage",!0),e.get("data.selectedPrimaryDecoder.isGotvDecoder")&&e.get("isAllowHHForFieldTrialsExternalDemoInternalDemo")&&e._customerTypeSelected!==e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.FIELD_TRIALS")&&e.enableDisableDeviceLocation(),!Ember.isEmpty(e.get("data.selectedPrimaryDecoder.addressDetails"))&&$.grep(e.hardwareAddressDetails,function(t){return t.dlAddressKey===e.get("data.selectedPrimaryDecoder.addressDetails").dlAddressKey}).length>0&&e.set("tempValue",$.grep(e.hardwareAddressDetails,function(t){return t.dlAddressKey===e.get("data.selectedPrimaryDecoder.addressDetails").dlAddressKey})[0]),Ember.isEmpty(e.get("data.selectedPrimaryDecoder.servicesDetails"))||(e.set("disablePaymentOptions",!0),e.set("disableSTSPackages",!0))},getDecoderServices:function(){var e=this,t=e.get("data.selectedPrimaryDecoder.servicesDetails"),a=!0,s=!1;if(Ember.isEmpty(t)||Ember.isEmpty(t.Service)||(e.setDeviceDetails(e.productService,t.Service,"disablePrincipalProducts",void 0,"primaryProductSelection"),e.setDeviceDetails(e.productAddOn,t.Service,"disableAddOnProducts",void 0,"addOnProductSelection"),e.setDeviceDetails(e.productHdAddOn,t.Service,"disableHdAddOnProducts",void 0,"hdAddOnProductSelection"),e.setDeviceDetails(e.primaryAccessServices,t.Service,void 0,["isCheckedPrimaryAccessService","checkedPrimaryAccessService"],void 0),s=!0,e.set("data.activationDate",new Date(Date.UTC(e.data.selectedPrimaryDecoder.yyyy,e.data.selectedPrimaryDecoder.mm-1,e.data.selectedPrimaryDecoder.dd))),Ember.isEmpty(e.data.selectedPrimaryDecoder.termOfPayment)||("1"===e.data.selectedPrimaryDecoder.termOfPayment&&1e3===e.data.selectedPrimaryDecoder.servicesDetails.Service[0].ChargePeriod&&e.data.selectedPrimaryDecoder.servicesDetails.Service[0].ShortTermSubscriptionPeriodId>0?(e.set("data.selectedPaymentOfMethod",e.data.selectedPrimaryDecoder.servicesDetails.Service[0].ChargePeriod.toString()),e.set("data.selectedShortTermSubscriptionId",e.data.selectedPrimaryDecoder.servicesDetails.Service[0].ShortTermSubscriptionPeriodId.toString())):Ember.isEmpty(e.data.selectedPrimaryDecoder.servicesDetails)||Ember.isEmpty(e.data.selectedPrimaryDecoder.servicesDetails.Service)?e.set("data.selectedPaymentOfMethod",e.data.selectedPrimaryDecoder.TermOfPayment):e.set("data.selectedPaymentOfMethod",e.data.selectedPrimaryDecoder.servicesDetails.Service[0].ChargePeriod.toString())),Ember.isEmpty(t)||$.each(t.Service,function(t,a){a.ProductDetail.UID===e.getValueFromConstant("ProductsConstants","productsConstants.products.GOTV_LITE_PRODUCT_ID")||a.ProductDetail.UID===e.getValueFromConstant("ProductsConstants","productsConstants.products.GOTV_LITE_LESOTHO_PRODUCT_ID")?e.set("data.selectedPaymentOfMethod",Ember.isEmpty(a.ChargePeriod)?"3":a.ChargePeriod.toString()):a.ProductDetail.UID!==e.getValueFromConstant("ProductsConstants","productsConstants.products.GOTV_VALUE_PRODUCT_ID")||Ember.isEmpty(a.ProductDetail.Offers)||a.ProductDetail.Offers.UID!==e.getValueFromConstant("ProductsConstants","productsConstants.products.GOTV_BUNDLE_OFFER_UID")||(e.set("data.selectedPaymentOfMethod","1"),e.get("_customerClassSelected")===e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.CUSTOMERCLASS_SPECIALIST")&&e._customerTypeSelected!==e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.PANELIST")&&e.set("data.radioButtonPaymentMethod",[{title:kl.value(e._localeBase+"monthly"),value:"1"}]))}),e.get("disableAlternativeProductsForMobile")&&e.get("data.selectedPrimaryDecoder.isMobileDecoder")&&(e.get("data.selectedPrimaryDecoder.isPrincipalPresent")||e.get("data.selectedPrimaryDecoder.isAddOnPresent"))&&(e.set("disablePrincipalProducts",!0),e.get("isMultipleAddonAllowed")?$.each(e.get("productAddOn"),function(e,t){Ember.set(t,"disableMultipleAddOnProducts",!0)}):e.set("disableAddOnProducts",!0)),Ember.isEmpty(t)||$.each(t.Service,function(t,a){Ember.isEmpty($.grep(e.productService,function(t){return t.product.details.productID===a.ProductDetail.UID&&t.product.details.productCategory===e.getValueFromConstant("ProductsConstants","productsConstants.products.EXPLORA_PAYMENT_PLAN")})[0])||(Ember.isEmpty(e.primaryAccessServices)||$.grep(e.primaryAccessServices,function(e){e.set("checkedPrimaryAccessService",!0),e.set("isCheckedPrimaryAccessService",!0)}),Ember.isEmpty(e.secondaryAccessServices)||$.grep(e.secondaryAccessServices,function(e){e.set("checkedSecondaryAccessService",!0),e.set("isCheckedSecondaryAccessService",!0)}))})),$.each(e.primaryInsuranceproducts,function(t,s){return a=!0,e.get("data.selectedPrimaryDecoder.isInsurenceStatusPresent")&&(s.set("checkedPrimaryInsurance",!0),s.set("isCheckedPrimaryInsurance",!0),a=!1),a}),void 0!==e.get("data.selectedPrimaryDecoder.secondaryDecoder"))switch(t=e.get("data.selectedPrimaryDecoder.secondaryDecoder.servicesDetails"),e.get("data.selectedPrimaryDecoder.secondaryDecoder")){case void 0:case null:case"":break;default:switch(t){case void 0:case null:case"":break;default:s||(e.setDeviceDetails(e.productService,t.Service,"disablePrincipalProducts",void 0,"primaryProductSelection"),
e.setDeviceDetails(e.productAddOn,t.Service,"disableAddOnProducts",void 0,"addOnProductSelection")),e.setDeviceDetails(e.secondaryAccessServices,t.Service,void 0,["isCheckedSecondaryAccessService","checkedSecondaryAccessService"],void 0),$.each(e.secondaryInsuranceproducts,function(t,s){return a=!0,e.get("data.selectedPrimaryDecoder.secondaryDecoder.isInsurenceStatusPresent")&&(s.set("checkedSecondaryInsurance",!0),s.set("isCheckedSecondaryInsurance",!0),a=!1),a})}}},getAgreementChargePeriodFromLookUp:function(e){var t=this,a="",s=t.get("chargePeriods");if(!Ember.isEmpty(s))for(var o=0;o<s.length;o++)if(e.trim()===s[o].key.trim()){a=s[o].value;break}return a},getLookUpData:function(){var e=this,t=void 0,a=void 0,s=void 0,o=$.Deferred();return t=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),a=Komodo.Services.localizationService.getCurrentLanguage(),Komodo.Services.cachedDataService.fetch("InvoicePeriod",{}).done(function(r){e.set("chargePeriods",[]),$.each(r,function(t,a){"NONE"!==a.value.toUpperCase()&&e.get("chargePeriods").addObject(a)}),e.get("isSTSEnabled")&&Komodo.Services.cachedDataService.fetch("ShortTermSubscriptionPeriod",{}).done(function(t){e.set("ShortTermSubscriptionPackages",[]),$.each(t,function(t,a){e.get("ShortTermSubscriptionPackages").addObject(a)})}),Komodo.UI.cacheDataService.getHardwareCpc(),Komodo.Services.cachedDataService.fetch("Location").done(function(r){var i=JSON.parse(r);e.set("countries",[]),$.each($.makeArray(i.Countries.Country),function(t,a){e.get("countries").addObject(a)}),Komodo.Services.cachedDataService.fetch("Country").done(function(r){e.set("isoData",[]),e.set("isoData",r),e.isoData.forEach(function(e){t===e.key&&(s=e.key)}),void 0!==s&&e.set("country",s),Komodo.Services.cachedDataService.fetch("HardwareModelDetail",{domain:t,qualifier:a}).done(function(s){var r=JSON.parse(s);e.set("devicePairs",[]),$.each(r.PrimaryHardwareModels.PrimaryHardwareModel,function(t,a){e.get("devicePairs").addObject(a)}),Komodo.Services.cachedDataService.fetch("ProductCategoryAndProductDetail").done(function(t){e.set("productCategoryAndProductDetail",[]),e.set("productCategoryAndProductDetail",JSON.parse(t).ProductCategories.ProductCategory),e.populateHierachicalCDMDataSet("EstablishmentTypeRelationship",e.residenceTypes),Komodo.Services.featureToggleService.isEnabled("AssociateProducts","OnlyPrincipalMobileProduct").done(function(t){e.set("onlyPrincipalMobileProduct",t),Komodo.Services.cachedDataService.fetch("MethodOfPayment").done(function(t){e.methodsOfPaymentCanonical.clear(),$.each(t,function(t,a){e.methodsOfPaymentCanonical.addObject(a)}),Komodo.Services.cachedDataService.fetch("BankAccountType").done(function(t){e.methodsOfPayment.clear(),$.each(t,function(t,a){e.methodsOfPayment.addObject(a)}),Komodo.Services.featureToggleService.isEnabled("AssociateProducts","InsuranceSelection").done(function(t){e.set("insuranceSelection",t),Komodo.Services.featureToggleService.isEnabled("CustomerGlobal","EnableAddressOverRide").done(function(t){e.set("_enableAddressOverRide",t),Komodo.Services.featureToggleService.isEnabled("AssociateProducts","AllowHDAddOns").done(function(t){e.set("_allowHDAddOns",t),Komodo.Services.featureToggleService.isEnabled("AssociateProducts","RemovePrePaidHH").done(function(t){e.set("_removePrePaidHH",t),o.resolve()}).fail(function(){Komodo.error("[ERROR] : could not retrieve feature toggle AssociateProducts.RemovePrePaidHH")})}).fail(function(){Komodo.error("[ERROR] : could not retrieve feature toggle AssociateProducts.AllowHDAddOns")})}).fail(function(){Komodo.error("[ERROR] : could not retrieve feature toggle CustomerGlobal.EnableAddressOverRide")})}).fail(function(e){Komodo.Services.log("Error while checking InsuranceSelection. Error Details:"+e)})}).fail(function(e){Komodo.Services.log("Error while checking BankAccountType. Error Details:"+e)})}).fail(function(e){Komodo.Services.log("Error while checking MethodOfPayment. Error Details:"+e)})}).fail(function(e){Komodo.Services.log("Error while checking feature toggle. Error Details:"+e)})}).fail(function(){Komodo.error("[ERROR] : could not retrieve ProductCategoryAndProductDetail domain = "+t+"/ qualifier = "+a)})}).fail(function(){Komodo.error("[ERROR] : could not retrieve CountryISO domain = "+t+"/ qualifier = "+a)})}).fail(function(){Komodo.error("[ERROR] : could not retrieve CountryISO domain = "+t+"/ qualifier = "+a)})}).fail(function(){Komodo.error("[ERROR] : could not retrieve Location domain = "+t+"/ qualifier = "+a)})}).fail(function(){Komodo.error("[ERROR] : could not retrieve InvoicePeriod domain = "+t+"/ qualifier = "+a)}),o},populateHierachicalCDMDataSet:function(e,t){Komodo.Services.cachedDataService.fetch(e,{domain:Komodo.Services.uiService.getController("application").get("_selectedCountryId"),qualifier:Komodo.Services.localizationService.getCurrentLanguage()}).done(function(a){var s=JSON.parse(a);switch(t.clear(),e){case"EstablishmentTypeRelationship":$.each(s.CustomerClasses.CustomerClass,function(e,a){"Residential"===a.CanonicalValue&&"General"===a.CustomerTypes.CustomerType.CanonicalValue&&$.each(a.CustomerTypes.CustomerType.EstablishmentTypes.EstablishmentType,function(e,a){t.addObject(a)})});break;default:Komodo.error("[ERROR] : Unknown Hierarchical dataset: "+e)}}).fail(function(){Komodo.error("[ERROR] : could not retrieve hierarchical CDM data for "+e)})},getMobileAddOn:function(e){var t=this,a=void 0;return $.each(t.allProductAddOn,function(t,s){return s.product.details.productID!==e||(a=s,!1)}),a},loadCustomerAccountInfo:function(){var e=this;e.dataService.initialiseObjects(e);var t=e.getCustomerID();void 0!==t?void 0===e.get("defaultAccount")?e.dataService.retrieveFinancialAccounts(t).done(function(t){var a=t;switch(a){case void 0:case null:case"":e.showMessageForFA(kl.value(e._localeBase+"noFinancialaccounts"),"customerProfile");break;default:switch(a.ResponseMessage){case void 0:case null:case"":e.showMessageForFA(kl.value(e._localeBase+"noFinancialaccounts"),"customerProfile");break;default:switch(a.ResponseMessage.Payload){case void 0:case null:case"":e.showMessageForFA(kl.value(e._localeBase+"noFinancialaccounts"),"customerProfile");break;default:var s=a.ResponseMessage.Payload.ListOfAccount;switch(s){case void 0:case null:case"":break;default:var o=new Komodo.Services.ProductAndServiceMaintenanceHelper,r=o.createArrayForSingleElement(s.Account);e.set("cashCount",0),e.set("debitOrderCount",0),$.each($.grep(r,function(e){return!(e.Type!==Komodo.AccountTypes.DSTV_RES&&e.Type!==Komodo.AccountTypes.GOTV_RES||e.PaymentDetail.MethodOfPayment!==Komodo.MOP.CASH||e.Status!==Komodo.AccountStatus.OPEN&&e.Status!==Komodo.AccountStatus.SUSPENDED)}),function(t,a){$.each(a.ListOfAgreement.Agreement,function(t,a){$.each(a.ListOfHardware.Hardware,function(t,a){$.each(a.ListOfService.Service,function(t,a){e.getValueFromConstant("ProductsConstants","productsConstants.products.PRINCIPAL_CATEGORY")!==a.ProductDetail.Type||a.Status.toUpperCase()!==e.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_ACTIVE")&&a.Status.toUpperCase()!==e.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_PENDING_REMOVAL")&&a.Status.toUpperCase()!==e.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_AWAITING_PAYMENT")||e.set("cashCount",e.get("cashCount")+1)}),0===e.get("cashCount")&&void 0!==a&&e.set("cashCount",e.get("cashCount")+1)})})}),$.each($.grep(r,function(e){return!(e.Type!==Komodo.AccountTypes.DSTV_RES&&e.Type!==Komodo.AccountTypes.GOTV_RES||e.PaymentDetail.MethodOfPayment===Komodo.MethodOfPayment.PAYROLL||e.PaymentDetail.MethodOfPayment===Komodo.MethodOfPayment.CASH||e.Status!==Komodo.AccountStatus.OPEN&&e.Status!==Komodo.AccountStatus.SUSPENDED)}),function(t,a){var s=a;$.each(a.ListOfAgreement.Agreement,function(t,a){$.each(a.ListOfHardware.Hardware,function(t,a){$.each(a.ListOfService.Service,function(t,a){e.getValueFromConstant("ProductsConstants","productsConstants.products.PRINCIPAL_CATEGORY")!==a.ProductDetail.Type||a.Status.toUpperCase()!==e.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_ACTIVE")&&a.Status.toUpperCase()!==e.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_PENDING_REMOVAL")&&a.Status.toUpperCase()!==e.getValueFromConstant("ProductsConstants","productsConstants.products.STATUS_AWAITING_PAYMENT")||(e.set("debitOrderCount",e.get("debitOrderCount")+1),e.set("defaultAccount",s.PaymentDetail))}),0===e.get("debitOrderCount")&&void 0!==a&&e.set("debitOrderCount",e.get("debitOrderCount")+1)})})});var i=!0;if($.each(r,function(t,a){switch(a.Status){case e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.AccountStatusNotAllowed.CLOSED"):e.set("accountStatus","'closed'"),e.set("isAccountStatusAllowed",!1);break;case e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.AccountStatusNotAllowed.BADDEBTWRITEOFF"):e.set("accountStatus","'bad debt write off'"),e.set("isAccountStatusAllowed",!1);break;case e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.AccountStatusNotAllowed.CANCELLED"):e.set("accountStatus","'cancelled'"),e.set("isAccountStatusAllowed",!1);break;case e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.AccountStatusNotAllowed.DOUBTFULDEBT"):e.set("accountStatus","'doubtful debt'"),e.set("isAccountStatusAllowed",!1);break;case e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.AccountStatusNotAllowed.OVERDUE"):e.set("accountStatus","'overdue'"),e.set("isAccountStatusAllowed",!1);break;case e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.AccountStatusNotAllowed.PIRACY"):e.set("accountStatus","'piracy'"),e.set("isAccountStatusAllowed",!1);break;case e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.AccountStatusNotAllowed.DISCONNECTED"):e.set("accountStatus","'disconnected'"),e.set("isAccountStatusAllowed",!1);break;case e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.AccountStatusNotAllowed.FRAUDULENT"):e.set("accountStatus","'fraudulent'"),e.set("isAccountStatusAllowed",!1);break;default:e.set("isAccountStatusAllowed",!0)}if(a.Type!==Komodo.AccountTypes.BOX_OFFICE&&a.Type!==Komodo.AccountTypes.PAYMENT_PLAN||!0!==e.get("isAccountStatusAllowed")){if((a.Type===Komodo.AccountTypes.DSTV_RES||a.Type===Komodo.AccountTypes.GOTV_RES)&&!0===e.get("isAccountStatusAllowed"))switch(a.PaymentDetail.MethodOfPayment){case Komodo.MethodOfPayment.CASH:case Komodo.MethodOfPayment.PAYROLL:0===e.get("debitOrderCount")?(e.set("defaultAccount",a.PaymentDetail),e.mappPaymentDetails(e.get("defaultAccount"),e.get("customerPaymentDetail")),e.get("customerPaymentDetail").set("MethodOfPayment",a.PaymentDetail.MethodOfPayment),e.set("methodOfPaymentRB",a.PaymentDetail.MethodOfPayment)):(e.get("customerPaymentDetail").set("MethodOfPayment",Komodo.MOP.DEBIT_ORDER),e.set("methodOfPaymentRB",Komodo.MOP.DEBIT_ORDER),i=!1);break;default:e.set("defaultAccount",a.PaymentDetail),e.mappPaymentDetails(a.PaymentDetail,e.get("customerPaymentDetail")),e.get("customerPaymentDetail").set("MethodOfPayment",Komodo.MOP.DEBIT_ORDER),e.set("methodOfPaymentRB",Komodo.MOP.DEBIT_ORDER),i=!1}}else switch(a.PaymentDetail.MethodOfPayment){case Komodo.MethodOfPayment.CASH:case Komodo.MethodOfPayment.PAYROLL:e.set("defaultAccount",a.PaymentDetail),e.mappPaymentDetails(a.PaymentDetail,e.get("customerPaymentDetail"));break;default:e.set("defaultAccount",a.PaymentDetail),e.mappPaymentDetails(a.PaymentDetail,e.get("customerPaymentDetail")),i=!1}return i}),e.get("FAStatus")&&0===$.grep(r,function(t){return t.Status===e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.AccountStatusAllowed.OPEN")||t.Status===e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.AccountStatusAllowed.OVERDUE")||t.Status===e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.AccountStatusAllowed.DISCONNECTED")||t.Status===e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.AccountStatusAllowed.SUSPENDED")}).length){var n=kl.value(e._localeBase+"noAccountStatusAllowed",{accountStatus:e.get("accountStatus")});return void e.showMessageForFA(n,"manageViewing")}if(!e.get("FAStatus")&&0===$.grep(r,function(t){return t.Status===e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.AccountStatusAllowed.OPEN")||t.Status===e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.AccountStatusAllowed.SUSPENDED")}).length){kl.value(e._localeBase+"noAccountStatusAllowed",{accountStatus:e.get("accountStatus")});return void e.showMessageForFA(n,"manageViewing")}void 0===e.get("customerPaymentDetail.MethodOfPayment")&&e.showMessageForFA(kl.value(e._localeBase+"noMethodOfpayment"),"account")}}}}}).fail(function(t){t=JSON.parse(t),Ember.isEmpty(t.responseJSON)?e.showMessageForFA(JSON.stringify(t),"customerProfile"):e.showMessageForFA(t.responseJSON.Message,"customerProfile")}):e.mappPaymentDetails(e.get("defaultAccount"),e.get("customerPaymentDetail")):e.showMessageForFA(kl.value(e._localeBase+"customerNotFound"),"customerProfile")},mappPaymentDetails:function(e,t){var a=this,s=e.MethodOfPayment;switch(a.customerPersonalDetails.residenceType!==a.holidayHomeKey||a.get("isMOPRequiredForHH")||(s=Komodo.MethodOfPayment.CASH),s){case Komodo.MethodOfPayment.CASH:case Komodo.MethodOfPayment.PAYROLL:t.set("AHVStatus",void 0),t.set("AccountNumber",void 0),t.set("BankName",void 0),t.set("BranchCode",void 0),t.set("BranchName",void 0),t.set("DebitOrderDay",e.DebitOrderDay),t.set("MethodOfPayment",s),t.set("PayerIDNumber",void 0),t.set("PayerIDType",void 0),t.set("BankAccountType",void 0),t.set("PayerName",void 0),t.set("PayerSurname",void 0);break;default:a.validateAccountDetails(e),e.MethodOfPayment===Komodo.MethodOfPayment.AHV_PENDING?t.set("AHVStatus",!0):a.get("residenceTypeForHH")===a.holidayHomeKey&&a.get("isMOPRequiredForHH")&&t.set("AHVStatus",Komodo.AHVOverride.AHV_Override),t.set("AccountNumber",e.AccountNumber),t.set("BankName",e.BankName),t.set("BranchCode",e.BranchCode),t.set("BranchName",e.BranchName),t.set("DebitOrderDay",e.DebitOrderDay),t.set("MethodOfPayment",e.MethodOfPayment),t.set("PayerIDNumber",e.PayerIDNumber),t.set("BankAccountType",e.BankAccountType),t.set("PayerIDType",e.PayerIDType),t.set("PayerName",e.PayerName),t.set("PayerSurname",e.PayerSurname)}},validateAccountDetails:function(e){var t="";switch(!(Ember.empty(e.AccountNumber)||isNaN(e.AccountNumber)||Ember.empty(e.BankName)||Ember.empty(e.BankAccountType)||Ember.empty(e.BranchCode)||Ember.empty(e.BranchName)||isNaN(e.DebitOrderDay))){case!0:break;case!1:$.each(e,function(e,a){Ember.isEmpty(a)&&new Array("BankAccountType","PayerIDNumber","AccountNumber","BankName","BranchCode","BranchName","DebitOrderDay").contains(e)&&(t+=e+"<br />")});Komodo.Controls.MessageBoxController.show(kl.value(this._localeBase+"useCaseTitle"),kl.value(this._localeBase+"incompleteAccountDetails",{accountNumber:e.AccountNumber})+"<br/>"+t,Komodo.Controls.MessageBoxOkButton,this,"id123456","warning").response=function(t){"ok"===t&&Komodo.Services.eventAggregator.publish("PublishAccountNoToRedirectEditPaymentDetail",e.AccountNumber)}}},showMessageForFA:function(e,t){var a=this;switch(Ember.isEmpty(e)&&(e=kl.value(a._localeBase+"incompleteCustomerDetails")),t){case"customerProfile":a.get("_customerClassSelected")===a.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.CUSTOMERCLASS_SPECIALIST")&&(t="specialistCustomerProfile");break;case"editCustomerDetail":a.get("_customerClassSelected")===a.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.CUSTOMERCLASS_SPECIALIST")&&(t="editSpecialistCustomerDetail")}Komodo.Controls.MessageBoxController.show(kl.value(a._localeBase+"useCaseTitle"),e,Komodo.Controls.MessageBoxOkButton,a,"LCAI00005","danger").response=function(e){"ok"===e&&Komodo.Services.uiService.transitionTo(t)}},loadCustomerDetails:function(){var e=this,t=e.getCustomerID();void 0!==t&&(void 0===e.get("defaultAddressDetails")?e.dataService.retrieveCustomer(t).done(function(t){var a=t;if(void 0!==a&&void 0!==a.ResponseMessage.Payload.CustomerDetail){var s=$.grep(a.ResponseMessage.Payload.CustomerDetail.ListOfAddress.Address,function(e){return"3"===e.Type});if(1!==s.length||void 0===s[0])return void e.showMessageForFA(kl.value(e._localeBase+"customerAddress"),"editCustomerDetail");switch(""!==s[0].Country&&void 0!==s[0].Country&&null!==s[0].Country&&""!==s[0].Province&&void 0!==s[0].Province&&null!==s[0].Province&&""!==s[0].City&&void 0!==s[0].City&&null!==s[0].City&&""!==s[0].Suburb&&void 0!==s[0].Suburb&&null!==s[0].Suburb&&""!==s[0].PostCode&&void 0!==s[0].PostCode&&null!==s[0].PostCode){case!0:switch(e.set("defaultAddressDetails",s[0]),e.defaultAddressMapper(e.get("defaultAddressDetails"),e.get("addressDetails")),e.addressDetails.country){case"zaf":case"nam":e.set("marketSegment",e.getValueFromConstant("ProductsConstants","productsConstants.products.MARKET_SEGMENT"));break;case"lso":e.set("marketSegment",e.getValueFromConstant("ProductsConstants","productsConstants.products.LESOTHO_MARKET_SEGMENT"));break;default:e.set("marketSegment",e.getValueFromConstant("ProductsConstants","productsConstants.products.MARKET_SEGMENT"))}e.set("allProductService",[]),e.set("allProductAddOn",[]),e.set("allInsurance",[]),e.set("allHdAddOns",[]),e.set("allAccessService",[]),e.set("allProductCategories",[]),Komodo.UI.cacheDataService.getProductTypesWithDetails(e.allProductService,e.allProductAddOn,e.allInsurance,e.allAccessService,e.allProductCategories,e.allHdAddOns,e._customerClassSelected,e._customerTypeSelected,e.get("marketSegment"));break;default:e.showMessageForFA(kl.value(e._localeBase+"addressInformation"),"editCustomerDetail")}}}):e.defaultAddressMapper(e.get("defaultAddressDetails"),e.get("addressDetails")))},defaultAddressMapper:function(e,t){t.set("country",e.Country),t.set("province",e.Province),t.set("city",e.City),t.set("suburb",e.Suburb),t.set("postalCode",e.PostCode),t.set("unit",e.HouseNumber),t.set("building",e.BuildingName),t.set("streetNo",e.BuildingNumber),t.set("streetName",e.Street),t.set("boxOrSuite",e.PostBoxNumber),this.get("_enableAddressOverRide")?t.set("isAddressOverride",!e.IsVerified):t.set("isAddressOverride",!0)},summaryOfDevicesList:function(){var e=Ember.A(),t=this;if(void 0!==t.get("data.selectedproductData")){var a;t.get("data.selectedproductData").forEach(function(t){"N"!==t.schedule&&"N"!==t.modifiable||void 0===t.smartcardSerialNumber||""===t.smartcardSerialNumber||t.isStolenSuspended||e.pushObject(t)}),t.xtraViewList.length>0&&(a=[],t.xtraViewList.forEach(function(e){a.pushObject(e)}),$.each(e,function(e,s){t.set("isInPair",!1),$.each(t.xtraViewList,function(e,a){if(s.decoderSerialNumber===a.decoderSerialNumber||a.secondaryDecoder.decoderSerialNumber===s.decoderSerialNumber||a.tertiaryHardwareSerialnumber===s.decoderSerialNumber)return void t.set("isInPair",!0)}),t.get("isInPair")||a.pushObject(s)}),e=a),t.get("data.selectedSummaryProductData").length>0&&(a=[],$.each(e,function(e,s){t.set("isInPair",!1),$.each(t.get("data.selectedSummaryProductData"),function(e,a){if(s.decoderSerialNumber===a.secondaryDecoderSerialNumber||a.primaryDecoderSerialNumber===s.decoderSerialNumber)return void t.set("isInPair",!0)}),t.get("isInPair")||a.pushObject(s)}),e=a)}return t.set("tempValue",void 0),e}.property("data.selectedproductData.@each","xtraViewList.@each","data.selectedSummaryProductData.@each"),disableAddButtonIfNoPackagesAdded:function(){this.data.selectedSummaryProductData.length>0?this.set("disableAddButton",!0):this.set("disableAddButton",!1)}.observes("data.selectedSummaryProductData.length"),showDisableDevices:function(){var e=this;0===e.primaryDevicesList.length?e.set("devicesLabel",!1):e.set("devicesLabel",!0)}.observes("primaryDevicesList.@each"),setDeviceDetails:function(e,t,a,s,o){var r=this,i=void 0;$.each(e,function(e,n){i=!0,t=void 0===t.length?[t]:t,$.each(t,function(e,t){return n.product.details.productID===t.ProductDetail.UID&&(void 0!==s&&$.each(s,function(e,t){Ember.set(n,t,!0)}),r.get("isMultipleAddonAllowed")&&"addOnProductSelection"===o?(Ember.set(n,"isChecked",!0),Ember.set(n,"disableMultipleAddOnProducts",!0)):void 0!==o&&r.get("data").set(o,t.ProductDetail.UID),void 0!==a&&r.set(a,!0),i=!1),i})})},servicesNotSelectedChanged:function(){switch(this.servicesNotSelected){case void 0:case null:case"":break;case!0:this.set("data.selctedWaitingForInstallationOption","1"),this.set("disablePaymentOptions",!1),this.set("disableInstallationOption",!0),this._customerClassSelected===this.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.CUSTOMERCLASS_SPECIALIST")&&Ember.isEmpty(this.data.selectedPrimaryDecoder.agreemntTypeID)?this._customerTypeSelected===this.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.DIPLOMAT")?this.set("disableDeviceUsage",!1):$.inArray(this._customerTypeSelected,[this.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.MULTICHOICE"),this.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.NASPERS"),this.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.AGENCIES"),this.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.EMPLOYEE_RELATED"),this.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.EMPLOYEE")])>=0?this.set("disableDeviceUsage",!1):this.set("disableDeviceUsage",!0):this.data.selectedPrimaryDecoder.agreemntTypeID===Komodo.AgreementTypes.HOLIDAY_HOME?this.set("disableDeviceUsage",!0):this.set("disableDeviceUsage",!1),this.set("data.selectedPaymentMadeOption","1"),this.set("data.activationDate",new Date),this.set("disableActivationDate",!0);break;case!1:if(this.get("residenceTypeForHH")===this.holidayHomeKey&&this.get("isMOPRequiredForHH")?this.set("disablePaymentOptions",!0):this.set("disablePaymentOptions",!1),this.set("disableActivationDate",!1),this.set("disableInstallationOption",!1),this.set("disableDeviceUsage",!1),this.enableFlags(this.primaryAccessServices,["checkedPrimaryAccessService"],!1),this.enableFlags(this.secondaryAccessServices,["checkedSecondaryAccessService"],!1),void 0!==this.data.selectedPrimaryDecoder&&null!==this.data.selectedPrimaryDecoder)if((this.get("data.selectedPrimaryDecoder.isMobileDecoder")||this.get("data.selectedPrimaryDecoder.isGotvDecoder"))&&(this.set("disableInstallationOption",!0),this.set("disableDeviceUsage",!0),this.get("isMultipleAddonAllowed")?0===$.grep(this.get("productAddOn"),function(e){return e.isChecked}).length?(this.set("disableActivationDate",!1),this.set("disablePaymentOptions",!1)):(this.set("disableActivationDate",!0),this.set("disablePaymentOptions",!0)):void 0===this.data.addOnProductSelection?(this.set("disableActivationDate",!1),this.set("disablePaymentOptions",!1)):(this.set("disableActivationDate",!0),this.set("disablePaymentOptions",!0))),this.get("data.selectedPrimaryDecoder.isGotvDecoder")&&this.enableDisableDeviceLocation(),this._customerClassSelected===this.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.CUSTOMERCLASS_SPECIALIST")&&Ember.isEmpty(this.data.selectedPrimaryDecoder.agreemntTypeID))switch(this._customerTypeSelected){case this.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.DIPLOMAT"):break;case this.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.MULTICHOICE"):case this.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.NASPERS"):case this.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.AGENCIES"):case this.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.EMPLOYEE_RELATED"):case this.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.PANELIST"):case this.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.EMPLOYEE"):this.set("disableDeviceUsage",!1);break;case this.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.SALES_PROMOTERS"):this.set("disableDeviceUsage",!0);break;case this.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.SHAREHOLDERS"):this.get("isSASpecific")?this.set("disableDeviceUsage",!0):this.set("disableDeviceUsage",!1);break;case this.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.FIELD_TRIALS"):case this.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.EXTERNAL_DEMO"):case this.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.INTERNAL_DEMO"):this.get("isSASpecific")?this.set("disableDeviceUsage",!1):this.set("disableDeviceUsage",!0);break;case this.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.VIP"):this.set("disableDeviceUsage",!1),this.set("disablePaymentOptions",!0);break;default:this.set("disableDeviceUsage",!0),this.set("disablePaymentOptions",!0)}else this._customerClassSelected!==this.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.CUSTOMERCLASS_SPECIALIST")||this._customerTypeSelected!==this.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.FIELD_TRIALS")&&this._customerTypeSelected!==this.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.EXTERNAL_DEMO")&&this._customerTypeSelected!==this.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.INTERNAL_DEMO")?this.data.selectedPrimaryDecoder.agreemntTypeID===Komodo.AgreementTypes.HOLIDAY_HOME&&this.set("disableDeviceUsage",!0):this.get("isSASpecific")?this.set("disableDeviceUsage",!1):this.set("disableDeviceUsage",!0)}}.observes("servicesNotSelected"),disableInstallationOption:function(){var e=!0;return void 0===this.data.selectedPrimaryDecoder||this.get("data.selectedPrimaryDecoder.isMobileDecoder")||(e=!1),e}.property("data.selectedPrimaryDecoder"),disablePaymentOptionsChanged:function(){var e=this;e.set("disablePaymentOptions",!1),$.each(e.primaryInsuranceproducts,function(t,a){if(a.isCheckedPrimaryInsurance&&(e.set("disablePaymentOptions",!1),!a.checkedPrimaryInsurance)){Komodo.Controls.MessageBoxController.show(kl.value("locale.customer:customerInformation.dccAcceptTermAndConditionTitle"),kl.value("locale.customer:customerInformation.dccAcceptTermAndCondition"),Komodo.Controls.MessageBoxAcceptDeclineButtons,e,"id5446673","").response=function(t){"accept"!==t&&(e.publishDeclineDCCTermsAndConditionsEvent(e.data.selectedPrimaryDecoder.decoderSerialNumber),a.set("isCheckedPrimaryInsurance",!1))}}}),e.servicesNotSelected||e.set("disablePaymentOptions",!1)}.observes("primaryInsuranceproducts.@each.isCheckedPrimaryInsurance"),disablePaymentOptionsChangedSecondary:function(){var e=this;e.set("disablePaymentOptions",!1),$.each(e.secondaryInsuranceproducts,function(t,a){if(a.isCheckedSecondaryInsurance&&(e.set("disablePaymentOptions",!1),!a.checkedSecondaryInsurance)){Komodo.Controls.MessageBoxController.show(kl.value("locale.customer:customerInformation.dccAcceptTermAndConditionTitle"),kl.value("locale.customer:customerInformation.dccAcceptTermAndCondition"),Komodo.Controls.MessageBoxAcceptDeclineButtons,e,"id5446673","").response=function(t){"accept"!==t&&(e.publishDeclineDCCTermsAndConditionsEvent(e.data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber),a.set("isCheckedSecondaryInsurance",!1))}}}),e.servicesNotSelected||e.set("disablePaymentOptions",!1)}.observes("secondaryInsuranceproducts.@each.isCheckedSecondaryInsurance"),selectedPaymentMadeOptionChanged:function(){switch(this.data.selectedPaymentMadeOption){case void 0:case null:case"":case"1":break;case"0":this.set("disablePaymentsOptions",!1)}}.observes("data.selectedPaymentMadeOption"),showPrimaryInsuranceproducts:function(){return void 0!==this.primaryInsuranceproducts&&this.primaryInsuranceproducts.length>0||(void 0!==this.primaryAccessServices&&this.primaryAccessServices.length>0||(void 0!==this.secondaryInsuranceproduct&&this.secondaryInsuranceproduct.length>0||void 0!==this.secondaryAccessServices&&this.secondaryAccessServices.length>0))}.property("primaryInsuranceproducts.length","primaryAccessServices.length","secondaryInsuranceproduct.length","secondaryAccessServices.length"),populateDetailsBasedOnDecoder:function(e,t,a,s,o){a.clear();var r=this;r.set("productInList",!1);var i=r.getValueFromConstant("ProductsConstants","productsConstants.products.MOBILE_PRODUCT_CATEGORY_ID");Komodo.Services.customerProfileService.getCustomerPersonalDetail().isDstv||(i=r.getValueFromConstant("ProductsConstants","productsConstants.products.GOTV_PRODUCT_CATEGORY_ID")),r.get("onlyPrincipalMobileProduct")&&(i=r.getValueFromConstant("ProductsConstants","productsConstants.products.MOBILE_PRODUCT_CATEGORY_ID")+","+r.getValueFromConstant("ProductsConstants","productsConstants.products.GOTV_PRODUCT_CATEGORY_ID")),$.each(t,function(t,n){switch(n){case"":case void 0:case null:break;default:switch(n.product.allowDevice){case"":case void 0:case null:break;default:var c=n.product.allowDevice.split(",");if(c instanceof Array||(c=[c]),r.set("productInList",!1),n.product.details.chargePeriod.indexOf(r.get("selectedChargePeriod"))>-1){$.each(c,function(t,c){if(c===e)if(!Komodo.UI.cacheDataService.isMobileDevice(s)&&!Komodo.UI.cacheDataService.isGotvDevice(s)||r.get("productInList"))r.get("productInList")||(r._customerClassSelected===r.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.CUSTOMERCLASS_RESIDENTIAL")&&r.get("isMnetAnalogueCustomer")&&r.addressDetails.country===r.getValueFromConstant("ProductsConstants","productsConstants.products.SOUTH_AFRICA")?n.product.details.productCategory!==r.getValueFromConstant("ProductsConstants","productsConstants.products.EXPLORA_PAYMENT_PLAN")?(a.pushObject(n),r.set("productInList",!0)):r.get("data.selectedPrimaryDecoder.isPrincipalPresent")&&n.product.details.productCategory===r.getValueFromConstant("ProductsConstants","productsConstants.products.EXPLORA_PAYMENT_PLAN")&&r.get("data.selectedPrimaryDecoder").agreemntTypeID===r.getValueFromConstant("ProductsConstants","productsConstants.products.EXPLORA_PAYMENT_PLAN_AGREEMENT")&&(a.pushObject(n),r.set("productInList",!0)):n.product.details.productCategory!==r.getValueFromConstant("ProductsConstants","productsConstants.products.EXPLORA_PAYMENT_PLAN")?n.product.details.productID!==r.getValueFromConstant("ProductsConstants","productsConstants.products.MNDCSN1")&&(a.pushObject(n),r.set("productInList",!0)):r.get("data.selectedPrimaryDecoder.isPrincipalPresent")&&n.product.details.productCategory===r.getValueFromConstant("ProductsConstants","productsConstants.products.EXPLORA_PAYMENT_PLAN")&&r.get("data.selectedPrimaryDecoder").agreemntTypeID===r.getValueFromConstant("ProductsConstants","productsConstants.products.EXPLORA_PAYMENT_PLAN_AGREEMENT")&&(a.pushObject(n),r.set("productInList",!0)));else if(Komodo.UI.cacheDataService.isMobileDevice(s))if(void 0!==n.product.allowProduct){var d=n.product.allowProduct.split();d instanceof Array||(d=[d]),$.each(d,function(e,t){return $.each(r.get("data.selectedSummaryProductData"),function(e,s){return void 0!==s.serviceUID&&$.each(s.serviceUID,function(e,s){
return!(s.UID===t&&i.indexOf(n.product.details.productCategory)>-1)||(a.pushObject(n),r.set("productInList",!0),!1)}),!r.get("productInList")}),!r.get("productInList")})}else(i.indexOf(n.product.details.productCategory)>-1||o)&&(a.pushObject(n),r.set("productInList",!0));else n.product.details.productCategory!==r.getValueFromConstant("ProductsConstants","productsConstants.products.INSURANCE_PRODUCT_CATEGORY")&&n.product.details.productCategory!==r.getValueFromConstant("ProductsConstants","productsConstants.products.ACCESS_SERVICE_PRODUCT_CATEGORY")&&(Ember.isEmpty(r.get("data.selectedPrimaryDecoder.servicesDetails"))||Ember.isEmpty(r.get("data.selectedPrimaryDecoder.servicesDetails.Service"))||n.product.details.productID!==r.getValueFromConstant("ProductsConstants","productsConstants.products.GOTV_VALUE_PRODUCT_ID")&&n.product.details.productID!==r.getValueFromConstant("ProductsConstants","productsConstants.products.GOTV_LITE_PRODUCT_ID")&&n.product.details.productID!==r.getValueFromConstant("ProductsConstants","productsConstants.products.MNET_DTT_PRODUCT_ID")&&n.product.details.productID!==r.getValueFromConstant("ProductsConstants","productsConstants.products.GOTV_VALUE_LESOTHO_PRODUCT_ID")&&n.product.details.productID!==r.getValueFromConstant("ProductsConstants","productsConstants.products.GOTV_LITE_LESOTHO_PRODUCT_ID"))&&Ember.isEmpty(r.get("data.selectedPrimaryDecoder.servicesDetails"))?r._customerClassSelected===r.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.CUSTOMERCLASS_RESIDENTIAL")&&r.get("isMnetAnalogueCustomer")&&r.addressDetails.country===r.getValueFromConstant("ProductsConstants","productsConstants.products.SOUTH_AFRICA")?"SECOND HAND"===r.data.selectedPrimaryDecoder.deviceStatusDescription||"AT CUSTOMER"===r.data.selectedPrimaryDecoder.deviceStatusDescription?(a.pushObject(n),r.set("productInList",!0)):"SOLD"===r.data.selectedPrimaryDecoder.deviceStatusDescription&&n.product.details.productID!==r.getValueFromConstant("ProductsConstants","productsConstants.products.MNET_DTT_PRODUCT_ID")&&(a.pushObject(n),r.set("productInList",!0)):(n.product.details.productID===r.getValueFromConstant("ProductsConstants","productsConstants.products.GOTV_LITE_PRODUCT_ID")||n.product.details.productID===r.getValueFromConstant("ProductsConstants","productsConstants.products.GOTV_LITE_LESOTHO_PRODUCT_ID"))&&"SECOND HAND"!==r.data.selectedPrimaryDecoder.deviceStatusDescription&&"AT CUSTOMER"!==r.data.selectedPrimaryDecoder.deviceStatusDescription||n.product.details.productID===r.getValueFromConstant("ProductsConstants","productsConstants.products.MNET_DTT_PRODUCT_ID")||(a.pushObject(n),r.set("productInList",!0)):(a.pushObject(n),r.set("productInList",!0))});break}}}})},splChekMOP:function(){var e=this;if("2"===e.defaultAccount.MethodOfPayment||"3"===e.defaultAccount.MethodOfPayment||"4"===e.defaultAccount.MethodOfPayment)return!0;Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),kl.value(e._localeBase+"splMOP"),Komodo.Controls.MessageBoxOkButton,e,"id54456673","warning").response=function(t){if("ok"===t)return $.each(e.get("productService"),function(e,t){Ember.set(t,"isChecked",!1)}),e.set("data.primaryProductSelection",void 0),!1}},splTermsAndCondition:function(){var e=this;Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"splTermsandConditionTitle"),kl.value(e._localeBase+"splTermsandCondition"),Komodo.Controls.MessageBoxAcceptDeclineButtons,e,"id54456673","alert").response=function(t){return"accept"===t||($.each(e.get("productService"),function(e,t){Ember.set(t,"isChecked",!1)}),e.set("data.primaryProductSelection",void 0),!1)}},populateAddOns:function(){var e=this;switch(e.set("data.addOnProductSelection",void 0),e.set("data.hdAddOnProductSelection",void 0),void 0!==e.get("productAddOn")&&e.get("productAddOn").length>0&&e.isMultipleAddonAllowed&&!e.get("data.selectedPrimaryDecoder.isMobileDecoder")&&$.each(e.get("productAddOn"),function(e,t){Ember.set(t,"isChecked",!1),Ember.set(t,"disableMultipleAddOnProducts",!1)}),e.set("data.selectedPaymentOfMethod",e.get("selectedChargePeriod")),e.get("data.primaryProductSelection")){case void 0:case null:case"":void 0===e.get("data.selectedPrimaryDecoder")&&e.dataService.clearAllProducts(e);break;default:e.set("servicesNotSelected",!1);var t=$.grep(e.productService,function(t){return t.product.details.productID===e.data.primaryProductSelection});if(!Ember.isEmpty(e.getValueFromConstant("ProductsConstants","productsConstants.products.SPL_PRODUCTID"))&&!Ember.isEmpty($.grep(e.getValueFromConstant("ProductsConstants","productsConstants.products.SPL_PRODUCTID").split(","),function(e){return e===t[0].product.details.productID}))){if(!e.splChekMOP())return;e.get("data.selectedPrimaryDecoder.isPrincipalPresent")||e.splTermsAndCondition()}if(t[0].product.details.chargePeriod.indexOf("1000")>-1)e.set("data.selectedPaymentOfMethod",e.get("selectedChargePeriod")),e.set("shortTermSubscriptionId",e.get("data.selectedShortTermSubscriptionId"));else switch(t.length){case 1:switch(t[0].product.details.chargePeriod.length){case 1:var a=[];if("12"===t[0].product.details.chargePeriod[0]?Ember.isEmpty(e.get("data.selectedPrimaryDecoder.termOfPayment"))||e.get("data.selectedPrimaryDecoder.termOfPayment")===t[0].product.details.chargePeriod[0]?a=[{title:kl.value(e._localeBase+"annually"),value:"12"}]:(!0,kl.value(e._localeBase+"annually")):a="3"!==t[0].product.details.chargePeriod[0]||t[0].product.details.productID!==e.getValueFromConstant("ProductsConstants","productsConstants.products.GOTV_LITE_PRODUCT_ID")&&t[0].product.details.productID!==e.getValueFromConstant("ProductsConstants","productsConstants.products.GOTV_LITE_LESOTHO_PRODUCT_ID")?[{title:kl.value(e._localeBase+"monthly"),value:"1"}]:[{title:kl.value(e._localeBase+"quarterly"),value:"3"}],!a.some(function(t){return t.value===e.get("selectedChargePeriod")}))return void Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"chargePeriod"+e.get("selectedPaymentOfMethodTitle")),kl.value(e._localeBase+"messgChargePeriodNotAllowed"+t[0].product.details.name),Komodo.Controls.MessageBoxOkButton,e,"id14456679","danger");e.set("data.selectedPaymentOfMethod",e.get("selectedChargePeriod"));break;case 2:var a=[];if(e._customerClassSelected===e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.CUSTOMERCLASS_SPECIALIST")&&e._customerTypeSelected!==e.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.PANELIST")?a=[{title:kl.value(e._localeBase+"monthly"),value:"1"}]:t[0].product.details.chargePeriod.contains("1")&&(a=[{title:kl.value(e._localeBase+"monthly"),value:"1"},{title:kl.value(e._localeBase+"annually"),value:"12"}]),!a.some(function(t){return t.value===e.get("selectedChargePeriod")}))return void Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"chargePeriod"+e.get("selectedPaymentOfMethodTitle")),kl.value(e._localeBase+"messgChargePeriodNotAllowed"+t[0].product.details.name),Komodo.Controls.MessageBoxOkButton,e,"id14456679","danger");e.set("data.selectedPaymentOfMethod",e.get("selectedChargePeriod"));break;case 3:var a=[];if(t[0].product.details.productID===e.getValueFromConstant("ProductsConstants","productsConstants.products.GOTV_LITE_PRODUCT_ID")&&(a=[{title:kl.value(e._localeBase+"monthly"),value:"1"},{title:kl.value(e._localeBase+"quarterly"),value:"3"},{title:kl.value(e._localeBase+"annually"),value:"12"}]),!a.some(function(t){return t.value===e.get("selectedChargePeriod")}))return void Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"chargePeriod"+e.get("selectedPaymentOfMethodTitle")),kl.value(e._localeBase+"messgChargePeriodNotAllowed"+t[0].product.details.name),Komodo.Controls.MessageBoxOkButton,e,"id14456679","danger");e.set("data.selectedPaymentOfMethod",e.get("selectedChargePeriod"))}}void 0===e.get("data.selectedPrimaryDecoder")||e.get("data.selectedPrimaryDecoder.isMobileDecoder")||(e.set("productAddOn",[]),e.set("productHdAddOn",[]),$.each(e.get("allProductAddOn"),function(t,a){switch(a){case"":case void 0:case null:break;default:switch(a.product.allowProduct){case"":case void 0:case null:break;default:if(void 0!==a.product.allowDevice){var s=a.product.allowDevice.split(","),o=!1;if($.each(s,function(t,a){return a!==e.get("data.selectedPrimaryDecoder.decoderModel")||(o=!0,!1)}),o){var r=a.product.allowProduct.split(",");$.each(r,function(t,s){return s===e.get("data.primaryProductSelection")?(e.productAddOn.addObject(a),!1):(e.get("data.selectedPrimaryDecoder.isMobileDecoder")&&$.each(e.get("data.selectedSummaryProductData"),function(t,o){void 0!==o.serviceUID&&$.each(o.serviceUID,function(t,o){return o.UID!==s||(e.productAddOn.addObject(a),!1)})}),!0)})}}}}}),e.get("data.selectedPrimaryDecoder.isPrincipalPresent")&&e.get("_allowHDAddOns")&&$.each(e.get("allHdAddOns"),function(t,a){switch(a){case"":case void 0:case null:break;default:switch(a.product.allowProduct){case"":case void 0:case null:break;default:if(void 0!==a.product.allowDevice){var s=a.product.allowDevice.split(","),o=!1;if($.each(s,function(t,a){return a!==e.get("data.selectedPrimaryDecoder.decoderModel")||(o=!0,!1)}),o){var r=a.product.allowProduct.split(",");$.each(r,function(t,s){return s!==e.get("data.primaryProductSelection")||(e.productHdAddOn.addObject(a),!1)})}}}}}))}}.observes("data.primaryProductSelection"),populateMobileAddOns:function(){var e=this;e.set("productAddOn",[]),e.set("productHdAddOn",[]);var t=0,a=0;$.each(e.get("allProductAddOn"),function(s,o){switch(o){case"":case void 0:case null:break;default:switch(o.product.allowProduct){case"":case void 0:case null:break;default:if(void 0!==o.product.allowDevice){var r=o.product.allowDevice.split(","),i=!1;if($.each(r,function(t,a){a===e.get("data.selectedPrimaryDecoder.decoderModel")&&(i=!0)}),i){var n=o.product.allowProduct.split(",");t=0,a=0,$.each(n,function(s,r){if(e.get("data.selectedPrimaryDecoder.isMobileDecoder")){var i;$.each(e.get("data.selectedSummaryProductData"),function(s,n){i=!0,void 0!==n.serviceUID&&$.each(n.serviceUID,function(t,s){return s.UID===r?(e.onlyPrincipalMobileProduct?(a=1*a+1,e.productService.addObject(o),e.data.primaryProductSelection=o.product.details.productID,e.disablePrincipalProducts=!0):e.productAddOn.addObject(o),i=!1,!1):i}),o.product.details.productID===n.addOnUID&&e.onlyPrincipalMobileProduct&&(t=1*t+1),n.addOnUID===r&&e.productAddOn.addObject(o)}),$.each(e.get("data.selectedproductData"),function(s,n){if(i=!0,n.servicesDetails){var c=n.servicesDetails.Service;n.isPrincipalPresent&&n.isPrimaryDecoder?$.each(c,function(t,s){return r===s.ProductDetail.UID&&(e.onlyPrincipalMobileProduct?(a=1*a+1,e.productService.addObject(o),e.data.primaryProductSelection=o.product.details.productID,e.disablePrincipalProducts=!0):e.productAddOn.addObject(o),i=!1),i}):n.isAddOnPresent&&$.each(c,function(a,s){return r!==s.ProductDetail.UID||e.onlyPrincipalMobileProduct?e.onlyPrincipalMobileProduct&&s.ProductDetail.UID===o.product.details.productID&&(t=1*t+1,i=!1):(i=!1,e.productAddOn.addObject(o)),i})}})}})}}}}e.onlyPrincipalMobileProduct&&a<=t&&Ember.isEmpty(e.get("data.selectedPrimaryDecoder").servicesDetails)&&(e.productService.removeObject(o),e.data.primaryProductSelection=void 0,e.disablePrincipalProducts=!1)})},deviceUsageChanged:function(){var e=this,t=!1;if(e.set("isActive",!1),$.each(e.get("data.selectedproductData"),function(a,s){Ember.isEmpty(s.addressDetails)||Ember.isEmpty(e.tempValue)||(s.addressDetails===e.tempValue&&s.agreemntTypeID===Komodo.AgreementTypes.HOLIDAY_HOME&&Ember.isEmpty(e.data.selectedPrimaryDecoder.agreemntUId)?t=!0:s.addressDetails.dlAddress===e.tempValue.dlAddress&&s.agreemntTypeID===Komodo.AgreementTypes.HOLIDAY_HOME&&Ember.isEmpty(e.data.selectedPrimaryDecoder.agreemntUId)?t=!0:s.addressDetails.dlAddress===e.tempValue.dlAddress&&s.agreemntTypeID===Komodo.AgreementTypes.HOLIDAY_HOME&&e.get("isOnlyOnePrincipalPackage")&&(t=!0))}),e.set("isHolidayHomeAndHasNoAgreementSA",t),e.get("isNewCustomer"))"1"===e.get("data.deviceAtHomeOrOtherLocation")?(e.set("isActive",!0),Komodo.Services.eventAggregator.publish("deviceAtAnotherLocation",null),e.set("deviceAtAnotherLocationWithData","false")):(e.loadCustomerAccountInfo(),e.loadCustomerDetails());else if(Ember.isEmpty(e.tempValue))Ember.isEmpty(e.tempValue)&&!Ember.isEmpty(e.get("data.selectedPrimaryDecoder"))&&Ember.isEmpty(e.get("data.selectedPrimaryDecoder.agreemntUId"))&&!Ember.isEmpty(e.get("hardwareAddressDetails"))&&e.set("tempValue",e.get("hardwareAddressDetails")[0]);else switch(e.tempValue.dlAddressKey){case"":case void 0:case null:break;case"Other":Komodo.Services.eventAggregator.publish("deviceAtAnotherLocation",null),e.set("isActive",!0),e.set("deviceAtAnotherLocationWithData",!1),e.set("deviceAtanotherLocationCalled",!1),e.set("data.deviceAtHomeOrOtherLocation","1");break;default:switch(e.loadCustomerAccountInfo(),e.addressDetails.country=e.tempValue.country,e.addressDetails.province=e.tempValue.province,e.addressDetails.city=e.tempValue.city,e.addressDetails.suburb=e.tempValue.suburb,e.addressDetails.postalCode=e.tempValue.postalCode,e.addressDetails.unit=e.tempValue.unit,e.addressDetails.building=e.tempValue.building,e.addressDetails.streetNo=e.tempValue.streetNo,e.addressDetails.streetName=e.tempValue.streetName,e.addressDetails.boxOrSuite=e.tempValue.boxOrSuite,e.addressDetails.isAddressOverride=e.tempValue.isAddressOverride,e.set("data.deviceAtHomeOrOtherLocation","0"),e.customerPaymentDetail.MethodOfPayment){case Komodo.MOP.AHV_PENDING:case Komodo.MOP.DEBIT_ORDER:e.get("debitOrderCount")>0?(e.get("customerPaymentDetail").set("MethodOfPayment",Komodo.MOP.DEBIT_ORDER),e.set("methodOfPaymentRB",Komodo.MOP.DEBIT_ORDER)):e.get("cashCount")>0&&(e.get("customerPaymentDetail").set("MethodOfPayment",Komodo.MOP.CASH),e.set("methodOfPaymentRB",Komodo.MOP.CASH));break;case Komodo.MOP.CASH:e.get("debitOrderCount")>0?(e.get("customerPaymentDetail").set("MethodOfPayment",Komodo.MOP.DEBIT_ORDER),e.set("methodOfPaymentRB",Komodo.MOP.DEBIT_ORDER)):(e.get("customerPaymentDetail").set("MethodOfPayment",Komodo.MOP.CASH),e.set("methodOfPaymentRB",Komodo.MOP.CASH))}}e.get("isMOPRequiredForHH")&&t?($.grep(e.get("data.selectedproductData"),function(e){return e.agreemntTypeID===Komodo.AgreementTypes.HOLIDAY_HOME&&e.paymentDetail.MethodOfPayment===Komodo.MOP.CASH}).length>0&&(e.get("customerPaymentDetail").set("MethodOfPayment",Komodo.MOP.CASH),e.set("methodOfPaymentRB",Komodo.MOP.CASH)),e.set("disablePaymentOptions",!0),e.set("data.selectedPaymentOfMethod","1")):!e.get("isMOPRequiredForHH")&&t?e.set("methodOfPaymentRB",Komodo.MOP.CASH):(e.get("debitOrderCount")>0?(Ember.isEmpty(e.get("customerPaymentDetail"))||e.get("customerPaymentDetail").set("MethodOfPayment",Komodo.MOP.DEBIT_ORDER),e.set("methodOfPaymentRB",Komodo.MOP.DEBIT_ORDER)):(Ember.isEmpty(e.get("customerPaymentDetail"))||e.get("customerPaymentDetail").set("MethodOfPayment",Komodo.MOP.CASH),e.set("methodOfPaymentRB",Komodo.MOP.CASH)),e.get("data.primaryProductSelection")&&e.set("disablePaymentOptions",!0))}.observes("tempValue","data.deviceAtHomeOrOtherLocation"),paymentOfMethodChanged:function(){var e=this,t=$.grep(e.get("chargePeriods"),function(t){return t.key===e.get("data.selectedPaymentOfMethod")});e.set("selectedChargePeriod",0===t.length?"1":t[0].key),e.set("selectedPaymentOfMethodTitle",0===t.length?kl.value(e._localeBase+"monthly"):t[0].value),e.set("isChargePeriodChanged",0!==t.length),e.set("showSTSPackages",!1),"1000"===e.get("selectedChargePeriod")&&(e.set("data.shortTermSubscriptionPackages",[]),e.set("showSTSPackages",!0),$.each(e.get("ShortTermSubscriptionPackages"),function(t,a){e.get("data.shortTermSubscriptionPackages").addObject({key:a.key,value:a.value})})),e.set("data.selectedShortTermSubscriptionId",void 0),"1000"!==e.get("selectedChargePeriod")?e.getProductsBasedOnDecoder():"1000"===e.get("selectedChargePeriod")&&e.getSTSProducts()}.observes("data.selectedPaymentOfMethod"),primaryDecoderChanged:function(){var e=this;e.set("showPaymentOfMethod",!Ember.isEmpty(e.get("data.selectedPrimaryDecoder"))),e.set("isChargePeriodChanged",!1),e.set("data.selectedPaymentOfMethod",null!==e.get("data.selectedPrimaryDecoder")&&void 0!==e.get("data.selectedPrimaryDecoder")?"1":"-1"),e.getProductsBasedOnDecoder()}.observes("data.selectedPrimaryDecoder"),selectionOfSTSPackage:function(){var e=this;"1000"===e.get("selectedChargePeriod")&&e.getSTSProducts()}.observes("data.selectedShortTermSubscriptionId"),getSTSProducts:function(){var e=this;if(e.set("productService",[]),e.set("productAddOn",[]),e.set("data.addOnProductSelection",void 0),e.set("disableSTSPackages",!1),!Ember.isEmpty(e.get("data.selectedShortTermSubscriptionId"))){e.getProductsBasedOnDecoder();for(var t=e.get("productService").length;t--;)0===$.grep(e.get("productService")[t].product.price,function(t){return t.stsId===e.get("data.selectedShortTermSubscriptionId")}).length&&e.get("productService").splice(t,1)}},actions:{deleteDevice:function(e){var t=this;Komodo.Controls.MessageBoxController.show(kl.value("controls.datagrid.deleteTitle"),kl.value("controls.datagrid.defaultDeleteText"),Komodo.Controls.MessageBoxYesNoButtons,t,"delItem1","warning").response=function(a){"yes"===a&&(t.get("data.selectedproductData").removeObject(e.content),t.set("primaryDevicesList",$.grep(t.primaryDevicesList,function(t){return!(t.decoderSerialNumber===e.content.decoderSerialNumber)})),$.each(t.primaryDevicesList,function(){t.secondaryDevicesListChanged(),t.disableChanged()}),$.each(t.xtraViewList,function(a,s){return s.decoderSerialNumber===e.content.decoderSerialNumber?(t.updatePrimaryDeviceList(s.secondaryDecoder.decoderModel,s.secondaryDecoder.decoderSerialNumber),void t.xtraViewList.removeObject(s)):s.secondaryDecoder.decoderSerialNumber===e.content.decoderSerialNumber?(t.updatePrimaryDeviceList(s.decoderModel,s.decoderSerialNumber),void t.xtraViewList.removeObject(s)):void 0}),$.each(t.get("data.selectedSummaryProductData"),function(a,s){return s.primaryDecoderSerialNumber===e.content.decoderSerialNumber?(t.updatePrimaryDeviceList(s.secondaryDecoderModel,s.secondaryDecoderSerialNumber),void t.get("data.selectedSummaryProductData").removeObject(s)):s.secondaryDecoderSerialNumber===e.content.decoderSerialNumber?(t.updatePrimaryDeviceList(s.primaryDecoderModel,s.primaryDecoderSerialNumber),void t.get("data.selectedSummaryProductData").removeObject(s)):void 0}),t.productAddOn.clear(),t.productHdAddOn.clear(),t.productService.clear(),t.set("showSecondaryDecodeServices",!1),t.set("showPrimaryDecodeServices",!1),t.set("disableAddButton",!1),0===$.grep(t.get("data.selectedproductData"),function(e){return!0===e.isExisting}).length?(t.showHideLinkUnlink(),t.set("disableLinkUnlink",!1)):(t.set("data.radioButtonLinkUnlink",[{title:kl.value(t._localeBase+"linkButton"),value:"0"}]),t.set("disableLinkUnlink",!1),t.set("linkUnlinkSelection",void 0)))}},searchHardware:function(){var e=this;!1!==e.canSubmitData(e,kl.value(this._localeBase+"useCaseTitle"),{showInModal:!0})&&(e.isDeviceAdded()||this.publishValidateHardwarePairingEvent(void 0,e.get("smartcardDecoderNo")))},linkHardware:function(e){var t=this;switch(e.content){case null:case void 0:Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),kl.value(t._localeBase+"messgLinkProductsPrimary"),Komodo.Controls.MessageBoxOkButtons,t,"id54456673","warning");break;default:if(t.set("deviceSelected",e.content),t.set("disableLinkUnlink",!0),t.set("showLinkedXtraviewDevices",!0),!Ember.empty(t.deviceSelected.secondaryDecoder)){if(t.deviceSelected.isPrincipalPresent&&t.deviceSelected.secondaryDecoder.isPrincipalPresent){Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),kl.value(t._localeBase+"messageBothPrinciplePresent"),Komodo.Controls.MessageBoxOkButtons,t,"id54456673","warning");break}if(!Ember.empty(t.deviceSelected.agreemntTypeID)&&!Ember.empty(t.deviceSelected.secondaryDecoder.agreemntTypeID)&&!(t.deviceSelected.agreemntTypeID!==Komodo.AgreementTypes.HOLIDAY_HOME&&t.deviceSelected.secondaryDecoder.agreemntTypeID!==Komodo.AgreementTypes.HOLIDAY_HOME||t.deviceSelected.agreemntTypeID===Komodo.AgreementTypes.HOLIDAY_HOME&&t.deviceSelected.secondaryDecoder.agreemntTypeID===Komodo.AgreementTypes.HOLIDAY_HOME)){Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),kl.value(t._localeBase+"messageHHAndOtherAggrementPresent"),Komodo.Controls.MessageBoxOkButtons,t,"id54456673","warning");break}}switch(t.deviceSelected.secondaryDecoder){case null:case void 0:Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),kl.value(t._localeBase+"messgLinkProducts"),Komodo.Controls.MessageBoxOkButtons,t,"id54456673","warning");break;default:t.xtraViewList.pushObject(t.deviceSelected),t.removeDecoder(t.deviceSelected),t.set("deviceSelected",void 0),t.set("data.selectedPrimaryDecoder",void 0)}}},unLinkHardware:function(e){var t=this,a=!1;t.set("primaryDevice",e.content),t.xtraViewList.forEach(function(e){e.decoderSerialNumber===t.primaryDevice.decoderSerialNumber&&(t.xtraViewList.removeObject(e),e.agreemntTypeID===Komodo.AgreementTypes.HOLIDAY_HOME&&e.secondaryDecoder.agreemntTypeID===Komodo.AgreementTypes.HOLIDAY_HOME&&(a=!0))}),$.grep(t.xtraViewList,function(e){return Ember.isEmpty(e.isInXtraView)}).length>0?t.set("disableLinkUnlink",!0):(t.set("disableLinkUnlink",!1),t.set("showLinkedXtraviewDevices",!1)),Ember.isEmpty(t.get("primaryDevice.isInXtraView"))||(t.primaryDevice.secondaryDecoder.servicesDetails=void 0,t.set("primaryDevice.secondaryDecoder.isPrincipalPresent",!1),t.set("primaryDevice.secondaryDecoder.isAddOnPresent",!1),t.set("primaryDevice.secondaryDecoder.isHdAddOnPresent",!1),t.set("primaryDevice.secondaryDecoder.isAccessPresent",!1),t.set("primaryDevice.secondaryDecoder.modifiable","Y"),t.set("primaryDevice.secondaryDecoder.principal",""),t.set("primaryDevice.secondaryDecoder.addOn",""),t.set("primaryDevice.secondaryDecoder.access","")),void 0!==t.primaryDevice.secondaryHardwareSerialnumber&&t.set("primaryDevice.modifiable","N"),t.updatePrimaryDeviceList(t.primaryDevice.secondaryDecoder.decoderModel,t.primaryDevice.secondaryDecoder.decoderSerialNumber),t.primaryDevice.set("secondaryDecoder",void 0),t.updatePrimaryDeviceList(t.primaryDevice.decoderModel,t.primaryDevice.decoderSerialNumber),Ember.isEmpty(t.primaryDevice.isInXtraView)||!0!==t.primaryDevice.isInXtraView?(t.set("disableSelectedPrimaryDecoder",!1),t.set("data.selectedPrimaryDecoder",void 0),t.set("primaryDevice",void 0)):(t.set("data.selectedPrimaryDecoder",$.grep(this.get("summaryOfDevicesList"),function(e){return e.decoderSerialNumber===t.primaryDevice.secondaryHardwareSerialnumber})[0]),t.set("disableSelectedPrimaryDecoder",!0),t.send("addDeviceIntoSummaryGrid",a),t.set("disableLinkUnlink",!0))},addDeviceIntoSummaryGrid:function(e){var t=this,a=!1,s=!1,o=0,r=0;if(!t.validateDevices()){var i;return i=t.get("isNewCustomer")?kl.value(t._localeBase+"useCaseTitle"):kl.value(t._localeBase+"useCaseTitleExistingCustomer"),void Komodo.Controls.MessageBoxController.show(i,kl.value(t._localeBase+"addDTHdecoder"),Komodo.Controls.MessageBoxOkButtons,t,"delItem1","warning")}if(r=$.grep(t.data.selectedproductData,function(e){return e.isPrincipalActive&&e.agreemntTypeID!==Komodo.AgreementTypes.HOLIDAY_HOME&&0===$.grep(t.data.selectedproductData,function(t){return e.decoderSerialNumber===t.secondaryHardwareSerialnumber}).length||e.isPrincipalActive&&!0===e.isHoliDayHomeSwitching}).length,Ember.isEmpty(t.get("holidaySwitchedDevices"))||(r+=t.get("holidaySwitchedDevices").length),o=$.grep(t.data.selectedproductData,function(e){return e.agreemntTypeID===Komodo.AgreementTypes.HOLIDAY_HOME&&!0===e.isPrincipalPresent&&0===$.grep(t.data.selectedproductData,function(t){return e.decoderSerialNumber===t.secondaryHardwareSerialnumber&&t.isHoliDayHome}).length}).length,o+=$.grep(t.data.selectedSummaryProductData,function(e){return e.customerPersonalDetails.residenceType===t.holidayHomeKey&&!Ember.isEmpty(e.serviceUID)}).length,$.each(t.get("data.selectedproductData"),function(e,s){Ember.isEmpty(s.addressDetails)||Ember.isEmpty(t.tempValue)||(s.addressDetails===t.tempValue&&s.agreemntTypeID===Komodo.AgreementTypes.HOLIDAY_HOME&&Ember.isEmpty(t.data.selectedPrimaryDecoder.agreemntUId)?a=!0:s.addressDetails.dlAddress===t.tempValue.dlAddress&&s.agreemntTypeID===Komodo.AgreementTypes.HOLIDAY_HOME&&Ember.isEmpty(t.data.selectedPrimaryDecoder.agreemntUId)?a=!0:s.addressDetails.dlAddress===t.tempValue.dlAddress&&s.agreemntTypeID===Komodo.AgreementTypes.HOLIDAY_HOME&&t.get("isOnlyOnePrincipalPackage")&&(a=!0))}),!0===e&&(a=!1),!Ember.isEmpty(t.get("data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber"))&&Ember.isEmpty(t.get("data.primaryProductSelection")))return void Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),kl.value(t._localeBase+"msgActivePrincipalReq"),Komodo.Controls.MessageBoxOkButtons,t,"id54456673","warning");if(t.get("deviceAtAnotherLocationWithData")&&t.customerPersonalDetails.residenceType===t.holidayHomeKey&&(s=!0),t.get("_removePrePaidHH")&&(void 0!==t.data.primaryProductSelection||t.primaryAccessServices.length>0)&&(!0===t.data.selectedPrimaryDecoder.isHoliDayHome||!0===s))return Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"messgTitleHolidayHome"),kl.value(t._localeBase+"messgHolidayHomePrePaidDisabled"),Komodo.Controls.MessageOKButtons,t,"id5446673","warning"),t.removeDeviceFromMainList(t.data.selectedPrimaryDecoder),t.set("data.selectedPrimaryDecoder.secondaryDecoder",void 0),t.set("data.selectedPrimaryDecoder",void 0),t.clearSelectedForOneDevice(),t.set("data.selctedWaitingForInstallationOption",void 0),void t.setDefaultvalues();if(!a&&!s||Ember.isEmpty(t.get("data.primaryProductSelection"))){if((a||s)&&Ember.isEmpty(t.get("data.primaryProductSelection"))&&!t.get("isHolidayHomeSwitchingAllowed"))return void Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"messgTitleHolidayHome"),kl.value(t._localeBase+"messgHolidayHomeSwitchingNotAllowed"),Komodo.Controls.MessageOKButtons,t,"id5446673","warning")}else if(o+=1,!t.get("isHolidayHomePrepaidAllowed"))return void Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"messgTitleHolidayHome"),kl.value(t._localeBase+"messgHolidayHomePrepaidNotAllowed"),Komodo.Controls.MessageOKButtons,t,"id5446673","warning");if(t.get("isOnlyOnePrincipalPackage")&&(t._customerTypeSelected===t.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.EMPLOYEE")||t._customerTypeSelected===t.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.SHAREHOLDERS")||t._customerTypeSelected===t.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.VIP")||t._customerTypeSelected===t.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.SALES_PROMOTERS")))if(a||s||Ember.isEmpty(t.get("data.primaryProductSelection"))||t.get("data.selectedPrimaryDecoder.isMobileDecoder")){if(a||s||Ember.isEmpty(t.get("data.primaryProductSelection"))||!t.get("data.selectedPrimaryDecoder.isMobileDecoder")){if(!a&&!s&&Ember.isEmpty(t.get("data.primaryProductSelection"))&&(count=0,$.each(this.data.selectedproductData,function(e,a){t.get("data.selectedPrimaryDecoder.decoderSerialNumber")!==a.decoderSerialNumber&&(a.isPrincipalPresent||!a.isPrimaryDecoder||Ember.isEmpty(a.agreemntTypeID)||a.agreemntTypeID===Komodo.AgreementTypes.HOLIDAY_HOME||count++)}),$.each(this.data.selectedSummaryProductData,function(e,t){Ember.isEmpty(t.services)&&count++}),$.grep(this.data.selectedproductData,function(e){return!Ember.isEmpty(e.servicesDetails)&&e.agreemntTypeID!==Komodo.AgreementTypes.HOLIDAY_HOME}).length>t.getValueFromConstant("ProductsConstants","productsConstants.products.PRINCIPAL_PRODUCT_COUNT")&&count++,count>t.getValueFromConstant("ProductsConstants","productsConstants.products.PRINCIPAL_PRODUCT_COUNT")&&(void 0===t.get("data.addOnProductSelection")||void 0===t.get("data.primaryProductSelection"))))return void Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"messgTitleDeviceInfoToGrid"),kl.value(t._localeBase+"maxAllowEmptyGeneralDevices"),Komodo.Controls.MessageBoxOkButton,t,"id14456679","danger")}else if(count=0,$.each(t.get("data.selectedproductData"),function(e,a){Komodo.UI.cacheDataService.isMobileDevice(a.decoderCpcType)&&t.get("data.selectedPrimaryDecoder.decoderSerialNumber")!==a.decoderSerialNumber&&a.isPrincipalPresent&&void 0!==a.UID&&count++}),$.each(t.get("data.selectedSummaryProductData"),function(e,t){!Komodo.UI.cacheDataService.isMobileDevice(t.decoderCpcType)||void 0===t.serviceUID&&void 0===t.addOnUID||count++}),$.grep(t.get("data.selectedSummaryProductData"),function(e){return!Ember.isEmpty(e.services)&&e.isMobileDecoder}).length>0&&count++,$.grep(t.data.selectedproductData,function(e){return!Ember.isEmpty(e.servicesDetails)&&e.agreemntTypeID!==Komodo.AgreementTypes.HOLIDAY_HOME&&e.isMobileDecoder}).length>t.getValueFromConstant("ProductsConstants","productsConstants.products.PRINCIPAL_PRODUCT_COUNT")&&count++,count>0&&(void 0!==t.get("data.addOnProductSelection")||void 0!==t.get("data.primaryProductSelection")))return void Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"messgTitleDeviceInfoToGrid"),kl.value(t._localeBase+"maxAllowMobileDeviceForEmployee"),Komodo.Controls.MessageBoxOkButton,t,"id14456679","danger")}else if(count=0,$.each(this.data.selectedproductData,function(e,a){t.get("data.selectedPrimaryDecoder.decoderSerialNumber")!==a.decoderSerialNumber&&(!a.isPrincipalPresent||!a.isPrimaryDecoder||t.get("data.addOnProductSelection")&&!t.get("data.primaryProductSelection")||t.get("data.hdAddOnProductSelection")&&!t.get("data.primaryProductSelection")||0!==$.grep(t.primaryAccessServices,function(e){return!e.checkedPrimaryAccessService&&e.isCheckedPrimaryAccessService}).length||0!==$.grep(t.primaryInsuranceproducts,function(e){return!e.checkedPrimaryInsurance&&e.isCheckedPrimaryInsurance}).length||0!==$.grep(t.secondaryAccessServices,function(e){return!e.checkedSecondaryAccessService&&e.isCheckedSecondaryAccessService}).length||0!==$.grep(t.secondaryInsuranceproducts,function(e){return!e.checkedSecondaryInsurance&&e.isCheckedSecondaryInsurance}).length||0!==$.grep(t.get("productAddOn"),function(e){return e.isChecked}).length||count++)}),$.each(this.data.selectedSummaryProductData,function(e,t){t.isPrincipalPresent&&void 0!==t.UID&&count++}),$.grep(t.get("data.selectedSummaryProductData"),function(e){return!Ember.isEmpty(e.services)}).length>0&&count++,count>0&&t.data.primaryProductSelection)return void Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"messgTitleDeviceInfoToGrid"),kl.value(t._localeBase+"maxAllowDeviceForEmployee"),Komodo.Controls.MessageBoxOkButton,t,"id14456679","danger");if(0===r&&a&&!t.get("data.selectedPrimaryDecoder.isGotvDecoder")&&!t.get("data.selectedPrimaryDecoder.isMobileDecoder"))return void Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"messgTitleHolidayHome"),kl.value(t._localeBase+"messgHolidayHomePrinciple"),Komodo.Controls.MessageOKButtons,t,"id5446673","warning");if(r>0&&((a||s)&&o>r*t.getValueFromConstant("ProductsConstants","productsConstants.products.HOLIDAYHOME_NO_PER_GEN")||o>=r*t.getValueFromConstant("ProductsConstants","productsConstants.products.HOLIDAYHOME_NO_PER_GEN")&&t.get("data.selectedPrimaryDecoder.isHoliDayHome")&&!Ember.isEmpty(t.get("data.primaryProductSelection"))&&Ember.isEmpty(t.get("data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber"))&&$.grep(t.get("data.selectedproductData"),function(e){return e.agreemntTypeID===Komodo.AgreementTypes.HOLIDAY_HOME&&e.isPrincipalPresent
}).length>=r*t.getValueFromConstant("ProductsConstants","productsConstants.products.HOLIDAYHOME_NO_PER_GEN"))){if("zaf"===Komodo.Services.queryService.getSelectedCountryId()){Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"messgTitleHolidayHome"),kl.value(t._localeBase+"messgHolidayHomeMorePrinciple"),Komodo.Controls.MessageOKButtons,t,"id5446673","warning");return}Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"messgTitleHolidayHome"),kl.value(t._localeBase+"messgHolidayHomeMorePrincipleAfrica"),Komodo.Controls.MessageOKButtons,t,"id5446673","warning")}else if((a||s)&&o>r*t.getValueFromConstant("ProductsConstants","productsConstants.products.HOLIDAYHOME_NO_PER_GEN")||o>=r*t.getValueFromConstant("ProductsConstants","productsConstants.products.HOLIDAYHOME_NO_PER_GEN")&&t.get("data.selectedPrimaryDecoder.isHoliDayHome")&&!Ember.isEmpty(t.get("data.primaryProductSelection"))&&Ember.isEmpty(t.get("data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber"))&&$.grep(t.get("data.selectedproductData"),function(e){return e.agreemntTypeID===Komodo.AgreementTypes.HOLIDAY_HOME&&e.isPrincipalPresent}).length>=r*t.getValueFromConstant("ProductsConstants","productsConstants.products.HOLIDAYHOME_NO_PER_GEN")){if("zaf"===Komodo.Services.queryService.getSelectedCountryId()){Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"messgTitleHolidayHome"),kl.value(t._localeBase+"messgHolidayHomeMorePrinciple"),Komodo.Controls.MessageOKButtons,t,"id5446673","warning");return}Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"messgTitleHolidayHome"),kl.value(t._localeBase+"messgHolidayHomeMorePrincipleAfrica"),Komodo.Controls.MessageOKButtons,t,"id5446673","warning")}else{if("12"===t.get("data.selectedPaymentOfMethod")&&t.get("data.selectedPrimaryDecoder").agreemntTypeID===Komodo.AgreementTypes.HOLIDAY_HOME)return void Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"messgTitleHolidayHome"),kl.value(t._localeBase+"messgHolidayHomeMonthlyNotAllowed"),Komodo.Controls.MessageBoxOkButton,t,"id23454673","danger");if(t.customerPersonalDetails.residenceType!==t.holidayHomeKey||(new Date).getDate()===t.get("data.activationDate").getDate()&&(new Date).getMonth()===t.get("data.activationDate").getMonth()&&(new Date).getFullYear()===t.get("data.activationDate").getFullYear())if(!a||t.get("data.selectedPrimaryDecoder.isGotvDecoder")||t.get("data.selectedPrimaryDecoder.isMobileDecoder")){if(s&&t.data.primaryProductSelection===t.getValueFromConstant("ProductsConstants","productsConstants.products.MNDCSN1")){Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"messgTitleHolidayHome"),kl.value(t._localeBase+"messgHHMNDCSN1Activation"),Komodo.Controls.MessageOKButtons,t,"id5446673","warning");return}if(a&&t.get("data.selectedPrimaryDecoder.isGotvDecoder")){Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"messgTitleHolidayHome"),kl.value(t._localeBase+"messgHHAddrNotAllowedForGotvBundle"),Komodo.Controls.MessageOKButtons,t,"id5446673","warning");return}if(t.get("data.selectedPrimaryDecoder").agreemntTypeID!==Komodo.AgreementTypes.HOLIDAY_HOME||(new Date).getDate()===t.get("data.activationDate").getDate()&&(new Date).getMonth()===t.get("data.activationDate").getMonth()&&(new Date).getFullYear()===t.get("data.activationDate").getFullYear())t.send("commitDeviceIntoSummaryGrid");else{var n=Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"messgTitleHolidayHome"),kl.value(t._localeBase+"messgHHFutureActivation"),Komodo.Controls.MessageBoxYesNoButtons,t,"delItem1","warning");n.response=function(e){"yes"===e&&(t.set("data.activationDate",new Date),t.send("commitDeviceIntoSummaryGrid"))}}}else{var c=Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"messgTitleHolidayHome"),kl.value(t._localeBase+"messgHHAgreement"),Komodo.Controls.MessageBoxYesNoButtons,t,"delItem1","warning");c.response=function(e){if("yes"===e)if(t.customerPersonalDetails.residenceType=t.holidayHomeKey,t.get("isMOPRequiredForHH")?$.grep(t.get("data.selectedproductData"),function(e){return e.agreemntTypeID===Komodo.AgreementTypes.HOLIDAY_HOME&&e.paymentDetail.MethodOfPayment===Komodo.MOP.CASH}).length>0?(t.get("customerPaymentDetail").set("MethodOfPayment",Komodo.MOP.CASH),t.set("methodOfPaymentRB",Komodo.MOP.CASH),t.mappPaymentDetails(t.get("customerPaymentDetail"),t.get("customerPaymentDetail"))):t.mappPaymentDetails(t.get("defaultAccount"),t.get("customerPaymentDetail")):t.get("isMOPRequiredForHH")||t.mappPaymentDetails(t.get("defaultAccount"),t.get("customerPaymentDetail")),(new Date).getDate()!==t.get("data.activationDate").getDate()||(new Date).getMonth()!==t.get("data.activationDate").getMonth()||(new Date).getFullYear()!==t.get("data.activationDate").getFullYear()){var a=Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"messgTitleHolidayHome"),kl.value(t._localeBase+"messgHHFutureActivation"),Komodo.Controls.MessageBoxYesNoButtons,t,"delItem1","warning");a.response=function(e){"yes"===e&&(t.set("data.activationDate",new Date),t.send("commitDeviceIntoSummaryGrid"))}}else{if(t.data.primaryProductSelection===t.getValueFromConstant("ProductsConstants","productsConstants.products.MNDCSN1")){Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"messgTitleHolidayHome"),kl.value(t._localeBase+"messgHHMNDCSN1Activation"),Komodo.Controls.MessageOKButtons,t,"id5446673","warning");return}t.send("commitDeviceIntoSummaryGrid")}}}else{var n=Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"messgTitleHolidayHome"),kl.value(t._localeBase+"messgHHFutureActivation"),Komodo.Controls.MessageBoxYesNoButtons,t,"delItem1","warning");n.response=function(e){"yes"===e&&(t.set("data.activationDate",new Date),t.send("commitDeviceIntoSummaryGrid"))}}}},commitDeviceIntoSummaryGrid:function(){this.set("services",void 0),this.set("serviceUid",[]);var e,t="",a="",s=this,o=!1,r=0,i=void 0;this.set("offerUIDs",[]),Ember.empty(s.deviceAtAnotherLocationData)||(s.deviceAtAnotherLocationData.residenceType=void 0,s.deviceAtAnotherLocationData.isSwitchingDevice=void 0);var n=Ember.Object.extend({principalProductPaymentDetails:void 0,principalProductAddress:void 0,principalProductPersonalDetails:void 0,principalProductAwaitingInstallationDetails:void 0}).create();if(!1!==s.canSubmitData(s.data,kl.value(s._localeBase+"useCaseTitle"),{showInModal:!0})){switch(s.get("data.selectedPrimaryDecoder")){case void 0:case null:case"":return void Komodo.Controls.MessageBoxController.show(kl.value(s._localeBase+"messgTitleDeviceInfoToGrid"),kl.value(s._localeBase+"messgDeviceInfoToGrid"),Komodo.Controls.MessageBoxOkButton,s,"id14456673","danger")}switch(s.get("data.selectedPrimaryDecoder").agreemntTypeID){case Komodo.AgreementTypes.HOLIDAY_HOME:s.customerPersonalDetails.residenceType=s.holidayHomeKey}var c="";(void 0!==s.get("data.primaryProductSelection")&&""!==s.get("data.primaryProductSelection")&&!s.disablePrincipalProducts||!Ember.isEmpty(s.get("data.primaryProductSelection"))&&!s.get("data.selectedPrimaryDecoder.isPrincipalPresent"))&&($.each(s.productService,function(e,t){if(s.get("data.primaryProductSelection")===t.product.details.productID){c+=t.product.details.name;var a={UID:t.product.details.productID,Name:t.product.details.name,ShortTermSubscriptionId:s.get("shortTermSubscriptionId")};return s.serviceUid.pushObject(a),r++,!1}return!0}),$.merge(s.offerUIDs,s.serviceUid),s.set("services",c)),s.get("onlyPrincipalMobileProduct")&&s.get("data.selectedPrimaryDecoder.isMobileDecoder")&&!s.get("data.selectedPrimaryDecoder.isPrincipalPresent")&&!s.get("data.selectedPrimaryDecoder.isAddOnPresent")&&($.each(s.allProductAddOn,function(e,o){return s.get("data.primaryProductSelection")!==o.product.details.productID||(t=o.product.details.name,a=o.product.details.productID,r++,c="",!1)}),o=!0,s.set("services",c)),s.get("isMultipleAddonAllowed")?(s.set("multipleProductAddOnNames",[]),s.set("multipleProductAddOnUIDs",[]),$.each(s.productAddOn,function(e,t){!0===t.isChecked&&!1===t.disableMultipleAddOnProducts&&(s.isMobileAddOn(t.product.details.productCategory)&&(o=!0),s.multipleProductAddOnNames.push(t.product.details.name),s.multipleProductAddOnUIDs.push({UID:t.product.details.productID,Name:t.product.details.name}))}),$.merge(s.offerUIDs,s.multipleProductAddOnUIDs)):Ember.isEmpty(s.get("data.addOnProductSelection"))||s.get("disableAddOnProducts")||($.each(s.productAddOn,function(e,i){return s.get("data.addOnProductSelection")!==i.product.details.productID||(s.isMobileAddOn(i.product.details.productCategory)&&(o=!0),t=i.product.details.name,a=i.product.details.productID,r++,!1)}),Ember.isEmpty(a)||$.merge(s.offerUIDs,[{UID:a,Name:t}])),void 0===s.get("data.hdAddOnProductSelection")||""===s.get("data.hdAddOnProductSelection")||s.get("disableHdAddOnProducts")||($.each(s.productHdAddOn,function(t,a){return s.get("data.hdAddOnProductSelection")!==a.product.details.productID||(e=a.product.details.name,i=a.product.details.productID,r++,!1)}),Ember.isEmpty(i)||$.merge(s.offerUIDs,[{UID:i,Name:e}]));var d,l=Komodo.Models.AssociateProductsSummary.create();if(l.set("isDisconnected",s.get("data.selectedPrimaryDecoder.isDisconnected")),o){if(s.get("isMultipleAddonAllowed")&&s.multipleProductAddOnUIDs.length>0){if(!s.validateMobileRules(s.multipleProductAddOnUIDs[0].UID,s.multipleProductAddOnUIDs[0].Name,n))return}else if(!s.validateMobileRules(a,t,n))return;l.set("activationDate",s.get("addOnActivationDate")),l.set("customerPaymentDetail",n.principalProductPaymentDetails),l.set("addressDetails",n.principalProductAddress),l.set("customerPersonalDetails",n.principalProductPersonalDetails),l.set("isAwaitingInstallation",n.principalProductAwaitingInstallationDetails)}else{var u=s.data.activationDate.getDate(),h=s.data.activationDate.getMonth()+1,m=s.data.activationDate.getFullYear();u<10&&(u="0"+u),h<10&&(h="0"+h),d=u+"-"+h+"-"+m,l.set("activationDate",d),Ember.isEmpty(s.get("data.selectedPrimaryDecoder").agreemntUId)||Ember.isEmpty(s.get("data.selectedPrimaryDecoder").agreemntTypeID)||s.get("data.selectedPrimaryDecoder").agreemntTypeID!==Komodo.AgreementTypes.HOLIDAY_HOME?(s.get("residenceTypeForHH")===s.holidayHomeKey&&s.get("isMOPRequiredForHH")&&s.get("customerPaymentDetail").set("AHVStatus",Komodo.AHVOverride.AHV_Override),l.set("customerPaymentDetail",s.dataService.getPaymentDetails(s.customerPaymentDetail))):(s.mappPaymentDetails(s.get("data.selectedPrimaryDecoder").paymentDetail,s.get("customerPaymentDetail")),l.set("customerPaymentDetail",s.dataService.getPaymentDetails(s.customerPaymentDetail))),l.set("addressDetails",s.dataService.getAddressDetails(s.addressDetails)),l.set("customerPersonalDetails",s.dataService.getPersonalDetails(s.customerPersonalDetails)),l.set("isAwaitingInstallation",s.data.selctedWaitingForInstallationOption)}l.set("chargePeriod",s.get("selectedPaymentOfMethodTitle"));var p,v="",f="",g=!1;if(void 0!==s.get("data.selectedPrimaryDecoder")){if(p=s.data.selectedPrimaryDecoder.decoderSerialNumber,void 0!==s.get("data.selectedPrimaryDecoder.secondaryDecoder")){var y=!1;s.primaryDevicesList.forEach(function(e){e.decoderSerialNumber===s.get("data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber")&&(y=!0)}),!1===y&&(g=!0,r=1*r+10,p=p+" - "+s.get("data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber"))}switch(l.set("primaryDecoderType",s.get("data.selectedPrimaryDecoder.decoderType")),l.set("primaryDecoderModel",s.get("data.selectedPrimaryDecoder.decoderModel")),l.set("primaryDecoderSerialNumber",s.get("data.selectedPrimaryDecoder.decoderSerialNumber")),l.set("primaryDecoderSmartcardType",s.get("data.selectedPrimaryDecoder.smartcardType")),l.set("primaryDecoderSmartcardSerialNumber",s.get("data.selectedPrimaryDecoder.smartcardSerialNumber")),l.set("primaryDecoderCpcType",s.get("data.selectedPrimaryDecoder.decoderCpcType")),l.set("primaryDecoderUID",s.get("data.selectedPrimaryDecoder.UID")),l.set("primaryDecoderServiceDetails",s.get("data.selectedPrimaryDecoder.servicesDetails")),l.set("isXtraView",g),s.primaryInsuranceproducts.length){case 0:case void 0:case null:case"":break;default:$.each(s.primaryInsuranceproducts,function(e,t){if(t.isCheckedPrimaryInsurance&&!t.checkedPrimaryInsurance)return l.set("primaryDecoderInsurance",!0),r++,void(v=s.get("data.selectedPrimaryDecoder.decoderSerialNumber"))})}switch(s.primaryAccessServices.length){case 0:case void 0:case null:case"":break;default:$.each(s.primaryAccessServices,function(e,t){if(t.isCheckedPrimaryAccessService&&!t.checkedPrimaryAccessService||t.isCheckedPrimaryAccessService&&s.get("isBOMDevice"))return l.set("primaryDecoderAccessServicePresent",!0),l.set("primaryDecoderAccessServiceName",t.product.details.name),l.set("primaryDecoderAccessService",t.product.details.productID),r++,void(f=s.get("data.selectedPrimaryDecoder.decoderSerialNumber"))}),Ember.isEmpty(l.get("primaryDecoderAccessService"))||$.merge(s.offerUIDs,[{UID:l.get("primaryDecoderAccessService"),Name:l.get("primaryDecoderAccessServiceName")}])}if(g){switch(s.secondaryInsuranceproducts.length){case 0:case void 0:case null:case"":break;default:$.each(s.secondaryInsuranceproducts,function(e,t){if(t.isCheckedSecondaryInsurance&&!t.checkedSecondaryInsurance)return l.set("secondaryDecoderInsurance",!0),r++,void(v=""===v?s.get("data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber"):v+" - "+s.get("data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber"))})}switch(s.secondaryAccessServices.length){case 0:case void 0:case null:case"":break;default:$.each(s.secondaryAccessServices,function(e,t){if(t.isCheckedSecondaryAccessService&&!t.checkedSecondaryAccessService)return l.set("secondaryDecoderAccessServicePresent",!0),l.set("secondaryDecoderAccessServiceName",t.product.details.name),l.set("secondaryDecoderAccessService",t.product.details.productID),r++,void(f=""===f?s.data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber:f+" - "+s.data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber)})}l.set("secondaryDecoderType",s.data.selectedPrimaryDecoder.secondaryDecoder.decoderType),l.set("secondaryDecoderSerialNumber",s.data.selectedPrimaryDecoder.secondaryDecoder.decoderSerialNumber),l.set("secondarySmartcardType",s.data.selectedPrimaryDecoder.secondaryDecoder.smartcardType),l.set("secondarySmartcardSerialNumber",s.data.selectedPrimaryDecoder.secondaryDecoder.smartcardSerialNumber),l.set("secondaryDecoderCpcType",s.data.selectedPrimaryDecoder.secondaryDecoder.decoderCpcType),l.set("secondaryDecoderUID",s.data.selectedPrimaryDecoder.secondaryDecoder.UID),l.set("secondaryDecoderModel",s.data.selectedPrimaryDecoder.secondaryDecoder.decoderModel),l.set("secondaryDecoderServiceDetails",s.data.selectedPrimaryDecoder.secondaryDecoder.servicesDetails)}else l.set("secondaryDecoderInsurance",void 0),l.set("secondaryDecoderAccessService",void 0),l.set("secondaryDecoderType",void 0),l.set("secondaryDecoderSerialNumber",void 0),l.set("secondarySmartcardType",void 0),l.set("secondarySmartcardSerialNumber",void 0);void 0!==s.services&&""!==s.services?(l.set("services",s.services),l.set("serviceUID",s.serviceUid)):(l.set("services",void 0),l.set("serviceUID",void 0)),l.set("addOn",void 0),l.set("addOnUID",void 0),l.set("hdAddOnUID",void 0),l.set("hdAddOn",void 0),l.set("multipleOfferBOM",void 0);var D=t;if(s.get("isMultipleAddonAllowed")?(l.set("addOn",s.multipleProductAddOnNames),l.set("addOnDisplay",s.multipleProductAddOnNames),l.set("addOnUID",s.multipleProductAddOnUIDs)):""!==a?(void 0!==i&&(D=D+","+e,l.set("hdAddOn",e),l.set("hdAddOnUID",i)),l.set("addOn",t),l.set("addOnDisplay",D),l.set("addOnUID",a)):void 0!==i&&(l.set("hdAddOnUID",i),l.set("hdAddOn",e),l.set("addOnDisplay",e)),s.get("isBOMDevice")){s.set("multipleOffer",[]);for(var b=0;b<s.get("data.selectedPrimaryDecoder").servicesDetails.Service.length;b++){for(var C=!1,P=0;P<s.offerUIDs.length;P++)if(s.offerUIDs[P].UID===s.get("data.selectedPrimaryDecoder").servicesDetails.Service[b].UID){C=!0;break}C||s.multipleOffer.pushObject(s.get("data.selectedPrimaryDecoder").servicesDetails.Service[b])}l.set("multipleOfferBOM",s.multipleOffer)}if(l.set("weightage",r),!s.isNewProductSelected(s.get("data.selectedPrimaryDecoder"),l))return void Komodo.Controls.MessageBoxController.show(kl.value(s._localeBase+"useCaseTitle"),kl.value(s._localeBase+"alreadyExistingPackages"),Komodo.Controls.MessageBoxOkButton,s,"id23456683","danger");if(!s.get("isOnlyOnePrincipalPackage"))if(s._customerTypeSelected!==s.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.EMPLOYEE")||s.get("data.selectedPrimaryDecoder.isMobileDecoder")){if(s._customerTypeSelected===s.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.EMPLOYEE")&&s.get("data.selectedPrimaryDecoder.isMobileDecoder")&&(r=0,$.each(s.get("data.selectedproductData"),function(e,t){Komodo.UI.cacheDataService.isMobileDevice(t.decoderCpcType)&&s.get("data.selectedPrimaryDecoder.decoderSerialNumber")!==t.decoderSerialNumber&&t.isPrincipalPresent&&void 0!==t.UID&&r++}),$.each(s.get("data.selectedSummaryProductData"),function(e,t){(Komodo.UI.cacheDataService.isMobileDevice(t.decoderCpcType)&&void 0!==t.serviceUID||void 0!==t.addOnUID)&&r++}),$.grep(s.get("data.selectedSummaryProductData"),function(e){return!Ember.isEmpty(e.services)}).length>0&&r++,r>0&&(void 0!==s.get("data.addOnProductSelection")||void 0!==s.get("data.primaryProductSelection"))))return void Komodo.Controls.MessageBoxController.show(kl.value(s._localeBase+"messgTitleDeviceInfoToGrid"),kl.value(s._localeBase+"maxAllowMobileDeviceForEmployee"),Komodo.Controls.MessageBoxOkButton,s,"id14456679","danger")}else if(r=0,$.each(this.data.selectedproductData,function(e,t){s.get("data.selectedPrimaryDecoder.decoderSerialNumber")!==t.decoderSerialNumber&&t.isPrincipalPresent&&t.isPrimaryDecoder&&void 0!==l.serviceUID&&r++}),$.each(this.data.selectedSummaryProductData,function(e,t){t.isPrincipalPresent&&void 0!==t.UID&&r++}),$.grep(s.get("data.selectedSummaryProductData"),function(e){return!Ember.isEmpty(e.services)}).length>0&&r++,r>0&&s.data.primaryProductSelection)return void Komodo.Controls.MessageBoxController.show(kl.value(s._localeBase+"messgTitleDeviceInfoToGrid"),kl.value(s._localeBase+"maxAllowDeviceForEmployee"),Komodo.Controls.MessageBoxOkButton,s,"id14456679","danger");l.set("display",p),l.set("displayInsurance",v),l.set("displayAccessService",f),l.set("isViewAtHome",!0),l.set("deviceAtHomeOrOtherLocation",s.get("data.deviceAtHomeOrOtherLocation")),s.addSummaryGridRow(l),s.set("isDisableActiveButton",!1),g?s.set("disableSelectedPrimaryDecoder",!0):s.set("disableSelectedPrimaryDecoder",!1),s.removeDeviceFromMainList(s.data.selectedPrimaryDecoder),s.set("data.selectedPrimaryDecoder.secondaryDecoder",void 0),s.set("data.selectedPrimaryDecoder",void 0),s.clearSelectedForOneDevice(),s.set("data.selctedWaitingForInstallationOption",void 0),s.loadCustomerAccountInfo(),s.loadCustomerDetails(),s.setDefaultvalues()}}},associateProducts:function(){if(this.set("sessionToken",void 0),void 0===this.data.customerRefNo||""===this.data.customerRefNo)return void Komodo.Controls.MessageBoxController.show(kl.value(this._localeBase+"useCaseTitle"),kl.value(this._localeBase+"messgCustomerNoValidation"),Komodo.Controls.MessageBoxOkButton,this,"id104456673","danger");this.data.selectedSummaryProductData.length>0?(this.set("countOfEmptyDecoders",this.countEmptyDecoders()),this.sortSelectedSummaryProducts(),this.set("isDisableActiveButton",!0),this.publishAssociateProductsEvent()):Komodo.Controls.MessageBoxController.show(kl.value(this._localeBase+"useCaseTitle"),kl.value(this._localeBase+"messgProductToLinkvalidation"),Komodo.Controls.MessageBoxOkButton,this,"id145456673","danger")},viewDetails:function(){this.viewDetails()},viewDecoderDetail:function(e){this.viewDecoderDetail(e)},gridDelete:function(e){var t=this,a=e.content;Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),kl.value(t._localeBase+"deleteDevice"),Komodo.Controls.MessageBoxYesNoButtons,t,"id54456673","warning").response=function(e){if("yes"===e){t.dataService.clearAllProducts(t);var s=t.isDecoderRemovedFromExistingPair(a.primaryDecoderSerialNumber,!0);void 0!==s&&null!==s?(t.deleteDeviceFromSummaryGrid(s.decoderSerialNumber,a.primaryDecoderSerialNumber,a.serviceUID),s.get("isPrincipalPresent")&&s.get("isAddOnPresent")&&s.get("isHdAddOnPresent")&&s.get("isInsurenceStatusPresent")&&(s.get("isAccessPresent")||!s.get("isAccessPresent")&&!s.get("hasAccessService"))?s.set("modifiable","N"):s.set("modifiable","Y")):t.deleteDeviceFromSummaryGrid(a.primaryDecoderSerialNumber,a.secondaryDecoderSerialNumber,a.serviceUID),t.get("data.selectedSummaryProductData").removeObject(a),t.set("data.selectedPrimaryDecoder",void 0),t.set("disableSelectedPrimaryDecoder",!1),0===t.get("data.selectedSummaryProductData").length&&t.set("isDisableActiveButton",!0)}}},clearall:function(){var e=this;$.each(e.xtraViewList,function(t,a){Ember.isEmpty(a.isInXtraView)&&(e.updatePrimaryDeviceList(a.secondaryDecoder.decoderModel,a.secondaryDecoder.decoderSerialNumber),e.updatePrimaryDeviceList(a.decoderModel,a.decoderSerialNumber))}),e.set("xtraViewList",$.grep(e.xtraViewList,function(e){return!Ember.isEmpty(e.isInXtraView)})),$.each(e.get("data.selectedSummaryProductData"),function(t,a){var s=e.isDecoderRemovedFromExistingPair(a.primaryDecoderSerialNumber,!0);void 0!==s&&null!==s?(e.deleteDeviceFromSummaryGrid(s.decoderSerialNumber,a.secondaryDecoderSerialNumber,void 0),s.get("isPrincipalPresent")&&s.get("isAddOnPresent")&&s.get("isHdAddOnPresent")&&s.get("isInsurenceStatusPresent")&&(s.get("isAccessPresent")||!s.get("isAccessPresent")&&!s.get("hasAccessService"))?s.set("modifiable","N"):s.set("modifiable","Y")):e.deleteDeviceFromSummaryGrid(a.primaryDecoderSerialNumber,a.secondaryDecoderSerialNumber,void 0)}),e.get("data.selectedSummaryProductData").clear(),e.set("data.selectedPrimaryDecoder",void 0),e.set("data.primaryDecoder",void 0),e.set("data.secondaryDecoder",void 0),e.clearInsuranceAndAccessServiceCheckBox(),e.set("showSecondaryDecodeServices",!1),e.set("showPrimaryDecodeServices",!1),e.set("linkUnlinkSelection",void 0),e.set("showLink",!1),e.set("showUnlink",!1),e.set("disableLinkUnlink",!1),e.set("disableSelectedPrimaryDecoder",!1),e.set("showLinkedXtraviewDevices",!1),e.set("showPaymentOfMethod",!1),e.set("showSTSPackages",!1),e.showHideLinkUnlink(),$.grep(e.get("data.selectedproductData"),function(e){return!0===e.isExisting}).length>0&&(e.set("data.radioButtonLinkUnlink",[{title:kl.value(e._localeBase+"linkButton"),value:"0"}]),e.set("disableLinkUnlink",!1),e.set("linkUnlinkSelection",void 0)),e.productAddOn.clear(),e.productHdAddOn.clear(),e.productService.clear()},activateMultipleAddon:function(e){var t=this,a=e._context;if(t.get("isMultipleAddonAllowed"))switch($.grep(t.get("productAddOn"),function(e){return e.isChecked&&!t.getValueFromConstant("ProductsConstants","productsConstants.products.FREE_ADDON_CATEGORY").split(",").contains(e.product.details.productCategory)}).length>2&&($.each(t.get("productAddOn"),function(e,t){t.product.details.productID===a.product.details.productID&&Ember.set(t,"isChecked",!1)}),Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),kl.value(t._localeBase+"maxBilliableAddonsAllowed"),Komodo.Controls.MessageBoxOkButtons,t,"id24456673","warning")),t.get("data.selectedPrimaryDecoder")){case null:case void 0:case"":break;default:if(!0===a.isChecked&&t.get("data.selectedPrimaryDecoder.isMobileDecoder")){t.set("data.primaryProductSelection",void 0),t.servicesNotSelectedChanged(),t.set("servicesNotSelected",!1);break}}}},isNewProductSelected:function(e,t){var a=this,s=!1;if(e.agreemntTypeID===Komodo.AgreementTypes.HOLIDAY_HOME)return!0;if(void 0===e.secondaryHardwareSerialnumber&&void 0!==a.get("data.selectedPrimaryDecoder.secondaryDecoder"))return!0;if(void 0===e.agreemntUId||a.isDecoderRemovedFromExistingPair(e.decoderSerialNumber,!1))return!0;if(e.get("isMobileDecoder"))switch(e.get("productLength")){case 0:return!0;case 1:return!(!a.get("onlyPrincipalMobileProduct")||e.get("isInsurenceStatusPresent")||!t.get("primaryDecoderInsurance"));default:return!1}else if(void 0!==e.agreemntUId&&(a.get("isMultipleAddonAllowed")&&void 0!==a.get("multipleProductAddOnUIDs")&&a.get("multipleProductAddOnUIDs").length>0?(s=!0,e.set("isAddOnPresent",!1)):void 0!==a.get("data.addOnProductSelection")&&(s=!0),!e.get("isPrincipalPresent")&&void 0!==a.get("data.primaryProductSelection")||!e.get("isAddOnPresent")&&s||!e.get("isHdAddOnPresent")&&void 0!==a.get("data.hdAddOnProductSelection")||!e.get("isAccessPresent")&&!Ember.isEmpty(t.get("primaryDecoderAccessService"))||!e.get("isInsurenceStatusPresent")&&t.get("primaryDecoderInsurance")||!e.get("secondaryDecoder.isAccessPresent")&&!Ember.isEmpty(t.get("secondaryDecoderAccessService"))||!e.get("secondaryDecoder.isInsurenceStatusPresent")&&t.get("secondaryDecoderInsurance")||void 0===e.get("secondaryHardwareSerialnumber")&&void 0!==e.get("secondaryDecoder")))return!0;return!1},validateDevices:function(){var e=this,t=!0;if(e.get("data.selectedPrimaryDecoder.isMobileDecoder"))switch(e.get("summaryOfDevicesList")){case void 0:case null:break;default:$.each(e.get("summaryOfDevicesList"),function(e,a){return a.isMobileDecoder||void 0!==a.agreemntUId||(t=!1),t})}return t},getDecoderCpcByproductId:function(e){var t=this,a=!0,s=void 0;return $.each(t.productCategoryAndProductDetail,function(t,o){return void 0===o.Products.Product.length&&(o.Products.Product=[o.Products.Product]),$.each(o.Products.Product,function(t,s){return s.CanonicalKey===e&&(a=!1),a}),a||(s=o.CanonicalKey),a}),s},hidedevicelable:function(){0===this.xtraViewList.length?this.set("xtraViewLabel",!1):this.set("xtraViewLabel",!0),$.grep(this.xtraViewList,function(e){return Ember.isEmpty(e.isInXtraView)}).length<1?this.set("showLinkedXtraviewDevices",!1):this.set("showLinkedXtraviewDevices",!0)}.observes("xtraViewList.length"),publishValidateHardwarePairingEvent:function(e,t){var a=this,s=Komodo.Models.ValidateHardwarePairing.create(),o=Komodo.canonicalFacadeFactory(s,["Country","DecoderSerialNumber","SmartcardSerialNumber"]);o.set("Country",a.country),void 0!==e&&o.set("DecoderSerialNumber",e),void 0!==t&&o.set("SmartcardSerialNumber",t),a.getNewProcessID(),a.showBusyIndicator(),Komodo.Services.AssociateProductsService.seachHardware(a,s).done(function(){Komodo.log("publishValidateHardwarePairingEvent() : ValidateHardwarePairing event has been published.")}).fail(function(){Komodo.log("publishValidateHardwarePairingEvent() : ValidateHardwarePairing event has failed.")})},clearSelectedForOneDevice:function(){this.set("data.selectedPrimaryDecoder",void 0),this.dataService.clearAllProducts(this)},onlyPrimaryProductForDevice:function(){var e=this;switch(e.get("data.selectedPrimaryDecoder")){case null:case void 0:case"":break;default:void 0!==e.get("data.primaryProductSelection")&&(e.get("data.selectedPrimaryDecoder.isMobileDecoder")&&(e.get("isMultipleAddonAllowed")?$.each(e.get("productAddOn"),function(e,t){Ember.set(t,"isChecked",!1)}):e.set("data.addOnProductSelection",void 0),e.servicesNotSelectedChanged()),Ember.isEmpty(e.get("data.selectedShortTermSubscriptionId"))||$.each(e.get("productAddOn"),function(e,t){Ember.set(t,"isChecked",!1)})),!Ember.isEmpty("data.primaryProductSelection")&&e.get("data.primaryProductSelection")===e.getValueFromConstant("ProductsConstants","productsConstants.products.MNDCSN1")||e.get("data.primaryProductSelection")===e.getValueFromConstant("ProductsConstants","productsConstants.products.MNET")?(e.enableFlags(e.primaryAccessServices,["checkedPrimaryAccessService"],!0),e.enableFlags(e.primaryAccessServices,["isCheckedPrimaryAccessService"],!1)):e.enableFlags(e.primaryAccessServices,["checkedPrimaryAccessService"],!1)}}.observes("data.primaryProductSelection"),onlyAddonProductForDevice:function(){var e=this;switch(e.get("data.selectedPrimaryDecoder")){case null:case void 0:case"":break;default:if(void 0!==e.get("data.addOnProductSelection")){e.get("data.selectedPrimaryDecoder.isMobileDecoder")&&(e.set("data.primaryProductSelection",void 0),e.servicesNotSelectedChanged()),e.set("servicesNotSelected",!1);break}}}.observes("data.addOnProductSelection"),clearInsuranceAndAccessServiceCheckBox:function(){this.enableFlags(this.primaryInsuranceproducts,["isCheckedPrimaryInsurance","checkedPrimaryInsurance"],!1),this.enableFlags(this.primaryAccessServices,["isCheckedPrimaryAccessService","checkedPrimaryAccessService"],!1),this.enableFlags(this.secondaryInsuranceproducts,["isCheckedSecondaryInsurance","checkedSecondaryInsurance"],!1),this.enableFlags(this.secondaryAccessServices,["isCheckedSecondaryAccessService","checkedSecondaryAccessService"],!1),this.set("primaryInsuranceproducts",[]),this.set("primaryAccessServices",[]),this.set("secondaryInsuranceproducts",[]),this.set("secondaryAccessServices",[])},enableFlags:function(e,t,a){$.each(e,function(e,s){$.each(t,function(e,t){Ember.set(s,t,a)})})},messageValidateHardwarePairingDeliveryFailure:function(e){var t=this;t.hideBusyIndicator(),Komodo.UI.warn("[AddProductsController.messageValidateHardwarePairingDeliveryFailure] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),kl.value(t._localeBase+"messageValidateHardwarePairingDeliveryFailure"),Komodo.Controls.MessageBoxOkButtons,t,"id5789673","danger")},messageAddProductsDeliveryFailure:function(e){var t=this;t.hideBusyIndicator(),t.set("isDisableActiveButton",!1),Komodo.UI.warn("[AddProductsController.messageAddProductsDeliveryFailure] : messageId = "+e.messageId),Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),kl.value(t._localeBase+"messageAddProductsDeliveryFailure"),Komodo.Controls.MessageBoxOkButtons,t,"id5783673","danger")},messageReceived:function(){this.hideBusyIndicator()},messageHardwareRetrievedReceived:function(e){var t=this;t.hideBusyIndicator(),t.dataService.deviceResponseRecieved(t,e)},messageProductPaymentPlanCreatedReceived:function(){this.hideBusyIndicator(),Komodo.Services.uiService.transitionTo("customerProfile")},validateGotvDeviceRules:function(){var e=this,t=1,a=!0;switch(e.get("marketSegment")){case that.getValueFromConstant("ProductsConstants","productsConstants.products.LESOTHO_MARKET_SEGMENT"):case that.getValueFromConstant("ProductsConstants","productsConstants.products.MARKET_SEGMENT"):break;default:Komodo.Services.customerProfileService.getCustomerPersonalDetail().isDstv&&(Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),"<br />"+kl.value(e._localeBase+"deviceIsNotSupported"),Komodo.Controls.MessageBoxOkButton,e,"id5556673","danger"),a=!1)}return $.each(this.get("data.selectedproductData"),function(e,a){Komodo.UI.cacheDataService.isGotvDevice(a.decoderCpcType)&&t++}),t>that.getValueFromConstant("ProductsConstants","productsConstants.products.MAX_GOTV_DEVICE_ALLOWED")&&(Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),kl.value(e._localeBase+"maximumAllowedGotvDevices"),Komodo.Controls.MessageBoxOkButton,e,"id23454673","danger"),a=!1),a},isMobileAddOn:function(e){var t=this,a=!1;return $.each(t.allProductCategories,function(s,o){return o.CanonicalValue===t.getValueFromConstant("ProductsConstants","productsConstants.products.ADDON_CATEGORY")&&$.each(o.CommercialProductCategories.CommercialProductCategory,function(s,o){return o.SystemKey!==e||o.CanonicalValue!==t.getValueFromConstant("ProductsConstants","productsConstants.products.MOBILE_ADDON")||(a=!0,!1)}),!a}),a},validateMobileRules:function(e,t,a){var s=this;return s.get("onlyPrincipalMobileProduct")?s.validateMobilePackages(e,t,a):s.validateMobilePackagesWithAddOn(e,t,a)},
validateMobilePackagesWithAddOn:function(e,t,a){var s=this,o=0,r=0,i=s.getMobileAddOn(e),n=s.getMobileAddOn(i.product.allowProduct),c=i.product.allowProduct.split(","),d=!0;if(!c instanceof Array&&(c=[c]),void 0===n){if($.each(s.get("data.selectedSummaryProductData"),function(t,a){void 0!==a.serviceUID&&""!==a.serviceUID?(d=!0,Komodo.UI.cacheDataService.isMobileDevice(a.primaryDecoderCpcType)||$.each(a.serviceUID,function(e,t){$.each(c,function(e,a){return a===t.UID&&(o=1*o+1,d=!1),d})})):void 0!==a.addOnUID&&""!==a.addOnUID&&e===a.addOnUID&&(r=1*r+1)}),$.each(s.get("data.selectedproductData"),function(t,a){if(a.servicesDetails){var s=a.servicesDetails.Service;a.isPrincipalPresent?$.each(s,function(e,t){d=!0,$.each(c,function(e,a){return a===t.ProductDetail.UID&&(o=1*o+1,d=!1),d})}):a.isAddOnPresent&&$.each(s,function(t,a){e===a.ProductDetail.UID&&(r=1*r+1)})}}),o<=r)return Komodo.Controls.MessageBoxController.show(kl.value(s._localeBase+"messgTitleDeviceInfoToGrid"),kl.value(s._localeBase+"noMoreAddons")+t+kl.value(s._localeBase+"noPricipals"),Komodo.Controls.MessageBoxOkButton,s,"id24456673","warning"),!1}else if($.each(s.get("data.selectedSummaryProductData"),function(t,a){Komodo.UI.cacheDataService.isMobileDevice(a.primaryDecoderCpcType)&&(d=!0,$.each(c,function(e,t){return t===a.addOnUID&&(o=1*o+1,d=!1),d}),void 0!==a.addOnUID&&""!==a.addOnUID&&e===a.addOnUID&&(r=1*r+1))}),$.each(s.get("data.selectedproductData"),function(t,a){if(Komodo.UI.cacheDataService.isMobileDevice(a.decoderCpcType)&&a.servicesDetails){var s=a.servicesDetails.Service;a.isAddOnPresent&&$.each(s,function(t,a){e===a.ProductDetail.UID&&(r=1*r+1),$.each(c,function(e,t){t===a.ProductDetail.UID&&(o=1*o+1)})})}}),o<=r)return Komodo.Controls.MessageBoxController.show(kl.value(s._localeBase+"messgTitleDeviceInfoToGrid"),kl.value(s._localeBase+"noMoreAddons")+t+kl.value(s._localeBase+"noPricipals"),Komodo.Controls.MessageBoxOkButton,s,"id24456673","warning"),!1;var l=[];$.each(s.get("data.selectedproductData"),function(e,t){if(t.servicesDetails){var a=t.servicesDetails.Service;d=!0,t.isPrincipalPresent?Komodo.UI.cacheDataService.isMobileDevice(t.decoderCpcType)||void 0!==i.product.allowProduct&&(d=!0,$.each(a,function(e,a){return $.each(c,function(e,o){return o===a.ProductDetail.UID&&(l.pushObject({formatedDate:Komodo.Services.systemService.universalDateString(new Date(t.startDate.replace(/(\d{2})-(\d{2})-(\d{4})/,"$2/$1/$3"))),actualeDate:t.startDate,addressDetails:t.addressDetails,customerPersonalDetails:t.customerPersonalDetails,customerPaymentDetail:t.paymentDetail,chargePeriod:"1"===t.termOfPayment?kl.value(s._localeBase+"monthly"):kl.value(s._localeBase+"annually"),awaitingInstallation:t.isAwaitingInstallation}),d=!1),d}),d})):t.isAddOnPresent&&Komodo.UI.cacheDataService.isMobileDevice(t.decoderCpcType)&&void 0!==i.product.allowProduct&&(d=!0,$.each(c,function(e,o){$.each(a,function(e,a){return o===a.ProductDetail.UID&&(l.pushObject({formatedDate:Komodo.Services.systemService.universalDateString(new Date(t.startDate.replace(/(\d{2})-(\d{2})-(\d{4})/,"$2/$1/$3"))),actualeDate:t.startDate,addressDetails:t.addressDetails,customerPersonalDetails:t.customerPersonalDetails,customerPaymentDetail:t.paymentDetail,chargePeriod:"1"===t.termOfPayment?kl.value(s._localeBase+"monthly"):kl.value(s._localeBase+"annually"),awaitingInstallation:t.isAwaitingInstallation}),d=!1),d})}))}}),$.each(s.get("data.selectedSummaryProductData"),function(e,t){void 0!==t.serviceUID&&""!==t.serviceUID?Komodo.UI.cacheDataService.isMobileDevice(t.primaryDecoderCpcType)||void 0===i.product.allowProduct||(d=!0,$.each($.makeArray(t.serviceUID),function(e,a){return $.each(c,function(e,s){return s===a.UID&&(l.pushObject({formatedDate:Komodo.Services.systemService.universalDateString(new Date(t.activationDate.replace(/(\d{2})-(\d{2})-(\d{4})/,"$2/$1/$3"))),actualeDate:t.activationDate,addressDetails:t.addressDetails,customerPersonalDetails:t.customerPersonalDetails,customerPaymentDetail:t.customerPaymentDetail,chargePeriod:t.chargePeriod,awaitingInstallation:t.isAwaitingInstallation}),d=!1),d}),d})):void 0!==t.addOnUID&&Komodo.UI.cacheDataService.isMobileDevice(t.primaryDecoderCpcType)&&void 0!==i.product.allowProduct&&(d=!0,$.each(c,function(e,a){return a===t.addOnUID&&(l.pushObject({formatedDate:Komodo.Services.systemService.universalDateString(new Date(t.activationDate.replace(/(\d{2})-(\d{2})-(\d{4})/,"$2/$1/$3"))),actualeDate:t.activationDate,addressDetails:t.addressDetails,customerPersonalDetails:t.customerPersonalDetails,customerPaymentDetail:t.customerPaymentDetail,chargePeriod:t.chargePeriod,awaitingInstallation:t.isAwaitingInstallation}),d=!1),d}))});var u=function(e,t){return e.formatedDate>t.formatedDate?1:e.formatedDate<t.formatedDate?-1:0};return l.sort(u),s.set("addOnActivationDate",l[r].actualeDate),s.set("selectedPaymentOfMethodTitle",l[r].chargePeriod),a.principalProductAddress=l[r].addressDetails,a.principalProductPersonalDetails=l[r].customerPersonalDetails,a.principalProductPaymentDetails=l[r].customerPaymentDetail,a.principalProductAwaitingInstallationDetails=l[r].awaitingInstallation,!0},validateMobilePackages:function(e,t,a){var s=this,o=0,r=0,i=s.getMobileAddOn(e),n=[],c=!0,d=[];switch(i){case void 0:case null:case"":$.each(s.get("data.selectedproductData"),function(e,t){t.servicesDetails&&void 0===t.secondaryHardwareSerialnumber&&(t.isPrincipalPresent&&t.isPrimaryDecoder&&!t.get("isMobileDecoder")&&!t.get("isGotvDecoder")&&t.isPrincipalActive?(o=1*o+1,n.pushObject({formatedDate:Komodo.Services.systemService.universalDateString(new Date(t.startDate.replace(/(\d{2})-(\d{2})-(\d{4})/,"$2/$1/$3"))),actualeDate:t.startDate,addressDetails:t.addressDetails,customerPersonalDetails:t.customerPersonalDetails,customerPaymentDetail:t.paymentDetail,chargePeriod:"1"===t.termOfPayment?kl.value(s._localeBase+"monthly"):kl.value(s._localeBase+"annually"),awaitingInstallation:"1"})):t.isAddOnPresent&&t.get("isMobileDecoder")&&(r=1*r+1))}),$.each(s.get("data.selectedSummaryProductData"),function(e,t){void 0!==t.serviceUID&&""!==t.serviceUID?Komodo.UI.cacheDataService.isGotvDevice(t.primaryDecoderCpcType)||(Komodo.UI.cacheDataService.isMobileDevice(t.primaryDecoderCpcType)?r=1*r+1:void 0!==t.serviceUID&&(o=1*o+1,n.pushObject({formatedDate:Komodo.Services.systemService.universalDateString(new Date(t.activationDate.replace(/(\d{2})-(\d{2})-(\d{4})/,"$2/$1/$3"))),actualeDate:t.activationDate,addressDetails:t.addressDetails,customerPersonalDetails:t.customerPersonalDetails,customerPaymentDetail:t.customerPaymentDetail,chargePeriod:t.chargePeriod,awaitingInstallation:t.isAwaitingInstallation}))):Komodo.UI.cacheDataService.isMobileDevice(t.primaryDecoderCpcType)&&(r=1*r+1)});break;default:switch(i.product.allowProduct){case void 0:case null:case"":break;default:d=i.product.allowProduct.split(","),$.each(s.get("data.selectedproductData"),function(e,t){t.servicesDetails&&void 0===t.secondaryHardwareSerialnumber&&(t.isPrincipalPresent&&t.isPrimaryDecoder&&!t.get("isMobileDecoder")&&!t.get("isGotvDecoder")?$.each(t.servicesDetails.Service,function(e,a){return $.each(d,function(e,r){return r===a.ProductDetail.UID&&(o=1*o+1,n.pushObject({formatedDate:Komodo.Services.systemService.universalDateString(new Date(t.startDate.replace(/(\d{2})-(\d{2})-(\d{4})/,"$2/$1/$3"))),actualeDate:t.startDate,addressDetails:t.addressDetails,customerPersonalDetails:t.customerPersonalDetails,customerPaymentDetail:t.paymentDetail,chargePeriod:"1"===t.termOfPayment?kl.value(s._localeBase+"monthly"):kl.value(s._localeBase+"annually"),awaitingInstallation:"1"}),c=!1),c}),c}):t.isAddOnPresent&&t.get("isMobileDecoder")&&(r=1*r+1))}),d=i.product.allowProduct.split(","),$.each(s.get("data.selectedSummaryProductData"),function(e,t){t.addOnUID===i.product.details.productID?r=1*r+1:Komodo.UI.cacheDataService.isMobileDevice(t.primaryDecoderCpcType)||Komodo.UI.cacheDataService.isGotvDevice(t.primaryDecoderCpcType)||(c=!0,$.each($.makeArray(t.serviceUID),function(e,a){return $.each(d,function(e,s){return s===a.UID&&(o=1*o+1,n.pushObject({formatedDate:Komodo.Services.systemService.universalDateString(new Date(t.activationDate.replace(/(\d{2})-(\d{2})-(\d{4})/,"$2/$1/$3"))),actualeDate:t.activationDate,addressDetails:t.addressDetails,customerPersonalDetails:t.customerPersonalDetails,customerPaymentDetail:t.customerPaymentDetail,chargePeriod:t.chargePeriod,awaitingInstallation:t.isAwaitingInstallation}),c=!1),c}),c}))})}}var l=function(e,t){return e.formatedDate>t.formatedDate?1:e.formatedDate<t.formatedDate?-1:0};if(n.sort(l),n.length>0&&n.length>r&&Ember.isEmpty(s.data.primaryProductSelection))s.set("addOnActivationDate",n[r].actualeDate),s.set("selectedPaymentOfMethodTitle",n[r].chargePeriod),a.principalProductAddress=n[r].addressDetails,a.principalProductPersonalDetails=n[r].customerPersonalDetails,a.principalProductPaymentDetails=n[r].customerPaymentDetail,a.principalProductAwaitingInstallationDetails=n[r].awaitingInstallation;else{var u=s.data.activationDate.getDate(),h=s.data.activationDate.getMonth()+1,m=s.data.activationDate.getFullYear();u<10&&(u="0"+u),h<10&&(h="0"+h);var p=u+"-"+h+"-"+m;s.set("addOnActivationDate",p),s.set("selectedPaymentOfMethodTitle",s.get("selectedPaymentOfMethodTitle")),a.principalProductAddress=s.addressDetails,a.principalProductPersonalDetails=s.customerPersonalDetails,a.principalProductPaymentDetails=s.customerPaymentDetail,a.principalProductAwaitingInstallationDetails=s.data.selctedWaitingForInstallationOption}return!0},matchingDeviceNotFound:function(e){var t=this;if(t.hideDevicePairScreen)Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),kl.value(t._localeBase+"savePairRole"),Komodo.Controls.MessageBoxOkButtons,t,"id54463673","warning");else{var a=void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.Type?e.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.Type.toLowerCase():"device",s=e.ResponseMessage.Payload.ListOfHardware.Hardware.SerialNumber;Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),kl.value(t._localeBase+"paireDeviceNotFound")+a+kl.value(t._localeBase+"withSerialNumber")+s+" "+kl.value(t._localeBase+"findothermachingDevice"),Komodo.Controls.MessageBoxYesNoButtons,t,"id54456673","alert").response=function(e){"yes"===e&&t.showDevicePair()}}},availableForUse:function(e,t,a){var s,o,r=this,i=kl.value(this._localeBase+"isTheDecoder")+" "+e.ResponseMessage.Payload.ListOfHardware.Hardware.SerialNumber+" ";if(!Ember.isEmpty(e.ResponseMessage.Payload.ListOfHardware.Hardware.SerialNumber)){var n=void 0;Komodo.Services.queryService.getJSON("DeviceProcessing/Get?deviceID="+e.ResponseMessage.Payload.ListOfHardware.Hardware.SerialNumber,{async:!1}).done(function(e){n=e}).fail(function(){Komodo.error("[ERROR] : could not retrieve Device Info")}),Ember.isEmpty(n.StatusInformation)||(o=n.StatusInformation.StatusDescription.toUpperCase())}t?(i=kl.value(this._localeBase+"isTheDevice")+" "+e.ResponseMessage.Payload.ListOfHardware.Hardware.SerialNumber+" ",i+=kl.value(this._localeBase+"numberCorrect"),s=kl.value(this._localeBase+"confirmDeviceNumber")):(void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.SmartcardDetail&&(i=i+kl.value(this._localeBase+"andSmartCard")+" "+e.ResponseMessage.Payload.ListOfHardware.Hardware.SmartcardDetail.Type+" ",void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcard&&(i=i+e.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcard+" ")),i+=kl.value(this._localeBase+"numbersCorrect"),s=kl.value(this._localeBase+"confirmDevicePair")),Komodo.Controls.MessageBoxController.show(s,i,Komodo.Controls.MessageBoxYesNoButtons,r,"id5446673","alert").response=function(s){"yes"===s?(r.addDecoderInList(e.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.Model,e.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.ProductFeatures.Description,void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.SerialNumber?e.ResponseMessage.Payload.ListOfHardware.Hardware.SerialNumber:void 0,void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.SmartcardDetail?e.ResponseMessage.Payload.ListOfHardware.Hardware.SmartcardDetail.Type:void 0,void 0!==e.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcard?e.ResponseMessage.Payload.ListOfHardware.Hardware.LinkedSmartcard:void 0,Komodo.UI.cacheDataService.getDeviceCPCCanonicalKeyBySytemKey(e.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.Type),e.ResponseMessage.Payload.ListOfHardware.Hardware.ListOfService,e.ResponseMessage.Payload.ListOfHardware.Hardware.ProductDetail.UID,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,!1,a,!1,!1,void 0,void 0,o),r.primaryDevicesList.length>1?(r.set("data.radioButtonLinkUnlink",[{title:kl.value(r._localeBase+"linkButton"),value:"0"}]),r.set("showDevicesLinking",!0),r.set("showUnlink",!1)):r.set("showDevicesLinking",!1),r.set("smartcardDecoderNo",void 0),r.redirectOnSuspendedAgreement(!1)):t||r.showDevicePair()}},redirectOnSuspendedAgreement:function(e){var t=this;if(!t.get("redirectEnabled")&&t.get("countOfStolenSuspended")>0){var a;a=e?Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),kl.value(t._localeBase+"redirectToMovePackagesOnPageLoad"),Komodo.Controls.MessageBoxYesNoButtons,t,"id5446673","warning"):Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),kl.value(t._localeBase+"redirectToMovePackagesAddDevice"),Komodo.Controls.MessageBoxYesNoButtons,t,"id5446673","warning"),a.response=function(a){"yes"===a&&e?Komodo.Services.uiService.transitionTo("linkDelink"):"yes"!==a&&e?t.set("redirectEnabled",!0):"yes"!==a||e||t.set("redirectEnabled",!0)}}},showDevicePair:function(){var e=this;if(e.hideDevicePairScreen)Komodo.Controls.MessageBoxController.show(kl.value(e._localeBase+"useCaseTitle"),kl.value(e._localeBase+"savePairRole"),Komodo.Controls.MessageBoxOkButtons,e,"id54463673","warning");else{e.registerModel("hardwarePair",Komodo.Models.SavePairModel),e.registerValidator(e.get("hardwarePair"),"smartCardSerialNumber",{isRequired:!0,displayName:kl.value(e._localeBase+"smartcardNumber"),minLength:10,maxLength:10,functions:Komodo.UI.Validators.alphanumericValidator}),e.registerValidator(e.get("hardwarePair"),"decoderSerialNumber",{isRequired:!0,displayName:kl.value(e._localeBase+"deviceNumber"),minLength:10,maxLength:10,functions:Komodo.UI.Validators.alphanumericValidator});var t=Komodo.Application.ModalPaneController.create();t.popup(kl.value(e._localeBase+"updateDevice"),null,{context:{data:e.get("hardwarePair"),validators:e.validators,savepair:function(){!1!==e.canSubmitData(e.hardwarePair,kl.value(e._localeBase+"useCaseTitle"),{showInModal:!1})&&(e.set("popupaction","savepair"),t.close())}},closeCallback:function(){"savepair"===e.get("popupaction")&&(e.publishValidateHardwarePairingEvent(e.get("hardwarePair.decoderSerialNumber"),e.get("hardwarePair.smartCardSerialNumber")),e.set("popupaction",void 0))},view:Komodo.Application.SavePairView})}},publishAssociateProductsEvent:function(){var e,t=this,a=[],s=Komodo.Models.AddProducts.create(),o=Komodo.canonicalFacadeFactory(s,["Country","CustomerUID","ListOfAccount_Account"]);if(void 0===t.get("country")||null===t.get("country"))return e=kl.value(t._localeBase+"countryCodeMissing"),void Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),e,Komodo.Controls.MessageBoxOkButton,t,"id5446993","danger");if(o.set("Country",t.country),void 0===t.get("data.customerRefNo")||null===t.get("data.customerRefNo"))return e=kl.value(t._localeBase+"customerNubmerMissing"),void Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),e,Komodo.Controls.MessageBoxOkButton,t,"id5446883","danger");o.set("CustomerUID",t.data.customerRefNo);var r=t.dataService.getListOfAccount(t,t.get("data.selectedSummaryProductData"),t.get("methodsOfPaymentCanonical"),t.get("data.selectedproductData"),t.get("_enableAddressOverRide"));if(o.set("ListOfAccount_Account",r),t.getNewProcessID(),t.showBusyIndicator(),$.each(s.ListOfAccount.Account,function(e,s){$.each(s.ListOfAgreement.Agreement,function(e,s){$.each(s.ListOfHardware.Hardware,function(e,s){if(!0===t.get("data.selectedSummaryProductData")[0].isXtraView){var o=!1;$.each(s.ListOfService.Service,function(e,r){$.grep(a,function(e){return e===parseInt(r.UID)}).length<1&&a.pushObject(parseInt(r.UID)),Ember.isEmpty($.grep(t.data.selectedproductData,function(e){return e.agreemntTypeID===Komodo.AgreementTypes.PAYMENT_PLAN&&e.decoderSerialNumber===s.SerialNumber}))||(o=!0),!1===o&&$.each(t.get("allAccessService"),function(e,s){if($.grep(s.product.allowDevice.split(","),function(e){return e===t.get("data.selectedSummaryProductData")[0].secondaryDecoderModel}).length>0&&$.grep(a,function(e){return e===parseInt(s.product.details.productID)}).length<1&&$.grep(t.get("data.selectedSummaryProductData")[0].primaryDecoderServiceDetails.Service,function(e){return e.ProductDetail.UID==s.product.details.productID}).length<1&&$.grep(t.getValueFromConstant("ProductsConstants","productsConstants.products.SDPVR_ACCESS").split(","),function(e){return e===s.product.details.productID}).length>0)return o=!0,a.pushObject(parseInt(s.product.details.productID)),!1})})}s.SecondaryHardware=null})})}),!0===t.get("data.selectedSummaryProductData")[0].isXtraView){var i=Ember.Object.extend({init:function(){this._super();var e=this;e.set("PrimaryDeviceSerialNumber",t.get("data.selectedSummaryProductData")[0].primaryDecoderSerialNumber),e.set("ServiceIds",a)}}).create();Komodo.Services.queryService.postJSON("/Device/AddPackageToXtraviewNetwork",{data:i}).done(function(){t.set("isDisableActiveButton",!0),Komodo.log("AddPackageToXtraviewNetwork() : Add Packages to Xtraview network has been published."),t.hideBusyIndicator(),t.get("_customerClassSelected")===t.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.CUSTOMERCLASS_SPECIALIST")?Komodo.Services.uiService.transitionTo("specialistCustomerProfile"):Komodo.Services.uiService.transitionTo("customerProfile")}).error(function(e){t.hideBusyIndicator(),Komodo.Controls.MessageBoxController.show("Error",e.responseJSON.Message,Komodo.Controls.MessageBoxOkButtons,t,"id5446673","danger")})}else Komodo.Services.AssociateProductsService.associateProducts(t,s,t.get("sessionToken")).done(function(){t.set("isDisableActiveButton",!0),Komodo.log("publishAssociateProductsWithXtraviewEvent() : Link Products with Xtraview event has been published.")}).fail(function(){t.hideBusyIndicator(),Komodo.error("publishAssociateProductsWithXtraview () : Link Products with Xtraview  event has failed.")})},messageProductsAddedReceived:function(e){Komodo.log("Products Added Received"+new Date);var t=this;if(t.hideBusyIndicator(),void 0!==e.ResponseMessage.Payload.ListOfAccount&&void 0!==e.ResponseMessage.Payload.ListOfAccount.Account){t.dataService.clearData(t);var a=Komodo.Models.SearchRequestForBaseSystem.create();a.set("uid",t.get("data.customerRefNo")),t.get("countOfStolenSuspended")>0&&t.get("redirectEnabled")&&t.get("countOfEmptyDecoders")>0?Komodo.Services.uiService.transitionTo("linkDelink"):t._customerClassSelected===t.getValueFromConstant("CustomerTypesConstants","customerTypesConstants.CustomerTypesConstants.CUSTOMERCLASS_SPECIALIST")?Komodo.Services.eventAggregator.publish("PublishSpecialistSearchRequest",a):Komodo.Services.eventAggregator.publish("PublishCustomerSearchRequest",a)}else Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),kl.value(t._localeBase+"messgProductLinkFail"),Komodo.Controls.MessageBoxOkButton,t,"id54426673","danger"),t.dataService.clearData(t)},countEmptyDecoders:function(){var e=0,t=this;return $.each(t.get("data.selectedproductData"),function(t,a){void 0===a.get("secondaryHardwareSerialnumber")&&a.get("servicesDetails")&&!a.get("isStolenSuspended")&&e++}),$.each(t.get("data.selectedSummaryProductData"),function(t,a){void 0!==a&&null!==a&&void 0===a.serviceUID&&e++}),e},messageFailureMessageEventReceived:function(e){var t=this;t.hideBusyIndicator(),t.set("isDisableActiveButton",!1),Komodo.Controls.MessageBoxController.show(kl.value(t._localeBase+"useCaseTitle"),e.ResponseMessage.Payload.ListOfErrorDetails.ErrorDescription,Komodo.Controls.MessageBoxOkButton,this,"id544246673","danger")},showAddOnProductsChanged:function(){switch(this.get("productAddOn").length){case 0:case void 0:case null:case"":this.set("showAddOnProducts",!1);break;default:this.set("showAddOnProducts",!0)}}.observes("productAddOn.length"),showHdAddOnProductsChanged:function(){switch(this.get("productHdAddOn").length){case 0:case void 0:case null:case"":this.set("showHdAddOnProducts",!1);break;default:this.set("showHdAddOnProducts",!0)}}.observes("productHdAddOn.length"),populateXtraviewLinkAfterDelete:function(e){var t=this;$.each(t.get("data.selectedproductData"),function(a,s){if(e.secondaryHardwareSerialnumber===s.decoderSerialNumber){var o=t.getDeviceDetails(s.decoderSerialNumber,!0);return e.set("secondaryDecoder",o),t.xtraViewList.pushObject(e),t.removeDecoder(e),!1}return!0})},deleteDeviceFromSummaryGrid:function(e,t,a){var s=this,o=s.getDeviceDetails(e,!0);if(o.secondaryHardwareSerialnumber)s.populateXtraviewLinkAfterDelete(o);else{switch(s.updatePrimaryDeviceList(o.decoderModel,o.decoderSerialNumber),t){case void 0:case null:case"":break;default:var r=s.getDeviceDetails(t,!0);s.updatePrimaryDeviceList(r.decoderModel,r.decoderSerialNumber)}if(void 0!==a&&!o.isMobileDecoder){var i=[];$.each(s.get("data.selectedSummaryProductData"),function(e,t){void 0!==t&&(Komodo.UI.cacheDataService.isMobileDevice(t.primaryDecoderCpcType)?void 0!==t.serviceUID&&i.push(t):i.push(t))}),s.get("data.selectedSummaryProductData").length+1-i.length>1&&Komodo.Controls.MessageBoxController.show(kl.value(s._localeBase+"useCaseTitle"),kl.value(s._localeBase+"coexistanceRule"),Komodo.Controls.MessageBoxOkButton,s,"id5446993","warning"),s.get("data.selectedSummaryProductData").clear(),s.set("data.selectedSummaryProductData",i)}}},removeDeviceFromMainList:function(e){var t=this;t.set("primaryDevicesList",$.grep(t.primaryDevicesList,function(t){return!(t.decoderSerialNumber===e.decoderSerialNumber)})),$.each(t.primaryDevicesList,function(){t.secondaryDevicesListChanged(),t.disableChanged()}),t.set("xtraViewList",$.grep(t.xtraViewList,function(t){return!(t.decoderSerialNumber===e.decoderSerialNumber||t.secondaryDecoder.decoderSerialNumber===e.decoderSerialNumber)}))},enableactivationDate:function(){var e=this;switch(e.set("data.activationDate",new Date),e.get("data.selctedWaitingForInstallationOption")){case"0":e.set("disableActivationDate",!0);break;default:e.set("disableActivationDate",!1)}}.observes("data.selctedWaitingForInstallationOption"),showDetailsChanged:function(){var e=this;this.data.selectedproductData.length>0?e.set("showDetails",!0):e.set("showDetails",!1)}.observes("data.selectedproductData.length"),showDevicesLinkingChanged:function(){var e=this;!0===e.get("devicesLabel")||!0===e.get("xtraViewLabel")?e.set("showDevicesLinking",!0):e.set("showDevicesLinking",!1)}.observes("devicesLabel","xtraViewLabel"),showHideQuestionPanel:function(){return!(void 0!==this.get("data.selectedPrimaryDecoder.agreemntUId")||!(Ember.isEmpty(this.get("data.secondaryDecoder"))||Ember.isEmpty(this.get("data.selectedPrimaryDecoder.secondaryDecoder"))||Ember.isEmpty(this.get("data.selectedPrimaryDecoder.secondaryDecoder.agreemntUId"))))||!this.disablePrincipalProducts}.property("disablePrincipalProducts"),disableSubmit:function(){var e=!0,t=this;switch(t.get("data.selectedPrimaryDecoder")){case void 0:case null:case"":break;default:switch(t.get("data.selectedPrimaryDecoder.secondaryDecoder")){case void 0:case null:case"":"N"!==t.get("data.selectedPrimaryDecoder.modifiable")&&(e=!1);break;default:"N"===t.get("data.selectedPrimaryDecoder.modifiable")&&"N"===t.get("data.selectedPrimaryDecoder.secondaryDecoder.modifiable")||(e=!1)}}return e}.property("data.selectedPrimaryDecoder"),publishDeclineDCCTermsAndConditionsEvent:function(e){var t,a=this,s=Komodo.Models.DeclineDCCTermsAndConditions.create(),o=Komodo.canonicalFacadeFactory(s,["Country","CustomerUID","DeviceSerialNumber"]);return void 0===a.get("country")||null===a.get("country")?(t=kl.value(a._localeBase+"countryCodeMissing"),void Komodo.Controls.MessageBoxController.show(kl.value(a._localeBase+"useCaseTitle"),t,Komodo.Controls.MessageBoxOkButton,a,"id5446993","danger")):(o.set("Country",a.country),void 0===a.get("data.customerRefNo")||null===a.get("data.customerRefNo")?(t=kl.value(a._localeBase+"customerNubmerMissing"),void Komodo.Controls.MessageBoxController.show(kl.value(a._localeBase+"useCaseTitle"),t,Komodo.Controls.MessageBoxOkButton,a,"id5446883","danger")):(o.set("CustomerUID",a.data.customerRefNo),void 0===e||null===e?void Komodo.Controls.MessageBoxController.show(kl.value(a._localeBase+"useCaseTitle"),kl.value(a._localeBase+"nullDecoderSerialNumber"),Komodo.Controls.MessageBoxOkButton,a,"id5446883","danger"):(o.set("DeviceSerialNumber",e),a.getNewProcessID(),void Komodo.Services.AssociateProductsService.DeclineDCCTermsConditions(a,s).done(function(){Komodo.log("publishDeclineDCCTermsAndConditionsEvent() : DeclineDCCTermsAndConditions event has been published.")}).fail(function(){Komodo.error("publishDeclineDCCTermsAndConditionsEvent() : DeclineDCCTermsAndConditions event has failed.")}))))},sortSelectedSummaryProducts:function(){var e=function(e,t){return e.get("weightage")<t.get("weightage")?1:e.get("weightage")>t.get("weightage")?-1:0};this.get("data.selectedSummaryProductData").length>1&&this.get("data.selectedSummaryProductData").sort(e)},restrictActivationForSupervisor:function(){var e=Komodo.Services.securityService.get("domainUserName"),t=Komodo.Services.uiService.getController("application").get("_selectedCountryId"),a=Komodo.Models.OnlineTill.SupervisorApprovalModel.create(),s=this.get("controllers.genericPayment"),o=this,r=Komodo.Services.uiService.showModalPopup(kl.value(o._localeBase+"popUpForSupervisor"),null,{view:Komodo.Application.SupervisorApprovalView,context:{data:a,ok:function(){var a=this;a.data.set("disableAction",!0),s.validateUserClaim(t,a.data.get("supervisorUsername"),a.data.get("passCode"),o.supervisorClaim).done(function(t){void 0!==t?(o.set("sessionToken",t),e===a.data.get("supervisorUsername")?(a.data.set("disableAction",!1),alert(kl.value(o._localeOLT+"customer.unauthoriseError")),a.data.set("supervisorUsername",void 0),a.data.set("passCode",void 0)):(r.close(),o.publishAssociateProductsEvent())):(a.data.set("disableAction",!1),alert(kl.value(o._localeOLT+"customer.accessDenied")),a.data.set("supervisorUsername",void 0),a.data.set("passCode",void 0))})},cancel:function(){r.close()}},canUserClose:!0})},selectionOfLinkUnlink:function(){var e=this;Ember.isEmpty(e.get("linkUnlinkSelection"))?(e.set("showLink",!1),e.set("showUnlink",!1),e.set("disableLinkUnlink",!1)):"0"===e.get("linkUnlinkSelection")?(e.set("showLink",!0),e.set("showUnlink",!1)):(e.set("showUnlink",!0),e.set("showLink",!1))}.observes("linkUnlinkSelection"),showHideLinkUnlink:function(){var e=this;e.set("linkUnlinkSelection",void 0),0===e.primaryDevicesList.length&&e.xtraViewList.length>0?(e.set("data.radioButtonLinkUnlink",[{title:kl.value(e._localeBase+"unlinkButton"),value:"1"}]),e.set("showLink",!1)):e.primaryDevicesList.length>0&&0===e.xtraViewList.length?(e.set("data.radioButtonLinkUnlink",[{title:kl.value(e._localeBase+"linkButton"),value:"0"}]),e.set("showUnlink",!1)):e.primaryDevicesList.length>0&&e.xtraViewList.length>0&&e.set("data.radioButtonLinkUnlink",[{title:kl.value(e._localeBase+"linkButton"),value:"0"},{title:kl.value(e._localeBase+"unlinkButton"),value:"1"}])},enableDisableDeviceLocation:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("AssociateProducts","CheckGotvActiveValidation").done(function(t){t?e.set("disableDeviceUsage",!1):e.set("disableDeviceUsage",!0)}).fail(function(e){Komodo.Services.log("Error while checking feature toggle. Error Details:"+e)})},enableDisableDeviceLocationForFieldTrials:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("AssociateProducts","AllowHolidayHomeForFieldTrials").done(function(t){e.set("isAllow",t)}).fail(function(e){Komodo.Services.log("Error while checking feature toggle. Error Details:"+e)}),e.set("isAllowHHForFieldTrialsExternalDemoInternalDemo",e.get("isAllow"))},getCustomerProductDetails:function(){var e=this;if(e.set("isMnetAnalogueCustomer",!1),""!==e.getValueFromConstant("ProductsConstants","productsConstants.products.MNET")){var t=[e.getValueFromConstant("ProductsConstants","productsConstants.products.MNET")],a=Ember.Object.extend({init:function(){this._super();var a=this;a.set("CommercialProductIds",t),a.set("CustomerNumber",e.data.customerRefNo),a.set("AccountId",0)}}).create();e.getNewProcessID(),Komodo.Services.queryService.postJSON("/AccountProfile/GetCustomertProductDetails",{data:a}).done(function(t){t.CustomerProducts.length>0&&void 0!==t.CustomerProducts&&""!==t.CustomerProducts&&e.set("isMnetAnalogueCustomer",!0)}).error(function(e){var t=JSON.stringify(e);Komodo.log("getCustomerProductDetails ajax call failed. Error: "+t)})}},isOnlyOnePrincipalPackageAllow:function(){var e=this;Komodo.Services.featureToggleService.isEnabled("AssociateProducts","SpecialistCustomerDeviceLimit").done(function(t){e.set("isOnlyOnePrincipalPackage",t)}).fail(function(e){Komodo.Services.log("Error while checking feature toggle. Error Details:"+e)})},showSecondaryDecodeServices:!1,showPrimaryDecodeServices:!1,showPaymentOfMethod:!1,showSTSPackages:!1,xtraViewLabel:!1,devicesLabel:!1,country:void 0,primaryInsuranceText:void 0,secondaryInsuranceText:void 0,primaryAcessServiceText:void 0,secondaryAcessServiceText:void 0,primaryDevicesList:[],xtraViewList:[],chargePeriods:[],ShortTermSubscriptionPackages:[],allProductAddOn:[],allProductService:[],allInsurance:[],allAccessService:[],allProductCategories:[],primaryInsuranceproducts:[],primaryAccessServices:[],secondaryInsuranceproducts:[],secondaryAccessServices:[],productService:[],productAddOn:[],devicePairs:[],allHdAddOns:[],productHdAddOn:[],customerPaymentDetail:void 0,addressDetails:void 0,customerPersonalDetails:void 0,isDisableActiveButton:!0,disableAddButton:!1,dataService:void 0,deviceInfoService:void 0,showDetails:!1,showDevicesLinking:!1,showAddOnProducts:!1,showHdAddOnProducts:!1,showPackages:!1,servicesNotSelected:!1,disablePaymentsOptions:!0,disablePaymentOptions:!0,selectedGotvproductID:void 0,ischeckedCheckBox:!1,disableHdAddOnProducts:!1,services:void 0,serviceUid:[],isGoTvDeviceSelected:!1,addOnActivationDate:void 0,disablePrincipalProducts:!1,disableAddOnProducts:!1,productCategoryAndProductDetail:[],hardwareAddressDetails:[],holidayHomeKey:"29",countOfStolenSuspended:"0",countOfEmptyDecoders:"0",tempValue:void 0,_customerTypeSelected:void 0,_customerClassSelected:void 0,disableDeviceUsage:void 0,isActive:!1,residenceTypes:[],onlyPrincipalMobileProduct:void 0,principalPackageText:void 0,methodsOfPayment:[],methodsOfPaymentCanonical:[],insuranceSelection:!1,marketSegment:void 0,isNewCustomer:void 0,boxOfficeList:[],holidaySwitchedDevices:[],isAccountStatusAllowed:!0,accountStatus:void 0,linkUnlinkSelection:void 0,showLink:!1,showUnlink:!1,disableLinkUnlink:!1,disableSelectedPrimaryDecoder:!1,showLinkedXtraviewDevices:!1,disableAlternativeProductsForMobile:void 0,showPrimaryAccessService:!0,showSecondaryAccessService:!1,showInsurance:!0,sessionToken:void 0,isMnetAnalogueCustomer:void 0,paymentTypesList:[],methodOfPaymentRB:void 0,disableMethodOfPayment:!0,cashCount:0,debitOrderCount:0,isHolidayHomePrepaidAllowed:void 0,isHolidayHomeSwitchingAllowed:void 0,isMOPRequiredForHH:void 0,isHolidayHomeAndHasNoAgreementSA:void 0,FAStatus:void 0,multipleProductAddOnNames:[],
multipleProductAddOnUIDs:[],existingMultipleProductAddOnUIDs:[],isMultipleAddonAllowed:!1,isChargePeriodChanged:!1,isBOMDevice:!1,offerUIDs:[],multipleOffer:[]}),Komodo.Services.localizationService.registerNamespace("locale.associateProducts"),Komodo.Services.localizationService.registerNamespace("locale.commercialcustomer.devices"),Komodo.Services.localizationService.registerNamespace("locale.csicustomer.devices");